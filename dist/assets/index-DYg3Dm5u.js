const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MapView-sCrrrGB_.js","./ColorBackground-BpxlhsAU.js","./Basemap-txMq4mSe.js","./editableLayers-CYhdcXy5.js","./catalogUtils-CUrwiiy9.js","./basemapUtils-CKxmniyJ.js","./TileInfo-BYIGuMmP.js","./TileKey-DZd6gJy7.js","./ReactiveMap-DfRxNeBE.js","./IViewEvents-Bci6PjlS.js","./a11yUtils-CNrPSzw9.js","./heightModelInfoUtils-BXM51QSx.js","./normalizeUtils-Bfzm_LYu.js","./normalizeUtilsCommon-D15nAnG2.js","./utils-B9nmZlEF.js","./utils-DDkRDp67.js","./mat2df32-orApM5a3.js","./vec2f32-BbH2jxlN.js","./unitBezier-BX6NeAEr.js","./Tile-C2VyQP7F.js","./TileKey-BWfAq3Rb.js","./QueueProcessor-_O-nrwID.js","./quickselect-QQC62dOK.js","./definitions-DyYHcW4a.js","./HighlightDefaults-CtMnBrmX.js","./enums-D9v74xTE.js","./Texture-DSfj3BLt.js","./imageUtils-BR5Qrgn4.js","./capabilities-DWNhET5Y.js","./accessibleHandler-CtEJoz3H.js","./GoTo-CsPp7Z2E.js","./WebMap-DdHJap-N.js","./jsonContext-D8DD3JFk.js","./project-Bzv7INby.js","./NetworkElement-C3VwXqTQ.js","./AreaMeasurement2D-BqoPy8d1.js","./defaultUnit-CyOPNNyf.js","./getDefaultUnitForView-D1U6yyHU.js","./unitFormatUtils-fgQrXYy5.js","./ByteSizeUnit-BsxeN7wM.js","./SnappingVisualizer2D-DXiwlRGK.js","./SnappingVisualizer-C-gxu77y.js","./PointSnappingHint-BUItxqOx.js","./MeasurementWidgetContent-CazOxN0C.js","./GraphicManipulator-M84b8v4g.js","./BasemapGallery-CJ4MYLtz.js","./Heading-BIPtWxhG.js","./DistanceMeasurement2D-Ci2sGm2T.js","./Editor-D0gQaubs.js","./Spinner-CW25iRDi.js","./AttachmentInfo-BgVxsU--.js","./featureUtils-BgP8PuJX.js","./utils-Bh8VQtZz.js","./legacyIcon-DkTFV6vi.js","./arcade-5p2rPnkN.js","./TimeOnly-CCNZfiNO.js","./ImmutableArray-BPVd6ESQ.js","./symbolUtils-D6GCVC4t.js","./utils-B6gwh6MU.js","./cimSymbolUtils-D9zjZGUs.js","./webStyleSymbolUtils-BFuOnoZw.js","./devEnvironmentUtils-CnNDiFMM.js","./helpMessageUtils-M95XMmyR.js","./GraphicState-CU7ukD80.js","./HighlightHelper-Bl3i8aZF.js","./infoFor3D-BU6V8avP.js","./uploadAssetErrors-s1_2gKL3.js","./LayerList-DR5fxsOk.js","./actionUtils-DIQuj2bI.js","./Legend-DfLzMqJI.js","./featureReductionUtils-Caulfaw_.js","./EffectView-z4zOFRb5.js","./ExportImageParameters-B9ovVsk6.js","./scaleUtils-Br_lRawI.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils-oxe_UfMJ.js","./pixelRangeUtils-Ba7Ehdiw.js","./rendererConversion-DLuUnFdj.js","./heatmapRampUtils-Dz5Dbb6Z.js","./Search-BUOCk7Wj.js","./geometryUtils-DGsdz5Be.js","./commonProperties-DHiB1uzW.js","./ElevationLayer-BrAtfbHo.js","./ArcGISCachedService-DAsjSTv2.js","./TileInfoTilemapCache-Cfjd6t7j.js","./TilemapCache-CEG93r0O.js","./WorkerHandle-C3-e903d.js","./calcite-input-CYr-bSKK.js","./input2-vpKbnjD2.js","./Validation-CV45VzI0.js","./input-j1u1wOBY.js","./input-message-DP3i9HP8.js","./progress-Jqd0VP-X.js","./portalLayers-yg7XqjS4.js","./associatedFeatureServiceUtils-CIibzU4s.js","./fetchService-CJ0WbV5X.js","./arcgisLayers-C1W1CHG_.js","./WhereClause-glDmdDFW.js","./arcadeUtils-CvY928Q3.js","./languageUtils-B-348Fut.js","./shared-DGnoEFLX.js","./number-OnHq8ZJ1.js","./featureConversionUtils-WV_3Lc8O.js","./OptimizedFeature-6cJ-QFG5.js","./OptimizedGeometry-BF8iz5FO.js","./OptimizedFeatureSet-Blu9Ckm7.js","./layersLoader-_9IPAxSk.js","./layersCreator-C2Y4BKda.js","./BingMapsLayer-Ckq9A6Ig.js","./imageBitmapUtils-Dg2BTTtw.js","./BuildingSceneLayer-MwkFvdgA.js","./capabilities-D6exRNM4.js","./SceneService-C0EqbvGB.js","./originUtils-D69mHv66.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./resourceUtils-B2diVxPT.js","./resourceUtils-BqL-o1m1.js","./I3SLayerDefinitions-CQF81XHJ.js","./I3SUtil-OqhL3_yu.js","./I3SBinaryReader-CfJ_hK31.js","./VertexAttribute-Cq4MnHjR.js","./edgeUtils-BedMK3UP.js","./floatRGBA-CeypXdca.js","./symbolColorUtils-Cx3V544X.js","./interfaces-DDtDqZYj.js","./NormalAttribute.glsl-BcitOrRd.js","./BindType-BmZEZMMh.js","./orientedBoundingBox-DfzhPuxQ.js","./spatialReferenceEllipsoidUtils-DyhgP6A7.js","./computeTranslationToOriginAndRotation-B3oo7Zry.js","./popupUtils-FtHsJ4n-.js","./CSVLayer-zUPcmunf.js","./clientSideDefaults-DqNpyD-j.js","./QueryEngineCapabilities-DjYb9CEb.js","./CatalogLayer-5bFy8gUP.js","./utils-B0DEnGUC.js","./ClassBreaksDefinition-HFCPA5R8.js","./FeatureLayerSource-BkOwzc3-.js","./External-Pz0wiS3e.js","./MeshTransform-bGfX9hsv.js","./axisAngleDegrees-CAMbRrCG.js","./editingSupport-Bgj8P6iJ.js","./QueryTask-Cy3ZPdTp.js","./executeForIds-DvvmdYyl.js","./query-BQGyJpyN.js","./pbfQueryUtils-OpUkzmTQ.js","./pbf-DdJ9ZGZO.js","./executeQueryJSON-CB0tjTMj.js","./DimensionLayer-Cu0d4u5B.js","./Analysis-Du8w355k.js","./GeoJSONLayer-D7WrpPmX.js","./ImageryLayer-vD0Puols.js","./RasterPresetRendererMixin-DbSfI_Ej.js","./multidimensionalUtils-BTItiMtT.js","./dataUtils-Kqo4pnXJ.js","./RasterSymbolizer-DptVXZCI.js","./ImageryTileLayer-BsWt1vf6.js","./RawBlockCache-voqmZcZK.js","./rasterProjectionHelper-D1am6UrW.js","./GCSShiftTransform-BQ1LCF54.js","./IntegratedMeshLayer-CVi5iII-.js","./persistable-BhYEGjo9.js","./resourceExtension-BfuSB5Mh.js","./KMLLayer-AS-9b0lB.js","./kmlUtils-1cfCEanl.js","./KnowledgeGraphLayer-DAjEO5if.js","./KnowledgeGraphSublayer-DmUaTKAI.js","./knowledgeGraphService-CB7ay11x.js","./GraphQueryStreaming-DECB2Fmx.js","./FeatureStore-Oz3_ZmRN.js","./BoundsStore-bwCfkHDC.js","./PooledRBush-DjXG6ATW.js","./timeSupport-CPdSVQZu.js","./queryUtils-B9PaFz6e.js","./json-Wa8cmqdu.js","./optimizedFeatureQueryEngineAdapter-BOPMFOve.js","./centroid-DdLmOD72.js","./QueryEngine-CDCUGDmA.js","./utils-TduxIFmk.js","./SnappingCandidate-DGkpYqI6.js","./LineOfSightLayer-d2XDqvdr.js","./featureReferenceUtils-Cg9K-hIq.js","./IntersectorInterfaces-CmNINbyF.js","./boundedPlane-ftEeG7Bz.js","./lineSegment-BVy-obCT.js","./LinkChartLayer-C_Xqhz8K.js","./MapImageLayer-CAP9_vPu.js","./SublayersOwner-BMUPbceg.js","./MapNotesLayer-BNKPfIDl.js","./objectIdUtils-4dd1rf9p.js","./MediaLayer-CbSkbThz.js","./MediaElementView-CiPA-RXe.js","./normalizeUtilsSync-C8BMJOuy.js","./OGCFeatureLayer-DJyUkClb.js","./ogcFeatureUtils-CGNUYFn0.js","./geojson-CsPku0N1.js","./date-Ctp1FiBW.js","./sourceUtils-C0R2_280.js","./OpenStreetMapLayer-DZTsJLCX.js","./WebTileLayer-D4T1C_Fv.js","./PointCloudLayer-CCBh4a09.js","./PointCloudUniqueValueRenderer-7wMxq4VO.js","./RouteLayer-CnCjTr6A.js","./Stop-SZT_PzdB.js","./SceneLayer-Bvs8YdS6.js","./Mesh-CSAQeWk_.js","./MeshComponent-Dk_BBQEh.js","./meshProperties-C4iW0Ukm.js","./MeshVertexAttributes-Bv6Qd8ja.js","./triangulationUtils-Bl_cDkgR.js","./earcut-D9gy186-.js","./Indices-DY5izZ8C.js","./deduplicate-CqUq6lPL.js","./vertexSpaceConversion-DNmOoaFC.js","./vec3-BokYmhRu.js","./BufferView-DUQl-y-v.js","./vec4-BNRI2Ank.js","./meshSpatialReferenceScaleUtils-DU-hUdl5.js","./SubtypeGroupLayer-WLEJRZ8S.js","./TileLayer-ByGILPAM.js","./VectorTileLayer-BOT0tdpk.js","./StyleRepository-BieaIeBv.js","./StyleDefinition-CGc5fep2.js","./enums-BRzLM11V.js","./GeometryUtils-CRfw_2no.js","./VertexElementDescriptor-BLyltQyJ.js","./VideoLayer-ChTCD8FO.js","./TelemetryDisplay-KNiWOP7b.js","./ViewshedLayer-Cjz74c8o.js","./VoxelLayer-DJ6bKUNQ.js","./WFSLayer-DyOaIuwi.js","./wfsUtils-BKfFEXGI.js","./xmlUtils-CtUoQO7q.js","./WMSLayer-C1ETnr8D.js","./crsUtils-DAndLU68.js","./ExportWMSImageParameters-DyFX9zMY.js","./WMTSLayer-DBk910fg.js","./groupLayerUtils-gpznKsqH.js","./utils-CLbPmlNS.js","./geometryEngineJSON-axG6AZK_.js","./statsWorker-eSmXr85F.js","./geometryEngineWorker-BCW7smKj.js","./CSVSourceWorker-C6jppEpz.js","./EdgeProcessingWorker-CAJC-ZhK.js","./workerHelper-BsJ6Amcq.js","./InterleavedLayout-DhPa3wxF.js","./types-D0PSWh4d.js","./Util-DQl0LXyX.js","./edgeProcessing-D11IM6aB.js","./glUtil-CAJRmga-.js","./Normals-CLO3s4HJ.js","./ElevationSamplerWorker-C2Ivt6uo.js","./FeatureServiceSnappingSourceWorker-DGSK-yrH.js","./symbologySnappingCandidates-WPsNUzt6.js","./GeoJSONSourceWorker-CqYokrdP.js","./MemorySourceWorker-CDEqmaYD.js","./PBFDecoderWorker-D_4EYip0.js","./dehydratedFeatures-BF2LmiAU.js","./FeaturePipelineWorker-jM1rzwDZ.js","./AttributeStore-DxwFVBsN.js","./LabelMetric-Boz3qG9i.js","./Program-Bpkd1xN2.js","./BufferObject-DqaUMsVf.js","./BoundingBox-CnpCxTZE.js","./CIMSymbolHelper-BxUGfX5q.js","./BidiEngine-QXap_35O.js","./fontUtils-BUWkHiaL.js","./Rect-CUzevAry.js","./UpdateTracking2D-CdN9f_tC.js","./MeshWriterRegistry-juX-1hp1.js","./PieChartMeshWriter-RhlYQ6cN.js","./TurboLine-CDsBC-lD.js","./constants-F8oTIn7N.js","./grouping-B-DX-Qu4.js","./CircularArray-CujHzHWW.js","./createConnection-Bm7I2EbS.js","./PointCloudWorker-upAZbzKQ.js","./vec3f32-nZdmKIgz.js","./RasterWorker-ByB63Pg2.js","./SceneLayerSnappingSourceWorker-D3p4ilVB.js","./Octree-C9xa-Igd.js","./SceneLayerWorker-BMAd6PUS.js","./WFSSourceWorker-BP3cMNij.js","./WorkerTileHandler-O-CA7rdp.js","./config-BOD8--da.js","./SourceLayerData-D6HrqvYa.js","./Feature3DPipelineWorker-C-9-CXVD.js","./LodRenderer-9VV-7sXT.js","./Texture-F1i11T6C.js","./renderState-5U5mGt-0.js","./basicInterfaces-CZwQPxTp.js","./triangle-CI1s7hGl.js","./requestImageUtils-BTI6PUyH.js","./HUDMaterial.glsl-CwW2Bkm9.js","./VertexArrayObject-Dphx0-Ur.js","./utils-C1tIxHkl.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-GuqgquCN.js","./DefaultMaterial-joZlk6Bg.js","./RealisticTree.glsl-DCuni2_u.js","./deleteForwardEdits-B5ZMknkf.js","./featureLayerUtils-DzklkwKT.js","./BinsQuery-CEOfJAVZ.js","./SelfSnappingEngine-DLZ1quNy.js","./geodesicLengthMeasurementUtils-398YrD6N.js","./GridSnappingEngine-DqHpHMAb.js","./gridUtils-BaX_yBcx.js","./FeatureSnappingEngine-BfFrJRg6.js","./editingTools-D2I2tFvn.js","./editPlaneUtils-DzysbbXp.js","./automaticLengthMeasurementUtils-DlJpXTx4.js","./helpMessageUtils3d-CrWf-Js8.js","./automaticAreaMeasurementUtils-DhU4HWuE.js","./drawUtils-Cpk7FeU3.js","./ImageMaterial.glsl-yCS7tLYl.js","./TextOverlayItem-DpJTFVII.js","./RibbonLine.glsl-CmMOTWJs.js","./DefaultLayouts-DePjLdL8.js","./SelectedVertexTooltipInfo-DEBtXTeH.js","./TranslateTooltipInfo-CzGxDzTx.js","./ExtentScaleTooltipInfo-BjuDwL8i.js","./LineCallout.glsl-TuKcMUbH.js","./highlightUtils-Bh_mmOwW.js","./geometryServiceUtils-DKjqeLRb.js","./LayerView-yXtdkrUG.js","./GraphicMover-MtB_6RiJ.js","./Box-C4id9zhp.js","./settings-BJ2ISspE.js","./Reshape-Cu2Pdt4I.js","./calcite-block-BCsykYIX.js","./handle-BXg9nLWl.js","./calcite-radio-button-group-CZqV0-AH.js","./calcite-list-6BG17EIa.js","./resources4-F8vB_VGv.js","./utils3-Efm9EQyM.js","./filter-B7I2lNii.js","./calcite-list-item-CvV5ogwp.js","./GridControls-DGJl_hyK.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();var wk={exports:{}},Tw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LU;function f_e(){if(LU)return Tw;LU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,n,r){var o=null;if(r!==void 0&&(o=""+r),n.key!==void 0&&(o=""+n.key),"key"in n){r={};for(var l in n)l!=="key"&&(r[l]=n[l])}else r=n;return n=r.ref,{$$typeof:t,type:s,key:o,ref:n!==void 0?n:null,props:r}}return Tw.Fragment=e,Tw.jsx=i,Tw.jsxs=i,Tw}var FU;function p_e(){return FU||(FU=1,wk.exports=f_e()),wk.exports}var Vt=p_e(),Sk={exports:{}},Zi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zU;function m_e(){if(zU)return Zi;zU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(we){return we===null||typeof we!="object"?null:(we=_&&we[_]||we["@@iterator"],typeof we=="function"?we:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,A={};function k(we,Fe,it){this.props=we,this.context=Fe,this.refs=A,this.updater=it||S}k.prototype.isReactComponent={},k.prototype.setState=function(we,Fe){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,Fe,"setState")},k.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function $(){}$.prototype=k.prototype;function F(we,Fe,it){this.props=we,this.context=Fe,this.refs=A,this.updater=it||S}var G=F.prototype=new $;G.constructor=F,P(G,k.prototype),G.isPureReactComponent=!0;var V=Array.isArray,B={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function J(we,Fe,it,vt,ot,ut){return it=ut.ref,{$$typeof:t,type:we,key:Fe,ref:it!==void 0?it:null,props:ut}}function re(we,Fe){return J(we.type,Fe,void 0,void 0,void 0,we.props)}function se(we){return typeof we=="object"&&we!==null&&we.$$typeof===t}function oe(we){var Fe={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(it){return Fe[it]})}var pe=/\/+/g;function ce(we,Fe){return typeof we=="object"&&we!==null&&we.key!=null?oe(""+we.key):Fe.toString(36)}function ue(){}function ne(we){switch(we.status){case"fulfilled":return we.value;case"rejected":throw we.reason;default:switch(typeof we.status=="string"?we.then(ue,ue):(we.status="pending",we.then(function(Fe){we.status==="pending"&&(we.status="fulfilled",we.value=Fe)},function(Fe){we.status==="pending"&&(we.status="rejected",we.reason=Fe)})),we.status){case"fulfilled":return we.value;case"rejected":throw we.reason}}throw we}function de(we,Fe,it,vt,ot){var ut=typeof we;(ut==="undefined"||ut==="boolean")&&(we=null);var Ct=!1;if(we===null)Ct=!0;else switch(ut){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(we.$$typeof){case t:case e:Ct=!0;break;case y:return Ct=we._init,de(Ct(we._payload),Fe,it,vt,ot)}}if(Ct)return ot=ot(we),Ct=vt===""?"."+ce(we,0):vt,V(ot)?(it="",Ct!=null&&(it=Ct.replace(pe,"$&/")+"/"),de(ot,Fe,it,"",function(Dt){return Dt})):ot!=null&&(se(ot)&&(ot=re(ot,it+(ot.key==null||we&&we.key===ot.key?"":(""+ot.key).replace(pe,"$&/")+"/")+Ct)),Fe.push(ot)),1;Ct=0;var qt=vt===""?".":vt+":";if(V(we))for(var Lt=0;Lt<we.length;Lt++)vt=we[Lt],ut=qt+ce(vt,Lt),Ct+=de(vt,Fe,it,ut,ot);else if(Lt=x(we),typeof Lt=="function")for(we=Lt.call(we),Lt=0;!(vt=we.next()).done;)vt=vt.value,ut=qt+ce(vt,Lt++),Ct+=de(vt,Fe,it,ut,ot);else if(ut==="object"){if(typeof we.then=="function")return de(ne(we),Fe,it,vt,ot);throw Fe=String(we),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function Se(we,Fe,it){if(we==null)return we;var vt=[],ot=0;return de(we,vt,"","",function(ut){return Fe.call(it,ut,ot++)}),vt}function Pe(we){if(we._status===-1){var Fe=we._result;Fe=Fe(),Fe.then(function(it){(we._status===0||we._status===-1)&&(we._status=1,we._result=it)},function(it){(we._status===0||we._status===-1)&&(we._status=2,we._result=it)}),we._status===-1&&(we._status=0,we._result=Fe)}if(we._status===1)return we._result.default;throw we._result}var Re=typeof reportError=="function"?reportError:function(we){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof we=="object"&&we!==null&&typeof we.message=="string"?String(we.message):String(we),error:we});if(!window.dispatchEvent(Fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",we);return}console.error(we)};function Oe(){}return Zi.Children={map:Se,forEach:function(we,Fe,it){Se(we,function(){Fe.apply(this,arguments)},it)},count:function(we){var Fe=0;return Se(we,function(){Fe++}),Fe},toArray:function(we){return Se(we,function(Fe){return Fe})||[]},only:function(we){if(!se(we))throw Error("React.Children.only expected to receive a single React element child.");return we}},Zi.Component=k,Zi.Fragment=i,Zi.Profiler=n,Zi.PureComponent=F,Zi.StrictMode=s,Zi.Suspense=u,Zi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Zi.act=function(){throw Error("act(...) is not supported in production builds of React.")},Zi.cache=function(we){return function(){return we.apply(null,arguments)}},Zi.cloneElement=function(we,Fe,it){if(we==null)throw Error("The argument must be a React element, but you passed "+we+".");var vt=P({},we.props),ot=we.key,ut=void 0;if(Fe!=null)for(Ct in Fe.ref!==void 0&&(ut=void 0),Fe.key!==void 0&&(ot=""+Fe.key),Fe)!W.call(Fe,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&Fe.ref===void 0||(vt[Ct]=Fe[Ct]);var Ct=arguments.length-2;if(Ct===1)vt.children=it;else if(1<Ct){for(var qt=Array(Ct),Lt=0;Lt<Ct;Lt++)qt[Lt]=arguments[Lt+2];vt.children=qt}return J(we.type,ot,void 0,void 0,ut,vt)},Zi.createContext=function(we){return we={$$typeof:o,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null},we.Provider=we,we.Consumer={$$typeof:r,_context:we},we},Zi.createElement=function(we,Fe,it){var vt,ot={},ut=null;if(Fe!=null)for(vt in Fe.key!==void 0&&(ut=""+Fe.key),Fe)W.call(Fe,vt)&&vt!=="key"&&vt!=="__self"&&vt!=="__source"&&(ot[vt]=Fe[vt]);var Ct=arguments.length-2;if(Ct===1)ot.children=it;else if(1<Ct){for(var qt=Array(Ct),Lt=0;Lt<Ct;Lt++)qt[Lt]=arguments[Lt+2];ot.children=qt}if(we&&we.defaultProps)for(vt in Ct=we.defaultProps,Ct)ot[vt]===void 0&&(ot[vt]=Ct[vt]);return J(we,ut,void 0,void 0,null,ot)},Zi.createRef=function(){return{current:null}},Zi.forwardRef=function(we){return{$$typeof:l,render:we}},Zi.isValidElement=se,Zi.lazy=function(we){return{$$typeof:y,_payload:{_status:-1,_result:we},_init:Pe}},Zi.memo=function(we,Fe){return{$$typeof:f,type:we,compare:Fe===void 0?null:Fe}},Zi.startTransition=function(we){var Fe=B.T,it={};B.T=it;try{var vt=we(),ot=B.S;ot!==null&&ot(it,vt),typeof vt=="object"&&vt!==null&&typeof vt.then=="function"&&vt.then(Oe,Re)}catch(ut){Re(ut)}finally{B.T=Fe}},Zi.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Zi.use=function(we){return B.H.use(we)},Zi.useActionState=function(we,Fe,it){return B.H.useActionState(we,Fe,it)},Zi.useCallback=function(we,Fe){return B.H.useCallback(we,Fe)},Zi.useContext=function(we){return B.H.useContext(we)},Zi.useDebugValue=function(){},Zi.useDeferredValue=function(we,Fe){return B.H.useDeferredValue(we,Fe)},Zi.useEffect=function(we,Fe){return B.H.useEffect(we,Fe)},Zi.useId=function(){return B.H.useId()},Zi.useImperativeHandle=function(we,Fe,it){return B.H.useImperativeHandle(we,Fe,it)},Zi.useInsertionEffect=function(we,Fe){return B.H.useInsertionEffect(we,Fe)},Zi.useLayoutEffect=function(we,Fe){return B.H.useLayoutEffect(we,Fe)},Zi.useMemo=function(we,Fe){return B.H.useMemo(we,Fe)},Zi.useOptimistic=function(we,Fe){return B.H.useOptimistic(we,Fe)},Zi.useReducer=function(we,Fe,it){return B.H.useReducer(we,Fe,it)},Zi.useRef=function(we){return B.H.useRef(we)},Zi.useState=function(we){return B.H.useState(we)},Zi.useSyncExternalStore=function(we,Fe,it){return B.H.useSyncExternalStore(we,Fe,it)},Zi.useTransition=function(){return B.H.useTransition()},Zi.version="19.0.0",Zi}var qU;function Hz(){return qU||(qU=1,Sk.exports=m_e()),Sk.exports}var g_e=Hz(),Ek={exports:{}},Iw={},Ck={exports:{}},Pk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VU;function y_e(){return VU||(VU=1,function(t){function e(Se,Pe){var Re=Se.length;Se.push(Pe);e:for(;0<Re;){var Oe=Re-1>>>1,we=Se[Oe];if(0<n(we,Pe))Se[Oe]=Pe,Se[Re]=we,Re=Oe;else break e}}function i(Se){return Se.length===0?null:Se[0]}function s(Se){if(Se.length===0)return null;var Pe=Se[0],Re=Se.pop();if(Re!==Pe){Se[0]=Re;e:for(var Oe=0,we=Se.length,Fe=we>>>1;Oe<Fe;){var it=2*(Oe+1)-1,vt=Se[it],ot=it+1,ut=Se[ot];if(0>n(vt,Re))ot<we&&0>n(ut,vt)?(Se[Oe]=ut,Se[ot]=Re,Oe=ot):(Se[Oe]=vt,Se[it]=Re,Oe=it);else if(ot<we&&0>n(ut,Re))Se[Oe]=ut,Se[ot]=Re,Oe=ot;else break e}}return Pe}function n(Se,Pe){var Re=Se.sortIndex-Pe.sortIndex;return Re!==0?Re:Se.id-Pe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],f=[],y=1,_=null,x=3,S=!1,P=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function G(Se){for(var Pe=i(f);Pe!==null;){if(Pe.callback===null)s(f);else if(Pe.startTime<=Se)s(f),Pe.sortIndex=Pe.expirationTime,e(u,Pe);else break;Pe=i(f)}}function V(Se){if(A=!1,G(Se),!P)if(i(u)!==null)P=!0,ne();else{var Pe=i(f);Pe!==null&&de(V,Pe.startTime-Se)}}var B=!1,W=-1,J=5,re=-1;function se(){return!(t.unstable_now()-re<J)}function oe(){if(B){var Se=t.unstable_now();re=Se;var Pe=!0;try{e:{P=!1,A&&(A=!1,$(W),W=-1),S=!0;var Re=x;try{t:{for(G(Se),_=i(u);_!==null&&!(_.expirationTime>Se&&se());){var Oe=_.callback;if(typeof Oe=="function"){_.callback=null,x=_.priorityLevel;var we=Oe(_.expirationTime<=Se);if(Se=t.unstable_now(),typeof we=="function"){_.callback=we,G(Se),Pe=!0;break t}_===i(u)&&s(u),G(Se)}else s(u);_=i(u)}if(_!==null)Pe=!0;else{var Fe=i(f);Fe!==null&&de(V,Fe.startTime-Se),Pe=!1}}break e}finally{_=null,x=Re,S=!1}Pe=void 0}}finally{Pe?pe():B=!1}}}var pe;if(typeof F=="function")pe=function(){F(oe)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ue=ce.port2;ce.port1.onmessage=oe,pe=function(){ue.postMessage(null)}}else pe=function(){k(oe,0)};function ne(){B||(B=!0,pe())}function de(Se,Pe){W=k(function(){Se(t.unstable_now())},Pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Se){Se.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,ne())},t.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Se?Math.floor(1e3/Se):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(Se){switch(x){case 1:case 2:case 3:var Pe=3;break;default:Pe=x}var Re=x;x=Pe;try{return Se()}finally{x=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Se,Pe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Re=x;x=Se;try{return Pe()}finally{x=Re}},t.unstable_scheduleCallback=function(Se,Pe,Re){var Oe=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?Oe+Re:Oe):Re=Oe,Se){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Re+we,Se={id:y++,callback:Pe,priorityLevel:Se,startTime:Re,expirationTime:we,sortIndex:-1},Re>Oe?(Se.sortIndex=Re,e(f,Se),i(u)===null&&Se===i(f)&&(A?($(W),W=-1):A=!0,de(V,Re-Oe))):(Se.sortIndex=we,e(u,Se),P||S||(P=!0,ne())),Se},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(Se){var Pe=x;return function(){var Re=x;x=Pe;try{return Se.apply(this,arguments)}finally{x=Re}}}}(Pk)),Pk}var GU;function v_e(){return GU||(GU=1,Ck.exports=y_e()),Ck.exports}var Tk={exports:{}},Ma={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jU;function __e(){if(jU)return Ma;jU=1;var t=Hz();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function r(u,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:_==null?null:""+_,children:u,containerInfo:f,implementation:y}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ma.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ma.createPortal=function(u,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(u,f,null,y)},Ma.flushSync=function(u){var f=o.T,y=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=f,s.p=y,s.d.f()}},Ma.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(u,f))},Ma.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},Ma.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var y=f.as,_=l(y,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?s.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&s.d.X(u,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ma.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=l(f.as,f.crossOrigin);s.d.M(u,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(u)},Ma.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=l(y,f.crossOrigin);s.d.L(u,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ma.preloadModule=function(u,f){if(typeof u=="string")if(f){var y=l(f.as,f.crossOrigin);s.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(u)},Ma.requestFormReset=function(u){s.d.r(u)},Ma.unstable_batchedUpdates=function(u,f){return u(f)},Ma.useFormState=function(u,f,y){return o.H.useFormState(u,f,y)},Ma.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ma.version="19.0.0",Ma}var BU;function b_e(){if(BU)return Tk.exports;BU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tk.exports=__e(),Tk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HU;function x_e(){if(HU)return Iw;HU=1;var t=v_e(),e=Hz(),i=b_e();function s(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)E+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(w){return!(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)}var r=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),S=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function W(w){return w===null||typeof w!="object"?null:(w=B&&w[B]||w["@@iterator"],typeof w=="function"?w:null)}var J=Symbol.for("react.client.reference");function re(w){if(w==null)return null;if(typeof w=="function")return w.$$typeof===J?null:w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case u:return"Fragment";case l:return"Portal";case y:return"Profiler";case f:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case S:return(w.displayName||"Context")+".Provider";case x:return(w._context.displayName||"Context")+".Consumer";case P:var E=w.render;return w=w.displayName,w||(w=E.displayName||E.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case $:return E=w.displayName||null,E!==null?E:re(w.type)||"Memo";case F:E=w._payload,w=w._init;try{return re(w(E))}catch{}}return null}var se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.assign,pe,ce;function ue(w){if(pe===void 0)try{throw Error()}catch(D){var E=D.stack.trim().match(/\n( *(at )?)/);pe=E&&E[1]||"",ce=-1<D.stack.indexOf(`
    at`)?" (<anonymous>)":-1<D.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+w+ce}var ne=!1;function de(w,E){if(!w||ne)return"";ne=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(E){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(gt){var at=gt}Reflect.construct(w,[],It)}else{try{It.call()}catch(gt){at=gt}w.call(It.prototype)}}else{try{throw Error()}catch(gt){at=gt}(It=w())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(gt){if(gt&&at&&typeof gt.stack=="string")return[gt.stack,at.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Z=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");Z&&Z.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ie=z.DetermineComponentFrameRoot(),_e=ie[0],De=ie[1];if(_e&&De){var qe=_e.split(`
`),We=De.split(`
`);for(Z=z=0;z<qe.length&&!qe[z].includes("DetermineComponentFrameRoot");)z++;for(;Z<We.length&&!We[Z].includes("DetermineComponentFrameRoot");)Z++;if(z===qe.length||Z===We.length)for(z=qe.length-1,Z=We.length-1;1<=z&&0<=Z&&qe[z]!==We[Z];)Z--;for(;1<=z&&0<=Z;z--,Z--)if(qe[z]!==We[Z]){if(z!==1||Z!==1)do if(z--,Z--,0>Z||qe[z]!==We[Z]){var yt=`
`+qe[z].replace(" at new "," at ");return w.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",w.displayName)),yt}while(1<=z&&0<=Z);break}}}finally{ne=!1,Error.prepareStackTrace=D}return(D=w?w.displayName||w.name:"")?ue(D):""}function Se(w){switch(w.tag){case 26:case 27:case 5:return ue(w.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return w=de(w.type,!1),w;case 11:return w=de(w.type.render,!1),w;case 1:return w=de(w.type,!0),w;default:return""}}function Pe(w){try{var E="";do E+=Se(w),w=w.return;while(w);return E}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}function Re(w){var E=w,D=w;if(w.alternate)for(;E.return;)E=E.return;else{w=E;do E=w,(E.flags&4098)!==0&&(D=E.return),w=E.return;while(w)}return E.tag===3?D:null}function Oe(w){if(w.tag===13){var E=w.memoizedState;if(E===null&&(w=w.alternate,w!==null&&(E=w.memoizedState)),E!==null)return E.dehydrated}return null}function we(w){if(Re(w)!==w)throw Error(s(188))}function Fe(w){var E=w.alternate;if(!E){if(E=Re(w),E===null)throw Error(s(188));return E!==w?null:w}for(var D=w,z=E;;){var Z=D.return;if(Z===null)break;var ie=Z.alternate;if(ie===null){if(z=Z.return,z!==null){D=z;continue}break}if(Z.child===ie.child){for(ie=Z.child;ie;){if(ie===D)return we(Z),w;if(ie===z)return we(Z),E;ie=ie.sibling}throw Error(s(188))}if(D.return!==z.return)D=Z,z=ie;else{for(var _e=!1,De=Z.child;De;){if(De===D){_e=!0,D=Z,z=ie;break}if(De===z){_e=!0,z=Z,D=ie;break}De=De.sibling}if(!_e){for(De=ie.child;De;){if(De===D){_e=!0,D=ie,z=Z;break}if(De===z){_e=!0,z=ie,D=Z;break}De=De.sibling}if(!_e)throw Error(s(189))}}if(D.alternate!==z)throw Error(s(190))}if(D.tag!==3)throw Error(s(188));return D.stateNode.current===D?w:E}function it(w){var E=w.tag;if(E===5||E===26||E===27||E===6)return w;for(w=w.child;w!==null;){if(E=it(w),E!==null)return E;w=w.sibling}return null}var vt=Array.isArray,ot=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Ct=[],qt=-1;function Lt(w){return{current:w}}function Dt(w){0>qt||(w.current=Ct[qt],Ct[qt]=null,qt--)}function Wi(w,E){qt++,Ct[qt]=w.current,w.current=E}var us=Lt(null),fn=Lt(null),Us=Lt(null),dr=Lt(null);function ho(w,E){switch(Wi(Us,E),Wi(fn,w),Wi(us,null),w=E.nodeType,w){case 9:case 11:E=(E=E.documentElement)&&(E=E.namespaceURI)?dU(E):0;break;default:if(w=w===8?E.parentNode:E,E=w.tagName,w=w.namespaceURI)w=dU(w),E=fU(w,E);else switch(E){case"svg":E=1;break;case"math":E=2;break;default:E=0}}Dt(us),Wi(us,E)}function ss(){Dt(us),Dt(fn),Dt(Us)}function ye(w){w.memoizedState!==null&&Wi(dr,w);var E=us.current,D=fU(E,w.type);E!==D&&(Wi(fn,w),Wi(us,D))}function Fi(w){fn.current===w&&(Dt(us),Dt(fn)),dr.current===w&&(Dt(dr),ww._currentValue=ut)}var Sr=Object.prototype.hasOwnProperty,ri=t.unstable_scheduleCallback,Ai=t.unstable_cancelCallback,pn=t.unstable_shouldYield,ms=t.unstable_requestPaint,Ji=t.unstable_now,tn=t.unstable_getCurrentPriorityLevel,mn=t.unstable_ImmediatePriority,Br=t.unstable_UserBlockingPriority,Cs=t.unstable_NormalPriority,xt=t.unstable_LowPriority,Ys=t.unstable_IdlePriority,m=t.log,j=t.unstable_setDisableYieldValue,T=null,p=null;function h(w){if(p&&typeof p.onCommitFiberRoot=="function")try{p.onCommitFiberRoot(T,w,void 0,(w.current.flags&128)===128)}catch{}}function a(w){if(typeof m=="function"&&j(w),p&&typeof p.setStrictMode=="function")try{p.setStrictMode(T,w)}catch{}}var c=Math.clz32?Math.clz32:v,d=Math.log,g=Math.LN2;function v(w){return w>>>=0,w===0?32:31-(d(w)/g|0)|0}var b=128,C=4194304;function M(w){var E=w&42;if(E!==0)return E;switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return w&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return w}}function O(w,E){var D=w.pendingLanes;if(D===0)return 0;var z=0,Z=w.suspendedLanes,ie=w.pingedLanes,_e=w.warmLanes;w=w.finishedLanes!==0;var De=D&134217727;return De!==0?(D=De&~Z,D!==0?z=M(D):(ie&=De,ie!==0?z=M(ie):w||(_e=De&~_e,_e!==0&&(z=M(_e))))):(De=D&~Z,De!==0?z=M(De):ie!==0?z=M(ie):w||(_e=D&~_e,_e!==0&&(z=M(_e)))),z===0?0:E!==0&&E!==z&&(E&Z)===0&&(Z=z&-z,_e=E&-E,Z>=_e||Z===32&&(_e&4194176)!==0)?E:z}function L(w,E){return(w.pendingLanes&~(w.suspendedLanes&~w.pingedLanes)&E)===0}function q(w,E){switch(w){case 1:case 2:case 4:case 8:return E+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var w=b;return b<<=1,(b&4194176)===0&&(b=128),w}function ee(){var w=C;return C<<=1,(C&62914560)===0&&(C=4194304),w}function Q(w){for(var E=[],D=0;31>D;D++)E.push(w);return E}function ge(w,E){w.pendingLanes|=E,E!==268435456&&(w.suspendedLanes=0,w.pingedLanes=0,w.warmLanes=0)}function ve(w,E,D,z,Z,ie){var _e=w.pendingLanes;w.pendingLanes=D,w.suspendedLanes=0,w.pingedLanes=0,w.warmLanes=0,w.expiredLanes&=D,w.entangledLanes&=D,w.errorRecoveryDisabledLanes&=D,w.shellSuspendCounter=0;var De=w.entanglements,qe=w.expirationTimes,We=w.hiddenUpdates;for(D=_e&~D;0<D;){var yt=31-c(D),It=1<<yt;De[yt]=0,qe[yt]=-1;var at=We[yt];if(at!==null)for(We[yt]=null,yt=0;yt<at.length;yt++){var gt=at[yt];gt!==null&&(gt.lane&=-536870913)}D&=~It}z!==0&&fe(w,z,0),ie!==0&&Z===0&&w.tag!==0&&(w.suspendedLanes|=ie&~(_e&~E))}function fe(w,E,D){w.pendingLanes|=E,w.suspendedLanes&=~E;var z=31-c(E);w.entangledLanes|=E,w.entanglements[z]=w.entanglements[z]|1073741824|D&4194218}function Ce(w,E){var D=w.entangledLanes|=E;for(w=w.entanglements;D;){var z=31-c(D),Z=1<<z;Z&E|w[z]&E&&(w[z]|=E),D&=~Z}}function Ie(w){return w&=-w,2<w?8<w?(w&134217727)!==0?32:268435456:8:2}function Ne(){var w=ot.p;return w!==0?w:(w=window.event,w===void 0?32:DU(w.type))}function Ve(w,E){var D=ot.p;try{return ot.p=w,E()}finally{ot.p=D}}var Xe=Math.random().toString(36).slice(2),et="__reactFiber$"+Xe,dt="__reactProps$"+Xe,ct="__reactContainer$"+Xe,mt="__reactEvents$"+Xe,lt="__reactListeners$"+Xe,gi="__reactHandles$"+Xe,oi="__reactResources$"+Xe,Ni="__reactMarker$"+Xe;function Qi(w){delete w[et],delete w[dt],delete w[mt],delete w[lt],delete w[gi]}function _s(w){var E=w[et];if(E)return E;for(var D=w.parentNode;D;){if(E=D[ct]||D[et]){if(D=E.alternate,E.child!==null||D!==null&&D.child!==null)for(w=gU(w);w!==null;){if(D=w[et])return D;w=gU(w)}return E}w=D,D=w.parentNode}return null}function as(w){if(w=w[et]||w[ct]){var E=w.tag;if(E===5||E===6||E===13||E===26||E===27||E===3)return w}return null}function $i(w){var E=w.tag;if(E===5||E===26||E===27||E===6)return w.stateNode;throw Error(s(33))}function ui(w){var E=w[oi];return E||(E=w[oi]={hoistableStyles:new Map,hoistableScripts:new Map}),E}function Kt(w){w[Ni]=!0}var Xs=new Set,Ps={};function Qn(w,E){wi(w,E),wi(w+"Capture",E)}function wi(w,E){for(Ps[w]=E,w=0;w<E.length;w++)Xs.add(E[w])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ns=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fr={},eh={};function Zc(w){return Sr.call(eh,w)?!0:Sr.call(fr,w)?!1:ns.test(w)?eh[w]=!0:(fr[w]=!0,!1)}function ze(w,E,D){if(Zc(E))if(D===null)w.removeAttribute(E);else{switch(typeof D){case"undefined":case"function":case"symbol":w.removeAttribute(E);return;case"boolean":var z=E.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){w.removeAttribute(E);return}}w.setAttribute(E,""+D)}}function pt(w,E,D){if(D===null)w.removeAttribute(E);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":w.removeAttribute(E);return}w.setAttribute(E,""+D)}}function Pt(w,E,D,z){if(z===null)w.removeAttribute(D);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":w.removeAttribute(D);return}w.setAttributeNS(E,D,""+z)}}function ei(w){switch(typeof w){case"bigint":case"boolean":case"number":case"string":case"undefined":return w;case"object":return w;default:return""}}function Os(w){var E=w.type;return(w=w.nodeName)&&w.toLowerCase()==="input"&&(E==="checkbox"||E==="radio")}function kn(w){var E=Os(w)?"checked":"value",D=Object.getOwnPropertyDescriptor(w.constructor.prototype,E),z=""+w[E];if(!w.hasOwnProperty(E)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var Z=D.get,ie=D.set;return Object.defineProperty(w,E,{configurable:!0,get:function(){return Z.call(this)},set:function(_e){z=""+_e,ie.call(this,_e)}}),Object.defineProperty(w,E,{enumerable:D.enumerable}),{getValue:function(){return z},setValue:function(_e){z=""+_e},stopTracking:function(){w._valueTracker=null,delete w[E]}}}}function Nn(w){w._valueTracker||(w._valueTracker=kn(w))}function Hr(w){if(!w)return!1;var E=w._valueTracker;if(!E)return!0;var D=E.getValue(),z="";return w&&(z=Os(w)?w.checked?"true":"false":w.value),w=z,w!==D?(E.setValue(w),!0):!1}function kf(w){if(w=w||(typeof document<"u"?document:void 0),typeof w>"u")return null;try{return w.activeElement||w.body}catch{return w.body}}var wm=/[\n"\\]/g;function Pa(w){return w.replace(wm,function(E){return"\\"+E.charCodeAt(0).toString(16)+" "})}function Sm(w,E,D,z,Z,ie,_e,De){w.name="",_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?w.type=_e:w.removeAttribute("type"),E!=null?_e==="number"?(E===0&&w.value===""||w.value!=E)&&(w.value=""+ei(E)):w.value!==""+ei(E)&&(w.value=""+ei(E)):_e!=="submit"&&_e!=="reset"||w.removeAttribute("value"),E!=null?Nf(w,_e,ei(E)):D!=null?Nf(w,_e,ei(D)):z!=null&&w.removeAttribute("value"),Z==null&&ie!=null&&(w.defaultChecked=!!ie),Z!=null&&(w.checked=Z&&typeof Z!="function"&&typeof Z!="symbol"),De!=null&&typeof De!="function"&&typeof De!="symbol"&&typeof De!="boolean"?w.name=""+ei(De):w.removeAttribute("name")}function th(w,E,D,z,Z,ie,_e,De){if(ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(w.type=ie),E!=null||D!=null){if(!(ie!=="submit"&&ie!=="reset"||E!=null))return;D=D!=null?""+ei(D):"",E=E!=null?""+ei(E):D,De||E===w.value||(w.value=E),w.defaultValue=E}z=z??Z,z=typeof z!="function"&&typeof z!="symbol"&&!!z,w.checked=De?w.checked:!!z,w.defaultChecked=!!z,_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"&&(w.name=_e)}function Nf(w,E,D){E==="number"&&kf(w.ownerDocument)===w||w.defaultValue===""+D||(w.defaultValue=""+D)}function Em(w,E,D,z){if(w=w.options,E){E={};for(var Z=0;Z<D.length;Z++)E["$"+D[Z]]=!0;for(D=0;D<w.length;D++)Z=E.hasOwnProperty("$"+w[D].value),w[D].selected!==Z&&(w[D].selected=Z),Z&&z&&(w[D].defaultSelected=!0)}else{for(D=""+ei(D),E=null,Z=0;Z<w.length;Z++){if(w[Z].value===D){w[Z].selected=!0,z&&(w[Z].defaultSelected=!0);return}E!==null||w[Z].disabled||(E=w[Z])}E!==null&&(E.selected=!0)}}function $x(w,E,D){if(E!=null&&(E=""+ei(E),E!==w.value&&(w.value=E),D==null)){w.defaultValue!==E&&(w.defaultValue=E);return}w.defaultValue=D!=null?""+ei(D):""}function Ox(w,E,D,z){if(E==null){if(z!=null){if(D!=null)throw Error(s(92));if(vt(z)){if(1<z.length)throw Error(s(93));z=z[0]}D=z}D==null&&(D=""),E=D}D=ei(E),w.defaultValue=D,z=w.textContent,z===D&&z!==""&&z!==null&&(w.value=z)}function hd(w,E){if(E){var D=w.firstChild;if(D&&D===w.lastChild&&D.nodeType===3){D.nodeValue=E;return}}w.textContent=E}var b7=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function v5(w,E,D){var z=E.indexOf("--")===0;D==null||typeof D=="boolean"||D===""?z?w.setProperty(E,""):E==="float"?w.cssFloat="":w[E]="":z?w.setProperty(E,D):typeof D!="number"||D===0||b7.has(E)?E==="float"?w.cssFloat=D:w[E]=(""+D).trim():w[E]=D+"px"}function Rx(w,E,D){if(E!=null&&typeof E!="object")throw Error(s(62));if(w=w.style,D!=null){for(var z in D)!D.hasOwnProperty(z)||E!=null&&E.hasOwnProperty(z)||(z.indexOf("--")===0?w.setProperty(z,""):z==="float"?w.cssFloat="":w[z]="");for(var Z in E)z=E[Z],E.hasOwnProperty(Z)&&D[Z]!==z&&v5(w,Z,z)}else for(var ie in E)E.hasOwnProperty(ie)&&v5(w,ie,E[ie])}function Lx(w){if(w.indexOf("-")===-1)return!1;switch(w){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x7=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qg(w){return _5.test(""+w)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":w}var Fx=null;function e1(w){return w=w.target||w.srcElement||window,w.correspondingUseElement&&(w=w.correspondingUseElement),w.nodeType===3?w.parentNode:w}var Cm=null,$f=null;function b5(w){var E=as(w);if(E&&(w=E.stateNode)){var D=w[dt]||null;e:switch(w=E.stateNode,E.type){case"input":if(Sm(w,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name),E=D.name,D.type==="radio"&&E!=null){for(D=w;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll('input[name="'+Pa(""+E)+'"][type="radio"]'),E=0;E<D.length;E++){var z=D[E];if(z!==w&&z.form===w.form){var Z=z[dt]||null;if(!Z)throw Error(s(90));Sm(z,Z.value,Z.defaultValue,Z.defaultValue,Z.checked,Z.defaultChecked,Z.type,Z.name)}}for(E=0;E<D.length;E++)z=D[E],z.form===w.form&&Hr(z)}break e;case"textarea":$x(w,D.value,D.defaultValue);break e;case"select":E=D.value,E!=null&&Em(w,!!D.multiple,E,!1)}}}var Pm=!1;function x5(w,E,D){if(Pm)return w(E,D);Pm=!0;try{var z=w(E);return z}finally{if(Pm=!1,(Cm!==null||$f!==null)&&(fP(),Cm&&(E=Cm,w=$f,$f=Cm=null,b5(E),w)))for(E=0;E<w.length;E++)b5(w[E])}}function Tm(w,E){var D=w.stateNode;if(D===null)return null;var z=D[dt]||null;if(z===null)return null;D=z[E];e:switch(E){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(w=w.type,z=!(w==="button"||w==="input"||w==="select"||w==="textarea")),w=!z;break e;default:w=!1}if(w)return null;if(D&&typeof D!="function")throw Error(s(231,E,typeof D));return D}var jv=!1;if(sn)try{var t1={};Object.defineProperty(t1,"passive",{get:function(){jv=!0}}),window.addEventListener("test",t1,t1),window.removeEventListener("test",t1,t1)}catch{jv=!1}var ih=null,Bv=null,Hv=null;function Im(){if(Hv)return Hv;var w,E=Bv,D=E.length,z,Z="value"in ih?ih.value:ih.textContent,ie=Z.length;for(w=0;w<D&&E[w]===Z[w];w++);var _e=D-w;for(z=1;z<=_e&&E[D-z]===Z[ie-z];z++);return Hv=Z.slice(w,1<z?1-z:void 0)}function Of(w){var E=w.keyCode;return"charCode"in w?(w=w.charCode,w===0&&E===13&&(w=13)):w=E,w===10&&(w=13),32<=w||w===13?w:0}function Uv(){return!0}function Yv(){return!1}function ea(w){function E(D,z,Z,ie,_e){this._reactName=D,this._targetInst=Z,this.type=z,this.nativeEvent=ie,this.target=_e,this.currentTarget=null;for(var De in w)w.hasOwnProperty(De)&&(D=w[De],this[De]=D?D(ie):ie[De]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?Uv:Yv,this.isPropagationStopped=Yv,this}return oe(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=Uv)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=Uv)},persist:function(){},isPersistent:Uv}),E}var Rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(w){return w.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mm=ea(Rf),Am=oe({},Rf,{view:0,detail:0}),w5=ea(Am),i1,zx,s1,nc=oe({},Am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(w){return w.relatedTarget===void 0?w.fromElement===w.srcElement?w.toElement:w.fromElement:w.relatedTarget},movementX:function(w){return"movementX"in w?w.movementX:(w!==s1&&(s1&&w.type==="mousemove"?(i1=w.screenX-s1.screenX,zx=w.screenY-s1.screenY):zx=i1=0,s1=w),i1)},movementY:function(w){return"movementY"in w?w.movementY:zx}}),S5=ea(nc),w7=oe({},nc,{dataTransfer:0}),S7=ea(w7),E5=oe({},Am,{relatedTarget:0}),Xv=ea(E5),ta=oe({},Rf,{animationName:0,elapsedTime:0,pseudoElement:0}),E7=ea(ta),C7=oe({},Rf,{clipboardData:function(w){return"clipboardData"in w?w.clipboardData:window.clipboardData}}),P7=ea(C7),T7=oe({},Rf,{data:0}),C5=ea(T7),I7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P5(w){var E=this.nativeEvent;return E.getModifierState?E.getModifierState(w):(w=A7[w])?!!E[w]:!1}function Dm(){return P5}var Lf=oe({},Am,{key:function(w){if(w.key){var E=I7[w.key]||w.key;if(E!=="Unidentified")return E}return w.type==="keypress"?(w=Of(w),w===13?"Enter":String.fromCharCode(w)):w.type==="keydown"||w.type==="keyup"?M7[w.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(w){return w.type==="keypress"?Of(w):0},keyCode:function(w){return w.type==="keydown"||w.type==="keyup"?w.keyCode:0},which:function(w){return w.type==="keypress"?Of(w):w.type==="keydown"||w.type==="keyup"?w.keyCode:0}}),Wv=ea(Lf),D7=oe({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qx=ea(D7),T5=oe({},Am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),I5=ea(T5),n1=oe({},Rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),k7=ea(n1),N7=oe({},nc,{deltaX:function(w){return"deltaX"in w?w.deltaX:"wheelDeltaX"in w?-w.wheelDeltaX:0},deltaY:function(w){return"deltaY"in w?w.deltaY:"wheelDeltaY"in w?-w.wheelDeltaY:"wheelDelta"in w?-w.wheelDelta:0},deltaZ:0,deltaMode:0}),$7=ea(N7),O7=oe({},Rf,{newState:0,oldState:0}),R7=ea(O7),L7=[9,13,27,32],r1=sn&&"CompositionEvent"in window,o1=null;sn&&"documentMode"in document&&(o1=document.documentMode);var Zv=sn&&"TextEvent"in window&&!o1,M5=sn&&(!r1||o1&&8<o1&&11>=o1),Kv=" ",A5=!1;function D5(w,E){switch(w){case"keyup":return L7.indexOf(E.keyCode)!==-1;case"keydown":return E.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vx(w){return w=w.detail,typeof w=="object"&&"data"in w?w.data:null}var Kc=!1;function dd(w,E){switch(w){case"compositionend":return Vx(E);case"keypress":return E.which!==32?null:(A5=!0,Kv);case"textInput":return w=E.data,w===Kv&&A5?null:w;default:return null}}function k5(w,E){if(Kc)return w==="compositionend"||!r1&&D5(w,E)?(w=Im(),Hv=Bv=ih=null,Kc=!1,w):null;switch(w){case"paste":return null;case"keypress":if(!(E.ctrlKey||E.altKey||E.metaKey)||E.ctrlKey&&E.altKey){if(E.char&&1<E.char.length)return E.char;if(E.which)return String.fromCharCode(E.which)}return null;case"compositionend":return M5&&E.locale!=="ko"?null:E.data;default:return null}}var Gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N5(w){var E=w&&w.nodeName&&w.nodeName.toLowerCase();return E==="input"?!!Gx[w.type]:E==="textarea"}function $5(w,E,D,z){Cm?$f?$f.push(z):$f=[z]:Cm=z,E=vP(E,"onChange"),0<E.length&&(D=new Mm("onChange","change",null,D,z),w.push({event:D,listeners:E}))}var a1=null,l1=null;function F7(w){aU(w,0)}function Jv(w){var E=$i(w);if(Hr(E))return w}function O5(w,E){if(w==="change")return E}var R5=!1;if(sn){var jx;if(sn){var Bx="oninput"in document;if(!Bx){var X=document.createElement("div");X.setAttribute("oninput","return;"),Bx=typeof X.oninput=="function"}jx=Bx}else jx=!1;R5=jx&&(!document.documentMode||9<document.documentMode)}function H(){a1&&(a1.detachEvent("onpropertychange",te),l1=a1=null)}function te(w){if(w.propertyName==="value"&&Jv(l1)){var E=[];$5(E,l1,w,e1(w)),x5(F7,E)}}function le(w,E,D){w==="focusin"?(H(),a1=E,l1=D,a1.attachEvent("onpropertychange",te)):w==="focusout"&&H()}function he(w){if(w==="selectionchange"||w==="keyup"||w==="keydown")return Jv(l1)}function be(w,E){if(w==="click")return Jv(E)}function Te(w,E){if(w==="input"||w==="change")return Jv(E)}function Me(w,E){return w===E&&(w!==0||1/w===1/E)||w!==w&&E!==E}var $e=typeof Object.is=="function"?Object.is:Me;function je(w,E){if($e(w,E))return!0;if(typeof w!="object"||w===null||typeof E!="object"||E===null)return!1;var D=Object.keys(w),z=Object.keys(E);if(D.length!==z.length)return!1;for(z=0;z<D.length;z++){var Z=D[z];if(!Sr.call(E,Z)||!$e(w[Z],E[Z]))return!1}return!0}function Le(w){for(;w&&w.firstChild;)w=w.firstChild;return w}function Ke(w,E){var D=Le(w);w=0;for(var z;D;){if(D.nodeType===3){if(z=w+D.textContent.length,w<=E&&z>=E)return{node:D,offset:E-w};w=z}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=Le(D)}}function ft(w,E){return w&&E?w===E?!0:w&&w.nodeType===3?!1:E&&E.nodeType===3?ft(w,E.parentNode):"contains"in w?w.contains(E):w.compareDocumentPosition?!!(w.compareDocumentPosition(E)&16):!1:!1}function Mt(w){w=w!=null&&w.ownerDocument!=null&&w.ownerDocument.defaultView!=null?w.ownerDocument.defaultView:window;for(var E=kf(w.document);E instanceof w.HTMLIFrameElement;){try{var D=typeof E.contentWindow.location.href=="string"}catch{D=!1}if(D)w=E.contentWindow;else break;E=kf(w.document)}return E}function Tt(w){var E=w&&w.nodeName&&w.nodeName.toLowerCase();return E&&(E==="input"&&(w.type==="text"||w.type==="search"||w.type==="tel"||w.type==="url"||w.type==="password")||E==="textarea"||w.contentEditable==="true")}function Rt(w,E){var D=Mt(E);E=w.focusedElem;var z=w.selectionRange;if(D!==E&&E&&E.ownerDocument&&ft(E.ownerDocument.documentElement,E)){if(z!==null&&Tt(E)){if(w=z.start,D=z.end,D===void 0&&(D=w),"selectionStart"in E)E.selectionStart=w,E.selectionEnd=Math.min(D,E.value.length);else if(D=(w=E.ownerDocument||document)&&w.defaultView||window,D.getSelection){D=D.getSelection();var Z=E.textContent.length,ie=Math.min(z.start,Z);z=z.end===void 0?ie:Math.min(z.end,Z),!D.extend&&ie>z&&(Z=z,z=ie,ie=Z),Z=Ke(E,ie);var _e=Ke(E,z);Z&&_e&&(D.rangeCount!==1||D.anchorNode!==Z.node||D.anchorOffset!==Z.offset||D.focusNode!==_e.node||D.focusOffset!==_e.offset)&&(w=w.createRange(),w.setStart(Z.node,Z.offset),D.removeAllRanges(),ie>z?(D.addRange(w),D.extend(_e.node,_e.offset)):(w.setEnd(_e.node,_e.offset),D.addRange(w)))}}for(w=[],D=E;D=D.parentNode;)D.nodeType===1&&w.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<w.length;E++)D=w[E],D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}var Xt=sn&&"documentMode"in document&&11>=document.documentMode,Gt=null,ai=null,Ii=null,es=!1;function Si(w,E,D){var z=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;es||Gt==null||Gt!==kf(z)||(z=Gt,"selectionStart"in z&&Tt(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),Ii&&je(Ii,z)||(Ii=z,z=vP(ai,"onSelect"),0<z.length&&(E=new Mm("onSelect","select",null,E,D),w.push({event:E,listeners:z}),E.target=Gt)))}function Pi(w,E){var D={};return D[w.toLowerCase()]=E.toLowerCase(),D["Webkit"+w]="webkit"+E,D["Moz"+w]="moz"+E,D}var Er={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},gn={},Ta={};sn&&(Ta=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function fo(w){if(gn[w])return gn[w];if(!Er[w])return w;var E=Er[w],D;for(D in E)if(E.hasOwnProperty(D)&&D in Ta)return gn[w]=E[D];return w}var Jc=fo("animationend"),c1=fo("animationiteration"),km=fo("animationstart"),Zye=fo("transitionrun"),Kye=fo("transitionstart"),Jye=fo("transitioncancel"),Zj=fo("transitionend"),Kj=new Map,Jj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function sh(w,E){Kj.set(w,E),Qn(E,[w])}var Qc=[],Qv=0,z7=0;function L5(){for(var w=Qv,E=z7=Qv=0;E<w;){var D=Qc[E];Qc[E++]=null;var z=Qc[E];Qc[E++]=null;var Z=Qc[E];Qc[E++]=null;var ie=Qc[E];if(Qc[E++]=null,z!==null&&Z!==null){var _e=z.pending;_e===null?Z.next=Z:(Z.next=_e.next,_e.next=Z),z.pending=Z}ie!==0&&Qj(D,Z,ie)}}function F5(w,E,D,z){Qc[Qv++]=w,Qc[Qv++]=E,Qc[Qv++]=D,Qc[Qv++]=z,z7|=z,w.lanes|=z,w=w.alternate,w!==null&&(w.lanes|=z)}function q7(w,E,D,z){return F5(w,E,D,z),z5(w)}function Nm(w,E){return F5(w,null,null,E),z5(w)}function Qj(w,E,D){w.lanes|=D;var z=w.alternate;z!==null&&(z.lanes|=D);for(var Z=!1,ie=w.return;ie!==null;)ie.childLanes|=D,z=ie.alternate,z!==null&&(z.childLanes|=D),ie.tag===22&&(w=ie.stateNode,w===null||w._visibility&1||(Z=!0)),w=ie,ie=ie.return;Z&&E!==null&&w.tag===3&&(ie=w.stateNode,Z=31-c(D),ie=ie.hiddenUpdates,w=ie[Z],w===null?ie[Z]=[E]:w.push(E),E.lane=D|536870912)}function z5(w){if(50<mw)throw mw=0,UD=null,Error(s(185));for(var E=w.return;E!==null;)w=E,E=w.return;return w.tag===3?w.stateNode:null}var e_={},eB=new WeakMap;function eu(w,E){if(typeof w=="object"&&w!==null){var D=eB.get(w);return D!==void 0?D:(E={value:w,source:E,stack:Pe(E)},eB.set(w,E),E)}return{value:w,source:E,stack:Pe(E)}}var t_=[],i_=0,q5=null,V5=0,tu=[],iu=0,u1=null,Ff=1,zf="";function h1(w,E){t_[i_++]=V5,t_[i_++]=q5,q5=w,V5=E}function tB(w,E,D){tu[iu++]=Ff,tu[iu++]=zf,tu[iu++]=u1,u1=w;var z=Ff;w=zf;var Z=32-c(z)-1;z&=~(1<<Z),D+=1;var ie=32-c(E)+Z;if(30<ie){var _e=Z-Z%5;ie=(z&(1<<_e)-1).toString(32),z>>=_e,Z-=_e,Ff=1<<32-c(E)+Z|D<<Z|z,zf=ie+w}else Ff=1<<ie|D<<Z|z,zf=w}function V7(w){w.return!==null&&(h1(w,1),tB(w,1,0))}function G7(w){for(;w===q5;)q5=t_[--i_],t_[i_]=null,V5=t_[--i_],t_[i_]=null;for(;w===u1;)u1=tu[--iu],tu[iu]=null,zf=tu[--iu],tu[iu]=null,Ff=tu[--iu],tu[iu]=null}var sl=null,ia=null,Rs=!1,nh=null,fd=!1,j7=Error(s(519));function d1(w){var E=Error(s(418,""));throw Yx(eu(E,w)),j7}function iB(w){var E=w.stateNode,D=w.type,z=w.memoizedProps;switch(E[et]=w,E[dt]=z,D){case"dialog":bs("cancel",E),bs("close",E);break;case"iframe":case"object":case"embed":bs("load",E);break;case"video":case"audio":for(D=0;D<yw.length;D++)bs(yw[D],E);break;case"source":bs("error",E);break;case"img":case"image":case"link":bs("error",E),bs("load",E);break;case"details":bs("toggle",E);break;case"input":bs("invalid",E),th(E,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),Nn(E);break;case"select":bs("invalid",E);break;case"textarea":bs("invalid",E),Ox(E,z.value,z.defaultValue,z.children),Nn(E)}D=z.children,typeof D!="string"&&typeof D!="number"&&typeof D!="bigint"||E.textContent===""+D||z.suppressHydrationWarning===!0||hU(E.textContent,D)?(z.popover!=null&&(bs("beforetoggle",E),bs("toggle",E)),z.onScroll!=null&&bs("scroll",E),z.onScrollEnd!=null&&bs("scrollend",E),z.onClick!=null&&(E.onclick=_P),E=!0):E=!1,E||d1(w)}function sB(w){for(sl=w.return;sl;)switch(sl.tag){case 3:case 27:fd=!0;return;case 5:case 13:fd=!1;return;default:sl=sl.return}}function Hx(w){if(w!==sl)return!1;if(!Rs)return sB(w),Rs=!0,!1;var E=!1,D;if((D=w.tag!==3&&w.tag!==27)&&((D=w.tag===5)&&(D=w.type,D=!(D!=="form"&&D!=="button")||ck(w.type,w.memoizedProps)),D=!D),D&&(E=!0),E&&ia&&d1(w),sB(w),w.tag===13){if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));e:{for(w=w.nextSibling,E=0;w;){if(w.nodeType===8)if(D=w.data,D==="/$"){if(E===0){ia=oh(w.nextSibling);break e}E--}else D!=="$"&&D!=="$!"&&D!=="$?"||E++;w=w.nextSibling}ia=null}}else ia=sl?oh(w.stateNode.nextSibling):null;return!0}function Ux(){ia=sl=null,Rs=!1}function Yx(w){nh===null?nh=[w]:nh.push(w)}var Xx=Error(s(460)),nB=Error(s(474)),B7={then:function(){}};function rB(w){return w=w.status,w==="fulfilled"||w==="rejected"}function G5(){}function oB(w,E,D){switch(D=w[D],D===void 0?w.push(E):D!==E&&(E.then(G5,G5),E=D),E.status){case"fulfilled":return E.value;case"rejected":throw w=E.reason,w===Xx?Error(s(483)):w;default:if(typeof E.status=="string")E.then(G5,G5);else{if(w=$n,w!==null&&100<w.shellSuspendCounter)throw Error(s(482));w=E,w.status="pending",w.then(function(z){if(E.status==="pending"){var Z=E;Z.status="fulfilled",Z.value=z}},function(z){if(E.status==="pending"){var Z=E;Z.status="rejected",Z.reason=z}})}switch(E.status){case"fulfilled":return E.value;case"rejected":throw w=E.reason,w===Xx?Error(s(483)):w}throw Wx=E,Xx}}var Wx=null;function aB(){if(Wx===null)throw Error(s(459));var w=Wx;return Wx=null,w}var s_=null,Zx=0;function j5(w){var E=Zx;return Zx+=1,s_===null&&(s_=[]),oB(s_,w,E)}function Kx(w,E){E=E.props.ref,w.ref=E!==void 0?E:null}function B5(w,E){throw E.$$typeof===r?Error(s(525)):(w=Object.prototype.toString.call(E),Error(s(31,w==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":w)))}function lB(w){var E=w._init;return E(w._payload)}function cB(w){function E(tt,Ye){if(w){var st=tt.deletions;st===null?(tt.deletions=[Ye],tt.flags|=16):st.push(Ye)}}function D(tt,Ye){if(!w)return null;for(;Ye!==null;)E(tt,Ye),Ye=Ye.sibling;return null}function z(tt){for(var Ye=new Map;tt!==null;)tt.key!==null?Ye.set(tt.key,tt):Ye.set(tt.index,tt),tt=tt.sibling;return Ye}function Z(tt,Ye){return tt=Hm(tt,Ye),tt.index=0,tt.sibling=null,tt}function ie(tt,Ye,st){return tt.index=st,w?(st=tt.alternate,st!==null?(st=st.index,st<Ye?(tt.flags|=33554434,Ye):st):(tt.flags|=33554434,Ye)):(tt.flags|=1048576,Ye)}function _e(tt){return w&&tt.alternate===null&&(tt.flags|=33554434),tt}function De(tt,Ye,st,Et){return Ye===null||Ye.tag!==6?(Ye=FD(st,tt.mode,Et),Ye.return=tt,Ye):(Ye=Z(Ye,st),Ye.return=tt,Ye)}function qe(tt,Ye,st,Et){var ti=st.type;return ti===u?yt(tt,Ye,st.props.children,Et,st.key):Ye!==null&&(Ye.elementType===ti||typeof ti=="object"&&ti!==null&&ti.$$typeof===F&&lB(ti)===Ye.type)?(Ye=Z(Ye,st.props),Kx(Ye,st),Ye.return=tt,Ye):(Ye=lP(st.type,st.key,st.props,null,tt.mode,Et),Kx(Ye,st),Ye.return=tt,Ye)}function We(tt,Ye,st,Et){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==st.containerInfo||Ye.stateNode.implementation!==st.implementation?(Ye=zD(st,tt.mode,Et),Ye.return=tt,Ye):(Ye=Z(Ye,st.children||[]),Ye.return=tt,Ye)}function yt(tt,Ye,st,Et,ti){return Ye===null||Ye.tag!==7?(Ye=w1(st,tt.mode,Et,ti),Ye.return=tt,Ye):(Ye=Z(Ye,st),Ye.return=tt,Ye)}function It(tt,Ye,st){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=FD(""+Ye,tt.mode,st),Ye.return=tt,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case o:return st=lP(Ye.type,Ye.key,Ye.props,null,tt.mode,st),Kx(st,Ye),st.return=tt,st;case l:return Ye=zD(Ye,tt.mode,st),Ye.return=tt,Ye;case F:var Et=Ye._init;return Ye=Et(Ye._payload),It(tt,Ye,st)}if(vt(Ye)||W(Ye))return Ye=w1(Ye,tt.mode,st,null),Ye.return=tt,Ye;if(typeof Ye.then=="function")return It(tt,j5(Ye),st);if(Ye.$$typeof===S)return It(tt,rP(tt,Ye),st);B5(tt,Ye)}return null}function at(tt,Ye,st,Et){var ti=Ye!==null?Ye.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return ti!==null?null:De(tt,Ye,""+st,Et);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case o:return st.key===ti?qe(tt,Ye,st,Et):null;case l:return st.key===ti?We(tt,Ye,st,Et):null;case F:return ti=st._init,st=ti(st._payload),at(tt,Ye,st,Et)}if(vt(st)||W(st))return ti!==null?null:yt(tt,Ye,st,Et,null);if(typeof st.then=="function")return at(tt,Ye,j5(st),Et);if(st.$$typeof===S)return at(tt,Ye,rP(tt,st),Et);B5(tt,st)}return null}function gt(tt,Ye,st,Et,ti){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return tt=tt.get(st)||null,De(Ye,tt,""+Et,ti);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case o:return tt=tt.get(Et.key===null?st:Et.key)||null,qe(Ye,tt,Et,ti);case l:return tt=tt.get(Et.key===null?st:Et.key)||null,We(Ye,tt,Et,ti);case F:var ls=Et._init;return Et=ls(Et._payload),gt(tt,Ye,st,Et,ti)}if(vt(Et)||W(Et))return tt=tt.get(st)||null,yt(Ye,tt,Et,ti,null);if(typeof Et.then=="function")return gt(tt,Ye,st,j5(Et),ti);if(Et.$$typeof===S)return gt(tt,Ye,st,rP(Ye,Et),ti);B5(Ye,Et)}return null}function di(tt,Ye,st,Et){for(var ti=null,ls=null,yi=Ye,Ci=Ye=0,Do=null;yi!==null&&Ci<st.length;Ci++){yi.index>Ci?(Do=yi,yi=null):Do=yi.sibling;var Ls=at(tt,yi,st[Ci],Et);if(Ls===null){yi===null&&(yi=Do);break}w&&yi&&Ls.alternate===null&&E(tt,yi),Ye=ie(Ls,Ye,Ci),ls===null?ti=Ls:ls.sibling=Ls,ls=Ls,yi=Do}if(Ci===st.length)return D(tt,yi),Rs&&h1(tt,Ci),ti;if(yi===null){for(;Ci<st.length;Ci++)yi=It(tt,st[Ci],Et),yi!==null&&(Ye=ie(yi,Ye,Ci),ls===null?ti=yi:ls.sibling=yi,ls=yi);return Rs&&h1(tt,Ci),ti}for(yi=z(yi);Ci<st.length;Ci++)Do=gt(yi,tt,Ci,st[Ci],Et),Do!==null&&(w&&Do.alternate!==null&&yi.delete(Do.key===null?Ci:Do.key),Ye=ie(Do,Ye,Ci),ls===null?ti=Do:ls.sibling=Do,ls=Do);return w&&yi.forEach(function(Jm){return E(tt,Jm)}),Rs&&h1(tt,Ci),ti}function Gi(tt,Ye,st,Et){if(st==null)throw Error(s(151));for(var ti=null,ls=null,yi=Ye,Ci=Ye=0,Do=null,Ls=st.next();yi!==null&&!Ls.done;Ci++,Ls=st.next()){yi.index>Ci?(Do=yi,yi=null):Do=yi.sibling;var Jm=at(tt,yi,Ls.value,Et);if(Jm===null){yi===null&&(yi=Do);break}w&&yi&&Jm.alternate===null&&E(tt,yi),Ye=ie(Jm,Ye,Ci),ls===null?ti=Jm:ls.sibling=Jm,ls=Jm,yi=Do}if(Ls.done)return D(tt,yi),Rs&&h1(tt,Ci),ti;if(yi===null){for(;!Ls.done;Ci++,Ls=st.next())Ls=It(tt,Ls.value,Et),Ls!==null&&(Ye=ie(Ls,Ye,Ci),ls===null?ti=Ls:ls.sibling=Ls,ls=Ls);return Rs&&h1(tt,Ci),ti}for(yi=z(yi);!Ls.done;Ci++,Ls=st.next())Ls=gt(yi,tt,Ci,Ls.value,Et),Ls!==null&&(w&&Ls.alternate!==null&&yi.delete(Ls.key===null?Ci:Ls.key),Ye=ie(Ls,Ye,Ci),ls===null?ti=Ls:ls.sibling=Ls,ls=Ls);return w&&yi.forEach(function(d_e){return E(tt,d_e)}),Rs&&h1(tt,Ci),ti}function Tr(tt,Ye,st,Et){if(typeof st=="object"&&st!==null&&st.type===u&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case o:e:{for(var ti=st.key;Ye!==null;){if(Ye.key===ti){if(ti=st.type,ti===u){if(Ye.tag===7){D(tt,Ye.sibling),Et=Z(Ye,st.props.children),Et.return=tt,tt=Et;break e}}else if(Ye.elementType===ti||typeof ti=="object"&&ti!==null&&ti.$$typeof===F&&lB(ti)===Ye.type){D(tt,Ye.sibling),Et=Z(Ye,st.props),Kx(Et,st),Et.return=tt,tt=Et;break e}D(tt,Ye);break}else E(tt,Ye);Ye=Ye.sibling}st.type===u?(Et=w1(st.props.children,tt.mode,Et,st.key),Et.return=tt,tt=Et):(Et=lP(st.type,st.key,st.props,null,tt.mode,Et),Kx(Et,st),Et.return=tt,tt=Et)}return _e(tt);case l:e:{for(ti=st.key;Ye!==null;){if(Ye.key===ti)if(Ye.tag===4&&Ye.stateNode.containerInfo===st.containerInfo&&Ye.stateNode.implementation===st.implementation){D(tt,Ye.sibling),Et=Z(Ye,st.children||[]),Et.return=tt,tt=Et;break e}else{D(tt,Ye);break}else E(tt,Ye);Ye=Ye.sibling}Et=zD(st,tt.mode,Et),Et.return=tt,tt=Et}return _e(tt);case F:return ti=st._init,st=ti(st._payload),Tr(tt,Ye,st,Et)}if(vt(st))return di(tt,Ye,st,Et);if(W(st)){if(ti=W(st),typeof ti!="function")throw Error(s(150));return st=ti.call(st),Gi(tt,Ye,st,Et)}if(typeof st.then=="function")return Tr(tt,Ye,j5(st),Et);if(st.$$typeof===S)return Tr(tt,Ye,rP(tt,st),Et);B5(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Ye!==null&&Ye.tag===6?(D(tt,Ye.sibling),Et=Z(Ye,st),Et.return=tt,tt=Et):(D(tt,Ye),Et=FD(st,tt.mode,Et),Et.return=tt,tt=Et),_e(tt)):D(tt,Ye)}return function(tt,Ye,st,Et){try{Zx=0;var ti=Tr(tt,Ye,st,Et);return s_=null,ti}catch(yi){if(yi===Xx)throw yi;var ls=ou(29,yi,null,tt.mode);return ls.lanes=Et,ls.return=tt,ls}finally{}}}var f1=cB(!0),uB=cB(!1),n_=Lt(null),H5=Lt(0);function hB(w,E){w=Zf,Wi(H5,w),Wi(n_,E),Zf=w|E.baseLanes}function H7(){Wi(H5,Zf),Wi(n_,n_.current)}function U7(){Zf=H5.current,Dt(n_),Dt(H5)}var su=Lt(null),pd=null;function $m(w){var E=w.alternate;Wi(po,po.current&1),Wi(su,w),pd===null&&(E===null||n_.current!==null||E.memoizedState!==null)&&(pd=w)}function dB(w){if(w.tag===22){if(Wi(po,po.current),Wi(su,w),pd===null){var E=w.alternate;E!==null&&E.memoizedState!==null&&(pd=w)}}else Om()}function Om(){Wi(po,po.current),Wi(su,su.current)}function qf(w){Dt(su),pd===w&&(pd=null),Dt(po)}var po=Lt(0);function U5(w){for(var E=w;E!==null;){if(E.tag===13){var D=E.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||D.data==="$?"||D.data==="$!"))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if((E.flags&128)!==0)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var Qye=typeof AbortController<"u"?AbortController:function(){var w=[],E=this.signal={aborted:!1,addEventListener:function(D,z){w.push(z)}};this.abort=function(){E.aborted=!0,w.forEach(function(D){return D()})}},eve=t.unstable_scheduleCallback,tve=t.unstable_NormalPriority,mo={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Y7(){return{controller:new Qye,data:new Map,refCount:0}}function Jx(w){w.refCount--,w.refCount===0&&eve(tve,function(){w.controller.abort()})}var Qx=null,X7=0,r_=0,o_=null;function ive(w,E){if(Qx===null){var D=Qx=[];X7=0,r_=ek(),o_={status:"pending",value:void 0,then:function(z){D.push(z)}}}return X7++,E.then(fB,fB),E}function fB(){if(--X7===0&&Qx!==null){o_!==null&&(o_.status="fulfilled");var w=Qx;Qx=null,r_=0,o_=null;for(var E=0;E<w.length;E++)(0,w[E])()}}function sve(w,E){var D=[],z={status:"pending",value:null,reason:null,then:function(Z){D.push(Z)}};return w.then(function(){z.status="fulfilled",z.value=E;for(var Z=0;Z<D.length;Z++)(0,D[Z])(E)},function(Z){for(z.status="rejected",z.reason=Z,Z=0;Z<D.length;Z++)(0,D[Z])(void 0)}),z}var pB=se.S;se.S=function(w,E){typeof E=="object"&&E!==null&&typeof E.then=="function"&&ive(w,E),pB!==null&&pB(w,E)};var p1=Lt(null);function W7(){var w=p1.current;return w!==null?w:$n.pooledCache}function Y5(w,E){E===null?Wi(p1,p1.current):Wi(p1,E.pool)}function mB(){var w=W7();return w===null?null:{parent:mo._currentValue,pool:w}}var Rm=0,rs=null,yn=null,Ur=null,X5=!1,a_=!1,m1=!1,W5=0,ew=0,l_=null,nve=0;function Or(){throw Error(s(321))}function Z7(w,E){if(E===null)return!1;for(var D=0;D<E.length&&D<w.length;D++)if(!$e(w[D],E[D]))return!1;return!0}function K7(w,E,D,z,Z,ie){return Rm=ie,rs=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,se.H=w===null||w.memoizedState===null?g1:Lm,m1=!1,ie=D(z,Z),m1=!1,a_&&(ie=yB(E,D,z,Z)),gB(w),ie}function gB(w){se.H=md;var E=yn!==null&&yn.next!==null;if(Rm=0,Ur=yn=rs=null,X5=!1,ew=0,l_=null,E)throw Error(s(300));w===null||Mo||(w=w.dependencies,w!==null&&nP(w)&&(Mo=!0))}function yB(w,E,D,z){rs=w;var Z=0;do{if(a_&&(l_=null),ew=0,a_=!1,25<=Z)throw Error(s(301));if(Z+=1,Ur=yn=null,w.updateQueue!=null){var ie=w.updateQueue;ie.lastEffect=null,ie.events=null,ie.stores=null,ie.memoCache!=null&&(ie.memoCache.index=0)}se.H=y1,ie=E(D,z)}while(a_);return ie}function rve(){var w=se.H,E=w.useState()[0];return E=typeof E.then=="function"?tw(E):E,w=w.useState()[0],(yn!==null?yn.memoizedState:null)!==w&&(rs.flags|=1024),E}function J7(){var w=W5!==0;return W5=0,w}function Q7(w,E,D){E.updateQueue=w.updateQueue,E.flags&=-2053,w.lanes&=~D}function eD(w){if(X5){for(w=w.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}X5=!1}Rm=0,Ur=yn=rs=null,a_=!1,ew=W5=0,l_=null}function kl(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?rs.memoizedState=Ur=w:Ur=Ur.next=w,Ur}function Yr(){if(yn===null){var w=rs.alternate;w=w!==null?w.memoizedState:null}else w=yn.next;var E=Ur===null?rs.memoizedState:Ur.next;if(E!==null)Ur=E,yn=w;else{if(w===null)throw rs.alternate===null?Error(s(467)):Error(s(310));yn=w,w={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Ur===null?rs.memoizedState=Ur=w:Ur=Ur.next=w}return Ur}var Z5;Z5=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function tw(w){var E=ew;return ew+=1,l_===null&&(l_=[]),w=oB(l_,w,E),E=rs,(Ur===null?E.memoizedState:Ur.next)===null&&(E=E.alternate,se.H=E===null||E.memoizedState===null?g1:Lm),w}function K5(w){if(w!==null&&typeof w=="object"){if(typeof w.then=="function")return tw(w);if(w.$$typeof===S)return Ia(w)}throw Error(s(438,String(w)))}function tD(w){var E=null,D=rs.updateQueue;if(D!==null&&(E=D.memoCache),E==null){var z=rs.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(E={data:z.data.map(function(Z){return Z.slice()}),index:0})))}if(E==null&&(E={data:[],index:0}),D===null&&(D=Z5(),rs.updateQueue=D),D.memoCache=E,D=E.data[E.index],D===void 0)for(D=E.data[E.index]=Array(w),z=0;z<w;z++)D[z]=V;return E.index++,D}function Vf(w,E){return typeof E=="function"?E(w):E}function J5(w){var E=Yr();return iD(E,yn,w)}function iD(w,E,D){var z=w.queue;if(z===null)throw Error(s(311));z.lastRenderedReducer=D;var Z=w.baseQueue,ie=z.pending;if(ie!==null){if(Z!==null){var _e=Z.next;Z.next=ie.next,ie.next=_e}E.baseQueue=Z=ie,z.pending=null}if(ie=w.baseState,Z===null)w.memoizedState=ie;else{E=Z.next;var De=_e=null,qe=null,We=E,yt=!1;do{var It=We.lane&-536870913;if(It!==We.lane?(Ts&It)===It:(Rm&It)===It){var at=We.revertLane;if(at===0)qe!==null&&(qe=qe.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),It===r_&&(yt=!0);else if((Rm&at)===at){We=We.next,at===r_&&(yt=!0);continue}else It={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},qe===null?(De=qe=It,_e=ie):qe=qe.next=It,rs.lanes|=at,Um|=at;It=We.action,m1&&D(ie,It),ie=We.hasEagerState?We.eagerState:D(ie,It)}else at={lane:It,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},qe===null?(De=qe=at,_e=ie):qe=qe.next=at,rs.lanes|=It,Um|=It;We=We.next}while(We!==null&&We!==E);if(qe===null?_e=ie:qe.next=De,!$e(ie,w.memoizedState)&&(Mo=!0,yt&&(D=o_,D!==null)))throw D;w.memoizedState=ie,w.baseState=_e,w.baseQueue=qe,z.lastRenderedState=ie}return Z===null&&(z.lanes=0),[w.memoizedState,z.dispatch]}function sD(w){var E=Yr(),D=E.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=w;var z=D.dispatch,Z=D.pending,ie=E.memoizedState;if(Z!==null){D.pending=null;var _e=Z=Z.next;do ie=w(ie,_e.action),_e=_e.next;while(_e!==Z);$e(ie,E.memoizedState)||(Mo=!0),E.memoizedState=ie,E.baseQueue===null&&(E.baseState=ie),D.lastRenderedState=ie}return[ie,z]}function vB(w,E,D){var z=rs,Z=Yr(),ie=Rs;if(ie){if(D===void 0)throw Error(s(407));D=D()}else D=E();var _e=!$e((yn||Z).memoizedState,D);if(_e&&(Z.memoizedState=D,Mo=!0),Z=Z.queue,oD(xB.bind(null,z,Z,w),[w]),Z.getSnapshot!==E||_e||Ur!==null&&Ur.memoizedState.tag&1){if(z.flags|=2048,c_(9,bB.bind(null,z,Z,D,E),{destroy:void 0},null),$n===null)throw Error(s(349));ie||(Rm&60)!==0||_B(z,E,D)}return D}function _B(w,E,D){w.flags|=16384,w={getSnapshot:E,value:D},E=rs.updateQueue,E===null?(E=Z5(),rs.updateQueue=E,E.stores=[w]):(D=E.stores,D===null?E.stores=[w]:D.push(w))}function bB(w,E,D,z){E.value=D,E.getSnapshot=z,wB(E)&&SB(w)}function xB(w,E,D){return D(function(){wB(E)&&SB(w)})}function wB(w){var E=w.getSnapshot;w=w.value;try{var D=E();return!$e(w,D)}catch{return!0}}function SB(w){var E=Nm(w,2);E!==null&&nl(E,w,2)}function nD(w){var E=kl();if(typeof w=="function"){var D=w;if(w=D(),m1){a(!0);try{D()}finally{a(!1)}}}return E.memoizedState=E.baseState=w,E.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:w},E}function EB(w,E,D,z){return w.baseState=D,iD(w,yn,typeof z=="function"?z:Vf)}function ove(w,E,D,z,Z){if(tP(w))throw Error(s(485));if(w=E.action,w!==null){var ie={payload:Z,action:w,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_e){ie.listeners.push(_e)}};se.T!==null?D(!0):ie.isTransition=!1,z(ie),D=E.pending,D===null?(ie.next=E.pending=ie,CB(E,ie)):(ie.next=D.next,E.pending=D.next=ie)}}function CB(w,E){var D=E.action,z=E.payload,Z=w.state;if(E.isTransition){var ie=se.T,_e={};se.T=_e;try{var De=D(Z,z),qe=se.S;qe!==null&&qe(_e,De),PB(w,E,De)}catch(We){rD(w,E,We)}finally{se.T=ie}}else try{ie=D(Z,z),PB(w,E,ie)}catch(We){rD(w,E,We)}}function PB(w,E,D){D!==null&&typeof D=="object"&&typeof D.then=="function"?D.then(function(z){TB(w,E,z)},function(z){return rD(w,E,z)}):TB(w,E,D)}function TB(w,E,D){E.status="fulfilled",E.value=D,IB(E),w.state=D,E=w.pending,E!==null&&(D=E.next,D===E?w.pending=null:(D=D.next,E.next=D,CB(w,D)))}function rD(w,E,D){var z=w.pending;if(w.pending=null,z!==null){z=z.next;do E.status="rejected",E.reason=D,IB(E),E=E.next;while(E!==z)}w.action=null}function IB(w){w=w.listeners;for(var E=0;E<w.length;E++)(0,w[E])()}function MB(w,E){return E}function AB(w,E){if(Rs){var D=$n.formState;if(D!==null){e:{var z=rs;if(Rs){if(ia){t:{for(var Z=ia,ie=fd;Z.nodeType!==8;){if(!ie){Z=null;break t}if(Z=oh(Z.nextSibling),Z===null){Z=null;break t}}ie=Z.data,Z=ie==="F!"||ie==="F"?Z:null}if(Z){ia=oh(Z.nextSibling),z=Z.data==="F!";break e}}d1(z)}z=!1}z&&(E=D[0])}}return D=kl(),D.memoizedState=D.baseState=E,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MB,lastRenderedState:E},D.queue=z,D=XB.bind(null,rs,z),z.dispatch=D,z=nD(!1),ie=hD.bind(null,rs,!1,z.queue),z=kl(),Z={state:E,dispatch:null,action:w,pending:null},z.queue=Z,D=ove.bind(null,rs,Z,ie,D),Z.dispatch=D,z.memoizedState=w,[E,D,!1]}function DB(w){var E=Yr();return kB(E,yn,w)}function kB(w,E,D){E=iD(w,E,MB)[0],w=J5(Vf)[0],E=typeof E=="object"&&E!==null&&typeof E.then=="function"?tw(E):E;var z=Yr(),Z=z.queue,ie=Z.dispatch;return D!==z.memoizedState&&(rs.flags|=2048,c_(9,ave.bind(null,Z,D),{destroy:void 0},null)),[E,ie,w]}function ave(w,E){w.action=E}function NB(w){var E=Yr(),D=yn;if(D!==null)return kB(E,D,w);Yr(),E=E.memoizedState,D=Yr();var z=D.queue.dispatch;return D.memoizedState=w,[E,z,!1]}function c_(w,E,D,z){return w={tag:w,create:E,inst:D,deps:z,next:null},E=rs.updateQueue,E===null&&(E=Z5(),rs.updateQueue=E),D=E.lastEffect,D===null?E.lastEffect=w.next=w:(z=D.next,D.next=w,w.next=z,E.lastEffect=w),w}function $B(){return Yr().memoizedState}function Q5(w,E,D,z){var Z=kl();rs.flags|=w,Z.memoizedState=c_(1|E,D,{destroy:void 0},z===void 0?null:z)}function eP(w,E,D,z){var Z=Yr();z=z===void 0?null:z;var ie=Z.memoizedState.inst;yn!==null&&z!==null&&Z7(z,yn.memoizedState.deps)?Z.memoizedState=c_(E,D,ie,z):(rs.flags|=w,Z.memoizedState=c_(1|E,D,ie,z))}function OB(w,E){Q5(8390656,8,w,E)}function oD(w,E){eP(2048,8,w,E)}function RB(w,E){return eP(4,2,w,E)}function LB(w,E){return eP(4,4,w,E)}function FB(w,E){if(typeof E=="function"){w=w();var D=E(w);return function(){typeof D=="function"?D():E(null)}}if(E!=null)return w=w(),E.current=w,function(){E.current=null}}function zB(w,E,D){D=D!=null?D.concat([w]):null,eP(4,4,FB.bind(null,E,w),D)}function aD(){}function qB(w,E){var D=Yr();E=E===void 0?null:E;var z=D.memoizedState;return E!==null&&Z7(E,z[1])?z[0]:(D.memoizedState=[w,E],w)}function VB(w,E){var D=Yr();E=E===void 0?null:E;var z=D.memoizedState;if(E!==null&&Z7(E,z[1]))return z[0];if(z=w(),m1){a(!0);try{w()}finally{a(!1)}}return D.memoizedState=[z,E],z}function lD(w,E,D){return D===void 0||(Rm&1073741824)!==0?w.memoizedState=E:(w.memoizedState=D,w=jH(),rs.lanes|=w,Um|=w,D)}function GB(w,E,D,z){return $e(D,E)?D:n_.current!==null?(w=lD(w,D,z),$e(w,E)||(Mo=!0),w):(Rm&42)===0?(Mo=!0,w.memoizedState=D):(w=jH(),rs.lanes|=w,Um|=w,E)}function jB(w,E,D,z,Z){var ie=ot.p;ot.p=ie!==0&&8>ie?ie:8;var _e=se.T,De={};se.T=De,hD(w,!1,E,D);try{var qe=Z(),We=se.S;if(We!==null&&We(De,qe),qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var yt=sve(qe,z);iw(w,E,yt,lc(w))}else iw(w,E,z,lc(w))}catch(It){iw(w,E,{then:function(){},status:"rejected",reason:It},lc())}finally{ot.p=ie,se.T=_e}}function lve(){}function cD(w,E,D,z){if(w.tag!==5)throw Error(s(476));var Z=BB(w).queue;jB(w,Z,E,ut,D===null?lve:function(){return HB(w),D(z)})}function BB(w){var E=w.memoizedState;if(E!==null)return E;E={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:ut},next:null};var D={};return E.next={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:D},next:null},w.memoizedState=E,w=w.alternate,w!==null&&(w.memoizedState=E),E}function HB(w){var E=BB(w).next.queue;iw(w,E,{},lc())}function uD(){return Ia(ww)}function UB(){return Yr().memoizedState}function YB(){return Yr().memoizedState}function cve(w){for(var E=w.return;E!==null;){switch(E.tag){case 24:case 3:var D=lc();w=qm(D);var z=Vm(E,w,D);z!==null&&(nl(z,E,D),rw(z,E,D)),E={cache:Y7()},w.payload=E;return}E=E.return}}function uve(w,E,D){var z=lc();D={lane:z,revertLane:0,action:D,hasEagerState:!1,eagerState:null,next:null},tP(w)?WB(E,D):(D=q7(w,E,D,z),D!==null&&(nl(D,w,z),ZB(D,E,z)))}function XB(w,E,D){var z=lc();iw(w,E,D,z)}function iw(w,E,D,z){var Z={lane:z,revertLane:0,action:D,hasEagerState:!1,eagerState:null,next:null};if(tP(w))WB(E,Z);else{var ie=w.alternate;if(w.lanes===0&&(ie===null||ie.lanes===0)&&(ie=E.lastRenderedReducer,ie!==null))try{var _e=E.lastRenderedState,De=ie(_e,D);if(Z.hasEagerState=!0,Z.eagerState=De,$e(De,_e))return F5(w,E,Z,0),$n===null&&L5(),!1}catch{}finally{}if(D=q7(w,E,Z,z),D!==null)return nl(D,w,z),ZB(D,E,z),!0}return!1}function hD(w,E,D,z){if(z={lane:2,revertLane:ek(),action:z,hasEagerState:!1,eagerState:null,next:null},tP(w)){if(E)throw Error(s(479))}else E=q7(w,D,z,2),E!==null&&nl(E,w,2)}function tP(w){var E=w.alternate;return w===rs||E!==null&&E===rs}function WB(w,E){a_=X5=!0;var D=w.pending;D===null?E.next=E:(E.next=D.next,D.next=E),w.pending=E}function ZB(w,E,D){if((D&4194176)!==0){var z=E.lanes;z&=w.pendingLanes,D|=z,E.lanes=D,Ce(w,D)}}var md={readContext:Ia,use:K5,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useLayoutEffect:Or,useInsertionEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useSyncExternalStore:Or,useId:Or};md.useCacheRefresh=Or,md.useMemoCache=Or,md.useHostTransitionStatus=Or,md.useFormState=Or,md.useActionState=Or,md.useOptimistic=Or;var g1={readContext:Ia,use:K5,useCallback:function(w,E){return kl().memoizedState=[w,E===void 0?null:E],w},useContext:Ia,useEffect:OB,useImperativeHandle:function(w,E,D){D=D!=null?D.concat([w]):null,Q5(4194308,4,FB.bind(null,E,w),D)},useLayoutEffect:function(w,E){return Q5(4194308,4,w,E)},useInsertionEffect:function(w,E){Q5(4,2,w,E)},useMemo:function(w,E){var D=kl();E=E===void 0?null:E;var z=w();if(m1){a(!0);try{w()}finally{a(!1)}}return D.memoizedState=[z,E],z},useReducer:function(w,E,D){var z=kl();if(D!==void 0){var Z=D(E);if(m1){a(!0);try{D(E)}finally{a(!1)}}}else Z=E;return z.memoizedState=z.baseState=Z,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:Z},z.queue=w,w=w.dispatch=uve.bind(null,rs,w),[z.memoizedState,w]},useRef:function(w){var E=kl();return w={current:w},E.memoizedState=w},useState:function(w){w=nD(w);var E=w.queue,D=XB.bind(null,rs,E);return E.dispatch=D,[w.memoizedState,D]},useDebugValue:aD,useDeferredValue:function(w,E){var D=kl();return lD(D,w,E)},useTransition:function(){var w=nD(!1);return w=jB.bind(null,rs,w.queue,!0,!1),kl().memoizedState=w,[!1,w]},useSyncExternalStore:function(w,E,D){var z=rs,Z=kl();if(Rs){if(D===void 0)throw Error(s(407));D=D()}else{if(D=E(),$n===null)throw Error(s(349));(Ts&60)!==0||_B(z,E,D)}Z.memoizedState=D;var ie={value:D,getSnapshot:E};return Z.queue=ie,OB(xB.bind(null,z,ie,w),[w]),z.flags|=2048,c_(9,bB.bind(null,z,ie,D,E),{destroy:void 0},null),D},useId:function(){var w=kl(),E=$n.identifierPrefix;if(Rs){var D=zf,z=Ff;D=(z&~(1<<32-c(z)-1)).toString(32)+D,E=":"+E+"R"+D,D=W5++,0<D&&(E+="H"+D.toString(32)),E+=":"}else D=nve++,E=":"+E+"r"+D.toString(32)+":";return w.memoizedState=E},useCacheRefresh:function(){return kl().memoizedState=cve.bind(null,rs)}};g1.useMemoCache=tD,g1.useHostTransitionStatus=uD,g1.useFormState=AB,g1.useActionState=AB,g1.useOptimistic=function(w){var E=kl();E.memoizedState=E.baseState=w;var D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return E.queue=D,E=hD.bind(null,rs,!0,D),D.dispatch=E,[w,E]};var Lm={readContext:Ia,use:K5,useCallback:qB,useContext:Ia,useEffect:oD,useImperativeHandle:zB,useInsertionEffect:RB,useLayoutEffect:LB,useMemo:VB,useReducer:J5,useRef:$B,useState:function(){return J5(Vf)},useDebugValue:aD,useDeferredValue:function(w,E){var D=Yr();return GB(D,yn.memoizedState,w,E)},useTransition:function(){var w=J5(Vf)[0],E=Yr().memoizedState;return[typeof w=="boolean"?w:tw(w),E]},useSyncExternalStore:vB,useId:UB};Lm.useCacheRefresh=YB,Lm.useMemoCache=tD,Lm.useHostTransitionStatus=uD,Lm.useFormState=DB,Lm.useActionState=DB,Lm.useOptimistic=function(w,E){var D=Yr();return EB(D,yn,w,E)};var y1={readContext:Ia,use:K5,useCallback:qB,useContext:Ia,useEffect:oD,useImperativeHandle:zB,useInsertionEffect:RB,useLayoutEffect:LB,useMemo:VB,useReducer:sD,useRef:$B,useState:function(){return sD(Vf)},useDebugValue:aD,useDeferredValue:function(w,E){var D=Yr();return yn===null?lD(D,w,E):GB(D,yn.memoizedState,w,E)},useTransition:function(){var w=sD(Vf)[0],E=Yr().memoizedState;return[typeof w=="boolean"?w:tw(w),E]},useSyncExternalStore:vB,useId:UB};y1.useCacheRefresh=YB,y1.useMemoCache=tD,y1.useHostTransitionStatus=uD,y1.useFormState=NB,y1.useActionState=NB,y1.useOptimistic=function(w,E){var D=Yr();return yn!==null?EB(D,yn,w,E):(D.baseState=w,[w,D.queue.dispatch])};function dD(w,E,D,z){E=w.memoizedState,D=D(z,E),D=D==null?E:oe({},E,D),w.memoizedState=D,w.lanes===0&&(w.updateQueue.baseState=D)}var fD={isMounted:function(w){return(w=w._reactInternals)?Re(w)===w:!1},enqueueSetState:function(w,E,D){w=w._reactInternals;var z=lc(),Z=qm(z);Z.payload=E,D!=null&&(Z.callback=D),E=Vm(w,Z,z),E!==null&&(nl(E,w,z),rw(E,w,z))},enqueueReplaceState:function(w,E,D){w=w._reactInternals;var z=lc(),Z=qm(z);Z.tag=1,Z.payload=E,D!=null&&(Z.callback=D),E=Vm(w,Z,z),E!==null&&(nl(E,w,z),rw(E,w,z))},enqueueForceUpdate:function(w,E){w=w._reactInternals;var D=lc(),z=qm(D);z.tag=2,E!=null&&(z.callback=E),E=Vm(w,z,D),E!==null&&(nl(E,w,D),rw(E,w,D))}};function KB(w,E,D,z,Z,ie,_e){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(z,ie,_e):E.prototype&&E.prototype.isPureReactComponent?!je(D,z)||!je(Z,ie):!0}function JB(w,E,D,z){w=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(D,z),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(D,z),E.state!==w&&fD.enqueueReplaceState(E,E.state,null)}function v1(w,E){var D=E;if("ref"in E){D={};for(var z in E)z!=="ref"&&(D[z]=E[z])}if(w=w.defaultProps){D===E&&(D=oe({},D));for(var Z in w)D[Z]===void 0&&(D[Z]=w[Z])}return D}var iP=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function QB(w){iP(w)}function eH(w){console.error(w)}function tH(w){iP(w)}function sP(w,E){try{var D=w.onUncaughtError;D(E.value,{componentStack:E.stack})}catch(z){setTimeout(function(){throw z})}}function iH(w,E,D){try{var z=w.onCaughtError;z(D.value,{componentStack:D.stack,errorBoundary:E.tag===1?E.stateNode:null})}catch(Z){setTimeout(function(){throw Z})}}function pD(w,E,D){return D=qm(D),D.tag=3,D.payload={element:null},D.callback=function(){sP(w,E)},D}function sH(w){return w=qm(w),w.tag=3,w}function nH(w,E,D,z){var Z=D.type.getDerivedStateFromError;if(typeof Z=="function"){var ie=z.value;w.payload=function(){return Z(ie)},w.callback=function(){iH(E,D,z)}}var _e=D.stateNode;_e!==null&&typeof _e.componentDidCatch=="function"&&(w.callback=function(){iH(E,D,z),typeof Z!="function"&&(Ym===null?Ym=new Set([this]):Ym.add(this));var De=z.stack;this.componentDidCatch(z.value,{componentStack:De!==null?De:""})})}function hve(w,E,D,z,Z){if(D.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(E=D.alternate,E!==null&&nw(E,D,Z,!0),D=su.current,D!==null){switch(D.tag){case 13:return pd===null?WD():D.alternate===null&&Pr===0&&(Pr=3),D.flags&=-257,D.flags|=65536,D.lanes=Z,z===B7?D.flags|=16384:(E=D.updateQueue,E===null?D.updateQueue=new Set([z]):E.add(z),KD(w,z,Z)),!1;case 22:return D.flags|=65536,z===B7?D.flags|=16384:(E=D.updateQueue,E===null?(E={transitions:null,markerInstances:null,retryQueue:new Set([z])},D.updateQueue=E):(D=E.retryQueue,D===null?E.retryQueue=new Set([z]):D.add(z)),KD(w,z,Z)),!1}throw Error(s(435,D.tag))}return KD(w,z,Z),WD(),!1}if(Rs)return E=su.current,E!==null?((E.flags&65536)===0&&(E.flags|=256),E.flags|=65536,E.lanes=Z,z!==j7&&(w=Error(s(422),{cause:z}),Yx(eu(w,D)))):(z!==j7&&(E=Error(s(423),{cause:z}),Yx(eu(E,D))),w=w.current.alternate,w.flags|=65536,Z&=-Z,w.lanes|=Z,z=eu(z,D),Z=pD(w.stateNode,z,Z),MD(w,Z),Pr!==4&&(Pr=2)),!1;var ie=Error(s(520),{cause:z});if(ie=eu(ie,D),fw===null?fw=[ie]:fw.push(ie),Pr!==4&&(Pr=2),E===null)return!0;z=eu(z,D),D=E;do{switch(D.tag){case 3:return D.flags|=65536,w=Z&-Z,D.lanes|=w,w=pD(D.stateNode,z,w),MD(D,w),!1;case 1:if(E=D.type,ie=D.stateNode,(D.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Ym===null||!Ym.has(ie))))return D.flags|=65536,Z&=-Z,D.lanes|=Z,Z=sH(Z),nH(Z,w,D,z),MD(D,Z),!1}D=D.return}while(D!==null);return!1}var rH=Error(s(461)),Mo=!1;function sa(w,E,D,z){E.child=w===null?uB(E,null,D,z):f1(E,w.child,D,z)}function oH(w,E,D,z,Z){D=D.render;var ie=E.ref;if("ref"in z){var _e={};for(var De in z)De!=="ref"&&(_e[De]=z[De])}else _e=z;return b1(E),z=K7(w,E,D,_e,ie,Z),De=J7(),w!==null&&!Mo?(Q7(w,E,Z),Gf(w,E,Z)):(Rs&&De&&V7(E),E.flags|=1,sa(w,E,z,Z),E.child)}function aH(w,E,D,z,Z){if(w===null){var ie=D.type;return typeof ie=="function"&&!LD(ie)&&ie.defaultProps===void 0&&D.compare===null?(E.tag=15,E.type=ie,lH(w,E,ie,z,Z)):(w=lP(D.type,null,z,E,E.mode,Z),w.ref=E.ref,w.return=E,E.child=w)}if(ie=w.child,!SD(w,Z)){var _e=ie.memoizedProps;if(D=D.compare,D=D!==null?D:je,D(_e,z)&&w.ref===E.ref)return Gf(w,E,Z)}return E.flags|=1,w=Hm(ie,z),w.ref=E.ref,w.return=E,E.child=w}function lH(w,E,D,z,Z){if(w!==null){var ie=w.memoizedProps;if(je(ie,z)&&w.ref===E.ref)if(Mo=!1,E.pendingProps=z=ie,SD(w,Z))(w.flags&131072)!==0&&(Mo=!0);else return E.lanes=w.lanes,Gf(w,E,Z)}return mD(w,E,D,z,Z)}function cH(w,E,D){var z=E.pendingProps,Z=z.children,ie=(E.stateNode._pendingVisibility&2)!==0,_e=w!==null?w.memoizedState:null;if(sw(w,E),z.mode==="hidden"||ie){if((E.flags&128)!==0){if(z=_e!==null?_e.baseLanes|D:D,w!==null){for(Z=E.child=w.child,ie=0;Z!==null;)ie=ie|Z.lanes|Z.childLanes,Z=Z.sibling;E.childLanes=ie&~z}else E.childLanes=0,E.child=null;return uH(w,E,z,D)}if((D&536870912)!==0)E.memoizedState={baseLanes:0,cachePool:null},w!==null&&Y5(E,_e!==null?_e.cachePool:null),_e!==null?hB(E,_e):H7(),dB(E);else return E.lanes=E.childLanes=536870912,uH(w,E,_e!==null?_e.baseLanes|D:D,D)}else _e!==null?(Y5(E,_e.cachePool),hB(E,_e),Om(),E.memoizedState=null):(w!==null&&Y5(E,null),H7(),Om());return sa(w,E,Z,D),E.child}function uH(w,E,D,z){var Z=W7();return Z=Z===null?null:{parent:mo._currentValue,pool:Z},E.memoizedState={baseLanes:D,cachePool:Z},w!==null&&Y5(E,null),H7(),dB(E),w!==null&&nw(w,E,z,!0),null}function sw(w,E){var D=E.ref;if(D===null)w!==null&&w.ref!==null&&(E.flags|=2097664);else{if(typeof D!="function"&&typeof D!="object")throw Error(s(284));(w===null||w.ref!==D)&&(E.flags|=2097664)}}function mD(w,E,D,z,Z){return b1(E),D=K7(w,E,D,z,void 0,Z),z=J7(),w!==null&&!Mo?(Q7(w,E,Z),Gf(w,E,Z)):(Rs&&z&&V7(E),E.flags|=1,sa(w,E,D,Z),E.child)}function hH(w,E,D,z,Z,ie){return b1(E),E.updateQueue=null,D=yB(E,z,D,Z),gB(w),z=J7(),w!==null&&!Mo?(Q7(w,E,ie),Gf(w,E,ie)):(Rs&&z&&V7(E),E.flags|=1,sa(w,E,D,ie),E.child)}function dH(w,E,D,z,Z){if(b1(E),E.stateNode===null){var ie=e_,_e=D.contextType;typeof _e=="object"&&_e!==null&&(ie=Ia(_e)),ie=new D(z,ie),E.memoizedState=ie.state!==null&&ie.state!==void 0?ie.state:null,ie.updater=fD,E.stateNode=ie,ie._reactInternals=E,ie=E.stateNode,ie.props=z,ie.state=E.memoizedState,ie.refs={},TD(E),_e=D.contextType,ie.context=typeof _e=="object"&&_e!==null?Ia(_e):e_,ie.state=E.memoizedState,_e=D.getDerivedStateFromProps,typeof _e=="function"&&(dD(E,D,_e,z),ie.state=E.memoizedState),typeof D.getDerivedStateFromProps=="function"||typeof ie.getSnapshotBeforeUpdate=="function"||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(_e=ie.state,typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount(),_e!==ie.state&&fD.enqueueReplaceState(ie,ie.state,null),aw(E,z,ie,Z),ow(),ie.state=E.memoizedState),typeof ie.componentDidMount=="function"&&(E.flags|=4194308),z=!0}else if(w===null){ie=E.stateNode;var De=E.memoizedProps,qe=v1(D,De);ie.props=qe;var We=ie.context,yt=D.contextType;_e=e_,typeof yt=="object"&&yt!==null&&(_e=Ia(yt));var It=D.getDerivedStateFromProps;yt=typeof It=="function"||typeof ie.getSnapshotBeforeUpdate=="function",De=E.pendingProps!==De,yt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(De||We!==_e)&&JB(E,ie,z,_e),zm=!1;var at=E.memoizedState;ie.state=at,aw(E,z,ie,Z),ow(),We=E.memoizedState,De||at!==We||zm?(typeof It=="function"&&(dD(E,D,It,z),We=E.memoizedState),(qe=zm||KB(E,D,qe,z,at,We,_e))?(yt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(E.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=z,E.memoizedState=We),ie.props=z,ie.state=We,ie.context=_e,z=qe):(typeof ie.componentDidMount=="function"&&(E.flags|=4194308),z=!1)}else{ie=E.stateNode,ID(w,E),_e=E.memoizedProps,yt=v1(D,_e),ie.props=yt,It=E.pendingProps,at=ie.context,We=D.contextType,qe=e_,typeof We=="object"&&We!==null&&(qe=Ia(We)),De=D.getDerivedStateFromProps,(We=typeof De=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(_e!==It||at!==qe)&&JB(E,ie,z,qe),zm=!1,at=E.memoizedState,ie.state=at,aw(E,z,ie,Z),ow();var gt=E.memoizedState;_e!==It||at!==gt||zm||w!==null&&w.dependencies!==null&&nP(w.dependencies)?(typeof De=="function"&&(dD(E,D,De,z),gt=E.memoizedState),(yt=zm||KB(E,D,yt,z,at,gt,qe)||w!==null&&w.dependencies!==null&&nP(w.dependencies))?(We||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(z,gt,qe),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(z,gt,qe)),typeof ie.componentDidUpdate=="function"&&(E.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof ie.componentDidUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=1024),E.memoizedProps=z,E.memoizedState=gt),ie.props=z,ie.state=gt,ie.context=qe,z=yt):(typeof ie.componentDidUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=1024),z=!1)}return ie=z,sw(w,E),z=(E.flags&128)!==0,ie||z?(ie=E.stateNode,D=z&&typeof D.getDerivedStateFromError!="function"?null:ie.render(),E.flags|=1,w!==null&&z?(E.child=f1(E,w.child,null,Z),E.child=f1(E,null,D,Z)):sa(w,E,D,Z),E.memoizedState=ie.state,w=E.child):w=Gf(w,E,Z),w}function fH(w,E,D,z){return Ux(),E.flags|=256,sa(w,E,D,z),E.child}var gD={dehydrated:null,treeContext:null,retryLane:0};function yD(w){return{baseLanes:w,cachePool:mB()}}function vD(w,E,D){return w=w!==null?w.childLanes&~D:0,E&&(w|=au),w}function pH(w,E,D){var z=E.pendingProps,Z=!1,ie=(E.flags&128)!==0,_e;if((_e=ie)||(_e=w!==null&&w.memoizedState===null?!1:(po.current&2)!==0),_e&&(Z=!0,E.flags&=-129),_e=(E.flags&32)!==0,E.flags&=-33,w===null){if(Rs){if(Z?$m(E):Om(),Rs){var De=ia,qe;if(qe=De){e:{for(qe=De,De=fd;qe.nodeType!==8;){if(!De){De=null;break e}if(qe=oh(qe.nextSibling),qe===null){De=null;break e}}De=qe}De!==null?(E.memoizedState={dehydrated:De,treeContext:u1!==null?{id:Ff,overflow:zf}:null,retryLane:536870912},qe=ou(18,null,null,0),qe.stateNode=De,qe.return=E,E.child=qe,sl=E,ia=null,qe=!0):qe=!1}qe||d1(E)}if(De=E.memoizedState,De!==null&&(De=De.dehydrated,De!==null))return De.data==="$!"?E.lanes=16:E.lanes=536870912,null;qf(E)}return De=z.children,z=z.fallback,Z?(Om(),Z=E.mode,De=bD({mode:"hidden",children:De},Z),z=w1(z,Z,D,null),De.return=E,z.return=E,De.sibling=z,E.child=De,Z=E.child,Z.memoizedState=yD(D),Z.childLanes=vD(w,_e,D),E.memoizedState=gD,z):($m(E),_D(E,De))}if(qe=w.memoizedState,qe!==null&&(De=qe.dehydrated,De!==null)){if(ie)E.flags&256?($m(E),E.flags&=-257,E=xD(w,E,D)):E.memoizedState!==null?(Om(),E.child=w.child,E.flags|=128,E=null):(Om(),Z=z.fallback,De=E.mode,z=bD({mode:"visible",children:z.children},De),Z=w1(Z,De,D,null),Z.flags|=2,z.return=E,Z.return=E,z.sibling=Z,E.child=z,f1(E,w.child,null,D),z=E.child,z.memoizedState=yD(D),z.childLanes=vD(w,_e,D),E.memoizedState=gD,E=Z);else if($m(E),De.data==="$!"){if(_e=De.nextSibling&&De.nextSibling.dataset,_e)var We=_e.dgst;_e=We,z=Error(s(419)),z.stack="",z.digest=_e,Yx({value:z,source:null,stack:null}),E=xD(w,E,D)}else if(Mo||nw(w,E,D,!1),_e=(D&w.childLanes)!==0,Mo||_e){if(_e=$n,_e!==null){if(z=D&-D,(z&42)!==0)z=1;else switch(z){case 2:z=1;break;case 8:z=4;break;case 32:z=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:z=64;break;case 268435456:z=134217728;break;default:z=0}if(z=(z&(_e.suspendedLanes|D))!==0?0:z,z!==0&&z!==qe.retryLane)throw qe.retryLane=z,Nm(w,z),nl(_e,w,z),rH}De.data==="$?"||WD(),E=xD(w,E,D)}else De.data==="$?"?(E.flags|=128,E.child=w.child,E=Pve.bind(null,w),De._reactRetry=E,E=null):(w=qe.treeContext,ia=oh(De.nextSibling),sl=E,Rs=!0,nh=null,fd=!1,w!==null&&(tu[iu++]=Ff,tu[iu++]=zf,tu[iu++]=u1,Ff=w.id,zf=w.overflow,u1=E),E=_D(E,z.children),E.flags|=4096);return E}return Z?(Om(),Z=z.fallback,De=E.mode,qe=w.child,We=qe.sibling,z=Hm(qe,{mode:"hidden",children:z.children}),z.subtreeFlags=qe.subtreeFlags&31457280,We!==null?Z=Hm(We,Z):(Z=w1(Z,De,D,null),Z.flags|=2),Z.return=E,z.return=E,z.sibling=Z,E.child=z,z=Z,Z=E.child,De=w.child.memoizedState,De===null?De=yD(D):(qe=De.cachePool,qe!==null?(We=mo._currentValue,qe=qe.parent!==We?{parent:We,pool:We}:qe):qe=mB(),De={baseLanes:De.baseLanes|D,cachePool:qe}),Z.memoizedState=De,Z.childLanes=vD(w,_e,D),E.memoizedState=gD,z):($m(E),D=w.child,w=D.sibling,D=Hm(D,{mode:"visible",children:z.children}),D.return=E,D.sibling=null,w!==null&&(_e=E.deletions,_e===null?(E.deletions=[w],E.flags|=16):_e.push(w)),E.child=D,E.memoizedState=null,D)}function _D(w,E){return E=bD({mode:"visible",children:E},w.mode),E.return=w,w.child=E}function bD(w,E){return qH(w,E,0,null)}function xD(w,E,D){return f1(E,w.child,null,D),w=_D(E,E.pendingProps.children),w.flags|=2,E.memoizedState=null,w}function mH(w,E,D){w.lanes|=E;var z=w.alternate;z!==null&&(z.lanes|=E),CD(w.return,E,D)}function wD(w,E,D,z,Z){var ie=w.memoizedState;ie===null?w.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:z,tail:D,tailMode:Z}:(ie.isBackwards=E,ie.rendering=null,ie.renderingStartTime=0,ie.last=z,ie.tail=D,ie.tailMode=Z)}function gH(w,E,D){var z=E.pendingProps,Z=z.revealOrder,ie=z.tail;if(sa(w,E,z.children,D),z=po.current,(z&2)!==0)z=z&1|2,E.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=E.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&mH(w,D,E);else if(w.tag===19)mH(w,D,E);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===E)break e;for(;w.sibling===null;){if(w.return===null||w.return===E)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}z&=1}switch(Wi(po,z),Z){case"forwards":for(D=E.child,Z=null;D!==null;)w=D.alternate,w!==null&&U5(w)===null&&(Z=D),D=D.sibling;D=Z,D===null?(Z=E.child,E.child=null):(Z=D.sibling,D.sibling=null),wD(E,!1,Z,D,ie);break;case"backwards":for(D=null,Z=E.child,E.child=null;Z!==null;){if(w=Z.alternate,w!==null&&U5(w)===null){E.child=Z;break}w=Z.sibling,Z.sibling=D,D=Z,Z=w}wD(E,!0,D,null,ie);break;case"together":wD(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Gf(w,E,D){if(w!==null&&(E.dependencies=w.dependencies),Um|=E.lanes,(D&E.childLanes)===0)if(w!==null){if(nw(w,E,D,!1),(D&E.childLanes)===0)return null}else return null;if(w!==null&&E.child!==w.child)throw Error(s(153));if(E.child!==null){for(w=E.child,D=Hm(w,w.pendingProps),E.child=D,D.return=E;w.sibling!==null;)w=w.sibling,D=D.sibling=Hm(w,w.pendingProps),D.return=E;D.sibling=null}return E.child}function SD(w,E){return(w.lanes&E)!==0?!0:(w=w.dependencies,!!(w!==null&&nP(w)))}function dve(w,E,D){switch(E.tag){case 3:ho(E,E.stateNode.containerInfo),Fm(E,mo,w.memoizedState.cache),Ux();break;case 27:case 5:ye(E);break;case 4:ho(E,E.stateNode.containerInfo);break;case 10:Fm(E,E.type,E.memoizedProps.value);break;case 13:var z=E.memoizedState;if(z!==null)return z.dehydrated!==null?($m(E),E.flags|=128,null):(D&E.child.childLanes)!==0?pH(w,E,D):($m(E),w=Gf(w,E,D),w!==null?w.sibling:null);$m(E);break;case 19:var Z=(w.flags&128)!==0;if(z=(D&E.childLanes)!==0,z||(nw(w,E,D,!1),z=(D&E.childLanes)!==0),Z){if(z)return gH(w,E,D);E.flags|=128}if(Z=E.memoizedState,Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),Wi(po,po.current),z)break;return null;case 22:case 23:return E.lanes=0,cH(w,E,D);case 24:Fm(E,mo,w.memoizedState.cache)}return Gf(w,E,D)}function yH(w,E,D){if(w!==null)if(w.memoizedProps!==E.pendingProps)Mo=!0;else{if(!SD(w,D)&&(E.flags&128)===0)return Mo=!1,dve(w,E,D);Mo=(w.flags&131072)!==0}else Mo=!1,Rs&&(E.flags&1048576)!==0&&tB(E,V5,E.index);switch(E.lanes=0,E.tag){case 16:e:{w=E.pendingProps;var z=E.elementType,Z=z._init;if(z=Z(z._payload),E.type=z,typeof z=="function")LD(z)?(w=v1(z,w),E.tag=1,E=dH(null,E,z,w,D)):(E.tag=0,E=mD(null,E,z,w,D));else{if(z!=null){if(Z=z.$$typeof,Z===P){E.tag=11,E=oH(null,E,z,w,D);break e}else if(Z===$){E.tag=14,E=aH(null,E,z,w,D);break e}}throw E=re(z)||z,Error(s(306,E,""))}}return E;case 0:return mD(w,E,E.type,E.pendingProps,D);case 1:return z=E.type,Z=v1(z,E.pendingProps),dH(w,E,z,Z,D);case 3:e:{if(ho(E,E.stateNode.containerInfo),w===null)throw Error(s(387));var ie=E.pendingProps;Z=E.memoizedState,z=Z.element,ID(w,E),aw(E,ie,null,D);var _e=E.memoizedState;if(ie=_e.cache,Fm(E,mo,ie),ie!==Z.cache&&PD(E,[mo],D,!0),ow(),ie=_e.element,Z.isDehydrated)if(Z={element:ie,isDehydrated:!1,cache:_e.cache},E.updateQueue.baseState=Z,E.memoizedState=Z,E.flags&256){E=fH(w,E,ie,D);break e}else if(ie!==z){z=eu(Error(s(424)),E),Yx(z),E=fH(w,E,ie,D);break e}else for(ia=oh(E.stateNode.containerInfo.firstChild),sl=E,Rs=!0,nh=null,fd=!0,D=uB(E,null,ie,D),E.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(Ux(),ie===z){E=Gf(w,E,D);break e}sa(w,E,ie,D)}E=E.child}return E;case 26:return sw(w,E),w===null?(D=bU(E.type,null,E.pendingProps,null))?E.memoizedState=D:Rs||(D=E.type,w=E.pendingProps,z=bP(Us.current).createElement(D),z[et]=E,z[dt]=w,na(z,D,w),Kt(z),E.stateNode=z):E.memoizedState=bU(E.type,w.memoizedProps,E.pendingProps,w.memoizedState),null;case 27:return ye(E),w===null&&Rs&&(z=E.stateNode=yU(E.type,E.pendingProps,Us.current),sl=E,fd=!0,ia=oh(z.firstChild)),z=E.pendingProps.children,w!==null||Rs?sa(w,E,z,D):E.child=f1(E,null,z,D),sw(w,E),E.child;case 5:return w===null&&Rs&&((Z=z=ia)&&(z=Gve(z,E.type,E.pendingProps,fd),z!==null?(E.stateNode=z,sl=E,ia=oh(z.firstChild),fd=!1,Z=!0):Z=!1),Z||d1(E)),ye(E),Z=E.type,ie=E.pendingProps,_e=w!==null?w.memoizedProps:null,z=ie.children,ck(Z,ie)?z=null:_e!==null&&ck(Z,_e)&&(E.flags|=32),E.memoizedState!==null&&(Z=K7(w,E,rve,null,null,D),ww._currentValue=Z),sw(w,E),sa(w,E,z,D),E.child;case 6:return w===null&&Rs&&((w=D=ia)&&(D=jve(D,E.pendingProps,fd),D!==null?(E.stateNode=D,sl=E,ia=null,w=!0):w=!1),w||d1(E)),null;case 13:return pH(w,E,D);case 4:return ho(E,E.stateNode.containerInfo),z=E.pendingProps,w===null?E.child=f1(E,null,z,D):sa(w,E,z,D),E.child;case 11:return oH(w,E,E.type,E.pendingProps,D);case 7:return sa(w,E,E.pendingProps,D),E.child;case 8:return sa(w,E,E.pendingProps.children,D),E.child;case 12:return sa(w,E,E.pendingProps.children,D),E.child;case 10:return z=E.pendingProps,Fm(E,E.type,z.value),sa(w,E,z.children,D),E.child;case 9:return Z=E.type._context,z=E.pendingProps.children,b1(E),Z=Ia(Z),z=z(Z),E.flags|=1,sa(w,E,z,D),E.child;case 14:return aH(w,E,E.type,E.pendingProps,D);case 15:return lH(w,E,E.type,E.pendingProps,D);case 19:return gH(w,E,D);case 22:return cH(w,E,D);case 24:return b1(E),z=Ia(mo),w===null?(Z=W7(),Z===null&&(Z=$n,ie=Y7(),Z.pooledCache=ie,ie.refCount++,ie!==null&&(Z.pooledCacheLanes|=D),Z=ie),E.memoizedState={parent:z,cache:Z},TD(E),Fm(E,mo,Z)):((w.lanes&D)!==0&&(ID(w,E),aw(E,null,null,D),ow()),Z=w.memoizedState,ie=E.memoizedState,Z.parent!==z?(Z={parent:z,cache:z},E.memoizedState=Z,E.lanes===0&&(E.memoizedState=E.updateQueue.baseState=Z),Fm(E,mo,z)):(z=ie.cache,Fm(E,mo,z),z!==Z.cache&&PD(E,[mo],D,!0))),sa(w,E,E.pendingProps.children,D),E.child;case 29:throw E.pendingProps}throw Error(s(156,E.tag))}var ED=Lt(null),_1=null,jf=null;function Fm(w,E,D){Wi(ED,E._currentValue),E._currentValue=D}function Bf(w){w._currentValue=ED.current,Dt(ED)}function CD(w,E,D){for(;w!==null;){var z=w.alternate;if((w.childLanes&E)!==E?(w.childLanes|=E,z!==null&&(z.childLanes|=E)):z!==null&&(z.childLanes&E)!==E&&(z.childLanes|=E),w===D)break;w=w.return}}function PD(w,E,D,z){var Z=w.child;for(Z!==null&&(Z.return=w);Z!==null;){var ie=Z.dependencies;if(ie!==null){var _e=Z.child;ie=ie.firstContext;e:for(;ie!==null;){var De=ie;ie=Z;for(var qe=0;qe<E.length;qe++)if(De.context===E[qe]){ie.lanes|=D,De=ie.alternate,De!==null&&(De.lanes|=D),CD(ie.return,D,w),z||(_e=null);break e}ie=De.next}}else if(Z.tag===18){if(_e=Z.return,_e===null)throw Error(s(341));_e.lanes|=D,ie=_e.alternate,ie!==null&&(ie.lanes|=D),CD(_e,D,w),_e=null}else _e=Z.child;if(_e!==null)_e.return=Z;else for(_e=Z;_e!==null;){if(_e===w){_e=null;break}if(Z=_e.sibling,Z!==null){Z.return=_e.return,_e=Z;break}_e=_e.return}Z=_e}}function nw(w,E,D,z){w=null;for(var Z=E,ie=!1;Z!==null;){if(!ie){if((Z.flags&524288)!==0)ie=!0;else if((Z.flags&262144)!==0)break}if(Z.tag===10){var _e=Z.alternate;if(_e===null)throw Error(s(387));if(_e=_e.memoizedProps,_e!==null){var De=Z.type;$e(Z.pendingProps.value,_e.value)||(w!==null?w.push(De):w=[De])}}else if(Z===dr.current){if(_e=Z.alternate,_e===null)throw Error(s(387));_e.memoizedState.memoizedState!==Z.memoizedState.memoizedState&&(w!==null?w.push(ww):w=[ww])}Z=Z.return}w!==null&&PD(E,w,D,z),E.flags|=262144}function nP(w){for(w=w.firstContext;w!==null;){if(!$e(w.context._currentValue,w.memoizedValue))return!0;w=w.next}return!1}function b1(w){_1=w,jf=null,w=w.dependencies,w!==null&&(w.firstContext=null)}function Ia(w){return vH(_1,w)}function rP(w,E){return _1===null&&b1(w),vH(w,E)}function vH(w,E){var D=E._currentValue;if(E={context:E,memoizedValue:D,next:null},jf===null){if(w===null)throw Error(s(308));jf=E,w.dependencies={lanes:0,firstContext:E},w.flags|=524288}else jf=jf.next=E;return D}var zm=!1;function TD(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ID(w,E){w=w.updateQueue,E.updateQueue===w&&(E.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,callbacks:null})}function qm(w){return{lane:w,tag:0,payload:null,callback:null,next:null}}function Vm(w,E,D){var z=w.updateQueue;if(z===null)return null;if(z=z.shared,(mr&2)!==0){var Z=z.pending;return Z===null?E.next=E:(E.next=Z.next,Z.next=E),z.pending=E,E=z5(w),Qj(w,null,D),E}return F5(w,z,E,D),z5(w)}function rw(w,E,D){if(E=E.updateQueue,E!==null&&(E=E.shared,(D&4194176)!==0)){var z=E.lanes;z&=w.pendingLanes,D|=z,E.lanes=D,Ce(w,D)}}function MD(w,E){var D=w.updateQueue,z=w.alternate;if(z!==null&&(z=z.updateQueue,D===z)){var Z=null,ie=null;if(D=D.firstBaseUpdate,D!==null){do{var _e={lane:D.lane,tag:D.tag,payload:D.payload,callback:null,next:null};ie===null?Z=ie=_e:ie=ie.next=_e,D=D.next}while(D!==null);ie===null?Z=ie=E:ie=ie.next=E}else Z=ie=E;D={baseState:z.baseState,firstBaseUpdate:Z,lastBaseUpdate:ie,shared:z.shared,callbacks:z.callbacks},w.updateQueue=D;return}w=D.lastBaseUpdate,w===null?D.firstBaseUpdate=E:w.next=E,D.lastBaseUpdate=E}var AD=!1;function ow(){if(AD){var w=o_;if(w!==null)throw w}}function aw(w,E,D,z){AD=!1;var Z=w.updateQueue;zm=!1;var ie=Z.firstBaseUpdate,_e=Z.lastBaseUpdate,De=Z.shared.pending;if(De!==null){Z.shared.pending=null;var qe=De,We=qe.next;qe.next=null,_e===null?ie=We:_e.next=We,_e=qe;var yt=w.alternate;yt!==null&&(yt=yt.updateQueue,De=yt.lastBaseUpdate,De!==_e&&(De===null?yt.firstBaseUpdate=We:De.next=We,yt.lastBaseUpdate=qe))}if(ie!==null){var It=Z.baseState;_e=0,yt=We=qe=null,De=ie;do{var at=De.lane&-536870913,gt=at!==De.lane;if(gt?(Ts&at)===at:(z&at)===at){at!==0&&at===r_&&(AD=!0),yt!==null&&(yt=yt.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var di=w,Gi=De;at=E;var Tr=D;switch(Gi.tag){case 1:if(di=Gi.payload,typeof di=="function"){It=di.call(Tr,It,at);break e}It=di;break e;case 3:di.flags=di.flags&-65537|128;case 0:if(di=Gi.payload,at=typeof di=="function"?di.call(Tr,It,at):di,at==null)break e;It=oe({},It,at);break e;case 2:zm=!0}}at=De.callback,at!==null&&(w.flags|=64,gt&&(w.flags|=8192),gt=Z.callbacks,gt===null?Z.callbacks=[at]:gt.push(at))}else gt={lane:at,tag:De.tag,payload:De.payload,callback:De.callback,next:null},yt===null?(We=yt=gt,qe=It):yt=yt.next=gt,_e|=at;if(De=De.next,De===null){if(De=Z.shared.pending,De===null)break;gt=De,De=gt.next,gt.next=null,Z.lastBaseUpdate=gt,Z.shared.pending=null}}while(!0);yt===null&&(qe=It),Z.baseState=qe,Z.firstBaseUpdate=We,Z.lastBaseUpdate=yt,ie===null&&(Z.shared.lanes=0),Um|=_e,w.lanes=_e,w.memoizedState=It}}function _H(w,E){if(typeof w!="function")throw Error(s(191,w));w.call(E)}function bH(w,E){var D=w.callbacks;if(D!==null)for(w.callbacks=null,w=0;w<D.length;w++)_H(D[w],E)}function lw(w,E){try{var D=E.updateQueue,z=D!==null?D.lastEffect:null;if(z!==null){var Z=z.next;D=Z;do{if((D.tag&w)===w){z=void 0;var ie=D.create,_e=D.inst;z=ie(),_e.destroy=z}D=D.next}while(D!==Z)}}catch(De){En(E,E.return,De)}}function Gm(w,E,D){try{var z=E.updateQueue,Z=z!==null?z.lastEffect:null;if(Z!==null){var ie=Z.next;z=ie;do{if((z.tag&w)===w){var _e=z.inst,De=_e.destroy;if(De!==void 0){_e.destroy=void 0,Z=E;var qe=D;try{De()}catch(We){En(Z,qe,We)}}}z=z.next}while(z!==ie)}}catch(We){En(E,E.return,We)}}function xH(w){var E=w.updateQueue;if(E!==null){var D=w.stateNode;try{bH(E,D)}catch(z){En(w,w.return,z)}}}function wH(w,E,D){D.props=v1(w.type,w.memoizedProps),D.state=w.memoizedState;try{D.componentWillUnmount()}catch(z){En(w,E,z)}}function x1(w,E){try{var D=w.ref;if(D!==null){var z=w.stateNode;switch(w.tag){case 26:case 27:case 5:var Z=z;break;default:Z=z}typeof D=="function"?w.refCleanup=D(Z):D.current=Z}}catch(ie){En(w,E,ie)}}function rc(w,E){var D=w.ref,z=w.refCleanup;if(D!==null)if(typeof z=="function")try{z()}catch(Z){En(w,E,Z)}finally{w.refCleanup=null,w=w.alternate,w!=null&&(w.refCleanup=null)}else if(typeof D=="function")try{D(null)}catch(Z){En(w,E,Z)}else D.current=null}function SH(w){var E=w.type,D=w.memoizedProps,z=w.stateNode;try{e:switch(E){case"button":case"input":case"select":case"textarea":D.autoFocus&&z.focus();break e;case"img":D.src?z.src=D.src:D.srcSet&&(z.srcset=D.srcSet)}}catch(Z){En(w,w.return,Z)}}function EH(w,E,D){try{var z=w.stateNode;Lve(z,w.type,D,E),z[dt]=E}catch(Z){En(w,w.return,Z)}}function CH(w){return w.tag===5||w.tag===3||w.tag===26||w.tag===27||w.tag===4}function DD(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||CH(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==27&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function kD(w,E,D){var z=w.tag;if(z===5||z===6)w=w.stateNode,E?D.nodeType===8?D.parentNode.insertBefore(w,E):D.insertBefore(w,E):(D.nodeType===8?(E=D.parentNode,E.insertBefore(w,D)):(E=D,E.appendChild(w)),D=D._reactRootContainer,D!=null||E.onclick!==null||(E.onclick=_P));else if(z!==4&&z!==27&&(w=w.child,w!==null))for(kD(w,E,D),w=w.sibling;w!==null;)kD(w,E,D),w=w.sibling}function oP(w,E,D){var z=w.tag;if(z===5||z===6)w=w.stateNode,E?D.insertBefore(w,E):D.appendChild(w);else if(z!==4&&z!==27&&(w=w.child,w!==null))for(oP(w,E,D),w=w.sibling;w!==null;)oP(w,E,D),w=w.sibling}var Hf=!1,Cr=!1,ND=!1,PH=typeof WeakSet=="function"?WeakSet:Set,Ao=null,TH=!1;function fve(w,E){if(w=w.containerInfo,ak=PP,w=Mt(w),Tt(w)){if("selectionStart"in w)var D={start:w.selectionStart,end:w.selectionEnd};else e:{D=(D=w.ownerDocument)&&D.defaultView||window;var z=D.getSelection&&D.getSelection();if(z&&z.rangeCount!==0){D=z.anchorNode;var Z=z.anchorOffset,ie=z.focusNode;z=z.focusOffset;try{D.nodeType,ie.nodeType}catch{D=null;break e}var _e=0,De=-1,qe=-1,We=0,yt=0,It=w,at=null;t:for(;;){for(var gt;It!==D||Z!==0&&It.nodeType!==3||(De=_e+Z),It!==ie||z!==0&&It.nodeType!==3||(qe=_e+z),It.nodeType===3&&(_e+=It.nodeValue.length),(gt=It.firstChild)!==null;)at=It,It=gt;for(;;){if(It===w)break t;if(at===D&&++We===Z&&(De=_e),at===ie&&++yt===z&&(qe=_e),(gt=It.nextSibling)!==null)break;It=at,at=It.parentNode}It=gt}D=De===-1||qe===-1?null:{start:De,end:qe}}else D=null}D=D||{start:0,end:0}}else D=null;for(lk={focusedElem:w,selectionRange:D},PP=!1,Ao=E;Ao!==null;)if(E=Ao,w=E.child,(E.subtreeFlags&1028)!==0&&w!==null)w.return=E,Ao=w;else for(;Ao!==null;){switch(E=Ao,ie=E.alternate,w=E.flags,E.tag){case 0:break;case 11:case 15:break;case 1:if((w&1024)!==0&&ie!==null){w=void 0,D=E,Z=ie.memoizedProps,ie=ie.memoizedState,z=D.stateNode;try{var di=v1(D.type,Z,D.elementType===D.type);w=z.getSnapshotBeforeUpdate(di,ie),z.__reactInternalSnapshotBeforeUpdate=w}catch(Gi){En(D,D.return,Gi)}}break;case 3:if((w&1024)!==0){if(w=E.stateNode.containerInfo,D=w.nodeType,D===9)dk(w);else if(D===1)switch(w.nodeName){case"HEAD":case"HTML":case"BODY":dk(w);break;default:w.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((w&1024)!==0)throw Error(s(163))}if(w=E.sibling,w!==null){w.return=E.return,Ao=w;break}Ao=E.return}return di=TH,TH=!1,di}function IH(w,E,D){var z=D.flags;switch(D.tag){case 0:case 11:case 15:Yf(w,D),z&4&&lw(5,D);break;case 1:if(Yf(w,D),z&4)if(w=D.stateNode,E===null)try{w.componentDidMount()}catch(De){En(D,D.return,De)}else{var Z=v1(D.type,E.memoizedProps);E=E.memoizedState;try{w.componentDidUpdate(Z,E,w.__reactInternalSnapshotBeforeUpdate)}catch(De){En(D,D.return,De)}}z&64&&xH(D),z&512&&x1(D,D.return);break;case 3:if(Yf(w,D),z&64&&(z=D.updateQueue,z!==null)){if(w=null,D.child!==null)switch(D.child.tag){case 27:case 5:w=D.child.stateNode;break;case 1:w=D.child.stateNode}try{bH(z,w)}catch(De){En(D,D.return,De)}}break;case 26:Yf(w,D),z&512&&x1(D,D.return);break;case 27:case 5:Yf(w,D),E===null&&z&4&&SH(D),z&512&&x1(D,D.return);break;case 12:Yf(w,D);break;case 13:Yf(w,D),z&4&&DH(w,D);break;case 22:if(Z=D.memoizedState!==null||Hf,!Z){E=E!==null&&E.memoizedState!==null||Cr;var ie=Hf,_e=Cr;Hf=Z,(Cr=E)&&!_e?jm(w,D,(D.subtreeFlags&8772)!==0):Yf(w,D),Hf=ie,Cr=_e}z&512&&(D.memoizedProps.mode==="manual"?x1(D,D.return):rc(D,D.return));break;default:Yf(w,D)}}function MH(w){var E=w.alternate;E!==null&&(w.alternate=null,MH(E)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(E=w.stateNode,E!==null&&Qi(E)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}var Xr=null,oc=!1;function Uf(w,E,D){for(D=D.child;D!==null;)AH(w,E,D),D=D.sibling}function AH(w,E,D){if(p&&typeof p.onCommitFiberUnmount=="function")try{p.onCommitFiberUnmount(T,D)}catch{}switch(D.tag){case 26:Cr||rc(D,E),Uf(w,E,D),D.memoizedState?D.memoizedState.count--:D.stateNode&&(D=D.stateNode,D.parentNode.removeChild(D));break;case 27:Cr||rc(D,E);var z=Xr,Z=oc;for(Xr=D.stateNode,Uf(w,E,D),D=D.stateNode,E=D.attributes;E.length;)D.removeAttributeNode(E[0]);Qi(D),Xr=z,oc=Z;break;case 5:Cr||rc(D,E);case 6:Z=Xr;var ie=oc;if(Xr=null,Uf(w,E,D),Xr=Z,oc=ie,Xr!==null)if(oc)try{w=Xr,z=D.stateNode,w.nodeType===8?w.parentNode.removeChild(z):w.removeChild(z)}catch(_e){En(D,E,_e)}else try{Xr.removeChild(D.stateNode)}catch(_e){En(D,E,_e)}break;case 18:Xr!==null&&(oc?(E=Xr,D=D.stateNode,E.nodeType===8?hk(E.parentNode,D):E.nodeType===1&&hk(E,D),Pw(E)):hk(Xr,D.stateNode));break;case 4:z=Xr,Z=oc,Xr=D.stateNode.containerInfo,oc=!0,Uf(w,E,D),Xr=z,oc=Z;break;case 0:case 11:case 14:case 15:Cr||Gm(2,D,E),Cr||Gm(4,D,E),Uf(w,E,D);break;case 1:Cr||(rc(D,E),z=D.stateNode,typeof z.componentWillUnmount=="function"&&wH(D,E,z)),Uf(w,E,D);break;case 21:Uf(w,E,D);break;case 22:Cr||rc(D,E),Cr=(z=Cr)||D.memoizedState!==null,Uf(w,E,D),Cr=z;break;default:Uf(w,E,D)}}function DH(w,E){if(E.memoizedState===null&&(w=E.alternate,w!==null&&(w=w.memoizedState,w!==null&&(w=w.dehydrated,w!==null))))try{Pw(w)}catch(D){En(E,E.return,D)}}function pve(w){switch(w.tag){case 13:case 19:var E=w.stateNode;return E===null&&(E=w.stateNode=new PH),E;case 22:return w=w.stateNode,E=w._retryCache,E===null&&(E=w._retryCache=new PH),E;default:throw Error(s(435,w.tag))}}function $D(w,E){var D=pve(w);E.forEach(function(z){var Z=Tve.bind(null,w,z);D.has(z)||(D.add(z),z.then(Z,Z))})}function nu(w,E){var D=E.deletions;if(D!==null)for(var z=0;z<D.length;z++){var Z=D[z],ie=w,_e=E,De=_e;e:for(;De!==null;){switch(De.tag){case 27:case 5:Xr=De.stateNode,oc=!1;break e;case 3:Xr=De.stateNode.containerInfo,oc=!0;break e;case 4:Xr=De.stateNode.containerInfo,oc=!0;break e}De=De.return}if(Xr===null)throw Error(s(160));AH(ie,_e,Z),Xr=null,oc=!1,ie=Z.alternate,ie!==null&&(ie.return=null),Z.return=null}if(E.subtreeFlags&13878)for(E=E.child;E!==null;)kH(E,w),E=E.sibling}var rh=null;function kH(w,E){var D=w.alternate,z=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:nu(E,w),ru(w),z&4&&(Gm(3,w,w.return),lw(3,w),Gm(5,w,w.return));break;case 1:nu(E,w),ru(w),z&512&&(Cr||D===null||rc(D,D.return)),z&64&&Hf&&(w=w.updateQueue,w!==null&&(z=w.callbacks,z!==null&&(D=w.shared.hiddenCallbacks,w.shared.hiddenCallbacks=D===null?z:D.concat(z))));break;case 26:var Z=rh;if(nu(E,w),ru(w),z&512&&(Cr||D===null||rc(D,D.return)),z&4){var ie=D!==null?D.memoizedState:null;if(z=w.memoizedState,D===null)if(z===null)if(w.stateNode===null){e:{z=w.type,D=w.memoizedProps,Z=Z.ownerDocument||Z;t:switch(z){case"title":ie=Z.getElementsByTagName("title")[0],(!ie||ie[Ni]||ie[et]||ie.namespaceURI==="http://www.w3.org/2000/svg"||ie.hasAttribute("itemprop"))&&(ie=Z.createElement(z),Z.head.insertBefore(ie,Z.querySelector("head > title"))),na(ie,z,D),ie[et]=w,Kt(ie),z=ie;break e;case"link":var _e=SU("link","href",Z).get(z+(D.href||""));if(_e){for(var De=0;De<_e.length;De++)if(ie=_e[De],ie.getAttribute("href")===(D.href==null?null:D.href)&&ie.getAttribute("rel")===(D.rel==null?null:D.rel)&&ie.getAttribute("title")===(D.title==null?null:D.title)&&ie.getAttribute("crossorigin")===(D.crossOrigin==null?null:D.crossOrigin)){_e.splice(De,1);break t}}ie=Z.createElement(z),na(ie,z,D),Z.head.appendChild(ie);break;case"meta":if(_e=SU("meta","content",Z).get(z+(D.content||""))){for(De=0;De<_e.length;De++)if(ie=_e[De],ie.getAttribute("content")===(D.content==null?null:""+D.content)&&ie.getAttribute("name")===(D.name==null?null:D.name)&&ie.getAttribute("property")===(D.property==null?null:D.property)&&ie.getAttribute("http-equiv")===(D.httpEquiv==null?null:D.httpEquiv)&&ie.getAttribute("charset")===(D.charSet==null?null:D.charSet)){_e.splice(De,1);break t}}ie=Z.createElement(z),na(ie,z,D),Z.head.appendChild(ie);break;default:throw Error(s(468,z))}ie[et]=w,Kt(ie),z=ie}w.stateNode=z}else EU(Z,w.type,w.stateNode);else w.stateNode=wU(Z,z,w.memoizedProps);else ie!==z?(ie===null?D.stateNode!==null&&(D=D.stateNode,D.parentNode.removeChild(D)):ie.count--,z===null?EU(Z,w.type,w.stateNode):wU(Z,z,w.memoizedProps)):z===null&&w.stateNode!==null&&EH(w,w.memoizedProps,D.memoizedProps)}break;case 27:if(z&4&&w.alternate===null){Z=w.stateNode,ie=w.memoizedProps;try{for(var qe=Z.firstChild;qe;){var We=qe.nextSibling,yt=qe.nodeName;qe[Ni]||yt==="HEAD"||yt==="BODY"||yt==="SCRIPT"||yt==="STYLE"||yt==="LINK"&&qe.rel.toLowerCase()==="stylesheet"||Z.removeChild(qe),qe=We}for(var It=w.type,at=Z.attributes;at.length;)Z.removeAttributeNode(at[0]);na(Z,It,ie),Z[et]=w,Z[dt]=ie}catch(di){En(w,w.return,di)}}case 5:if(nu(E,w),ru(w),z&512&&(Cr||D===null||rc(D,D.return)),w.flags&32){Z=w.stateNode;try{hd(Z,"")}catch(di){En(w,w.return,di)}}z&4&&w.stateNode!=null&&(Z=w.memoizedProps,EH(w,Z,D!==null?D.memoizedProps:Z)),z&1024&&(ND=!0);break;case 6:if(nu(E,w),ru(w),z&4){if(w.stateNode===null)throw Error(s(162));z=w.memoizedProps,D=w.stateNode;try{D.nodeValue=z}catch(di){En(w,w.return,di)}}break;case 3:if(SP=null,Z=rh,rh=xP(E.containerInfo),nu(E,w),rh=Z,ru(w),z&4&&D!==null&&D.memoizedState.isDehydrated)try{Pw(E.containerInfo)}catch(di){En(w,w.return,di)}ND&&(ND=!1,NH(w));break;case 4:z=rh,rh=xP(w.stateNode.containerInfo),nu(E,w),ru(w),rh=z;break;case 12:nu(E,w),ru(w);break;case 13:nu(E,w),ru(w),w.child.flags&8192&&w.memoizedState!==null!=(D!==null&&D.memoizedState!==null)&&(jD=Ji()),z&4&&(z=w.updateQueue,z!==null&&(w.updateQueue=null,$D(w,z)));break;case 22:if(z&512&&(Cr||D===null||rc(D,D.return)),qe=w.memoizedState!==null,We=D!==null&&D.memoizedState!==null,yt=Hf,It=Cr,Hf=yt||qe,Cr=It||We,nu(E,w),Cr=It,Hf=yt,ru(w),E=w.stateNode,E._current=w,E._visibility&=-3,E._visibility|=E._pendingVisibility&2,z&8192&&(E._visibility=qe?E._visibility&-2:E._visibility|1,qe&&(E=Hf||Cr,D===null||We||E||u_(w)),w.memoizedProps===null||w.memoizedProps.mode!=="manual"))e:for(D=null,E=w;;){if(E.tag===5||E.tag===26||E.tag===27){if(D===null){We=D=E;try{if(Z=We.stateNode,qe)ie=Z.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{_e=We.stateNode,De=We.memoizedProps.style;var gt=De!=null&&De.hasOwnProperty("display")?De.display:null;_e.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(di){En(We,We.return,di)}}}else if(E.tag===6){if(D===null){We=E;try{We.stateNode.nodeValue=qe?"":We.memoizedProps}catch(di){En(We,We.return,di)}}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===w)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break e;for(;E.sibling===null;){if(E.return===null||E.return===w)break e;D===E&&(D=null),E=E.return}D===E&&(D=null),E.sibling.return=E.return,E=E.sibling}z&4&&(z=w.updateQueue,z!==null&&(D=z.retryQueue,D!==null&&(z.retryQueue=null,$D(w,D))));break;case 19:nu(E,w),ru(w),z&4&&(z=w.updateQueue,z!==null&&(w.updateQueue=null,$D(w,z)));break;case 21:break;default:nu(E,w),ru(w)}}function ru(w){var E=w.flags;if(E&2){try{if(w.tag!==27){e:{for(var D=w.return;D!==null;){if(CH(D)){var z=D;break e}D=D.return}throw Error(s(160))}switch(z.tag){case 27:var Z=z.stateNode,ie=DD(w);oP(w,ie,Z);break;case 5:var _e=z.stateNode;z.flags&32&&(hd(_e,""),z.flags&=-33);var De=DD(w);oP(w,De,_e);break;case 3:case 4:var qe=z.stateNode.containerInfo,We=DD(w);kD(w,We,qe);break;default:throw Error(s(161))}}}catch(yt){En(w,w.return,yt)}w.flags&=-3}E&4096&&(w.flags&=-4097)}function NH(w){if(w.subtreeFlags&1024)for(w=w.child;w!==null;){var E=w;NH(E),E.tag===5&&E.flags&1024&&E.stateNode.reset(),w=w.sibling}}function Yf(w,E){if(E.subtreeFlags&8772)for(E=E.child;E!==null;)IH(w,E.alternate,E),E=E.sibling}function u_(w){for(w=w.child;w!==null;){var E=w;switch(E.tag){case 0:case 11:case 14:case 15:Gm(4,E,E.return),u_(E);break;case 1:rc(E,E.return);var D=E.stateNode;typeof D.componentWillUnmount=="function"&&wH(E,E.return,D),u_(E);break;case 26:case 27:case 5:rc(E,E.return),u_(E);break;case 22:rc(E,E.return),E.memoizedState===null&&u_(E);break;default:u_(E)}w=w.sibling}}function jm(w,E,D){for(D=D&&(E.subtreeFlags&8772)!==0,E=E.child;E!==null;){var z=E.alternate,Z=w,ie=E,_e=ie.flags;switch(ie.tag){case 0:case 11:case 15:jm(Z,ie,D),lw(4,ie);break;case 1:if(jm(Z,ie,D),z=ie,Z=z.stateNode,typeof Z.componentDidMount=="function")try{Z.componentDidMount()}catch(We){En(z,z.return,We)}if(z=ie,Z=z.updateQueue,Z!==null){var De=z.stateNode;try{var qe=Z.shared.hiddenCallbacks;if(qe!==null)for(Z.shared.hiddenCallbacks=null,Z=0;Z<qe.length;Z++)_H(qe[Z],De)}catch(We){En(z,z.return,We)}}D&&_e&64&&xH(ie),x1(ie,ie.return);break;case 26:case 27:case 5:jm(Z,ie,D),D&&z===null&&_e&4&&SH(ie),x1(ie,ie.return);break;case 12:jm(Z,ie,D);break;case 13:jm(Z,ie,D),D&&_e&4&&DH(Z,ie);break;case 22:ie.memoizedState===null&&jm(Z,ie,D),x1(ie,ie.return);break;default:jm(Z,ie,D)}E=E.sibling}}function OD(w,E){var D=null;w!==null&&w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),w=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(w=E.memoizedState.cachePool.pool),w!==D&&(w!=null&&w.refCount++,D!=null&&Jx(D))}function RD(w,E){w=null,E.alternate!==null&&(w=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==w&&(E.refCount++,w!=null&&Jx(w))}function Bm(w,E,D,z){if(E.subtreeFlags&10256)for(E=E.child;E!==null;)$H(w,E,D,z),E=E.sibling}function $H(w,E,D,z){var Z=E.flags;switch(E.tag){case 0:case 11:case 15:Bm(w,E,D,z),Z&2048&&lw(9,E);break;case 3:Bm(w,E,D,z),Z&2048&&(w=null,E.alternate!==null&&(w=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==w&&(E.refCount++,w!=null&&Jx(w)));break;case 12:if(Z&2048){Bm(w,E,D,z),w=E.stateNode;try{var ie=E.memoizedProps,_e=ie.id,De=ie.onPostCommit;typeof De=="function"&&De(_e,E.alternate===null?"mount":"update",w.passiveEffectDuration,-0)}catch(qe){En(E,E.return,qe)}}else Bm(w,E,D,z);break;case 23:break;case 22:ie=E.stateNode,E.memoizedState!==null?ie._visibility&4?Bm(w,E,D,z):cw(w,E):ie._visibility&4?Bm(w,E,D,z):(ie._visibility|=4,h_(w,E,D,z,(E.subtreeFlags&10256)!==0)),Z&2048&&OD(E.alternate,E);break;case 24:Bm(w,E,D,z),Z&2048&&RD(E.alternate,E);break;default:Bm(w,E,D,z)}}function h_(w,E,D,z,Z){for(Z=Z&&(E.subtreeFlags&10256)!==0,E=E.child;E!==null;){var ie=w,_e=E,De=D,qe=z,We=_e.flags;switch(_e.tag){case 0:case 11:case 15:h_(ie,_e,De,qe,Z),lw(8,_e);break;case 23:break;case 22:var yt=_e.stateNode;_e.memoizedState!==null?yt._visibility&4?h_(ie,_e,De,qe,Z):cw(ie,_e):(yt._visibility|=4,h_(ie,_e,De,qe,Z)),Z&&We&2048&&OD(_e.alternate,_e);break;case 24:h_(ie,_e,De,qe,Z),Z&&We&2048&&RD(_e.alternate,_e);break;default:h_(ie,_e,De,qe,Z)}E=E.sibling}}function cw(w,E){if(E.subtreeFlags&10256)for(E=E.child;E!==null;){var D=w,z=E,Z=z.flags;switch(z.tag){case 22:cw(D,z),Z&2048&&OD(z.alternate,z);break;case 24:cw(D,z),Z&2048&&RD(z.alternate,z);break;default:cw(D,z)}E=E.sibling}}var uw=8192;function d_(w){if(w.subtreeFlags&uw)for(w=w.child;w!==null;)OH(w),w=w.sibling}function OH(w){switch(w.tag){case 26:d_(w),w.flags&uw&&w.memoizedState!==null&&i_e(rh,w.memoizedState,w.memoizedProps);break;case 5:d_(w);break;case 3:case 4:var E=rh;rh=xP(w.stateNode.containerInfo),d_(w),rh=E;break;case 22:w.memoizedState===null&&(E=w.alternate,E!==null&&E.memoizedState!==null?(E=uw,uw=16777216,d_(w),uw=E):d_(w));break;default:d_(w)}}function RH(w){var E=w.alternate;if(E!==null&&(w=E.child,w!==null)){E.child=null;do E=w.sibling,w.sibling=null,w=E;while(w!==null)}}function hw(w){var E=w.deletions;if((w.flags&16)!==0){if(E!==null)for(var D=0;D<E.length;D++){var z=E[D];Ao=z,FH(z,w)}RH(w)}if(w.subtreeFlags&10256)for(w=w.child;w!==null;)LH(w),w=w.sibling}function LH(w){switch(w.tag){case 0:case 11:case 15:hw(w),w.flags&2048&&Gm(9,w,w.return);break;case 3:hw(w);break;case 12:hw(w);break;case 22:var E=w.stateNode;w.memoizedState!==null&&E._visibility&4&&(w.return===null||w.return.tag!==13)?(E._visibility&=-5,aP(w)):hw(w);break;default:hw(w)}}function aP(w){var E=w.deletions;if((w.flags&16)!==0){if(E!==null)for(var D=0;D<E.length;D++){var z=E[D];Ao=z,FH(z,w)}RH(w)}for(w=w.child;w!==null;){switch(E=w,E.tag){case 0:case 11:case 15:Gm(8,E,E.return),aP(E);break;case 22:D=E.stateNode,D._visibility&4&&(D._visibility&=-5,aP(E));break;default:aP(E)}w=w.sibling}}function FH(w,E){for(;Ao!==null;){var D=Ao;switch(D.tag){case 0:case 11:case 15:Gm(8,D,E);break;case 23:case 22:if(D.memoizedState!==null&&D.memoizedState.cachePool!==null){var z=D.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Jx(D.memoizedState.cache)}if(z=D.child,z!==null)z.return=D,Ao=z;else e:for(D=w;Ao!==null;){z=Ao;var Z=z.sibling,ie=z.return;if(MH(z),z===D){Ao=null;break e}if(Z!==null){Z.return=ie,Ao=Z;break e}Ao=ie}}}function mve(w,E,D,z){this.tag=w,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ou(w,E,D,z){return new mve(w,E,D,z)}function LD(w){return w=w.prototype,!(!w||!w.isReactComponent)}function Hm(w,E){var D=w.alternate;return D===null?(D=ou(w.tag,E,w.key,w.mode),D.elementType=w.elementType,D.type=w.type,D.stateNode=w.stateNode,D.alternate=w,w.alternate=D):(D.pendingProps=E,D.type=w.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=w.flags&31457280,D.childLanes=w.childLanes,D.lanes=w.lanes,D.child=w.child,D.memoizedProps=w.memoizedProps,D.memoizedState=w.memoizedState,D.updateQueue=w.updateQueue,E=w.dependencies,D.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},D.sibling=w.sibling,D.index=w.index,D.ref=w.ref,D.refCleanup=w.refCleanup,D}function zH(w,E){w.flags&=31457282;var D=w.alternate;return D===null?(w.childLanes=0,w.lanes=E,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,E=D.dependencies,w.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),w}function lP(w,E,D,z,Z,ie){var _e=0;if(z=w,typeof w=="function")LD(w)&&(_e=1);else if(typeof w=="string")_e=e_e(w,D,us.current)?26:w==="html"||w==="head"||w==="body"?27:5;else e:switch(w){case u:return w1(D.children,Z,ie,E);case f:_e=8,Z|=24;break;case y:return w=ou(12,D,E,Z|2),w.elementType=y,w.lanes=ie,w;case A:return w=ou(13,D,E,Z),w.elementType=A,w.lanes=ie,w;case k:return w=ou(19,D,E,Z),w.elementType=k,w.lanes=ie,w;case G:return qH(D,Z,ie,E);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case _:case S:_e=10;break e;case x:_e=9;break e;case P:_e=11;break e;case $:_e=14;break e;case F:_e=16,z=null;break e}_e=29,D=Error(s(130,w===null?"null":typeof w,"")),z=null}return E=ou(_e,D,E,Z),E.elementType=w,E.type=z,E.lanes=ie,E}function w1(w,E,D,z){return w=ou(7,w,z,E),w.lanes=D,w}function qH(w,E,D,z){w=ou(22,w,z,E),w.elementType=G,w.lanes=D;var Z={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ie=Z._current;if(ie===null)throw Error(s(456));if((Z._pendingVisibility&2)===0){var _e=Nm(ie,2);_e!==null&&(Z._pendingVisibility|=2,nl(_e,ie,2))}},attach:function(){var ie=Z._current;if(ie===null)throw Error(s(456));if((Z._pendingVisibility&2)!==0){var _e=Nm(ie,2);_e!==null&&(Z._pendingVisibility&=-3,nl(_e,ie,2))}}};return w.stateNode=Z,w}function FD(w,E,D){return w=ou(6,w,null,E),w.lanes=D,w}function zD(w,E,D){return E=ou(4,w.children!==null?w.children:[],w.key,E),E.lanes=D,E.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},E}function Xf(w){w.flags|=4}function VH(w,E){if(E.type!=="stylesheet"||(E.state.loading&4)!==0)w.flags&=-16777217;else if(w.flags|=16777216,!CU(E)){if(E=su.current,E!==null&&((Ts&4194176)===Ts?pd!==null:(Ts&62914560)!==Ts&&(Ts&536870912)===0||E!==pd))throw Wx=B7,nB;w.flags|=8192}}function cP(w,E){E!==null&&(w.flags|=4),w.flags&16384&&(E=w.tag!==22?ee():536870912,w.lanes|=E,p_|=E)}function dw(w,E){if(!Rs)switch(w.tailMode){case"hidden":E=w.tail;for(var D=null;E!==null;)E.alternate!==null&&(D=E),E=E.sibling;D===null?w.tail=null:D.sibling=null;break;case"collapsed":D=w.tail;for(var z=null;D!==null;)D.alternate!==null&&(z=D),D=D.sibling;z===null?E||w.tail===null?w.tail=null:w.tail.sibling=null:z.sibling=null}}function pr(w){var E=w.alternate!==null&&w.alternate.child===w.child,D=0,z=0;if(E)for(var Z=w.child;Z!==null;)D|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags&31457280,z|=Z.flags&31457280,Z.return=w,Z=Z.sibling;else for(Z=w.child;Z!==null;)D|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags,z|=Z.flags,Z.return=w,Z=Z.sibling;return w.subtreeFlags|=z,w.childLanes=D,E}function gve(w,E,D){var z=E.pendingProps;switch(G7(E),E.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(E),null;case 1:return pr(E),null;case 3:return D=E.stateNode,z=null,w!==null&&(z=w.memoizedState.cache),E.memoizedState.cache!==z&&(E.flags|=2048),Bf(mo),ss(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(w===null||w.child===null)&&(Hx(E)?Xf(E):w===null||w.memoizedState.isDehydrated&&(E.flags&256)===0||(E.flags|=1024,nh!==null&&(YD(nh),nh=null))),pr(E),null;case 26:return D=E.memoizedState,w===null?(Xf(E),D!==null?(pr(E),VH(E,D)):(pr(E),E.flags&=-16777217)):D?D!==w.memoizedState?(Xf(E),pr(E),VH(E,D)):(pr(E),E.flags&=-16777217):(w.memoizedProps!==z&&Xf(E),pr(E),E.flags&=-16777217),null;case 27:Fi(E),D=Us.current;var Z=E.type;if(w!==null&&E.stateNode!=null)w.memoizedProps!==z&&Xf(E);else{if(!z){if(E.stateNode===null)throw Error(s(166));return pr(E),null}w=us.current,Hx(E)?iB(E):(w=yU(Z,z,D),E.stateNode=w,Xf(E))}return pr(E),null;case 5:if(Fi(E),D=E.type,w!==null&&E.stateNode!=null)w.memoizedProps!==z&&Xf(E);else{if(!z){if(E.stateNode===null)throw Error(s(166));return pr(E),null}if(w=us.current,Hx(E))iB(E);else{switch(Z=bP(Us.current),w){case 1:w=Z.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:w=Z.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":w=Z.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":w=Z.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":w=Z.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof z.is=="string"?Z.createElement("select",{is:z.is}):Z.createElement("select"),z.multiple?w.multiple=!0:z.size&&(w.size=z.size);break;default:w=typeof z.is=="string"?Z.createElement(D,{is:z.is}):Z.createElement(D)}}w[et]=E,w[dt]=z;e:for(Z=E.child;Z!==null;){if(Z.tag===5||Z.tag===6)w.appendChild(Z.stateNode);else if(Z.tag!==4&&Z.tag!==27&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===E)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===E)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}E.stateNode=w;e:switch(na(w,D,z),D){case"button":case"input":case"select":case"textarea":w=!!z.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Xf(E)}}return pr(E),E.flags&=-16777217,null;case 6:if(w&&E.stateNode!=null)w.memoizedProps!==z&&Xf(E);else{if(typeof z!="string"&&E.stateNode===null)throw Error(s(166));if(w=Us.current,Hx(E)){if(w=E.stateNode,D=E.memoizedProps,z=null,Z=sl,Z!==null)switch(Z.tag){case 27:case 5:z=Z.memoizedProps}w[et]=E,w=!!(w.nodeValue===D||z!==null&&z.suppressHydrationWarning===!0||hU(w.nodeValue,D)),w||d1(E)}else w=bP(w).createTextNode(z),w[et]=E,E.stateNode=w}return pr(E),null;case 13:if(z=E.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(Z=Hx(E),z!==null&&z.dehydrated!==null){if(w===null){if(!Z)throw Error(s(318));if(Z=E.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(s(317));Z[et]=E}else Ux(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;pr(E),Z=!1}else nh!==null&&(YD(nh),nh=null),Z=!0;if(!Z)return E.flags&256?(qf(E),E):(qf(E),null)}if(qf(E),(E.flags&128)!==0)return E.lanes=D,E;if(D=z!==null,w=w!==null&&w.memoizedState!==null,D){z=E.child,Z=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(Z=z.alternate.memoizedState.cachePool.pool);var ie=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(ie=z.memoizedState.cachePool.pool),ie!==Z&&(z.flags|=2048)}return D!==w&&D&&(E.child.flags|=8192),cP(E,E.updateQueue),pr(E),null;case 4:return ss(),w===null&&nk(E.stateNode.containerInfo),pr(E),null;case 10:return Bf(E.type),pr(E),null;case 19:if(Dt(po),Z=E.memoizedState,Z===null)return pr(E),null;if(z=(E.flags&128)!==0,ie=Z.rendering,ie===null)if(z)dw(Z,!1);else{if(Pr!==0||w!==null&&(w.flags&128)!==0)for(w=E.child;w!==null;){if(ie=U5(w),ie!==null){for(E.flags|=128,dw(Z,!1),w=ie.updateQueue,E.updateQueue=w,cP(E,w),E.subtreeFlags=0,w=D,D=E.child;D!==null;)zH(D,w),D=D.sibling;return Wi(po,po.current&1|2),E.child}w=w.sibling}Z.tail!==null&&Ji()>uP&&(E.flags|=128,z=!0,dw(Z,!1),E.lanes=4194304)}else{if(!z)if(w=U5(ie),w!==null){if(E.flags|=128,z=!0,w=w.updateQueue,E.updateQueue=w,cP(E,w),dw(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ie.alternate&&!Rs)return pr(E),null}else 2*Ji()-Z.renderingStartTime>uP&&D!==536870912&&(E.flags|=128,z=!0,dw(Z,!1),E.lanes=4194304);Z.isBackwards?(ie.sibling=E.child,E.child=ie):(w=Z.last,w!==null?w.sibling=ie:E.child=ie,Z.last=ie)}return Z.tail!==null?(E=Z.tail,Z.rendering=E,Z.tail=E.sibling,Z.renderingStartTime=Ji(),E.sibling=null,w=po.current,Wi(po,z?w&1|2:w&1),E):(pr(E),null);case 22:case 23:return qf(E),U7(),z=E.memoizedState!==null,w!==null?w.memoizedState!==null!==z&&(E.flags|=8192):z&&(E.flags|=8192),z?(D&536870912)!==0&&(E.flags&128)===0&&(pr(E),E.subtreeFlags&6&&(E.flags|=8192)):pr(E),D=E.updateQueue,D!==null&&cP(E,D.retryQueue),D=null,w!==null&&w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),z=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==D&&(E.flags|=2048),w!==null&&Dt(p1),null;case 24:return D=null,w!==null&&(D=w.memoizedState.cache),E.memoizedState.cache!==D&&(E.flags|=2048),Bf(mo),pr(E),null;case 25:return null}throw Error(s(156,E.tag))}function yve(w,E){switch(G7(E),E.tag){case 1:return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 3:return Bf(mo),ss(),w=E.flags,(w&65536)!==0&&(w&128)===0?(E.flags=w&-65537|128,E):null;case 26:case 27:case 5:return Fi(E),null;case 13:if(qf(E),w=E.memoizedState,w!==null&&w.dehydrated!==null){if(E.alternate===null)throw Error(s(340));Ux()}return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 19:return Dt(po),null;case 4:return ss(),null;case 10:return Bf(E.type),null;case 22:case 23:return qf(E),U7(),w!==null&&Dt(p1),w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 24:return Bf(mo),null;case 25:return null;default:return null}}function GH(w,E){switch(G7(E),E.tag){case 3:Bf(mo),ss();break;case 26:case 27:case 5:Fi(E);break;case 4:ss();break;case 13:qf(E);break;case 19:Dt(po);break;case 10:Bf(E.type);break;case 22:case 23:qf(E),U7(),w!==null&&Dt(p1);break;case 24:Bf(mo)}}var vve={getCacheForType:function(w){var E=Ia(mo),D=E.data.get(w);return D===void 0&&(D=w(),E.data.set(w,D)),D}},_ve=typeof WeakMap=="function"?WeakMap:Map,mr=0,$n=null,hs=null,Ts=0,On=0,ac=null,Wf=!1,f_=!1,qD=!1,Zf=0,Pr=0,Um=0,S1=0,VD=0,au=0,p_=0,fw=null,gd=null,GD=!1,jD=0,uP=1/0,hP=null,Ym=null,dP=!1,E1=null,pw=0,BD=0,HD=null,mw=0,UD=null;function lc(){if((mr&2)!==0&&Ts!==0)return Ts&-Ts;if(se.T!==null){var w=r_;return w!==0?w:ek()}return Ne()}function jH(){au===0&&(au=(Ts&536870912)===0||Rs?U():536870912);var w=su.current;return w!==null&&(w.flags|=32),au}function nl(w,E,D){(w===$n&&On===2||w.cancelPendingCommit!==null)&&(m_(w,0),Kf(w,Ts,au,!1)),ge(w,D),((mr&2)===0||w!==$n)&&(w===$n&&((mr&2)===0&&(S1|=D),Pr===4&&Kf(w,Ts,au,!1)),yd(w))}function BH(w,E,D){if((mr&6)!==0)throw Error(s(327));var z=!D&&(E&60)===0&&(E&w.expiredLanes)===0||L(w,E),Z=z?wve(w,E):ZD(w,E,!0),ie=z;do{if(Z===0){f_&&!z&&Kf(w,E,0,!1);break}else if(Z===6)Kf(w,E,0,!Wf);else{if(D=w.current.alternate,ie&&!bve(D)){Z=ZD(w,E,!1),ie=!1;continue}if(Z===2){if(ie=E,w.errorRecoveryDisabledLanes&ie)var _e=0;else _e=w.pendingLanes&-536870913,_e=_e!==0?_e:_e&536870912?536870912:0;if(_e!==0){E=_e;e:{var De=w;Z=fw;var qe=De.current.memoizedState.isDehydrated;if(qe&&(m_(De,_e).flags|=256),_e=ZD(De,_e,!1),_e!==2){if(qD&&!qe){De.errorRecoveryDisabledLanes|=ie,S1|=ie,Z=4;break e}ie=gd,gd=Z,ie!==null&&YD(ie)}Z=_e}if(ie=!1,Z!==2)continue}}if(Z===1){m_(w,0),Kf(w,E,0,!0);break}e:{switch(z=w,Z){case 0:case 1:throw Error(s(345));case 4:if((E&4194176)===E){Kf(z,E,au,!Wf);break e}break;case 2:gd=null;break;case 3:case 5:break;default:throw Error(s(329))}if(z.finishedWork=D,z.finishedLanes=E,(E&62914560)===E&&(ie=jD+300-Ji(),10<ie)){if(Kf(z,E,au,!Wf),O(z,0)!==0)break e;z.timeoutHandle=pU(HH.bind(null,z,D,gd,hP,GD,E,au,S1,p_,Wf,2,-0,0),ie);break e}HH(z,D,gd,hP,GD,E,au,S1,p_,Wf,0,-0,0)}}break}while(!0);yd(w)}function YD(w){gd===null?gd=w:gd.push.apply(gd,w)}function HH(w,E,D,z,Z,ie,_e,De,qe,We,yt,It,at){var gt=E.subtreeFlags;if((gt&8192||(gt&16785408)===16785408)&&(xw={stylesheets:null,count:0,unsuspend:t_e},OH(E),E=s_e(),E!==null)){w.cancelPendingCommit=E(JH.bind(null,w,D,z,Z,_e,De,qe,1,It,at)),Kf(w,ie,_e,!We);return}JH(w,D,z,Z,_e,De,qe,yt,It,at)}function bve(w){for(var E=w;;){var D=E.tag;if((D===0||D===11||D===15)&&E.flags&16384&&(D=E.updateQueue,D!==null&&(D=D.stores,D!==null)))for(var z=0;z<D.length;z++){var Z=D[z],ie=Z.getSnapshot;Z=Z.value;try{if(!$e(ie(),Z))return!1}catch{return!1}}if(D=E.child,E.subtreeFlags&16384&&D!==null)D.return=E,E=D;else{if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Kf(w,E,D,z){E&=~VD,E&=~S1,w.suspendedLanes|=E,w.pingedLanes&=~E,z&&(w.warmLanes|=E),z=w.expirationTimes;for(var Z=E;0<Z;){var ie=31-c(Z),_e=1<<ie;z[ie]=-1,Z&=~_e}D!==0&&fe(w,D,E)}function fP(){return(mr&6)===0?(gw(0),!1):!0}function XD(){if(hs!==null){if(On===0)var w=hs.return;else w=hs,jf=_1=null,eD(w),s_=null,Zx=0,w=hs;for(;w!==null;)GH(w.alternate,w),w=w.return;hs=null}}function m_(w,E){w.finishedWork=null,w.finishedLanes=0;var D=w.timeoutHandle;D!==-1&&(w.timeoutHandle=-1,zve(D)),D=w.cancelPendingCommit,D!==null&&(w.cancelPendingCommit=null,D()),XD(),$n=w,hs=D=Hm(w.current,null),Ts=E,On=0,ac=null,Wf=!1,f_=L(w,E),qD=!1,p_=au=VD=S1=Um=Pr=0,gd=fw=null,GD=!1,(E&8)!==0&&(E|=E&32);var z=w.entangledLanes;if(z!==0)for(w=w.entanglements,z&=E;0<z;){var Z=31-c(z),ie=1<<Z;E|=w[Z],z&=~ie}return Zf=E,L5(),D}function UH(w,E){rs=null,se.H=md,E===Xx?(E=aB(),On=3):E===nB?(E=aB(),On=4):On=E===rH?8:E!==null&&typeof E=="object"&&typeof E.then=="function"?6:1,ac=E,hs===null&&(Pr=1,sP(w,eu(E,w.current)))}function YH(){var w=se.H;return se.H=md,w===null?md:w}function XH(){var w=se.A;return se.A=vve,w}function WD(){Pr=4,Wf||(Ts&4194176)!==Ts&&su.current!==null||(f_=!0),(Um&134217727)===0&&(S1&134217727)===0||$n===null||Kf($n,Ts,au,!1)}function ZD(w,E,D){var z=mr;mr|=2;var Z=YH(),ie=XH();($n!==w||Ts!==E)&&(hP=null,m_(w,E)),E=!1;var _e=Pr;e:do try{if(On!==0&&hs!==null){var De=hs,qe=ac;switch(On){case 8:XD(),_e=6;break e;case 3:case 2:case 6:su.current===null&&(E=!0);var We=On;if(On=0,ac=null,g_(w,De,qe,We),D&&f_){_e=0;break e}break;default:We=On,On=0,ac=null,g_(w,De,qe,We)}}xve(),_e=Pr;break}catch(yt){UH(w,yt)}while(!0);return E&&w.shellSuspendCounter++,jf=_1=null,mr=z,se.H=Z,se.A=ie,hs===null&&($n=null,Ts=0,L5()),_e}function xve(){for(;hs!==null;)WH(hs)}function wve(w,E){var D=mr;mr|=2;var z=YH(),Z=XH();$n!==w||Ts!==E?(hP=null,uP=Ji()+500,m_(w,E)):f_=L(w,E);e:do try{if(On!==0&&hs!==null){E=hs;var ie=ac;t:switch(On){case 1:On=0,ac=null,g_(w,E,ie,1);break;case 2:if(rB(ie)){On=0,ac=null,ZH(E);break}E=function(){On===2&&$n===w&&(On=7),yd(w)},ie.then(E,E);break e;case 3:On=7;break e;case 4:On=5;break e;case 7:rB(ie)?(On=0,ac=null,ZH(E)):(On=0,ac=null,g_(w,E,ie,7));break;case 5:var _e=null;switch(hs.tag){case 26:_e=hs.memoizedState;case 5:case 27:var De=hs;if(!_e||CU(_e)){On=0,ac=null;var qe=De.sibling;if(qe!==null)hs=qe;else{var We=De.return;We!==null?(hs=We,pP(We)):hs=null}break t}}On=0,ac=null,g_(w,E,ie,5);break;case 6:On=0,ac=null,g_(w,E,ie,6);break;case 8:XD(),Pr=6;break e;default:throw Error(s(462))}}Sve();break}catch(yt){UH(w,yt)}while(!0);return jf=_1=null,se.H=z,se.A=Z,mr=D,hs!==null?0:($n=null,Ts=0,L5(),Pr)}function Sve(){for(;hs!==null&&!pn();)WH(hs)}function WH(w){var E=yH(w.alternate,w,Zf);w.memoizedProps=w.pendingProps,E===null?pP(w):hs=E}function ZH(w){var E=w,D=E.alternate;switch(E.tag){case 15:case 0:E=hH(D,E,E.pendingProps,E.type,void 0,Ts);break;case 11:E=hH(D,E,E.pendingProps,E.type.render,E.ref,Ts);break;case 5:eD(E);default:GH(D,E),E=hs=zH(E,Zf),E=yH(D,E,Zf)}w.memoizedProps=w.pendingProps,E===null?pP(w):hs=E}function g_(w,E,D,z){jf=_1=null,eD(E),s_=null,Zx=0;var Z=E.return;try{if(hve(w,Z,E,D,Ts)){Pr=1,sP(w,eu(D,w.current)),hs=null;return}}catch(ie){if(Z!==null)throw hs=Z,ie;Pr=1,sP(w,eu(D,w.current)),hs=null;return}E.flags&32768?(Rs||z===1?w=!0:f_||(Ts&536870912)!==0?w=!1:(Wf=w=!0,(z===2||z===3||z===6)&&(z=su.current,z!==null&&z.tag===13&&(z.flags|=16384))),KH(E,w)):pP(E)}function pP(w){var E=w;do{if((E.flags&32768)!==0){KH(E,Wf);return}w=E.return;var D=gve(E.alternate,E,Zf);if(D!==null){hs=D;return}if(E=E.sibling,E!==null){hs=E;return}hs=E=w}while(E!==null);Pr===0&&(Pr=5)}function KH(w,E){do{var D=yve(w.alternate,w);if(D!==null){D.flags&=32767,hs=D;return}if(D=w.return,D!==null&&(D.flags|=32768,D.subtreeFlags=0,D.deletions=null),!E&&(w=w.sibling,w!==null)){hs=w;return}hs=w=D}while(w!==null);Pr=6,hs=null}function JH(w,E,D,z,Z,ie,_e,De,qe,We){var yt=se.T,It=ot.p;try{ot.p=2,se.T=null,Eve(w,E,D,z,It,Z,ie,_e,De,qe,We)}finally{se.T=yt,ot.p=It}}function Eve(w,E,D,z,Z,ie,_e,De){do y_();while(E1!==null);if((mr&6)!==0)throw Error(s(327));var qe=w.finishedWork;if(z=w.finishedLanes,qe===null)return null;if(w.finishedWork=null,w.finishedLanes=0,qe===w.current)throw Error(s(177));w.callbackNode=null,w.callbackPriority=0,w.cancelPendingCommit=null;var We=qe.lanes|qe.childLanes;if(We|=z7,ve(w,z,We,ie,_e,De),w===$n&&(hs=$n=null,Ts=0),(qe.subtreeFlags&10256)===0&&(qe.flags&10256)===0||dP||(dP=!0,BD=We,HD=D,Ive(Cs,function(){return y_(),null})),D=(qe.flags&15990)!==0,(qe.subtreeFlags&15990)!==0||D?(D=se.T,se.T=null,ie=ot.p,ot.p=2,_e=mr,mr|=4,fve(w,qe),kH(qe,w),Rt(lk,w.containerInfo),PP=!!ak,lk=ak=null,w.current=qe,IH(w,qe.alternate,qe),ms(),mr=_e,ot.p=ie,se.T=D):w.current=qe,dP?(dP=!1,E1=w,pw=z):QH(w,We),We=w.pendingLanes,We===0&&(Ym=null),h(qe.stateNode),yd(w),E!==null)for(Z=w.onRecoverableError,qe=0;qe<E.length;qe++)We=E[qe],Z(We.value,{componentStack:We.stack});return(pw&3)!==0&&y_(),We=w.pendingLanes,(z&4194218)!==0&&(We&42)!==0?w===UD?mw++:(mw=0,UD=w):mw=0,gw(0),null}function QH(w,E){(w.pooledCacheLanes&=E)===0&&(E=w.pooledCache,E!=null&&(w.pooledCache=null,Jx(E)))}function y_(){if(E1!==null){var w=E1,E=BD;BD=0;var D=Ie(pw),z=se.T,Z=ot.p;try{if(ot.p=32>D?32:D,se.T=null,E1===null)var ie=!1;else{D=HD,HD=null;var _e=E1,De=pw;if(E1=null,pw=0,(mr&6)!==0)throw Error(s(331));var qe=mr;if(mr|=4,LH(_e.current),$H(_e,_e.current,De,D),mr=qe,gw(0,!1),p&&typeof p.onPostCommitFiberRoot=="function")try{p.onPostCommitFiberRoot(T,_e)}catch{}ie=!0}return ie}finally{ot.p=Z,se.T=z,QH(w,E)}}return!1}function eU(w,E,D){E=eu(D,E),E=pD(w.stateNode,E,2),w=Vm(w,E,2),w!==null&&(ge(w,2),yd(w))}function En(w,E,D){if(w.tag===3)eU(w,w,D);else for(;E!==null;){if(E.tag===3){eU(E,w,D);break}else if(E.tag===1){var z=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Ym===null||!Ym.has(z))){w=eu(D,w),D=sH(2),z=Vm(E,D,2),z!==null&&(nH(D,z,E,w),ge(z,2),yd(z));break}}E=E.return}}function KD(w,E,D){var z=w.pingCache;if(z===null){z=w.pingCache=new _ve;var Z=new Set;z.set(E,Z)}else Z=z.get(E),Z===void 0&&(Z=new Set,z.set(E,Z));Z.has(D)||(qD=!0,Z.add(D),w=Cve.bind(null,w,E,D),E.then(w,w))}function Cve(w,E,D){var z=w.pingCache;z!==null&&z.delete(E),w.pingedLanes|=w.suspendedLanes&D,w.warmLanes&=~D,$n===w&&(Ts&D)===D&&(Pr===4||Pr===3&&(Ts&62914560)===Ts&&300>Ji()-jD?(mr&2)===0&&m_(w,0):VD|=D,p_===Ts&&(p_=0)),yd(w)}function tU(w,E){E===0&&(E=ee()),w=Nm(w,E),w!==null&&(ge(w,E),yd(w))}function Pve(w){var E=w.memoizedState,D=0;E!==null&&(D=E.retryLane),tU(w,D)}function Tve(w,E){var D=0;switch(w.tag){case 13:var z=w.stateNode,Z=w.memoizedState;Z!==null&&(D=Z.retryLane);break;case 19:z=w.stateNode;break;case 22:z=w.stateNode._retryCache;break;default:throw Error(s(314))}z!==null&&z.delete(E),tU(w,D)}function Ive(w,E){return ri(w,E)}var mP=null,v_=null,JD=!1,gP=!1,QD=!1,C1=0;function yd(w){w!==v_&&w.next===null&&(v_===null?mP=v_=w:v_=v_.next=w),gP=!0,JD||(JD=!0,Ave(Mve))}function gw(w,E){if(!QD&&gP){QD=!0;do for(var D=!1,z=mP;z!==null;){if(w!==0){var Z=z.pendingLanes;if(Z===0)var ie=0;else{var _e=z.suspendedLanes,De=z.pingedLanes;ie=(1<<31-c(42|w)+1)-1,ie&=Z&~(_e&~De),ie=ie&201326677?ie&201326677|1:ie?ie|2:0}ie!==0&&(D=!0,nU(z,ie))}else ie=Ts,ie=O(z,z===$n?ie:0),(ie&3)===0||L(z,ie)||(D=!0,nU(z,ie));z=z.next}while(D);QD=!1}}function Mve(){gP=JD=!1;var w=0;C1!==0&&(Fve()&&(w=C1),C1=0);for(var E=Ji(),D=null,z=mP;z!==null;){var Z=z.next,ie=iU(z,E);ie===0?(z.next=null,D===null?mP=Z:D.next=Z,Z===null&&(v_=D)):(D=z,(w!==0||(ie&3)!==0)&&(gP=!0)),z=Z}gw(w)}function iU(w,E){for(var D=w.suspendedLanes,z=w.pingedLanes,Z=w.expirationTimes,ie=w.pendingLanes&-62914561;0<ie;){var _e=31-c(ie),De=1<<_e,qe=Z[_e];qe===-1?((De&D)===0||(De&z)!==0)&&(Z[_e]=q(De,E)):qe<=E&&(w.expiredLanes|=De),ie&=~De}if(E=$n,D=Ts,D=O(w,w===E?D:0),z=w.callbackNode,D===0||w===E&&On===2||w.cancelPendingCommit!==null)return z!==null&&z!==null&&Ai(z),w.callbackNode=null,w.callbackPriority=0;if((D&3)===0||L(w,D)){if(E=D&-D,E===w.callbackPriority)return E;switch(z!==null&&Ai(z),Ie(D)){case 2:case 8:D=Br;break;case 32:D=Cs;break;case 268435456:D=Ys;break;default:D=Cs}return z=sU.bind(null,w),D=ri(D,z),w.callbackPriority=E,w.callbackNode=D,E}return z!==null&&z!==null&&Ai(z),w.callbackPriority=2,w.callbackNode=null,2}function sU(w,E){var D=w.callbackNode;if(y_()&&w.callbackNode!==D)return null;var z=Ts;return z=O(w,w===$n?z:0),z===0?null:(BH(w,z,E),iU(w,Ji()),w.callbackNode!=null&&w.callbackNode===D?sU.bind(null,w):null)}function nU(w,E){if(y_())return null;BH(w,E,!0)}function Ave(w){qve(function(){(mr&6)!==0?ri(mn,w):w()})}function ek(){return C1===0&&(C1=U()),C1}function rU(w){return w==null||typeof w=="symbol"||typeof w=="boolean"?null:typeof w=="function"?w:Qg(""+w)}function oU(w,E){var D=E.ownerDocument.createElement("input");return D.name=E.name,D.value=E.value,w.id&&D.setAttribute("form",w.id),E.parentNode.insertBefore(D,E),w=new FormData(w),D.parentNode.removeChild(D),w}function Dve(w,E,D,z,Z){if(E==="submit"&&D&&D.stateNode===Z){var ie=rU((Z[dt]||null).action),_e=z.submitter;_e&&(E=(E=_e[dt]||null)?rU(E.formAction):_e.getAttribute("formAction"),E!==null&&(ie=E,_e=null));var De=new Mm("action","action",null,z,Z);w.push({event:De,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(C1!==0){var qe=_e?oU(Z,_e):new FormData(Z);cD(D,{pending:!0,data:qe,method:Z.method,action:ie},null,qe)}}else typeof ie=="function"&&(De.preventDefault(),qe=_e?oU(Z,_e):new FormData(Z),cD(D,{pending:!0,data:qe,method:Z.method,action:ie},ie,qe))},currentTarget:Z}]})}}for(var tk=0;tk<Jj.length;tk++){var ik=Jj[tk],kve=ik.toLowerCase(),Nve=ik[0].toUpperCase()+ik.slice(1);sh(kve,"on"+Nve)}sh(Jc,"onAnimationEnd"),sh(c1,"onAnimationIteration"),sh(km,"onAnimationStart"),sh("dblclick","onDoubleClick"),sh("focusin","onFocus"),sh("focusout","onBlur"),sh(Zye,"onTransitionRun"),sh(Kye,"onTransitionStart"),sh(Jye,"onTransitionCancel"),sh(Zj,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$ve=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yw));function aU(w,E){E=(E&4)!==0;for(var D=0;D<w.length;D++){var z=w[D],Z=z.event;z=z.listeners;e:{var ie=void 0;if(E)for(var _e=z.length-1;0<=_e;_e--){var De=z[_e],qe=De.instance,We=De.currentTarget;if(De=De.listener,qe!==ie&&Z.isPropagationStopped())break e;ie=De,Z.currentTarget=We;try{ie(Z)}catch(yt){iP(yt)}Z.currentTarget=null,ie=qe}else for(_e=0;_e<z.length;_e++){if(De=z[_e],qe=De.instance,We=De.currentTarget,De=De.listener,qe!==ie&&Z.isPropagationStopped())break e;ie=De,Z.currentTarget=We;try{ie(Z)}catch(yt){iP(yt)}Z.currentTarget=null,ie=qe}}}}function bs(w,E){var D=E[mt];D===void 0&&(D=E[mt]=new Set);var z=w+"__bubble";D.has(z)||(lU(E,w,2,!1),D.add(z))}function sk(w,E,D){var z=0;E&&(z|=4),lU(D,w,z,E)}var yP="_reactListening"+Math.random().toString(36).slice(2);function nk(w){if(!w[yP]){w[yP]=!0,Xs.forEach(function(D){D!=="selectionchange"&&($ve.has(D)||sk(D,!1,w),sk(D,!0,w))});var E=w.nodeType===9?w:w.ownerDocument;E===null||E[yP]||(E[yP]=!0,sk("selectionchange",!1,E))}}function lU(w,E,D,z){switch(DU(E)){case 2:var Z=o_e;break;case 8:Z=a_e;break;default:Z=yk}D=Z.bind(null,E,D,w),Z=void 0,!jv||E!=="touchstart"&&E!=="touchmove"&&E!=="wheel"||(Z=!0),z?Z!==void 0?w.addEventListener(E,D,{capture:!0,passive:Z}):w.addEventListener(E,D,!0):Z!==void 0?w.addEventListener(E,D,{passive:Z}):w.addEventListener(E,D,!1)}function rk(w,E,D,z,Z){var ie=z;if((E&1)===0&&(E&2)===0&&z!==null)e:for(;;){if(z===null)return;var _e=z.tag;if(_e===3||_e===4){var De=z.stateNode.containerInfo;if(De===Z||De.nodeType===8&&De.parentNode===Z)break;if(_e===4)for(_e=z.return;_e!==null;){var qe=_e.tag;if((qe===3||qe===4)&&(qe=_e.stateNode.containerInfo,qe===Z||qe.nodeType===8&&qe.parentNode===Z))return;_e=_e.return}for(;De!==null;){if(_e=_s(De),_e===null)return;if(qe=_e.tag,qe===5||qe===6||qe===26||qe===27){z=ie=_e;continue e}De=De.parentNode}}z=z.return}x5(function(){var We=ie,yt=e1(D),It=[];e:{var at=Kj.get(w);if(at!==void 0){var gt=Mm,di=w;switch(w){case"keypress":if(Of(D)===0)break e;case"keydown":case"keyup":gt=Wv;break;case"focusin":di="focus",gt=Xv;break;case"focusout":di="blur",gt=Xv;break;case"beforeblur":case"afterblur":gt=Xv;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=S5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=S7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=I5;break;case Jc:case c1:case km:gt=E7;break;case Zj:gt=k7;break;case"scroll":case"scrollend":gt=w5;break;case"wheel":gt=$7;break;case"copy":case"cut":case"paste":gt=P7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=qx;break;case"toggle":case"beforetoggle":gt=R7}var Gi=(E&4)!==0,Tr=!Gi&&(w==="scroll"||w==="scrollend"),tt=Gi?at!==null?at+"Capture":null:at;Gi=[];for(var Ye=We,st;Ye!==null;){var Et=Ye;if(st=Et.stateNode,Et=Et.tag,Et!==5&&Et!==26&&Et!==27||st===null||tt===null||(Et=Tm(Ye,tt),Et!=null&&Gi.push(vw(Ye,Et,st))),Tr)break;Ye=Ye.return}0<Gi.length&&(at=new gt(at,di,null,D,yt),It.push({event:at,listeners:Gi}))}}if((E&7)===0){e:{if(at=w==="mouseover"||w==="pointerover",gt=w==="mouseout"||w==="pointerout",at&&D!==Fx&&(di=D.relatedTarget||D.fromElement)&&(_s(di)||di[ct]))break e;if((gt||at)&&(at=yt.window===yt?yt:(at=yt.ownerDocument)?at.defaultView||at.parentWindow:window,gt?(di=D.relatedTarget||D.toElement,gt=We,di=di?_s(di):null,di!==null&&(Tr=Re(di),Gi=di.tag,di!==Tr||Gi!==5&&Gi!==27&&Gi!==6)&&(di=null)):(gt=null,di=We),gt!==di)){if(Gi=S5,Et="onMouseLeave",tt="onMouseEnter",Ye="mouse",(w==="pointerout"||w==="pointerover")&&(Gi=qx,Et="onPointerLeave",tt="onPointerEnter",Ye="pointer"),Tr=gt==null?at:$i(gt),st=di==null?at:$i(di),at=new Gi(Et,Ye+"leave",gt,D,yt),at.target=Tr,at.relatedTarget=st,Et=null,_s(yt)===We&&(Gi=new Gi(tt,Ye+"enter",di,D,yt),Gi.target=st,Gi.relatedTarget=Tr,Et=Gi),Tr=Et,gt&&di)t:{for(Gi=gt,tt=di,Ye=0,st=Gi;st;st=__(st))Ye++;for(st=0,Et=tt;Et;Et=__(Et))st++;for(;0<Ye-st;)Gi=__(Gi),Ye--;for(;0<st-Ye;)tt=__(tt),st--;for(;Ye--;){if(Gi===tt||tt!==null&&Gi===tt.alternate)break t;Gi=__(Gi),tt=__(tt)}Gi=null}else Gi=null;gt!==null&&cU(It,at,gt,Gi,!1),di!==null&&Tr!==null&&cU(It,Tr,di,Gi,!0)}}e:{if(at=We?$i(We):window,gt=at.nodeName&&at.nodeName.toLowerCase(),gt==="select"||gt==="input"&&at.type==="file")var ti=O5;else if(N5(at))if(R5)ti=Te;else{ti=he;var ls=le}else gt=at.nodeName,!gt||gt.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?We&&Lx(We.elementType)&&(ti=O5):ti=be;if(ti&&(ti=ti(w,We))){$5(It,ti,D,yt);break e}ls&&ls(w,at,We),w==="focusout"&&We&&at.type==="number"&&We.memoizedProps.value!=null&&Nf(at,"number",at.value)}switch(ls=We?$i(We):window,w){case"focusin":(N5(ls)||ls.contentEditable==="true")&&(Gt=ls,ai=We,Ii=null);break;case"focusout":Ii=ai=Gt=null;break;case"mousedown":es=!0;break;case"contextmenu":case"mouseup":case"dragend":es=!1,Si(It,D,yt);break;case"selectionchange":if(Xt)break;case"keydown":case"keyup":Si(It,D,yt)}var yi;if(r1)e:{switch(w){case"compositionstart":var Ci="onCompositionStart";break e;case"compositionend":Ci="onCompositionEnd";break e;case"compositionupdate":Ci="onCompositionUpdate";break e}Ci=void 0}else Kc?D5(w,D)&&(Ci="onCompositionEnd"):w==="keydown"&&D.keyCode===229&&(Ci="onCompositionStart");Ci&&(M5&&D.locale!=="ko"&&(Kc||Ci!=="onCompositionStart"?Ci==="onCompositionEnd"&&Kc&&(yi=Im()):(ih=yt,Bv="value"in ih?ih.value:ih.textContent,Kc=!0)),ls=vP(We,Ci),0<ls.length&&(Ci=new C5(Ci,w,null,D,yt),It.push({event:Ci,listeners:ls}),yi?Ci.data=yi:(yi=Vx(D),yi!==null&&(Ci.data=yi)))),(yi=Zv?dd(w,D):k5(w,D))&&(Ci=vP(We,"onBeforeInput"),0<Ci.length&&(ls=new C5("onBeforeInput","beforeinput",null,D,yt),It.push({event:ls,listeners:Ci}),ls.data=yi)),Dve(It,w,We,D,yt)}aU(It,E)})}function vw(w,E,D){return{instance:w,listener:E,currentTarget:D}}function vP(w,E){for(var D=E+"Capture",z=[];w!==null;){var Z=w,ie=Z.stateNode;Z=Z.tag,Z!==5&&Z!==26&&Z!==27||ie===null||(Z=Tm(w,D),Z!=null&&z.unshift(vw(w,Z,ie)),Z=Tm(w,E),Z!=null&&z.push(vw(w,Z,ie))),w=w.return}return z}function __(w){if(w===null)return null;do w=w.return;while(w&&w.tag!==5&&w.tag!==27);return w||null}function cU(w,E,D,z,Z){for(var ie=E._reactName,_e=[];D!==null&&D!==z;){var De=D,qe=De.alternate,We=De.stateNode;if(De=De.tag,qe!==null&&qe===z)break;De!==5&&De!==26&&De!==27||We===null||(qe=We,Z?(We=Tm(D,ie),We!=null&&_e.unshift(vw(D,We,qe))):Z||(We=Tm(D,ie),We!=null&&_e.push(vw(D,We,qe)))),D=D.return}_e.length!==0&&w.push({event:E,listeners:_e})}var Ove=/\r\n?/g,Rve=/\u0000|\uFFFD/g;function uU(w){return(typeof w=="string"?w:""+w).replace(Ove,`
`).replace(Rve,"")}function hU(w,E){return E=uU(E),uU(w)===E}function _P(){}function vn(w,E,D,z,Z,ie){switch(D){case"children":typeof z=="string"?E==="body"||E==="textarea"&&z===""||hd(w,z):(typeof z=="number"||typeof z=="bigint")&&E!=="body"&&hd(w,""+z);break;case"className":pt(w,"class",z);break;case"tabIndex":pt(w,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":pt(w,D,z);break;case"style":Rx(w,z,ie);break;case"data":if(E!=="object"){pt(w,"data",z);break}case"src":case"href":if(z===""&&(E!=="a"||D!=="href")){w.removeAttribute(D);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){w.removeAttribute(D);break}z=Qg(""+z),w.setAttribute(D,z);break;case"action":case"formAction":if(typeof z=="function"){w.setAttribute(D,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ie=="function"&&(D==="formAction"?(E!=="input"&&vn(w,E,"name",Z.name,Z,null),vn(w,E,"formEncType",Z.formEncType,Z,null),vn(w,E,"formMethod",Z.formMethod,Z,null),vn(w,E,"formTarget",Z.formTarget,Z,null)):(vn(w,E,"encType",Z.encType,Z,null),vn(w,E,"method",Z.method,Z,null),vn(w,E,"target",Z.target,Z,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){w.removeAttribute(D);break}z=Qg(""+z),w.setAttribute(D,z);break;case"onClick":z!=null&&(w.onclick=_P);break;case"onScroll":z!=null&&bs("scroll",w);break;case"onScrollEnd":z!=null&&bs("scrollend",w);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(s(61));if(D=z.__html,D!=null){if(Z.children!=null)throw Error(s(60));w.innerHTML=D}}break;case"multiple":w.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":w.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){w.removeAttribute("xlink:href");break}D=Qg(""+z),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(D,""+z):w.removeAttribute(D);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(D,""):w.removeAttribute(D);break;case"capture":case"download":z===!0?w.setAttribute(D,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(D,z):w.removeAttribute(D);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?w.setAttribute(D,z):w.removeAttribute(D);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?w.removeAttribute(D):w.setAttribute(D,z);break;case"popover":bs("beforetoggle",w),bs("toggle",w),ze(w,"popover",z);break;case"xlinkActuate":Pt(w,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":Pt(w,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":Pt(w,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":Pt(w,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":Pt(w,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":Pt(w,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":Pt(w,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":Pt(w,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":Pt(w,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":ze(w,"is",z);break;case"innerText":case"textContent":break;default:(!(2<D.length)||D[0]!=="o"&&D[0]!=="O"||D[1]!=="n"&&D[1]!=="N")&&(D=x7.get(D)||D,ze(w,D,z))}}function ok(w,E,D,z,Z,ie){switch(D){case"style":Rx(w,z,ie);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(s(61));if(D=z.__html,D!=null){if(Z.children!=null)throw Error(s(60));w.innerHTML=D}}break;case"children":typeof z=="string"?hd(w,z):(typeof z=="number"||typeof z=="bigint")&&hd(w,""+z);break;case"onScroll":z!=null&&bs("scroll",w);break;case"onScrollEnd":z!=null&&bs("scrollend",w);break;case"onClick":z!=null&&(w.onclick=_P);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ps.hasOwnProperty(D))e:{if(D[0]==="o"&&D[1]==="n"&&(Z=D.endsWith("Capture"),E=D.slice(2,Z?D.length-7:void 0),ie=w[dt]||null,ie=ie!=null?ie[D]:null,typeof ie=="function"&&w.removeEventListener(E,ie,Z),typeof z=="function")){typeof ie!="function"&&ie!==null&&(D in w?w[D]=null:w.hasAttribute(D)&&w.removeAttribute(D)),w.addEventListener(E,z,Z);break e}D in w?w[D]=z:z===!0?w.setAttribute(D,""):ze(w,D,z)}}}function na(w,E,D){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bs("error",w),bs("load",w);var z=!1,Z=!1,ie;for(ie in D)if(D.hasOwnProperty(ie)){var _e=D[ie];if(_e!=null)switch(ie){case"src":z=!0;break;case"srcSet":Z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,E));default:vn(w,E,ie,_e,D,null)}}Z&&vn(w,E,"srcSet",D.srcSet,D,null),z&&vn(w,E,"src",D.src,D,null);return;case"input":bs("invalid",w);var De=ie=_e=Z=null,qe=null,We=null;for(z in D)if(D.hasOwnProperty(z)){var yt=D[z];if(yt!=null)switch(z){case"name":Z=yt;break;case"type":_e=yt;break;case"checked":qe=yt;break;case"defaultChecked":We=yt;break;case"value":ie=yt;break;case"defaultValue":De=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(s(137,E));break;default:vn(w,E,z,yt,D,null)}}th(w,ie,De,qe,We,_e,Z,!1),Nn(w);return;case"select":bs("invalid",w),z=_e=ie=null;for(Z in D)if(D.hasOwnProperty(Z)&&(De=D[Z],De!=null))switch(Z){case"value":ie=De;break;case"defaultValue":_e=De;break;case"multiple":z=De;default:vn(w,E,Z,De,D,null)}E=ie,D=_e,w.multiple=!!z,E!=null?Em(w,!!z,E,!1):D!=null&&Em(w,!!z,D,!0);return;case"textarea":bs("invalid",w),ie=Z=z=null;for(_e in D)if(D.hasOwnProperty(_e)&&(De=D[_e],De!=null))switch(_e){case"value":z=De;break;case"defaultValue":Z=De;break;case"children":ie=De;break;case"dangerouslySetInnerHTML":if(De!=null)throw Error(s(91));break;default:vn(w,E,_e,De,D,null)}Ox(w,z,Z,ie),Nn(w);return;case"option":for(qe in D)if(D.hasOwnProperty(qe)&&(z=D[qe],z!=null))switch(qe){case"selected":w.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:vn(w,E,qe,z,D,null)}return;case"dialog":bs("cancel",w),bs("close",w);break;case"iframe":case"object":bs("load",w);break;case"video":case"audio":for(z=0;z<yw.length;z++)bs(yw[z],w);break;case"image":bs("error",w),bs("load",w);break;case"details":bs("toggle",w);break;case"embed":case"source":case"link":bs("error",w),bs("load",w);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in D)if(D.hasOwnProperty(We)&&(z=D[We],z!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,E));default:vn(w,E,We,z,D,null)}return;default:if(Lx(E)){for(yt in D)D.hasOwnProperty(yt)&&(z=D[yt],z!==void 0&&ok(w,E,yt,z,D,void 0));return}}for(De in D)D.hasOwnProperty(De)&&(z=D[De],z!=null&&vn(w,E,De,z,D,null))}function Lve(w,E,D,z){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Z=null,ie=null,_e=null,De=null,qe=null,We=null,yt=null;for(gt in D){var It=D[gt];if(D.hasOwnProperty(gt)&&It!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":qe=It;default:z.hasOwnProperty(gt)||vn(w,E,gt,null,z,It)}}for(var at in z){var gt=z[at];if(It=D[at],z.hasOwnProperty(at)&&(gt!=null||It!=null))switch(at){case"type":ie=gt;break;case"name":Z=gt;break;case"checked":We=gt;break;case"defaultChecked":yt=gt;break;case"value":_e=gt;break;case"defaultValue":De=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(s(137,E));break;default:gt!==It&&vn(w,E,at,gt,z,It)}}Sm(w,_e,De,qe,We,yt,ie,Z);return;case"select":gt=_e=De=at=null;for(ie in D)if(qe=D[ie],D.hasOwnProperty(ie)&&qe!=null)switch(ie){case"value":break;case"multiple":gt=qe;default:z.hasOwnProperty(ie)||vn(w,E,ie,null,z,qe)}for(Z in z)if(ie=z[Z],qe=D[Z],z.hasOwnProperty(Z)&&(ie!=null||qe!=null))switch(Z){case"value":at=ie;break;case"defaultValue":De=ie;break;case"multiple":_e=ie;default:ie!==qe&&vn(w,E,Z,ie,z,qe)}E=De,D=_e,z=gt,at!=null?Em(w,!!D,at,!1):!!z!=!!D&&(E!=null?Em(w,!!D,E,!0):Em(w,!!D,D?[]:"",!1));return;case"textarea":gt=at=null;for(De in D)if(Z=D[De],D.hasOwnProperty(De)&&Z!=null&&!z.hasOwnProperty(De))switch(De){case"value":break;case"children":break;default:vn(w,E,De,null,z,Z)}for(_e in z)if(Z=z[_e],ie=D[_e],z.hasOwnProperty(_e)&&(Z!=null||ie!=null))switch(_e){case"value":at=Z;break;case"defaultValue":gt=Z;break;case"children":break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(91));break;default:Z!==ie&&vn(w,E,_e,Z,z,ie)}$x(w,at,gt);return;case"option":for(var di in D)if(at=D[di],D.hasOwnProperty(di)&&at!=null&&!z.hasOwnProperty(di))switch(di){case"selected":w.selected=!1;break;default:vn(w,E,di,null,z,at)}for(qe in z)if(at=z[qe],gt=D[qe],z.hasOwnProperty(qe)&&at!==gt&&(at!=null||gt!=null))switch(qe){case"selected":w.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:vn(w,E,qe,at,z,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gi in D)at=D[Gi],D.hasOwnProperty(Gi)&&at!=null&&!z.hasOwnProperty(Gi)&&vn(w,E,Gi,null,z,at);for(We in z)if(at=z[We],gt=D[We],z.hasOwnProperty(We)&&at!==gt&&(at!=null||gt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(s(137,E));break;default:vn(w,E,We,at,z,gt)}return;default:if(Lx(E)){for(var Tr in D)at=D[Tr],D.hasOwnProperty(Tr)&&at!==void 0&&!z.hasOwnProperty(Tr)&&ok(w,E,Tr,void 0,z,at);for(yt in z)at=z[yt],gt=D[yt],!z.hasOwnProperty(yt)||at===gt||at===void 0&&gt===void 0||ok(w,E,yt,at,z,gt);return}}for(var tt in D)at=D[tt],D.hasOwnProperty(tt)&&at!=null&&!z.hasOwnProperty(tt)&&vn(w,E,tt,null,z,at);for(It in z)at=z[It],gt=D[It],!z.hasOwnProperty(It)||at===gt||at==null&&gt==null||vn(w,E,It,at,z,gt)}var ak=null,lk=null;function bP(w){return w.nodeType===9?w:w.ownerDocument}function dU(w){switch(w){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fU(w,E){if(w===0)switch(E){case"svg":return 1;case"math":return 2;default:return 0}return w===1&&E==="foreignObject"?0:w}function ck(w,E){return w==="textarea"||w==="noscript"||typeof E.children=="string"||typeof E.children=="number"||typeof E.children=="bigint"||typeof E.dangerouslySetInnerHTML=="object"&&E.dangerouslySetInnerHTML!==null&&E.dangerouslySetInnerHTML.__html!=null}var uk=null;function Fve(){var w=window.event;return w&&w.type==="popstate"?w===uk?!1:(uk=w,!0):(uk=null,!1)}var pU=typeof setTimeout=="function"?setTimeout:void 0,zve=typeof clearTimeout=="function"?clearTimeout:void 0,mU=typeof Promise=="function"?Promise:void 0,qve=typeof queueMicrotask=="function"?queueMicrotask:typeof mU<"u"?function(w){return mU.resolve(null).then(w).catch(Vve)}:pU;function Vve(w){setTimeout(function(){throw w})}function hk(w,E){var D=E,z=0;do{var Z=D.nextSibling;if(w.removeChild(D),Z&&Z.nodeType===8)if(D=Z.data,D==="/$"){if(z===0){w.removeChild(Z),Pw(E);return}z--}else D!=="$"&&D!=="$?"&&D!=="$!"||z++;D=Z}while(D);Pw(E)}function dk(w){var E=w.firstChild;for(E&&E.nodeType===10&&(E=E.nextSibling);E;){var D=E;switch(E=E.nextSibling,D.nodeName){case"HTML":case"HEAD":case"BODY":dk(D),Qi(D);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(D.rel.toLowerCase()==="stylesheet")continue}w.removeChild(D)}}function Gve(w,E,D,z){for(;w.nodeType===1;){var Z=D;if(w.nodeName.toLowerCase()!==E.toLowerCase()){if(!z&&(w.nodeName!=="INPUT"||w.type!=="hidden"))break}else if(z){if(!w[Ni])switch(E){case"meta":if(!w.hasAttribute("itemprop"))break;return w;case"link":if(ie=w.getAttribute("rel"),ie==="stylesheet"&&w.hasAttribute("data-precedence"))break;if(ie!==Z.rel||w.getAttribute("href")!==(Z.href==null?null:Z.href)||w.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin)||w.getAttribute("title")!==(Z.title==null?null:Z.title))break;return w;case"style":if(w.hasAttribute("data-precedence"))break;return w;case"script":if(ie=w.getAttribute("src"),(ie!==(Z.src==null?null:Z.src)||w.getAttribute("type")!==(Z.type==null?null:Z.type)||w.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin))&&ie&&w.hasAttribute("async")&&!w.hasAttribute("itemprop"))break;return w;default:return w}}else if(E==="input"&&w.type==="hidden"){var ie=Z.name==null?null:""+Z.name;if(Z.type==="hidden"&&w.getAttribute("name")===ie)return w}else return w;if(w=oh(w.nextSibling),w===null)break}return null}function jve(w,E,D){if(E==="")return null;for(;w.nodeType!==3;)if((w.nodeType!==1||w.nodeName!=="INPUT"||w.type!=="hidden")&&!D||(w=oh(w.nextSibling),w===null))return null;return w}function oh(w){for(;w!=null;w=w.nextSibling){var E=w.nodeType;if(E===1||E===3)break;if(E===8){if(E=w.data,E==="$"||E==="$!"||E==="$?"||E==="F!"||E==="F")break;if(E==="/$")return null}}return w}function gU(w){w=w.previousSibling;for(var E=0;w;){if(w.nodeType===8){var D=w.data;if(D==="$"||D==="$!"||D==="$?"){if(E===0)return w;E--}else D==="/$"&&E++}w=w.previousSibling}return null}function yU(w,E,D){switch(E=bP(D),w){case"html":if(w=E.documentElement,!w)throw Error(s(452));return w;case"head":if(w=E.head,!w)throw Error(s(453));return w;case"body":if(w=E.body,!w)throw Error(s(454));return w;default:throw Error(s(451))}}var lu=new Map,vU=new Set;function xP(w){return typeof w.getRootNode=="function"?w.getRootNode():w.ownerDocument}var Jf=ot.d;ot.d={f:Bve,r:Hve,D:Uve,C:Yve,L:Xve,m:Wve,X:Kve,S:Zve,M:Jve};function Bve(){var w=Jf.f(),E=fP();return w||E}function Hve(w){var E=as(w);E!==null&&E.tag===5&&E.type==="form"?HB(E):Jf.r(w)}var b_=typeof document>"u"?null:document;function _U(w,E,D){var z=b_;if(z&&typeof E=="string"&&E){var Z=Pa(E);Z='link[rel="'+w+'"][href="'+Z+'"]',typeof D=="string"&&(Z+='[crossorigin="'+D+'"]'),vU.has(Z)||(vU.add(Z),w={rel:w,crossOrigin:D,href:E},z.querySelector(Z)===null&&(E=z.createElement("link"),na(E,"link",w),Kt(E),z.head.appendChild(E)))}}function Uve(w){Jf.D(w),_U("dns-prefetch",w,null)}function Yve(w,E){Jf.C(w,E),_U("preconnect",w,E)}function Xve(w,E,D){Jf.L(w,E,D);var z=b_;if(z&&w&&E){var Z='link[rel="preload"][as="'+Pa(E)+'"]';E==="image"&&D&&D.imageSrcSet?(Z+='[imagesrcset="'+Pa(D.imageSrcSet)+'"]',typeof D.imageSizes=="string"&&(Z+='[imagesizes="'+Pa(D.imageSizes)+'"]')):Z+='[href="'+Pa(w)+'"]';var ie=Z;switch(E){case"style":ie=x_(w);break;case"script":ie=w_(w)}lu.has(ie)||(w=oe({rel:"preload",href:E==="image"&&D&&D.imageSrcSet?void 0:w,as:E},D),lu.set(ie,w),z.querySelector(Z)!==null||E==="style"&&z.querySelector(_w(ie))||E==="script"&&z.querySelector(bw(ie))||(E=z.createElement("link"),na(E,"link",w),Kt(E),z.head.appendChild(E)))}}function Wve(w,E){Jf.m(w,E);var D=b_;if(D&&w){var z=E&&typeof E.as=="string"?E.as:"script",Z='link[rel="modulepreload"][as="'+Pa(z)+'"][href="'+Pa(w)+'"]',ie=Z;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ie=w_(w)}if(!lu.has(ie)&&(w=oe({rel:"modulepreload",href:w},E),lu.set(ie,w),D.querySelector(Z)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(D.querySelector(bw(ie)))return}z=D.createElement("link"),na(z,"link",w),Kt(z),D.head.appendChild(z)}}}function Zve(w,E,D){Jf.S(w,E,D);var z=b_;if(z&&w){var Z=ui(z).hoistableStyles,ie=x_(w);E=E||"default";var _e=Z.get(ie);if(!_e){var De={loading:0,preload:null};if(_e=z.querySelector(_w(ie)))De.loading=5;else{w=oe({rel:"stylesheet",href:w,"data-precedence":E},D),(D=lu.get(ie))&&fk(w,D);var qe=_e=z.createElement("link");Kt(qe),na(qe,"link",w),qe._p=new Promise(function(We,yt){qe.onload=We,qe.onerror=yt}),qe.addEventListener("load",function(){De.loading|=1}),qe.addEventListener("error",function(){De.loading|=2}),De.loading|=4,wP(_e,E,z)}_e={type:"stylesheet",instance:_e,count:1,state:De},Z.set(ie,_e)}}}function Kve(w,E){Jf.X(w,E);var D=b_;if(D&&w){var z=ui(D).hoistableScripts,Z=w_(w),ie=z.get(Z);ie||(ie=D.querySelector(bw(Z)),ie||(w=oe({src:w,async:!0},E),(E=lu.get(Z))&&pk(w,E),ie=D.createElement("script"),Kt(ie),na(ie,"link",w),D.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},z.set(Z,ie))}}function Jve(w,E){Jf.M(w,E);var D=b_;if(D&&w){var z=ui(D).hoistableScripts,Z=w_(w),ie=z.get(Z);ie||(ie=D.querySelector(bw(Z)),ie||(w=oe({src:w,async:!0,type:"module"},E),(E=lu.get(Z))&&pk(w,E),ie=D.createElement("script"),Kt(ie),na(ie,"link",w),D.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},z.set(Z,ie))}}function bU(w,E,D,z){var Z=(Z=Us.current)?xP(Z):null;if(!Z)throw Error(s(446));switch(w){case"meta":case"title":return null;case"style":return typeof D.precedence=="string"&&typeof D.href=="string"?(E=x_(D.href),D=ui(Z).hoistableStyles,z=D.get(E),z||(z={type:"style",instance:null,count:0,state:null},D.set(E,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(D.rel==="stylesheet"&&typeof D.href=="string"&&typeof D.precedence=="string"){w=x_(D.href);var ie=ui(Z).hoistableStyles,_e=ie.get(w);if(_e||(Z=Z.ownerDocument||Z,_e={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ie.set(w,_e),(ie=Z.querySelector(_w(w)))&&!ie._p&&(_e.instance=ie,_e.state.loading=5),lu.has(w)||(D={rel:"preload",as:"style",href:D.href,crossOrigin:D.crossOrigin,integrity:D.integrity,media:D.media,hrefLang:D.hrefLang,referrerPolicy:D.referrerPolicy},lu.set(w,D),ie||Qve(Z,w,D,_e.state))),E&&z===null)throw Error(s(528,""));return _e}if(E&&z!==null)throw Error(s(529,""));return null;case"script":return E=D.async,D=D.src,typeof D=="string"&&E&&typeof E!="function"&&typeof E!="symbol"?(E=w_(D),D=ui(Z).hoistableScripts,z=D.get(E),z||(z={type:"script",instance:null,count:0,state:null},D.set(E,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,w))}}function x_(w){return'href="'+Pa(w)+'"'}function _w(w){return'link[rel="stylesheet"]['+w+"]"}function xU(w){return oe({},w,{"data-precedence":w.precedence,precedence:null})}function Qve(w,E,D,z){w.querySelector('link[rel="preload"][as="style"]['+E+"]")?z.loading=1:(E=w.createElement("link"),z.preload=E,E.addEventListener("load",function(){return z.loading|=1}),E.addEventListener("error",function(){return z.loading|=2}),na(E,"link",D),Kt(E),w.head.appendChild(E))}function w_(w){return'[src="'+Pa(w)+'"]'}function bw(w){return"script[async]"+w}function wU(w,E,D){if(E.count++,E.instance===null)switch(E.type){case"style":var z=w.querySelector('style[data-href~="'+Pa(D.href)+'"]');if(z)return E.instance=z,Kt(z),z;var Z=oe({},D,{"data-href":D.href,"data-precedence":D.precedence,href:null,precedence:null});return z=(w.ownerDocument||w).createElement("style"),Kt(z),na(z,"style",Z),wP(z,D.precedence,w),E.instance=z;case"stylesheet":Z=x_(D.href);var ie=w.querySelector(_w(Z));if(ie)return E.state.loading|=4,E.instance=ie,Kt(ie),ie;z=xU(D),(Z=lu.get(Z))&&fk(z,Z),ie=(w.ownerDocument||w).createElement("link"),Kt(ie);var _e=ie;return _e._p=new Promise(function(De,qe){_e.onload=De,_e.onerror=qe}),na(ie,"link",z),E.state.loading|=4,wP(ie,D.precedence,w),E.instance=ie;case"script":return ie=w_(D.src),(Z=w.querySelector(bw(ie)))?(E.instance=Z,Kt(Z),Z):(z=D,(Z=lu.get(ie))&&(z=oe({},D),pk(z,Z)),w=w.ownerDocument||w,Z=w.createElement("script"),Kt(Z),na(Z,"link",z),w.head.appendChild(Z),E.instance=Z);case"void":return null;default:throw Error(s(443,E.type))}else E.type==="stylesheet"&&(E.state.loading&4)===0&&(z=E.instance,E.state.loading|=4,wP(z,D.precedence,w));return E.instance}function wP(w,E,D){for(var z=D.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Z=z.length?z[z.length-1]:null,ie=Z,_e=0;_e<z.length;_e++){var De=z[_e];if(De.dataset.precedence===E)ie=De;else if(ie!==Z)break}ie?ie.parentNode.insertBefore(w,ie.nextSibling):(E=D.nodeType===9?D.head:D,E.insertBefore(w,E.firstChild))}function fk(w,E){w.crossOrigin==null&&(w.crossOrigin=E.crossOrigin),w.referrerPolicy==null&&(w.referrerPolicy=E.referrerPolicy),w.title==null&&(w.title=E.title)}function pk(w,E){w.crossOrigin==null&&(w.crossOrigin=E.crossOrigin),w.referrerPolicy==null&&(w.referrerPolicy=E.referrerPolicy),w.integrity==null&&(w.integrity=E.integrity)}var SP=null;function SU(w,E,D){if(SP===null){var z=new Map,Z=SP=new Map;Z.set(D,z)}else Z=SP,z=Z.get(D),z||(z=new Map,Z.set(D,z));if(z.has(w))return z;for(z.set(w,null),D=D.getElementsByTagName(w),Z=0;Z<D.length;Z++){var ie=D[Z];if(!(ie[Ni]||ie[et]||w==="link"&&ie.getAttribute("rel")==="stylesheet")&&ie.namespaceURI!=="http://www.w3.org/2000/svg"){var _e=ie.getAttribute(E)||"";_e=w+_e;var De=z.get(_e);De?De.push(ie):z.set(_e,[ie])}}return z}function EU(w,E,D){w=w.ownerDocument||w,w.head.insertBefore(D,E==="title"?w.querySelector("head > title"):null)}function e_e(w,E,D){if(D===1||E.itemProp!=null)return!1;switch(w){case"meta":case"title":return!0;case"style":if(typeof E.precedence!="string"||typeof E.href!="string"||E.href==="")break;return!0;case"link":if(typeof E.rel!="string"||typeof E.href!="string"||E.href===""||E.onLoad||E.onError)break;switch(E.rel){case"stylesheet":return w=E.disabled,typeof E.precedence=="string"&&w==null;default:return!0}case"script":if(E.async&&typeof E.async!="function"&&typeof E.async!="symbol"&&!E.onLoad&&!E.onError&&E.src&&typeof E.src=="string")return!0}return!1}function CU(w){return!(w.type==="stylesheet"&&(w.state.loading&3)===0)}var xw=null;function t_e(){}function i_e(w,E,D){if(xw===null)throw Error(s(475));var z=xw;if(E.type==="stylesheet"&&(typeof D.media!="string"||matchMedia(D.media).matches!==!1)&&(E.state.loading&4)===0){if(E.instance===null){var Z=x_(D.href),ie=w.querySelector(_w(Z));if(ie){w=ie._p,w!==null&&typeof w=="object"&&typeof w.then=="function"&&(z.count++,z=EP.bind(z),w.then(z,z)),E.state.loading|=4,E.instance=ie,Kt(ie);return}ie=w.ownerDocument||w,D=xU(D),(Z=lu.get(Z))&&fk(D,Z),ie=ie.createElement("link"),Kt(ie);var _e=ie;_e._p=new Promise(function(De,qe){_e.onload=De,_e.onerror=qe}),na(ie,"link",D),E.instance=ie}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(E,w),(w=E.state.preload)&&(E.state.loading&3)===0&&(z.count++,E=EP.bind(z),w.addEventListener("load",E),w.addEventListener("error",E))}}function s_e(){if(xw===null)throw Error(s(475));var w=xw;return w.stylesheets&&w.count===0&&mk(w,w.stylesheets),0<w.count?function(E){var D=setTimeout(function(){if(w.stylesheets&&mk(w,w.stylesheets),w.unsuspend){var z=w.unsuspend;w.unsuspend=null,z()}},6e4);return w.unsuspend=E,function(){w.unsuspend=null,clearTimeout(D)}}:null}function EP(){if(this.count--,this.count===0){if(this.stylesheets)mk(this,this.stylesheets);else if(this.unsuspend){var w=this.unsuspend;this.unsuspend=null,w()}}}var CP=null;function mk(w,E){w.stylesheets=null,w.unsuspend!==null&&(w.count++,CP=new Map,E.forEach(n_e,w),CP=null,EP.call(w))}function n_e(w,E){if(!(E.state.loading&4)){var D=CP.get(w);if(D)var z=D.get(null);else{D=new Map,CP.set(w,D);for(var Z=w.querySelectorAll("link[data-precedence],style[data-precedence]"),ie=0;ie<Z.length;ie++){var _e=Z[ie];(_e.nodeName==="LINK"||_e.getAttribute("media")!=="not all")&&(D.set(_e.dataset.precedence,_e),z=_e)}z&&D.set(null,z)}Z=E.instance,_e=Z.getAttribute("data-precedence"),ie=D.get(_e)||z,ie===z&&D.set(null,Z),D.set(_e,Z),this.count++,z=EP.bind(this),Z.addEventListener("load",z),Z.addEventListener("error",z),ie?ie.parentNode.insertBefore(Z,ie.nextSibling):(w=w.nodeType===9?w.head:w,w.insertBefore(Z,w.firstChild)),E.state.loading|=4}}var ww={$$typeof:S,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function r_e(w,E,D,z,Z,ie,_e,De){this.tag=1,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Q(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q(0),this.hiddenUpdates=Q(null),this.identifierPrefix=z,this.onUncaughtError=Z,this.onCaughtError=ie,this.onRecoverableError=_e,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function PU(w,E,D,z,Z,ie,_e,De,qe,We,yt,It){return w=new r_e(w,E,D,_e,De,qe,We,It),E=1,ie===!0&&(E|=24),ie=ou(3,null,null,E),w.current=ie,ie.stateNode=w,E=Y7(),E.refCount++,w.pooledCache=E,E.refCount++,ie.memoizedState={element:z,isDehydrated:D,cache:E},TD(ie),w}function TU(w){return w?(w=e_,w):e_}function IU(w,E,D,z,Z,ie){Z=TU(Z),z.context===null?z.context=Z:z.pendingContext=Z,z=qm(E),z.payload={element:D},ie=ie===void 0?null:ie,ie!==null&&(z.callback=ie),D=Vm(w,z,E),D!==null&&(nl(D,w,E),rw(D,w,E))}function MU(w,E){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var D=w.retryLane;w.retryLane=D!==0&&D<E?D:E}}function gk(w,E){MU(w,E),(w=w.alternate)&&MU(w,E)}function AU(w){if(w.tag===13){var E=Nm(w,67108864);E!==null&&nl(E,w,67108864),gk(w,67108864)}}var PP=!0;function o_e(w,E,D,z){var Z=se.T;se.T=null;var ie=ot.p;try{ot.p=2,yk(w,E,D,z)}finally{ot.p=ie,se.T=Z}}function a_e(w,E,D,z){var Z=se.T;se.T=null;var ie=ot.p;try{ot.p=8,yk(w,E,D,z)}finally{ot.p=ie,se.T=Z}}function yk(w,E,D,z){if(PP){var Z=vk(z);if(Z===null)rk(w,E,z,TP,D),kU(w,z);else if(c_e(Z,w,E,D,z))z.stopPropagation();else if(kU(w,z),E&4&&-1<l_e.indexOf(w)){for(;Z!==null;){var ie=as(Z);if(ie!==null)switch(ie.tag){case 3:if(ie=ie.stateNode,ie.current.memoizedState.isDehydrated){var _e=M(ie.pendingLanes);if(_e!==0){var De=ie;for(De.pendingLanes|=2,De.entangledLanes|=2;_e;){var qe=1<<31-c(_e);De.entanglements[1]|=qe,_e&=~qe}yd(ie),(mr&6)===0&&(uP=Ji()+500,gw(0))}}break;case 13:De=Nm(ie,2),De!==null&&nl(De,ie,2),fP(),gk(ie,2)}if(ie=vk(z),ie===null&&rk(w,E,z,TP,D),ie===Z)break;Z=ie}Z!==null&&z.stopPropagation()}else rk(w,E,z,null,D)}}function vk(w){return w=e1(w),_k(w)}var TP=null;function _k(w){if(TP=null,w=_s(w),w!==null){var E=Re(w);if(E===null)w=null;else{var D=E.tag;if(D===13){if(w=Oe(E),w!==null)return w;w=null}else if(D===3){if(E.stateNode.current.memoizedState.isDehydrated)return E.tag===3?E.stateNode.containerInfo:null;w=null}else E!==w&&(w=null)}}return TP=w,null}function DU(w){switch(w){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case mn:return 2;case Br:return 8;case Cs:case xt:return 32;case Ys:return 268435456;default:return 32}default:return 32}}var bk=!1,Xm=null,Wm=null,Zm=null,Sw=new Map,Ew=new Map,Km=[],l_e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kU(w,E){switch(w){case"focusin":case"focusout":Xm=null;break;case"dragenter":case"dragleave":Wm=null;break;case"mouseover":case"mouseout":Zm=null;break;case"pointerover":case"pointerout":Sw.delete(E.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ew.delete(E.pointerId)}}function Cw(w,E,D,z,Z,ie){return w===null||w.nativeEvent!==ie?(w={blockedOn:E,domEventName:D,eventSystemFlags:z,nativeEvent:ie,targetContainers:[Z]},E!==null&&(E=as(E),E!==null&&AU(E)),w):(w.eventSystemFlags|=z,E=w.targetContainers,Z!==null&&E.indexOf(Z)===-1&&E.push(Z),w)}function c_e(w,E,D,z,Z){switch(E){case"focusin":return Xm=Cw(Xm,w,E,D,z,Z),!0;case"dragenter":return Wm=Cw(Wm,w,E,D,z,Z),!0;case"mouseover":return Zm=Cw(Zm,w,E,D,z,Z),!0;case"pointerover":var ie=Z.pointerId;return Sw.set(ie,Cw(Sw.get(ie)||null,w,E,D,z,Z)),!0;case"gotpointercapture":return ie=Z.pointerId,Ew.set(ie,Cw(Ew.get(ie)||null,w,E,D,z,Z)),!0}return!1}function NU(w){var E=_s(w.target);if(E!==null){var D=Re(E);if(D!==null){if(E=D.tag,E===13){if(E=Oe(D),E!==null){w.blockedOn=E,Ve(w.priority,function(){if(D.tag===13){var z=lc(),Z=Nm(D,z);Z!==null&&nl(Z,D,z),gk(D,z)}});return}}else if(E===3&&D.stateNode.current.memoizedState.isDehydrated){w.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}w.blockedOn=null}function IP(w){if(w.blockedOn!==null)return!1;for(var E=w.targetContainers;0<E.length;){var D=vk(w.nativeEvent);if(D===null){D=w.nativeEvent;var z=new D.constructor(D.type,D);Fx=z,D.target.dispatchEvent(z),Fx=null}else return E=as(D),E!==null&&AU(E),w.blockedOn=D,!1;E.shift()}return!0}function $U(w,E,D){IP(w)&&D.delete(E)}function u_e(){bk=!1,Xm!==null&&IP(Xm)&&(Xm=null),Wm!==null&&IP(Wm)&&(Wm=null),Zm!==null&&IP(Zm)&&(Zm=null),Sw.forEach($U),Ew.forEach($U)}function MP(w,E){w.blockedOn===E&&(w.blockedOn=null,bk||(bk=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,u_e)))}var AP=null;function OU(w){AP!==w&&(AP=w,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){AP===w&&(AP=null);for(var E=0;E<w.length;E+=3){var D=w[E],z=w[E+1],Z=w[E+2];if(typeof z!="function"){if(_k(z||D)===null)continue;break}var ie=as(D);ie!==null&&(w.splice(E,3),E-=3,cD(ie,{pending:!0,data:Z,method:D.method,action:z},z,Z))}}))}function Pw(w){function E(qe){return MP(qe,w)}Xm!==null&&MP(Xm,w),Wm!==null&&MP(Wm,w),Zm!==null&&MP(Zm,w),Sw.forEach(E),Ew.forEach(E);for(var D=0;D<Km.length;D++){var z=Km[D];z.blockedOn===w&&(z.blockedOn=null)}for(;0<Km.length&&(D=Km[0],D.blockedOn===null);)NU(D),D.blockedOn===null&&Km.shift();if(D=(w.ownerDocument||w).$$reactFormReplay,D!=null)for(z=0;z<D.length;z+=3){var Z=D[z],ie=D[z+1],_e=Z[dt]||null;if(typeof ie=="function")_e||OU(D);else if(_e){var De=null;if(ie&&ie.hasAttribute("formAction")){if(Z=ie,_e=ie[dt]||null)De=_e.formAction;else if(_k(Z)!==null)continue}else De=_e.action;typeof De=="function"?D[z+1]=De:(D.splice(z,3),z-=3),OU(D)}}}function xk(w){this._internalRoot=w}DP.prototype.render=xk.prototype.render=function(w){var E=this._internalRoot;if(E===null)throw Error(s(409));var D=E.current,z=lc();IU(D,z,w,E,null,null)},DP.prototype.unmount=xk.prototype.unmount=function(){var w=this._internalRoot;if(w!==null){this._internalRoot=null;var E=w.containerInfo;w.tag===0&&y_(),IU(w.current,2,null,w,null,null),fP(),E[ct]=null}};function DP(w){this._internalRoot=w}DP.prototype.unstable_scheduleHydration=function(w){if(w){var E=Ne();w={blockedOn:null,target:w,priority:E};for(var D=0;D<Km.length&&E!==0&&E<Km[D].priority;D++);Km.splice(D,0,w),D===0&&NU(w)}};var RU=e.version;if(RU!=="19.0.0")throw Error(s(527,RU,"19.0.0"));ot.findDOMNode=function(w){var E=w._reactInternals;if(E===void 0)throw typeof w.render=="function"?Error(s(188)):(w=Object.keys(w).join(","),Error(s(268,w)));return w=Fe(E),w=w!==null?it(w):null,w=w===null?null:w.stateNode,w};var h_e={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:se,findFiberByHostInstance:_s,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kP.isDisabled&&kP.supportsFiber)try{T=kP.inject(h_e),p=kP}catch{}}return Iw.createRoot=function(w,E){if(!n(w))throw Error(s(299));var D=!1,z="",Z=QB,ie=eH,_e=tH,De=null;return E!=null&&(E.unstable_strictMode===!0&&(D=!0),E.identifierPrefix!==void 0&&(z=E.identifierPrefix),E.onUncaughtError!==void 0&&(Z=E.onUncaughtError),E.onCaughtError!==void 0&&(ie=E.onCaughtError),E.onRecoverableError!==void 0&&(_e=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(De=E.unstable_transitionCallbacks)),E=PU(w,1,!1,null,null,D,z,Z,ie,_e,De,null),w[ct]=E.current,nk(w.nodeType===8?w.parentNode:w),new xk(E)},Iw.hydrateRoot=function(w,E,D){if(!n(w))throw Error(s(299));var z=!1,Z="",ie=QB,_e=eH,De=tH,qe=null,We=null;return D!=null&&(D.unstable_strictMode===!0&&(z=!0),D.identifierPrefix!==void 0&&(Z=D.identifierPrefix),D.onUncaughtError!==void 0&&(ie=D.onUncaughtError),D.onCaughtError!==void 0&&(_e=D.onCaughtError),D.onRecoverableError!==void 0&&(De=D.onRecoverableError),D.unstable_transitionCallbacks!==void 0&&(qe=D.unstable_transitionCallbacks),D.formState!==void 0&&(We=D.formState)),E=PU(w,1,!0,E,D??null,z,Z,ie,_e,De,qe,We),E.context=TU(null),D=E.current,z=lc(),Z=qm(z),Z.callback=null,Vm(D,Z,z),E.current.lanes=z,ge(E,z),yd(E),w[ct]=E.current,nk(w),new DP(E)},Iw.version="19.0.0",Iw}var UU;function w_e(){if(UU)return Ek.exports;UU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ek.exports=x_e(),Ek.exports}var S_e=w_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const E_e="calcite-mode-auto",Wse="calcite-mode-dark",C_e="calcite-mode-light",Bl={darkMode:Wse,lightMode:C_e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},YU={filter:250,resize:150,reposition:100},P_e="modulepreload",T_e=function(t,e){return new URL(t,e).href},XU={},nt=function(e,i,s){let n=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(i.map(f=>{if(f=T_e(f,s),f in XU)return;XU[f]=!0;const y=f.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(!!s)for(let P=o.length-1;P>=0;P--){const A=o[P];if(A.href===f&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${_}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":P_e,y||(S.as="script"),S.crossOrigin="",S.href=f,u&&S.setAttribute("nonce",u),document.head.appendChild(S),y)return new Promise((P,A)=>{S.addEventListener("load",P),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var Lh={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},I_e=Object.defineProperty,M_e=(t,e)=>{for(var i in e)I_e(t,i,{get:e[i],enumerable:!0})},Zse=new WeakMap,Pv=t=>Zse.get(t),A_e=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return Zse.set(t,i)},WU=(t,e)=>e in t,nC=(t,e)=>(0,console.error)(t,e),XI=new Map,D_e=[],k_e="slot-fb{display:contents}slot-fb[hidden]{display:none}",ZU="http://www.w3.org/1999/xlink",rC=typeof window<"u"?window:{},Uh=rC.document||{head:{}},Bi=rC.HTMLElement||class{},Zo={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},N_e=(()=>{let t=!1;try{Uh.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),$_e=t=>Promise.resolve(t),O_e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),i$=!1,s$=[],Kse=[],Jse=(t,e)=>i=>{t.push(i),i$||(i$=!0,e&&Zo.$flags$&4?R_e(n$):Zo.raf(n$))},KU=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){nC(i)}t.length=0},n$=()=>{KU(s$),KU(Kse),(i$=s$.length>0)&&Zo.raf(n$)},R_e=t=>$_e().then(t),L_e=Jse(s$,!1),F_e=Jse(Kse,!0),Uz=t=>{const e=new URL(t,Zo.$resourcesUrl$);return e.origin!==rC.location.origin?e.href:e.pathname},Qse=t=>Zo.$resourcesUrl$=t,JU={},z_e="http://www.w3.org/2000/svg",q_e="http://www.w3.org/1999/xhtml",V_e=t=>t!=null,Yz=t=>(t=typeof t,t==="object"||t==="function");function G_e(t){var e,i,s;return(s=(i=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?s:void 0}var j_e={};M_e(j_e,{err:()=>ene,map:()=>B_e,ok:()=>r$,unwrap:()=>H_e,unwrapErr:()=>U_e});var r$=t=>({isOk:!0,isErr:!1,value:t}),ene=t=>({isOk:!1,isErr:!0,value:t});function B_e(t,e){if(t.isOk){const i=e(t.value);return i instanceof Promise?i.then(s=>r$(s)):r$(i)}if(t.isErr){const i=t.value;return ene(i)}throw"should never get here"}var H_e=t=>{if(t.isOk)return t.value;throw t.value},U_e=t=>{if(t.isErr)return t.value;throw t.value},Wy=(t,e="")=>()=>{},Ae=(t,e,...i)=>{let s=null,n=null,r=null,o=!1,l=!1;const u=[],f=_=>{for(let x=0;x<_.length;x++)s=_[x],Array.isArray(s)?f(s):s!=null&&typeof s!="boolean"&&((o=typeof t!="function"&&!Yz(s))&&(s=String(s)),o&&l?u[u.length-1].$text$+=s:u.push(o?WI(null,s):s),l=o)};if(f(i),e){e.key&&(n=e.key),e.name&&(r=e.name);{const _=e.className||e.class;_&&(e.class=typeof _!="object"?_:Object.keys(_).filter(x=>_[x]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,u,X_e);const y=WI(t,null);return y.$attrs$=e,u.length>0&&(y.$children$=u),y.$key$=n,y.$name$=r,y},WI=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},hr={},Y_e=t=>t&&t.$tag$===hr,X_e={forEach:(t,e)=>t.map(QU).forEach(e),map:(t,e)=>t.map(QU).map(e).map(W_e)},QU=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),W_e=t=>{if(typeof t.vtag=="function"){const i={...t.vattrs};return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),Ae(t.vtag,i,...t.vchildren||[])}const e=WI(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Z_e=t=>D_e.map(e=>e(t)).find(e=>!!e),K_e=(t,e)=>t!=null&&!Yz(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,J_e=t=>t,$t=(t,e,i)=>{const s=J_e(t);return{emit:n=>Q_e(s,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},Q_e=(t,e,i)=>{const s=Zo.ce(e,i);return t.dispatchEvent(s),s},eY=new WeakMap,ebe=(t,e,i)=>{let s=XI.get(t);O_e&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,XI.set(t,s)},tbe=(t,e,i)=>{var s;const n=tne(e,i),r=XI.get(n);if(t=t.nodeType===11?t:Uh,r)if(typeof r=="string"){t=t.head||t;let o=eY.get(t),l;if(o||eY.set(t,o=new Set),!o.has(n)){{l=Uh.createElement("style"),l.innerHTML=r;const u=(s=Zo.$nonce$)!=null?s:G_e(Uh);u!=null&&l.setAttribute("nonce",u),(!(e.$flags$&1)||e.$flags$&1&&t.nodeName!=="HEAD")&&t.insertBefore(l,t.querySelector("link"))}e.$flags$&4&&(l.innerHTML+=k_e),o&&o.add(n)}}else t.adoptedStyleSheets.includes(r)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return n},ibe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,n=Wy("attachStyles",e.$tagName$),r=tbe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);s&10&&s&2&&(i["s-sc"]=r,i.classList.add(r+"-h"),s&2&&i.classList.add(r+"-s")),n()},tne=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),tY=(t,e,i,s,n,r)=>{if(i!==s){let o=WU(t,e),l=e.toLowerCase();if(e==="class"){const u=t.classList,f=iY(i),y=iY(s);u.remove(...f.filter(_=>_&&!y.includes(_))),u.add(...y.filter(_=>_&&!f.includes(_)))}else if(e==="style"){for(const u in i)(!s||s[u]==null)&&(u.includes("-")?t.style.removeProperty(u):t.style[u]="");for(const u in s)(!i||s[u]!==i[u])&&(u.includes("-")?t.style.setProperty(u,s[u]):t.style[u]=s[u])}else if(e!=="key")if(e==="ref")s&&s(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):WU(rC,l)?e=l.slice(2):e=l[2]+e.slice(3),i||s){const u=e.endsWith(ine);e=e.replace(nbe,""),i&&Zo.rel(t,e,i,u),s&&Zo.ael(t,e,s,u)}}else{const u=Yz(s);if((o||u&&s!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=s;else{const y=s??"";e==="list"?o=!1:(i==null||t[e]!=y)&&(t[e]=y)}}catch{}let f=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,f=!0),s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&(f?t.removeAttributeNS(ZU,e):t.removeAttribute(e)):(!o||r&4||n)&&!u&&(s=s===!0?"":s,f?t.setAttributeNS(ZU,e,s):t.setAttribute(e,s))}}},sbe=/\s/,iY=t=>t?t.split(sbe):[],ine="Capture",nbe=new RegExp(ine+"$"),sne=(t,e,i)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,n=t&&t.$attrs$||JU,r=e.$attrs$||JU;for(const o of sY(Object.keys(n)))o in r||tY(s,o,n[o],void 0,i,e.$flags$);for(const o of sY(Object.keys(r)))tY(s,o,n[o],r[o],i,e.$flags$)};function sY(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var G_,o$,ZS,ZI=!1,KI=!1,Xz=!1,Ec=!1,JI=(t,e,i,s)=>{var n;const r=e.$children$[i];let o=0,l,u,f;if(ZI||(Xz=!0,r.$tag$==="slot"&&(G_&&s.classList.add(G_+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)l=r.$elm$=Uh.createTextNode(r.$text$);else if(r.$flags$&1)l=r.$elm$=Uh.createTextNode("");else{if(Ec||(Ec=r.$tag$==="svg"),l=r.$elm$=Uh.createElementNS(Ec?z_e:q_e,!ZI&&Lh.slotRelocation&&r.$flags$&2?"slot-fb":r.$tag$),Ec&&r.$tag$==="foreignObject"&&(Ec=!1),sne(null,r,Ec),!!l.getRootNode().querySelector("body")&&Lh.scoped&&V_e(G_)&&l["s-si"]!==G_&&l.classList.add(l["s-si"]=G_),Zz(l,s),r.$children$)for(o=0;o<r.$children$.length;++o)u=JI(t,r,o,l),u&&l.appendChild(u);r.$tag$==="svg"?Ec=!1:l.tagName==="foreignObject"&&(Ec=!0)}return l["s-hn"]=ZS,r.$flags$&3&&(l["s-sr"]=!0,l["s-cr"]=o$,l["s-sn"]=r.$name$||"",l["s-rf"]=(n=r.$attrs$)==null?void 0:n.ref,f=t&&t.$children$&&t.$children$[i],f&&f.$tag$===r.$tag$&&t.$elm$&&KS(t.$elm$,!1)),l},KS=(t,e)=>{Zo.$flags$|=1;const i=Array.from(t.childNodes);t["s-sr"]&&Lh.experimentalSlotFixes;for(let s=i.length-1;s>=0;s--){const n=i[s];n["s-hn"]!==ZS&&n["s-ol"]&&(ug(one(n),n,Wz(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,Xz=!0),e&&KS(n,e)}Zo.$flags$&=-2},nne=(t,e,i,s,n,r)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,l;for(o.shadowRoot&&o.tagName===ZS&&(o=o.shadowRoot);n<=r;++n)s[n]&&(l=JI(null,i,n,t),l&&(s[n].$elm$=l,ug(o,l,Wz(e))))},rne=(t,e,i)=>{for(let s=e;s<=i;++s){const n=t[s];if(n){const r=n.$elm$;cne(n),r&&(KI=!0,r["s-ol"]?r["s-ol"].remove():KS(r,!0),r.remove())}}},rbe=(t,e,i,s,n=!1)=>{let r=0,o=0,l=0,u=0,f=e.length-1,y=e[0],_=e[f],x=s.length-1,S=s[0],P=s[x],A,k;for(;r<=f&&o<=x;)if(y==null)y=e[++r];else if(_==null)_=e[--f];else if(S==null)S=s[++o];else if(P==null)P=s[--x];else if(NP(y,S,n))j_(y,S,n),y=e[++r],S=s[++o];else if(NP(_,P,n))j_(_,P,n),_=e[--f],P=s[--x];else if(NP(y,P,n))(y.$tag$==="slot"||P.$tag$==="slot")&&KS(y.$elm$.parentNode,!1),j_(y,P,n),ug(t,y.$elm$,_.$elm$.nextSibling),y=e[++r],P=s[--x];else if(NP(_,S,n))(y.$tag$==="slot"||P.$tag$==="slot")&&KS(_.$elm$.parentNode,!1),j_(_,S,n),ug(t,_.$elm$,y.$elm$),_=e[--f],S=s[++o];else{for(l=-1,u=r;u<=f;++u)if(e[u]&&e[u].$key$!==null&&e[u].$key$===S.$key$){l=u;break}l>=0?(k=e[l],k.$tag$!==S.$tag$?A=JI(e&&e[o],i,l,t):(j_(k,S,n),e[l]=void 0,A=k.$elm$),S=s[++o]):(A=JI(e&&e[o],i,o,t),S=s[++o]),A&&ug(one(y.$elm$),A,Wz(y.$elm$))}r>f?nne(t,s[x+1]==null?null:s[x+1].$elm$,i,s,o,x):o>x&&rne(e,r,f)},NP=(t,e,i=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?"$nodeId$"in t&&i&&t.$elm$.nodeType!==8?!1:t.$name$===e.$name$:i?!0:t.$key$===e.$key$:!1,Wz=t=>t&&t["s-ol"]||t,one=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,j_=(t,e,i=!1)=>{const s=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,o=e.$tag$,l=e.$text$;let u;l===null?(Ec=o==="svg"?!0:o==="foreignObject"?!1:Ec,o==="slot"&&!ZI||sne(t,e,Ec),n!==null&&r!==null?rbe(s,n,e,r,i):r!==null?(t.$text$!==null&&(s.textContent=""),nne(s,null,e,r,0,r.length-1)):!i&&Lh.updatable&&n!==null&&rne(n,0,n.length-1),Ec&&o==="svg"&&(Ec=!1)):(u=s["s-cr"])?u.parentNode.textContent=l:t.$text$!==l&&(s.data=l)},ane=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const s=i["s-sn"];i.hidden=!1;for(const n of e)if(n!==i){if(n["s-hn"]!==i["s-hn"]||s!==""){if(n.nodeType===1&&(s===n.getAttribute("slot")||s===n["s-sn"])||n.nodeType===3&&s===n["s-sn"]){i.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){i.hidden=!0;break}}}ane(i)}},kp=[],lne=t=>{let e,i,s;for(const n of t.childNodes){if(n["s-sr"]&&(e=n["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const r=n["s-sn"];for(s=i.length-1;s>=0;s--)if(e=i[s],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==n["s-hn"])if(nY(e,r)){let o=kp.find(l=>l.$nodeToRelocate$===e);KI=!0,e["s-sn"]=e["s-sn"]||r,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(e["s-sh"]=n["s-hn"],kp.push({$slotRefNode$:n,$nodeToRelocate$:e})),e["s-sr"]&&kp.map(l=>{nY(l.$nodeToRelocate$,e["s-sn"])&&(o=kp.find(u=>u.$nodeToRelocate$===e),o&&!l.$slotRefNode$&&(l.$slotRefNode$=o.$slotRefNode$))})}else kp.some(o=>o.$nodeToRelocate$===e)||kp.push({$nodeToRelocate$:e})}n.nodeType===1&&lne(n)}},nY=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",cne=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(cne)},ug=(t,e,i)=>{const s=t==null?void 0:t.insertBefore(e,i);return Zz(e,t),s},une=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...une(t.parentElement)),e},Zz=(t,e,i=!1)=>{var s;if(t&&e&&t.nodeType===1){const n=new Set(une(e).filter(Boolean));if(n.size&&((s=t.classList)==null||s.add(...t["s-scs"]=[...n]),t["s-ol"]||i))for(const r of Array.from(t.childNodes))Zz(r,t,!0)}},obe=(t,e,i=!1)=>{var s,n,r,o,l;const u=t.$hostElement$,f=t.$cmpMeta$,y=t.$vnode$||WI(null,null),_=Y_e(e)?e:Ae(null,null,e);if(ZS=u.tagName,f.$attrsToReflect$&&(_.$attrs$=_.$attrs$||{},f.$attrsToReflect$.map(([x,S])=>_.$attrs$[S]=u[x])),i&&_.$attrs$)for(const x of Object.keys(_.$attrs$))u.hasAttribute(x)&&!["key","ref","style","class"].includes(x)&&(_.$attrs$[x]=u[x]);_.$tag$=null,_.$flags$|=4,t.$vnode$=_,_.$elm$=y.$elm$=u.shadowRoot||u,G_=u["s-sc"],ZI=(f.$flags$&1)!==0,o$=u["s-cr"],KI=!1,j_(y,_,i);{if(Zo.$flags$|=1,Xz){lne(_.$elm$);for(const x of kp){const S=x.$nodeToRelocate$;if(!S["s-ol"]){const P=Uh.createTextNode("");P["s-nr"]=S,ug(S.parentNode,S["s-ol"]=P,S)}}for(const x of kp){const S=x.$nodeToRelocate$,P=x.$slotRefNode$;if(P){const A=P.parentNode;let k=P.nextSibling;{let $=(s=S["s-ol"])==null?void 0:s.previousSibling;for(;$;){let F=(n=$["s-nr"])!=null?n:null;if(F&&F["s-sn"]===S["s-sn"]&&A===F.parentNode){for(F=F.nextSibling;F===S||F!=null&&F["s-sr"];)F=F==null?void 0:F.nextSibling;if(!F||!F["s-nr"]){k=F;break}}$=$.previousSibling}}(!k&&A!==S.parentNode||S.nextSibling!==k)&&S!==k&&(!S["s-hn"]&&S["s-ol"]&&(S["s-hn"]=S["s-ol"].parentNode.nodeName),ug(A,S,k),S.nodeType===1&&(S.hidden=(r=S["s-ih"])!=null?r:!1)),S&&typeof P["s-rf"]=="function"&&P["s-rf"](S)}else S.nodeType===1&&(i&&(S["s-ih"]=(o=S.hidden)!=null?o:!1),S.hidden=!0)}}KI&&ane(_.$elm$),Zo.$flags$&=-2,kp.length=0}if(Lh.experimentalScopedSlotChanges&&f.$flags$&2)for(const x of _.$elm$.childNodes)x["s-hn"]!==ZS&&!x["s-sh"]&&(i&&x["s-ih"]==null&&(x["s-ih"]=(l=x.hidden)!=null?l:!1),x.hidden=!0);o$=void 0},abe=(t,e)=>{},Kz=(t,e)=>(t.$flags$|=16,abe(t,t.$ancestorComponent$),F_e(()=>lbe(t,e))),lbe=(t,e)=>{const i=t.$hostElement$,s=Wy("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;if(!n)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=qb(n,"componentWillLoad"):r=qb(n,"componentWillUpdate"),r=rY(r,()=>qb(n,"componentWillRender")),s(),rY(r,()=>ube(t,n,e))},rY=(t,e)=>cbe(t)?t.then(e).catch(i=>{console.error(i),e()}):e(),cbe=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",ube=async(t,e,i)=>{const s=t.$hostElement$,n=Wy("update",t.$cmpMeta$.$tagName$);s["s-rc"],i&&ibe(t);const r=Wy("render",t.$cmpMeta$.$tagName$);hbe(t,e,s,i),r(),n(),dbe(t)},oY=null,hbe=(t,e,i,s)=>{try{oY=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Lh.hasRenderFn||Lh.reflect)&&(Lh.vdomRender||Lh.reflect)&&(Lh.hydrateServerSide||obe(t,e,s))}catch(u){nC(u,t.$hostElement$)}return oY=null,null},dbe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,s=Wy("postUpdate",e),n=i;t.$ancestorComponent$,qb(n,"componentDidRender"),t.$flags$&64?(qb(n,"componentDidUpdate"),s()):(t.$flags$|=64,qb(n,"componentDidLoad"),s())},Io=t=>{{const e=Pv(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&Kz(e,!1),i}},qb=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){nC(s)}},fbe=(t,e)=>Pv(t).$instanceValues$.get(e),pbe=(t,e,i,s)=>{const n=Pv(t),r=t,o=n.$instanceValues$.get(e),l=n.$flags$,u=r;i=K_e(i,s.$members$[e][0]);const f=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!f){n.$instanceValues$.set(e,i);{if(s.$watchers$&&l&128){const _=s.$watchers$[e];_&&_.map(x=>{try{u[x](i,o,e)}catch(S){nC(S,r)}})}if((l&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(i,o,e)===!1)return;Kz(n,!1)}}}},mbe=(t,e,i)=>{var s,n;const r=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((s=e.$members$)!=null?s:{});o.map(([l,[u]])=>{(u&31||u&32)&&Object.defineProperty(r,l,{get(){return fbe(this,l)},set(f){pbe(this,l,f,e)},configurable:!0,enumerable:!0})});{const l=new Map;r.attributeChangedCallback=function(u,f,y){Zo.jmp(()=>{var _;const x=l.get(u);if(this.hasOwnProperty(x))y=this[x],delete this[x];else{if(r.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==y)return;if(x==null){const S=Pv(this),P=S==null?void 0:S.$flags$;if(P&&!(P&8)&&P&128&&y!==f){const k=this,$=(_=e.$watchers$)==null?void 0:_[u];$==null||$.forEach(F=>{k[F]!=null&&k[F].call(k,y,f,u)})}return}}this[x]=y===null&&typeof this[x]=="boolean"?!1:y})},t.observedAttributes=Array.from(new Set([...Object.keys((n=e.$watchers$)!=null?n:{}),...o.filter(([u,f])=>f[0]&15).map(([u,f])=>{var y;const _=f[1]||u;return l.set(_,u),f[0]&512&&((y=e.$attrsToReflect$)==null||y.push([u,_])),_})]))}}return t},gbe=async(t,e,i,s)=>{let n;if((e.$flags$&32)===0){e.$flags$|=32,i.$lazyBundleId$;{n=t.constructor;const o=t.localName;customElements.whenDefined(o).then(()=>e.$flags$|=128)}if(n&&n.style){let o;typeof n.style=="string"?o=n.style:typeof n.style!="string"&&(e.$modeName$=Z_e(t),e.$modeName$&&(o=n.style[e.$modeName$]));const l=tne(i,e.$modeName$);if(!XI.has(l)){const u=Wy("registerStyles",i.$tagName$);ebe(l,o,!!(i.$flags$&1)),u()}}}e.$ancestorComponent$,Kz(e,!0)},aY=t=>{},ybe=t=>{if((Zo.$flags$&1)===0){const e=Pv(t),i=e.$cmpMeta$,s=Wy("connectedCallback",i.$tagName$);e.$flags$&1?(hne(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?aY(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>aY(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&vbe(t),i.$members$&&Object.entries(i.$members$).map(([n,[r]])=>{if(r&31&&t.hasOwnProperty(n)){const o=t[n];delete t[n],t[n]=o}}),gbe(t,e,i)),s()}},vbe=t=>{const e=t["s-cr"]=Uh.createComment("");e["s-cn"]=!0,ug(t,e,t.firstChild)},_be=async t=>{if((Zo.$flags$&1)===0){const e=Pv(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},Hi=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const s=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){A_e(this,i)},connectedCallback(){const r=Pv(this);hne(this,r,i.$listeners$),ybe(this),s&&s.call(this)},disconnectedCallback(){_be(this),n&&n.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),t.is=i.$tagName$,mbe(t,i)},sM=(t,e)=>e,hne=(t,e,i,s)=>{i&&i.map(([n,r,o])=>{const l=xbe(t,n),u=bbe(e,o),f=wbe(n);Zo.ael(l,r,u,f),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Zo.rel(l,r,u,f))})},bbe=(t,e)=>i=>{var s;try{Lh.lazyLoad||t.$hostElement$[e](i)}catch(n){nC(n)}},xbe=(t,e)=>e&4?Uh:e&8?rC:e&16?Uh.body:t,wbe=t=>N_e?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Vp=globalThis.calciteConfig,Sbe=(Vp==null?void 0:Vp.focusTrapStack)||[];Vp!=null&&Vp.logLevel;const lY="2.13.2",Ebe="2024-10-24",Cbe="e38e2977d";function Pbe(){if(Vp&&Vp.version)return;console.info(`Using Calcite Components ${lY} [Date: ${Ebe}, Revision: ${Cbe}]`);const t=Vp||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:lY,writable:!1}),globalThis.calciteConfig=t}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Ef=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function cY(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(Wse)||t.contains(E_e)&&e?"dark":"light",s=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{r!==o&&s(o),r=o};let r=i();s(r),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Tbe(){Ef()&&(document.readyState==="interactive"?cY():document.addEventListener("DOMContentLoaded",()=>cY(),{once:!0})),Pbe()}const Ibe=Tbe;Ibe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function wl(t,e,i){if(!Ef())return;const s=Mbe(t);return new s(e,i)}function Mbe(t){class e extends window.MutationObserver{constructor(s){super(s),this.observedEntry=[],this.callback=s}observe(s,n){return this.observedEntry.push({target:s,options:n}),super.observe(s,n)}unobserve(s){const n=this.observedEntry.filter(r=>r.target!==s);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(r=>this.observe(r.target,r.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let mT;const Abe={childList:!0};function oC(t){mT||(mT=wl("mutation",Dbe)),mT.observe(t.el,Abe)}function aC(t){mT.unobserve(t.el)}function Dbe(t){t.forEach(({target:e})=>{Io(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function kbe(t){return t.map(e=>{let i="";for(let s=0;s<e;s++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const lm=()=>kbe([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var dne=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],QI=dne.join(","),fne=typeof Element>"u",Zy=fne?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,e9=!fne&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},t9=function t(e,i){var s;i===void 0&&(i=!0);var n=e==null||(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"inert"),r=n===""||n==="true",o=r||i&&e&&t(e.parentNode);return o},Nbe=function(e){var i,s=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return s===""||s==="true"},pne=function(e,i,s){if(t9(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(QI));return i&&Zy.call(e,QI)&&n.unshift(e),n=n.filter(s),n},mne=function t(e,i,s){for(var n=[],r=Array.from(e);r.length;){var o=r.shift();if(!t9(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,f=t(u,!0,s);s.flatten?n.push.apply(n,f):n.push({scopeParent:o,candidates:f})}else{var y=Zy.call(o,QI);y&&s.filter(o)&&(i||!e.includes(o))&&n.push(o);var _=o.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(o),x=!t9(_,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(o));if(_&&x){var S=t(_===!0?o.children:_.children,!0,s);s.flatten?n.push.apply(n,S):n.push({scopeParent:o,candidates:S})}else r.unshift.apply(r,o.children)}}return n},gne=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},vy=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Nbe(e))&&!gne(e)?0:e.tabIndex},$be=function(e,i){var s=vy(e);return s<0&&i&&!gne(e)?0:s},Obe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},yne=function(e){return e.tagName==="INPUT"},Rbe=function(e){return yne(e)&&e.type==="hidden"},Lbe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return i},Fbe=function(e,i){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===i)return e[s]},zbe=function(e){if(!e.name)return!0;var i=e.form||e9(e),s=function(l){return i.querySelectorAll('input[type="radio"][name="'+l+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=s(window.CSS.escape(e.name));else try{n=s(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var r=Fbe(n,e.form);return!r||r===e},qbe=function(e){return yne(e)&&e.type==="radio"},Vbe=function(e){return qbe(e)&&!zbe(e)},Gbe=function(e){var i,s=e&&e9(e),n=(i=s)===null||i===void 0?void 0:i.host,r=!1;if(s&&s!==e){var o,l,u;for(r=!!((o=n)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(n)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!r&&n;){var f,y,_;s=e9(n),n=(f=s)===null||f===void 0?void 0:f.host,r=!!((y=n)!==null&&y!==void 0&&(_=y.ownerDocument)!==null&&_!==void 0&&_.contains(n))}}return r},uY=function(e){var i=e.getBoundingClientRect(),s=i.width,n=i.height;return s===0&&n===0},jbe=function(e,i){var s=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var r=Zy.call(e,"details>summary:first-of-type"),o=r?e.parentElement:e;if(Zy.call(o,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof n=="function"){for(var l=e;e;){var u=e.parentElement,f=e9(e);if(u&&!u.shadowRoot&&n(u)===!0)return uY(e);e.assignedSlot?e=e.assignedSlot:!u&&f!==e.ownerDocument?e=f.host:e=u}e=l}if(Gbe(e))return!e.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return uY(e);return!1},Bbe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var s=0;s<i.children.length;s++){var n=i.children.item(s);if(n.tagName==="LEGEND")return Zy.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},i9=function(e,i){return!(i.disabled||t9(i)||Rbe(i)||jbe(i,e)||Lbe(i)||Bbe(i))},a$=function(e,i){return!(Vbe(i)||vy(i)<0||!i9(e,i))},Hbe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Ube=function t(e){var i=[],s=[];return e.forEach(function(n,r){var o=!!n.scopeParent,l=o?n.scopeParent:n,u=$be(l,o),f=o?t(n.candidates):l;u===0?o?i.push.apply(i,f):i.push(l):s.push({documentOrder:r,tabIndex:u,item:n,isScope:o,content:f})}),s.sort(Obe).reduce(function(n,r){return r.isScope?n.push.apply(n,r.content):n.push(r.content),n},[]).concat(i)},vne=function(e,i){i=i||{};var s;return i.getShadowRoot?s=mne([e],i.includeContainer,{filter:a$.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Hbe}):s=pne(e,i.includeContainer,a$.bind(null,i)),Ube(s)},Ybe=function(e,i){i=i||{};var s;return i.getShadowRoot?s=mne([e],i.includeContainer,{filter:i9.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):s=pne(e,i.includeContainer,i9.bind(null,i)),s},S_=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Zy.call(e,QI)===!1?!1:a$(i,e)},Xbe=dne.concat("iframe").join(","),Ik=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Zy.call(e,Xbe)===!1?!1:i9(i,e)};const _ne={getShadowRoot:!0};function Qat(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${lm()}`:""}function Mw(t){return Array.isArray(t)?t:Array.from(t)}function Wbe(t){const e=cm(t,`.${Bl.darkMode}, .${Bl.lightMode}`);return e!=null&&e.classList.contains("calcite-mode-dark")?"dark":"light"}function Gp(t){const e="dir",i=`[${e}]`,s=cm(t,i);return s?s.getAttribute(e):"ltr"}function elt(t){return t?parseFloat(getComputedStyle(t).inlineSize):0}function Jz(t){return t.getRootNode()}function Zbe(t){const e=Jz(t);return"host"in e?e:null}function tlt(t,e){if(!t)return 0;const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t).width}function bne(t){return t.host||null}function lC(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const s=Jz(t);return(i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null)||lC(bne(s),{selector:e,id:i})}function cm(t,e){return t?t.closest(e)||cm(bne(Jz(t)),e):null}function Kbe(t,e){return xne(t,e)}function xne(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:s}=t;return xne(s instanceof ShadowRoot?s.host:s,e)}function Jbe(t,e){return!!Kbe(e,i=>i===t?!0:void 0)}function Qbe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function Yp(t){if(t)return Qbe(t)?t.setFocus():t.focus()}function e2e(t){if(t)return vne(t,_ne)[0]??t}function nM(t){var e;(e=e2e(t))==null||e.focus()}const JS=":not([slot])";function wne(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const s=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:JS;return i!=null&&i.all?t2e(t,s,i):i2e(t,s,i)}function Sne(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function t2e(t,e,i){let s=e===JS?Sne(t,JS):Array.from(t.querySelectorAll(e));s=i&&i.direct===!1?s:s.filter(r=>r.parentElement===t),s=i!=null&&i.matches?s.filter(r=>r==null?void 0:r.matches(i.matches)):s;const n=i==null?void 0:i.selector;return n?s.map(r=>Array.from(r.querySelectorAll(n))).reduce((r,o)=>[...r,...o],[]).filter(r=>!!r):s}function i2e(t,e,i){let s=e===JS?Sne(t,JS)[0]||null:t.querySelector(e);s=i&&i.direct===!1||(s==null?void 0:s.parentElement)===t?s:null,s=i!=null&&i.matches?s!=null&&s.matches(i.matches)?s:null:s;const n=i==null?void 0:i.selector;return n?s==null?void 0:s.querySelector(n):s}function s2e(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function n2e(t,e){return t.filter(i=>i.matches(e))}function r2e(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function hY(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function br(t){return(!!t).toString()}function o2e(t){return Is(t)||l2e(t)}function a2e(t){return c2e(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function l2e(t){return!!a2e(t)}function c2e(t){return t.currentTarget.assignedNodes({flatten:!0})}function Is(t){return!!Nu(t).length}function Nu(t,e){return u2e(t.target,e)}function u2e(t,e){const i=t.assignedElements({flatten:!0});return e?n2e(i,e):i}function fS(t){return!!(t.isPrimary&&t.button===0)}function h2e(t){return t.detail===0}const K0=(t,e,i,s=!0)=>{const n=t.indexOf(e),r=n===0,o=n===t.length-1;s&&(i=i==="previous"&&r?"last":i==="next"&&o?"first":i);let l;return i==="previous"?l=t[n-1]||t[s?t.length-1:n]:i==="next"?l=t[n+1]||t[s?0:n]:i==="last"?l=t[t.length-1]:l=t[0],Yp(l),l};function d2e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function f2e(t,e,i,s){return p2e(t,e,"transition",i,s)}async function p2e(t,e,i,s,n){const r=window.getComputedStyle(t),o=r.transitionDuration,l=r.transitionProperty,u=o.split(","),y=l.split(",").map(k=>k.trim()).indexOf(e),_=u[y]??u[0];function x(){requestAnimationFrame(()=>{s==null||s(),requestAnimationFrame(()=>n==null?void 0:n())})}if(_==="0s"){x();return}const S="transitionstart",P="transitionend",A="transitioncancel";return new Promise(k=>{const $=window.setTimeout(()=>{t.removeEventListener(S,F),t.removeEventListener(P,G),t.removeEventListener(A,G),x(),k()},parseFloat(_)*1e3);t.addEventListener(S,F),t.addEventListener(P,G),t.addEventListener(A,G);function F(V){V.target===t&&dY(V)===e&&(window.clearTimeout($),t.removeEventListener(S,F),s==null||s())}function G(V){V.target===t&&dY(V)===e&&(t.removeEventListener(P,G),t.removeEventListener(A,G),n==null||n(),k())}})}function m2e(t){return"propertyName"in t}function dY(t){return m2e(t)?t.propertyName:t.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const vd={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},ah={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},g2e=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",y2e=g2e,v2e=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!Is(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!Is(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!Is(e),(i=Nu(e))==null||i.map(s=>{s.tagName==="CALCITE-ALERT"&&(s.embedded=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!Is(e),(i=Nu(e))==null||i.map(s=>{s.tagName==="CALCITE-SHEET"&&(s.embedded=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!Is(e),(i=Nu(e))==null||i.map(s=>{s.tagName==="CALCITE-MODAL"&&(s.embedded=!0)})},this.handlePanelTopChange=e=>{this.hasPanelTop=Is(e)},this.handlePanelBottomChange=e=>{this.hasPanelBottom=Is(e)},this.handleDialogsSlotChange=e=>{var i;this.hasDialogs=!!Is(e),(i=Nu(e))==null||i.map(s=>{s.tagName==="CALCITE-DIALOG"&&(s.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){oC(this)}disconnectedCallback(){aC(this)}renderHeader(){return Ae("div",{hidden:!this.hasHeader},Ae("slot",{key:"header",name:ah.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return Ae("div",{class:vd.footer,hidden:!this.hasFooter,key:"footer"},Ae("slot",{name:ah.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return Ae("div",{hidden:!this.hasAlerts},Ae("slot",{key:"alerts",name:ah.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return Ae("div",{hidden:!this.hasSheets},Ae("slot",{key:"sheets",name:ah.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return Ae("div",{hidden:!this.hasModals},Ae("slot",{key:"modals",name:ah.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return Ae("div",{hidden:!this.hasDialogs},Ae("slot",{key:"dialogs",name:ah.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:e}=this,i=Ae("slot",{key:"default-slot"}),s=e?Ae("div",{class:vd.contentNonInteractive},i):i,n=Ae("slot",{key:"center-row-slot",name:ah.centerRow}),r=Ae("slot",{key:"panel-bottom-slot",name:ah.panelBottom,onSlotchange:this.handlePanelBottomChange}),o=Ae("slot",{key:"panel-top-slot",name:ah.panelTop,onSlotchange:this.handlePanelTopChange}),l="content-container";return this.contentBehind?[Ae("div",{class:{[vd.content]:!0,[vd.contentBehind]:!0},key:l},s),Ae("div",{class:{[vd.contentBehindCenterContent]:!0,[vd.contentBottom]:this.hasOnlyPanelBottom}},o,r,n)]:[Ae("div",{class:{[vd.content]:!0,[vd.contentBottom]:this.hasOnlyPanelBottom},key:l},o,s,r,n)]}renderMain(){return Ae("div",{class:vd.main},Ae("slot",{name:ah.panelStart}),this.renderContent(),Ae("slot",{name:ah.panelEnd}))}renderPositionedSlots(){return Ae("div",{class:vd.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return Ae(sM,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return y2e}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function _2e(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,v2e);break}})}_2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function cC(t){return t==="Enter"||t===" "}const Ene=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const b2e=new RegExp("\\.(0+)?$"),x2e=new RegExp("0+$");class Vs{constructor(e){if(e instanceof Vs)return e;const[i,s]=T2e(e).split(".").concat("");this.value=BigInt(i+s.padEnd(Vs.DECIMALS,"0").slice(0,Vs.DECIMALS))+BigInt(Vs.ROUNDED&&s[Vs.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Vs.DECIMALS+1,"0"),i=e.slice(0,-Vs.DECIMALS),s=e.slice(-Vs.DECIMALS).replace(x2e,"");return{integers:i,decimals:s}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:s}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),s.length&&(n.push({type:"decimal",value:e.decimal}),s.split("").forEach(r=>n.push({type:"fraction",value:r}))),n}format(e){const{integers:i,decimals:s}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,r=s.length?`${e.decimal}${s.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${r}`}add(e){return Vs.fromBigInt(this.value+new Vs(e).value)}subtract(e){return Vs.fromBigInt(this.value-new Vs(e).value)}multiply(e){return Vs._divRound(this.value*new Vs(e).value,Vs.SHIFT)}divide(e){return Vs._divRound(this.value*Vs.SHIFT,new Vs(e).value)}}Vs.DECIMALS=100;Vs.ROUNDED=!0;Vs.SHIFT=BigInt("1"+"0".repeat(Vs.DECIMALS));Vs._divRound=(t,e)=>Vs.fromBigInt(t/e+(Vs.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));Vs.fromBigInt=t=>Object.assign(Object.create(Vs.prototype),{value:t,isNegative:t<BigInt(0)});function Qz(t){return!(!t||isNaN(Number(t)))}function slt(t){return!t||!I2e(t)?"":s9(t,e=>{let i=!1;const s=e.split("").filter((n,r)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&r===0?!0:Ene.includes(n)).join("");return Qz(s)?new Vs(s).toString():""})}const Cne=/^([-0])0+(?=\d)/,w2e=/(?!^\.)\.$/,S2e=/(?!^-)-/g,E2e=/^-\b0\b\.?0*$/,C2e=/0*$/,nlt=t=>s9(t,e=>{const i=e.replace(S2e,"").replace(w2e,"").replace(Cne,"$1");return Qz(i)?E2e.test(i)?i:P2e(i):e});function P2e(t){const e=t.split(".")[1],i=new Vs(t).toString(),[s,n]=i.split(".");return e&&n!==e?`${s}.${e}`:i}function s9(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((s,n)=>e(n===1?s.replace(/\./g,""):s)).join("e").replace(/^e/,"1e"):e(t)}function T2e(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const s=t.charAt(0)==="-",n=+e[1],r=e[0].split("."),o=(s?r[0].substring(1):r[0])||"",l=r[1]||"",u=(_,x)=>{const S=Math.abs(x)-_.length,P=S>0?`${"0".repeat(S)}${_}`:_;return`${P.slice(0,x)}.${P.slice(x)}`},f=(_,x)=>{const S=x>_.length?`${_}${"0".repeat(x-_.length)}`:_;return`${S.slice(0,x)}.${S.slice(x)}`},y=n>0?`${o}${f(l,n)}`:`${u(o,n)}${l}`;return`${s?"-":""}${y.charAt(0)==="."?"0":""}${y.replace(b2e,"").replace(Cne,"")}`}function I2e(t){return Ene.some(e=>t.includes(e))}function rlt(t,e,i){const s=e.split(".")[1];if(s){const n=s.match(C2e)[0];if(n&&i.delocalize(t).length!==e.length&&s.indexOf("e")===-1){const r=i.decimal;return t=t.includes(r)?t:`${t}${r}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const vg="en",M2e=["ar","bg","bs","ca","cs","da","de","el",vg,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],A2e=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",vg,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],D2e=["arab","arabext","latn"],Pne=t=>D2e.includes(t),Mk=new Intl.NumberFormat().resolvedOptions().numberingSystem,Tne=Mk==="arab"||!Pne(Mk)?"latn":Mk,k2e=t=>Pne(t)?t:Tne;function eq(t,e="cldr"){const i=e==="cldr"?A2e:M2e;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(s,n,r)=>`${n}-${r.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),vg))):vg}function olt(t){switch(t){case"it-CH":return"de-CH";case"bs":return"bs-Cyrl";default:return t}}const QS=new Set;function Pl(t){N2e(t),QS.size===0&&(gT==null||gT.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),QS.add(t)}function N2e(t){t.effectiveLocale=$2e(t)}function Tl(t){QS.delete(t),QS.size===0&&gT.disconnect()}const gT=wl("mutation",t=>{t.forEach(e=>{const i=e.target;QS.forEach(s=>{if(!Jbe(i,s.el))return;const r=cm(s.el,"[lang]");if(!r){s.effectiveLocale=vg;return}const o=r.lang;s.effectiveLocale=r.hasAttribute("lang")&&o===""?vg:o})})});function $2e(t){var e;return t.el.lang||((e=cm(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||vg}class Ine{constructor(){this.delocalize=e=>this._numberFormatOptions?s9(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?s9(e,i=>Qz(i.trim())?new Vs(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=eq(e==null?void 0:e.locale),e.numberingSystem=k2e(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===vg&&e.numberingSystem===Tne&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,r)=>[n,r])),s=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=s.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?" ":this._actualGroup,this._decimal=s.find(n=>n.type==="decimal").value,this._minusSign=s.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const fY=new Ine;let Aw,pY;function O2e(t={}){return Object.entries(t).sort(([e],[i])=>e.localeCompare(i)).map(e=>`${e[0]}-${e[1]}`).flat().join(":")}function alt(t,e){t=eq(t),Aw||(Aw=new Map),pY!==t&&(Aw.clear(),pY=t);const i=O2e(e),s=Aw.get(i);if(s)return s;const n=new Intl.DateTimeFormat(t,e);return Aw.set(i,n),n}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const l$=(t,e,i)=>Math.max(e,Math.min(t,i)),R2e=new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),c$=t=>{const e=(""+t).match(R2e);return!e||parseInt(e[1])===0?0:Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0))};function llt(t){return c$(t)>0&&t>0?parseFloat(`0.${t.toString().split(".")[1]}`):t}function clt(t,e,i,s,n){return(t-e)*(n-s)/(i-e)+s}function ult(t,e,i){return t<i?-1:t>e-i?1:0}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const $P={};async function L2e(t,e){const i=`${e}_${t}`;return $P[i]||($P[i]=fetch(Uz(`./assets/${e}/t9n/messages_${t}.json`)).then(s=>(s.ok||mY(),s.json())).catch(()=>mY())),$P[i]}function mY(){throw new Error("could not fetch component message bundle")}function tq(t){t.messages={...t.defaultMessages,...t.messageOverrides}}function F2e(){}async function Gc(t){t.defaultMessages=await Mne(t,t.effectiveLocale),tq(t)}async function Mne(t,e){if(!Ef())return{};const{el:i}=t,n=i.tagName.toLowerCase().replace("calcite-","");return L2e(eq(e,"t9n"),n)}async function jc(t,e){t.defaultMessages=await Mne(t,e),tq(t)}function Bc(t){t.onMessagesChange=z2e}function Hc(t){t.onMessagesChange=F2e}function z2e(){tq(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Qm={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",floatContent:"float--content",contentOverlay:"content--overlay",separator:"separator",floatAll:"float-all"},gY={actionBar:"action-bar",header:"header"},q2e=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-internal-shell-panel-shadow-block-start:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-block-end:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-start:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical][width-scale=s]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=s][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=m][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][width-scale=l][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-min-height:var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}.container.float-all{margin-block:0.5rem;margin-inline:0.5rem}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem))}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:0.5rem}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]:not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,V2e=q2e,G2e=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalShellPanelResizeStart=$t(this,"calciteInternalShellPanelResizeStart",6),this.calciteInternalShellPanelResizeEnd=$t(this,"calciteInternalShellPanelResizeEnd",6),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:s,step:n,stepMultiplier:r,layout:o,contentWidthMin:l,contentWidthMax:u,initialContentWidth:f,initialContentHeight:y,contentHeightMin:_,contentHeightMax:x,position:S}=this,P=n*r;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const k=Gp(s),$=["ArrowLeft","ArrowRight"],F=["ArrowDown","ArrowUp"],G=k==="rtl"&&$.includes(i)?-1:1;if(o==="horizontal"?S==="end"?i===F[1]||i===$[0]:i===F[0]||i===$[1]:i===F[1]||(S==="end"?i===$[0]:i===$[1])){const W=e.shiftKey?P:n;return o==="horizontal"?y+G*W:f+G*W}if(o==="horizontal"?S==="end"?i===F[0]||i===$[0]:i===F[1]||i===$[1]:i===F[0]||(S==="end"?i===$[1]:i===$[0])){const W=e.shiftKey?P:n;return o==="horizontal"?y-G*W:f-G*W}return i==="Home"&&o==="horizontal"&&typeof _=="number"?_:i==="Home"&&o==="vertical"&&typeof l=="number"?l:i==="End"&&o==="horizontal"&&typeof x=="number"?x:i==="End"&&o==="vertical"&&typeof u=="number"?u:i==="PageDown"?o==="horizontal"?y-P:f-P:i==="PageUp"?o==="horizontal"?y+P:f+P:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:s,initialContentWidth:n,initialContentHeight:r,position:o,initialClientX:l,initialClientY:u}=this,f=s==="horizontal"?e.clientY-u:e.clientX-l,y=s==="vertical"&&Gp(i)==="rtl"?-1:1,_=o==="end"?-y*f:y*f;s==="horizontal"?this.setContentHeight(r+_):this.setContentWidth(n+_)},this.separatorPointerUp=e=>{fS(e)&&(this.calciteInternalShellPanelResizeEnd.emit(),e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!fS(e))return;this.calciteInternalShellPanelResizeStart.emit(),e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=Nu(e).filter(s=>s==null?void 0:s.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=Is(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float-content":(this.displayMode==="float-content"||this.displayMode==="float")&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float-content"||e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){oC(this),Pl(this),Bc(this)}async componentWillLoad(){await Gc(this)}disconnectedCallback(){aC(this),this.disconnectSeparator(),Tl(this),Hc(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){jc(this,this.effectiveLocale)}renderHeader(){return Ae("div",{class:Qm.contentHeader,hidden:!this.hasHeader,key:"header"},Ae("slot",{name:gY.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:s,initialContentHeight:n,contentWidth:r,contentWidthMax:o,contentWidthMin:l,contentHeight:u,contentHeightMax:f,contentHeightMin:y,resizable:_,layout:x,displayMode:S}=this,P=Gp(this.el),A=S!=="float-content"&&S!=="float"&&_,k=A?x==="horizontal"?u?{height:`${u}px`}:null:r?{width:`${r}px`}:null:null,$=!e&&A?Ae("div",{"aria-label":this.messages.resize,"aria-orientation":x==="horizontal"?"vertical":"horizontal","aria-valuemax":x=="horizontal"?f:o,"aria-valuemin":x=="horizontal"?y:l,"aria-valuenow":x=="horizontal"?u??n:r??s,class:Qm.separator,key:"separator",onKeyDown:this.separatorKeyDown,ref:this.connectSeparator,role:"separator",tabIndex:0,"touch-action":"none"}):null,F=()=>x==="horizontal"?i==="start"?Bl.calciteAnimateInDown:Bl.calciteAnimateInUp:P==="ltr"&&i==="end"||P==="rtl"&&i==="start"?Bl.calciteAnimateInLeft:Bl.calciteAnimateInRight,G=Ae("div",{class:{[Bl.rtl]:P==="rtl",[Qm.content]:!0,[Qm.contentOverlay]:S==="overlay",[Qm.floatContent]:S==="float-content"||S==="float",[Bl.calciteAnimate]:S==="overlay",[F()]:S==="overlay"},hidden:e,key:"content",ref:this.storeContentEl,style:k},this.renderHeader(),Ae("div",{class:Qm.contentBody},Ae("slot",null)),$),B=[Ae("slot",{key:"action-bar",name:gY.actionBar,onSlotchange:this.handleActionBarSlotChange}),G];return i==="end"&&B.reverse(),Ae("div",{class:{[Qm.container]:!0,[Qm.floatAll]:S==="float-all"}},B)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:s}=this,n=Math.round(e);this.contentWidth=typeof i=="number"&&typeof s=="number"?l$(n,s,i):n}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),Io(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:s}=this,n=Math.round(e);this.contentHeight=typeof i=="number"&&typeof s=="number"?l$(n,s,i):n}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),s=parseInt(e.getPropertyValue("min-width"),10),n=parseInt(e.getPropertyValue("width"),10);typeof n=="number"&&!isNaN(n)&&(this.initialContentWidth=n),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof s=="number"&&!isNaN(s)&&(this.contentWidthMin=s)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),s=parseInt(e.getPropertyValue("min-height"),10),n=parseInt(e.getPropertyValue("height"),10);typeof n=="number"&&!isNaN(n)&&(this.initialContentHeight=n),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof s=="number"&&!isNaN(s)&&(this.contentHeightMin=s)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return V2e}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function j2e(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,G2e);break}})}j2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const B2e=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function H2e(t){return`${t.split("-").map((s,n)=>n===0?s:`${s[0].toUpperCase()}${s.slice(1)}`).join("")}${B2e.includes(t)?"Input":"Change"}`}const u$="hidden-form-input";function iq(t){return"checked"in t}const h$=new WeakMap,sq=new WeakSet;function U2e(t,e){if(cm(e.parentElement,"[form]"))return!0;const s="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(s,r=>{n=r.composedPath().some(o=>sq.has(o)),r.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(s,{bubbles:!0,composed:!0})),n}function Y2e(t,{status:e,message:i,icon:s}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=s),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function Ane(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?cm(t,"calcite-radio-button-group"):t}const X2e=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function yY(t){var l;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,s=Ane(e==null?void 0:e.parentElement);if(!s)return;const n=(l=s==null?void 0:s.nodeName)==null?void 0:l.toLowerCase(),r=n==null?void 0:n.split("-");if(r.length<2||r[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in s&&(s.validity=e==null?void 0:e.validity),s.dispatchEvent(X2e),Y2e(s,{message:i,icon:!0,status:"invalid"});const o=H2e(n);s.addEventListener(o,()=>{"status"in s&&(s.status="idle"),"validationIcon"in s&&!s.validationIcon&&(s.validationIcon=!1),"validationMessage"in s&&s.validationMessage===i&&(s.validationMessage=""),"validity"in s&&(s.validity=e==null?void 0:e.validity)},{once:!0})}function W2e(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",yY,!0),e.requestSubmit(),e.removeEventListener("invalid",yY,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const s of i)if(s!=null&&s.validationMessage){s==null||s.setFocus();break}}),!0):!1}function Z2e(t){var e;(e=t.formEl)==null||e.reset()}function K2e(t){const{el:e,value:i}=t,s=Dne(t);if(!s||U2e(s,e))return;t.formEl=s,t.defaultValue=i,iq(t)&&(t.defaultChecked=t.checked);const n=(t.onFormReset||J2e).bind(t);s.addEventListener("reset",n),h$.set(t.el,n),sq.add(e)}function Dne(t){const{el:e,form:i}=t;return i?lC(e,{id:i}):cm(e,"form")}function J2e(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),iq(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function Q2e(t){const{el:e,formEl:i}=t;if(!i)return;const s=h$.get(e);i.removeEventListener("reset",s),h$.delete(e),t.formEl=null,sq.delete(e)}function exe(t,e){t.defaultValue=e}const txe="calciteInternalHiddenInputInput",kne=t=>{t.target.dispatchEvent(new CustomEvent(txe,{bubbles:!0}))},vY=t=>t.removeEventListener("input",kne);function ixe(t){const{el:e,formEl:i,name:s,value:n}=t,{ownerDocument:r}=e,o=e.querySelectorAll(`input[slot="${u$}"]`);if(!i||!s){o.forEach(_=>{vY(_),_.remove()});return}const l=Array.isArray(n)?n:[n],u=[],f=new Set;o.forEach(_=>{const x=l.find(S=>S==_.value);x!=null?(f.add(x),_Y(t,_,x)):u.push(_)});let y;l.forEach(_=>{if(f.has(_))return;let x=u.pop();x||(x=r.createElement("input"),x.slot=u$),y||(y=r.createDocumentFragment()),y.append(x),x.addEventListener("input",kne),_Y(t,x,_)}),y&&e.append(y),u.forEach(_=>{vY(_),_.remove()})}function _Y(t,e,i){var f;const{defaultValue:s,disabled:n,form:r,name:o,required:l}=t;e.defaultValue=s,e.disabled=n,e.name=o,e.required=l,e.tabIndex=-1,r?e.setAttribute("form",r):e.removeAttribute("form"),iq(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(f=t.syncHiddenFormInput)==null||f.call(t,e);const u=Ane(t.el);if(u&&"validity"in u)for(const y in{...e==null?void 0:e.validity})u.validity[y]=e.validity[y]}const sxe=({component:t})=>(ixe(t),Ae("slot",{name:u$}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function nxe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Nne(t){t.target.disabled&&t.preventDefault()}const $ne=["mousedown","mouseup","click"];function One(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const n9={capture:!0};function Cf(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),rxe(t);return}axe(t),t.el.removeAttribute("aria-disabled")}function rxe(t){t.el.click=nxe,oxe(t.el)}function oxe(t){t.addEventListener("pointerdown",Nne,n9),$ne.forEach(e=>t.addEventListener(e,One,n9))}function axe(t){delete t.el.click,lxe(t.el)}function lxe(t){t.removeEventListener("pointerdown",Nne,n9),$ne.forEach(e=>t.removeEventListener(e,One,n9))}const cxe={container:"interaction-container"},Pf=({disabled:t},e)=>Ae("div",{class:cxe.container,inert:t},...e);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Xa(t){return t==="l"?"m":"s"}async function Rne(t){await(uxe(t)?t.componentOnReady():new Promise(e=>requestAnimationFrame(()=>e())))}function uxe(t){return typeof t.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Lne="calciteInternalLabelClick",rM="calciteInternalLabelConnected",r9="calciteInternalLabelDisconnected",bY="calcite-label",d2=new WeakMap,pS=new WeakMap,eE=new WeakMap,o9=new WeakMap,Ry=new Set,hxe=t=>{const{id:e}=t,i=e&&lC(t,{selector:`${bY}[for="${e}"]`});if(i)return i;const s=cm(t,bY);return!s||dxe(s,t)?null:s};function dxe(t,e){let i;const s="custom-element-ancestor-check",n=o=>{o.stopImmediatePropagation();const l=o.composedPath();i=l.slice(l.indexOf(e),l.indexOf(t))};return t.addEventListener(s,n,{once:!0}),e.dispatchEvent(new CustomEvent(s,{composed:!0,bubbles:!0})),t.removeEventListener(s,n),i.filter(o=>o!==e&&o!==t).filter(o=>{var l;return(l=o.tagName)==null?void 0:l.includes("-")}).length>0}function oM(t){if(!t)return;const e=hxe(t.el);if(pS.has(e)&&e===t.labelEl||!e&&Ry.has(t))return;const i=pxe.bind(t);if(e){t.labelEl=e;const s=d2.get(e)||[];s.push(t),d2.set(e,s.sort(zne)),pS.has(t.labelEl)||(pS.set(t.labelEl,xY),t.labelEl.addEventListener(Lne,xY)),Ry.delete(t),document.removeEventListener(rM,eE.get(t)),o9.set(t,i),document.addEventListener(r9,i)}else Ry.has(t)||(i(),document.removeEventListener(r9,o9.get(t)))}function Fne(t){if(!t||(Ry.delete(t),document.removeEventListener(rM,eE.get(t)),document.removeEventListener(r9,o9.get(t)),eE.delete(t),o9.delete(t),!t.labelEl))return;const e=d2.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(Lne,pS.get(t.labelEl)),pS.delete(t.labelEl)),d2.set(t.labelEl,e.filter(i=>i!==t).sort(zne)),t.labelEl=null}function zne(t,e){return d2e(t.el,e.el)?-1:1}function qne(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function xY(t){const e=t.detail.sourceEvent.target,i=d2.get(this),s=i.find(o=>o.el===e);if(i.includes(s))return;const r=i[0];r.disabled||r.onLabelClick(t)}function fxe(){Ry.has(this)&&oM(this)}function pxe(){Ry.add(this);const t=eE.get(this)||fxe.bind(this);eE.set(this,t),document.addEventListener(rM,t)}async function mxe(t){var s;if(await Rne(t),d2.has(t))return;const i=(s=t.ownerDocument)==null?void 0:s.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of Ry)if(n.el===i){oM(n);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Vne=new WeakMap,Gne=new WeakMap;function ao(t){Gne.set(t,new Promise(e=>Vne.set(t,e)))}function lo(t){Vne.get(t)()}function gxe(t){return Gne.get(t)}async function co(t){if(await gxe(t),!!Ef())return Io(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const yxe={flipRtl:"flip-rtl"},jne={},Ak={},Bne={s:16,m:24,l:32};function Hne({icon:t,scale:e}){const i=Bne[e],s=bxe(t),n=s.charAt(s.length-1)==="F";return`${n?s.substring(0,s.length-1):s}${i}${n?"F":""}`}async function vxe(t){const e=Hne(t),i=Une(e);if(i)return i;Ak[e]||(Ak[e]=fetch(Uz(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(console.error(`"${e}" is not a valid calcite-ui-icon name`),"")));const s=await Ak[e];return jne[e]=s,s}function _xe(t){return Une(Hne(t))}function Une(t){return jne[t]}function bxe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((r,o)=>r.replace(n,function(u,f){return o===0&&f===0?u:u.toUpperCase()})).join("")}return e?`i${t}`:t}const xxe=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",wxe=xxe,Sxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}render(){const{el:e,flipRtl:i,pathData:s,scale:n,textLabel:r}=this,o=Gp(e),l=Bne[n],u=!!r,f=[].concat(s||"");return Ae(hr,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":br(!u),"aria-label":u?r:null,role:u?"img":null},Ae("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[yxe.flipRtl]:o==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${l} ${l}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},f.map(y=>typeof y=="string"?Ae("path",{d:y}):Ae("path",{d:y.d,opacity:"opacity"in y?y.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:s}=this;if(!Ef()||!e||!s)return;const n={icon:e,scale:i},r=_xe(n)||await vxe(n);e===this.icon&&(this.pathData=r)}waitUntilVisible(e){if(this.intersectionObserver=wl("intersection",i=>{i.forEach(s=>{s.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return wxe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function uo(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,Sxe);break}})}uo();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const B_={loader:"loader",loaderParts:"loader__svgs",loaderPart:"loader__svg",loaderPartId:t=>`${B_.loaderPart}--${t}`,loaderText:"loader__text",loaderPercentage:"loader__percentage"},Exe='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem);will-change:contents}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--3);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem;--calcite-internal-loader-value-line-height:0.625rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem;--calcite-internal-loader-value-line-height:1.375rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem;--calcite-internal-loader-value-line-height:1.71875rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);line-height:var(--calcite-internal-loader-value-line-height);align-self:center}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise;display:flex}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}:host([type=determinate]),:host([type=determinate-value]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs,:host([type=determinate-value]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3,:host([type=determinate-value]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',Cxe=Exe,Pxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.formatValue=()=>this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100),this.complete=!1,this.inline=!1,this.label=void 0,this.scale="m",this.type="indeterminate",this.value=0,this.text="",this.effectiveLocale=""}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}connectedCallback(){Pl(this),this.updateFormatter()}disconnectedCallback(){Tl(this)}componentWillLoad(){requestAnimationFrame(()=>this.valueChangeHandler())}render(){const{el:e,inline:i,label:s,scale:n,text:r,type:o,value:l}=this,u=e.id||lm(),f=.45,y=i?this.getInlineSize(n):this.getSize(n),_=y*f,x=`0 0 ${y} ${y}`,S=o.startsWith("determinate"),P=2*_*Math.PI,A=l/100*P,k=P-A,$=Math.floor(l),F={"stroke-dasharray":`${A} ${k}`};return Ae(hr,{key:"8272bdfae9fff51b19ed8fa66197eb93b53feb4c","aria-label":s,"aria-valuemax":S?"100":void 0,"aria-valuemin":S?"0":void 0,"aria-valuenow":S?$.toString():void 0,id:u,role:"progressbar"},Ae("div",{key:"3d410c178af39bb57cc478bdd06c0392f6ba71a3",class:B_.loaderParts},[1,2,3].map(G=>Ae("svg",{"aria-hidden":"true",class:{[B_.loaderPart]:!0,[B_.loaderPartId(G)]:!0},key:G,style:S&&G===3?F:void 0,viewBox:x},Ae("circle",{cx:y/2,cy:y/2,r:_}))),S&&Ae("div",{key:"4ccc633930dee031bf769908d712df39e0677bbb",class:B_.loaderPercentage},this.formatValue())),r&&Ae("div",{key:"6d0d51988bdfafee2a19faed9e14d3bda06d79b5",class:B_.loaderText},r))}formatterPropsChange(){this.updateFormatter()}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.effectiveLocale||(this.formatter=new Intl.NumberFormat(this.effectiveLocale,{style:"percent"}))}get el(){return this}static get watchers(){return{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}}static get style(){return Cxe}},[1,"calcite-loader",{complete:[1540],inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1],effectiveLocale:[32]},void 0,{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}]);function Uc(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,Pxe);break}})}Uc();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cc={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Txe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}:host button span,:host a span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content{margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-color-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-color-status-danger);color:var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-color-status-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-color-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-color-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:transparent;color:var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:transparent;color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,Ixe=Txe,Mxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=wl("mutation",()=>this.updateHasContent()),this.resizeObserver=wl("resize",()=>this.setTooltipText()),this.handleClick=()=>{const{type:e}=this;this.href||(e==="submit"?W2e(this):e==="reset"&&Z2e(this))},this.setTooltipText=()=>{const{contentEl:e}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)},this.setChildEl=e=>{var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.form=void 0,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.effectiveLocale="",this.defaultMessages=void 0,this.tooltipText=void 0}handleGlobalAttributesChanged(){Io(this)}onMessagesChange(){}async connectedCallback(){Pl(this),Bc(this),this.setupTextContentObserver(),oM(this),this.formEl=Dne(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),Fne(this),Tl(this),Hc(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}async componentWillLoad(){ao(this),Ef()&&(this.updateHasContent(),await Gc(this))}componentDidLoad(){lo(this),this.setTooltipText()}componentDidRender(){Cf(this)}render(){const e=this.href?"a":"button",i=e,s=this.loading?Ae("div",{class:cc.buttonLoader},Ae("calcite-loader",{class:this.loading?cc.loadingIn:cc.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,n=!this.iconStart&&!this.iconEnd,r=Ae("calcite-icon",{key:"f1036c0a1bf5740fe63806e3559ea66fac29b726",class:{[cc.icon]:!0,[cc.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Xa(this.scale)}),o=Ae("calcite-icon",{key:"d2c22ecf9ca23426b4c4a3b42d623f35ee988a44",class:{[cc.icon]:!0,[cc.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Xa(this.scale)}),l=Ae("span",{key:"d1803021f5fa106c9e296402ec0a1498ecdf36c7",class:cc.content,ref:u=>this.contentEl=u},Ae("slot",{key:"d2f729c16f9c803ffa109b68d58a22a4383dd426"}));return Ae(Pf,{key:"2757c795d29f812cf11def4df108837b9971dcdb",disabled:this.disabled},Ae(i,{key:"e67a4882c8a0c13d6b5f98bc8c5b53c10ba36e3e","aria-busy":br(this.loading),"aria-expanded":this.el.ariaExpanded?this.el.ariaExpanded:null,"aria-label":this.loading?this.messages.loading:qne(this),"aria-live":"polite",class:{[cc.buttonPadding]:n,[cc.buttonPaddingShrunk]:!n,[cc.contentSlotted]:this.hasContent,[cc.iconStartEmpty]:!this.iconStart,[cc.iconEndEmpty]:!this.iconEnd},disabled:e==="button"?this.disabled:null,download:e==="a"?this.download===!0||this.download===""?"":this.download||null:null,href:e==="a"&&this.href,name:e==="button"&&this.name,onClick:this.handleClick,ref:this.setChildEl,rel:e==="a"&&this.rel,tabIndex:this.disabled?-1:null,target:e==="a"&&this.target,title:this.tooltipText,type:e==="button"&&this.type},s,this.iconStart?r:null,this.hasContent?l:null,this.iconEnd?o:null))}async setFocus(){var e;await co(this),(e=this.childEl)==null||e.focus()}effectiveLocaleChange(){jc(this,this.effectiveLocale)}updateHasContent(){var i,s;const e=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((i=this.el.childNodes[0])==null?void 0:i.nodeName)==="#text"?((s=this.el.textContent)==null?void 0:s.trim().length)>0:e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Ixe}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],form:[513],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[513],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],effectiveLocale:[32],defaultMessages:[32],tooltipText:[32],setFocus:[64]},void 0,{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Yne(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,Mxe);break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break}})}Yne();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Axe(t,e,i){const s=e[0]-t[0],n=i[0]-e[0],r=e[1]-t[1],o=i[1]-e[1],l=r/(s||n<0&&0),u=o/(n||s<0&&0),f=(l*n+u*s)/(s+n);return(Math.sign(l)+Math.sign(u))*Math.min(Math.abs(l),Math.abs(u),.5*Math.abs(f))||0}function wY(t,e,i){const s=e[0]-t[0],n=e[1]-t[1];return s?(3*n/s-i)/2:i}function SY(t,e,i,s,n){const[r,o]=t,[l,u]=e,f=(l-r)/3,y=n([r+f,o+f*i]).join(","),_=n([l-f,u-f*s]).join(","),x=n([l,u]).join(",");return`C ${y} ${_} ${x}`}function Dxe({width:t,height:e,min:i,max:s}){const n=s[0]-i[0],r=s[1]-i[1];return o=>{const l=(o[0]-i[0])/n*t,u=e-o[1]/r*e;return[l,u]}}function kxe(t){const[e,i]=t[0],s=[e,i],n=[e,i];return t.reduce(({min:r,max:o},[l,u])=>({min:[Math.min(r[0],l),Math.min(r[1],u)],max:[Math.max(o[0],l),Math.max(o[1],u)]}),{min:s,max:n})}function Nxe({data:t,min:e,max:i,t:s}){if(t.length===0)return"";const[n,r]=s(t[0]),[o,l]=s(e),[u]=s(i);let f,y,_;const x=t.reduce((A,k,$)=>{if(y=t[$-2],_=t[$-1],$>1){const F=Axe(y,_,k),G=f===void 0?wY(y,_,F):f,V=SY(y,_,G,F,s);return f=F,`${A} ${V}`}return A},`M ${o},${l} L ${o},${r} L ${n},${r}`),S=t[t.length-1],P=SY(_,S,f,wY(_,S,f),s);return`${x} ${P} L ${u},${l} Z`}const $xe=":host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0px;display:block;block-size:100%;inline-size:100%;padding:0px}.svg .graph-path--highlight{fill:var(--calcite-color-brand);opacity:0.5}:host([hidden]){display:none}[hidden]{display:none}",Oxe=$xe,Rxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.graphId=`calcite-graph-${lm()}`,this.resizeObserver=wl("resize",()=>Io(this)),this.data=[],this.colorStops=void 0,this.highlightMin=void 0,this.highlightMax=void 0,this.min=void 0,this.max=void 0}connectedCallback(){var e;(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.disconnect()}render(){const{data:e,colorStops:i,el:s,highlightMax:n,highlightMin:r,min:o,max:l}=this,u=this.graphId,{clientHeight:f,clientWidth:y}=s;if(!e||e.length===0)return Ae("svg",{"aria-hidden":"true",class:"svg",height:f,preserveAspectRatio:"none",viewBox:`0 0 ${y} ${f}`,width:y});const{min:_,max:x}=kxe(e);let S=_,P=x;(o<_[0]||o>_[0])&&(S=[o,0]),(l>x[0]||l<x[0])&&(P=[l,x[1]]);const A=Dxe({min:S,max:P,width:y,height:f}),[k]=A([r,P[1]]),[$]=A([n,P[1]]),F=Nxe({data:e,min:_,max:x,t:A}),G=i?`url(#linear-gradient-${u})`:void 0;return Ae("svg",{"aria-hidden":"true",class:"svg",height:f,preserveAspectRatio:"none",viewBox:`0 0 ${y} ${f}`,width:y},i?Ae("defs",null,Ae("linearGradient",{id:`linear-gradient-${u}`,x1:"0",x2:"1",y1:"0",y2:"0"},i.map(({offset:V,color:B,opacity:W})=>Ae("stop",{offset:`${V*100}%`,"stop-color":B,"stop-opacity":W})))):null,r!==void 0?[Ae("mask",{height:"100%",id:`${u}1`,width:"100%",x:"0%",y:"0%"},Ae("path",{d:`
            M 0,0
            L ${k-1},0
            L ${k-1},${f}
            L 0,${f}
            Z
          `,fill:"white"})),Ae("mask",{height:"100%",id:`${u}2`,width:"100%",x:"0%",y:"0%"},Ae("path",{d:`
            M ${k+1},0
            L ${$-1},0
            L ${$-1},${f}
            L ${k+1}, ${f}
            Z
          `,fill:"white"})),Ae("mask",{height:"100%",id:`${u}3`,width:"100%",x:"0%",y:"0%"},Ae("path",{d:`
                M ${$+1},0
                L ${y},0
                L ${y},${f}
                L ${$+1}, ${f}
                Z
              `,fill:"white"})),Ae("path",{class:"graph-path",d:F,fill:G,mask:`url(#${u}1)`}),Ae("path",{class:"graph-path--highlight",d:F,fill:G,mask:`url(#${u}2)`}),Ae("path",{class:"graph-path",d:F,fill:G,mask:`url(#${u}3)`})]:Ae("path",{class:"graph-path",d:F,fill:G}))}get el(){return this}static get style(){return Oxe}},[1,"calcite-graph",{data:[16],colorStops:[16],highlightMin:[2,"highlight-min"],highlightMax:[2,"highlight-max"],min:[514],max:[514]}]);function Xne(){if(typeof customElements>"u")return;["calcite-graph"].forEach(e=>{switch(e){case"calcite-graph":customElements.get(e)||customElements.define(e,Rxe);break}})}Xne();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Ds={container:"container",containerRange:"container--range",graph:"graph",handle:"handle",handleExtension:"handle-extension",handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",hyphen:"hyphen",hyphenWrap:"hyphen--wrap",static:"static",thumb:"thumb",thumbActive:"thumb--active",thumbContainer:"thumb-container",thumbMinValue:"thumb--minValue",thumbPrecise:"thumb--precise",thumbValue:"thumb--value",tick:"tick",tickActive:"tick--active",tickLabel:"tick__label",tickMax:"tick__label--max",tickMin:"tick__label--min",ticks:"ticks",track:"track",trackRange:"track__range",transformed:"transformed"},Lxe=250,Fxe=`@charset "UTF-8";:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{--calcite-slider-handle-size:0.625rem;--calcite-slider-handle-extension-height:0.4rem;--calcite-slider-container-font-size:var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size:0.875rem;--calcite-slider-handle-extension-height:0.5rem;--calcite-slider-container-font-size:var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size:1rem;--calcite-slider-handle-extension-height:0.65rem;--calcite-slider-container-font-size:var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);font-size:var(--calcite-slider-container-font-size)}:host{display:block}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * 0.5);padding-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-inline:0;--calcite-slider-full-handle-height:calc(
    var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height)
  );touch-action:none;-webkit-user-select:none;user-select:none}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-color-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset:calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset:calc(var(--calcite-slider-handle-size) * 0.5);position:absolute;margin:0px;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0px;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset), var(--calcite-slider-thumb-y-offset))}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen::after{content:"—";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;background-color:var(--calcite-color-foreground-1);outline-color:transparent;block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease, background-color var(--calcite-internal-animation-timing-medium) ease, box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:0.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-color-text-3)}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-color-brand)}.thumb:focus .handle{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.thumb:focus .handle-extension{background-color:var(--calcite-color-brand)}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1), var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset:-0.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset:50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:0.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:0.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset:-2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset:-2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset:-3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-color-brand);box-shadow:0 0 8px 0 rgba(0, 0, 0, 0.16)}.thumb:hover.thumb--precise::after,.thumb:focus.thumb--precise::after,.thumb--active.thumb--precise::after{background-color:var(--calcite-color-brand)}.track{position:relative;block-size:0.125rem;border-radius:0px;background-color:var(--calcite-color-border-2);transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:0.125rem;background-color:var(--calcite-color-brand)}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range::after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * 0.5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:0.25rem;inline-size:0.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-color-border-input);border-color:var(--calcite-color-foreground-1);inset-block-start:-2px;pointer-events:none;margin-inline-start:calc(-1 * 0.125rem)}.tick--active{background-color:var(--calcite-color-brand)}.tick__label{pointer-events:none;margin-block-start:0.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-3)}.graph{color:var(--calcite-color-foreground-3);block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(0.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * 0.5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,zxe=Fxe;function uc(t){return Array.isArray(t)}const qxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSliderInput=$t(this,"calciteSliderInput",6),this.calciteSliderChange=$t(this,"calciteSliderChange",6),this.handleKeyDown=e=>{const i=this.shouldMirror(),{activeProp:s,max:n,min:r,pageStep:o,step:l}=this,u=this[s],{key:f}=e;if(cC(f)){e.preventDefault();return}let y;if(f==="ArrowUp"||f==="ArrowRight"?y=u+l*(i&&f==="ArrowRight"?-1:1):f==="ArrowDown"||f==="ArrowLeft"?y=u-l*(i&&f==="ArrowLeft"?-1:1):f==="PageUp"?o&&(y=u+o):f==="PageDown"?o&&(y=u-o):f==="Home"?y=r:f==="End"&&(y=n),isNaN(y))return;e.preventDefault();const _=Number(y.toFixed(c$(l)));this.setValue({[s]:this.clamp(_,s)})},this.activeProp="value",this.guid=`calcite-slider-${lm()}`,this.onThumbBlur=()=>{this.activeProp=null},this.onThumbFocus=e=>{const i=e.currentTarget;this.activeProp=i.getAttribute("data-value-prop")},this.onThumbPointerDown=e=>{const i=e.currentTarget;this.pointerDownDragStart(e,i.getAttribute("data-value-prop"))},this.onTrackPointerDown=e=>{this.pointerDownDragStart(e,"minMaxValue")},this.dragUpdate=e=>{if(!this.disabled&&(e.preventDefault(),this.dragProp)){const i=this.mapToRange(e.clientX||e.pageX);if(uc(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const s=i-this.minValueDragRange,n=i+this.maxValueDragRange;n<=this.max&&s>=this.min&&n-s===this.minMaxValueRange&&this.setValue({minValue:this.clamp(s,"minValue"),maxValue:this.clamp(n,"maxValue")})}else this.minValueDragRange=i-this.minValue,this.maxValueDragRange=this.maxValue-i,this.minMaxValueRange=this.maxValue-this.minValue;else this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}},this.pointerUpDragEnd=e=>{this.disabled||!fS(e)||this.dragEnd(e)},this.dragEnd=e=>{this.disabled||(this.removeDragListeners(),this.focusActiveHandle(e.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null)},this.storeTrackRef=e=>{this.trackEl=e},this.storeThumbRef=e=>{if(!e)return;e.getAttribute("data-value-prop")==="minValue"?this.minHandle=e:this.maxHandle=e},this.formatValue=e=>(fY.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},fY.localize(e.toString())),this.disabled=!1,this.fillPlacement="start",this.form=void 0,this.groupSeparator=!1,this.hasHistogram=!1,this.histogram=void 0,this.histogramStops=void 0,this.labelHandles=!1,this.labelFormatter=void 0,this.labelTicks=!1,this.max=100,this.maxLabel=void 0,this.maxValue=void 0,this.min=0,this.minLabel=void 0,this.minValue=void 0,this.mirrored=!1,this.name=void 0,this.numberingSystem=void 0,this.pageStep=void 0,this.precise=!1,this.required=!1,this.snap=!1,this.step=1,this.ticks=void 0,this.value=0,this.scale="m",this.effectiveLocale="",this.minMaxValueRange=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.tickValues=[]}histogramWatcher(e){this.hasHistogram=!!e}ticksWatcher(){this.tickValues=this.generateTickValues()}valueHandler(){this.setMinMaxFromValue()}minMaxValueHandler(){this.setValueFromMinMax()}connectedCallback(){Pl(this),this.setMinMaxFromValue(),this.setValueFromMinMax(),oM(this),K2e(this)}disconnectedCallback(){Fne(this),Q2e(this),Tl(this),this.removeDragListeners()}componentWillLoad(){ao(this),uc(this.value)||(this.value=this.snap?this.getClosestStep(this.value):this.clamp(this.value)),this.ticksWatcher(),this.histogramWatcher(this.histogram),exe(this,this.value)}componentDidLoad(){lo(this)}componentDidRender(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),uc(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),Cf(this)}render(){const e=this.el.id||this.guid,i=uc(this.value)?this.maxValue:this.value,s=this.minValue||this.min,n=this.shouldUseMinValue(),r=this.getUnitInterval(n?this.minValue:s)*100,o=this.getUnitInterval(i)*100,l=this.shouldMirror(),u=uc(this.value),f=this.buildThumbType("max"),y=this.renderThumb({type:f,thumbPlacement:f.includes("histogram")?"below":"above",maxInterval:o,minInterval:r,mirror:l}),_=this.buildThumbType("min"),x=u&&this.renderThumb({type:_,thumbPlacement:_.includes("histogram")||_.includes("precise")?"below":"above",maxInterval:o,minInterval:r,mirror:l}),S=u?"start":this.fillPlacement,P=S==="none"?{left:"unset",right:"unset"}:S==="end"?{left:`${l?r:o}%`,right:`${l?o:r}%`}:{left:`${l?100-o:r}%`,right:`${l?r:100-o}%`};return Ae(hr,{key:"dee9376120224b51dfa12f3e87fbdce4a481a1ed",id:e,onKeyDown:this.handleKeyDown,onTouchStart:this.handleTouchStart},Ae(Pf,{key:"65bca4d477d57ced846ef97b466917b6d7fc2f21",disabled:this.disabled},Ae("div",{key:"99dd57b50ded2302ca1d255708d9e4bd90de3ecb","aria-label":qne(this),class:{[Ds.container]:!0,[Ds.containerRange]:u,[`scale--${this.scale}`]:!0}},this.renderGraph(),Ae("div",{key:"47647c0d347232a0ddb384333b15860a0264aefa",class:Ds.track,ref:this.storeTrackRef},Ae("div",{key:"3dc176871f6245f2dde77a016ddc747ad9571d3d",class:Ds.trackRange,onPointerDown:this.onTrackPointerDown,style:P}),Ae("div",{key:"0c08b977678d6ac7e8b9944157e51948969a5dc5",class:Ds.ticks},this.tickValues.map(A=>{const k=`${this.getUnitInterval(A)*100}%`;let $=!1;if(S==="start"||S==="end")if(n)$=A>=this.minValue&&A<=this.maxValue;else{const F=S==="start"?s:i,G=S==="start"?i:this.max;$=A>=F&&A<=G}return Ae("span",{class:{[Ds.tick]:!0,[Ds.tickActive]:$},style:{left:l?"":k,right:l?k:""}},this.renderTickLabel(A))}))),Ae("div",{key:"51996cb05142dbeec20093ca12b017adee23f293",class:Ds.thumbContainer},x,y,Ae(sxe,{key:"6fd5c00374205d47e226a417674264417323a5c3",component:this})))))}renderThumb({type:e,mirror:i,thumbPlacement:s,minInterval:n,maxInterval:r}){const o=e.includes("labeled"),l=e.includes("precise"),u=e.includes("min"),f=uc(this.value),y=u?this.minValue:f?this.maxValue:this.value,_=u?"minValue":f?"maxValue":"value",x=u?this.minLabel:f?this.maxLabel:this.minLabel,S=u?this.minValue:y,P=_==="minValue"?this.internalLabelFormatter(this.minValue,"min"):_==="maxValue"?this.internalLabelFormatter(this.maxValue,"max"):this.internalLabelFormatter(y,"value"),A=u?{left:`${i?100-n:n}%`}:{right:`${i?r:100-r}%`},k=`${Ds.handleLabel} ${u?Ds.handleLabelMinValue:Ds.handleLabelValue}`,F=[...o?[Ae("span",{"aria-hidden":"true",class:k},P),Ae("span",{"aria-hidden":"true",class:`${k} ${Ds.static}`},P),Ae("span",{"aria-hidden":"true",class:`${k} ${Ds.transformed}`},P)]:[],Ae("div",{class:Ds.handle}),l&&Ae("div",{class:Ds.handleExtension})];return s==="below"&&F.reverse(),Ae("div",{"aria-label":x,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":S,class:{[Ds.thumb]:!0,[Ds.thumbValue]:!u,[Ds.thumbActive]:this.lastDragProp!=="minMaxValue"&&this.dragProp===_,[Ds.thumbPrecise]:l,[Ds.thumbMinValue]:u},"data-value-prop":_,key:e,onBlur:this.onThumbBlur,onFocus:this.onThumbFocus,onPointerDown:this.onThumbPointerDown,ref:this.storeThumbRef,role:"slider",style:A,tabIndex:0},F)}renderGraph(){return this.histogram?Ae("calcite-graph",{class:Ds.graph,colorStops:this.histogramStops,data:this.histogram,highlightMax:uc(this.value)?this.maxValue:this.value,highlightMin:uc(this.value)?this.minValue:this.min,max:this.max,min:this.min}):null}renderTickLabel(e){const{hasHistogram:i,labelHandles:s,labelTicks:n,max:r,min:o,precise:l,value:u}=this,f=uc(u),y=e===o,_=e===r,x=y||_;return n&&(!i&&(x||!l||!f)||i&&(x||!l&&!s))?Ae("span",{class:{[Ds.tickLabel]:!0,[Ds.tickMin]:y,[Ds.tickMax]:_}},this.internalLabelFormatter(e,"tick")):null}pointerDownHandler(e){if(this.disabled||!fS(e))return;const i=e.clientX||e.pageX,s=this.mapToRange(i);let n="value";uc(this.value)&&(s>=this.minValue&&s<=this.maxValue&&this.lastDragProp==="minMaxValue"?n="minMaxValue":n=Math.abs(this.maxValue-s)<Math.abs(this.minValue-s)||s>=this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[n],this.dragStart(n),this.el.shadowRoot.querySelector(`.${Ds.thumb}:active`)||this.setValue({[n]:this.clamp(s,n)}),this.focusActiveHandle(i)}handleTouchStart(e){e.preventDefault()}async setFocus(){await co(this);const e=this.minHandle?this.minHandle:this.maxHandle;e==null||e.focus()}buildThumbType(e){const i=[e];return this.labelHandles&&i.push("labeled"),this.precise&&i.push("precise"),this.hasHistogram&&i.push("histogram"),i.join("-")}setValueFromMinMax(){const{minValue:e,maxValue:i}=this;typeof e=="number"&&typeof i=="number"&&(this.value=[e,i])}setMinMaxFromValue(){const{value:e}=this;uc(e)&&(this.minValue=e[0],this.maxValue=e[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return uc(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}getTickDensity(){const e=(this.max-this.min)/this.ticks/Lxe;return e<1?1:e}generateTickValues(){const e=this.ticks??0;if(e<=0)return[];const i=[this.min],s=this.getTickDensity(),n=e*s;let r=this.min;for(;r<this.max;)r+=n,i.push(Math.min(r,this.max));return i.includes(this.max)||i.push(this.max),i}pointerDownDragStart(e,i){fS(e)&&this.dragStart(i)}dragStart(e){this.dragProp=e,this.lastDragProp=this.dragProp,this.activeProp=e,window.addEventListener("pointermove",this.dragUpdate),window.addEventListener("pointerup",this.pointerUpDragEnd),window.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(e){this.dragProp==="minValue"?this.minHandle.focus():this.dragProp==="maxValue"||this.dragProp==="value"?this.maxHandle.focus():this.dragProp==="minMaxValue"&&this.getClosestHandle(e).focus()}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit()}removeDragListeners(){window.removeEventListener("pointermove",this.dragUpdate),window.removeEventListener("pointerup",this.pointerUpDragEnd),window.removeEventListener("pointercancel",this.dragEnd)}setValue(e){let i;if(Object.keys(e).forEach(n=>{const r=e[n];i||(i=this[n]!==r),this[n]=r}),!i)return;this.dragProp||this.emitChange(),this.emitInput()}clamp(e,i){return e=l$(e,this.min,this.max),i==="maxValue"&&(e=Math.max(e,this.minValue)),i==="minValue"&&(e=Math.min(e,this.maxValue)),e}mapToRange(e){const i=this.max-this.min,{left:s,width:n}=this.trackEl.getBoundingClientRect(),r=(e-s)/n,o=this.shouldMirror(),l=this.clamp(this.min+i*(o?1-r:r)),u=Number(l.toFixed(c$(this.step)));return this.snap&&this.step?this.getClosestStep(u):u}getClosestStep(e){const{max:i,min:s,step:n}=this,r=new Vs(`${Math.floor((e-s)/n)}`).multiply(`${n}`).add(`${s}`).toString();let o=this.clamp(Number(r));return o>i&&(o-=n),o}getClosestHandle(e){return this.getDistanceX(this.maxHandle,e)>this.getDistanceX(this.minHandle,e)?this.minHandle:this.maxHandle}getDistanceX(e,i){return Math.abs(e.getBoundingClientRect().left-i)}getFontSizeForElement(e){return Number(window.getComputedStyle(e).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(e){e=this.clamp(e);const i=this.max-this.min;return(e-this.min)/i}adjustHostObscuredHandleLabel(e){const i=this.el.shadowRoot.querySelector(`.handle__label--${e}`),s=this.el.shadowRoot.querySelector(`.handle__label--${e}.static`),n=this.el.shadowRoot.querySelector(`.handle__label--${e}.transformed`),r=s.getBoundingClientRect(),o=this.getHostOffset(r.left,r.right);i.style.transform=`translateX(${o}px)`,n.style.transform=`translateX(${o}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:e}=this.el,i=this.shouldMirror(),s=i?"value":"minValue",n=i?"minValue":"value",r=e.querySelector(`.handle__label--${s}`),o=e.querySelector(`.handle__label--${s}.static`),l=e.querySelector(`.handle__label--${s}.transformed`),u=this.getHostOffset(o.getBoundingClientRect().left,o.getBoundingClientRect().right),f=e.querySelector(`.handle__label--${n}`),y=e.querySelector(`.handle__label--${n}.static`),_=e.querySelector(`.handle__label--${n}.transformed`),x=this.getHostOffset(y.getBoundingClientRect().left,y.getBoundingClientRect().right),S=this.getFontSizeForElement(r),P=this.getRangeLabelOverlap(l,_),A=r,k=S/2;if(P>0){if(A.classList.add(Ds.hyphen,Ds.hyphenWrap),x===0&&u===0){let $=P/2-k;$=Math.sign($)===-1?Math.abs($):-$;const F=this.getHostOffset(l.getBoundingClientRect().left+$-k,l.getBoundingClientRect().right+$-k);let G=P/2;const V=this.getHostOffset(_.getBoundingClientRect().left+G,_.getBoundingClientRect().right+G);F!==0&&($+=F,G+=F),V!==0&&($+=V,G+=V),r.style.transform=`translateX(${$}px)`,l.style.transform=`translateX(${$-k}px)`,f.style.transform=`translateX(${G}px)`,_.style.transform=`translateX(${G}px)`}else if(u>0||x>0)r.style.transform=`translateX(${u+k}px)`,f.style.transform=`translateX(${P+x}px)`,_.style.transform=`translateX(${P+x}px)`;else if(u<0||x<0){let $=Math.abs(u)+P-k;$=Math.sign($)===-1?Math.abs($):-$,r.style.transform=`translateX(${$}px)`,l.style.transform=`translateX(${$-k}px)`}}else A.classList.remove(Ds.hyphen,Ds.hyphenWrap),r.style.transform=`translateX(${u}px)`,l.style.transform=`translateX(${u}px)`,f.style.transform=`translateX(${x}px)`,_.style.transform=`translateX(${x}px)`}hideObscuredBoundingTickLabels(){const e=uc(this.value);if(!this.hasHistogram&&!e&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&!this.labelHandles&&this.precise||!this.hasHistogram&&!e&&this.labelHandles&&this.precise||!this.hasHistogram&&e&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const i=this.el.shadowRoot.querySelector(`.${Ds.thumbMinValue}`),s=this.el.shadowRoot.querySelector(`.${Ds.thumbValue}`),n=this.el.shadowRoot.querySelector(`.${Ds.tickMin}`),r=this.el.shadowRoot.querySelector(`.${Ds.tickMax}`);!i&&s&&n&&r&&(n.style.opacity=this.isMinTickLabelObscured(n,s)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,s)?"0":"1"),i&&s&&n&&r&&(n.style.opacity=this.isMinTickLabelObscured(n,i)||this.isMinTickLabelObscured(n,s)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,i)||this.isMaxTickLabelObscured(r,s)&&this.hasHistogram?"0":"1")}getHostOffset(e,i){const s=this.el.getBoundingClientRect(),n=7;return e+n<s.left?s.left-e-n:i-n>s.right?-(i-s.right)+n:0}getRangeLabelOverlap(e,i){const s=e.getBoundingClientRect(),n=i.getBoundingClientRect(),r=this.getFontSizeForElement(e),o=s.right+r-n.left;return Math.max(o,0)}isMinTickLabelObscured(e,i){const s=e.getBoundingClientRect(),n=i.getBoundingClientRect();return hY(s,n)}isMaxTickLabelObscured(e,i){const s=e.getBoundingClientRect(),n=i.getBoundingClientRect();return hY(s,n)}internalLabelFormatter(e,i){const s=this.labelFormatter;if(!s)return this.formatValue(e);const n=s(e,i,this.formatValue);return n??this.formatValue(e)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{histogram:["histogramWatcher"],ticks:["ticksWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}}static get style(){return zxe}},[17,"calcite-slider",{disabled:[516],fillPlacement:[513,"fill-placement"],form:[513],groupSeparator:[516,"group-separator"],hasHistogram:[1540,"has-histogram"],histogram:[16],histogramStops:[16],labelHandles:[516,"label-handles"],labelFormatter:[16],labelTicks:[516,"label-ticks"],max:[514],maxLabel:[1,"max-label"],maxValue:[1026,"max-value"],min:[514],minLabel:[1,"min-label"],minValue:[1026,"min-value"],mirrored:[516],name:[513],numberingSystem:[1,"numbering-system"],pageStep:[514,"page-step"],precise:[516],required:[516],snap:[516],step:[514],ticks:[514],value:[1538],scale:[513],effectiveLocale:[32],minMaxValueRange:[32],minValueDragRange:[32],maxValueDragRange:[32],tickValues:[32],setFocus:[64]},[[1,"pointerdown","pointerDownHandler"]],{histogram:["histogramWatcher"],ticks:["ticksWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}]);function Vxe(){if(typeof customElements>"u")return;["calcite-slider","calcite-graph"].forEach(e=>{switch(e){case"calcite-slider":customElements.get(e)||customElements.define(e,qxe);break;case"calcite-graph":customElements.get(e)||Xne();break}})}Vxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const lh={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},Gxe={tooltip:"tooltip"},jxe=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent}:host,button{border-end-end-radius:var(--calcite-action-corner-radius-end-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-end-start-radius:var(--calcite-action-corner-radius-end-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-end-radius:var(--calcite-action-corner-radius-start-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-start-radius:var(--calcite-action-corner-radius-start-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)))}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-color-text-3));text-align:unset;flex:1 0 auto}.button:hover,.button:focus{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1))}.button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}.icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus{color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1));background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([data-active]) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,Bxe=jxe,Hxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=wl("mutation",()=>Io(this)),this.guid=`calcite-action-${lm()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const s=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];s&&(s.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}connectedCallback(){var e;Pl(this),Bc(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){ao(this),Ef()&&await Gc(this)}componentDidLoad(){lo(this)}disconnectedCallback(){var e;Tl(this),Hc(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){Cf(this)}async setFocus(){var e;await co(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,s={[lh.textContainer]:!0,[lh.textContainerVisible]:i};return e?Ae("div",{class:s,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:s,buttonId:n}=this;return Ae("div",{"aria-labelledby":n,"aria-live":"polite",class:lh.indicatorText,id:s,role:"region"},e?i.indicator:null)}renderIconContainer(){var S;const{loading:e,icon:i,scale:s,el:n,iconFlipRtl:r,indicator:o}=this,l=s==="l"?"l":"m",u=e?Ae("calcite-loader",{inline:!0,label:this.messages.loading,scale:l}):null,f=i?Ae("calcite-icon",{class:{[lh.indicatorWithIcon]:o},flipRtl:r,icon:i,scale:Xa(this.scale)}):null,y=u||f,_=y||((S=n.children)==null?void 0:S.length),x=Ae("div",{class:{[lh.slotContainer]:!0,[lh.slotContainerHidden]:e}},Ae("slot",null));return _?Ae("div",{"aria-hidden":"true",class:lh.iconContainer,key:"icon-container"},y,x):null}render(){const{active:e,compact:i,disabled:s,icon:n,loading:r,textEnabled:o,label:l,text:u,indicator:f,indicatorId:y,buttonId:_,messages:x}=this,S=l||u,P=S?`${S}${f?` (${x.indicator})`:""}`:"",A={[lh.button]:!0,[lh.buttonTextVisible]:o,[lh.buttonCompact]:i};return Ae(hr,{key:"3b459307dcb6f8d373e70cd5c7a45d122565a70e"},Ae(Pf,{key:"3a81f1fb62a66f1dbd608f095ed90f2d47a9daf6",disabled:s},Ae("button",{key:"bb5249babc116d462becd6b9a056ca0d368c6e09","aria-busy":br(r),"aria-controls":f?y:null,"aria-label":P,"aria-pressed":br(e),class:A,disabled:s,id:_,ref:k=>this.buttonEl=k},this.renderIconContainer(),this.renderTextContainer(),!n&&f&&Ae("div",{class:lh.indicatorWithoutIcon,key:"indicator-no-icon"})),Ae("slot",{key:"983989711d64076eca866c1928f9c777331fcba4",name:Gxe.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText()))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Bxe}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function um(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,Hxe);break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break}})}um();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Qf={container:"container",containerContent:"container-content",hasProgress:"progress-bar",hide:"hide",primary:"primary",secondary:"secondary",tertiary:"tertiary"},Aa={logo:"logo",user:"user",progress:"progress",navigationAction:"navigation-action",contentStart:"content-start",contentEnd:"content-end",contentCenter:"content-center",navSecondary:"navigation-secondary",navTertiary:"navigation-tertiary"},Uxe={hamburger:"hamburger"},Yxe=":host([hidden]){display:none}[hidden]{display:none}.container{margin-inline:auto;display:flex;inline-size:100%;flex-direction:column;margin-block:0;margin-inline:auto;background-color:var(--calcite-navigation-background, var(--calcite-color-foreground-1))}.container.primary,.container.secondary,.container.tertiary{border-block-end:1px solid;border-block-end-color:var(--calcite-navigation-border-color, var(--calcite-color-border-3))}.user,.logo{display:flex}.hide{display:none}.primary{block-size:4rem}.secondary{block-size:3rem}.tertiary{block-size:3rem}.container-content{margin-inline:auto;display:flex;block-size:100%;inline-size:100%;margin-block:0;inline-size:var(--calcite-navigation-width, 100%);max-inline-size:100%}.container-content.progress-bar{margin-block-start:0.125rem}slot[name]{display:flex;flex-direction:row}slot[name=navigation-secondary]::slotted(calcite-navigation),slot[name=navigation-tertiary]::slotted(calcite-navigation){inline-size:100%}slot[name=content-start]::slotted(*),slot[name=content-center]::slotted(*),slot[name=content-end]::slotted(*){display:flex;flex-direction:row;align-items:center}slot[name=progress],slot[name=progress] calcite-progress{inset-block-start:0;inset-inline:0}slot[name=content-end]{margin-inline-start:auto}slot[name=content-start]{margin-inline-end:auto}slot[name=content-end],slot[name=logo]~slot[name=user],slot[name=user]:only-child{margin-inline-start:auto}slot[name=content-center]{margin-inline-start:auto;margin-inline-end:auto}slot[name=content-start]~slot[name=content-center]{margin-inline-start:0px}slot[name=content-start]~slot[name=content-end],slot[name=content-center]~slot[name=content-end],slot[name=content-center]~slot[name=user],slot[name=content-end]~slot[name=user]{margin:0px}",Xxe=Yxe,Wxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteNavigationActionSelect=$t(this,"calciteNavigationActionSelect",6),this.actionClickHandler=()=>{this.calciteNavigationActionSelect.emit()},this.handleUserSlotChange=e=>{this.isPrimaryLevel()&&(this.userSlotHasElements=Is(e))},this.handleLogoSlotChange=e=>{this.isPrimaryLevel()&&(this.logoSlotHasElements=Is(e))},this.handleContentStartSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentStartSlotHasElements=Is(e))},this.handleContentEndSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentEndSlotHasElements=Is(e))},this.handleContentCenterSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentCenterSlotHasElements=Is(e))},this.handleSecondarySlotChange=e=>{this.secondarySlotHasElements=Is(e)},this.handleTertiarySlotChange=e=>{this.tertiarySlotHasElements=Is(e)},this.handleMenuActionSlotChange=e=>{this.isPrimaryLevel()&&(this.navigationActionSlotHasElements=Is(e),this.navigationActionSlotHasElements&&(this.navigationAction=!1))},this.handleProgressSlotChange=e=>{this.isPrimaryLevel()&&(this.progressSlotHasElement=Is(e))},this.label=void 0,this.navigationAction=!1,this.logoSlotHasElements=void 0,this.navigationActionSlotHasElements=void 0,this.primaryContentCenterSlotHasElements=void 0,this.primaryContentEndSlotHasElements=void 0,this.primaryContentStartSlotHasElements=void 0,this.progressSlotHasElement=void 0,this.secondarySlotHasElements=void 0,this.tertiarySlotHasElements=void 0,this.userSlotHasElements=void 0}async setFocus(){var e;return await co(this),(e=this.navigationActionEl)==null?void 0:e.setFocus()}componentWillLoad(){ao(this)}componentDidLoad(){lo(this)}isPrimaryLevel(){return this.el.slot!==Aa.navSecondary&&this.el.slot!==Aa.navTertiary}renderMenuAction(){return Ae("slot",{name:Aa.navigationAction,onSlotchange:this.handleMenuActionSlotChange},this.navigationAction&&Ae("calcite-action",{icon:Uxe.hamburger,onClick:this.actionClickHandler,ref:e=>this.navigationActionEl=e,text:this.label}))}render(){const e=this.logoSlotHasElements||this.userSlotHasElements||this.navigationActionSlotHasElements||this.primaryContentCenterSlotHasElements||this.primaryContentEndSlotHasElements||this.primaryContentStartSlotHasElements||this.navigationAction,i=this.el.slot;return Ae(hr,{key:"bf64aa6c6c41bfad6413b58f7897527bb62e1d96"},Ae("div",{key:"8c30501a94d5c41e60291c1f0d1cb2856afa5d62",class:{[Qf.container]:!0,[Qf.secondary]:i===Aa.navSecondary,[Qf.tertiary]:i===Aa.navTertiary,[Qf.primary]:e}},Ae("div",{key:"ef4c088fc24566ca24da9abe6a30903fedcad4d9",class:{[Qf.hide]:!this.progressSlotHasElement,[Aa.progress]:!0}},Ae("slot",{key:"0abc91e366b542e11ee76f13f099ee8b64a55ee0",name:Aa.progress,onSlotchange:this.handleProgressSlotChange})),Ae("div",{key:"689dc16c2ab71944a78f3bfc16c1c16c9159f073",class:{[Qf.containerContent]:!0,[Qf.hasProgress]:this.progressSlotHasElement}},this.renderMenuAction(),Ae("div",{key:"122f9d2d278a0a87dc1774f4933a4bb120410e48",class:{[Qf.hide]:!this.logoSlotHasElements,[Aa.logo]:!0}},Ae("slot",{key:"38f2a0106cb2b3a844b60406c629c0cff4c1b64e",name:Aa.logo,onSlotchange:this.handleLogoSlotChange})),Ae("slot",{key:"af8aa2c6ed65c95c51ebe31314cd1e684beef657",name:Aa.contentStart,onSlotchange:this.handleContentStartSlotChange}),Ae("slot",{key:"989ba0f344ce973ea32b07ee02b04d62068cefb8",name:Aa.contentCenter,onSlotchange:this.handleContentCenterSlotChange}),Ae("slot",{key:"e0fd2d40efb52e8735ca426c1374a3da4882a77d",name:Aa.contentEnd,onSlotchange:this.handleContentEndSlotChange}),Ae("div",{key:"56e905fef7a76fd14be7085f367d6abf8b44a80b",class:{[Qf.hide]:!this.userSlotHasElements,[Aa.user]:!0}},Ae("slot",{key:"e038f1510da60abbb05c1fd8541563334f86f6d5",name:Aa.user,onSlotchange:this.handleUserSlotChange})))),Ae(sM,{key:"3a65439c3774cfb42fa6bc5f12c234a66f8bb314"},Ae("slot",{key:"52e0b810e42911da6dc1ea448026f5756df0206f",name:Aa.navSecondary,onSlotchange:this.handleSecondarySlotChange}),Ae("slot",{key:"97c2666bcd896fa763cb84d6b53285e2e26b51d1",name:Aa.navTertiary,onSlotchange:this.handleTertiarySlotChange})))}get el(){return this}static get style(){return Xxe}},[1,"calcite-navigation",{label:[1],navigationAction:[516,"navigation-action"],logoSlotHasElements:[32],navigationActionSlotHasElements:[32],primaryContentCenterSlotHasElements:[32],primaryContentEndSlotHasElements:[32],primaryContentStartSlotHasElements:[32],progressSlotHasElement:[32],secondarySlotHasElements:[32],tertiarySlotHasElements:[32],userSlotHasElements:[32],setFocus:[64]}]);function Zxe(){if(typeof customElements>"u")return;["calcite-navigation","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-navigation":customElements.get(e)||customElements.define(e,Wxe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break}})}Zxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const nq=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,Ae(i,{class:t.class,key:t.key},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const _d={container:"container",heading:"heading",description:"description",anchor:"anchor",image:"image",standalone:"standalone",icon:"icon"},Kxe=`:host{display:inline-flex;outline:2px solid transparent;outline-offset:2px}.anchor{margin:0px;display:flex;cursor:pointer;align-items:center;justify-content:center;font-size:var(--calcite-font-size-0);line-height:1.25rem;text-decoration-line:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;color:inherit;border-block-end:2px solid transparent}.anchor:hover,.anchor:focus{background-color:var(--calcite-color-foreground-2)}.anchor:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.anchor:active{background-color:var(--calcite-color-foreground-3)}.image,.icon{margin:0px;display:flex;block-size:1.75rem;padding-inline:1rem}.image~.icon{padding-inline-start:0px}.image~.container,.icon~.container{padding-inline-start:0px}:host(:active) .anchor{color:var(--calcite-color-text-1)}:host([active]) .anchor{color:var(--calcite-color-text-1);border-color:var(--calcite-color-brand);--calcite-icon-color:var(--calcite-color-brand)}.container{margin-block-start:0.125rem;display:flex;flex-direction:column;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:1rem;text-align:start}.heading{margin-inline-start:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.standalone{font-size:var(--calcite-font-size-1)}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,Jxe=Kxe,Qxe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=void 0,this.href=void 0,this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.rel=void 0,this.description=void 0,this.target=void 0,this.heading=void 0,this.thumbnail=void 0,this.headingLevel=void 0}async setFocus(){await co(this),this.href&&this.el.focus()}componentWillLoad(){ao(this)}componentDidLoad(){lo(this)}renderIcon(){return Ae("calcite-icon",{class:_d.icon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:"l"})}renderHeaderContent(){const{heading:e,headingLevel:i,description:s}=this,n=e?Ae(nq,{class:{[_d.heading]:!0,[_d.standalone]:!this.description},key:_d.heading,level:i},e):null,r=s?Ae("span",{class:_d.description,key:_d.description},s):null;return n||r?Ae("div",{class:_d.container,key:_d.container},n,r):null}render(){const{thumbnail:e}=this;return Ae(hr,{key:"40dcb76c1c7919fd1a8b6929616d1d507c1e3301"},Ae("a",{key:"7b457d99add3c3d4edbd4478711f9b9c9fb12caf",class:_d.anchor,href:this.href,rel:this.rel,target:this.target},e&&Ae("img",{key:"592aa3cfc2dfa47f9aa603f7edce4521dbaa27ae",alt:this.label||"",class:_d.image,src:e}),this.icon&&this.renderIcon(),this.renderHeaderContent()))}static get delegatesFocus(){return!0}get el(){return this}static get style(){return Jxe}},[17,"calcite-navigation-logo",{active:[516],href:[513],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],rel:[513],description:[1],target:[513],heading:[1],thumbnail:[1],headingLevel:[514,"heading-level"],setFocus:[64]}]);function ewe(){if(typeof customElements>"u")return;["calcite-navigation-logo","calcite-icon"].forEach(e=>{switch(e){case"calcite-navigation-logo":customElements.get(e)||customElements.define(e,Qxe);break;case"calcite-icon":customElements.get(e)||uo();break}})}ewe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var Wne={exports:{}},Zne={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Kne={exports:{}},twe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},iwe=twe,swe=Array.prototype.concat,nwe=Array.prototype.slice,EY=Kne.exports=function(e){for(var i=[],s=0,n=e.length;s<n;s++){var r=e[s];iwe(r)?i=swe.call(i,nwe.call(r)):i.push(r)}return i};EY.wrap=function(t){return function(){return t(EY(arguments))}};var mS=Zne,uC=Kne.exports,Jne=Object.hasOwnProperty,Qne=Object.create(null);for(var Dk in mS)Jne.call(mS,Dk)&&(Qne[mS[Dk]]=Dk);var Pc=Wne.exports={to:{},get:{}};Pc.get=function(t){var e=t.substring(0,3).toLowerCase(),i,s;switch(e){case"hsl":i=Pc.get.hsl(t),s="hsl";break;case"hwb":i=Pc.get.hwb(t),s="hwb";break;default:i=Pc.get.rgb(t),s="rgb";break}return i?{model:s,value:i}:null};Pc.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,i=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,r=/^(\w+)$/,o=[0,0,0,1],l,u,f;if(l=t.match(i)){for(f=l[2],l=l[1],u=0;u<3;u++){var y=u*2;o[u]=parseInt(l.slice(y,y+2),16)}f&&(o[3]=parseInt(f,16)/255)}else if(l=t.match(e)){for(l=l[1],f=l[3],u=0;u<3;u++)o[u]=parseInt(l[u]+l[u],16);f&&(o[3]=parseInt(f+f,16)/255)}else if(l=t.match(s)){for(u=0;u<3;u++)o[u]=parseInt(l[u+1],0);l[4]&&(l[5]?o[3]=parseFloat(l[4])*.01:o[3]=parseFloat(l[4]))}else if(l=t.match(n)){for(u=0;u<3;u++)o[u]=Math.round(parseFloat(l[u+1])*2.55);l[4]&&(l[5]?o[3]=parseFloat(l[4])*.01:o[3]=parseFloat(l[4]))}else return(l=t.match(r))?l[1]==="transparent"?[0,0,0,0]:Jne.call(mS,l[1])?(o=mS[l[1]],o[3]=1,o):null:null;for(u=0;u<3;u++)o[u]=hg(o[u],0,255);return o[3]=hg(o[3],0,1),o};Pc.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var s=parseFloat(i[4]),n=(parseFloat(i[1])%360+360)%360,r=hg(parseFloat(i[2]),0,100),o=hg(parseFloat(i[3]),0,100),l=hg(isNaN(s)?1:s,0,1);return[n,r,o,l]}return null};Pc.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var s=parseFloat(i[4]),n=(parseFloat(i[1])%360+360)%360,r=hg(parseFloat(i[2]),0,100),o=hg(parseFloat(i[3]),0,100),l=hg(isNaN(s)?1:s,0,1);return[n,r,o,l]}return null};Pc.to.hex=function(){var t=uC(arguments);return"#"+OP(t[0])+OP(t[1])+OP(t[2])+(t[3]<1?OP(Math.round(t[3]*255)):"")};Pc.to.rgb=function(){var t=uC(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Pc.to.rgb.percent=function(){var t=uC(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+i+"%, "+s+"%)":"rgba("+e+"%, "+i+"%, "+s+"%, "+t[3]+")"};Pc.to.hsl=function(){var t=uC(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Pc.to.hwb=function(){var t=uC(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Pc.to.keyword=function(t){return Qne[t.slice(0,3)]};function hg(t,e,i){return Math.min(Math.max(e,t),i)}function OP(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const tE=Zne,ere={};for(const t of Object.keys(tE))ere[tE[t]]=t;const li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var tre=li;for(const t of Object.keys(li)){if(!("channels"in li[t]))throw new Error("missing channels property: "+t);if(!("labels"in li[t]))throw new Error("missing channel labels property: "+t);if(li[t].labels.length!==li[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:i}=li[t];delete li[t].channels,delete li[t].labels,Object.defineProperty(li[t],"channels",{value:e}),Object.defineProperty(li[t],"labels",{value:i})}li.rgb.hsl=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.min(e,i,s),r=Math.max(e,i,s),o=r-n;let l,u;r===n?l=0:e===r?l=(i-s)/o:i===r?l=2+(s-e)/o:s===r&&(l=4+(e-i)/o),l=Math.min(l*60,360),l<0&&(l+=360);const f=(n+r)/2;return r===n?u=0:f<=.5?u=o/(r+n):u=o/(2-r-n),[l,u*100,f*100]};li.rgb.hsv=function(t){let e,i,s,n,r;const o=t[0]/255,l=t[1]/255,u=t[2]/255,f=Math.max(o,l,u),y=f-Math.min(o,l,u),_=function(x){return(f-x)/6/y+1/2};return y===0?(n=0,r=0):(r=y/f,e=_(o),i=_(l),s=_(u),o===f?n=s-i:l===f?n=1/3+e-s:u===f&&(n=2/3+i-e),n<0?n+=1:n>1&&(n-=1)),[n*360,r*100,f*100]};li.rgb.hwb=function(t){const e=t[0],i=t[1];let s=t[2];const n=li.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(i,s));return s=1-1/255*Math.max(e,Math.max(i,s)),[n,r*100,s*100]};li.rgb.cmyk=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.min(1-e,1-i,1-s),r=(1-e-n)/(1-n)||0,o=(1-i-n)/(1-n)||0,l=(1-s-n)/(1-n)||0;return[r*100,o*100,l*100,n*100]};function rwe(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}li.rgb.keyword=function(t){const e=ere[t];if(e)return e;let i=1/0,s;for(const n of Object.keys(tE)){const r=tE[n],o=rwe(t,r);o<i&&(i=o,s=n)}return s};li.keyword.rgb=function(t){return tE[t]};li.rgb.xyz=function(t){let e=t[0]/255,i=t[1]/255,s=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const n=e*.4124+i*.3576+s*.1805,r=e*.2126+i*.7152+s*.0722,o=e*.0193+i*.1192+s*.9505;return[n*100,r*100,o*100]};li.rgb.lab=function(t){const e=li.rgb.xyz(t);let i=e[0],s=e[1],n=e[2];i/=95.047,s/=100,n/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const r=116*s-16,o=500*(i-s),l=200*(s-n);return[r,o,l]};li.hsl.rgb=function(t){const e=t[0]/360,i=t[1]/100,s=t[2]/100;let n,r,o;if(i===0)return o=s*255,[o,o,o];s<.5?n=s*(1+i):n=s+i-s*i;const l=2*s-n,u=[0,0,0];for(let f=0;f<3;f++)r=e+1/3*-(f-1),r<0&&r++,r>1&&r--,6*r<1?o=l+(n-l)*6*r:2*r<1?o=n:3*r<2?o=l+(n-l)*(2/3-r)*6:o=l,u[f]=o*255;return u};li.hsl.hsv=function(t){const e=t[0];let i=t[1]/100,s=t[2]/100,n=i;const r=Math.max(s,.01);s*=2,i*=s<=1?s:2-s,n*=r<=1?r:2-r;const o=(s+i)/2,l=s===0?2*n/(r+n):2*i/(s+i);return[e,l*100,o*100]};li.hsv.rgb=function(t){const e=t[0]/60,i=t[1]/100;let s=t[2]/100;const n=Math.floor(e)%6,r=e-Math.floor(e),o=255*s*(1-i),l=255*s*(1-i*r),u=255*s*(1-i*(1-r));switch(s*=255,n){case 0:return[s,u,o];case 1:return[l,s,o];case 2:return[o,s,u];case 3:return[o,l,s];case 4:return[u,o,s];case 5:return[s,o,l]}};li.hsv.hsl=function(t){const e=t[0],i=t[1]/100,s=t[2]/100,n=Math.max(s,.01);let r,o;o=(2-i)*s;const l=(2-i)*n;return r=i*n,r/=l<=1?l:2-l,r=r||0,o/=2,[e,r*100,o*100]};li.hwb.rgb=function(t){const e=t[0]/360;let i=t[1]/100,s=t[2]/100;const n=i+s;let r;n>1&&(i/=n,s/=n);const o=Math.floor(6*e),l=1-s;r=6*e-o,(o&1)!==0&&(r=1-r);const u=i+r*(l-i);let f,y,_;switch(o){default:case 6:case 0:f=l,y=u,_=i;break;case 1:f=u,y=l,_=i;break;case 2:f=i,y=l,_=u;break;case 3:f=i,y=u,_=l;break;case 4:f=u,y=i,_=l;break;case 5:f=l,y=i,_=u;break}return[f*255,y*255,_*255]};li.cmyk.rgb=function(t){const e=t[0]/100,i=t[1]/100,s=t[2]/100,n=t[3]/100,r=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,i*(1-n)+n),l=1-Math.min(1,s*(1-n)+n);return[r*255,o*255,l*255]};li.xyz.rgb=function(t){const e=t[0]/100,i=t[1]/100,s=t[2]/100;let n,r,o;return n=e*3.2406+i*-1.5372+s*-.4986,r=e*-.9689+i*1.8758+s*.0415,o=e*.0557+i*-.204+s*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[n*255,r*255,o*255]};li.xyz.lab=function(t){let e=t[0],i=t[1],s=t[2];e/=95.047,i/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const n=116*i-16,r=500*(e-i),o=200*(i-s);return[n,r,o]};li.lab.xyz=function(t){const e=t[0],i=t[1],s=t[2];let n,r,o;r=(e+16)/116,n=i/500+r,o=r-s/200;const l=r**3,u=n**3,f=o**3;return r=l>.008856?l:(r-16/116)/7.787,n=u>.008856?u:(n-16/116)/7.787,o=f>.008856?f:(o-16/116)/7.787,n*=95.047,r*=100,o*=108.883,[n,r,o]};li.lab.lch=function(t){const e=t[0],i=t[1],s=t[2];let n;n=Math.atan2(s,i)*360/2/Math.PI,n<0&&(n+=360);const o=Math.sqrt(i*i+s*s);return[e,o,n]};li.lch.lab=function(t){const e=t[0],i=t[1],n=t[2]/360*2*Math.PI,r=i*Math.cos(n),o=i*Math.sin(n);return[e,r,o]};li.rgb.ansi16=function(t,e=null){const[i,s,n]=t;let r=e===null?li.rgb.hsv(t)[2]:e;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(n/255)<<2|Math.round(s/255)<<1|Math.round(i/255));return r===2&&(o+=60),o};li.hsv.ansi16=function(t){return li.rgb.ansi16(li.hsv.rgb(t),t[2])};li.rgb.ansi256=function(t){const e=t[0],i=t[1],s=t[2];return e===i&&i===s?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(s/255*5)};li.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const i=(~~(t>50)+1)*.5,s=(e&1)*i*255,n=(e>>1&1)*i*255,r=(e>>2&1)*i*255;return[s,n,r]};li.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let e;const i=Math.floor(t/36)/5*255,s=Math.floor((e=t%36)/6)/5*255,n=e%6/5*255;return[i,s,n]};li.rgb.hex=function(t){const i=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(i.length)+i};li.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let i=e[0];e[0].length===3&&(i=i.split("").map(l=>l+l).join(""));const s=parseInt(i,16),n=s>>16&255,r=s>>8&255,o=s&255;return[n,r,o]};li.rgb.hcg=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.max(Math.max(e,i),s),r=Math.min(Math.min(e,i),s),o=n-r;let l,u;return o<1?l=r/(1-o):l=0,o<=0?u=0:n===e?u=(i-s)/o%6:n===i?u=2+(s-e)/o:u=4+(e-i)/o,u/=6,u%=1,[u*360,o*100,l*100]};li.hsl.hcg=function(t){const e=t[1]/100,i=t[2]/100,s=i<.5?2*e*i:2*e*(1-i);let n=0;return s<1&&(n=(i-.5*s)/(1-s)),[t[0],s*100,n*100]};li.hsv.hcg=function(t){const e=t[1]/100,i=t[2]/100,s=e*i;let n=0;return s<1&&(n=(i-s)/(1-s)),[t[0],s*100,n*100]};li.hcg.rgb=function(t){const e=t[0]/360,i=t[1]/100,s=t[2]/100;if(i===0)return[s*255,s*255,s*255];const n=[0,0,0],r=e%1*6,o=r%1,l=1-o;let u=0;switch(Math.floor(r)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=l,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=l,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=l}return u=(1-i)*s,[(i*n[0]+u)*255,(i*n[1]+u)*255,(i*n[2]+u)*255]};li.hcg.hsv=function(t){const e=t[1]/100,i=t[2]/100,s=e+i*(1-e);let n=0;return s>0&&(n=e/s),[t[0],n*100,s*100]};li.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let n=0;return s>0&&s<.5?n=e/(2*s):s>=.5&&s<1&&(n=e/(2*(1-s))),[t[0],n*100,s*100]};li.hcg.hwb=function(t){const e=t[1]/100,i=t[2]/100,s=e+i*(1-e);return[t[0],(s-e)*100,(1-s)*100]};li.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,n=s-e;let r=0;return n<1&&(r=(s-n)/(1-n)),[t[0],n*100,r*100]};li.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};li.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};li.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};li.gray.hsl=function(t){return[0,0,t[0]]};li.gray.hsv=li.gray.hsl;li.gray.hwb=function(t){return[0,100,t[0]]};li.gray.cmyk=function(t){return[0,0,0,t[0]]};li.gray.lab=function(t){return[t[0],0,0]};li.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(s.length)+s};li.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const a9=tre;function owe(){const t={},e=Object.keys(a9);for(let i=e.length,s=0;s<i;s++)t[e[s]]={distance:-1,parent:null};return t}function awe(t){const e=owe(),i=[t];for(e[t].distance=0;i.length;){const s=i.pop(),n=Object.keys(a9[s]);for(let r=n.length,o=0;o<r;o++){const l=n[o],u=e[l];u.distance===-1&&(u.distance=e[s].distance+1,u.parent=s,i.unshift(l))}}return e}function lwe(t,e){return function(i){return e(t(i))}}function cwe(t,e){const i=[e[t].parent,t];let s=a9[e[t].parent][t],n=e[t].parent;for(;e[n].parent;)i.unshift(e[n].parent),s=lwe(a9[e[n].parent][n],s),n=e[n].parent;return s.conversion=i,s}var uwe=function(t){const e=awe(t),i={},s=Object.keys(e);for(let n=s.length,r=0;r<n;r++){const o=s[r];e[o].parent!==null&&(i[o]=cwe(o,e))}return i};const d$=tre,hwe=uwe,H_={},dwe=Object.keys(d$);function fwe(t){const e=function(...i){const s=i[0];return s==null?s:(s.length>1&&(i=s),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function pwe(t){const e=function(...i){const s=i[0];if(s==null)return s;s.length>1&&(i=s);const n=t(i);if(typeof n=="object")for(let r=n.length,o=0;o<r;o++)n[o]=Math.round(n[o]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}dwe.forEach(t=>{H_[t]={},Object.defineProperty(H_[t],"channels",{value:d$[t].channels}),Object.defineProperty(H_[t],"labels",{value:d$[t].labels});const e=hwe(t);Object.keys(e).forEach(s=>{const n=e[s];H_[t][s]=pwe(n),H_[t][s].raw=fwe(n)})});var mwe=H_;const U_=Wne.exports,Cc=mwe,ire=["keyword","gray","hex"],f$={};for(const t of Object.keys(Cc))f$[[...Cc[t].labels].sort().join("")]=t;const l9={};function qo(t,e){if(!(this instanceof qo))return new qo(t,e);if(e&&e in ire&&(e=null),e&&!(e in Cc))throw new Error("Unknown model: "+e);let i,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof qo)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const n=U_.get(t);if(n===null)throw new Error("Unable to parse color from string: "+t);this.model=n.model,s=Cc[this.model].channels,this.color=n.value.slice(0,s),this.valpha=typeof n.value[s]=="number"?n.value[s]:1}else if(t.length>0){this.model=e||"rgb",s=Cc[this.model].channels;const n=Array.prototype.slice.call(t,0,s);this.color=p$(n,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const n=Object.keys(t);"alpha"in t&&(n.splice(n.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const r=n.sort().join("");if(!(r in f$))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=f$[r];const{labels:o}=Cc[this.model],l=[];for(i=0;i<o.length;i++)l.push(t[o[i]]);this.color=p$(l)}if(l9[this.model])for(s=Cc[this.model].channels,i=0;i<s;i++){const n=l9[this.model][i];n&&(this.color[i]=n(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}qo.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in U_.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const i=e.valpha===1?e.color:[...e.color,this.valpha];return U_.to[e.model](i)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),i=e.valpha===1?e.color:[...e.color,this.valpha];return U_.to.rgb.percent(i)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=Cc[this.model],{labels:i}=Cc[this.model];for(let s=0;s<e;s++)t[i[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new qo([...this.color.map(ywe(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new qo([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Ir("rgb",0,go(255)),green:Ir("rgb",1,go(255)),blue:Ir("rgb",2,go(255)),hue:Ir(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Ir("hsl",1,go(100)),lightness:Ir("hsl",2,go(100)),saturationv:Ir("hsv",1,go(100)),value:Ir("hsv",2,go(100)),chroma:Ir("hcg",1,go(100)),gray:Ir("hcg",2,go(100)),white:Ir("hwb",1,go(100)),wblack:Ir("hwb",2,go(100)),cyan:Ir("cmyk",0,go(100)),magenta:Ir("cmyk",1,go(100)),yellow:Ir("cmyk",2,go(100)),black:Ir("cmyk",3,go(100)),x:Ir("xyz",0,go(95.047)),y:Ir("xyz",1,go(100)),z:Ir("xyz",2,go(108.833)),l:Ir("lab",0,go(100)),a:Ir("lab",1),b:Ir("lab",2),keyword(t){return t!==void 0?new qo(t):Cc[this.model].keyword(this.color)},hex(t){return t!==void 0?new qo(t):U_.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new qo(t);const e=this.rgb().round().color;let i=Math.round(this.valpha*255).toString(16).toUpperCase();return i.length===1&&(i="0"+i),U_.to.hex(e)+i},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[i,s]of t.entries()){const n=s/255;e[i]=n<=.04045?n/12.92:((n+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return qo.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let i=e.color[0];return i=(i+t)%360,i=i<0?360+i:i,e.color[0]=i,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const i=t.rgb(),s=this.rgb(),n=e===void 0?.5:e,r=2*n-1,o=i.alpha()-s.alpha(),l=((r*o===-1?r:(r+o)/(1+r*o))+1)/2,u=1-l;return qo.rgb(l*i.red()+u*s.red(),l*i.green()+u*s.green(),l*i.blue()+u*s.blue(),i.alpha()*n+s.alpha()*(1-n))}};for(const t of Object.keys(Cc)){if(ire.includes(t))continue;const{channels:e}=Cc[t];qo.prototype[t]=function(...i){return this.model===t?new qo(this):i.length>0?new qo(i,t):new qo([...vwe(Cc[this.model][t].raw(this.color)),this.valpha],t)},qo[t]=function(...i){let s=i[0];return typeof s=="number"&&(s=p$(i,e)),new qo(s,t)}}function gwe(t,e){return Number(t.toFixed(e))}function ywe(t){return function(e){return gwe(e,t)}}function Ir(t,e,i){t=Array.isArray(t)?t:[t];for(const s of t)(l9[s]||(l9[s]=[]))[e]=i;return t=t[0],function(s){let n;return s!==void 0?(i&&(s=i(s)),n=this[t](),n.color[e]=s,n):(n=this[t]().color[e],i&&(n=i(n)),n)}}function go(t){return function(e){return Math.max(0,Math.min(t,e))}}function vwe(t){return Array.isArray(t)?t:[t]}function p$(t,e){for(let i=0;i<e;i++)typeof t[i]!="number"&&(t[i]=0);return t}var _we=qo;const bwe=_we,blt={channel:"channel",channels:"channels",colorField:"color-field",colorFieldScope:"scope--color-field",colorMode:"color-mode",colorModeContainer:"color-mode-container",container:"container",control:"control",controlAndScope:"control-and-scope",controlSection:"control-section",deleteColor:"delete-color",header:"header",hexAndChannelsGroup:"hex-and-channels-group",hexOptions:"color-hex-options",hueScope:"scope--hue",hueSlider:"hue-slider",opacityScope:"scope--opacity",opacitySlider:"opacity-slider",preview:"preview",previewAndSliders:"preview-and-sliders",saveColor:"save-color",savedColor:"saved-color",savedColors:"saved-colors",savedColorsButtons:"saved-colors-buttons",savedColorsSection:"saved-colors-section",scope:"scope",section:"section",slider:"slider",sliders:"sliders",splitSection:"section--split"},xlt=bwe("#007AC2"),wlt="calcite-color-",Slt={r:255,g:255,b:255},xwe={h:360,s:100,v:100},Elt=xwe.h-1,Clt={min:0,max:100},wwe={s:{slider:{height:12,width:104},colorField:{height:80,width:160},thumb:{radius:7},preview:{size:20}},m:{slider:{height:12,width:204},colorField:{height:150,width:272},thumb:{radius:7},preview:{size:24}},l:{slider:{height:12,width:384},colorField:{height:200,width:464},thumb:{radius:7},preview:{size:32}}},Plt=1,Tlt=/^[0-9A-F]$/i,Swe=/^#[0-9A-F]{3}$/i,Ewe=/^#[0-9A-F]{6}$/i,Cwe=/^#[0-9A-F]{4}$/i,Pwe=/^#[0-9A-F]{8}$/i,Ilt=t=>Number((t*100).toFixed()),Mlt=t=>Number((t/100).toFixed(2));function c9(t,e=!1){return m$(t,e)||Twe(t,e)}function sre(t,e,i){return t?t.length===e&&i.test(t):!1}function m$(t,e=!1){return sre(t,e?5:4,e?Cwe:Swe)}function Twe(t,e=!1){return sre(t,e?9:7,e?Pwe:Ewe)}function Alt(t,e=!1,i=!1){if(t=t.toLowerCase(),t.startsWith("#")||(t=`#${t}`),m$(t,e))return CY(g$(t,e));if(e&&i&&c9(t,!1)){const s=m$(t,!1);return CY(g$(`${t}${s?"f":"ff"}`,!0))}return t}function Dlt(t,e=!1){return e?t.hexa():t.hex()}function CY(t){const{r:e,g:i,b:s}=t,n=RP(e),r=RP(i),o=RP(s),l="a"in t?RP(t.a*255):"";return`#${n}${r}${o}${l}`.toLowerCase()}function RP(t){return t.toString(16).padStart(2,"0")}function klt(t){const e={...t,a:t.alpha??1};return delete e.alpha,e}function Nlt(t){const e={...t,alpha:t.a??1};return delete e.a,e}function g$(t,e=!1){if(!c9(t,e))return null;t=t.replace("#","");let i,s,n,r;if(t.length===3||t.length===4){const[l,u,f,y]=t.split("");i=parseInt(`${l}${l}`,16),s=parseInt(`${u}${u}`,16),n=parseInt(`${f}${f}`,16),r=parseInt(`${y}${y}`,16)/255}else i=parseInt(t.slice(0,2),16),s=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16),r=parseInt(t.slice(6,8),16)/255;return isNaN(r)?{r:i,g:s,b:n}:{r:i,g:s,b:n,a:r}}const nre=t=>t,qr=nre({HEX:"hex",HEXA:"hexa",RGB_CSS:"rgb-css",RGBA_CSS:"rgba-css",HSL_CSS:"hsl-css",HSLA_CSS:"hsla-css"}),Vr=nre({RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla",HSV:"hsv",HSVA:"hsva"});function $lt(t){if(typeof t=="string"){if(t.startsWith("#")){const{length:e}=t;if(e===4||e===7)return qr.HEX;if(e===5||e===9)return qr.HEXA}if(t.startsWith("rgba("))return qr.RGBA_CSS;if(t.startsWith("rgb("))return qr.RGB_CSS;if(t.startsWith("hsl("))return qr.HSL_CSS;if(t.startsWith("hsla("))return qr.HSLA_CSS}if(typeof t=="object"){if(E_(t,"r","g","b"))return E_(t,"a")?Vr.RGBA:Vr.RGB;if(E_(t,"h","s","l"))return E_(t,"a")?Vr.HSLA:Vr.HSL;if(E_(t,"h","s","v"))return E_(t,"a")?Vr.HSVA:Vr.HSV}return null}function E_(t,...e){return e.every(i=>i&&t&&`${i}`in t)}function Olt(t,e){return(t==null?void 0:t.rgb().array().toString())===(e==null?void 0:e.rgb().array().toString())}function Rlt(t){return t===qr.HEXA||t===qr.RGBA_CSS||t===qr.HSLA_CSS||t===Vr.RGBA||t===Vr.HSLA||t===Vr.HSVA}function Llt(t){return t===qr.HEX?qr.HEXA:t===qr.RGB_CSS?qr.RGBA_CSS:t===qr.HSL_CSS?qr.HSLA_CSS:t===Vr.RGB?Vr.RGBA:t===Vr.HSL?Vr.HSLA:t===Vr.HSV?Vr.HSVA:t}function Flt(t){return t===qr.HEXA?qr.HEX:t===qr.RGBA_CSS?qr.RGB_CSS:t===qr.HSLA_CSS?qr.HSL_CSS:t===Vr.RGBA?Vr.RGB:t===Vr.HSLA?Vr.HSL:t===Vr.HSVA?Vr.HSV:t}function zlt(t,e){const{slider:{width:i},preview:s}=t;if(e)return i;const n=wwe.l.preview.size-s.size;return i+n}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const LP={thumbnail:"thumbnail",background:"background",initials:"initials",icon:"icon"};function Iwe(t){t=Mwe(t);let e=0;for(let s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e);let i="#";for(let s=0;s<3;s++){const n=e>>s*8&255;i+=("00"+n.toString(16)).substr(-2)}return i}function Mwe(t){const e=Math.floor(t.length/2),i=t.split("").reverse().join("");return i.substring(e)+i.slice(0,e)}function Awe(t){let{r:e,g:i,b:s}=t;e/=255,i/=255,s/=255;const n=Math.max(e,i,s),r=Math.min(e,i,s),o=n-r;if(n===r)return 0;let l=(n+r)/2;switch(n){case e:l=(i-s)/o+(i<s?6:0);break;case i:l=(s-e)/o+2;break;case s:l=(e-i)/o+4;break}return Math.round(l*60)}function Dwe(t){return Awe(g$(t))}const kwe=":host{display:inline-block;overflow:hidden;border-radius:var(--calcite-avatar-corner-radius, 50%);color:var(--calcite-avatar-color, var(--calcite-color-text-2))}:host([scale=s]){block-size:1.5rem;inline-size:1.5rem;font-size:var(--calcite-font-size--3)}:host([scale=m]){block-size:2rem;inline-size:2rem;font-size:var(--calcite-font-size--2)}:host([scale=l]){block-size:2.75rem;inline-size:2.75rem;font-size:var(--calcite-font-size-0)}.icon{display:flex}.background{display:flex;block-size:100%;inline-size:100%;align-items:center;justify-content:center;border-radius:var(--calcite-avatar-corner-radius, 50%)}.initials{font-weight:var(--calcite-font-weight-bold);text-transform:uppercase}.thumbnail{block-size:100%;inline-size:100%;border-radius:var(--calcite-avatar-corner-radius, 50%)}:host([hidden]){display:none}[hidden]{display:none}",Nwe=kwe,$we=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.scale="m",this.thumbnail=void 0,this.fullName=void 0,this.username=void 0,this.userId=void 0,this.label=void 0,this.thumbnailFailedToLoad=!1}render(){return this.determineContent()}determineContent(){if(this.thumbnail&&!this.thumbnailFailedToLoad)return Ae("img",{alt:this.label||"",class:LP.thumbnail,onError:()=>this.thumbnailFailedToLoad=!0,src:this.thumbnail});const e=this.generateInitials(),i=this.generateFillColor();return Ae("span",{"aria-label":this.label||this.fullName,class:LP.background,role:"figure",style:{backgroundColor:i}},e?Ae("span",{"aria-hidden":"true",class:LP.initials},e):Ae("calcite-icon",{class:LP.icon,icon:"user",scale:this.scale}))}generateFillColor(){const{userId:e,username:i,fullName:s,el:n}=this,r=Wbe(n),o=e&&`#${e.substr(e.length-6)}`,l=i||s||"",u=o&&c9(o)?o:Iwe(l);return!e&&!l||!c9(u)?"var(--calcite-avatar-background-color, var(--calcite-color-foreground-2))":`var(--calcite-avatar-background-color, hsl(${Dwe(u)}, 60%, ${r==="dark"?20:90}%))`}generateInitials(){const{fullName:e,username:i}=this;return e?e.trim().split(" ").map(s=>s.substring(0,1)).join(""):i?i.substring(0,2):!1}get el(){return this}static get style(){return Nwe}},[1,"calcite-avatar",{scale:[513],thumbnail:[513],fullName:[513,"full-name"],username:[513],userId:[513,"user-id"],label:[1],thumbnailFailedToLoad:[32]}]);function rre(){if(typeof customElements>"u")return;["calcite-avatar","calcite-icon"].forEach(e=>{switch(e){case"calcite-avatar":customElements.get(e)||customElements.define(e,$we);break;case"calcite-icon":customElements.get(e)||uo();break}})}rre();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const C_={textContainer:"text-container",fullName:"full-name",username:"username",button:"button"},Owe=`:host{display:inline-flex;outline:2px solid transparent;outline-offset:2px}:host .button{background-color:transparent;border:none;margin:0px;display:flex;cursor:pointer;align-items:center;justify-content:center;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size-0);line-height:1.25rem;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-block-end:2px solid transparent}:host(:hover) .button,:host(:focus) .button{background-color:var(--calcite-color-foreground-2)}:host(:focus) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:active) .button{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([active]) .button{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1);--calcite-icon-color:var(--calcite-color-brand)}.text-container{margin-block-start:0.125rem;display:flex;flex-direction:column;padding-inline:1rem;text-align:start}calcite-avatar{padding-inline:1rem}calcite-avatar~.text-container{padding-inline-start:0px}.full-name{margin-inline-start:0px;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.username{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,Rwe=Owe,Lwe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=void 0,this.fullName=void 0,this.label=void 0,this.textDisabled=!1,this.thumbnail=void 0,this.userId=void 0,this.username=void 0}async setFocus(){await co(this),this.el.focus()}componentWillLoad(){ao(this)}componentDidLoad(){lo(this)}render(){return Ae(hr,{key:"d848f4b0ee430fdbf74ce63be874afc055b1a48a"},Ae("button",{key:"d8187d1795407a9d12e4f2c6c3d75dba47cdf028","aria-label":this.label,class:C_.button},Ae("calcite-avatar",{key:"3a8526feb870ed33d7eae888c71f9489d90df26f","full-name":this.fullName,label:this.label,thumbnail:this.thumbnail,"user-id":this.userId,username:this.username}),(this.fullName||this.username)&&!this.textDisabled&&Ae("div",{key:"111bc54b8e187a95849ed325aca22880c00d1191",class:C_.textContainer},this.fullName&&Ae("span",{class:C_.fullName,key:C_.fullName},this.fullName),this.username&&Ae("span",{class:C_.username,key:C_.username},this.username))))}static get delegatesFocus(){return!0}get el(){return this}static get style(){return Rwe}},[17,"calcite-navigation-user",{active:[516],fullName:[1,"full-name"],label:[1],textDisabled:[516,"text-disabled"],thumbnail:[1],userId:[1,"user-id"],username:[1],setFocus:[64]}]);function Fwe(){if(typeof customElements>"u")return;["calcite-navigation-user","calcite-avatar","calcite-icon"].forEach(e=>{switch(e){case"calcite-navigation-user":customElements.get(e)||customElements.define(e,Lwe);break;case"calcite-avatar":customElements.get(e)||rre();break;case"calcite-icon":customElements.get(e)||uo();break}})}Fwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const zwe=":host{display:flex}ul{margin:0px;display:inline-flex;block-size:100%;align-items:center;padding:0px}:host([layout=vertical]) ul{display:flex;inline-size:100%;flex-direction:column}:host([hidden]){display:none}[hidden]{display:none}",qwe=zwe,Vwe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.menuItems=[],this.handleMenuSlotChange=e=>{this.menuItems=Nu(e),this.setMenuItemLayout(this.menuItems,this.layout)},this.label=void 0,this.layout="horizontal",this.messageOverrides=void 0,this.messages=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}handleGlobalAttributesChanged(){Io(this),this.setMenuItemLayout(this.menuItems,this.layout)}handleLayoutChange(e){this.setMenuItemLayout(this.menuItems,e)}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}connectedCallback(){Pl(this),Bc(this)}async componentWillLoad(){ao(this),await Gc(this)}componentDidLoad(){lo(this)}disconnectedCallback(){Tl(this),Hc(this)}async setFocus(){await co(this),this.el.focus()}calciteInternalNavMenuItemKeyEvent(e){const i=e.target,s=e.detail.children,n=e.detail.event.key;e.stopPropagation(),n==="ArrowDown"?i.layout==="vertical"?K0(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&s[0].setFocus():n==="ArrowUp"?this.layout==="vertical"?K0(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&s[s.length-1].setFocus():n==="ArrowRight"?this.layout==="horizontal"?K0(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&s[0].setFocus():n==="ArrowLeft"?this.layout==="horizontal"?K0(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&this.focusParentElement(e.target):n==="Escape"&&this.focusParentElement(e.target),e.preventDefault()}focusParentElement(e){const i=e.parentElement;i&&(Yp(i),i.open=!1)}setMenuItemLayout(e,i){e.forEach(s=>{s.layout=i,this.getEffectiveRole()==="menubar"&&(s.isTopLevelItem=!0,s.topLevelMenuLayout=this.layout)})}getEffectiveRole(){return this.el.role||"menubar"}render(){return Ae(hr,{key:"75308ac4419f7116f73975ad9ff88d25817d0522"},Ae("ul",{key:"ed22f7ab681c6e583b0b5aa720823898759687cb","aria-label":this.label,role:this.getEffectiveRole()},Ae("slot",{key:"4296d48a1a8921802458776d02e119feeaf12b3e",onSlotchange:this.handleMenuSlotChange})))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{role:["handleGlobalAttributesChanged"],layout:["handleLayoutChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return qwe}},[17,"calcite-menu",{label:[1],layout:[513],messageOverrides:[1040],messages:[1040],defaultMessages:[32],effectiveLocale:[32],setFocus:[64]},[[0,"calciteInternalMenuItemKeyEvent","calciteInternalNavMenuItemKeyEvent"]],{role:["handleGlobalAttributesChanged"],layout:["handleLayoutChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function ore(){if(typeof customElements>"u")return;["calcite-menu"].forEach(e=>{switch(e){case"calcite-menu":customElements.get(e)||customElements.define(e,Vwe);break}})}ore();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Rn={container:"container",content:"content",dropdownVertical:"dropdown--vertical",dropdownMenuItems:"dropdown-menu-items",dropdownAction:"dropdown-action",layoutVertical:"layout--vertical",hoverHrefIcon:"hover-href-icon",icon:"icon",iconBreadcrumb:"icon--breadcrumb",iconDropdown:"icon--dropdown",iconEnd:"icon--end",iconStart:"icon--start",isParentVertical:"parent--vertical",itemContent:"item-content",open:"open",nested:"nested",textContainer:"text-container"},Gwe=`:host{position:relative;box-sizing:border-box;display:flex;align-items:center;flex-shrink:0}:host .container,:host .item-content,:host .content{min-block-size:3rem}:host([layout=vertical]){inline-size:100%}:host(:not([layout=vertical])){block-size:100%}.container,.item-content{display:flex;block-size:100%;inline-size:100%;flex-direction:row;align-items:stretch}.content{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);padding-inline:1rem;font-size:var(--calcite-font-size-0);color:var(--calcite-color-text-2);outline:2px solid transparent;outline-offset:2px;text-decoration:none;border-block-end:0.125rem solid transparent;padding-block-start:0.125rem}.content:hover{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-2)}.content:focus{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-2);outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content:active{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}.content span{display:inline-flex}.content.layout--vertical{display:flex;inline-size:100%;justify-content:flex-start;padding-block:1rem;border-block-end:0;border-inline-end:0.25rem solid transparent}:host([active]) .content{color:var(--calcite-color-text-1);border-color:var(--calcite-color-brand)}:host([active]) .content .icon{--calcite-icon-color:var(--calcite-color-brand)}:host([layout=vertical]) .content{padding-inline:0.75rem}.icon--start{margin-inline-end:0.75rem}.icon--end{margin-inline-start:0.75rem}:host([layout=vertical]) .icon--end{margin-inline-start:auto;padding-inline-start:0.75rem}.icon--dropdown{position:relative;margin-inline-start:auto;margin-inline-end:0px;padding-inline-start:0.5rem;--calcite-icon-color:var(--calcite-color-text-3)}:host([layout=vertical]) .icon--end~.icon--dropdown{margin-inline-start:0.75rem}:host([layout=vertical]) .hover-href-icon{padding-inline-start:0.5rem}:host([layout=vertical]) .hover-href-icon~.icon--end{margin-inline-start:0.5rem}:host([layout=vertical]) .hover-href-icon~.icon--breadcrumb{margin-inline-start:0.75rem}.icon--breadcrumb{margin-inline-end:0px;padding-inline-start:0.5rem;--calcite-icon-color:var(--calcite-color-text-3)}:host([layout=vertical]) .icon--breadcrumb{margin-inline-start:auto}:host([layout=vertical]) .icon--breadcrumb~.icon--dropdown{margin-inline-start:0.5rem}:host([layout=vertical]) .icon--end~.icon--breadcrumb{margin-inline-start:0.5rem}:host([breadcrumb]) .content{padding-inline-end:0.75rem}calcite-action{position:relative;block-size:auto;border-inline-start:1px solid var(--calcite-color-foreground-1)}calcite-action::after{position:absolute;inset-inline-start:-1px;display:block;inline-size:1px;content:"";inset-block:0.75rem;background-color:var(--calcite-color-border-3)}calcite-action:hover::after{block-size:100%;inset-block:0}.content:focus~calcite-action,.content:hover~calcite-action{color:var(--calcite-color-text-1);border-inline-start:1px solid var(--calcite-color-border-3)}.container:hover .dropdown-action{background-color:var(--calcite-color-foreground-2)}.dropdown-menu-items{position:absolute;display:none;block-size:auto;min-inline-size:100%;flex-direction:column;overflow:visible;border:1px solid var(--calcite-color-border-3);background:var(--calcite-color-foreground-1);inset-block-start:100%;z-index:var(--calcite-z-index-dropdown)}.dropdown-menu-items.open{display:block}.dropdown-menu-items.nested{position:absolute;inset-block-start:-1px;transform:translateX(calc(100% - 2px))}.parent--vertical{flex-direction:column}.dropdown--vertical.dropdown-menu-items{position:relative;border-radius:0px;box-shadow:none;inset-block-start:0;transform:none}.dropdown--vertical.dropdown-menu-items:last-of-type{border-inline:0}:host([layout=vertical]:last-of-type) .dropdown-menu-items{border-block-end:0}:host([slot=submenu-item]) .parent--vertical{padding-inline-start:1.5rem}.dropdown-menu-items.nested.calcite--rtl{transform:translateX(calc(-100% + 2px))}.dropdown--vertical.dropdown-menu-items.nested.calcite--rtl{transform:none}.hover-href-icon{position:relative;inset-inline-end:0.25rem;margin-inline-start:auto;opacity:0;transition:all var(--calcite-internal-animation-timing-medium) ease-in-out}.content:focus .hover-href-icon,.content:hover .hover-href-icon{inset-inline-end:-0.25rem;opacity:1}:host([hidden]){display:none}[hidden]{display:none}`,jwe=Gwe,Bwe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalMenuItemKeyEvent=$t(this,"calciteInternalMenuItemKeyEvent",7),this.calciteMenuItemSelect=$t(this,"calciteMenuItemSelect",7),this.clickHandler=e=>{(this.href&&e.target===this.dropdownActionEl||!this.href&&this.hasSubmenu)&&(this.open=!this.open),this.selectMenuItem(e)},this.handleMenuItemSlotChange=e=>{this.submenuItems=Nu(e),this.submenuItems.forEach(i=>{i.topLevelMenuLayout||(i.topLevelMenuLayout=this.topLevelMenuLayout)}),this.hasSubmenu=this.submenuItems.length>0},this.keyDownHandler=async e=>{const{hasSubmenu:i,href:s,layout:n,open:r,submenuItems:o}=this,l=e.key,u=e.target===this.dropdownActionEl;if(!e.defaultPrevented){if(l===" "||l==="Enter")i&&(!s||s&&u)&&(this.open=!r),!(s&&u)&&l!=="Enter"&&this.selectMenuItem(e),(l===" "||s&&u)&&e.preventDefault();else if(l==="Escape"){if(r){this.open=!1;return}this.calciteInternalMenuItemKeyEvent.emit({event:e}),e.preventDefault()}else if(l==="ArrowDown"||l==="ArrowUp"){if(e.preventDefault(),(u||!s)&&i&&!r&&n==="horizontal"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:r&&i})}else if(l==="ArrowLeft")e.preventDefault(),this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:!0});else if(l==="ArrowRight"){if(e.preventDefault(),(u||!s)&&i&&!r&&n==="vertical"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:r&&i})}}},this.active=void 0,this.breadcrumb=void 0,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.isTopLevelItem=!1,this.label=void 0,this.layout=void 0,this.messageOverrides=void 0,this.messages=void 0,this.open=!1,this.rel=void 0,this.target=void 0,this.text=void 0,this.topLevelMenuLayout=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasSubmenu=!1,this.submenuItems=void 0}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}async setFocus(){await co(this),this.anchorEl.focus()}handleClickOut(e){this.topLevelMenuLayout!=="vertical"&&this.hasSubmenu&&this.open&&!e.composedPath().includes(this.el)&&(this.open=!1)}handleFocusOut(e){this.topLevelMenuLayout!=="vertical"&&!this.el.contains(e.relatedTarget)&&(this.open=!1)}connectedCallback(){Pl(this),Bc(this)}async componentWillLoad(){ao(this),await Gc(this)}componentDidLoad(){lo(this)}disconnectedCallback(){Tl(this),Hc(this)}blurHandler(){this.isFocused=!1}focusHandler(e){const i=e.target;this.isFocused=!0,i.open&&!this.open&&(i.open=!1)}selectMenuItem(e){e.target!==this.dropdownActionEl&&this.calciteMenuItemSelect.emit()}renderIconStart(){return Ae("calcite-icon",{class:`${Rn.icon} ${Rn.iconStart}`,flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,key:Rn.iconStart,scale:"s"})}renderIconEnd(){return Ae("calcite-icon",{class:`${Rn.icon} ${Rn.iconEnd}`,flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,key:Rn.iconEnd,scale:"s"})}renderBreadcrumbIcon(e){return Ae("calcite-icon",{class:`${Rn.icon} ${Rn.iconBreadcrumb}`,icon:e==="rtl"?"chevron-left":"chevron-right",key:Rn.iconBreadcrumb,scale:"s"})}renderDropdownIcon(e){const i=e==="rtl"?"chevron-left":"chevron-right";return Ae("calcite-icon",{class:`${Rn.icon} ${Rn.iconDropdown}`,icon:this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i,key:Rn.iconDropdown,scale:"s"})}renderDropdownAction(e){const i=e==="rtl"?"chevron-left":"chevron-right";return Ae("calcite-action",{class:Rn.dropdownAction,icon:this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i,key:Rn.dropdownAction,onClick:this.clickHandler,onKeyDown:this.keyDownHandler,ref:s=>this.dropdownActionEl=s,text:this.messages.open})}renderSubmenuItems(e){return Ae("calcite-menu",{class:{[Rn.dropdownMenuItems]:!0,[Rn.open]:this.open,[Rn.nested]:!this.isTopLevelItem,[Bl.rtl]:e==="rtl",[Rn.dropdownVertical]:this.topLevelMenuLayout==="vertical"},label:this.messages.submenu,layout:"vertical",role:"menu"},Ae("slot",{name:"submenu-item",onSlotchange:this.handleMenuItemSlotChange}))}renderHrefIcon(e){return Ae("calcite-icon",{class:Rn.hoverHrefIcon,icon:e==="rtl"?"arrow-left":"arrow-right",key:Rn.hoverHrefIcon,scale:"s"})}renderItemContent(e){const i=this.href&&(this.topLevelMenuLayout==="vertical"||!this.isTopLevelItem);return Ae(sM,null,this.iconStart&&this.renderIconStart(),Ae("div",{class:Rn.textContainer},Ae("span",null,this.text)),i&&this.renderHrefIcon(e),this.iconEnd&&this.renderIconEnd(),this.breadcrumb?this.renderBreadcrumbIcon(e):null,!this.href&&this.hasSubmenu?this.renderDropdownIcon(e):null)}render(){const e=Gp(this.el);return Ae(hr,{key:"e57c6579d3287593d663a8586cfd25c90246b1a4",onBlur:this.blurHandler,onFocus:this.focusHandler},Ae("li",{key:"954549390e447ec43ccf681949095d1393d9068a",class:{[Rn.container]:!0,[Rn.isParentVertical]:this.topLevelMenuLayout==="vertical"},role:"none"},Ae("div",{key:"6130156128f303bb225007e337fae78385614cf5",class:Rn.itemContent},Ae("a",{key:"9103ba8f3683feb1eb2301f05412b434c39ec3d3","aria-current":this.isFocused?"page":!1,"aria-expanded":br(this.open),"aria-haspopup":br(this.hasSubmenu),"aria-label":this.label,class:{[Rn.layoutVertical]:this.layout==="vertical",[Rn.content]:!0},href:this.href,onClick:this.clickHandler,onKeyDown:this.keyDownHandler,ref:i=>this.anchorEl=i,rel:this.rel,role:"menuitem",tabIndex:this.isTopLevelItem?0:-1,target:this.target},this.renderItemContent(e)),this.href&&this.hasSubmenu?this.renderDropdownAction(e):null),this.renderSubmenuItems(e)))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return jwe}},[1,"calcite-menu-item",{active:[516],breadcrumb:[516],href:[1],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],isTopLevelItem:[4,"is-top-level-item"],label:[1],layout:[513],messageOverrides:[1040],messages:[1040],open:[1540],rel:[513],target:[513],text:[1],topLevelMenuLayout:[1,"top-level-menu-layout"],defaultMessages:[32],effectiveLocale:[32],hasSubmenu:[32],submenuItems:[32],setFocus:[64]},[[8,"click","handleClickOut"],[0,"focusout","handleFocusOut"]],{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Hwe(){if(typeof customElements>"u")return;["calcite-menu-item","calcite-action","calcite-icon","calcite-loader","calcite-menu"].forEach(e=>{switch(e){case"calcite-menu-item":customElements.get(e)||customElements.define(e,Bwe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break;case"calcite-menu":customElements.get(e)||ore();break}})}Hwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* focus-trap 7.6.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Uwe(t,e,i){return(e=Xwe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function PY(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,s)}return i}function TY(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?PY(Object(i),!0).forEach(function(s){Uwe(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):PY(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}function Ywe(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xwe(t){var e=Ywe(t,"string");return typeof e=="symbol"?e:e+""}var IY={activateTrap:function(e,i){if(e.length>0){var s=e[e.length-1];s!==i&&s.pause()}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var s=e.indexOf(i);s!==-1&&e.splice(s,1),e.length>0&&e[e.length-1].unpause()}},Wwe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Zwe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},gS=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Kwe=function(e){return gS(e)&&!e.shiftKey},Jwe=function(e){return gS(e)&&e.shiftKey},MY=function(e){return setTimeout(e,0)},AY=function(e,i){var s=-1;return e.every(function(n,r){return i(n)?(s=r,!1):!0}),s},Dw=function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,s):e},FP=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Qwe=[],e3e=function(e,i){var s=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||Qwe,r=TY({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Kwe,isKeyBackward:Jwe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,u=function(ue,ne,de){return ue&&ue[ne]!==void 0?ue[ne]:r[de||ne]},f=function(ue,ne){var de=typeof(ne==null?void 0:ne.composedPath)=="function"?ne.composedPath():void 0;return o.containerGroups.findIndex(function(Se){var Pe=Se.container,Re=Se.tabbableNodes;return Pe.contains(ue)||(de==null?void 0:de.includes(Pe))||Re.find(function(Oe){return Oe===ue})})},y=function(ue){var ne=r[ue];if(typeof ne=="function"){for(var de=arguments.length,Se=new Array(de>1?de-1:0),Pe=1;Pe<de;Pe++)Se[Pe-1]=arguments[Pe];ne=ne.apply(void 0,Se)}if(ne===!0&&(ne=void 0),!ne){if(ne===void 0||ne===!1)return ne;throw new Error("`".concat(ue,"` was specified but was not a node, or did not return a node"))}var Re=ne;if(typeof ne=="string"&&(Re=s.querySelector(ne),!Re))throw new Error("`".concat(ue,"` as selector refers to no known node"));return Re},_=function(){var ue=y("initialFocus");if(ue===!1)return!1;if(ue===void 0||!Ik(ue,r.tabbableOptions))if(f(s.activeElement)>=0)ue=s.activeElement;else{var ne=o.tabbableGroups[0],de=ne&&ne.firstTabbableNode;ue=de||y("fallbackFocus")}if(!ue)throw new Error("Your focus-trap needs to have at least one focusable element");return ue},x=function(){if(o.containerGroups=o.containers.map(function(ue){var ne=vne(ue,r.tabbableOptions),de=Ybe(ue,r.tabbableOptions),Se=ne.length>0?ne[0]:void 0,Pe=ne.length>0?ne[ne.length-1]:void 0,Re=de.find(function(Fe){return S_(Fe)}),Oe=de.slice().reverse().find(function(Fe){return S_(Fe)}),we=!!ne.find(function(Fe){return vy(Fe)>0});return{container:ue,tabbableNodes:ne,focusableNodes:de,posTabIndexesFound:we,firstTabbableNode:Se,lastTabbableNode:Pe,firstDomTabbableNode:Re,lastDomTabbableNode:Oe,nextTabbableNode:function(it){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ot=ne.indexOf(it);return ot<0?vt?de.slice(de.indexOf(it)+1).find(function(ut){return S_(ut)}):de.slice(0,de.indexOf(it)).reverse().find(function(ut){return S_(ut)}):ne[ot+(vt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(ue){return ue.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(ue){return ue.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},S=function(ue){var ne=ue.activeElement;if(ne)return ne.shadowRoot&&ne.shadowRoot.activeElement!==null?S(ne.shadowRoot):ne},P=function(ue){if(ue!==!1&&ue!==S(document)){if(!ue||!ue.focus){P(_());return}ue.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=ue,Wwe(ue)&&ue.select()}},A=function(ue){var ne=y("setReturnFocus",ue);return ne||(ne===!1?!1:ue)},k=function(ue){var ne=ue.target,de=ue.event,Se=ue.isBackward,Pe=Se===void 0?!1:Se;ne=ne||FP(de),x();var Re=null;if(o.tabbableGroups.length>0){var Oe=f(ne,de),we=Oe>=0?o.containerGroups[Oe]:void 0;if(Oe<0)Pe?Re=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Re=o.tabbableGroups[0].firstTabbableNode;else if(Pe){var Fe=AY(o.tabbableGroups,function(qt){var Lt=qt.firstTabbableNode;return ne===Lt});if(Fe<0&&(we.container===ne||Ik(ne,r.tabbableOptions)&&!S_(ne,r.tabbableOptions)&&!we.nextTabbableNode(ne,!1))&&(Fe=Oe),Fe>=0){var it=Fe===0?o.tabbableGroups.length-1:Fe-1,vt=o.tabbableGroups[it];Re=vy(ne)>=0?vt.lastTabbableNode:vt.lastDomTabbableNode}else gS(de)||(Re=we.nextTabbableNode(ne,!1))}else{var ot=AY(o.tabbableGroups,function(qt){var Lt=qt.lastTabbableNode;return ne===Lt});if(ot<0&&(we.container===ne||Ik(ne,r.tabbableOptions)&&!S_(ne,r.tabbableOptions)&&!we.nextTabbableNode(ne))&&(ot=Oe),ot>=0){var ut=ot===o.tabbableGroups.length-1?0:ot+1,Ct=o.tabbableGroups[ut];Re=vy(ne)>=0?Ct.firstTabbableNode:Ct.firstDomTabbableNode}else gS(de)||(Re=we.nextTabbableNode(ne))}}else Re=y("fallbackFocus");return Re},$=function(ue){var ne=FP(ue);if(!(f(ne,ue)>=0)){if(Dw(r.clickOutsideDeactivates,ue)){l.deactivate({returnFocus:r.returnFocusOnDeactivate});return}Dw(r.allowOutsideClick,ue)||ue.preventDefault()}},F=function(ue){var ne=FP(ue),de=f(ne,ue)>=0;if(de||ne instanceof Document)de&&(o.mostRecentlyFocusedNode=ne);else{ue.stopImmediatePropagation();var Se,Pe=!0;if(o.mostRecentlyFocusedNode)if(vy(o.mostRecentlyFocusedNode)>0){var Re=f(o.mostRecentlyFocusedNode),Oe=o.containerGroups[Re].tabbableNodes;if(Oe.length>0){var we=Oe.findIndex(function(Fe){return Fe===o.mostRecentlyFocusedNode});we>=0&&(r.isKeyForward(o.recentNavEvent)?we+1<Oe.length&&(Se=Oe[we+1],Pe=!1):we-1>=0&&(Se=Oe[we-1],Pe=!1))}}else o.containerGroups.some(function(Fe){return Fe.tabbableNodes.some(function(it){return vy(it)>0})})||(Pe=!1);else Pe=!1;Pe&&(Se=k({target:o.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(o.recentNavEvent)})),P(Se||o.mostRecentlyFocusedNode||_())}o.recentNavEvent=void 0},G=function(ue){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=ue;var de=k({event:ue,isBackward:ne});de&&(gS(ue)&&ue.preventDefault(),P(de))},V=function(ue){(r.isKeyForward(ue)||r.isKeyBackward(ue))&&G(ue,r.isKeyBackward(ue))},B=function(ue){Zwe(ue)&&Dw(r.escapeDeactivates,ue)!==!1&&(ue.preventDefault(),l.deactivate())},W=function(ue){var ne=FP(ue);f(ne,ue)>=0||Dw(r.clickOutsideDeactivates,ue)||Dw(r.allowOutsideClick,ue)||(ue.preventDefault(),ue.stopImmediatePropagation())},J=function(){if(o.active)return IY.activateTrap(n,l),o.delayInitialFocusTimer=r.delayInitialFocus?MY(function(){P(_())}):P(_()),s.addEventListener("focusin",F,!0),s.addEventListener("mousedown",$,{capture:!0,passive:!1}),s.addEventListener("touchstart",$,{capture:!0,passive:!1}),s.addEventListener("click",W,{capture:!0,passive:!1}),s.addEventListener("keydown",V,{capture:!0,passive:!1}),s.addEventListener("keydown",B),l},re=function(){if(o.active)return s.removeEventListener("focusin",F,!0),s.removeEventListener("mousedown",$,!0),s.removeEventListener("touchstart",$,!0),s.removeEventListener("click",W,!0),s.removeEventListener("keydown",V,!0),s.removeEventListener("keydown",B),l},se=function(ue){var ne=ue.some(function(de){var Se=Array.from(de.removedNodes);return Se.some(function(Pe){return Pe===o.mostRecentlyFocusedNode})});ne&&P(_())},oe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(se):void 0,pe=function(){oe&&(oe.disconnect(),o.active&&!o.paused&&o.containers.map(function(ue){oe.observe(ue,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(ue){if(o.active)return this;var ne=u(ue,"onActivate"),de=u(ue,"onPostActivate"),Se=u(ue,"checkCanFocusTrap");Se||x(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=s.activeElement,ne==null||ne();var Pe=function(){Se&&x(),J(),pe(),de==null||de()};return Se?(Se(o.containers.concat()).then(Pe,Pe),this):(Pe(),this)},deactivate:function(ue){if(!o.active)return this;var ne=TY({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},ue);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,re(),o.active=!1,o.paused=!1,pe(),IY.deactivateTrap(n,l);var de=u(ne,"onDeactivate"),Se=u(ne,"onPostDeactivate"),Pe=u(ne,"checkCanReturnFocus"),Re=u(ne,"returnFocus","returnFocusOnDeactivate");de==null||de();var Oe=function(){MY(function(){Re&&P(A(o.nodeFocusedBeforeActivation)),Se==null||Se()})};return Re&&Pe?(Pe(A(o.nodeFocusedBeforeActivation)).then(Oe,Oe),this):(Oe(),this)},pause:function(ue){if(o.paused||!o.active)return this;var ne=u(ue,"onPause"),de=u(ue,"onPostPause");return o.paused=!0,ne==null||ne(),re(),pe(),de==null||de(),this},unpause:function(ue){if(!o.paused||!o.active)return this;var ne=u(ue,"onUnpause"),de=u(ue,"onPostUnpause");return o.paused=!1,ne==null||ne(),x(),J(),pe(),de==null||de(),this},updateContainerElements:function(ue){var ne=[].concat(ue).filter(Boolean);return o.containers=ne.map(function(de){return typeof de=="string"?s.querySelector(de):de}),o.active&&x(),pe(),this}},l.updateContainerElements(e),l};function are(t,e){const{el:i}=t,s=(e==null?void 0:e.focusTrapEl)||i;if(!s)return;const n={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:s,setReturnFocus:r=>(Yp(r),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:_ne,trapStack:Sbe};t.focusTrap=e3e(s,n)}function y$(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function yS(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function lre(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const t3e=L_e;function DY(t){return"opened"in t?t.opened:t.open}function af(t){t3e(()=>{t.transitionEl&&f2e(t.transitionEl,t.openTransitionProp,()=>{DY(t)?t.onBeforeOpen():t.onBeforeClose()},()=>{DY(t)?t.onOpen():t.onClose()})})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function kY(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var i3e=typeof global=="object"&&global&&global.Object===Object&&global;const s3e=i3e;var n3e=typeof self=="object"&&self&&self.Object===Object&&self,r3e=s3e||n3e||Function("return this")();const cre=r3e;var o3e=cre.Symbol;const u9=o3e;var ure=Object.prototype,a3e=ure.hasOwnProperty,l3e=ure.toString,kw=u9?u9.toStringTag:void 0;function c3e(t){var e=a3e.call(t,kw),i=t[kw];try{t[kw]=void 0;var s=!0}catch{}var n=l3e.call(t);return s&&(e?t[kw]=i:delete t[kw]),n}var u3e=Object.prototype,h3e=u3e.toString;function d3e(t){return h3e.call(t)}var f3e="[object Null]",p3e="[object Undefined]",NY=u9?u9.toStringTag:void 0;function m3e(t){return t==null?t===void 0?p3e:f3e:NY&&NY in Object(t)?c3e(t):d3e(t)}function g3e(t){return t!=null&&typeof t=="object"}var y3e="[object Symbol]";function v3e(t){return typeof t=="symbol"||g3e(t)&&m3e(t)==y3e}var _3e=/\s/;function b3e(t){for(var e=t.length;e--&&_3e.test(t.charAt(e)););return e}var x3e=/^\s+/;function w3e(t){return t&&t.slice(0,b3e(t)+1).replace(x3e,"")}function v$(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $Y=NaN,S3e=/^[-+]0x[0-9a-f]+$/i,E3e=/^0b[01]+$/i,C3e=/^0o[0-7]+$/i,P3e=parseInt;function OY(t){if(typeof t=="number")return t;if(v3e(t))return $Y;if(v$(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=v$(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=w3e(t);var i=E3e.test(t);return i||C3e.test(t)?P3e(t.slice(2),i?2:8):S3e.test(t)?$Y:+t}var T3e=function(){return cre.Date.now()};const kk=T3e;var I3e="Expected a function",M3e=Math.max,A3e=Math.min;function D3e(t,e,i){var s,n,r,o,l,u,f=0,y=!1,_=!1,x=!0;if(typeof t!="function")throw new TypeError(I3e);e=OY(e)||0,v$(i)&&(y=!!i.leading,_="maxWait"in i,r=_?M3e(OY(i.maxWait)||0,e):r,x="trailing"in i?!!i.trailing:x);function S(W){var J=s,re=n;return s=n=void 0,f=W,o=t.apply(re,J),o}function P(W){return f=W,l=setTimeout($,e),y?S(W):o}function A(W){var J=W-u,re=W-f,se=e-J;return _?A3e(se,r-re):se}function k(W){var J=W-u,re=W-f;return u===void 0||J>=e||J<0||_&&re>=r}function $(){var W=kk();if(k(W))return F(W);l=setTimeout($,A(W))}function F(W){return l=void 0,x&&s?S(W):(s=n=void 0,o)}function G(){l!==void 0&&clearTimeout(l),f=0,s=u=n=l=void 0}function V(){return l===void 0?o:F(kk())}function B(){var W=kk(),J=k(W);if(s=arguments,n=this,u=W,J){if(l===void 0)return P(u);if(_)return clearTimeout(l),l=setTimeout($,e),S(u)}return l===void 0&&(l=setTimeout($,e)),o}return B.cancel=G,B.flush=V,B}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const hre=["top","right","bottom","left"],RY=["start","end"],LY=hre.reduce((t,e)=>t.concat(e,e+"-"+RY[0],e+"-"+RY[1]),[]),f2=Math.min,Ly=Math.max,h9=Math.round,zP=Math.floor,_g=t=>({x:t,y:t}),k3e={left:"right",right:"left",bottom:"top",top:"bottom"},N3e={start:"end",end:"start"};function _$(t,e,i){return Ly(t,f2(e,i))}function Tv(t,e){return typeof t=="function"?t(e):t}function Xp(t){return t.split("-")[0]}function lf(t){return t.split("-")[1]}function dre(t){return t==="x"?"y":"x"}function rq(t){return t==="y"?"height":"width"}function aM(t){return["top","bottom"].includes(Xp(t))?"y":"x"}function oq(t){return dre(aM(t))}function fre(t,e,i){i===void 0&&(i=!1);const s=lf(t),n=oq(t),r=rq(n);let o=n==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=f9(o)),[o,f9(o)]}function $3e(t){const e=f9(t);return[d9(t),e,d9(e)]}function d9(t){return t.replace(/start|end/g,e=>N3e[e])}function O3e(t,e,i){const s=["left","right"],n=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:s:e?s:n;case"left":case"right":return e?r:o;default:return[]}}function R3e(t,e,i,s){const n=lf(t);let r=O3e(Xp(t),i==="start",s);return n&&(r=r.map(o=>o+"-"+n),e&&(r=r.concat(r.map(d9)))),r}function f9(t){return t.replace(/left|right|bottom|top/g,e=>k3e[e])}function L3e(t){return{top:0,right:0,bottom:0,left:0,...t}}function pre(t){return typeof t!="number"?L3e(t):{top:t,right:t,bottom:t,left:t}}function p9(t){const{x:e,y:i,width:s,height:n}=t;return{width:s,height:n,top:i,left:e,right:e+s,bottom:i+n,x:e,y:i}}function FY(t,e,i){let{reference:s,floating:n}=t;const r=aM(e),o=oq(e),l=rq(o),u=Xp(e),f=r==="y",y=s.x+s.width/2-n.width/2,_=s.y+s.height/2-n.height/2,x=s[l]/2-n[l]/2;let S;switch(u){case"top":S={x:y,y:s.y-n.height};break;case"bottom":S={x:y,y:s.y+s.height};break;case"right":S={x:s.x+s.width,y:_};break;case"left":S={x:s.x-n.width,y:_};break;default:S={x:s.x,y:s.y}}switch(lf(e)){case"start":S[o]-=x*(i&&f?-1:1);break;case"end":S[o]+=x*(i&&f?-1:1);break}return S}const F3e=async(t,e,i)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=i,l=r.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:y,y:_}=FY(f,s,u),x=s,S={},P=0;for(let A=0;A<l.length;A++){const{name:k,fn:$}=l[A],{x:F,y:G,data:V,reset:B}=await $({x:y,y:_,initialPlacement:s,placement:x,strategy:n,middlewareData:S,rects:f,platform:o,elements:{reference:t,floating:e}});y=F??y,_=G??_,S={...S,[k]:{...S[k],...V}},B&&P<=50&&(P++,typeof B=="object"&&(B.placement&&(x=B.placement),B.rects&&(f=B.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):B.rects),{x:y,y:_}=FY(f,x,u)),A=-1)}return{x:y,y:_,placement:x,strategy:n,middlewareData:S}};async function iE(t,e){var i;e===void 0&&(e={});const{x:s,y:n,platform:r,rects:o,elements:l,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:y="viewport",elementContext:_="floating",altBoundary:x=!1,padding:S=0}=Tv(e,t),P=pre(S),k=l[x?_==="floating"?"reference":"floating":_],$=p9(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(k)))==null||i?k:k.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:f,rootBoundary:y,strategy:u})),F=_==="floating"?{x:s,y:n,width:o.floating.width,height:o.floating.height}:o.reference,G=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),V=await(r.isElement==null?void 0:r.isElement(G))?await(r.getScale==null?void 0:r.getScale(G))||{x:1,y:1}:{x:1,y:1},B=p9(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:F,offsetParent:G,strategy:u}):F);return{top:($.top-B.top+P.top)/V.y,bottom:(B.bottom-$.bottom+P.bottom)/V.y,left:($.left-B.left+P.left)/V.x,right:(B.right-$.right+P.right)/V.x}}const z3e=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:s,placement:n,rects:r,platform:o,elements:l,middlewareData:u}=e,{element:f,padding:y=0}=Tv(t,e)||{};if(f==null)return{};const _=pre(y),x={x:i,y:s},S=oq(n),P=rq(S),A=await o.getDimensions(f),k=S==="y",$=k?"top":"left",F=k?"bottom":"right",G=k?"clientHeight":"clientWidth",V=r.reference[P]+r.reference[S]-x[S]-r.floating[P],B=x[S]-r.reference[S],W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let J=W?W[G]:0;(!J||!await(o.isElement==null?void 0:o.isElement(W)))&&(J=l.floating[G]||r.floating[P]);const re=V/2-B/2,se=J/2-A[P]/2-1,oe=f2(_[$],se),pe=f2(_[F],se),ce=oe,ue=J-A[P]-pe,ne=J/2-A[P]/2+re,de=_$(ce,ne,ue),Se=!u.arrow&&lf(n)!=null&&ne!==de&&r.reference[P]/2-(ne<ce?oe:pe)-A[P]/2<0,Pe=Se?ne<ce?ne-ce:ne-ue:0;return{[S]:x[S]+Pe,data:{[S]:de,centerOffset:ne-de-Pe,...Se&&{alignmentOffset:Pe}},reset:Se}}});function q3e(t,e,i){return(t?[...i.filter(n=>lf(n)===t),...i.filter(n=>lf(n)!==t)]:i.filter(n=>Xp(n)===n)).filter(n=>t?lf(n)===t||(e?d9(n)!==n:!1):!0)}const V3e=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,s,n;const{rects:r,middlewareData:o,placement:l,platform:u,elements:f}=e,{crossAxis:y=!1,alignment:_,allowedPlacements:x=LY,autoAlignment:S=!0,...P}=Tv(t,e),A=_!==void 0||x===LY?q3e(_||null,S,x):x,k=await iE(e,P),$=((i=o.autoPlacement)==null?void 0:i.index)||0,F=A[$];if(F==null)return{};const G=fre(F,r,await(u.isRTL==null?void 0:u.isRTL(f.floating)));if(l!==F)return{reset:{placement:A[0]}};const V=[k[Xp(F)],k[G[0]],k[G[1]]],B=[...((s=o.autoPlacement)==null?void 0:s.overflows)||[],{placement:F,overflows:V}],W=A[$+1];if(W)return{data:{index:$+1,overflows:B},reset:{placement:W}};const J=B.map(oe=>{const pe=lf(oe.placement);return[oe.placement,pe&&y?oe.overflows.slice(0,2).reduce((ce,ue)=>ce+ue,0):oe.overflows[0],oe.overflows]}).sort((oe,pe)=>oe[1]-pe[1]),se=((n=J.filter(oe=>oe[2].slice(0,lf(oe[0])?2:3).every(pe=>pe<=0))[0])==null?void 0:n[0])||J[0][0];return se!==l?{data:{index:$+1,overflows:B},reset:{placement:se}}:{}}}},G3e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,s;const{placement:n,middlewareData:r,rects:o,initialPlacement:l,platform:u,elements:f}=e,{mainAxis:y=!0,crossAxis:_=!0,fallbackPlacements:x,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:A=!0,...k}=Tv(t,e);if((i=r.arrow)!=null&&i.alignmentOffset)return{};const $=Xp(n),F=Xp(l)===l,G=await(u.isRTL==null?void 0:u.isRTL(f.floating)),V=x||(F||!A?[f9(l)]:$3e(l));!x&&P!=="none"&&V.push(...R3e(l,A,P,G));const B=[l,...V],W=await iE(e,k),J=[];let re=((s=r.flip)==null?void 0:s.overflows)||[];if(y&&J.push(W[$]),_){const ce=fre(n,o,G);J.push(W[ce[0]],W[ce[1]])}if(re=[...re,{placement:n,overflows:J}],!J.every(ce=>ce<=0)){var se,oe;const ce=(((se=r.flip)==null?void 0:se.index)||0)+1,ue=B[ce];if(ue)return{data:{index:ce,overflows:re},reset:{placement:ue}};let ne=(oe=re.filter(de=>de.overflows[0]<=0).sort((de,Se)=>de.overflows[1]-Se.overflows[1])[0])==null?void 0:oe.placement;if(!ne)switch(S){case"bestFit":{var pe;const de=(pe=re.map(Se=>[Se.placement,Se.overflows.filter(Pe=>Pe>0).reduce((Pe,Re)=>Pe+Re,0)]).sort((Se,Pe)=>Se[1]-Pe[1])[0])==null?void 0:pe[0];de&&(ne=de);break}case"initialPlacement":ne=l;break}if(n!==ne)return{reset:{placement:ne}}}return{}}}};function zY(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qY(t){return hre.some(e=>t[e]>=0)}const j3e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:s="referenceHidden",...n}=Tv(t,e);switch(s){case"referenceHidden":{const r=await iE(e,{...n,elementContext:"reference"}),o=zY(r,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qY(o)}}}case"escaped":{const r=await iE(e,{...n,altBoundary:!0}),o=zY(r,i.floating);return{data:{escapedOffsets:o,escaped:qY(o)}}}default:return{}}}}};async function B3e(t,e){const{placement:i,platform:s,elements:n}=t,r=await(s.isRTL==null?void 0:s.isRTL(n.floating)),o=Xp(i),l=lf(i),u=aM(i)==="y",f=["left","top"].includes(o)?-1:1,y=r&&u?-1:1,_=Tv(e,t);let{mainAxis:x,crossAxis:S,alignmentAxis:P}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return l&&typeof P=="number"&&(S=l==="end"?P*-1:P),u?{x:S*y,y:x*f}:{x:x*f,y:S*y}}const H3e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,s;const{x:n,y:r,placement:o,middlewareData:l}=e,u=await B3e(e,t);return o===((i=l.offset)==null?void 0:i.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+u.x,y:r+u.y,data:{...u,placement:o}}}}},U3e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:s,placement:n}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:l={fn:k=>{let{x:$,y:F}=k;return{x:$,y:F}}},...u}=Tv(t,e),f={x:i,y:s},y=await iE(e,u),_=aM(Xp(n)),x=dre(_);let S=f[x],P=f[_];if(r){const k=x==="y"?"top":"left",$=x==="y"?"bottom":"right",F=S+y[k],G=S-y[$];S=_$(F,S,G)}if(o){const k=_==="y"?"top":"left",$=_==="y"?"bottom":"right",F=P+y[k],G=P-y[$];P=_$(F,P,G)}const A=l.fn({...e,[x]:S,[_]:P});return{...A,data:{x:A.x-i,y:A.y-s}}}}};function lM(){return typeof window<"u"}function tx(t){return mre(t)?(t.nodeName||"").toLowerCase():"#document"}function Ac(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function hm(t){var e;return(e=(mre(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mre(t){return lM()?t instanceof Node||t instanceof Ac(t).Node:!1}function Kh(t){return lM()?t instanceof Element||t instanceof Ac(t).Element:!1}function df(t){return lM()?t instanceof HTMLElement||t instanceof Ac(t).HTMLElement:!1}function VY(t){return!lM()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ac(t).ShadowRoot}function hC(t){const{overflow:e,overflowX:i,overflowY:s,display:n}=Jh(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(n)}function Y3e(t){return["table","td","th"].includes(tx(t))}function cM(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function uM(t){const e=aq(),i=Kh(t)?Jh(t):t;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(i.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(i.contain||"").includes(s))}function X3e(t){let e=bg(t);for(;df(e)&&!p2(e);){if(uM(e))return e;if(cM(e))return null;e=bg(e)}return null}function aq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function p2(t){return["html","body","#document"].includes(tx(t))}function Jh(t){return Ac(t).getComputedStyle(t)}function hM(t){return Kh(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bg(t){if(tx(t)==="html")return t;const e=t.assignedSlot||t.parentNode||VY(t)&&t.host||hm(t);return VY(e)?e.host:e}function gre(t){const e=bg(t);return p2(e)?t.ownerDocument?t.ownerDocument.body:t.body:df(e)&&hC(e)?e:gre(e)}function sE(t,e,i){var s;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=gre(t),r=n===((s=t.ownerDocument)==null?void 0:s.body),o=Ac(n);if(r){const l=W3e(o);return e.concat(o,o.visualViewport||[],hC(n)?n:[],l&&i?sE(l):[])}return e.concat(n,sE(n,[],i))}function W3e(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yre(t){const e=Jh(t);let i=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=df(t),r=n?t.offsetWidth:i,o=n?t.offsetHeight:s,l=h9(i)!==r||h9(s)!==o;return l&&(i=r,s=o),{width:i,height:s,$:l}}function lq(t){return Kh(t)?t:t.contextElement}function Vb(t){const e=lq(t);if(!df(e))return _g(1);const i=e.getBoundingClientRect(),{width:s,height:n,$:r}=yre(e);let o=(r?h9(i.width):i.width)/s,l=(r?h9(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Z3e=_g(0);function vre(t){const e=Ac(t);return!aq()||!e.visualViewport?Z3e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function K3e(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Ac(t)?!1:e}function Ky(t,e,i,s){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),r=lq(t);let o=_g(1);e&&(s?Kh(s)&&(o=Vb(s)):o=Vb(t));const l=K3e(r,i,s)?vre(r):_g(0);let u=(n.left+l.x)/o.x,f=(n.top+l.y)/o.y,y=n.width/o.x,_=n.height/o.y;if(r){const x=Ac(r),S=s&&Kh(s)?Ac(s):s;let P=x,A=P.frameElement;for(;A&&s&&S!==P;){const k=Vb(A),$=A.getBoundingClientRect(),F=Jh(A),G=$.left+(A.clientLeft+parseFloat(F.paddingLeft))*k.x,V=$.top+(A.clientTop+parseFloat(F.paddingTop))*k.y;u*=k.x,f*=k.y,y*=k.x,_*=k.y,u+=G,f+=V,P=Ac(A),A=P.frameElement}}return p9({width:y,height:_,x:u,y:f})}function J3e(t){let{elements:e,rect:i,offsetParent:s,strategy:n}=t;const r=n==="fixed",o=hm(s),l=e?cM(e.floating):!1;if(s===o||l&&r)return i;let u={scrollLeft:0,scrollTop:0},f=_g(1);const y=_g(0),_=df(s);if((_||!_&&!r)&&((tx(s)!=="body"||hC(o))&&(u=hM(s)),df(s))){const x=Ky(s);f=Vb(s),y.x=x.x+s.clientLeft,y.y=x.y+s.clientTop}return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-u.scrollLeft*f.x+y.x,y:i.y*f.y-u.scrollTop*f.y+y.y}}function Q3e(t){return Array.from(t.getClientRects())}function _re(t){return Ky(hm(t)).left+hM(t).scrollLeft}function eSe(t){const e=hm(t),i=hM(t),s=t.ownerDocument.body,n=Ly(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=Ly(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-i.scrollLeft+_re(t);const l=-i.scrollTop;return Jh(s).direction==="rtl"&&(o+=Ly(e.clientWidth,s.clientWidth)-n),{width:n,height:r,x:o,y:l}}function tSe(t,e){const i=Ac(t),s=hm(t),n=i.visualViewport;let r=s.clientWidth,o=s.clientHeight,l=0,u=0;if(n){r=n.width,o=n.height;const f=aq();(!f||f&&e==="fixed")&&(l=n.offsetLeft,u=n.offsetTop)}return{width:r,height:o,x:l,y:u}}function iSe(t,e){const i=Ky(t,!0,e==="fixed"),s=i.top+t.clientTop,n=i.left+t.clientLeft,r=df(t)?Vb(t):_g(1),o=t.clientWidth*r.x,l=t.clientHeight*r.y,u=n*r.x,f=s*r.y;return{width:o,height:l,x:u,y:f}}function GY(t,e,i){let s;if(e==="viewport")s=tSe(t,i);else if(e==="document")s=eSe(hm(t));else if(Kh(e))s=iSe(e,i);else{const n=vre(t);s={...e,x:e.x-n.x,y:e.y-n.y}}return p9(s)}function bre(t,e){const i=bg(t);return i===e||!Kh(i)||p2(i)?!1:Jh(i).position==="fixed"||bre(i,e)}function sSe(t,e){const i=e.get(t);if(i)return i;let s=sE(t,[],!1).filter(l=>Kh(l)&&tx(l)!=="body"),n=null;const r=Jh(t).position==="fixed";let o=r?bg(t):t;for(;Kh(o)&&!p2(o);){const l=Jh(o),u=uM(o);!u&&l.position==="fixed"&&(n=null),(r?!u&&!n:!u&&l.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||hC(o)&&!u&&bre(t,o))?s=s.filter(y=>y!==o):n=l,o=bg(o)}return e.set(t,s),s}function nSe(t){let{element:e,boundary:i,rootBoundary:s,strategy:n}=t;const o=[...i==="clippingAncestors"?cM(e)?[]:sSe(e,this._c):[].concat(i),s],l=o[0],u=o.reduce((f,y)=>{const _=GY(e,y,n);return f.top=Ly(_.top,f.top),f.right=f2(_.right,f.right),f.bottom=f2(_.bottom,f.bottom),f.left=Ly(_.left,f.left),f},GY(e,l,n));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function rSe(t){const{width:e,height:i}=yre(t);return{width:e,height:i}}function oSe(t,e,i){const s=df(e),n=hm(e),r=i==="fixed",o=Ky(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const u=_g(0);if(s||!s&&!r)if((tx(e)!=="body"||hC(n))&&(l=hM(e)),s){const _=Ky(e,!0,r,e);u.x=_.x+e.clientLeft,u.y=_.y+e.clientTop}else n&&(u.x=_re(n));const f=o.left+l.scrollLeft-u.x,y=o.top+l.scrollTop-u.y;return{x:f,y,width:o.width,height:o.height}}function Nk(t){return Jh(t).position==="static"}function jY(t,e){return!df(t)||Jh(t).position==="fixed"?null:e?e(t):t.offsetParent}function xre(t,e){const i=Ac(t);if(cM(t))return i;if(!df(t)){let n=bg(t);for(;n&&!p2(n);){if(Kh(n)&&!Nk(n))return n;n=bg(n)}return i}let s=jY(t,e);for(;s&&Y3e(s)&&Nk(s);)s=jY(s,e);return s&&p2(s)&&Nk(s)&&!uM(s)?i:s||X3e(t)||i}const aSe=async function(t){const e=this.getOffsetParent||xre,i=this.getDimensions,s=await i(t.floating);return{reference:oSe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function lSe(t){return Jh(t).direction==="rtl"}const b$={convertOffsetParentRelativeRectToViewportRelativeRect:J3e,getDocumentElement:hm,getClippingRect:nSe,getOffsetParent:xre,getElementRects:aSe,getClientRects:Q3e,getDimensions:rSe,getScale:Vb,isElement:Kh,isRTL:lSe};function cSe(t,e){let i=null,s;const n=hm(t);function r(){var l;clearTimeout(s),(l=i)==null||l.disconnect(),i=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),r();const{left:f,top:y,width:_,height:x}=t.getBoundingClientRect();if(l||e(),!_||!x)return;const S=zP(y),P=zP(n.clientWidth-(f+_)),A=zP(n.clientHeight-(y+x)),k=zP(f),F={rootMargin:-S+"px "+-P+"px "+-A+"px "+-k+"px",threshold:Ly(0,f2(1,u))||1};let G=!0;function V(B){const W=B[0].intersectionRatio;if(W!==u){if(!G)return o();W?o(!1,W):s=setTimeout(()=>{o(!1,1e-7)},1e3)}G=!1}try{i=new IntersectionObserver(V,{...F,root:n.ownerDocument})}catch{i=new IntersectionObserver(V,F)}i.observe(t)}return o(!0),r}function uSe(t,e,i,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,f=lq(t),y=n||r?[...f?sE(f):[],...sE(e)]:[];y.forEach($=>{n&&$.addEventListener("scroll",i,{passive:!0}),r&&$.addEventListener("resize",i)});const _=f&&l?cSe(f,i):null;let x=-1,S=null;o&&(S=new ResizeObserver($=>{let[F]=$;F&&F.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var G;(G=S)==null||G.observe(e)})),i()}),f&&!u&&S.observe(f),S.observe(e));let P,A=u?Ky(t):null;u&&k();function k(){const $=Ky(t);A&&($.x!==A.x||$.y!==A.y||$.width!==A.width||$.height!==A.height)&&i(),A=$,P=requestAnimationFrame(k)}return i(),()=>{var $;y.forEach(F=>{n&&F.removeEventListener("scroll",i),r&&F.removeEventListener("resize",i)}),_==null||_(),($=S)==null||$.disconnect(),S=null,u&&cancelAnimationFrame(P)}}const hSe=H3e,dSe=V3e,fSe=U3e,BY=G3e,pSe=j3e,mSe=z3e,gSe=(t,e,i)=>{const s=new Map,n={platform:b$,...i},r={...n.platform,_c:s};return F3e(t,e,{...n,platform:r})};function ySe(t){return vSe(t)}function $k(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function vSe(t){for(let e=t;e;e=$k(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=$k(t);e;e=$k(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||uM(i)||e.tagName==="BODY"))return e}return null}(function(){if(Ef()){const e=b$.getOffsetParent;b$.getOffsetParent=i=>e(i,ySe)}})();function HY(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const wre=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:s="absolute",placement:n,flipDisabled:r,flipPlacements:o,offsetDistance:l,offsetSkidding:u,arrowEl:f,type:y})=>{var B;if(!e||!i)return null;const _=Gp(i)==="rtl",{x,y:S,placement:P,strategy:A,middlewareData:k}=await gSe(e,i,{strategy:s,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:YY(n,_),middleware:wSe({placement:n,flipDisabled:r,flipPlacements:o==null?void 0:o.map(W=>YY(W,_)),offsetDistance:l,offsetSkidding:u,arrowEl:f,type:y})});if(f&&k.arrow){const{x:W,y:J}=k.arrow,re=P.split("-")[0],se=W!=null?"left":"top",oe=ESe[re],pe={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=re==="left"||re==="right"?"horizontal":"vertical"),Object.assign(f.style,{...pe,[se]:`${se=="left"?W:J}px`,[re]:"100%",transform:oe})}const F=((B=k.hide)==null?void 0:B.referenceHidden)?"hidden":null,G=F?"none":null;i.setAttribute(_Se,P);const{open:V}=t;Object.assign(i.style,{visibility:F,pointerEvents:G,position:A,transform:V?`translate(${HY(x)}px,${HY(S)}px)`:"",top:0,left:0})},_Se="data-placement",UY=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],bSe="bottom-start",xSe="bottom-end",m2={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function wSe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:s,offsetSkidding:n,arrowEl:r,type:o}){const l=[fSe(),pSe()];if(o==="menu")return[...l,BY({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(o==="popover"||o==="tooltip"){const u=[...l,hSe({mainAxis:typeof s=="number"?s:0,crossAxis:typeof n=="number"?n:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?u.push(dSe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||u.push(BY(i?{fallbackPlacements:i}:{})),r&&u.push(mSe({element:r})),u}return[]}function Sre(t,e){const i=t.filter(s=>UY.includes(s));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${UY.map(s=>`"${s}"`).join(", ").trim()}`,{el:e}),i}function YY(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function cq(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(!nE.get(t))return Ere(t,e.referenceEl,e.floatingEl);await(i?SSe(t):wre)(t,e)}function SSe(t){let e=m9.get(t);return e||(e=D3e(wre,YU.reposition,{leading:!0,maxWait:YU.reposition}),m9.set(t,e),e)}const ESe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},nE=new WeakMap,m9=new WeakMap;async function Ere(t,e,i){if(!i.isConnected)return;const s=Ef()?uSe:(o,l,u)=>(u(),()=>{});nE.set(t,{state:"pending"});let n;const r=s(e,i,()=>{const o=t.reposition();n||(n=o)});return nE.set(t,{state:"active",cleanUp:r}),n}async function Pb(t,e,i){if(!(!i||!e)&&(dM(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning}),!!t.open))return Ere(t,e,i)}function dM(t,e,i){var n;if(!i||!e)return;const s=nE.get(t);(s==null?void 0:s.state)==="active"&&s.cleanUp(),nE.delete(t),(n=m9.get(t))==null||n.cancel(),m9.delete(t)}const XY=4,Cre=Math.ceil(Math.hypot(XY,XY));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const WY={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},CSe={width:12,height:6,strokeWidth:1},Pre=({floatingLayout:t,key:e,ref:i})=>{const{width:s,height:n,strokeWidth:r}=CSe,o=s/2,l=t==="vertical",u=`M0,0 H${s} L${s-o},${n} Q${o},${n} ${o},${n} Z`;return Ae("svg",{"aria-hidden":"true",class:WY.arrow,height:s,key:e,ref:i,viewBox:`0 0 ${s} ${s+(l?0:r)}`,width:s+(l?r:0)},Ae("path",{class:WY.arrowStroke,d:u,fill:"none","stroke-width":r+1}),Ae("path",{d:u,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */class PSe{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,s=e.find(n=>i.has(n));return i.get(s)},this.togglePopovers=e=>{const i=e.composedPath(),s=this.queryPopover(i);s&&!s.triggerDisabled&&(s.open=!s.open),Array.from(this.registeredElements.values()).filter(n=>n!==s&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():cC(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{h2e(e)||this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const bd={container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"headerContainer",heading:"heading"},TSe="auto",ZY="aria-controls",KY="aria-expanded",ISe=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",MSe=ISe,JY=new PSe,ASe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=$t(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=$t(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=$t(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=$t(this,"calcitePopoverOpen",6),this.mutationObserver=wl("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${lm()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Sre(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),Pb(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:s,effectiveReferenceElement:n}=this;e&&s&&!n&&console.warn(`${i.tagName}: reference-element id "${s}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(KY,br(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(ZY,i),JY.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(ZY),e.removeAttribute(KY)),JY.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=Cre,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=TSe,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?yS(this):y$(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){af(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){jc(this,this.effectiveLocale)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),Pl(this),Bc(this),are(this),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}async componentWillLoad(){await Gc(this),ao(this)}componentDidLoad(){lo(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.open&&af(this),this.hasLoaded=!0}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),Tl(this),Hc(this),dM(this,this.effectiveReferenceElement,this.el),yS(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:s,placement:n,overlayPositioning:r,flipDisabled:o,filteredFlipPlacements:l,offsetDistance:u,offsetSkidding:f,arrowEl:y}=this;return cq(this,{floatingEl:i,referenceEl:s,overlayPositioning:r,placement:n,flipDisabled:o,flipPlacements:l,offsetDistance:u,offsetSkidding:f,arrowEl:y,type:"popover"},e)}async setFocus(){await co(this),Io(this.el),nM(this.el)}async updateFocusTrapElements(){lre(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?lC(i,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),y$(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),yS(this)}renderCloseButton(){const{messages:e,closable:i}=this;return i?Ae("div",{class:bd.closeButtonContainer,key:bd.closeButtonContainer},Ae("calcite-action",{appearance:"transparent",class:bd.closeButton,onClick:this.hide,ref:s=>this.closeButtonEl=s,scale:this.scale,text:e.close},Ae("calcite-icon",{icon:"x",scale:Xa(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,s=e?Ae(nq,{class:bd.heading,level:i},e):null;return s?Ae("div",{class:bd.header,key:bd.header},s,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:s,open:n,pointerDisabled:r,floatingLayout:o}=this,l=e&&n,u=!l,f=r?null:Ae(Pre,{floatingLayout:o,key:"floating-arrow",ref:this.storeArrowEl});return Ae(hr,{key:"a563d48090d6e6c0c138023e169667834f657c4c","aria-hidden":br(u),"aria-label":s,"aria-live":"polite","calcite-hydrated-hidden":u,id:this.getId(),role:"dialog"},Ae("div",{key:"73053dbdce2cfc68fcd42667089d611e81010955",class:{[bd.container]:!0,[m2.animation]:!0,[m2.animationActive]:l},ref:this.setTransitionEl},f,Ae("div",{key:"1fbcd45ee42b10a67881ced74db2db051231c94d",class:{[bd.hasHeader]:!!i,[bd.headerContainer]:!0}},this.renderHeader(),Ae("div",{key:"522abe801b98787863aac14d990b948d2d286156",class:bd.content},Ae("slot",{key:"022a8f690288acdbac4ec1b3eccf807ffe382d5d"})),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return MSe}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function ix(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,ASe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break}})}ix();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const QY={menu:"menu",defaultTrigger:"default-trigger"},g2={tooltip:"tooltip",trigger:"trigger"},DSe={menu:"ellipsis"},kSe="data-active",NSe=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}",$Se=NSe,OSe=["ArrowUp","ArrowDown","End","Home"],RSe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=$t(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${lm()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:s,label:n}=this,r=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==r&&(this.disconnectMenuButtonEl(),this.menuButtonEl=r,this.setTooltipReferenceElement(),r&&(r.active=s,r.setAttribute("aria-controls",i),r.setAttribute("aria-expanded",br(s)),r.setAttribute("aria-haspopup","true"),r.id||(r.id=e),r.label||(r.label=n),r.text||(r.text=n),r.addEventListener("click",this.menuButtonClick),r.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:s,open:n}=this;e&&(e.referenceElement=!i&&!n?s:null)},this.updateAction=(e,i)=>{const{guid:s,activeMenuItemIndex:n}=this,r=`${s}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=r),e.toggleAttribute(kSe,i===n)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((s,n)=>n!=null&&n.matches("calcite-action")?(s.push(n),s):n!=null&&n.matches("calcite-action-group")?s.concat(Array.from(n.querySelectorAll("calcite-action"))):s,[]);this.actionElements=i.filter(s=>!s.disabled&&!s.hidden)},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:s,activeMenuItemIndex:n,open:r}=this;if(s.length){if(cC(i)){if(e.preventDefault(),!r){this.toggleOpen();return}const o=s[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,s)}},this.handleActionNavigation=(e,i,s)=>{if(!this.isValidKey(i,OSe))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=s.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=s.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=kY(Math.max(n-1,-1),s.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=kY(n+1,s.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){ao(this)}componentDidLoad(){lo(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await co(this),Yp(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:s,expanded:n}=this;return Ae("slot",{name:g2.trigger,onSlotchange:this.setMenuButtonEl},Ae("calcite-action",{appearance:e,class:QY.defaultTrigger,icon:DSe.menu,ref:this.setDefaultMenuButtonEl,scale:s,text:i,textEnabled:n}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:s,menuId:n,menuButtonEl:r,label:o,placement:l,overlayPositioning:u,flipPlacements:f}=this,y=e[i],_=(y==null?void 0:y.id)||null;return Ae("calcite-popover",{autoClose:!0,flipPlacements:f,focusTrapDisabled:!0,label:o,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:s,overlayPositioning:u,placement:l,pointerDisabled:!0,referenceElement:r},Ae("div",{"aria-activedescendant":_,"aria-labelledby":r==null?void 0:r.id,class:QY.menu,id:n,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},Ae("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return Ae(sM,{key:"d13aa4f3d43fb5651c0487ccfa456813f69955d2"},this.renderMenuButton(),this.renderMenuItems(),Ae("slot",{key:"b63d187516c766db6a1b1db3df34050fdec9e6ce",name:g2.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(s=>s===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return $Se}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function dC(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,RSe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break;case"calcite-popover":customElements.get(e)||ix();break}})}dC();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const eX={scrim:"scrim",content:"content"},tX={s:72,l:480},LSe=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",FSe=LSe,zSe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=wl("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=o2e(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}connectedCallback(){var e;Pl(this),Bc(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await Gc(this)}disconnectedCallback(){var e;Tl(this),Hc(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:s}=this;return Ae("div",{key:"286b03bb4a18b45f1b6914684a5178e952a44127",class:eX.scrim},i?Ae("calcite-loader",{label:s.loading,ref:this.storeLoaderEl,scale:this.loaderScale}):null,Ae("div",{key:"0f8cd111720239b204d0d201610c4145d5616753",class:eX.content,hidden:!e},Ae("slot",{key:"fe7bbced9871c9179971da0ef7ca07ea1c9ac33e",onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<tX.s?"s":e>=tX.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return FSe}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function uq(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,zSe);break;case"calcite-loader":customElements.get(e)||Uc();break}})}uq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Mr={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end"},iX={close:"close",collapse:"collapse"},qP={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Yn={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"},qSe=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}:host([scale=s]){--calcite-internal-panel-default-padding:var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding:10px}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-internal-panel-default-padding:var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-lg)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-internal-panel-default-padding:var(--calcite-spacing-xl);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-xxl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1);line-height:1.5rem}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0);line-height:1.25rem}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;border-block-start:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.container{position:relative;margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;outline-color:transparent;padding:var(--calcite-panel-content-space, 0);background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content-top,.content-bottom{padding:var(--calcite-internal-panel-default-padding)}.header-content{flex:1 1 auto;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-padding)}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-color-border-3);padding:var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-padding))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-padding)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-padding)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-padding)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}`,VSe=qSe,GSe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=$t(this,"calcitePanelClose",6),this.calcitePanelToggle=$t(this,"calcitePanelToggle",6),this.calcitePanelScroll=$t(this,"calcitePanelScroll",6),this.resizeObserver=wl("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.handleUserClose(),e.preventDefault())},this.handleUserClose=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.open=()=>{this.isClosed=!1},this.close=async()=>{const e=this.beforeClose??(()=>Promise.resolve());try{await e()}catch{requestAnimationFrame(()=>{this.closed=!1});return}this.isClosed=!0},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=Is(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=Is(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=Is(e)},this.handleActionBarSlotChange=e=>{const i=Nu(e).filter(s=>s==null?void 0:s.matches("calcite-action-bar"));i.forEach(s=>s.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=Is(e)},this.handleFabSlotChange=e=>{this.hasFab=Is(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=Is(e)},this.handleFooterEndSlotChange=e=>{this.hasFooterEndContent=Is(e)},this.handleFooterStartSlotChange=e=>{this.hasFooterStartContent=Is(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=Is(e)},this.contentBottomSlotChangeHandler=e=>{this.hasContentBottom=Is(e)},this.contentTopSlotChangeHandler=e=>{this.hasContentTop=Is(e)},this.setPanelScrollEl=e=>{var i,s;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((s=this.resizeObserver)==null||s.observe(e),this.resizeHandler())},this.handleAlertsSlotChange=e=>{var i;(i=Nu(e))==null||i.map(s=>{s.nodeName==="CALCITE-ALERT"&&(s.embedded=!0)})},this.beforeClose=void 0,this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuFlipPlacements=void 0,this.menuOpen=!1,this.menuPlacement=xSe,this.messageOverrides=void 0,this.messages=void 0,this.overlayPositioning="absolute",this.scale="m",this.isClosed=!1,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}toggleDialog(e){e?this.close():this.open()}onMessagesChange(){}connectedCallback(){Pl(this),Bc(this)}async componentWillLoad(){ao(this),this.isClosed=this.closed,await Gc(this)}componentDidLoad(){lo(this)}componentDidRender(){Cf(this)}disconnectedCallback(){var e;Tl(this),Hc(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){jc(this,this.effectiveLocale)}async setFocus(){await co(this),nM(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:s,hasHeaderContent:n}=this,r=e?Ae(nq,{class:Mr.heading,level:i},e):null,o=s?Ae("span",{class:Mr.description},s):null;return!n&&(r||o)?Ae("div",{class:Mr.headerContent,key:"header-content"},r,o):null}renderActionBar(){return Ae("div",{class:Mr.actionBarContainer,hidden:!this.hasActionBar},Ae("slot",{name:Yn.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return Ae("div",{class:Mr.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},Ae("slot",{name:Yn.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return Ae("div",{class:{[Mr.headerActionsStart]:!0,[Mr.headerActions]:!0},hidden:!e,key:"header-actions-start"},Ae("slot",{name:Yn.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:s,collapsed:n,collapseDirection:r,collapsible:o,hasMenuItems:l}=this,{collapse:u,expand:f,close:y}=i,_=[qP.expand,qP.collapse];r==="up"&&_.reverse();const x=o?Ae("calcite-action",{"aria-expanded":br(!n),"aria-label":u,icon:n?_[0]:_[1],id:iX.collapse,onClick:this.collapse,scale:this.scale,text:u,title:n?f:u}):null,S=s?Ae("calcite-action",{"aria-label":y,icon:qP.close,id:iX.close,onClick:this.handleUserClose,scale:this.scale,text:y,title:y}):null,P=Ae("slot",{name:Yn.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),A=e||x||S||l;return Ae("div",{class:{[Mr.headerActionsEnd]:!0,[Mr.headerActions]:!0},hidden:!A,key:"header-actions-end"},P,this.renderMenu(),x,S)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:s,menuFlipPlacements:n,menuPlacement:r}=this;return Ae("calcite-action-menu",{flipPlacements:n??["top","bottom"],hidden:!e,key:"menu",label:i.options,open:s,overlayPositioning:this.overlayPositioning,placement:r},Ae("calcite-action",{icon:qP.menu,scale:this.scale,slot:g2.trigger,text:i.options}),Ae("slot",{name:Yn.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:s,closable:n,collapsible:r,hasMenuItems:o,hasActionBar:l}=this,u=this.renderHeaderContent(),f=e||!!u||i||s||r||n||o;return this.showHeaderContent=f,Ae("header",{class:Mr.header,hidden:!(f||l)},Ae("div",{class:{[Mr.headerContainer]:!0,[Mr.headerContainerBorderEnd]:l},hidden:!f},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),u,this.renderHeaderActionsEnd()),this.renderActionBar(),this.renderContentTop())}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:s,hasFooterActions:n}=this,r=i||e||s||n;return Ae("footer",{class:Mr.footer,hidden:!r},Ae("div",{class:Mr.footerContent,hidden:!s},Ae("slot",{name:Yn.footer,onSlotchange:this.handleFooterSlotChange})),Ae("div",{class:Mr.footerStart,hidden:s||!i},Ae("slot",{name:Yn.footerStart,onSlotchange:this.handleFooterStartSlotChange})),Ae("div",{class:Mr.footerEnd,hidden:s||!e},Ae("slot",{name:Yn.footerEnd,onSlotchange:this.handleFooterEndSlotChange})),Ae("div",{class:Mr.footerActions,hidden:s||!n},Ae("slot",{key:"footer-actions-slot",name:Yn.footerActions,onSlotchange:this.handleFooterActionsSlotChange})))}renderContent(){return Ae("div",{class:Mr.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},Ae("slot",null),this.renderFab())}renderContentBottom(){return Ae("div",{class:Mr.contentBottom,hidden:!this.hasContentBottom},Ae("slot",{name:Yn.contentBottom,onSlotchange:this.contentBottomSlotChangeHandler}))}renderContentTop(){return Ae("div",{class:Mr.contentTop,hidden:!this.hasContentTop},Ae("slot",{name:Yn.contentTop,onSlotchange:this.contentTopSlotChangeHandler}))}renderFab(){return Ae("div",{class:Mr.fabContainer,hidden:!this.hasFab},Ae("slot",{name:Yn.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{disabled:e,loading:i,isClosed:s}=this,n=Ae("article",{key:"0f439dffdca536eb6973ac386b0566091249aee3","aria-busy":br(i),class:Mr.container,hidden:s,ref:this.setContainerRef},this.renderHeaderNode(),this.renderContent(),this.renderContentBottom(),this.renderFooterNode(),Ae("slot",{key:"alerts",name:Yn.alerts,onSlotchange:this.handleAlertsSlotChange}));return Ae(hr,{key:"6e5baec07ecb356871dea038ebc2d5ee2d8ed54f",onKeyDown:this.panelKeyDownHandler},Ae(Pf,{key:"924cda1799b359f1bb3fb119cebfff5a7349b72d",disabled:e},i?Ae("calcite-scrim",{loading:i}):null,n))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return VSe}},[1,"calcite-panel",{beforeClose:[16],closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuFlipPlacements:[16],menuOpen:[516,"menu-open"],menuPlacement:[513,"menu-placement"],messageOverrides:[1040],messages:[1040],overlayPositioning:[513,"overlay-positioning"],scale:[513],isClosed:[32],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasContentBottom:[32],hasContentTop:[32],hasFab:[32],hasFooterActions:[32],hasFooterContent:[32],hasFooterEndContent:[32],hasFooterStartContent:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Tre(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,GSe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-action-menu":customElements.get(e)||dC();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break;case"calcite-popover":customElements.get(e)||ix();break;case"calcite-scrim":customElements.get(e)||uq();break}})}Tre();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var jSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ire={exports:{}};(function(t,e){(function(i,s){t.exports=s()})(jSe,function(){function i(X,H){var te=Object.keys(X);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(X);H&&(le=le.filter(function(he){return Object.getOwnPropertyDescriptor(X,he).enumerable})),te.push.apply(te,le)}return te}function s(X){for(var H=1;H<arguments.length;H++){var te=arguments[H]!=null?arguments[H]:{};H%2?i(Object(te),!0).forEach(function(le){u(X,le,te[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(te)):i(Object(te)).forEach(function(le){Object.defineProperty(X,le,Object.getOwnPropertyDescriptor(te,le))})}return X}function n(X){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n(X)}function r(X,H){if(!(X instanceof H))throw new TypeError("Cannot call a class as a function")}function o(X,H){for(var te=0;te<H.length;te++){var le=H[te];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(X,A(le.key),le)}}function l(X,H,te){return H&&o(X.prototype,H),Object.defineProperty(X,"prototype",{writable:!1}),X}function u(X,H,te){return(H=A(H))in X?Object.defineProperty(X,H,{value:te,enumerable:!0,configurable:!0,writable:!0}):X[H]=te,X}function f(X,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(H&&H.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),H&&_(X,H)}function y(X){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},y(X)}function _(X,H){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,le){return te.__proto__=le,te},_(X,H)}function x(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function S(X){var H=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var te,le=y(X);if(H){var he=y(this).constructor;te=Reflect.construct(le,arguments,he)}else te=le.apply(this,arguments);return function(be,Te){if(Te&&(typeof Te=="object"||typeof Te=="function"))return Te;if(Te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(be)}(this,te)}}function P(){return P=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(X,H,te){var le=function(be,Te){for(;!Object.prototype.hasOwnProperty.call(be,Te)&&(be=y(be))!==null;);return be}(X,H);if(le){var he=Object.getOwnPropertyDescriptor(le,H);return he.get?he.get.call(arguments.length<3?X:te):he.value}},P.apply(this,arguments)}function A(X){var H=function(te,le){if(typeof te!="object"||te===null)return te;var he=te[Symbol.toPrimitive];if(he!==void 0){var be=he.call(te,le);if(typeof be!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(te)}(X,"string");return typeof H=="symbol"?H:H+""}var k=function(X){return!(!X||!X.Window)&&X instanceof X.Window},$=void 0,F=void 0;function G(X){$=X;var H=X.document.createTextNode("");H.ownerDocument!==X.document&&typeof X.wrap=="function"&&X.wrap(H)===H&&(X=X.wrap(X)),F=X}function V(X){return k(X)?X:(X.ownerDocument||X).defaultView||F.window}typeof window<"u"&&window&&G(window);var B=function(X){return!!X&&n(X)==="object"},W=function(X){return typeof X=="function"},J={window:function(X){return X===F||k(X)},docFrag:function(X){return B(X)&&X.nodeType===11},object:B,func:W,number:function(X){return typeof X=="number"},bool:function(X){return typeof X=="boolean"},string:function(X){return typeof X=="string"},element:function(X){if(!X||n(X)!=="object")return!1;var H=V(X)||F;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?X instanceof Element||X instanceof H.Element:X.nodeType===1&&typeof X.nodeName=="string"},plainObject:function(X){return B(X)&&!!X.constructor&&/function Object\b/.test(X.constructor.toString())},array:function(X){return B(X)&&X.length!==void 0&&W(X.splice)}};function re(X){var H=X.interaction;if(H.prepared.name==="drag"){var te=H.prepared.axis;te==="x"?(H.coords.cur.page.y=H.coords.start.page.y,H.coords.cur.client.y=H.coords.start.client.y,H.coords.velocity.client.y=0,H.coords.velocity.page.y=0):te==="y"&&(H.coords.cur.page.x=H.coords.start.page.x,H.coords.cur.client.x=H.coords.start.client.x,H.coords.velocity.client.x=0,H.coords.velocity.page.x=0)}}function se(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="drag"){var le=te.prepared.axis;if(le==="x"||le==="y"){var he=le==="x"?"y":"x";H.page[he]=te.coords.start.page[he],H.client[he]=te.coords.start.client[he],H.delta[he]=0}}}var oe={id:"actions/drag",install:function(X){var H=X.actions,te=X.Interactable,le=X.defaults;te.prototype.draggable=oe.draggable,H.map.drag=oe,H.methodDict.drag="draggable",le.actions.drag=oe.defaults},listeners:{"interactions:before-action-move":re,"interactions:action-resume":re,"interactions:action-move":se,"auto-start:check":function(X){var H=X.interaction,te=X.interactable,le=X.buttons,he=te.options.drag;if(he&&he.enabled&&(!H.pointerIsDown||!/mouse|pointer/.test(H.pointerType)||(le&te.options.drag.mouseButtons)!=0))return X.action={name:"drag",axis:he.lockAxis==="start"?he.startAxis:he.lockAxis},!1}},draggable:function(X){return J.object(X)?(this.options.drag.enabled=X.enabled!==!1,this.setPerAction("drag",X),this.setOnEvents("drag",X),/^(xy|x|y|start)$/.test(X.lockAxis)&&(this.options.drag.lockAxis=X.lockAxis),/^(xy|x|y)$/.test(X.startAxis)&&(this.options.drag.startAxis=X.startAxis),this):J.bool(X)?(this.options.drag.enabled=X,this):this.options.drag},beforeMove:re,move:se,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(X){return X.search("drag")===0}},pe=oe,ce={init:function(X){var H=X;ce.document=H.document,ce.DocumentFragment=H.DocumentFragment||ue,ce.SVGElement=H.SVGElement||ue,ce.SVGSVGElement=H.SVGSVGElement||ue,ce.SVGElementInstance=H.SVGElementInstance||ue,ce.Element=H.Element||ue,ce.HTMLElement=H.HTMLElement||ce.Element,ce.Event=H.Event,ce.Touch=H.Touch||ue,ce.PointerEvent=H.PointerEvent||H.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ue(){}var ne=ce,de={init:function(X){var H=ne.Element,te=X.navigator||{};de.supportsTouch="ontouchstart"in X||J.func(X.DocumentTouch)&&ne.document instanceof X.DocumentTouch,de.supportsPointerEvent=te.pointerEnabled!==!1&&!!ne.PointerEvent,de.isIOS=/iP(hone|od|ad)/.test(te.platform),de.isIOS7=/iP(hone|od|ad)/.test(te.platform)&&/OS 7[^\d]/.test(te.appVersion),de.isIe9=/MSIE 9/.test(te.userAgent),de.isOperaMobile=te.appName==="Opera"&&de.supportsTouch&&/Presto/.test(te.userAgent),de.prefixedMatchesSelector="matches"in H.prototype?"matches":"webkitMatchesSelector"in H.prototype?"webkitMatchesSelector":"mozMatchesSelector"in H.prototype?"mozMatchesSelector":"oMatchesSelector"in H.prototype?"oMatchesSelector":"msMatchesSelector",de.pEventTypes=de.supportsPointerEvent?ne.PointerEvent===X.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,de.wheelEvent=ne.document&&"onmousewheel"in ne.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Se=de;function Pe(X,H){if(X.contains)return X.contains(H);for(;H;){if(H===X)return!0;H=H.parentNode}return!1}function Re(X,H){for(;J.element(X);){if(we(X,H))return X;X=Oe(X)}return null}function Oe(X){var H=X.parentNode;if(J.docFrag(H)){for(;(H=H.host)&&J.docFrag(H););return H}return H}function we(X,H){return F!==$&&(H=H.replace(/\/deep\//g," ")),X[Se.prefixedMatchesSelector](H)}var Fe=function(X){return X.parentNode||X.host};function it(X,H){for(var te,le=[],he=X;(te=Fe(he))&&he!==H&&te!==he.ownerDocument;)le.unshift(he),he=te;return le}function vt(X,H,te){for(;J.element(X);){if(we(X,H))return!0;if((X=Oe(X))===te)return we(X,H)}return!1}function ot(X){return X.correspondingUseElement||X}function ut(X){var H=X instanceof ne.SVGElement?X.getBoundingClientRect():X.getClientRects()[0];return H&&{left:H.left,right:H.right,top:H.top,bottom:H.bottom,width:H.width||H.right-H.left,height:H.height||H.bottom-H.top}}function Ct(X){var H,te=ut(X);if(!Se.isIOS7&&te){var le={x:(H=(H=V(X))||F).scrollX||H.document.documentElement.scrollLeft,y:H.scrollY||H.document.documentElement.scrollTop};te.left+=le.x,te.right+=le.x,te.top+=le.y,te.bottom+=le.y}return te}function qt(X){for(var H=[];X;)H.push(X),X=Oe(X);return H}function Lt(X){return!!J.string(X)&&(ne.document.querySelector(X),!0)}function Dt(X,H){for(var te in H)X[te]=H[te];return X}function Wi(X,H,te){return X==="parent"?Oe(te):X==="self"?H.getRect(te):Re(te,X)}function us(X,H,te,le){var he=X;return J.string(he)?he=Wi(he,H,te):J.func(he)&&(he=he.apply(void 0,le)),J.element(he)&&(he=Ct(he)),he}function fn(X){return X&&{x:"x"in X?X.x:X.left,y:"y"in X?X.y:X.top}}function Us(X){return!X||"x"in X&&"y"in X||((X=Dt({},X)).x=X.left||0,X.y=X.top||0,X.width=X.width||(X.right||0)-X.x,X.height=X.height||(X.bottom||0)-X.y),X}function dr(X,H,te){X.left&&(H.left+=te.x),X.right&&(H.right+=te.x),X.top&&(H.top+=te.y),X.bottom&&(H.bottom+=te.y),H.width=H.right-H.left,H.height=H.bottom-H.top}function ho(X,H,te){var le=te&&X.options[te];return fn(us(le&&le.origin||X.options.origin,X,H,[X&&H]))||{x:0,y:0}}function ss(X,H){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function($e){return!0},le=arguments.length>3?arguments[3]:void 0;if(le=le||{},J.string(X)&&X.search(" ")!==-1&&(X=ye(X)),J.array(X))return X.forEach(function($e){return ss($e,H,te,le)}),le;if(J.object(X)&&(H=X,X=""),J.func(H)&&te(X))le[X]=le[X]||[],le[X].push(H);else if(J.array(H))for(var he=0,be=H;he<be.length;he++){var Te=be[he];ss(X,Te,te,le)}else if(J.object(H))for(var Me in H)ss(ye(Me).map(function($e){return"".concat(X).concat($e)}),H[Me],te,le);return le}function ye(X){return X.trim().split(/ +/)}var Fi=function(X,H){return Math.sqrt(X*X+H*H)},Sr=["webkit","moz"];function ri(X,H){X.__set||(X.__set={});var te=function(he){if(Sr.some(function(be){return he.indexOf(be)===0}))return 1;typeof X[he]!="function"&&he!=="__set"&&Object.defineProperty(X,he,{get:function(){return he in X.__set?X.__set[he]:X.__set[he]=H[he]},set:function(be){X.__set[he]=be},configurable:!0})};for(var le in H)te(le);return X}function Ai(X,H){X.page=X.page||{},X.page.x=H.page.x,X.page.y=H.page.y,X.client=X.client||{},X.client.x=H.client.x,X.client.y=H.client.y,X.timeStamp=H.timeStamp}function pn(X){X.page.x=0,X.page.y=0,X.client.x=0,X.client.y=0}function ms(X){return X instanceof ne.Event||X instanceof ne.Touch}function Ji(X,H,te){return X=X||"page",(te=te||{}).x=H[X+"X"],te.y=H[X+"Y"],te}function tn(X,H){return H=H||{x:0,y:0},Se.isOperaMobile&&ms(X)?(Ji("screen",X,H),H.x+=window.scrollX,H.y+=window.scrollY):Ji("page",X,H),H}function mn(X){return J.number(X.pointerId)?X.pointerId:X.identifier}function Br(X,H,te){var le=H.length>1?xt(H):H[0];tn(le,X.page),function(he,be){be=be||{},Se.isOperaMobile&&ms(he)?Ji("screen",he,be):Ji("client",he,be)}(le,X.client),X.timeStamp=te}function Cs(X){var H=[];return J.array(X)?(H[0]=X[0],H[1]=X[1]):X.type==="touchend"?X.touches.length===1?(H[0]=X.touches[0],H[1]=X.changedTouches[0]):X.touches.length===0&&(H[0]=X.changedTouches[0],H[1]=X.changedTouches[1]):(H[0]=X.touches[0],H[1]=X.touches[1]),H}function xt(X){for(var H={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},te=0;te<X.length;te++){var le=X[te];for(var he in H)H[he]+=le[he]}for(var be in H)H[be]/=X.length;return H}function Ys(X){if(!X.length)return null;var H=Cs(X),te=Math.min(H[0].pageX,H[1].pageX),le=Math.min(H[0].pageY,H[1].pageY),he=Math.max(H[0].pageX,H[1].pageX),be=Math.max(H[0].pageY,H[1].pageY);return{x:te,y:le,left:te,top:le,right:he,bottom:be,width:he-te,height:be-le}}function m(X,H){var te=H+"X",le=H+"Y",he=Cs(X),be=he[0][te]-he[1][te],Te=he[0][le]-he[1][le];return Fi(be,Te)}function j(X,H){var te=H+"X",le=H+"Y",he=Cs(X),be=he[1][te]-he[0][te],Te=he[1][le]-he[0][le];return 180*Math.atan2(Te,be)/Math.PI}function T(X){return J.string(X.pointerType)?X.pointerType:J.number(X.pointerType)?[void 0,void 0,"touch","pen","mouse"][X.pointerType]:/touch/.test(X.type||"")||X instanceof ne.Touch?"touch":"mouse"}function p(X){var H=J.func(X.composedPath)?X.composedPath():X.path;return[ot(H?H[0]:X.target),ot(X.currentTarget)]}var h=function(){function X(H){r(this,X),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=H}return l(X,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),X}();Object.defineProperty(h.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var a=function(X,H){for(var te=0;te<H.length;te++){var le=H[te];X.push(le)}return X},c=function(X){return a([],X)},d=function(X,H){for(var te=0;te<X.length;te++)if(H(X[te],te,X))return te;return-1},g=function(X,H){return X[d(X,H)]},v=function(X){f(te,X);var H=S(te);function te(le,he,be){var Te;r(this,te),(Te=H.call(this,he._interaction)).dropzone=void 0,Te.dragEvent=void 0,Te.relatedTarget=void 0,Te.draggable=void 0,Te.propagationStopped=!1,Te.immediatePropagationStopped=!1;var Me=be==="dragleave"?le.prev:le.cur,$e=Me.element,je=Me.dropzone;return Te.type=be,Te.target=$e,Te.currentTarget=$e,Te.dropzone=je,Te.dragEvent=he,Te.relatedTarget=he.target,Te.draggable=he.interactable,Te.timeStamp=he.timeStamp,Te}return l(te,[{key:"reject",value:function(){var le=this,he=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&he.cur.dropzone===this.dropzone&&he.cur.element===this.target)if(he.prev.dropzone=this.dropzone,he.prev.element=this.target,he.rejected=!0,he.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var be=he.activeDrops,Te=d(be,function($e){var je=$e.dropzone,Le=$e.element;return je===le.dropzone&&Le===le.target});he.activeDrops.splice(Te,1);var Me=new te(he,this.dragEvent,"dropdeactivate");Me.dropzone=this.dropzone,Me.target=this.target,this.dropzone.fire(Me)}else this.dropzone.fire(new te(he,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),te}(h);function b(X,H){for(var te=0,le=X.slice();te<le.length;te++){var he=le[te],be=he.dropzone,Te=he.element;H.dropzone=be,H.target=Te,be.fire(H),H.propagationStopped=H.immediatePropagationStopped=!1}}function C(X,H){for(var te=function(be,Te){for(var Me=[],$e=0,je=be.interactables.list;$e<je.length;$e++){var Le=je[$e];if(Le.options.drop.enabled){var Ke=Le.options.drop.accept;if(!(J.element(Ke)&&Ke!==Te||J.string(Ke)&&!we(Te,Ke)||J.func(Ke)&&!Ke({dropzone:Le,draggableElement:Te})))for(var ft=0,Mt=Le.getAllElements();ft<Mt.length;ft++){var Tt=Mt[ft];Tt!==Te&&Me.push({dropzone:Le,element:Tt,rect:Le.getRect(Tt)})}}}return Me}(X,H),le=0;le<te.length;le++){var he=te[le];he.rect=he.dropzone.getRect(he.element)}return te}function M(X,H,te){for(var le=X.dropState,he=X.interactable,be=X.element,Te=[],Me=0,$e=le.activeDrops;Me<$e.length;Me++){var je=$e[Me],Le=je.dropzone,Ke=je.element,ft=je.rect,Mt=Le.dropCheck(H,te,he,be,Ke,ft);Te.push(Mt?Ke:null)}var Tt=function(Rt){for(var Xt,Gt,ai,Ii=[],es=0;es<Rt.length;es++){var Si=Rt[es],Pi=Rt[Xt];if(Si&&es!==Xt)if(Pi){var Er=Fe(Si),gn=Fe(Pi);if(Er!==Si.ownerDocument)if(gn!==Si.ownerDocument)if(Er!==gn){Ii=Ii.length?Ii:it(Pi);var Ta=void 0;if(Pi instanceof ne.HTMLElement&&Si instanceof ne.SVGElement&&!(Si instanceof ne.SVGSVGElement)){if(Si===gn)continue;Ta=Si.ownerSVGElement}else Ta=Si;for(var fo=it(Ta,Pi.ownerDocument),Jc=0;fo[Jc]&&fo[Jc]===Ii[Jc];)Jc++;var c1=[fo[Jc-1],fo[Jc],Ii[Jc]];if(c1[0])for(var km=c1[0].lastChild;km;){if(km===c1[1]){Xt=es,Ii=fo;break}if(km===c1[2])break;km=km.previousSibling}}else ai=Pi,(parseInt(V(Gt=Si).getComputedStyle(Gt).zIndex,10)||0)>=(parseInt(V(ai).getComputedStyle(ai).zIndex,10)||0)&&(Xt=es);else Xt=es}else Xt=es}return Xt}(Te);return le.activeDrops[Tt]||null}function O(X,H,te){var le=X.dropState,he={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return te.type==="dragstart"&&(he.activate=new v(le,te,"dropactivate"),he.activate.target=null,he.activate.dropzone=null),te.type==="dragend"&&(he.deactivate=new v(le,te,"dropdeactivate"),he.deactivate.target=null,he.deactivate.dropzone=null),le.rejected||(le.cur.element!==le.prev.element&&(le.prev.dropzone&&(he.leave=new v(le,te,"dragleave"),te.dragLeave=he.leave.target=le.prev.element,te.prevDropzone=he.leave.dropzone=le.prev.dropzone),le.cur.dropzone&&(he.enter=new v(le,te,"dragenter"),te.dragEnter=le.cur.element,te.dropzone=le.cur.dropzone)),te.type==="dragend"&&le.cur.dropzone&&(he.drop=new v(le,te,"drop"),te.dropzone=le.cur.dropzone,te.relatedTarget=le.cur.element),te.type==="dragmove"&&le.cur.dropzone&&(he.move=new v(le,te,"dropmove"),te.dropzone=le.cur.dropzone)),he}function L(X,H){var te=X.dropState,le=te.activeDrops,he=te.cur,be=te.prev;H.leave&&be.dropzone.fire(H.leave),H.enter&&he.dropzone.fire(H.enter),H.move&&he.dropzone.fire(H.move),H.drop&&he.dropzone.fire(H.drop),H.deactivate&&b(le,H.deactivate),te.prev.dropzone=he.dropzone,te.prev.element=he.element}function q(X,H){var te=X.interaction,le=X.iEvent,he=X.event;if(le.type==="dragmove"||le.type==="dragend"){var be=te.dropState;H.dynamicDrop&&(be.activeDrops=C(H,te.element));var Te=le,Me=M(te,Te,he);be.rejected=be.rejected&&!!Me&&Me.dropzone===be.cur.dropzone&&Me.element===be.cur.element,be.cur.dropzone=Me&&Me.dropzone,be.cur.element=Me&&Me.element,be.events=O(te,0,Te)}}var U={id:"actions/drop",install:function(X){var H=X.actions,te=X.interactStatic,le=X.Interactable,he=X.defaults;X.usePlugin(pe),le.prototype.dropzone=function(be){return function(Te,Me){if(J.object(Me)){if(Te.options.drop.enabled=Me.enabled!==!1,Me.listeners){var $e=ss(Me.listeners),je=Object.keys($e).reduce(function(Ke,ft){return Ke[/^(enter|leave)/.test(ft)?"drag".concat(ft):/^(activate|deactivate|move)/.test(ft)?"drop".concat(ft):ft]=$e[ft],Ke},{}),Le=Te.options.drop.listeners;Le&&Te.off(Le),Te.on(je),Te.options.drop.listeners=je}return J.func(Me.ondrop)&&Te.on("drop",Me.ondrop),J.func(Me.ondropactivate)&&Te.on("dropactivate",Me.ondropactivate),J.func(Me.ondropdeactivate)&&Te.on("dropdeactivate",Me.ondropdeactivate),J.func(Me.ondragenter)&&Te.on("dragenter",Me.ondragenter),J.func(Me.ondragleave)&&Te.on("dragleave",Me.ondragleave),J.func(Me.ondropmove)&&Te.on("dropmove",Me.ondropmove),/^(pointer|center)$/.test(Me.overlap)?Te.options.drop.overlap=Me.overlap:J.number(Me.overlap)&&(Te.options.drop.overlap=Math.max(Math.min(1,Me.overlap),0)),"accept"in Me&&(Te.options.drop.accept=Me.accept),"checker"in Me&&(Te.options.drop.checker=Me.checker),Te}return J.bool(Me)?(Te.options.drop.enabled=Me,Te):Te.options.drop}(this,be)},le.prototype.dropCheck=function(be,Te,Me,$e,je,Le){return function(Ke,ft,Mt,Tt,Rt,Xt,Gt){var ai=!1;if(!(Gt=Gt||Ke.getRect(Xt)))return!!Ke.options.drop.checker&&Ke.options.drop.checker(ft,Mt,ai,Ke,Xt,Tt,Rt);var Ii=Ke.options.drop.overlap;if(Ii==="pointer"){var es=ho(Tt,Rt,"drag"),Si=tn(ft);Si.x+=es.x,Si.y+=es.y;var Pi=Si.x>Gt.left&&Si.x<Gt.right,Er=Si.y>Gt.top&&Si.y<Gt.bottom;ai=Pi&&Er}var gn=Tt.getRect(Rt);if(gn&&Ii==="center"){var Ta=gn.left+gn.width/2,fo=gn.top+gn.height/2;ai=Ta>=Gt.left&&Ta<=Gt.right&&fo>=Gt.top&&fo<=Gt.bottom}return gn&&J.number(Ii)&&(ai=Math.max(0,Math.min(Gt.right,gn.right)-Math.max(Gt.left,gn.left))*Math.max(0,Math.min(Gt.bottom,gn.bottom)-Math.max(Gt.top,gn.top))/(gn.width*gn.height)>=Ii),Ke.options.drop.checker&&(ai=Ke.options.drop.checker(ft,Mt,ai,Ke,Xt,Tt,Rt)),ai}(this,be,Te,Me,$e,je,Le)},te.dynamicDrop=function(be){return J.bool(be)?(X.dynamicDrop=be,te):X.dynamicDrop},Dt(H.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),H.methodDict.drop="dropzone",X.dynamicDrop=!1,he.actions.drop=U.defaults},listeners:{"interactions:before-action-start":function(X){var H=X.interaction;H.prepared.name==="drag"&&(H.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(X,H){var te=X.interaction,le=X.iEvent;if(te.prepared.name==="drag"){var he=te.dropState;he.activeDrops=[],he.events={},he.activeDrops=C(H,te.element),he.events=O(te,0,le),he.events.activate&&(b(he.activeDrops,he.events.activate),H.fire("actions/drop:start",{interaction:te,dragEvent:le}))}},"interactions:action-move":q,"interactions:after-action-move":function(X,H){var te=X.interaction,le=X.iEvent;if(te.prepared.name==="drag"){var he=te.dropState;L(te,he.events),H.fire("actions/drop:move",{interaction:te,dragEvent:le}),he.events={}}},"interactions:action-end":function(X,H){if(X.interaction.prepared.name==="drag"){var te=X.interaction,le=X.iEvent;q(X,H),L(te,te.dropState.events),H.fire("actions/drop:end",{interaction:te,dragEvent:le})}},"interactions:stop":function(X){var H=X.interaction;if(H.prepared.name==="drag"){var te=H.dropState;te&&(te.activeDrops=null,te.events=null,te.cur.dropzone=null,te.cur.element=null,te.prev.dropzone=null,te.prev.element=null,te.rejected=!1)}}},getActiveDrops:C,getDrop:M,getDropEvents:O,fireDropEvents:L,filterEventType:function(X){return X.search("drag")===0||X.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},ee=U;function Q(X){var H=X.interaction,te=X.iEvent,le=X.phase;if(H.prepared.name==="gesture"){var he=H.pointers.map(function(je){return je.pointer}),be=le==="start",Te=le==="end",Me=H.interactable.options.deltaSource;if(te.touches=[he[0],he[1]],be)te.distance=m(he,Me),te.box=Ys(he),te.scale=1,te.ds=0,te.angle=j(he,Me),te.da=0,H.gesture.startDistance=te.distance,H.gesture.startAngle=te.angle;else if(Te||H.pointers.length<2){var $e=H.prevEvent;te.distance=$e.distance,te.box=$e.box,te.scale=$e.scale,te.ds=0,te.angle=$e.angle,te.da=0}else te.distance=m(he,Me),te.box=Ys(he),te.scale=te.distance/H.gesture.startDistance,te.angle=j(he,Me),te.ds=te.scale-H.gesture.scale,te.da=te.angle-H.gesture.angle;H.gesture.distance=te.distance,H.gesture.angle=te.angle,J.number(te.scale)&&te.scale!==1/0&&!isNaN(te.scale)&&(H.gesture.scale=te.scale)}}var ge={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(X){var H=X.actions,te=X.Interactable,le=X.defaults;te.prototype.gesturable=function(he){return J.object(he)?(this.options.gesture.enabled=he.enabled!==!1,this.setPerAction("gesture",he),this.setOnEvents("gesture",he),this):J.bool(he)?(this.options.gesture.enabled=he,this):this.options.gesture},H.map.gesture=ge,H.methodDict.gesture="gesturable",le.actions.gesture=ge.defaults},listeners:{"interactions:action-start":Q,"interactions:action-move":Q,"interactions:action-end":Q,"interactions:new":function(X){X.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(X){if(!(X.interaction.pointers.length<2)){var H=X.interactable.options.gesture;if(H&&H.enabled)return X.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(X){return X.search("gesture")===0}},ve=ge;function fe(X,H,te,le,he,be,Te){if(!H)return!1;if(H===!0){var Me=J.number(be.width)?be.width:be.right-be.left,$e=J.number(be.height)?be.height:be.bottom-be.top;if(Te=Math.min(Te,Math.abs((X==="left"||X==="right"?Me:$e)/2)),Me<0&&(X==="left"?X="right":X==="right"&&(X="left")),$e<0&&(X==="top"?X="bottom":X==="bottom"&&(X="top")),X==="left"){var je=Me>=0?be.left:be.right;return te.x<je+Te}if(X==="top"){var Le=$e>=0?be.top:be.bottom;return te.y<Le+Te}if(X==="right")return te.x>(Me>=0?be.right:be.left)-Te;if(X==="bottom")return te.y>($e>=0?be.bottom:be.top)-Te}return!!J.element(le)&&(J.element(H)?H===le:vt(le,H,he))}function Ce(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="resize"&&te.resizeAxes){var le=H;te.interactable.options.resize.square?(te.resizeAxes==="y"?le.delta.x=le.delta.y:le.delta.y=le.delta.x,le.axes="xy"):(le.axes=te.resizeAxes,te.resizeAxes==="x"?le.delta.y=0:te.resizeAxes==="y"&&(le.delta.x=0))}}var Ie,Ne,Ve={id:"actions/resize",before:["actions/drag"],install:function(X){var H=X.actions,te=X.browser,le=X.Interactable,he=X.defaults;Ve.cursors=function(be){return be.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(te),Ve.defaultMargin=te.supportsTouch||te.supportsPointerEvent?20:10,le.prototype.resizable=function(be){return function(Te,Me,$e){return J.object(Me)?(Te.options.resize.enabled=Me.enabled!==!1,Te.setPerAction("resize",Me),Te.setOnEvents("resize",Me),J.string(Me.axis)&&/^x$|^y$|^xy$/.test(Me.axis)?Te.options.resize.axis=Me.axis:Me.axis===null&&(Te.options.resize.axis=$e.defaults.actions.resize.axis),J.bool(Me.preserveAspectRatio)?Te.options.resize.preserveAspectRatio=Me.preserveAspectRatio:J.bool(Me.square)&&(Te.options.resize.square=Me.square),Te):J.bool(Me)?(Te.options.resize.enabled=Me,Te):Te.options.resize}(this,be,X)},H.map.resize=Ve,H.methodDict.resize="resizable",he.actions.resize=Ve.defaults},listeners:{"interactions:new":function(X){X.interaction.resizeAxes="xy"},"interactions:action-start":function(X){(function(H){var te=H.iEvent,le=H.interaction;if(le.prepared.name==="resize"&&le.prepared.edges){var he=te,be=le.rect;le._rects={start:Dt({},be),corrected:Dt({},be),previous:Dt({},be),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},he.edges=le.prepared.edges,he.rect=le._rects.corrected,he.deltaRect=le._rects.delta}})(X),Ce(X)},"interactions:action-move":function(X){(function(H){var te=H.iEvent,le=H.interaction;if(le.prepared.name==="resize"&&le.prepared.edges){var he=te,be=le.interactable.options.resize.invert,Te=be==="reposition"||be==="negate",Me=le.rect,$e=le._rects,je=$e.start,Le=$e.corrected,Ke=$e.delta,ft=$e.previous;if(Dt(ft,Le),Te){if(Dt(Le,Me),be==="reposition"){if(Le.top>Le.bottom){var Mt=Le.top;Le.top=Le.bottom,Le.bottom=Mt}if(Le.left>Le.right){var Tt=Le.left;Le.left=Le.right,Le.right=Tt}}}else Le.top=Math.min(Me.top,je.bottom),Le.bottom=Math.max(Me.bottom,je.top),Le.left=Math.min(Me.left,je.right),Le.right=Math.max(Me.right,je.left);for(var Rt in Le.width=Le.right-Le.left,Le.height=Le.bottom-Le.top,Le)Ke[Rt]=Le[Rt]-ft[Rt];he.edges=le.prepared.edges,he.rect=Le,he.deltaRect=Ke}})(X),Ce(X)},"interactions:action-end":function(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="resize"&&te.prepared.edges){var le=H;le.edges=te.prepared.edges,le.rect=te._rects.corrected,le.deltaRect=te._rects.delta}},"auto-start:check":function(X){var H=X.interaction,te=X.interactable,le=X.element,he=X.rect,be=X.buttons;if(he){var Te=Dt({},H.coords.cur.page),Me=te.options.resize;if(Me&&Me.enabled&&(!H.pointerIsDown||!/mouse|pointer/.test(H.pointerType)||(be&Me.mouseButtons)!=0)){if(J.object(Me.edges)){var $e={left:!1,right:!1,top:!1,bottom:!1};for(var je in $e)$e[je]=fe(je,Me.edges[je],Te,H._latestPointer.eventTarget,le,he,Me.margin||Ve.defaultMargin);$e.left=$e.left&&!$e.right,$e.top=$e.top&&!$e.bottom,($e.left||$e.right||$e.top||$e.bottom)&&(X.action={name:"resize",edges:$e})}else{var Le=Me.axis!=="y"&&Te.x>he.right-Ve.defaultMargin,Ke=Me.axis!=="x"&&Te.y>he.bottom-Ve.defaultMargin;(Le||Ke)&&(X.action={name:"resize",axes:(Le?"x":"")+(Ke?"y":"")})}return!X.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(X){var H=X.edges,te=X.axis,le=X.name,he=Ve.cursors,be=null;if(te)be=he[le+te];else if(H){for(var Te="",Me=0,$e=["top","bottom","left","right"];Me<$e.length;Me++){var je=$e[Me];H[je]&&(Te+=je)}be=he[Te]}return be},filterEventType:function(X){return X.search("resize")===0},defaultMargin:null},Xe=Ve,et={id:"actions",install:function(X){X.usePlugin(ve),X.usePlugin(Xe),X.usePlugin(pe),X.usePlugin(ee)}},dt=0,ct={request:function(X){return Ie(X)},cancel:function(X){return Ne(X)},init:function(X){if(Ie=X.requestAnimationFrame,Ne=X.cancelAnimationFrame,!Ie)for(var H=["ms","moz","webkit","o"],te=0;te<H.length;te++){var le=H[te];Ie=X["".concat(le,"RequestAnimationFrame")],Ne=X["".concat(le,"CancelAnimationFrame")]||X["".concat(le,"CancelRequestAnimationFrame")]}Ie=Ie&&Ie.bind(X),Ne=Ne&&Ne.bind(X),Ie||(Ie=function(he){var be=Date.now(),Te=Math.max(0,16-(be-dt)),Me=X.setTimeout(function(){he(be+Te)},Te);return dt=be+Te,Me},Ne=function(he){return clearTimeout(he)})}},mt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(X){mt.isScrolling=!0,ct.cancel(mt.i),X.autoScroll=mt,mt.interaction=X,mt.prevTime=mt.now(),mt.i=ct.request(mt.scroll)},stop:function(){mt.isScrolling=!1,mt.interaction&&(mt.interaction.autoScroll=null),ct.cancel(mt.i)},scroll:function(){var X=mt.interaction,H=X.interactable,te=X.element,le=X.prepared.name,he=H.options[le].autoScroll,be=lt(he.container,H,te),Te=mt.now(),Me=(Te-mt.prevTime)/1e3,$e=he.speed*Me;if($e>=1){var je={x:mt.x*$e,y:mt.y*$e};if(je.x||je.y){var Le=gi(be);J.window(be)?be.scrollBy(je.x,je.y):be&&(be.scrollLeft+=je.x,be.scrollTop+=je.y);var Ke=gi(be),ft={x:Ke.x-Le.x,y:Ke.y-Le.y};(ft.x||ft.y)&&H.fire({type:"autoscroll",target:te,interactable:H,delta:ft,interaction:X,container:be})}mt.prevTime=Te}mt.isScrolling&&(ct.cancel(mt.i),mt.i=ct.request(mt.scroll))},check:function(X,H){var te;return(te=X.options[H].autoScroll)==null?void 0:te.enabled},onInteractionMove:function(X){var H=X.interaction,te=X.pointer;if(H.interacting()&&mt.check(H.interactable,H.prepared.name))if(H.simulation)mt.x=mt.y=0;else{var le,he,be,Te,Me=H.interactable,$e=H.element,je=H.prepared.name,Le=Me.options[je].autoScroll,Ke=lt(Le.container,Me,$e);if(J.window(Ke))Te=te.clientX<mt.margin,le=te.clientY<mt.margin,he=te.clientX>Ke.innerWidth-mt.margin,be=te.clientY>Ke.innerHeight-mt.margin;else{var ft=ut(Ke);Te=te.clientX<ft.left+mt.margin,le=te.clientY<ft.top+mt.margin,he=te.clientX>ft.right-mt.margin,be=te.clientY>ft.bottom-mt.margin}mt.x=he?1:Te?-1:0,mt.y=be?1:le?-1:0,mt.isScrolling||(mt.margin=Le.margin,mt.speed=Le.speed,mt.start(H))}}};function lt(X,H,te){return(J.string(X)?Wi(X,H,te):X)||V(te)}function gi(X){return J.window(X)&&(X=window.document.body),{x:X.scrollLeft,y:X.scrollTop}}var oi={id:"auto-scroll",install:function(X){var H=X.defaults,te=X.actions;X.autoScroll=mt,mt.now=function(){return X.now()},te.phaselessTypes.autoscroll=!0,H.perAction.autoScroll=mt.defaults},listeners:{"interactions:new":function(X){X.interaction.autoScroll=null},"interactions:destroy":function(X){X.interaction.autoScroll=null,mt.stop(),mt.interaction&&(mt.interaction=null)},"interactions:stop":mt.stop,"interactions:action-move":function(X){return mt.onInteractionMove(X)}}},Ni=oi;function Qi(X,H){var te=!1;return function(){return te||(F.console.warn(H),te=!0),X.apply(this,arguments)}}function _s(X,H){return X.name=H.name,X.axis=H.axis,X.edges=H.edges,X}function as(X){return J.bool(X)?(this.options.styleCursor=X,this):X===null?(delete this.options.styleCursor,this):this.options.styleCursor}function $i(X){return J.func(X)?(this.options.actionChecker=X,this):X===null?(delete this.options.actionChecker,this):this.options.actionChecker}var ui={id:"auto-start/interactableMethods",install:function(X){var H=X.Interactable;H.prototype.getAction=function(te,le,he,be){var Te=function(Me,$e,je,Le,Ke){var ft=Me.getRect(Le),Mt=$e.buttons||{0:1,1:4,3:8,4:16}[$e.button],Tt={action:null,interactable:Me,interaction:je,element:Le,rect:ft,buttons:Mt};return Ke.fire("auto-start:check",Tt),Tt.action}(this,le,he,be,X);return this.options.actionChecker?this.options.actionChecker(te,le,Te,this,be,he):Te},H.prototype.ignoreFrom=Qi(function(te){return this._backCompatOption("ignoreFrom",te)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),H.prototype.allowFrom=Qi(function(te){return this._backCompatOption("allowFrom",te)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),H.prototype.actionChecker=$i,H.prototype.styleCursor=as}};function Kt(X,H,te,le,he){return H.testIgnoreAllow(H.options[X.name],te,le)&&H.options[X.name].enabled&&wi(H,te,X,he)?X:null}function Xs(X,H,te,le,he,be,Te){for(var Me=0,$e=le.length;Me<$e;Me++){var je=le[Me],Le=he[Me],Ke=je.getAction(H,te,X,Le);if(Ke){var ft=Kt(Ke,je,Le,be,Te);if(ft)return{action:ft,interactable:je,element:Le}}}return{action:null,interactable:null,element:null}}function Ps(X,H,te,le,he){var be=[],Te=[],Me=le;function $e(Le){be.push(Le),Te.push(Me)}for(;J.element(Me);){be=[],Te=[],he.interactables.forEachMatch(Me,$e);var je=Xs(X,H,te,be,Te,le,he);if(je.action&&!je.interactable.options[je.action.name].manualStart)return je;Me=Oe(Me)}return{action:null,interactable:null,element:null}}function Qn(X,H,te){var le=H.action,he=H.interactable,be=H.element;le=le||{name:null},X.interactable=he,X.element=be,_s(X.prepared,le),X.rect=he&&le.name?he.getRect(be):null,fr(X,te),te.fire("autoStart:prepared",{interaction:X})}function wi(X,H,te,le){var he=X.options,be=he[te.name].max,Te=he[te.name].maxPerElement,Me=le.autoStart.maxInteractions,$e=0,je=0,Le=0;if(!(be&&Te&&Me))return!1;for(var Ke=0,ft=le.interactions.list;Ke<ft.length;Ke++){var Mt=ft[Ke],Tt=Mt.prepared.name;if(Mt.interacting()&&(++$e>=Me||Mt.interactable===X&&((je+=Tt===te.name?1:0)>=be||Mt.element===H&&(Le++,Tt===te.name&&Le>=Te))))return!1}return Me>0}function sn(X,H){return J.number(X)?(H.autoStart.maxInteractions=X,this):H.autoStart.maxInteractions}function ns(X,H,te){var le=te.autoStart.cursorElement;le&&le!==X&&(le.style.cursor=""),X.ownerDocument.documentElement.style.cursor=H,X.style.cursor=H,te.autoStart.cursorElement=H?X:null}function fr(X,H){var te=X.interactable,le=X.element,he=X.prepared;if(X.pointerType==="mouse"&&te&&te.options.styleCursor){var be="";if(he.name){var Te=te.options[he.name].cursorChecker;be=J.func(Te)?Te(he,te,le,X._interacting):H.actions.map[he.name].getCursor(he)}ns(X.element,be||"",H)}else H.autoStart.cursorElement&&ns(H.autoStart.cursorElement,"",H)}var eh={id:"auto-start/base",before:["actions"],install:function(X){var H=X.interactStatic,te=X.defaults;X.usePlugin(ui),te.base.actionChecker=null,te.base.styleCursor=!0,Dt(te.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),H.maxInteractions=function(le){return sn(le,X)},X.autoStart={maxInteractions:1/0,withinInteractionLimit:wi,cursorElement:null}},listeners:{"interactions:down":function(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget;te.interacting()||Qn(te,Ps(te,le,he,be,H),H)},"interactions:move":function(X,H){(function(te,le){var he=te.interaction,be=te.pointer,Te=te.event,Me=te.eventTarget;he.pointerType!=="mouse"||he.pointerIsDown||he.interacting()||Qn(he,Ps(he,be,Te,Me,le),le)})(X,H),function(te,le){var he=te.interaction;if(he.pointerIsDown&&!he.interacting()&&he.pointerWasMoved&&he.prepared.name){le.fire("autoStart:before-start",te);var be=he.interactable,Te=he.prepared.name;Te&&be&&(be.options[Te].manualStart||!wi(be,he.element,he.prepared,le)?he.stop():(he.start(he.prepared,be,he.element),fr(he,le)))}}(X,H)},"interactions:stop":function(X,H){var te=X.interaction,le=te.interactable;le&&le.options.styleCursor&&ns(te.element,"",H)}},maxInteractions:sn,withinInteractionLimit:wi,validateAction:Kt},Zc=eh,ze={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(X,H){var te=X.interaction,le=X.eventTarget,he=X.dx,be=X.dy;if(te.prepared.name==="drag"){var Te=Math.abs(he),Me=Math.abs(be),$e=te.interactable.options.drag,je=$e.startAxis,Le=Te>Me?"x":Te<Me?"y":"xy";if(te.prepared.axis=$e.lockAxis==="start"?Le[0]:$e.lockAxis,Le!=="xy"&&je!=="xy"&&je!==Le){te.prepared.name=null;for(var Ke=le,ft=function(Tt){if(Tt!==te.interactable){var Rt=te.interactable.options.drag;if(!Rt.manualStart&&Tt.testIgnoreAllow(Rt,Ke,le)){var Xt=Tt.getAction(te.downPointer,te.downEvent,te,Ke);if(Xt&&Xt.name==="drag"&&function(Gt,ai){if(!ai)return!1;var Ii=ai.options.drag.startAxis;return Gt==="xy"||Ii==="xy"||Ii===Gt}(Le,Tt)&&Zc.validateAction(Xt,Tt,Ke,le,H))return Tt}}};J.element(Ke);){var Mt=H.interactables.forEachMatch(Ke,ft);if(Mt){te.prepared.name="drag",te.interactable=Mt,te.element=Ke;break}Ke=Oe(Ke)}}}}}};function pt(X){var H=X.prepared&&X.prepared.name;if(!H)return null;var te=X.interactable.options;return te[H].hold||te[H].delay}var Pt={id:"auto-start/hold",install:function(X){var H=X.defaults;X.usePlugin(Zc),H.perAction.hold=0,H.perAction.delay=0},listeners:{"interactions:new":function(X){X.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(X){var H=X.interaction,te=pt(H);te>0&&(H.autoStartHoldTimer=setTimeout(function(){H.start(H.prepared,H.interactable,H.element)},te))},"interactions:move":function(X){var H=X.interaction,te=X.duplicate;H.autoStartHoldTimer&&H.pointerWasMoved&&!te&&(clearTimeout(H.autoStartHoldTimer),H.autoStartHoldTimer=null)},"autoStart:before-start":function(X){var H=X.interaction;pt(H)>0&&(H.prepared.name=null)}},getHoldDuration:pt},ei=Pt,Os={id:"auto-start",install:function(X){X.usePlugin(Zc),X.usePlugin(ei),X.usePlugin(ze)}},kn=function(X){return/^(always|never|auto)$/.test(X)?(this.options.preventDefault=X,this):J.bool(X)?(this.options.preventDefault=X?"always":"never",this):this.options.preventDefault};function Nn(X){var H=X.interaction,te=X.event;H.interactable&&H.interactable.checkAndPreventDefault(te)}var Hr={id:"core/interactablePreventDefault",install:function(X){var H=X.Interactable;H.prototype.preventDefault=kn,H.prototype.checkAndPreventDefault=function(te){return function(le,he,be){var Te=le.options.preventDefault;if(Te!=="never")if(Te!=="always"){if(he.events.supportsPassive&&/^touch(start|move)$/.test(be.type)){var Me=V(be.target).document,$e=he.getDocOptions(Me);if(!$e||!$e.events||$e.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(be.type)||J.element(be.target)&&we(be.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||be.preventDefault()}else be.preventDefault()}(this,X,te)},X.interactions.docEvents.push({type:"dragstart",listener:function(te){for(var le=0,he=X.interactions.list;le<he.length;le++){var be=he[le];if(be.element&&(be.element===te.target||Pe(be.element,te.target)))return void be.interactable.checkAndPreventDefault(te)}}})},listeners:["down","move","up","cancel"].reduce(function(X,H){return X["interactions:".concat(H)]=Nn,X},{})};function kf(X,H){if(H.phaselessTypes[X])return!0;for(var te in H.map)if(X.indexOf(te)===0&&X.substr(te.length)in H.phases)return!0;return!1}function wm(X){var H={};for(var te in X){var le=X[te];J.plainObject(le)?H[te]=wm(le):J.array(le)?H[te]=c(le):H[te]=le}return H}var Pa=function(){function X(H){r(this,X),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=H,this.result=Sm(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(X,[{key:"start",value:function(H,te){var le,he,be=H.phase,Te=this.interaction,Me=function(je){var Le=je.interactable.options[je.prepared.name],Ke=Le.modifiers;return Ke&&Ke.length?Ke:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ft){var Mt=Le[ft];return Mt&&Mt.enabled&&{options:Mt,methods:Mt._methods}}).filter(function(ft){return!!ft})}(Te);this.prepareStates(Me),this.startEdges=Dt({},Te.edges),this.edges=Dt({},this.startEdges),this.startOffset=(le=Te.rect,he=te,le?{left:he.x-le.left,top:he.y-le.top,right:le.right-he.x,bottom:le.bottom-he.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var $e=this.fillArg({phase:be,pageCoords:te,preEnd:!1});return this.result=Sm(),this.startAll($e),this.result=this.setAll($e)}},{key:"fillArg",value:function(H){var te=this.interaction;return H.interaction=te,H.interactable=te.interactable,H.element=te.element,H.rect||(H.rect=te.rect),H.edges||(H.edges=this.startEdges),H.startOffset=this.startOffset,H}},{key:"startAll",value:function(H){for(var te=0,le=this.states;te<le.length;te++){var he=le[te];he.methods.start&&(H.state=he,he.methods.start(H))}}},{key:"setAll",value:function(H){var te=H.phase,le=H.preEnd,he=H.skipModifiers,be=H.rect,Te=H.edges;H.coords=Dt({},H.pageCoords),H.rect=Dt({},be),H.edges=Dt({},Te);for(var Me=he?this.states.slice(he):this.states,$e=Sm(H.coords,H.rect),je=0;je<Me.length;je++){var Le,Ke=Me[je],ft=Ke.options,Mt=Dt({},H.coords),Tt=null;(Le=Ke.methods)!=null&&Le.set&&this.shouldDo(ft,le,te)&&(H.state=Ke,Tt=Ke.methods.set(H),dr(H.edges,H.rect,{x:H.coords.x-Mt.x,y:H.coords.y-Mt.y})),$e.eventProps.push(Tt)}Dt(this.edges,H.edges),$e.delta.x=H.coords.x-H.pageCoords.x,$e.delta.y=H.coords.y-H.pageCoords.y,$e.rectDelta.left=H.rect.left-be.left,$e.rectDelta.right=H.rect.right-be.right,$e.rectDelta.top=H.rect.top-be.top,$e.rectDelta.bottom=H.rect.bottom-be.bottom;var Rt=this.result.coords,Xt=this.result.rect;if(Rt&&Xt){var Gt=$e.rect.left!==Xt.left||$e.rect.right!==Xt.right||$e.rect.top!==Xt.top||$e.rect.bottom!==Xt.bottom;$e.changed=Gt||Rt.x!==$e.coords.x||Rt.y!==$e.coords.y}return $e}},{key:"applyToInteraction",value:function(H){var te=this.interaction,le=H.phase,he=te.coords.cur,be=te.coords.start,Te=this.result,Me=this.startDelta,$e=Te.delta;le==="start"&&Dt(this.startDelta,Te.delta);for(var je=0,Le=[[be,Me],[he,$e]];je<Le.length;je++){var Ke=Le[je],ft=Ke[0],Mt=Ke[1];ft.page.x+=Mt.x,ft.page.y+=Mt.y,ft.client.x+=Mt.x,ft.client.y+=Mt.y}var Tt=this.result.rectDelta,Rt=H.rect||te.rect;Rt.left+=Tt.left,Rt.right+=Tt.right,Rt.top+=Tt.top,Rt.bottom+=Tt.bottom,Rt.width=Rt.right-Rt.left,Rt.height=Rt.bottom-Rt.top}},{key:"setAndApply",value:function(H){var te=this.interaction,le=H.phase,he=H.preEnd,be=H.skipModifiers,Te=this.setAll(this.fillArg({preEnd:he,phase:le,pageCoords:H.modifiedCoords||te.coords.cur.page}));if(this.result=Te,!Te.changed&&(!be||be<this.states.length)&&te.interacting())return!1;if(H.modifiedCoords){var Me=te.coords.cur.page,$e={x:H.modifiedCoords.x-Me.x,y:H.modifiedCoords.y-Me.y};Te.coords.x+=$e.x,Te.coords.y+=$e.y,Te.delta.x+=$e.x,Te.delta.y+=$e.y}this.applyToInteraction(H)}},{key:"beforeEnd",value:function(H){var te=H.interaction,le=H.event,he=this.states;if(he&&he.length){for(var be=!1,Te=0;Te<he.length;Te++){var Me=he[Te];H.state=Me;var $e=Me.options,je=Me.methods,Le=je.beforeEnd&&je.beforeEnd(H);if(Le)return this.endResult=Le,!1;be=be||!be&&this.shouldDo($e,!0,H.phase,!0)}be&&te.move({event:le,preEnd:!0})}}},{key:"stop",value:function(H){var te=H.interaction;if(this.states&&this.states.length){var le=Dt({states:this.states,interactable:te.interactable,element:te.element,rect:null},H);this.fillArg(le);for(var he=0,be=this.states;he<be.length;he++){var Te=be[he];le.state=Te,Te.methods.stop&&Te.methods.stop(le)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(H){this.states=[];for(var te=0;te<H.length;te++){var le=H[te],he=le.options,be=le.methods,Te=le.name;this.states.push({options:he,methods:be,index:te,name:Te})}return this.states}},{key:"restoreInteractionCoords",value:function(H){var te=H.interaction,le=te.coords,he=te.rect,be=te.modification;if(be.result){for(var Te=be.startDelta,Me=be.result,$e=Me.delta,je=Me.rectDelta,Le=0,Ke=[[le.start,Te],[le.cur,$e]];Le<Ke.length;Le++){var ft=Ke[Le],Mt=ft[0],Tt=ft[1];Mt.page.x-=Tt.x,Mt.page.y-=Tt.y,Mt.client.x-=Tt.x,Mt.client.y-=Tt.y}he.left-=je.left,he.right-=je.right,he.top-=je.top,he.bottom-=je.bottom}}},{key:"shouldDo",value:function(H,te,le,he){return!(!H||H.enabled===!1||he&&!H.endOnly||H.endOnly&&!te||le==="start"&&!H.setStart)}},{key:"copyFrom",value:function(H){this.startOffset=H.startOffset,this.startDelta=H.startDelta,this.startEdges=H.startEdges,this.edges=H.edges,this.states=H.states.map(function(te){return wm(te)}),this.result=Sm(Dt({},H.result.coords),Dt({},H.result.rect))}},{key:"destroy",value:function(){for(var H in this)this[H]=null}}]),X}();function Sm(X,H){return{rect:H,coords:X,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function th(X,H){var te=X.defaults,le={start:X.start,set:X.set,beforeEnd:X.beforeEnd,stop:X.stop},he=function(be){var Te=be||{};for(var Me in Te.enabled=Te.enabled!==!1,te)Me in Te||(Te[Me]=te[Me]);var $e={options:Te,methods:le,name:H,enable:function(){return Te.enabled=!0,$e},disable:function(){return Te.enabled=!1,$e}};return $e};return H&&typeof H=="string"&&(he._defaults=te,he._methods=le),he}function Nf(X){var H=X.iEvent,te=X.interaction.modification.result;te&&(H.modifiers=te.eventProps)}var Em={id:"modifiers/base",before:["actions"],install:function(X){X.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(X){var H=X.interaction;H.modification=new Pa(H)},"interactions:before-action-start":function(X){var H=X.interaction,te=X.interaction.modification;te.start(X,H.coords.start.page),H.edges=te.edges,te.applyToInteraction(X)},"interactions:before-action-move":function(X){var H=X.interaction,te=H.modification,le=te.setAndApply(X);return H.edges=te.edges,le},"interactions:before-action-end":function(X){var H=X.interaction,te=H.modification,le=te.beforeEnd(X);return H.edges=te.startEdges,le},"interactions:action-start":Nf,"interactions:action-move":Nf,"interactions:action-end":Nf,"interactions:after-action-start":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:after-action-move":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:stop":function(X){return X.interaction.modification.stop(X)}}},$x=Em,Ox={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},hd=function(X){f(te,X);var H=S(te);function te(le,he,be,Te,Me,$e,je){var Le;r(this,te),(Le=H.call(this,le)).relatedTarget=null,Le.screenX=void 0,Le.screenY=void 0,Le.button=void 0,Le.buttons=void 0,Le.ctrlKey=void 0,Le.shiftKey=void 0,Le.altKey=void 0,Le.metaKey=void 0,Le.page=void 0,Le.client=void 0,Le.delta=void 0,Le.rect=void 0,Le.x0=void 0,Le.y0=void 0,Le.t0=void 0,Le.dt=void 0,Le.duration=void 0,Le.clientX0=void 0,Le.clientY0=void 0,Le.velocity=void 0,Le.speed=void 0,Le.swipe=void 0,Le.axes=void 0,Le.preEnd=void 0,Me=Me||le.element;var Ke=le.interactable,ft=(Ke&&Ke.options||Ox).deltaSource,Mt=ho(Ke,Me,be),Tt=Te==="start",Rt=Te==="end",Xt=Tt?x(Le):le.prevEvent,Gt=Tt?le.coords.start:Rt?{page:Xt.page,client:Xt.client,timeStamp:le.coords.cur.timeStamp}:le.coords.cur;return Le.page=Dt({},Gt.page),Le.client=Dt({},Gt.client),Le.rect=Dt({},le.rect),Le.timeStamp=Gt.timeStamp,Rt||(Le.page.x-=Mt.x,Le.page.y-=Mt.y,Le.client.x-=Mt.x,Le.client.y-=Mt.y),Le.ctrlKey=he.ctrlKey,Le.altKey=he.altKey,Le.shiftKey=he.shiftKey,Le.metaKey=he.metaKey,Le.button=he.button,Le.buttons=he.buttons,Le.target=Me,Le.currentTarget=Me,Le.preEnd=$e,Le.type=je||be+(Te||""),Le.interactable=Ke,Le.t0=Tt?le.pointers[le.pointers.length-1].downTime:Xt.t0,Le.x0=le.coords.start.page.x-Mt.x,Le.y0=le.coords.start.page.y-Mt.y,Le.clientX0=le.coords.start.client.x-Mt.x,Le.clientY0=le.coords.start.client.y-Mt.y,Le.delta=Tt||Rt?{x:0,y:0}:{x:Le[ft].x-Xt[ft].x,y:Le[ft].y-Xt[ft].y},Le.dt=le.coords.delta.timeStamp,Le.duration=Le.timeStamp-Le.t0,Le.velocity=Dt({},le.coords.velocity[ft]),Le.speed=Fi(Le.velocity.x,Le.velocity.y),Le.swipe=Rt||Te==="inertiastart"?Le.getSwipe():null,Le}return l(te,[{key:"getSwipe",value:function(){var le=this._interaction;if(le.prevEvent.speed<600||this.timeStamp-le.prevEvent.timeStamp>150)return null;var he=180*Math.atan2(le.prevEvent.velocityY,le.prevEvent.velocityX)/Math.PI;he<0&&(he+=360);var be=112.5<=he&&he<247.5,Te=202.5<=he&&he<337.5;return{up:Te,down:!Te&&22.5<=he&&he<157.5,left:be,right:!be&&(292.5<=he||he<67.5),angle:he,speed:le.prevEvent.speed,velocity:{x:le.prevEvent.velocityX,y:le.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),te}(h);Object.defineProperties(hd.prototype,{pageX:{get:function(){return this.page.x},set:function(X){this.page.x=X}},pageY:{get:function(){return this.page.y},set:function(X){this.page.y=X}},clientX:{get:function(){return this.client.x},set:function(X){this.client.x=X}},clientY:{get:function(){return this.client.y},set:function(X){this.client.y=X}},dx:{get:function(){return this.delta.x},set:function(X){this.delta.x=X}},dy:{get:function(){return this.delta.y},set:function(X){this.delta.y=X}},velocityX:{get:function(){return this.velocity.x},set:function(X){this.velocity.x=X}},velocityY:{get:function(){return this.velocity.y},set:function(X){this.velocity.y=X}}});var b7=l(function X(H,te,le,he,be){r(this,X),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=H,this.pointer=te,this.event=le,this.downTime=he,this.downTarget=be}),v5=function(X){return X.interactable="",X.element="",X.prepared="",X.pointerIsDown="",X.pointerWasMoved="",X._proxy="",X}({}),Rx=function(X){return X.start="",X.move="",X.end="",X.stop="",X.interacting="",X}({}),Lx=0,x7=function(){function X(H){var te=this,le=H.pointerType,he=H.scopeFire;r(this,X),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Qi(function(Le){this.move(Le)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Lx++,this._scopeFire=he,this.pointerType=le;var be=this;this._proxy={};var Te=function(Le){Object.defineProperty(te._proxy,Le,{get:function(){return be[Le]}})};for(var Me in v5)Te(Me);var $e=function(Le){Object.defineProperty(te._proxy,Le,{value:function(){return be[Le].apply(be,arguments)}})};for(var je in Rx)$e(je);this._scopeFire("interactions:new",{interaction:this})}return l(X,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(H,te,le){var he=this.updatePointer(H,te,le,!0),be=this.pointers[he];this._scopeFire("interactions:down",{pointer:H,event:te,eventTarget:le,pointerIndex:he,pointerInfo:be,type:"down",interaction:this})}},{key:"start",value:function(H,te,le){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(H.name==="gesture"?2:1)||!te.options[H.name].enabled)&&(_s(this.prepared,H),this.interactable=te,this.element=le,this.rect=te.getRect(le),this.edges=this.prepared.edges?Dt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(H,te,le){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(H,te,le,!1);var he,be,Te=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(he=this.coords.cur.client.x-this.coords.start.client.x,be=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Fi(he,be)>this.pointerMoveTolerance);var Me,$e,je,Le=this.getPointerIndex(H),Ke={pointer:H,pointerIndex:Le,pointerInfo:this.pointers[Le],event:te,type:"move",eventTarget:le,dx:he,dy:be,duplicate:Te,interaction:this};Te||(Me=this.coords.velocity,$e=this.coords.delta,je=Math.max($e.timeStamp/1e3,.001),Me.page.x=$e.page.x/je,Me.page.y=$e.page.y/je,Me.client.x=$e.client.x/je,Me.client.y=$e.client.y/je,Me.timeStamp=je),this._scopeFire("interactions:move",Ke),Te||this.simulation||(this.interacting()&&(Ke.type=null,this.move(Ke)),this.pointerWasMoved&&Ai(this.coords.prev,this.coords.cur))}},{key:"move",value:function(H){H&&H.event||pn(this.coords.delta),(H=Dt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},H||{})).phase="move",this._doPhase(H)}},{key:"pointerUp",value:function(H,te,le,he){var be=this.getPointerIndex(H);be===-1&&(be=this.updatePointer(H,te,le,!1));var Te=/cancel$/i.test(te.type)?"cancel":"up";this._scopeFire("interactions:".concat(Te),{pointer:H,pointerIndex:be,pointerInfo:this.pointers[be],event:te,eventTarget:le,type:Te,curEventTarget:he,interaction:this}),this.simulation||this.end(te),this.removePointer(H,te)}},{key:"documentBlur",value:function(H){this.end(H),this._scopeFire("interactions:blur",{event:H,type:"blur",interaction:this})}},{key:"end",value:function(H){var te;this._ending=!0,H=H||this._latestPointer.event,this.interacting()&&(te=this._doPhase({event:H,interaction:this,phase:"end"})),this._ending=!1,te===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(H){var te=mn(H);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:d(this.pointers,function(le){return le.id===te})}},{key:"getPointerInfo",value:function(H){return this.pointers[this.getPointerIndex(H)]}},{key:"updatePointer",value:function(H,te,le,he){var be,Te,Me,$e=mn(H),je=this.getPointerIndex(H),Le=this.pointers[je];return he=he!==!1&&(he||/(down|start)$/i.test(te.type)),Le?Le.pointer=H:(Le=new b7($e,H,te,null,null),je=this.pointers.length,this.pointers.push(Le)),Br(this.coords.cur,this.pointers.map(function(Ke){return Ke.pointer}),this._now()),be=this.coords.delta,Te=this.coords.prev,Me=this.coords.cur,be.page.x=Me.page.x-Te.page.x,be.page.y=Me.page.y-Te.page.y,be.client.x=Me.client.x-Te.client.x,be.client.y=Me.client.y-Te.client.y,be.timeStamp=Me.timeStamp-Te.timeStamp,he&&(this.pointerIsDown=!0,Le.downTime=this.coords.cur.timeStamp,Le.downTarget=le,ri(this.downPointer,H),this.interacting()||(Ai(this.coords.start,this.coords.cur),Ai(this.coords.prev,this.coords.cur),this.downEvent=te,this.pointerWasMoved=!1)),this._updateLatestPointer(H,te,le),this._scopeFire("interactions:update-pointer",{pointer:H,event:te,eventTarget:le,down:he,pointerInfo:Le,pointerIndex:je,interaction:this}),je}},{key:"removePointer",value:function(H,te){var le=this.getPointerIndex(H);if(le!==-1){var he=this.pointers[le];this._scopeFire("interactions:remove-pointer",{pointer:H,event:te,eventTarget:null,pointerIndex:le,pointerInfo:he,interaction:this}),this.pointers.splice(le,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(H,te,le){this._latestPointer.pointer=H,this._latestPointer.event=te,this._latestPointer.eventTarget=le}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(H,te,le,he){return new hd(this,H,this.prepared.name,te,this.element,le,he)}},{key:"_fireEvent",value:function(H){var te;(te=this.interactable)==null||te.fire(H),(!this.prevEvent||H.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=H)}},{key:"_doPhase",value:function(H){var te=H.event,le=H.phase,he=H.preEnd,be=H.type,Te=this.rect;if(Te&&le==="move"&&(dr(this.edges,Te,this.coords.delta[this.interactable.options.deltaSource]),Te.width=Te.right-Te.left,Te.height=Te.bottom-Te.top),this._scopeFire("interactions:before-action-".concat(le),H)===!1)return!1;var Me=H.iEvent=this._createPreparedEvent(te,le,he,be);return this._scopeFire("interactions:action-".concat(le),H),le==="start"&&(this.prevEvent=Me),this._fireEvent(Me),this._scopeFire("interactions:after-action-".concat(le),H),!0}},{key:"_now",value:function(){return Date.now()}}]),X}();function _5(X){Qg(X.interaction)}function Qg(X){if(!function(te){return!(!te.offset.pending.x&&!te.offset.pending.y)}(X))return!1;var H=X.offset.pending;return e1(X.coords.cur,H),e1(X.coords.delta,H),dr(X.edges,X.rect,H),H.x=0,H.y=0,!0}function Fx(X){var H=X.x,te=X.y;this.offset.pending.x+=H,this.offset.pending.y+=te,this.offset.total.x+=H,this.offset.total.y+=te}function e1(X,H){var te=X.page,le=X.client,he=H.x,be=H.y;te.x+=he,te.y+=be,le.x+=he,le.y+=be}Rx.offsetBy="";var Cm={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(X){X.Interaction.prototype.offsetBy=Fx},listeners:{"interactions:new":function(X){X.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(X){return function(H){H.pointerIsDown&&(e1(H.coords.cur,H.offset.total),H.offset.pending.x=0,H.offset.pending.y=0)}(X.interaction)},"interactions:before-action-start":_5,"interactions:before-action-move":_5,"interactions:before-action-end":function(X){var H=X.interaction;if(Qg(H))return H.move({offset:!0}),H.end(),!1},"interactions:stop":function(X){var H=X.interaction;H.offset.total.x=0,H.offset.total.y=0,H.offset.pending.x=0,H.offset.pending.y=0}}},$f=Cm,b5=function(){function X(H){r(this,X),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=H}return l(X,[{key:"start",value:function(H){var te=this.interaction,le=Pm(te);if(!le||!le.enabled)return!1;var he=te.coords.velocity.client,be=Fi(he.x,he.y),Te=this.modification||(this.modification=new Pa(te));if(Te.copyFrom(te.modification),this.t0=te._now(),this.allowResume=le.allowResume,this.v0=be,this.currentOffset={x:0,y:0},this.startCoords=te.coords.cur.page,this.modifierArg=Te.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-te.coords.cur.timeStamp<50&&be>le.minSpeed&&be>le.endSpeed)this.startInertia();else{if(Te.result=Te.setAll(this.modifierArg),!Te.result.changed)return!1;this.startSmoothEnd()}return te.modification.result.rect=null,te.offsetBy(this.targetOffset),te._doPhase({interaction:te,event:H,phase:"inertiastart"}),te.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),te.modification.result.rect=null,this.active=!0,te.simulation=this,!0}},{key:"startInertia",value:function(){var H=this,te=this.interaction.coords.velocity.client,le=Pm(this.interaction),he=le.resistance,be=-Math.log(le.endSpeed/this.v0)/he;this.targetOffset={x:(te.x-be)/he,y:(te.y-be)/he},this.te=be,this.lambda_v0=he/this.v0,this.one_ve_v0=1-le.endSpeed/this.v0;var Te=this.modification,Me=this.modifierArg;Me.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},Te.result=Te.setAll(Me),Te.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+Te.result.delta.x,y:this.targetOffset.y+Te.result.delta.y}),this.onNextFrame(function(){return H.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var H=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return H.smoothEndTick()})}},{key:"onNextFrame",value:function(H){var te=this;this.timeout=ct.request(function(){te.active&&H()})}},{key:"inertiaTick",value:function(){var H,te,le,he,be,Te,Me,$e=this,je=this.interaction,Le=Pm(je).resistance,Ke=(je._now()-this.t0)/1e3;if(Ke<this.te){var ft,Mt=1-(Math.exp(-Le*Ke)-this.lambda_v0)/this.one_ve_v0;this.isModified?(H=0,te=0,le=this.targetOffset.x,he=this.targetOffset.y,be=this.modifiedOffset.x,Te=this.modifiedOffset.y,ft={x:Tm(Me=Mt,H,le,be),y:Tm(Me,te,he,Te)}):ft={x:this.targetOffset.x*Mt,y:this.targetOffset.y*Mt};var Tt={x:ft.x-this.currentOffset.x,y:ft.y-this.currentOffset.y};this.currentOffset.x+=Tt.x,this.currentOffset.y+=Tt.y,je.offsetBy(Tt),je.move(),this.onNextFrame(function(){return $e.inertiaTick()})}else je.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var H=this,te=this.interaction,le=te._now()-this.t0,he=Pm(te).smoothEndDuration;if(le<he){var be={x:jv(le,0,this.targetOffset.x,he),y:jv(le,0,this.targetOffset.y,he)},Te={x:be.x-this.currentOffset.x,y:be.y-this.currentOffset.y};this.currentOffset.x+=Te.x,this.currentOffset.y+=Te.y,te.offsetBy(Te),te.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return H.smoothEndTick()})}else te.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(H){var te=H.pointer,le=H.event,he=H.eventTarget,be=this.interaction;be.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),be.updatePointer(te,le,he,!0),be._doPhase({interaction:be,event:le,phase:"resume"}),Ai(be.coords.prev,be.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ct.cancel(this.timeout)}}]),X}();function Pm(X){var H=X.interactable,te=X.prepared;return H&&H.options&&te.name&&H.options[te.name].inertia}var x5={id:"inertia",before:["modifiers","actions"],install:function(X){var H=X.defaults;X.usePlugin($f),X.usePlugin($x),X.actions.phases.inertiastart=!0,X.actions.phases.resume=!0,H.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(X){var H=X.interaction;H.inertia=new b5(H)},"interactions:before-action-end":function(X){var H=X.interaction,te=X.event;return(!H._interacting||H.simulation||!H.inertia.start(te))&&null},"interactions:down":function(X){var H=X.interaction,te=X.eventTarget,le=H.inertia;if(le.active)for(var he=te;J.element(he);){if(he===H.element){le.resume(X);break}he=Oe(he)}},"interactions:stop":function(X){var H=X.interaction.inertia;H.active&&H.stop()},"interactions:before-action-resume":function(X){var H=X.interaction.modification;H.stop(X),H.start(X,X.interaction.coords.cur.page),H.applyToInteraction(X)},"interactions:before-action-inertiastart":function(X){return X.interaction.modification.setAndApply(X)},"interactions:action-resume":Nf,"interactions:action-inertiastart":Nf,"interactions:after-action-inertiastart":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:after-action-resume":function(X){return X.interaction.modification.restoreInteractionCoords(X)}}};function Tm(X,H,te,le){var he=1-X;return he*he*H+2*he*X*te+X*X*le}function jv(X,H,te,le){return-te*(X/=le)*(X-2)+H}var t1=x5;function ih(X,H){for(var te=0;te<H.length;te++){var le=H[te];if(X.immediatePropagationStopped)break;le(X)}}var Bv=function(){function X(H){r(this,X),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Dt({},H||{})}return l(X,[{key:"fire",value:function(H){var te,le=this.global;(te=this.types[H.type])&&ih(H,te),!H.propagationStopped&&le&&(te=le[H.type])&&ih(H,te)}},{key:"on",value:function(H,te){var le=ss(H,te);for(H in le)this.types[H]=a(this.types[H]||[],le[H])}},{key:"off",value:function(H,te){var le=ss(H,te);for(H in le){var he=this.types[H];if(he&&he.length)for(var be=0,Te=le[H];be<Te.length;be++){var Me=Te[be],$e=he.indexOf(Me);$e!==-1&&he.splice($e,1)}}}},{key:"getRect",value:function(H){return null}}]),X}(),Hv=function(){function X(H){r(this,X),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=H,ri(this,H)}return l(X,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),X}();function Im(X){return J.object(X)?{capture:!!X.capture,passive:!!X.passive}:{capture:!!X,passive:!1}}function Of(X,H){return X===H||(typeof X=="boolean"?!!H.capture===X&&!H.passive:!!X.capture==!!H.capture&&!!X.passive==!!H.passive)}var Uv={id:"events",install:function(X){var H,te=[],le={},he=[],be={add:Te,remove:Me,addDelegate:function(Le,Ke,ft,Mt,Tt){var Rt=Im(Tt);if(!le[ft]){le[ft]=[];for(var Xt=0;Xt<he.length;Xt++){var Gt=he[Xt];Te(Gt,ft,$e),Te(Gt,ft,je,!0)}}var ai=le[ft],Ii=g(ai,function(es){return es.selector===Le&&es.context===Ke});Ii||(Ii={selector:Le,context:Ke,listeners:[]},ai.push(Ii)),Ii.listeners.push({func:Mt,options:Rt})},removeDelegate:function(Le,Ke,ft,Mt,Tt){var Rt,Xt=Im(Tt),Gt=le[ft],ai=!1;if(Gt)for(Rt=Gt.length-1;Rt>=0;Rt--){var Ii=Gt[Rt];if(Ii.selector===Le&&Ii.context===Ke){for(var es=Ii.listeners,Si=es.length-1;Si>=0;Si--){var Pi=es[Si];if(Pi.func===Mt&&Of(Pi.options,Xt)){es.splice(Si,1),es.length||(Gt.splice(Rt,1),Me(Ke,ft,$e),Me(Ke,ft,je,!0)),ai=!0;break}}if(ai)break}}},delegateListener:$e,delegateUseCapture:je,delegatedEvents:le,documents:he,targets:te,supportsOptions:!1,supportsPassive:!1};function Te(Le,Ke,ft,Mt){if(Le.addEventListener){var Tt=Im(Mt),Rt=g(te,function(Xt){return Xt.eventTarget===Le});Rt||(Rt={eventTarget:Le,events:{}},te.push(Rt)),Rt.events[Ke]||(Rt.events[Ke]=[]),g(Rt.events[Ke],function(Xt){return Xt.func===ft&&Of(Xt.options,Tt)})||(Le.addEventListener(Ke,ft,be.supportsOptions?Tt:Tt.capture),Rt.events[Ke].push({func:ft,options:Tt}))}}function Me(Le,Ke,ft,Mt){if(Le.addEventListener&&Le.removeEventListener){var Tt=d(te,function(Er){return Er.eventTarget===Le}),Rt=te[Tt];if(Rt&&Rt.events)if(Ke!=="all"){var Xt=!1,Gt=Rt.events[Ke];if(Gt){if(ft==="all"){for(var ai=Gt.length-1;ai>=0;ai--){var Ii=Gt[ai];Me(Le,Ke,Ii.func,Ii.options)}return}for(var es=Im(Mt),Si=0;Si<Gt.length;Si++){var Pi=Gt[Si];if(Pi.func===ft&&Of(Pi.options,es)){Le.removeEventListener(Ke,ft,be.supportsOptions?es:es.capture),Gt.splice(Si,1),Gt.length===0&&(delete Rt.events[Ke],Xt=!0);break}}}Xt&&!Object.keys(Rt.events).length&&te.splice(Tt,1)}else for(Ke in Rt.events)Rt.events.hasOwnProperty(Ke)&&Me(Le,Ke,"all")}}function $e(Le,Ke){for(var ft=Im(Ke),Mt=new Hv(Le),Tt=le[Le.type],Rt=p(Le)[0],Xt=Rt;J.element(Xt);){for(var Gt=0;Gt<Tt.length;Gt++){var ai=Tt[Gt],Ii=ai.selector,es=ai.context;if(we(Xt,Ii)&&Pe(es,Rt)&&Pe(es,Xt)){var Si=ai.listeners;Mt.currentTarget=Xt;for(var Pi=0;Pi<Si.length;Pi++){var Er=Si[Pi];Of(Er.options,ft)&&Er.func(Mt)}}}Xt=Oe(Xt)}}function je(Le){return $e(Le,!0)}return(H=X.document)==null||H.createElement("div").addEventListener("test",null,{get capture(){return be.supportsOptions=!0},get passive(){return be.supportsPassive=!0}}),X.events=be,be}},Yv={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(X){for(var H=0,te=Yv.methodOrder;H<te.length;H++){var le=te[H],he=Yv[le](X);if(he)return he}return null},simulationResume:function(X){var H=X.pointerType,te=X.eventType,le=X.eventTarget,he=X.scope;if(!/down|start/i.test(te))return null;for(var be=0,Te=he.interactions.list;be<Te.length;be++){var Me=Te[be],$e=le;if(Me.simulation&&Me.simulation.allowResume&&Me.pointerType===H)for(;$e;){if($e===Me.element)return Me;$e=Oe($e)}}return null},mouseOrPen:function(X){var H,te=X.pointerId,le=X.pointerType,he=X.eventType,be=X.scope;if(le!=="mouse"&&le!=="pen")return null;for(var Te=0,Me=be.interactions.list;Te<Me.length;Te++){var $e=Me[Te];if($e.pointerType===le){if($e.simulation&&!ea($e,te))continue;if($e.interacting())return $e;H||(H=$e)}}if(H)return H;for(var je=0,Le=be.interactions.list;je<Le.length;je++){var Ke=Le[je];if(!(Ke.pointerType!==le||/down/i.test(he)&&Ke.simulation))return Ke}return null},hasPointer:function(X){for(var H=X.pointerId,te=0,le=X.scope.interactions.list;te<le.length;te++){var he=le[te];if(ea(he,H))return he}return null},idle:function(X){for(var H=X.pointerType,te=0,le=X.scope.interactions.list;te<le.length;te++){var he=le[te];if(he.pointers.length===1){var be=he.interactable;if(be&&(!be.options.gesture||!be.options.gesture.enabled))continue}else if(he.pointers.length>=2)continue;if(!he.interacting()&&H===he.pointerType)return he}return null}};function ea(X,H){return X.pointers.some(function(te){return te.id===H})}var Rf=Yv,Mm=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Am(X,H){return function(te){var le=H.interactions.list,he=T(te),be=p(te),Te=be[0],Me=be[1],$e=[];if(/^touch/.test(te.type)){H.prevTouchTime=H.now();for(var je=0,Le=te.changedTouches;je<Le.length;je++){var Ke=Le[je],ft={pointer:Ke,pointerId:mn(Ke),pointerType:he,eventType:te.type,eventTarget:Te,curEventTarget:Me,scope:H},Mt=w5(ft);$e.push([ft.pointer,ft.eventTarget,ft.curEventTarget,Mt])}}else{var Tt=!1;if(!Se.supportsPointerEvent&&/mouse/.test(te.type)){for(var Rt=0;Rt<le.length&&!Tt;Rt++)Tt=le[Rt].pointerType!=="mouse"&&le[Rt].pointerIsDown;Tt=Tt||H.now()-H.prevTouchTime<500||te.timeStamp===0}if(!Tt){var Xt={pointer:te,pointerId:mn(te),pointerType:he,eventType:te.type,curEventTarget:Me,eventTarget:Te,scope:H},Gt=w5(Xt);$e.push([Xt.pointer,Xt.eventTarget,Xt.curEventTarget,Gt])}}for(var ai=0;ai<$e.length;ai++){var Ii=$e[ai],es=Ii[0],Si=Ii[1],Pi=Ii[2];Ii[3][X](es,te,Si,Pi)}}}function w5(X){var H=X.pointerType,te=X.scope,le={interaction:Rf.search(X),searchDetails:X};return te.fire("interactions:find",le),le.interaction||te.interactions.new({pointerType:H})}function i1(X,H){var te=X.doc,le=X.scope,he=X.options,be=le.interactions.docEvents,Te=le.events,Me=Te[H];for(var $e in le.browser.isIOS&&!he.events&&(he.events={passive:!1}),Te.delegatedEvents)Me(te,$e,Te.delegateListener),Me(te,$e,Te.delegateUseCapture,!0);for(var je=he&&he.events,Le=0;Le<be.length;Le++){var Ke=be[Le];Me(te,Ke.type,Ke.listener,je)}}var zx={id:"core/interactions",install:function(X){for(var H={},te=0;te<Mm.length;te++){var le=Mm[te];H[le]=Am(le,X)}var he,be=Se.pEventTypes;function Te(){for(var Me=0,$e=X.interactions.list;Me<$e.length;Me++){var je=$e[Me];if(je.pointerIsDown&&je.pointerType==="touch"&&!je._interacting)for(var Le=function(){var Mt=ft[Ke];X.documents.some(function(Tt){return Pe(Tt.doc,Mt.downTarget)})||je.removePointer(Mt.pointer,Mt.event)},Ke=0,ft=je.pointers;Ke<ft.length;Ke++)Le()}}(he=ne.PointerEvent?[{type:be.down,listener:Te},{type:be.down,listener:H.pointerDown},{type:be.move,listener:H.pointerMove},{type:be.up,listener:H.pointerUp},{type:be.cancel,listener:H.pointerUp}]:[{type:"mousedown",listener:H.pointerDown},{type:"mousemove",listener:H.pointerMove},{type:"mouseup",listener:H.pointerUp},{type:"touchstart",listener:Te},{type:"touchstart",listener:H.pointerDown},{type:"touchmove",listener:H.pointerMove},{type:"touchend",listener:H.pointerUp},{type:"touchcancel",listener:H.pointerUp}]).push({type:"blur",listener:function(Me){for(var $e=0,je=X.interactions.list;$e<je.length;$e++)je[$e].documentBlur(Me)}}),X.prevTouchTime=0,X.Interaction=function(Me){f(je,Me);var $e=S(je);function je(){return r(this,je),$e.apply(this,arguments)}return l(je,[{key:"pointerMoveTolerance",get:function(){return X.interactions.pointerMoveTolerance},set:function(Le){X.interactions.pointerMoveTolerance=Le}},{key:"_now",value:function(){return X.now()}}]),je}(x7),X.interactions={list:[],new:function(Me){Me.scopeFire=function(je,Le){return X.fire(je,Le)};var $e=new X.Interaction(Me);return X.interactions.list.push($e),$e},listeners:H,docEvents:he,pointerMoveTolerance:1},X.usePlugin(Hr)},listeners:{"scope:add-document":function(X){return i1(X,"add")},"scope:remove-document":function(X){return i1(X,"remove")},"interactable:unset":function(X,H){for(var te=X.interactable,le=H.interactions.list.length-1;le>=0;le--){var he=H.interactions.list[le];he.interactable===te&&(he.stop(),H.fire("interactions:destroy",{interaction:he}),he.destroy(),H.interactions.list.length>2&&H.interactions.list.splice(le,1))}}},onDocSignal:i1,doOnInteractions:Am,methodNames:Mm},s1=zx,nc=function(X){return X[X.On=0]="On",X[X.Off=1]="Off",X}(nc||{}),S5=function(){function X(H,te,le,he){r(this,X),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Bv,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=te.actions,this.target=H,this._context=te.context||le,this._win=V(Lt(H)?this._context:H),this._doc=this._win.document,this._scopeEvents=he,this.set(te)}return l(X,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(H,te){return J.func(te.onstart)&&this.on("".concat(H,"start"),te.onstart),J.func(te.onmove)&&this.on("".concat(H,"move"),te.onmove),J.func(te.onend)&&this.on("".concat(H,"end"),te.onend),J.func(te.oninertiastart)&&this.on("".concat(H,"inertiastart"),te.oninertiastart),this}},{key:"updatePerActionListeners",value:function(H,te,le){var he,be=this,Te=(he=this._actions.map[H])==null?void 0:he.filterEventType,Me=function($e){return(Te==null||Te($e))&&kf($e,be._actions)};(J.array(te)||J.object(te))&&this._onOff(nc.Off,H,te,void 0,Me),(J.array(le)||J.object(le))&&this._onOff(nc.On,H,le,void 0,Me)}},{key:"setPerAction",value:function(H,te){var le=this._defaults;for(var he in te){var be=he,Te=this.options[H],Me=te[be];be==="listeners"&&this.updatePerActionListeners(H,Te.listeners,Me),J.array(Me)?Te[be]=c(Me):J.plainObject(Me)?(Te[be]=Dt(Te[be]||{},wm(Me)),J.object(le.perAction[be])&&"enabled"in le.perAction[be]&&(Te[be].enabled=Me.enabled!==!1)):J.bool(Me)&&J.object(le.perAction[be])?Te[be].enabled=Me:Te[be]=Me}}},{key:"getRect",value:function(H){return H=H||(J.element(this.target)?this.target:null),J.string(this.target)&&(H=H||this._context.querySelector(this.target)),Ct(H)}},{key:"rectChecker",value:function(H){var te=this;return J.func(H)?(this.getRect=function(le){var he=Dt({},H.apply(te,le));return"width"in he||(he.width=he.right-he.left,he.height=he.bottom-he.top),he},this):H===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(H,te){if(Lt(te)||J.object(te)){for(var le in this.options[H]=te,this._actions.map)this.options[le][H]=te;return this}return this.options[H]}},{key:"origin",value:function(H){return this._backCompatOption("origin",H)}},{key:"deltaSource",value:function(H){return H==="page"||H==="client"?(this.options.deltaSource=H,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var H=this.target;return J.string(H)?Array.from(this._context.querySelectorAll(H)):J.func(H)&&H.getAllElements?H.getAllElements():J.element(H)?[H]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(H){return this._context===H.ownerDocument||Pe(this._context,H)}},{key:"testIgnoreAllow",value:function(H,te,le){return!this.testIgnore(H.ignoreFrom,te,le)&&this.testAllow(H.allowFrom,te,le)}},{key:"testAllow",value:function(H,te,le){return!H||!!J.element(le)&&(J.string(H)?vt(le,H,te):!!J.element(H)&&Pe(H,le))}},{key:"testIgnore",value:function(H,te,le){return!(!H||!J.element(le))&&(J.string(H)?vt(le,H,te):!!J.element(H)&&Pe(H,le))}},{key:"fire",value:function(H){return this.events.fire(H),this}},{key:"_onOff",value:function(H,te,le,he,be){J.object(te)&&!J.array(te)&&(he=le,le=null);var Te=ss(te,le,be);for(var Me in Te){Me==="wheel"&&(Me=Se.wheelEvent);for(var $e=0,je=Te[Me];$e<je.length;$e++){var Le=je[$e];kf(Me,this._actions)?this.events[H===nc.On?"on":"off"](Me,Le):J.string(this.target)?this._scopeEvents[H===nc.On?"addDelegate":"removeDelegate"](this.target,this._context,Me,Le,he):this._scopeEvents[H===nc.On?"add":"remove"](this.target,Me,Le,he)}}return this}},{key:"on",value:function(H,te,le){return this._onOff(nc.On,H,te,le)}},{key:"off",value:function(H,te,le){return this._onOff(nc.Off,H,te,le)}},{key:"set",value:function(H){var te=this._defaults;for(var le in J.object(H)||(H={}),this.options=wm(te.base),this._actions.methodDict){var he=le,be=this._actions.methodDict[he];this.options[he]={},this.setPerAction(he,Dt(Dt({},te.perAction),te.actions[he])),this[be](H[he])}for(var Te in H)Te!=="getRect"?J.func(this[Te])&&this[Te](H[Te]):this.rectChecker(H.getRect);return this}},{key:"unset",value:function(){if(J.string(this.target))for(var H in this._scopeEvents.delegatedEvents)for(var te=this._scopeEvents.delegatedEvents[H],le=te.length-1;le>=0;le--){var he=te[le],be=he.selector,Te=he.context,Me=he.listeners;be===this.target&&Te===this._context&&te.splice(le,1);for(var $e=Me.length-1;$e>=0;$e--)this._scopeEvents.removeDelegate(this.target,this._context,H,Me[$e][0],Me[$e][1])}else this._scopeEvents.remove(this.target,"all")}}]),X}(),w7=function(){function X(H){var te=this;r(this,X),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=H,H.addListeners({"interactable:unset":function(le){var he=le.interactable,be=he.target,Te=J.string(be)?te.selectorMap[be]:be[te.scope.id],Me=d(Te,function($e){return $e===he});Te.splice(Me,1)}})}return l(X,[{key:"new",value:function(H,te){te=Dt(te||{},{actions:this.scope.actions});var le=new this.scope.Interactable(H,te,this.scope.document,this.scope.events);return this.scope.addDocument(le._doc),this.list.push(le),J.string(H)?(this.selectorMap[H]||(this.selectorMap[H]=[]),this.selectorMap[H].push(le)):(le.target[this.scope.id]||Object.defineProperty(H,this.scope.id,{value:[],configurable:!0}),H[this.scope.id].push(le)),this.scope.fire("interactable:new",{target:H,options:te,interactable:le,win:this.scope._win}),le}},{key:"getExisting",value:function(H,te){var le=te&&te.context||this.scope.document,he=J.string(H),be=he?this.selectorMap[H]:H[this.scope.id];if(be)return g(be,function(Te){return Te._context===le&&(he||Te.inContext(H))})}},{key:"forEachMatch",value:function(H,te){for(var le=0,he=this.list;le<he.length;le++){var be=he[le],Te=void 0;if((J.string(be.target)?J.element(H)&&we(H,be.target):H===be.target)&&be.inContext(H)&&(Te=te(be)),Te!==void 0)return Te}}}]),X}(),S7=function(){function X(){var H=this;r(this,X),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Se,this.defaults=wm(Ox),this.Eventable=Bv,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(le){var he=function be(Te,Me){var $e=le.interactables.getExisting(Te,Me);return $e||(($e=le.interactables.new(Te,Me)).events.global=be.globalEvents),$e};return he.getPointerAverage=xt,he.getTouchBBox=Ys,he.getTouchDistance=m,he.getTouchAngle=j,he.getElementRect=Ct,he.getElementClientRect=ut,he.matchesSelector=we,he.closest=Re,he.globalEvents={},he.version="1.10.27",he.scope=le,he.use=function(be,Te){return this.scope.usePlugin(be,Te),this},he.isSet=function(be,Te){return!!this.scope.interactables.get(be,Te&&Te.context)},he.on=Qi(function(be,Te,Me){if(J.string(be)&&be.search(" ")!==-1&&(be=be.trim().split(/ +/)),J.array(be)){for(var $e=0,je=be;$e<je.length;$e++){var Le=je[$e];this.on(Le,Te,Me)}return this}if(J.object(be)){for(var Ke in be)this.on(Ke,be[Ke],Te);return this}return kf(be,this.scope.actions)?this.globalEvents[be]?this.globalEvents[be].push(Te):this.globalEvents[be]=[Te]:this.scope.events.add(this.scope.document,be,Te,{options:Me}),this},"The interact.on() method is being deprecated"),he.off=Qi(function(be,Te,Me){if(J.string(be)&&be.search(" ")!==-1&&(be=be.trim().split(/ +/)),J.array(be)){for(var $e=0,je=be;$e<je.length;$e++){var Le=je[$e];this.off(Le,Te,Me)}return this}if(J.object(be)){for(var Ke in be)this.off(Ke,be[Ke],Te);return this}var ft;return kf(be,this.scope.actions)?be in this.globalEvents&&(ft=this.globalEvents[be].indexOf(Te))!==-1&&this.globalEvents[be].splice(ft,1):this.scope.events.remove(this.scope.document,be,Te,Me),this},"The interact.off() method is being deprecated"),he.debug=function(){return this.scope},he.supportsTouch=function(){return Se.supportsTouch},he.supportsPointerEvent=function(){return Se.supportsPointerEvent},he.stop=function(){for(var be=0,Te=this.scope.interactions.list;be<Te.length;be++)Te[be].stop();return this},he.pointerMoveTolerance=function(be){return J.number(be)?(this.scope.interactions.pointerMoveTolerance=be,this):this.scope.interactions.pointerMoveTolerance},he.addDocument=function(be,Te){this.scope.addDocument(be,Te)},he.removeDocument=function(be){this.scope.removeDocument(be)},he}(this),this.InteractEvent=hd,this.Interactable=void 0,this.interactables=new w7(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(le){return H.removeDocument(le.target)};var te=this;this.Interactable=function(le){f(be,le);var he=S(be);function be(){return r(this,be),he.apply(this,arguments)}return l(be,[{key:"_defaults",get:function(){return te.defaults}},{key:"set",value:function(Te){return P(y(be.prototype),"set",this).call(this,Te),te.fire("interactable:set",{options:Te,interactable:this}),this}},{key:"unset",value:function(){P(y(be.prototype),"unset",this).call(this);var Te=te.interactables.list.indexOf(this);Te<0||(te.interactables.list.splice(Te,1),te.fire("interactable:unset",{interactable:this}))}}]),be}(S5)}return l(X,[{key:"addListeners",value:function(H,te){this.listenerMaps.push({id:te,map:H})}},{key:"fire",value:function(H,te){for(var le=0,he=this.listenerMaps;le<he.length;le++){var be=he[le].map[H];if(be&&be(te,this,H)===!1)return!1}}},{key:"init",value:function(H){return this.isInitialized?this:function(te,le){return te.isInitialized=!0,J.window(le)&&G(le),ne.init(le),Se.init(le),ct.init(le),te.window=le,te.document=le.document,te.usePlugin(s1),te.usePlugin(Uv),te}(this,H)}},{key:"pluginIsInstalled",value:function(H){var te=H.id;return te?!!this._plugins.map[te]:this._plugins.list.indexOf(H)!==-1}},{key:"usePlugin",value:function(H,te){if(!this.isInitialized)return this;if(this.pluginIsInstalled(H))return this;if(H.id&&(this._plugins.map[H.id]=H),this._plugins.list.push(H),H.install&&H.install(this,te),H.listeners&&H.before){for(var le=0,he=this.listenerMaps.length,be=H.before.reduce(function(Me,$e){return Me[$e]=!0,Me[E5($e)]=!0,Me},{});le<he;le++){var Te=this.listenerMaps[le].id;if(Te&&(be[Te]||be[E5(Te)]))break}this.listenerMaps.splice(le,0,{id:H.id,map:H.listeners})}else H.listeners&&this.listenerMaps.push({id:H.id,map:H.listeners});return this}},{key:"addDocument",value:function(H,te){if(this.getDocIndex(H)!==-1)return!1;var le=V(H);te=te?Dt({},te):{},this.documents.push({doc:H,options:te}),this.events.documents.push(H),H!==this.document&&this.events.add(le,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:H,window:le,scope:this,options:te})}},{key:"removeDocument",value:function(H){var te=this.getDocIndex(H),le=V(H),he=this.documents[te].options;this.events.remove(le,"unload",this.onWindowUnload),this.documents.splice(te,1),this.events.documents.splice(te,1),this.fire("scope:remove-document",{doc:H,window:le,scope:this,options:he})}},{key:"getDocIndex",value:function(H){for(var te=0;te<this.documents.length;te++)if(this.documents[te].doc===H)return te;return-1}},{key:"getDocOptions",value:function(H){var te=this.getDocIndex(H);return te===-1?null:this.documents[te].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),X}();function E5(X){return X&&X.replace(/\/.*$/,"")}var Xv=new S7,ta=Xv.interactStatic,E7=typeof globalThis<"u"?globalThis:window;Xv.init(E7);var C7=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(X){var H=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(le){var he=le[0],be=le[1];return he in X||be in X}),te=function(le,he){for(var be=X.range,Te=X.limits,Me=Te===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:Te,$e=X.offset,je=$e===void 0?{x:0,y:0}:$e,Le={range:be,grid:X,x:null,y:null},Ke=0;Ke<H.length;Ke++){var ft=H[Ke],Mt=ft[0],Tt=ft[1],Rt=Math.round((le-je.x)/X[Mt]),Xt=Math.round((he-je.y)/X[Tt]);Le[Mt]=Math.max(Me.left,Math.min(Me.right,Rt*X[Mt]+je.x)),Le[Tt]=Math.max(Me.top,Math.min(Me.bottom,Xt*X[Tt]+je.y))}return Le};return te.grid=X,te.coordFields=H,te}}),P7={id:"snappers",install:function(X){var H=X.interactStatic;H.snappers=Dt(H.snappers||{},C7),H.createSnapGrid=H.snappers.grid}},T7=P7,C5={start:function(X){var H=X.state,te=X.rect,le=X.edges,he=X.pageCoords,be=H.options,Te=be.ratio,Me=be.enabled,$e=H.options,je=$e.equalDelta,Le=$e.modifiers;Te==="preserve"&&(Te=te.width/te.height),H.startCoords=Dt({},he),H.startRect=Dt({},te),H.ratio=Te,H.equalDelta=je;var Ke=H.linkedEdges={top:le.top||le.left&&!le.bottom,left:le.left||le.top&&!le.right,bottom:le.bottom||le.right&&!le.top,right:le.right||le.bottom&&!le.left};if(H.xIsPrimaryAxis=!(!le.left&&!le.right),H.equalDelta){var ft=(Ke.left?1:-1)*(Ke.top?1:-1);H.edgeSign={x:ft,y:ft}}else H.edgeSign={x:Ke.left?-1:1,y:Ke.top?-1:1};if(Me!==!1&&Dt(le,Ke),Le!=null&&Le.length){var Mt=new Pa(X.interaction);Mt.copyFrom(X.interaction.modification),Mt.prepareStates(Le),H.subModification=Mt,Mt.startAll(s({},X))}},set:function(X){var H=X.state,te=X.rect,le=X.coords,he=H.linkedEdges,be=Dt({},le),Te=H.equalDelta?I7:M7;if(Dt(X.edges,he),Te(H,H.xIsPrimaryAxis,le,te),!H.subModification)return null;var Me=Dt({},te);dr(he,Me,{x:le.x-be.x,y:le.y-be.y});var $e=H.subModification.setAll(s(s({},X),{},{rect:Me,edges:he,pageCoords:le,prevCoords:le,prevRect:Me})),je=$e.delta;return $e.changed&&(Te(H,Math.abs(je.x)>Math.abs(je.y),$e.coords,$e.rect),Dt(le,$e.coords)),$e.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function I7(X,H,te){var le=X.startCoords,he=X.edgeSign;H?te.y=le.y+(te.x-le.x)*he.y:te.x=le.x+(te.y-le.y)*he.x}function M7(X,H,te,le){var he=X.startRect,be=X.startCoords,Te=X.ratio,Me=X.edgeSign;if(H){var $e=le.width/Te;te.y=be.y+($e-he.height)*Me.y}else{var je=le.height*Te;te.x=be.x+(je-he.width)*Me.x}}var A7=th(C5,"aspectRatio"),P5=function(){};P5._defaults={};var Dm=P5;function Lf(X,H,te){return J.func(X)?us(X,H.interactable,H.element,[te.x,te.y,H]):us(X,H.interactable,H.element)}var Wv={start:function(X){var H=X.rect,te=X.startOffset,le=X.state,he=X.interaction,be=X.pageCoords,Te=le.options,Me=Te.elementRect,$e=Dt({left:0,top:0,right:0,bottom:0},Te.offset||{});if(H&&Me){var je=Lf(Te.restriction,he,be);if(je){var Le=je.right-je.left-H.width,Ke=je.bottom-je.top-H.height;Le<0&&($e.left+=Le,$e.right+=Le),Ke<0&&($e.top+=Ke,$e.bottom+=Ke)}$e.left+=te.left-H.width*Me.left,$e.top+=te.top-H.height*Me.top,$e.right+=te.right-H.width*(1-Me.right),$e.bottom+=te.bottom-H.height*(1-Me.bottom)}le.offset=$e},set:function(X){var H=X.coords,te=X.interaction,le=X.state,he=le.options,be=le.offset,Te=Lf(he.restriction,te,H);if(Te){var Me=function($e){return!$e||"left"in $e&&"top"in $e||(($e=Dt({},$e)).left=$e.x||0,$e.top=$e.y||0,$e.right=$e.right||$e.left+$e.width,$e.bottom=$e.bottom||$e.top+$e.height),$e}(Te);H.x=Math.max(Math.min(Me.right-be.right,H.x),Me.left+be.left),H.y=Math.max(Math.min(Me.bottom-be.bottom,H.y),Me.top+be.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},D7=th(Wv,"restrict"),qx={top:1/0,left:1/0,bottom:-1/0,right:-1/0},T5={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function I5(X,H){for(var te=0,le=["top","left","bottom","right"];te<le.length;te++){var he=le[te];he in X||(X[he]=H[he])}return X}var n1={noInner:qx,noOuter:T5,start:function(X){var H,te=X.interaction,le=X.startOffset,he=X.state,be=he.options;be&&(H=fn(Lf(be.offset,te,te.coords.start.page))),H=H||{x:0,y:0},he.offset={top:H.y+le.top,left:H.x+le.left,bottom:H.y-le.bottom,right:H.x-le.right}},set:function(X){var H=X.coords,te=X.edges,le=X.interaction,he=X.state,be=he.offset,Te=he.options;if(te){var Me=Dt({},H),$e=Lf(Te.inner,le,Me)||{},je=Lf(Te.outer,le,Me)||{};I5($e,qx),I5(je,T5),te.top?H.y=Math.min(Math.max(je.top+be.top,Me.y),$e.top+be.top):te.bottom&&(H.y=Math.max(Math.min(je.bottom+be.bottom,Me.y),$e.bottom+be.bottom)),te.left?H.x=Math.min(Math.max(je.left+be.left,Me.x),$e.left+be.left):te.right&&(H.x=Math.max(Math.min(je.right+be.right,Me.x),$e.right+be.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},k7=th(n1,"restrictEdges"),N7=Dt({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(X){}},Wv.defaults),$7=th({start:Wv.start,set:Wv.set,defaults:N7},"restrictRect"),O7={width:-1/0,height:-1/0},R7={width:1/0,height:1/0},L7=th({start:function(X){return n1.start(X)},set:function(X){var H=X.interaction,te=X.state,le=X.rect,he=X.edges,be=te.options;if(he){var Te=Us(Lf(be.min,H,X.coords))||O7,Me=Us(Lf(be.max,H,X.coords))||R7;te.options={endOnly:be.endOnly,inner:Dt({},n1.noInner),outer:Dt({},n1.noOuter)},he.top?(te.options.inner.top=le.bottom-Te.height,te.options.outer.top=le.bottom-Me.height):he.bottom&&(te.options.inner.bottom=le.top+Te.height,te.options.outer.bottom=le.top+Me.height),he.left?(te.options.inner.left=le.right-Te.width,te.options.outer.left=le.right-Me.width):he.right&&(te.options.inner.right=le.left+Te.width,te.options.outer.right=le.left+Me.width),n1.set(X),te.options=be}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),r1={start:function(X){var H,te=X.interaction,le=X.interactable,he=X.element,be=X.rect,Te=X.state,Me=X.startOffset,$e=Te.options,je=$e.offsetWithOrigin?function(ft){var Mt=ft.interaction.element,Tt=fn(us(ft.state.options.origin,null,null,[Mt])),Rt=Tt||ho(ft.interactable,Mt,ft.interaction.prepared.name);return Rt}(X):{x:0,y:0};if($e.offset==="startCoords")H={x:te.coords.start.page.x,y:te.coords.start.page.y};else{var Le=us($e.offset,le,he,[te]);(H=fn(Le)||{x:0,y:0}).x+=je.x,H.y+=je.y}var Ke=$e.relativePoints;Te.offsets=be&&Ke&&Ke.length?Ke.map(function(ft,Mt){return{index:Mt,relativePoint:ft,x:Me.left-be.width*ft.x+H.x,y:Me.top-be.height*ft.y+H.y}}):[{index:0,relativePoint:null,x:H.x,y:H.y}]},set:function(X){var H=X.interaction,te=X.coords,le=X.state,he=le.options,be=le.offsets,Te=ho(H.interactable,H.element,H.prepared.name),Me=Dt({},te),$e=[];he.offsetWithOrigin||(Me.x-=Te.x,Me.y-=Te.y);for(var je=0,Le=be;je<Le.length;je++)for(var Ke=Le[je],ft=Me.x-Ke.x,Mt=Me.y-Ke.y,Tt=0,Rt=he.targets.length;Tt<Rt;Tt++){var Xt=he.targets[Tt],Gt=void 0;(Gt=J.func(Xt)?Xt(ft,Mt,H._proxy,Ke,Tt):Xt)&&$e.push({x:(J.number(Gt.x)?Gt.x:ft)+Ke.x,y:(J.number(Gt.y)?Gt.y:Mt)+Ke.y,range:J.number(Gt.range)?Gt.range:he.range,source:Xt,index:Tt,offset:Ke})}for(var ai={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ii=0;Ii<$e.length;Ii++){var es=$e[Ii],Si=es.range,Pi=es.x-Me.x,Er=es.y-Me.y,gn=Fi(Pi,Er),Ta=gn<=Si;Si===1/0&&ai.inRange&&ai.range!==1/0&&(Ta=!1),ai.target&&!(Ta?ai.inRange&&Si!==1/0?gn/Si<ai.distance/ai.range:Si===1/0&&ai.range!==1/0||gn<ai.distance:!ai.inRange&&gn<ai.distance)||(ai.target=es,ai.distance=gn,ai.range=Si,ai.inRange=Ta,ai.delta.x=Pi,ai.delta.y=Er)}return ai.inRange&&(te.x=ai.target.x,te.y=ai.target.y),le.closest=ai,ai},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},o1=th(r1,"snap"),Zv={start:function(X){var H=X.state,te=X.edges,le=H.options;if(!te)return null;X.state={options:{targets:null,relativePoints:[{x:te.left?0:1,y:te.top?0:1}],offset:le.offset||"self",origin:{x:0,y:0},range:le.range}},H.targetFields=H.targetFields||[["width","height"],["x","y"]],r1.start(X),H.offsets=X.state.offsets,X.state=H},set:function(X){var H=X.interaction,te=X.state,le=X.coords,he=te.options,be=te.offsets,Te={x:le.x-be[0].x,y:le.y-be[0].y};te.options=Dt({},he),te.options.targets=[];for(var Me=0,$e=he.targets||[];Me<$e.length;Me++){var je=$e[Me],Le=void 0;if(Le=J.func(je)?je(Te.x,Te.y,H):je){for(var Ke=0,ft=te.targetFields;Ke<ft.length;Ke++){var Mt=ft[Ke],Tt=Mt[0],Rt=Mt[1];if(Tt in Le||Rt in Le){Le.x=Le[Tt],Le.y=Le[Rt];break}}te.options.targets.push(Le)}}var Xt=r1.set(X);return te.options=he,Xt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},M5=th(Zv,"snapSize"),Kv={aspectRatio:A7,restrictEdges:k7,restrict:D7,restrictRect:$7,restrictSize:L7,snapEdges:th({start:function(X){var H=X.edges;return H?(X.state.targetFields=X.state.targetFields||[[H.left?"left":"right",H.top?"top":"bottom"]],Zv.start(X)):null},set:Zv.set,defaults:Dt(wm(Zv.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:o1,snapSize:M5,spring:Dm,avoid:Dm,transform:Dm,rubberband:Dm},A5={id:"modifiers",install:function(X){var H=X.interactStatic;for(var te in X.usePlugin($x),X.usePlugin(T7),H.modifiers=Kv,Kv){var le=Kv[te],he=le._defaults,be=le._methods;he._methods=be,X.defaults.perAction[te]=he}}},D5=A5,Vx=function(X){f(te,X);var H=S(te);function te(le,he,be,Te,Me,$e){var je;if(r(this,te),ri(x(je=H.call(this,Me)),be),be!==he&&ri(x(je),he),je.timeStamp=$e,je.originalEvent=be,je.type=le,je.pointerId=mn(he),je.pointerType=T(he),je.target=Te,je.currentTarget=null,le==="tap"){var Le=Me.getPointerIndex(he);je.dt=je.timeStamp-Me.pointers[Le].downTime;var Ke=je.timeStamp-Me.tapTime;je.double=!!Me.prevTap&&Me.prevTap.type!=="doubletap"&&Me.prevTap.target===je.target&&Ke<500}else le==="doubletap"&&(je.dt=he.timeStamp-Me.tapTime,je.double=!0);return je}return l(te,[{key:"_subtractOrigin",value:function(le){var he=le.x,be=le.y;return this.pageX-=he,this.pageY-=be,this.clientX-=he,this.clientY-=be,this}},{key:"_addOrigin",value:function(le){var he=le.x,be=le.y;return this.pageX+=he,this.pageY+=be,this.clientX+=he,this.clientY+=be,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),te}(h),Kc={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(X){X.pointerEvents=Kc,X.defaults.actions.pointerEvents=Kc.defaults,Dt(X.actions.phaselessTypes,Kc.types)},listeners:{"interactions:new":function(X){var H=X.interaction;H.prevTap=null,H.tapTime=0},"interactions:update-pointer":function(X){var H=X.down,te=X.pointerInfo;!H&&te.hold||(te.hold={duration:1/0,timeout:null})},"interactions:move":function(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget;X.duplicate||te.pointerIsDown&&!te.pointerWasMoved||(te.pointerIsDown&&Gx(X),dd({interaction:te,pointer:le,event:he,eventTarget:be,type:"move"},H))},"interactions:down":function(X,H){(function(te,le){for(var he=te.interaction,be=te.pointer,Te=te.event,Me=te.eventTarget,$e=te.pointerIndex,je=he.pointers[$e].hold,Le=qt(Me),Ke={interaction:he,pointer:be,event:Te,eventTarget:Me,type:"hold",targets:[],path:Le,node:null},ft=0;ft<Le.length;ft++){var Mt=Le[ft];Ke.node=Mt,le.fire("pointerEvents:collect-targets",Ke)}if(Ke.targets.length){for(var Tt=1/0,Rt=0,Xt=Ke.targets;Rt<Xt.length;Rt++){var Gt=Xt[Rt].eventable.options.holdDuration;Gt<Tt&&(Tt=Gt)}je.duration=Tt,je.timeout=setTimeout(function(){dd({interaction:he,eventTarget:Me,pointer:be,event:Te,type:"hold"},le)},Tt)}})(X,H),dd(X,H)},"interactions:up":function(X,H){Gx(X),dd(X,H),function(te,le){var he=te.interaction,be=te.pointer,Te=te.event,Me=te.eventTarget;he.pointerWasMoved||dd({interaction:he,eventTarget:Me,pointer:be,event:Te,type:"tap"},le)}(X,H)},"interactions:cancel":function(X,H){Gx(X),dd(X,H)}},PointerEvent:Vx,fire:dd,collectEventTargets:k5,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function dd(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget,Te=X.type,Me=X.targets,$e=Me===void 0?k5(X,H):Me,je=new Vx(Te,le,he,be,te,H.now());H.fire("pointerEvents:new",{pointerEvent:je});for(var Le={interaction:te,pointer:le,event:he,eventTarget:be,targets:$e,type:Te,pointerEvent:je},Ke=0;Ke<$e.length;Ke++){var ft=$e[Ke];for(var Mt in ft.props||{})je[Mt]=ft.props[Mt];var Tt=ho(ft.eventable,ft.node);if(je._subtractOrigin(Tt),je.eventable=ft.eventable,je.currentTarget=ft.node,ft.eventable.fire(je),je._addOrigin(Tt),je.immediatePropagationStopped||je.propagationStopped&&Ke+1<$e.length&&$e[Ke+1].node!==je.currentTarget)break}if(H.fire("pointerEvents:fired",Le),Te==="tap"){var Rt=je.double?dd({interaction:te,pointer:le,event:he,eventTarget:be,type:"doubletap"},H):je;te.prevTap=Rt,te.tapTime=Rt.timeStamp}return je}function k5(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget,Te=X.type,Me=te.getPointerIndex(le),$e=te.pointers[Me];if(Te==="tap"&&(te.pointerWasMoved||!$e||$e.downTarget!==be))return[];for(var je=qt(be),Le={interaction:te,pointer:le,event:he,eventTarget:be,type:Te,path:je,targets:[],node:null},Ke=0;Ke<je.length;Ke++){var ft=je[Ke];Le.node=ft,H.fire("pointerEvents:collect-targets",Le)}return Te==="hold"&&(Le.targets=Le.targets.filter(function(Mt){var Tt,Rt;return Mt.eventable.options.holdDuration===((Tt=te.pointers[Me])==null||(Rt=Tt.hold)==null?void 0:Rt.duration)})),Le.targets}function Gx(X){var H=X.interaction,te=X.pointerIndex,le=H.pointers[te].hold;le&&le.timeout&&(clearTimeout(le.timeout),le.timeout=null)}var N5=Object.freeze({__proto__:null,default:Kc});function $5(X){var H=X.interaction;H.holdIntervalHandle&&(clearInterval(H.holdIntervalHandle),H.holdIntervalHandle=null)}var a1={id:"pointer-events/holdRepeat",install:function(X){X.usePlugin(Kc);var H=X.pointerEvents;H.defaults.holdRepeatInterval=0,H.types.holdrepeat=X.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(X,H){return X["pointerEvents:".concat(H)]=$5,X},{"pointerEvents:new":function(X){var H=X.pointerEvent;H.type==="hold"&&(H.count=(H.count||0)+1)},"pointerEvents:fired":function(X,H){var te=X.interaction,le=X.pointerEvent,he=X.eventTarget,be=X.targets;if(le.type==="hold"&&be.length){var Te=be[0].eventable.options.holdRepeatInterval;Te<=0||(te.holdIntervalHandle=setTimeout(function(){H.pointerEvents.fire({interaction:te,eventTarget:he,type:"hold",pointer:le,event:le},H)},Te))}}})},l1=a1,F7={id:"pointer-events/interactableTargets",install:function(X){var H=X.Interactable;H.prototype.pointerEvents=function(le){return Dt(this.events.options,le),this};var te=H.prototype._backCompatOption;H.prototype._backCompatOption=function(le,he){var be=te.call(this,le,he);return be===this&&(this.events.options[le]=he),be}},listeners:{"pointerEvents:collect-targets":function(X,H){var te=X.targets,le=X.node,he=X.type,be=X.eventTarget;H.interactables.forEachMatch(le,function(Te){var Me=Te.events,$e=Me.options;Me.types[he]&&Me.types[he].length&&Te.testIgnoreAllow($e,le,be)&&te.push({node:le,eventable:Me,props:{interactable:Te}})})},"interactable:new":function(X){var H=X.interactable;H.events.getRect=function(te){return H.getRect(te)}},"interactable:set":function(X,H){var te=X.interactable,le=X.options;Dt(te.events.options,H.pointerEvents.defaults),Dt(te.events.options,le.pointerEvents||{})}}},Jv=F7,O5={id:"pointer-events",install:function(X){X.usePlugin(N5),X.usePlugin(l1),X.usePlugin(Jv)}},R5=O5,jx={id:"reflow",install:function(X){var H=X.Interactable;X.actions.phases.reflow=!0,H.prototype.reflow=function(te){return function(le,he,be){for(var Te=le.getAllElements(),Me=be.window.Promise,$e=Me?[]:null,je=function(){var Ke=Te[Le],ft=le.getRect(Ke);if(!ft)return 1;var Mt,Tt=g(be.interactions.list,function(Gt){return Gt.interacting()&&Gt.interactable===le&&Gt.element===Ke&&Gt.prepared.name===he.name});if(Tt)Tt.move(),$e&&(Mt=Tt._reflowPromise||new Me(function(Gt){Tt._reflowResolve=Gt}));else{var Rt=Us(ft),Xt=function(Gt){return{coords:Gt,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:Rt.x,y:Rt.y},client:{x:Rt.x,y:Rt.y},timeStamp:be.now()});Mt=function(Gt,ai,Ii,es,Si){var Pi=Gt.interactions.new({pointerType:"reflow"}),Er={interaction:Pi,event:Si,pointer:Si,eventTarget:Ii,phase:"reflow"};Pi.interactable=ai,Pi.element=Ii,Pi.prevEvent=Si,Pi.updatePointer(Si,Si,Ii,!0),pn(Pi.coords.delta),_s(Pi.prepared,es),Pi._doPhase(Er);var gn=Gt.window,Ta=gn.Promise,fo=Ta?new Ta(function(Jc){Pi._reflowResolve=Jc}):void 0;return Pi._reflowPromise=fo,Pi.start(es,ai,Ii),Pi._interacting?(Pi.move(Er),Pi.end(Si)):(Pi.stop(),Pi._reflowResolve()),Pi.removePointer(Si,Si),fo}(be,le,Ke,he,Xt)}$e&&$e.push(Mt)},Le=0;Le<Te.length&&!je();Le++);return $e&&Me.all($e).then(function(){return le})}(this,te,X)}},listeners:{"interactions:stop":function(X,H){var te=X.interaction;te.pointerType==="reflow"&&(te._reflowResolve&&te._reflowResolve(),function(le,he){le.splice(le.indexOf(he),1)}(H.interactions.list,te))}}},Bx=jx;if(ta.use(Hr),ta.use($f),ta.use(R5),ta.use(t1),ta.use(D5),ta.use(Os),ta.use(et),ta.use(Ni),ta.use(Bx),ta.default=ta,n(t)==="object"&&t)try{t.exports=ta}catch{}return ta.default=ta,ta})})(Ire);const VP=Ire.exports,e0={dialog:"dialog",panel:"panel",scrim:"scrim",container:"container",containerOpen:"container--open",containerEmbedded:"container--embedded",assistiveText:"assistive-text",openingActive:"dialog--opening-active"},hc={actionBar:"action-bar",alerts:"alerts",content:"content",contentTop:"content-top",contentBottom:"content-bottom",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerStart:"footer-start",footerEnd:"footer-end"},t0=25,GP=25,sX={x:0,y:0},nX={top:0,right:0,bottom:0,left:0},BSe=`:host{--calcite-dialog-scrim-background-color:rgba(0, 0, 0, 0.85);pointer-events:none;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;--calcite-internal-dialog-animation-offset:20px}:host([modal]){position:absolute}.container{pointer-events:auto;position:fixed;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;align-items:center;justify-content:center;overflow:hidden;color:var(--calcite-color-text-2);opacity:0;visibility:hidden;transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}:host([placement=top]) .container{align-items:flex-start;justify-content:center}:host([placement=top-start]) .container{align-items:flex-start;justify-content:flex-start}:host([placement=top-end]) .container{align-items:flex-start;justify-content:flex-end}:host([placement=bottom]) .container{align-items:flex-end;justify-content:center}:host([placement=bottom-start]) .container{align-items:flex-end;justify-content:flex-start}:host([placement=bottom-end]) .container{align-items:flex-end;justify-content:flex-end}:host(:not([modal])) .container{pointer-events:none}:host([scale=s]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-sm));--calcite-internal-dialog-min-size-x:198px;--calcite-internal-dialog-min-size-y:140px}:host([scale=m]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-md));--calcite-internal-dialog-min-size-x:288px;--calcite-internal-dialog-min-size-y:180px}:host([scale=l]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-lg));--calcite-internal-dialog-min-size-x:388px;--calcite-internal-dialog-min-size-y:220px}.scrim{--calcite-scrim-background:var(--calcite-dialog-scrim-background-color, var(--calcite-color-transparent-scrim));--calcite-scrim-background-color:var(
    --calcite-dialog-scrim-background-color,
    var(--calcite-color-transparent-scrim)
  );position:fixed;inset:0px;display:flex;overflow-y:hidden}calcite-panel{--calcite-panel-content-space:var(--calcite-dialog-content-space, var(--calcite-internal-dialog-content-padding));--calcite-panel-footer-padding:var(--calcite-dialog-footer-space);--calcite-panel-header-border-block-end:var(--calcite-border-width-sm) solid var(--calcite-dialog-border-color);--calcite-panel-background-color:var(--calcite-dialog-background-color)}.dialog{pointer-events:none;position:relative;z-index:var(--calcite-z-index-modal);margin:1.5rem;box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;border-radius:0.25rem;opacity:0;--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);-webkit-overflow-scrolling:touch;visibility:hidden;transition:inset-block var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);min-inline-size:var(--calcite-dialog-min-size-x, var(--calcite-internal-dialog-min-size-x));max-inline-size:var(--calcite-dialog-max-size-x, 100%);min-block-size:var(--calcite-dialog-min-size-y, var(--calcite-internal-dialog-min-size-y));max-block-size:var(--calcite-dialog-max-size-y, 100%);--calcite-internal-dialog-hidden-position:calc(
    var(--calcite-dialog-offset-y, 0px) + var(--calcite-internal-dialog-animation-offset)
  );--calcite-internal-dialog-shown-position:var(--calcite-dialog-offset-y, 0);inset-inline-start:var(--calcite-dialog-offset-x, 0);inset-block-start:var(--calcite-internal-dialog-hidden-position)}.dialog--opening-active{inset-block-start:var(--calcite-internal-dialog-shown-position)}:host([menu-open]) .dialog{transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}.panel{border-radius:0.25rem}.container--open{opacity:1;visibility:visible;transition-delay:0ms}.container--open .dialog{pointer-events:auto;visibility:visible;opacity:1;transition:inset-block var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);transition-delay:0ms}:host([width=small]) .dialog{inline-size:auto}:host([width-scale=s]) .dialog{inline-size:var(--calcite-dialog-size-x, 32rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 35rem){:host([width-scale=s]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=s]) .dialog--opening-active{inset-block-start:0}}:host([width-scale=m]) .dialog{inline-size:var(--calcite-dialog-size-x, 48rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 51rem){:host([width-scale=m]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=m]) .dialog--opening-active{inset-block-start:0}}:host([width-scale=l]) .dialog{inline-size:var(--calcite-dialog-size-x, 94rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 97rem){:host([width-scale=l]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=l]) .dialog--opening-active{inset-block-start:0}}:host([placement=cover]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;border-radius:0px}:host([placement=cover]) .panel{border-radius:0px}:host([kind]) .panel{border-start-start-radius:0px;border-start-end-radius:0px}:host([kind=brand]) .dialog{border-color:var(--calcite-color-brand)}:host([kind=danger]) .dialog{border-color:var(--calcite-color-status-danger)}:host([kind=info]) .dialog{border-color:var(--calcite-color-status-info)}:host([kind=success]) .dialog{border-color:var(--calcite-color-status-success)}:host([kind=warning]) .dialog{border-color:var(--calcite-color-status-warning)}:host([kind=brand][open]) .dialog,:host([kind=danger][open]) .dialog,:host([kind=info][open]) .dialog,:host([kind=success][open]) .dialog,:host([kind=warning][open]) .dialog{border-width:0px;border-block-start-width:4px;border-style:solid}.container--embedded{position:absolute;pointer-events:auto}.container--embedded calcite-scrim{position:absolute}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,HSe=BSe;let Ok=0,rX="";const Mre=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDialogBeforeClose=$t(this,"calciteDialogBeforeClose",6),this.calciteDialogClose=$t(this,"calciteDialogClose",6),this.calciteDialogBeforeOpen=$t(this,"calciteDialogBeforeOpen",6),this.calciteDialogOpen=$t(this,"calciteDialogOpen",6),this.calciteDialogScroll=$t(this,"calciteDialogScroll",6),this.openTransitionProp="opacity",this.resizePosition={...nX},this.dragPosition={...sX},this.ignoreOpenChange=!1,this.mutationObserver=wl("mutation",()=>this.handleMutationObserver()),this.handleKeyDown=e=>{const{key:i,shiftKey:s,defaultPrevented:n}=e,{dragEnabled:r,resizable:o,resizePosition:l,dragPosition:u,transitionEl:f}=this;if(!(n||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i)))switch(i){case"ArrowUp":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().height-t0,type:"blockSize"}),l.bottom-=t0,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(u.y-=GP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowDown":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().height+t0,type:"blockSize"}),l.bottom+=t0,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(u.y+=GP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowLeft":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().width-t0,type:"inlineSize"}),l.right-=t0,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(u.x-=GP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowRight":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().width+t0,type:"inlineSize"}),l.right+=t0,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(u.x+=GP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break}},this.setTransitionEl=e=>{this.transitionEl=e,this.setupInteractions()},this.openEnd=()=>{this.setFocus(),this.el.removeEventListener("calciteDialogOpen",this.openEnd)},this.handleInternalPanelScroll=e=>{e.target===this.panelEl&&(e.stopPropagation(),this.calciteDialogScroll.emit())},this.handleInternalPanelCloseClick=e=>{e.target===this.panelEl&&(e.stopPropagation(),this.open=!1)},this.handlePanelKeyDown=e=>{this.escapeDisabled&&e.key==="Escape"&&e.preventDefault()},this.handleOutsideClose=()=>{this.outsideCloseDisabled||(this.open=!1)},this.closeDialog=async()=>{if(this.beforeClose)try{await this.beforeClose()}catch{requestAnimationFrame(()=>{this.ignoreOpenChange=!0,this.open=!0,this.ignoreOpenChange=!1});return}Ok--,this.opened=!1,this.updateOverflowHiddenClass()},this.updateOverflowHiddenClass=()=>{this.opened&&!this.embedded&&this.modal?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()},this.handleMutationObserver=()=>{this.updateFocusTrapElements()},this.beforeClose=void 0,this.description=void 0,this.dragEnabled=!1,this.closeDisabled=!1,this.embedded=!1,this.escapeDisabled=!1,this.heading=void 0,this.headingLevel=void 0,this.kind=void 0,this.loading=!1,this.menuOpen=!1,this.messages=void 0,this.messageOverrides=void 0,this.modal=!1,this.open=!1,this.outsideCloseDisabled=!1,this.overlayPositioning="absolute",this.placement="center",this.resizable=!1,this.scale="m",this.widthScale="m",this.opened=!1,this.hasFooter=!0,this.hasContentTop=!1,this.hasContentBottom=!1,this.effectiveLocale=void 0,this.defaultMessages=void 0,this.assistiveText=null}onMessagesChange(){}onModalChange(){this.updateOverflowHiddenClass()}async componentWillLoad(){await Gc(this),ao(this),this.open&&this.openDialog()}componentDidLoad(){lo(this)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),Pl(this),Bc(this),are(this),this.setupInteractions()}disconnectedCallback(){var e;this.removeOverflowHiddenClass(),(e=this.mutationObserver)==null||e.disconnect(),yS(this),Tl(this),Hc(this),this.embedded=!1,this.cleanupInteractions()}render(){const{assistiveText:e,description:i,heading:s,opened:n}=this;return Ae(hr,{key:"bf406255eaa6d94c8443af185a74a2b2d58c6d59"},Ae("div",{key:"de2a34b6da4a82c66e9fafdbdd2056e4e11e1315",class:{[e0.container]:!0,[e0.containerOpen]:n,[e0.containerEmbedded]:this.embedded}},this.modal?Ae("calcite-scrim",{class:e0.scrim,onClick:this.handleOutsideClose}):null,Ae("div",{key:"be47093e3a955ce45a71c555700143a4a1c7a166","aria-description":i,"aria-label":s,"aria-modal":br(this.modal),class:e0.dialog,onKeyDown:this.handleKeyDown,ref:this.setTransitionEl,role:"dialog"},e?Ae("div",{"aria-live":"polite",class:e0.assistiveText,key:"assistive-text"},e):null,Ae("slot",{key:"6ed9f10ae7d5ecc1ec9062d6aba559001d5194e6",name:hc.content},Ae("calcite-panel",{key:"cd6ebaa7d7362cbeb70e9ae623f38298d1e831e3",beforeClose:this.beforeClose,class:e0.panel,closable:!this.closeDisabled,closed:!n,description:i,heading:s,headingLevel:this.headingLevel,loading:this.loading,menuOpen:this.menuOpen,messageOverrides:this.messageOverrides,onCalcitePanelClose:this.handleInternalPanelCloseClick,onCalcitePanelScroll:this.handleInternalPanelScroll,onKeyDown:this.handlePanelKeyDown,overlayPositioning:this.overlayPositioning,ref:r=>this.panelEl=r,scale:this.scale},Ae("slot",{key:"2ce955775c33b09fc849a083d0bcc1c8ce523dd8",name:hc.actionBar,slot:Yn.actionBar}),Ae("slot",{key:"dd44184de251320af6225baa2e59571b881a23cd",name:hc.alerts,slot:Yn.alerts}),Ae("slot",{key:"da343a1a10e015b04b37463c10592e612a576e9b",name:hc.headerActionsStart,slot:Yn.headerActionsStart}),Ae("slot",{key:"6680fde2bd7ad6dc5803c78ea7250d11d4920b7c",name:hc.headerActionsEnd,slot:Yn.headerActionsEnd}),Ae("slot",{key:"a17ca64188ffe6000792e67eafc838df575ebbc3",name:hc.headerContent,slot:Yn.headerContent}),Ae("slot",{key:"7e048c4a9104053ca0a61ab2514b018efb4fc872",name:hc.headerMenuActions,slot:Yn.headerMenuActions}),Ae("slot",{key:"6760c8a6c105a511fcb859cfd222f8c1355a82c4",name:hc.fab,slot:Yn.fab}),Ae("slot",{key:"e0f2e7644281d408d8c21ce5bf16b08af0a59c3b",name:hc.contentTop,slot:Yn.contentTop}),Ae("slot",{key:"01889c3b7fc13bc49521c27feb2ab35346552504",name:hc.contentBottom,slot:Yn.contentBottom}),Ae("slot",{key:"593bad35110b5d7e7b44d598b397e4b87cc28e28",name:hc.footerStart,slot:Yn.footerStart}),Ae("slot",{key:"5e84099e096a6afb678cce9731b189f4011dc067",name:hc.footer,slot:Yn.footer}),Ae("slot",{key:"69a805bd0c1f43a6d165939e62db562428f39f11",name:hc.footerEnd,slot:Yn.footerEnd}),Ae("slot",{key:"b49e14ff6d2c63caaa8fd296920618e7673eb71b"}))))))}effectiveLocaleChange(){jc(this,this.effectiveLocale)}handleInteractionChange(){this.setupInteractions()}updateAssistiveText(){const{messages:e}=this;this.assistiveText=e&&(this.dragEnabled||this.resizable)?`${this.dragEnabled?e.dragEnabled:""} ${this.resizable?e.resizeEnabled:""}`:null}handleEscape(e){this.open&&!this.escapeDisabled&&e.key==="Escape"&&!e.defaultPrevented&&(this.open=!1,e.preventDefault())}async setFocus(){var e;return await co(this),((e=this.panelEl)==null?void 0:e.setFocus())??nM(this.el)}async updateFocusTrapElements(){lre(this)}async scrollContentTo(e){var i;await((i=this.panelEl)==null?void 0:i.scrollContentTo(e))}onBeforeOpen(){this.calciteDialogBeforeOpen.emit()}onOpen(){this.calciteDialogOpen.emit(),y$(this)}onBeforeClose(){this.calciteDialogBeforeClose.emit()}onClose(){this.calciteDialogClose.emit(),yS(this)}toggleDialog(e){this.ignoreOpenChange||(e?this.openDialog():this.closeDialog())}handleOpenedChange(e){this.transitionEl.classList.toggle(e0.openingActive,e),af(this)}async triggerInteractModifiers(){const{interaction:e}=this;e&&(await e.reflow({name:"drag"}),await e.reflow({name:"resize"}))}getTransitionElDOMRect(){return this.transitionEl.getBoundingClientRect()}updateTransform(){const{dragPosition:{x:e,y:i},resizePosition:s,transitionEl:n,dragEnabled:r,resizable:o}=this;if(!n)return;if(!r&&!o){n.style.transform=null;return}const{top:l,right:u,bottom:f,left:y}=this.getAdjustedResizePosition(s),_=Math.round(e+y+u),x=Math.round(i+l+f);n.style.transform=_||x?`translate(${_}px, ${x}px)`:null}updateSize({type:e,size:i}){const{transitionEl:s}=this;s&&(s.style[e]=i!==null?`${Math.round(i)}px`:null)}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset(),this.updateSize({size:null,type:"inlineSize"}),this.updateSize({size:null,type:"blockSize"}),this.dragPosition={...sX},this.resizePosition={...nX},this.updateTransform()}setupInteractions(){this.cleanupInteractions();const{el:e,transitionEl:i,resizable:s,dragEnabled:n,resizePosition:r,dragPosition:o}=this;if(!(!i||!this.open)){if((s||n)&&(this.interaction=VP(i,{context:e.ownerDocument})),s){const{minInlineSize:l,minBlockSize:u,maxInlineSize:f,maxBlockSize:y}=window.getComputedStyle(i);this.interaction.resizable({edges:{top:!0,right:!0,bottom:!0,left:!0},modifiers:[VP.modifiers.restrictSize({min:{width:this.isPixelValue(l)?parseInt(l,10):0,height:this.isPixelValue(u)?parseInt(u,10):0},max:{width:this.isPixelValue(f)?parseInt(f,10):window.innerWidth,height:this.isPixelValue(y)?parseInt(y,10):window.innerHeight}}),VP.modifiers.restrict({restriction:"parent"})],listeners:{move:({rect:_,deltaRect:x})=>{x&&(r.top+=x.top,r.right+=x.right,r.bottom+=x.bottom,r.left+=x.left),this.updateSize({size:_.width,type:"inlineSize"}),this.updateSize({size:_.height,type:"blockSize"}),this.updateTransform()}}})}n&&this.interaction.draggable({modifiers:[VP.modifiers.restrictRect({restriction:"parent"})],listeners:{move:({dx:l,dy:u})=>{o.x+=l,o.y+=u,this.updateTransform()}}})}}isPixelValue(e){return e.indexOf("px")!==-1}getAdjustedResizePosition({top:e,right:i,bottom:s,left:n}){const r=e/2,o=i/2,l=s/2,u=n/2;switch(this.placement){case"top":return{top:e,right:o,bottom:0,left:u};case"top-start":return{top:e,right:0,bottom:0,left:n};case"top-end":return{top:e,right:i,bottom:0,left:0};case"bottom":return{top:0,right:o,bottom:s,left:u};case"bottom-start":return{top:0,right:0,bottom:s,left:n};case"bottom-end":return{top:0,right:i,bottom:s,left:0};case"cover":case"center":default:return{top:r,right:o,bottom:l,left:u}}}async openDialog(){await Rne(this.el),this.el.addEventListener("calciteDialogOpen",this.openEnd),this.opened=!0,this.updateOverflowHiddenClass()}addOverflowHiddenClass(){Ok===0&&(rX=document.documentElement.style.overflow),Ok++,document.documentElement.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.documentElement.style.setProperty("overflow",rX)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],modal:["onModalChange"],effectiveLocale:["effectiveLocaleChange"],open:["handleInteractionChange","toggleDialog"],placement:["handleInteractionChange"],resizable:["handleInteractionChange","updateAssistiveText"],dragEnabled:["handleInteractionChange","updateAssistiveText"],messages:["updateAssistiveText"],opened:["handleOpenedChange"]}}static get style(){return HSe}},[1,"calcite-dialog",{beforeClose:[16],description:[1],dragEnabled:[516,"drag-enabled"],closeDisabled:[516,"close-disabled"],embedded:[1028],escapeDisabled:[516,"escape-disabled"],heading:[1],headingLevel:[514,"heading-level"],kind:[513],loading:[516],menuOpen:[516,"menu-open"],messages:[1040],messageOverrides:[1040],modal:[516],open:[1540],outsideCloseDisabled:[516,"outside-close-disabled"],overlayPositioning:[513,"overlay-positioning"],placement:[513],resizable:[516],scale:[513],widthScale:[513,"width-scale"],opened:[32],hasFooter:[32],hasContentTop:[32],hasContentBottom:[32],effectiveLocale:[32],defaultMessages:[32],assistiveText:[32],setFocus:[64],updateFocusTrapElements:[64],scrollContentTo:[64]},[[8,"keydown","handleEscape"]],{messageOverrides:["onMessagesChange"],modal:["onModalChange"],effectiveLocale:["effectiveLocaleChange"],open:["handleInteractionChange","toggleDialog"],placement:["handleInteractionChange"],resizable:["handleInteractionChange","updateAssistiveText"],dragEnabled:["handleInteractionChange","updateAssistiveText"],messages:["updateAssistiveText"],opened:["handleOpenedChange"]}]);function Are(){if(typeof customElements>"u")return;["calcite-dialog","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-panel","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-dialog":customElements.get(e)||customElements.define(e,Mre);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-action-menu":customElements.get(e)||dC();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break;case"calcite-panel":customElements.get(e)||Tre();break;case"calcite-popover":customElements.get(e)||ix();break;case"calcite-scrim":customElements.get(e)||uq();break}})}Are();const USe=Mre,YSe=Are,XSe=Object.freeze(Object.defineProperty({__proto__:null,CalciteDialog:USe,defineCustomElement:YSe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const WSe={container:"container"},ZSe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",KSe=ZSe,JSe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=$t(this,"calciteInternalLabelClick",2),this.labelClickHandler=e=>{var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}handleForChange(){mxe(this.el)}connectedCallback(){document.dispatchEvent(new CustomEvent(rM))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(r9))}render(){return Ae(hr,{key:"c3eff09792519c9e5a76ee28e3754db83b536f99",onClick:this.labelClickHandler},Ae("div",{key:"387902edd9b59be290f95ad6c2721584037d7256",class:WSe.container},Ae("slot",{key:"b54d782522e95323333040e40e1a6dd06b52a575"})))}get el(){return this}static get watchers(){return{for:["handleForChange"]}}static get style(){return KSe}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]},void 0,{for:["handleForChange"]}]);function QSe(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,JSe);break}})}QSe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const eEe={dropdownTrigger:"trigger"},tEe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale=s]){--calcite-dropdown-width:12rem}:host([width-scale=m]){--calcite-dropdown-width:14rem}:host([width-scale=l]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}",iEe=tEe,sEe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=$t(this,"calciteDropdownSelect",6),this.calciteDropdownBeforeClose=$t(this,"calciteDropdownBeforeClose",6),this.calciteDropdownClose=$t(this,"calciteDropdownClose",6),this.calciteDropdownBeforeOpen=$t(this,"calciteDropdownBeforeOpen",6),this.calciteDropdownOpen=$t(this,"calciteDropdownOpen",6),this.items=[],this.groups=[],this.mutationObserver=wl("mutation",()=>this.updateItems()),this.resizeObserver=wl("resize",e=>this.resizeObserverCallback(e)),this.openTransitionProp="opacity",this.guid=`calcite-dropdown-${lm()}`,this.focusLastDropdownItem=!1,this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Sre(i,e):null},this.updateTriggers=e=>{this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)},this.updateItems=()=>{this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)},this.updateGroups=e=>{const i=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupScale()},this.resizeObserverCallback=e=>{e.forEach(i=>{const{target:s}=i;s===this.referenceEl?this.setDropdownWidth():s===this.scrollerEl&&this.setMaxScrollerHeight()})},this.setDropdownWidth=()=>{const{referenceEl:e,scrollerEl:i}=this,s=e==null?void 0:e.clientWidth;!s||!i||(i.style.minWidth=`${s}px`)},this.setMaxScrollerHeight=()=>{const{scrollerEl:e}=this;if(!e)return;this.reposition(!0);const i=this.getMaxScrollerHeight();e.style.maxHeight=i>0?`${i}px`:"",this.reposition(!0)},this.setScrollerAndTransitionEl=e=>{this.resizeObserver.observe(e),this.scrollerEl=e,this.transitionEl=e},this.setReferenceEl=e=>{this.referenceEl=e,Pb(this,this.referenceEl,this.floatingEl),this.resizeObserver.observe(e)},this.setFloatingEl=e=>{this.floatingEl=e,Pb(this,this.referenceEl,this.floatingEl)},this.keyDownHandler=e=>{if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:s}=e;if(!i){if(s==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&s==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}cC(s)?(this.toggleDropdown(),e.preventDefault()):(s==="ArrowDown"||s==="ArrowUp")&&(this.focusLastDropdownItem=s==="ArrowUp",this.open=!0,this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd))}},this.focusOnFirstActiveOrDefaultItem=()=>{const i=this.getTraversableItems().find(s=>s.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1,i&&Yp(i)},this.onOpenEnd=()=>{this.focusOnFirstActiveOrDefaultItem(),this.el.removeEventListener("calciteDropdownOpen",this.onOpenEnd)},this.toggleDropdown=()=>{this.open=!this.open,this.open&&this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd)},this.open=!1,this.closeOnSelectDisabled=!1,this.disabled=!1,this.flipPlacements=void 0,this.maxItems=0,this.overlayPositioning="absolute",this.placement=bSe,this.selectedItems=[],this.type="click",this.widthScale=void 0,this.scale="m"}openHandler(){if(af(this),this.disabled){this.open=!1;return}this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupScale()}async setFocus(){await co(this),nM(this.referenceEl)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.open&&(this.openHandler(),af(this)),this.updateItems(),Pb(this,this.referenceEl,this.floatingEl)}componentWillLoad(){ao(this)}componentDidLoad(){lo(this),Pb(this,this.referenceEl,this.floatingEl)}componentDidRender(){Cf(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),dM(this,this.referenceEl,this.floatingEl)}render(){const{open:e,guid:i}=this;return Ae(hr,{key:"377c3d9687bc025f004b4efe58bfa5f0893d86d0"},Ae(Pf,{key:"9e2f48be045fc6db10cc7203a8b998ec2b6abafd",disabled:this.disabled},Ae("div",{key:"8607de2d53a4f8c4b29206ee56aa23ad4c2cbe3d",class:"calcite-trigger-container",id:`${i}-menubutton`,onClick:this.toggleDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},Ae("slot",{key:"07de8df34055ddc39301654a5ca312ddf293e6a9","aria-controls":`${i}-menu`,"aria-expanded":br(e),"aria-haspopup":"menu",name:eEe.dropdownTrigger,onSlotchange:this.updateTriggers})),Ae("div",{key:"c1469efb62eb704b021ce6479ad55deda59582d4","aria-hidden":br(!e),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},Ae("div",{key:"f875166d486a53cd393f17d9295974aa449d449f","aria-labelledby":`${i}-menubutton`,class:{"calcite-dropdown-content":!0,[m2.animation]:!0,[m2.animationActive]:e},id:`${i}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},Ae("slot",{key:"bc6e61383aaf85b3d6242a86c50da68bc8b31e27",onSlotchange:this.updateGroups})))))}async reposition(e=!1){const{floatingEl:i,referenceEl:s,placement:n,overlayPositioning:r,filteredFlipPlacements:o}=this;return cq(this,{floatingEl:i,referenceEl:s,overlayPositioning:r,placement:n,flipPlacements:o,type:"menu"},e)}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,s=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(s);break;case"ArrowDown":K0(n,s,"next");break;case"ArrowUp":K0(n,s,"previous");break;case"Home":K0(n,s,"first");break;case"End":K0(n,s,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}updateGroupScale(){var e;(e=this.groups)==null||e.forEach(i=>i.scale=this.scale)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getMaxScrollerHeight(){const{maxItems:e,items:i}=this;let s=0,n=0,r;return this.groups.forEach(o=>{e>0&&s<e&&Array.from(o.children).forEach((l,u)=>{u===0&&(isNaN(r)&&(r=l.offsetTop),n+=r),s<e&&(n+=l.offsetHeight,s+=1)})}),i.length>e?n:0}closeCalciteDropdown(e=!0){this.open=!1,e&&Yp(this.triggers[0])}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}}static get style(){return iEe}},[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],selectedItems:[1040],type:[513],widthScale:[513,"width-scale"],scale:[513],setFocus:[64],reposition:[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter","pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]],{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}]);function nEe(){if(typeof customElements>"u")return;["calcite-dropdown"].forEach(e=>{switch(e){case"calcite-dropdown":customElements.get(e)||customElements.define(e,sEe);break}})}nEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const f0={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const rEe=":host{position:relative;display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-color-border-3)}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:0.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:0.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",oEe=rEe,Dre=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDropdownItemChange=$t(this,"calciteInternalDropdownItemChange",6),this.updateItems=()=>{Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)},this.mutationObserver=wl("mutation",()=>this.updateItems()),this.groupTitle=void 0,this.scale="m",this.selectionMode="single"}handlePropsChange(){this.updateItems()}connectedCallback(){var e;this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}componentWillLoad(){this.groupPosition=this.getGroupPosition()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){const e=this.groupTitle?Ae("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?Ae("div",{class:"dropdown-separator",role:"separator"}):null;return Ae(hr,{key:"f41943751aefdb17d4f5d5bd8778c219cfd01a00","aria-label":this.groupTitle,role:"group"},Ae("div",{key:"87b78040b93c06081ca8282a785d466ed8fcf334",class:{[f0.container]:!0}},i,e,Ae("slot",{key:"f635a5bdbe439315eba6292a4858cbd8519d23d1"})))}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{selectionMode:["handlePropsChange"]}}static get style(){return oEe}},[17,"calcite-dropdown-group",{groupTitle:[513,"group-title"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteInternalDropdownItemSelect","updateActiveItemOnChange"]],{selectionMode:["handlePropsChange"]}]);function kre(){if(typeof customElements>"u")return;["calcite-dropdown-group"].forEach(e=>{switch(e){case"calcite-dropdown-group":customElements.get(e)||customElements.define(e,Dre);break}})}kre();const aEe=Dre,lEe=kre,Jlt=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownGroup:aEe,defineCustomElement:lEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cEe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.container a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}:host([scale=s]) .container{padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:0.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-xl)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-xl)}:host(:focus){outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container{color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-color-text-1)}:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-3)}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-color-brand)}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-color-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-color-brand);opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,uEe=cEe,Nre=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=$t(this,"calciteDropdownItemSelect",6),this.calciteInternalDropdownItemSelect=$t(this,"calciteInternalDropdownItemSelect",6),this.calciteInternalDropdownItemKeyEvent=$t(this,"calciteInternalDropdownItemKeyEvent",6),this.calciteInternalDropdownCloseRequest=$t(this,"calciteInternalDropdownCloseRequest",6),this.disabled=!1,this.href=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.label=void 0,this.rel=void 0,this.selected=!1,this.target=void 0,this.selectionMode="single",this.scale="m"}async setFocus(){var e;await co(this),(e=this.el)==null||e.focus()}componentWillLoad(){ao(this),this.initialize()}componentDidLoad(){lo(this)}connectedCallback(){this.initialize()}componentDidRender(){Cf(this)}render(){const{href:e,selectionMode:i,label:s,iconFlipRtl:n}=this,r=Ae("calcite-icon",{key:"1ec1c941651dda8f39fa15427592141f04180f3e",class:f0.iconStart,flipRtl:n==="start"||n==="both",icon:this.iconStart,scale:Xa(this.scale)}),o=Ae("span",{key:"3ab167ed4054ca34b4e13e72b752af6cf25522ae",class:f0.itemContent},Ae("slot",{key:"88cf44809fb48450c66cc8f105bbda008a78157d"})),l=Ae("calcite-icon",{key:"32fb27182943a032c0037f1f878a95c194d2dff1",class:f0.iconEnd,flipRtl:n==="end"||n==="both",icon:this.iconEnd,scale:Xa(this.scale)}),u=this.iconStart&&this.iconEnd?[r,o,l]:this.iconStart?[r,o]:this.iconEnd?[o,l]:o,f=e?Ae("a",{"aria-label":s,class:f0.link,href:e,ref:S=>this.childLink=S,rel:this.rel,tabIndex:-1,target:this.target},u):u,y=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",_=i!=="none"?br(this.selected):null,{disabled:x}=this;return Ae(hr,{key:"beec8e51bf18bdcab1928181828b372cc70bb7ee","aria-checked":_,"aria-label":e?"":s,role:y,tabIndex:x?-1:0},Ae(Pf,{key:"5cbbd1074d6c571f4cac3a99e4a2c09bf113db55",disabled:x},Ae("div",{key:"bff025aeb280c9d0d829e5cf4d94e9392604e607",class:{[f0.container]:!0,[f0.containerNone]:i==="none"}},i!=="none"?Ae("calcite-icon",{class:f0.icon,icon:i==="multiple"?"check":"bullet-point",scale:Xa(this.scale)}):null,f)))}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return uEe}},[1,"calcite-dropdown-item",{disabled:[516],href:[513],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],label:[1],rel:[513],selected:[1540],target:[513],selectionMode:[1,"selection-mode"],scale:[513],setFocus:[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteInternalDropdownItemChange","updateActiveItemOnChange"]]]);function $re(){if(typeof customElements>"u")return;["calcite-dropdown-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-dropdown-item":customElements.get(e)||customElements.define(e,Nre);break;case"calcite-icon":customElements.get(e)||uo();break}})}$re();const hEe=Nre,dEe=$re,ect=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownItem:hEe,defineCustomElement:dEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const y2={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},fEe={menu:"ellipsis"},pEe={container:"container"},mEe=':host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0px;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns:1}:host([columns="2"]){--calcite-internal-action-group-columns:2}:host([columns="3"]){--calcite-internal-action-group-columns:3}:host([columns="4"]){--calcite-internal-action-group-columns:4}:host([columns="5"]){--calcite-internal-action-group-columns:5}:host([columns="6"]){--calcite-internal-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)), auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([hidden]){display:none}[hidden]{display:none}',gEe=mEe,yEe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=e=>{this.menuOpen=!!e.target.open},this.handleMenuActionsSlotChange=e=>{this.hasMenuActions=Is(e)},this.expanded=!1,this.label=void 0,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale=void 0,this.menuFlipPlacements=void 0,this.menuPlacement=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasMenuActions=!1}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}async setFocus(){await co(this),this.el.focus()}connectedCallback(){Pl(this),Bc(this),oC(this)}disconnectedCallback(){Tl(this),Hc(this),aC(this)}async componentWillLoad(){ao(this),await Gc(this)}componentDidLoad(){lo(this)}renderMenu(){const{expanded:e,menuOpen:i,scale:s,layout:n,messages:r,overlayPositioning:o,hasMenuActions:l,menuFlipPlacements:u,menuPlacement:f}=this;return Ae("calcite-action-menu",{expanded:e,flipPlacements:u??(n==="horizontal"?["top","bottom"]:["left","right"]),hidden:!l,label:r.more,onCalciteActionMenuOpen:this.setMenuOpen,open:i,overlayPositioning:o,placement:f??(n==="horizontal"?"bottom-start":"leading-start"),scale:s},Ae("calcite-action",{icon:fEe.menu,scale:s,slot:g2.trigger,text:r.more,textEnabled:e}),Ae("slot",{name:y2.menuActions,onSlotchange:this.handleMenuActionsSlotChange}),Ae("slot",{name:y2.menuTooltip,slot:g2.tooltip}))}render(){return Ae("div",{key:"8143606c5745053f15140f34ff5ea375a683325f","aria-label":this.label,class:pEe.container,role:"group"},Ae("slot",{key:"e8c2821b9ce2e9d0293478989fc31d24f043f9c3"}),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return gEe}},[17,"calcite-action-group",{expanded:[516],label:[1],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],overlayPositioning:[513,"overlay-positioning"],scale:[513],menuFlipPlacements:[16],menuPlacement:[513,"menu-placement"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],hasMenuActions:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Ore(){if(typeof customElements>"u")return;["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-group":customElements.get(e)||customElements.define(e,yEe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-action-menu":customElements.get(e)||dC();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break;case"calcite-popover":customElements.get(e)||ix();break}})}Ore();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const vEe=2,oX=t=>t.reduce((e,i)=>e+i,0)/t.length,ict=t=>{const e=t.filter(s=>s.slot!==y2.menuActions),i=e==null?void 0:e.length;return{actionWidth:i?oX(e.map(s=>s.clientWidth||0)):0,actionHeight:i?oX(e.map(s=>s.clientHeight||0)):0}},_Ee=({width:t,actionWidth:e,layout:i,height:s,actionHeight:n,groupCount:r})=>{const o=i==="horizontal"?t:s,l=i==="horizontal"?e:n;return Math.floor((o-r*vEe)/l)},sct=({layout:t,actionCount:e,actionWidth:i,width:s,actionHeight:n,height:r,groupCount:o})=>Math.max(e-_Ee({width:s,actionWidth:i,layout:t,height:r,actionHeight:n,groupCount:o}),0),Rre=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===g2.trigger:!0),nct=({actionGroups:t,expanded:e,overflowCount:i})=>{let s=i;t.reverse().forEach(n=>{let r=0;const o=Rre(n).reverse();o.forEach(l=>{l.slot===y2.menuActions&&(l.removeAttribute("slot"),l.textEnabled=e)}),s>0&&o.some(l=>(o.filter(f=>!f.slot).length>1&&o.length>2&&!l.closest("calcite-action-menu")&&(l.textEnabled=!0,l.setAttribute("slot",y2.menuActions),r++,r>1&&s--),s<1)),Io(n)})},aX={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function bEe(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function lX({el:t,expanded:e}){Rre(t).filter(i=>i.slot!==y2.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const xEe=({tooltip:t,referenceElement:e,expanded:i,ref:s})=>(t&&(t.referenceElement=!i&&e?e:null),s&&s(e),e),wEe=({expanded:t,expandText:e,collapseText:i,expandLabel:s,collapseLabel:n,toggle:r,el:o,position:l,tooltip:u,ref:f,scale:y})=>{const _=Gp(o)==="rtl",x=t?i:e,S=t?n:s,P=[aX.chevronsLeft,aX.chevronsRight];_&&P.reverse();const A=bEe(l,o)==="end",k=A?P[1]:P[0],$=A?P[0]:P[1];return Ae("calcite-action",{icon:t?k:$,id:"expand-toggle",label:S,onClick:r,ref:G=>xEe({tooltip:u,referenceElement:G,expanded:t,ref:f}),scale:y,text:x,textEnabled:t,title:!t&&!u?x:null})};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cX={actionGroupEnd:"action-group--end",container:"container"},SEe={expandTooltip:"expand-tooltip"},EEe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:block}@keyframes in{0%{opacity:0}100%{opacity:1}}:host{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:var(--calcite-action-pad-corner-radius, 0.125rem);background:transparent}:host([expanded][layout=vertical]) .container{max-inline-size:var(--calcite-action-pad-expanded-max-width, auto)}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:1px}.container{display:inline-flex;flex-direction:column;overflow-y:auto;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);gap:var(--calcite-action-pad-items-space, 0);border-radius:calc(var(--calcite-action-pad-corner-radius, 0.125rem) * 2);background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}.action-group--bottom{flex-grow:1;justify-content:flex-end;padding-block-end:0px}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]) .container .action-group--bottom{padding:0px}:host([layout=horizontal]) .container ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:1px}:host([hidden]){display:none}[hidden]{display:none}",CEe=EEe,PEe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionPadToggle=$t(this,"calciteActionPadToggle",6),this.mutationObserver=wl("mutation",()=>this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))),this.actionMenuOpenHandler=e=>{if(e.target.menuOpen){const i=e.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach(s=>{i.includes(s)||(s.menuOpen=!1)})}},this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionPadToggle.emit()},this.handleDefaultSlotChange=e=>{const i=Nu(e).filter(s=>s==null?void 0:s.matches("calcite-action-group"));this.setGroupLayout(i)},this.handleTooltipSlotChange=e=>{const i=Nu(e).filter(s=>s==null?void 0:s.matches("calcite-tooltip"));this.expandTooltip=i[0]},this.actionsEndGroupLabel=void 0,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.overlayPositioning="absolute",this.expandTooltip=void 0,this.effectiveLocale="",this.defaultMessages=void 0}expandedHandler(e){lX({el:this.el,expanded:e})}layoutHandler(){this.updateGroups()}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}connectedCallback(){var e;oC(this),Pl(this),Bc(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectedCallback(){var e;Tl(this),Hc(this),aC(this),(e=this.mutationObserver)==null||e.disconnect()}async componentWillLoad(){ao(this);const{el:e,expanded:i}=this;lX({el:e,expanded:i}),await Gc(this)}componentDidLoad(){lo(this)}async setFocus(){var e;await co(this),(e=this.el)==null||e.focus()}updateGroups(){this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))}setGroupLayout(e){e.forEach(i=>i.layout=this.layout)}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,messages:s,el:n,position:r,toggleExpand:o,scale:l,layout:u,actionsEndGroupLabel:f,overlayPositioning:y}=this,_=i?null:Ae(wEe,{collapseLabel:s.collapseLabel,collapseText:s.collapse,el:n,expandLabel:s.expandLabel,expandText:s.expand,expanded:e,position:r,scale:l,toggle:o,tooltip:this.expandTooltip});return _?Ae("calcite-action-group",{class:cX.actionGroupEnd,label:f,layout:u,overlayPositioning:y,scale:l},Ae("slot",{name:SEe.expandTooltip,onSlotchange:this.handleTooltipSlotChange}),_):null}render(){return Ae(hr,{key:"ca50c5f475d78b92b5347ab912727587420ceea5",onCalciteActionMenuOpen:this.actionMenuOpenHandler},Ae("div",{key:"81b26e9b6bd0a04357fe00ef55111c6bb609f4e7",class:cX.container},Ae("slot",{key:"e346dc6cfab0e26cfc694b43063715d7b845ae32",onSlotchange:this.handleDefaultSlotChange}),this.renderBottomActionGroup()))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return CEe}},[17,"calcite-action-pad",{actionsEndGroupLabel:[1,"actions-end-group-label"],expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],overlayPositioning:[513,"overlay-positioning"],expandTooltip:[32],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function TEe(){if(typeof customElements>"u")return;["calcite-action-pad","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-pad":customElements.get(e)||customElements.define(e,PEe);break;case"calcite-action":customElements.get(e)||um();break;case"calcite-action-group":customElements.get(e)||Ore();break;case"calcite-action-menu":customElements.get(e)||dC();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break;case"calcite-popover":customElements.get(e)||ix();break}})}TEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const IEe={container:"container"},MEe=300,AEe=500,uX="aria-describedby";function Lre(t){const{referenceElement:e}=t;return(typeof e=="string"?lC(t,{id:e}):e)||null}class DEe{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.activeTooltip=null,this.registeredElementCount=0,this.clickedTooltip=null,this.queryTooltip=e=>{const{registeredElements:i}=this,s=e.find(n=>i.has(n));return i.get(s)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const s=Lre(i);s instanceof Element&&s.contains(e.target)&&e.preventDefault()}}},this.pointerMoveHandler=e=>{const i=e.composedPath(),{activeTooltip:s}=this,n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}n!==this.clickedTooltip&&(n?this.openHoveredTooltip(n):s!=null&&s.open&&this.closeHoveredTooltip(),this.clickedTooltip=null)},this.clickHandler=e=>{this.clickedTooltip=null;const i=e.composedPath(),s=this.queryTooltip(i);if(this.pathHasOpenTooltip(s,i)){this.clearHoverTimeout();return}if(this.closeActiveTooltip(),!!s){if(this.clearHoverTimeout(),s.closeOnClick){this.clickedTooltip=s,this.toggleTooltip(s,!1);return}this.toggleTooltip(s,!0)}},this.blurHandler=()=>{this.closeActiveTooltip()},this.focusInHandler=e=>{const i=e.composedPath(),s=this.queryTooltip(i);if(this.pathHasOpenTooltip(s,i)){this.clearHoverTimeout();return}this.closeTooltipIfNotActive(s),s&&this.toggleFocusedTooltip(s,!0)},this.openHoveredTooltip=e=>{var i;this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout!==null&&(this.clearHoverCloseTimeout(),this.closeTooltipIfNotActive(e),this.toggleTooltip(e,!0))},(i=this.activeTooltip)!=null&&i.open?0:MEe)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},AEe)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const s=this.getReferenceElShadowRootNode(e);s&&this.registerShadowRoot(s),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}pathHasOpenTooltip(e,i){const{activeTooltip:s}=this;return(s==null?void 0:s.open)&&i.includes(s)||(e==null?void 0:e.open)&&i.includes(e)}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler,{capture:!0})}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler,{capture:!0})}addListeners(){window.addEventListener("keydown",this.keyDownHandler,{capture:!0}),window.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.addEventListener("click",this.clickHandler,{capture:!0}),window.addEventListener("focusin",this.focusInHandler,{capture:!0}),window.addEventListener("blur",this.blurHandler)}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),window.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.removeEventListener("click",this.clickHandler,{capture:!0}),window.removeEventListener("focusin",this.focusInHandler,{capture:!0}),window.removeEventListener("blur",this.blurHandler)}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeTooltipIfNotActive(e){this.activeTooltip!==e&&this.closeActiveTooltip()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,s=i.get(e),n=Math.min((typeof s=="number"?s:0)+1,1);n===1&&this.addShadowListeners(e),i.set(e,n)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,s=i.get(e),n=Math.max((typeof s=="number"?s:1)-1,0);n===0&&this.removeShadowListeners(e),i.set(e,n)}getReferenceElShadowRootNode(e){return e instanceof Element?Zbe(e):null}}const kEe=":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}",NEe=kEe,hX=new DEe,Fre=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=$t(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=$t(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=$t(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=$t(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${lm()}`,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=Lre(this.el),Pb(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:s,effectiveReferenceElement:n}=this;e&&s&&!n&&console.warn(`${i.tagName}: reference-element id "${s}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(uX,i),hX.registerElement(e,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(uX),hX.unregisterElement(e))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=Cre,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0,this.floatingLayout="vertical"}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){af(this),this.reposition(!0)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){this.setUpReferenceElement(!0),this.open&&af(this)}async componentWillLoad(){this.open&&af(this)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement()}disconnectedCallback(){this.removeReferences(),dM(this,this.effectiveReferenceElement,this.el)}async reposition(e=!1){const{el:i,effectiveReferenceElement:s,placement:n,overlayPositioning:r,offsetDistance:o,offsetSkidding:l,arrowEl:u}=this;return cq(this,{floatingEl:i,referenceEl:s,overlayPositioning:r,placement:n,offsetDistance:o,offsetSkidding:l,arrowEl:u,type:"tooltip"},e)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit()}render(){const{effectiveReferenceElement:e,label:i,open:s,floatingLayout:n}=this,r=e&&s,o=!r;return Ae(hr,{key:"4f097fd8c6eda6dfcd5734e5aaea1f52092501e7","aria-hidden":br(o),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":o,id:this.getId(),role:"tooltip"},Ae("div",{key:"6b5055ab6f95277dd4daeaaff15cb9848d85eea0",class:{[m2.animation]:!0,[m2.animationActive]:r},ref:this.setTransitionEl},Ae(Pre,{key:"57f68bea5a7bb369d82437f10535cab9753677ea",floatingLayout:n,ref:l=>this.arrowEl=l}),Ae("div",{key:"100b8318173849508952f996acaeb5bf81b8af43",class:IEe.container},Ae("slot",{key:"f89d3ae9313d9555e6a7acdc32c323de85319a3a"}))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return NEe}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],floatingLayout:[32],reposition:[64]},void 0,{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}]);function zre(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,Fre);break}})}zre();const $Ee=Fre,OEe=zre,REe=Object.freeze(Object.defineProperty({__proto__:null,CalciteTooltip:$Ee,defineCustomElement:OEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const LEe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host span{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0px;border-style:none;font-family:inherit;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host span:hover{text-decoration:none}:host a,:host span{outline-color:transparent}:host a:focus,:host span:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-block-start:-0.25em}:host .calcite-link--icon.icon-start{margin-inline-end:0.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:0.5rem}:host span,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;color:var(--calcite-color-text-link);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor, currentColor), linear-gradient(var(--calcite-color-brand-underline), var(--calcite-color-brand-underline));background-position-x:0%, 100%;background-position-y:min(1.5em, 100%);background-repeat:no-repeat, no-repeat;background-size:0% 1px, 100% 1px}:host span:hover,:host span:focus,:host a:hover,:host a:focus{background-size:100% 1px, 100% 1px}:host span:active,:host a:active{background-size:100% 2px, 100% 2px}:host span.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%, 100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,FEe=LEe,zEe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childElClickHandler=e=>{e.isTrusted||e.stopPropagation()},this.storeTagRef=e=>{this.childEl=e},this.disabled=!1,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.rel=void 0,this.target=void 0}componentWillLoad(){ao(this)}componentDidLoad(){lo(this)}componentDidRender(){Cf(this)}render(){const{download:e,el:i}=this,s=Gp(i),n=this.href?"a":"span",r=Ae("calcite-icon",{key:"c9844033e9bd5da35333b485aad27ddb2df6b039",class:"calcite-link--icon icon-start",flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:"s"}),o=Ae("calcite-icon",{key:"f1de10682fee566552253cf2ae3cb6725f5e5f11",class:"calcite-link--icon icon-end",flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:"s"}),l=n,u=n==="span"?"link":null,f=n==="span"?0:null;return Ae(hr,{key:"5ad440468fcccb6fe7c146ec57462e7593f96109",role:"presentation"},Ae(Pf,{key:"916c68cd97c31fa1ec69f408d25d3023749698e1",disabled:this.disabled},Ae(l,{key:"e00cebc0c56b95c02192872ac84df996a74a5fa4",class:{[Bl.rtl]:s==="rtl"},download:n==="a"?e===!0||e===""?"":e||null:null,href:n==="a"&&this.href,onClick:this.childElClickHandler,ref:this.storeTagRef,rel:n==="a"&&this.rel,role:u,tabIndex:f,target:n==="a"&&this.target},this.iconStart?r:null,Ae("slot",{key:"57b25ff3b8f7f3d048796a559c2911178d6b8ddf"}),this.iconEnd?o:null)))}clickHandler(e){this.disabled||e.isTrusted||this.childEl.click()}async setFocus(){await co(this),Yp(this.childEl)}get el(){return this}static get style(){return FEe}},[1,"calcite-link",{disabled:[516],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],rel:[1],target:[1],setFocus:[64]},[[0,"click","clickHandler"]]]);function qEe(){if(typeof customElements>"u")return;["calcite-link","calcite-icon"].forEach(e=>{switch(e){case"calcite-link":customElements.get(e)||customElements.define(e,zEe);break;case"calcite-icon":customElements.get(e)||uo();break}})}qEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function qre(t){return(t==null?void 0:t.tagName)==="CALCITE-TREE-ITEM"}function VEe(t){return Array.from(t.querySelectorAll("calcite-tree-item:not([disabled])")).filter(e=>{let i=e;for(;i!==t&&i!==void 0;){const s=i.parentElement;if(!(!qre(s)||!s.hasChildren||s.expanded))return!1;i=i.parentElement}return!0})}const GEe=":host{display:block}:host(:focus){outline:2px solid transparent;outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}",jEe=GEe,BEe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTreeSelect=$t(this,"calciteTreeSelect",6),this.keyDownHandler=e=>{if(this.child)return;const i=this.el,s=e.target,n=["ArrowRight","ArrowDown","ArrowLeft","ArrowUp","Home","End","Tab"];if(!(qre(s)&&this.el.contains(s))||!n.includes(e.key))return;const r=VEe(i);if(e.key==="Tab"){r.forEach(o=>o.tabIndex=-1);return}if(e.key==="ArrowDown"){const o=r.indexOf(s),l=r[o+1];l==null||l.focus(),e.preventDefault();return}if(e.key==="ArrowUp"){const o=r.indexOf(s),l=r[o-1];l==null||l.focus(),e.preventDefault();return}if(e.key==="ArrowLeft"){if(s.hasChildren&&s.expanded){s.expanded=!1,e.preventDefault();return}const l=r.slice(0,r.indexOf(s)).reverse().find(u=>u.depth===s.depth-1);l==null||l.focus(),e.preventDefault();return}if(e.key==="ArrowRight"){if(!s.disabled&&s.hasChildren)if(!s.expanded)s.expanded=!0,e.preventDefault();else{const o=r.indexOf(s),l=r[o+1];l==null||l.focus(),e.preventDefault()}return}if(e.key==="Home"){const o=r.shift();o&&(o.focus(),e.preventDefault());return}if(e.key==="End"){const o=r.pop();o&&(o.focus(),e.preventDefault());return}},this.lines=!1,this.child=void 0,this.scale="m",this.selectionMode="single",this.selectedItems=[]}componentWillRender(){var i;const e=(i=this.el.parentElement)==null?void 0:i.closest("calcite-tree");this.lines=e?e.lines:this.lines,this.scale=e?e.scale:this.scale,this.selectionMode=e?e.selectionMode:this.selectionMode,this.child=!!e}render(){return Ae(hr,{key:"5b08de1c59622b78985de9019bf4ba11d605a07f","aria-multiselectable":this.child?void 0:br(this.selectionMode==="multiple"||this.selectionMode==="multichildren"),onKeyDown:this.keyDownHandler,role:this.child?void 0:"tree",tabIndex:this.getRootTabIndex()},Ae("slot",{key:"00a037cf92cb5facadc4b2961a9369b6ae0631f5"}))}onFocus(){if(!this.child){const e=this.el.querySelector("calcite-tree-item[selected]:not([disabled])")||this.el.querySelector("calcite-tree-item:not([disabled])");Yp(e)}}onFocusIn(e){(e.relatedTarget===this.el||!this.el.contains(e.relatedTarget))&&this.el.removeAttribute("tabindex")}onFocusOut(e){!this.el.contains(e.relatedTarget)&&(this.el.tabIndex=this.getRootTabIndex())}onInternalTreeItemSelect(e){if(this.child)return;const i=e.target,s=Mw(i.querySelectorAll("calcite-tree-item"));if(e.preventDefault(),e.stopPropagation(),this.selectionMode==="ancestors"){this.updateAncestorTree(e);return}const n=this.selectionMode==="none",r=this.selectionMode!==null&&(!i.hasChildren||i.hasChildren&&(this.selectionMode==="children"||this.selectionMode==="multichildren")),o=this.selectionMode==="multichildren"&&i.hasChildren,l=!n&&e.detail.modifyCurrentSelection&&(this.selectionMode==="multiple"||this.selectionMode==="multichildren"),u=!l&&((this.selectionMode==="single"||this.selectionMode==="multiple")&&s.length<=0||this.selectionMode==="children"||this.selectionMode==="multichildren"||this.selectionMode==="single-persist"&&!i.hasChildren),f=["multiple","none","single","single-persist"].includes(this.selectionMode)&&i.hasChildren,y=[];r&&y.push(i),u&&Mw(this.el.querySelectorAll("calcite-tree-item[selected]")).forEach(x=>{y.includes(x)||(x.selected=!1)}),f&&["multiple","none","single","single-persist"].includes(this.selectionMode)&&(i.expanded=!i.expanded),o&&s.forEach(_=>{_.selected=!1,_.hasChildren&&(_.expanded=!1)}),l&&window.getSelection().removeAllRanges(),l&&i.selected?y.forEach(_=>{_.disabled||(_.selected=!1)}):n||y.forEach(_=>{_.disabled||(_.selected=this.selectionMode!=="single"||!_.selected)}),this.selectedItems=n?[]:Mw(this.el.querySelectorAll("calcite-tree-item")).filter(_=>_.selected),this.calciteTreeSelect.emit(),e.stopPropagation()}updateAncestorTree(e){const i=e.target,s=e.detail.updateItem;if(i.disabled||i.indeterminate&&!s)return;const n=[];let r=i.parentElement.closest("calcite-tree-item");for(;r;)n.push(r),r=r.parentElement.closest("calcite-tree-item");const o=Array.from(i.querySelectorAll("calcite-tree-item:not([disabled])")),l=o.filter(_=>!_.hasChildren),u=o.filter(_=>_.hasChildren);let f;s?f=i.hasChildren?!(i.selected||i.indeterminate):!i.selected:f=i.selected,l.forEach(_=>{_.selected=f,_.indeterminate=!1});function y(_,x){const S=_.filter(A=>A.selected),P=_.filter(A=>!A.selected);x.selected=S.length===_.length,x.indeterminate=S.length>0&&P.length>0}u.reverse().forEach(_=>{const x=Array.from(_.querySelectorAll(":scope > calcite-tree > calcite-tree-item"));y(x,_)}),s&&(i.hasChildren?y(o,i):(i.selected=f,i.indeterminate=!1)),n.forEach(_=>{const x=Mw(_.querySelectorAll("calcite-tree-item")),S=x.filter(A=>A.selected);if(S.length===0){_.selected=!1,_.indeterminate=!1;return}const P=S.length<x.length;_.indeterminate=P,_.selected=!P}),this.selectedItems=Mw(this.el.querySelectorAll("calcite-tree-item")).filter(_=>_.selected),s&&this.calciteTreeSelect.emit()}getRootTabIndex(){return this.child?-1:0}get el(){return this}static get style(){return jEe}},[1,"calcite-tree",{lines:[1540],child:[1540],scale:[1537],selectionMode:[1537,"selection-mode"],selectedItems:[1040]},[[0,"focus","onFocus"],[0,"focusin","onFocusIn"],[0,"focusout","onFocusOut"],[0,"calciteInternalTreeItemSelect","onInternalTreeItemSelect"]]]);function HEe(){if(typeof customElements>"u")return;["calcite-tree"].forEach(e=>{switch(e){case"calcite-tree":customElements.get(e)||customElements.define(e,BEe);break}})}HEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cu={actionsEnd:"actions-end",bulletPointIcon:"bullet-point",checkbox:"checkbox",checkboxContainer:"checkbox-container",checkboxLabel:"checkbox-label",checkmarkIcon:"checkmark",chevron:"chevron",childrenContainer:"children-container",iconStart:"icon-start",itemExpanded:"item--expanded",nodeAndActionsContainer:"node-actions-container",nodeContainer:"node-container"},Rk={actionsEnd:"actions-end",children:"children"},ep={blank:"blank",bulletPoint:"bullet-point",checkmark:"check",checkSquareF:"check-square-f",chevronRight:"chevron-right",minusSquareF:"minus-square-f",square:"square"},UEe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;max-inline-size:100%;cursor:pointer;color:var(--calcite-color-text-3)}.node-actions-container{display:flex}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .node-actions-container{min-block-size:1.5rem}:host([scale=s]) .node-actions-container .node-container .checkbox,:host([scale=s]) .node-actions-container .node-container .checkmark,:host([scale=s]) .node-actions-container .node-container .bullet-point{margin-inline:0.25rem}:host([scale=s]) .node-actions-container .node-container .icon-start{margin-inline:0.75rem}:host([scale=s]) .node-actions-container .node-container .chevron{padding:0.25rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .node-actions-container{min-block-size:2rem}:host([scale=m]) .node-actions-container .node-container .checkbox,:host([scale=m]) .node-actions-container .node-container .checkmark,:host([scale=m]) .node-actions-container .node-container .bullet-point{margin-inline:0.5rem}:host([scale=m]) .node-actions-container .node-container .icon-start{margin-inline:0.75rem}:host([scale=m]) .node-actions-container .node-container .chevron{padding:0.5rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .node-actions-container{min-block-size:2.75rem}:host([scale=l]) .node-actions-container .node-container .checkbox,:host([scale=l]) .node-actions-container .node-container .checkmark,:host([scale=l]) .node-actions-container .node-container .bullet-point{margin-inline:0.75rem}:host([scale=l]) .node-actions-container .node-container .icon-start{margin-inline:0.75rem}:host([scale=l]) .node-actions-container .node-container .chevron{padding-inline:var(--calcite-size-md);padding-block:var(--calcite-size-sm-plus)}:host([lines]) .children-container::after{position:absolute;inset-block-start:0px;z-index:var(--calcite-z-index);inline-size:1px;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;block-size:96%;content:"";background-color:var(--calcite-color-border-2)}:host(:not([lines])) .node-container::after{display:none}::slotted(*){min-inline-size:0px;max-inline-size:100%;overflow-wrap:break-word;color:inherit;text-decoration:none !important}::slotted(*):hover{text-decoration:none !important}::slotted(a){inline-size:100%;text-decoration-line:none}:host{outline:2px solid transparent;outline-offset:2px}:host .node-container{outline-color:transparent}:host:focus .node-container,:host:active .node-container{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus:not([disabled])) .node-container{outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus:not([disabled])) .checkbox{outline:2px solid transparent;outline-offset:2px}.actions-end{display:flex;flex-direction:row;align-items:center;align-self:stretch}.checkbox-container{display:flex;align-items:center}.checkbox{line-height:0;color:var(--calcite-color-border-input)}.checkbox-label{pointer-events:none;display:flex;align-items:center}.children-container{position:relative;block-size:0px;transform-origin:top;overflow:hidden;opacity:0;margin-inline-start:1.25rem;transform:scaleY(0);transition:var(--calcite-animation-timing) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-animation-timing) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.item--expanded>.children-container{overflow:visible;opacity:1;transform:none;block-size:auto}.node-container{position:relative;display:flex;min-inline-size:0px;flex-grow:1;align-items:center}.node-container .checkmark,.node-container .bullet-point{opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;color:var(--calcite-color-border-1)}.node-container:hover .checkmark,.node-container:hover .bullet-point,:host([selected]) .node-container:hover .checkmark,:host([selected]) .node-container:hover .bullet-point,:host(:focus:not([disabled])) .node-container .checkmark,:host(:focus:not([disabled])) .node-container .bullet-point{opacity:1}:host([selected]) .node-container,:host([selected]) .node-container:hover{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .node-container .bullet-point,:host([selected]) .node-container .checkmark,:host([selected]) .node-container:hover .bullet-point,:host([selected]) .node-container:hover .checkmark{opacity:1;color:var(--calcite-color-brand)}:host([selection-mode=none]:not([has-children])):host([scale=s]) .node-container{padding-inline-start:0.5rem}:host([selection-mode=none]:not([has-children])):host([scale=m]) .node-container{padding-inline-start:1rem}:host([selection-mode=none]:not([has-children])):host([scale=l]) .node-container{padding-inline-start:1.5rem}:host(:not([has-children])):host([scale=s]) .node-container[data-selection-mode=ancestors] .checkbox{padding-inline-start:1.25rem}:host(:not([has-children])):host([scale=m]) .node-container[data-selection-mode=ancestors] .checkbox{padding-inline-start:1.5rem}:host(:not([has-children])):host([scale=l]) .node-container[data-selection-mode=ancestors] .checkbox{padding-inline-start:1.75rem}:host([has-children]) .node-container[data-selection-mode=ancestors] .checkbox{margin-inline-start:0}:host([has-children]) .node-container .bullet-point,:host([has-children]) .node-container .checkmark{display:none}.chevron{position:relative;align-self:center;color:var(--calcite-color-text-3);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;flex:0 0 auto;transform:rotate(0deg)}.calcite--rtl .chevron{transform:rotate(180deg)}.item--expanded .node-container>.chevron{transform:rotate(90deg)}:host([selected]) .checkmark,:host([selected]) .bullet-point{color:var(--calcite-color-brand)}:host([selected]) .checkbox{color:var(--calcite-color-brand)}:host([has-children][indeterminate]) .checkbox{color:var(--calcite-color-brand)}:host([hidden]){display:none}[hidden]{display:none}`,YEe=UEe,XEe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalTreeItemSelect=$t(this,"calciteInternalTreeItemSelect",6),this.iconClickHandler=e=>{e.stopPropagation(),this.expanded=!this.expanded},this.childrenClickHandler=e=>e.stopPropagation(),this.userChangedValue=!1,this.updateParentIsExpanded=(e,i)=>{wne(e,Rk.children,{all:!0,selector:"calcite-tree-item"}).forEach(n=>n.parentExpanded=i)},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=Is(e)},this.disabled=!1,this.label=void 0,this.expanded=!1,this.iconFlipRtl=void 0,this.iconStart=void 0,this.selected=!1,this.parentExpanded=!1,this.depth=-1,this.hasChildren=null,this.lines=void 0,this.scale=void 0,this.indeterminate=!1,this.selectionMode=void 0,this.hasEndActions=!1,this.updateAfterInitialRender=!1}expandedHandler(e){this.updateParentIsExpanded(this.el,e)}handleSelectedChange(e){this.selectionMode==="ancestors"&&!this.userChangedValue&&(e&&(this.indeterminate=!1),this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:!0,updateItem:!1}))}getSelectionMode(){this.isSelectionMultiLike=this.selectionMode==="multiple"||this.selectionMode==="multichildren"}connectedCallback(){var e;if(this.parentTreeItem=(e=this.el.parentElement)==null?void 0:e.closest("calcite-tree-item"),this.parentTreeItem){const{expanded:i}=this.parentTreeItem;this.updateParentIsExpanded(this.parentTreeItem,i)}oC(this)}disconnectedCallback(){aC(this)}componentWillRender(){var s;this.hasChildren=!!this.el.querySelector("calcite-tree"),this.depth=0;let e=this.el.closest("calcite-tree");if(!e)return;this.selectionMode=e.selectionMode,this.scale=e.scale||"m",this.lines=e.lines;let i;for(;e&&(i=(s=e.parentElement)==null?void 0:s.closest("calcite-tree"),i!==e);)e=i,this.depth=this.depth+1}componentWillLoad(){requestAnimationFrame(()=>this.updateAfterInitialRender=!0)}componentDidLoad(){this.updateAncestorTree()}componentDidRender(){Cf(this)}render(){const e=Gp(this.el)==="rtl",i=this.selectionMode==="single"||this.selectionMode==="children"||this.selectionMode==="single-persist",s=this.selectionMode==="multiple"||this.selectionMode==="multichildren",n=this.selectionMode==="none"&&!this.hasChildren,r=this.hasChildren&&this.indeterminate,o=this.hasChildren?Ae("calcite-icon",{class:{[cu.chevron]:!0,[Bl.rtl]:e},"data-test-id":"icon",icon:ep.chevronRight,onClick:this.iconClickHandler,scale:Xa(this.scale)}):null,l=Ae("slot",{key:"default-slot"}),u=this.selectionMode==="ancestors"?Ae("div",{class:cu.checkboxContainer},Ae("calcite-icon",{class:cu.checkbox,icon:this.selected?ep.checkSquareF:r?ep.minusSquareF:ep.square,scale:Xa(this.scale)}),Ae("label",{class:cu.checkboxLabel},l)):null,f=i?ep.bulletPoint:s?ep.checkmark:n?ep.blank:null,y=f?Ae("calcite-icon",{class:{[cu.bulletPointIcon]:f===ep.bulletPoint,[cu.checkmarkIcon]:f===ep.checkmark,[Bl.rtl]:e},icon:f,scale:Xa(this.scale)}):null,_=!(this.parentExpanded||this.depth===1),x=this.updateAfterInitialRender&&this.expanded,{hasEndActions:S}=this,P=Ae("slot",{key:"actionsEndSlot",name:Rk.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}),A=Ae("calcite-icon",{key:"251fd8b4ef328e3575268a914b823282d5810b3b",class:cu.iconStart,flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Xa(this.scale)});return Ae(hr,{key:"9ca6542ef823f536919ef45e249a51acc560e5cd","aria-checked":this.selectionMode==="multiple"||this.selectionMode==="multichildren"||this.selectionMode==="ancestors"?br(this.selected):void 0,"aria-expanded":this.hasChildren?br(x):void 0,"aria-hidden":br(_),"aria-live":"polite","aria-selected":this.selectionMode==="single"||this.selectionMode==="children"||this.selectionMode==="single-persist"?br(this.selected):void 0,"calcite-hydrated-hidden":_,role:"treeitem",tabIndex:this.disabled?-1:0},Ae(Pf,{key:"b87535cef45f25a3d962f2ee7a2fe23030c09626",disabled:this.disabled},Ae("div",{key:"2a4f1e4a647c80ef1d027b795814a03dd933db37",class:{[cu.itemExpanded]:x}},Ae("div",{key:"716fc1eac97264fe3186a0beee9e173415f93b83",class:cu.nodeAndActionsContainer},Ae("div",{key:"286db32250f9978cab481314b2ea3e790248c7f2",class:{[cu.nodeContainer]:!0,[Bl.rtl]:e},"data-selection-mode":this.selectionMode},o,y,this.iconStart?A:null,u||l),Ae("div",{key:"2e1eeefae879f7197b5292ecda3b1f831f673efb",class:cu.actionsEnd,hidden:!S,ref:k=>this.actionSlotWrapper=k},P)),Ae("div",{key:"1cb705ab7da1422b2a956ea90e29b489909840f3",class:{[cu.childrenContainer]:!0,[Bl.rtl]:e},"data-test-id":"calcite-tree-children",onClick:this.childrenClickHandler,role:this.hasChildren?"group":void 0},Ae("slot",{key:"e3c968c15f50af07cafd3c3a67746455472e6b6f",name:Rk.children})))))}onClick(e){if(this.disabled||this.isActionEndEvent(e))return;const[i]=s2e(this.el,"a");if(i&&e.composedPath()[0].tagName.toLowerCase()!=="a"){const s=i.target===""?"_self":i.target;window.open(i.href,s)}this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:this.selectionMode==="ancestors"||this.isSelectionMultiLike,updateItem:!0}),this.userChangedValue=!0}keyDownHandler(e){if(!(this.isActionEndEvent(e)||e.defaultPrevented))switch(e.key){case" ":this.userChangedValue=!0,this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:this.isSelectionMultiLike,updateItem:!0}),e.preventDefault();break;case"Enter":{const i=Array.from(this.el.children).find(s=>s.matches("a"));this.userChangedValue=!0,i?(i.click(),this.selected=!0):this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:this.isSelectionMultiLike,updateItem:!0}),e.preventDefault()}}}isActionEndEvent(e){return e.composedPath().includes(this.actionSlotWrapper)}updateAncestorTree(){const e=this.parentTreeItem;if(!(this.selectionMode!=="ancestors"||!e)){if(this.selected){const i=this.el.parentElement,s=Array.from(i==null?void 0:i.children),n=s.filter(o=>o.selected);s.length===n.length?(e.selected=!0,e.indeterminate=!1):n.length>0&&(e.indeterminate=!0),Array.from(this.el.querySelectorAll("calcite-tree-item:not([disabled])")).forEach(o=>{o.selected=!0,o.indeterminate=!1})}else if(this.indeterminate){const i=this.parentTreeItem;i.indeterminate=!0}}}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],selected:["handleSelectedChange"],selectionMode:["getSelectionMode"]}}static get style(){return YEe}},[1,"calcite-tree-item",{disabled:[516],label:[1],expanded:[1540],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],selected:[1540],parentExpanded:[4,"parent-expanded"],depth:[1538],hasChildren:[1540,"has-children"],lines:[1540],scale:[1537],indeterminate:[1540],selectionMode:[1537,"selection-mode"],hasEndActions:[32],updateAfterInitialRender:[32]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"]],{expanded:["expandedHandler"],selected:["handleSelectedChange"],selectionMode:["getSelectionMode"]}]);function WEe(){if(typeof customElements>"u")return;["calcite-tree-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-tree-item":customElements.get(e)||customElements.define(e,XEe);break;case"calcite-icon":customElements.get(e)||uo();break}})}WEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ZEe={button:"button"},KEe={plus:"plus"},JEe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}calcite-button{--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}calcite-button:hover{--tw-shadow:var(--calcite-shadow-md);--tw-shadow-colored:var(--calcite-shadow-md);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}calcite-button:active{--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([hidden]){display:none}[hidden]{display:none}",QEe=JEe,eCe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.appearance="solid",this.kind="brand",this.disabled=!1,this.icon=KEe.plus,this.iconFlipRtl=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1}componentWillLoad(){ao(this)}componentDidLoad(){lo(this)}componentDidRender(){Cf(this)}async setFocus(){await co(this),Yp(this.buttonEl)}render(){const{appearance:e,kind:i,disabled:s,loading:n,scale:r,textEnabled:o,icon:l,label:u,text:f,iconFlipRtl:y}=this,_=o?null:u||f||null;return Ae(Pf,{key:"7953bd06defeddfed5530500901609524f7b58fd",disabled:s},Ae("calcite-button",{key:"c2bbe2be5e2ac375abab75024005f1eb5afed51c",appearance:e==="solid"?"solid":"outline-fill",class:ZEe.button,disabled:s,iconFlipRtl:y?"start":null,iconStart:l,kind:i,label:u,loading:n,ref:x=>{this.buttonEl=x},round:!0,scale:r,title:_,type:"button",width:"auto"},this.textEnabled?this.text:null))}get el(){return this}static get style(){return QEe}},[1,"calcite-fab",{appearance:[513],kind:[513],disabled:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],setFocus:[64]}]);function tCe(){if(typeof customElements>"u")return;["calcite-fab","calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-fab":customElements.get(e)||customElements.define(e,eCe);break;case"calcite-button":customElements.get(e)||Yne();break;case"calcite-icon":customElements.get(e)||uo();break;case"calcite-loader":customElements.get(e)||Uc();break}})}tCe();var Il=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function Ml(t){return t.default!==void 0}async function iCe(){if(Il)return await window.$arcgis.import("esri/core/Accessor");const t=await nt(()=>Promise.resolve().then(()=>ETe),void 0,import.meta.url);return Ml(t)?t.default:t}async function sCe(){if(Il)return await window.$arcgis.import("esri/layers/GraphicsLayer");const t=await nt(()=>Promise.resolve().then(()=>hBe),void 0,import.meta.url);return Ml(t)?t.default:t}async function nCe(t){const e=await sCe();return new e(t)}async function rCe(){if(Il)return await window.$arcgis.import("esri/views/MapView");const t=await nt(()=>import("./MapView-sCrrrGB_.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url);return Ml(t)?t.default:t}async function oCe(t){const e=await rCe();return new e(t)}async function aCe(){if(Il)return await window.$arcgis.import("esri/WebMap");const t=await nt(()=>import("./WebMap-DdHJap-N.js").then(e=>e.W),__vite__mapDeps([31,1,2,3,4,5,32,33,14,15,34]),import.meta.url);return Ml(t)?t.default:t}async function lCe(t){const e=await aCe();return new e(t)}async function cCe(){if(Il)return await window.$arcgis.import("esri/widgets/AreaMeasurement2D");const t=await nt(()=>import("./AreaMeasurement2D-BqoPy8d1.js"),__vite__mapDeps([35,36,37,38,39,40,41,42,43,44]),import.meta.url);return Ml(t)?t.default:t}async function uCe(t){const e=await cCe();return new e(t)}async function hCe(){if(Il)return await window.$arcgis.import("esri/widgets/BasemapGallery");const t=await nt(()=>import("./BasemapGallery-CJ4MYLtz.js"),__vite__mapDeps([45,5,2,6,7,46,29]),import.meta.url);return Ml(t)?t.default:t}async function dCe(t){const e=await hCe();return new e(t)}async function fCe(){if(Il)return await window.$arcgis.import("esri/widgets/DistanceMeasurement2D");const t=await nt(()=>import("./DistanceMeasurement2D-Ci2sGm2T.js"),__vite__mapDeps([47,36,37,38,39,40,41,42,43,44]),import.meta.url);return Ml(t)?t.default:t}async function pCe(t){const e=await fCe();return new e(t)}async function mCe(){if(Il)return await window.$arcgis.import("esri/widgets/Editor");const t=await nt(()=>import("./Editor-D0gQaubs.js"),__vite__mapDeps([48,49,38,39,50,51,52,2,53,46,3,4,54,55,56,8,57,58,59,16,60,61,62,63,64,65,66]),import.meta.url);return Ml(t)?t.default:t}async function gCe(t){const e=await mCe();return new e(t)}async function yCe(){if(Il)return await window.$arcgis.import("esri/widgets/Expand");const t=await nt(()=>import("./Expand-BuDq5lWR.js"),[],import.meta.url);return Ml(t)?t.default:t}async function vCe(t){const e=await yCe();return new e(t)}async function _Ce(){if(Il)return await window.$arcgis.import("esri/widgets/LayerList");const t=await nt(()=>import("./LayerList-DR5fxsOk.js").then(e=>e.L),__vite__mapDeps([67,8,4,68]),import.meta.url);return Ml(t)?t.default:t}async function bCe(t){const e=await _Ce();return new e(t)}async function xCe(){if(Il)return await window.$arcgis.import("esri/widgets/Legend");const t=await nt(()=>import("./Legend-DfLzMqJI.js"),__vite__mapDeps([69,70,71,72,73,74,75,76,77,59,57,58,16,60,61,78,52,2,46,29]),import.meta.url);return Ml(t)?t.default:t}async function wCe(t){const e=await xCe();return new e(t)}async function SCe(){if(Il)return await window.$arcgis.import("esri/widgets/Search");const t=await nt(()=>import("./Search-BUOCk7Wj.js"),__vite__mapDeps([79,80,73,14,81,33,15,30,29,53]),import.meta.url);return Ml(t)?t.default:t}async function ECe(t){const e=await SCe();return new e(t)}async function CCe(){if(Il)return await window.$arcgis.import("esri/widgets/Sketch");const t=await nt(()=>Promise.resolve().then(()=>hKe),void 0,import.meta.url);return Ml(t)?t.default:t}async function PCe(t){const e=await CCe();return new e(t)}async function TCe(){if(Il)return await window.$arcgis.import("esri/core/accessorSupport/decorators");const t=await nt(()=>import("./decorators-BKnUqByw.js"),[],import.meta.url);return Ml(t)?t.default:t}async function Vre(){if(Il)return await window.$arcgis.import("esri/core/reactiveUtils");const t=await nt(()=>Promise.resolve().then(()=>MAe),void 0,import.meta.url);return Ml(t)?t.default:t}var x$=class{resolve(t){}reject(t){}constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};function nr(t,e,...i){try{return t==null?void 0:t.call(e,...i)}catch(s){console.error(s,t)}}async function g9(t,e,...i){try{const s=t==null?void 0:t.call(e,...i);return s instanceof Promise?await s:s}catch(s){console.error(s,t)}}var ICe=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Set(ICe);var MCe=t=>t.replace(ACe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),ACe=/[A-Z]+(?![a-z])|[A-Z]/gu;function DCe(t,e){const i=e/kCe;let s=0;const n=setInterval(()=>{s+=i,s>=e&&(clearInterval(n),t())},i);return n}var kCe=4;function Gre(t){return t!==void 0}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */function NCe(t,e){var i;if(e){const s=t.constructor.elementProperties;t.manager.internals.members=Object.fromEntries(Array.from(s,([n,r])=>r.noAccessor?void 0:[n,[(r.readOnly?2048:0)|(r.state?32:16)]]).filter(Gre))}else{const s=t.constructor,n=((i=s.__registerControllers)==null?void 0:i.call(s,t))??void 0;if(s.__registerControllers=void 0,typeof n!="object")throw new Error("Failed to retrieve component meta");t.manager.internals.members=Object.fromEntries(Object.entries(n).filter(([r,[o]])=>(o&63)!==0))}}function $Ce(t,e=8){return t==null||typeof t=="object"||typeof t=="function"?t:(e&4)!==0?t==="false"?!1:t===""||!!t:(e&2)!==0?Number.parseFloat(t):(e&1)!==0?String(t):t}var jre=(t,e)=>{var i,s;return(s=(i=t.manager.internals.members)==null?void 0:i[e])==null?void 0:s[0]},hq=Symbol.for("controller"),OCe=t=>typeof t=="object"&&t!==null&&(hq in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),l3;function Tb(t){l3!==t&&(l3=t,queueMicrotask(()=>{l3===t&&(l3=void 0)}))}function fM(t){return l3}var $1=[];function dq(t){if(t===void 0){$1=[];return}const e=$1.indexOf(t);$1=e===-1?[...$1,t]:$1.slice(0,e+1),queueMicrotask(()=>{$1=[]})}function RCe(){return $1}var Ib;function LCe(t){Ib!==t&&(Ib=t,queueMicrotask(()=>{Ib===t&&(Ib=void 0)}))}function FCe(){const t=Ib;return Ib=void 0,t}var zCe=async(t,e)=>{const i=fq(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const s=i.watchExports(n=>e(n,s))}return i.exports},qCe=async t=>{const e=fq(t);return await e.ready,e},fq=t=>{const e=FCe();if(e!==void 0)return e;const s=fM().manager.internals.resolveExports(t);if(s!==void 0)return s;if(OCe(t))return t},jp={setter:!1,getter:!1,readOnly:!1},y9=new WeakMap,Bre;Bre=hq;var pq=class{constructor(t){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new x$,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[Bre]=!0,this.ready=this._ready.promise,this._exports=fX(this),this._exportWatchers=new Set;const e=t??fM();this.component=e,this.component.addController(this),dq(this),this.component.manager===void 0||queueMicrotask(()=>this.catchUpLifecycle())}catchUpLifecycle(){const{manager:t}=this.component;t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),t._loadCalled&&this.triggerLoad().then(()=>{t.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(t){const e=this._exports;e!==t&&(this._exports=t,this._exportWatchers.forEach(nr),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,e)),this._ready.resolve(t)}setProvisionalExports(t){this._exports=fX(t),this._exportWatchers.forEach(nr)}watchExports(t){const e=()=>t(this._exports);return this._exportWatchers.add(e),()=>void this._exportWatchers.delete(e)}get use(){return Tb(this.component),zCe}get useRef(){return Tb(this.component),qCe}get useRefSync(){return Tb(this.component),fq}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){this._callbacks.hostConnected.push(t)}onDisconnected(t){this._callbacks.hostDisconnected.push(t)}onLoad(t){this._callbacks.hostLoad.push(t)}onLoaded(t){this._callbacks.hostLoaded.push(t)}onUpdate(t){this._callbacks.hostUpdate.push(t)}onUpdated(t){this._callbacks.hostUpdated.push(t)}onDestroy(t){this._callbacks.hostDestroy.push(t)}onLifecycle(t){this._callbacks.hostLifecycle.push(t),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(t)}triggerConnected(){const t=this;t.hostConnected&&nr(t.hostConnected,t),this._callbacks.hostConnected.forEach(nr),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&nr(t.hostDisconnected,t),this._callbacks.hostDisconnected.forEach(nr),this._lifecycleCleanups.forEach(nr),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const t=this;t.hostLoad&&await g9(t.hostLoad,t),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(g9)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const t=this;t.hostLoaded&&nr(t.hostLoaded,t),this._callbacks.hostLoaded.forEach(nr),this.loadedCalled=!0}triggerUpdate(t){const e=this;e.hostUpdate&&nr(e.hostUpdate,e,t),this._callbacks.hostUpdate.forEach(dX,t)}triggerUpdated(t){const e=this;e.hostUpdated&&nr(e.hostUpdated,e,t),this._callbacks.hostUpdated.forEach(dX,t)}triggerDestroy(){const t=this;t.hostDestroy&&nr(t.hostDestroy,t),this._callbacks.hostDestroy.forEach(nr)}triggerLifecycle(){const t=this;t.hostLifecycle&&this._callLifecycle(()=>t.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(t){Tb(this.component);const e=nr(t);(Array.isArray(e)?e:[e]).forEach(s=>{typeof s=="function"?this._lifecycleCleanups.push(s):typeof s=="object"&&typeof s.remove=="function"&&this._lifecycleCleanups.push(s.remove)})}};function dX(t){nr(t,void 0,this)}var Hre=pq;function fX(t){if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e=new Proxy(t,{get(i,s,n){if(!(VCe.has(s)&&s in i&&i[s]===e)&&(s in i||s in Promise.prototype||typeof s=="symbol"))return typeof i=="function"?i[s]:Reflect.get(i,s,n)},set:(i,s,n,r)=>Reflect.set(i,s,n,r)});return e}var VCe=new Set(["exports","_exports"]);function GCe(t,e,i){const s=Object.keys(t),n=s.length;Lp===void 0&&queueMicrotask(Ure),Lp??(Lp=new Map);let r=Lp.get(t);return r===void 0&&(r={callbacks:[],keyCount:n},Lp.set(t,r)),r.keyCount!==n&&(r.callbacks.forEach(o=>o(s)),r.callbacks=[],r.keyCount=n),r.callbacks.push(o=>{const l=f=>nr(e,null,f),u=o[n];u===void 0?l(void 0):t[u]===i?l(u):l(void 0)}),i}var Lp=void 0;function Ure(){Array.from((Lp==null?void 0:Lp.entries())??[]).forEach(([t,{callbacks:e}])=>{const i=Object.keys(t);e.forEach(s=>s(i))}),Lp=void 0}function Gb(t,e,i){var s;const n=e,r=t.manager.internals;(s=r.allWatchers)[n]??(s[n]=[]);const o=r.allWatchers[n],l=i,u=(f,y,_)=>nr(l,null,f,y,_);return o.push(u),()=>{const f=o.indexOf(u);f!==-1&&o.splice(f,1)}}var jCe=class{constructor(t){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const e=this.component.manager.internals;Object.entries(e.members).forEach(([i,[s]])=>{var n;s&2048&&((n=e.setters)[i]??(n[i]=[]),e.setters[i].push(e.readonlySetter))})},this.trackedValue=w$,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this.reactiveUtilsIntegrations=new Set,this._exports=new WeakMap,this.readonlySetter=(e,i,s)=>{if(jp.readOnly)return e;throw new Error(`Cannot assign to read-only property "${s}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(e)}"`)},this.component=t}firePropTrackers(t,e){const i=this.keyTrackers;this.trackedValue=w$,this.keyTrackers=[],i.forEach(s=>s(t,e))}getSetProxy(t){const e=this.component,i=e.constructor.prototype;if(this._getSetProxy(i,t,"class"),e.manager.isLit)return;const s=e.el.constructor.prototype;i!==s&&this._getSetProxy(s,t,"html")}_getSetProxy(t,e,i){const s=this.component,n=jre(s,e);let r;do r=Object.getOwnPropertyDescriptor(t,e);while(!r&&(t=Object.getPrototypeOf(t)));if(!r)return;const o=r.get,l=r.set,u=jP in o,f=jP in l;if(u&&f)return;const y=!u,_=!f,x=y?function(){let A=o.call(this);const k=y9.get(this);if(jp.getter||k===void 0)return A;const $=k.manager.internals;A=$.accessorGetter[e](A,e);const F=$.getters[e]??Lk;for(let G=0;G<F.length;G++)A=F[G](A,e);return A}:o,S=_?function(A){var V;const k=o.call(this),$=y9.get(this);if($===void 0){l.call(this,A);return}let F=$.manager.isLit?A??void 0:$Ce(A,n);const G=$.manager.internals;if(F===k)l.call(this,F);else{const B=jp.setter?Lk:G.setters[e]??Lk;for(let W=0;W<B.length&&(F=B[W](F,k,e),F!==k);W++);F=G.accessorSetter[e](F,k,e),l.call(this,F),F!==k&&((V=G.enabledWatchers[e])==null||V.forEach(W=>W(F,k,e)))}G.keyTrackers.length>0&&(G==null||G.firePropTrackers(e,A))}:l;y&&(x[jP]=!0),_&&(S[jP]=!0),Object.defineProperty(t,e,{...r,get:x,set:S})}markExports(t,e){(typeof e=="object"&&e!==null||typeof e=="function")&&this._exports.set(e,t)}resolveExports(t){if(typeof t=="object"&&t!==null||typeof t=="function")return this._exports.get(t)}},Lk=[],jP=Symbol(),w$=Symbol(),Tf=(t,e)=>new BCe(t,e),BCe=class extends Hre{constructor(t,e){const i="addController"in t,s=new Set;function n(u){var f;s.add(u),!(hq in u)&&t.renderRoot&&t.el.isConnected&&((f=u.hostConnected)==null||f.call(u))}function r(u){var f;s.delete(u),(f=u.controllerRemoved)==null||f.call(u)}const o=t;if(o.addController=n,o.removeController=r,!i){const u=e??t.constructor.__forceUpdate;o.requestUpdate=()=>u(t)}super(t),this.internals=new jCe(this.component),this.destroyed=!1,this._updatePromise=new x$,this._originalLifecycles={},this.isLit=i,this.component.manager=this,NCe(t,i),this._controllers=s,this.exports=void 0,this.hasDestroy=Fk in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const l=this.internals;Object.keys(l.members).forEach(u=>{l.accessorGetter[u]=vS,l.accessorSetter[u]=vS,l.getSetProxy(u)}),i?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(t,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(l.enableReadonly),dq(void 0),Tb(t),y9.set(t.el,t),y9.set(t,t)}_bindLifecycleMethods(){const t=this.component,e=this.isLit,i=t.el===t;this._originalLifecycles={_connectedCallback:e||i?void 0:t.connectedCallback,_disconnectedCallback:e||i?void 0:t.disconnectedCallback,_load:e?t.load:t.componentWillLoad,_loaded:e?t.loaded:t.componentDidLoad,_willUpdate:e?void 0:t.componentWillUpdate,_updated:e?void 0:t.componentDidUpdate,_destroy:t.destroy};const s=this._connectedCallback.bind(this),n=this._disconnectedCallback.bind(this),r=this._update.bind(this),o=this._updated.bind(this);e?t.constructor.prototype.addController.call(t,{hostConnected:s,hostDisconnected:n,hostUpdate:r,hostUpdated:o}):(t.connectedCallback=s,t.disconnectedCallback=n,t.componentWillLoad=this._load.bind(this),t.componentDidLoad=this._loaded.bind(this),t.componentWillUpdate=r,t.componentDidUpdate=o),this.hasDestroy&&(t.destroy=this.destroy.bind(this))}_connectedCallback(){var e,i;if(this.destroyed){const s=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${s} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${Fk} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const t=this.internals;t.enabledWatchers=t.allWatchers,Ure(),(e=t.enableReadonly)==null||e.call(t),this._controllers.forEach(UCe),(i=this._originalLifecycles._connectedCallback)==null||i.call(this.component)}_disconnectedCallback(){var t;this.destroyed||(this._controllers.forEach(YCe),(t=this._originalLifecycles._disconnectedCallback)==null||t.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;const t=this.internals.reactiveUtilsIntegrations;if(t.size>0)for(const i of t)"triggerLoad"in i?await i.triggerLoad():await g9(i.hostLoad,i);await Promise.allSettled(Array.from(this._controllers,XCe,t)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&Gb(this.component,Fk,()=>this._setAutoDestroyTimeout())}_loaded(){var t;this._controllers.forEach(WCe),(t=this._originalLifecycles._loaded)==null||t.call(this.component)}_update(){var e;const t=this.component;this._controllers.forEach(ZCe,t.$changes),(e=this._originalLifecycles._willUpdate)==null||e.call(this.component)}_updated(){var e;const t=this.component;if(this._controllers.forEach(KCe,t.$changes),(e=this._originalLifecycles._updated)==null||e.call(this.component),this.isLit)t.$changes=new Map;else{const i=this._updatePromise;this._updatePromise=new x$,i.resolve(!0)}}async destroy(){var t;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(JCe),this._controllers.clear(),await((t=this._originalLifecycles._destroy)==null?void 0:t.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const t=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=DCe(t,HCe)}}},Fk="autoDestroyDisabled",HCe=1e3,vS=t=>t;function UCe(t){"triggerConnected"in t?t.triggerConnected():nr(t.hostConnected,t)}function YCe(t){"triggerDisconnected"in t?t.triggerDisconnected():nr(t.hostDisconnected,t)}async function XCe(t){this.has(t)||("triggerLoad"in t?await t.triggerLoad():await g9(t.hostLoad,t))}function WCe(t){"triggerLoaded"in t?t.triggerLoaded():nr(t.hostLoaded,t)}function ZCe(t){"triggerUpdate"in t?t.triggerUpdate(this):nr(t.hostUpdate,t,this)}function KCe(t){"triggerUpdated"in t?t.triggerUpdated(this):nr(t.hostUpdated,t,this)}function JCe(t){"triggerDestroy"in t?t.triggerDestroy():nr(t.hostDestroy,t)}function pM(t,e,i){const s=t.manager.internals;return s.trackedValue!==w$&&s.trackedValue!==i&&s.firePropTrackers(void 0,void 0),s.keyTrackers.length===0&&queueMicrotask(()=>s.firePropTrackers(void 0,void 0)),s.trackedValue=i,s.keyTrackers.push((n,r)=>nr(e,void 0,i===r?n:void 0)),i}function Yre(t,e,i){const s=Array.isArray(t)?t:[t];let n=s.length+1;const r=l=>{n-=1,l!==void 0&&(n=Math.min(n,0)),n===0&&e(l)};s.forEach(l=>GCe(l,u=>r(u===void 0?void 0:{key:u,host:l,isReactive:!1}),i));const o=s.find(l=>"manager"in l&&typeof l.manager=="object"&&l.manager.component===l);return o&&pM(o,l=>r(l===void 0?void 0:{key:l,host:o,isReactive:jre(o,l)!==void 0}),i),i}function qa(t,e){const i=fM();return pM(i,s=>{const n=s,r=i.manager,o=i,l=o[n];if(l!=null&&l!==t&&typeof e.set=="function"){const u=e.set(l,t,n);if(u!==l)if(r.isLit)o[n]=u;else{let f=!0;r.onConnected(()=>{f&&(f=!0,Xre(()=>{o[n]=u}))})}}QCe(i,n,e)},t)}function Xre(t){jp.setter=!0;try{return t()}finally{jp.setter=!1}}function Wre(t){jp.getter=!0;try{return t()}finally{jp.getter=!1}}function QCe(t,e,i){var s,n;const r=i,o=t.manager.internals,l=typeof r.get=="function"?r.get:void 0;l&&((s=o.getters)[e]??(s[e]=[]),o.getters[e].unshift(l));const u=r.set==="ignore"?e5e:r.set;u&&((n=o.setters)[e]??(n[e]=[]),o.setters[e].unshift(u))}var e5e=(t,e)=>e;function zk(t){const e=fM();return qa(t,{set:e.manager.internals.readonlySetter})}function t5e(t){jp.readOnly=!0;try{return t()}finally{jp.readOnly=!1}}var mq=t=>(...e)=>{const i=RCe(),s=new t(...e),n=s.exports;dq(i.at(-1));const r=s.component.manager.internals;r.markExports(s,n),s.watchExports(l=>r.markExports(s,l)),LCe(s);const o=[s.component,...i].reverse();return Yre(o,l=>l===void 0?void 0:i5e(s,l,n),n)};function i5e(t,{host:e,key:i,isReactive:s},n){const r=e,o=r[i]!==t.exports,l=r[i]!==n,u=n!==t.exports;if(o&&!l&&u&&(r[i]=t.exports),e===t.component){if(s){const y=t.component.manager.internals;l&&y.markExports(t,r[i]),Gb(t.component,i,_=>{_!==t.exports&&y.markExports(t,_)})}t.assignedProperty=s?void 0:i}t.watchExports(()=>{var x;if(r[i]===t.exports)return;const y=t.component.manager;((x=y.internals.setters[i])==null?void 0:x.includes(y.internals.readonlySetter))?t5e(()=>{r[i]=t.exports}):r[i]=t.exports})}var qk;async function s5e(){return qk??(qk=Vre()),await qk}var n5e=Promise.all([iCe(),TCe()]),pX=class extends pq{async hostLoad(){const[t,{subclass:e,property:i}]=await n5e;class s extends t{}const n=(_,x)=>y[x];function r(_,x,S){return y!==void 0&&(y[S]=_),_}const o=this.component,l=o.manager.internals,u=[];if(Wre(()=>Object.keys(l.members).forEach(_=>{l.accessorSetter[_]===vS&&(u.push(_),l.accessorGetter[_]=n,l.accessorSetter[_]=r,i({value:o[_]})(s.prototype,_))})),this._enabledMembers=u,u.length===0)return;const f=e(o.el.tagName)(s),y=new f;this._instance=y}controllerRemoved(){var e,i;super.controllerRemoved();const t=this.component.manager.internals;(e=this._instance)==null||e.destroy(),(i=this._enabledMembers)==null||i.forEach(s=>{t.accessorGetter[s]=vS,t.accessorSetter[s]=vS})}},Zre=(t,e)=>(i,s)=>r5e(i,t,s),Kre=class extends Hre{constructor(t,e,i){super(t),this._loadAccessor=e,this._options=i,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(Qd.makeGetterProxy(t,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches));const s=t.manager.internals.reactiveUtilsIntegrations;s.add(this);const n=Array.from(s).find(r=>r instanceof pX);n&&s.delete(n),s.add(n??new pX(this.component)),pM(t,r=>{r&&(this._instancePropName=r)},this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){var l,u;this.reactiveUtils=await s5e();const t=this.component,e=this._gatherParameters(),i=((u=(l=this._options)==null?void 0:l.editConstructorProperties)==null?void 0:u.call(t,e))??e,s=i instanceof Promise?await i:i,n=t,r=typeof this._instancePropName=="string"?n[this._instancePropName]:void 0;r!=null&&r!==this.exports?(this._instance=r,r.set(s)):this._instance=await this._createInstance(s),!t.manager.destroyed&&(Qd.watchComponentUpdates(this,this._instance,this._watchedProperties),Qd.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([i,s])=>[s,this.component[i]]).filter(([,i])=>i!==void 0))}async _createInstance(t){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(t):await this._loadAccessor(t)}_isAccessorConstructor(t){return"prototype"in t&&"declaredClass"in t.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},r5e=mq(Kre),Qd={makeGetterProxy:(t,e,i,s)=>new Proxy({},{has:(n,r)=>typeof r=="string"||r in n,get:(n,r)=>{const o=Reflect.get(n,r);if(typeof r=="symbol"||r in Promise.prototype)return o;const l=r in n,u=(i==null?void 0:i.value)??!0;return l||!u?o:Yre(t,f=>{f!==void 0&&e.set(f.key,r)},o)}}),watchComponentUpdates(t,e,i){function s(l,u){const f=i.get(u),y=e[f];return typeof y=="boolean"&&f!==u&&u.toLowerCase().includes("disable")?!y:y}const n=(l,u,f)=>{const y=i.get(f),_=e[y],x=typeof _=="boolean"&&y!==f&&f.toLowerCase().includes("disable");if((x?!_:r.manager.isLit?_??void 0:_)===l)return l;e[y]=x?!l:l;const P=e[y];return x?!P:P},r=t.component,o=r.manager.internals;i.forEach((l,u)=>{o.accessorGetter[u]=s,o.accessorSetter[u]=n})},watchAccessorUpdates(t,e,i){const{component:s}=t,n=s,r=e,o=o5e(e);Wre(()=>i.forEach((l,u)=>{if(o.has(l))return;const f=n[u];let y=r[l];s.manager.isLit&&(y??(y=void 0));const x=typeof f=="boolean"&&l!==u&&u.toLowerCase().includes("disable")?!f:f;x!=null&&y!==x&&(r[l]=x)})),t.onLifecycle(()=>{if(!e.destroyed)return Array.from(i,([l,u])=>t.reactiveUtils.watch(()=>r[u],()=>{const f=r[u],_=typeof f=="boolean"&&u!==l&&l.toLowerCase().includes("disable")?!f:f;Xre(()=>{n[l]=_})},{initial:!0}))})},reEmitAccessorEvents(t,e,i,s){if(!("on"in e&&typeof e.on=="function"))return;const r=Object.entries(t.component).map(([u,f])=>{const y=f;if(!u.startsWith(s)||u===s||typeof y!="object"||y===null||!("emit"in y)||typeof y.emit!="function")return;const _=y.emit,x=u.slice(s.length);return[MCe(x).toLowerCase(),_]}).filter(Gre);if(r.length===0)return;const o=e,l=()=>o;t.onLifecycle(()=>{if(!e.destroyed)return r.map(([u,f])=>i.on(l,u,f))})},async reCreate(t,e){const i=e.manager.useRefSync(t);i!==void 0&&await i.reCreate()}};function o5e(t){var s;const i=Object.entries(((s=t.__accessor__)==null?void 0:s.metadata)??{});return new Set(i.filter(([n,r])=>(r==null?void 0:r.readOnly)===!0).map(([n])=>n))}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */var Jre=t=>l5e(void 0,t),a5e=class extends pq{constructor(t,e){super(t);const i=this.exports;try{Tb(this.component);const s=e(this.component,this),n=this.exports!==i;if(s instanceof Promise){n||this.setProvisionalExports(s);const r=s.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await r)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this._ready.reject(s),console.error(s)}}catchUpLifecycle(){}},l5e=mq(a5e),c5e=Jre,Lg=t=>u5e,mX="arcgisPropertyChange",u5e=(...t)=>Jre((e,i)=>{let n=e[mX];return e.manager.isLit&&(n=e.constructor.$createEvent(mX,void 0,e)),i.onLoad(()=>i.onLifecycle(()=>t.map(r=>Gb(e,r,()=>n.emit({name:r}))))),n});/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */function c3(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=h5e(t);if(!e){const i=toe(t.referenceElement);if(!i){eoe(t);return}return yX(i,t,!0),i}return d5e(e,t.el.parent)||(t.el.parent=e,e.tagName.toLowerCase()==="arcgis-expand"?f5e(e,t):e.tagName.toLowerCase()==="arcgis-placement"?p5e(e,t):yX(e,t,!1)),e}function h5e({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(gX.has(e.tagName.toLowerCase()))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&gX.has(e.ownedBy.tagName.toLowerCase()))return e.ownedBy}}const gX=new Set(["arcgis-map","arcgis-scene","arcgis-expand","arcgis-placement"]);function d5e(t,e){if(t!==e)return!1;const i=t.tagName.toLowerCase();return i==="arcgis-expand"||i==="arcgis-placement"}function mM(t,e,i="arcgisReady"){var n;const s=t;typeof((n=s.view)==null?void 0:n.ready)=="boolean"?e(s.view):t.addEventListener(i,r=>r.target===t?mM(t,e,i):void 0,{once:!0})}const f5e=(t,e)=>mM(t,i=>{var s,n;e.el.childElem&&typeof t.content=="object"&&((s=t.content)==null||s.append(e.el.childElem)),t.expandIcon=e.icon||((n=e.widget)==null?void 0:n.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),p5e=(t,e)=>mM(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),yX=(t,e,i)=>mM(t,s=>{i?eoe(e):e.el.childElem&&m5e(t,e),e.el.view=s},"arcgisViewReadyChange");function m5e(t,e){var o;const i=e.el.childElem??e.el,s=[...t.children],n={};for(const l of s){const u=l.getAttribute("position")??"manual";n[u]??(n[u]=[]),n[u].push({child:l,position:u,index:s.indexOf(l)})}const r=(o=n[e.position??"manual"])==null?void 0:o.findIndex(({child:l})=>l===e.el);t.view.ui.remove(i),t.view.ui.add(i,{position:e.position,index:r})}function g5e(t){let e=!1,i=t.el.view;const s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.el),"view")??{get:()=>i,set:n=>i=n};Object.defineProperty(t.el,"view",{get:s.get.bind(t.el),set:n=>{s.set.call(t.el,n),n&&!e&&(e=!0,t.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(t.el.view=i)}function y5e(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function vX(t,e){return Qre(e==null?void 0:e.center,t)}function Qre(t,e){if(typeof e=="string")return Qre(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],s=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||s!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}async function v5e(t,e){e!=null&&(typeof e=="string"?t.el.view=await _5e(e):t.widget&&(t.el.view=e.view))}async function _5e(t){const e=toe(t);return await new Promise(i=>{var s;typeof((s=e==null?void 0:e.view)==null?void 0:s.ready)=="boolean"?i(e.view):e&&e.addEventListener("arcgisViewReadyChange",()=>i(e.view),{once:!0})})}function eoe(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function toe(t){return typeof t!="string"?t??void 0:(t.includes("#")||t.includes(".")||t.includes("[")?void 0:document.querySelector(`#${t}`))??document.querySelector(t)??void 0}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const b5e=".arcgis-map{padding:0;margin:0;height:100%;width:100%}",x5e=b5e,w5e=Zre(lCe),S5e=Zre(oCe),_X=[0,"arcgis-map",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],view:[1040],map:[1040],allLayerViews:[1040],background:[1040],basemapView:[1040],basemap:[1025],center:[1025],constraints:[1040],extent:[1040],fatalError:[1040],floors:[1040],gamepad:[1040],graphics:[1040],ground:[1025],highlightOptions:[1040],interacting:[1028],ipsInfo:[1040],itemId:[1537,"item-id"],layerViews:[1040],magnifier:[1040],navigating:[1028],navigation:[1040],padding:[1040],popup:[1040],popupDisabled:[1028,"popup-disabled"],ready:[1028],resizeAlign:[1025,"resize-align"],resolution:[1026],rotation:[1026],scale:[1026],spatialReference:[1040],stationary:[1028],suspended:[1540],theme:[1040],timeExtent:[1040],timeZone:[1025,"time-zone"],toMap:[1040],toScreen:[1040],updating:[1540],viewpoint:[1040],zoom:[1026],addLayer:[64],addLayers:[64],closePopup:[64],destroy:[64],goTo:[64],hitTest:[64],openPopup:[64],takeScreenshot:[64],tryFatalErrorRecovery:[64],whenLayerView:[64]}],E5e=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>_X[2]??{},this.arcgisViewReadyChange=$t(this,"arcgisViewReadyChange",7),this.arcgisViewChange=$t(this,"arcgisViewChange",7),this.arcgisViewClick=$t(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=$t(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=$t(this,"arcgisViewDrag",7),this.arcgisViewHold=$t(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=$t(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=$t(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=$t(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=$t(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=$t(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=$t(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=$t(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=$t(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=$t(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=$t(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=$t(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=$t(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=$t(this,"arcgisViewPointerUp",7),this.manager=Tf(this,Io),this.reactiveUtils=c5e(Vre),this._map=w5e(this,{editConstructorProperties:this._editMapProperties}),this._setChildElement=e=>{this.el.childElem=e},this.autoDestroyDisabled=!1,this.view=zk(S5e(this,{editConstructorProperties:this._editViewProperties})),this.map=this.view.map,this.allLayerViews=this.view.allLayerViews,this.background=this.view.background,this.basemapView=this.view.basemapView,this.basemap=this._map.basemap,this.center=qa(void 0,{get:e=>this.view.center??e,set:e=>{const i=vX(e,this.ready?this.view:void 0);return this.ready?(this.view.center=i,this.view.center):i}}),this.constraints=this.view.constraints,this.extent=qa(void 0,{get:e=>this.view.extent??e,set:(e,i)=>this.view.ready?(e&&!(i!=null&&i.equals(e))&&(this.view.extent=e),this.view.extent):e}),this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.gamepad=qa(void 0,{get:()=>this.ready?this.view.input.gamepad:void 0,set:"ignore"}),this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlightOptions=this.view.highlightOptions,this.interacting=qa(!1,{get:()=>this.view.interacting,set:"ignore"}),this.ipsInfo=this._map.ipsInfo,this.itemId=qa(void 0,{get:e=>{var i;return((i=this._map.portalItem)==null?void 0:i.id)??e},set:e=>(this.ready&&Qd.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error),e)}),this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.navigating=qa(!1,{get:()=>this.view.navigating,set:"ignore"}),this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.scale=qa(void 0,{get:e=>this.view.scale??e,set:e=>(this.ready&&(this.view.scale=e),e)}),this.spatialReference=qa(this.view.spatialReference,{set:(e,i)=>i!=null&&i.equals(e)?i:e}),this.stationary=qa(!0,{get:()=>this.view.stationary,set:"ignore"}),this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.toMap=zk((...e)=>this.view.toMap(...e)),this.toScreen=zk((...e)=>this.view.toScreen(...e)),this.updating=this.view.updating,this.viewpoint=qa(void 0,{get:()=>this.view.viewpoint,set:(e,i)=>y5e(i,e)?e:i}),this.zoom=qa(void 0,{get:e=>this.view.zoom??e,set:e=>(this.ready&&(this.view.zoom=e),e)})}async addLayer(e,i){var s;(s=this.map)==null||s.add(e,i)}async addLayers(e,i){var s;(s=this.map)==null||s.addMany(e,i)}async closePopup(){var e;(e=this.view)==null||e.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){var s;return await((s=this.view)==null?void 0:s.goTo(e,i))}async hitTest(e,i){var s;return await((s=this.view)==null?void 0:s.hitTest(e,i))}async openPopup(e){var i;await((i=this.view)==null?void 0:i.openPopup(e))}async takeScreenshot(e){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(e))}async tryFatalErrorRecovery(){var e;(e=this.view)==null||e.tryFatalErrorRecovery()}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}componentDidLoad(){var i;(i=this.view).container??(i.container=this.el.childElem);const{watch:e}=this.reactiveUtils;this.manager.onLifecycle(()=>[e(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),e(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})]),Qd.reEmitAccessorEvents(this.manager,this.view,this.reactiveUtils,"arcgisView")}render(){return Ae("div",{key:"77569d288f8260b1aeddb513498de4b38a9dd9ae",class:"arcgis-map",ref:this._setChildElement})}_editMapProperties(e){this.map&&(this._map=this.map),this.itemId?e.portalItem={id:this.itemId}:this.basemap?this.basemap==="none"&&(e.basemap=void 0,this.basemap=null):e.basemap="topo-vector";const{basemap:i,...s}=e;i||(e=s);const{ground:n,...r}=e;return n||(e=r),e}_editViewProperties(e){this.view.ui||(e.ui={components:["attribution"]}),e.map??(e.map=this._map);const i=vX(this.center,void 0);return i&&(e.center=i),this.viewpoint&&(e.viewpoint=this.viewpoint),this.scale!==void 0&&(e.scale=this.scale),this.extent&&(e.extent=this.extent),this.zoom!==void 0&&(e.zoom=this.zoom),e}get el(){return this}static get style(){return x5e}},_X);function C5e(){if(typeof customElements>"u")return;["arcgis-map"].forEach(e=>{switch(e){case"arcgis-map":customElements.get(e)||customElements.define(e,E5e);break}})}C5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const dm=(t,e)=>(i,s)=>T5e(i,t,s);class P5e extends Kre{constructor(e,i,s){super(e,i,s),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:Qd.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.loadedCalled&&c3(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),Qd.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"widget"),this.onLifecycle(()=>this.reactiveUtils.watch(()=>this._instance.viewModel,s=>{this.component.viewModel=s},{initial:!0}));const e=this._instance.viewModel;typeof e=="object"&&(Qd.reEmitAccessorEvents(this,e,this.reactiveUtils,"viewModel"),Qd.watchComponentUpdates(this,e,this._watchedViewModelProperties),Qd.watchAccessorUpdates(this,e,this._watchedViewModelProperties));const i=Object.entries(this._watchedVisibleElementsProperties);i.length>0&&this.onLifecycle(()=>i.map(([s,n])=>{let r=this._instance.visibleElements??{},o;for(const y of n.slice(0,-1))if(typeof r[y]=="object"&&r[y]!==null)r=r[y];else{o=!!r[y];break}o===void 0&&(o=!!(r[n.slice(-1)[0]]??!0)),s.startsWith("hide");const u=s.startsWith("hide")||s.startsWith("show")?s.startsWith("hide"):o,f=this.component;return typeof f[s]=="boolean"?this._updateWidgetVisibleElement(n,f[s],u):f[s]=!1,Gb(this.component,s,y=>this._updateWidgetVisibleElement(n,y,u))}))}_updateWidgetVisibleElement(e,i,s){let n=this._instance.visibleElements??{};for(const o of e.slice(0,-1))(typeof n[o]!="object"||n[o]===null)&&(n[o]={}),n=n[o];const r=!!(s?!i:i);n[e.at(-1)]=r}hostLoaded(){const{el:e}=this.component;e.childElem??(e.childElem=document.createElement("div")),this._instance.container=e.childElem;let i=!1;const s=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>{var n;return this._instance.view??((n=this._instance.viewModel)==null?void 0:n.view)},set:n=>{!("view"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.view=n:this._instance.view=n,!("map"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.map=n.map:this._instance.map=n.map,this._watchViewDestroy(),n&&!i&&(i=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),s&&(this._instance.view=s),this.component.el.isConnected&&(c3(this.component),this._watchViewDestroy())}hostDisconnected(){var e,i;typeof this.component.el.childElem=="object"&&((i=(e=this.component.el.view)==null?void 0:e.ui)==null||i.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){Gb(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&c3(this.component)}),Gb(this.component,"referenceElement",()=>c3(this.component))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,i)=>typeof i=="string"||Reflect.has(e,i),get:(e,i)=>{if(typeof i=="symbol"||i in Promise.prototype)return Reflect.get(e,i);const s=[i],n=this._makeRecursiveProxy(s);return pM(this.component,r=>{const o=r;this.component[o]=!1,this._watchedVisibleElementsProperties[o]=s},n)}})}_makeRecursiveProxy(e){const i=new Proxy({},{get:(s,n)=>{const r=Reflect.get(s,n);return typeof n=="symbol"||n in Promise.prototype?r:(e.push(n),i)}});return i}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var i;return((i=this.component.el.view)==null?void 0:i.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}}const T5e=mq(P5e);/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const I5e="",M5e=I5e,A5e=dm(wCe),bX=[0,"arcgis-legend",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],headingLevel:[1026,"heading-level"],referenceElement:[1025,"reference-element"],activeLayerInfos:[1040],basemapLegendVisible:[1028,"basemap-legend-visible"],hideLayersNotInCurrentView:[1028,"hide-layers-not-in-current-view"],icon:[1025],label:[1025],respectLayerVisibilityDisabled:[1028,"respect-layer-visibility-disabled"],legendStyle:[1025,"legend-style"],layerInfos:[1040],position:[1025],respectLayerDefinitionExpression:[1028,"respect-layer-definition-expression"],state:[1537],destroy:[64]}],D5e=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>bX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.manager=Tf(this,Io),this.widget=A5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("state"),this.autoDestroyDisabled=!1,this.headingLevel=this.widget.headingLevel,this.referenceElement=void 0,this.activeLayerInfos=this.widget.activeLayerInfos,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.legendStyle=this.widget.style,this.layerInfos=this.widget.layerInfos,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return M5e}},bX);function k5e(){if(typeof customElements>"u")return;["arcgis-legend"].forEach(e=>{switch(e){case"arcgis-legend":customElements.get(e)||customElements.define(e,D5e);break}})}k5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const N5e="",$5e=N5e,O5e=dm(ECe),xX=[0,"arcgis-search",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeMenu:[1025,"active-menu"],activeSource:[1040],activeSourceIndex:[1026,"active-source-index"],allPlaceholder:[1025,"all-placeholder"],allSources:[1040],autoSelectDisabled:[1028,"auto-select-disabled"],defaultSources:[1040],disabled:[1540],icon:[1025],label:[1025],includeDefaultSourcesDisabled:[1028,"include-default-sources-disabled"],locationDisabled:[1028,"location-disabled"],maxResults:[1026,"max-results"],maxSuggestions:[1026,"max-suggestions"],minSuggestCharacters:[1026,"min-suggest-characters"],popupDisabled:[1028,"popup-disabled"],popupTemplate:[1040],portal:[1040],resultGraphic:[1040],resultGraphicDisabled:[1028,"result-graphic-disabled"],results:[1040],searchAllDisabled:[1028,"search-all-disabled"],searchTerm:[1025,"search-term"],selectedResult:[1040],sources:[1040],suggestions:[1040],suggestionsDisabled:[1028,"suggestions-disabled"],position:[1025],state:[1537],blurSearch:[64],clearSearch:[64],focusSearch:[64],destroy:[64],search:[64],suggest:[64]}],R5e=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>xX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.widgetSearchBlur=$t(this,"arcgisBlur",7),this.widgetSearchClear=$t(this,"arcgisClear",7),this.widgetSearchComplete=$t(this,"arcgisComplete",7),this.widgetSearchFocus=$t(this,"arcgisFocus",7),this.widgetSearchStart=$t(this,"arcgisStart",7),this.widgetSelectResult=$t(this,"arcgisSelectResult",7),this.widgetSuggestComplete=$t(this,"arcgisSuggestComplete",7),this.widgetSuggestStart=$t(this,"arcgisSuggestStart",7),this.manager=Tf(this,Io),this.widget=O5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeMenu=this.widget.activeMenu,this.activeSource=this.widget.activeSource,this.activeSourceIndex=this.widget.activeSourceIndex,this.allPlaceholder=this.widget.allPlaceholder,this.allSources=this.widget.allSources,this.autoSelectDisabled=this.widget.autoSelect,this.defaultSources=this.widget.defaultSources,this.disabled=this.widget.disabled,this.icon=this.widget.icon,this.label=this.widget.label,this.includeDefaultSourcesDisabled=this.widget.includeDefaultSources,this.locationDisabled=this.widget.locationEnabled,this.maxResults=this.widget.maxResults,this.maxSuggestions=this.widget.maxSuggestions,this.minSuggestCharacters=this.widget.minSuggestCharacters,this.popupDisabled=this.widget.popupEnabled,this.popupTemplate=this.widget.popupTemplate,this.portal=this.widget.portal,this.resultGraphic=this.widget.resultGraphic,this.resultGraphicDisabled=this.widget.resultGraphicEnabled,this.results=this.widget.results,this.searchAllDisabled=this.widget.searchAllEnabled,this.searchTerm=this.widget.searchTerm,this.selectedResult=this.widget.selectedResult,this.sources=this.widget.sources,this.suggestions=this.widget.suggestions,this.suggestionsDisabled=this.widget.suggestionsEnabled,this.position="top-right",this.state=this.viewModel.state}async blurSearch(){var e;(e=this.widget)==null||e.blur()}async clearSearch(){var e;(e=this.widget)==null||e.clear()}async focusSearch(){var e;(e=this.widget)==null||e.focus()}async destroy(){await this.manager.destroy()}async search(e){var i;return await((i=this.widget)==null?void 0:i.search(e))}async suggest(e){var i;return await((i=this.widget)==null?void 0:i.suggest(e))}get el(){return this}static get style(){return $5e}},xX);function L5e(){if(typeof customElements>"u")return;["arcgis-search"].forEach(e=>{switch(e){case"arcgis-search":customElements.get(e)||customElements.define(e,R5e);break}})}L5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const F5e="",z5e=F5e,q5e=dm(gCe),wX=[0,"arcgis-editor",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeWorkflow:[1040],allowedWorkflows:[1025,"allowed-workflows"],icon:[1025],label:[1025],labelOptions:[1040],layerInfos:[1040],snappingOptions:[1040],supportingWidgetDefaults:[1040],tooltipOptions:[1040],headingLevel:[1026,"heading-level"],hideCreateFeaturesSection:[1028,"hide-create-features-section"],hideEditFeaturesSection:[1028,"hide-edit-features-section"],hideLabelsToggle:[1028,"hide-labels-toggle"],hideTooltipsToggle:[1028,"hide-tooltips-toggle"],showSnappingControlsElementsHeader:[1028,"show-snapping-controls-elements-header"],hideSnappingControlsElementsEnabledToggle:[1028,"hide-snapping-controls-elements-enabled-toggle"],hideSnappingControlsElementsSelfEnabledToggle:[1028,"hide-snapping-controls-elements-self-enabled-toggle"],hideSnappingControlsElementsFeatureEnabledToggle:[1028,"hide-snapping-controls-elements-feature-enabled-toggle"],hideSnappingControlsElementsLayerList:[1028,"hide-snapping-controls-elements-layer-list"],position:[1025],state:[1537],cancelWorkflow:[64],destroy:[64],deleteFeatureFromWorkflow:[64],startCreateFeaturesWorkflowAtFeatureCreation:[64],startCreateFeaturesWorkflowAtFeatureTypeSelection:[64],startUpdateWorkflowAtFeatureEdit:[64],startUpdateWorkflowAtFeatureSelection:[64],startUpdateWorkflowAtMultipleFeatureSelection:[64]}],V5e=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>wX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.manager=Tf(this,Io),this.widget=q5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("activeWorkflow","state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeWorkflow=this.widget.activeWorkflow,this.allowedWorkflows=this.widget.allowedWorkflows,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layerInfos=this.widget.layerInfos,this.snappingOptions=this.widget.snappingOptions,this.supportingWidgetDefaults=this.widget.supportingWidgetDefaults,this.tooltipOptions=this.widget.tooltipOptions,this.headingLevel=this.widget.headingLevel,this.hideCreateFeaturesSection=this.widget.visibleElements.createFeaturesSection,this.hideEditFeaturesSection=this.widget.visibleElements.editFeaturesSection,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.position="bottom-left",this.state=this.viewModel.state}async cancelWorkflow(){var e;await((e=this.widget)==null?void 0:e.cancelWorkflow())}async destroy(){await this.manager.destroy()}async deleteFeatureFromWorkflow(){var e;await((e=this.widget)==null?void 0:e.deleteFeatureFromWorkflow())}async startCreateFeaturesWorkflowAtFeatureCreation(e){var i;await((i=this.widget)==null?void 0:i.startCreateFeaturesWorkflowAtFeatureCreation(e))}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){var e;await((e=this.widget)==null?void 0:e.startCreateFeaturesWorkflowAtFeatureTypeSelection())}async startUpdateWorkflowAtFeatureEdit(e){var i;await((i=this.widget)==null?void 0:i.startUpdateWorkflowAtFeatureEdit(e))}async startUpdateWorkflowAtFeatureSelection(){var e;await((e=this.widget)==null?void 0:e.startUpdateWorkflowAtFeatureSelection())}async startUpdateWorkflowAtMultipleFeatureSelection(e){var i;await((i=this.widget)==null?void 0:i.startUpdateWorkflowAtMultipleFeatureSelection(e))}get el(){return this}static get style(){return z5e}},wX);function G5e(){if(typeof customElements>"u")return;["arcgis-editor"].forEach(e=>{switch(e){case"arcgis-editor":customElements.get(e)||customElements.define(e,V5e);break}})}G5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const j5e="arcgis-sketch{}",B5e=j5e,H5e=dm(PCe),SX=[0,"arcgis-sketch",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeTool:[1537,"active-tool"],availableCreateTools:[1040],createGraphic:[1040],creationMode:[1025,"creation-mode"],defaultCreateOptions:[1040],defaultUpdateOptions:[1040],defaultGraphicsLayerDisabled:[1028,"default-graphics-layer-disabled"],icon:[1025],label:[1025],labelOptions:[1040],layer:[1040],layout:[1025],pointSymbol:[1040],polylineSymbol:[1040],polygonSymbol:[1040],snappingOptions:[1040],tooltipOptions:[1040],updateGraphics:[1040],hideCreateToolsPoint:[1028,"hide-create-tools-point"],hideCreateToolsPolyline:[1028,"hide-create-tools-polyline"],hideCreateToolsPolygon:[1028,"hide-create-tools-polygon"],hideCreateToolsRectangle:[1028,"hide-create-tools-rectangle"],hideCreateToolsCircle:[1028,"hide-create-tools-circle"],hideDuplicateButton:[1028,"hide-duplicate-button"],hideSelectionToolsRectangleSelection:[1028,"hide-selection-tools-rectangle-selection"],hideSelectionToolsLassoSelection:[1028,"hide-selection-tools-lasso-selection"],hideSettingsMenu:[1028,"hide-settings-menu"],hideLabelsToggle:[1028,"hide-labels-toggle"],hideTooltipsToggle:[1028,"hide-tooltips-toggle"],hideSnappingControls:[1028,"hide-snapping-controls"],showSnappingControlsElementsHeader:[1028,"show-snapping-controls-elements-header"],hideSnappingControlsElementsEnabledToggle:[1028,"hide-snapping-controls-elements-enabled-toggle"],hideSnappingControlsElementsSelfEnabledToggle:[1028,"hide-snapping-controls-elements-self-enabled-toggle"],hideSnappingControlsElementsFeatureEnabledToggle:[1028,"hide-snapping-controls-elements-feature-enabled-toggle"],hideSnappingControlsElementsLayerList:[1028,"hide-snapping-controls-elements-layer-list"],hideUndoRedoMenu:[1028,"hide-undo-redo-menu"],position:[1025],state:[1537],cancel:[64],complete:[64],create:[64],delete:[64],destroy:[64],duplicate:[64],redo:[64],undo:[64],update:[64]},[[0,"arcgisReady","arcgisReadyHandler"]]],U5e=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>SX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.widgetCreate=$t(this,"arcgisCreate",7),this.widgetDelete=$t(this,"arcgisDelete",7),this.widgetRedo=$t(this,"arcgisRedo",7),this.widgetUndo=$t(this,"arcgisUndo",7),this.widgetUpdate=$t(this,"arcgisUpdate",7),this.manager=Tf(this,Io),this.widget=H5e(this,{editConstructorProperties:this._editConstructorProperties}),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeTool=this.widget.activeTool,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.defaultGraphicsLayerDisabled=!1,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.snappingOptions=this.widget.snappingOptions,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.position="bottom-left",this.state=this.widget.state}async _editConstructorProperties(e){return this.defaultGraphicsLayerDisabled||(e.layer??(e.layer=await nCe({title:"Sketch Layer"}))),e}arcgisReadyHandler(){var e,i;!this.defaultGraphicsLayerDisabled&&!((e=this.el.view)!=null&&e.map.layers.includes(this.widget.layer))&&((i=this.el.view)==null||i.map.add(this.widget.layer))}async cancel(){var e;(e=this.widget)==null||e.cancel()}async complete(){var e;(e=this.widget)==null||e.complete()}async create(e,i){var s;await((s=this.widget)==null?void 0:s.create(e,i))}async delete(){var e;(e=this.widget)==null||e.delete()}async destroy(){await this.manager.destroy()}async duplicate(){var e;(e=this.widget)==null||e.duplicate()}async redo(){var e;(e=this.widget)==null||e.redo()}async undo(){var e;(e=this.widget)==null||e.undo()}async update(e,i){var s;return void((s=this.widget)==null?void 0:s.update(e,i))}get el(){return this}static get style(){return B5e}},SX);function Y5e(){if(typeof customElements>"u")return;["arcgis-sketch"].forEach(e=>{switch(e){case"arcgis-sketch":customElements.get(e)||customElements.define(e,U5e);break}})}Y5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const X5e="",W5e=X5e,Z5e=dm(bCe),EX=[0,"arcgis-layer-list",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],collapsed:[1540],headingLevel:[1026,"heading-level"],catalogLayerList:[1040],catalogOptions:[1040],dragEnabled:[1028,"drag-enabled"],filterPlaceholder:[1025,"filter-placeholder"],filterText:[1025,"filter-text"],icon:[1025],knowledgeGraphOptions:[1040],tableList:[1040],label:[1025],listItemCreatedFunction:[1040],minDragEnabledItems:[1026,"min-drag-enabled-items"],minFilterItems:[1026,"min-filter-items"],openedLayers:[1040],operationalItems:[1040],selectedItems:[1040],selectionMode:[1025,"selection-mode"],visibilityAppearance:[1025,"visibility-appearance"],hideCatalogLayerList:[1028,"hide-catalog-layer-list"],showCloseButton:[1028,"show-close-button"],showCollapseButton:[1028,"show-collapse-button"],showErrors:[1028,"show-errors"],showFilter:[1028,"show-filter"],hideFlow:[1028,"hide-flow"],showHeading:[1028,"show-heading"],hideStatusIndicators:[1028,"hide-status-indicators"],showTemporaryLayerIndicators:[1028,"show-temporary-layer-indicators"],position:[1025],state:[1537],destroy:[64],triggerAction:[64]}],K5e=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>EX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.widgetTriggerAction=$t(this,"arcgisTriggerAction",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.manager=Tf(this,Io),this.widget=Z5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.collapsed=this.widget.collapsed,this.headingLevel=this.widget.headingLevel,this.catalogLayerList=qa(void 0,{get:()=>this.widget.catalogLayerList,set:"ignore"}),this.catalogOptions=this.widget.catalogOptions,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterText=this.widget.filterText,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.tableList=qa(void 0,{get:()=>this.widget.tableList,set:"ignore"}),this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=qa(void 0,{get:()=>this.widget.openedLayers,set:"ignore"}),this.operationalItems=qa(void 0,{get:()=>this.widget.operationalItems,set:"ignore"}),this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.visibilityAppearance=this.widget.visibilityAppearance,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.hideFlow=this.widget.visibleElements.flow,this.showHeading=this.widget.visibleElements.heading,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}async triggerAction(e,i){var s;(s=this.widget)==null||s.triggerAction(e,i)}get el(){return this}static get style(){return W5e}},EX);function J5e(){if(typeof customElements>"u")return;["arcgis-layer-list"].forEach(e=>{switch(e){case"arcgis-layer-list":customElements.get(e)||customElements.define(e,K5e);break}})}J5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const Q5e="arcgis-expand{pointer-events:auto}arcgis-expand>.esri-expand__content--expanded{background-color:var(--calcite-color-background)}",ePe=Q5e,tPe=dm(vCe),CX=[0,"arcgis-expand",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],icon:[1025],content:[1025],label:[1025],autoCollapse:[1028,"auto-collapse"],closeOnEsc:[1028,"close-on-esc"],collapseIcon:[1025,"collapse-icon"],collapseTooltip:[1025,"collapse-tooltip"],expanded:[1540],expandIcon:[1025,"expand-icon"],expandTooltip:[1025,"expand-tooltip"],group:[1025],iconNumber:[1026,"icon-number"],mode:[1025],placement:[1025],position:[1025],referenceElement:[1025,"reference-element"],destroy:[64],collapse:[64],expand:[64],toggle:[64]}],iPe=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>CX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.manager=Tf(this,Io),this.widget=tPe(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.icon=this.widget.icon,this.content=this.widget.content,this.label=this.widget.label,this.autoCollapse=this.widget.autoCollapse,this.closeOnEsc=this.widget.closeOnEsc,this.collapseIcon=this.widget.collapseIcon,this.collapseTooltip=this.widget.collapseTooltip,this.expanded=this.widget.expanded,this.expandIcon=this.widget.expandIcon,this.expandTooltip=this.widget.expandTooltip,this.group=this.widget.group,this.iconNumber=this.widget.iconNumber,this.mode=this.widget.mode,this.placement=this.widget.placement,this.position="top-right",this.referenceElement=void 0,this.content??(this.content=document.createElement("div"))}async destroy(){await this.manager.destroy()}async collapse(){var e;(e=this.widget)==null||e.collapse()}async expand(){var e;(e=this.widget)==null||e.expand()}async toggle(){this.expanded?await this.collapse():await this.expand()}get el(){return this}static get style(){return ePe}},CX);function sPe(){if(typeof customElements>"u")return;["arcgis-expand"].forEach(e=>{switch(e){case"arcgis-expand":customElements.get(e)||customElements.define(e,iPe);break}})}sPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const nPe="",rPe=nPe,oPe=dm(dCe),PX=[0,"arcgis-basemap-gallery",{activeBasemap:[1040],autoDestroyDisabled:[1028,"auto-destroy-disabled"],disabled:[1540],icon:[1025],label:[1025],headingLevel:[1026,"heading-level"],source:[1040],position:[1025],referenceElement:[1025,"reference-element"],state:[1537],destroy:[64]}],aPe=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>PX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.manager=Tf(this,Io),this.widget=oPe(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("activeBasemap","state"),this.activeBasemap=this.widget.activeBasemap,this.autoDestroyDisabled=!1,this.disabled=this.widget.disabled,this.icon=this.widget.icon,this.label=this.widget.label,this.headingLevel=this.widget.headingLevel,this.source=this.widget.source,this.position="bottom-left",this.referenceElement=void 0,this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return rPe}},PX);function lPe(){if(typeof customElements>"u")return;["arcgis-basemap-gallery"].forEach(e=>{switch(e){case"arcgis-basemap-gallery":customElements.get(e)||customElements.define(e,aPe);break}})}lPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const cPe="arcgis-placement{display:block;pointer-events:auto;box-shadow:none}.arcgis-placement__container{display:flex}",uPe=cPe,hPe=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.arcgisReady=$t(this,"arcgisReady",7),this._setContainer=e=>{this.el.childElem=e},this.referenceElement=void 0,this.position="bottom-left"}referenceElementWatcher(e){v5e(this,e)}positionWatcher(e){var i;this.el.childElem&&e!==void 0&&((i=this.el.view)==null||i.ui.move(this.el.childElem,e))}async componentDidLoad(){g5e(this),c3(this)}disconnectedCallback(){var e,i;this.el.childElem&&((i=(e=this.el.view)==null?void 0:e.ui)==null||i.remove(this.el.childElem))}render(){return Ae("div",{key:"71b98c7f94af271e6881f46e4036085576e1fbd4",ref:this._setContainer,class:"arcgis-placement__container"},Ae("slot",{key:"ac18bc6a5a4ae5a8642d73b7b692c6180a3c13ec"}))}get el(){return this}static get watchers(){return{referenceElement:["referenceElementWatcher"],position:["positionWatcher"]}}static get style(){return uPe}},[4,"arcgis-placement",{referenceElement:[1,"reference-element"],position:[1]},void 0,{referenceElement:["referenceElementWatcher"],position:["positionWatcher"]}]);function dPe(){if(typeof customElements>"u")return;["arcgis-placement"].forEach(e=>{switch(e){case"arcgis-placement":customElements.get(e)||customElements.define(e,hPe);break}})}dPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const fPe="",pPe=fPe,mPe=dm(pCe),TX=[0,"arcgis-distance-measurement-2d",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],icon:[1025],label:[1025],unit:[1025],unitOptions:[1040],position:[1025],state:[1537],destroy:[64]}],gPe=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>TX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.manager=Tf(this,Io),this.widget=mPe(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.icon=this.widget.icon,this.label=this.widget.label,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return pPe}},TX);function yPe(){if(typeof customElements>"u")return;["arcgis-distance-measurement-2d"].forEach(e=>{switch(e){case"arcgis-distance-measurement-2d":customElements.get(e)||customElements.define(e,gPe);break}})}yPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const vPe="",_Pe=vPe,bPe=dm(uCe),IX=[0,"arcgis-area-measurement-2d",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],label:[1025],icon:[1025],unit:[1025],unitOptions:[1040],position:[1025],state:[1537],destroy:[64]}],xPe=Hi(class extends Bi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>IX[2]??{},this.arcgisReady=$t(this,"arcgisReady",7),this.arcgisPropertyChange=$t(this,"arcgisPropertyChange",7),this.manager=Tf(this,Io),this.widget=bPe(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=Lg()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.label=this.widget.label,this.icon=this.widget.icon,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return _Pe}},IX);function wPe(){if(typeof customElements>"u")return;["arcgis-area-measurement-2d"].forEach(e=>{switch(e){case"arcgis-area-measurement-2d":customElements.get(e)||customElements.define(e,xPe);break}})}wPe();function I(t,e,i,s){var n,r=arguments.length,o=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function wct(t,e){return function(i,s){e(i,s,t)}}function Sct(t,e,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function l(y){try{f(s.next(y))}catch(_){o(_)}}function u(y){try{f(s.throw(y))}catch(_){o(_)}}function f(y){y.done?r(y.value):n(y.value).then(l,u)}f((s=s.apply(t,[])).next())})}function Kl(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,n;if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose]}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(r){return Promise.reject(r)}}),t.stack.push({value:e,dispose:s,async:i})}return e}var SPe=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var s=new Error(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function fm(t){function e(r){t.error=t.hasError?new SPe(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}var i,s=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&s===1)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,function(o){return e(o),n()})}else s|=1}catch(o){e(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}let J0;function ht(t){return typeof J0[t]=="function"?J0[t]=J0[t](globalThis):J0[t]}var qse,Vse,Gse,jse;J0=(qse=globalThis.dojoConfig)!=null&&qse.has||(Vse=globalThis.esriConfig)!=null&&Vse.has?{...(Gse=globalThis.dojoConfig)==null?void 0:Gse.has,...(jse=globalThis.esriConfig)==null?void 0:jse.has}:{},ht.add=(t,e,i,s)=>{(s||J0[t]===void 0)&&(J0[t]=e),i&&ht(t)},ht.cache=J0,ht.add("big-integer-warning-enabled",!0),ht.add("esri-deprecation-warnings",!0),ht.add("esri-tests-disable-screenshots",!1),ht.add("esri-tests-use-full-window",!1),ht.add("esri-tests-post-to-influx",!0),ht.add("esri-cim-animations-enable-status","enabled"),ht.add("esri-cim-animations-spotlight",!1),ht.add("esri-cim-animations-freeze-time",!1),ht.add("enable-feature:multiple-highlights",!1),(()=>{var e;ht.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ht.add("host-browser",t),ht.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ht.add("dom",t),ht("host-browser")){const i=navigator,s=i.userAgent,n=i.appVersion,r=parseFloat(n);if(ht.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),ht.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),ht.add("khtml",n.includes("Konqueror")?r:void 0),ht.add("edge",parseFloat(s.split("Edge/")[1])||void 0),ht.add("opr",parseFloat(s.split("OPR/")[1])||void 0),ht.add("webkit",!ht("wp")&&!ht("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),ht.add("chrome",!ht("edge")&&!ht("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),ht.add("android",!ht("wp")&&parseFloat(s.split("Android ")[1])||void 0),ht.add("safari",!n.includes("Safari")||ht("wp")||ht("chrome")||ht("android")||ht("edge")||ht("opr")?void 0:parseFloat(n.split("Version/")[1])),ht.add("mac",n.includes("Macintosh")),!ht("wp")&&/(iPhone|iPod|iPad)/.test(s)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(s)?RegExp.$1:"1",u=parseFloat(l.replace(/_/,".").replaceAll("_",""));ht.add(o,u),ht.add("ios",u)}ht("webkit")||(!s.includes("Gecko")||ht("wp")||ht("khtml")||ht("edge")||ht.add("mozilla",r),ht("mozilla")&&ht.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ht.add("esri-mobile",e),i&&ht.add("esri-iPhone",i),ht.add("esri-geolocation",!!navigator.geolocation)}ht.add("esri-wasm","WebAssembly"in globalThis),ht.add("esri-performance-mode-frames-between-render",20),ht.add("esri-force-performance-mode",!1),ht.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ht.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ht.add("esri-atomics","Atomics"in globalThis),ht.add("esri-workers","Worker"in globalThis),ht.add("web-feat:cache","caches"in globalThis),ht.add("esri-workers-arraybuffer-transfer",!ht("safari")||Number(ht("safari"))>=12),ht.add("workers-pool-size",8),ht.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ht.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ht.add("featurelayer-fast-triangulation-enabled",!0),ht.add("featurelayer-animation-enabled",!0),ht.add("featurelayer-snapshot-enabled",!0),ht.add("featurelayer-snapshot-point-min-threshold",8e4),ht.add("featurelayer-snapshot-point-max-threshold",4e5),ht.add("featurelayer-snapshot-point-coverage",.1),ht.add("featurelayer-query-max-depth",4),ht.add("featurelayer-query-pausing-enabled",!1),ht.add("featurelayer-advanced-symbols",!1),ht.add("featurelayer-pbf",!0),ht.add("featurelayer-pbf-statistics",!1),ht.add("feature-layers-workers",!0),ht.add("feature-polyline-generalization-factor",1),ht.add("mapview-transitions-duration",200),ht.add("mapview-essential-goto-duration",200),ht.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ht.add("mapserver-pbf-version-support",10.81),ht.add("mapservice-popup-identify-max-tolerance",20),ht("host-webworker")||ht("host-browser")&&(ht.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ht.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ht.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ht.add("esri-image-decode",!1,!0,!0)})}return!1}),ht.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();let yT=class O1{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*O1._m}getInt(){return this._seed=(O1._a*this._seed+O1._c)%O1._m,this._seed}getFloat(){return this.getInt()/(O1._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const s=i-e;return e+this.getInt()/O1._m*s}};yT._m=2147483647,yT._a=48271,yT._c=0;const EPe=1.5,Ect=1/EPe,Cct=.5;function Pct(t,e){if(!e)return t;for(const i of e)t.push(i);return t}function Tct(t,e){return e?t.filter((i,s,n)=>n.findIndex(e.bind(null,i))===s):Array.from(new Set(t))}function ff(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}function CPe(t,e,i){let s,n;return i?(s=e.filter(r=>!t.some(o=>i(o,r))),n=t.filter(r=>!e.some(o=>i(o,r)))):(s=e.filter(r=>!t.includes(r)),n=t.filter(r=>!e.includes(r))),{added:s,removed:n}}function Ict(t){return t&&typeof t.length=="number"}let ioe=class{constructor(){this.last=0}};const soe=new ioe;function S$(t,e,i,s){s=s||soe;const n=Math.max(0,s.last-10);for(let o=n;o<i;++o)if(t[o]===e)return s.last=o,o;const r=Math.min(n,i);for(let o=0;o<r;++o)if(t[o]===e)return s.last=o,o;return-1}function PPe(t,e,i,s){const n=t.length,r=S$(t,e,n,s);if(r!==-1)return t[r]=t[n-1],t.pop(),e}const ch=new Set;function TPe(t,e,i=t.length,s=e.length,n,r){if(s===0||i===0)return i;ch.clear();for(let l=0;l<s;++l)ch.add(e[l]);n=n||soe;const o=Math.max(0,n.last-10);for(let l=o;l<i;++l)if(ch.has(t[l])&&(r==null||r.push(t[l]),ch.delete(t[l]),t[l]=t[i-1],--i,--l,ch.size===0||i===0))return ch.clear(),i;for(let l=0;l<o;++l)if(ch.has(t[l])&&(r==null||r.push(t[l]),ch.delete(t[l]),t[l]=t[i-1],--i,--l,ch.size===0||i===0))return ch.clear(),i;return ch.clear(),i}function Act(t,e){let i=0;for(let s=0;s<t.length;++s){const n=t[s];e(n,s)&&(t[i]=n,i++)}t.length=i}function noe(t){return t?(MX.seed=t,()=>MX.getFloat()):Math.random}function roe(t,e){const i=noe(e);for(let s=t.length-1;s>0;s--){const n=Math.floor(i()*(s+1)),r=t[s];t[s]=t[n],t[n]=r}return t}const MX=new yT;function gM(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function yl(t,e){return t!=null}const Dct=[];function ooe(t){return 32+t.length}function gq(){return 16}function kct(t){if(!t)return 0;let e=loe;for(const i in t)if(t.hasOwnProperty(i)){const s=t[i];switch(typeof s){case"string":e+=ooe(s);break;case"number":e+=gq();break;case"boolean":e+=4}}return e}function IPe(t){if(!t)return 0;if(Array.isArray(t))return MPe(t);let e=loe;for(const i in t)t.hasOwnProperty(i)&&(e+=aoe(t[i]));return e}function MPe(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=coe;for(let s=0;s<e;s++)i+=aoe(t[s]);return i}function aoe(t){switch(typeof t){case"object":return IPe(t);case"string":return ooe(t);case"number":return gq();case"boolean":return 4;default:return 8}}function APe(t,e){return coe+t.length*e}const loe=32,coe=16;function Nct(t){return t instanceof ArrayBuffer}function yq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function uoe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function hoe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function vq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function doe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function _q(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function foe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function fC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function pC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function poe(t){return!("buffer"in t)}function $ct(...t){return t.reduce((e,i)=>e+(i?poe(i)?APe(i,gq()):i.byteLength+DPe:0),0)}const DPe=145,moe=1024;function Oct(t){return pC(t)||fC(t)||_q(t)||vq(t)||yq(t)}function Rct(t){return pC(t)||fC(t)}function Lct(t){return pC(t)?179769e303:fC(t)?3402823e32:foe(t)?4294967295:doe(t)?65535:uoe(t)||hoe(t)?255:_q(t)?2147483647:vq(t)?32767:yq(t)?127:256}function bq(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function Ue(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=_oe(t);if(e!=null)return e;if(goe(t))return t.clone();if(yoe(t))return t.map(Ue);if(voe(t))return t.clone();const i={};for(const s of Object.getOwnPropertyNames(t))i[s]=Ue(t[s]);return i}function E$(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=_oe(t);if(e!=null)return e;if(yoe(t)){let i=!0;const s=t.map(n=>{const r=E$(n);return n!=null&&r==null&&(i=!1),r});return i?s:null}if(goe(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!voe(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const n=t[s],r=E$(n);if(n!=null&&r==null)return null;i[s]=r}return i}return null}function goe(t){return typeof t.clone=="function"}function yoe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function voe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function AX(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function _oe(t){if(yq(t)||uoe(t)||hoe(t)||vq(t)||doe(t)||_q(t)||foe(t)||fC(t)||pC(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,s]of t)e.set(i,Ue(s));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(Ue(i));return e}return null}function xq(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function boe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&ff(t,e):t instanceof Set?e instanceof Set&&NPe(t,e):t instanceof Map?e instanceof Map&&$Pe(t,e):!!AX(t)&&AX(e)&&kPe(t,e))}function kPe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const s of i)if(t[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1;return!0}function NPe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function $Pe(t,e){if(t.size!==e.size)return!1;for(const[i,s]of t){const n=e.get(i);if(n!==s||n===void 0&&!e.has(i))return!1}return!0}function wq(t,e,i=!1){return woe(t,e,i)}function zp(t,e){if(e!=null)return e[t]||xoe(t.split("."),!1,e)}function Ja(t,e,i){const s=t.split("."),n=s.pop(),r=xoe(s,!0,i);r&&n&&(r[n]=e)}function DX(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let s=0;s<t.length;s++)if(DX(t[s],i[s]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(DX(t[i],e[i]))return!0;return!1}return t!==e}function xoe(t,e,i){let s=i;for(const n of t){if(s==null)return;if(!(n in s)){if(!e)return;s[n]={}}s=s[n]}return s}function woe(t,e,i){return e?Object.keys(e).reduce((s,n)=>{let r=s[n],o=e[n];return r===o?s:r===void 0?(s[n]=Ue(o),s):(Array.isArray(o)||Array.isArray(s)?(r=r?Array.isArray(r)?s[n]=r.slice():s[n]=[r]:s[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(l=>{r.includes(l)||r.push(l)}):s[n]=o.slice())):o&&typeof o=="object"?s[n]=woe(r,o,i):s.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(s[n]=o),s)},t||{}):t}var Bse;const Gs={apiKey:void 0,applicationName:"",applicationUrl:(Bse=globalThis.location)==null?void 0:Bse.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(wq(Gs,globalThis.esriConfig,!0),delete Gs.has),!Gs.assetsPath){{const t="4.31";Gs.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Gs.defaultAssetsPath=Gs.assetsPath}const OPe=/\{([^}]+)\}/g;function kX(t){return t??""}function yM(t,e){return e?t.replaceAll(OPe,typeof e=="object"?(i,s)=>kX(zp(s,e)):(i,s)=>kX(e(s))):t}function Fct(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function Soe(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let NX;function zct(t){return NX??(NX=new DOMParser),NX.parseFromString(t||"","text/html").body.innerText||""}function qct(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function Vct(t,...e){let i=t[0];for(let s=0;s<e.length;++s)i+=e[s]+t[s+1];return i}const $X={info:0,warn:1,error:2,none:3};let zt=class dc{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,dc._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=dc.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,dc._loggers.get(e)||new dc({module:e})}_log(e,i,...s){if(this._matchLevel(e)){if(i!=="always"&&!dc._throttlingDisabled){const n=LPe(s),r=this._loggedMessages[e].get(n);if(i==="once"&&r!=null||i==="oncePerTick"&&r&&r>=dc._tickCounter)return;this._loggedMessages[e].set(n,dc._tickCounter),dc._scheduleTickCounterIncrement()}for(const n of Gs.log.interceptors)if(n(e,this.module,...s))return;this._inheritedWriter()(e,this.module,...s)}}_parentWithMember(e,i){let s=this;for(;s!=null;){const n=s[e];if(n!=null)return n;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",RPe)}_matchLevel(e){const i=Gs.log.level||"warn";return $X[this._parentWithMember("level",i)]<=$X[e]}static _scheduleTickCounterIncrement(){dc._tickCounterScheduled||(dc._tickCounterScheduled=!0,Promise.resolve().then(()=>{dc._tickCounter++,dc._tickCounterScheduled=!1}))}};function RPe(t,e,...i){console[t](`[${e}]`,...i)}function LPe(...t){return Soe(JSON.stringify(t,(i,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]"))}zt._loggers=new Map,zt._tickCounter=0,zt._tickCounterScheduled=!1,zt._throttlingDisabled=!1;function FPe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,s)=>s===""?"$":(zp(s,e)??"").toString())}let Eoe=class{constructor(e,i,s=void 0){this.name=e,this.details=s,this.message=(i&&FPe(i,s))??""}toString(){return"["+this.name+"]: "+this.message}},rt=class Coe extends Eoe{constructor(e,i,s){super(e,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return Ue(i)}catch{return"[object]"}}))}}catch(e){throw zt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new Coe(e.name,e.message,e.details)}};rt.prototype.type="error";const OX=new WeakMap;function zPe(t,e,i=!1){const s=`🛑 DEPRECATED - ${e}`;if(!i)return void t.warn(s);let n=OX.get(t);n||(n=new Set,OX.set(t,n)),n.has(e)||(n.add(e),t.warn(s))}function Poe(t,e,i={}){if(ht("esri-deprecation-warnings")){const{moduleName:s}=i;v2(t,`Function: ${(s?s+"::":"")+e+"()"}`,i)}}function v9(t,e,i={}){if(ht("esri-deprecation-warnings")){const{moduleName:s}=i;v2(t,`Property: ${(s?s+"::":"")+e}`,i)}}function qPe(t,e,i={}){ht("esri-deprecation-warnings")&&v2(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function v2(t,e,i={}){if(ht("esri-deprecation-warnings")){const{replacement:s,version:n,see:r,warnOnce:o}=i;let l=e;s&&(l+=`
	🛠️ Replacement: ${s}`),n&&(l+=`
	⚙️ Version: ${n}`),r&&(l+=`
	🔗 See ${r} for more details.`),zPe(t,l,o)}}function jct(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function Bct(t,e){for(const i of t)if(i!=null&&e(i))return i}function RX(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let vM=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(RX(e)){const s=this._getOrCreateGroup(i);for(const n of e)FX(n)&&s.push(n)}else FX(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{const s=this._getGroup(e);s&&i&&s.forEach(i)}}has(e){return this._groups.has(BP(e))}remove(e){if(typeof e!="string"&&RX(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(LX(this._getGroup(e)),this._groups.delete(BP(e)),this):this}removeAll(){return this._groups.forEach(LX),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(BP(e),i),i}_getGroup(e){return this._groups.get(BP(e))}};function BP(t){return t||"_default_"}function LX(t){for(const e of t)e instanceof vM?e.removeAll():e.remove()}function FX(t){return t!=null&&(!!t.remove||t instanceof vM)}function VPe(t,e){if(t==null)throw new Error(e??"value is None")}function no(t){return t==null||t.destroy(),null}function Uct(t){return t==null||t.dispose(),null}function Co(t){return t==null||t.remove(),null}function dg(t){return t==null||t.abort(),null}function Yct(t){return t==null||t.release(),null}function Toe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function GPe(t,e){let i;return t.some((s,n)=>(i=e(s,n),i!=null)),i??void 0}const Ioe=Symbol("Accessor-beforeDestroy"),jPe={remove:()=>{}};function ds(t){return t?{remove(){t&&(t(),t=void 0)}}:jPe}function Moe(t){t.forEach(e=>e==null?void 0:e.remove())}function xd(t){Moe(t),t.length=0}function pm(t){return ds(()=>Moe(t))}function Xct(t){return ds(()=>{var e;return(e=t())==null?void 0:e.remove()})}function Wct(t){return ds(()=>t==null?void 0:t.abort())}function BPe(t){return ds(t!=null?()=>t.destroy():void 0)}function Sl(t){return t.__accessor__??null}function HPe(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function vT(t,e,i){return i?_9(t,e,{policy:i,path:""}):_9(t,e,null)}function _9(t,e,i){return e?Object.keys(e).reduce((s,n)=>{const r=n;let o=null,l="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,l=i.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(s[r]))return s[r]=e[r],s;if(s[r]===void 0)return s[r]=Ue(e[r]),s;let u=s[r],f=e[r];if(u===f)return s;if(Array.isArray(f)||Array.isArray(s))u=u?Array.isArray(u)?s[r]=u.slice():s[r]=[u]:s[r]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(y=>{u.includes(y)||u.push(y)}));else if(f&&typeof f=="object")if(i){const y=i.path;i.path=o,s[r]=_9(u,f,i),i.path=y}else s[r]=_9(u,f,null);else s.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(s[r]=f);return s},t||{}):t}function Aoe(t){return Array.isArray(t)?t:t.split(".")}function zX(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function UPe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...zX(i));return e}return zX(t)}function Doe(t,e,i,s){const n=UPe(e);if(n.length!==1){const r=n.map(o=>s(t,o,i));return pm(r)}return s(t,n[0],i)}function koe(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=Sl(e);return HPe(s,i)?s.get(i):e[i]}function Noe(t,e,i){if(t==null)return t;const s=koe(e[i],t);return!s&&i<e.length-1?void 0:i===e.length-1?s:Noe(s,e,i+1)}function mC(t,e,i=0){return typeof e!="string"||e.includes(".")?Noe(t,Aoe(e),i):koe(e,t)}function $u(t,e){return mC(t,e)}function qX(t,e){return mC(e,t)!==void 0}var Hl;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(Hl||(Hl={}));function gC(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const s in e)e[s]=Ue(e[s]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function _M(t,e){const i=gC(t);let s=i[e];return s||(s=i[e]={}),s}function YPe(t,e){return vT(t,e,WPe)}const XPe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function WPe(t){return XPe.test(t)?"replace":"merge"}function ZPe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function KPe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let yC=class C${constructor(e,i,s,n=1,r=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=n,this._pool=new Array(r),this._initialSize=r;for(let o=0;o<r;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(C$.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let n=0;n<s;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):KPe(i)&&i.acquire(...e),i}release(e){e&&!C$.test.disabled&&(this._releaseFunction?this._releaseFunction(e):ZPe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};yC.test={disabled:!1};let JPe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){gM(this._observers,this._observer)}},$oe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return QPe;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,n=!1;const r=i.length;for(let o=0;o<r;++o){const l=i[o];if(l.destroyed)n=!0;else if(l===e){s=!0;break}}return s||(i.push(e),n&&this._removeDestroyedObservers()),new JPe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let s=0;for(let n=0;n<i;++n){for(;n+s<i&&e[n+s].destroyed;)++s;if(s>0){if(!(n+s<i))break;e[n]=e[n+s]}}e.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const QPe=ds();var Ui;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Ui||(Ui={}));const P$=Ui.USER+1;function Q0(t){switch(t){case"defaults":return Ui.DEFAULTS;case"service":return Ui.SERVICE;case"portal-item":return Ui.PORTAL_ITEM;case"web-scene":return Ui.WEB_SCENE;case"web-map":return Ui.WEB_MAP;case"link-chart":return Ui.LINK_CHART;case"user":return Ui.USER;default:return null}}function b9(t){switch(t){case Ui.DEFAULTS:return"defaults";case Ui.SERVICE:return"service";case Ui.PORTAL_ITEM:return"portal-item";case Ui.WEB_SCENE:return"web-scene";case Ui.WEB_MAP:return"web-map";case Ui.LINK_CHART:return"link-chart";case Ui.USER:return"user"}}function e4e(t){return b9(t)}var Ks;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ks||(Ks={}));let bM=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const x9=new bM,u3=[];let _S=x9;function mi(t){_S.onAccessed(t)}let _T=!1,bT=!1;function Wp(t,e,i){if(_T)return Sq(t,e,i);let s=null;return Ooe(t),s=e.call(i),Roe(),s}function t4e(t,e){return Wp(x9,t,e)}function Sq(t,e,i){const s=_T;_T=!0,Ooe(t);let n=null;try{n=e.call(i)}catch(r){bT&&zt.getLogger("esri.core.accessorSupport.tracking").error(r)}return Roe(),_T=s,n}function Ooe(t){_S=t,u3.push(t)}function Roe(){const t=u3.length;if(t>1){const e=u3.pop();_S=u3[t-2],e.onTrackingEnd()}else if(t===1){const e=u3.pop();_S=x9,e.onTrackingEnd()}else _S=x9}function Loe(t,e){if(e.flags&Ks.DepTrackingInitialized)return;e.flags|=Ks.DepTrackingInitialized;const i=bT;bT=!1,e.flags&Ks.AutoTracked?Sq(e.trackingTarget,e.metadata.get,t):Foe(t,e),bT=i}const i4e=[];function Foe(t,e){e.flags&Ks.ExplicitlyTracking||(e.flags|=Ks.ExplicitlyTracking,Sq(e.trackingTarget,()=>{const i=e.metadata.dependsOn||i4e;for(const s of i)if(typeof s!="string"||s.includes(".")){const n=Aoe(s);for(let r=0,o=t;r<n.length&&o!=null&&typeof o=="object";++r)o=VX(o,n[r],r!==n.length-1)}else VX(t,s,!1)}),e.flags&=~Ks.ExplicitlyTracking)}function VX(t,e,i){const s=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const r=parseInt(s,10);if(!isNaN(r))return Array.isArray(t)?t[r]:t.at(r)}const n=Sl(t);if(n){const r=n.propertiesByName.get(s);r&&(mi(r),Loe(t,r))}return i?t[s]:void 0}let GX=class extends $oe{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new bM(this),this.flags=0,this.flags=Ks.Dirty|(i.nonNullable?Ks.NonNullable:0)|(i.hasOwnProperty("value")?Ks.HasDefaultValue:0)|(i.get===void 0?Ks.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ks.AutoTracked:0)}destroy(){this.flags&Ks.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&mi(this);const i=e.store,s=this.propertyName,n=this.flags,r=i.get(s);if(n&Ks.Computing||~n&Ks.Dirty&&i.has(s))return r;this.flags|=Ks.Computing;const o=e.host;let l;n&Ks.AutoTracked?l=Wp(this.trackingTarget,this.metadata.get,o):(Foe(o,this),l=this.metadata.get.call(o)),this.flags|=Ks.DepTrackingInitialized,i.set(s,l,Ui.COMPUTED);const u=i.get(s);return u===r?this.flags&=~Ks.Dirty:t4e(this.commit,this),this.flags&=~Ks.Computing,u}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ks.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Ks.Overridden&&(this.flags|=Ks.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onCommitted()}}},s4e=class zoe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new zoe;return this._values.forEach((s,n)=>{e&&e.has(n)||i.set(n,Ue(s))}),i}get(e){return this._values.get(e)}originOf(){return Ui.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function HP(t,e,i){return t!==void 0}function jX(t,e,i,s){return t!==void 0&&(!(i==null&&t.flags&Ks.NonNullable)||(s.lifecycle,Hl.INITIALIZING,!1))}let n4e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Hl.INITIALIZING,this.store=new s4e,this.mutable=!0,this._origin=Ui.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const n=new GX(s,i[s]);this.propertiesByName.set(s,n)}this.metadata=i}initialize(){this.lifecycle=Hl.CONSTRUCTING}constructed(){this.lifecycle=Hl.CONSTRUCTED}destroy(){this.lifecycle=Hl.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Hl.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);this.mutable&&mi(i);const s=this.store;return s.has(e)?s.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const s=this.propertiesByName.get(e);if(s!==void 0&&s.flags&Ks.HasDefaultValue)return"defaults"}return b9(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(HP(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const s=this.propertiesByName.get(e);HP(s)&&this._internalSet(s,i)}getDependsInfo(e,i,s){const n=this.propertiesByName.get(i);if(!HP(n))return"";const r=new bM,o=Wp(r,()=>{var f;return(f=n.metadata.get)==null?void 0:f.call(e)});let l=`${s}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const u=r.accessed??new Set;if(u.size===0)return l;s+="  ";for(const f of u)f instanceof GX&&(l+=`${s}${f.propertyName}: undefined
`);return l}setAtOrigin(e,i,s){const n=this.propertiesByName.get(e);if(HP(n))return this._setAtOrigin(n,i,s)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ks.Overridden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ks.Overridden&&(i.flags&=~Ks.Overridden,i.notifyChange())}override(e,i){const s=this.propertiesByName.get(e);if(!jX(s,e,i,this))return;const n=s.metadata.cast;if(n){const r=this._cast(n,i),{valid:o,value:l}=r;if(Vk.release(r),!o)return;i=l}s.flags|=Ks.Overridden,this._internalSet(s,i)}set(e,i){const s=this.propertiesByName.get(e);if(!jX(s,e,i,this))return;const n=s.metadata.cast;if(n){const o=this._cast(n,i),{valid:l,value:u}=o;if(Vk.release(o),!l)return;i=u}const r=s.metadata.set;r?r.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(e){this._origin=Q0(e)}getDefaultOrigin(){return b9(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const s=this.lifecycle!==Hl.INITIALIZING?this._origin:Ui.DEFAULTS;this._setAtOrigin(e,i,s)}_setAtOrigin(e,i,s){const n=this.store,r=e.propertyName;n.has(r,s)&&xq(i,n.get(r))&&~e.flags&Ks.Overridden&&s===n.originOf(r)||(e.invalidate(),n.set(r,i,s),e.commit(),Loe(this.host,e))}_cast(e,i){const s=Vk.acquire();return s.valid=!0,s.value=i,e&&(s.value=e.call(this.host,i,s)),s}},r4e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Vk=new yC(r4e);function w9(t,e,i){if(t&&e)if(typeof e=="object")for(const s of Object.getOwnPropertyNames(e))w9(t,s,e[s]);else{if(e.includes(".")){const n=e.split("."),r=n.splice(-1,1)[0];return void w9($u(t,n),r,i)}const s=t.__accessor__;s!=null&&o4e(e,s),t[e]=i}}function o4e(t,e){if(ht("esri-unknown-property-errors")&&!a4e(t,e))throw new rt("set:unknown-property",l4e(t,e))}function a4e(t,e){return e.metadata[t]!=null}function l4e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let c4e;function u4e(){return c4e}var BX;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(BX||(BX={}));function h4e(t){t.length=0}let Wd=class{constructor(e=50,i=50){this._pool=new yC(Array,void 0,h4e,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Gk.acquire()}static release(e){return Gk.release(e)}static prune(){Gk.prune()}};const Gk=new Wd(100);let qoe=class extends yC{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const UP=[];function _2(t){UP.push(t),UP.length===1&&queueMicrotask(()=>{const e=UP.slice();UP.length=0;for(const i of e)i()})}let bS=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var T$;(function(t){const e=(r,o,l,u)=>{let f=o,y=o;const _=l>>>1,x=r[f-1];for(;y<=_;){y=f<<1,y<l&&u(r[y-1],r[y])<0&&++y;const S=r[y-1];if(u(S,x)<=0)break;r[f-1]=S,f=y}r[f-1]=x},i=(r,o)=>r<o?-1:r>o?1:0;function s(r,o,l,u){o===void 0&&(o=0),l===void 0&&(l=r.length),u===void 0&&(u=i);for(let y=l>>>1;y>o;y--)e(r,y,l,u);const f=o+1;for(let y=l-1;y>o;y--){const _=r[o];r[o]=r[y],r[y]=_,e(r,f,y,u)}}function*n(r,o,l,u){o===void 0&&(o=0),l===void 0&&(l=r.length),u===void 0&&(u=i);for(let y=l>>>1;y>o;y--)e(r,y,l,u),yield;const f=o+1;for(let y=l-1;y>o;y--){const _=r[o];r[o]=r[y],r[y]=_,e(r,f,y,u),yield}}t.sort=s,t.iterableSort=n})(T$||(T$={}));const HX=T$,d4e=1.5,f4e=1.1;let Fy=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new ioe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>UX(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let s=0;s<this._length;s++){const n=this.data[s];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const s=this.data.indexOf(e,i);return s!==-1&&s<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let s=0;s<i;s++)this.data[this._length++]=e[s]}fill(e,i){for(let s=0;s<i;s++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,UX(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=S$(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(S$(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,s){this.length=TPe(this.data,e,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const s=this.data[e];this.data[e]=this.data[i],this.data[i]=s}sort(e){HX.sort(this.data,0,this.length,e)}iterableSort(e){return HX.iterableSort(this.data,0,this.length,e)}some(e,i){for(let s=0;s<this.length;++s)if(e.call(i,this.data[s],s,this.data))return!0;return!1}find(e,i){const{data:s,length:n}=this;for(let r=0;r<n;++r)if(e.call(i,s[r]))return s[r]}filterInPlace(e,i){let s=0;for(let n=0;n<this._length;++n){const r=this.data[n];e.call(i,r,n,this.data)&&(this.data[n]=this.data[s],this.data[s]=r,s++)}if(this._deallocator)for(let n=s;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=s,this._shrink(),this}forAll(e,i){const{data:s,length:n}=this;for(let r=0;r<n;++r)e.call(i,s[r],r,s)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const s=new Array(this.length);for(let n=0;n<this.length;++n)s[n]=e.call(i,this.data[n],n,this.data);return s}reduce(e,i){let s=i;for(let n=0;n<this.length;++n)s=e(s,this.data[n],n,this.data);return s}has(e){const i=this.length,s=this.data;for(let n=0;n<i;++n)if(s[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function UX(t){t.data.length>d4e*t.length&&(t.data.length=Math.floor(t.length*f4e))}function p4e(t){return{setTimeout:(e,i)=>{const s=t.setTimeout(e,i);return ds(()=>t.clearTimeout(s))}}}const m4e=p4e(globalThis);function xM(t){return g4e(t)||Voe(t)}function g4e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function Voe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function zy(t,e,i){if(!xM(t))throw new TypeError("target is not a Evented or EventTarget object");return Voe(t)?y4e(t,e,i):t.on(e,i)}function y4e(t,e,i,s){if(Array.isArray(e)){const n=e.slice();for(const r of n)t.addEventListener(r,i,s);return ds(()=>{for(const r of n)t.removeEventListener(r,i,s)})}return t.addEventListener(e,i,s),ds(()=>t.removeEventListener(e,i,s))}function Goe(t,e,i){if(!xM(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const s=zy(t,e,n=>{s.remove(),i.call(t,n)});return s}function or(t="Aborted"){return new rt("AbortError",t)}function Ql(t,e="Aborted"){if(Rc(t))throw or(e)}function vC(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function Rc(t){const e=vC(t);return e!=null&&e.aborted}function Oh(t){if(cd(t))throw t}function YX(t){if(!cd(t))throw t}function Ul(t,e){const i=vC(t);if(i!=null){if(!i.aborted)return Goe(i,"abort",()=>e());e()}}function joe(t,e){const i=vC(t);if(i!=null)return Ql(i),Goe(i,"abort",()=>e(or()))}function _C(t,e){return vC(e)==null?t:new Promise((i,s)=>{let n=Ul(e,()=>s(or()));const r=()=>{n=Co(n)};t.then(r,r),t.then(i,s)})}function cd(t){return(t==null?void 0:t.name)==="AbortError"}async function Qh(t){try{return await t}catch(e){if(!cd(e))throw e;return}}async function Eq(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),s=i.map(o=>t[o]),n=await Eq(s),r={};return i.map((o,l)=>r[o]=n[l]),r}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(s,n)=>{const r=i[n];return r.status==="fulfilled"?{promise:s,value:r.value}:{promise:s,error:r.reason}}))}async function out(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function aut(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function v4e(t,e=void 0,i){const s=new AbortController;return Ul(i,()=>s.abort()),new Promise((n,r)=>{let o=setTimeout(()=>{o=0,n(e)},t);Ul(s,()=>{o&&(clearTimeout(o),r(or()))})})}function lut(t,e){const i=new AbortController,s=setTimeout(()=>i.abort(),e);return Ul(t,()=>{i.abort(),clearTimeout(s)}),{...t,signal:i.signal}}function Iv(t){return t&&typeof t.then=="function"}function I$(t){return Iv(t)?t:Promise.resolve(t)}function Mv(t,e=-1){let i,s,n,r,o=null;const l=(...u)=>{if(i){s=u,r&&r.reject(or()),r=Tc();const x=r.promise;if(o){const S=o;o=null,S.abort()}return x}if(n=r||Tc(),r=null,e>0){const x=new AbortController;i=I$(t(...u,x.signal));const S=i;v4e(e).then(()=>{i===S&&(r?x.abort():o=x)})}else i=1,i=I$(t(...u));const f=()=>{const x=s;s=n=i=o=null,x!=null&&l(...x)},y=i,_=n;return y.then(f,f),y.then(_.resolve,_.reject),_.promise};return l}function Tc(){let t,e;const i=new Promise((n,r)=>{t=n,e=r}),s=n=>{t(n)};return s.resolve=n=>t(n),s.reject=n=>e(n),s.timeout=(n,r)=>m4e.setTimeout(()=>s.reject(r),n),s.promise=i,s}async function XX(t){await Promise.resolve(),Ql(t)}function cut(t){return t}function uut(t){return 1e3*t}function hut(t){return t}function dut(t){return .001*t}let _4e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},b4e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},M$=0;const Nw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},A$=["prepare","preRender","render","postRender","update","finish"],D$=[],Jy=new Fy;let x4e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function w4e(){qy!=null&&(cancelAnimationFrame(qy),qy=requestAnimationFrame(Pq))}const S9={frameTasks:Jy,willDispatch:!1,clearFrameTasks:S4e,dispatch:Hoe,executeFrameTasks:E4e,reschedule:w4e};function Cq(t){const e=new b4e(t);return D$.push(e),S9.willDispatch||(S9.willDispatch=!0,_2(Hoe)),e}function gut(t){const e=new _4e(t);return Jy.push(e),qy==null&&(M$=performance.now(),qy=requestAnimationFrame(Pq)),new x4e(e)}let qy=null;function S4e(t=!1){Jy.forAll(e=>{e.removed=!0}),t&&Boe()}function Pq(){const t=performance.now();qy=null,qy=Jy.length>0?requestAnimationFrame(Pq):null,S9.executeFrameTasks(t)}function E4e(t){const e=t-M$;M$=t;const i=1e3/60,s=Math.max(0,e-i);Nw.time=t,Nw.frameDuration=i-s;for(let n=0;n<A$.length;n++){const r=performance.now(),o=A$[n];Jy.forAll(l=>{var u;l.paused||l.removed||(n===0&&l.ticks++,l.phases[o]&&(Nw.elapsedFrameTime=performance.now()-t,Nw.deltaTime=l.ticks===0?0:e,(u=l.phases[o])==null||u.call(l,Nw)))}),I4e[n].push(performance.now()-r)}Boe(),M4e.push(performance.now()-t)}const YP=new Fy;function Boe(){Jy.forAll(t=>{t.removed&&YP.push(t)}),Jy.removeUnorderedMany(YP.data,YP.length),YP.clear()}function Hoe(){for(;D$.length;){const t=D$.shift();t.isActive&&t.callback()}S9.willDispatch=!1}function C4e(t=1,e){const i=Tc(),s=()=>{Rc(e)?i.reject(or()):t===0?i():(--t,_2(()=>s()))};return s(),i.promise}function P4e(t){return C4e(1,t)}async function T4e(t){await P4e(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const I4e=A$.map(t=>new bS(t)),M4e=new bS("total");function A4e(t,e){for(const i of t.values())if(e(i))return!0;return!1}function E9(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function WX(t,e){return e!=null&&t.add(e),t}function Uoe(t,e){const i=new Set;return E9(i,t),E9(i,e),i}function Yoe(t,e){const i=new Set;for(const s of e)t.has(s)&&i.add(s);return i}function yut(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function vut(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function D4e(t,e){const i=new Set(t);for(const s of e)i.delete(s);return i}function _ut(t,e){return D4e(Uoe(t,e),Yoe(t,e))}function but(t){let e;for(e of t);return e}let k4e=0;function xS(){return++k4e}let wM=class extends bM{constructor(e){super(new N4e(e)),this._observer&&ZX.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&ZX.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},N4e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=$4e}};const ZX=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function $4e(){}let jb=!1;const C9=[];function Xoe(t,e){let i=new wM(r),s=null,n=!1;function r(){if(!i||n)return;if(jb)return void Zoe(r);const l=s;i.clear(),jb=!0,n=!0,s=Wp(i,t),n=!1,jb=!1,e(s,l),Koe()}function o(){i&&(i.destroy(),i=null,s=null)}return n=!0,s=Wp(i,t),n=!1,ds(o)}function Woe(t,e){let i=new wM(n),s=null;function n(){e(s,o)}function r(){i&&(i.destroy(),i=null),s=null}function o(){return i?(i.clear(),s=Wp(i,t),s):null}return o(),ds(r)}function Tq(t,e){let i=!1,s=!1;const n=!!(e!=null&&e.sync);let r=new wM(()=>{i||s||(s=!0,n?o():queueMicrotask(o))});function o(){s=!1,r&&!i&&(jb?Zoe(o):(r.clear(),jb=!0,i=!0,Wp(r,t),i=!1,jb=!1,Koe()))}function l(){r&&(r.destroy(),r=null)}return i=!0,Wp(r,t),i=!1,ds(l)}function Zoe(t){C9.includes(t)||C9.unshift(t)}function Koe(){for(;C9.length;)C9.pop()()}var wS;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(wS||(wS={}));let rE=class{constructor(){this.uid=xS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,s,n,r){return this.pool.acquire(wS.Untracked,e,i,s,n,r,xq)}static acquireTracked(e,i,s,n){return this.pool.acquire(wS.Tracked,e,i,s,null,null,n)}notify(e,i){this.type===wS.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,s,n,r,o,l){this.uid=xS(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=s,this.getValue=n,this.target=r,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=xS(),this.removed=!0}};rE.pool=new qoe(rE);const xT=new Wd,Bp=new Set;let P9;function T9(t){Bp.delete(t),Bp.add(t),P9||(P9=Cq(L4e))}function O4e(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function R4e(t){for(const e of Bp.values())e.target===t&&(e.removed=!0)}function L4e(){let t=10;for(;P9&&t--;){P9=null;const e=F4e(),i=xT.acquire();for(const s of e){const n=s.uid;O4e(s),n===s.uid&&s.removed&&i.push(s)}for(const s of Bp)s.removed&&(i.push(s),Bp.delete(s));for(const s of i)rE.pool.release(s);xT.release(i),xT.release(e),k$.forEach(s=>s())}}function F4e(){const t=xT.acquire();t.length=Bp.size;let e=0;for(const i of Bp)t[e]=i,++e;return Bp.clear(),t}const k$=new Set;function z4e(t){return k$.add(t),ds(()=>k$.delete(t))}function q4e(t,e,i){let s=Doe(t,e,i,(n,r,o)=>{let l,u,f=Woe(()=>mC(n,r),(y,_)=>{var x;((x=n.__accessor__)==null?void 0:x.lifecycle)===Hl.DESTROYED||l&&l.uid!==u?s.remove():(l||(l=rE.acquireUntracked(y,o,_,n,r),u=l.uid),T9(l))});return ds(()=>{f.remove(),l&&(l.uid!==u||l.removed||(l.removed=!0,T9(l)),l=null),s=f=null})});return s}function V4e(t,e,i){const s=Doe(t,e,i,(n,r,o)=>{let l=!1;return Xoe(()=>mC(n,r),(u,f)=>{n.__accessor__.lifecycle!==Hl.DESTROYED?l||(l=!0,xq(f,u)||o.call(n,u,f,r,n),l=!1):s.remove()})});return s}function G4e(t,e,i,s=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Hl.DESTROYED?s?V4e(t,e,i):q4e(t,e,i):ds()}function j4e(t,e,i){let s,n,r=Woe(t,(o,l)=>{s&&s.uid!==n?r.remove():(s||(s=rE.acquireTracked(o,e,l,i),n=s.uid),T9(s))});return ds(()=>{r.remove(),s&&(s.uid!==n||s.removed||(s.removed=!0,T9(s)),s=null),r=null})}function B4e(t,e,i){let s=!1;return Xoe(t,(n,r)=>{s||(s=!0,i(r,n)||e(n,r),s=!1)})}function H4e(t,e,i=!1,s=boe){return i?B4e(t,e,s):j4e(t,e,s)}function KX(t){return A4e(Bp,e=>e.oldValue===t)}function Eut(t,e){for(const i of t.values())if(e(i))return!0;return!1}function Cut(t,e){for(const i of t.values())if(e(i))return i;return null}function Iq(t,e,i){const s=t.get(e);if(s!==void 0)return s;const n=i();return t.set(e,n),n}function Put(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Bb=()=>zt.getLogger("esri.core.accessorSupport.ensureTypes");function U4e(t){return t==null?t:new Date(t)}function Y4e(t){return t==null?t:!!t}function bC(t){return t==null?t:t.toString()}function sx(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function Mq(t){return t==null?t:Math.round(parseFloat(t))}function X4e(t){return null}function W4e(t,e){return i=>{let s=t(i);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function Joe(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function I9(t,e){return e!=null&&t&&!(e instanceof t)}function Qoe(t){return t&&"isCollection"in t}function JX(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Z4e(t,e){if(!(e!=null&&e.constructor)||!Qoe(e.constructor))return N$(t,e)?e:new t(e);const i=JX(t.prototype.itemType),s=JX(e.constructor.prototype.itemType);return i?s?i===s?e:i.prototype.isPrototypeOf(s.prototype)?new t(e):(N$(t,e),e):new t(e):e}function N$(t,e){return!!Joe(e)&&(Bb().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+SM(t)+"'"),!0)}function xC(t,e){return e==null?e:Qoe(t)?Z4e(t,e):I9(t,e)?N$(t,e)?e:new t(e):e}function SM(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const K4e=new WeakMap;function J4e(t){switch(t){case Number:return e=>sx(e);case wn:return Mq;case Boolean:return Y4e;case String:return bC;case Date:return U4e;case EM:return X4e;default:return Iq(K4e,t,()=>xC.bind(null,t))}}function Ko(t,e){const i=J4e(t);return arguments.length===1?i:i(e)}function oE(t,e,i){return arguments.length===1?oE.bind(null,t):e&&(Array.isArray(e)?e.map(s=>t(s,i)):[t(e,i)])}function Q4e(t,e){return arguments.length===1?oE(i=>Ko(t,i)):oE(i=>Ko(t,i),e)}function eae(t,e,i){return e!==0&&Array.isArray(i)?i.map(s=>eae(t,e-1,s)):t(i)}function M9(t,e,i){if(arguments.length===2)return r=>M9(t,e,r);if(!i)return i;i=eae(t,e,i);let s=e,n=i;for(;s>0&&Array.isArray(n);)s--,n=n[0];if(n!==void 0)for(let r=0;r<s;r++)i=[i];return i}function eTe(t,e,i){return arguments.length===2?M9(s=>Ko(t,s),e):M9(s=>Ko(t,s),e,i)}function tae(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function $$(t,e){if(arguments.length===2)return $$(t).call(null,e);const i=new Set,s=t.filter(l=>typeof l!="function"),n=t.filter(l=>typeof l=="function");for(const l of t)typeof l!="string"&&typeof l!="number"||i.add(l);let r=null,o=null;return(l,u)=>{if(l==null)return l;const f=typeof l,y=f==="string"||f==="number";return y&&(i.has(l)||n.some(_=>f==="string"&&_===String||f==="number"&&_===Number))||f==="object"&&n.some(_=>!I9(l,_))?l:(y&&s.length?(r||(r=s.map(_=>typeof _=="string"?`'${_}'`:`${_}`).join(", ")),Bb().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${r}`)):typeof l=="object"&&n.length?(o||(o=n.map(_=>SM(_)).join(", ")),Bb().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):Bb().error("Accessor#set",`'${l}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function Yu(t,e){if(arguments.length===2)return Yu(t).call(null,e);const i={},s=[],n=[];for(const u in t.typeMap){const f=t.typeMap[u];i[u]=Ko(f),s.push(SM(f)),n.push(u)}const r=()=>`'${s.join("', '")}'`,o=()=>`'${n.join("', '")}'`,l=typeof t.key=="string"?u=>u[t.key]:t.key;return u=>{if(t.base&&!I9(t.base,u)||u==null)return u;const f=l(u)||t.defaultKeyValue,y=i[f];if(!y)return Bb().error("Accessor#set",`Invalid property value, value needs to be one of ${r()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!I9(t.typeMap[f],u))return u;if(typeof t.key=="string"&&!Joe(u)){const _={};for(const x in u)x!==t.key&&(_[x]=u[x]);return y(_)}return y(u)}}let wn=class{},EM=class{};const Mut={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function tTe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function iae(t){switch(t.type){case"native":return Ko(t.value);case"array":return oE(iae(t.value));case"one-of":return iTe(t);default:return null}}function iTe(t){let e=null;return(i,s)=>R$(i,t)?i:(e==null&&(e=O$(t)),Bb().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),s&&(s.valid=!1),null)}function O$(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case wn:return"integer";case Date:return"date";case EM:return"null";default:return SM(t.value)}case"array":return`array of ${O$(t.value)}`;case"one-of":{const e=t.values.map(i=>O$(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function R$(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case wn:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case EM:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!R$(i,e.value));case"one-of":return e.values.some(i=>R$(t,i))}}function N(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(e,i),n=_M(e,i);s&&(s.get||s.set?(n.get=s.get||n.get,n.set=s.set||n.set):"value"in s&&("value"in t&&zt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=s.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const r=t.aliasOf;if(r){const u=typeof r=="string"?r:r.source,f=typeof r=="string"?null:r.overridable===!0;let y;n.dependsOn=[u],n.get=function(){let _=$u(this,u);if(typeof _=="function"){y||(y=u.split(".").slice(0,-1).join("."));const x=$u(this,y);x&&(_=_.bind(x))}return _},n.readOnly||(n.set=f?function(_){this._override(i,_)}:function(_){w9(this,u,_)})}const o=t.type,l=t.types;if(!n.cast){let u;o?u=sTe(o):l&&(u=Array.isArray(l)?oE(Yu(l[0])):Yu(l)),t.cast=nTe(t.cast,u)}YPe(n,t),t.range&&(n.cast=W4e(n.cast,t.range))}}function sae(t,e,i){const s=_M(t,i);s.json||(s.json={});let n=s.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function sTe(t){let e=0,i=t;if(tTe(t))return iae(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const s=i;if(tae(s))return e===0?$$(s):M9($$(s),e);if(e===1)return Q4e(s);if(e>1)return eTe(s,e);const n=t;return n.from?n.from:Ko(n)}function nTe(t,e){if(t||e)return t?e?(i,s)=>e(t(i,s),s):t:e}function rTe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(e[s]){const n=e[s];i[s].forEach(r=>{e[r]=n}),delete e[s]}}}let ed=class extends Eoe{constructor(e,i,s){super(e,i,s)}};ed.prototype.type="warning";function nae(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const L$=()=>zt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function QX(t,e,i){var s,n;t&&(!i&&!e.read||(s=e.read)!=null&&s.reader||((n=e.read)==null?void 0:n.enabled)===!1||lTe(t)&&Ja("read.reader",nx(t),e))}function nx(t){var i,s;const e=t.ndimArray??0;if(e>1)return aTe(t);if(e===1)return eW(t);if("type"in t&&oae(t.type)){const n=(s=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:s.Type,r=eW(typeof n=="function"?{type:n}:{types:n});return(o,l,u)=>{const f=r(o,l,u);return f&&new t.type(f)}}return Aq(t)}function Aq(t){return"type"in t?oTe(t.type):cTe(t.types)}function oTe(t){return t.prototype.read?(e,i,s)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void L$().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const r=new t;return r.read(e,s),r}:t.fromJSON}function rae(t,e,i,s){return s!==0&&Array.isArray(e)?e.map(n=>rae(t,n,i,s-1)):t(e,void 0,i)}function aTe(t){const e=Aq(t),i=rae.bind(null,e),s=t.ndimArray??0;return(n,r,o)=>{if(n==null)return n;n=i(n,o,s);let l=s,u=n;for(;l>0&&Array.isArray(u);)l--,u=u[0];if(u!==void 0)for(let f=0;f<l;f++)n=[n];return n}}function eW(t){const e=Aq(t);return(i,s,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const l of i){const u=e(l,void 0,n);u!==void 0&&o.push(u)}return o}const r=e(i,void 0,n);return r!==void 0?[r]:void 0}}function oae(t){if(!nae(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?Dq(e.Type):aae(e.Type))}function lTe(t){return"types"in t?aae(t.types):Dq(t.type)}function Dq(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||oae(t))}function aae(t){for(const e in t.typeMap)if(!Dq(t.typeMap[e]))return!1;return!0}function cTe(t){let e=null;const i=t.errorContext??"type",s=t.validate;return(n,r,o)=>{if(n==null)return n;const l=typeof n;if(l!=="object")return void L$().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);e||(e=uTe(t));const u=t.key;if(typeof u!="string")return;const f=n[u],y=f?e[f]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!y){const x=`Type '${f||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new ed(`${i}:unsupported`,x,{definition:n,context:o})),void L$().error(x)}const _=new y;return _.read(n,o),s?s(_):_}}function uTe(t){var i,s;const e={};for(const n in t.typeMap){const r=t.typeMap[n],o=gC(r.prototype);if(typeof t.key=="function")continue;const l=o[t.key];if(!l)continue;if((i=l.json)!=null&&i.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){e[l.json.type[0]]=r;continue}const u=(s=l.json)==null?void 0:s.write;if(!(u!=null&&u.writer)){e[n]=r;continue}const f=u.target,y=typeof f=="string"?f:t.key,_={};u.writer(n,_,y),_[y]&&(e[_[y]]=r)}return e}function hTe(t){if(t.json||(t.json={}),iW(t.json),sW(t.json),tW(t.json),t.json.origins)for(const e in t.json.origins)iW(t.json.origins[e]),sW(t.json.origins[e]),tW(t.json.origins[e]);return!0}function tW(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function iW(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function sW(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function nW(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&nae(t.type))?e.write.writer=pTe:i>1?e.write.writer=mTe(i):e.types?Array.isArray(e.types)?e.write.writer=fTe(e.types[0]):e.write.writer=dTe(e.types):e.write.writer=aE}function dTe(t){return(e,i,s,n)=>e?lae(e,t,n)?aE(e,i,s,n):void 0:aE(e,i,s,n)}function lae(t,e,i){for(const s in e.typeMap)if(t instanceof e.typeMap[s])return!0;if(i!=null&&i.messages){const s=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new rt(`${s}:unsupported`,n,{definition:t,context:i})),zt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function fTe(t){return(e,i,s,n)=>!e||!Array.isArray(e)?aE(e,i,s,n):aE(e.filter(r=>lae(r,t,n)),i,s,n)}function aE(t,e,i,s){Ja(i,A9(t,s),e)}function A9(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?D9(t):t}function D9(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function pTe(t,e,i,s){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(r=>A9(r,s)),typeof n.toArray=="function"&&(n=n.toArray())):n=[A9(t,s)],Ja(i,n,e)}function cae(t,e,i){return i!==0&&Array.isArray(t)?t.map(s=>cae(s,e,i-1)):A9(t,e)}function mTe(t){return(e,i,s,n)=>{let r;if(e===null)r=null;else{r=cae(e,n,t);let o=t,l=r;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let u=0;u<o;u++)r=[r]}Ja(s,r,i)}}function gTe(t,e){return kq(t,"any",e==null?void 0:e.origin)}function F$(t,e){return kq(t,"read",e==null?void 0:e.origin)}function uae(t,e){return kq(t,"write",e==null?void 0:e.origin)}function kq(t,e,i){let s=t==null?void 0:t.json;if(s!=null&&s.origins&&i){let n;n=i==="link-chart"?s.origins[i]&&(e==="any"||e in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],n&&(e==="any"||e in n)&&(s=n)}return s}function yTe(t){var i;const e=vTe(t);if(t.json.origins)for(const s in t.json.origins){const n=t.json.origins[s],r=n.types?_Te(n):e;QX(r,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),nW(r,n)}QX(e,t.json,!0),nW(e,t.json)}function vTe(t){return t.json.types?z$(t.json):t.type?hae(t):z$(t)}function _Te(t){return t.type?hae(t):z$(t)}function hae(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!tae(i);)i=i[0],e++;return{type:i,ndimArray:e}}function z$(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function bTe(t){hTe(t)&&(rTe(t),yTe(t))}const jk=new Set,Bk=new Set;function ke(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,wTe(e);const i=[],s=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!jk.has(n.initialize)&&(jk.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!Bk.has(n.destroy)&&(Bk.add(n.destroy),s.push(n.destroy)),n=Object.getPrototypeOf(n);jk.clear(),Bk.clear();const r=class extends e{constructor(...l){if(super(...l),this.constructor===r&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=i.length-1;u>=0;u--)i[u].call(this)}}),s.length){let u=!1;const f=this[Ioe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0,f.call(this);for(let y=0;y<s.length;y++)s[y].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};r.__accessorMetadata__=gC(e.prototype),r.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(r,"name",{value:o,configurable:!0}),r}}function xTe(t,e){return e.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s===void 0)return;i.mutable&&mi(s);const n=i.store;return n.has(t)?n.get(t):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s!==void 0)return s.getComputed(i)}}function wTe(t){const e=t.prototype,i=gC(e),s={};for(const n of Object.getOwnPropertyNames(i)){const r=i[n];bTe(r),s[n]={enumerable:!0,configurable:!0,get:xTe(n,r),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&r.readOnly?rW("read-only",n):l.lifecycle===Hl.CONSTRUCTED&&r.constructOnly?rW("construct-only",n):void l.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,s)}const rW=(t,e)=>{zt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var dae,fae;function STe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Pd=Symbol("Accessor-Handles"),q$=Symbol("Accessor-Initialized");let Ei=class wT{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const r=this;class o extends r{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}gC(o.prototype);for(const l in e){const u=e[l];o.prototype[l]=typeof u=="function"?function(...f){const y=this.inherited;let _;this.inherited=function(...x){if(r.prototype[l])return r.prototype[l].apply(this,x)};try{_=u.apply(this,f)}catch(x){throw this.inherited=y,x}return this.inherited=y,_}:e[l]}for(const l in i){const u=STe(i[l]);N(u)(o.prototype,l)}return ke(s)(o)}static freeze(e){return e instanceof wT?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof wT?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var s;if(this[dae]=null,this[fae]=!1,this.constructor===wT)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new n4e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((s=this.normalizeCtorArgs)==null?void 0:s.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[q$]=!0}initialize(){}[Ioe](){this[Pd]=no(this[Pd])}destroy(){var e;this.destroyed||(R4e(this),this.__accessor__.destroy(),(e=u4e())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[q$]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===Hl.DESTROYED||!1}commitProperty(e){$u(this,e)}get(e){return Poe(zt.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),$u(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return w9(this,e,i),this}watch(e,i,s){return G4e(this,e,i,s)}addHandles(e,i){if(this.destroyed){const s=Array.isArray(e)?e:[e];for(const n of s)n.remove();return}(this[Pd]??(this[Pd]=new vM)).add(e,i)}removeHandles(e){var i;(i=this[Pd])==null||i.remove(e)}removeAllHandles(){var e;(e=this[Pd])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[Pd])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[Pd])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};dae=Pd,fae=q$;const ETe=Object.freeze(Object.defineProperty({__proto__:null,default:Ei},Symbol.toStringTag,{value:"Module"}));let CTe=class pae{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new pae;return this._values.forEach((s,n)=>{e&&e.has(n)||i.set(n,Ue(s.value),s.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const s=this._values.get(e);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Ui.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(s=>{var n;return((n=this._values.get(s))==null?void 0:n.origin)===e})}set(e,i,s){if((s=this._normalizeOrigin(s))===Ui.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>s)return}this._values.set(e,new PTe(i,s))}delete(e,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(e))==null?void 0:s.origin)!==i||this._values.delete(e)}has(e,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(e))==null?void 0:s.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},s)=>e(i,s))}_normalizeOrigin(e){if(e!=null)return e===Ui.DEFAULTS?e:Ui.USER}},PTe=class{constructor(e,i){this.value=e,this.origin=i}};function mae(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Ui.DEFAULTS)});const s=t.metadata;Object.keys(s).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Ui.DEFAULTS)})}function TTe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const s=t.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&qX(s,i))return!0}else for(const n of s)if(n===e||n.includes(".")&&n.indexOf(e)===0&&qX(n,i))return!0;return!1}function ITe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function MTe(t,e,i,s,n){let r=F$(e[i],n);ITe(r)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))r=F$(e[o],n),TTe(r,i,s)&&(t[o]=!0)}function ATe(t,e,i,s){const n=i.metadata,r=gTe(n[e],s),o=r==null?void 0:r.default;if(o===void 0)return;const l=typeof o=="function"?o.call(t,e,s):o;l!==void 0&&i.set(e,l)}const gae={origin:"service"};function yae(t,e,i=gae){if(!e||typeof e!="object")return;const s=Sl(t),n=s.metadata,r={};for(const o of Object.getOwnPropertyNames(e))MTe(r,n,o,e,i);s.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(r)){const l=F$(n[o],i).read,u=l==null?void 0:l.source;let f;f=u&&typeof u=="string"?mC(e,u):e[o],l!=null&&l.reader&&(f=l.reader.call(t,f,e,i)),f!==void 0&&s.set(o,f)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))r[o]||ATe(t,o,s,i)}s.setDefaultOrigin("user")}function DTe(t,e,i,s=gae){var r;const n={...s,messages:[]};i(n),(r=n.messages)==null||r.forEach(o=>{o.type!=="warning"||t.loaded?s!=null&&s.messages&&s.messages.push(o):t.loadWarnings.push(o)})}function kTe(t,e,i,s,n){var o,l;const r={};return(l=(o=e.write)==null?void 0:o.writer)==null||l.call(t,s,r,i,n),r}function vae(t,e,i,s,n,r){if(!(s!=null&&s.write))return!1;const o=$u(t,i);if(!n&&s.write.overridePolicy){const l=s.write.overridePolicy.call(t,o,i,r??void 0);l!==void 0&&(n=l)}if(n||(n=s.write),!n||n.enabled===!1||n.layerContainerTypes&&(r!=null&&r.layerContainerType)&&!n.layerContainerTypes.includes(r.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const l=new rt("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return l&&(r!=null&&r.messages)?r.messages.push(l):l&&!r&&zt.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Ui.DEFAULTS)&&NTe(t,i,r,s,o)||!n.ignoreOrigin&&(r!=null&&r.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Q0(r.origin))}function NTe(t,e,i,s,n){const r=s.default;if(r===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(n);if(typeof r=="function"){if(Array.isArray(n)){const o=r.call(t,e,i??void 0);return ff(o,n)}return!1}return r===n}function $Te(t,e,i,s){const n=Sl(t),r=n.metadata,o=uae(r[e],s);return!!o&&vae(t,n,e,o,i,s)}function _ae(t,e,i){var r,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return vT(e,t.toJSON(i));const s=Sl(t),n=s.metadata;for(const l in n){const u=uae(n[l],i);if(!vae(t,s,l,u,void 0,i))continue;const f=$u(t,l),y=kTe(t,u,u.write&&typeof u.write.target=="string"?u.write.target:l,f,i);Object.keys(y).length>0&&(e=vT(e,y),(o=(r=i==null?void 0:i.resources)==null?void 0:r.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>vT(e,y,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:l,oldOrigin:e4e(s.store.originOf(l)),newOrigin:i.origin}))}return e}const Nq=t=>{let e=class extends t{constructor(...i){super(...i);const s=Sl(this),n=s.store,r=new CTe;s.store=r,mae(s,n,r)}read(i,s){yae(this,i,s)}write(i,s){return _ae(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return OTe.call(this,i,s)}};return e=I([ke("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function OTe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function k9(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let wt=class extends Nq(Ei){};wt=I([ke("esri.core.JSONSupport")],wt);const RTe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,LTe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function oW(t){const e=t==null?void 0:t.match(RTe);if(!e)return null;const[,i,s,n]=e;if(!i)return null;let r=null,o=null,l=null;const{devext:u,qaext:f,www:y}=LTe;if(s)if(r=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=u);break;case"qa":({customBaseUrl:o,portalHostname:l}=f);break;default:return null}else({customBaseUrl:o,portalHostname:l}=y);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=u);break;case"qaext":({customBaseUrl:o,portalHostname:l}=f);break;case"www":({customBaseUrl:o,portalHostname:l}=y);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:r}}function bae(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function N9(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,s=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):s.test(t)&&(t=t.replace(s,"https://qaext.arcgis.com")),t}function FTe(t){const e=atob(t),i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i.buffer}function zTe(t){const e=new Uint8Array(t);let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return btoa(i)}const qTe=()=>zt.getLogger("esri.core.urlUtils"),rx=Gs.request,aW="esri/config: esriConfig.request.proxyUrl is not set.",xae=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,wae=/^\s*http:/i,VTe=/^\s*https:/i,GTe=/^\s*file:/i,jTe=/:\d+$/,BTe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,HTe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),UTe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Yl=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(HTe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(UTe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const XP={},YTe=new Yl(Gs.applicationUrl);let Ua=YTe;const XTe=WTe();let $q=XTe;const Oq=()=>Ua,$ut=()=>$q;function WTe(){const t=Ua.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Ua.scheme}://${Ua.host}${Ua.port!=null?`:${Ua.port}`:""}`}${e}`}function vl(t){if(!t)return null;const e={path:null,query:null},i=new Yl(t),s=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,s),e.query=Ty(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function Ty(t){const e=t.split("&"),i={};for(const s of e){if(!s)continue;const n=s.indexOf("=");let r,o;n<0?(r=decodeURIComponent(s),o=""):(r=decodeURIComponent(s.slice(0,n)),o=decodeURIComponent(s.slice(n+1)));let l=i[r];typeof l=="string"&&(l=i[r]=[l]),Array.isArray(l)?l.push(o):i[r]=o}return i}function Qy(t,e){return t?Object.keys(t).map(i=>{const s=t[i];if(s==null)return"";const n=encodeURIComponent(i)+"=";return Array.isArray(s)?s.map(r=>k9(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)).join("&"):k9(s)?n+encodeURIComponent(JSON.stringify(s)):n+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function Sae(t=!1){let e,i=rx.proxyUrl;if(typeof t=="string"){e=tIe(t);const s=wC(t);s&&(i=s.proxyUrl)}else e=!!t;if(!i)throw qTe().warn(aW),new rt("urlUtils:proxy-not-set",aW);return e&&G$()&&(i=qq(i)),vl(i)}function Out(t,e=!1){const i=wC(t);let s,n;if(i){const r=Rq(i.proxyUrl);s=r.path,n=r.query?Ty(r.query):null}else if(e){const r=Sae(t);s=r.path,n=r.query}if(s){const r=vl(t);t=s+"?"+r.path;const o=Qy({...n,...r.query});o&&(t=`${t}?${o}`)}return t}const $w={path:"",query:""};function Rq(t){const e=t.indexOf("?");return e!==-1?($w.path=t.slice(0,e),$w.query=t.slice(e+1)):($w.path=t,$w.query=null),$w}function Eae(t){return t=(t=O9(t=aIe(t=Rq(t).path),!0)).toLowerCase()}function ZTe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Eae(t.urlPrefix)},i=rx.proxyRules,s=e.urlPrefix;let n=i.length;for(let r=0;r<i.length;r++){const o=i[r].urlPrefix;if(s.indexOf(o)===0){if(s.length===o.length)return-1;n=r;break}o.indexOf(s)===0&&(n=r+1)}return i.splice(n,0,e),n}function wC(t){const e=rx.proxyRules,i=Eae(t);for(let s=0;s<e.length;s++)if(i.indexOf(e[s].urlPrefix)===0)return e[s]}function KTe(t,e){if(!t||!e)return!1;t=$9(t),e=$9(e);const i=oW(t),s=oW(e);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&Vl(t,e,!0)}function Cae(t,e){return t=$9(t),e=$9(e),O9(t)===O9(e)}function $9(t){const e=(t=Vu(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function V$(t,e=rx.interceptors){const i=s=>s==null||s instanceof RegExp&&s.test(t)||typeof s=="string"&&t.startsWith(s);if(e){for(const s of e)if(Array.isArray(s.urls)){if(s.urls.some(i))return s}else if(i(s.urls))return s}return null}function Vl(t,e,i=!1){if(!t||!e)return!1;const s=B$(t),n=B$(e);return!(!i&&s.scheme!==n.scheme)&&s.host!=null&&n.host!=null&&s.host.toLowerCase()===n.host.toLowerCase()&&s.port===n.port}function Lq(t){if(typeof t=="string"){if(!Dc(t))return!0;t=B$(t)}if(Vl(t,Ua))return!0;const e=rx.trustedServers||[];for(let i=0;i<e.length;i++){const s=JTe(e[i]);for(let n=0;n<s.length;n++)if(Vl(t,s[n]))return!0}return!1}function JTe(t){return XP[t]||(zq(t)||Fg(t)?XP[t]=[new Yl(ml(t))]:XP[t]=[new Yl(`http://${t}`),new Yl(`https://${t}`)]),XP[t]}function ml(t,e=$q,i){return Fg(t)?i!=null&&i.preserveProtocolRelative?t:Ua.scheme==="http"&&Ua.authority===Gu(t).slice(2)?`http:${t}`:`https:${t}`:zq(t)?t:b2(t[0]==="/"?rIe(e):e,t)}function Fq(t,e=$q,i){if(t==null||!Dc(t))return t;const s=Vu(t),n=s.toLowerCase(),r=Vu(e).toLowerCase().replace(/\/+$/,""),o=i?Vu(i).toLowerCase().replace(/\/+$/,""):null;if(o&&r.indexOf(o)!==0)return t;const l=(_,x,S)=>(S=_.indexOf(x,S))===-1?_.length:S;let u=l(n,"/",n.indexOf("//")+2),f=-1;for(;n.slice(0,u+1)===r.slice(0,u)+"/"&&(f=u+1,u!==n.length);)u=l(n,"/",u+1);if(f===-1||o&&f<o.length)return t;t=s.slice(f);const y=r.slice(f-1).replaceAll(/[^/]+/g,"").length;if(y>0)for(let _=0;_<y;_++)t=`../${t}`;else t=`./${t}`;return t}function Vu(t){return t=uIe(t=cIe(t=lIe(t=ml(t=t.trim()))))}function b2(...t){const e=t.filter(yl);if(!(e!=null&&e.length))return;const i=[];if(Dc(e[0])){const n=e[0],r=n.indexOf("//");r!==-1&&(i.push(n.slice(0,r+1)),sIe(e[0])&&(i[0]+="/"),e[0]=n.slice(r+2))}else e[0][0]==="/"&&i.push("");const s=e.reduce((n,r)=>r?n.concat(r.split("/")):n,[]);for(let n=0;n<s.length;n++){const r=s[n];r===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!r&&n===s.length-1||r&&(r!=="."||i.length===0))&&i.push(r)}return i.join("/")}function Gu(t,e=!1){if(t==null||CM(t)||Av(t))return null;let i=t.indexOf("://");if(i===-1&&Fg(t))i=2;else{if(i===-1)return null;i+=3}const s=t.indexOf("/",i);return s!==-1&&(t=t.slice(0,s)),e&&(t=O9(t,!0)),t}function Dc(t){return Fg(t)||zq(t)}function CM(t){return t!=null&&t.slice(0,5)==="blob:"}function Av(t){return t!=null&&t.slice(0,5)==="data:"}function QTe(t){const e=lE(t);return e!=null&&e.isBase64?FTe(e.data):null}function Hk(t){return zTe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const eIe=/^data:(.*?)(;base64)?,(.*)$/;function lE(t){const e=t.match(eIe);if(!e)return null;const[,i,s,n]=e;return{mediaType:i,isBase64:!!s,data:n}}function Pae(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function Rut(t){return(await fetch(t)).blob()}function Lut(t){const e=QTe(t);if(!e)return null;const i=lE(t);return new Blob([e],{type:i.mediaType})}function Fg(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function zq(t){return t!=null&&xae.test(t)}function tIe(t){return t!=null&&VTe.test(t)||Ua.scheme==="https"&&Fg(t)}function iIe(t){return t!=null&&wae.test(t)||Ua.scheme==="http"&&Fg(t)}function sIe(t){return t!=null&&GTe.test(t)}function qq(t){return Fg(t)?`https:${t}`:t.replace(wae,"https:")}function nIe(){return Ua.scheme==="http"}function G$(){return Ua.scheme==="https"}function O9(t,e=!1){return Fg(t)?t.slice(2):(t=t.replace(xae,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function rIe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function oIe(t){let e=0;if(Dc(t)){const s=t.indexOf("//");s!==-1&&(e=s+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function Fut(t,e){if(!t)return"";const i=vl(t).path.replace(/\/+$/,""),s=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return s;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return s.replace(n,"")}function aIe(t){return t.endsWith("/")?t:`${t}/`}function Tae(t){return t.replace(/\/+$/,"")}function lIe(t){if(/^https?:\/\//i.test(t)){const e=Rq(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function cIe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function uIe(t){const e=rx.httpsDomains;if(!iIe(t))return t;const i=t.indexOf("/",7);let s;if(s=i===-1?t:t.slice(0,i),s=s.toLowerCase().slice(7),jTe.test(s)){if(!s.endsWith(":80"))return t;s=s.slice(0,-3),t=t.replace(":80","")}return nIe()&&s===Ua.authority&&!BTe.test(t)||(G$()&&s===Ua.authority||e&&e.some(n=>s===n||s.endsWith(`.${n}`))||G$()&&!wC(t))&&(t=qq(t)),t}function j$(t,e,i){if(!(e&&i&&t&&Dc(t)))return t;const s=t.indexOf("//"),n=t.indexOf("/",s+2),r=t.indexOf(":",s+2),o=Math.min(n<0?t.length:n,r<0?t.length:r);return t.slice(s+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,s+2)}${i}${t.slice(o)}`}function B$(t){return typeof t=="string"?new Yl(ml(t)):(t.scheme||(t.scheme=Ua.scheme),t)}function zut(t){return dIe.test(t)}function Iae(t,e){const i=vl(t),s=Object.keys(i.query||{});return s.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function hIe(t,e,i){const s=vl(t),n=s.query||{};return n[e]=String(i),`${s.path}?${Qy(n)}`}function ST(t,e){if(!e)return t;const i=vl(t),s=i.query||{};for(const[r,o]of Object.entries(e))o!=null&&(s[r]=o);const n=Qy(s);return n?`${i.path}?${n}`:i.path}function qut(t){if(t==null)return null;const e=t.match(Mae);return e?e[2]:null}function lW(t){if(t==null)return null;const e=t.match(Mae);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function Vut(t){return typeof t=="string"?lE(t)??{data:t}:new Promise((e,i)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(lE(s.result)),s.onerror=n=>i(n)})}const Mae=/([^.]*)\.([^/]*)$/,dIe=/(^data:image\/svg|\.svg$)/i,Aae="20241122",Dae="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const fIe="4.31";let Li,Vq=fIe;Vq="4.31.6";function pIe(t){Li=t}function Gut(t){const e=Li==null?void 0:Li.findCredential(t);return e!=null&&e.token?hIe(t,"token",e.token):t}ht("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ht("host-webworker");const mIe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function gIe(t){const e=Gu(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!mIe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function kae(t,e){return!(!Gs.apiKey||!gIe(t))}function yIe(t,e,i=!1,s){return new Promise((n,r)=>{if(Rc(s))return void r(cW());let o=()=>{f(),r(new Error(`Unable to load ${e}`))},l=()=>{const y=t;f(),n(y)},u=()=>{if(!t)return;const y=t;f(),y.src="",r(cW())};const f=()=>{ht("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",l)),o=null,l=null,t=null,s!=null&&s.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(e)};s!=null&&s.addEventListener("abort",u),ht("esri-image-decode")?t.decode().then(l,o):(t.addEventListener("error",o),t.addEventListener("load",l))})}function cW(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Nae="Timeout exceeded";function vIe(){return new Error(Nae)}function jut(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Nae}function _Ie(t){Gs.request.crossOriginNoCorsDomains||(Gs.request.crossOriginNoCorsDomains={});const e=Gs.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Gu(i)??""]=0:(e[Gu("http://"+i)??""]=0,e[Gu("https://"+i)??""]=0)}function bIe(t){const e=Gs.request.crossOriginNoCorsDomains;if(e){let i=Gu(t);if(i)return i=i.toLowerCase(),!Vl(i,Oq())&&e[i]<Date.now()-36e5}return!1}async function xIe(t){var n;const e=vl(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Gs.request.crossOriginNoCorsDomains,s=Gu(t);i&&s&&(i[s.toLowerCase()]=Date.now())}async function Qs(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=Ty(e.query.toString().replaceAll("+"," ")));const i=Av(t),s=CM(t);s||i||(t=Vu(t));const n={url:t,requestOptions:{...e}},r=S=>({data:S,getAllHeaders:x2,getHeader:x2,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=V$(t,Mu.internalInterceptors);if(o){const S=await hW(o,n);if(S!=null)return r(S)}let l=V$(t);if(l){const S=await hW(l,n);if(S!=null)return r(S);l.after||l.error||(l=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ht("host-webworker")||ht("host-node")))throw cf("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw cf("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||s)throw cf("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await PIe(),R9)return R9.execute(t,e);const u=new AbortController,f=Ul(e,()=>u.abort()),y={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:n,redoRequest:!1,useIdentity:Mu.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await AIe(y).finally(()=>f==null?void 0:f.remove());return(x=l==null?void 0:l.after)==null||x.call(l,_),_}let R9;const Mu=Gs.request,$ae="FormData"in globalThis,wIe=new Set([499,498,403,401]),SIe=new Set(["COM_0056","COM_0057","SB_0008"]),EIe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],x2=()=>null,L9=Symbol();function CIe(t){const e=Gu(t);e&&!Qs._corsServers.includes(e)&&Qs._corsServers.push(e)}function uW(t){const e=Gu(t);return!e||e.endsWith(".arcgis.com")||Qs._corsServers.includes(e)||Lq(e)}function cf(t,e,i,s){let n="Error";const r={url:i.url,requestOptions:i.requestOptions,getAllHeaders:x2,getHeader:x2,ssl:!1};if(e instanceof rt)return e.details?(e.details=Ue(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=r,e;if(e){const o=s&&(()=>Array.from(s.headers)),l=s&&(y=>s.headers.get(y)),u=s==null?void 0:s.status,f=e.message;f&&(n=f),o&&l&&(r.getAllHeaders=o,r.getHeader=l),r.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||u||0,r.subCode=e.subcode,r.messageCode=e.messageCode,typeof e.details=="string"?r.messages=[e.details]:r.messages=e.details,r.raw=L9 in e?e[L9]:e}return cd(e)?or():new rt(t,n,r)}async function PIe(){ht("host-webworker")&&!R9&&(R9=await nt(()=>import("./request-CSOiTF-E.js"),[],import.meta.url))}async function H$(){Li||await nt(()=>Promise.resolve().then(()=>cDe),void 0,import.meta.url)}async function TIe(t){var l;const e=t.params.url,i=t.params.requestOptions,s=t.controller.signal,n=i.body;let r=null,o=null;if($ae&&"HTMLFormElement"in globalThis&&(n instanceof FormData?r=n:n instanceof HTMLFormElement&&(r=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Mu.priority,redirect:"follow",signal:s},(r||o)&&(t.fetchOptions.body=r||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(l=i.query)!=null&&l.token||r!=null&&r.get("token")),!t.hasToken&&kae(e)&&(i.query||(i.query={}),i.query.token=Gs.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!Oae(e)&&!Rc(s)){let u;i.authMode==="immediate"?(await H$(),u=await Li.getCredential(e,{signal:s}),t.credential=u):i.authMode==="no-prompt"?(await H$(),u=await Li.getCredential(e,{prompt:!1,signal:s}).catch(()=>{}),t.credential=u):Li&&(u=Li.findCredential(e)),u&&(t.credentialToken=u.token,t.useSSL=!!u.ssl)}}function Oae(t){return EIe.some(e=>e.test(t))}async function IIe(t){let e=t.params.url;const i=t.params.requestOptions,s=t.fetchOptions??{},n=CM(e)||Av(e),r=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:Mu.timeout;let l=!1;if(!n){t.useSSL&&(e=qq(e));let x={...i.query};t.credentialToken&&(x.token=t.credentialToken);let S=Qy(x);ht("esri-url-encodes-apostrophe")&&(S=S.replaceAll("'","%27"));const P=e.length+1+S.length;let A;l=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||P>Mu.maxUrlLength;const k=i.useProxy||!!wC(e);if(k){const $=Sae(e);A=$.path,!l&&A.length+1+P>Mu.maxUrlLength&&(l=!0),$.query&&(x={...$.query,...x})}if(s.method==="HEAD"&&(l||k)){if(l)throw P>Mu.maxUrlLength?cf("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):cf("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(k)throw cf("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=ST(e,x):(s.body=Qy(x),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=ST(e,x),k&&(t.useProxy=!0,e=`${A}?${e}`),x.token&&$ae&&s.body instanceof FormData&&!bae(e)&&s.body.set("token",x.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!Vl(e,Oq())){if(Lq(e))t.withCredentials=!0;else if(Li){const $=Li.findServerInfo(e);$!=null&&$.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(s.credentials="include",bIe(e)&&await xIe(l?ST(e,x):e))}let u,f,y=0,_=!1;o>0&&(y=setTimeout(()=>{_=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")f=s,f.url=e,i.signal?f.signal=i.signal:delete f.signal;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||l||MIe(i.headers)||!n&&!t.useProxy&&Mu.proxyUrl&&!uW(e)){if(Qs._beforeFetch&&await Qs._beforeFetch(e,s),u=await fetch(e,s),Qs._afterFetch&&await Qs._afterFetch(u),t.useProxy||CIe(e),i.responseType==="native")f=u;else if(s.method!=="HEAD")if(u.ok){switch(r){case"array-buffer":f=await u.arrayBuffer();break;case"blob":case"image":f=await u.blob();break;default:f=await u.text()}if(y&&(clearTimeout(y),y=0),r==="json"||r==="xml"||r==="document")if(f)switch(r){case"json":f=JSON.parse(f);break;case"xml":f=dW(f,"application/xml");break;case"document":f=dW(f,"text/html")}else f=null;if(f){if(r==="array-buffer"||r==="blob"){const x=u.headers.get("Content-Type");if(x&&/application\/json|text\/plain/i.test(x)&&f[r==="blob"?"size":"byteLength"]<=750)try{const S=await new Response(f).json();S.error&&(f=S)}catch{}}r==="image"&&f instanceof Blob&&(f=await fW(URL.createObjectURL(f),t,!0))}}else{f=await u.text();try{f=JSON.parse(f)}catch{}}}else f=await fW(e,t)}catch(x){if(x.name==="AbortError")throw _?vIe():or("Request canceled");if(!(!u&&x instanceof TypeError&&Mu.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||uW(e))throw x;t.redoRequest=!0,ZTe({proxyUrl:Mu.proxyUrl,urlPrefix:Gu(e)??""})}finally{y&&clearTimeout(y)}return[u,f]}async function hW(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,s;try{s=await t.before(e)}catch(n){i=cf("request:interceptor",n,e)}if((s instanceof Error||s instanceof rt)&&(i=cf("request:interceptor",s,e)),i)throw t.error&&t.error(i),i;return s}}function MIe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function dW(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function AIe(t){var r,o;let e,i;await TIe(t);try{do[e,i]=await IIe(t);while(!await DIe(t,e,i))}catch(l){const u=cf("request:server",l,t.params,e);throw u.details.ssl=t.useSSL,(r=t.interceptor)!=null&&r.error&&t.interceptor.error(u),u}const s=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!Lq(s)){const l=Gu(s,!0);l&&Mu.trustedServers.push(l)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&_Ie(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&Li){const l=Li.findServerInfo(n.server);let u=l==null?void 0:l.owningSystemUrl;if(u){u=u.replace(/\/?$/,"/sharing");const f=Li.findCredential(u,n.userId);f&&Li._getIdenticalSvcIdx(u,f)===-1&&f.resources.unshift(u)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):x2,getHeader:e?l=>e.headers.get(l):x2,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function DIe(t,e,i){var f;if(t.redoRequest)return t.redoRequest=!1,!1;const s=t.params.requestOptions;if(!e||s.responseType==="native"||s.responseType==="native-request-init")return!0;let n,r;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[L9]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[L9]=i,n;let o,l=null;n&&(r=Number(n.code),l=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const u=s.authMode;if(r===403&&(l===4||(f=n.message)!=null&&f.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(u!=="no-prompt"||r===498)&&r!==void 0&&wIe.has(r)&&!Oae(t.params.url)&&(r!==403||(!o||!SIe.has(o))&&(l==null||l===2&&t.credentialToken))){await H$();try{const y=await Li.getCredential(t.params.url,{error:cf("request:server",n,t.params),prompt:u!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=y,t.credentialToken=y.token,t.useSSL=t.useSSL||y.ssl,!1}catch(y){if(u==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=y}}if(n)throw n;return!0}function fW(t,e,i=!1){const s=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Mu.priority,n.src=t,yIe(n,t,i,s)}Qs._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Qs._beforeFetch=void 0,Qs._afterFetch=void 0;var L0;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(L0||(L0={}));let kIe=class{constructor(){this._resolver=Tc(),this._status=L0.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=L0.RESOLVED,this._cleanUp()},()=>{this._status=L0.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===L0.RESOLVED}isRejected(){return this._status===L0.REJECTED}isFulfilled(){return this._status!==L0.PENDING}abort(){this._resolver.reject(or())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Tc(),i=[...this._resolvingPromises,e.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==s||cd(n)||this._resolver.reject(n)}),e.resolve()}};const Gq=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new kIe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then(()=>this).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=I([ke("esri.core.Promise")],e),e};let U$=class extends Gq(Ei){};U$=I([ke("esri.core.Promise")],U$);const NIe="not-loaded",$Ie="loading",OIe="failed",pW="loaded",Rae=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=r=>{const o=new Promise((l,u)=>{const f=joe(r,u);this.destroyed&&u(new rt("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,u).finally(()=>{f&&f.remove()})});if(this.loadStatus===NIe){this._set("loadStatus",$Ie);const l=this._loadController=new AbortController;n({signal:l.signal})}return s(),o}})),this.when(()=>{this._set("loadStatus",pW),this._loadController=null},s=>{this._set("loadStatus",OIe),this._set("loadError",s),this._loadController=null})}destroy(){this._loadController&&(this._loadController=dg(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===pW}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new rt("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return I([N({readOnly:!0})],e.prototype,"loaded",null),I([N({readOnly:!0})],e.prototype,"loadError",void 0),I([N({clonable:!1})],e.prototype,"loadStatus",void 0),I([N({type:[ed],readOnly:!0})],e.prototype,"loadWarnings",null),e=I([ke("esri.core.Loadable")],e),e};let h3=class extends Rae(U$){};h3=I([ke("esri.core.Loadable")],h3),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=Rae,t.isLoadable=e}(h3||(h3={}));const SC=h3;function At(t,e,i){let s,n;return e===void 0||Array.isArray(e)?(n=t,i=e,s=[void 0]):(n=e,s=Array.isArray(t)?t:[t]),(r,o)=>{const l=r.constructor.prototype;s.forEach(u=>{const f=sae(r,u,n);f.read&&typeof f.read=="object"||(f.read={}),f.read.reader=l[o],i&&(f.read.source=(f.read.source||[]).concat(i))})}}let ps=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=RIe(e),this.apiValues=mW(this._apiToJSON),this.jsonValues=mW(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,n,r)=>{const o=this.toJSON(s);o!==void 0&&Ja(r,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function RIe(t){const e={};for(const i in t)e[t[i]]=i;return e}function mW(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function wa(){return function(t,e){return new ps(t,{ignoreUnknown:!0,...e})}}let jq=class{constructor(e,i,s,n,r,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=s,this.atmosphereHeight=n,this.scaleHeight=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const cr=new jq(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),uf=new jq(3396190,1/169.8944472236118,23e4,6e4,.111),xg=new jq(1737400,0,0,0,0);function EC(t){if(!Gs.assetsPath)throw zt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new rt("assets:path-not-set","config.assetsPath is not set");return b2(Gs.assetsPath,t)}let Uk,He=null;function Bq(){return!!He}function LIe(){return!!ht("esri-wasm")}function Hq(){return Uk||(Uk=nt(()=>import("./pe-wasm-DCo-Vy3O.js"),[],import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>EC(`esri/geometry/support/${e}`)})).then(t=>{zae(t)}),Uk)}var Y$,zn;(function(t){function e(r,o,l){He.ensureCache.prepare();const u=_y(l),f=l===u,y=He.ensureFloat64(u),_=He._pe_geog_to_proj(He.getPointer(r),o,y);return _&&U0(l,o,y,f),_}function i(r,o,l,u){switch(u){case zn.PE_TRANSFORM_P_TO_G:return s(r,o,l);case zn.PE_TRANSFORM_G_TO_P:return e(r,o,l)}return 0}function s(r,o,l){return n(r,o,l,0)}function n(r,o,l,u){He.ensureCache.prepare();const f=_y(l),y=l===f,_=He.ensureFloat64(f),x=He._pe_proj_to_geog_center(He.getPointer(r),o,_,u);return x&&U0(l,o,_,y),x}t.geogToProj=e,t.projGeog=i,t.projToGeog=s,t.projToGeogCenter=n})(Y$||(Y$={})),function(t){function e(){t.PE_BUFFER_MAX=He.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=He.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=He.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=He.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=He.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=He.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=He.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=He.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=He.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=He.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=He.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=He.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=He.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=He.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=He.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=He.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=He.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=He.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=He.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=He.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=He.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=He.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=He.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=He.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=He.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=He.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=He.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=He.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=He.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=He.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=He.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=He.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(zn||(zn={}));let Lae=null;var cE;(function(t){const e={},i={},s=S=>{const P=S.getType();switch(P){case zn.PE_TYPE_GEOGCS:S=He.castObject(S,He.PeGeogcs);break;case zn.PE_TYPE_PROJCS:S=He.castObject(S,He.PeProjcs);break;case zn.PE_TYPE_GEOGTRAN:S=He.castObject(S,He.PeGeogtran);break;default:P&zn.PE_TYPE_UNIT&&(S=He.castObject(S,He.PeUnit))}return S};function n(){He.PeFactory.prototype.initialize(null)}function r(S){return o(zn.PE_TYPE_COORDSYS,S)}function o(S,P){let A=null,k=e[S];if(k||(k={},e[S]=k),k.hasOwnProperty(String(P))&&(A=k[P],He.compare(A,He.NULL)&&(A=null)),!A){const $=He.PeFactory.prototype.factoryByType(S,P);He.compare($,He.NULL)||(A=s($),k[P]=A)}return A}function l(S,P){let A=null,k=i[S];if(k||(k={},i[S]=k),k.hasOwnProperty(P)&&(A=k[P],He.compare(A,He.NULL)&&(A=null)),!A){const $=He.PeFactory.prototype.fromString(S,P);He.compare($,He.NULL)||(A=s($),k[P]=A)}return A}function u(S){return o(zn.PE_TYPE_GEOGCS,S)}function f(S){return o(zn.PE_TYPE_GEOGTRAN,S)}function y(S){return He.PeFactory.prototype.getCode(S)}function _(S){return o(zn.PE_TYPE_PROJCS,S)}function x(S){return o(zn.PE_TYPE_UNIT,S)}t.initialize=n,t.coordsys=r,t.factoryByType=o,t.fromString=l,t.geogcs=u,t.geogtran=f,t.getCode=y,t.projcs=_,t.unit=x})(cE||(cE={}));let Fae=null;var F9,X$,W$,Z$,K$,J$,z9,Q$,q9,V9,eO;function zae(t){function e(r,o,l){r[o]=l(r[o])}He=t,zn.init(),F9.init(),z9.init(),q9.init(),V9.init(),Lae=class extends He.PeDouble{constructor(r=NaN){super(r)}destroy(){He.destroy(this)}[Symbol.dispose](){this.destroy()}},Fae=class extends He.PeGCSExtent{destroy(){He.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[He.PeAngunit,He.PeDatum,He.PeGeogcs,He.PeGeogtran,He.PeObject,He.PeParameter,He.PePrimem,He.PeProjcs,He.PeSpheroid,He.PeUnit];for(const r of i)e(r.prototype,"getName",o=>function(){return o.call(this,new Array(zn.PE_NAME_MAX))});for(const r of[He.PeGeogtran,He.PeProjcs])e(r.prototype,"getParameters",o=>function(){const l=new Array(zn.PE_PARM_MAX);let u=o.call(this);for(let f=0;f<l.length;f++){const y=He.getValue(u,"*");l[f]=y?He.wrapPointer(y,He.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return l});e(He.PeHorizon.prototype,"getCoord",r=>function(o=!1){const l=this.getSize();if(!l)return null;const u=[];return U0(u,l,r.call(this),o),u}),e(He.PeGTlistExtendedEntry.prototype,"getEntries",r=>{const o=He._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const u=r.call(this);if(!He.compare(u,He.NULL)){l=[u];const f=this.getSteps();if(f>1){const y=He.getPointer(u);for(let _=1;_<f;_++)l.push(He.wrapPointer(y+o*_,He.PeGTlistExtendedGTs))}}return l}});const s=He._pe_getPeHorizonSize(),n=r=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(r))return o.get(r);let l=null;const u=r.call(this);if(!He.compare(u,He.NULL)){l=[u];const f=u.getNump();if(f>1){const y=He.getPointer(u);for(let _=1;_<f;_++)l.push(He.wrapPointer(y+s*_,He.PeHorizon))}}return o.set(r,l),l};e(He.PeProjcs.prototype,"horizonGcsGenerate",n),e(He.PeProjcs.prototype,"horizonPcsGenerate",n),He.PeObject.prototype.toString=function(r=zn.PE_STR_OPTS_NONE){He.ensureCache.prepare();const o=He.getPointer(this),l=He.ensureInt8(new Array(zn.PE_BUFFER_MAX));return He.UTF8ToString(He._pe_object_to_string_ext(o,r,l))},He.PeGeogcs.prototype.destroy=function(){this.Delete(),Mh(this),this.ptr=0},He.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},He.PeProjcs.prototype.destroy=function(){this.Delete(),Mh(this),this.ptr=0},He.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Mh(t){if(!t)return;const e=He.getClass(t);if(!e)return;const i=He.getCache(e);if(!i)return;const s=He.getPointer(t);s&&delete i[s]}function WP(t,e){const i=[],s=new Array(e);for(let n=0;n<t;n++)i.push(He.ensureInt8(s));return i}function _y(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function U0(t,e,i,s=!1){if(s)for(let n=0;n<2*e;n++)t[n]=He.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let r=0;r<e;r++)n&&(t[r]=new Array(2)),t[r][0]=He.getValue(i,"double"),t[r][1]=He.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=He.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=He._pe_getPeGTlistExtendedEntrySize()}function s(n,r,o,l,u,f){let y=null;const _=new He.PeInteger(f);try{const x=He.PeGTlistExtended.prototype.getGTlist(n,r,o,l,u,_);if((f=_.val)&&(y=[x],f>1)){const S=He.getPointer(x);for(let P=1;P<f;P++)y.push(He.wrapPointer(S+e*P,He.PeGTlistExtendedEntry))}}finally{He.destroy(_)}return y}t.init=i,t.getGTlist=s})(F9||(F9={})),function(t){function e(i){if(i!=null&&i.length){for(const s of i)Mh(s),s.getEntries().forEach(n=>{Mh(n);const r=n.getGeogtran();Mh(r),r.getParameters().forEach(Mh),[r.getGeogcs1(),r.getGeogcs2()].forEach(o=>{Mh(o);const l=o.getDatum();Mh(l),Mh(l.getSpheroid()),Mh(o.getPrimem()),Mh(o.getUnit())})});He.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(X$||(X$={})),function(t){function e(i,s,n,r,o){He.ensureCache.prepare();const l=_y(n),u=n===l,f=He.ensureFloat64(l);let y=0;r&&(y=He.ensureFloat64(r));const _=He._pe_geog_to_geog(He.getPointer(i),s,f,y,o);return _&&U0(n,s,f,u),_}t.geogToGeog=e}(W$||(W$={})),function(t){function e(r,o,l,u,f,y,_,x){He.PeLineType.prototype.geodesic_coordinate(r,o,l,u,f,y,_,x)}function i(r,o,l,u,f,y,_,x,S){He.PeLineType.prototype.geodetic_coordinate(r,o,l,u,f,y,_,x,S)}function s(r,o,l,u,f,y,_,x,S,P){He.PeLineType.prototype.geodetic_distance(r,o,l,u,f,y,_,x,S,P)}function n(r,o,l,u,f,y,_,x,S){He.PeLineType.prototype.great_elliptic_distance(r,o,l,u,f,y,_,x,S)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=s,t.greatEllipticDistance=n}(Z$||(Z$={})),function(t){function e(o,l){return He.PeMath.prototype.phi_to_eta(o,l)}function i(o,l){return He.PeMath.prototype.eta_to_phi(o,l)}function s(o,l){return He.PeMath.prototype.phi_to_phig(o,l)}function n(o,l,u){return He.PeMath.prototype.q(o,l,u)}function r(o,l){return He.PeMath.prototype.q90(o,l)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=s,t.q=n,t.q90=r}(K$||(K$={})),function(t){const e=(f,y,_,x,S,P)=>{let A,k;switch(He.ensureCache.prepare(),f){case"dd":A=He._pe_geog_to_dd,k=zn.PE_DD_MAX;break;case"ddm":A=He._pe_geog_to_ddm,k=zn.PE_DDM_MAX;break;case"dms":A=He._pe_geog_to_dms,k=zn.PE_DMS_MAX}let $=0;y&&($=He.getPointer(y));const F=_y(x),G=He.ensureFloat64(F),V=WP(_,k),B=A($,_,G,S,He.ensureInt32(V));if(B)for(let W=0;W<_;W++)P[W]=He.UTF8ToString(V[W]);return B},i=(f,y,_,x,S)=>{let P;switch(He.ensureCache.prepare(),f){case"dd":P=He._pe_dd_to_geog;break;case"ddm":P=He._pe_ddm_to_geog;break;case"dms":P=He._pe_dms_to_geog}let A=0;y&&(A=He.getPointer(y));const k=x.map(V=>He.ensureString(V)),$=He.ensureInt32(k),F=He.ensureFloat64(new Array(2*_)),G=P(A,_,$,F);return G&&U0(S,_,F),G};function s(f,y,_,x,S){return e("dms",f,y,_,x,S)}function n(f,y,_,x){return i("dms",f,y,_,x)}function r(f,y,_,x,S){return e("ddm",f,y,_,x,S)}function o(f,y,_,x){return i("ddm",f,y,_,x)}function l(f,y,_,x,S){return e("dd",f,y,_,x,S)}function u(f,y,_,x){return i("dd",f,y,_,x)}t.geogToDms=s,t.dmsToGeog=n,t.geogToDdm=r,t.ddmToGeog=o,t.geogToDd=l,t.ddToGeog=u}(J$||(J$={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=He.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=He.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,r,o,l,u,f,y){He.ensureCache.prepare();let _=0;n&&(_=He.getPointer(n));const x=_y(o),S=He.ensureFloat64(x),P=WP(r,zn.PE_MGRS_MAX),A=He.ensureInt32(P),k=He._pe_geog_to_mgrs_extended(_,r,S,l,u,f,A);if(k)for(let $=0;$<r;$++)y[$]=He.UTF8ToString(P[$]);return k}function s(n,r,o,l,u){He.ensureCache.prepare();let f=0;n&&(f=He.getPointer(n));const y=o.map(P=>He.ensureString(P)),_=He.ensureInt32(y),x=He.ensureFloat64(new Array(2*r)),S=He._pe_mgrs_to_geog_extended(f,r,_,l,x);return S&&U0(u,r,x),S}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=s}(z9||(z9={})),function(t){function e(s,n,r,o,l,u,f){He.ensureCache.prepare();let y=0;s&&(y=He.getPointer(s));const _=_y(r),x=He.ensureFloat64(_),S=WP(n,zn.PE_MGRS_MAX),P=He.ensureInt32(S),A=He._pe_geog_to_usng(y,n,x,o,l,u,P);if(A)for(let k=0;k<n;k++)f[k]=He.UTF8ToString(S[k]);return A}function i(s,n,r,o){He.ensureCache.prepare();let l=0;s&&(l=He.getPointer(s));const u=r.map(x=>He.ensureString(x)),f=He.ensureInt32(u),y=He.ensureFloat64(new Array(2*n)),_=He._pe_usng_to_geog(l,n,f,y);return _&&U0(o,n,y),_}t.geogToUsng=e,t.usngToGeog=i}(Q$||(Q$={})),function(t){function e(){t.PE_UTM_OPTS_NONE=He.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=He.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=He.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,r,o,l,u){He.ensureCache.prepare();let f=0;n&&(f=He.getPointer(n));const y=_y(o),_=He.ensureFloat64(y),x=WP(r,zn.PE_UTM_MAX),S=He.ensureInt32(x),P=He._pe_geog_to_utm(f,r,_,l,S);if(P)for(let A=0;A<r;A++)u[A]=He.UTF8ToString(x[A]);return P}function s(n,r,o,l,u){He.ensureCache.prepare();let f=0;n&&(f=He.getPointer(n));const y=o.map(P=>He.ensureString(P)),_=He.ensureInt32(y),x=He.ensureFloat64(new Array(2*r)),S=He._pe_utm_to_geog(f,r,_,l,x);return S&&U0(u,r,x),S}t.init=e,t.geogToUtm=i,t.utmToGeog=s}(q9||(q9={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=He.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=He.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=He.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=He.PePCSInfo.prototype.PE_POLE_POINT}function s(n,r=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return e.has(n)&&(l=e.get(n),l[r]&&(o=l[r])),o||(o=He.PePCSInfo.prototype.generate(n,r),l||(l=[],e.set(n,l)),l[r]=o),o}t.init=i,t.generate=s}(V9||(V9={})),function(t){function e(){return He.PeVersion.prototype.version_string()}t.versionString=e}(eO||(eO={}));const FIe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Y$},get PeDefs(){return zn},get PeDouble(){return Lae},get PeFactory(){return cE},get PeGCSExtent(){return Fae},get PeGTTransformations(){return W$},get PeGTlistExtended(){return F9},get PeGTlistExtendedEntry(){return X$},get PeLineType(){return Z$},get PeMath(){return K$},get PeNotationDms(){return J$},get PeNotationMgrs(){return z9},get PeNotationUsng(){return Q$},get PeNotationUtm(){return q9},get PePCSInfo(){return V9},get PeVersion(){return eO},_init:zae,get _pe(){return He},isLoaded:Bq,isSupported:LIe,load:Hq},Symbol.toStringTag,{value:"Module"}));var ev;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(ev||(ev={}));let R;const Ee={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(R=2e3;R<=2045;R++)Ee[R]=0;for(R=2056;R<=2065;R++)Ee[R]=0;for(R=2067;R<=2135;R++)Ee[R]=0;for(R=2137;R<=2154;R++)Ee[R]=0;for(R=2161;R<=2170;R++)Ee[R]=0;for(R=2172;R<=2193;R++)Ee[R]=0;for(R=2195;R<=2198;R++)Ee[R]=0;for(R=2200;R<=2203;R++)Ee[R]=0;for(R=2205;R<=2217;R++)Ee[R]=0;for(R=2222;R<=2224;R++)Ee[R]=1;for(R=2225;R<=2250;R++)Ee[R]=2;for(R=2251;R<=2253;R++)Ee[R]=1;for(R=2257;R<=2264;R++)Ee[R]=2;for(R=2274;R<=2279;R++)Ee[R]=2;for(R=2280;R<=2282;R++)Ee[R]=1;for(R=2283;R<=2289;R++)Ee[R]=2;for(R=2290;R<=2292;R++)Ee[R]=0;for(R=2308;R<=2313;R++)Ee[R]=0;for(R=2315;R<=2491;R++)Ee[R]=0;for(R=2494;R<=2866;R++)Ee[R]=0;for(R=2867;R<=2869;R++)Ee[R]=1;for(R=2870;R<=2888;R++)Ee[R]=2;for(R=2891;R<=2895;R++)Ee[R]=2;for(R=2896;R<=2898;R++)Ee[R]=1;for(R=2902;R<=2908;R++)Ee[R]=2;for(R=2915;R<=2920;R++)Ee[R]=2;for(R=2921;R<=2923;R++)Ee[R]=1;for(R=2924;R<=2930;R++)Ee[R]=2;for(R=2931;R<=2962;R++)Ee[R]=0;for(R=2964;R<=2968;R++)Ee[R]=2;for(R=2969;R<=2973;R++)Ee[R]=0;for(R=2975;R<=2991;R++)Ee[R]=0;for(R=2995;R<=3051;R++)Ee[R]=0;for(R=3054;R<=3079;R++)Ee[R]=0;for(R=3081;R<=3088;R++)Ee[R]=0;for(R=3092;R<=3101;R++)Ee[R]=0;for(R=3106;R<=3138;R++)Ee[R]=0;for(R=3146;R<=3151;R++)Ee[R]=0;for(R=3153;R<=3166;R++)Ee[R]=0;for(R=3168;R<=3172;R++)Ee[R]=0;for(R=3174;R<=3203;R++)Ee[R]=0;for(R=3294;R<=3358;R++)Ee[R]=0;for(R=3367;R<=3403;R++)Ee[R]=0;for(R=3408;R<=3416;R++)Ee[R]=0;for(R=3417;R<=3438;R++)Ee[R]=2;for(R=3441;R<=3446;R++)Ee[R]=2;for(R=3447;R<=3450;R++)Ee[R]=0;for(R=3451;R<=3459;R++)Ee[R]=2;for(R=3460;R<=3478;R++)Ee[R]=0;for(R=3554;R<=3559;R++)Ee[R]=0;for(R=3560;R<=3570;R++)Ee[R]=2;for(R=3571;R<=3581;R++)Ee[R]=0;for(R=3594;R<=3597;R++)Ee[R]=0;for(R=3601;R<=3604;R++)Ee[R]=0;for(R=3637;R<=3639;R++)Ee[R]=0;for(R=3665;R<=3667;R++)Ee[R]=0;for(R=3693;R<=3695;R++)Ee[R]=0;for(R=3701;R<=3727;R++)Ee[R]=0;for(R=3728;R<=3739;R++)Ee[R]=2;for(R=3740;R<=3751;R++)Ee[R]=0;for(R=3753;R<=3760;R++)Ee[R]=2;for(R=3761;R<=3773;R++)Ee[R]=0;for(R=3775;R<=3777;R++)Ee[R]=0;for(R=3779;R<=3781;R++)Ee[R]=0;for(R=3783;R<=3785;R++)Ee[R]=0;for(R=3788;R<=3791;R++)Ee[R]=0;for(R=3797;R<=3802;R++)Ee[R]=0;for(R=3814;R<=3816;R++)Ee[R]=0;for(R=3825;R<=3829;R++)Ee[R]=0;for(R=3832;R<=3841;R++)Ee[R]=0;for(R=3844;R<=3852;R++)Ee[R]=0;for(R=3873;R<=3885;R++)Ee[R]=0;for(R=3890;R<=3893;R++)Ee[R]=0;for(R=3907;R<=3912;R++)Ee[R]=0;for(R=3942;R<=3950;R++)Ee[R]=0;for(R=3968;R<=3970;R++)Ee[R]=0;for(R=3973;R<=3976;R++)Ee[R]=0;for(R=3986;R<=3989;R++)Ee[R]=0;for(R=3994;R<=3997;R++)Ee[R]=0;for(R=4048;R<=4051;R++)Ee[R]=0;for(R=4056;R<=4063;R++)Ee[R]=0;for(R=4093;R<=4096;R++)Ee[R]=0;for(R=4390;R<=4398;R++)Ee[R]=0;for(R=4399;R<=4413;R++)Ee[R]=2;for(R=4418;R<=4433;R++)Ee[R]=2;for(R=4455;R<=4457;R++)Ee[R]=2;for(R=4484;R<=4489;R++)Ee[R]=0;for(R=4491;R<=4554;R++)Ee[R]=0;for(R=4568;R<=4589;R++)Ee[R]=0;for(R=4652;R<=4656;R++)Ee[R]=0;for(R=4766;R<=4800;R++)Ee[R]=0;for(R=5014;R<=5016;R++)Ee[R]=0;for(R=5069;R<=5072;R++)Ee[R]=0;for(R=5105;R<=5130;R++)Ee[R]=0;for(R=5167;R<=5188;R++)Ee[R]=0;for(R=5253;R<=5259;R++)Ee[R]=0;for(R=5269;R<=5275;R++)Ee[R]=0;for(R=5292;R<=5311;R++)Ee[R]=0;for(R=5329;R<=5331;R++)Ee[R]=0;for(R=5343;R<=5349;R++)Ee[R]=0;for(R=5355;R<=5357;R++)Ee[R]=0;for(R=5387;R<=5389;R++)Ee[R]=0;for(R=5459;R<=5463;R++)Ee[R]=0;for(R=5479;R<=5482;R++)Ee[R]=0;for(R=5518;R<=5520;R++)Ee[R]=0;for(R=5530;R<=5539;R++)Ee[R]=0;for(R=5550;R<=5552;R++)Ee[R]=0;for(R=5562;R<=5583;R++)Ee[R]=0;for(R=5623;R<=5625;R++)Ee[R]=2;for(R=5631;R<=5639;R++)Ee[R]=0;for(R=5649;R<=5653;R++)Ee[R]=0;for(R=5663;R<=5680;R++)Ee[R]=0;for(R=5682;R<=5685;R++)Ee[R]=0;for(R=5875;R<=5877;R++)Ee[R]=0;for(R=5896;R<=5899;R++)Ee[R]=0;for(R=5921;R<=5940;R++)Ee[R]=0;for(R=6050;R<=6125;R++)Ee[R]=0;for(R=6244;R<=6275;R++)Ee[R]=0;for(R=6328;R<=6348;R++)Ee[R]=0;for(R=6350;R<=6356;R++)Ee[R]=0;for(R=6366;R<=6372;R++)Ee[R]=0;for(R=6381;R<=6387;R++)Ee[R]=0;for(R=6393;R<=6404;R++)Ee[R]=0;for(R=6480;R<=6483;R++)Ee[R]=0;for(R=6511;R<=6514;R++)Ee[R]=0;for(R=6579;R<=6581;R++)Ee[R]=0;for(R=6619;R<=6624;R++)Ee[R]=0;for(R=6625;R<=6627;R++)Ee[R]=2;for(R=6628;R<=6632;R++)Ee[R]=0;for(R=6634;R<=6637;R++)Ee[R]=0;for(R=6669;R<=6692;R++)Ee[R]=0;for(R=6707;R<=6709;R++)Ee[R]=0;for(R=6720;R<=6723;R++)Ee[R]=0;for(R=6732;R<=6738;R++)Ee[R]=0;for(R=6931;R<=6933;R++)Ee[R]=0;for(R=6956;R<=6959;R++)Ee[R]=0;for(R=7005;R<=7007;R++)Ee[R]=0;for(R=7057;R<=7070;R++)Ee[R]=2;for(R=7074;R<=7082;R++)Ee[R]=0;for(R=7109;R<=7118;R++)Ee[R]=0;for(R=7119;R<=7127;R++)Ee[R]=1;for(R=7374;R<=7376;R++)Ee[R]=0;for(R=7528;R<=7586;R++)Ee[R]=0;for(R=7587;R<=7645;R++)Ee[R]=2;for(R=7692;R<=7696;R++)Ee[R]=0;for(R=7755;R<=7787;R++)Ee[R]=0;for(R=7791;R<=7795;R++)Ee[R]=0;for(R=7799;R<=7801;R++)Ee[R]=0;for(R=7803;R<=7805;R++)Ee[R]=0;for(R=7825;R<=7831;R++)Ee[R]=0;for(R=7845;R<=7859;R++)Ee[R]=0;for(R=8013;R<=8032;R++)Ee[R]=0;for(R=8065;R<=8068;R++)Ee[R]=1;for(R=8518;R<=8529;R++)Ee[R]=2;for(R=8533;R<=8536;R++)Ee[R]=2;for(R=8538;R<=8540;R++)Ee[R]=2;for(R=8677;R<=8679;R++)Ee[R]=0;for(R=8836;R<=8840;R++)Ee[R]=0;for(R=8857;R<=8859;R++)Ee[R]=0;for(R=8908;R<=8910;R++)Ee[R]=0;for(R=9154;R<=9159;R++)Ee[R]=0;for(R=9205;R<=9218;R++)Ee[R]=0;for(R=9271;R<=9273;R++)Ee[R]=0;for(R=9295;R<=9297;R++)Ee[R]=0;for(R=9356;R<=9360;R++)Ee[R]=0;for(R=9404;R<=9407;R++)Ee[R]=0;for(R=9476;R<=9482;R++)Ee[R]=0;for(R=9487;R<=9494;R++)Ee[R]=0;for(R=9697;R<=9699;R++)Ee[R]=0;for(R=9821;R<=9865;R++)Ee[R]=0;for(R=10285;R<=10291;R++)Ee[R]=0;for(R=10314;R<=10317;R++)Ee[R]=0;for(R=10448;R<=10465;R++)Ee[R]=0;for(R=10731;R<=10733;R++)Ee[R]=0;for(R=11114;R<=11118;R++)Ee[R]=0;for(R=20004;R<=20032;R++)Ee[R]=0;for(R=20047;R<=20049;R++)Ee[R]=0;for(R=20062;R<=20092;R++)Ee[R]=0;for(R=20135;R<=20138;R++)Ee[R]=0;for(R=20248;R<=20258;R++)Ee[R]=0;for(R=20348;R<=20358;R++)Ee[R]=0;for(R=20436;R<=20440;R++)Ee[R]=0;for(R=20822;R<=20824;R++)Ee[R]=0;for(R=20904;R<=20932;R++)Ee[R]=0;for(R=20934;R<=20936;R++)Ee[R]=0;for(R=21004;R<=21032;R++)Ee[R]=0;for(R=21035;R<=21037;R++)Ee[R]=0;for(R=21095;R<=21097;R++)Ee[R]=0;for(R=21148;R<=21150;R++)Ee[R]=0;for(R=21207;R<=21264;R++)Ee[R]=0;for(R=21307;R<=21364;R++)Ee[R]=0;for(R=21413;R<=21423;R++)Ee[R]=0;for(R=21453;R<=21463;R++)Ee[R]=0;for(R=21473;R<=21483;R++)Ee[R]=0;for(R=21780;R<=21782;R++)Ee[R]=0;for(R=21891;R<=21894;R++)Ee[R]=0;for(R=21896;R<=21899;R++)Ee[R]=0;for(R=22171;R<=22177;R++)Ee[R]=0;for(R=22181;R<=22187;R++)Ee[R]=0;for(R=22191;R<=22197;R++)Ee[R]=0;for(R=22207;R<=22222;R++)Ee[R]=0;for(R=22229;R<=22232;R++)Ee[R]=0;for(R=22234;R<=22236;R++)Ee[R]=0;for(R=22243;R<=22250;R++)Ee[R]=0;for(R=22262;R<=22265;R++)Ee[R]=0;for(R=22307;R<=22322;R++)Ee[R]=0;for(R=22348;R<=22357;R++)Ee[R]=0;for(R=22407;R<=22422;R++)Ee[R]=0;for(R=22462;R<=22465;R++)Ee[R]=0;for(R=22521;R<=22525;R++)Ee[R]=0;for(R=22607;R<=22622;R++)Ee[R]=0;for(R=22641;R<=22646;R++)Ee[R]=0;for(R=22648;R<=22657;R++)Ee[R]=0;for(R=22707;R<=22722;R++)Ee[R]=0;for(R=22762;R<=22765;R++)Ee[R]=0;for(R=22807;R<=22822;R++)Ee[R]=0;for(R=22991;R<=22994;R++)Ee[R]=0;for(R=23028;R<=23038;R++)Ee[R]=0;for(R=23301;R<=23333;R++)Ee[R]=2;for(R=23830;R<=23853;R++)Ee[R]=0;for(R=23866;R<=23872;R++)Ee[R]=0;for(R=23877;R<=23884;R++)Ee[R]=0;for(R=23886;R<=23894;R++)Ee[R]=0;for(R=23946;R<=23948;R++)Ee[R]=0;for(R=24311;R<=24313;R++)Ee[R]=0;for(R=24342;R<=24347;R++)Ee[R]=0;for(R=24370;R<=24374;R++)Ee[R]=10;for(R=24375;R<=24381;R++)Ee[R]=0;for(R=24718;R<=24721;R++)Ee[R]=0;for(R=24817;R<=24821;R++)Ee[R]=0;for(R=24877;R<=24882;R++)Ee[R]=0;for(R=24891;R<=24893;R++)Ee[R]=0;for(R=25391;R<=25395;R++)Ee[R]=0;for(R=25828;R<=25838;R++)Ee[R]=0;for(R=26191;R<=26195;R++)Ee[R]=0;for(R=26391;R<=26393;R++)Ee[R]=0;for(R=26701;R<=26722;R++)Ee[R]=0;for(R=26729;R<=26799;R++)Ee[R]=2;for(R=26801;R<=26803;R++)Ee[R]=2;for(R=26811;R<=26813;R++)Ee[R]=2;for(R=26847;R<=26870;R++)Ee[R]=2;for(R=26891;R<=26899;R++)Ee[R]=0;for(R=26901;R<=26923;R++)Ee[R]=0;for(R=26929;R<=26946;R++)Ee[R]=0;for(R=26948;R<=26998;R++)Ee[R]=0;for(R=27037;R<=27040;R++)Ee[R]=0;for(R=27205;R<=27232;R++)Ee[R]=0;for(R=27258;R<=27260;R++)Ee[R]=0;for(R=27391;R<=27398;R++)Ee[R]=0;for(R=27561;R<=27564;R++)Ee[R]=0;for(R=27571;R<=27574;R++)Ee[R]=0;for(R=27581;R<=27584;R++)Ee[R]=0;for(R=27591;R<=27594;R++)Ee[R]=0;for(R=27700;R<=27707;R++)Ee[R]=0;for(R=28191;R<=28193;R++)Ee[R]=0;for(R=28348;R<=28358;R++)Ee[R]=0;for(R=28402;R<=28432;R++)Ee[R]=0;for(R=28462;R<=28492;R++)Ee[R]=0;for(R=29118;R<=29122;R++)Ee[R]=0;for(R=29168;R<=29172;R++)Ee[R]=0;for(R=29177;R<=29185;R++)Ee[R]=0;for(R=29187;R<=29195;R++)Ee[R]=0;for(R=29900;R<=29903;R++)Ee[R]=0;for(R=30161;R<=30179;R++)Ee[R]=0;for(R=30491;R<=30494;R++)Ee[R]=0;for(R=30729;R<=30732;R++)Ee[R]=0;for(R=31251;R<=31259;R++)Ee[R]=0;for(R=31265;R<=31268;R++)Ee[R]=0;for(R=31275;R<=31279;R++)Ee[R]=0;for(R=31281;R<=31297;R++)Ee[R]=0;for(R=31461;R<=31469;R++)Ee[R]=0;for(R=31491;R<=31495;R++)Ee[R]=0;for(R=31917;R<=31922;R++)Ee[R]=0;for(R=31965;R<=32e3;R++)Ee[R]=0;for(R=32001;R<=32003;R++)Ee[R]=2;for(R=32005;R<=32031;R++)Ee[R]=2;for(R=32033;R<=32060;R++)Ee[R]=2;for(R=32064;R<=32067;R++)Ee[R]=2;for(R=32074;R<=32077;R++)Ee[R]=2;for(R=32081;R<=32086;R++)Ee[R]=0;for(R=32107;R<=32130;R++)Ee[R]=0;for(R=32133;R<=32159;R++)Ee[R]=0;for(R=32164;R<=32167;R++)Ee[R]=2;for(R=32180;R<=32199;R++)Ee[R]=0;for(R=32201;R<=32260;R++)Ee[R]=0;for(R=32301;R<=32360;R++)Ee[R]=0;for(R=32401;R<=32460;R++)Ee[R]=0;for(R=32501;R<=32560;R++)Ee[R]=0;for(R=32601;R<=32662;R++)Ee[R]=0;for(R=32664;R<=32667;R++)Ee[R]=2;for(R=32701;R<=32761;R++)Ee[R]=0;for(R=53001;R<=53004;R++)Ee[R]=0;for(R=53008;R<=53019;R++)Ee[R]=0;for(R=53021;R<=53032;R++)Ee[R]=0;for(R=53034;R<=53037;R++)Ee[R]=0;for(R=53042;R<=53046;R++)Ee[R]=0;for(R=53074;R<=53080;R++)Ee[R]=0;for(R=54001;R<=54004;R++)Ee[R]=0;for(R=54008;R<=54019;R++)Ee[R]=0;for(R=54021;R<=54032;R++)Ee[R]=0;for(R=54034;R<=54037;R++)Ee[R]=0;for(R=54042;R<=54046;R++)Ee[R]=0;for(R=54048;R<=54053;R++)Ee[R]=0;for(R=54074;R<=54080;R++)Ee[R]=0;for(R=54098;R<=54101;R++)Ee[R]=0;for(R=102001;R<=102040;R++)Ee[R]=0;for(R=102042;R<=102063;R++)Ee[R]=0;for(R=102065;R<=102067;R++)Ee[R]=0;for(R=102070;R<=102117;R++)Ee[R]=0;for(R=102122;R<=102216;R++)Ee[R]=0;for(R=102221;R<=102377;R++)Ee[R]=0;for(R=102382;R<=102388;R++)Ee[R]=0;for(R=102389;R<=102398;R++)Ee[R]=2;for(R=102399;R<=102444;R++)Ee[R]=0;for(R=102445;R<=102447;R++)Ee[R]=2;for(R=102448;R<=102458;R++)Ee[R]=0;for(R=102459;R<=102468;R++)Ee[R]=2;for(R=102469;R<=102499;R++)Ee[R]=0;for(R=102500;R<=102519;R++)Ee[R]=1;for(R=102520;R<=102524;R++)Ee[R]=0;for(R=102525;R<=102529;R++)Ee[R]=2;for(R=102530;R<=102588;R++)Ee[R]=0;for(R=102590;R<=102598;R++)Ee[R]=0;for(R=102601;R<=102603;R++)Ee[R]=0;for(R=102605;R<=102628;R++)Ee[R]=0;for(R=102629;R<=102646;R++)Ee[R]=2;for(R=102648;R<=102700;R++)Ee[R]=2;for(R=102701;R<=102703;R++)Ee[R]=0;for(R=102707;R<=102730;R++)Ee[R]=2;for(R=102733;R<=102758;R++)Ee[R]=2;for(R=102767;R<=102900;R++)Ee[R]=0;for(R=102901;R<=102933;R++)Ee[R]=2;for(R=102934;R<=102950;R++)Ee[R]=13;for(R=102951;R<=102963;R++)Ee[R]=0;for(R=102965;R<=102969;R++)Ee[R]=0;for(R=102971;R<=102973;R++)Ee[R]=0;for(R=102975;R<=102989;R++)Ee[R]=0;for(R=102990;R<=102992;R++)Ee[R]=1;for(R=102997;R<=103002;R++)Ee[R]=0;for(R=103003;R<=103008;R++)Ee[R]=2;for(R=103009;R<=103011;R++)Ee[R]=0;for(R=103012;R<=103014;R++)Ee[R]=2;for(R=103019;R<=103021;R++)Ee[R]=0;for(R=103022;R<=103024;R++)Ee[R]=2;for(R=103029;R<=103031;R++)Ee[R]=0;for(R=103032;R<=103034;R++)Ee[R]=2;for(R=103065;R<=103068;R++)Ee[R]=0;for(R=103074;R<=103076;R++)Ee[R]=0;for(R=103077;R<=103079;R++)Ee[R]=1;for(R=103080;R<=103082;R++)Ee[R]=0;for(R=103083;R<=103085;R++)Ee[R]=2;for(R=103090;R<=103093;R++)Ee[R]=0;for(R=103097;R<=103099;R++)Ee[R]=0;for(R=103100;R<=103102;R++)Ee[R]=2;for(R=103107;R<=103109;R++)Ee[R]=0;for(R=103110;R<=103112;R++)Ee[R]=2;for(R=103113;R<=103116;R++)Ee[R]=0;for(R=103117;R<=103120;R++)Ee[R]=2;for(R=103153;R<=103157;R++)Ee[R]=0;for(R=103158;R<=103162;R++)Ee[R]=2;for(R=103163;R<=103165;R++)Ee[R]=0;for(R=103166;R<=103168;R++)Ee[R]=1;for(R=103169;R<=103171;R++)Ee[R]=2;for(R=103186;R<=103188;R++)Ee[R]=0;for(R=103189;R<=103191;R++)Ee[R]=2;for(R=103192;R<=103195;R++)Ee[R]=0;for(R=103196;R<=103199;R++)Ee[R]=2;for(R=103200;R<=103224;R++)Ee[R]=0;for(R=103225;R<=103227;R++)Ee[R]=1;for(R=103232;R<=103237;R++)Ee[R]=0;for(R=103238;R<=103243;R++)Ee[R]=2;for(R=103244;R<=103246;R++)Ee[R]=0;for(R=103247;R<=103249;R++)Ee[R]=2;for(R=103254;R<=103256;R++)Ee[R]=0;for(R=103257;R<=103259;R++)Ee[R]=2;for(R=103264;R<=103266;R++)Ee[R]=0;for(R=103267;R<=103269;R++)Ee[R]=2;for(R=103300;R<=103375;R++)Ee[R]=0;for(R=103381;R<=103383;R++)Ee[R]=0;for(R=103384;R<=103386;R++)Ee[R]=1;for(R=103387;R<=103389;R++)Ee[R]=0;for(R=103390;R<=103392;R++)Ee[R]=2;for(R=103397;R<=103399;R++)Ee[R]=0;for(R=103400;R<=103471;R++)Ee[R]=2;for(R=103476;R<=103478;R++)Ee[R]=0;for(R=103479;R<=103481;R++)Ee[R]=2;for(R=103486;R<=103488;R++)Ee[R]=0;for(R=103489;R<=103491;R++)Ee[R]=2;for(R=103492;R<=103495;R++)Ee[R]=0;for(R=103496;R<=103499;R++)Ee[R]=2;for(R=103528;R<=103543;R++)Ee[R]=0;for(R=103544;R<=103548;R++)Ee[R]=2;for(R=103549;R<=103551;R++)Ee[R]=0;for(R=103552;R<=103554;R++)Ee[R]=1;for(R=103555;R<=103557;R++)Ee[R]=2;for(R=103558;R<=103560;R++)Ee[R]=0;for(R=103571;R<=103573;R++)Ee[R]=0;for(R=103574;R<=103576;R++)Ee[R]=2;for(R=103577;R<=103580;R++)Ee[R]=0;for(R=103581;R<=103583;R++)Ee[R]=2;for(R=103595;R<=103694;R++)Ee[R]=0;for(R=103696;R<=103699;R++)Ee[R]=0;for(R=103700;R<=103793;R++)Ee[R]=2;for(R=103794;R<=103890;R++)Ee[R]=0;for(R=103891;R<=103896;R++)Ee[R]=2;for(R=103900;R<=103971;R++)Ee[R]=2;for(R=103972;R<=103977;R++)Ee[R]=0;for(R=112e3;R<=112101;R++)Ee[R]=0;const qae=[102100,102113,3857,3785,900913],zIe=[104905,104971],qIe=[4326,...qae,...zIe],uE=[-20037508342788905e-9,20037508342788905e-9],tO=[-20037508342787e-6,20037508342787e-6],Yk={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:uE,origin:tO,dx:1e-5},Vae={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:uE,origin:tO,dx:1e-5},102100:Yk,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:uE,origin:tO,dx:1e-5},3857:Yk,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Yk};function Jo(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,s=e.wkid;if(i!=null||s!=null){if(i===s||td(t)&&td(e))return!0;const o=t.latestWkid;if(o!=null&&s===o)return!0;const l=e.latestWkid;return l!=null&&i===l}let n,r;return t.wkt2&&e.wkt2?(n=t.wkt2,r=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,r=e.wkt),!(!n||!r)&&n.toUpperCase()===r.toUpperCase()}async function Wut(t,e){if(t===e)return!0;Bq()||await Hq();const i=r=>{var u;const o=r.wkt2||r.wkt;if(o){const f=cE.fromString(zn.PE_TYPE_NONE,o);return f==null?void 0:f.getCode()}const l=r.wkid??r.latestWkid;return l?(u=cE.coordsys(l))==null?void 0:u.getCode():null},s=t?i(t):null,n=e?i(e):null;return s!=null&&n!=null&&s===n}function Hb(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Vae[e]||null}function Zut(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const s=t.wkt||t.wkt2;return JSON.stringify(s?i?{wkt:s,vcsWkid:i}:{wkt:s}:{})}function w2(t){if(!Ou(t))return!1;const{wkid:e}=t;if(e)return Ee[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function VIe(t){return!(Gae(t)||jae(t))}function tv(t){return(t==null?void 0:t.wkid)===4326}function Kut(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function gW(t){return(t==null?void 0:t.wkid)===ev.CGCS2000}function td(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&qae.includes(e)}function GIe(t){return(t==null?void 0:t.wkid)===32662}function PM(t){return t===ev.GCSMARS2000||t===ev.GCSMARS2000_SPHERE}function Gae(t){return PM(t==null?void 0:t.wkid)}function TM(t){return t===ev.GCSMOON2000}function jae(t){return TM(t==null?void 0:t.wkid)}function jIe(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&qIe.includes(e)}function Ou(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Bae={wkid:4326,wkt:yM(Vae[4326].wkTemplate,{Central_Meridian:"0.0"})},Hae={wkid:102100,latestWkid:3857},BIe={wkid:32662};function Uq(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const HIe=Uq(cr),Yq=Uq(uf),Xq=Uq(xg),UIe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${cr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},YIe=Yq.wkt.toUpperCase(),XIe=Xq.wkt.toUpperCase();function Wq(t){if(t!=null&&Ou(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(PM(e))return uf;const s=i==null?void 0:i.toUpperCase();if(i&&s===YIe)return uf;if(TM(e)||s&&s===XIe)return xg}return cr}function Jut(t){return PM(t)?uf:TM(t)?xg:cr}function G9(t){return Jo(t,HIe)}function wg(t){return G9(t)||Jo(t,Yq)||Jo(t,Xq)}const Qut=39.37,WIe=cr.radius*Math.PI/200,Uae=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Vy=Ee,Yae=/UNIT\[([^\]]+)]/i,Xae=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),ZIe=wa()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),wd=t=>t*t,i0=t=>t*t*t,hE={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:wd(.001)},"square-centimeters":{inBaseUnits:wd(.01)},"square-decimeters":{inBaseUnits:wd(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:wd(1e3)},"square-inches":{inBaseUnits:wd(.0254)},"square-feet":{inBaseUnits:wd(.3048)},"square-yards":{inBaseUnits:wd(.9144)},"square-miles":{inBaseUnits:wd(1609.344)},"square-us-feet":{inBaseUnits:wd(1200/3937)},acres:{inBaseUnits:.0015625*wd(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*i0(.001)},"cubic-centimeters":{inBaseUnits:1e3*i0(.01)},"cubic-decimeters":{inBaseUnits:1e3*i0(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*i0(1e3)},"cubic-inches":{inBaseUnits:1e3*i0(.0254)},"cubic-feet":{inBaseUnits:1e3*i0(.3048)},"cubic-yards":{inBaseUnits:1e3*i0(.9144)},"cubic-miles":{inBaseUnits:1e3*i0(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},KIe=(()=>{const t={};for(const e in hE)for(const i in hE[e].units)t[i]=e;return t})();function JIe(t,e,i){return t*hE[i].units[e].inBaseUnits}function QIe(t,e,i){return t/hE[i].units[e].inBaseUnits}const eht=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],Wae=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],e9e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function tht(t){return t==="imperial"||t==="metric"}function iv(t){const e=KIe[t];if(!e)throw new Error("unknown type");return e}function yW(t,e=null){return e=e||iv(t),hE[e].baseUnit===t}function cn(t,e,i){if(e===i)return t;const s=iv(e);if(s!==iv(i))throw new Error("incompatible units");const n=yW(e,s)?t:JIe(t,e,s);return yW(i,s)?n:QIe(n,i,s)}function t9e(t,e,i,s=!1){if(!s&&i.isGeographic)throw new Error("Unable to convert from a linear unit to an angular unit.");const n=ox(i);return e!==n&&(t=n?cn(t,e,n):cn(t,e,"meters")/Zp(i)),t}function i9e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function iht(t){return i9e(t)}function sht(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function nht(t,e){const i=cn(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function rht(t,e){const i=cn(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function oht(t,e){const i=cn(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function aht(t,e){const i=cn(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function lht(t,e){const i=cn(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function cht(t,e){const i=cn(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Zae(t,e,i){return cn(t,e,"meters")/(i*Math.PI/180)}function Kae(t){return ZIe.fromJSON(t.toLowerCase())||null}function j9(t){if(t!=null&&!VIe(t))return 1;const e=Zp(t);return e>1e5?1:e}function Jae(t){return Zp(t)>=Wq(t).metersPerDegree?"meters":ox(t)}function Zp(t,e=cr.metersPerDegree){return Zq(t,!0)??e}function Zq(t,e=!1){const i=(t==null?void 0:t.wkid)??null,s=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(PM(i))return uf.metersPerDegree;if(TM(i))return xg.metersPerDegree;n=Vy.values[Vy[i]],!n&&e&&Xae.has(i)&&(n=WIe)}else s&&(IM(s)?n=vW(Uae.exec(s),n):tle(s)&&(n=vW(Yae.exec(s),n)));return n}function uht(t){return w2(t)?1:Zp(t)}function vW(t,e){return t!=null&&t[1]?Qae(t[1]):e}function Qae(t){return parseFloat(t.split(",")[1])}function ox(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let s=null;if(e)s=Vy.units[Vy[e]];else if(i){const n=IM(i)?Uae:tle(i)?Yae:null;if(n){const r=n.exec(i);r!=null&&r[1]&&(s=r9e(r[1]))}}return s!=null?Kae(s):null}function s9e(t){const e=ox(t);return e!=null&&Wae.includes(e)?e:null}function ele(t){const e=Jae(t);return e!=null&&Wae.includes(e)?e:null}function hht(t){const e=ox(t);return e==null?null:e9e.get(e)}function tle(t){return/^GEOCCS/i.test(t)}function IM(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const n9e=1e-7;function r9e(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!Vy.units.includes(i)){const s=Qae(t);i=null;const n=Vy.values;for(let r=0;r<n.length;++r)if(Math.abs(s-n[r])<n9e){i=Vy.units[r];break}}return i}function dht(t){const e=ox(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const o9e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},a9e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},l9e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},c9e=wa()(o9e),u9e=wa()(a9e),fht=wa()(l9e);function Ft(t,e,i){let s,n;return e===void 0?(n=t,s=[void 0]):typeof e!="string"?(n=t,s=[void 0],i=e):(n=e,s=Array.isArray(t)?t:[t]),(r,o)=>{const l=r.constructor.prototype;for(const u of s){const f=sae(r,u,n);f.write&&typeof f.write=="object"||(f.write={}),i&&(f.write.target=i),f.write.writer=l[o]}}}var Td;let nn=Td=class extends wt{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return Td.WebMercator;if((t==null?void 0:t.wkid)===4326)return Td.WGS84;const e=new Td;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return tv(this)}get isWebMercator(){return td(this)}get isGeographic(){return w2(this)}get isWrappable(){return jIe(this)}get metersPerUnit(){return Zp(this)}get unit(){return ox(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Td.WGS84)return new Td(Bae);if(this===Td.WebMercator)return new Td(Hae);const t=new Td;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=Ue(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||s?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return Jo(this,t)}toJSON(t){return this.write(void 0,t)}};nn.GCS_NAD_1927=null,nn.WGS84=null,nn.WebMercator=null,nn.PlateCarree=null,I([N({readOnly:!0})],nn.prototype,"isWGS84",null),I([N({readOnly:!0})],nn.prototype,"isWebMercator",null),I([N({readOnly:!0})],nn.prototype,"isGeographic",null),I([N({readOnly:!0})],nn.prototype,"isWrappable",null),I([N({type:wn,json:{write:!0}})],nn.prototype,"latestWkid",void 0),I([N({readOnly:!0})],nn.prototype,"metersPerUnit",null),I([N({readOnly:!0})],nn.prototype,"unit",null),I([N({type:wn,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],nn.prototype,"wkid",void 0),I([N({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],nn.prototype,"wkt",void 0),I([Ft("wkt"),Ft("web-scene","wkt")],nn.prototype,"writeWkt",null),I([N({type:String,json:{write:!1}})],nn.prototype,"wkt2",void 0),I([N({type:wn,json:{write:!0}})],nn.prototype,"vcsWkid",void 0),I([N({type:wn,json:{write:!0}})],nn.prototype,"latestVcsWkid",void 0),I([N()],nn.prototype,"imageCoordinateSystem",void 0),nn=Td=I([ke("esri.geometry.SpatialReference")],nn),nn.prototype.toJSON.isDefaultToJSON=!0,nn.GCS_NAD_1927=Ei.freeze(new nn({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),nn.WGS84=Ei.freeze(new nn(Bae)),nn.WebMercator=Ei.freeze(new nn(Hae)),nn.PlateCarree=Ei.freeze(new nn(BIe));const qi=nn;let Id=class extends wt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=qi.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof qi)return e;if(e!=null){const s=new qi;return s.read(e,i),s}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};I([N()],Id.prototype,"type",void 0),I([N({readOnly:!0})],Id.prototype,"cache",null),I([N({readOnly:!0})],Id.prototype,"extent",null),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Id.prototype,"hasM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Id.prototype,"hasZ",void 0),I([N({type:qi,json:{write:!0},value:qi.WGS84})],Id.prototype,"spatialReference",void 0),I([At("spatialReference")],Id.prototype,"readSpatialReference",null),Id=I([ke("esri.geometry.Geometry")],Id);const Dv=Id,h9e=Object.prototype.toString;function d9e(t){const e="__accessorMetadata__"in t?Ko(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return f9e.apply(this,i)}}function f9e(t,e,i,s){_M(t,e).cast=s}function p9e(t){return(e,i)=>{_M(e,t).cast=e[i]}}function Sn(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&h9e.call(t[0])==="[object Function]"?d9e(t[0]):t.length===1&&typeof t[0]=="string"?p9e(t[0]):void 0}const m9e=57.29577951308232,g9e=.017453292519943;function _W(t){return t*m9e}function bW(t){return t*g9e}function mht(t){return t/cr.radius}function ght(t){return Math.PI/2-2*Math.atan(Math.exp(-t/cr.radius))}function iO(t){return t.wkid!=null||t.wkt!=null}const Xk=[0,0];function B9(t,e,i,s,n){const r=t,o=n;if(o.spatialReference=i,"x"in r&&"x"in o)[o.x,o.y]=e(r.x,r.y,Xk,s);else if("xmin"in r&&"xmin"in o)[o.xmin,o.ymin]=e(r.xmin,r.ymin,Xk,s),[o.xmax,o.ymax]=e(r.xmax,r.ymax,Xk,s);else if("paths"in r&&"paths"in o||"rings"in r&&"rings"in o){const l="paths"in r?r.paths:r.rings,u=[];let f;for(let y=0;y<l.length;y++){const _=l[y];f=[],u.push(f);for(let x=0;x<_.length;x++)f.push(e(_[x][0],_[x][1],[0,0],s)),_[x].length>2&&f[x].push(_[x][2]),_[x].length>3&&f[x].push(_[x][3])}"paths"in o?o.paths=u:o.rings=u}else if("points"in r&&"points"in o){const l=r.points,u=[];for(let f=0;f<l.length;f++)u[f]=e(l[f][0],l[f][1],[0,0],s),l[f].length>2&&u[f].push(l[f][2]),l[f].length>3&&u[f].push(l[f][3]);o.points=u}return n}function ET(t,e){const i=t&&(iO(t)?t:t.spatialReference),s=e&&(iO(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!s)&&(!!Jo(s,i)||td(s)&&tv(i)||td(i)&&tv(s))}function ile(t,e){if(t==null)return null;const i=t.spatialReference,s=e&&(iO(e)?e:e.spatialReference);return ET(i,s)?Jo(i,s)?Ue(t):td(s)?B9(t,Mb,qi.WebMercator,!1,Ue(t)):tv(s)?B9(t,MM,qi.WGS84,!1,Ue(t)):null:null}function Mb(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const s=bW(e);return i[0]=bW(t)*cr.radius,i[1]=cr.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function MM(t,e,i=[0,0],s=!1){if(t===uE[0])i[0]=-180;else if(t===uE[1])i[0]=180;else{const n=_W(t/cr.radius);i[0]=s?n:n-360*Math.floor((n+180)/360)}return i[1]=_W(Math.PI/2-2*Math.atan(Math.exp(-e/cr.radius))),i}function CT(t,e=!1,i=Ue(t)){return B9(t,Mb,qi.WebMercator,e,i)}function Ab(t,e=!1,i=Ue(t)){return B9(t,MM,qi.WGS84,e,i)}function y9e(t,e){const i=t.x-e.x,s=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+s*s+n*n)}function v9e(t){var e;return((e=sle(t,nle))==null?void 0:e[0])??null}function _9e(t){var e;return((e=sle(t,nle))==null?void 0:e[1])??null}function sle({x:t,y:e,spatialReference:i},s=[0,0]){if(i){if(td(i))return MM(t,e,s);if(w2(i))return s[0]=t,s[1]=e,s}return null}const nle=[0,0];var PT;const Wk=[0,0];function xW(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ol=PT=class extends Dv{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Ei.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,s,n){let r;if(Array.isArray(t))r=t,n=e,t=r[0],e=r[1],i=r[2],s=r[3];else if(t&&typeof t=="object"){if(r=t,t=r.x!=null?r.x:r.longitude,e=r.y!=null?r.y:r.latitude,i=r.z,s=r.m,(n=r.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new qi(n)),r.longitude!=null||r.latitude!=null){if(r.longitude==null)zt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(r.latitude==null)zt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!r.declaredClass&&(n!=null&&n.isWebMercator)){const l=Mb(r.longitude,r.latitude,Wk);t=l[0],e=l[1]}}}else xW(i)?(n=i,i=null):xW(s)&&(n=s,s=null);const o={x:t,y:e};return o.x==null&&o.y!=null?zt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&zt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),s!=null&&(o.m=s),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return _9e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Mb(i,t,Wk)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return v9e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Mb(t,e,Wk)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new PT;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return PT.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:s,m:n,spatialReference:r}=this,{z:o,m:l}=t;let{x:u,y:f,spatialReference:y}=t;if(!r.equals(y))if(r.isWebMercator&&y.isWGS84)[u,f]=Mb(u,f),y=r;else{if(!r.isWGS84||!y.isWebMercator)return!1;[u,f]=MM(u,f),y=r}return e===u&&i===f&&s===o&&n===l&&r.wkid===y.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Hb(this.spatialReference);if(!t)return this;let e=this.x;const[i,s]=t.valid,n=2*s;let r;return e>s?(r=Math.ceil(Math.abs(e-s)/n),e-=r*n):e<i&&(r=Math.ceil(Math.abs(e-i)/n),e+=r*n),this._set("x",e),this}distance(t){return y9e(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};I([N({readOnly:!0})],ol.prototype,"cache",null),I([N({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ol.prototype,"hasM",null),I([N({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ol.prototype,"hasZ",null),I([N({type:Number})],ol.prototype,"latitude",null),I([N({type:Number})],ol.prototype,"longitude",null),I([N({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Sn(t=>isNaN(t)?t:sx(t))],ol.prototype,"x",void 0),I([Ft("x")],ol.prototype,"writeX",null),I([At("x")],ol.prototype,"readX",null),I([N({type:Number,json:{write:!0}})],ol.prototype,"y",void 0),I([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ol.prototype,"z",void 0),I([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ol.prototype,"m",void 0),ol=PT=I([ke("esri.geometry.Point")],ol),ol.prototype.toJSON.isDefaultToJSON=!0;const Yi=ol,Zk=[0,0];function rle(t,e){return e!=null&&ul(t,e.x,e.y,e.z)}function yht(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!S2(t,i))return!1;return!0}function b9e(t,e){const{xmin:i,ymin:s,zmin:n,xmax:r,ymax:o,zmax:l}=e;return t.hasZ&&e.hasZ?ul(t,i,s,n)&&ul(t,i,o,n)&&ul(t,r,o,n)&&ul(t,r,s,n)&&ul(t,i,s,l)&&ul(t,i,o,l)&&ul(t,r,o,l)&&ul(t,r,s,l):ul(t,i,s)&&ul(t,i,o)&&ul(t,r,o)&&ul(t,r,s)}function S2(t,e){return ul(t,e[0],e[1])}function x9e(t,e){return ul(t,e[0],e[1],e[2])}function ul(t,e,i,s){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function w9e(t,e){return Zk[1]=e.y,Zk[0]=e.x,S9e(t,Zk)}function S9e(t,e){return ole(t.rings,e)}function ole(t,e){if(!t)return!1;if(E9e(t))return wW(!1,t,e);let i=!1;for(let s=0,n=t.length;s<n;s++)i=wW(i,t[s],e);return i}function E9e(t){return!Array.isArray(t[0][0])}function wW(t,e,i){const[s,n]=i;let r=t,o=0;for(let l=0,u=e.length;l<u;l++){o++,o===u&&(o=0);const[f,y]=e[l],[_,x]=e[o];(y<n&&x>=n||x<n&&y>=n)&&f+(n-y)/(x-y)*(_-f)<s&&(r=!r)}return r}function C9e(t,e){return rle(t,e)}function P9e(t,e){const i=t.hasZ&&e.hasZ;let s,n,r;if(t.xmin<=e.xmin){if(s=e.xmin,t.xmax<s)return!1}else if(s=t.xmin,e.xmax<s)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(r=e.zmin,t.zmax<r)return!1}else if(r=t.zmin,e.zmax<r)return!1}return!0}function T9e(t,e){const{points:i,hasZ:s}=e,n=s?x9e:S2;for(const r of i)if(n(t,r))return!0;return!1}const sv=[0,0],nv=[0,0],rv=[0,0],ov=[0,0],I9e=[sv,nv,rv,ov],ale=[[rv,sv],[sv,nv],[nv,ov],[ov,rv]];function M9e(t,e){return A9e(t,e.rings)}function A9e(t,e){sv[0]=t.xmin,sv[1]=t.ymax,nv[0]=t.xmax,nv[1]=t.ymax,rv[0]=t.xmin,rv[1]=t.ymin,ov[0]=t.xmax,ov[1]=t.ymin;for(const i of I9e)if(ole(e,i))return!0;for(const i of e){if(!i.length)continue;let s=i[0];if(S2(t,s))return!0;for(let n=1;n<i.length;n++){const r=i[n];if(S2(t,r)||lle(s,r,ale))return!0;s=r}}return!1}function D9e(t,e){sv[0]=t.xmin,sv[1]=t.ymax,nv[0]=t.xmax,nv[1]=t.ymax,rv[0]=t.xmin,rv[1]=t.ymin,ov[0]=t.xmax,ov[1]=t.ymin;const i=e.paths;for(const s of i){if(!i.length)continue;let n=s[0];if(S2(t,n))return!0;for(let r=1;r<s.length;r++){const o=s[r];if(S2(t,o)||lle(n,o,ale))return!0;n=o}}return!1}const ko=[0,0];function k9e(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const r=i[n],o=i[n+1];for(let l=e+1;l<t.length;l++)for(let u=0;u<t[l].length-1;u++){const f=t[l][u],y=t[l][u+1];if(sO(r,o,f,y,ko)&&!(ko[0]===r[0]&&ko[1]===r[1]||ko[0]===f[0]&&ko[1]===f[1]||ko[0]===o[0]&&ko[1]===o[1]||ko[0]===y[0]&&ko[1]===y[1]))return!0}}const s=i.length;if(!(s<=4))for(let n=0;n<s-3;n++){let r=s-1;n===0&&(r=s-2);const o=i[n],l=i[n+1];for(let u=n+2;u<r;u++){const f=i[u],y=i[u+1];if(sO(o,l,f,y,ko)&&!(ko[0]===o[0]&&ko[1]===o[1]||ko[0]===f[0]&&ko[1]===f[1]||ko[0]===l[0]&&ko[1]===l[1]||ko[0]===y[0]&&ko[1]===y[1]))return!0}}}return!1}function lle(t,e,i){for(let s=0;s<i.length;s++)if(sO(t,e,i[s][0],i[s][1]))return!0;return!1}function sO(t,e,i,s,n){const[r,o]=t,[l,u]=e,[f,y]=i,[_,x]=s,S=_-f,P=r-f,A=l-r,k=x-y,$=o-y,F=u-o,G=k*A-S*F;if(G===0)return!1;const V=(S*$-k*P)/G,B=(A*$-F*P)/G;return V>=0&&V<=1&&B>=0&&B<=1&&(n&&(n[0]=r+V*(l-r),n[1]=o+V*(u-o)),!0)}function N9e(t){switch(t){case"esriGeometryEnvelope":case"extent":return P9e;case"esriGeometryMultipoint":case"multipoint":return T9e;case"esriGeometryPoint":case"point":return C9e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return M9e;case"esriGeometryPolyline":case"polyline":return D9e}}var pu;function $9e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function s0(t,e,i){return e==null?i:i==null?e:t(e,i)}let vo=pu=class extends Dv{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,s,n){return $9e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?qi.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:s,spatialReference:n??qi.WGS84}}static fromBounds(t,e){return new pu({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new pu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Yi({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new pu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&ET(e,i)&&(t=e.isWebMercator?CT(t):Ab(t,!0)),t.type==="point"?rle(this,t):t.type==="extent"&&b9e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&ET(e,i)&&(t=e.isWebMercator?CT(t):Ab(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,s=this.height*e;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Jo(e,i)&&ET(e,i)&&(t=e.isWebMercator?CT(t):Ab(t,!0)),N9e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=s0(Math.min,this.zmin,t.zmin),this.zmax=s0(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=s0(Math.min,this.mmin,t.mmin),this.mmax=s0(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=s0(Math.max,this.zmin,t.zmin),this.zmax=s0(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=s0(Math.max,this.mmin,t.mmin),this.mmax=s0(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Hb(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const s=e.isWebMercator?Ab(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(s.x=Kk(s.x,t).x),this.spatialReference=new qi(yM((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let e=null;const[i,s]=t.valid,n=this.xmin,r=this.xmax;return n>=i&&n<=s&&r>=i&&r<=s||(e=this.center),e}_normalize(t,e,i){const s=this.spatialReference;if(!s)return this;const n=i??Hb(s);if(n==null)return this;const r=this._getParts(n).map(u=>u.extent);if(r.length<2)return r[0]||this;if(r.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return r;let o=!0,l=!0;return r.forEach(u=>{u.hasZ||(o=!1),u.hasM||(l=!1)}),{rings:r.map(u=>{const f=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(o){const y=(u.zmax-u.zmin)/2;for(let _=0;_<f.length;_++)f[_].push(y)}if(l){const y=(u.mmax-u.mmin)/2;for(let _=0;_<f.length;_++)f[_].push(y)}return f}),hasZ:o,hasM:l,spatialReference:s}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:r,spatialReference:o}=this,l=this.width,u=this.xmin,f=this.xmax;let y;t=t||Hb(o);const[_,x]=t.valid;y=Kk(this.xmin,t);const S=y.x,P=y.frameId;y=Kk(this.xmax,t);const A=y.x,k=y.frameId,$=S===A&&l>0;if(l>2*x){const F=new pu(u<f?S:A,n,x,r,o),G=new pu(_,n,u<f?A:S,r,o),V=new pu(0,n,x,r,o),B=new pu(_,n,0,r,o),W=[],J=[];F.contains(V)&&W.push(P),F.contains(B)&&J.push(P),G.contains(V)&&W.push(k),G.contains(B)&&J.push(k);for(let re=P+1;re<k;re++)W.push(re),J.push(re);e.push({extent:F,frameIds:[P]},{extent:G,frameIds:[k]},{extent:V,frameIds:W},{extent:B,frameIds:J})}else S>A||$?e.push({extent:new pu(S,n,x,r,o),frameIds:[P]},{extent:new pu(_,n,A,r,o),frameIds:[k]}):e.push({extent:new pu(S,n,A,r,o),frameIds:[P]});this.cache._parts=e}const i=this.hasZ,s=this.hasM;if(i||s){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),s&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let r=0;r<e.length;r++)e[r].extent.set(n)}return e}};function Kk(t,e){const[i,s]=e.valid,n=2*s;let r,o=0;return t>s?(r=Math.ceil(Math.abs(t-s)/n),t-=r*n,o=r):t<i&&(r=Math.ceil(Math.abs(t-i)/n),t+=r*n,o=-r),{x:t,frameId:o}}I([N({readOnly:!0})],vo.prototype,"cache",null),I([N({readOnly:!0})],vo.prototype,"center",null),I([N({readOnly:!0})],vo.prototype,"extent",null),I([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],vo.prototype,"hasM",null),I([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],vo.prototype,"hasZ",null),I([N({readOnly:!0})],vo.prototype,"height",null),I([N({readOnly:!0})],vo.prototype,"width",null),I([N({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],vo.prototype,"xmin",void 0),I([N({type:Number,json:{write:!0}})],vo.prototype,"ymin",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],vo.prototype,"mmin",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],vo.prototype,"zmin",void 0),I([N({type:Number,json:{write:!0}})],vo.prototype,"xmax",void 0),I([N({type:Number,json:{write:!0}})],vo.prototype,"ymax",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],vo.prototype,"mmax",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],vo.prototype,"zmax",void 0),vo=pu=I([ke("esri.geometry.Extent")],vo),vo.prototype.toJSON.isDefaultToJSON=!0;const ur=vo;let SS;var Hse,Use;const O9e=((Hse=globalThis.esriConfig)==null?void 0:Hse.locale)??((Use=globalThis.dojoConfig)==null?void 0:Use.locale);var Yse;const ES=(Yse=globalThis.document)==null?void 0:Yse.documentElement;function cle(){var i;const t=ES==null?void 0:ES.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return O9e??t??e??"en"}function kc(){return SS===void 0&&(SS=cle()),SS}function vht(t=kc()){const e=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const TT=[];function R9e(t){return TT.push(t),ds(()=>TT.splice(TT.indexOf(t),1))}const IT=[];function Kq(t){return IT.push(t),ds(()=>IT.splice(IT.indexOf(t),1))}function SW(){const t=cle();SS!==t&&([...IT].forEach(e=>e(t)),SS=t,[...TT].forEach(e=>e(t)))}var Xse;(Xse=globalThis.addEventListener)==null||Xse.call(globalThis,"languagechange",SW),ES&&new MutationObserver(()=>{SW()}).observe(ES,{attributeFilter:["lang"]});let ZP;function L9e(t){return ZP&&!ZP.destroyed||(ZP=t()),ZP}var nO;const F9e=new ps({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let mu=nO=class extends Ei{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new nO({categories:this.categories?Ue(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let s="";if(this.extent){const o=ile(this.extent,qi.WGS84);o!=null&&(s=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const r={categories:i,bbox:s,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(r.sortField=this.sortField.split(",").map(o=>F9e.toJSON(o.trim())).join(","),r.sortOrder=this.sortOrder),{query:{...e,...r}}}};I([N()],mu.prototype,"categories",void 0),I([N()],mu.prototype,"disableExtraQuery",void 0),I([N({type:ur})],mu.prototype,"extent",void 0),I([N()],mu.prototype,"filter",void 0),I([N()],mu.prototype,"num",void 0),I([N()],mu.prototype,"query",void 0),I([N()],mu.prototype,"sortField",void 0),I([N()],mu.prototype,"sortOrder",null),I([N()],mu.prototype,"start",void 0),mu=nO=I([ke("esri.portal.PortalQueryParams")],mu);const Fh=mu;var rO;let Zr=rO=class extends wt{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new rt("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new rO({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Ko(Fh,t);const s=this.portal;return parseFloat(s.currentVersion)>5?(i=i||new Fh,s.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Fh,i.query="group:"+this.id+(i.query?" "+i.query:""),s.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(s=>{const n=s.contentCategorySetsGroupQuery;if(n){const r=new Fh({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(r,e)}throw new rt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(s=>{if(s.total){const n=s.results[0],r=new Fh({num:1,query:`typekeywords:"${t}"`});return n.queryItems(r,e)}throw new rt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(s=>s.total?s.results[0].fetchData("json",e).then(n=>{const r=n==null?void 0:n.categorySchema;return r!=null&&r.length?r:[]}):[])}};I([N()],Zr.prototype,"access",void 0),I([N({type:Date})],Zr.prototype,"created",void 0),I([N()],Zr.prototype,"description",void 0),I([N()],Zr.prototype,"id",void 0),I([N()],Zr.prototype,"isInvitationOnly",void 0),I([N({type:Date})],Zr.prototype,"modified",void 0),I([N()],Zr.prototype,"owner",void 0),I([N()],Zr.prototype,"portal",void 0),I([N()],Zr.prototype,"snippet",void 0),I([N()],Zr.prototype,"sortField",void 0),I([N()],Zr.prototype,"sortOrder",void 0),I([N()],Zr.prototype,"sourceJSON",void 0),I([N()],Zr.prototype,"tags",void 0),I([N()],Zr.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Zr.prototype,"thumbnailUrl",null),I([N()],Zr.prototype,"title",void 0),I([N({readOnly:!0})],Zr.prototype,"url",null),Zr=rO=I([ke("esri.portal.PortalGroup")],Zr);const oO=Zr;let R1=class extends Ei{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};I([N()],R1.prototype,"nextQueryParams",void 0),I([N()],R1.prototype,"queryParams",void 0),I([N()],R1.prototype,"results",void 0),I([N()],R1.prototype,"total",void 0),R1=I([ke("esri.portal.PortalQueryResult")],R1);const z9e=R1;let sp=class extends wt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new rt("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};I([N({type:Date})],sp.prototype,"created",void 0),I([N()],sp.prototype,"id",void 0),I([N()],sp.prototype,"portal",void 0),I([N()],sp.prototype,"title",void 0),I([N({readOnly:!0})],sp.prototype,"url",null),I([N()],sp.prototype,"username",void 0),sp=I([ke("esri.portal.PortalFolder")],sp);const q9e=sp;var aO;let Cn=aO=class extends wt{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,s=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let r=this.userContentUrl;return s&&(r+="/"+(typeof s=="string"?s:s.id)),this.portal.request(r+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const s=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:s}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",s=[],n=t.map(r=>r.id);if(n.length){const r={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,r);for(const l of o.results){const u=t.find(_=>l.itemId===_.id),f=l.success;let y=null;f?(u.id=null,u.portal=null):l.error&&(y=new rt("portal:delete-item-failed",l.error.message,l.error)),s.push({item:u,success:f,error:y})}}return s}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(s=>{const n=q9e.fromJSON(s);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const s=oO.fromJSON(i);return s.portal=this.portal,s}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await nt(()=>Promise.resolve().then(()=>Zhe),void 0,import.meta.url),s={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:s});let r;return n!=null&&n.items?(r=n.items.map(o=>{const l=i.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(r.map(o=>o.load())),{items:r,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new oO({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new rt("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,s=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:s})}toJSON(){throw new rt("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new aO({sourceJSON:t});return e.read(t),e}};I([N()],Cn.prototype,"access",void 0),I([N({type:Date})],Cn.prototype,"created",void 0),I([N()],Cn.prototype,"culture",void 0),I([N()],Cn.prototype,"description",void 0),I([N()],Cn.prototype,"email",void 0),I([N()],Cn.prototype,"favGroupId",void 0),I([N()],Cn.prototype,"fullName",void 0),I([N({type:Date})],Cn.prototype,"modified",void 0),I([N()],Cn.prototype,"orgId",void 0),I([N()],Cn.prototype,"portal",void 0),I([N()],Cn.prototype,"preferredView",void 0),I([N()],Cn.prototype,"privileges",void 0),I([N()],Cn.prototype,"region",void 0),I([N()],Cn.prototype,"role",void 0),I([N()],Cn.prototype,"roleId",void 0),I([N()],Cn.prototype,"sourceJSON",void 0),I([N()],Cn.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Cn.prototype,"thumbnailUrl",null),I([N()],Cn.prototype,"units",void 0),I([N({readOnly:!0})],Cn.prototype,"userContentUrl",null),I([N({readOnly:!0})],Cn.prototype,"url",null),I([N()],Cn.prototype,"username",void 0),I([N()],Cn.prototype,"userLicenseTypeId",void 0),I([N()],Cn.prototype,"userType",void 0),Cn=aO=I([ke("esri.portal.PortalUser")],Cn);const Jq=Cn;var fc;let Ow;const EW={PortalGroup:()=>Promise.resolve({default:oO}),PortalItem:()=>nt(()=>Promise.resolve().then(()=>Zhe),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:Jq})};let Ot=fc=class extends Nq(SC){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Gs.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){CW.unregister(this),this.defaultBasemap=no(this.defaultBasemap),this.defaultDevBasemap=no(this.defaultDevBasemap),this.defaultVectorBasemap=no(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Co(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Gs.request.trustedServers.includes(e)||Gs.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get hasAPIKey(){return kae(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.slice(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=Jq.fromJSON(t),e.portal=this),e}load(t){const e=nt(()=>import("./Basemap-txMq4mSe.js").then(i=>i.B),[],import.meta.url).then(({default:i})=>{Ql(t),Ow=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var s;if(!this.hasAPIKey&&Li){const n=Li;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==fc.AUTH_MODE_AUTO&&this.authMode!==fc.AUTH_MODE_NO_PROMPT||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",V9e(new WeakRef(this))),CW.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await nt(async()=>{const{default:i}=await import("./ElevationLayer-BrAtfbHo.js");return{default:i}},__vite__mapDeps([82,83,6,7,84,85,39,86]),import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(t,e);i.unshift(...s)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const e=new Fh;e.query=this.default3DBasemapQuery,e.disableExtraQuery=!0;const i=(await this.queryItems(e,t)).results.find(s=>s.type==="Web Scene");return i?new Ow({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Rc(t)?Promise.reject(or()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Fh({num:100,sortField:"title"});if(e!=null&&e.length){const s=[];for(const n of e)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return Rc(t)?Promise.reject(or()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||kc();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||kc();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return L9e(()=>new fc)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const s=this.restUrl+"/portals/self",n={authMode:t,query:{culture:kc().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(s,n)}queryPortal(t,e,i,s){const n=Ko(Fh,e),r=o=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...s}).then(l=>{const u=n.clone();return u.start=l.nextStart,new z9e({nextQueryParams:u,queryParams:n,total:l.total,results:fc._resultsToTypedArray(o,{portal:this},l,s)})}).then(l=>Promise.all(l.results.map(u=>typeof u.when=="function"?u.when():l)).then(()=>l,u=>(Oh(u),l)));return i&&EW[i]?EW[i]().then(({default:o})=>(Ql(s),r(o))):r()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new rt("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===fc.AUTH_MODE_ANONYMOUS||this.authMode===fc.AUTH_MODE_NO_PROMPT&&!Li)return Promise.reject(new rt("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Li?Li.getCredential(this.restUrl,{prompt:this.authMode!==fc.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(s=>{const n=fc._resultsToTypedArray(i,{portal:this},s);return Promise.all(n.map(r=>typeof r.when=="function"?r.when():s)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:s=this.authMode===fc.AUTH_MODE_ANONYMOUS||this.authMode===fc.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:r=!1,method:o="auto",responseType:l="json",signal:u}=e,f={authMode:s,body:n,cacheBust:r,method:o,query:i,responseType:l,timeout:0,signal:u};return e.withCredentials&&(f.withCredentials=!0),Qs(this._normalizeSSL(t),f).then(y=>y.data)}toJSON(){throw new rt("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new fc({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new rt("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Fh;i.query=t||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,e);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const r=await n.queryItems(i,e);return r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new Ow({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const s=new Fh({query:i,disableExtraQuery:!0}),n=await this.queryGroups(s,e);if(!n.total)return[];const r=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=r.sortField||"name",s.sortOrder=r.sortOrder||"desc";const o=await r.queryItems(s,e);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new Ow({portalItem:l})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=Ow.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,s){let n;if(i){const r=s!=null?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(o=>{const l=Object.assign(t?t.fromJSON(o):o,e);return typeof l.load=="function"&&l.load(r),l}))}else n=[];return n}};Ot.AUTH_MODE_ANONYMOUS="anonymous",Ot.AUTH_MODE_AUTO="auto",Ot.AUTH_MODE_IMMEDIATE="immediate",Ot.AUTH_MODE_NO_PROMPT="no-prompt",I([N()],Ot.prototype,"access",void 0),I([N()],Ot.prototype,"allSSL",void 0),I([N()],Ot.prototype,"authMode",void 0),I([N()],Ot.prototype,"authorizedCrossOriginDomains",void 0),I([At("authorizedCrossOriginDomains")],Ot.prototype,"readAuthorizedCrossOriginDomains",null),I([N()],Ot.prototype,"basemapGalleryGroupQuery",void 0),I([N({json:{name:"3DBasemapGalleryGroupQuery"}})],Ot.prototype,"basemapGalleryGroupQuery3D",void 0),I([N()],Ot.prototype,"bingKey",void 0),I([N()],Ot.prototype,"canListApps",void 0),I([N()],Ot.prototype,"canListData",void 0),I([N()],Ot.prototype,"canListPreProvisionedItems",void 0),I([N()],Ot.prototype,"canProvisionDirectPurchase",void 0),I([N()],Ot.prototype,"canSearchPublic",void 0),I([N()],Ot.prototype,"canShareBingPublic",void 0),I([N()],Ot.prototype,"canSharePublic",void 0),I([N()],Ot.prototype,"canSignInArcGIS",void 0),I([N()],Ot.prototype,"canSignInIDP",void 0),I([N()],Ot.prototype,"colorSetsGroupQuery",void 0),I([N()],Ot.prototype,"commentsEnabled",void 0),I([N({type:Date})],Ot.prototype,"created",void 0),I([N()],Ot.prototype,"credential",void 0),I([N()],Ot.prototype,"culture",void 0),I([N()],Ot.prototype,"currentVersion",void 0),I([N()],Ot.prototype,"customBaseUrl",void 0),I([N()],Ot.prototype,"default3DBasemapQuery",void 0),I([N()],Ot.prototype,"defaultBasemap",void 0),I([At("defaultBasemap")],Ot.prototype,"readDefaultBasemap",null),I([N()],Ot.prototype,"defaultDevBasemap",void 0),I([At("defaultDevBasemap")],Ot.prototype,"readDefaultDevBasemap",null),I([N({type:ur})],Ot.prototype,"defaultExtent",void 0),I([N()],Ot.prototype,"defaultVectorBasemap",void 0),I([At("defaultVectorBasemap")],Ot.prototype,"readDefaultVectorBasemap",null),I([N()],Ot.prototype,"description",void 0),I([N()],Ot.prototype,"devBasemapGalleryGroupQuery",void 0),I([N()],Ot.prototype,"eueiEnabled",void 0),I([N({readOnly:!0})],Ot.prototype,"extraQuery",null),I([N()],Ot.prototype,"featuredGroups",void 0),I([N()],Ot.prototype,"featuredItemsGroupQuery",void 0),I([N()],Ot.prototype,"galleryTemplatesGroupQuery",void 0),I([N()],Ot.prototype,"layoutGroupQuery",void 0),I([N()],Ot.prototype,"livingAtlasGroupQuery",void 0),I([N({readOnly:!0})],Ot.prototype,"hasAPIKey",null),I([N()],Ot.prototype,"hasCategorySchema",void 0),I([N()],Ot.prototype,"hasClassificationSchema",void 0),I([N()],Ot.prototype,"helpBase",void 0),I([N()],Ot.prototype,"helperServices",void 0),I([N()],Ot.prototype,"helpMap",void 0),I([N()],Ot.prototype,"homePageFeaturedContent",void 0),I([N()],Ot.prototype,"homePageFeaturedContentCount",void 0),I([N()],Ot.prototype,"httpPort",void 0),I([N()],Ot.prototype,"httpsPort",void 0),I([N()],Ot.prototype,"id",void 0),I([N()],Ot.prototype,"ipCntryCode",void 0),I([N({readOnly:!0})],Ot.prototype,"isOrganization",null),I([N()],Ot.prototype,"isPortal",void 0),I([N()],Ot.prototype,"isReadOnly",void 0),I([N({readOnly:!0})],Ot.prototype,"itemPageUrl",null),I([N()],Ot.prototype,"layerTemplatesGroupQuery",void 0),I([N()],Ot.prototype,"maxTokenExpirationMinutes",void 0),I([N({type:Date})],Ot.prototype,"modified",void 0),I([N()],Ot.prototype,"name",void 0),I([N()],Ot.prototype,"portalHostname",void 0),I([N()],Ot.prototype,"portalMode",void 0),I([N()],Ot.prototype,"portalProperties",void 0),I([N()],Ot.prototype,"region",void 0),I([N()],Ot.prototype,"recycleBinEnabled",void 0),I([N({readOnly:!0})],Ot.prototype,"restUrl",null),I([N()],Ot.prototype,"rotatorPanels",void 0),I([N()],Ot.prototype,"showHomePageDescription",void 0),I([N()],Ot.prototype,"sourceJSON",void 0),I([N()],Ot.prototype,"staticImagesUrl",void 0),I([N({json:{name:"2DStylesGroupQuery"}})],Ot.prototype,"stylesGroupQuery2d",void 0),I([N({json:{name:"stylesGroupQuery"}})],Ot.prototype,"stylesGroupQuery3d",void 0),I([N()],Ot.prototype,"supportsHostedServices",void 0),I([N()],Ot.prototype,"symbolSetsGroupQuery",void 0),I([N()],Ot.prototype,"templatesGroupQuery",void 0),I([N()],Ot.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Ot.prototype,"thumbnailUrl",null),I([N()],Ot.prototype,"units",void 0),I([N()],Ot.prototype,"url",void 0),I([N()],Ot.prototype,"urlKey",void 0),I([At("urlKey")],Ot.prototype,"readUrlKey",null),I([N()],Ot.prototype,"user",void 0),I([At("user")],Ot.prototype,"readUser",null),I([N()],Ot.prototype,"use3dBasemaps",void 0),I([N()],Ot.prototype,"useDefault3dBasemap",void 0),I([N()],Ot.prototype,"useStandardizedQuery",void 0),I([N()],Ot.prototype,"useVectorBasemaps",void 0),I([N()],Ot.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ot=fc=I([ke("esri.portal.Portal")],Ot);const Lc=Ot,CW=new FinalizationRegistry(t=>{t.remove()});function V9e(t){const e=Li;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let MT=class ule{constructor(){this._emitter=new ule.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,r){var f;let o=(f=this._listenersMap)==null?void 0:f.get(n);if(!o)return!1;const l=this._target||this;let u=!1;for(const y of o.slice()){const _="deref"in y?y.deref():y;_?_==null||_.call(l,r):u=!0}return u&&(o=o.filter(y=>!("deref"in y)||y.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,r){if(Array.isArray(n)){const l=n.map(u=>this.on(u,r));return pm(l)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(r),this._listenersMap.set(n,o),ds(()=>{var f;const l=(f=this._listenersMap)==null?void 0:f.get(n),u=(l==null?void 0:l.indexOf(r))??-1;u>=0&&l.splice(u,1)})}once(n,r){const o=this.on(n,l=>{o.remove();const u="deref"in r?r.deref():r;u==null||u.call(null,l)});return o}hasEventListener(n){var o;const r=(o=this._listenersMap)==null?void 0:o.get(n);return r!=null&&r.length>0}}t.EventEmitter=e,t.EventedMixin=s=>{let n=class extends s{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(r,o){return this._emitter.emit(r,o)}on(r,o){return this._emitter.on(r,o)}once(r,o){return this._emitter.once(r,o)}hasEventListener(r){return this._emitter.hasEventListener(r)}};return n=I([ke("esri.core.Evented")],n),n};let i=class extends Ei{constructor(){super(...arguments),this._emitter=new MT.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,n){return this._emitter.emit(s,n)}on(s,n){return this._emitter.on(s,n)}once(s,n){return this._emitter.once(s,n)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=I([ke("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(MT||(MT={}));const Sa=MT,PW=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class kv extends Error{}class G9e extends kv{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class j9e extends kv{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class B9e extends kv{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Db extends kv{}class hle extends kv{constructor(e){super(`Invalid unit ${e}`)}}class ja extends kv{}class n0 extends kv{constructor(){super("Zone is an abstract class")}}const Bt="numeric",id="short",Nc="long",H9={year:Bt,month:Bt,day:Bt},dle={year:Bt,month:id,day:Bt},H9e={year:Bt,month:id,day:Bt,weekday:id},fle={year:Bt,month:Nc,day:Bt},ple={year:Bt,month:Nc,day:Bt,weekday:Nc},mle={hour:Bt,minute:Bt},gle={hour:Bt,minute:Bt,second:Bt},yle={hour:Bt,minute:Bt,second:Bt,timeZoneName:id},vle={hour:Bt,minute:Bt,second:Bt,timeZoneName:Nc},_le={hour:Bt,minute:Bt,hourCycle:"h23"},ble={hour:Bt,minute:Bt,second:Bt,hourCycle:"h23"},xle={hour:Bt,minute:Bt,second:Bt,hourCycle:"h23",timeZoneName:id},wle={hour:Bt,minute:Bt,second:Bt,hourCycle:"h23",timeZoneName:Nc},Sle={year:Bt,month:Bt,day:Bt,hour:Bt,minute:Bt},Ele={year:Bt,month:Bt,day:Bt,hour:Bt,minute:Bt,second:Bt},Cle={year:Bt,month:id,day:Bt,hour:Bt,minute:Bt},Ple={year:Bt,month:id,day:Bt,hour:Bt,minute:Bt,second:Bt},U9e={year:Bt,month:id,day:Bt,weekday:id,hour:Bt,minute:Bt},Tle={year:Bt,month:Nc,day:Bt,hour:Bt,minute:Bt,timeZoneName:id},Ile={year:Bt,month:Nc,day:Bt,hour:Bt,minute:Bt,second:Bt,timeZoneName:id},Mle={year:Bt,month:Nc,day:Bt,weekday:Nc,hour:Bt,minute:Bt,timeZoneName:Nc},Ale={year:Bt,month:Nc,day:Bt,weekday:Nc,hour:Bt,minute:Bt,second:Bt,timeZoneName:Nc};class ax{get type(){throw new n0}get name(){throw new n0}get ianaName(){return this.name}get isUniversal(){throw new n0}offsetName(e,i){throw new n0}formatOffset(e,i){throw new n0}offset(e){throw new n0}equals(e){throw new n0}get isValid(){throw new n0}}let Jk=null;class AM extends ax{static get instance(){return Jk===null&&(Jk=new AM),Jk}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return zle(e,i,s)}formatOffset(e,i){return CS(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let AT={};function Y9e(t){return AT[t]||(AT[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),AT[t]}const X9e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function W9e(t,e){const i=t.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,r,o,l,u,f,y]=s;return[o,n,r,l,u,f,y]}function Z9e(t,e){const i=t.formatToParts(e),s=[];for(let n=0;n<i.length;n++){const{type:r,value:o}=i[n],l=X9e[r];r==="era"?s[l]=o:Ri(l)||(s[l]=parseInt(o,10))}return s}let KP={};class Fc extends ax{static create(e){return KP[e]||(KP[e]=new Fc(e)),KP[e]}static resetCache(){KP={},AT={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Fc.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return zle(e,i,s,this.name)}formatOffset(e,i){return CS(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const s=Y9e(this.name);let[n,r,o,l,u,f,y]=s.formatToParts?Z9e(s,i):W9e(s,i);l==="BC"&&(n=-Math.abs(n)+1);const x=kM({year:n,month:r,day:o,hour:u===24?0:u,minute:f,second:y,millisecond:0});let S=+i;const P=S%1e3;return S-=P>=0?P:1e3+P,(x-S)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let TW={};function K9e(t,e={}){const i=JSON.stringify([t,e]);let s=TW[i];return s||(s=new Intl.ListFormat(t,e),TW[i]=s),s}let lO={};function cO(t,e={}){const i=JSON.stringify([t,e]);let s=lO[i];return s||(s=new Intl.DateTimeFormat(t,e),lO[i]=s),s}let uO={};function J9e(t,e={}){const i=JSON.stringify([t,e]);let s=uO[i];return s||(s=new Intl.NumberFormat(t,e),uO[i]=s),s}let hO={};function Q9e(t,e={}){const{base:i,...s}=e,n=JSON.stringify([t,s]);let r=hO[n];return r||(r=new Intl.RelativeTimeFormat(t,e),hO[n]=r),r}let d3=null;function e6e(){return d3||(d3=new Intl.DateTimeFormat().resolvedOptions().locale,d3)}let IW={};function t6e(t){let e=IW[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,IW[t]=e}return e}function i6e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let s,n;try{s=cO(t).resolvedOptions(),n=t}catch{const u=t.substring(0,i);s=cO(u).resolvedOptions(),n=u}const{numberingSystem:r,calendar:o}=s;return[n,r,o]}}function s6e(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function n6e(t){const e=[];for(let i=1;i<=12;i++){const s=hi.utc(2009,i,1);e.push(t(s))}return e}function r6e(t){const e=[];for(let i=1;i<=7;i++){const s=hi.utc(2016,11,13+i);e.push(t(s))}return e}function JP(t,e,i,s){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):s(e)}function o6e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class a6e{constructor(e,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:n,floor:r,...o}=s;if(!i||Object.keys(o).length>0){const l={useGrouping:!1,...s};s.padTo>0&&(l.minimumIntegerDigits=s.padTo),this.inf=J9e(e,l)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):sV(e,3);return io(i,this.padTo)}}}class l6e{constructor(e,i,s){this.opts=s,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Fc.create(l).valid?(n=l,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||n,this.dtf=cO(i,r)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class c6e{constructor(e,i,s){this.opts={style:"long",...s},!i&&Lle()&&(this.rtf=Q9e(e,s))}format(e,i){return this.rtf?this.rtf.format(e,i):k6e(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const u6e={firstDay:1,minimalDays:4,weekend:[6,7]};class on{static fromOpts(e){return on.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,s,n,r=!1){const o=e||Nr.defaultLocale,l=o||(r?"en-US":e6e()),u=i||Nr.defaultNumberingSystem,f=s||Nr.defaultOutputCalendar,y=dO(n)||Nr.defaultWeekSettings;return new on(l,u,f,y,o)}static resetCache(){d3=null,lO={},uO={},hO={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:s,weekSettings:n}={}){return on.create(e,i,s,n)}constructor(e,i,s,n,r){const[o,l,u]=i6e(e);this.locale=o,this.numberingSystem=i||l||null,this.outputCalendar=s||u||null,this.weekSettings=n,this.intl=s6e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=o6e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:on.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,dO(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return JP(this,e,Gle,()=>{const s=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=n6e(r=>this.extract(r,s,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return JP(this,e,Hle,()=>{const s=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=r6e(r=>this.extract(r,s,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return JP(this,void 0,()=>Ule,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[hi.utc(2016,11,13,9),hi.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return JP(this,e,Yle,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[hi.utc(-40,1,1),hi.utc(2017,1,1)].map(s=>this.extract(s,i,"era"))),this.eraCache[e]})}extract(e,i,s){const n=this.dtFormatter(e,i),r=n.formatToParts(),o=r.find(l=>l.type.toLowerCase()===s);return o?o.value:null}numberFormatter(e={}){return new a6e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new l6e(e,this.intl,i)}relFormatter(e={}){return new c6e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return K9e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Fle()?t6e(this.locale):u6e}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Qk=null;class Uo extends ax{static get utcInstance(){return Qk===null&&(Qk=new Uo(0)),Qk}static instance(e){return e===0?Uo.utcInstance:new Uo(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Uo(NM(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${CS(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${CS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return CS(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class h6e extends ax{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Y0(t,e){if(Ri(t)||t===null)return e;if(t instanceof ax)return t;if(y6e(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?AM.instance:i==="utc"||i==="gmt"?Uo.utcInstance:Uo.parseSpecifier(i)||Fc.create(t)}else return fg(t)?Uo.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new h6e(t)}const Qq={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},MW={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},d6e=Qq.hanidec.replace(/[\[|\]]/g,"").split("");function f6e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);if(t[i].search(Qq.hanidec)!==-1)e+=d6e.indexOf(t[i]);else for(const n in MW){const[r,o]=MW[n];s>=r&&s<=o&&(e+=s-r)}}return parseInt(e,10)}else return e}let Y_={};function p6e(){Y_={}}function uh({numberingSystem:t},e=""){const i=t||"latn";return Y_[i]||(Y_[i]={}),Y_[i][e]||(Y_[i][e]=new RegExp(`${Qq[i]}${e}`)),Y_[i][e]}let AW=()=>Date.now(),DW="system",kW=null,NW=null,$W=null,OW=60,RW,LW=null;class Nr{static get now(){return AW}static set now(e){AW=e}static set defaultZone(e){DW=e}static get defaultZone(){return Y0(DW,AM.instance)}static get defaultLocale(){return kW}static set defaultLocale(e){kW=e}static get defaultNumberingSystem(){return NW}static set defaultNumberingSystem(e){NW=e}static get defaultOutputCalendar(){return $W}static set defaultOutputCalendar(e){$W=e}static get defaultWeekSettings(){return LW}static set defaultWeekSettings(e){LW=dO(e)}static get twoDigitCutoffYear(){return OW}static set twoDigitCutoffYear(e){OW=e%100}static get throwOnInvalid(){return RW}static set throwOnInvalid(e){RW=e}static resetCaches(){on.resetCache(),Fc.resetCache(),hi.resetCache(),p6e()}}class jh{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Dle=[0,31,59,90,120,151,181,212,243,273,304,334],kle=[0,31,60,91,121,152,182,213,244,274,305,335];function Ru(t,e){return new jh("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function eV(t,e,i){const s=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const n=s.getUTCDay();return n===0?7:n}function Nle(t,e,i){return i+(CC(t)?kle:Dle)[e-1]}function $le(t,e){const i=CC(t)?kle:Dle,s=i.findIndex(r=>r<e),n=e-i[s];return{month:s+1,day:n}}function tV(t,e){return(t-e+7)%7+1}function U9(t,e=4,i=1){const{year:s,month:n,day:r}=t,o=Nle(s,n,r),l=tV(eV(s,n,r),i);let u=Math.floor((o-l+14-e)/7),f;return u<1?(f=s-1,u=dE(f,e,i)):u>dE(s,e,i)?(f=s+1,u=1):f=s,{weekYear:f,weekNumber:u,weekday:l,...$M(t)}}function FW(t,e=4,i=1){const{weekYear:s,weekNumber:n,weekday:r}=t,o=tV(eV(s,1,e),i),l=Ub(s);let u=n*7+r-o-7+e,f;u<1?(f=s-1,u+=Ub(f)):u>l?(f=s+1,u-=Ub(s)):f=s;const{month:y,day:_}=$le(f,u);return{year:f,month:y,day:_,...$M(t)}}function e8(t){const{year:e,month:i,day:s}=t,n=Nle(e,i,s);return{year:e,ordinal:n,...$M(t)}}function zW(t){const{year:e,ordinal:i}=t,{month:s,day:n}=$le(e,i);return{year:e,month:s,day:n,...$M(t)}}function qW(t,e){if(!Ri(t.localWeekday)||!Ri(t.localWeekNumber)||!Ri(t.localWeekYear)){if(!Ri(t.weekday)||!Ri(t.weekNumber)||!Ri(t.weekYear))throw new Db("Cannot mix locale-based week fields with ISO-based week fields");return Ri(t.localWeekday)||(t.weekday=t.localWeekday),Ri(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Ri(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function m6e(t,e=4,i=1){const s=DM(t.weekYear),n=Lu(t.weekNumber,1,dE(t.weekYear,e,i)),r=Lu(t.weekday,1,7);return s?n?r?!1:Ru("weekday",t.weekday):Ru("week",t.weekNumber):Ru("weekYear",t.weekYear)}function g6e(t){const e=DM(t.year),i=Lu(t.ordinal,1,Ub(t.year));return e?i?!1:Ru("ordinal",t.ordinal):Ru("year",t.year)}function Ole(t){const e=DM(t.year),i=Lu(t.month,1,12),s=Lu(t.day,1,Y9(t.year,t.month));return e?i?s?!1:Ru("day",t.day):Ru("month",t.month):Ru("year",t.year)}function Rle(t){const{hour:e,minute:i,second:s,millisecond:n}=t,r=Lu(e,0,23)||e===24&&i===0&&s===0&&n===0,o=Lu(i,0,59),l=Lu(s,0,59),u=Lu(n,0,999);return r?o?l?u?!1:Ru("millisecond",n):Ru("second",s):Ru("minute",i):Ru("hour",e)}function Ri(t){return typeof t>"u"}function fg(t){return typeof t=="number"}function DM(t){return typeof t=="number"&&t%1===0}function y6e(t){return typeof t=="string"}function v6e(t){return Object.prototype.toString.call(t)==="[object Date]"}function Lle(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Fle(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function _6e(t){return Array.isArray(t)?t:[t]}function VW(t,e,i){if(t.length!==0)return t.reduce((s,n)=>{const r=[e(n),n];return s&&i(s[0],r[0])===s[0]?s:r},null)[1]}function b6e(t,e){return e.reduce((i,s)=>(i[s]=t[s],i),{})}function E2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dO(t){if(t==null)return null;if(typeof t!="object")throw new ja("Week settings must be an object");if(!Lu(t.firstDay,1,7)||!Lu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Lu(e,1,7)))throw new ja("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Lu(t,e,i){return DM(t)&&t>=e&&t<=i}function x6e(t,e){return t-e*Math.floor(t/e)}function io(t,e=2){const i=t<0;let s;return i?s="-"+(""+-t).padStart(e,"0"):s=(""+t).padStart(e,"0"),s}function F0(t){if(!(Ri(t)||t===null||t===""))return parseInt(t,10)}function P1(t){if(!(Ri(t)||t===null||t===""))return parseFloat(t)}function iV(t){if(!(Ri(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function sV(t,e,i=!1){const s=10**e;return(i?Math.trunc:Math.round)(t*s)/s}function CC(t){return t%4===0&&(t%100!==0||t%400===0)}function Ub(t){return CC(t)?366:365}function Y9(t,e){const i=x6e(e-1,12)+1,s=t+(e-i)/12;return i===2?CC(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function kM(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function GW(t,e,i){return-tV(eV(t,1,e),i)+e-1}function dE(t,e=4,i=1){const s=GW(t,e,i),n=GW(t+1,e,i);return(Ub(t)-s+n)/7}function fO(t){return t>99?t:t>Nr.twoDigitCutoffYear?1900+t:2e3+t}function zle(t,e,i,s=null){const n=new Date(t),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(r.timeZone=s);const o={timeZoneName:e,...r},l=new Intl.DateTimeFormat(i,o).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function NM(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const s=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-s:s;return i*60+n}function qle(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ja(`Invalid unit value ${t}`);return e}function X9(t,e){const i={};for(const s in t)if(E2(t,s)){const n=t[s];if(n==null)continue;i[e(s)]=qle(n)}return i}function CS(t,e){const i=Math.trunc(Math.abs(t/60)),s=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${io(i,2)}:${io(s,2)}`;case"narrow":return`${n}${i}${s>0?`:${s}`:""}`;case"techie":return`${n}${io(i,2)}${io(s,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function $M(t){return b6e(t,["hour","minute","second","millisecond"])}const w6e=["January","February","March","April","May","June","July","August","September","October","November","December"],Vle=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S6e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Gle(t){switch(t){case"narrow":return[...S6e];case"short":return[...Vle];case"long":return[...w6e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const jle=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ble=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],E6e=["M","T","W","T","F","S","S"];function Hle(t){switch(t){case"narrow":return[...E6e];case"short":return[...Ble];case"long":return[...jle];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ule=["AM","PM"],C6e=["Before Christ","Anno Domini"],P6e=["BC","AD"],T6e=["B","A"];function Yle(t){switch(t){case"narrow":return[...T6e];case"short":return[...P6e];case"long":return[...C6e];default:return null}}function I6e(t){return Ule[t.hour<12?0:1]}function M6e(t,e){return Hle(e)[t.weekday-1]}function A6e(t,e){return Gle(e)[t.month-1]}function D6e(t,e){return Yle(e)[t.year<0?0:1]}function k6e(t,e,i="always",s=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&r){const _=t==="days";switch(e){case 1:return _?"tomorrow":`next ${n[t][0]}`;case-1:return _?"yesterday":`last ${n[t][0]}`;case 0:return _?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,f=n[t],y=s?u?f[1]:f[2]||f[1]:u?n[t][0]:t;return o?`${l} ${y} ago`:`in ${l} ${y}`}function jW(t,e){let i="";for(const s of t)s.literal?i+=s.val:i+=e(s.val);return i}const N6e={D:H9,DD:dle,DDD:fle,DDDD:ple,t:mle,tt:gle,ttt:yle,tttt:vle,T:_le,TT:ble,TTT:xle,TTTT:wle,f:Sle,ff:Cle,fff:Tle,ffff:Mle,F:Ele,FF:Ple,FFF:Ile,FFFF:Ale};class Ya{static create(e,i={}){return new Ya(e,i)}static parseFormat(e){let i=null,s="",n=!1;const r=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(s.length>0&&r.push({literal:n||/^\s+$/.test(s),val:s}),i=null,s="",n=!n):n||l===i?s+=l:(s.length>0&&r.push({literal:/^\s+$/.test(s),val:s}),s=l,i=l)}return s.length>0&&r.push({literal:n||/^\s+$/.test(s),val:s}),r}static macroTokenToFormatOpts(e){return N6e[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return io(e,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const s=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(S,P)=>this.loc.extract(e,S,P),o=S=>e.isOffsetFixed&&e.offset===0&&S.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,S.format):"",l=()=>s?I6e(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(S,P)=>s?A6e(e,S):r(P?{month:S}:{month:S,day:"numeric"},"month"),f=(S,P)=>s?M6e(e,S):r(P?{weekday:S}:{weekday:S,month:"long",day:"numeric"},"weekday"),y=S=>{const P=Ya.macroTokenToFormatOpts(S);return P?this.formatWithSystemDefault(e,P):S},_=S=>s?D6e(e,S):r({era:S},"era"),x=S=>{switch(S){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return n?r({day:"numeric"},"day"):this.num(e.day);case"dd":return n?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return n?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?r({month:"numeric"},"month"):this.num(e.month);case"MM":return n?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?r({year:"numeric"},"year"):this.num(e.year);case"yy":return n?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return _("short");case"GG":return _("long");case"GGGGG":return _("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return y(S)}};return jW(Ya.parseFormat(i),x)}formatDurationFromString(e,i){const s=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=u=>f=>{const y=s(f);return y?this.num(u.get(y),f.length):f},r=Ya.parseFormat(i),o=r.reduce((u,{literal:f,val:y})=>f?u:u.concat(y),[]),l=e.shiftTo(...o.map(s).filter(u=>u));return jW(r,n(l))}}const Xle=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function lx(...t){const e=t.reduce((i,s)=>i+s.source,"");return RegExp(`^${e}$`)}function cx(...t){return e=>t.reduce(([i,s,n],r)=>{const[o,l,u]=r(e,n);return[{...i,...o},l||s,u]},[{},null,1]).slice(0,2)}function ux(t,...e){if(t==null)return[null,null];for(const[i,s]of e){const n=i.exec(t);if(n)return s(n)}return[null,null]}function Wle(...t){return(e,i)=>{const s={};let n;for(n=0;n<t.length;n++)s[t[n]]=F0(e[i+n]);return[s,null,i+n]}}const Zle=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,$6e=`(?:${Zle.source}?(?:\\[(${Xle.source})\\])?)?`,nV=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Kle=RegExp(`${nV.source}${$6e}`),rV=RegExp(`(?:T${Kle.source})?`),O6e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,R6e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,L6e=/(\d{4})-?(\d{3})/,F6e=Wle("weekYear","weekNumber","weekDay"),z6e=Wle("year","ordinal"),q6e=/(\d{4})-(\d\d)-(\d\d)/,Jle=RegExp(`${nV.source} ?(?:${Zle.source}|(${Xle.source}))?`),V6e=RegExp(`(?: ${Jle.source})?`);function Yb(t,e,i){const s=t[e];return Ri(s)?i:F0(s)}function G6e(t,e){return[{year:Yb(t,e),month:Yb(t,e+1,1),day:Yb(t,e+2,1)},null,e+3]}function hx(t,e){return[{hours:Yb(t,e,0),minutes:Yb(t,e+1,0),seconds:Yb(t,e+2,0),milliseconds:iV(t[e+3])},null,e+4]}function PC(t,e){const i=!t[e]&&!t[e+1],s=NM(t[e+1],t[e+2]),n=i?null:Uo.instance(s);return[{},n,e+3]}function TC(t,e){const i=t[e]?Fc.create(t[e]):null;return[{},i,e+1]}const j6e=RegExp(`^T?${nV.source}$`),B6e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function H6e(t){const[e,i,s,n,r,o,l,u,f]=t,y=e[0]==="-",_=u&&u[0]==="-",x=(S,P=!1)=>S!==void 0&&(P||S&&y)?-S:S;return[{years:x(P1(i)),months:x(P1(s)),weeks:x(P1(n)),days:x(P1(r)),hours:x(P1(o)),minutes:x(P1(l)),seconds:x(P1(u),u==="-0"),milliseconds:x(iV(f),_)}]}const U6e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function oV(t,e,i,s,n,r,o){const l={year:e.length===2?fO(F0(e)):F0(e),month:Vle.indexOf(i)+1,day:F0(s),hour:F0(n),minute:F0(r)};return o&&(l.second=F0(o)),t&&(l.weekday=t.length>3?jle.indexOf(t)+1:Ble.indexOf(t)+1),l}const Y6e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function X6e(t){const[,e,i,s,n,r,o,l,u,f,y,_]=t,x=oV(e,n,s,i,r,o,l);let S;return u?S=U6e[u]:f?S=0:S=NM(y,_),[x,new Uo(S)]}function W6e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Z6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,K6e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,J6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function BW(t){const[,e,i,s,n,r,o,l]=t;return[oV(e,n,s,i,r,o,l),Uo.utcInstance]}function Q6e(t){const[,e,i,s,n,r,o,l]=t;return[oV(e,l,i,s,n,r,o),Uo.utcInstance]}const eMe=lx(O6e,rV),tMe=lx(R6e,rV),iMe=lx(L6e,rV),sMe=lx(Kle),Qle=cx(G6e,hx,PC,TC),nMe=cx(F6e,hx,PC,TC),rMe=cx(z6e,hx,PC,TC),oMe=cx(hx,PC,TC);function aMe(t){return ux(t,[eMe,Qle],[tMe,nMe],[iMe,rMe],[sMe,oMe])}function lMe(t){return ux(W6e(t),[Y6e,X6e])}function cMe(t){return ux(t,[Z6e,BW],[K6e,BW],[J6e,Q6e])}function uMe(t){return ux(t,[B6e,H6e])}const hMe=cx(hx);function dMe(t){return ux(t,[j6e,hMe])}const fMe=lx(q6e,V6e),pMe=lx(Jle),mMe=cx(hx,PC,TC);function gMe(t){return ux(t,[fMe,Qle],[pMe,mMe])}const HW="Invalid Duration",ece={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},yMe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...ece},uu=146097/400,P_=146097/4800,vMe={years:{quarters:4,months:12,weeks:uu/7,days:uu,hours:uu*24,minutes:uu*24*60,seconds:uu*24*60*60,milliseconds:uu*24*60*60*1e3},quarters:{months:3,weeks:uu/28,days:uu/4,hours:uu*24/4,minutes:uu*24*60/4,seconds:uu*24*60*60/4,milliseconds:uu*24*60*60*1e3/4},months:{weeks:P_/7,days:P_,hours:P_*24,minutes:P_*24*60,seconds:P_*24*60*60,milliseconds:P_*24*60*60*1e3},...ece},Iy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],_Me=Iy.slice(0).reverse();function r0(t,e,i=!1){const s={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new ks(s)}function tce(t,e){let i=e.milliseconds??0;for(const s of _Me.slice(1))e[s]&&(i+=e[s]*t[s].milliseconds);return i}function UW(t,e){const i=tce(t,e)<0?-1:1;Iy.reduceRight((s,n)=>{if(Ri(e[n]))return s;if(s){const r=e[s]*i,o=t[n][s],l=Math.floor(r/o);e[n]+=l*i,e[s]-=l*o*i}return n},null),Iy.reduce((s,n)=>{if(Ri(e[n]))return s;if(s){const r=e[s]%1;e[s]-=r,e[n]+=r*t[s][n]}return n},null)}function bMe(t){const e={};for(const[i,s]of Object.entries(t))s!==0&&(e[i]=s);return e}class ks{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let s=i?vMe:yMe;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||on.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,i){return ks.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ja(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new ks({values:X9(e,ks.normalizeUnit),loc:on.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(fg(e))return ks.fromMillis(e);if(ks.isDuration(e))return e;if(typeof e=="object")return ks.fromObject(e);throw new ja(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[s]=uMe(e);return s?ks.fromObject(s,i):ks.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[s]=dMe(e);return s?ks.fromObject(s,i):ks.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ja("need to specify a reason the Duration is invalid");const s=e instanceof jh?e:new jh(e,i);if(Nr.throwOnInvalid)throw new B9e(s);return new ks({invalid:s})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new hle(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Ya.create(this.loc,s).formatDurationFromString(this,e):HW}toHuman(e={}){if(!this.isValid)return HW;const i=Iy.map(s=>{const n=this.values[s];return Ri(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(n)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=sV(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},hi.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?tce(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=ks.fromDurationLike(e),s={};for(const n of Iy)(E2(i.values,n)||E2(this.values,n))&&(s[n]=i.get(n)+this.get(n));return r0(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const i=ks.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=qle(e(this.values[s],s));return r0(this,{values:i},!0)}get(e){return this[ks.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...X9(e,ks.normalizeUnit)};return r0(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:s,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:s};return r0(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return UW(this.matrix,e),r0(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=bMe(this.normalize().shiftToAll().toObject());return r0(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>ks.normalizeUnit(o));const i={},s={},n=this.toObject();let r;for(const o of Iy)if(e.indexOf(o)>=0){r=o;let l=0;for(const f in s)l+=this.matrix[f][o]*s[f],s[f]=0;fg(n[o])&&(l+=n[o]);const u=Math.trunc(l);i[o]=u,s[o]=(l*1e3-u*1e3)/1e3}else fg(n[o])&&(s[o]=n[o]);for(const o in s)s[o]!==0&&(i[r]+=o===r?s[o]:s[o]/this.matrix[r][o]);return UW(this.matrix,i),r0(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return r0(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(s,n){return s===void 0||s===0?n===void 0||n===0:s===n}for(const s of Iy)if(!i(this.values[s],e.values[s]))return!1;return!0}}const T_="Invalid Interval";function xMe(t,e){return!t||!t.isValid?kr.invalid("missing or invalid start"):!e||!e.isValid?kr.invalid("missing or invalid end"):e<t?kr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class kr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ja("need to specify a reason the Interval is invalid");const s=e instanceof jh?e:new jh(e,i);if(Nr.throwOnInvalid)throw new j9e(s);return new kr({invalid:s})}static fromDateTimes(e,i){const s=Rw(e),n=Rw(i),r=xMe(s,n);return r??new kr({start:s,end:n})}static after(e,i){const s=ks.fromDurationLike(i),n=Rw(e);return kr.fromDateTimes(n,n.plus(s))}static before(e,i){const s=ks.fromDurationLike(i),n=Rw(e);return kr.fromDateTimes(n.minus(s),n)}static fromISO(e,i){const[s,n]=(e||"").split("/",2);if(s&&n){let r,o;try{r=hi.fromISO(s,i),o=r.isValid}catch{o=!1}let l,u;try{l=hi.fromISO(n,i),u=l.isValid}catch{u=!1}if(o&&u)return kr.fromDateTimes(r,l);if(o){const f=ks.fromISO(n,i);if(f.isValid)return kr.after(r,f)}else if(u){const f=ks.fromISO(s,i);if(f.isValid)return kr.before(l,f)}}return kr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const s=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:s.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(s,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?kr.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Rw).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),s=[];let{s:n}=this,r=0;for(;n<this.e;){const o=i[r]||this.e,l=+o>+this.e?this.e:o;s.push(kr.fromDateTimes(n,l)),n=l,r+=1}return s}splitBy(e){const i=ks.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,n=1,r;const o=[];for(;s<this.e;){const l=this.start.plus(i.mapUnits(u=>u*n));r=+l>+this.e?this.e:l,o.push(kr.fromDateTimes(s,r)),s=r,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return i>=s?null:kr.fromDateTimes(i,s)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return kr.fromDateTimes(i,s)}static merge(e){const[i,s]=e.sort((n,r)=>n.s-r.s).reduce(([n,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[n,r.union(o)]:[n.concat([r]),o]:[n,o],[[],null]);return s&&i.push(s),i}static xor(e){let i=null,s=0;const n=[],r=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...r),l=o.sort((u,f)=>u.time-f.time);for(const u of l)s+=u.type==="s"?1:-1,s===1?i=u.time:(i&&+i!=+u.time&&n.push(kr.fromDateTimes(i,u.time)),i=null);return kr.merge(n)}difference(...e){return kr.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:T_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=H9,i={}){return this.isValid?Ya.create(this.s.loc.clone(i),e).formatInterval(this):T_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:T_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:T_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:T_}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:T_}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):ks.invalid(this.invalidReason)}mapEndpoints(e){return kr.fromDateTimes(e(this.s),e(this.e))}}class QP{static hasDST(e=Nr.defaultZone){const i=hi.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Fc.isValidZone(e)}static normalizeZone(e){return Y0(e,Nr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||on.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||on.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||on.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||on.create(i,s,r)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||on.create(i,s,r)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null}={}){return(n||on.create(i,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null}={}){return(n||on.create(i,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return on.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return on.create(i,null,"gregory").eras(e)}static features(){return{relative:Lle(),localeWeek:Fle()}}}function YW(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(e)-i(t);return Math.floor(ks.fromMillis(s).as("days"))}function wMe(t,e,i){const s=[["years",(u,f)=>f.year-u.year],["quarters",(u,f)=>f.quarter-u.quarter+(f.year-u.year)*4],["months",(u,f)=>f.month-u.month+(f.year-u.year)*12],["weeks",(u,f)=>{const y=YW(u,f);return(y-y%7)/7}],["days",YW]],n={},r=t;let o,l;for(const[u,f]of s)i.indexOf(u)>=0&&(o=u,n[u]=f(t,e),l=r.plus(n),l>e?(n[u]--,t=r.plus(n),t>e&&(l=t,n[u]--,t=r.plus(n))):t=l);return[t,n,l,o]}function SMe(t,e,i,s){let[n,r,o,l]=wMe(t,e,i);const u=e-n,f=i.filter(_=>["hours","minutes","seconds","milliseconds"].indexOf(_)>=0);f.length===0&&(o<e&&(o=n.plus({[l]:1})),o!==n&&(r[l]=(r[l]||0)+u/(o-n)));const y=ks.fromObject(r,s);return f.length>0?ks.fromMillis(u,s).shiftTo(...f).plus(y):y}const EMe="missing Intl.DateTimeFormat.formatToParts support";function Ws(t,e=i=>i){return{regex:t,deser:([i])=>e(f6e(i))}}const CMe=" ",ice=`[ ${CMe}]`,sce=new RegExp(ice,"g");function PMe(t){return t.replace(/\./g,"\\.?").replace(sce,ice)}function XW(t){return t.replace(/\./g,"").replace(sce," ").toLowerCase()}function hh(t,e){return t===null?null:{regex:RegExp(t.map(PMe).join("|")),deser:([i])=>t.findIndex(s=>XW(i)===XW(s))+e}}function WW(t,e){return{regex:t,deser:([,i,s])=>NM(i,s),groups:e}}function e4(t){return{regex:t,deser:([e])=>e}}function TMe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function IMe(t,e){const i=uh(e),s=uh(e,"{2}"),n=uh(e,"{3}"),r=uh(e,"{4}"),o=uh(e,"{6}"),l=uh(e,"{1,2}"),u=uh(e,"{1,3}"),f=uh(e,"{1,6}"),y=uh(e,"{1,9}"),_=uh(e,"{2,4}"),x=uh(e,"{4,6}"),S=k=>({regex:RegExp(TMe(k.val)),deser:([$])=>$,literal:!0}),A=(k=>{if(t.literal)return S(k);switch(k.val){case"G":return hh(e.eras("short"),0);case"GG":return hh(e.eras("long"),0);case"y":return Ws(f);case"yy":return Ws(_,fO);case"yyyy":return Ws(r);case"yyyyy":return Ws(x);case"yyyyyy":return Ws(o);case"M":return Ws(l);case"MM":return Ws(s);case"MMM":return hh(e.months("short",!0),1);case"MMMM":return hh(e.months("long",!0),1);case"L":return Ws(l);case"LL":return Ws(s);case"LLL":return hh(e.months("short",!1),1);case"LLLL":return hh(e.months("long",!1),1);case"d":return Ws(l);case"dd":return Ws(s);case"o":return Ws(u);case"ooo":return Ws(n);case"HH":return Ws(s);case"H":return Ws(l);case"hh":return Ws(s);case"h":return Ws(l);case"mm":return Ws(s);case"m":return Ws(l);case"q":return Ws(l);case"qq":return Ws(s);case"s":return Ws(l);case"ss":return Ws(s);case"S":return Ws(u);case"SSS":return Ws(n);case"u":return e4(y);case"uu":return e4(l);case"uuu":return Ws(i);case"a":return hh(e.meridiems(),0);case"kkkk":return Ws(r);case"kk":return Ws(_,fO);case"W":return Ws(l);case"WW":return Ws(s);case"E":case"c":return Ws(i);case"EEE":return hh(e.weekdays("short",!1),1);case"EEEE":return hh(e.weekdays("long",!1),1);case"ccc":return hh(e.weekdays("short",!0),1);case"cccc":return hh(e.weekdays("long",!0),1);case"Z":case"ZZ":return WW(new RegExp(`([+-]${l.source})(?::(${s.source}))?`),2);case"ZZZ":return WW(new RegExp(`([+-]${l.source})(${s.source})?`),2);case"z":return e4(/[a-z_+-/]{1,256}?/i);case" ":return e4(/[^\S\n\r]/);default:return S(k)}})(t)||{invalidReason:EMe};return A.token=t,A}const MMe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function AMe(t,e,i){const{type:s,value:n}=t;if(s==="literal"){const u=/^\s+$/.test(n);return{literal:!u,val:u?" ":n}}const r=e[s];let o=s;s==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let l=MMe[o];if(typeof l=="object"&&(l=l[r]),l)return{literal:!1,val:l}}function DMe(t){return[`^${t.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,t]}function kMe(t,e,i){const s=t.match(e);if(s){const n={};let r=1;for(const o in i)if(E2(i,o)){const l=i[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(s.slice(r,r+u))),r+=u}return[s,n]}else return[s,{}]}function NMe(t){const e=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return Ri(t.z)||(i=Fc.create(t.z)),Ri(t.Z)||(i||(i=new Uo(t.Z)),s=t.Z),Ri(t.q)||(t.M=(t.q-1)*3+1),Ri(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Ri(t.u)||(t.S=iV(t.u)),[Object.keys(t).reduce((r,o)=>{const l=e(o);return l&&(r[l]=t[o]),r},{}),i,s]}let t8=null;function $Me(){return t8||(t8=hi.fromMillis(1555555555555)),t8}function OMe(t,e){if(t.literal)return t;const i=Ya.macroTokenToFormatOpts(t.val),s=ace(i,e);return s==null||s.includes(void 0)?t:s}function nce(t,e){return Array.prototype.concat(...t.map(i=>OMe(i,e)))}class rce{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=nce(Ya.parseFormat(i),e),this.units=this.tokens.map(s=>IMe(s,e)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,n]=DMe(this.units);this.regex=RegExp(s,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,s]=kMe(e,this.regex,this.handlers),[n,r,o]=s?NMe(s):[null,null,void 0];if(E2(s,"a")&&E2(s,"H"))throw new Db("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:s,result:n,zone:r,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function oce(t,e,i){return new rce(t,i).explainFromTokens(e)}function RMe(t,e,i){const{result:s,zone:n,specificOffset:r,invalidReason:o}=oce(t,e,i);return[s,n,r,o]}function ace(t,e){if(!t)return null;const s=Ya.create(e,t).dtFormatter($Me()),n=s.formatToParts(),r=s.resolvedOptions();return n.map(o=>AMe(o,t,r))}const i8="Invalid DateTime",LMe=864e13;function f3(t){return new jh("unsupported zone",`the zone "${t.name}" is not supported`)}function s8(t){return t.weekData===null&&(t.weekData=U9(t.c)),t.weekData}function n8(t){return t.localWeekData===null&&(t.localWeekData=U9(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function T1(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new hi({...i,...e,old:i})}function lce(t,e,i){let s=t-e*60*1e3;const n=i.offset(s);if(e===n)return[s,e];s-=(n-e)*60*1e3;const r=i.offset(s);return n===r?[s,n]:[t-Math.min(n,r)*60*1e3,Math.max(n,r)]}function t4(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function DT(t,e,i){return lce(kM(t),e,i)}function ZW(t,e){const i=t.o,s=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,r={...t.c,year:s,month:n,day:Math.min(t.c.day,Y9(s,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=ks.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=kM(r);let[u,f]=lce(l,i,t.zone);return o!==0&&(u+=o,f=t.zone.offset(u)),{ts:u,o:f}}function I_(t,e,i,s,n,r){const{setZone:o,zone:l}=i;if(t&&Object.keys(t).length!==0||e){const u=e||l,f=hi.fromObject(t,{...i,zone:u,specificOffset:r});return o?f:f.setZone(l)}else return hi.invalid(new jh("unparsable",`the input "${n}" can't be parsed as ${s}`))}function i4(t,e,i=!0){return t.isValid?Ya.create(on.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function r8(t,e){const i=t.c.year>9999||t.c.year<0;let s="";return i&&t.c.year>=0&&(s+="+"),s+=io(t.c.year,i?6:4),e?(s+="-",s+=io(t.c.month),s+="-",s+=io(t.c.day)):(s+=io(t.c.month),s+=io(t.c.day)),s}function KW(t,e,i,s,n,r){let o=io(t.c.hour);return e?(o+=":",o+=io(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=io(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=io(t.c.second),(t.c.millisecond!==0||!s)&&(o+=".",o+=io(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!r?o+="Z":t.o<0?(o+="-",o+=io(Math.trunc(-t.o/60)),o+=":",o+=io(Math.trunc(-t.o%60))):(o+="+",o+=io(Math.trunc(t.o/60)),o+=":",o+=io(Math.trunc(t.o%60)))),r&&(o+="["+t.zone.ianaName+"]"),o}const cce={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},FMe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zMe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},uce=["year","month","day","hour","minute","second","millisecond"],qMe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],VMe=["year","ordinal","hour","minute","second","millisecond"];function GMe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new hle(t);return e}function JW(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return GMe(t)}}function jMe(t){return NT[t]||(kT===void 0&&(kT=Nr.now()),NT[t]=t.offset(kT)),NT[t]}function QW(t,e){const i=Y0(e.zone,Nr.defaultZone);if(!i.isValid)return hi.invalid(f3(i));const s=on.fromObject(e);let n,r;if(Ri(t.year))n=Nr.now();else{for(const u of uce)Ri(t[u])&&(t[u]=cce[u]);const o=Ole(t)||Rle(t);if(o)return hi.invalid(o);const l=jMe(i);[n,r]=DT(t,l,i)}return new hi({ts:n,zone:i,loc:s,o:r})}function eZ(t,e,i){const s=Ri(i.round)?!0:i.round,n=(o,l)=>(o=sV(o,s||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,l)),r=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(r(i.unit),i.unit);for(const o of i.units){const l=r(o);if(Math.abs(l)>=1)return n(l,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function tZ(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let kT,NT={};class hi{constructor(e){const i=e.zone||Nr.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new jh("invalid input"):null)||(i.isValid?null:f3(i));this.ts=Ri(e.ts)?Nr.now():e.ts;let n=null,r=null;if(!s)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,r]=[e.old.c,e.old.o];else{const l=fg(e.o)&&!e.old?e.o:i.offset(this.ts);n=t4(this.ts,l),s=Number.isNaN(n.year)?new jh("invalid input"):null,n=s?null:n,r=s?null:l}this._zone=i,this.loc=e.loc||on.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=n,this.o=r,this.isLuxonDateTime=!0}static now(){return new hi({})}static local(){const[e,i]=tZ(arguments),[s,n,r,o,l,u,f]=i;return QW({year:s,month:n,day:r,hour:o,minute:l,second:u,millisecond:f},e)}static utc(){const[e,i]=tZ(arguments),[s,n,r,o,l,u,f]=i;return e.zone=Uo.utcInstance,QW({year:s,month:n,day:r,hour:o,minute:l,second:u,millisecond:f},e)}static fromJSDate(e,i={}){const s=v6e(e)?e.valueOf():NaN;if(Number.isNaN(s))return hi.invalid("invalid input");const n=Y0(i.zone,Nr.defaultZone);return n.isValid?new hi({ts:s,zone:n,loc:on.fromObject(i)}):hi.invalid(f3(n))}static fromMillis(e,i={}){if(fg(e))return e<-864e13||e>LMe?hi.invalid("Timestamp out of range"):new hi({ts:e,zone:Y0(i.zone,Nr.defaultZone),loc:on.fromObject(i)});throw new ja(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(fg(e))return new hi({ts:e*1e3,zone:Y0(i.zone,Nr.defaultZone),loc:on.fromObject(i)});throw new ja("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const s=Y0(i.zone,Nr.defaultZone);if(!s.isValid)return hi.invalid(f3(s));const n=on.fromObject(i),r=X9(e,JW),{minDaysInFirstWeek:o,startOfWeek:l}=qW(r,n),u=Nr.now(),f=Ri(i.specificOffset)?s.offset(u):i.specificOffset,y=!Ri(r.ordinal),_=!Ri(r.year),x=!Ri(r.month)||!Ri(r.day),S=_||x,P=r.weekYear||r.weekNumber;if((S||y)&&P)throw new Db("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&y)throw new Db("Can't mix ordinal dates with month/day");const A=P||r.weekday&&!S;let k,$,F=t4(u,f);A?(k=qMe,$=FMe,F=U9(F,o,l)):y?(k=VMe,$=zMe,F=e8(F)):(k=uce,$=cce);let G=!1;for(const oe of k){const pe=r[oe];Ri(pe)?G?r[oe]=$[oe]:r[oe]=F[oe]:G=!0}const V=A?m6e(r,o,l):y?g6e(r):Ole(r),B=V||Rle(r);if(B)return hi.invalid(B);const W=A?FW(r,o,l):y?zW(r):r,[J,re]=DT(W,f,s),se=new hi({ts:J,zone:s,o:re,loc:n});return r.weekday&&S&&e.weekday!==se.weekday?hi.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${se.toISO()}`):se.isValid?se:hi.invalid(se.invalid)}static fromISO(e,i={}){const[s,n]=aMe(e);return I_(s,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[s,n]=lMe(e);return I_(s,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[s,n]=cMe(e);return I_(s,n,i,"HTTP",i)}static fromFormat(e,i,s={}){if(Ri(e)||Ri(i))throw new ja("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:r=null}=s,o=on.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),[l,u,f,y]=RMe(o,e,i);return y?hi.invalid(y):I_(l,u,s,`format ${i}`,e,f)}static fromString(e,i,s={}){return hi.fromFormat(e,i,s)}static fromSQL(e,i={}){const[s,n]=gMe(e);return I_(s,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ja("need to specify a reason the DateTime is invalid");const s=e instanceof jh?e:new jh(e,i);if(Nr.throwOnInvalid)throw new G9e(s);return new hi({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const s=ace(e,on.fromObject(i));return s?s.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return nce(Ya.parseFormat(e),on.fromObject(i)).map(n=>n.val).join("")}static resetCache(){kT=void 0,NT={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?s8(this).weekYear:NaN}get weekNumber(){return this.isValid?s8(this).weekNumber:NaN}get weekday(){return this.isValid?s8(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?n8(this).weekday:NaN}get localWeekNumber(){return this.isValid?n8(this).weekNumber:NaN}get localWeekYear(){return this.isValid?n8(this).weekYear:NaN}get ordinal(){return this.isValid?e8(this.c).ordinal:NaN}get monthShort(){return this.isValid?QP.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?QP.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?QP.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?QP.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,s=kM(this.c),n=this.zone.offset(s-e),r=this.zone.offset(s+e),o=this.zone.offset(s-n*i),l=this.zone.offset(s-r*i);if(o===l)return[this];const u=s-o*i,f=s-l*i,y=t4(u,o),_=t4(f,l);return y.hour===_.hour&&y.minute===_.minute&&y.second===_.second&&y.millisecond===_.millisecond?[T1(this,{ts:u}),T1(this,{ts:f})]:[this]}get isInLeapYear(){return CC(this.year)}get daysInMonth(){return Y9(this.year,this.month)}get daysInYear(){return this.isValid?Ub(this.year):NaN}get weeksInWeekYear(){return this.isValid?dE(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?dE(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:s,calendar:n}=Ya.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Uo.instance(e),i)}toLocal(){return this.setZone(Nr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(e=Y0(e,Nr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||s){const r=e.offset(this.ts),o=this.toObject();[n]=DT(o,r,e)}return T1(this,{ts:n,zone:e})}else return hi.invalid(f3(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:s}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:s});return T1(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=X9(e,JW),{minDaysInFirstWeek:s,startOfWeek:n}=qW(i,this.loc),r=!Ri(i.weekYear)||!Ri(i.weekNumber)||!Ri(i.weekday),o=!Ri(i.ordinal),l=!Ri(i.year),u=!Ri(i.month)||!Ri(i.day),f=l||u,y=i.weekYear||i.weekNumber;if((f||o)&&y)throw new Db("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Db("Can't mix ordinal dates with month/day");let _;r?_=FW({...U9(this.c,s,n),...i},s,n):Ri(i.ordinal)?(_={...this.toObject(),...i},Ri(i.day)&&(_.day=Math.min(Y9(_.year,_.month),_.day))):_=zW({...e8(this.c),...i});const[x,S]=DT(_,this.o,this.zone);return T1(this,{ts:x,o:S})}plus(e){if(!this.isValid)return this;const i=ks.fromDurationLike(e);return T1(this,ZW(this,i))}minus(e){if(!this.isValid)return this;const i=ks.fromDurationLike(e).negate();return T1(this,ZW(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const s={},n=ks.normalizeUnit(e);switch(n){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(n==="weeks")if(i){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(s.weekNumber=this.weekNumber-1),s.weekday=r}else s.weekday=1;if(n==="quarters"){const r=Math.ceil(this.month/3);s.month=(r-1)*3+1}return this.set(s)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Ya.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):i8}toLocaleString(e=H9,i={}){return this.isValid?Ya.create(this.loc.clone(i),e).formatDateTime(this):i8}toLocaleParts(e={}){return this.isValid?Ya.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:n=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=r8(this,o);return l+="T",l+=KW(this,o,i,s,n,r),l}toISODate({format:e="extended"}={}){return this.isValid?r8(this,e==="extended"):null}toISOWeekDate(){return i4(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:n=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+KW(this,o==="extended",i,e,s,r):null}toRFC2822(){return i4(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return i4(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?r8(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(s&&(n+=" "),i?n+="z":e&&(n+="ZZ")),i4(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():i8}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",s={}){if(!this.isValid||!e.isValid)return ks.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...s},r=_6e(i).map(ks.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,u=o?e:this,f=SMe(l,u,r,n);return o?f.negate():f}diffNow(e="milliseconds",i={}){return this.diff(hi.now(),e,i)}until(e){return this.isValid?kr.fromDateTimes(this,e):this}hasSame(e,i,s){if(!this.isValid)return!1;const n=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(i,s)<=n&&n<=r.endOf(i,s)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||hi.fromObject({},{zone:this.zone}),s=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(n=e.unit,r=void 0),eZ(i,this.plus(s),{...e,numeric:"always",units:n,unit:r})}toRelativeCalendar(e={}){return this.isValid?eZ(e.base||hi.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(hi.isDateTime))throw new ja("min requires all arguments be DateTimes");return VW(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(hi.isDateTime))throw new ja("max requires all arguments be DateTimes");return VW(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,s={}){const{locale:n=null,numberingSystem:r=null}=s,o=on.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return oce(o,e,i)}static fromStringExplain(e,i,s={}){return hi.fromFormatExplain(e,i,s)}static buildFormatParser(e,i={}){const{locale:s=null,numberingSystem:n=null}=i,r=on.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return new rce(r,e)}static fromFormatParser(e,i,s={}){if(Ri(e)||Ri(i))throw new ja("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:r=null}=s,o=on.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});if(!o.equals(i.locale))throw new ja(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:l,zone:u,specificOffset:f,invalidReason:y}=i.explainFromTokens(e);return y?hi.invalid(y):I_(l,u,s,`format ${i.format}`,e,f)}static get DATE_SHORT(){return H9}static get DATE_MED(){return dle}static get DATE_MED_WITH_WEEKDAY(){return H9e}static get DATE_FULL(){return fle}static get DATE_HUGE(){return ple}static get TIME_SIMPLE(){return mle}static get TIME_WITH_SECONDS(){return gle}static get TIME_WITH_SHORT_OFFSET(){return yle}static get TIME_WITH_LONG_OFFSET(){return vle}static get TIME_24_SIMPLE(){return _le}static get TIME_24_WITH_SECONDS(){return ble}static get TIME_24_WITH_SHORT_OFFSET(){return xle}static get TIME_24_WITH_LONG_OFFSET(){return wle}static get DATETIME_SHORT(){return Sle}static get DATETIME_SHORT_WITH_SECONDS(){return Ele}static get DATETIME_MED(){return Cle}static get DATETIME_MED_WITH_SECONDS(){return Ple}static get DATETIME_MED_WITH_WEEKDAY(){return U9e}static get DATETIME_FULL(){return Tle}static get DATETIME_FULL_WITH_SECONDS(){return Ile}static get DATETIME_HUGE(){return Mle}static get DATETIME_HUGE_WITH_SECONDS(){return Ale}}function Rw(t){if(hi.isDateTime(t))return t;if(t&&t.valueOf&&fg(t.valueOf()))return hi.fromJSDate(t);if(t&&typeof t=="object")return hi.fromObject(t);throw new ja(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Kp="system",av="unknown",pf="UTC",BMe=Intl.DateTimeFormat().resolvedOptions().timeZone,HMe="shortOffset";function UMe(t){return"timeZoneIANA"in t}function YMe(t){return t.startsWith("UTC")}function W9(t,e=!1){return{json:{read:{source:t,reader:(i,s)=>s[t]?$T(s[t]):null},write:!!e&&{allowNull:!0,writer(i,s){s[t]=i?XMe(i):null}}}}}function $T(t,e=Kp){return t?UMe(t)?t.timeZoneIANA:WMe(t,e):e}function XMe(t){return{timeZoneIANA:t}}function WMe(t,e=Kp){if(!t||!PW.has(t.timeZone))return e;const i=PW.get(t.timeZone);return YMe(t.timeZone)||t.respectsDaylightSaving?i:ZMe(i)}function ZMe(t){const e=hi.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Uo.instance(-i).formatOffset(0,"narrow")}`}function xht(t,e,i,s,n){if(e&&n==="date")return{timeZone:pf,timeZoneName:void 0};const r=s.timeStyle||s.hour,o=i===av;return{timeZone:o?n==="timestamp-offset"?void 0:t??pf:i,timeZoneName:o&&r?HMe:void 0}}function wht(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(s=>s.toLowerCase()));return t===Kp||t===av||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const KMe={year:void 0,month:void 0,day:void 0,weekday:void 0},JMe={hour:void 0,minute:void 0,second:void 0},hce={timeZone:pf},Sd={year:"numeric",month:"numeric",day:"numeric"},Lw={year:"numeric",month:"long",day:"numeric"},Fw={year:"numeric",month:"short",day:"numeric"},zw={year:"numeric",month:"long",weekday:"long",day:"numeric"},z0={hour:"numeric",minute:"numeric"},L1={...z0,second:"numeric"},dce={hourCycle:"h23"},qw={...z0,...dce},Vw={...L1,...dce},fce={"short-date":Sd,"short-date-short-time":{...Sd,...z0},"short-date-short-time-24":{...Sd,...qw},"short-date-long-time":{...Sd,...L1},"short-date-long-time-24":{...Sd,...Vw},"short-date-le":Sd,"short-date-le-short-time":{...Sd,...z0},"short-date-le-short-time-24":{...Sd,...qw},"short-date-le-long-time":{...Sd,...L1},"short-date-le-long-time-24":{...Sd,...Vw},"long-month-day-year":Lw,"long-month-day-year-short-time":{...Lw,...z0},"long-month-day-year-short-time-24":{...Lw,...qw},"long-month-day-year-long-time":{...Lw,...L1},"long-month-day-year-long-time-24":{...Lw,...Vw},"day-short-month-year":Fw,"day-short-month-year-short-time":{...Fw,...z0},"day-short-month-year-short-time-24":{...Fw,...qw},"day-short-month-year-long-time":{...Fw,...L1},"day-short-month-year-long-time-24":{...Fw,...Vw},"long-date":zw,"long-date-short-time":{...zw,...z0},"long-date-short-time-24":{...zw,...qw},"long-date-long-time":{...zw,...L1},"long-date-long-time-24":{...zw,...Vw},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":z0,"long-time":L1},QMe=wa()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),pce={ar:"ar-u-nu-latn-ca-gregory"};let pO=new WeakMap;const OM=fce["short-date-short-time"];function eAe(t){let e=pO.get(t);if(!e){const i=kc(),s=pce[i]||i,n=aV(t.timeZone??Kp),r={...t,timeZone:n};e=new Intl.DateTimeFormat(s,r),pO.set(t,e)}return e}function s4(t){return fce[t]}function Sg(t,e=OM){return eAe(e).format(t)}function tAe(t,e=OM){return Sg(new Date(t),{...e,...hce,...JMe})}function iAe(t,e=OM){return Sg(new Date(`1970-01-01T${t}Z`),{...e,...hce,...KMe})}function sAe(t,e=OM){if(e.timeZone)return Sg(new Date(t),e);const i=hi.fromISO(t,{setZone:!0}),s=kc(),n=pce[s]??s,r=i.offset===0?pf:e.timeZone,o={...e,timeZone:r};return i.toLocaleString(o,{locale:n})}function aV(t){switch(t){case Kp:return BMe;case av:return pf;default:return t}}Kq(()=>{pO=new WeakMap});const nAe={ar:"ar-u-nu-latn"};let OT=new WeakMap,mce={};function mO(t){const e=t||mce;if(!OT.has(e)){const i=kc(),s=nAe[kc()]||i;OT.set(e,new Intl.NumberFormat(s,t))}return OT.get(e)}function Sht(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Z9(t,e){return Object.is(t,-0)&&(t=0),mO(e).format(t)}function Eht(t,e=kc()){var s,n;if(!t)return null;let i=iZ.get(e);if(!i){const r=mO().formatToParts(12345.6),o=[...mO({useGrouping:!1}).format(9876543210)].reverse(),l=new Map(o.map((S,P)=>[S,P])),u=new RegExp(`[${(s=r.find(S=>S.type==="group"))==null?void 0:s.value}]`,"g"),f=new RegExp(`[${(n=r.find(S=>S.type==="decimal"))==null?void 0:n.value}]`),y=new RegExp(`[${o.join("")}]`,"g"),_=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,x=/[-\u2212\u2013\u2014\u2015]/g;i=S=>{if((S=S.trim().replaceAll(u,"").replace(f,".").replace(y,A=>String(l.get(A))).replaceAll(_,"").replaceAll(x,"-"))==="")return null;const P=Number(S);return isNaN(P)?null:P},iZ.set(e,i)}return i(t)}Kq(()=>{OT=new WeakMap,mce={}});const iZ=new Map,gce=()=>zt.getLogger("esri.intl.substitute");function yce(t,e,i={}){const{format:s={}}=i;return yM(t,n=>rAe(n,e,s))}function rAe(t,e,i){let s,n;const r=t.indexOf(":");if(r===-1?s=t.trim():(s=t.slice(0,r).trim(),n=t.slice(r+1).trim()),!s)return"";const o=zp(s,e);if(o==null)return"";const l=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[s]);return l?oAe(o,l):n?aAe(o,n):lV(o)}function oAe(t,e){switch(e.type){case"date":return Sg(t,e.intlOptions);case"number":return Z9(t,e.intlOptions);default:return gce().warn("missing format descriptor for key {key}"),lV(t)}}function aAe(t,e){switch(e.toLowerCase()){case"dateformat":return Sg(t);case"numberformat":return Z9(t);default:return gce().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Sg(t):/^numberformat/i.test(e)?Z9(t):lV(t)}}function lV(t){switch(typeof t){case"string":return t;case"number":return Z9(t);case"boolean":return""+t;default:return t instanceof Date?Sg(t):""}}const sZ=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,lAe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function nZ(t){return t in lAe}const p3=[],Xb=new Map;function rZ(t){for(const e of Xb.keys())vce(t.pattern,e)&&Xb.delete(e)}function cAe(t){return p3.includes(t)||(rZ(t),p3.unshift(t)),ds(()=>{const e=p3.indexOf(t);e>-1&&(p3.splice(e,1),rZ(t))})}async function uAe(t){const e=kc();Xb.has(t)||Xb.set(t,dAe(t,e));const i=Xb.get(t);return i&&await fAe.add(i),i}function hAe(t){if(!sZ.test(t))return null;const e=sZ.exec(t);if(e===null)return null;const[,i,s]=e,n=i+(s?"-"+s.toUpperCase():"");return nZ(n)?n:nZ(i)?i:null}async function dAe(t,e){const i=[];for(const s of p3)if(vce(s.pattern,t))try{return await s.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new rt("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new rt("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function vce(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}Kq(()=>{Xb.clear()});const fAe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Tc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function pAe(t,e,i,s){const n=e.exec(i);if(!n)throw new rt("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const r=n[1]?`${n[1]}/`:"",o=n[2],l=hAe(s),u=`${r}${o}.json`,f=l?`${r}${o}_${l}.json`:u;let y;try{y=await oZ(t(f))}catch(_){if(f===u)throw new rt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:_});try{y=await oZ(t(u))}catch(x){throw new rt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:x})}}return y}async function oZ(t){if(aZ.fetchBundleAsset!=null)return aZ.fetchBundleAsset(t);const e=await Qs(t,{responseType:"text"});return JSON.parse(e.data)}let mAe=class{constructor({base:e="",pattern:i,location:s=new URL(window.location.href)}){let n;n=typeof s=="string"?r=>new URL(r,new URL(s,window.location.href)).href:s instanceof URL?r=>new URL(r,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return pAe(this.getAssetUrl,this.matcher,e,i)}};function gAe(t){return new mAe(t)}const aZ={};cAe(gAe({pattern:"esri/",location:EC}));function yAe(t){return typeof t=="string"?document.getElementById(t):t??null}function Pht(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}function Tht(t,e,i){return Eq(t.map((s,n)=>e.apply(i,[s,n])))}async function vAe(t,e,i){return(await Eq(t.map((s,n)=>e.apply(i,[s,n])))).map(s=>s.value)}function cV(t){return{ok:!0,value:t}}function uV(t){return{ok:!1,error:t}}function _Ae(t){return t!=null&&t.ok===!0?t.value:null}function bAe(t){return t!=null&&t.ok===!1?t.error:null}async function hV(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return cV(await t)}catch(e){return uV(e)}}async function xAe(t){try{return cV(await t)}catch(e){return Oh(e),uV(e)}}function RM(t,e){return new p0(t,e)}let p0=class extends Ei{get value(){return _Ae(this._result)}get error(){return bAe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=dg(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:s}=this._abortController;this.promise=e(s),this.promise.then(n=>{this._result=cV(n),this._cleanup()},n=>{this._result=uV(n),this._cleanup()}),this._abortHandle=Ul(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Co(this._abortHandle),this._abortController=null}};I([N()],p0.prototype,"value",null),I([N()],p0.prototype,"error",null),I([N()],p0.prototype,"finished",null),I([N()],p0.prototype,"promise",void 0),I([N()],p0.prototype,"_result",void 0),p0=I([ke("esri.core.asyncUtils.ReactiveTask")],p0);var zs;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(zs||(zs={}));function dV(t){return(e,i)=>{e[i]=t}}let IC=class extends $oe{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}};var Np;let wAe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},SAe=class{constructor(e,i,s,n,r){this.target=e,this.added=i,this.removed=s,this.start=n,this.deleteCount=r}};const hu=new yC(wAe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function lZ(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function o8(t){return t?t instanceof Cp?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function a8(t){if(t!=null&&t.length)return t[0]}function EAe(t,e,i,s){const n=Math.min(t.length-i,e.length-s);let r=0;for(;r<n&&t[i+r]===e[s+r];)r++;return r}function _ce(t,e,i,s){e&&e.forEach((n,r,o)=>{t.push(n),_ce(t,i.call(s,n,r,o),i,s)})}const o0=new Set,a0=new Set,l0=new Set,l8=new Map;let CAe=0,Cp=Np=class extends Sa.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Np}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new IC,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:CAe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Np?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return mi(this._observable),this._items}set items(t){this._emitBeforeChanges(zs.ADD)||(this._splice(0,this.length,o8(t)),this._emitAfterChanges(zs.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,e){if(this.destroyed)return ds();if(t==="change"){const i=this._chgListeners,s={removed:!1,callback:e};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ds(()=>{s.removed=!0,i.splice(i.indexOf(s),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,s=this.on(t,n=>{var r;(r=i())==null||r.call(null,n),s.remove()});return s}add(t,e){if(mi(this._observable),this._emitBeforeChanges(zs.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(zs.ADD),this}addMany(t,e=this._items.length){if(mi(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(zs.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,o8(t)),this._emitAfterChanges(zs.ADD),this}at(t){if(mi(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(zs.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return mi(this._observable),this._createNewInstance({items:this._items.map(Ue)})}concat(...t){mi(this._observable);const e=t.map(o8);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let n=0;n<s;n++)t.call(e,i[n],n,i);this._emitAfterChanges(zs.REMOVE)}destroyAll(){this.drain(lZ)}destroyMany(t){const e=this.removeMany(t);return e.forEach(lZ),e}every(t,e){return mi(this._observable),this._items.every(t,e)}filter(t,e){let i;return mi(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return mi(this._observable),this._items.find(t,e)}findIndex(t,e){return mi(this._observable),this._items.findIndex(t,e)}flatten(t,e){mi(this._observable);const i=[];return _ce(i,this,t,e),new Np(i)}forEach(t,e){return mi(this._observable),this._items.forEach(t,e)}getItemAt(t){return mi(this._observable),this._items[t]}getNextIndex(t){mi(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return mi(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return mi(this._observable),this._items.indexOf(t,e)}join(t=","){return mi(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return mi(this._observable),this._items.lastIndexOf(t,e)}map(t,e){mi(this._observable);const i=this._items.map(t,e);return new Np({items:i})}reorder(t,e=this.length-1){mi(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(zs.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(zs.MOVE)}return t}}pop(){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return;const t=a8(this._splice(this.length-1,1));return this._emitAfterChanges(zs.REMOVE),t}push(...t){return mi(this._observable),this._emitBeforeChanges(zs.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(zs.ADD)),this.length}reduce(t,e){mi(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){mi(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return mi(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(mi(this._observable),t<0||t>=this.length||this._emitBeforeChanges(zs.REMOVE))return;const e=a8(this._splice(t,1));return this._emitAfterChanges(zs.REMOVE),e}removeMany(t){if(mi(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(zs.REMOVE))return[];const e=t instanceof Np?t.toArray():t,i=this._items,s=[],n=e.length;for(let r=0;r<n;r++){const o=e[r],l=i.indexOf(o);if(l>-1){const u=1+EAe(e,i,r+1,l+1),f=this._splice(l,u);f&&f.length>0&&s.push.apply(s,f),r+=u-1}}return this._emitAfterChanges(zs.REMOVE),s}reverse(){if(mi(this._observable),this._emitBeforeChanges(zs.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(zs.MOVE),this}shift(){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return;const t=a8(this._splice(0,1));return this._emitAfterChanges(zs.REMOVE),t}slice(t=0,e=this.length){return mi(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return mi(this._observable),this._items.some(t,e)}sort(t){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(zs.MOVE),this}splice(t,e,...i){mi(this._observable);const s=(e?zs.REMOVE:0)|(i.length?zs.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(s),n}toArray(){return mi(this._observable),this._items.slice()}toJSON(){return mi(this._observable),this.toArray()}toLocaleString(){return mi(this._observable),this._items.toLocaleString()}toString(){return mi(this._observable),this._items.toString()}unshift(...t){return mi(this._observable),!t.length||this._emitBeforeChanges(zs.ADD)||(this._splice(0,0,t),this._emitAfterChanges(zs.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const s=this._items,n=this.itemType;let r,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Cq(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=s.splice(t,e),this.hasEventListener("before-remove")){const l=hu.acquire();l.target=this,l.cancellable=!0;for(let u=0,f=o.length;u<f;u++)r=o[u],l.reset(r),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(u,1),s.splice(t,0,r),t+=1,u-=1,f-=1);hu.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=hu.acquire();l.target=this,l.cancellable=!1;const u=o.length;for(let f=0;f<u;f++)l.reset(o[f]),this.emit("after-remove",l);hu.release(l)}}if(i!=null&&i.length){if(n){const y=[];for(const _ of i){const x=n.ensureType(_);x==null&&_!=null||y.push(x)}i=y}const l=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),f=t===this.length;if(l||u){const y=hu.acquire();y.target=this,y.cancellable=!0;const _=hu.acquire();_.target=this,_.cancellable=!1;for(const x of i)l?(y.reset(x),this.emit("before-add",y),y.defaultPrevented||(f?s.push(x):s.splice(t++,0,x),this._set("length",s.length),u&&(_.reset(x),this.emit("after-add",_)))):(f?s.push(x):s.splice(t++,0,x),this._set("length",s.length),_.reset(x),this.emit("after-add",_));hu.release(_),hu.release(y)}else{if(f)for(const y of i)s.push(y);else s.splice(t,0,...i);this._set("length",s.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const l=new SAe(this,i,o,t,e);this.emit("after-splice",l)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=hu.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,hu.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=hu.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),hu.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;o0.clear(),a0.clear(),l0.clear();for(const{added:u,removed:f}of i){if(u)if(l0.size===0&&a0.size===0)for(const y of u)o0.add(y);else for(const y of u)a0.has(y)?(l0.add(y),a0.delete(y)):l0.has(y)||o0.add(y);if(f)if(l0.size===0&&o0.size===0)for(const y of f)a0.add(y);else for(const y of f)o0.has(y)?o0.delete(y):(l0.delete(y),a0.add(y))}const s=Wd.acquire();o0.forEach(u=>{s.push(u)});const n=Wd.acquire();a0.forEach(u=>{n.push(u)});const r=this._items,o=e.items,l=Wd.acquire();if(l0.forEach(u=>{o.indexOf(u)!==r.indexOf(u)&&l.push(u)}),e.listeners&&(s.length||n.length||l.length)){const u={target:this,added:s,removed:n,moved:l},f=e.listeners.length;for(let y=0;y<f;y++){const _=e.listeners[y];_.removed||_.callback.call(this,u)}}Wd.release(s),Wd.release(n),Wd.release(l)}o0.clear(),a0.clear(),l0.clear()}};Cp.ofType=t=>{if(!t)return Np;if(l8.has(t))return l8.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const s in t.typeMap){const n=t.typeMap[s].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends Np{};return I([dV({Type:t,ensureType:typeof t=="function"?Ko(t):Yu(t)})],i.prototype,"itemType",void 0),i=I([ke(`esri.core.Collection<${e}>`)],i),l8.set(t,i),i},I([N()],Cp.prototype,"_updating",void 0),I([N()],Cp.prototype,"length",void 0),I([N()],Cp.prototype,"items",null),I([N({readOnly:!0})],Cp.prototype,"updating",null),Cp=Np=I([ke("esri.core.Collection")],Cp);const ci=Cp;function xi(t,e,i={}){return fV(t,e,i,xce)}function Eg(t,e,i={}){return fV(t,e,i,wce)}function fV(t,e,i={},s){let n=null;const r=i.once?(o,l)=>{s(o)&&(Co(n),e(o,l))}:(o,l)=>{s(o)&&e(o,l)};if(n=H4e(t,r,i.sync,i.equals),i.initial){const o=t();r(o,o)}return n}function mf(t,e,i,s={}){let n=null,r=null,o=null;function l(){var y;n&&r&&(r.remove(),(y=s.onListenerRemove)==null||y.call(s,n),n=null,r=null)}function u(y){s.once&&s.once&&Co(o),i(y)}const f=xi(t,(y,_)=>{var x;l(),xM(y)&&(n=y,r=zy(y,e,u),(x=s.onListenerAdd)==null||x.call(s,y))},{sync:s.sync,initial:!0});return o=ds(()=>{f.remove(),l()}),o}function PAe(t,e){return bce(t,null,e)}function gO(t,e){return bce(t,wce,e)}function bce(t,e,i){if(Rc(i))return Promise.reject(or());const s=t();if(e!=null&&e(s))return Promise.resolve(s);let n=null;function r(){n=Co(n)}return new Promise((o,l)=>{n=pm([Ul(i,()=>{r(),l(or())}),fV(t,u=>{r(),o(u)},{sync:!1,once:!0},e??xce)])})}function xce(t){return!0}function wce(t){return!!t}function TAe(t,e,i={}){let s=!1;const n=xi(t,(r,o)=>{s||e(r,o)},i);return{remove(){n.remove()},pause(){s=!0},resume(){s=!1}}}function Sce(t,e){const i=new ci,s=mf(t,"after-splice",({added:n,start:r,deleteCount:o})=>{const l=i.splice(r,o);for(const u of l)u.remove();if(n!=null&&n.length){const u=n.map(e);i.addMany(u,r)}},{sync:!0,onListenerRemove:()=>i.drain(n=>n.remove()),onListenerAdd:n=>i.addMany(n.items.map(e))});return i.addHandles(s),i}function IAe(t,e){const i=new ci,s=Sce(t,l=>RM(async u=>{const f=await e(l,u);if(Rc(u))throw f.remove(),or();return f})),n=()=>null,r=async l=>{const u=await l.promise,f=s.indexOf(l);f<0||i.splice(f,1,u)};i.addMany(s.items.map(n));for(const l of s)Qh(r(l));const o=s.on("after-splice",({added:l,start:u,deleteCount:f})=>{const y=i.splice(u,f);for(const _ of y)_==null||_.remove();if(l!=null&&l.length){i.addMany(l.map(n),u);for(const _ of l)Qh(r(_))}});return i.addHandles([BPe(s),o]),i}const Jp={sync:!0},Xl={initial:!0},ec={sync:!0,initial:!0},MAe=Object.freeze(Object.defineProperty({__proto__:null,autorun:Tq,initial:Xl,mapCollection:Sce,mapCollectionAsync:IAe,on:mf,once:PAe,pausable:TAe,sync:Jp,syncAndInitial:ec,watch:xi,when:Eg,whenOnce:gO},Symbol.toStringTag,{value:"Module"})),AAe="randomUUID"in crypto;function pV(){if(AAe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function kht(){return`{${pV().toUpperCase()}}`}function DAe(){return`{${pV()}}`}function kAe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K9=function(){return K9=Object.assign||function(e){for(var i,s=1,n=arguments.length;s<n;s++){i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},K9.apply(this,arguments)},yO={exports:{}},wr={},vO={exports:{}},Nv={};function Ece(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function NAe(t,e,i){}function $Ae(t,e,i){}var OAe=/javascript\s*\:/img;function RAe(t,e){return OAe.test(e)?"":e}Nv.whiteList=Ece();Nv.getDefaultWhiteList=Ece;Nv.onAttr=NAe;Nv.onIgnoreAttr=$Ae;Nv.safeAttrValue=RAe;var LAe={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,n;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,n=t.length;s<n;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Gw=LAe;function FAe(t,e){t=Gw.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,s=!1,n=0,r=0,o="";function l(){if(!s){var y=Gw.trim(t.slice(n,r)),_=y.indexOf(":");if(_!==-1){var x=Gw.trim(y.slice(0,_)),S=Gw.trim(y.slice(_+1));if(x){var P=e(n,o.length,x,S,y);P&&(o+=P+"; ")}}}n=r+1}for(;r<i;r++){var u=t[r];if(u==="/"&&t[r+1]==="*"){var f=t.indexOf("*/",r+2);if(f===-1)break;r=f+1,n=r+1,s=!1}else u==="("?s=!0:u===")"?s=!1:u===";"?s||l():u===`
`&&l()}return Gw.trim(o)}var zAe=FAe,n4=Nv,qAe=zAe;function cZ(t){return t==null}function VAe(t){var e={};for(var i in t)e[i]=t[i];return e}function Cce(t){t=VAe(t||{}),t.whiteList=t.whiteList||n4.whiteList,t.onAttr=t.onAttr||n4.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||n4.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||n4.safeAttrValue,this.options=t}Cce.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,n=i.onAttr,r=i.onIgnoreAttr,o=i.safeAttrValue,l=qAe(t,function(u,f,y,_,x){var S=s[y],P=!1;if(S===!0?P=S:typeof S=="function"?P=S(_):S instanceof RegExp&&(P=S.test(_)),P!==!0&&(P=!1),_=o(y,_),!!_){var A={position:f,sourcePosition:u,source:x,isWhite:P};if(P){var k=n(y,_,A);return cZ(k)?y+":"+_:k}else{var k=r(y,_,A);if(!cZ(k))return k}}});return l};var GAe=Cce;(function(t,e){var i=Nv,s=GAe;function n(o,l){var u=new s(l);return u.process(o)}e=t.exports=n,e.FilterCSS=s;for(var r in i)e[r]=i[r]})(vO,vO.exports);var mV=vO.exports,gV={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,n;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,n=t.length;s<n;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},jAe=mV.FilterCSS,BAe=mV.getDefaultWhiteList,J9=gV;function Pce(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Tce=new jAe;function HAe(t,e,i){}function UAe(t,e,i){}function YAe(t,e,i){}function XAe(t,e,i){}function Ice(t){return t.replace(ZAe,"&lt;").replace(KAe,"&gt;")}function WAe(t,e,i,s){if(i=$ce(i),e==="href"||e==="src"){if(i=J9.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(r4.lastIndex=0,r4.test(i))return""}else if(e==="style"){if(uZ.lastIndex=0,uZ.test(i)||(hZ.lastIndex=0,hZ.test(i)&&(r4.lastIndex=0,r4.test(i))))return"";s!==!1&&(s=s||Tce,i=s.process(i))}return i=Oce(i),i}var ZAe=/</g,KAe=/>/g,JAe=/"/g,QAe=/&quot;/g,e7e=/&#([a-zA-Z0-9]*);?/gim,t7e=/&colon;?/gim,i7e=/&newline;?/gim,r4=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,uZ=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,hZ=/u\s*r\s*l\s*\(.*/gi;function Mce(t){return t.replace(JAe,"&quot;")}function Ace(t){return t.replace(QAe,'"')}function Dce(t){return t.replace(e7e,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function kce(t){return t.replace(t7e,":").replace(i7e," ")}function Nce(t){for(var e="",i=0,s=t.length;i<s;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return J9.trim(e)}function $ce(t){return t=Ace(t),t=Dce(t),t=kce(t),t=Nce(t),t}function Oce(t){return t=Mce(t),t=Ice(t),t}function s7e(){return""}function n7e(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function s(o){return i?!0:J9.indexOf(t,o)!==-1}var n=[],r=!1;return{onIgnoreTag:function(o,l,u){if(s(o))if(u.isClosing){var f="[/removed]",y=u.position+f.length;return n.push([r!==!1?r:u.position,y]),r=!1,f}else return r||(r=u.position),"[removed]";else return e(o,l,u)},remove:function(o){var l="",u=0;return J9.forEach(n,function(f){l+=o.slice(u,f[0]),u=f[1]}),l+=o.slice(u),l}}}function r7e(t){for(var e="",i=0;i<t.length;){var s=t.indexOf("<!--",i);if(s===-1){e+=t.slice(i);break}e+=t.slice(i,s);var n=t.indexOf("-->",s);if(n===-1)break;i=n+3}return e}function o7e(t){var e=t.split("");return e=e.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),e.join("")}wr.whiteList=Pce();wr.getDefaultWhiteList=Pce;wr.onTag=HAe;wr.onIgnoreTag=UAe;wr.onTagAttr=YAe;wr.onIgnoreTagAttr=XAe;wr.safeAttrValue=WAe;wr.escapeHtml=Ice;wr.escapeQuote=Mce;wr.unescapeQuote=Ace;wr.escapeHtmlEntities=Dce;wr.escapeDangerHtml5Entities=kce;wr.clearNonPrintableCharacter=Nce;wr.friendlyAttrValue=$ce;wr.escapeAttrValue=Oce;wr.onIgnoreTagStripAll=s7e;wr.StripTagBody=n7e;wr.stripCommentTag=r7e;wr.stripBlankChar=o7e;wr.cssFilter=Tce;wr.getDefaultCSSWhiteList=BAe;var LM={},q0=gV;function a7e(t){var e=q0.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=q0.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function l7e(t){return t.slice(0,2)==="</"}function c7e(t,e,i){var s="",n=0,r=!1,o=!1,l=0,u=t.length,f="",y="";e:for(l=0;l<u;l++){var _=t.charAt(l);if(r===!1){if(_==="<"){r=l;continue}}else if(o===!1){if(_==="<"){s+=i(t.slice(n,l)),r=l,n=l;continue}if(_===">"){s+=i(t.slice(n,r)),y=t.slice(r,l+1),f=a7e(y),s+=e(r,s.length,f,y,l7e(y)),n=l+1,r=!1;continue}if(_==='"'||_==="'")for(var x=1,S=t.charAt(l-x);S.trim()===""||S==="=";){if(S==="="){o=_;continue e}S=t.charAt(l-++x)}}else if(_===o){o=!1;continue}}return n<t.length&&(s+=i(t.substr(n))),s}var u7e=/[^a-zA-Z0-9\\_:.-]/gim;function h7e(t,e){var i=0,s=0,n=[],r=!1,o=t.length;function l(x,S){if(x=q0.trim(x),x=x.replace(u7e,"").toLowerCase(),!(x.length<1)){var P=e(x,S||"");P&&n.push(P)}}for(var u=0;u<o;u++){var f=t.charAt(u),y,_;if(r===!1&&f==="="){r=t.slice(i,u),i=u+1,s=t.charAt(i)==='"'||t.charAt(i)==="'"?i:f7e(t,u+1);continue}if(r!==!1&&u===s){if(_=t.indexOf(f,u+1),_===-1)break;y=q0.trim(t.slice(s+1,_)),l(r,y),r=!1,u=_,i=u+1;continue}if(/\s|\n|\t/.test(f))if(t=t.replace(/\s|\n|\t/g," "),r===!1)if(_=d7e(t,u),_===-1){y=q0.trim(t.slice(i,u)),l(y),r=!1,i=u+1;continue}else{u=_-1;continue}else if(_=p7e(t,u-1),_===-1){y=q0.trim(t.slice(i,u)),y=dZ(y),l(r,y),r=!1,i=u+1;continue}else continue}return i<t.length&&(r===!1?l(t.slice(i)):l(r,dZ(q0.trim(t.slice(i))))),q0.trim(n.join(" "))}function d7e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function f7e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function p7e(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function m7e(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function dZ(t){return m7e(t)?t.substr(1,t.length-2):t}LM.parseTag=c7e;LM.parseAttr=h7e;var g7e=mV.FilterCSS,kh=wr,Rce=LM,y7e=Rce.parseTag,v7e=Rce.parseAttr,RT=gV;function o4(t){return t==null}function _7e(t){var e=RT.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=RT.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=RT.trim(t.slice(0,-1))),{html:t,closing:i}}function b7e(t){var e={};for(var i in t)e[i]=t[i];return e}function x7e(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(s){return s.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Lce(t){t=b7e(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=kh.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=x7e(t.whiteList||t.allowList):t.whiteList=kh.whiteList,t.onTag=t.onTag||kh.onTag,t.onTagAttr=t.onTagAttr||kh.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||kh.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||kh.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||kh.safeAttrValue,t.escapeHtml=t.escapeHtml||kh.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new g7e(t.css))}Lce.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,n=i.onTag,r=i.onIgnoreTag,o=i.onTagAttr,l=i.onIgnoreTagAttr,u=i.safeAttrValue,f=i.escapeHtml,y=e.cssFilter;i.stripBlankChar&&(t=kh.stripBlankChar(t)),i.allowCommentTag||(t=kh.stripCommentTag(t));var _=!1;i.stripIgnoreTagBody&&(_=kh.StripTagBody(i.stripIgnoreTagBody,r),r=_.onIgnoreTag);var x=y7e(t,function(S,P,A,k,$){var F={sourcePosition:S,position:P,isClosing:$,isWhite:Object.prototype.hasOwnProperty.call(s,A)},G=n(A,k,F);if(!o4(G))return G;if(F.isWhite){if(F.isClosing)return"</"+A+">";var V=_7e(k),B=s[A],W=v7e(V.html,function(J,re){var se=RT.indexOf(B,J)!==-1,oe=o(A,J,re,se);return o4(oe)?se?(re=u(A,J,re,y),re?J+'="'+re+'"':J):(oe=l(A,J,re,se),o4(oe)?void 0:oe):oe});return k="<"+A,W&&(k+=" "+W),V.closing&&(k+=" /"),k+=">",k}else return G=r(A,k,F),o4(G)?f(k):G},f);return _&&(x=_.remove(x)),x};var w7e=Lce;(function(t,e){var i=wr,s=LM,n=w7e;function r(l,u){var f=new n(u);return f.process(l)}e=t.exports=r,e.filterXSS=r,e.FilterXSS=n,function(){for(var l in i)e[l]=i[l];for(var u in s)e[u]=s[u]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(yO,yO.exports);var M_=yO.exports,S7e=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},E7e=function(){function t(e,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=K9(K9({},M_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(r,o,l,u){return r==="a"&&o==="href"||(r==="img"||r==="source")&&o==="src"?s.sanitizeUrl(l):M_.safeAttrValue(r,o,l,u)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(r){if(r==="whiteList")n.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,e.whiteList||{}]);else if(r==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(l){return n.css.whiteList[l]=o[l]})}else n[r]=e[r]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new M_.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var s=(i??{}).isProtocolRequired,n=s===void 0?!0:s,r=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",l=/^#/.test(e),u=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return o||l||u?M_.escapeAttrValue(e):!r&&!n?M_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,s,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,s,n):M_.safeAttrValue(e,i,s,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var s=this.sanitize(e,i);return{isValid:e===s,sanitized:s}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(s,n){return i.test(s)?s:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(s){Object.keys(s).forEach(function(n){Array.isArray(s[n])&&Array.isArray(i[n])?i[n]=i[n].concat(s[n]):i[n]=s[n]})}),i},t.prototype._iterateOverObject=function(e,i){var s=this;i===void 0&&(i={});try{var n=!1,r=void 0;if(Array.isArray(e))r=e.reduce(function(l,u){var f=s.validate(u,i);return f.isValid?l.concat([u]):(n=!0,l.concat([f.sanitized]))},[]);else if(S7e(e)){var o=Object.keys(e);r=o.reduce(function(l,u){var f=e[u],y=s.validate(f,i);return y.isValid?l[u]=f:(n=!0,l[u]=y.sanitized),l},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?r:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const FM=new Map;function Fce(){FM.clear()}function C7e(t){return FM.get(t)}function P7e(t,e){FM.set(t,e)}function c8(t){FM.delete(t)}function T7e(...t){const e=Wd.acquire();for(let s=0;s<t.length;s++){const n=t[s],r=typeof n;if(r==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(r==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return Wd.release(e),i}const Nht=(()=>{const t=new Map,e=new ResizeObserver(s=>{var n;Fce();for(const r of s)(n=t.get(r.target))==null||n(r)}),i=(s,n,r)=>(t.set(s,n),e.observe(s,r),ds(()=>{e.unobserve(s),t.delete(s)}));return(s,n,r)=>{let o=null;return pm([xi(()=>typeof s=="function"?s():s,l=>{o==null||o.remove(),l&&(o=i(l,n,r))},ec),ds(()=>o==null?void 0:o.remove())])}})();function fZ(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function $ht(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Oht(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const I7e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],M7e=I7e.reduce((t,e)=>(t[e]=[],t),{}),A7e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],zce=new E7e({whiteList:M7e,onTagAttr:(t,e,i)=>{const s=`${e}="${i}"`;if(A7e.includes(e))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Rht(t){return t==="Enter"||t===" "}async function qce(t,e){await T4e(vC(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Vce="http://www.w3.org/",zM=`${Vce}2000/svg`,Gce=`${Vce}1999/xlink`;let pZ=[],yV=(t,e)=>{let i={};return Object.keys(t).forEach(s=>{i[s]=t[s]}),e&&Object.keys(e).forEach(s=>{i[s]=e[s]}),i},vV=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),jce=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},D7e=(t,e,i)=>{if(e.vnodeSelector!==""){for(let s=i;s<t.length;s++)if(vV(t[s],e))return s}return-1},u8=(t,e,i,s)=>{let n=t[e];if(n.vnodeSelector==="")return;let r=n.properties;if(!(r&&(r.key===void 0?r.bind:r.key))){for(let o=0;o<t.length;o++)if(o!==e){let l=t[o];if(vV(l,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},k7e=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},_O=[],bO=!1,Bce=t=>{(t.children||[]).forEach(Bce),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},mZ=()=>{bO=!1,_O.forEach(Bce),_O.length=0},gZ=t=>{_O.push(t),bO||(bO=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(mZ,{timeout:16}):setTimeout(mZ,16))},yZ=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),gZ(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),gZ(t))},N7e=(t,e,i)=>{if(!e)return;let s=i.eventHandlerInterceptor,n=Object.keys(e),r=n.length;for(let o=0;o<r;o++){let l=n[o],u=e[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")wO(t,u,!0);else if(l==="classes"){let f=Object.keys(u),y=f.length;for(let _=0;_<y;_++){let x=f[_];u[x]&&t.classList.add(x)}}else if(l==="styles"){let f=Object.keys(u),y=f.length;for(let _=0;_<y;_++){let x=f[_],S=u[x];S&&(jce(S),i.styleApplyer(t,x,S))}}else if(l!=="key"&&u!=null){let f=typeof u;f==="function"?(l.lastIndexOf("on",0)===0&&(s&&(u=s(l,u,t,e)),l==="oninput"&&function(){let y=u;u=function(_){y.apply(this,[_]),_.target["oninput-value"]=_.target.value}}()),t[l]=u):i.namespace===zM?l==="href"?t.setAttributeNS(Gce,l,u):t.setAttribute(l,u):f==="string"&&l!=="value"?l==="innerHTML"?t[l]=zce.sanitize(u):xO(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]=u}}};function xO(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let Q9,$7e=(t,e,i)=>{if(e)for(let s of e)PS(s,t,void 0,i)},Hce=(t,e,i)=>{$7e(t,e.children,i),e.text&&(t.textContent=e.text),N7e(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},PS=(t,e,i,s)=>{let n,r=0,o=t.vnodeSelector,l=e.ownerDocument;if(o==="")n=t.domNode=l.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let u=0;u<=o.length;++u){let f=o.charAt(u);if(u===o.length||f==="."||f==="#"){let y=o.charAt(r-1),_=o.slice(r,u);y==="."?n.classList.add(_):y==="#"?n.id=_:(_==="svg"&&(s=yV(s,{namespace:zM})),s.namespace!==void 0?n=t.domNode=l.createElementNS(s.namespace,_):(n=t.domNode=t.domNode||l.createElement(_),_==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),r=u+1}}Hce(n,t,s)}},wO=(t,e,i)=>{e&&e.split(" ").forEach(s=>{s&&t.classList.toggle(s,i)})},O7e=(t,e,i,s)=>{if(!i)return;let n=!1,r=Object.keys(i),o=r.length;for(let l=0;l<o;l++){let u=r[l],f=i[u],y=e[u];if(u==="class")y!==f&&(wO(t,y,!1),wO(t,f,!0));else if(u==="classes"){let _=t.classList,x=Object.keys(f),S=x.length;for(let P=0;P<S;P++){let A=x[P],k=!!f[A];k!==!!y[A]&&(n=!0,k?_.add(A):_.remove(A))}}else if(u==="styles"){let _=Object.keys(f),x=_.length;for(let S=0;S<x;S++){let P=_[S],A=f[P];A!==y[P]&&(n=!0,A?(jce(A),s.styleApplyer(t,P,A)):s.styleApplyer(t,P,""))}}else if(f||typeof y!="string"||(f=""),u!=="value"||xO(t)){if(f!==y){let _=typeof f;_==="function"&&s.eventHandlerInterceptor||(s.namespace===zM?u==="href"?t.setAttributeNS(Gce,u,f):t.setAttribute(u,f):_==="string"?u==="innerHTML"?t[u]=zce.sanitize(f):u==="role"&&f===""?t.removeAttribute(u):xO(t)&&u in t?t[u]=f:t.setAttribute(u,f):t[u]!==f&&(t[u]=f),n=!0)}}else{let _=t[u];_!==f&&(t["oninput-value"]?_===t["oninput-value"]:f!==y)&&(t[u]=f,t["oninput-value"]=void 0),f!==y&&(n=!0)}}return n},R7e=(t,e,i,s,n)=>{if(i===s)return!1;s=s||pZ;let r,o=(i=i||pZ).length,l=s.length,u=0,f=0,y=!1;for(;f<l;){let _=u<o?i[u]:void 0,x=s[f];if(_!==void 0&&vV(_,x))y=Q9(_,x,n)||y,u++;else{let S=D7e(i,x,u+1);if(S>=0){for(r=u;r<S;r++)yZ(i[r]),u8(i,r,t,"removed");y=Q9(i[S],x,n)||y,u=S+1}else PS(x,e,u<o?i[u].domNode:void 0,n),k7e(x),u8(s,f,t,"added")}f++}if(o>u)for(r=u;r<o;r++)yZ(i[r]),u8(i,r,t,"removed");return y};Q9=(t,e,i)=>{let s=t.domNode,n=!1;if(t===e)return!1;let r=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=s.ownerDocument.createTextNode(e.text);return s.parentNode.replaceChild(o,s),e.domNode=o,n=!0,n}e.domNode=s}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=yV(i,{namespace:zM})),t.text!==e.text&&(r=!0,e.text===void 0?s.removeChild(s.firstChild):s.textContent=e.text),e.domNode=s,r=R7e(e,s,t.children,e.children,i)||r,r=O7e(s,t.properties,e.properties,i)||r,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[s,i,e.vnodeSelector,e.properties,e.children]);return r&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(s,e.properties,t.properties),n};let a4=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=t;t=i,Q9(s,i,e)},domNode:t.domNode});const L7e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let m3=t=>yV(L7e,t),eg={append:(t,e,i)=>(i=m3(i),PS(e,t,void 0,i),a4(e,i)),insertBefore:(t,e,i)=>(i=m3(i),PS(e,t.parentNode,t,i),a4(e,i)),merge:(t,e,i)=>(i=m3(i),e.domNode=t,Hce(t,e,i),a4(e,i)),replace:(t,e,i)=>(i=m3(i),PS(e,t.parentNode,t,i),t.parentNode.removeChild(t),a4(e,i))},Uce,F7e=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Uce=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let z7e=(t,e)=>{let i=t;return e.forEach(s=>{i=i&&i.children?Uce(i.children,n=>n.domNode===s):void 0}),i},q7e=(t,e,i)=>{let s=function(n){i("domEvent",n);let r=e(),o=F7e(n.currentTarget,r.domNode);o.reverse();let l,u=z7e(r.getLastRender(),o);return t.scheduleRender(),u&&(l=u.properties[`on${n.type}`].apply(u.properties.bind||this,arguments)),i("domEventProcessed",n),l};return(n,r,o,l)=>s},Lht=t=>{let e,i,s=m3(t),n=s.performanceLogger,r=!0,o=!1,l=[],u=[],f=(_,x,S)=>{let P,A=()=>P;s.eventHandlerInterceptor=q7e(e,A,n),P=_(x,S(),s),l.push(P),u.push(S)},y=()=>{if(i=void 0,r){r=!1,n("renderStart",void 0);for(let _=0;_<l.length;_++){let x=u[_]();n("rendered",void 0),l[_].update(x),n("patched",void 0)}n("renderDone",void 0),r=!0}};return e={renderNow:y,scheduleRender:()=>{i||o||(i=requestAnimationFrame(y))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,r=!0,e.scheduleRender()},append:(_,x)=>{f(eg.append,_,x)},insertBefore:(_,x)=>{f(eg.insertBefore,_,x)},merge:(_,x)=>{f(eg.merge,_,x)},replace:(_,x)=>{f(eg.replace,_,x)},detach:_=>{for(let x=0;x<u.length;x++)if(u[x]===_)return u.splice(x,1),l.splice(x,1)[0];throw new Error("renderFunction was not found")}},e};const V7e={handleInterceptedEvent:(t,e,i,s)=>(t.scheduleRender(),e.properties[`on${s.type}`].apply(e.properties.bind||i,[s]))},G7e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},j7e=t=>({...G7e,...t}),B7e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},H7e=(t,e)=>t.find(e),vZ=(t,e,i=!1)=>{let s=t;return e.forEach((n,r)=>{const o=s!=null&&s.children?H7e(s.children,l=>l.domNode===n):void 0;i&&!o&&r!==e.length-1||(s=o)}),s},U7e=t=>{let e;const i={...V7e,...t},s=j7e(i),n=s.performanceLogger;let r,o=!0,l=!1;const u=[],f=[],y=(x,S,P)=>{var $;let A;s.eventHandlerInterceptor=(F,G,V,B)=>function(W){let J;n("domEvent",W);const re=B7e(W.currentTarget,A.domNode),se=re.some(pe=>{var ce;return customElements.get((ce=pe==null?void 0:pe.tagName)==null?void 0:ce.toLowerCase())});if(W.eventPhase===Event.CAPTURING_PHASE||!se)re.reverse(),J=vZ(A.getLastRender(),re);else{const pe=W.composedPath(),ce=pe.slice(pe.indexOf(W.currentTarget),pe.indexOf(A.domNode)).reverse();J=vZ(A.getLastRender(),ce,!0)}let oe;return J&&(oe=i.handleInterceptedEvent(e,J,this,W)),n("domEventProcessed",W),oe},($=i.postProcessProjectionOptions)==null||$.call(i,s);const k=P();A=x(S,k,s),s.eventHandlerInterceptor=void 0,u.push(A),f.push(P),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(A,k)};let _=()=>{if(r=void 0,o){o=!1,n("renderStart",void 0);for(let x=0;x<u.length;x++){const S=f[x]();n("rendered",void 0);try{u[x].update(S)}catch(P){console.error(P)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(_=i.modifyDoRenderImplementation(_,u,f)),e={renderNow:_,scheduleRender:()=>{r||l||(r=requestAnimationFrame(_))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),l=!0},resume:()=>{l=!1,o=!0,e.scheduleRender()},append:(x,S)=>{y(eg.append,x,S)},insertBefore:(x,S)=>{y(eg.insertBefore,x,S)},merge:(x,S)=>{y(eg.merge,x,S)},replace:(x,S)=>{y(eg.replace,x,S)},detach:x=>{for(let S=0;S<f.length;S++)if(f[S]===x)return f.splice(S,1),u.splice(S,1)[0];throw new Error("renderFunction was not found")}},e};let Yce;function Y7e(){try{Uz(".")}catch{Qse(ml(EC(Yce)))}}function dx(t){var i;const e=[];for(const s of Object.keys(t))customElements.get(`calcite-${s}`)||e.push((i=t[s])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}Yce="components/assets";const Xce=Symbol("widget"),Wce=Symbol("widget-test-data"),X7e=[],W7e={},e6=new WeakMap;function Zce(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=Zce(t,i[n]);else i=X7e;const s=e.vnodeSelector;if(t6(s)){const n=e.properties||W7e,r=n.key||s,o={key:r,afterCreate:Z7e,afterUpdate:K7e,afterRemoved:Kce,parentWidget:t,widgetConstructor:s,widgetProperties:{...n,key:r,children:i}};return{vnodeSelector:s.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function Z7e(t,e,i,{parentWidget:s,widgetConstructor:n,widgetProperties:r}){var l;const o=new n(r);o.container=t,e6.set(t,o),(l=o.afterCreate)==null||l.call(o,o,t),s.addHandles(ds(()=>Kce(t))),queueMicrotask(()=>{o[Wce].projector.renderNow()})}function K7e(t,e,i,{widgetProperties:s}){var r;const n=e6.get(t);n&&(n.set(s),(r=n.afterUpdate)==null||r.call(n,n,t))}function Kce(t){var i;const e=e6.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),e6.delete(t))}function t6(t){return typeof t=="function"&&t[Xce]}const _Z=new Set;function J7e(t){_Z.add(t),t.finally(()=>_Z.delete(t))}var Jce;const Q7e="esri.widgets.Widget";let eDe=0;function Qce(t,e){const i=Object.prototype.hasOwnProperty;for(const s in e)i.call(e,s)&&i.call(t,s)&&(t[s]!=null&&e[s]!=null&&typeof t[s]=="object"&&typeof e[s]=="object"?Qce(t[s],e[s]):t[s]=e[s]);return t}const tDe=U7e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(s,n,r,o)=>{const l=e==null?void 0:e(s,n,r,o),u=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in r)||u){const f=s[2].toLowerCase()+s.slice(3),y=S=>l==null?void 0:l.call(r,S);r.addEventListener(f,y,u);const _=()=>r.removeEventListener(f,y,u),x=o.afterRemoved;o.afterRemoved=S=>{x==null||x(S),_()}}return l}},handleInterceptedEvent(t,e,i,s){const{eventPhase:n,type:r}=s,o=n===Event.CAPTURING_PHASE;let l=`on${r}${o?"capture":""}`;const u=e.properties;(u&&l in u||(l=`on${r[0].toUpperCase()}${r.slice(1)}${o?"Capture":""}`,u&&l in u))&&(Fce(),t.scheduleRender(),u[l].call(u.bind||i,s))}});let h8=!1,Kr=class extends Gq(Sa.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=tDe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Mv(async()=>{var u;if((u=this._messageBundleProps)!=null&&u.length){const f=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:y,propertyName:_})=>{if(this.destroyed)return;let x=await uAe(y);this.uiStrings&&Object.keys(this.uiStrings)&&(x=Qce(Ue(x),this.uiStrings)),this[_]=x}));if(this.destroyed)return;for(const y of f)y.status==="rejected"&&zt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,y.reason)}await this.loadLocale()}),Y7e();const s="esri-widget-uid-"+pV(),n=this.render.bind(this);this._trackingTarget=new wM(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const r=()=>({vnodeSelector:"div",properties:{key:`${s}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var _,x;if(!this._readyForTrueRender||this.destroyed)return null;const u=n()??r(),f=u.properties??(u.properties={});if(f.key??(f.key=s),t6(u.vnodeSelector)){if(!this.visible)return r()}else this.visible?f.styles||(f.styles={}):(f.class="",f.styles={display:"none"}),(_=f.styles).display??(_.display="");let y=0;return(x=u.children)==null||x.forEach(S=>{var P;t6(S.vnodeSelector)||(S.properties??(S.properties={}),(P=S.properties).key??(P.key=`${this.id}--${y++}`))}),Zce(this,u)};this.render=()=>{if(h8)return o();let u=C7e(this)??null;if(u)return u;this._trackingTarget.clear(),h8=!0;try{u=Wp(this._trackingTarget,o)}catch(f){throw zt.getLogger(this).error(f),f}finally{h8=!1}return u&&P7e(this,u),u};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),J7e(this._resourcesFetch)}normalizeCtorArgs(e,i){const s={...e};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(YX):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(no(this._trackingTarget),no(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,c8(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return yAe(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+eDe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Jce=Xce,Wce)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(c8(this),this._projector.scheduleRender())}own(e){Poe(zt.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return T7e.apply(this,e)}renderNow(){c8(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(xi(()=>this.viewModel,(s,n)=>{n&&this.removeHandles("delegated-events"),s&&xM(s)&&this.addHandles(this._delegatedEventNames.map(r=>zy(s,r,o=>{this.emit(r,o)})),"delegated-events")},ec)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(YX),this.scheduleRender()};this.addHandles([R9e(e),xi(()=>this.uiStrings,e),Eg(()=>this.container,s=>{this.destroyed||this._attach(s)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Kr[Jce]=!0,Kr.vnodeSelector="div",I([N()],Kr.prototype,"_readyForTrueRender",void 0),I([N({value:null})],Kr.prototype,"container",null),I([Sn("container")],Kr.prototype,"castContainer",null),I([N()],Kr.prototype,"icon",null),I([N()],Kr.prototype,"id",null),I([N()],Kr.prototype,"label",null),I([N()],Kr.prototype,"renderable",null),I([N()],Kr.prototype,"uiStrings",void 0),I([N()],Kr.prototype,"viewModel",void 0),I([N({value:!0})],Kr.prototype,"visible",null),I([N()],Kr.prototype,"key",void 0),I([N()],Kr.prototype,"children",void 0),I([N()],Kr.prototype,"afterCreate",void 0),I([N()],Kr.prototype,"afterUpdate",void 0),I([N()],Kr.prototype,"afterRemoved",void 0),Kr=I([ke(Q7e)],Kr);const fx=Kr;function Cg(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var iDe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},eue=function(t,e){for(var i=0,s=t.length;i<s;i++){var n=t[i];Array.isArray(n)?eue(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=iDe(n)),e.push(n))}},sDe=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return eue(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function kt(t,e,...i){return typeof t!="function"||t6(t)?sDe(t,e,...i):t(e,...i)}function nDe(...t){return t}const tue="calcite-mode-";function rDe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function oDe(){return rDe().startsWith("dark")}function iue(){return`${tue}${oDe()?"dark":"light"}`}function zht(t){aDe(t),t.classList.add(iue())}function aDe(t){Array.from(t.classList).forEach(e=>{e.startsWith(tue)&&t.classList.remove(e)})}const d8="esri-identity-modal",f8={base:d8,info:`${d8}__info`,notice:`${d8}__notice`},lDe="ArcGIS Online";let pc=class extends fx{constructor(e,i){super(e,i),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return dx({button:()=>nt(()=>import("./calcite-button-BeMtepFd.js"),[],import.meta.url),dialog:()=>nt(()=>Promise.resolve().then(()=>XSe),void 0,import.meta.url),input:()=>nt(()=>import("./calcite-input-CYr-bSKK.js"),__vite__mapDeps([87,88,89,90,91,92]),import.meta.url),label:()=>nt(()=>import("./calcite-label-gEwaqOLW.js"),[],import.meta.url),notice:()=>nt(()=>import("./calcite-notice-cscqzbfO.js"),[],import.meta.url)})}get title(){var e;return(e=this.commonMessages)==null?void 0:e.auth.signIn}render(){var G;const{open:e,title:i,messages:s,signingIn:n,oAuthPrompt:r,server:o,resource:l,error:u}=this,{info:f,oAuthInfo:y,lblItem:_,invalidUser:x,noAuthService:S,lblUser:P,lblPwd:A,lblCancel:k,lblSigning:$,lblOk:F}=s;return kt("div",{class:this.classes(f8.base,iue())},kt("form",{bind:this,onsubmit:this._submit},kt("calcite-dialog",{bind:this,heading:i,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},kt("div",{class:f8.info},yce(r?y:f,{server:o&&/\.arcgis\.com/i.test(o)?lDe:o,resource:`(${l||_})`})),u?kt("calcite-notice",{class:f8.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},kt("div",{slot:"message"},(G=u.details)!=null&&G.httpStatus?x:S)):null,r?null:[kt("calcite-label",null,P,kt("calcite-input",{afterCreate:V=>this._usernameInputNode=V,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),kt("calcite-label",null,A,kt("calcite-input",{afterCreate:V=>this._passwordInputNode=V,bind:this,name:"password",required:!0,type:"password",value:""}))],kt("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},k),kt("calcite-button",{loading:!!n,slot:"footer-end",type:"submit"},n?$:F))))}_focusUsernameInput(){return qce(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){var s,n;e.preventDefault(),this._set("signingIn",!0);const i=this.oAuthPrompt?{}:{username:(s=this._usernameInputNode)==null?void 0:s.value,password:(n=this._passwordInputNode)==null?void 0:n.value};this.emit("submit",i)}};I([N({readOnly:!0})],pc.prototype,"container",void 0),I([N(),Cg("esri/t9n/common")],pc.prototype,"commonMessages",void 0),I([N()],pc.prototype,"error",void 0),I([N(),Cg("esri/identity/t9n/identity")],pc.prototype,"messages",void 0),I([N()],pc.prototype,"oAuthPrompt",void 0),I([N()],pc.prototype,"open",void 0),I([N()],pc.prototype,"signingIn",void 0),I([N()],pc.prototype,"server",void 0),I([N({readOnly:!0})],pc.prototype,"title",null),I([N()],pc.prototype,"resource",void 0),pc=I([ke("esri.identity.IdentityModal")],pc);const bZ=pc,p8="esriJSAPIOAuth";let SO=class{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let s=e[i.authNamespace];s||(s=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),s[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(p8,JSON.stringify(e))}catch(n){return console.warn(n),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.appId&&(i!=null&&i.portalUrl)&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const s=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",n=new FormData;if(n.append("f","json"),n.append("auth_token",this.refreshToken||this.token),n.append("client_id",i.appId),n.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),typeof navigator.sendBeacon=="function")navigator.sendBeacon(s,n);else{const r=new XMLHttpRequest;r.open("POST",s),r.send(n)}}if(i!=null&&i.authNamespace&&i.portalUrl&&this.storage){const s=e[i.authNamespace];if(s){delete s[i.portalUrl];try{this.storage.setItem(p8,JSON.stringify(e))}catch(n){console.log(n)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let s=e[i.authNamespace];s&&(s=s[i.portalUrl],s&&(this.appId=s.appId,this.codeVerifier=s.codeVerifier,this.expires=s.expires,this.refreshToken=s.refreshToken,this.ssl=s.ssl,this.stateUID=s.stateUID,this.token=s.token,this.userId=s.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(p8);if(i)try{e=JSON.parse(i)}catch(s){console.warn(s)}}return e}};SO.prototype.declaredClass="esri.identity.OAuthCredential";var EO;let aa=EO=class extends wt{constructor(t){super(t),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return EO.fromJSON(this.toJSON())}};I([N({json:{write:!0}})],aa.prototype,"appId",void 0),I([N({json:{write:!0}})],aa.prototype,"authNamespace",void 0),I([N({json:{write:!0}})],aa.prototype,"expiration",void 0),I([N({json:{write:!0}})],aa.prototype,"flowType",void 0),I([N({json:{write:!0}})],aa.prototype,"forceLogin",void 0),I([N({json:{write:!0}})],aa.prototype,"forceUserId",void 0),I([N({json:{write:!0}})],aa.prototype,"locale",void 0),I([N({json:{write:!0}})],aa.prototype,"minTimeUntilExpiration",void 0),I([N({json:{write:!0}})],aa.prototype,"popup",void 0),I([N({json:{write:!0}})],aa.prototype,"popupCallbackUrl",void 0),I([N({json:{write:!0}})],aa.prototype,"popupWindowFeatures",void 0),I([N({json:{write:!0}})],aa.prototype,"portalUrl",void 0),I([N({json:{write:!0}})],aa.prototype,"preserveUrlHash",void 0),I([N({json:{write:!0}})],aa.prototype,"userId",void 0),aa=EO=I([ke("esri.identity.OAuthInfo")],aa);const xZ=aa;let mc=class extends wt{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};I([N({json:{write:!0}})],mc.prototype,"adminTokenServiceUrl",void 0),I([N({json:{write:!0}})],mc.prototype,"currentVersion",void 0),I([N({json:{write:!0}})],mc.prototype,"hasPortal",void 0),I([N({json:{write:!0}})],mc.prototype,"hasServer",void 0),I([N({json:{write:!0}})],mc.prototype,"owningSystemUrl",void 0),I([N({json:{write:!0}})],mc.prototype,"owningTenant",void 0),I([N({json:{write:!0}})],mc.prototype,"server",void 0),I([N({json:{write:!0}})],mc.prototype,"shortLivedTokenValidity",void 0),I([N({json:{write:!0}})],mc.prototype,"tokenServiceUrl",void 0),I([N({json:{write:!0}})],mc.prototype,"webTierAuth",void 0),mc=I([ke("esri.identity.ServerInfo")],mc);const m8=mc,LT={},sue=t=>{const e=new Yl(t.owningSystemUrl).host,i=new Yl(t.server).host,s=/.+\.arcgis\.com$/i;return s.test(e)&&s.test(i)},CO=(t,e)=>!!(sue(t)&&e&&e.some(i=>i.test(t.server)));let FT=null,zT=null;try{FT=window.localStorage,zT=window.sessionStorage}catch{}let nue=class extends Sa{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=vl(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(s=>!this.findServerInfo(s.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(s=>{s.owningSystemUrl&&this._portals.push(s.owningSystemUrl),s.hasPortal&&this._portals.push(s.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const s of e){const n=this.findOAuthInfo(s.portalUrl);n&&i.splice(i.indexOf(n),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),s=this._isServerRsrc(i);let n,r=this.findServerInfo(i),o=!0;r||(r=new m8,r.server=this._getServerInstanceRoot(i),s?r.hasServer=!0:(r.tokenServiceUrl=this._getTokenSvcUrl(i),r.hasPortal=!0),this.registerServers([r])),n=this._findCredential(i),n?(delete e.server,Object.assign(n,e),o=!1):(n=new Un({userId:e.userId,server:r.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?"server":"portal"}),n.resources=[i],this.credentials.push(n)),n.emitTokenChange(!1),o||n.refreshServerTokens()}toJSON(){return bq({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,s=e.oAuthInfos,n=e.credentials;if(i){const r=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&r.push(o.declaredClass?o:new m8(o))}),r.length&&this.registerServers(r)}if(s){const r=[];s.forEach(o=>{o.appId&&r.push(o.declaredClass?o:new xZ(o))}),r.length&&this.registerOAuthInfos(r)}n&&n.forEach(r=>{r.server&&r.token&&r.expires&&r.expires>Date.now()&&((r=r.declaredClass?r:new Un(r)).emitTokenChange(),this.credentials.push(r))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){i=s;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){i=s;break}return i}findCredential(e,i){if(!e)return;let s;e=this._sanitizeUrl(e);const n=this._isServerRsrc(e)?"server":"portal";if(i){for(const r of this.credentials)if(this._hasSameServerInstance(r.server,e)&&i===r.userId&&r.scope===n){s=r;break}}else for(const r of this.credentials)if(this._hasSameServerInstance(r.server,e)&&this._getIdenticalSvcIdx(e,r)!==-1&&r.scope===n){s=r;break}return s}getCredential(e,i){let s,n,r=!0;i&&(s=!!i.token,n=i.error,r=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const o=new AbortController,l=Tc();if(i.signal&&Ul(i.signal,()=>{o.abort()}),Ul(o,()=>{l.reject(new rt("identity-manager:user-aborted","ABORTED"))}),Rc(o))return l.promise;i.signal=o.signal;const u=this._isAdminResource(e),f=s?this.findCredential(e):null;let y;if(f&&n&&n.details&&n.details.httpStatus===498)f.destroy();else if(f)return y=new rt("identity-manager:not-authorized","You are currently signed in as: '"+f.userId+"'. You do not have access to this resource: "+e,{error:n}),l.reject(y),l.promise;const _=this._findCredential(e,i);if(_)return l.resolve(_),l.promise;let x=this.findServerInfo(e);if(x)!x.hasPortal&&x.server&&x.owningSystemUrl&&this._hasSameServerInstance(x.server,x.owningSystemUrl)&&(x.hasPortal=!0),!x.hasServer&&this._isServerRsrc(e)&&(x._restInfoPms=this._getTokenSvcUrl(e),x.hasServer=!0);else{const S=this._getTokenSvcUrl(e);if(!S)return y=new rt("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),l.reject(y),l.promise;x=new m8,x.server=this._getServerInstanceRoot(e),typeof S=="string"?(x.tokenServiceUrl=S,x.hasPortal=!0):(x._restInfoPms=S,x.hasServer=!0),this.registerServers([x])}return x.hasPortal&&x._selfReq===void 0&&(r||Vl(x.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(S=>S.tokenServiceUrl===x.tokenServiceUrl))&&(x._selfReq={owningTenant:i==null?void 0:i.owningTenant,selfDfd:this._getPortalSelf(x.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,x,i,l,u)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,s){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),r=new Yl(this._appOrigin),o=e.shortLivedTokenValidity;let l,u,f,y,_,x,S,P;i&&(P=this.tokenValidity||o||this._defaultTokenValidity,P>o&&o>0&&(P=o)),s&&(l=s.isAdmin,u=s.serverUrl,f=s.token,x=s.signal,S=s.ssl,e.customParameters=s.customParameters),l?y=e.adminTokenServiceUrl:(y=e.tokenServiceUrl,_=new Yl(y.toLowerCase()),e.webTierAuth&&(s!=null&&s.serverUrl)&&!S&&r.scheme==="http"&&(Vl(r.uri,y,!0)||_.scheme==="https"&&r.host===_.host&&r.port==="7080"&&_.port==="7443")&&(y=y.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const A={query:{request:"getToken",username:i==null?void 0:i.username,password:i==null?void 0:i.password,serverUrl:u,token:f,expiration:P,referer:l||n?this._appOrigin:null,client:l?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,s),signal:x,...s==null?void 0:s.ioArgs};return n||(A.withCredentials=!1),Qs(y,A).then(k=>{const $=k.data;if(!($!=null&&$.token))return new rt("identity-manager:authentication-failed","Unable to generate token");const F=e.server;return LT[F]||(LT[F]={}),i&&(LT[F][i.username]=i.password),$.validity=P,$})}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,i,s){let n=!1;return this.getCredential(e,{prompt:!1}).then(r=>{let o;const l={f:"json"};if(r.scope==="portal")if(i&&(this._doPortalSignIn(e)||s!=null&&s.force))o=r.server+"/sharing/rest/oauth2/validateAppAccess",l.client_id=i;else{if(!r.token)return{credential:r};o=r.server+"/sharing/rest"}else{if(!r.token)return{credential:r};o=r.server+"/rest/services"}return r.token&&(l.token=r.token),Qs(o,{query:l,authMode:"anonymous"}).then(u=>{if(u.data.valid===!1)throw new rt("identity-manager:not-authorized",`You are currently signed in as: '${r.userId}'.`,u.data);return n=!!u.data.viewOnlyUserTypeApp,{credential:r}}).catch(u=>{var y;if(u.name==="identity-manager:not-authorized")throw u;const f=(y=u.details)==null?void 0:y.httpStatus;if(f===498)throw r.destroy(),new rt("identity-manager:not-authenticated","User is not signed in.");if(f===400)throw new rt("identity-manager:invalid-request");return{credential:r}})}).then(r=>({credential:r.credential,viewOnly:n}))}setOAuthResponseHash(e){e&&(e.charAt(0)==="#"&&(e=e.slice(1)),this._processOAuthPopupParams(Ty(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,s={}){const n=Tc(),r=()=>{var y;u==null||u.remove(),f==null||f.remove(),(y=this.dialog)==null||y.destroy(),this.dialog=u=f=null},o=()=>{r(),this._oAuthDfd=null,n.reject(new rt("identity-manager:user-aborted","ABORTED"))};s.signal&&Ul(s.signal,()=>{o()});const l=new bZ({open:!0,resource:this.getResourceName(e),server:i.server});this.dialog=l,this.emit("dialog-create");let u=l.on("cancel",o),f=l.on("submit",y=>{this.generateToken(i,y,{isAdmin:s.isAdmin,signal:s.signal}).then(_=>{r();const x=new Un({userId:y.username,server:i.server??void 0,token:_.token,expires:_.expires!=null?Number(_.expires):null,ssl:!!_.ssl,isAdmin:s.isAdmin,validity:_.validity});n.resolve(x)}).catch(_=>{l.error=_,l.signingIn=!1})});return n.promise}oAuthSignIn(e,i,s,n){this._oAuthDfd=Tc();const r=this._oAuthDfd;let o;n!=null&&n.signal&&Ul(n.signal,()=>{const x=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;x&&!x.closed?x.close():this.dialog&&y()}),r.resUrl_=e,r.sinfo_=i,r.oinfo_=s;const l=s._oAuthCred;if(l.storage&&(s.flowType==="authorization-code"||s.flowType==="auto"&&i.currentVersion>=8.4)){let x=crypto.getRandomValues(new Uint8Array(32));o=Hk(x),l.codeVerifier=o,x=crypto.getRandomValues(new Uint8Array(32)),l.stateUID=Hk(x),l.save()||(l.codeVerifier=o=null)}else l.codeVerifier=null;let u,f;this._getCodeChallenge(o).then(x=>{const S=!n||n.oAuthPopupConfirmation!==!1;if(!s.popup||!S)return void this._doOAuthSignIn(e,i,s,x);const P=new bZ({oAuthPrompt:!0,server:i.server,open:!0});this.dialog=P,this.emit("dialog-create"),u=P.on("cancel",y),f=P.on("submit",()=>{_(),this._doOAuthSignIn(e,i,s,x)})});const y=()=>{_(),this._oAuthDfd=null,r.reject(new rt("identity-manager:user-aborted","ABORTED"))},_=()=>{var x;u==null||u.remove(),f==null||f.remove(),(x=this.dialog)==null||x.destroy(),this.dialog=null};return r.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=zy(window,"message",i=>{var s;if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&((s=i.data)==null?void 0:s.type)==="arcgis:auth:requestCredential"){const n=i.source;this.getCredential(e).then(r=>{n.postMessage({type:"arcgis:auth:credential",credential:{expires:r.expires,server:r.server,ssl:r.ssl,token:r.token,userId:r.userId}},i.origin)}).catch(r=>{n.postMessage({type:"arcgis:auth:error",error:{name:r.name,message:r.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){var s,n;let e=window.location.hash;if(e){e.charAt(0)==="#"&&(e=e.slice(1));const r=Ty(e);let o=!1;if(r.access_token&&r.expires_in&&r.state&&r.hasOwnProperty("username"))try{r.state=JSON.parse(r.state),r.state.portalUrl&&(this._oAuthLocationParams=r,o=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(o=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}o&&(window.location.hash=((s=r.state)==null?void 0:s.hash)||"")}let i=window.location.search;if(i){i.charAt(0)==="?"&&(i=i.slice(1));const r=Ty(i);let o=!1;if(r.code&&r.state)try{r.state=JSON.parse(r.state),r.state.portalUrl&&r.state.uid&&(this._oAuthLocationParams=r,o=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(o=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}if(o){const l={...r};["code","error","error_description","message_code","persist","state"].forEach(y=>{delete l[y]});const u=Qy(l),f=window.location.pathname+(u?`?${u}`:"")+(((n=r.state)==null?void 0:n.hash)||"");window.history.replaceState(window.history.state,"",f)}}}_getOAuthToken(e,i,s,n,r){return e=e.replace(/^http:/i,"https:"),Qs(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:n&&r?{grant_type:"authorization_code",code:i,redirect_uri:n,client_id:s,code_verifier:r}:{grant_type:"refresh_token",refresh_token:i,client_id:s}}).then(o=>o.data)}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",i);return Hk(new Uint8Array(s))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new rt("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let s,n,r,o,l=-1;const u=i==null?void 0:i.token,f=i==null?void 0:i.resource,y=this._isServerRsrc(e)?"server":"portal",_=this.credentials.filter(x=>this._hasSameServerInstance(x.server,e)&&x.scope===y);if(e=f||e,_.length)if(_.length===1){if(s=_[0],r=this.findServerInfo(s.server),n=r==null?void 0:r.owningSystemUrl,o=n?this.findCredential(n,s.userId):void 0,l=this._getIdenticalSvcIdx(e,s),!u)return l===-1&&s.resources.push(e),this._addResource(e,o),s;l!==-1&&(s.resources.splice(l,1),this._removeResource(e,o))}else{let x,S;if(_.some(P=>(S=this._getIdenticalSvcIdx(e,P),S!==-1&&(x=P,r=this.findServerInfo(x.server),n=r==null?void 0:r.owningSystemUrl,o=n?this.findCredential(n,x.userId):void 0,l=S,!0))),u)x&&(x.resources.splice(l,1),this._removeResource(e,o));else if(x)return this._addResource(e,o),x}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){i=s;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let s=-1;i&&(s=this._getIdenticalSvcIdx(e,i),s>-1&&i.resources.splice(s,1))}_useProxy(e,i){return(i==null?void 0:i.isAdmin)&&!Vl(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!Vl(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new Yl(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let s=i.indexOf(this._agsRest);return s===-1&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),s!==-1||bae(i)||(s=i.indexOf("/sharing")),s===-1&&i.endsWith("/")&&(s=i.length-1),s>-1?e.slice(0,s):e}_hasSameServerInstance(e,i){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=N9(e),i=N9(i),(e=e.slice(Math.max(0,e.indexOf(":"))))===(i=i.slice(Math.max(0,i.indexOf(":"))))}_sanitizeUrl(e){const i=(Gs.request.proxyUrl||"").toLowerCase(),s=i?e.toLowerCase().indexOf(i+"?"):-1;return s!==-1&&(e=e.slice(s+i.length+1)),e=Vu(e),vl(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let s=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const n=this._getSuffix(e).toLowerCase(),r=this._getSuffix(i).toLowerCase();if(s=n===r,!s){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;s=n.replaceAll(o,"$1")===r.replaceAll(o,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const i=new Yl(e.toLowerCase()),s=this._portalConfig;let n=this._gwDomains.some(r=>r.regex.test(i.uri));return!n&&s&&(n=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),i.uri)),n||Gs.portalUrl&&(n=Vl(i,Gs.portalUrl,!0)),n||(n=this._portals.some(r=>this._hasSameServerInstance(r,i.uri))),n=n||this._agsPortal.test(i.path),n}_isIdProvider(e,i){let s=-1,n=-1;this._gwDomains.forEach((o,l)=>{s===-1&&o.regex.test(e)&&(s=l),n===-1&&o.regex.test(i)&&(n=l)});let r=!1;if(s>-1&&n>-1&&(s===0||s===4?n!==0&&n!==4||(r=!0):s===1?n!==1&&n!==2||(r=!0):s===2?n===2&&(r=!0):s===3&&n===3&&(r=!0)),!r){const o=this.findServerInfo(i),l=o==null?void 0:o.owningSystemUrl;l&&sue(o)&&this._isPortalDomain(l)&&this._isIdProvider(e,l)&&(r=!0)}return r}_getIdenticalSvcIdx(e,i){let s=-1;for(let n=0;n<i.resources.length;n++){const r=i.resources[n];if(this._isIdenticalService(e,r)){s=n;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,s,n;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return i=r+"/admin/generateToken",s=Qs(e=r+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:s}}if(this._isPortalDomain(e)){let r="";if(this._gwDomains.some(o=>(o.regex.test(e)&&(r=o.tokenServiceUrl),!!r)),r||this._portals.some(o=>(this._hasSameServerInstance(o,e)&&(r=o+this._gwTokenUrl),!!r)),r||(n=e.toLowerCase().indexOf("/sharing"),n!==-1&&(r=e.slice(0,n)+this._gwTokenUrl)),r||(r=this._getOrigin(e)+this._gwTokenUrl),r){const o=new Yl(e).port;/^http:\/\//i.test(e)&&o==="7080"&&(r=r.replace(/:7080/i,":7443")),r=r.replace(/http:/i,"https:")}return r}}_processOAuthResponseParams(e,i,s){const n=i._oAuthCred;if(e.code){const o=n.codeVerifier;return n.codeVerifier=null,n.stateUID=null,n.save(),this._getOAuthToken(s.server,e.code,i.appId,this._getRedirectURI(i,!0),o).then(l=>{const u=new Un({userId:l.username,server:s.server??void 0,token:l.access_token,expires:Date.now()+1e3*l.expires_in,ssl:l.ssl,oAuthState:e.state,_oAuthCred:n});return i.userId=u.userId,n.storage=l.persist?FT:zT,n.refreshToken=l.refresh_token,n.token=null,n.expires=l.refresh_token_expires_in?Date.now()+1e3*l.refresh_token_expires_in:null,n.userId=u.userId,n.ssl=u.ssl,n.save(),u})}const r=new Un({userId:e.username,server:s.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:n});return i.userId=r.userId,n.storage=e.persist?FT:zT,n.refreshToken=null,n.token=r.token,n.expires=r.expires,n.userId=r.userId,n.ssl=r.ssl,n.save(),Promise.resolve(r)}_processOAuthPopupParams(e){var s;const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),(s=this._oAuthOnPopupHandle)==null||s.remove(),e.error){const n=e.error==="access_denied",r=new rt(n?"identity-manager:user-aborted":"identity-manager:authentication-failed",n?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(r)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(n=>{i.resolve(n)}).catch(n=>{i.reject(n)})}_setOAuthResponseQueryString(e){e&&(e.charAt(0)==="?"&&(e=e.slice(1)),this._processOAuthPopupParams(Ty(e)))}async _exchangeToken(e,i,s){return(await Qs(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:s}})).data.token}async _getPlatformSelf(e,i){var s;if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const n=await Qs(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,n.data}catch(n){throw((s=n.details)==null?void 0:s.messageCode)==="OAUTH_0066"&&(this._getPlatformSelfError=[n,Date.now()]),n}}_getPortalSelf(e,i){let s;return this._gwDomains.some(n=>(n.regex.test(e)&&(s=n.customBaseUrl),!!s)),s?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:s,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),Qs(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(n=>n.data))}_doPortalSignIn(e){const i=this._portalConfig,s=window.location.href,n=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(s)||!(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||Vl(s,e,!0)))}_checkProtocol(e,i,s,n){let r=!0;const o=n?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&wC(o)&&(r=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!r)&&s(new rt("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),r}_enqueue(e,i,s,n,r,o){return n||(n=Tc()),n.resUrl_=e,n.sinfo_=i,n.options_=s,n.admin_=r,n.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(n)):this._xoReqs.push(n):this._doSignIn(n),n.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=f=>{var k;const y=(k=e.options_)==null?void 0:k.resource,_=e.resUrl_,x=e.refresh_;let S=!1;this.credentials.includes(f)||(x&&this.credentials.includes(x)?(x.userId=f.userId,x.token=f.token,x.expires=f.expires,x.validity=f.validity,x.ssl=f.ssl,x.creationTime=f.creationTime,S=!0,f=x):this.credentials.push(f)),f.resources||(f.resources=[]),f.resources.includes(y||_)||f.resources.push(y||_),f.scope=this._isServerRsrc(_)?"server":"portal",f.emitTokenChange();const P=this._soReqs,A={};this._soReqs=[],P.forEach($=>{if(!this._isIdenticalService(_,$.resUrl_)){const F=this._getSuffix($.resUrl_);A[F]||(A[F]=!0,f.resources.push($.resUrl_))}}),e.resolve(f),P.forEach($=>{this._hasSameServerInstance(this._getServerInstanceRoot(_),$.resUrl_)?$.resolve(f):this._soReqs.push($)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,S||this.emit("credential-create",{credential:f}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=f=>{e.reject(f),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=(f,y,_,x)=>{var F,G,V;const S=e.sinfo_,P=!e.options_||e.options_.prompt!==!1,A=S.hasPortal&&this._findOAuthInfo(e.resUrl_);let k,$;if(f)i(new Un({userId:f,server:S.server??void 0,token:_??void 0,expires:x!=null?Number(x):null,ssl:!!y}));else if(window!==window.parent&&((F=this._appUrlObj.query)!=null&&F["arcgis-auth-origin"])&&((G=this._appUrlObj.query)!=null&&G["arcgis-auth-portal"])&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const B=zy(window,"message",W=>{W.source===window.parent&&W.data&&(W.data.type==="arcgis:auth:credential"?(B.remove(),W.data.credential.expires<Date.now()?s(new rt("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new Un(W.data.credential))):W.data.type==="arcgis:auth:error"&&(B.remove(),W.data.error.name==="tokenExpiredError"?s(new rt("identity-manager:credential-request-failed","Parent application's token has expired.")):s(rt.fromJSON(W.data.error))))});Ul((V=e.options_)==null?void 0:V.signal,()=>{B.remove()})}else if(A){let B=A._oAuthCred;if(!B){const W=new SO(A,FT),J=new SO(A,zT);W.isValid()&&J.isValid()?W.expires>J.expires?(B=W,J.destroy()):(B=J,W.destroy()):B=W.isValid()?W:J,A._oAuthCred=B}if(B.isValid()){k=new Un({userId:B.userId??void 0,server:S.server??void 0,token:B.token??void 0,expires:B.expires,ssl:B.ssl??void 0,_oAuthCred:B});const W=A.appId!==B.appId&&this._doPortalSignIn(e.resUrl_);W||B.refreshToken?(e._pendingDfd=B.refreshToken?this._getOAuthToken(S.server,B.refreshToken,B.appId).then(J=>(k.expires=Date.now()+1e3*J.expires_in,k.token=J.access_token,k)):Promise.resolve(k),e._pendingDfd.then(J=>W?this._exchangeToken(J.server,A.appId,J.token).then(re=>(J.token=re,J)).catch(()=>J):J).then(J=>{i(J)}).catch(J=>{var se;const re=(se=J.details)==null?void 0:se.httpStatus;re>0&&re!==404?(B.destroy(),n()):s(J)})):i(k)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(A.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===B.stateUID&&B.codeVerifier)){const W=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(W,A,S).then(J=>{i(J)}).catch(s)}else{const W=()=>{P?e._pendingDfd=this.oAuthSignIn(e.resUrl_,S,A,e.options_).then(i,s):($=new rt("identity-manager:not-authenticated","User is not signed in."),s($))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(S.server,A.appId).then(J=>{Vl(J.portalUrl,this._appOrigin,!0)?(k=new Un({userId:J.username,server:S.server??void 0,expires:Date.now()+1e3*J.expires_in,token:J.token}),i(k)):W()}).catch(W):W()}}else if(P){if(this._checkProtocol(e.resUrl_,S,s,e.admin_)){let B=e.options_;e.admin_&&(B=B||{},B.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,S,B).then(i,s)}}else $=new rt("identity-manager:not-authenticated","User is not signed in."),s($)},r=()=>{const f=e.sinfo_,y=f.owningSystemUrl,_=e.options_;let x,S,P,A;if(_&&(x=_.token,S=_.error,P=_.prompt),A=this._findCredential(y,{token:x,resource:e.resUrl_}),!A){for(const k of this.credentials)if(this._isIdProvider(y,k.server)){A=k;break}}if(A){const k=this.findCredential(e.resUrl_,A.userId);if(k)i(k);else if(CO(f,this._legacyFed)){const $=A.toJSON();$.server=f.server,$.resources=null,i(new Un($))}else(e._pendingDfd=this.generateToken(this.findServerInfo(A.server),null,{serverUrl:e.resUrl_,token:A.token,signal:e.options_.signal,ssl:A.ssl})).then($=>{i(new Un({userId:A==null?void 0:A.userId,server:f.server??void 0,token:$.token,expires:$.expires!=null?Number($.expires):null,ssl:!!$.ssl,isAdmin:e.admin_,validity:$.validity}))},s)}else this._busy=null,x&&(e.options_.token=null),(e._pendingDfd=this.getCredential(y.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:f.owningTenant,signal:e.options_.signal,token:x,error:S,prompt:P})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},k=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(k)})};this._errbackFunc=s;const o=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),u=e.sinfo_._restInfoPms;u?u.promise.then(f=>{const y=e.sinfo_;if(y._restInfoPms){y.adminTokenServiceUrl=y._restInfoPms.adminUrl,y._restInfoPms=null,y.tokenServiceUrl=(zp("authInfo.tokenServicesUrl",f)||zp("authInfo.tokenServiceUrl",f)||zp("tokenServiceUrl",f))??null,y.shortLivedTokenValidity=zp("authInfo.shortLivedTokenValidity",f)??null,y.currentVersion=f.currentVersion,y.owningTenant=f.owningTenant;const _=y.owningSystemUrl=f.owningSystemUrl;_&&this._portals.push(_)}l&&y.owningSystemUrl?r():n()},()=>{e.sinfo_._restInfoPms=null;const f=new rt("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");s(f)}):l&&o?r():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(f=>{var A;const y={};let _,x,S,P;return f&&(_=(A=f.user)==null?void 0:A.username,y.username=_,y.allSSL=f.allSSL,x=f.supportsOAuth,P=parseFloat(f.currentVersion),f.portalMode==="multitenant"&&(S=f.customBaseUrl),e.sinfo_.currentVersion=P),e.sinfo_.webTierAuth=!!_,_&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:y.allSSL}).catch(()=>null).then(k=>(y.portalToken=k==null?void 0:k.token,y.tokenExpiration=k==null?void 0:k.expires,y)):!_&&x&&P>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:S,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>y):y}).catch(()=>null).then(f=>{e.sinfo_._selfReq=null,f?n(f.username,f.allSSL,f.portalToken,f.tokenExpiration):n()}):n()}_generateOAuthInfo(e){let i,s=null,n=e.portalUrl;const r=e.customBaseUrl,o=e.owningTenant,l=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(l){s=window.location.href;let u=s.indexOf("?");u>-1&&(s=s.slice(0,u)),u=s.search(/\/(apps|home)\//),s=u>-1?s.slice(0,u):null}return l&&s?(this._hasTestedIfAppIsOnPortal=!0,i=Qs(s+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new xZ({appId:"arcgisonline",popupCallbackUrl:s+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return n=n.replace(/^http:/i,"https:"),Qs(n+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this._defaultOAuthInfo.appId,redirect_uri:ml(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(u=>{if(u.data.valid){const f=this._defaultOAuthInfo.clone();u.data.urlKey&&r?f.portalUrl="https://"+u.data.urlKey.toLowerCase()+"."+r:f.portalUrl=n,f.popup=window!==window.top||!(Vl(n,this._appOrigin)||this._gwDomains.some(y=>y.regex.test(n)&&y.regex.test(this._appOrigin))),this.oAuthInfos.push(f)}})})}_doOAuthSignIn(e,i,s,n){const r=s._oAuthCred,o={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),r.stateUID&&(o.uid=r.stateUID);const l={client_id:s.appId,response_type:r.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:s.expiration,locale:s.locale,redirect_uri:this._getRedirectURI(s,!!r.codeVerifier)};s.forceLogin&&(l.force_login=!0),s.forceUserId&&s.userId&&(l.prepopulatedusername=s.userId),!s.popup&&this._doPortalSignIn(e)&&(l.redirectToUserOrgUrl=!0),r.codeVerifier&&(l.code_challenge=n||r.codeVerifier,l.code_challenge_method=n?"S256":"plain");const u=s.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",f=u+"?"+Qy(l);if(s.popup){const y=window.open(f,"esriJSAPIOAuth",s.popupWindowFeatures);if(y)y.focus(),this._oAuthDfd.oAuthWin_=y,this._oAuthIntervalId=setInterval(()=>{if(y.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const _=this._oAuthDfd;if(_){const x=new rt("identity-manager:user-aborted","ABORTED");_.reject(x)}}},500),this._oAuthOnPopupHandle=zy(window,["arcgis:auth:hash","arcgis:auth:location:search"],_=>{_.type==="arcgis:auth:hash"?this.setOAuthResponseHash(_.detail):this._setOAuthResponseQueryString(_.detail)});else{const _=new rt("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(_)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:l,authorizeUrl:u,resourceUrl:e,serverInfo:i,oAuthInfo:s}):window.location.href=f}_getRedirectURI(e,i){const s=window.location.href.replace(/#.*$/,"");if(e.popup)return ml(e.popupCallbackUrl);if(i){const n=vl(s);return n.query&&["code","error","error_description","message_code","persist","state"].forEach(r=>{delete n.query[r]}),ST(n.path,n.query)}return s}};nue.prototype.declaredClass="esri.identity.IdentityManagerBase";let Un=class extends Sa.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e!=null&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=Li,i=e.findServerInfo(this.server),s=i==null?void 0:i.owningSystemUrl,n=!!s&&this.scope==="server",r=n&&CO(i,e._legacyFed),o=i.webTierAuth,l=o&&e.normalizeWebTierAuth,u=LT[this.server],f=u==null?void 0:u[this.userId];let y,_=this.resources&&this.resources[0],x=n?e.findServerInfo(s):null,S={username:this.userId,password:f};if(o&&!l)return;n&&!x&&e.serverInfos.some(A=>(e._isIdProvider(s,A.server)&&(x=A),!!x));const P=x?e.findCredential(x.server,this.userId):null;if(!n||P){if(!r){if(n)y={serverUrl:_,token:P==null?void 0:P.token,ssl:P==null?void 0:P.ssl};else if(l)S=null,y={ssl:this.ssl};else{if(!f){let A;return _&&(_=e._sanitizeUrl(_),this._enqueued=1,A=e._enqueue(_,i,null,null,this.isAdmin,this),A.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),A}this.isAdmin&&(y={isAdmin:!0})}return e.generateToken(n?x:i,n?null:S,y).then(A=>{this.token=A.token,this.expires=A.expires!=null?Number(A.expires):null,this.creationTime=Date.now(),this.validity=A.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}P==null||P.refreshToken()}}refreshServerTokens(){if(this.scope==="portal"){const e=Li;e.credentials.forEach(i=>{const s=e.findServerInfo(i.server),n=s==null?void 0:s.owningSystemUrl;i!==this&&i.userId===this.userId&&n&&i.scope==="server"&&(e._hasSameServerInstance(this.server,n)||e._isIdProvider(n,this.server))&&(CO(s,e._legacyFed)?(i.token=this.token,i.expires=this.expires,i.creationTime=this.creationTime,i.validity=this.validity,i.emitTokenChange()):i.refreshToken())})}}emitTokenChange(e){clearTimeout(this._refreshTimer);const i=Li,s=this.server?i.findServerInfo(this.server):null,n=s==null?void 0:s.owningSystemUrl,r=n?i.findServerInfo(n):null;e===!1||n&&this.scope!=="portal"&&(!(r!=null&&r.webTierAuth)||i.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=Li,i=e.credentials.indexOf(this);i>-1&&e.credentials.splice(i,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=bq({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),i=this.resources;return i&&i.length>0&&(e.resources=i.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,i=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>i&&(s=i),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};I([N()],Un.prototype,"creationTime",void 0),I([N()],Un.prototype,"expires",void 0),I([N()],Un.prototype,"isAdmin",void 0),I([N()],Un.prototype,"oAuthState",void 0),I([N()],Un.prototype,"resources",void 0),I([N()],Un.prototype,"scope",void 0),I([N()],Un.prototype,"server",void 0),I([N()],Un.prototype,"ssl",void 0),I([N()],Un.prototype,"token",void 0),I([N()],Un.prototype,"tokenRefreshBuffer",void 0),I([N()],Un.prototype,"userId",void 0),I([N()],Un.prototype,"validity",void 0),Un=I([ke("esri.identity.Credential")],Un);let rue=class extends nue{};rue.prototype.declaredClass="esri.identity.IdentityManager";const _V=new rue;pIe(_V);const cDe=Object.freeze(Object.defineProperty({__proto__:null,default:_V},Symbol.toStringTag,{value:"Module"}));let X_=class extends ci{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(Tq(()=>this._refresh(),Jp))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const s of e)s!=null&&(i=this._processCollection(i,s));this.splice(i,this.length)}_createNewInstance(e){return new ci(e)}_processCollection(e,i){if(!i)return e;const s=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(s(n)){const r=this.indexOf(n,e);r>=0?r!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const r=this.getChildrenFunction(n);if(Array.isArray(r))for(const o of r)e=this._processCollection(e,o);else e=this._processCollection(e,r)}}return e}};I([N()],X_.prototype,"getCollections",void 0),I([N()],X_.prototype,"getChildrenFunction",void 0),I([N()],X_.prototype,"itemFilterFunction",void 0),X_=I([ke("esri.core.CollectionFlattener")],X_);const oue=X_;async function uDe(t,e){return await t.load(),hDe(t,e)}async function hDe(t,e){const i=[],s=(...r)=>{for(const o of r)o!=null&&(Array.isArray(o)?s(...o):ci.isCollection(o)?o.forEach(l=>s(l)):SC.isLoadable(o)&&i.push(o))};e(s);let n=null;if(await vAe(i,async r=>{const o=await hV(dDe(r)?r.loadAll():r.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function dDe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let fDe=class aue{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(P$),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new aue,s=this._originStores[Ui.DEFAULTS];s&&s.forEach((n,r)=>{i.set(r,Ue(n),Ui.DEFAULTS)});for(let n=Ui.SERVICE;n<P$;n++){const r=this._originStores[n];r&&r.forEach((o,l)=>{e&&e.has(l)||i.set(l,Ue(o),n)})}return i}get(e,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,s=Ui.USER){let n=this._originStores[s];if(n||(n=new Map,this._originStores[s]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=s){const r=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,s),r!==i}return!1}delete(e,i=Ui.USER){const s=this._originStores[i];if(!s)return;const n=s.get(e);if(s.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let r=i-1;r>=0;r--){const o=this._originStores[r];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,r);break}}}return n}has(e,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const s=this._originStores[i],n=s==null?void 0:s.get(e),r=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),r!==n}originOf(e){return this._propertyOriginMap.get(e)||Ui.DEFAULTS}forEach(e){this._values.forEach(e)}};const lue=t=>{let e=class extends t{constructor(...i){super(...i);const s=Sl(this),n=s.store,r=new fDe;s.store=r,mae(s,n,r)}read(i,s){yae(this,i,s)}getAtOrigin(i,s){const n=g8(this),r=Q0(s);if(typeof i=="string")return n.get(i,r);const o={};return i.forEach(l=>{o[l]=n.get(l,r)}),o}originOf(i){return b9(this.originIdOf(i))}originIdOf(i){return g8(this).originOf(i)}revert(i,s){const n=g8(this),r=Q0(s),o=Sl(this);let l;l=typeof i=="string"?i==="*"?n.keys(r):[i]:i,l.forEach(u=>{o.invalidate(u),n.revert(u,r),o.commit(u)})}};return e=I([ke("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function g8(t){return Sl(t).store}let wZ=class extends lue(Ei){};wZ=I([ke("esri.core.ReadOnlyMultiOriginJSONSupport")],wZ);const pDe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,s="user"){return y8(this).delete(i,Q0(s))}write(i,s){return _ae(this,i=i||{},s),i}setAtOrigin(i,s,n){Sl(this).setAtOrigin(i,s,Q0(n))}removeOrigin(i){const s=y8(this),n=Q0(i),r=s.keys(n);for(const o of r)s.originOf(o)===n&&s.set(o,s.get(o,n),Ui.USER)}updateOrigin(i,s){const n=y8(this),r=Q0(s),o=$u(this,i);for(let l=r+1;l<P$;++l)n.delete(i,l);n.set(i,o,r)}toJSON(i){return this.write({},i)}};return e=I([ke("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function y8(t){return Sl(t).store}const bV=t=>{let e=class extends pDe(lue(t)){constructor(...i){super(...i)}};return e=I([ke("esri.core.MultiOriginJSONSupport")],e),e};let SZ=class extends bV(Ei){};SZ=I([ke("esri.core.MultiOriginJSONSupport")],SZ);function C2(t,e,i=!1){let{hasM:s,hasZ:n}=t;Array.isArray(e)?e.length!==4||s||n?e.length===3&&i&&!s?(n=!0,s=!1):e.length===3&&s&&n&&(s=!1,n=!1):(s=!0,n=!0):(n=!n&&e.hasZ&&(!s||e.hasM),s=!s&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=s}var PO;function EZ(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function mDe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let m0=PO=class extends Dv{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):mDe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const s=(n=i.points)==null?void 0:n[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new ur,i=this.hasZ,s=this.hasM,n=i?3:2,r=t[0],o=EZ(Math.min),l=EZ(Math.max);let u,f,y,_,[x,S]=r,[P,A]=r;for(let k=0,$=t.length;k<$;k++){const F=t[k],[G,V]=F;if(x=o(x,G),S=o(S,V),P=l(P,G),A=l(A,V),i&&F.length>2){const B=F[2];u=o(u,B),y=l(y,B)}if(s&&F.length>n){const B=F[n];f=o(f,B),_=l(_,B)}}return e.xmin=x,e.ymin=S,e.xmax=P,e.ymax=A,e.spatialReference=this.spatialReference,i?(e.zmin=u,e.zmax=y):(e.zmin=void 0,e.zmax=void 0),s?(e.mmin=f,e.mmax=_):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=Ue(this.points)}addPoint(t){return C2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:Ue(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new PO(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=e[2],s=3),this.hasM&&(i.m=e[s]),new Yi(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Yi(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(C2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};I([N({readOnly:!0})],m0.prototype,"cache",null),I([N()],m0.prototype,"extent",null),I([N({type:[[Number]],json:{write:{isRequired:!0}}})],m0.prototype,"points",void 0),I([Ft("points")],m0.prototype,"writePoints",null),m0=PO=I([ke("esri.geometry.Multipoint")],m0),m0.prototype.toJSON.isDefaultToJSON=!0;const $v=m0;function Wht(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function gDe(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var Yh;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(Yh||(Yh={}));function CZ(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const s=t.clone().normalize();if(!s)return null;let n=!1,r=!1;return s.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(r=!0)}),s.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const u=.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(u)}if(r&&o.hasM){const u=.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(u)}return l})}return null}function qM(t,e){const i=e[0]-t[0],s=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+s*s+n*n)}return Math.sqrt(i*i+s*s)}function cue(t,e,i){const s=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[s,n,t[2]+i*(e[2]-t[2])]:[s,n]}function Zht(t,e,i,s){return yDe(t,e,i[s],i[s+1])}function yDe(t,e,i,s){const[n,r]=e,[o,l]=i,[u,f]=s,y=u-o,_=f-l,x=y*y+_*_,S=(n-o)*y+(r-l)*_,P=Math.min(1,Math.max(0,S/x));return t[0]=o+y*P,t[1]=l+_*P,t}function Kht(t,e,i,s,n,r){let o=i,l=s,u=n-o,f=r-l;if(u!==0||f!==0){const y=((t-o)*u+(e-l)*f)/(u*u+f*f);y>1?(o=n,l=r):y>0&&(o+=u*y,l+=f*y)}return u=t-o,f=e-l,u*u+f*f}function uue(t,e){return cue(t,e,.5)}function Jht(t){const e=t.length;let i=0;for(let s=0;s<e-1;++s)i+=qM(t[s],t[s+1]);return i}function Qht(t,e){if(e<=0)return t[0];const i=t.length;let s=0;for(let n=0;n<i-1;++n){const r=qM(t[n],t[n+1]);if(e-s<r){const o=(e-s)/r;return cue(t[n],t[n+1],o)}s+=r}return t[i-1]}function VM(t,e=Yh.X,i=Yh.Y){let s=0;const n=t.length;let r=t[0];for(let o=1;o<n;o++){const l=t[o];s+=(l[e]-r[e])*(l[i]+r[i]),r=l}if(!hue(t)){const o=t[0];s+=(o[e]-r[e])*(o[i]+r[i])}return s>=0}function hue(t){const e=t.length;return e<3||ff(t[0],t[e-1])}function edt(t){"rings"in t&&(vDe(t),_De(t))}function vDe(t){if(!("rings"in t))return!1;let e=!1;for(const i of t.rings)hue(i)||(i.push(i[0].slice()),e=!0);return e}function _De(t){if(!("rings"in t)||t.rings.length===0||VM(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function due(t){return t.type!=="polygon"&&t.type!=="polyline"||fue(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function fue(t,e){const i=Hb(e);if(!i)return;const s=i.valid[0],n=i.valid[1],r=n-s;for(const o of t){let l=1/0,u=-1/0;for(const y of o){const _=bDe(y[0],s,n);l=Math.min(l,_),u=Math.max(u,_),y[0]=_}const f=u-l;r-f<f&&o.forEach(y=>{y[0]<0&&(y[0]+=r)})}}function bDe(t,e,i){const s=i-e;return t<e?i-(e-t)%s:t>i?e+(t-e)%s:t}function xDe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,s]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===s.length&&i.every((n,r)=>n.length===s[r].length)}function tdt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function wDe(t){return t?SDe(t.rings,t.hasZ??!1):null}function SDe(t,e){if(!(t!=null&&t.length))return null;const i=[],s=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,o=t.length;r<o;r++){const l=pue(t[r],e,n);l&&s.push(l)}if(s.sort((r,o)=>{let l=r[2]-o[2];return l===0&&e&&(l=r[4]-o[4]),l}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const r=t[0]&&t[0].length?EDe(t[0],e):null;if(!r)return null;i[0]=r[0],i[1]=r[1],e&&r.length>2&&(i[2]=r[2])}return i}function pue(t,e,i){let s=0,n=0,r=0,o=0,l=0;const u=t.length?t[0][0]:0,f=t.length?t[0][1]:0,y=t.length&&e?t[0][2]:0;for(let x=0;x<t.length;x++){const S=t[x],P=t[(x+1)%t.length],[A,k,$]=S,F=A-u,G=k-f,[V,B,W]=P,J=V-u,re=B-f,se=F*re-J*G;if(o+=se,s+=(F+J)*se,n+=(G+re)*se,e&&S.length>2&&P.length>2){const oe=$-y,pe=W-y,ce=F*pe-J*oe;r+=(oe+pe)*ce,l+=ce}A<i[0]&&(i[0]=A),A>i[1]&&(i[1]=A),k<i[2]&&(i[2]=k),k>i[3]&&(i[3]=k),e&&($<i[4]&&(i[4]=$),$>i[5]&&(i[5]=$))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const _=[s/(6*o)+u,n/(6*o)+f,o];return e&&(i[4]===i[5]||l===0?(_[3]=(i[4]+i[5])/2,_[4]=0):(_[3]=r/(6*l)+y,_[4]=l)),_}function idt(t,e){let i=0,s=0,n=0;t.nextPoint();const r=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let l=0;l<t.pathSize;l++){t.seekInPath(l);const u=[t.x,t.y];t.seekInPath((l+1)%t.pathSize);const f=[t.x,t.y],[y,_]=u,x=y-r,S=_-o,[P,A]=f,k=P-r,$=A-o,F=x*$-k*S;n+=F,i+=(x+k)*F,s+=(S+$)*F,y<e[0]&&(e[0]=y),y>e[1]&&(e[1]=y),_<e[2]&&(e[2]=_),_>e[3]&&(e[3]=_)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+r,s/(6*n)+o,n]):null}function EDe(t,e){const i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let n=0,r=0,o=0,l=0;for(let u=0,f=t.length;u<f-1;u++){const y=t[u],_=t[u+1];if(y&&_){i[0]=y[0],i[1]=y[1],s[0]=_[0],s[1]=_[1],e&&y.length>2&&_.length>2&&(i[2]=y[2],s[2]=_[2]);const x=qM(i,s);if(x){n+=x;const S=uue(y,_);r+=x*S[0],o+=x*S[1],e&&S.length>2&&(l+=x*S[2])}}}return n>0?e?[r/n,o/n,l/n]:[r/n,o/n]:t.length?t[0]:null}function CDe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const s=[],n=[],r=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=pue(gDe(t),t.hasZ,r);o&&n.push(o)}if(n.sort((o,l)=>{let u=o[2]-l[2];return u===0&&e&&(u=o[4]-l[4]),u}),n.length&&(s[0]=n[0][0],s[1]=n[0][1],e&&(s[2]=n[0][3]),(s[0]<r[0]||s[0]>r[1]||s[1]<r[2]||s[1]>r[3]||e&&(s[2]<r[4]||s[2]>r[5]))&&(s.length=0)),!s.length){t.reset(),t.nextPath();const o=t.pathSize?PDe(t):null;if(!o)return null;s[0]=o[0],s[1]=o[1],e&&o.length>2&&(s[2]=o[2])}return s}function PDe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let n=0,r=0,o=0,l=0;if(t.nextPoint()){let u=t.x,f=t.y,y=t.z;for(;t.nextPoint();){const _=t.x,x=t.y,S=t.z;i[0]=u,i[1]=f,s[0]=_,s[1]=x,e&&(i[2]=y,s[2]=S);const P=qM(i,s);if(P){n+=P;const A=uue(i,s);r+=P*A[0],o+=P*A[1],e&&A.length>2&&(l+=P*A[2])}u=_,f=x,y=S}}return n>0?e?[r/n,o/n,l/n]:[r/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const TDe=1e-6;function sdt(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<TDe){const n=CDe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const s=[t.x,t.y];for(t.reset();t.nextPath();)MDe(i,s,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=s[0],i[1]+=s[1],i}const IDe=1/3;function MDe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const s=i.x,n=i.y;i.nextPoint();let r,o=i.x-s,l=i.y-n,u=0,f=0;for(;i.nextPoint();)u=i.x-s,f=i.y-n,r=.5*IDe*(u*l-f*o),t[0]+=r*(o+u),t[1]+=r*(l+f),o=u,l=f;const y=i.getCurrentRingArea(),_=[s,n];return _[0]-=e[0],_[1]-=e[1],_[0]*=y,_[1]*=y,t[0]+=_[0],t[1]+=_[1],t}const PZ=new Float32Array(1);function ndt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Xu(t,e,i){return Math.min(Math.max(t,e),i)}function rdt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function ADe(t,e,i){return t+(e-t)*i}function odt(t,e,i,s,n){return ADe(s,n,(t-e)/(i-e))}function mue(t){return t*Math.PI/180}function DDe(t){return 180*t/Math.PI}function adt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function xV(t){return Math.acos(Xu(t,-1,1))}function wV(t){return Math.asin(Xu(t,-1,1))}function tg(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const i6=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function TO(t){return i6.setFloat64(0,t),i6.getBigInt64(0)}function kDe(t){return i6.setBigInt64(0,t),i6.getFloat64(0)}const qT=BigInt("1000000"),NDe=gue(1);function gue(t){const e=TO(t=Math.abs(t)),i=kDe(e<=qT?qT:e-qT);return Math.abs(t-i)}function ldt(t,e,i=NDe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&gue(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const s=TO(t),n=TO(e);return s<0!=n<0?!1:!((s<n?n-s:s-n)>qT)}function cdt(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const s=Math.abs(t-e),n=Math.abs(t),r=Math.abs(e);if(t===0||e===0||n<1e-12&&r<1e-12){if(s>.01*i)return!1}else if(s/(n+r)>i)return!1;return!0}function udt(t){return yue(Math.max(-TZ,Math.min(t,TZ)))}function yue(t){return PZ[0]=t,PZ[0]}function hdt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],s=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(tg(e,1)&&tg(i,1)&&tg(s,1))}function ddt(t,e){return(t%e+e)%e}const TZ=yue(34028234663852886e22);function fdt(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let s=e.toString().split("e");return s=(e=Math[t](+(s[0]+"e"+(s[1]?+s[1]-i:-i)))).toString().split("e"),+(s[0]+"e"+(s[1]?+s[1]+i:i))}function Ov(t=RDe){return[t[0],t[1],t[2],t[3]]}function vue(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function pdt(t,e,i,s,n=Ov()){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n}function mdt(t,e=Ov()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function gdt(t,e){return new ur({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function ydt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function vdt(t,e,i){if(e!=null)if("length"in e)IO(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else vue(i,t)}function $De(t,e,i=t){const s=e.length;let n=t[0],r=t[1],o=t[2],l=t[3];for(let u=0;u<s;u++){const f=e[u];n=Math.min(n,f[0]),r=Math.min(r,f[1]),o=Math.max(o,f[0]),l=Math.max(l,f[1])}return i[0]=n,i[1]=r,i[2]=o,i[3]=l,i}function _dt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function _ue(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function bue(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function bdt(t){return _ue(t)*bue(t)}function xdt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function wdt(t,e){return xue(t,e[0],e[1])}function Sdt(t,e){return xue(t,e.x,e.y)}function xue(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function Edt(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function Cdt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Pdt(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Tdt(t,e,i,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+e,s[3]=t[3]+i,s}function ODe(t,e,i=t){return i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i}function Idt(t){return t?vue(t,s6):Ov(s6)}function IO(t){return t!=null&&t.length===4}function Mdt(t,e){return IO(t)&&IO(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const s6=[1/0,1/0,-1/0,-1/0],RDe=[0,0,0,0];function wue(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Sue(t){return t.points!==void 0}function Eue(t){return t.x!==void 0&&t.y!==void 0}function Cue(t){return t.paths!==void 0}function Pue(t){return t.rings!==void 0}function Tue(t){function e(i,s){return i==null?s:s==null?i:t(i,s)}return e}const ig=Tue(Math.min),sg=Tue(Math.max);function Adt(t,e){return Cue(e)?P2(t,e.paths,!1,!1):Pue(e)?P2(t,e.rings,!1,!1):Sue(e)?SV(t,e.points,!1,!1,!1,!1):wue(e)?Iue(t,e):(Eue(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Ddt(t){let e,i,s,n;for(t.reset(),e=s=1/0,i=n=-1/0;t.nextPath();){const r=LDe(t);e=Math.min(r[0],e),s=Math.min(r[1],s),i=Math.max(r[2],i),n=Math.max(r[3],n)}return Ov([e,s,i,n])}function LDe(t){let e,i,s,n;for(e=s=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),s=Math.min(t.y,s),i=Math.max(t.x,i),n=Math.max(t.y,n);return Ov([e,s,i,n])}function kdt(t,e){return Cue(e)?P2(t,e.paths,!0,!1):Pue(e)?P2(t,e.rings,!0,!1):Sue(e)?SV(t,e.points,!0,!1,!0,!1):wue(e)?Iue(t,e,!0,!1,!0,!1):(Eue(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function P2(t,e,i,s){const n=i?3:2;if(!e.length||!e[0].length)return null;let r,o,l,u,[f,y]=e[0][0],[_,x]=e[0][0];for(let S=0;S<e.length;S++){const P=e[S];for(let A=0;A<P.length;A++){const k=P[A],[$,F]=k;if(f=ig(f,$),y=ig(y,F),_=sg(_,$),x=sg(x,F),i&&k.length>2){const G=k[2];r=ig(r,G),o=sg(o,G)}if(s&&k.length>n){const G=k[n];l=ig(r,G),u=sg(o,G)}}}return i?s?(t[0]=f,t[1]=y,t[2]=r,t[3]=l,t[4]=_,t[5]=x,t[6]=o,t[7]=u,t.length=8,t):(t[0]=f,t[1]=y,t[2]=r,t[3]=_,t[4]=x,t[5]=o,t.length=6,t):s?(t[0]=f,t[1]=y,t[2]=l,t[3]=_,t[4]=x,t[5]=u,t.length=6,t):(t[0]=f,t[1]=y,t[2]=_,t[3]=x,t.length=4,t)}function Iue(t,e,i,s,n,r){const o=e.xmin,l=e.xmax,u=e.ymin,f=e.ymax;let y=e.zmin,_=e.zmax,x=e.mmin,S=e.mmax;return n?(y=y||0,_=_||0,r?(x=x||0,S=S||0,t[0]=o,t[1]=u,t[2]=y,t[3]=x,t[4]=l,t[5]=f,t[6]=_,t[7]=S,t):(t[0]=o,t[1]=u,t[2]=y,t[3]=l,t[4]=f,t[5]=_,t)):r?(x=x||0,S=S||0,t[0]=o,t[1]=u,t[2]=x,t[3]=l,t[4]=f,t[5]=S,t):(t[0]=o,t[1]=u,t[2]=l,t[3]=f,t)}function SV(t,e,i,s,n,r){const o=i?3:2,l=s&&r,u=i&&n;if(!e.length||!e[0].length)return null;let f,y,_,x,[S,P]=e[0],[A,k]=e[0];for(let $=0;$<e.length;$++){const F=e[$],[G,V]=F;if(S=ig(S,G),P=ig(P,V),A=sg(A,G),k=sg(k,V),u&&F.length>2){const B=F[2];f=ig(f,B),y=sg(y,B)}if(l&&F.length>o){const B=F[o];_=ig(f,B),x=sg(y,B)}}return n?(f=f||0,y=y||0,r?(_=_||0,x=x||0,t[0]=S,t[1]=P,t[2]=f,t[3]=_,t[4]=A,t[5]=k,t[6]=y,t[7]=x,t):(t[0]=S,t[1]=P,t[2]=f,t[3]=A,t[4]=k,t[5]=y,t)):r?(_=_||0,x=x||0,t[0]=S,t[1]=P,t[2]=_,t[3]=A,t[4]=k,t[5]=x,t):(t[0]=S,t[1]=P,t[2]=A,t[3]=k,t)}function FDe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function zDe(t){return t.points!==void 0}function qDe(t){return t.x!==void 0&&t.y!==void 0}function VDe(t){return t.paths!==void 0}function GDe(t){return t.rings!==void 0}const EV=[];function Mue(t,e,i,s){return{xmin:t,ymin:e,xmax:i,ymax:s}}function Aue(t,e,i,s,n,r){return{xmin:t,ymin:e,zmin:i,xmax:s,ymax:n,zmax:r}}function Due(t,e,i,s,n,r){return{xmin:t,ymin:e,mmin:i,xmax:s,ymax:n,mmax:r}}function kue(t,e,i,s,n,r,o,l){return{xmin:t,ymin:e,zmin:i,mmin:s,xmax:n,ymax:r,zmax:o,mmax:l}}function CV(t,e=!1,i=!1){return e?i?kue(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Aue(t[0],t[1],t[2],t[3],t[4],t[5]):i?Due(t[0],t[1],t[2],t[3],t[4],t[5]):Mue(t[0],t[1],t[2],t[3])}function Ndt(t){return t?FDe(t)?t:qDe(t)?BDe(t):GDe(t)?Nue(t):VDe(t)?$ue(t):zDe(t)?jDe(t):null:null}function jDe(t){const{hasZ:e,hasM:i,points:s}=t;return CV(SV(EV,s,e??!1,i??!1),e,i)}function BDe(t){const{x:e,y:i,z:s,m:n}=t,r=n!=null;return s!=null?r?kue(e,i,s,n,e,i,s,n):Aue(e,i,s,e,i,s):r?Due(e,i,n,e,i,n):Mue(e,i,e,i)}function Nue(t){const{hasZ:e,hasM:i,rings:s}=t,n=P2(EV,s,e??!1,i??!1);return n?CV(n,e,i):null}function $ue(t){const{hasZ:e,hasM:i,paths:s}=t,n=P2(EV,s,e??!1,i??!1);return n?CV(n,e,i):null}var VT;function IZ(t){return!Array.isArray(t[0])}function HDe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function UDe(t){var r,o;if(!t)return;let{rings:e,hasM:i,hasZ:s,spatialReference:n}=t;switch(e??(e=[]),HDe(e)&&(e=[e]),(o=(r=e[0])==null?void 0:r[0])==null?void 0:o.length){case 4:s??(s=!0),i??(i=!0);break;case 3:s??(s=i!==!0),i??(i=!s);break;default:s??(s=!1),i??(i=!1)}return n??(n=qi.WGS84),{...t,hasM:i,hasZ:s,rings:e,spatialReference:n}}let qd=VT=class extends Dv{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let s=!1,n=!1;for(const o of e)o.hasZ&&(s=!0),o.hasM&&(n=!0);const r={rings:e.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const u=o.zmin+.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(u)}if(n&&o.hasM){const u=o.mmin+.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(u)}return l}),spatialReference:i};return s&&(r.hasZ=!0),n&&(r.hasM=!0),new VT(r)}constructor(t){super(UDe(t)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=wDe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Yi;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=Nue(this);if(!e)return null;const i=new ur(e);return i.spatialReference=t,i}get isSelfIntersecting(){return k9e(this.rings)}writeRings(t,e){e.rings=Ue(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(IZ(t)){const s=[];for(let n=0,r=t.length;n<r;n++)s[n]=t[n].toArray();e[i]=s}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new VT;return t.spatialReference=this.spatialReference,t.rings=Ue(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const s=([n,r,o,l],[u,f,y,_])=>n===u&&r===f&&(o==null&&y==null||o===y)&&(l==null&&_==null||l===_);for(let n=0;n<this.rings.length;n++){const r=this.rings[n],o=t.rings[n];if(!ff(r,o,s))return!1}return!0}contains(t){if(!t)return!1;const e=ile(t,this.spatialReference);return w9e(this,e??t)}isClockwise(t){const e=IZ(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return VM(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],s=this.hasZ,n=this.hasM;return s&&!n?new Yi(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new Yi(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new Yi(i[0],i[1],i[2],i[3],this.spatialReference):new Yi(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(C2(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Yi(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,s=e.map(n=>new Yi(n,i));return this.notifyChange("rings"),s}setPoint(t,e,i){return this._validateInputs(t,e)?(C2(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const s=this.rings[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};I([N({readOnly:!0})],qd.prototype,"cache",null),I([N({readOnly:!0})],qd.prototype,"centroid",null),I([N({readOnly:!0})],qd.prototype,"extent",null),I([N({readOnly:!0})],qd.prototype,"isSelfIntersecting",null),I([N({type:[[[Number]]],json:{write:{isRequired:!0}}})],qd.prototype,"rings",void 0),I([Ft("rings")],qd.prototype,"writeRings",null),qd=VT=I([ke("esri.geometry.Polygon")],qd);const Za=qd;qd.prototype.toJSON.isDefaultToJSON=!0;var MO;function YDe(t){return!Array.isArray(t[0])}function XDe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function WDe(t){var r,o;if(!t)return;let{paths:e,hasM:i,hasZ:s,spatialReference:n}=t;switch(e??(e=[]),XDe(e)&&(e=[e]),(o=(r=e[0])==null?void 0:r[0])==null?void 0:o.length){case 4:s??(s=!0),i??(i=!0);break;case 3:s??(s=i!==!0),i??(i=!s);break;default:s??(s=!1),i??(i=!1)}return n??(n=qi.WGS84),{...t,hasM:i,hasZ:s,paths:e,spatialReference:n}}let V0=MO=class extends Dv{constructor(t){super(WDe(t)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=$ue(this);if(!e)return null;const i=new ur(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=Ue(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(YDe(t)){const s=[];for(let n=0,r=t.length;n<r;n++)s[n]=t[n].toArray();e[i]=s}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new MO;return t.spatialReference=this.spatialReference,t.paths=Ue(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],s=this.hasZ,n=this.hasM;return s&&!n?new Yi(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new Yi(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new Yi(i[0],i[1],i[2],i[3],this.spatialReference):new Yi(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(C2(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,s=e.map(n=>new Yi(n,i));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Yi(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(C2(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const s=this.paths[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};I([N({readOnly:!0})],V0.prototype,"cache",null),I([N({readOnly:!0})],V0.prototype,"extent",null),I([N({type:[[[Number]]],json:{write:{isRequired:!0}}})],V0.prototype,"paths",void 0),I([Ft("paths")],V0.prototype,"writePaths",null),V0=MO=I([ke("esri.geometry.Polyline")],V0);const If=V0;V0.prototype.toJSON.isDefaultToJSON=!0;const ZDe=wa()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),MZ=wa()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Oue(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Rue(t){return t.points!==void 0}function Lue(t){return t.x!==void 0&&t.y!==void 0}function PV(t){return t.paths!==void 0}function Wb(t){return t.rings!==void 0}function MC(t){return t==null?null:t instanceof Dv?t:Lue(t)?Yi.fromJSON(t):PV(t)?If.fromJSON(t):Wb(t)?Za.fromJSON(t):Rue(t)?$v.fromJSON(t):Oue(t)?ur.fromJSON(t):null}function $dt(t){return t?Lue(t)?"esriGeometryPoint":PV(t)?"esriGeometryPolyline":Wb(t)?"esriGeometryPolygon":Oue(t)?"esriGeometryEnvelope":Rue(t)?"esriGeometryMultipoint":null:null}const KDe={esriGeometryPoint:Yi,esriGeometryPolyline:If,esriGeometryPolygon:Za,esriGeometryEnvelope:ur,esriGeometryMultipoint:$v,esriGeometryMultiPatch:Za};function Odt(t){return t&&KDe[t]||null}const AC={base:Dv,key:"type",typeMap:{extent:ur,multipoint:$v,point:Yi,polyline:If,polygon:Za}};Yu(AC);let Fue=0;const DC=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Fue++})}};return e=I([ke("esri.core.Identifiable")],e),e},Rdt=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Fue++})}};return e=I([ke("esri.core.Identifiable.NumericIdentifiable")],e),e};let AZ=class extends DC(class{}){};AZ=I([ke("esri.core.Identifiable")],AZ);async function JDe(t){var s;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await nt(async()=>{const{fromItem:n}=await import("./portalLayers-yg7XqjS4.js").then(r=>r.p);return{fromItem:n}},__vite__mapDeps([93,94,95]),import.meta.url);try{return await i(e)}catch(n){const r=e==null?void 0:e.portalItem,o=(r==null?void 0:r.id)||"unset",l=((s=r==null?void 0:r.portal)==null?void 0:s.url)||Gs.portalUrl;throw zt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",n),n}}const DZ={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function v8(t,e,i,s=Kp){const n=new Fc(aV(s)),r=hi.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":que(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),r.plus({[o]:e}).toJSDate()}function Fdt(t,e,i="milliseconds"){const s=t.getTime(),n=zue(e,i,"milliseconds");return new Date(s+n)}function kZ(t,e,i=Kp){const s=new Fc(aV(i)),n=hi.fromJSDate(t,{zone:s});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:l}=o,u=l-l%(e==="decades"?10:100);return o.set({year:u}).toJSDate()}const r=que(e);return n.startOf(r).toJSDate()}function zue(t,e,i){return t===0?0:t*DZ[e]/DZ[i]}function QDe(t,e){return t&&e?t.intersection(e):t||e}function que(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var gu;let wc=gu=class extends wt{static get allTime(){return NZ}static get empty(){return eke}static fromArray(t){return new gu({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(gu.allTime)}get isEmpty(){return this.equals(gu.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new gu({end:this.end,start:this.start})}equals(t){var r,o,l,u;if(!t)return!1;const e=((r=this.start)==null?void 0:r.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,s=((l=t.start)==null?void 0:l.getTime())??t.start,n=((u=t.end)==null?void 0:u.getTime())??t.end;return e===s&&i===n}expandTo(t,e=Kp){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=kZ(i,t,e));let s=this.end;if(s){const n=kZ(s,t,e);s=s.getTime()===n.getTime()?n:v8(n,1,t,e)}return new gu({start:i,end:s})}intersection(t){var l,u,f,y;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return gu.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((l=this.start)==null?void 0:l.getTime())??-1/0,i=((u=this.end)==null?void 0:u.getTime())??1/0,s=((f=t.start)==null?void 0:f.getTime())??-1/0,n=((y=t.end)==null?void 0:y.getTime())??1/0;let r,o;return s>=e&&s<=i?r=s:e>=s&&e<=n&&(r=e),i>=s&&i<=n?o=i:n>=e&&n<=i&&(o=n),r==null||o==null||isNaN(r)||isNaN(o)?gu.empty:new gu({start:r===-1/0?null:new Date(r),end:o===1/0?null:new Date(o)})}offset(t,e,i=Kp){if(this.isEmpty||this.isAllTime)return this.clone();const s=new gu,{start:n,end:r}=this;return n!=null&&(s.start=v8(n,t,e,i)),r!=null&&(s.end=v8(r,t,e,i)),s}toArray(){var t,e;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((e=this.end)==null?void 0:e.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return NZ.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new gu({start:e,end:i})}};I([N({type:Date,json:{write:{allowNull:!0}}})],wc.prototype,"end",void 0),I([At("end")],wc.prototype,"readEnd",null),I([Ft("end")],wc.prototype,"writeEnd",null),I([N({readOnly:!0,json:{read:!1}})],wc.prototype,"isAllTime",null),I([N({readOnly:!0,json:{read:!1}})],wc.prototype,"isEmpty",null),I([N({type:Date,json:{write:{allowNull:!0}}})],wc.prototype,"start",void 0),I([At("start")],wc.prototype,"readStart",null),I([Ft("start")],wc.prototype,"writeStart",null),wc=gu=I([ke("esri.time.TimeExtent")],wc);const Pg=wc,NZ=new wc,eke=new wc({start:void 0,end:void 0});let tke=0,Ar=class extends Sa.EventedMixin(DC(SC)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ur(-180,-90,180,90,qi.WGS84),this.id=Date.now().toString(16)+"-layer-"+tke++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=qi.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await nt(async()=>{const{fromUrl:s}=await import("./arcgisLayers-C1W1CHG_.js");return{fromUrl:s}},__vite__mapDeps([96,94,95]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return JDe(e)}initialize(){this.when().catch(e=>{cd(e)||zt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return vl(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Qs(e,{query:{f:"json"},responseType:"json"})).data;throw new rt("layer:no-attribution-data","Layer does not have attribution data")}};I([N({type:String})],Ar.prototype,"attributionDataUrl",void 0),I([N({readOnly:!0})],Ar.prototype,"effectiveVisible",null),I([N({type:ur})],Ar.prototype,"fullExtent",void 0),I([N({readOnly:!0})],Ar.prototype,"hasAttributionData",null),I([N({type:String,clonable:!1})],Ar.prototype,"id",void 0),I([N({type:Boolean,nonNullable:!0})],Ar.prototype,"legendEnabled",void 0),I([N({type:["show","hide","hide-children"]})],Ar.prototype,"listMode",void 0),I([N({type:Number,range:{min:0,max:1},nonNullable:!0})],Ar.prototype,"opacity",void 0),I([N({clonable:!1})],Ar.prototype,"parent",void 0),I([N({readOnly:!0})],Ar.prototype,"parsedUrl",null),I([N({type:Boolean,readOnly:!0})],Ar.prototype,"persistenceEnabled",void 0),I([N({type:Boolean})],Ar.prototype,"popupEnabled",void 0),I([N({type:Boolean})],Ar.prototype,"attributionVisible",void 0),I([N({type:qi})],Ar.prototype,"spatialReference",void 0),I([N({type:String})],Ar.prototype,"title",void 0),I([N({readOnly:!0,json:{read:!1}})],Ar.prototype,"type",void 0),I([N()],Ar.prototype,"url",void 0),I([N({type:Pg})],Ar.prototype,"visibilityTimeExtent",void 0),I([N({type:Boolean,nonNullable:!0})],Ar.prototype,"visible",void 0),Ar=I([ke("esri.layers.Layer")],Ar);const GM=Ar,n6={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Vue(t){return!!n6[t]||!!n6[t.toLowerCase()]}function TV(t){return n6[t]??n6[t.toLowerCase()]}function ike(t){return[...TV(t)]}function _8(t,e,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?t+(e-t)*s:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Gue(t,e,i,s=1){const n=(t%360+360)%360/360,r=i<=.5?i*(e+1):i+e-i*e,o=2*i-r;return[Math.round(255*_8(o,r,n+1/3)),Math.round(255*_8(o,r,n)),Math.round(255*_8(o,r,n-1/3)),s]}function ske(t){const e=t.length>5,i=e?8:4,s=(1<<i)-1,n=e?1:17,r=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let u;return r&&(u=o&s,o>>=i,l[3]=n*u/255),u=o&s,o>>=i,l[2]=n*u,u=o&s,o>>=i,l[1]=n*u,u=o&s,o>>=i,l[0]=n*u,l}const nke=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,rke="screenUtils.toPt: input not recognized!",jue=96;function oke(t){return t?t/72*jue:0}function Wu(t){return t?72*t/jue:0}function fs(t){if(typeof t=="string"){const e=t.match(nke);if(e){const i=Number(e[1]),s=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",r=s==="px"?Wu(i):i;return n?-r:r}return console.warn(rke),null}return t}function Qp(t=0,e=0){return{x:t,y:e}}function qdt(t){return t?Qp(t.x,t.y):null}function Bue(t=0,e=0){return[t,e]}function Vdt(t=0,e=0,i=0){return[t,e,i]}function Gdt(t){return t}function jdt(t){return t}function Bdt(t){return t}function Hdt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function jM(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ake(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function lke(t,e,i,s,n,r,o,l,u,f,y,_,x,S,P,A){const k=new Float32Array(16);return k[0]=t,k[1]=e,k[2]=i,k[3]=s,k[4]=n,k[5]=r,k[6]=o,k[7]=l,k[8]=u,k[9]=f,k[10]=y,k[11]=_,k[12]=x,k[13]=S,k[14]=P,k[15]=A,k}function cke(t,e){return new Float32Array(t,e,16)}const uke=jM();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:uke,clone:ake,create:jM,createView:cke,fromValues:lke},Symbol.toStringTag,{value:"Module"}));function Nt(){return[0,0,0]}function ic(t){return[t[0],t[1],t[2]]}function _l(t,e,i){return[t,e,i]}function hke(t,e,i){return[t,e,i]}function Hue(t,e=Nt()){const i=Math.min(3,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function dke(t,e){return new Float64Array(t,e,3)}function Uue(){return Nt()}function Yue(){return _l(1,1,1)}function Xue(){return _l(1,0,0)}function Wue(){return _l(0,1,0)}function Zue(){return _l(0,0,1)}const fke=Uue(),pke=Yue(),mke=Xue(),gke=Wue(),Kue=Zue();Object.freeze(Object.defineProperty({__proto__:null,ONES:pke,UNIT_X:mke,UNIT_Y:gke,UNIT_Z:Kue,ZEROS:fke,clone:ic,create:Nt,createView:dke,freeze:hke,fromArray:Hue,fromValues:_l,ones:Yue,unitX:Xue,unitY:Wue,unitZ:Zue,zeros:Uue},Symbol.toStringTag,{value:"Module"}));let IV=1e-6;function oo(){return IV}function yke(t){IV=t}const kC=Math.random,vke=Math.PI/180,_ke=180/Math.PI;function bke(t){return t*vke}function xke(t){return t*_ke}function wke(t,e){return Math.abs(t-e)<=IV*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:kC,equals:wke,getEpsilon:oo,setEpsilon:yke,toDegree:xke,toRadian:bke},Symbol.toStringTag,{value:"Module"}));function Jue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zg(t,e,i,s,n,r,o,l,u,f,y,_,x,S,P,A,k){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t[6]=l,t[7]=u,t[8]=f,t[9]=y,t[10]=_,t[11]=x,t[12]=S,t[13]=P,t[14]=A,t[15]=k,t}function BM(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qg(t,e){if(t===e){const i=e[1],s=e[2],n=e[3],r=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=r,t[11]=e[14],t[12]=n,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ske(t,e){return Que(t,e)||BM(t),t}function Que(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],u=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],k=e[14],$=e[15],F=i*l-s*o,G=i*u-n*o,V=i*f-r*o,B=s*u-n*l,W=s*f-r*l,J=n*f-r*u,re=y*A-_*P,se=y*k-x*P,oe=y*$-S*P,pe=_*k-x*A,ce=_*$-S*A,ue=x*$-S*k;let ne=F*ue-G*ce+V*pe+B*oe-W*se+J*re;return ne?(ne=1/ne,t[0]=(l*ue-u*ce+f*pe)*ne,t[1]=(n*ce-s*ue-r*pe)*ne,t[2]=(A*J-k*W+$*B)*ne,t[3]=(x*W-_*J-S*B)*ne,t[4]=(u*oe-o*ue-f*se)*ne,t[5]=(i*ue-n*oe+r*se)*ne,t[6]=(k*V-P*J-$*G)*ne,t[7]=(y*J-x*V+S*G)*ne,t[8]=(o*ce-l*oe+f*re)*ne,t[9]=(s*oe-i*ce-r*re)*ne,t[10]=(P*W-A*V+$*F)*ne,t[11]=(_*V-y*W-S*F)*ne,t[12]=(l*se-o*pe-u*re)*ne,t[13]=(i*pe-s*se+n*re)*ne,t[14]=(A*G-P*B-k*F)*ne,t[15]=(y*B-_*G+x*F)*ne,t):null}function Eke(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],u=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],k=e[14],$=e[15];return t[0]=l*(x*$-S*k)-_*(u*$-f*k)+A*(u*S-f*x),t[1]=-(s*(x*$-S*k)-_*(n*$-r*k)+A*(n*S-r*x)),t[2]=s*(u*$-f*k)-l*(n*$-r*k)+A*(n*f-r*u),t[3]=-(s*(u*S-f*x)-l*(n*S-r*x)+_*(n*f-r*u)),t[4]=-(o*(x*$-S*k)-y*(u*$-f*k)+P*(u*S-f*x)),t[5]=i*(x*$-S*k)-y*(n*$-r*k)+P*(n*S-r*x),t[6]=-(i*(u*$-f*k)-o*(n*$-r*k)+P*(n*f-r*u)),t[7]=i*(u*S-f*x)-o*(n*S-r*x)+y*(n*f-r*u),t[8]=o*(_*$-S*A)-y*(l*$-f*A)+P*(l*S-f*_),t[9]=-(i*(_*$-S*A)-y*(s*$-r*A)+P*(s*S-r*_)),t[10]=i*(l*$-f*A)-o*(s*$-r*A)+P*(s*f-r*l),t[11]=-(i*(l*S-f*_)-o*(s*S-r*_)+y*(s*f-r*l)),t[12]=-(o*(_*k-x*A)-y*(l*k-u*A)+P*(l*x-u*_)),t[13]=i*(_*k-x*A)-y*(s*k-n*A)+P*(s*x-n*_),t[14]=-(i*(l*k-u*A)-o*(s*k-n*A)+P*(s*u-n*l)),t[15]=i*(l*x-u*_)-o*(s*x-n*_)+y*(s*u-n*l),t}function Cke(t){const e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],o=t[5],l=t[6],u=t[7],f=t[8],y=t[9],_=t[10],x=t[11],S=t[12],P=t[13],A=t[14],k=t[15];return(e*o-i*r)*(_*k-x*A)-(e*l-s*r)*(y*k-x*P)+(e*u-n*r)*(y*A-_*P)+(i*l-s*o)*(f*k-x*S)-(i*u-n*o)*(f*A-_*S)+(s*u-n*l)*(f*P-y*S)}function ehe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=e[6],y=e[7],_=e[8],x=e[9],S=e[10],P=e[11],A=e[12],k=e[13],$=e[14],F=e[15];let G=i[0],V=i[1],B=i[2],W=i[3];return t[0]=G*s+V*l+B*_+W*A,t[1]=G*n+V*u+B*x+W*k,t[2]=G*r+V*f+B*S+W*$,t[3]=G*o+V*y+B*P+W*F,G=i[4],V=i[5],B=i[6],W=i[7],t[4]=G*s+V*l+B*_+W*A,t[5]=G*n+V*u+B*x+W*k,t[6]=G*r+V*f+B*S+W*$,t[7]=G*o+V*y+B*P+W*F,G=i[8],V=i[9],B=i[10],W=i[11],t[8]=G*s+V*l+B*_+W*A,t[9]=G*n+V*u+B*x+W*k,t[10]=G*r+V*f+B*S+W*$,t[11]=G*o+V*y+B*P+W*F,G=i[12],V=i[13],B=i[14],W=i[15],t[12]=G*s+V*l+B*_+W*A,t[13]=G*n+V*u+B*x+W*k,t[14]=G*r+V*f+B*S+W*$,t[15]=G*o+V*y+B*P+W*F,t}function Pke(t,e,i){const s=i[0],n=i[1],r=i[2];if(e===t)t[12]=e[0]*s+e[4]*n+e[8]*r+e[12],t[13]=e[1]*s+e[5]*n+e[9]*r+e[13],t[14]=e[2]*s+e[6]*n+e[10]*r+e[14],t[15]=e[3]*s+e[7]*n+e[11]*r+e[15];else{const o=e[0],l=e[1],u=e[2],f=e[3],y=e[4],_=e[5],x=e[6],S=e[7],P=e[8],A=e[9],k=e[10],$=e[11];t[0]=o,t[1]=l,t[2]=u,t[3]=f,t[4]=y,t[5]=_,t[6]=x,t[7]=S,t[8]=P,t[9]=A,t[10]=k,t[11]=$,t[12]=o*s+y*n+P*r+e[12],t[13]=l*s+_*n+A*r+e[13],t[14]=u*s+x*n+k*r+e[14],t[15]=f*s+S*n+$*r+e[15]}return t}function Tke(t,e,i){const s=i[0],n=i[1],r=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ike(t,e,i,s){let n=s[0],r=s[1],o=s[2],l=Math.sqrt(n*n+r*r+o*o);if(l<=oo())return void Jue(t,e);l=1/l,n*=l,r*=l,o*=l;const u=Math.sin(i),f=Math.cos(i),y=1-f,_=e[0],x=e[1],S=e[2],P=e[3],A=e[4],k=e[5],$=e[6],F=e[7],G=e[8],V=e[9],B=e[10],W=e[11],J=n*n*y+f,re=r*n*y+o*u,se=o*n*y-r*u,oe=n*r*y-o*u,pe=r*r*y+f,ce=o*r*y+n*u,ue=n*o*y+r*u,ne=r*o*y-n*u,de=o*o*y+f;t[0]=_*J+A*re+G*se,t[1]=x*J+k*re+V*se,t[2]=S*J+$*re+B*se,t[3]=P*J+F*re+W*se,t[4]=_*oe+A*pe+G*ce,t[5]=x*oe+k*pe+V*ce,t[6]=S*oe+$*pe+B*ce,t[7]=P*oe+F*pe+W*ce,t[8]=_*ue+A*ne+G*de,t[9]=x*ue+k*ne+V*de,t[10]=S*ue+$*ne+B*de,t[11]=P*ue+F*ne+W*de,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function Mke(t,e,i){const s=Math.sin(i),n=Math.cos(i),r=e[4],o=e[5],l=e[6],u=e[7],f=e[8],y=e[9],_=e[10],x=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*n+f*s,t[5]=o*n+y*s,t[6]=l*n+_*s,t[7]=u*n+x*s,t[8]=f*n-r*s,t[9]=y*n-o*s,t[10]=_*n-l*s,t[11]=x*n-u*s,t}function Ake(t,e,i){const s=Math.sin(i),n=Math.cos(i),r=e[0],o=e[1],l=e[2],u=e[3],f=e[8],y=e[9],_=e[10],x=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*n-f*s,t[1]=o*n-y*s,t[2]=l*n-_*s,t[3]=u*n-x*s,t[8]=r*s+f*n,t[9]=o*s+y*n,t[10]=l*s+_*n,t[11]=u*s+x*n,t}function Dke(t,e,i){const s=Math.sin(i),n=Math.cos(i),r=e[0],o=e[1],l=e[2],u=e[3],f=e[4],y=e[5],_=e[6],x=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*n+f*s,t[1]=o*n+y*s,t[2]=l*n+_*s,t[3]=u*n+x*s,t[4]=f*n-r*s,t[5]=y*n-o*s,t[6]=_*n-l*s,t[7]=x*n-u*s,t}function kke(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Nke(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function the(t,e,i){if(e===0)return BM(t);let s=i[0],n=i[1],r=i[2],o=Math.sqrt(s*s+n*n+r*r);if(o<=oo())return null;o=1/o,s*=o,n*=o,r*=o;const l=Math.sin(e),u=Math.cos(e),f=1-u;return t[0]=s*s*f+u,t[1]=n*s*f+r*l,t[2]=r*s*f-n*l,t[3]=0,t[4]=s*n*f-r*l,t[5]=n*n*f+u,t[6]=r*n*f+s*l,t[7]=0,t[8]=s*r*f+n*l,t[9]=n*r*f-s*l,t[10]=r*r*f+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $ke(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Oke(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rke(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ihe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=s+s,u=n+n,f=r+r,y=s*l,_=s*u,x=s*f,S=n*u,P=n*f,A=r*f,k=o*l,$=o*u,F=o*f;return t[0]=1-(S+A),t[1]=_+F,t[2]=x-$,t[3]=0,t[4]=_-F,t[5]=1-(y+A),t[6]=P+k,t[7]=0,t[8]=x+$,t[9]=P-k,t[10]=1-(y+S),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Lke(t,e){const i=Fke,s=-e[0],n=-e[1],r=-e[2],o=e[3],l=e[4],u=e[5],f=e[6],y=e[7],_=s*s+n*n+r*r+o*o;return _>0?(i[0]=2*(l*o+y*s+u*r-f*n)/_,i[1]=2*(u*o+y*n+f*s-l*r)/_,i[2]=2*(f*o+y*r+l*n-u*s)/_):(i[0]=2*(l*o+y*s+u*r-f*n),i[1]=2*(u*o+y*n+f*s-l*r),i[2]=2*(f*o+y*r+l*n-u*s)),ihe(t,e,i),t}const Fke=Nt();function zke(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function qke(t,e){const i=e[0],s=e[1],n=e[2],r=e[4],o=e[5],l=e[6],u=e[8],f=e[9],y=e[10];return t[0]=Math.sqrt(i*i+s*s+n*n),t[1]=Math.sqrt(r*r+o*o+l*l),t[2]=Math.sqrt(u*u+f*f+y*y),t}function Vke(t,e){const i=e[0]+e[5]+e[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t}function Gke(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=e[3],u=n+n,f=r+r,y=o+o,_=n*u,x=n*f,S=n*y,P=r*f,A=r*y,k=o*y,$=l*u,F=l*f,G=l*y,V=s[0],B=s[1],W=s[2];return t[0]=(1-(P+k))*V,t[1]=(x+G)*V,t[2]=(S-F)*V,t[3]=0,t[4]=(x-G)*B,t[5]=(1-(_+k))*B,t[6]=(A+$)*B,t[7]=0,t[8]=(S+F)*W,t[9]=(A-$)*W,t[10]=(1-(_+P))*W,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function jke(t,e,i,s,n){const r=e[0],o=e[1],l=e[2],u=e[3],f=r+r,y=o+o,_=l+l,x=r*f,S=r*y,P=r*_,A=o*y,k=o*_,$=l*_,F=u*f,G=u*y,V=u*_,B=s[0],W=s[1],J=s[2],re=n[0],se=n[1],oe=n[2],pe=(1-(A+$))*B,ce=(S+V)*B,ue=(P-G)*B,ne=(S-V)*W,de=(1-(x+$))*W,Se=(k+F)*W,Pe=(P+G)*J,Re=(k-F)*J,Oe=(1-(x+A))*J;return t[0]=pe,t[1]=ce,t[2]=ue,t[3]=0,t[4]=ne,t[5]=de,t[6]=Se,t[7]=0,t[8]=Pe,t[9]=Re,t[10]=Oe,t[11]=0,t[12]=i[0]+re-(pe*re+ne*se+Pe*oe),t[13]=i[1]+se-(ce*re+de*se+Re*oe),t[14]=i[2]+oe-(ue*re+Se*se+Oe*oe),t[15]=1,t}function Bke(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,l=s+s,u=n+n,f=i*o,y=s*o,_=s*l,x=n*o,S=n*l,P=n*u,A=r*o,k=r*l,$=r*u;return t[0]=1-_-P,t[1]=y+$,t[2]=x-k,t[3]=0,t[4]=y-$,t[5]=1-f-P,t[6]=S+A,t[7]=0,t[8]=x+k,t[9]=S-A,t[10]=1-f-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hke(t,e,i,s,n,r,o){const l=1/(i-e),u=1/(n-s),f=1/(r-o);return t[0]=2*r*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*u,t[6]=0,t[7]=0,t[8]=(i+e)*l,t[9]=(n+s)*u,t[10]=(o+r)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r*2*f,t[15]=0,t}function Uke(t,e,i,s,n){const r=1/Math.tan(e/2);let o;return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(s-n),t[10]=(n+s)*o,t[14]=2*n*s*o):(t[10]=-1,t[14]=-2*s),t}function Yke(t,e,i,s){const n=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+l),f=2/(n+r);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(o-l)*u*.5,t[9]=(n-r)*f*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t}function Xke(t,e,i,s,n,r,o){const l=1/(e-i),u=1/(s-n),f=1/(r-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+i)*l,t[13]=(n+s)*u,t[14]=(o+r)*f,t[15]=1,t}function Wke(t,e,i,s){const n=e[0],r=e[1],o=e[2];let l=n-i[0],u=r-i[1],f=o-i[2];const y=oo();if(Math.abs(l)<y&&Math.abs(u)<y&&Math.abs(f)<y)return void BM(t);let _=1/Math.sqrt(l*l+u*u+f*f);l*=_,u*=_,f*=_;const x=s[0],S=s[1],P=s[2];let A=S*f-P*u,k=P*l-x*f,$=x*u-S*l;_=Math.sqrt(A*A+k*k+$*$),_?(_=1/_,A*=_,k*=_,$*=_):(A=0,k=0,$=0);let F=u*$-f*k,G=f*A-l*$,V=l*k-u*A;_=Math.sqrt(F*F+G*G+V*V),_?(_=1/_,F*=_,G*=_,V*=_):(F=0,G=0,V=0),t[0]=A,t[1]=F,t[2]=l,t[3]=0,t[4]=k,t[5]=G,t[6]=u,t[7]=0,t[8]=$,t[9]=V,t[10]=f,t[11]=0,t[12]=-(A*n+k*r+$*o),t[13]=-(F*n+G*r+V*o),t[14]=-(l*n+u*r+f*o),t[15]=1}function Zke(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=s[0],u=s[1],f=s[2];let y=n-i[0],_=r-i[1],x=o-i[2],S=y*y+_*_+x*x;S>0&&(S=1/Math.sqrt(S),y*=S,_*=S,x*=S);let P=u*x-f*_,A=f*y-l*x,k=l*_-u*y;return S=P*P+A*A+k*k,S>0&&(S=1/Math.sqrt(S),P*=S,A*=S,k*=S),t[0]=P,t[1]=A,t[2]=k,t[3]=0,t[4]=_*k-x*A,t[5]=x*P-y*k,t[6]=y*A-_*P,t[7]=0,t[8]=y,t[9]=_,t[10]=x,t[11]=0,t[12]=n,t[13]=r,t[14]=o,t[15]=1,t}function Kke(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Jke(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function Qke(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function she(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function e8e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function t8e(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t}function i8e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function s8e(t,e){if(t===e)return!0;const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],u=t[6],f=t[7],y=t[8],_=t[9],x=t[10],S=t[11],P=t[12],A=t[13],k=t[14],$=t[15],F=e[0],G=e[1],V=e[2],B=e[3],W=e[4],J=e[5],re=e[6],se=e[7],oe=e[8],pe=e[9],ce=e[10],ue=e[11],ne=e[12],de=e[13],Se=e[14],Pe=e[15],Re=oo();return Math.abs(i-F)<=Re*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(s-G)<=Re*Math.max(1,Math.abs(s),Math.abs(G))&&Math.abs(n-V)<=Re*Math.max(1,Math.abs(n),Math.abs(V))&&Math.abs(r-B)<=Re*Math.max(1,Math.abs(r),Math.abs(B))&&Math.abs(o-W)<=Re*Math.max(1,Math.abs(o),Math.abs(W))&&Math.abs(l-J)<=Re*Math.max(1,Math.abs(l),Math.abs(J))&&Math.abs(u-re)<=Re*Math.max(1,Math.abs(u),Math.abs(re))&&Math.abs(f-se)<=Re*Math.max(1,Math.abs(f),Math.abs(se))&&Math.abs(y-oe)<=Re*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(_-pe)<=Re*Math.max(1,Math.abs(_),Math.abs(pe))&&Math.abs(x-ce)<=Re*Math.max(1,Math.abs(x),Math.abs(ce))&&Math.abs(S-ue)<=Re*Math.max(1,Math.abs(S),Math.abs(ue))&&Math.abs(P-ne)<=Re*Math.max(1,Math.abs(P),Math.abs(ne))&&Math.abs(A-de)<=Re*Math.max(1,Math.abs(A),Math.abs(de))&&Math.abs(k-Se)<=Re*Math.max(1,Math.abs(k),Math.abs(Se))&&Math.abs($-Pe)<=Re*Math.max(1,Math.abs($),Math.abs(Pe))}function n8e(t){const e=oo(),i=t[0],s=t[1],n=t[2],r=t[4],o=t[5],l=t[6],u=t[8],f=t[9],y=t[10];return Math.abs(1-(i*i+r*r+u*u))<=e&&Math.abs(1-(s*s+o*o+f*f))<=e&&Math.abs(1-(n*n+l*l+y*y))<=e}function r8e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const o8e=ehe,a8e=she;Object.freeze(Object.defineProperty({__proto__:null,add:Qke,adjoint:Eke,copy:Jue,determinant:Cke,equals:s8e,exactEquals:i8e,frob:Jke,fromQuat:Bke,fromQuat2:Lke,fromRotation:the,fromRotationTranslation:ihe,fromRotationTranslationScale:Gke,fromRotationTranslationScaleOrigin:jke,fromScaling:Nke,fromTranslation:kke,fromXRotation:$ke,fromYRotation:Oke,fromZRotation:Rke,frustum:Hke,getRotation:Vke,getScaling:qke,getTranslation:zke,hasIdentityRotation:r8e,identity:BM,invert:Que,invertOrIdentity:Ske,isOrthoNormal:n8e,lookAt:Wke,mul:o8e,multiply:ehe,multiplyScalar:e8e,multiplyScalarAndAdd:t8e,ortho:Xke,perspective:Uke,perspectiveFromFieldOfView:Yke,rotate:Ike,rotateX:Mke,rotateY:Ake,rotateZ:Dke,scale:Tke,set:zg,str:Kke,sub:a8e,subtract:she,targetTo:Zke,translate:Pke,transpose:qg},Symbol.toStringTag,{value:"Module"}));const l8e=(t,e)=>{const i=zg(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return qg(i,i)},c8e=(t,e)=>{const i=zg(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return qg(i,i)},u8e=(t,e)=>{const i=1-e,s=zg(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return qg(s,s)},h8e=(t,e)=>{const i=Math.sin(e*Math.PI/180),s=Math.cos(e*Math.PI/180),n=zg(t,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return qg(n,n)},d8e=(t,e)=>{const i=1-2*e,s=zg(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return qg(s,s)},f8e=(t,e)=>{const i=zg(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return qg(i,i)},p8e=(t,e)=>{const i=1-e,s=zg(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return qg(s,s)};let nhe=class rhe{constructor(e,i,s){this.strength=e,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(e,i,s){this.strength=Gl(e.strength,i.strength,s),this.radius=Gl(e.radius,i.radius,s),this.threshold=Gl(e.threshold,i.threshold,s)}clone(){return new rhe(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:TS(this.radius),strength:this.strength,threshold:this.threshold}}},ohe=class ahe{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,s){this.radius=Math.round(Gl(e.radius,i.radius,s))}clone(){return new ahe(this.radius)}toJSON(){return{type:"blur",radius:TS(this.radius)}}},AO=class lhe{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.amount=Gl(e.amount,i.amount,s),this._updateMatrix()}clone(){return new lhe(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||jM();switch(this.type){case"brightness":this._colorMatrix=l8e(e,this.amount);break;case"contrast":this._colorMatrix=c8e(e,this.amount);break;case"grayscale":this._colorMatrix=u8e(e,this.amount);break;case"invert":this._colorMatrix=d8e(e,this.amount);break;case"saturate":this._colorMatrix=f8e(e,this.amount);break;case"sepia":this._colorMatrix=p8e(e,this.amount)}}},che=class uhe{constructor(e,i,s,n){this.offsetX=e,this.offsetY=i,this.blurRadius=s,this.color=n,this.type="drop-shadow"}interpolate(e,i,s){this.offsetX=Gl(e.offsetX,i.offsetX,s),this.offsetY=Gl(e.offsetY,i.offsetY,s),this.blurRadius=Gl(e.blurRadius,i.blurRadius,s),this.color[0]=Math.round(Gl(e.color[0],i.color[0],s)),this.color[1]=Math.round(Gl(e.color[1],i.color[1],s)),this.color[2]=Math.round(Gl(e.color[2],i.color[2],s)),this.color[3]=Gl(e.color[3],i.color[3],s)}clone(){return new uhe(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:TS(this.offsetX),yoffset:TS(this.offsetY),blurRadius:TS(this.blurRadius),color:e}}},hhe=class dhe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.angle=Gl(e.angle,i.angle,s),this._updateMatrix()}clone(){return new dhe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||jM();this._colorMatrix=h8e(e,this.angle)}},fhe=class phe{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,s){this.amount=Gl(e.amount,i.amount,s)}clone(){return new phe(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Gl(t,e,i){return t+(e-t)*i}function TS(t){return Math.round(1e3*Wu(t))/1e3}function m8e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new AO(t.type,0);case"saturate":case"brightness":case"contrast":return new AO(t.type,1);case"opacity":return new fhe(1);case"hue-rotate":return new hhe(0);case"blur":return new ohe(0);case"drop-shadow":return new che(0,0,0,[...TV("transparent")]);case"bloom":return new nhe(0,0,1)}}function g8e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((s,n)=>s.type===i[n].type)}function y8e(t,e){const i=t.length>e.length?t:e,s=t.length>e.length?e:t;for(let n=s.length;n<i.length;n++)s.push(m8e(i[n]))}function v8e(t){const e=t[0];return!!e&&"type"in e}function Udt(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}function _8e(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}function Zb(t,e,i,s){var n=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(n,Zb.prototype),n.expected=e,n.found=i,n.location=s,n.name="SyntaxError",n}function b8(t,e,i){return i=i||" ",t.length>e?t:(e-=t.length,t+(i+=i.repeat(e)).slice(0,e))}function b8e(t,e){var i,s={},n=(e=e!==void 0?e:{}).grammarSource,r={start:oi},o=oi,l="none",u=")",f=",",y="(",_="%",x="px",S="cm",P="mm",A="in",k="pt",$="pc",F="deg",G="rad",V="grad",B="turn",W="#",J=".",re="e",se=/^[ \t\n\r]/,oe=/^[a-z\-]/,pe=/^[0-9a-fA-F]/,ce=/^[+\-]/,ue=/^[0-9]/,ne=dt("none"),de=Ve("none",!1),Se=Ve(")",!1),Pe=Ve(",",!1),Re=dt("whitespace"),Oe=Xe([" ","	",`
`,"\r"],!1,!1),we=dt("function"),Fe=Ve("(",!1),it=dt("identifier"),vt=Xe([["a","z"],"-"],!1,!1),ot=dt("percentage"),ut=Ve("%",!1),Ct=dt("length"),qt=Ve("px",!1),Lt=Ve("cm",!1),Dt=Ve("mm",!1),Wi=Ve("in",!1),us=Ve("pt",!1),fn=Ve("pc",!1),Us=dt("angle"),dr=Ve("deg",!1),ho=Ve("rad",!1),ss=Ve("grad",!1),ye=Ve("turn",!1),Fi=dt("number"),Sr=dt("color"),ri=Ve("#",!1),Ai=Xe([["0","9"],["a","f"],["A","F"]],!1,!1),pn=Xe(["+","-"],!1,!1),ms=Xe([["0","9"]],!1,!1),Ji=Ve(".",!1),tn=Ve("e",!1),mn=function(){return[]},Br=function(ze,pt){return{type:"function",name:ze,parameters:pt||[]}},Cs=function(ze,pt){return pt.length>0?Zc(ze,pt,3):[ze]},xt=function(ze){return{type:"quantity",value:ze.value,unit:ze.unit}},Ys=function(ze){return{type:"color",colorType:ze.type,value:ze.value}},m=function(ze){return ze},j=function(){return Ne()},T=function(ze){return{value:ze,unit:"%"}},p=function(ze){return{value:ze,unit:"px"}},h=function(ze){return{value:ze,unit:"cm"}},a=function(ze){return{value:ze,unit:"mm"}},c=function(ze){return{value:ze,unit:"in"}},d=function(ze){return{value:ze,unit:"pt"}},g=function(ze){return{value:ze,unit:"pc"}},v=function(ze){return{value:ze,unit:"deg"}},b=function(ze){return{value:ze,unit:"rad"}},C=function(ze){return{value:ze,unit:"grad"}},M=function(ze){return{value:ze,unit:"turn"}},O=function(ze){return{value:ze,unit:null}},L=function(){return{type:"hex",value:Ne()}},q=function(ze){return{type:"function",value:ze}},U=function(){return{type:"named",value:Ne()}},ee=function(){return parseFloat(Ne())},Q=0|e.peg$currPos,ge=Q,ve=[{line:1,column:1}],fe=Q,Ce=e.peg$maxFailExpected||[],Ie=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=r[e.startRule]}function Ne(){return t.substring(ge,Q)}function Ve(ze,pt){return{type:"literal",text:ze,ignoreCase:pt}}function Xe(ze,pt,Pt){return{type:"class",parts:ze,inverted:pt,ignoreCase:Pt}}function et(){return{type:"end"}}function dt(ze){return{type:"other",description:ze}}function ct(ze){var pt,Pt=ve[ze];if(Pt)return Pt;if(ze>=ve.length)pt=ve.length-1;else for(pt=ze;!ve[--pt];);for(Pt={line:(Pt=ve[pt]).line,column:Pt.column};pt<ze;)t.charCodeAt(pt)===10?(Pt.line++,Pt.column=1):Pt.column++,pt++;return ve[ze]=Pt,Pt}function mt(ze,pt,Pt){var ei=ct(ze),Os=ct(pt);return{source:n,start:{offset:ze,line:ei.line,column:ei.column},end:{offset:pt,line:Os.line,column:Os.column}}}function lt(ze){Q<fe||(Q>fe&&(fe=Q,Ce=[]),Ce.push(ze))}function gi(ze,pt,Pt){return new Zb(Zb.buildMessage(ze,pt),ze,pt,Pt)}function oi(){var ze;return(ze=Ni())===s&&(ze=Qi()),ze}function Ni(){var ze,pt;return Ie++,ze=Q,ui(),t.substr(Q,4)===l?(pt=l,Q+=4):(pt=s,Ie===0&&lt(de)),pt!==s?(ui(),ge=ze,ze=mn()):(Q=ze,ze=s),Ie--,ze===s&&Ie===0&&lt(ne),ze}function Qi(){var ze,pt;if(ze=[],(pt=_s())!==s)for(;pt!==s;)ze.push(pt),pt=_s();else ze=s;return ze}function _s(){var ze,pt,Pt,ei;return ze=Q,ui(),(pt=Kt())!==s?(ui(),(Pt=as())===s&&(Pt=null),ui(),t.charCodeAt(Q)===41?(ei=u,Q++):(ei=s,Ie===0&&lt(Se)),ei!==s?(ui(),ge=ze,ze=Br(pt,Pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze}function as(){var ze,pt,Pt,ei,Os,kn,Nn,Hr;if(ze=Q,(pt=$i())!==s){for(Pt=[],ei=Q,Os=ui(),t.charCodeAt(Q)===44?(kn=f,Q++):(kn=s,Ie===0&&lt(Pe)),kn===s&&(kn=null),Nn=ui(),(Hr=$i())!==s?ei=Os=[Os,kn,Nn,Hr]:(Q=ei,ei=s);ei!==s;)Pt.push(ei),ei=Q,Os=ui(),t.charCodeAt(Q)===44?(kn=f,Q++):(kn=s,Ie===0&&lt(Pe)),kn===s&&(kn=null),Nn=ui(),(Hr=$i())!==s?ei=Os=[Os,kn,Nn,Hr]:(Q=ei,ei=s);ge=ze,ze=Cs(pt,Pt)}else Q=ze,ze=s;return ze}function $i(){var ze,pt;return ze=Q,(pt=Ps())===s&&(pt=Qn())===s&&(pt=wi())===s&&(pt=sn()),pt!==s&&(ge=ze,pt=xt(pt)),(ze=pt)===s&&(ze=Q,(pt=ns())!==s&&(ge=ze,pt=Ys(pt)),ze=pt),ze}function ui(){var ze,pt;for(Ie++,ze=[],pt=t.charAt(Q),se.test(pt)?Q++:(pt=s,Ie===0&&lt(Oe));pt!==s;)ze.push(pt),pt=t.charAt(Q),se.test(pt)?Q++:(pt=s,Ie===0&&lt(Oe));return Ie--,pt=s,Ie===0&&lt(Re),ze}function Kt(){var ze,pt,Pt;return Ie++,ze=Q,(pt=Xs())!==s?(t.charCodeAt(Q)===40?(Pt=y,Q++):(Pt=s,Ie===0&&lt(Fe)),Pt!==s?(ge=ze,ze=m(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),Ie--,ze===s&&(pt=s,Ie===0&&lt(we)),ze}function Xs(){var ze,pt,Pt;if(Ie++,ze=Q,pt=[],Pt=t.charAt(Q),oe.test(Pt)?Q++:(Pt=s,Ie===0&&lt(vt)),Pt!==s)for(;Pt!==s;)pt.push(Pt),Pt=t.charAt(Q),oe.test(Pt)?Q++:(Pt=s,Ie===0&&lt(vt));else pt=s;return pt!==s&&(ge=ze,pt=j()),Ie--,(ze=pt)===s&&(pt=s,Ie===0&&lt(it)),ze}function Ps(){var ze,pt,Pt;return Ie++,ze=Q,ui(),(pt=fr())!==s?(t.charCodeAt(Q)===37?(Pt=_,Q++):(Pt=s,Ie===0&&lt(ut)),Pt!==s?(ge=ze,ze=T(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),Ie--,ze===s&&Ie===0&&lt(ot),ze}function Qn(){var ze,pt,Pt;return Ie++,ze=Q,ui(),(pt=fr())!==s?(t.substr(Q,2)===x?(Pt=x,Q+=2):(Pt=s,Ie===0&&lt(qt)),Pt!==s?(ge=ze,ze=p(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ui(),(pt=fr())!==s?(t.substr(Q,2)===S?(Pt=S,Q+=2):(Pt=s,Ie===0&&lt(Lt)),Pt!==s?(ge=ze,ze=h(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ui(),(pt=fr())!==s?(t.substr(Q,2)===P?(Pt=P,Q+=2):(Pt=s,Ie===0&&lt(Dt)),Pt!==s?(ge=ze,ze=a(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ui(),(pt=fr())!==s?(t.substr(Q,2)===A?(Pt=A,Q+=2):(Pt=s,Ie===0&&lt(Wi)),Pt!==s?(ge=ze,ze=c(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ui(),(pt=fr())!==s?(t.substr(Q,2)===k?(Pt=k,Q+=2):(Pt=s,Ie===0&&lt(us)),Pt!==s?(ge=ze,ze=d(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ui(),(pt=fr())!==s?(t.substr(Q,2)===$?(Pt=$,Q+=2):(Pt=s,Ie===0&&lt(fn)),Pt!==s?(ge=ze,ze=g(pt)):(Q=ze,ze=s)):(Q=ze,ze=s)))))),Ie--,ze===s&&Ie===0&&lt(Ct),ze}function wi(){var ze,pt,Pt;return Ie++,ze=Q,(pt=fr())!==s?(t.substr(Q,3)===F?(Pt=F,Q+=3):(Pt=s,Ie===0&&lt(dr)),Pt!==s?(ge=ze,ze=v(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,(pt=fr())!==s?(t.substr(Q,3)===G?(Pt=G,Q+=3):(Pt=s,Ie===0&&lt(ho)),Pt!==s?(ge=ze,ze=b(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,(pt=fr())!==s?(t.substr(Q,4)===V?(Pt=V,Q+=4):(Pt=s,Ie===0&&lt(ss)),Pt!==s?(ge=ze,ze=C(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,(pt=fr())!==s?(t.substr(Q,4)===B?(Pt=B,Q+=4):(Pt=s,Ie===0&&lt(ye)),Pt!==s?(ge=ze,ze=M(pt)):(Q=ze,ze=s)):(Q=ze,ze=s)))),Ie--,ze===s&&(pt=s,Ie===0&&lt(Us)),ze}function sn(){var ze,pt;return Ie++,ze=Q,ui(),(pt=fr())!==s?(ge=ze,ze=O(pt)):(Q=ze,ze=s),Ie--,ze===s&&Ie===0&&lt(Fi),ze}function ns(){var ze,pt,Pt,ei;if(Ie++,ze=Q,t.charCodeAt(Q)===35?(pt=W,Q++):(pt=s,Ie===0&&lt(ri)),pt!==s){if(Pt=[],ei=t.charAt(Q),pe.test(ei)?Q++:(ei=s,Ie===0&&lt(Ai)),ei!==s)for(;ei!==s;)Pt.push(ei),ei=t.charAt(Q),pe.test(ei)?Q++:(ei=s,Ie===0&&lt(Ai));else Pt=s;Pt!==s?(ge=ze,ze=L()):(Q=ze,ze=s)}else Q=ze,ze=s;return ze===s&&(ze=Q,(pt=_s())!==s&&(ge=ze,pt=q(pt)),(ze=pt)===s&&(ze=Q,(pt=Xs())!==s&&(ge=ze,pt=U()),ze=pt)),Ie--,ze===s&&(pt=s,Ie===0&&lt(Sr)),ze}function fr(){var ze,pt,Pt,ei,Os,kn,Nn,Hr;for(ze=Q,pt=t.charAt(Q),ce.test(pt)?Q++:(pt=s,Ie===0&&lt(pn)),pt===s&&(pt=null),Pt=Q,ei=[],Os=t.charAt(Q),ue.test(Os)?Q++:(Os=s,Ie===0&&lt(ms));Os!==s;)ei.push(Os),Os=t.charAt(Q),ue.test(Os)?Q++:(Os=s,Ie===0&&lt(ms));if(t.charCodeAt(Q)===46?(Os=J,Q++):(Os=s,Ie===0&&lt(Ji)),Os!==s){if(kn=[],Nn=t.charAt(Q),ue.test(Nn)?Q++:(Nn=s,Ie===0&&lt(ms)),Nn!==s)for(;Nn!==s;)kn.push(Nn),Nn=t.charAt(Q),ue.test(Nn)?Q++:(Nn=s,Ie===0&&lt(ms));else kn=s;kn!==s?Pt=ei=[ei,Os,kn]:(Q=Pt,Pt=s)}else Q=Pt,Pt=s;if(Pt===s)if(Pt=[],ei=t.charAt(Q),ue.test(ei)?Q++:(ei=s,Ie===0&&lt(ms)),ei!==s)for(;ei!==s;)Pt.push(ei),ei=t.charAt(Q),ue.test(ei)?Q++:(ei=s,Ie===0&&lt(ms));else Pt=s;if(Pt!==s){if(ei=Q,t.charCodeAt(Q)===101?(Os=re,Q++):(Os=s,Ie===0&&lt(tn)),Os!==s){if(kn=t.charAt(Q),ce.test(kn)?Q++:(kn=s,Ie===0&&lt(pn)),kn===s&&(kn=null),Nn=[],Hr=t.charAt(Q),ue.test(Hr)?Q++:(Hr=s,Ie===0&&lt(ms)),Hr!==s)for(;Hr!==s;)Nn.push(Hr),Hr=t.charAt(Q),ue.test(Hr)?Q++:(Hr=s,Ie===0&&lt(ms));else Nn=s;Nn!==s?ei=Os=[Os,kn,Nn]:(Q=ei,ei=s)}else Q=ei,ei=s;ei===s&&(ei=null),ge=ze,ze=ee()}else Q=ze,ze=s;return ze}function eh(ze,pt){return ze.map(function(Pt){return Pt[pt]})}function Zc(ze,pt,Pt){return[ze].concat(eh(pt,Pt))}if(i=o(),e.peg$library)return{peg$result:i,peg$currPos:Q,peg$FAILED:s,peg$maxFailExpected:Ce,peg$maxFailPos:fe};if(i!==s&&Q===t.length)return i;throw i!==s&&Q<t.length&&lt(et()),gi(Ce,fe<t.length?t.charAt(fe):null,fe<t.length?mt(fe,fe+1):mt(fe,fe))}function mhe(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=$Z(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new rt("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:$Z(i.value)}});e.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!g8e(e[i].effects,e[i+1].effects))throw new rt("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});y8e(e[i].effects,e[i+1].effects)}return e.sort((i,s)=>s.scale-i.scale),e}function $Z(t){let e;if(!t)return[];try{e=b8e(t)}catch(i){throw new rt("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>x8e(i))}function x8e(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return w8e(t);case"opacity":return S8e(t);case"hue-rotate":return E8e(t);case"blur":return C8e(t);case"drop-shadow":return P8e(t);case"bloom":return T8e(t)}}catch(e){throw e.details.filter=t,e}throw new rt("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function w8e(t){let e=1;return px(t.parameters,1),t.parameters.length===1&&(e=Nh(t.parameters[0])),new AO(t.name,e)}function S8e(t){let e=1;return px(t.parameters,1),t.parameters.length===1&&(e=Nh(t.parameters[0])),new fhe(e)}function E8e(t){let e=0;return px(t.parameters,1),t.parameters.length===1&&(e=N8e(t.parameters[0])),new hhe(e)}function C8e(t){let e=0;return px(t.parameters,1),t.parameters.length===1&&(e=DV(t.parameters[0]),NC(e,t.parameters[0])),new ohe(e)}function P8e(t){const e=[];let i=null;for(const s of t.parameters)if(s.type==="color"){if(e.length&&Object.freeze(e),i)throw new rt("effect:type-error","Accepts only one color",{});i=$8e(s)}else{const n=DV(s);if(Object.isFrozen(e))throw new rt("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&NC(n,s)}if(e.length<2||e.length>3)throw new rt("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new che(e[0],e[1],e[2]||0,i||ghe("black"))}function T8e(t){let e=1,i=0,s=0;return px(t.parameters,3),t.parameters[0]&&(e=Nh(t.parameters[0])),t.parameters[1]&&(i=DV(t.parameters[1]),NC(i,t.parameters[1])),t.parameters[2]&&(s=Nh(t.parameters[2])),new nhe(e,i,s)}function px(t,e){if(t.length>e)throw new rt("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function HM(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in AV)return"<length>";if(t.unit in MV)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function NC(t,e){if(t<0)throw new rt("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function I8e(t){if(t.type!=="quantity"||t.unit!==null)throw new rt("effect:type-error",`Expected <double>, Actual: ${HM(t)}`,{term:t})}function M8e(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new rt("effect:type-error",`Expected <double> or <percentage>, Actual: ${HM(t)}`,{term:t})}_8e(Zb,Error),Zb.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var i,s=null;for(i=0;i<t.length;i++)if(t[i].source===this.location.source){s=t[i].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,r=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+r.line+":"+r.column;if(s){var l=this.location.end,u=b8("",r.line.toString().length," "),f=s[n.line-1],y=(n.line===l.line?l.column:f.length+1)-n.column||1;e+=`
 --> `+o+`
`+u+` |
`+r.line+" | "+f+`
`+u+" | "+b8("",n.column-1," ")+b8("",y,"^")}else e+=`
 at `+o}return e},Zb.buildMessage=function(t,e){var i={literal:function(f){return'"'+n(f.text)+'"'},class:function(f){var y=f.parts.map(function(_){return Array.isArray(_)?r(_[0])+"-"+r(_[1]):r(_)});return"["+(f.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};function s(f){return f.charCodeAt(0).toString(16).toUpperCase()}function n(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+s(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+s(y)})}function r(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+s(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+s(y)})}function o(f){return i[f.type](f)}function l(f){var y,_,x=f.map(o);if(x.sort(),x.length>0){for(y=1,_=1;y<x.length;y++)x[y-1]!==x[y]&&(x[_]=x[y],_++);x.length=_}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function u(f){return f?'"'+n(f)+'"':"end of input"}return"Expected "+l(t)+" but "+u(e)+" found."};const MV={deg:1,grad:.9,rad:180/Math.PI,turn:360};function A8e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&MV[t.unit]!=null))throw new rt("effect:type-error",`Expected <angle>, Actual: ${HM(t)}`,{term:t})}const AV={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function D8e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&AV[t.unit]!=null))throw new rt("effect:type-error",`Expected <length>, Actual: ${HM(t)}`,{term:t})}function Nh(t){M8e(t);const e=t.value;return NC(e,t),t.unit==="%"?.01*e:e}function k8e(t){return I8e(t),NC(t.value,t),t.value}function N8e(t){return A8e(t),t.value*MV[t.unit]||0}function DV(t){return D8e(t),t.value*AV[t.unit]||0}function $8e(t){switch(t.colorType){case"hex":return ske(t.value);case"named":return ghe(t.value);case"function":return L8e(t.value)}}function ghe(t){if(!Vue(t))throw new rt("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return ike(t)}const O8e=/^rgba?/i,R8e=/^hsla?/i;function L8e(t){if(px(t.parameters,4),O8e.test(t.name))return[Nh(t.parameters[0]),Nh(t.parameters[1]),Nh(t.parameters[2]),t.parameters[3]?Nh(t.parameters[3]):1];if(R8e.test(t.name))return Gue(k8e(t.parameters[0]),Nh(t.parameters[1]),Nh(t.parameters[2]),t.parameters[3]?Nh(t.parameters[3]):1);throw new rt("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function fE(t,e,i){var s;try{return z8e(t)}catch(n){(s=i==null?void 0:i.messages)==null||s.push(n)}return null}function pE(t,e,i,s){try{const n=F8e(t);Ja(i,n,e)}catch(n){s.messages&&s.messages.push(n)}}function F8e(t){const e=mhe(t);return e?v8e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:s})=>({scale:i,value:s.map(n=>n.toJSON())})):null}function z8e(t){if(!t||t.length===0)return null;if(q8e(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:OZ(i.value)});return e}return OZ(t)}function q8e(t){const e=t[0];return!!e&&"scale"in e}function OZ(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[tp(i,"amount")];break;case"blur":s=[tp(i,"radius","pt")];break;case"hue-rotate":s=[tp(i,"angle","deg")];break;case"drop-shadow":s=[tp(i,"xoffset","pt"),tp(i,"yoffset","pt"),tp(i,"blurRadius","pt"),V8e(i,"color")];break;case"bloom":s=[tp(i,"strength"),tp(i,"radius","pt"),tp(i,"threshold")]}const n=`${i.type}(${s.filter(Boolean).join(" ")})`;mhe(n),e.push(n)}return e.join(" ")}function tp(t,e,i){if(t[e]==null)throw new rt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function V8e(t,e){if(t[e]==null)throw new rt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const G8e={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},RZ={read:{reader:fE},write:{allowNull:!0,writer:pE}},j8e={json:{read:!1,write:!1,origins:{"web-map":RZ,"portal-item":RZ}}},kV=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return I([N(G8e)],e.prototype,"blendMode",void 0),I([N(j8e)],e.prototype,"effect",void 0),e=I([ke("esri.layers.mixins.BlendLayer")],e),e},Xo=(t=>t)(["operational-layers","basemap","ground"]),LZ={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},FZ={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},zZ={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},B8e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":LZ,"web-map/basemap":FZ,"web-map/tables":zZ,"link-chart/operational-layers":{...LZ,LinkChartLayer:!0},"link-chart/basemap":FZ,"link-chart/tables":zZ,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};function mx(t,e){var s;const i=(s=e==null?void 0:e.url)==null?void 0:s.path;if(t&&i&&(t=ml(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=Fq(t,e.portalItem.itemUrl);n!=null&&H8e.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=DO(t,e==null?void 0:e.portal))&&UM.test(t)?$V(t):t}function $C(t,e,i=mE.YES){var n,r;if((t=t&&UM.test(t)?vhe(t):t)==null)return t;!Dc(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let s=ml(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((r=e.url)==null?void 0:r.path);if(o){const l=DO(o,e.portal),u=DO(s,e.portal);s=Fq(u,l,l),s!=null&&s!==u&&s!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=yhe(s,e==null?void 0:e.portal),Dc(s)&&(s=Vu(s)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Dc(s)&&!Av(s)&&i===mE.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(s),compress:!1}),s}function NV(t,e,i){return mx(t,i)}function lv(t,e,i,s){const n=$C(t,s);n!==void 0&&(e[i]=n)}const UM=/\/items\/([^/]+)\/resources\/(.*)/,H8e=/^\.\/resources\//;function U8e(t){const e=(t==null?void 0:t.match(UM))??null;return(e==null?void 0:e[1])??null}function Y8e(t){const e=(t==null?void 0:t.match(UM))??null;if(e==null)return null;const i=e[2],s=i.lastIndexOf("/");if(s===-1){const{path:o,extension:l}=lW(i);return{prefix:null,filename:o,extension:l}}const{path:n,extension:r}=lW(i.slice(s+1));return{prefix:i.slice(0,s),filename:n,extension:r}}function yhe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?j$(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function DO(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,s=Oq();return Vl(s,`${s.scheme}://${i}`)?j$(t,e.portalHostname,i):j$(t,i,e.portalHostname)}function $V(t){if(!t)return t||null;let e=t;return e&&Li&&!Li.findCredential(e)&&(e=N9(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function vhe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Li&&!Li.findCredential(e)&&(e=N9(e)),e}var mE;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(mE||(mE={}));const Ydt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return mE},ensureMainOnlineDomain:yhe,fromCDNUrl:vhe,fromJSON:mx,itemIdFromResourceUrl:U8e,prefixAndFilenameFromResourceUrl:Y8e,read:NV,toCDNUrl:$V,toJSON:$C,write:lv},Symbol.toStringTag,{value:"Module"}));async function _he(t,e){const{WhereClause:i}=await nt(()=>import("./WhereClause-glDmdDFW.js").then(s=>s.W),__vite__mapDeps([97,55]),import.meta.url);return i.create(t,{fieldsIndex:e})}function bhe(t,e){return t==="1=1"?e??t:e==="1=1"?t??e:t!=null&&t!==""?e!=null&&e!==""?`(${t}) AND (${e})`:t:e}function X8e(t){return typeof t=="number"}function YM(t){return typeof t=="string"||t instanceof String}const W8e=pf,kO={date:null,time:null,timeZoneOffset:null},Xdt=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]);var Gy;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(Gy||(Gy={}));const Z8e=[Gy.HMS_MS,Gy.HMS,Gy.HM,"TT"],OC="yyyy-MM-dd",K8e=Gy.HMS,J8e="latn",Q8e=t=>"valueAsDate"in t;function cv(t){return{locale:kc(),numberingSystem:J8e,zone:t??W8e}}function xhe(t,e){return t===null?null:hi.fromMillis(t,cv(e))}function eNe(t,e){if(t==null||!YM(t)||t===""){if(e){const s=hi.local({zone:e});return{date:null,time:null,timeZoneOffset:s.isValid?s.offset.toString():null}}return kO}const i=hi.fromISO(t,{setZone:!0});return{date:i.toFormat(OC,cv()),time:i.toFormat(Gy.HMS_MS,cv()),timeZoneOffset:i.offset.toString()}}function Wdt(t,e){if(t==null||!X8e(t)||isNaN(t))return kO;const i=xhe(t,e);return i?{date:i.toFormat(OC,cv(e)),time:i.toFormat(K8e,cv(e))}:kO}function Zdt(t){switch(t.type){case"date":default:return s4("short-date-short-time");case"date-only":return s4("short-date");case"time-only":return s4("short-time");case"timestamp-offset":return{...s4("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function Kdt(t,e,i){if(!t||e==null)return null;switch(t.type){case"date":return Sg(e,i);case"date-only":return tAe(e,i);case"time-only":return iAe(e,i);case"timestamp-offset":return sAe(e,i);default:return null}}function Jdt(t){const{dateComponent:e,defaultTimeZone:i,timeComponent:s,timeZoneComponent:n,oldValue:r}=t;if(!(e!=null&&e.value))return null;const{year:o,month:l,day:u}=hi.fromFormat(e.value,OC),{hour:f,minute:y,second:_,millisecond:x}=NO(s,pf)??hi.now(),S=eNe(r,i),P=n!=null&&n.value?parseInt(n.value,10):S.timeZoneOffset!=null?parseInt(S.timeZoneOffset,10):new Date().getTimezoneOffset(),A=Uo.instance(P),k=hi.fromObject({year:o,month:l,day:u,hour:f,minute:y,second:_,millisecond:x},{zone:A});return k.isValid?k.toISO({includeOffset:!0}):null}function Qdt(t){const{dateComponent:e,timeComponent:i,timeZone:s,max:n,min:r,oldValue:o}=t,l=NO(e,s);let u=!!t.applyRange;if(!l)return null;let f=null;if((i==null?void 0:i.value)!=null){const _=NO(i,s),x=Date.now(),S=n!=null&&n<x?n:x,P=hi.fromMillis(S,cv(s)),A=l||P,{year:k,month:$,day:F}=A,{hour:G,minute:V,second:B,millisecond:W}=_||P;f=A.set({year:k,month:$,day:F,hour:G,minute:V,second:B,millisecond:W})}else{const _=xhe(VZ({value:o??Date.now(),max:n,min:r}),s),{year:x,month:S,day:P}=l,{hour:A,minute:k,second:$,millisecond:F}=_;u=!0,f=l.set({year:x,month:S,day:P,hour:A,minute:k,second:$,millisecond:F})}if(!f.isValid)return null;const y=f.toMillis();return u?VZ({value:y,max:n,min:r}):y}function NO(t,e){if((t==null?void 0:t.value)==null||Array.isArray(t.value))return null;let i=null;return i=Q8e(t)?hi.fromFormat(t.value,OC,cv(e)):Kb(t.value),i!=null&&i.isValid?i:null}function qZ(t){const{max:e,min:i,value:s}=t;return!isNaN(s)&&!(e!=null&&s>e)&&!(i!=null&&s<i)}function VZ(t){const{max:e,min:i,value:s}=t;return e!=null&&i!=null?Xu(s,i,e):e!=null&&s>e?e:i!=null&&s<i?i:s}function tNe(t){if(!t)return"";const e=t.split(".").at(0);if(!e||e.length<1)throw new rt("invalid time-only field",`Cannot parse valid time-only field value from ${t}`);const i=e.split(":"),s=new Array(3);for(let n=0;n<3;n++){const r=i.at(n)??"";s[n]=r.padStart(2,"0")}return s.join(":")}function eft(t,e){switch(e){case"date":return t.getTime();case"date-only":return t.toISODate();case"time-only":return tNe(t.toISOTime(!0,!1));case"timestamp-offset":return t.toISOString(!1);default:return null}}function tft(t){return!!t&&typeof t=="object"&&"getTime"in t&&"toISOString"in t&&"timeZone"in t}function IS(t){if(!t||!YM(t))return null;const e=hi.fromFormat(t,OC);return e.isValid?e:null}function Kb(t){return t&&YM(t)?GPe(Z8e,e=>{const i=hi.fromFormat(t,e);return i.isValid?i:null})??null:null}function MS(t){if(!t||!YM(t))return null;const e=hi.fromISO(t);return e.isValid?e:null}function ift(t){const{type:e,range:i,value:s}=t;if(s==null||!i||s===i.min||s===i.max)return!0;if(e==="date")return qZ({value:s,min:i.min,max:i.max});const{rawMax:n,rawMin:r}=i;let o=null,l=null,u=null;switch(e){case"date-only":o=IS(n),l=IS(r),u=IS(s);break;case"time-only":o=Kb(n),l=Kb(r),u=Kb(s);break;case"timestamp-offset":o=MS(n),l=MS(r),u=MS(s)}return!u||qZ({value:u.valueOf(),min:l==null?void 0:l.valueOf(),max:o==null?void 0:o.valueOf()})}var T2;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(T2||(T2={}));const iNe=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function sNe(t){return t!=null&&iNe.has(t.type)}function whe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function She(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Ehe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function nNe(t,e,i){const s=i??(t==null?void 0:t.domain);if(!s)return null;switch(s.type){case"range":{const{min:n,max:r}=Che(t,i);if(n!=null&&+e<n||r!=null&&+e>r)return T2.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(s.codedValues==null||s.codedValues.every(n=>n==null||n.code!==e))return T2.INVALID_CODED_VALUE}return null}function Che(t,e){const i=e??(t==null?void 0:t.domain);if(!i||i.type!=="range")return;const s="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,r=sNe(t);return whe(t)||Ehe(t)||She(t)?{...rNe(t,n,s),isInteger:r}:{min:s!=null&&typeof s=="number"?s:null,max:n!=null&&typeof n=="number"?n:null,rawMin:s,rawMax:n,isInteger:r}}function rNe(t,e,i){var s,n,r,o,l,u;return whe(t)?{min:(s=IS(i))==null?void 0:s.toMillis(),max:(n=IS(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:Ehe(t)?{min:(r=Kb(i))==null?void 0:r.toMillis(),max:(o=Kb(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:She(t)?{min:(l=MS(i))==null?void 0:l.toMillis(),max:(u=MS(e))==null?void 0:u.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}const oNe=()=>zt.getLogger("esri.support.arcadeOnDemand");let x8;function uv(){return x8||(x8=(async()=>{const t=await nt(()=>import("./arcadeUtils-CvY928Q3.js").then(e=>e.i),__vite__mapDeps([98,99,55,56,100,101,102,103,104,105]),import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),x8}const aNe=(t,e,i)=>Phe.create(t,e,i,null,["$feature","$view"],[]),lNe=(t,e,i,s)=>Phe.create(t,e,i,s,["$feature","$view"],[]);let Phe=class The{constructor(e,i,s,n,r,o,l){this.services=null,this.script=e,this.evaluate=n;const u=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=u??[],this._syntaxTree=s,this._arcade=i,this._arcadeFeature=r,this._spatialReference=l,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,s,n,r,o){const{arcade:l,Feature:u,Dictionary:f}=await uv(),y=i instanceof qi?i:qi.fromJSON(i);let _;try{_=l.parseScript(e,o)}catch(re){return oNe().error(new rt("arcade-bad-expression","Failed to parse arcade script",{script:e,error:re})),null}const x=r.reduce((re,se)=>({...re,[se]:null}),{});let S=null;n!=null&&(S=new f(n),S.immutable=!0,x.$config=null);const P=l.scriptUsesGeometryEngine(_),A=P&&l.enableGeometrySupport(),k=l.scriptUsesFeatureSet(_)&&l.enableFeatureSetSupport(),$=l.scriptIsAsync(_),F=$&&l.enableAsyncSupport(),G={vars:x,spatialReference:y,useAsync:!!F};await Promise.all([A,k,F]);const V=new Set;await l.loadDependentModules(V,_,null,$,P);const B=new f;B.immutable=!1,B.setField("scale",0);const W=l.compileScript(_,G),J=(re,se)=>{var pe;const oe=(pe=re.$view)==null?void 0:pe.timeZone;return"$view"in re&&re.$view&&(B.setField("scale",typeof re.$view=="object"&&"scale"in re.$view?re.$view.scale:void 0),re.$view=B),S&&(re.$config=S),W({vars:re,spatialReference:y,services:se,timeZone:oe})};return new The(e,l,_,J,new u,s,y)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const cNe=/^([0-9_])/,uNe=/[^a-z0-9_\u0080-\uffff]+/gi;function hNe(t){return t==null?null:t.trim().replaceAll(uNe,"_").replace(cNe,"F$1")||null}const dNe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],fNe=["field","normalizationField"];function GZ(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(jZ(dNe,i,e),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)jZ(fNe,s,e)}}function jZ(t,e,i){if(t)for(const s of t){const n=zp(s,e),r=n&&typeof n!="function"&&i.get(n);r&&Ja(s,r.name,e)}}function Ihe(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const s=e.get(t.startField),n=e.get(t.endField);t.startField=(s==null?void 0:s.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const s=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(s==null?void 0:s.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const w8=new Set;function XM(t,e){return t&&e?(w8.clear(),hv(w8,t,e),Array.from(w8).sort()):[]}function hv(t,e,i){var s;if(i)if((s=e==null?void 0:e.fields)!=null&&s.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)bl(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function bl(t,e,i){if(typeof i=="string")if(e){const s=e.get(i);s&&t.add(s.name)}else t.add(i)}function sft(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function nft(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const s=XM(t,e);return s.length/t.fields.length>=i?["*"]:s}async function Qa(t,e,i){var r;if(!i)return;const{arcadeUtils:s}=await uv(),n=s.extractFieldNames(i,(r=e==null?void 0:e.fields)==null?void 0:r.map(o=>o.name));for(const o of n)bl(t,e,o)}async function Mhe(t,e,i){if(i&&i!=="1=1"){const s=await _he(i,e);if(!s.isStandardized)throw new rt("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});hv(t,e,s.fieldNames)}}function Ahe({displayField:t,fields:e}){return t||(e!=null&&e.length?S8(e,"name-or-title")||S8(e,"unique-identifier")||S8(e,"type-or-category")||pNe(e):null)}function pNe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function S8(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function rft(t,e){var s;if(!e)return;const i=(s=e.elevationInfo)==null?void 0:s.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function mNe(t,e,i){i.onStatisticExpression?Qa(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function oft(t,e,i){if(!e||!i||!("fields"in i))return;const s=[],n=i.popupTemplate;s.push(gNe(t,e,n)),i.fields&&s.push(...i.fields.map(async r=>mNe(t,e.fieldsIndex,r))),await Promise.all(s)}async function gNe(t,e,i){const s=[];i!=null&&i.expressionInfos&&s.push(...i.expressionInfos.map(r=>Qa(t,e.fieldsIndex,r.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const r of n)r.type==="expression"&&r.expressionInfo&&s.push(Qa(t,e.fieldsIndex,r.expressionInfo.expression));await Promise.all(s)}async function aft(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&hv(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&hv(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await Mhe(t,e.fieldsIndex,i.where))}async function lft(t,e,i){e&&i&&await Promise.all(i.map(s=>yNe(t,e,s)))}async function yNe(t,e,i){e&&i&&(i.valueExpression?await Qa(t,e.fieldsIndex,i.valueExpression):i.field&&bl(t,e.fieldsIndex,i.field))}function cft(t){return t?XM(t.fieldsIndex,Dhe(t)):[]}function vNe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?XM(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const _Ne=new Set(["oid","global-id","guid"]),bNe=new Set(["oid","global-id"]),xNe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function wNe(t){const e=new Set;khe(t).forEach(s=>e.add(s)),vNe(t).forEach(s=>e.add(s.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>e.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>e.add(s.toLowerCase()))),Array.from(e)}function Dhe(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:s,editDateField:n,editorField:r}=e;return[i,s,n,r].filter(Boolean)}function khe(t){return Dhe(t).map(e=>e.toLowerCase())}function SNe(t,e){var i;return t.editable&&!_Ne.has(t.type)&&!khe(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function ENe(t,e){var s;const i=((s=t.name)==null?void 0:s.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||wNe(e).includes(i)||bNe.has(t.type)||xNe.some(n=>n.test(i)))}async function uft(t,e){const{labelingInfo:i,fieldsIndex:s}=e;i!=null&&i.length&&await Promise.all(i.map(n=>CNe(t,s,n)))}async function CNe(t,e,i){if(!i)return;const s=i.getLabelExpression(),n=i.where;if(s.type==="arcade")await Qa(t,e,s.expression);else{const r=s.expression.match(/{[^}]*}/g);r&&r.forEach(o=>{bl(t,e,o.slice(1,-1))})}await Mhe(t,e,n)}function PNe(t){const e=t.defaultValue;return e!==void 0&&Ohe(t,e)?e:t.nullable?null:void 0}function hft(t){const e=typeof t=="string"?{type:t}:t;return Lhe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Nhe(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function TNe(t){return t===null||Nhe(t)}function INe(t){return t===null||Number.isInteger(t)}function $he(t){return t!=null&&typeof t=="string"}function MNe(t){return t===null||$he(t)}function ANe(){return!0}function Ohe(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?INe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?TNe:Nhe;break;case"string":case"esriFieldTypeString":i=t.nullable?MNe:$he;break;default:i=ANe}return arguments.length===1?i:i(e)}const DNe=["integer","small-integer","big-integer"],kNe=["single","double"],NNe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],$Ne=["esriFieldTypeSingle","esriFieldTypeDouble"],Rhe=new Set([...DNe,...NNe]),ONe=new Set([...kNe,...$Ne]),RNe=Uoe(Rhe,ONe);function LNe(t){return t!=null&&Rhe.has(t.type)}function OV(t){return t!=null&&RNe.has(t.type)}function Lhe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function FNe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function dft(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function fft(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function zNe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function BZ(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function HZ(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function pft(t,e){return qNe(t,e)===null}var r6,o6;function mft(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function qNe(t,e){return t==null||t.nullable&&e===null?null:OV(t)&&!VNe(t.type,Number(e))?r6.OUT_OF_RANGE:Ohe(t,e)?t.domain?nNe(t,e):null:o6.INVALID_TYPE}function VNe(t,e){const i=typeof t=="string"?RV(t):t;if(!i)return!1;const s=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=s&&e<=n:e>=s&&e<=n}function gft(t,e){return Che(t,e)||(OV(t)?RV(t.type):void 0)}function RV(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return GNe;case"esriFieldTypeInteger":case"integer":return jNe;case"esriFieldTypeBigInteger":case"big-integer":return BNe;case"esriFieldTypeSingle":case"single":return HNe;case"esriFieldTypeDouble":case"double":return UNe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(r6||(r6={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(o6||(o6={}));const GNe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},jNe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},BNe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},HNe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},UNe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function yft(t,e,i){switch(t){case T2.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case T2.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case o6.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case r6.OUT_OF_RANGE:{const{min:s,max:n}=RV(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${s} to ${n}`}}}function vft(t,e){return!YNe(t,e,null)}function YNe(t,e,i){if(!(e!=null&&e.attributes)||!t)return!0;const s=new Set(Object.keys(e.attributes));let n=!1;for(const r of t)if(!s.has(r)&&(n=!0,i==null))break;return n}function XNe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}async function _ft(t,e){const i=new Set;return t!=null&&t.collectRequiredFields&&await t.collectRequiredFields(i,e),Array.from(i).sort()}function Fhe(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}var $O;let g3=$O=class extends wt{constructor(t){super(t)}async collectRequiredFields(t,e){return Qa(t,e,this.expression)}clone(){return new $O({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};I([N({type:String,json:{write:!0}})],g3.prototype,"expression",void 0),I([N({type:String,json:{write:!0}})],g3.prototype,"title",void 0),g3=$O=I([ke("esri.symbols.support.FeatureExpressionInfo")],g3);const UZ=g3,WM={unknown:1,inches:cn(1,"meters","inches"),feet:cn(1,"meters","feet"),"us-feet":cn(1,"meters","us-feet"),yards:cn(1,"meters","yards"),miles:cn(1,"meters","miles"),"nautical-miles":cn(1,"meters","nautical-miles"),millimeters:cn(1,"meters","millimeters"),centimeters:cn(1,"meters","centimeters"),decimeters:cn(1,"meters","decimeters"),meters:cn(1,"meters","meters"),kilometers:cn(1,"meters","kilometers"),"decimal-degrees":1/Zae(1,"meters",cr.radius)};function bft(t){return!!t&&WM[t]!=null}function WNe(t){return 1/(WM[t]||1)}function ZNe(){const t=Object.keys(WM);return gM(t,"decimal-degrees"),t.sort(),t}const KNe=ZNe();var OO;const l4=wa()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),YZ=new ps({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let np=OO=class extends wt{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,s){e[i]=t.write({},s),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new OO({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&Toe(this.featureExpressionInfo,t.featureExpressionInfo)}};I([N({type:UZ,json:{write:!0}})],np.prototype,"featureExpressionInfo",void 0),I([At("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],np.prototype,"readFeatureExpressionInfo",null),I([Ft("featureExpressionInfo",{featureExpressionInfo:{type:UZ},"featureExpression.value":{type:[0]}})],np.prototype,"writeFeatureExpressionInfo",null),I([N({type:l4.apiValues,nonNullable:!0,json:{type:l4.jsonValues,read:l4.read,write:{writer:l4.write,isRequired:!0}}})],np.prototype,"mode",null),I([N({type:Number,json:{write:!0}})],np.prototype,"offset",void 0),I([N({type:KNe,json:{type:String,read:YZ.read,write:YZ.write}})],np.prototype,"unit",null),np=OO=I([ke("esri.symbols.support.ElevationInfo")],np);const zhe=np;let W_=class extends wt{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};I([N({type:String,json:{write:!0}})],W_.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],W_.prototype,"label",void 0),I([N()],W_.prototype,"type",void 0),W_=I([ke("esri.tables.elements.AttributeTableElement")],W_);const I2=W_;var RO;let y3=RO=class extends I2{constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return new RO({description:this.description,displayType:this.displayType,label:this.label})}};I([N({type:["auto"],json:{write:!0}})],y3.prototype,"displayType",void 0),I([N({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],y3.prototype,"type",void 0),y3=RO=I([ke("esri.tables.elements.AttributeTableAttachmentElement")],y3);const XZ=y3;var LO;let v3=LO=class extends I2{constructor(t){super(t),this.fieldName=null,this.type="field"}clone(){return new LO({description:this.description,fieldName:this.fieldName,label:this.label})}};I([N({type:String,json:{write:!0}})],v3.prototype,"fieldName",void 0),I([N({type:String,json:{read:!1,write:!0}})],v3.prototype,"type",void 0),v3=LO=I([ke("esri.tables.elements.AttributeTableFieldElement")],v3);const WZ=v3;var FO;let _3=FO=class extends I2{constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return new FO({description:this.description,label:this.label,relationshipId:this.relationshipId})}};I([N({type:Number,json:{write:!0}})],_3.prototype,"relationshipId",void 0),I([N({type:["relationship"],json:{read:!1,write:!0}})],_3.prototype,"type",void 0),_3=FO=I([ke("esri.tables.elements.AttributeTableRelationshipElement")],_3);const ZZ=_3;function qhe(t){return{typesWithGroup:{base:I2,key:"type",typeMap:{attachment:XZ,field:WZ,group:t,relationship:ZZ}},typesWithoutGroup:{base:I2,key:"type",typeMap:{attachment:XZ,field:WZ,relationship:ZZ}}}}function Vhe(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>s[n.type].fromJSON(n))}function Ghe(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>n.toJSON())}function jhe(t,e,i=!0){return t?t.map(s=>Yu(i?e.typesWithGroup:e.typesWithoutGroup,s)):null}var zO;let Pp=zO=class extends I2{constructor(t){super(t),this.elements=null,this.type="group"}castElements(t){return jhe(t,E8,!1)}readElements(t,e){return Vhe(e.attributeTableElements,E8,!1)}writeElements(t,e){e.attributeTableElements=Ghe(t,E8,!1)}clone(){return new zO({description:this.description,elements:Ue(this.elements),label:this.label})}};I([N({json:{write:!0}})],Pp.prototype,"elements",void 0),I([Sn("elements")],Pp.prototype,"castElements",null),I([At("elements",["attributeTableElements"])],Pp.prototype,"readElements",null),I([Ft("elements")],Pp.prototype,"writeElements",null),I([N({type:String,json:{read:!1,write:!0}})],Pp.prototype,"type",void 0),Pp=zO=I([ke("esri.tables.elements.AttributeTableGroupElement")],Pp);const E8=qhe(Pp),JNe=Pp;var qO;const C8=qhe(JNe);let g0=qO=class extends wt{constructor(t){super(t),this.elements=null,this.orderByFields=null}castElements(t){return jhe(t,C8)}readElements(t,e){return Vhe(e.attributeTableElements,C8)}writeElements(t,e){e.attributeTableElements=Ghe(t,C8)}clone(){return new qO({elements:Ue(this.elements),orderByFields:this.orderByFields})}};I([N({json:{write:!0}})],g0.prototype,"elements",void 0),I([Sn("elements")],g0.prototype,"castElements",null),I([At("elements",["attributeTableElements"])],g0.prototype,"readElements",null),I([Ft("elements")],g0.prototype,"writeElements",null),I([N({type:[Object],json:{write:!0}})],g0.prototype,"orderByFields",void 0),g0=qO=I([ke("esri.tables.AttributeTableTemplate")],g0);const QNe=g0;function LV(t){const e=Mq(100*(1-t));return Math.max(0,Math.min(e,100))}function a6(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}const e$e={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Xo}}},FV={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},zV={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Xo}}},t$e={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:lv}}},i$e={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Xo}}},s$e={value:null,type:zhe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Xo}}};function wft(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Bhe={write:{enabled:!0,layerContainerTypes:Xo},read:!0},VO={type:Number,json:{origins:{"web-document":Bhe,"portal-item":{write:!0}}}},n$e={...VO,json:{...VO.json,origins:{"web-document":{...Bhe,write:{enabled:!0,layerContainerTypes:Xo,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var s;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(s=e.layerDefinition)!=null&&s.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?a6(e.layerDefinition.drawingInfo.transparency):void 0:a6(e.drawingInfo.transparency)}}}},Sft={type:ur,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=ur.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=qi.fromJSON(e.spatialReference)),i}}}},read:!1}},r$e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},o$e={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Xo}}},name:"layerDefinition.minScale",write:!0}},a$e={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Xo}}},name:"layerDefinition.maxScale",write:!0}},Hhe={json:{write:{ignoreOrigin:!0,layerContainerTypes:Xo},origins:{"web-map":{read:!1,write:!1}}}},l$e={type:QNe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}},Uhe=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,s,n){var r;return((r=n==null?void 0:n.portalItem)==null?void 0:r.type)==="Group Layer"?void 0:i}writeListMode(i,s,n,r){(r&&r.layerContainerType==="ground"||i&&$Te(this,n,{},r))&&(s[n]=i)}writeOperationalLayerType(i,s,n,r){i&&(r==null?void 0:r.layerContainerType)!=="tables"&&(s.layerType=i)}writeTitle(i,s){s.title=i??"Layer"}readTimeExtent(i){return i?Pg.fromArray(i):null}writeTimeExtent(i,s,n,r){i&&r.layerContainerType!=="tables"&&(i.isEmpty?r!=null&&r.messages&&r.messages.push(new rt("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[n]=i.toArray())}read(i,s){s&&(s.layer=this),DTe(this,i,n=>super.read(i,n),s)}write(i,s){var o,l;if(!this.persistenceEnabled&&!(s!=null&&s.ignorePersistenceEnabled))return null;if(s!=null&&s.origin){const u=`${s.origin}/${s.layerContainerType||"operational-layers"}`,f=B8e[u];let y=!!(f!=null&&f[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(y=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&u==="web-map/operational-layers"&&(y=!1),!y)return(o=s.messages)==null||o.push(new rt("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const n=super.write(i,{...s,layer:this}),r=!!s&&!!s.messages&&!!s.messages.filter(u=>u instanceof rt&&u.name==="web-document-write:property-required").length;return CM(n==null?void 0:n.url)?((l=s==null?void 0:s.messages)==null||l.push(new rt("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:n}beforeSave(){}};return I([N({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),I([At("id",["id"])],e.prototype,"readId",null),I([N(Hhe)],e.prototype,"listMode",void 0),I([Ft("listMode")],e.prototype,"writeListMode",null),I([N({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Xo}}}}})],e.prototype,"operationalLayerType",void 0),I([Ft("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),I([N(VO)],e.prototype,"opacity",void 0),I([N({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),I([N({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),I([Ft("title"),Ft(["web-scene"],"title")],e.prototype,"writeTitle",null),I([N({type:Pg,json:{origins:{"web-scene":{write:{layerContainerTypes:Xo}}}}})],e.prototype,"visibilityTimeExtent",void 0),I([At("visibilityTimeExtent")],e.prototype,"readTimeExtent",null),I([Ft(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[wn,EM]]}})],e.prototype,"writeTimeExtent",null),I([N({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Xo}}},name:"visibility",write:!0}})],e.prototype,"visible",void 0),e=I([ke("esri.layers.mixins.OperationalLayer")],e),e};function Eft(t){return p$e(t)||d$e(t)}function c$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function u$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function h$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-notes"&&"sublayers"in t}function Yhe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function Xhe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="link-chart"&&"layers"in t}function d$e(t){return(t==null?void 0:t.type)==="scene"}function f$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Cft(t){return(t==null?void 0:t.type)==="subtype-sublayer"}function p$e(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function Pft(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const Tft={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function GO(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function m$e(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function ZM(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function Ift(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t.source)==null?void 0:i.type)==="feature-layer"}function Mft(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function Whe(t,e){const i=Li==null?void 0:Li.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const s=t.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const n=`${t.slice(0,s)}/rest/info`,r=e!=null?e.signal:null,{data:o}=await Qs(n,{query:{f:"json"},responseType:"json",signal:r});return(o==null?void 0:o.owningSystemUrl)||null}function g$e(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Aft(t){return t!=null&&typeof t=="object"&&"isTable"in t&&!!t.isTable}function Dft(t){return g$e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function y$e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function kft(t){return!!y$e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Nft(t){return t?("subtypes"in t?t.subtypes:f$e(t.parent)?t.parent.subtypes:[])??[]:[]}let rp=class extends Ei{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:KZ(e.path,e.portalItem)}:e}set path(e){e!=null&&Dc(e)?zt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return KZ(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const s=this.cdnUrl;if(s==null)throw new rt("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:s}=await nt(()=>import("./resourceUtils-BqL-o1m1.js"),[],import.meta.url);return await s(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function KZ(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Dc(t)&&(t=Fq(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}I([N()],rp.prototype,"portalItem",void 0),I([N({type:String,value:null})],rp.prototype,"path",null),I([Sn("path")],rp.prototype,"_castPath",null),I([N({type:String,readOnly:!0})],rp.prototype,"url",null),I([N({type:String,readOnly:!0})],rp.prototype,"cdnUrl",null),I([N({type:String,readOnly:!0})],rp.prototype,"itemRelativeUrl",null),rp=I([ke("esri.portal.PortalItemResource")],rp);const v$e=rp;let b3=class extends Ei{constructor(e){super(e),this.created=null,this.rating=null}};I([N()],b3.prototype,"created",void 0),I([N()],b3.prototype,"rating",void 0),b3=I([ke("esri.portal.PortalRating")],b3);const P8=b3;var F1;const _$e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),b$e=new Set(["KML","GeoJson","CSV"]);let Di=F1=class extends Nq(SC){static from(t){return xC(F1,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new ur(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var S;const t=((S=this.type)==null?void 0:S.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",s="16";let n,r=!1,o=!1,l=!1,u=!1,f=!1,y=!1,_=!1,x=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(r=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),l=e.includes("Route Layer"),u=e.includes("Markup"),f=e.includes("Spatiotemporal"),y=e.includes("UtilityNetwork"),n=f&&o?"spatiotemporaltable":o?"table":l?"routelayer":u?"markup":f?"spatiotemporal":y?"utilitynetwork":r?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(f=e.includes("Spatiotemporal"),_=e.includes("Relational"),n=f||_?"mapimages":r||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(x=e.includes("Map"),n=x?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",n?EC(i+n+s+".png"):null}get isLayer(){return this.type!=null&&_$e.has(this.type)}get itemCdnUrl(){return $V(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,s,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(s=this.portal)==null?void 0:s.user)==null?void 0:n.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Lc.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof P8&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new P8({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Ue(this.applicationProxies),avgRating:this.avgRating,categories:Ue(this.categories),classification:Ue(this.classification),created:Ue(this.created),culture:this.culture,description:this.description,extent:Ue(this.extent),groupCategories:Ue(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Ue(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Ue(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ue(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ue(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new F1({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const s=t[i];s&&(t[i]=JSON.stringify(s))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new P8(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},F1)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new rt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new rt("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:s,folder:n,tags:r,title:o}=t||{},l={method:"post",query:{copyPrivateResources:s==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!s,tags:r==null?void 0:r.join(","),title:o}},{itemId:u}=await e.request(`${i}/copy`,l);return new F1({id:u,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,s={method:"post"};if(typeof e=="string")Av(e)?s.query={data:e}:s.query={url:ml(e)},i!=null&&(s.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),s.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new rt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await nt(()=>import("./resourceUtils-BqL-o1m1.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:s}=await nt(()=>import("./resourceUtils-BqL-o1m1.js"),[],import.meta.url);return t.portalItem=this,await s(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await nt(()=>import("./resourceUtils-BqL-o1m1.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new rt("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await nt(()=>import("./resourceUtils-BqL-o1m1.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new v$e({portalItem:this,path:t})}toJSON(){var i,s;const t=this.extent,e={accessInformation:this.accessInformation,categories:Ue(this.categories),classification:Ue(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(s=this.modified)==null?void 0:s.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ue(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ue(this.typeKeywords),url:this.url};return bq(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new F1({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};I([N({type:["private","shared","org","public"]})],Di.prototype,"access",void 0),I([N()],Di.prototype,"accessInformation",void 0),I([N({type:String})],Di.prototype,"apiKey",void 0),I([N({json:{read:{source:"appProxies"}}})],Di.prototype,"applicationProxies",void 0),I([N()],Di.prototype,"avgRating",void 0),I([N()],Di.prototype,"categories",void 0),I([N()],Di.prototype,"classification",void 0),I([N({type:Date})],Di.prototype,"created",void 0),I([N()],Di.prototype,"culture",void 0),I([N()],Di.prototype,"description",void 0),I([N({readOnly:!0})],Di.prototype,"displayName",null),I([N({type:ur})],Di.prototype,"extent",void 0),I([At("extent")],Di.prototype,"readExtent",null),I([N()],Di.prototype,"groupCategories",void 0),I([N({readOnly:!0})],Di.prototype,"iconUrl",null),I([N()],Di.prototype,"id",void 0),I([N({readOnly:!0})],Di.prototype,"isLayer",null),I([N({type:Boolean,readOnly:!0})],Di.prototype,"isOrgItem",void 0),I([N()],Di.prototype,"itemControl",void 0),I([N({readOnly:!0})],Di.prototype,"itemPageUrl",null),I([N({readOnly:!0})],Di.prototype,"itemUrl",null),I([N()],Di.prototype,"licenseInfo",void 0),I([N({type:Date})],Di.prototype,"modified",void 0),I([N()],Di.prototype,"name",void 0),I([N()],Di.prototype,"numComments",void 0),I([N()],Di.prototype,"numRatings",void 0),I([N()],Di.prototype,"numViews",void 0),I([N()],Di.prototype,"owner",void 0),I([N()],Di.prototype,"ownerFolder",void 0),I([N({type:Lc})],Di.prototype,"portal",void 0),I([N()],Di.prototype,"screenshots",void 0),I([N()],Di.prototype,"size",void 0),I([N()],Di.prototype,"snippet",void 0),I([N()],Di.prototype,"sourceJSON",void 0),I([N({type:String})],Di.prototype,"sourceUrl",void 0),I([N({type:String})],Di.prototype,"spatialReference",void 0),I([N()],Di.prototype,"tags",void 0),I([N()],Di.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Di.prototype,"thumbnailUrl",null),I([N()],Di.prototype,"title",void 0),I([N()],Di.prototype,"type",void 0),I([N()],Di.prototype,"typeKeywords",void 0),I([N({type:String,json:{read(t,e){var i;if(b$e.has(e.type)){const s=(i=this.portal)==null?void 0:i.restUrl;t||(t=s&&this.id?`${s}/content/items/${this.id}/data`:null)}return t}}})],Di.prototype,"url",void 0),I([N({readOnly:!0})],Di.prototype,"userItemUrl",null),Di=F1=I([ke("esri.portal.PortalItem")],Di);const AS=Di,Zhe=Object.freeze(Object.defineProperty({__proto__:null,default:AS},Symbol.toStringTag,{value:"Module"})),dl=Math.PI/180,x$e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,c0=cr.radius,dh=cr.eccentricitySquared,w$e={a1:c0*dh,a2:c0*dh*c0*dh,a3:c0*dh*dh/2,a4:c0*dh*c0*dh*2.5,a5:c0*dh+c0*dh*dh/2,a6:1-dh},S$e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:cr.radius,f:cr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:xg.radius,f:xg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:uf.radius,f:uf.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:uf.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var Qe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(Qe||(Qe={}));const E$e={[Qe.WGS84]:{[Qe.CGCS2000]:Hn,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:kS,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Jb,[Qe.PLATE_CARREE]:Qb,[Qe.WGS84]:Hn,[Qe.WGS84_ECEF]:i2},[Qe.CGCS2000]:{[Qe.CGCS2000]:Hn,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:kS,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Jb,[Qe.PLATE_CARREE]:Qb,[Qe.WGS84]:Hn,[Qe.WGS84_ECEF]:i2},[Qe.GCSMARS2000]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:Hn,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:eK,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.GCSMOON2000]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:Hn,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:QZ,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.WEB_MERCATOR]:{[Qe.CGCS2000]:DS,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:DS,[Qe.SPHERICAL_ECEF]:C$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Hn,[Qe.PLATE_CARREE]:I$e,[Qe.WGS84]:DS,[Qe.WGS84_ECEF]:P$e},[Qe.WGS84_ECEF]:{[Qe.CGCS2000]:s2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:s2,[Qe.SPHERICAL_ECEF]:L$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:F$e,[Qe.PLATE_CARREE]:M$e,[Qe.WGS84]:s2,[Qe.WGS84_ECEF]:Hn},[Qe.SPHERICAL_ECEF]:{[Qe.CGCS2000]:t2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:t2,[Qe.SPHERICAL_ECEF]:Hn,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:$$e,[Qe.PLATE_CARREE]:A$e,[Qe.WGS84]:t2,[Qe.WGS84_ECEF]:O$e},[Qe.SPHERICAL_MARS_PCPF]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:iK,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:iK,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:Hn,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.SPHERICAL_MOON_PCPF]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:tK,[Qe.LON_LAT]:tK,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:Hn,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.UNKNOWN]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:null,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:Hn,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.LON_LAT]:{[Qe.CGCS2000]:Hn,[Qe.GCSMARS2000]:Hn,[Qe.GCSMOON2000]:Hn,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:kS,[Qe.SPHERICAL_MARS_PCPF]:eK,[Qe.SPHERICAL_MOON_PCPF]:QZ,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Jb,[Qe.PLATE_CARREE]:Qb,[Qe.WGS84]:Hn,[Qe.WGS84_ECEF]:i2},[Qe.PLATE_CARREE]:{[Qe.CGCS2000]:e2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:e2,[Qe.SPHERICAL_ECEF]:D$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:k$e,[Qe.PLATE_CARREE]:Hn,[Qe.WGS84]:e2,[Qe.WGS84_ECEF]:N$e}};function Khe(t,e,i=Jhe()){return t==null||e==null?null:z$e(t,e,i).projector}function JZ(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Zp(t,1)),G9(t)?e.spatialReferenceId=Qe.SPHERICAL_ECEF:tv(t)?e.spatialReferenceId=Qe.WGS84:td(t)?e.spatialReferenceId=Qe.WEB_MERCATOR:GIe(t)?e.spatialReferenceId=Qe.PLATE_CARREE:t.wkt===UIe.wkt?e.spatialReferenceId=Qe.WGS84_ECEF:t.wkid===ev.CGCS2000?e.spatialReferenceId=Qe.CGCS2000:t.wkt===Yq.wkt?e.spatialReferenceId=Qe.SPHERICAL_MARS_PCPF:t.wkt===Xq.wkt?e.spatialReferenceId=Qe.SPHERICAL_MOON_PCPF:Gae(t)?e.spatialReferenceId=Qe.GCSMARS2000:jae(t)?e.spatialReferenceId=Qe.GCSMOON2000:e.spatialReferenceId=Qe.UNKNOWN):Qe.UNKNOWN}function Hn(t,e,i,s){t!==i&&(i[s++]=t[e++],i[s++]=t[e++],i[s]=t[e])}function DS(t,e,i,s){i[s]=A2*(t[e]/jy),i[s+1]=A2*(ede-2*Math.atan(Math.exp(-t[e+1]/jy))),i[s+2]=t[e+2]}function C$e(t,e,i,s){const n=t[e]/jy,r=ede-2*Math.atan(Math.exp(-t[e+1]/jy)),o=jy+t[e+2],l=Math.cos(r)*o;i[s]=Math.cos(n)*l,i[s+1]=Math.sin(n)*l,i[s+2]=Math.sin(r)*o}function P$e(t,e,i,s){DS(t,e,i,s),i2(i,s,i,s)}function T$e(t,e,i,s,n){const r=.4999999*KM,o=Xu(M2*t[e+1],-r,r),l=Math.sin(o);i[s++]=M2*t[e]*n.radius,i[s++]=n.halfSemiMajorAxis*Math.log((1+l)/(1-l)),i[s]=t[e+2]}function Jb(t,e,i,s){T$e(t,e,i,s,cr)}function Qb(t,e,i,s){i[s]=t[e]*sK,i[s+1]=t[e+1]*sK,i[s+2]=t[e+2]}function e2(t,e,i,s){i[s]=t[e]*nK,i[s+1]=t[e+1]*nK,i[s+2]=t[e+2]}function I$e(t,e,i,s){DS(t,e,i,s),Qb(i,s,i,s)}function M$e(t,e,i,s){s2(t,e,i,s),Qb(i,s,i,s)}function A$e(t,e,i,s){t2(t,e,i,s),Qb(i,s,i,s)}function D$e(t,e,i,s){e2(t,e,i,s),kS(i,s,i,s)}function k$e(t,e,i,s){e2(t,e,i,s),Jb(i,s,i,s)}function N$e(t,e,i,s){e2(t,e,i,s),i2(i,s,i,s)}function qV(t,e,i,s,n){const r=n+t[e+2],o=M2*t[e+1],l=M2*t[e],u=Math.cos(o)*r;i[s]=Math.cos(l)*u,i[s+1]=Math.sin(l)*u,i[s+2]=Math.sin(o)*r}function QZ(t,e,i,s){qV(t,e,i,s,xg.radius)}function eK(t,e,i,s){qV(t,e,i,s,uf.radius)}function kS(t,e,i,s){qV(t,e,i,s,cr.radius)}function VV(t,e,i,s,n){const r=t[e],o=t[e+1],l=t[e+2],u=Math.sqrt(r*r+o*o+l*l),f=wV(l/(u===0?1:u)),y=Math.atan2(o,r);i[s++]=A2*y,i[s++]=A2*f,i[s]=u-n}function tK(t,e,i,s){VV(t,e,i,s,xg.radius)}function iK(t,e,i,s){VV(t,e,i,s,uf.radius)}function t2(t,e,i,s){VV(t,e,i,s,cr.radius)}function $$e(t,e,i,s){t2(t,e,i,s),Jb(i,s,i,s)}function O$e(t,e,i,s){t2(t,e,i,s),i2(i,s,i,s)}function R$e(t,e,i,s,n){const r=M2*t[e],o=M2*t[e+1],l=t[e+2],u=Math.sin(o),f=Math.cos(o),y=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);i[s++]=(y+l)*f*Math.cos(r),i[s++]=(y+l)*f*Math.sin(r),i[s++]=(y*(1-n.eccentricitySquared)+l)*u}function i2(t,e,i,s){R$e(t,e,i,s,cr)}function s2(t,e,i,s){const n=w$e,r=t[e],o=t[e+1],l=t[e+2];let u,f,y,_,x,S,P,A,k,$,F,G,V,B,W,J,re,se,oe,pe,ce;u=Math.abs(l),f=r*r+o*o,y=Math.sqrt(f),_=f+l*l,x=Math.sqrt(_),pe=Math.atan2(o,r),S=l*l/_,P=f/_,B=n.a2/x,W=n.a3-n.a4/x,P>.3?(A=u/x*(1+P*(n.a1+B+S*W)/x),oe=Math.asin(A),$=A*A,k=Math.sqrt(1-$)):(k=y/x*(1-S*(n.a5-B-P*W)/x),oe=Math.acos(k),$=1-k*k,A=Math.sqrt($)),F=1-cr.eccentricitySquared*$,G=cr.radius/Math.sqrt(F),V=n.a6*G,B=y-G*k,W=u-V*A,re=k*B+A*W,J=k*W-A*B,se=J/(V/F+re),oe+=se,ce=re+J*se/2,l<0&&(oe=-oe),i[s++]=A2*pe,i[s++]=A2*oe,i[s]=ce}function L$e(t,e,i,s){s2(t,e,i,s),kS(i,s,i,s)}function F$e(t,e,i,s){s2(t,e,i,s),Jb(i,s,i,s)}function z$e(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const s=JZ(t,i.source),n=JZ(e,i.dest);return s===Qe.UNKNOWN&&n===Qe.UNKNOWN?Jo(t,e)?i.projector=Hn:i.projector=null:i.projector=E$e[s][n],i}function Jhe(){return{source:{spatialReference:null,spatialReferenceId:Qe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Qe.UNKNOWN,metersPerUnit:1},projector:Hn}}const Rft={spatialReference:null,spatialReferenceId:Qe.UNKNOWN},Lft={spatialReference:null,spatialReferenceId:Qe.UNKNOWN},Qhe=Jhe(),M2=mue(1),A2=DDe(1),KM=Math.PI,ede=.5*KM,jy=cr.radius,sK=jy*KM/180,nK=180/(jy*KM);function gx(t,e,i,s,n,r,o=Math.floor(t.length/3)){const l=Khe(e,n,Qhe);if(l==null)return!1;if(l===Hn){if(t===s&&i===r)return!0;const f=i+3*o;for(let y=i,_=r;y<f;y++,_++)s[_]=t[y];return!0}const u=i+3*o;for(let f=i,y=r;f<u;f+=3,y+=3)l(t,f,s,y);return!0}const Fft=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:gx},Symbol.toStringTag,{value:"Module"}));function rK(t,e,i,s,n,r){return c4[0]=t,c4[1]=e,c4[2]=i,gx(c4,s,0,n,r,0)}const c4=Nt();let u4=0,T8=class jO{static fromGE(e){const i=new jO;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=u4++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=u4++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=u4++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=u4++}getInverse(){const e=new jO;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},l6=class x3{static cacheKey(e,i){var s,n,r,o,l,u;return[((s=e.wkid)==null?void 0:s.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((r=e.wkt2)==null?void 0:r.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((l=i.wkt)==null?void 0:l.toString())??"",((u=i.wkt2)==null?void 0:u.toString())??""].join()}static fromGE(e){const i=new x3;let s="";for(const n of e.steps){const r=T8.fromGE(n);i.steps.push(r),s+=r.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof T8?this.steps.push(i):this.steps.push(new T8({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new x3;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,s){this._cachedProjection[x3.cacheKey(e,i)]=s}getCachedGeTransformation(e,i){let s="";for(const r of this.steps)s+=r.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const n=this._cachedProjection[x3.cacheKey(e,i)];return n===void 0?null:n}};function tde(t,e,i){if(e==null||i==null||i.vcsWkid||Jo(e,i)||wg(e)||wg(i))return null;const s=j9(e)/j9(i);if(s===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>q$e(n,s);case"polyline":case"esriGeometryPolyline":return n=>G$e(n,s);case"polygon":case"esriGeometryPolygon":return n=>V$e(n,s);case"multipoint":case"esriGeometryMultipoint":return n=>j$e(n,s);case"extent":case"esriGeometryEnvelope":return n=>B$e(n,s);default:return null}}function q$e(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function V$e(t,e){if(t)for(const i of t.rings)for(const s of i)s.length>2&&(s[2]*=e)}function G$e(t,e){if(t)for(const i of t.paths)for(const s of i)s.length>2&&(s[2]*=e)}function j$e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function B$e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Xh=null,Tg=null,NS=null,GT={};const GV=new IC;function yx(){return!!Xh&&Bq()}function ide(){return!!yx()||(mi(GV),D2(),!1)}function H$e(t,e){return!t||!e||em(t,e)||ide()}function U$e(t,e){return!em(t,e)&&!yx()}function D2(t){return NS==null&&(NS=Promise.all([Hq(),nt(()=>Promise.resolve().then(()=>$Xe),void 0,import.meta.url).then(e=>e.g),nt(()=>Promise.resolve().then(()=>VXe),void 0,import.meta.url)])),NS.then(([,e,{hydratedAdapter:i}])=>{Ql(t),Tg=i,Xh=e.default,Xh._enableProjection(FIe),GV.notify()})}function gf(t,e,i=null,s=null){return Array.isArray(t)?t.length===0?[]:BO(Tg,t,t[0].spatialReference,e,i,s):BO(Tg,[t],t.spatialReference,e,i,s)[0]}function BO(t,e,i,s,n=null,r=null){if(i==null||s==null)return e;if(em(i,s,n))return e.map(o=>jT(o,i,s));if(n==null&&G9(i))return e.map(o=>jT(o,i,qi.WGS84)).map(o=>k2(o,s));if(n==null&&G9(s))return e.map(o=>k2(o,qi.WGS84)).map(o=>jT(o,qi.WGS84,s));if(n==null){const o=l6.cacheKey(i,s);GT[o]!==void 0?n=GT[o]:((n=nde(i,s,void 0))==null&&(n=new l6),GT[o]=n)}if(Xh==null||t==null)throw new JM;return r!=null?Xh._project(t,e,i,s,n,r):Xh._project(t,e,i,s,n)}function Y$e(t,e){const i=sde([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function sde(t,e){if(!yx()){for(const i of t)if(i!=null&&!Jo(i.spatialReference,e)&&Ou(i.spatialReference)&&Ou(e)&&!em(i.spatialReference,e))return mi(GV),{pending:D2(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Jo(i.spatialReference,e)?i:Ou(i.spatialReference)&&Ou(e)?k2(i,e):null)}}function nde(t,e,i=null){if(t==null||e==null)return null;if(Xh==null||Tg==null)throw new JM;const s=Xh._getTransformation(Tg,t,e,i,i==null?void 0:i.spatialReference);return s!==null?l6.fromGE(s):null}function X$e(t,e,i=null){if(Xh==null||Tg==null)throw new JM;const s=Xh._getTransformationBySuitability(Tg,t,e,i,i==null?void 0:i.spatialReference);if(s!==null){const n=[];for(const r of s)n.push(l6.fromGE(r));return n}return[]}let JM=class extends rt{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function W$e(){Xh=null,Tg=null,NS=null,GT={}}const Z$e={get loadPromise(){return NS}};function k2(t,e){try{const i=gf(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const s=tde(i.type,t.spatialReference,e);return s!=null&&s(i),i}catch(i){if(!(i instanceof JM))throw i;return null}}async function K$e(t,e,i){const s=t.spatialReference;return s!=null&&e!=null&&await RC(s,e,null,i),k2(t,e)}function em(t,e,i){return!i&&(!!Jo(t,e)||Ou(t)&&Ou(e)&&!!Khe(t,e,Qhe))}function J$e(t,e){if(Jo(t,e))return!0;if(!Ou(t)||!Ou(e))return!1;const i=tv(t)||td(t)||gW(t),s=tv(e)||td(e)||gW(e);return i&&s}async function RC(t,e,i,s){if(yx())return XX(s);if(Array.isArray(t)){for(const{source:n,dest:r,geographicTransformation:o}of t)if(n&&r&&!em(n,r,o))return D2(s)}else if(t&&e&&!em(t,e,i))return D2(s);return XX(s)}function jT(t,e,i){return t?"x"in t?rde(t,e,new Yi,i,0):"xmin"in t?cde(t,e,new ur,i,0):"rings"in t?lde(t,e,new Za,i,0):"paths"in t?ade(t,e,new If,i,0):"points"in t?ode(t,e,new $v,i,0):null:null}function Q$e(t,e,i=e.spatialReference,s=0){return i!=null&&t.spatialReference!=null&&rde(t,t.spatialReference,e,i,s)!=null}function rde(t,e,i,s,n){Ba[0]=t.x,Ba[1]=t.y;const r=t.z;return Ba[2]=r!==void 0?r:n,gx(Ba,e,0,Ba,s,0)?(i.x=Ba[0],i.y=Ba[1],i.spatialReference=s,r!==void 0||wg(s)?(i.z=Ba[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function eOe(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&ode(t,t.spatialReference,e,i,s)!=null}function ode(t,e,i,s,n){const{points:r,hasZ:o,hasM:l}=t,u=[],f=r.length,y=[];for(const x of r)y.push(x[0],x[1],o?x[2]:n);if(!gx(y,e,0,y,s,0,f))return null;const _=o||wg(s);for(let x=0;x<f;++x){const S=3*x,P=y[S],A=y[S+1];_&&l?u.push([P,A,y[S+2],r[x][3]]):_?u.push([P,A,y[S+2]]):l?u.push([P,A,r[x][2]]):u.push([P,A])}return i.points=u,i.spatialReference=s,i.hasZ=o,i.hasM=l,i}function tOe(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&ade(t,t.spatialReference,e,i,s)!=null}function ade(t,e,i,s,n){const{paths:r,hasZ:o,hasM:l}=t,u=[];if(!ude(r,o??!1,l??!1,e,u,s,n))return null;const f=o||wg(s);return i.paths=u,i.spatialReference=s,i.hasZ=f,i.hasM=l,i}function iOe(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&lde(t,t.spatialReference,e,i,s)!=null}function lde(t,e,i,s,n){const{rings:r,hasZ:o,hasM:l}=t,u=[];if(!ude(r,o??!1,l??!1,e,u,s,n))return null;const f=o||wg(s);return i.rings=u,i.spatialReference=s,i.hasZ=f,i.hasM=l,i}function sOe(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&cde(t,t.spatialReference,e,i,s)!=null}function cde(t,e,i,s,n){const{xmin:r,ymin:o,xmax:l,ymax:u,hasZ:f,hasM:y}=t,_=f?t.zmin:n;if(!rK(r,o,_,e,Ba,s))return null;const x=f||wg(s);i.xmin=Ba[0],i.ymin=Ba[1],x&&(i.zmin=Ba[2]);const S=f?t.zmax:n;return rK(l,u,S,e,Ba,s)?(i.xmax=Ba[0],i.ymax=Ba[1],x&&(i.zmax=Ba[2]),y&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=s,i):null}function ude(t,e,i,s,n,r,o=0){const l=new Array;for(const y of t)for(const _ of y)l.push(_[0],_[1],e?_[2]:o);if(!gx(l,s,0,l,r,0))return!1;let u=0;n.length=0;const f=e||wg(r);for(const y of t){const _=new Array;for(const x of y)f&&i?_.push([l[u++],l[u++],l[u++],x[3]]):f?_.push([l[u++],l[u++],l[u++]]):i?(_.push([l[u++],l[u++],x[2]]),u++):(_.push([l[u++],l[u++]]),u++);n.push(_)}return!0}const Ba=Nt(),qft=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:em,getTransformation:nde,getTransformations:X$e,initializeProjection:RC,isEqualBaseGCS:J$e,isLoaded:yx,isLoadedOrLoad:ide,isLoadedOrLoadFor:H$e,load:D2,project:gf,projectExtent:sOe,projectMany:BO,projectMultipoint:eOe,projectOrLoad:Y$e,projectOrLoadMany:sde,projectPoint:Q$e,projectPolygon:iOe,projectPolyline:tOe,projectWithZConversion:K$e,projectWithoutEngine:jT,requiresLoad:U$e,test:Z$e,tryProjectWithZConversion:k2,unload:W$e},Symbol.toStringTag,{value:"Module"}));async function nOe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Ab(t);const i=qi.WGS84;return await RC(e,i),gf(t,i)}function rOe(t,e){if(!hde(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function hde(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function Vft(t){return hde(t,aOe.HOSTED_SERVICE)}function oOe(t,e){const i=t.typeKeywords;if(i){const s=i.indexOf(e);s>-1&&i.splice(s,1)}}function Gft(t,e,i){i?rOe(t,e):oOe(t,e)}async function jft(t){const e=t.clone().normalize();let i;if(e.length>1)for(const s of e)i?s.width>i.width&&(i=s):i=s;else i=e[0];return nOe(i)}const aOe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function oK(t){var u;const{portal:e,isOrgItem:i,itemControl:s}=t,n=(u=e.user)==null?void 0:u.privileges;let r=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const l=s==="update"||s==="admin";return l?o=r=!0:o&&(r=!0),{features:{edit:r,fullEdit:o},content:{updateItem:l}}}const dde=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=no(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,n){if(s.itemId)return new AS({id:s.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,s){i!=null&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:r}=await nt(()=>import("./layersLoader-_9IPAxSk.js"),__vite__mapDeps([106,95,93,94,107,32]),import.meta.url);return Ql(s),await r({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},s)}catch(r){throw cd(r)||zt.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${r}`),r}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(Oh(s),!0)))}async setUserPrivileges(i,s){if(!Gs.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:n,fullEdit:r},content:{updateItem:o}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",o)}catch(n){Oh(n)}}async _fetchUserPrivileges(i,s){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(s);const r=i===n.id;if(r&&n.portal.user)return oK(n);let o,l;if(r)o=n.portal.url;else try{o=await Whe(this.url,s)}catch(_){Oh(_)}if(!o||!KTe(o,n.portal.url))return this._fetchFallbackUserPrivileges(s);try{const _=s!=null?s.signal:null;l=await(Li==null?void 0:Li.getCredential(`${o}/sharing`,{prompt:!1,signal:_}))}catch(_){Oh(_)}const u=!0,f=!1,y=!1;if(!l)return{features:{edit:u,fullEdit:f},content:{updateItem:y}};try{if(r?await n.reload():(n=new AS({id:i,portal:{url:o}}),await n.load(s)),n.portal.user)return oK(n)}catch(_){Oh(_)}return{features:{edit:u,fullEdit:f},content:{updateItem:y}}}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(n){Oh(n)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?Li==null?void 0:Li.findCredential(this.url):null;if(!s)return!0;const n=h4.credential===s?h4.user:await this._fetchEditingUser(i);return h4.credential=s,h4.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var y,_;const s=(_=(y=this.portalItem)==null?void 0:y.portal)==null?void 0:_.user;if(s)return s;const n=Li==null?void 0:Li.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const r=`${n.owningSystemUrl}/sharing/rest`,o=Lc.getDefault();if(o&&o.loaded&&Vu(o.restUrl)===Vu(r))return o.user;const l=`${r}/community/self`,u=i!=null?i.signal:null,f=await hV(Qs(l,{authMode:"no-prompt",query:{f:"json"},signal:u}));return f.ok?Jq.fromJSON(f.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){var o;const n=s==null?void 0:s.portal,r=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Lc.getDefault());return n&&r&&!Cae(r.restUrl,n.restUrl)?(s.messages&&s.messages.push(new rt("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return I([N({type:AS})],e.prototype,"portalItem",null),I([At("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),I([Ft("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),I([N({clonable:!1})],e.prototype,"resourceReferences",void 0),I([N({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),I([N({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),I([N({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=I([ke("esri.layers.mixins.PortalLayer")],e),e},h4={credential:null,user:null},jV=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&lOe(i,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return I([N({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),I([N({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),I([N({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=I([ke("esri.layers.mixins.ScaleRangeLayer")],e),e};function lOe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const cOe={BingMapsLayer:async()=>(await nt(async()=>{const{default:t}=await import("./BingMapsLayer-Ckq9A6Ig.js");return{default:t}},__vite__mapDeps([108,109,6,7]),import.meta.url)).default,BuildingSceneLayer:async()=>(await nt(async()=>{const{default:t}=await import("./BuildingSceneLayer-MwkFvdgA.js");return{default:t}},__vite__mapDeps([110,111,112,113,114,32,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,94]),import.meta.url)).default,CSVLayer:async()=>(await nt(async()=>{const{default:t}=await import("./CSVLayer-zUPcmunf.js");return{default:t}},__vite__mapDeps([131,132,133,111]),import.meta.url)).default,CatalogLayer:async()=>(await nt(async()=>{const{default:t}=await import("./CatalogLayer-5bFy8gUP.js");return{default:t}},__vite__mapDeps([134,8,135,136,137,138,65,139,140,141,12,13,14,15,132,133,111,142,143,144,145,146,104,103,105,147,102]),import.meta.url)).default,DimensionLayer:async()=>(await nt(async()=>{const{default:t}=await import("./DimensionLayer-Cu0d4u5B.js");return{default:t}},__vite__mapDeps([148,149]),import.meta.url)).default,ElevationLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ElevationLayer-BrAtfbHo.js");return{default:t}},__vite__mapDeps([82,83,6,7,84,85,39,86]),import.meta.url)).default,FeatureLayer:async()=>(await nt(async()=>{const{default:t}=await Promise.resolve().then(()=>nje);return{default:t}},void 0,import.meta.url)).default,GeoJSONLayer:async()=>(await nt(async()=>{const{default:t}=await import("./GeoJSONLayer-D7WrpPmX.js");return{default:t}},__vite__mapDeps([150,132,133,111]),import.meta.url)).default,GeoRSSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./GeoRSSLayer-DpT5JB1M.js");return{default:t}},[],import.meta.url)).default,GroupLayer:async()=>(await nt(async()=>{const{default:t}=await Promise.resolve().then(()=>EOe);return{default:t}},void 0,import.meta.url)).default,ImageryLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ImageryLayer-vD0Puols.js");return{default:t}},__vite__mapDeps([151,152,153,154,76,155,136,14,12,13,15,58,59,109,143,144,145,146,104,103,105,147]),import.meta.url)).default,ImageryTileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ImageryTileLayer-BsWt1vf6.js");return{default:t}},__vite__mapDeps([156,152,153,154,76,155,136,14,12,13,15,58,59,6,7,157,158,21,8,159,85,39]),import.meta.url)).default,IntegratedMesh3DTilesLayer:async()=>(await nt(async()=>{const{default:t}=await import("./IntegratedMesh3DTilesLayer-ClFVjpwG.js");return{default:t}},[],import.meta.url)).default,IntegratedMeshLayer:async()=>(await nt(async()=>{const{default:t}=await import("./IntegratedMeshLayer-CVi5iII-.js");return{default:t}},__vite__mapDeps([160,161,114,162,112,113,32,115,116,117]),import.meta.url)).default,KMLLayer:async()=>(await nt(async()=>{const{default:t}=await import("./KMLLayer-AS-9b0lB.js");return{default:t}},__vite__mapDeps([163,164]),import.meta.url)).default,KnowledgeGraphLayer:async()=>(await nt(async()=>{const{default:t}=await import("./KnowledgeGraphLayer-DAjEO5if.js");return{default:t}},__vite__mapDeps([165,166,102,103,104,105,167,168,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111]),import.meta.url)).default,LineOfSightLayer:async()=>(await nt(async()=>{const{default:t}=await import("./LineOfSightLayer-d2XDqvdr.js");return{default:t}},__vite__mapDeps([180,149,181,182,183,184,161,114,162]),import.meta.url)).default,LinkChartLayer:async()=>(await nt(async()=>{const{default:t}=await import("./LinkChartLayer-C_Xqhz8K.js");return{default:t}},__vite__mapDeps([185,102,103,104,105,166,167,168,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111]),import.meta.url)).default,MapImageLayer:async()=>(await nt(async()=>{const{default:t}=await import("./MapImageLayer-CAP9_vPu.js");return{default:t}},__vite__mapDeps([186,73,187,142,65,14,143,144,12,13,15,145,146,104,103,105,147,102,75,72,74,109]),import.meta.url)).default,MapNotesLayer:async()=>(await nt(async()=>{const{default:t}=await import("./MapNotesLayer-BNKPfIDl.js");return{default:t}},__vite__mapDeps([188,12,13,14,15,189]),import.meta.url)).default,MediaLayer:async()=>(await nt(async()=>{const{default:t}=await import("./MediaLayer-CbSkbThz.js");return{default:t}},__vite__mapDeps([190,191,192,13,27,162,170,171,22]),import.meta.url)).default,OGCFeatureLayer:async()=>(await nt(async()=>{const{default:t}=await import("./OGCFeatureLayer-DJyUkClb.js");return{default:t}},__vite__mapDeps([193,194,102,103,104,105,195,196,132,133,111,197]),import.meta.url)).default,OpenStreetMapLayer:async()=>(await nt(async()=>{const{default:t}=await import("./OpenStreetMapLayer-DZTsJLCX.js");return{default:t}},__vite__mapDeps([198,199,109,6,7]),import.meta.url)).default,OrientedImageryLayer:async()=>(await nt(async()=>{const{default:t}=await import("./OrientedImageryLayer-CuwO3A57.js");return{default:t}},[],import.meta.url)).default,PointCloudLayer:async()=>(await nt(async()=>{const{default:t}=await import("./PointCloudLayer-CCBh4a09.js");return{default:t}},__vite__mapDeps([200,112,113,114,32,115,116,201]),import.meta.url)).default,RouteLayer:async()=>(await nt(async()=>{const{default:t}=await import("./RouteLayer-CnCjTr6A.js");return{default:t}},__vite__mapDeps([202,113,114,14,203,12,13,15,81]),import.meta.url)).default,SceneLayer:async()=>(await nt(async()=>{const{default:t}=await import("./SceneLayer-Bvs8YdS6.js");return{default:t}},__vite__mapDeps([204,205,140,206,27,207,139,208,209,210,211,212,213,128,129,214,215,216,138,65,66,112,113,114,32,115,116,94,111,117,217,161,162,118,119,120,121,122,123,124,125,126,127,130]),import.meta.url)).default,StreamLayer:async()=>(await nt(async()=>{const{default:t}=await import("./StreamLayer-C1A2HwlW.js");return{default:t}},[],import.meta.url)).default,SubtypeGroupLayer:async()=>(await nt(async()=>{const{default:t}=await import("./SubtypeGroupLayer-WLEJRZ8S.js");return{default:t}},__vite__mapDeps([218,59,58]),import.meta.url)).default,TileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./TileLayer-ByGILPAM.js");return{default:t}},__vite__mapDeps([219,83,6,7,84,85,39,187,142,65,14,143,144,12,13,15,145,146,104,103,105,147,102,75,109]),import.meta.url)).default,UnknownLayer:async()=>(await nt(async()=>{const{default:t}=await import("./UnknownLayer-psEdQm8T.js");return{default:t}},[],import.meta.url)).default,UnsupportedLayer:async()=>(await nt(async()=>{const{default:t}=await import("./UnsupportedLayer-v8nDoHtq.js");return{default:t}},[],import.meta.url)).default,VectorTileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./VectorTileLayer-BOT0tdpk.js");return{default:t}},__vite__mapDeps([220,83,6,7,84,85,39,20,32,221,222,223,224,25,225,18,23,28]),import.meta.url)).default,VideoLayer:async()=>(await nt(async()=>{const{default:t}=await import("./VideoLayer-ChTCD8FO.js");return{default:t}},__vite__mapDeps([226,227,128]),import.meta.url)).default,ViewshedLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ViewshedLayer-Cjz74c8o.js");return{default:t}},__vite__mapDeps([228,181,182,183,184,149]),import.meta.url)).default,VoxelLayer:async()=>(await nt(async()=>{const{default:t}=await import("./VoxelLayer-DJ6bKUNQ.js");return{default:t}},__vite__mapDeps([229,112,113,114,32,115,116,161,162]),import.meta.url)).default,WFSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WFSLayer-DyOaIuwi.js");return{default:t}},__vite__mapDeps([230,132,133,111,231,195,196,103,104,232]),import.meta.url)).default,WMSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WMSLayer-C1ETnr8D.js");return{default:t}},__vite__mapDeps([233,73,234,235,109]),import.meta.url)).default,WMTSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WMTSLayer-DBk910fg.js");return{default:t}},__vite__mapDeps([236,199,109,6,7,84,234,232]),import.meta.url)).default,WebTileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WebTileLayer-D4T1C_Fv.js").then(e=>e.W);return{default:t}},__vite__mapDeps([199,109,6,7]),import.meta.url)).default};function uOe(t){return new oue({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function Bft(t){for(const e of t.values())e==null||e.destroy();t.clear()}function QM(t,e,i=ci){return e||(e=new i),e===t||(e.removeAll(),hOe(t)?e.addMany(t):t&&e.add(t)),e}function fde(t){return t}function hOe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}function HO(t,e,i){let s,n;if(t)for(let r=0,o=t.length;r<o;r++){if(s=t.at(r),(s==null?void 0:s[e])===i)return s;if((s==null?void 0:s.type)==="group"&&(n=HO(s.layers,e,i),n))return n}}const dOe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ci;const s=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||zt.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},r=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void zt.getLogger(this).error("#add()","Cannot add layer to itself.");s(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>r(o.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",QM(i,this._get("layers")))}add(i,s){const n=this.layers;if(s=n.getNextIndex(s),i instanceof GM){const r=i;r.parent===this?this.reorder(r,s):n.add(r,s)}else Iv(i)?i.then(r=>{this.destroyed||this.add(r,s)}):zt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const n=this.layers;let r=n.getNextIndex(s);i.slice().forEach(o=>{o.parent!==this?(n.add(o,r),r+=1):this.reorder(o,r)})}findLayerById(i){return HO(this.layers,"id",i)}findLayerByUid(i){return HO(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return I([N()],e.prototype,"layers",null),e=I([ke("esri.support.LayersMixin")],e),e};function UO(t,e,i){if(t)for(let s=0,n=t.length;s<n;s++){const r=t.at(s);if(r[e]===i)return r;if((r==null?void 0:r.type)==="group"){const o=UO(r.tables,e,i);if(o)return o}}}const fOe=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ci,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&zt.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",QM(i,this._get("tables")))}findTableById(i){return UO(this.tables,"id",i)}findTableByUid(i){return UO(this.tables,"uid",i)}};return I([N()],e.prototype,"tables",null),e=I([ke("esri.support.TablesMixin")],e),e},pOe=Symbol("WebScene");var nf;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(nf||(nf={}));async function mOe(t){const e=[];for(const i of t.allLayers)if("beforeSave"in i&&typeof i.beforeSave=="function"){const s=i.beforeSave();s&&e.push(s)}await Promise.allSettled(e)}const gOe=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function Hft(t,e,i){let s=(t.messages??[]).filter(({type:n})=>n==="error").map(({name:n,message:r,details:o})=>new rt(n,r,o));if(t.blockedRelativeUrls&&(s=s.concat(t.blockedRelativeUrls.map(n=>new rt("url:unsupported",`Relative url '${n}' is not supported`)))),i){const{ignoreUnsupported:n,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:o}=i;n&&(s=s.filter(({name:l})=>!(gOe.has(l)||r.includes(l)))),o&&(s=s.filter(l=>l.name!=="web-document-write:property-required"))}if(s.length>0)throw new rt(e.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:s})}const yOe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),vOe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function _Oe(t){return t.layerContainerType==="basemap"?yOe:t.layerContainerType==="operational-layers"?vOe:null}function bOe(t,e){if(e.restrictedWebMapWriting){const i=_Oe(e);return i==null||i.has(t.type)&&!ZM(t)}return!0}function xOe(t,e){var i;if(e)if(ZM(t)){const s=zp("featureCollection.layers",e),n=(i=s==null?void 0:s[0])==null?void 0:i.layerDefinition;n&&aK(t,n)}else t.type!=="group"&&aK(t,e)}function aK(t,e){"maxScale"in t&&(e.maxScale=D9(t.maxScale)??void 0),"minScale"in t&&(e.minScale=D9(t.minScale)??void 0)}function wOe(t,e){if(xOe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=D9(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(ZM(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function SOe(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new rt("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(ZM(t)&&!t.isTable)e=t.resourceInfo;else if(bOe(t,i)){const s={};return t.write(s,i)?s:null}return e!=null&&wOe(t,e=Ue(e)),e}let la=class extends kV(jV(Uhe(dde(fOe(dOe(bV(GM))))))){constructor(e){super(e),this.allLayers=new oue({getCollections:()=>[this.layers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=uOe(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=Mv(async(i,s,n)=>{const{save:r,saveAs:o}=await nt(()=>import("./groupLayerUtils-gpznKsqH.js"),__vite__mapDeps([237,238,113,114,32,115,116]),import.meta.url);switch(i){case nf.SAVE:return r(this,s);case nf.SAVE_AS:return o(this,n,s)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([xi(()=>{let e=this.parent;for(;e&&"parent"in e&&e.parent;)e=e.parent;return e&&pOe in e},e=>{const i="prevent-adding-tables";this.removeHandles(i),e&&(this.tables.removeAll(),this.addHandles(mf(()=>this.tables,"before-add",s=>{s.preventDefault(),zt.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),i))},ec),xi(()=>this.visible,this._onVisibilityChange.bind(this),Jp)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===Ui.USER}_writeLayers(e,i,s,n){const r=[];if(!e)return r;e.forEach(o=>{const l=SOe(o,n.webmap?n.webmap.getLayerJSONFromResourceInfo(o):null,n);l!=null&&l.layerType&&r.push(l)}),i.layers=r}set portalItem(e){this._set("portalItem",e)}readPortalItem(e,i,s){const{itemId:n,layerType:r}=i;if(r==="GroupLayer"&&n)return new AS({id:n,portal:s==null?void 0:s.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}set visibilityMode(e){const i=this._get("visibilityMode")!==e;this._set("visibilityMode",e),i&&this._enforceVisibility(e,this.visible)}async beforeSave(){return mOe(this)}load(e){const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service"],layerModuleTypeMap:cOe},e).catch(s=>{if(Oh(s),this.sourceIsPortalItem)throw s});return this.addResolvingPromise(i),Promise.resolve(this)}async loadAll(){return uDe(this,e=>{e(this.layers,this.tables)})}async save(e){return this._debouncedSaveOperations(nf.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(nf.SAVE_AS,i,e)}layerAdded(e){e.visible&&this.visibilityMode==="exclusive"?this._turnOffOtherLayers(e):this.visibilityMode==="inherited"&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer read to Grouplayer: uid=${e.uid}`):this.addHandles(xi(()=>e.visible,i=>this._onChildVisibilityChange(e,i),Jp),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach(i=>{i!==e&&(i.visible=!1)})}_enforceVisibility(e,i){if(!Sl(this).initialized)return;const s=this.layers;let n=s.find(r=>r.visible);switch(e){case"exclusive":s.length&&!n&&(n=s.at(0),n.visible=!0),this._turnOffOtherLayers(n);break;case"inherited":s.forEach(r=>{r.visible=i})}}_onVisibilityChange(e){this.visibilityMode==="inherited"&&this.layers.forEach(i=>{i.visible=e})}_onChildVisibilityChange(e,i){switch(this.visibilityMode){case"exclusive":i?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case"inherited":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(e=>e.visible)}};I([N({readOnly:!0,dependsOn:[]})],la.prototype,"allLayers",void 0),I([N({readOnly:!0})],la.prototype,"allTables",void 0),I([N({json:{read:!0,write:!0}})],la.prototype,"blendMode",void 0),I([N()],la.prototype,"fullExtent",void 0),I([N({readOnly:!0})],la.prototype,"sourceIsPortalItem",null),I([N({json:{read:!1,write:{ignoreOrigin:!0}}})],la.prototype,"layers",void 0),I([Ft("layers")],la.prototype,"_writeLayers",null),I([N({type:["GroupLayer"]})],la.prototype,"operationalLayerType",void 0),I([N({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,e,i){return{enabled:(t==null?void 0:t.type)==="Group Layer"&&(i==null?void 0:i.initiator)!==this}}}},"web-scene":{read:!1,write:!1}}}})],la.prototype,"portalItem",null),I([At("web-map","portalItem",["itemId"])],la.prototype,"readPortalItem",null),I([Ft("web-map","portalItem",{itemId:{type:String}})],la.prototype,"writePortalItem",null),I([N()],la.prototype,"spatialReference",void 0),I([N({json:{read:!1},readOnly:!0,value:"group"})],la.prototype,"type",void 0),I([N({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,e,i)=>{t!=="inherited"&&(e[i]=t)}}}}})],la.prototype,"visibilityMode",null),la=I([ke("esri.layers.GroupLayer")],la);const YO=la,EOe=Object.freeze(Object.defineProperty({__proto__:null,default:YO},Symbol.toStringTag,{value:"Module"})),Hs=t=>{let e=class extends t{clone(){var u;const i=Sl(this);VPe(i,"unable to clone instance of non-accessor class");const s=i.metadata,n=i.store,r={},o=new Map;for(const f in s){const y=s[f],_=n==null?void 0:n.originOf(f),x=y.clonable;if(y.readOnly||x===!1||_!==Ui.USER&&_!==Ui.DEFAULTS&&_!==Ui.WEB_MAP&&_!==Ui.WEB_SCENE)continue;const S=this[f];let P=null;P=typeof x=="function"?x(S):x==="reference"?S:E$(S),S!=null&&P==null||(_===Ui.DEFAULTS?o.set(f,P):r[f]=P)}const l=new(Object.getPrototypeOf(this)).constructor(r);if(o.size){const f=(u=Sl(l))==null?void 0:u.store;if(f)for(const[y,_]of o)f.set(y,_,Ui.DEFAULTS)}return l}};return e=I([ke("esri.core.Clonable")],e),e};let lK=class extends Hs(Ei){};lK=I([ke("esri.core.Clonable")],lK);let BT=class extends wt{constructor(e){super(e),this.type=null}};I([N({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],BT.prototype,"type",void 0),BT=I([ke("esri.popup.content.Content")],BT);const mm=BT;var XO;let z1=XO=class extends mm{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new XO({description:this.description,displayType:this.displayType,title:this.title})}};I([N({type:String,json:{write:!0}})],z1.prototype,"description",void 0),I([N({type:["auto","preview","list"],json:{write:!0}})],z1.prototype,"displayType",void 0),I([N({type:String,json:{write:!0}})],z1.prototype,"title",void 0),I([N({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],z1.prototype,"type",void 0),z1=XO=I([ke("esri.popup.content.AttachmentsContent")],z1);const N2=z1;var WO;let q1=WO=class extends mm{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new WO({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Ue(this.outFields):null})}};I([N()],q1.prototype,"creator",void 0),I([N()],q1.prototype,"destroyer",void 0),I([N()],q1.prototype,"outFields",void 0),I([N({type:["custom"],readOnly:!0})],q1.prototype,"type",void 0),q1=WO=I([ke("esri.popup.content.CustomContent")],q1);const COe=q1;var ZO;let Z_=ZO=class extends wt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new ZO({title:this.title,expression:this.expression})}};I([N({type:String,json:{write:!0}})],Z_.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],Z_.prototype,"expression",void 0),I([N({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Z_.prototype,"returnType",void 0),Z_=ZO=I([ke("esri.popup.ElementExpressionInfo")],Z_);const POe=Z_;var KO;let w3=KO=class extends mm{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new KO({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};I([N({type:POe,json:{write:!0}})],w3.prototype,"expressionInfo",void 0),I([N({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],w3.prototype,"type",void 0),w3=KO=I([ke("esri.popup.content.ExpressionContent")],w3);const eA=w3;function ni(t,e={}){const i=t instanceof ps?t:new ps(t,e),{alwaysWriteDefaults:s,default:n,ignoreUnknown:r=!0,name:o,nonNullable:l,readOnly:u=!1}=e;return N({type:r?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!u&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:s}},nonNullable:l,readOnly:u})}let K_=class extends Hs(wt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};I([ni(QMe)],K_.prototype,"dateFormat",void 0),I([N({type:Boolean,json:{write:!0}})],K_.prototype,"digitSeparator",void 0),I([N({type:wn,json:{write:!0}})],K_.prototype,"places",void 0),K_=I([ke("esri.popup.support.FieldInfoFormat")],K_);const HT=K_;var JO;let vh=JO=class extends wt{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new JO({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};I([N({type:String,json:{write:!0}})],vh.prototype,"fieldName",void 0),I([N({type:HT,json:{write:!0}})],vh.prototype,"format",void 0),I([N({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],vh.prototype,"isEditable",void 0),I([N({type:String,json:{write:!0}})],vh.prototype,"label",void 0),I([ni(new ps({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],vh.prototype,"stringFieldOption",void 0),I([N({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],vh.prototype,"statisticType",void 0),I([N({type:String,json:{write:!0}})],vh.prototype,"tooltip",void 0),I([N({type:Boolean,json:{write:!0}})],vh.prototype,"visible",void 0),vh=JO=I([ke("esri.popup.FieldInfo")],vh);const BV=vh;var QO;let op=QO=class extends mm{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new QO(Ue({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};I([N({type:Object,json:{write:!0}})],op.prototype,"attributes",void 0),I([N({type:String,json:{write:!0}})],op.prototype,"description",void 0),I([N({type:[BV]})],op.prototype,"fieldInfos",void 0),I([Ft("fieldInfos")],op.prototype,"writeFieldInfos",null),I([N({type:String,json:{write:!0}})],op.prototype,"title",void 0),I([N({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],op.prototype,"type",void 0),op=QO=I([ke("esri.popup.content.FieldsContent")],op);const $2=op;let V1=class extends wt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};I([N({type:String,json:{write:!0}})],V1.prototype,"altText",void 0),I([N({type:String,json:{write:!0}})],V1.prototype,"caption",void 0),I([N({type:String,json:{write:!0}})],V1.prototype,"title",void 0),I([N({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],V1.prototype,"type",void 0),V1=I([ke("esri.popup.content.mixins.MediaInfo")],V1);const HV=V1;function d4(t){return Xu(Mq(t),0,255)}function f4(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function p4(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let UT=class _o{static blendColors(e,i,s,n=new _o){return n.r=Math.round(e.r+(i.r-e.r)*s),n.g=Math.round(e.g+(i.g-e.g)*s),n.b=Math.round(e.b+(i.b-e.b)*s),n.a=e.a+(i.a-e.a)*s,n._sanitize()}static fromRgb(e,i){const s=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(s){const n=s[2].split(/\s*,\s*/),r=s[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const l=n.map(u=>2.56*parseFloat(u));return n.length===4&&(l[3]=parseFloat(n[3])),_o.fromArray(l,i)}return _o.fromArray(n.map(l=>parseFloat(l)),i)}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return _o.fromArray(Gue(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new _o){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const s=parseInt(e.slice(1,2),16),n=parseInt(e.slice(2,3),16),r=parseInt(e.slice(3,4),16),o=e.length===5?15:parseInt(e.slice(4),16);return _o.fromArray([s+16*s,n+16*n,r+16*r,(o+16*o)/255],i)}case 7:case 9:{const s=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16),o=e.length===7?255:parseInt(e.slice(7),16);return _o.fromArray([s,n,r,o/255],i)}default:return null}}static fromArray(e,i=new _o){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const s=Vue(e)?TV(e):null;return s&&_o.fromArray(s,i)||_o.fromRgb(e,i)||_o.fromHex(e,i)}static fromJSON(e){return e!=null?new _o([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?_o.fromString(e,this):Array.isArray(e)?_o.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof _o||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,s=(e==null?void 0:e.digits)??6,n=s===3||s===4,r=s===4||s===8,o=`#${p4(this.r,n)}${p4(this.g,n)}${p4(this.b,n)}${r?p4(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=_o.AlphaMode.ALWAYS){const i=d4(this.r),s=d4(this.g),n=d4(this.b);return e===_o.AlphaMode.ALWAYS||this.a!==1?[i,s,n,d4(255*this.a)]:[i,s,n]}clone(){return new _o(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(f4(this.r,0,255)),this.g=Math.round(f4(this.g,0,255)),this.b=Math.round(f4(this.b,0,255)),this.a=f4(this.a,0,1),this}_set(e,i,s,n){this.r=e,this.g=i,this.b=s,this.a=n}};UT.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(UT||(UT={}));const fi=UT;var eR;let G1=eR=class extends Ei{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new eR({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};I([N()],G1.prototype,"color",void 0),I([N()],G1.prototype,"fieldName",void 0),I([N()],G1.prototype,"tooltip",void 0),I([N()],G1.prototype,"value",void 0),G1=eR=I([ke("esri.popup.content.support.ChartMediaInfoValueSeries")],G1);const TOe=G1;var tR;let y0=tR=class extends wt{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new tR({colors:Ue(this.colors),fields:Ue(this.fields),normalizeField:this.normalizeField,series:Ue(this.series),tooltipField:this.tooltipField})}};I([N({type:[fi],json:{type:[[wn]],write:!0}})],y0.prototype,"colors",void 0),I([N({type:[String],json:{write:!0}})],y0.prototype,"fields",void 0),I([N({type:String,json:{write:!0}})],y0.prototype,"normalizeField",void 0),I([N({type:[TOe],json:{read:!1}})],y0.prototype,"series",void 0),I([N({type:String,json:{write:!0}})],y0.prototype,"tooltipField",void 0),y0=tR=I([ke("esri.popup.content.support.ChartMediaInfoValue")],y0);const IOe=y0;let S3=class extends HV{constructor(e){super(e),this.type=null,this.value=void 0}};I([N({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],S3.prototype,"type",void 0),I([N({type:IOe,json:{write:!0}})],S3.prototype,"value",void 0),S3=I([ke("esri.popup.content.mixins.ChartMediaInfo")],S3);const tA=S3,iA=wa()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var iR;let YT=iR=class extends tA{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new iR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:iA.write}})],YT.prototype,"type",void 0),YT=iR=I([ke("esri.popup.content.BarChartMediaInfo")],YT);const pde=YT;var sR;let XT=sR=class extends tA{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new sR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:iA.write}})],XT.prototype,"type",void 0),XT=sR=I([ke("esri.popup.content.ColumnChartMediaInfo")],XT);const mde=XT;var nR;let E3=nR=class extends wt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new nR({linkURL:this.linkURL,sourceURL:this.sourceURL})}};I([N({type:String,json:{write:!0}})],E3.prototype,"linkURL",void 0),I([N({type:String,json:{write:!0}})],E3.prototype,"sourceURL",void 0),E3=nR=I([ke("esri.popup.content.support.ImageMediaInfoValue")],E3);const MOe=E3;var rR;let J_=rR=class extends HV{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new rR({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:Number,json:{write:!0}})],J_.prototype,"refreshInterval",void 0),I([N({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],J_.prototype,"type",void 0),I([N({type:MOe,json:{write:!0}})],J_.prototype,"value",void 0),J_=rR=I([ke("esri.popup.content.ImageMediaInfo")],J_);const gde=J_;var oR;let WT=oR=class extends tA{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new oR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:iA.write}})],WT.prototype,"type",void 0),WT=oR=I([ke("esri.popup.content.LineChartMediaInfo")],WT);const yde=WT;var aR;let ZT=aR=class extends tA{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new aR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:iA.write}})],ZT.prototype,"type",void 0),ZT=aR=I([ke("esri.popup.content.PieChartMediaInfo")],ZT);const vde=ZT,lR={base:HV,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":pde,"column-chart":mde,"line-chart":yde,"pie-chart":vde,image:gde}};var cR;let _h=cR=class extends mm{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?gde.fromJSON(e):e.type==="barchart"?pde.fromJSON(e):e.type==="columnchart"?mde.fromJSON(e):e.type==="linechart"?yde.fromJSON(e):e.type==="piechart"?vde.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new cR(Ue({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};I([N()],_h.prototype,"activeMediaInfoIndex",void 0),I([N({type:Object,json:{write:!0}})],_h.prototype,"attributes",void 0),I([N({type:String,json:{write:!0}})],_h.prototype,"description",void 0),I([N({types:[lR]})],_h.prototype,"mediaInfos",void 0),I([At("mediaInfos")],_h.prototype,"readMediaInfos",null),I([Ft("mediaInfos")],_h.prototype,"writeMediaInfos",null),I([N({type:String,json:{write:!0}})],_h.prototype,"title",void 0),I([N({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],_h.prototype,"type",void 0),_h=cR=I([ke("esri.popup.content.MediaContent")],_h);const gE=_h;var uR;let C3=uR=class extends wt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new uR({field:this.field,order:this.order})}};I([N({type:String,json:{write:!0}})],C3.prototype,"field",void 0),I([N({type:["asc","desc"],json:{write:!0}})],C3.prototype,"order",void 0),C3=uR=I([ke("esri.popup.support.RelatedRecordsInfoFieldOrder")],C3);const UV=C3;let Md=class extends Hs(mm){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};I([N({type:String,json:{write:!0}})],Md.prototype,"description",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Md.prototype,"displayCount",void 0),I([N({type:["list"],json:{write:!0}})],Md.prototype,"displayType",void 0),I([N({type:[UV],json:{write:!0}})],Md.prototype,"orderByFields",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Md.prototype,"relationshipId",void 0),I([N({type:String,json:{write:!0}})],Md.prototype,"title",void 0),I([N({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Md.prototype,"type",void 0),Md=I([ke("esri.popup.content.RelationshipContent")],Md);const yE=Md;var hR;let P3=hR=class extends mm{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new hR({text:this.text})}};I([N({type:String,json:{write:!0}})],P3.prototype,"text",void 0),I([N({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],P3.prototype,"type",void 0),P3=hR=I([ke("esri.popup.content.TextContent")],P3);const vE=P3;let Ad=class extends Hs(wt){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};I([N({type:String,json:{write:!0}})],Ad.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],Ad.prototype,"description",void 0),I([N({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Ad.prototype,"type",void 0),I([N({type:Boolean,json:{read:!1}})],Ad.prototype,"open",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Ad.prototype,"associatedNetworkSourceId",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Ad.prototype,"associatedAssetGroup",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Ad.prototype,"associatedAssetType",void 0),Ad=I([ke("esri.popup.support.UtilityNetworkAssociationType")],Ad);const AOe=Ad;let j1=class extends Hs(mm){constructor(e){super(e),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};I([N({type:String,json:{write:!0}})],j1.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],j1.prototype,"title",void 0),I([N({type:[AOe],json:{write:!0}})],j1.prototype,"associationTypes",void 0),I([ni({utilityNetworkAssociations:"utility-network-associations"})],j1.prototype,"type",void 0),j1=I([ke("esri.popup.content.UtilityNetworkAssociationsContent")],j1);const YV=j1,DOe={base:null,key:"type",typeMap:{attachment:N2,media:gE,text:vE,expression:eA,field:$2,relationship:yE,utilityNetworkAssociations:YV}},kOe={base:null,key:"type",typeMap:{attachment:N2,media:gE,text:vE,expression:eA,field:$2,relationship:yE}};var dR;let B1=dR=class extends wt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new dR({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};I([N({type:String,json:{write:!0}})],B1.prototype,"name",void 0),I([N({type:String,json:{write:!0}})],B1.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],B1.prototype,"expression",void 0),I([N({type:["string","number"],json:{write:!0}})],B1.prototype,"returnType",void 0),B1=dR=I([ke("esri.popup.ExpressionInfo")],B1);const NOe=B1;var fR;let T3=fR=class extends wt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new fR({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};I([N({type:Boolean,json:{write:!0}})],T3.prototype,"returnTopmostRaster",void 0),I([N({type:Boolean,json:{write:!0}})],T3.prototype,"showNoDataRecords",void 0),T3=fR=I([ke("esri.popup.LayerOptions")],T3);const $Oe=T3;var pR;let I3=pR=class extends wt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new pR({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Ue(this.orderByFields):null})}};I([N({type:Boolean,json:{write:!0}})],I3.prototype,"showRelatedRecords",void 0),I([N({type:[UV],json:{write:!0}})],I3.prototype,"orderByFields",void 0),I3=pR=I([ke("esri.popup.RelatedRecordsInfo")],I3);const cK=I3;var mR;let yu=mR=class extends DC(Ei){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new mR({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};I([N()],yu.prototype,"active",void 0),I([N()],yu.prototype,"className",void 0),I([N()],yu.prototype,"disabled",void 0),I([N()],yu.prototype,"icon",void 0),I([N()],yu.prototype,"id",void 0),I([N()],yu.prototype,"indicator",void 0),I([N()],yu.prototype,"title",void 0),I([N()],yu.prototype,"type",void 0),I([N()],yu.prototype,"visible",void 0),yu=mR=I([ke("esri.support.actions.ActionBase")],yu);const LC=yu;var gR;let KT=gR=class extends LC{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new gR({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};I([N()],KT.prototype,"image",void 0),KT=gR=I([ke("esri.support.actions.ActionButton")],KT);const _de=KT;var yR;let M3=yR=class extends LC{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new yR({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};I([N()],M3.prototype,"image",void 0),I([N()],M3.prototype,"value",void 0),M3=yR=I([ke("esri.support.actions.ActionToggle")],M3);const bde=M3,jw="relationships/",uK="expression/",OOe=ci.ofType({key:"type",defaultKeyValue:"button",base:LC,typeMap:{button:_de,toggle:bde}}),ROe={base:mm,key:"type",typeMap:{media:gE,custom:COe,text:vE,attachments:N2,fields:$2,expression:eA,relationship:yE,utilityNetworkAssociations:YV}},xde=new Set(["attachments","fields","media","text","expression","relationship"]),LOe=new Set([...xde,"utility-network-associations"]);let Jr=class extends Hs(wt){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Yu(ROe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Iv(e)?e:(zt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:s}=i;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,s):this._readPopupInfo(i)}writeWebSceneContent(e,i,s,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,s,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,s,n){const{content:r}=this,o=Array.isArray(r)?r:null;if(e){const l=o?o.filter(f=>f.type==="fields"):[],u=l.length&&l.every(f=>{var y;return(y=f.fieldInfos)==null?void 0:y.length});i.fieldInfos=e.filter(Boolean).map(f=>{const y=f.toJSON(n);return u&&(y.visible=!1),y})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,i)}writeLayerOptions(e,i,s,n){i[s]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...s,...this._getContentExpressionInfos(this.content,s)]),hv(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,s){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>(s==null?void 0:s.origin)==="web-scene"?xde.has(n.type):LOe.has(n.type)).map(n=>n==null?void 0:n.toJSON(s)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const s=Ue(e.fieldInfos);Array.isArray(i.fieldInfos)?s.forEach(n=>{const r=i.fieldInfos.find(o=>{var l,u;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((u=n.fieldName)==null?void 0:u.toLowerCase())});r?r.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=s}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var r,o;const s=((r=e.orderByFields)==null?void 0:r.map(l=>this._toFieldOrderJSON(l,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...s];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const s=Ue(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...s]:i.mediaInfos=s}_readPopupInfoElements(e,i,s){const n={description:!1,mediaInfos:!1};return s.map(r=>r.type==="media"?(r.mediaInfos||!i||n.mediaInfos||(r.mediaInfos=i,n.mediaInfos=!0),gE.fromJSON(r)):r.type==="text"?(r.text||!e||n.description||(r.text=e,n.description=!0),vE.fromJSON(r)):r.type==="attachments"?N2.fromJSON(r):r.type==="fields"?$2.fromJSON(r):r.type==="expression"?eA.fromJSON(r):r.type==="relationship"?yE.fromJSON(r):r.type==="utilityNetworkAssociations"?YV.fromJSON(r):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:s}=e;if(!(i!=null&&i.startsWith(jw)))return null;const n=i.replace(jw,"").split("/");if(n.length!==2)return null;const r=parseInt(n[0],10),o=n[1];return typeof r=="number"&&o?yE.fromJSON({relationshipId:r,orderByFields:[{field:o,order:s}]}):null}_toFieldOrderJSON(e,i){const{order:s,field:n}=e;return{field:`${jw}${i}/${n}`,order:s}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:s,relatedRecordsInfo:n={showRelatedRecords:!1}}){const r=[];e?r.push(new vE({text:e})):r.push(new $2),Array.isArray(i)&&i.length&&r.push(gE.fromJSON({mediaInfos:i})),s&&r.push(N2.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=n;return o&&(l!=null&&l.length)&&l.forEach(u=>{const f=this._toRelationshipContent(u);f&&r.push(f)}),r.length?r:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const s=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...s.reduce((n,r)=>[...n,...this._getMediaInfoFields(r)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:s,value:n}=e,r=n||{},{fields:o,normalizeField:l,tooltipField:u,sourceURL:f,linkURL:y}=r,_=[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(f),...this._extractFieldNames(y),...o??[]];return l&&_.push(l),u&&_.push(u),_}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((s,n)=>[...s,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,s)=>[...i,...this._getContentElementFields(s)],[]):[]}async _collectExpressionInfoFields(e,i,s){s&&await Promise.all(s.map(n=>Qa(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:s})=>!(s!==void 0&&!s||!i||i.startsWith(jw)||i.startsWith(uK))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,s)=>[...i,...this._getActionFields(s)],[]):[]}_getActionFields(e){const{className:i,title:s,type:n}=e,r=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(r)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Fhe(e).filter(i=>!(i.indexOf(jw)===0||i.indexOf(uK)===0))}};I([N({type:OOe})],Jr.prototype,"actions",void 0),I([N()],Jr.prototype,"content",void 0),I([Sn("content")],Jr.prototype,"castContent",null),I([At("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Jr.prototype,"readContent",null),I([Ft("web-scene","content",{popupElements:{type:ci.ofType(kOe)},showAttachments:{type:Boolean},mediaInfos:{type:ci.ofType(lR)},description:{type:String},relatedRecordsInfo:{type:cK}})],Jr.prototype,"writeWebSceneContent",null),I([Ft("content",{popupElements:{type:ci.ofType(DOe)},showAttachments:{type:Boolean},mediaInfos:{type:ci.ofType(lR)},description:{type:String},relatedRecordsInfo:{type:cK}})],Jr.prototype,"writeWebMapContent",null),I([N({type:[NOe],json:{write:!0}})],Jr.prototype,"expressionInfos",void 0),I([N({type:[BV]})],Jr.prototype,"fieldInfos",void 0),I([Ft("fieldInfos")],Jr.prototype,"writeFieldInfos",null),I([N({type:$Oe})],Jr.prototype,"layerOptions",void 0),I([Ft("layerOptions")],Jr.prototype,"writeLayerOptions",null),I([N({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Jr.prototype,"lastEditInfoEnabled",void 0),I([N()],Jr.prototype,"outFields",void 0),I([N()],Jr.prototype,"overwriteActions",void 0),I([N()],Jr.prototype,"returnGeometry",void 0),I([N({json:{type:String}})],Jr.prototype,"title",void 0),I([Ft("title")],Jr.prototype,"writeTitle",null),Jr=I([ke("esri.PopupTemplate")],Jr);const FC=Jr,hK=new ps({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let FOe=0,Q_=class extends wt{constructor(e){super(e),this.id="sym"+FOe++,this.type=null,this.color=new fi([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};I([N({type:hK.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:hK.write}}})],Q_.prototype,"type",void 0),I([N({type:fi,json:{write:{allowNull:!0}}})],Q_.prototype,"color",void 0),I([At("color")],Q_.prototype,"readColor",null),Q_=I([ke("esri.symbols.Symbol")],Q_);const Ea=Q_;var vR;let v0=vR=class extends Ea{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const s=this.data.primitiveOverrides;if(s){const n=s.map(r=>{const o=r.valueExpressionInfo;return o?Qa(t,e,o.expression):null});await Promise.all(n)}}}clone(){return new vR({data:Ue(this.data)})}hash(){return Soe(JSON.stringify(this.data)).toString()}};I([N({json:{write:!1}})],v0.prototype,"color",void 0),I([N({json:{write:!0}})],v0.prototype,"data",void 0),I([At("data",["symbol"])],v0.prototype,"readData",null),I([Ft("data",{})],v0.prototype,"writeData",null),I([ni({CIMSymbolReference:"cim"},{readOnly:!0})],v0.prototype,"type",void 0),v0=vR=I([ke("esri.symbols.CIMSymbol")],v0);const Vg=v0;let eb=class extends wt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,s){e||(i[s]=e)}};I([N({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],eb.prototype,"enabled",void 0),I([Ft("enabled")],eb.prototype,"writeEnabled",null),I([N({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],eb.prototype,"type",void 0),eb=I([ke("esri.symbols.Symbol3DLayer")],eb);const Mf=eb;function zOe(t,e){const i=e.transparency!=null?a6(e.transparency):1,s=e.color;return s&&Array.isArray(s)?new fi([s[0]||0,s[1]||0,s[2]||0,i]):null}function qOe(t,e){e.color=t.toJSON().slice(0,3);const i=LV(t.a);i!==0&&(e.transparency=i)}const Gg={type:fi,json:{type:[wn],default:null,read:{source:["color","transparency"],reader:zOe},write:{target:{color:{type:[wn]},transparency:{type:wn}},writer:qOe}}},yf={type:Number,cast:fs,json:{write:!0}};let H1=class extends wt{constructor(e){super(e),this.color=new fi([0,0,0,1]),this.extensionLength=0,this.size=Wu(1)}clone(){}cloneProperties(){return{color:Ue(this.color),size:this.size,extensionLength:this.extensionLength}}};I([N({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],H1.prototype,"type",void 0),I([N(Gg)],H1.prototype,"color",void 0),I([N({...yf,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],H1.prototype,"extensionLength",void 0),I([N(yf)],H1.prototype,"size",void 0),H1=I([ke("esri.symbols.edges.Edges3D")],H1);const XV=H1;var _R;let JT=_R=class extends XV{constructor(t){super(t),this.type="sketch"}clone(){return new _R(this.cloneProperties())}};I([ni({sketch:"sketch"},{readOnly:!0})],JT.prototype,"type",void 0),JT=_R=I([ke("esri.symbols.edges.SketchEdges3D")],JT);const VOe=JT;var bR;let QT=bR=class extends XV{constructor(t){super(t),this.type="solid"}clone(){return new bR(this.cloneProperties())}};I([ni({solid:"solid"},{readOnly:!0})],QT.prototype,"type",void 0),QT=bR=I([ke("esri.symbols.edges.SolidEdges3D")],QT);const wde=QT,Sde={types:{key:"type",base:XV,typeMap:{solid:wde,sketch:VOe}},json:{write:!0}};var xR;let Ic=xR=class extends wt{constructor(t){super(t),this.color=null,this.emissiveFactor=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?ic(this.emissiveFactor):null};return new xR(t)}};I([N(Gg)],Ic.prototype,"color",void 0),I([N({type:[Number],json:{write:!1}})],Ic.prototype,"emissiveFactor",void 0),Ic=xR=I([ke("esri.symbols.support.Symbol3DMaterial")],Ic);var wR;let _0=wR=class extends Mf{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,e;return new wR({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(e=this.material)==null?void 0:e.clone(),castShadows:this.castShadows,size:this.size})}};I([ni({Extrude:"extrude"},{readOnly:!0})],_0.prototype,"type",void 0),I([N({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],_0.prototype,"size",void 0),I([N({type:Ic,json:{write:!0}})],_0.prototype,"material",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_0.prototype,"castShadows",void 0),I([N(Sde)],_0.prototype,"edges",void 0),_0=wR=I([ke("esri.symbols.ExtrudeSymbol3DLayer")],_0);const Ede=_0;let A3=class extends Ea{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};I([ni({esriSLS:"simple-line"},{readOnly:!0})],A3.prototype,"type",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],A3.prototype,"width",void 0),A3=I([ke("esri.symbols.LineSymbol")],A3);const GOe=A3,jOe=["begin","end","begin-end"],Cde=["arrow","circle","square","diamond","cross","x"];var SR;let Dd=SR=class extends wt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,s){e[i]=(s==null?void 0:s.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,s){(s==null?void 0:s.origin)==="web-map"||(e[i]=t)}clone(){return new SR({color:Ue(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};I([N({type:["begin","end","begin-end"],json:{write:!0}})],Dd.prototype,"placement",void 0),I([ni({"line-marker":"line-marker"},{readOnly:!0}),N({json:{origins:{"web-map":{write:!1}}}})],Dd.prototype,"type",void 0),I([N({type:Cde})],Dd.prototype,"style",void 0),I([Ft("style")],Dd.prototype,"writeStyle",null),I([N({type:fi,value:null,json:{write:{allowNull:!0}}})],Dd.prototype,"color",null),I([At("color")],Dd.prototype,"readColor",null),I([Ft("color")],Dd.prototype,"writeColor",null),Dd=SR=I([ke("esri.symbols.LineSymbolMarker")],Dd);const BOe=Dd;var ER;const I8=new ps({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ap=ER=class extends GOe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,s,n,r){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=fs(i)),s!=null&&(o.cap=s),n!=null&&(o.join=n),r!=null&&(o.miterLimit=fs(r)),o}clone(){var t;return new ER({color:Ue(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};I([ni({esriSLS:"simple-line"},{readOnly:!0})],ap.prototype,"type",void 0),I([N({type:I8.apiValues,json:{read:I8.read,write:I8.write}})],ap.prototype,"style",void 0),I([N({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],ap.prototype,"cap",void 0),I([N({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],ap.prototype,"join",void 0),I([N({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":BOe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ap.prototype,"marker",void 0),I([N({type:Number,json:{read:!1,write:!1}})],ap.prototype,"miterLimit",void 0),ap=ER=I([ke("esri.symbols.SimpleLineSymbol")],ap);const Al=ap,opt=Object.freeze(Object.defineProperty({__proto__:null,default:Al},Symbol.toStringTag,{value:"Module"}));let D3=class extends Ea{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};I([N({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Al}},json:{default:null,write:!0}})],D3.prototype,"outline",void 0),I([N({type:["simple-fill","picture-fill"],readOnly:!0})],D3.prototype,"type",void 0),D3=I([ke("esri.symbols.FillSymbol")],D3);const Pde=D3;let eI=class extends wt{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};I([N({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],eI.prototype,"type",void 0),eI=I([ke("esri.symbols.patterns.LinePattern3D")],eI);const Tde=eI,HOe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var CR;const UOe=wa()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let k3=CR=class extends Tde{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new CR(t)}};I([N({type:["style"]})],k3.prototype,"type",void 0),I([ni(UOe),N({type:HOe})],k3.prototype,"style",void 0),k3=CR=I([ke("esri.symbols.patterns.LineStylePattern3D")],k3);const WV=k3;let tI=class extends wt{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};I([N({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],tI.prototype,"type",void 0),tI=I([ke("esri.symbols.patterns.Pattern3D")],tI);const Ide=tI,YOe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var PR;let N3=PR=class extends Ide{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new PR({style:this.style})}};I([N({type:["style"]})],N3.prototype,"type",void 0),I([N({type:YOe,json:{read:!0,write:!0}})],N3.prototype,"style",void 0),N3=PR=I([ke("esri.symbols.patterns.StylePattern3D")],N3);const Mde=N3,XOe={types:{key:"type",base:Ide,typeMap:{style:Mde}},json:{write:!0}},Ade={types:{key:"type",base:Tde,typeMap:{style:WV}},json:{write:!0}},$S=new fi("white");new fi("black");const WOe=new fi([255,255,255,0]);function ZOe(t){return t.r===0&&t.g===0&&t.b===0}var TR;let OS=TR=class extends Ic{constructor(t){super(t),this.colorMixMode=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?ic(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new TR(t)}};I([ni({multiply:"multiply",replace:"replace",tint:"tint"})],OS.prototype,"colorMixMode",void 0),OS=TR=I([ke("esri.symbols.support.Symbol3DFillMaterial")],OS);function KOe(t,e=!1){return t<=moe?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function upt(t){return(poe(t)?t.length:t.byteLength/8)<=moe?Array.from(t):new Float64Array(t)}function hpt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function zC(t=tRe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function ZV(t,e,i,s,n,r,o=zC()){return o[0]=t,o[1]=e,o[2]=i,o[3]=s,o[4]=n,o[5]=r,o}function dpt(t,e=zC()){return JOe(t,0,t.length/3,e)}function JOe(t,e,i,s=zC()){return Dde(s,IR),QOe(s,t,e,i),s}function fpt(t,e=KOe(24)){const[i,s,n,r,o,l]=t;return e[0]=i,e[1]=s,e[2]=n,e[3]=i,e[4]=s,e[5]=l,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=l,e[12]=r,e[13]=s,e[14]=n,e[15]=r,e[16]=s,e[17]=l,e[18]=r,e[19]=o,e[20]=n,e[21]=r,e[22]=o,e[23]=l,e}function ppt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new ur(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function mpt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function gpt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function ypt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function QOe(t,e,i=0,s=e.length/3){let n=t[0],r=t[1],o=t[2],l=t[3],u=t[4],f=t[5];for(let y=0;y<s;y++)n=Math.min(n,e[i+3*y]),r=Math.min(r,e[i+3*y+1]),o=Math.min(o,e[i+3*y+2]),l=Math.max(l,e[i+3*y]),u=Math.max(u,e[i+3*y+1]),f=Math.max(f,e[i+3*y+2]);t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=u,t[5]=f}function vpt(t,e,i){const s=e.length;let n=t[0],r=t[1],o=t[2],l=t[3],u=t[4],f=t[5];if(i)for(let y=0;y<s;y++){const _=e[y];n=Math.min(n,_[0]),r=Math.min(r,_[1]),o=Math.min(o,_[2]),l=Math.max(l,_[0]),u=Math.max(u,_[1]),f=Math.max(f,_[2])}else for(let y=0;y<s;y++){const _=e[y];n=Math.min(n,_[0]),r=Math.min(r,_[1]),l=Math.max(l,_[0]),u=Math.max(u,_[1])}t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=u,t[5]=f}function _pt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function qC(t){return t[0]>=t[3]?0:t[3]-t[0]}function VC(t){return t[1]>=t[4]?0:t[4]-t[1]}function GC(t){return t[2]>=t[5]?0:t[5]-t[2]}function bpt(t){const e=qC(t),i=GC(t),s=VC(t);return Math.sqrt(e*e+i*i+s*s)}function xpt(t,e=[0,0,0]){return e[0]=t[0]+qC(t)/2,e[1]=t[1]+VC(t)/2,e[2]=t[2]+GC(t)/2,e}function wpt(t,e=[0,0,0]){return e[0]=qC(t),e[1]=VC(t),e[2]=GC(t),e}function Spt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function eRe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function Ept(t,e){return e==null||eRe(t,e)}function Cpt(t,e,i,s,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+s,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+s,n}function Ppt(t,e,i=t){const s=t[0]+qC(t)/2,n=t[1]+VC(t)/2,r=t[2]+GC(t)/2;return i[0]=s+(t[0]-s)*e,i[1]=n+(t[1]-n)*e,i[2]=r+(t[2]-r)*e,i[3]=s+(t[3]-s)*e,i[4]=n+(t[4]-n)*e,i[5]=r+(t[5]-r)*e,i}function Tpt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ipt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function Mpt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Dde(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Apt(t){return t?Dde(t,IR):zC(IR)}function Dpt(t,e){return e||(e=Ov()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function kpt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Npt(t,e,i,s,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=s,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function dK(t){return t.length===6}function $pt(t){return qC(t)===0&&VC(t)===0&&GC(t)===0}function Opt(t,e,i){if(t==null||e==null)return t===e;if(!dK(t)||!dK(e))return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}const IR=[1/0,1/0,1/0,-1/0,-1/0,-1/0],tRe=[0,0,0,0,0,0];zC();function Rpt(t,{isPrimitive:e,width:i,depth:s,height:n}){const r=e?10:1;if(i==null&&n==null&&s==null)return[r*t[0],r*t[1],r*t[2]];const o=_l(i,s,n);let l;for(let u=0;u<3;u++){const f=o[u];if(f!=null){l=f/t[u];break}}for(let u=0;u<3;u++)o[u]==null&&(o[u]=t[u]*l);return o}const iRe=ZV(-.5,-.5,-.5,.5,.5,.5),sRe=ZV(-.5,-.5,0,.5,.5,1),nRe=ZV(-.5,-.5,0,.5,.5,.5);function Lpt(t){switch(t){case"sphere":case"cube":case"diamond":return iRe;case"cylinder":case"cone":case"inverted-cone":return sRe;case"tetrahedron":return nRe;default:return}}const KV=["butt","square","round"],rRe=[...KV,"none"],kde=["miter","bevel","round"];var MR;let U1=MR=class extends wt{constructor(t){super(t),this.color=new fi([0,0,0,1]),this.size=Wu(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new MR(t)}};I([N(Gg)],U1.prototype,"color",void 0),I([N(yf)],U1.prototype,"size",void 0),I([N(Ade)],U1.prototype,"pattern",void 0),I([N({type:KV,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],U1.prototype,"patternCap",void 0),U1=MR=I([ke("esri.symbols.support.Symbol3DOutline")],U1);var iI;let lp=iI=class extends Mf{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new iI(t)}static fromSimpleFillSymbol(t){var s,n,r;const e=t.outline&&t.outline.style&&t.outline.style!=="solid"?new WV({style:t.outline.style}):null,i={size:((s=t.outline)==null?void 0:s.width)??0,color:(((n=t.outline)==null?void 0:n.color)??$S).clone(),pattern:e};return e&&((r=t.outline)!=null&&r.cap)&&(i.patternCap=t.outline.cap),new iI({material:new OS({color:(t.color??WOe).clone()}),pattern:t.style&&t.style!=="solid"?new Mde({style:t.style}):null,outline:i})}};I([ni({Fill:"fill"},{readOnly:!0})],lp.prototype,"type",void 0),I([N({type:OS,json:{write:!0}})],lp.prototype,"material",void 0),I([N(XOe)],lp.prototype,"pattern",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],lp.prototype,"castShadows",void 0),I([N({type:U1,json:{write:!0}})],lp.prototype,"outline",void 0),I([N(Sde)],lp.prototype,"edges",void 0),lp=iI=I([ke("esri.symbols.FillSymbol3DLayer")],lp);const jg=lp,oRe=["none","underline","line-through"],aRe=["normal","italic","oblique"],lRe=["normal","lighter","bold","bolder"],Nde={type:Number,cast:t=>{const e=sx(t);return e===0?1:Xu(e,.1,4)},nonNullable:!0},cRe=["left","right","center"],uRe=["baseline","top","middle","bottom"],$de={type:cRe,nonNullable:!0},Ode={type:uRe,nonNullable:!0},Fpt=8;var AR;let cp=AR=class extends wt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return fs(t)}clone(){return new AR({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};I([N({type:oRe,json:{default:"none",write:!0}})],cp.prototype,"decoration",void 0),I([N({type:String,json:{write:!0}})],cp.prototype,"family",void 0),I([N({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],cp.prototype,"size",void 0),I([Sn("size")],cp.prototype,"castSize",null),I([N({type:aRe,json:{default:"normal",write:!0}})],cp.prototype,"style",void 0),I([N({type:lRe,json:{default:"normal",write:!0}})],cp.prototype,"weight",void 0),cp=AR=I([ke("esri.symbols.Font")],cp);const sA=cp;var DR;const hRe=wa()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Y1=DR=class extends wt{constructor(t){super(t)}readHref(t,e,i){return t?mx(t,i):e.dataURI}writeHref(t,e,i,s){t&&(Av(t)?e.dataURI=t:(e.href=$C(t,s),Dc(e.href)&&(e.href=Vu(e.href))))}clone(){return new DR({href:this.href,primitive:this.primitive})}};I([N({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Y1.prototype,"href",void 0),I([At("href")],Y1.prototype,"readHref",null),I([Ft("href",{href:{type:String},dataURI:{type:String}})],Y1.prototype,"writeHref",null),I([ni(hRe)],Y1.prototype,"primitive",void 0),Y1=DR=I([ke("esri.symbols.support.IconSymbol3DLayerResource")],Y1);const zpt="circle";var kR;let kb=kR=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new kR({x:this.x,y:this.y})}};I([N({type:Number})],kb.prototype,"x",void 0),I([N({type:Number})],kb.prototype,"y",void 0),kb=kR=I([ke("esri.symbols.support.Symbol3DAnchorPosition2D")],kb);var NR;let $3=NR=class extends wt{constructor(t){super(t),this.color=new fi([0,0,0,1]),this.size=Wu(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new NR(t)}};I([N(Gg)],$3.prototype,"color",void 0),I([N(yf)],$3.prototype,"size",void 0),$3=NR=I([ke("esri.symbols.support.Symbol3DIconOutline")],$3);var tb;const Rde="esri.symbols.IconSymbol3DLayer";let bh=tb=class extends Mf{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new tb({anchor:this.anchor,anchorPosition:Ue(this.anchorPosition),enabled:this.enabled,material:Ue(this.material),outline:Ue(this.outline),resource:Ue(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||$S,i=fK(t),s=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||$S).clone()}:null;return new tb({size:t.size,angle:t.angle,resource:{primitive:fRe(t.style)},material:{color:e},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||ZOe(t.color)?$S:t.color,i=fK(t);return new tb({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new tb({resource:{href:Pae({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};I([N({type:Ic,json:{write:!0}})],bh.prototype,"material",void 0),I([N({type:Y1,json:{write:!0}})],bh.prototype,"resource",void 0),I([ni({Icon:"icon"},{readOnly:!0})],bh.prototype,"type",void 0),I([N(yf)],bh.prototype,"size",void 0),I([ni({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],bh.prototype,"anchor",void 0),I([N({type:kb,json:{type:[Number],read:{reader:t=>new kb({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],bh.prototype,"anchorPosition",void 0),I([N({type:$3,json:{write:!0}})],bh.prototype,"outline",void 0),I([N({type:Number,json:{write:!0,default:0}})],bh.prototype,"angle",void 0),bh=tb=I([ke(Rde)],bh);const My=bh;function fK(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,s=pK(t.xoffset),n=pK(t.yoffset);return(s||n)&&e&&i?{x:-s/e,y:n/i}:null}function pK(t){return isFinite(t)?t:0}const dRe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function fRe(t){return dRe[t]||(zt.getLogger(Rde).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let X1=class extends Hs(wt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};I([N({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],X1.prototype,"type",void 0),I([N({type:jOe,json:{default:"begin-end",write:!0}})],X1.prototype,"placement",void 0),I([N({type:Cde,json:{default:"arrow",write:!0}})],X1.prototype,"style",void 0),I([N({type:fi,json:{type:[wn],default:null,write:!0}})],X1.prototype,"color",void 0),X1=I([ke("esri.symbols.LineStyleMarker3D")],X1);const $R=X1;var sI;let kd=sI=class extends Mf{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Wu(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new sI(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Wu(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new WV({style:t.style}):null,material:new Ic({color:(t.color||$S).clone()}),marker:t.marker?new $R({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new sI(e)}};I([N({type:Ic,json:{write:!0}})],kd.prototype,"material",void 0),I([ni({Line:"line"},{readOnly:!0})],kd.prototype,"type",void 0),I([N({type:kde,json:{write:!0,default:"miter"}})],kd.prototype,"join",void 0),I([N({type:KV,json:{write:!0,default:"butt"}})],kd.prototype,"cap",void 0),I([N(yf)],kd.prototype,"size",void 0),I([N(Ade)],kd.prototype,"pattern",void 0),I([N({types:{key:"type",base:$R,typeMap:{style:$R}},json:{write:!0}})],kd.prototype,"marker",void 0),kd=sI=I([ke("esri.symbols.LineSymbol3DLayer")],kd);const vx=kd;var OR;const pRe=wa()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let O3=OR=class extends wt{clone(){return new OR({href:this.href,primitive:this.primitive})}};I([N({type:String,json:{read:NV,write:lv}})],O3.prototype,"href",void 0),I([ni(pRe)],O3.prototype,"primitive",void 0),O3=OR=I([ke("esri.symbols.support.ObjectSymbol3DLayerResource")],O3);const Vpt="sphere";var RR;let by=RR=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new RR({x:this.x,y:this.y,z:this.z})}};I([N({type:Number})],by.prototype,"x",void 0),I([N({type:Number})],by.prototype,"y",void 0),I([N({type:Number})],by.prototype,"z",void 0),by=RR=I([ke("esri.symbols.support.Symbol3DAnchorPosition3D")],by);var LR;let Ra=LR=class extends Mf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new LR({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};I([N({type:Ic,json:{write:!0}})],Ra.prototype,"material",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ra.prototype,"castShadows",void 0),I([N({type:O3,json:{write:!0}})],Ra.prototype,"resource",void 0),I([ni({Object:"object"},{readOnly:!0})],Ra.prototype,"type",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"width",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"height",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"depth",void 0),I([ni({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ra.prototype,"anchor",void 0),I([N({type:by,json:{type:[Number],read:{reader:t=>new by({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ra.prototype,"anchorPosition",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"heading",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"tilt",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"roll",void 0),I([N({readOnly:!0})],Ra.prototype,"isPrimitive",null),Ra=LR=I([ke("esri.symbols.ObjectSymbol3DLayer")],Ra);const JV=Ra;var FR;let al=FR=class extends Mf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new FR({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};I([N({type:Ic,json:{write:!0}})],al.prototype,"material",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],al.prototype,"castShadows",void 0),I([ni({Path:"path"},{readOnly:!0})],al.prototype,"type",void 0),I([N({type:["circle","quad"],json:{write:!0,default:"circle"}})],al.prototype,"profile",void 0),I([N({type:kde,json:{write:!0,default:"miter"}})],al.prototype,"join",void 0),I([N({type:rRe,json:{write:!0,default:"butt"}})],al.prototype,"cap",void 0),I([N({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],al.prototype,"width",void 0),I([At("width",["width","size","height"])],al.prototype,"readWidth",null),I([N({type:Number,json:{write:!0}})],al.prototype,"height",void 0),I([At("height",["height","size","width"])],al.prototype,"readHeight",null),I([N({type:["center","bottom","top"],json:{write:!0,default:"center"}})],al.prototype,"anchor",void 0),I([N({type:["heading","all"],json:{write:!0,default:"all"}})],al.prototype,"profileRotation",void 0),al=FR=I([ke("esri.symbols.PathSymbol3DLayer")],al);const QV=al;var zR;let Nb=zR=class extends wt{constructor(){super(...arguments),this.color=new fi([0,0,0,1]),this.size=0}clone(){const t={color:Ue(this.color),size:this.size};return new zR(t)}};I([N(Gg)],Nb.prototype,"color",void 0),I([N(yf)],Nb.prototype,"size",void 0),Nb=zR=I([ke("esri.symbols.support.Symbol3DHalo")],Nb);let RS=class extends Hs(wt){constructor(e){super(e),this.color=null}};I([N(Gg)],RS.prototype,"color",void 0),RS=I([ke("esri.symbols.support.Symbol3DTextBackground")],RS);var nI;let $l=nI=class extends Mf{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,s){const n={...s,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new nI({enabled:this.enabled,font:this.font&&Ue(this.font),halo:this.halo&&Ue(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Ue(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new nI({font:t.font!=null?t.font.clone():new sA,halo:mRe(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Ic({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new RS({color:t.backgroundColor.clone()}):null})}};function mRe(t,e){return t&&e!=null&&e>0?new Nb({color:Ue(t),size:e}):null}I([N({type:sA,json:{write:!0}})],$l.prototype,"font",null),I([Ft("font")],$l.prototype,"writeFont",null),I([N({type:Nb,json:{write:!0}})],$l.prototype,"halo",void 0),I([N({...$de,json:{default:"center",write:!0}})],$l.prototype,"horizontalAlignment",void 0),I([N({...Nde,json:{default:1,write:!0}})],$l.prototype,"lineHeight",void 0),I([N({type:Ic,json:{write:!0}})],$l.prototype,"material",void 0),I([N({type:RS,json:{write:!0}})],$l.prototype,"background",void 0),I([N(yf)],$l.prototype,"size",null),I([N({type:String,json:{write:!0}})],$l.prototype,"text",void 0),I([ni({Text:"text"},{readOnly:!0})],$l.prototype,"type",void 0),I([N({...Ode,json:{default:"baseline",write:!0}})],$l.prototype,"verticalAlignment",void 0),$l=nI=I([ke("esri.symbols.TextSymbol3DLayer")],$l);const _x=$l;var qR;let b0=qR=class extends Mf{constructor(t){super(t),this.color=VR.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new qR({color:Ue(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};I([N({type:fi,nonNullable:!0,json:{type:[wn],write:(t,e,i)=>e[i]=t.toArray(fi.AlphaMode.UNLESS_OPAQUE),default:()=>VR.clone(),defaultEquals:t=>t.toCss(!0)===VR.toCss(!0)}})],b0.prototype,"color",void 0),I([ni({Water:"water"},{readOnly:!0})],b0.prototype,"type",void 0),I([N({type:["small","medium","large"],json:{write:!0,default:"medium"}})],b0.prototype,"waterbodySize",void 0),I([N({type:Number,json:{write:!0,default:null}})],b0.prototype,"waveDirection",void 0),I([N({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],b0.prototype,"waveStrength",void 0),b0=qR=I([ke("esri.symbols.WaterSymbol3DLayer")],b0);const Lde=b0,VR=new fi([0,119,190]);var GR;let W1=GR=class extends Ei{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new GR({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};I([N({type:String})],W1.prototype,"name",void 0),I([N({type:String})],W1.prototype,"styleUrl",void 0),I([N({type:String})],W1.prototype,"styleName",void 0),I([N({type:Lc})],W1.prototype,"portal",void 0),W1=GR=I([ke("esri.symbols.support.StyleOrigin")],W1);const jR=W1;var BR;let LS=BR=class extends Ei{constructor(){super(...arguments),this.url=""}clone(){return new BR({url:this.url})}};I([N({type:String})],LS.prototype,"url",void 0),LS=BR=I([ke("esri.symbols.support.Thumbnail")],LS);const Fde={icon:My,object:JV,line:vx,path:QV,fill:jg,extrude:Ede,text:_x,water:Lde},gRe=ci.ofType({base:Mf,key:"type",typeMap:Fde,errorContext:"symbol-layer"});let Nd=class extends Ea{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,s=i==null?void 0:i.type,n=s||ci;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&zt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){QM(e,this._get("symbolLayers"))}readStyleOrigin(e,i,s){if(e.styleUrl&&e.name){const n=mx(e.styleUrl,s);return new jR({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new jR({portal:(s==null?void 0:s.portal)||Lc.getDefault(),styleName:e.styleName,name:e.name});s!=null&&s.messages&&s.messages.push(new ed("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:e}))}writeStyleOrigin(e,i,s,n){if(e.styleUrl&&e.name){let r=$C(e.styleUrl,n);Dc(r)&&(r=Vu(r)),i.styleOrigin={styleUrl:r,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!Cae(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new ed("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Mf||e&&Fde[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};I([N({json:{read:!1,write:!1}})],Nd.prototype,"color",null),I([N({type:gRe,nonNullable:!0,json:{write:!0}}),Sn(fde)],Nd.prototype,"symbolLayers",null),I([N({type:jR})],Nd.prototype,"styleOrigin",void 0),I([At("styleOrigin")],Nd.prototype,"readStyleOrigin",null),I([Ft("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Nd.prototype,"writeStyleOrigin",null),I([N({type:LS,json:{read:!1}})],Nd.prototype,"thumbnail",void 0),I([N({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Nd.prototype,"type",void 0),Nd=I([ke("esri.symbols.Symbol3D")],Nd);const Rv=Nd;let R3=class extends wt{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};I([N({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],R3.prototype,"type",void 0),I([N({readOnly:!0})],R3.prototype,"visible",void 0),R3=I([ke("esri.symbols.callouts.Callout3D")],R3);const zde=R3;var HR;let rI=HR=class extends wt{constructor(t){super(t),this.color=new fi("white")}clone(){return new HR({color:Ue(this.color)})}};I([N(Gg)],rI.prototype,"color",void 0),rI=HR=I([ke("esri.symbols.callouts.LineCallout3DBorder")],rI);const yRe=rI;var UR;let x0=UR=class extends zde{constructor(t){super(t),this.type="line",this.color=new fi([0,0,0,1]),this.size=Wu(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new UR({color:Ue(this.color),size:this.size,border:Ue(this.border)})}};I([ni({line:"line"})],x0.prototype,"type",void 0),I([N(Gg)],x0.prototype,"color",void 0),I([N(yf)],x0.prototype,"size",void 0),I([N({type:yRe,json:{write:!0}})],x0.prototype,"border",void 0),I([N({readOnly:!0})],x0.prototype,"visible",null),x0=UR=I([ke("esri.symbols.callouts.LineCallout3D")],x0);const qde=x0;function eG(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Vde(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!eG(t)}function Hpt(t){return t.type==="point-3d"||t.type==="label-3d"}function Upt(t){return t.horizontalAlignment==="center"}const Gde={types:{key:"type",base:zde,typeMap:{line:qde}},json:{write:!0}};var YR;let ib=YR=class extends wt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new YR({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};I([N(yf)],ib.prototype,"screenLength",void 0),I([N({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ib.prototype,"minWorldLength",void 0),I([N({type:Number,json:{write:!0}})],ib.prototype,"maxWorldLength",void 0),ib=YR=I([ke("esri.symbols.support.Symbol3DVerticalOffset")],ib);const tG=ib;var oI;const jde=ci.ofType({base:null,key:"type",typeMap:{text:_x}});let w0=oI=class extends Rv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new jde,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Vde(this)}hasVisibleVerticalOffset(){return eG(this)}clone(){return new oI({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail),callout:Ue(this.callout),verticalOffset:Ue(this.verticalOffset)})}static fromTextSymbol(t){return new oI({symbolLayers:new ci([_x.fromTextSymbol(t)])})}};I([N({type:tG,json:{write:!0}})],w0.prototype,"verticalOffset",void 0),I([N(Gde)],w0.prototype,"callout",void 0),I([N({json:{read:!1,write:!1}})],w0.prototype,"styleOrigin",void 0),I([N({type:jde})],w0.prototype,"symbolLayers",void 0),I([ni({LabelSymbol3D:"label-3d"},{readOnly:!0})],w0.prototype,"type",void 0),w0=oI=I([ke("esri.symbols.LabelSymbol3D")],w0);const nA=w0;var aI;const Bde=ci.ofType({base:null,key:"type",typeMap:{line:vx,path:QV}}),vRe=ci.ofType({base:null,key:"type",typeMap:{line:vx,path:QV}});let L3=aI=class extends Rv{constructor(t){super(t),this.symbolLayers=new Bde,this.type="line-3d"}clone(){return new aI({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleLineSymbol(t){return new aI({symbolLayers:new ci([vx.fromSimpleLineSymbol(t)])})}};I([N({type:Bde,json:{type:vRe}})],L3.prototype,"symbolLayers",void 0),I([ni({LineSymbol3D:"line-3d"},{readOnly:!0})],L3.prototype,"type",void 0),L3=aI=I([ke("esri.symbols.LineSymbol3D")],L3);const Lv=L3;let S0=class extends Ea{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};I([N({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],S0.prototype,"angle",void 0),I([N({type:["simple-marker","picture-marker"],readOnly:!0})],S0.prototype,"type",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],S0.prototype,"xoffset",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],S0.prototype,"yoffset",void 0),I([N({cast:t=>t==="auto"?t:sx(fs(t)),json:{write:!0}})],S0.prototype,"size",void 0),S0=I([ke("esri.symbols.MarkerSymbol")],S0);const Hde=S0;var lI;const Ude=ci.ofType({base:null,key:"type",typeMap:{fill:jg}});let F3=lI=class extends Rv{constructor(t){super(t),this.symbolLayers=new Ude,this.type="mesh-3d"}clone(){return new lI({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleFillSymbol(t){return new lI({symbolLayers:new ci([jg.fromSimpleFillSymbol(t)])})}};I([N({type:Ude})],F3.prototype,"symbolLayers",void 0),I([ni({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],F3.prototype,"type",void 0),F3=lI=I([ke("esri.symbols.MeshSymbol3D")],F3);const bx=F3;function _Re(t,e,i){return e.imageData?Pae({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Yde(e.url,i)}function Yde(t,e){if(!Dc(t)){const i=xRe(e);if(i)return b2(i,"images",t)}return mx(t,e)}function bRe(t,e,i,s){if(Av(t)){const n=lE(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&lv(i.url,e,"url",s)}else lv(t,e,"url",s)}const Xde={json:{read:{source:["imageData","url"],reader:_Re},write:{writer(t,e,i,s){bRe(t,e,this.source,s)}}}},Wde={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const s={};return e.imageData&&(s.imageData=e.imageData),e.contentType&&(s.contentType=e.contentType),e.url&&(s.url=Yde(e.url,i)),s}}}};function xRe(t){var n,r;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const s=i==null?void 0:i.type;return s==="feature"||s==="stream"?(n=i.parsedUrl)==null?void 0:n.path:s==="map-image"||s==="tile"?(r=t.url)==null?void 0:r.path:null}var XR;let vu=XR=class extends Pde{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=fs(i)),s!=null&&(n.height=fs(s)),n}clone(){const t=new XR({color:Ue(this.color),height:this.height,outline:Ue(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Ue(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};I([ni({esriPFS:"picture-fill"},{readOnly:!0})],vu.prototype,"type",void 0),I([N(Xde)],vu.prototype,"url",void 0),I([N({type:Number,json:{write:!0}})],vu.prototype,"xscale",void 0),I([N({type:Number,json:{write:!0}})],vu.prototype,"yscale",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],vu.prototype,"width",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],vu.prototype,"height",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],vu.prototype,"xoffset",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],vu.prototype,"yoffset",void 0),I([N(Wde)],vu.prototype,"source",void 0),vu=XR=I([ke("esri.symbols.PictureFillSymbol")],vu);const iG=vu;var WR;let xh=WR=class extends Hde{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e!=null&&(s.width=fs(e)),i!=null&&(s.height=fs(i)),s}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new WR({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Ue(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};I([N({json:{write:!1}})],xh.prototype,"color",void 0),I([ni({esriPMS:"picture-marker"},{readOnly:!0})],xh.prototype,"type",void 0),I([N(Xde)],xh.prototype,"url",void 0),I([N(Wde)],xh.prototype,"source",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],xh.prototype,"height",void 0),I([At("height",["height","size"])],xh.prototype,"readHeight",null),I([N({type:Number,cast:fs,json:{write:!0}})],xh.prototype,"width",void 0),I([N({json:{write:!1}})],xh.prototype,"size",void 0),xh=WR=I([ke("esri.symbols.PictureMarkerSymbol")],xh);const jC=xh;var Z1;const Zde=ci.ofType({base:null,key:"type",typeMap:{icon:My,object:JV,text:_x}});let K1=Z1=class extends Rv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Zde,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Vde(this)}hasVisibleVerticalOffset(){return eG(this)}clone(){return new Z1({verticalOffset:Ue(this.verticalOffset),callout:Ue(this.callout),styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Z1({symbolLayers:new ci([My.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Z1({symbolLayers:new ci([My.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var s,n;if(((n=(s=t.data)==null?void 0:s.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Z1(i!=null&&i.callout?{symbolLayers:new ci([My.fromCIMSymbol(t)]),callout:new qde({size:.5,color:new fi([0,0,0])}),verticalOffset:new tG({screenLength:40})}:{symbolLayers:new ci([My.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Z1({symbolLayers:new ci([_x.fromTextSymbol(t)])})}};I([N({type:tG,json:{write:!0}})],K1.prototype,"verticalOffset",void 0),I([N(Gde)],K1.prototype,"callout",void 0),I([N({type:Zde,json:{origins:{"web-scene":{write:!0}}}})],K1.prototype,"symbolLayers",void 0),I([ni({PointSymbol3D:"point-3d"},{readOnly:!0})],K1.prototype,"type",void 0),K1=Z1=I([ke("esri.symbols.PointSymbol3D")],K1);const qp=K1;var z3;const Kde=ci.ofType({base:null,key:"type",typeMap:{extrude:Ede,fill:jg,icon:My,line:vx,object:JV,text:_x,water:Lde}});let q3=z3=class extends Rv{constructor(t){super(t),this.symbolLayers=new Kde,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&v2(zt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&v2(zt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(mf(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Jp))}clone(){return new z3({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromJSON(t){var i;const e=new z3;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const s=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(s.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new z3({symbolLayers:new ci([jg.fromSimpleFillSymbol(t)])})}};I([N({type:Kde,json:{write:!0}})],q3.prototype,"symbolLayers",void 0),I([ni({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],q3.prototype,"type",void 0),q3=z3=I([ke("esri.symbols.PolygonSymbol3D")],q3);const Bg=q3;var ZR;const M8=new ps({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let J1=ZR=class extends Pde{constructor(...t){super(...t),this.color=new fi([0,0,0,.25]),this.outline=new Al,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e&&(s.outline=e),i&&(s.color=i),s}clone(){return new ZR({color:Ue(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};I([N()],J1.prototype,"color",void 0),I([N()],J1.prototype,"outline",void 0),I([ni({esriSFS:"simple-fill"},{readOnly:!0})],J1.prototype,"type",void 0),I([N({type:M8.apiValues,json:{read:M8.read,write:M8.write}})],J1.prototype,"style",void 0),J1=ZR=I([ke("esri.symbols.SimpleFillSymbol")],J1);const gm=J1,Xpt=Object.freeze(Object.defineProperty({__proto__:null,default:gm},Symbol.toStringTag,{value:"Module"}));var KR;const A8=new ps({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let $d=KR=class extends Hde{constructor(...t){super(...t),this.color=new fi([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Al}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=fs(e)),i&&(n.outline=i),s&&(n.color=s),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new KR({angle:this.angle,color:Ue(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};I([N()],$d.prototype,"color",void 0),I([Ft("color")],$d.prototype,"writeColor",null),I([ni({esriSMS:"simple-marker"},{readOnly:!0})],$d.prototype,"type",void 0),I([N()],$d.prototype,"size",void 0),I([N({type:A8.apiValues,json:{read:A8.read,write:A8.write}})],$d.prototype,"style",void 0),I([N({type:String,json:{write:!0}})],$d.prototype,"path",null),I([N({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Al}},json:{default:null,write:!0}})],$d.prototype,"outline",void 0),$d=KR=I([ke("esri.symbols.SimpleMarkerSymbol")],$d);const zc=$d,Wpt=Object.freeze(Object.defineProperty({__proto__:null,default:zc},Symbol.toStringTag,{value:"Module"}));var JR;let jn=JR=class extends Ea{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new sA,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.text=t),e&&(s.font=e),i&&(s.color=i),s}writeLineWidth(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}castLineWidth(t){return fs(t)}writeLineHeight(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}clone(){return new JR({angle:this.angle,backgroundColor:Ue(this.backgroundColor),borderLineColor:Ue(this.borderLineColor),borderLineSize:this.borderLineSize,color:Ue(this.color),font:this.font&&this.font.clone(),haloColor:Ue(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};I([N({type:fi,json:{write:!0}})],jn.prototype,"backgroundColor",void 0),I([N({type:fi,json:{write:!0}})],jn.prototype,"borderLineColor",void 0),I([N({type:Number,json:{write:!0},cast:fs})],jn.prototype,"borderLineSize",void 0),I([N({type:sA,json:{write:!0}})],jn.prototype,"font",void 0),I([N({...$de,json:{write:!0}})],jn.prototype,"horizontalAlignment",void 0),I([N({type:Boolean,json:{write:!0}})],jn.prototype,"kerning",void 0),I([N({type:fi,json:{write:!0}})],jn.prototype,"haloColor",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],jn.prototype,"haloSize",void 0),I([N({type:Boolean,json:{write:!0}})],jn.prototype,"rightToLeft",void 0),I([N({type:Boolean,json:{write:!0}})],jn.prototype,"rotated",void 0),I([N({type:String,json:{write:!0}})],jn.prototype,"text",void 0),I([ni({esriTS:"text"},{readOnly:!0})],jn.prototype,"type",void 0),I([N({...Ode,json:{write:!0}})],jn.prototype,"verticalAlignment",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],jn.prototype,"xoffset",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],jn.prototype,"yoffset",void 0),I([N({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],jn.prototype,"angle",void 0),I([N({type:Number,json:{write:!0}})],jn.prototype,"width",void 0),I([N({type:Number})],jn.prototype,"lineWidth",void 0),I([Ft("lineWidth")],jn.prototype,"writeLineWidth",null),I([Sn("lineWidth")],jn.prototype,"castLineWidth",null),I([N(Nde)],jn.prototype,"lineHeight",void 0),I([Ft("lineHeight")],jn.prototype,"writeLineHeight",null),jn=JR=I([ke("esri.symbols.TextSymbol")],jn);const xx=jn;var QR;let wh=QR=class extends Ea{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Lc.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new QR({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,s=i?this._fetchCacheKey:null;if(i!=null){const l=s&&i.get(s);if(l)return l.clone()}const{resolveWebStyleSymbol:n}=await nt(()=>import("./webStyleSymbolUtils-BFuOnoZw.js"),__vite__mapDeps([60,61]),import.meta.url);Ql(e);const r=n(this,{portal:this.portal},t,e);r.catch(l=>{zt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",l)});const o=await r;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(i!=null&&i.set(s,o.clone()),o):null}};I([N({json:{write:!1}})],wh.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],wh.prototype,"styleName",void 0),I([N({type:Lc,json:{write:!1}})],wh.prototype,"portal",void 0),I([N({type:String,json:{read:NV,write:lv}})],wh.prototype,"styleUrl",void 0),I([N({type:LS,json:{read:!1}})],wh.prototype,"thumbnail",void 0),I([N({type:String,json:{write:!0}})],wh.prototype,"name",void 0),I([ni({styleSymbolReference:"web-style"},{readOnly:!0})],wh.prototype,"type",void 0),I([N()],wh.prototype,"_fetchCacheKey",null),wh=QR=I([ke("esri.symbols.WebStyleSymbol")],wh);const Fv=wh;function Zpt(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function mK(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Fu={base:Ea,key:"type",typeMap:{"simple-fill":gm,"picture-fill":iG,"picture-marker":jC,"simple-line":Al,"simple-marker":zc,text:xx,"label-3d":nA,"line-3d":Lv,"mesh-3d":bx,"point-3d":qp,"polygon-3d":Bg,"web-style":Fv,cim:Vg},errorContext:"symbol"},Kpt={base:Ea,key:"type",typeMap:{"picture-marker":jC,"simple-marker":zc,"point-3d":qp,cim:Vg},errorContext:"symbol"},Jpt={base:Ea,key:"type",typeMap:{"simple-line":Al,"line-3d":Lv,cim:Vg},errorContext:"symbol"},Qpt={base:Ea,key:"type",typeMap:{"simple-fill":gm,"picture-fill":iG,"polygon-3d":Bg,cim:Vg},errorContext:"symbol"},wRe={base:Ea,key:"type",typeMap:{"picture-marker":jC,"simple-marker":zc,text:xx,"web-style":Fv,cim:Vg},errorContext:"symbol"},SRe=nx({types:Fu}),Jde={base:Ea,key:"type",typeMap:{"simple-fill":gm,"picture-fill":iG,"picture-marker":jC,"simple-line":Al,"simple-marker":zc,text:xx,"line-3d":Lv,"mesh-3d":bx,"point-3d":qp,"polygon-3d":Bg,"web-style":Fv,cim:Vg},errorContext:"symbol"},ERe={base:Ea,key:"type",typeMap:{text:xx,"label-3d":nA},errorContext:"symbol"},gK={base:Ea,key:"type",typeMap:{"line-3d":Lv,"mesh-3d":bx,"point-3d":qp,"polygon-3d":Bg,"web-style":Fv,cim:Vg},errorContext:"symbol"},CRe={base:Ea,key:"type",typeMap:{"label-3d":nA},errorContext:"symbol"},Qde=Yu(Fu);var eL;function PRe(t){if(!t)return null;const e={};for(const i in t){const s=MC(t[i]);s&&(e[i]=s)}return Object.keys(e).length!==0?e:null}function TRe(t){if(t==null)return null;const e={};for(const i in t){const s=t[i];s&&(e[i]=s.toJSON())}return Object.keys(e).length!==0?e:null}let Ol=eL=class extends Hs(wt){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:xS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&qPe(zt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}get version(){return this._version}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new eL({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const e=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[e,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:TRe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:k9(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=s),t==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Eg(()=>{var t,e;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(e=this.geometry.transform)==null?void 0:e.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:t,origin:e})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===e||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=e,this.notifyMeshTransformChanged())}),Eg(()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var e;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(e=t.transform)==null?void 0:e.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,e)=>t===e,sync:!0})])}};I([N({value:null,json:{read:PRe}})],Ol.prototype,"aggregateGeometries",null),I([N({value:null})],Ol.prototype,"attributes",null),I([N({value:null,types:AC,json:{read:MC}})],Ol.prototype,"geometry",null),I([N({type:Boolean})],Ol.prototype,"isAggregate",void 0),I([N({clonable:"reference"})],Ol.prototype,"layer",void 0),I([N({clonable:"reference"})],Ol.prototype,"origin",void 0),I([N({type:FC})],Ol.prototype,"popupTemplate",void 0),I([N({clonable:"reference"})],Ol.prototype,"sourceLayer",void 0),I([N({value:null,types:Fu})],Ol.prototype,"symbol",null),I([N({clonable:!1,json:{read:!1,write:!1}})],Ol.prototype,"_version",void 0),I([N({type:Boolean,value:!0})],Ol.prototype,"visible",null),Ol=eL=I([ke("esri.Graphic")],Ol);const tm=Ol;var tL;let V3=tL=class extends wt{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new tL({minValue:this.minValue,maxValue:this.maxValue})}};I([N({type:Number,json:{write:!0}})],V3.prototype,"minValue",void 0),I([N({type:Number,json:{write:!0}})],V3.prototype,"maxValue",void 0),V3=tL=I([ke("esri.renderers.support.AuthoringInfoClassBreakInfo")],V3);var iL;let G0=iL=class extends wt{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new iL({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Ue(this.classBreakInfos)})}};I([N({type:String,json:{write:!0}})],G0.prototype,"field",void 0),I([N({type:String,json:{write:!0}})],G0.prototype,"normalizationField",void 0),I([N({type:String,json:{write:!0}})],G0.prototype,"label",void 0),I([N({type:[V3],json:{write:!0}})],G0.prototype,"classBreakInfos",void 0),G0=iL=I([ke("esri.renderers.support.AuthoringInfoFieldInfo")],G0);var sL;let sb=sL=class extends wt{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new sL({label:this.label,value:this.value,size:this.size})}};I([N({type:String,json:{write:!0}})],sb.prototype,"label",void 0),I([N({type:Number,json:{write:!0}})],sb.prototype,"size",void 0),I([N({type:Number,json:{write:!0}})],sb.prototype,"value",void 0),sb=sL=I([ke("esri.renderers.support.AuthoringInfoSizeStop")],sb);const IRe=sb;var nL;const m4=new ps({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),g4=new ps({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),yK={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},vK=["high-to-low","above-and-below","centered-on","extremes"],_K=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],bK=["seconds","minutes","hours","days","months","years"],MRe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let No=nL=class extends wt{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new nL({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:Ue(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};I([N({types:yK,json:{write:!0}})],No.prototype,"endTime",void 0),I([Sn("endTime")],No.prototype,"castEndTime",null),I([N({type:String,json:{write:!0}})],No.prototype,"field",void 0),I([N({type:Number,json:{write:!0}})],No.prototype,"maxSliderValue",void 0),I([N({type:Number,json:{write:!0}})],No.prototype,"minSliderValue",void 0),I([N({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],No.prototype,"normalizationField",null),I([N({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],No.prototype,"referenceSizeScale",null),I([N({type:MRe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],No.prototype,"referenceSizeSymbolStyle",null),I([N({types:yK,json:{write:!0}})],No.prototype,"startTime",void 0),I([Sn("startTime")],No.prototype,"castStartTime",null),I([N({type:[IRe],json:{origins:{"web-scene":{write:!1}},write:!0}})],No.prototype,"sizeStops",null),I([N({type:m4.apiValues,value:null,json:{type:m4.jsonValues,read:m4.read,write:m4.write}})],No.prototype,"style",null),I([N({type:_K,value:null,json:{type:_K,origins:{"web-scene":{type:vK,write:{writer:(t,e)=>{vK.includes(t)&&(e.theme=t)}}}},write:!0}})],No.prototype,"theme",null),I([N({type:g4.apiValues,json:{type:g4.jsonValues,read:g4.read,write:g4.write}})],No.prototype,"type",void 0),I([N({type:bK,json:{type:bK,write:!0}})],No.prototype,"units",void 0),No=nL=I([ke("esri.renderers.support.AuthoringInfoVisualVariable")],No);const ARe=No;let cI=class extends wt{constructor(e){super(e),this.type=null}};I([N({readOnly:!0,json:{read:!1,write:!0}})],cI.prototype,"type",void 0),cI=I([ke("esri.rest.support.ColorRamp")],cI);const sG=cI;var rL;let Q1=rL=class extends sG{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new rL({fromColor:Ue(this.fromColor),toColor:Ue(this.toColor),algorithm:this.algorithm})}};I([ni({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Q1.prototype,"algorithm",void 0),I([N({type:fi,json:{type:[wn],write:!0}})],Q1.prototype,"fromColor",void 0),I([N({type:fi,json:{type:[wn],write:!0}})],Q1.prototype,"toColor",void 0),I([N({type:["algorithmic"]})],Q1.prototype,"type",void 0),Q1=rL=I([ke("esri.rest.support.AlgorithmicColorRamp")],Q1);const nG=Q1;var oL;let G3=oL=class extends sG{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new oL({colorRamps:Ue(this.colorRamps)})}};I([N({type:[nG],json:{write:!0}})],G3.prototype,"colorRamps",void 0),I([N({type:["multipart"]})],G3.prototype,"type",void 0),G3=oL=I([ke("esri.rest.support.MultipartColorRamp")],G3);const efe=G3,DRe={key:"type",base:sG,typeMap:{algorithmic:nG,multipart:efe}};function kRe(t){return t!=null&&t.type?t.type==="algorithmic"?nG.fromJSON(t):t.type==="multipart"?efe.fromJSON(t):null:null}var aL;const I1=new ps({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),y4=new ps({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),xK=new ps({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),wK=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],NRe=["high-to-low","above-and-below","above","below"],$Re=["flow-line","wave-front"],ORe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let gr=aL=class extends wt{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?kRe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new aL({classificationMethod:this.classificationMethod,colorRamp:Ue(this.colorRamp),fadeRatio:Ue(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:Ue(this.field1),field2:Ue(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};I([N({type:I1.apiValues,value:null,json:{type:I1.jsonValues,read:I1.read,write:I1.write,origins:{"web-document":{default:"manual",type:I1.jsonValues,read:I1.read,write:I1.write}}}})],gr.prototype,"classificationMethod",null),I([N({types:DRe,json:{write:!0}})],gr.prototype,"colorRamp",void 0),I([At("colorRamp")],gr.prototype,"readColorRamp",null),I([N({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],gr.prototype,"fadeRatio",void 0),I([N({type:[String],value:null,json:{write:!0}})],gr.prototype,"fields",null),I([N({type:G0,value:null,json:{write:!0}})],gr.prototype,"field1",null),I([N({type:G0,value:null,json:{write:!0}})],gr.prototype,"field2",null),I([N({type:$Re,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],gr.prototype,"flowTheme",null),I([N({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],gr.prototype,"focus",null),I([N({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],gr.prototype,"isAutoGenerated",void 0),I([N({type:Number,value:null,json:{type:wn,write:!0}})],gr.prototype,"numClasses",null),I([N({type:wK,json:{type:wK,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],gr.prototype,"lengthUnit",void 0),I([N({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],gr.prototype,"maxSliderValue",void 0),I([N({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],gr.prototype,"minSliderValue",void 0),I([N({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],gr.prototype,"statistics",null),I([N({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],gr.prototype,"standardDeviationInterval",null),I([N({type:y4.apiValues,value:null,json:{type:y4.jsonValues,read:y4.read,write:y4.write,origins:{"web-scene":{type:xK.jsonValues,write:{writer:xK.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],gr.prototype,"type",null),I([N({type:[ARe],json:{write:!0}})],gr.prototype,"visualVariables",void 0),I([N({type:ORe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],gr.prototype,"univariateSymbolStyle",null),I([N({type:NRe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],gr.prototype,"univariateTheme",null),gr=aL=I([ke("esri.renderers.support.AuthoringInfo")],gr);const rG=gr,D8=new ps({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let j3=class extends wt{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};I([N({type:rG,json:{write:!0}})],j3.prototype,"authoringInfo",void 0),I([N({type:D8.apiValues,readOnly:!0,json:{type:D8.jsonValues,read:!1,write:{writer:D8.write,ignoreOrigin:!0}}})],j3.prototype,"type",void 0),j3=I([ke("esri.renderers.Renderer")],j3);const ym=j3;function RRe(t){var e,i;return((i=(e=t.match(LRe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const LRe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let B3=class extends Hs(wt){constructor(){super(...arguments),this.showLegend=null,this.title=null}};I([N({type:Boolean,json:{write:!0}})],B3.prototype,"showLegend",void 0),I([N({type:String,json:{write:!0}})],B3.prototype,"title",void 0),B3=I([ke("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],B3);const tfe=B3,k8=new ps({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Sh=class extends wt{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(zt.getLogger(this).error(".field: field must be a string value"),null):bC(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};I([N()],Sh.prototype,"index",void 0),I([N({type:k8.apiValues,readOnly:!0,json:{read:k8.read,write:k8.write}})],Sh.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],Sh.prototype,"field",void 0),I([Sn("field")],Sh.prototype,"castField",null),I([N({type:String,json:{write:!0}})],Sh.prototype,"valueExpression",void 0),I([N({type:String,json:{write:!0}})],Sh.prototype,"valueExpressionTitle",void 0),I([N({readOnly:!0})],Sh.prototype,"arcadeRequired",null),I([N({type:tfe,json:{write:!0}})],Sh.prototype,"legendOptions",void 0),Sh=I([ke("esri.renderers.visualVariables.VisualVariable")],Sh);const wx=Sh;var lL;let ey=lL=class extends wt{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new lL({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};I([N({type:fi,json:{type:[wn],write:!0}})],ey.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],ey.prototype,"label",void 0),I([N({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],ey.prototype,"value",void 0),I([Ft("value")],ey.prototype,"writeValue",null),ey=lL=I([ke("esri.renderers.visualVariables.support.ColorStop")],ey);const FRe=ey;var cL;let ty=cL=class extends wx{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new cL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};I([N({readOnly:!0})],ty.prototype,"cache",null),I([N({type:["color"],json:{type:["colorInfo"]}})],ty.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],ty.prototype,"normalizationField",void 0),I([N({type:[FRe],json:{write:!0}})],ty.prototype,"stops",null),ty=cL=I([ke("esri.renderers.visualVariables.ColorVariable")],ty);const ife=ty;var uL;let E0=uL=class extends wt{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return a6(e.transparency)}writeOpacity(t,e,i){e[i]=LV(t)}clone(){return new uL({label:this.label,opacity:this.opacity,value:this.value})}};I([N({type:String,json:{write:!0}})],E0.prototype,"label",void 0),I([N({type:Number,json:{type:wn,write:{target:"transparency"}}})],E0.prototype,"opacity",void 0),I([At("opacity",["transparency"])],E0.prototype,"readOpacity",null),I([Ft("opacity")],E0.prototype,"writeOpacity",null),I([N({type:Number,json:{write:!0}})],E0.prototype,"value",void 0),E0=uL=I([ke("esri.renderers.visualVariables.support.OpacityStop")],E0);const zRe=E0;var hL;let iy=hL=class extends wx{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new hL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};I([N({readOnly:!0})],iy.prototype,"cache",null),I([N({type:["opacity"],json:{type:["transparencyInfo"]}})],iy.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],iy.prototype,"normalizationField",void 0),I([N({type:[zRe],json:{write:!0}})],iy.prototype,"stops",null),iy=hL=I([ke("esri.renderers.visualVariables.OpacityVariable")],iy);const oG=iy;var dL;let sy=dL=class extends wx{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new dL({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};I([N({readOnly:!0})],sy.prototype,"cache",null),I([N({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],sy.prototype,"axis",void 0),I([N({type:["rotation"],json:{type:["rotationInfo"]}})],sy.prototype,"type",void 0),I([N({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],sy.prototype,"rotationType",void 0),sy=dL=I([ke("esri.renderers.visualVariables.RotationVariable")],sy);const sfe=sy;function qRe(t){return fs(t)}var fL;let C0=fL=class extends wt{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new fL({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};I([N({type:String,json:{write:!0}})],C0.prototype,"label",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],C0.prototype,"size",void 0),I([N({type:Number,json:{write:!0}})],C0.prototype,"value",void 0),I([N({type:Boolean,json:{write:!1}})],C0.prototype,"useMinValue",void 0),I([N({type:Boolean,json:{write:!1}})],C0.prototype,"useMaxValue",void 0),C0=fL=I([ke("esri.renderers.visualVariables.support.SizeStop")],C0);const uI=C0;let hI=class extends tfe{constructor(){super(...arguments),this.customValues=null}};I([N({type:[Number],json:{write:!0}})],hI.prototype,"customValues",void 0),hI=I([ke("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],hI);const VRe=hI;var Hp,xo;function $b(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function _E(t){return t!=null&&!isNaN(t)&&isFinite(t)}function nfe(t){return t.valueExpression?Hp.Expression:t.field&&typeof t.field=="string"?Hp.Field:Hp.Unknown}function GRe(t,e){const i=e||nfe(t),s=t.valueUnit||"unknown";return i===Hp.Unknown?xo.Constant:t.stops?xo.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?xo.ClampedLinear:s==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?xo.Proportional:xo.Additive:xo.Identity:xo.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Hp||(Hp={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(xo||(xo={}));function rmt(t){}function omt(t){return()=>t}const rfe=()=>zt.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),rA=t=>rfe().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),oA=()=>rfe().error("Use of arcade expressions requires an arcade context"),SK=new tm,dI=Math.PI,ofe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function afe(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="color"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void rA("ColorVariable");const n=typeof e=="number",r=n?null:e,o=r==null?void 0:r.attributes;let l=n?e:null;const u=s.field,{ipData:f,hasExpression:y}=s.cache;let _=s.cache.compiledFunc;if(!u&&!y){const P=s.stops;return P&&P[0]&&P[0].color}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void oA();const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,k=A.getViewInfo(P),$=A.createExecContext(r,k,i.timeZone);if(!_){const F=A.createSyntaxTree(s.valueExpression);_=A.createFunction(F),s.cache.compiledFunc=_}l=A.executeFunction(_,$)}else o&&(l=o[u]);const x=s.normalizationField,S=o!=null&&x!=null?parseFloat(o[x]):void 0;if(l!=null&&(!x||n||!isNaN(S)&&S!==0)){isNaN(S)||n||(l/=S);const P=aG(l,f);if(P){const A=P[0],k=P[1],$=A===k?s.stops[A].color:fi.blendColors(s.stops[A].color,s.stops[k].color,P[2],i!=null?i.color:void 0);return new fi($)}}}function lfe(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="opacity"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void rA("OpacityVariable");const n=typeof e=="number",r=n?null:e,o=r==null?void 0:r.attributes;let l=n?e:null;const u=s.field,{ipData:f,hasExpression:y}=s.cache;let _=s.cache.compiledFunc;if(!u&&!y){const P=s.stops;return P&&P[0]&&P[0].opacity}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void oA();const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,k=A.getViewInfo(P),$=A.createExecContext(r,k,i.timeZone);if(!_){const F=A.createSyntaxTree(s.valueExpression);_=A.createFunction(F),s.cache.compiledFunc=_}l=A.executeFunction(_,$)}else o&&(l=o[u]);const x=s.normalizationField,S=o!=null&&x!=null?parseFloat(o[x]):void 0;if(l!=null&&(!x||n||!isNaN(S)&&S!==0)){isNaN(S)||n||(l/=S);const P=aG(l,f);if(P){const A=P[0],k=P[1];if(A===k)return s.stops[A].opacity;{const $=s.stops[A].opacity;return $+(s.stops[k].opacity-$)*P[2]}}}}function cfe(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(S=>S.type==="rotation"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void rA("RotationVariable");const n=s.axis||"heading",r=n==="heading"&&s.rotationType==="arithmetic"?90:0,o=n==="heading"&&s.rotationType==="arithmetic"?-1:1,l=typeof e=="number"?null:e,u=l==null?void 0:l.attributes,f=s.field,{hasExpression:y}=s.cache;let _=s.cache.compiledFunc,x=0;if(!f&&!y)return x;if(y){if((i==null?void 0:i.arcade)==null)return void oA();const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},P=i.arcade.arcadeUtils,A=P.getViewInfo(S),k=P.createExecContext(l,A,i.timeZone);if(!_){const $=P.createSyntaxTree(s.valueExpression);_=P.createFunction($),s.cache.compiledFunc=_}x=P.executeFunction(_,k)}else u&&(x=u[f]||0);return x=typeof x!="number"||isNaN(x)?null:r+o*x,x}function jRe(t,e,i){const s=typeof e=="number",n=s?null:e,r=n==null?void 0:n.attributes;let o=s?e:null;const{isScaleDriven:l}=t.cache;let u=t.cache.compiledFunc;if(l){const y=i!=null?i.scale:void 0,_=i!=null?i.view:void 0;o=y==null||_==="3d"?BRe(t):y}else if(!s)switch(t.inputValueType){case Hp.Expression:{if((i==null?void 0:i.arcade)==null)return void oA();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(y),S=_.createExecContext(n,x,i.timeZone);if(!u){const P=_.createSyntaxTree(t.valueExpression);u=_.createFunction(P),t.cache.compiledFunc=u}o=_.executeFunction(u,S);break}case Hp.Field:r&&(o=r[t.field]);break;case Hp.Unknown:o=null}if(!_E(o))return null;if(s||!t.normalizationField)return o;const f=r?parseFloat(r[t.normalizationField]):null;return _E(f)&&f!==0?o/f:null}function BRe(t){let e=null,i=null;const s=t.stops;return s?(e=s[0].value,i=s[s.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function aA(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(r=>r.type==="size"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void rA("SizeVariable");const n=hfe(jRe(s,e,i),s,e,i,s.cache.ipData);return n==null||isNaN(n)?0:n}function tc(t,e,i){return t==null?null:$b(t)?aA(t,e,i):_E(t)?t:null}function ufe(t,e,i){return _E(i)&&t>i?i:_E(e)&&t<e?e:t}function HRe(t,e,i,s){return t+((tc(e.minSize,i,s)||e.minDataValue)??0)}function URe(t,e,i){const s=t.stops;let n=(s==null?void 0:s.length)&&s[0].size;return n==null&&(n=t.minSize),tc(n,e,i)}function YRe(t,e,i,s){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),r=tc(e.minSize,i,s),o=tc(e.maxSize,i,s),l=s!=null?s.shape:void 0;if(t<=e.minDataValue)return r;if(t>=e.maxDataValue)return o;if(r==null||o==null)return null;if(e.scaleBy==="area"&&l){const u=l==="circle",f=u?dI*(r/2)**2:r*r,y=f+n*((u?dI*(o/2)**2:o*o)-f);return u?2*Math.sqrt(y/dI):Math.sqrt(y)}return r+n*(o-r)}function XRe(t,e,i,s){const n=s!=null?s.shape:void 0,r=t/e.minDataValue,o=tc(e.minSize,i,s),l=tc(e.maxSize,i,s);let u=null;return u=n==="circle"?2*Math.sqrt(r*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(r*o**2):r*o,ufe(u,o,l)}function WRe(t,e,i,s,n){var u,f,y;const[r,o,l]=aG(t,n);if(r===o)return tc((u=e.stops)==null?void 0:u[r].size,i,s);{const _=tc((f=e.stops)==null?void 0:f[r].size,i,s);return _+(tc((y=e.stops)==null?void 0:y[o].size,i,s)-_)*l}}function ZRe(t,e,i,s){const n=((s==null?void 0:s.resolution)??1)*WM[e.valueUnit],r=tc(e.minSize,i,s),o=tc(e.maxSize,i,s),{valueRepresentation:l}=e;let u=null;return u=l==="area"?2*Math.sqrt(t/dI)/n:l==="radius"||l==="distance"?2*t/n:t/n,ufe(u,r,o)}function hfe(t,e,i,s,n){switch(e.transformationType){case xo.Additive:return HRe(t,e,i,s);case xo.Constant:return URe(e,i,s);case xo.ClampedLinear:return YRe(t,e,i,s);case xo.Proportional:return XRe(t,e,i,s);case xo.Stops:return WRe(t,e,i,s,n);case xo.RealWorldSize:return ZRe(t,e,i,s);case xo.Identity:return t;case xo.Unknown:return null}}function KRe(t,e,i){const{isScaleDriven:s}=t.cache;if(!(s&&i==="3d"||e))return null;const n={scale:e,view:i};let r=tc(t.minSize,SK,n),o=tc(t.maxSize,SK,n);if(r!=null||o!=null){if(r>o){const l=o;o=r,r=l}return{minSize:r,maxSize:o}}}function JRe(t,e,i){if(!t.visualVariables)return;const s=[],n=[],r=[],o=[],l=[];for(const u of t.visualVariables)switch(u.type){case"color":n.push(u);break;case"opacity":r.push(u);break;case"rotation":l.push(u);break;case"size":o.push(u)}return n.forEach(u=>{const f=afe(u,e,i);s.push({variable:u,value:f})}),r.forEach(u=>{const f=lfe(u,e,i);s.push({variable:u,value:f})}),l.forEach(u=>{const f=cfe(u,e,i);s.push({variable:u,value:f})}),o.forEach(u=>{const f=aA(u,e,i);s.push({variable:u,value:f})}),s.filter(u=>u.value!=null)}function aG(t,e){if(!e)return;let i=0,s=e.length-1;return e.some((n,r)=>t<n?(s=r,!0):(i=r,!1)),[i,s,(t-e[i])/(e[s]-e[i])]}function QRe(t,e,i){const s=["proportional","proportional","proportional"];for(const n of t){const r=n.useSymbolValue?"symbol-value":aA(n,e,i);switch(n.axis){case"width":s[0]=r;break;case"depth":s[1]=r;break;case"height":s[2]=r;break;case"width-and-depth":s[0]=r,s[1]=r;break;case"all":case void 0:case null:s[0]=r,s[1]=r,s[2]=r;break;default:n.axis}}return s}const amt=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:QRe,getColor:afe,getOpacity:lfe,getRotationAngle:cfe,getSize:aA,getSizeForValue:hfe,getSizeFromNumberOrVariable:tc,getSizeRangeAtScale:KRe,getVisualVariableValues:JRe,viewScaleRE:ofe},Symbol.toStringTag,{value:"Module"}));var pL;const v4=new ps({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),mL=new ps({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function EK(t){if(t!=null)return typeof t=="string"||typeof t=="number"?qRe(t):t.type==="size"?$b(t)?t:(delete(t={...t}).type,new qs(t)):void 0}function CK(t,e,i){if(typeof t!="object")return t;const s=new qs;return s.read(t,i),s}let qs=pL=class extends wx{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&ofe.test(this.valueExpression)}}set index(t){$b(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),$b(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return nfe(this)}set maxDataValue(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return EK(t)}readMaxSize(t,e,i){return CK(t,e,i)}set minDataValue(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return EK(t)}readMinSize(t,e,i){return CK(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(zt.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return GRe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,s){if(t==="$view.scale"){if(s!=null&&s.messages){const n=this.index,r=typeof n=="string"?n:`visualVariables[${n}]`;s.messages.push(new rt("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpression",context:s}))}}else e[i]=t}readValueUnit(t){return t?mL.read(t):null}clone(){var t,e;return new pL({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:$b(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:$b(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===xo.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===xo.Stops){const t=this.stops;if(!t)return this;const e=t.map(s=>s.size).reverse(),i=t.length;for(let s=0;s<i;s++)t[s].size=e[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};I([N({readOnly:!0})],qs.prototype,"cache",null),I([N({type:v4.apiValues,json:{type:v4.jsonValues,origins:{"web-map":{read:!1}},read:v4.read,write:v4.write}})],qs.prototype,"axis",void 0),I([N()],qs.prototype,"index",null),I([N({type:String,readOnly:!0})],qs.prototype,"inputValueType",null),I([N({type:VRe,json:{write:!0}})],qs.prototype,"legendOptions",void 0),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"maxDataValue",null),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"maxSize",null),I([Sn("maxSize")],qs.prototype,"castMaxSize",null),I([At("maxSize")],qs.prototype,"readMaxSize",null),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"minDataValue",null),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"minSize",null),I([Sn("minSize")],qs.prototype,"castMinSize",null),I([At("minSize")],qs.prototype,"readMinSize",null),I([N({type:String,json:{write:!0}})],qs.prototype,"normalizationField",void 0),I([N({readOnly:!0})],qs.prototype,"arcadeRequired",null),I([N({type:String})],qs.prototype,"scaleBy",void 0),I([N({type:[uI],value:null,json:{write:!0}})],qs.prototype,"stops",null),I([N({type:["outline"],json:{write:!0}})],qs.prototype,"target",void 0),I([N({type:String,readOnly:!0})],qs.prototype,"transformationType",null),I([N({type:["size"],json:{type:["sizeInfo"]}})],qs.prototype,"type",void 0),I([N({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],qs.prototype,"useSymbolValue",void 0),I([N({type:String,json:{write:!0}})],qs.prototype,"valueExpression",void 0),I([At("valueExpression",["valueExpression","expression"])],qs.prototype,"readValueExpression",null),I([Ft("web-scene","valueExpression")],qs.prototype,"writeValueExpressionWebScene",null),I([N({type:["radius","diameter","area","width","distance"],json:{write:!0}})],qs.prototype,"valueRepresentation",void 0),I([N({type:mL.apiValues,json:{write:mL.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],qs.prototype,"valueUnit",void 0),I([At("valueUnit")],qs.prototype,"readValueUnit",null),qs=pL=I([ke("esri.renderers.visualVariables.SizeVariable")],qs);const lA=qs,eLe={color:ife,size:lA,opacity:oG,rotation:sfe},tLe=new ps({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),iLe=/^\[([^\]]+)\]$/i;let fI=class extends Ei{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,s)=>{let n=null;return n=i.target===s.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,s){const{rotationExpression:n,rotationType:r}=i,o=n==null?void 0:n.match(iLe),l=o==null?void 0:o[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:r,field:l})),e)return e.map(u=>{const f=tLe.read(u.type),y=eLe[f];y||(zt.getLogger(this).warn(`Unknown variable type: ${f}`),s!=null&&s.messages&&s.messages.push(new ed("visual-variable:unsupported",`visualVariable of type '${f}' is not supported`,{definition:u,context:s})));const _=new y;return _.read(u,s),_})}writeVariables(e,i){const s=[];for(const n of e){const r=n.toJSON(i);r&&s.push(r)}return s}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};I([N()],fI.prototype,"visualVariables",null),fI=I([ke("esri.renderers.visualVariables.VisualVariableFactory")],fI);const sLe=fI,nLe={base:wx,key:"type",typeMap:{opacity:oG,color:ife,rotation:sfe,size:lA}},Sx=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new sLe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,n){return this._vvFactory.readVariables(i,s,n)}writeVisualVariables(i,s,n,r){s[n]=this._vvFactory.writeVariables(i,r)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const n=this.visualVariables;return n?n.filter(r=>r.type===i&&(typeof s=="string"?r.target===s:s!==!1||!r.target)):[]}async collectVVRequiredFields(i,s){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const r of n)r&&(r.field&&bl(i,s,r.field),r.normalizationField&&bl(i,s,r.normalizationField),r.valueExpression&&(rLe(r.valueExpression,i,s)||await Qa(i,s,r.valueExpression)))}};return I([N({types:[nLe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),I([At("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),I([Ft("visualVariables")],e.prototype,"writeVisualVariables",null),e=I([ke("esri.renderers.mixins.VisualVariablesMixin")],e),e};function rLe(t,e,i){const s=RRe(t);return s!=null&&(bl(e,i,s),!0)}const lG=[252,146,31,255],oLe=[153,153,153,255],aLe={type:"esriSMS",style:"esriSMSCircle",size:6,color:lG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},lLe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:lG},cLe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},uLe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},hLe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},dLe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},fLe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},dfe=zc.fromJSON(aLe),ffe=Al.fromJSON(lLe),pfe=gm.fromJSON(cLe),pLe=xx.fromJSON(uLe);function cmt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return dfe;case"polyline":return ffe;case"polygon":case"extent":return pfe}return null}const umt=zc.fromJSON(hLe),hmt=Al.fromJSON(dLe),dmt=gm.fromJSON(fLe),mLe=qp.fromSimpleMarkerSymbol(dfe),gLe=Lv.fromSimpleLineSymbol(ffe),yLe=Bg.fromSimpleFillSymbol(pfe),vLe=new bx({symbolLayers:new ci([new jg({material:{color:lG},edges:new wde({size:Wu(1),color:new fi(oLe)})})])}),_Le=new Lv({symbolLayers:new ci([new vx({material:{color:new fi([0,0,0])},size:Wu(1)})])}),bLe=new Bg({symbolLayers:new ci([new jg({outline:{color:new fi([0,0,0]),size:Wu(1)}})])});function fmt(t){if(t==null)return null;switch(t.type){case"mesh":return vLe;case"point":case"multipoint":return mLe;case"polyline":return gLe;case"polygon":case"extent":return yLe}return null}const PK="#useCIMFallbackSymbology()",A_={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function xLe(t,e=A_){var u,f,y,_;if(!t)return{symbol:null};const{retainId:i=A_.retainId,ignoreDrivers:s=A_.ignoreDrivers,hasLabelingContext:n=A_.hasLabelingContext,retainCIM:r=A_.retainCIM,cimFallbackEnabled:o=A_.cimFallbackEnabled}=e;let l=null;if(mK(t)||t instanceof Fv)l=t.clone();else if(t.type==="cim"){const x=(f=(u=t.data)==null?void 0:u.symbol)==null?void 0:f.type;switch(x){case"CIMPointSymbol":l=r?t.clone():qp.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(l=_Le.clone(),(y=e==null?void 0:e.logWarning)==null||y.call(e,PK,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=bLe.clone(),(_=e==null?void 0:e.logWarning)==null||_.call(e,PK,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new rt("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Al)l=Lv.fromSimpleLineSymbol(t);else if(t instanceof zc)l=qp.fromSimpleMarkerSymbol(t);else if(t instanceof jC)l=qp.fromPictureMarkerSymbol(t);else if(t instanceof gm)l=e.geometryType&&e.geometryType==="mesh"?bx.fromSimpleFillSymbol(t):Bg.fromSimpleFillSymbol(t);else{if(!(t instanceof xx))return{error:new rt("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};l=n?nA.fromTextSymbol(t):qp.fromTextSymbol(t)}return i&&l&&l.type!=="cim"&&(l.id=t.id),s&&mK(l)&&l.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:l}}function c6(t,e,i,s){const n=mfe(t,{},{context:s,isLabelSymbol:!1});n!=null&&(e[i]=n)}function TK(t,e,i,s){const n=mfe(t,{},{context:s,isLabelSymbol:!0});n!=null&&(e[i]=n)}function IK(t){return t instanceof Rv||t instanceof Fv}function wLe(t){return t instanceof Rv&&(t.type==="polygon-3d"||t.type==="line-3d")}function mfe(t,e,i){var l;if(t==null)return null;const{context:s,isLabelSymbol:n}=i,r=s==null?void 0:s.origin,o=s==null?void 0:s.messages;if(r==="web-scene"&&!IK(t)){const u=xLe(t,{retainCIM:!0,hasLabelingContext:n});return u.symbol!=null?u.symbol.write(e,s):(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:s,error:u.error})),null)}return GO(s==null?void 0:s.layer)&&wLe(t)?(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(l=s==null?void 0:s.layer)==null?void 0:l.declaredClass}'.`,{symbol:t,context:s})),null):(r==="web-map"||r==="portal-item"&&!GO(s==null?void 0:s.layer))&&IK(t)?(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:s})),null):t.write(e,s)}function pmt(t,e){return SRe(t,null,e)}const cA={types:Jde,json:{write:{writer:c6},origins:{"web-scene":{types:gK,write:{writer:c6},read:{reader:nx({types:gK})}}}}},cG=wq({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},cA),uG={types:{base:Ea,key:"type",typeMap:{"simple-fill":Fu.typeMap["simple-fill"],"picture-fill":Fu.typeMap["picture-fill"],"polygon-3d":Fu.typeMap["polygon-3d"],cim:Fu.typeMap.cim}},json:{write:{writer:c6},origins:{"web-scene":{type:Bg,write:{writer:c6}}}}},pI={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var gL;let P0=gL=class extends wt{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new gL({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};I([N({type:String,json:{write:!0}})],P0.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],P0.prototype,"label",void 0),I([N({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],P0.prototype,"minValue",void 0),I([N({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],P0.prototype,"maxValue",void 0),I([N(cG)],P0.prototype,"symbol",void 0),P0=gL=I([ke("esri.renderers.support.ClassBreakInfo")],P0);const u6=P0,SLe=wa()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let H3=class extends Hs(wt){constructor(e){super(e),this.title=null,this.order=null}};I([N({type:String,json:{write:!0}})],H3.prototype,"title",void 0),I([ni(SLe)],H3.prototype,"order",void 0),H3=I([ke("esri.renderers.support.RendererLegendOptions")],H3);const hG=H3;var yL;const gfe="log",mI="percent-of-total",gI="field",_4=new ps({esriNormalizeByLog:gfe,esriNormalizeByPercentOfTotal:mI,esriNormalizeByField:gI}),ELe=Ko(u6);let Qr=yL=class extends Sx(ym){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let s=e.minValue;return t.map(n=>{const r=new u6;return r.read(n,i),r.minValue==null&&(r.minValue=s),r.maxValue==null&&(r.maxValue=r.minValue),s=r.maxValue,r})}writeClassBreakInfos(t,e,i,s){const n=t.map(r=>r.write({},s));this._areClassBreaksConsecutive()&&n.forEach(r=>delete r.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(zt.getLogger(this).error(".field: field must be a string value"),null):bC(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&gI||i&&mI||null,e&&i&&zt.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==gI&&t!==mI||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let s=null;s=typeof t=="number"?new u6({minValue:t,maxValue:e,symbol:Qde(i)}):ELe(Ue(t)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const n=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&zt.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await uv()});const s=this.getBreakIndex(t,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void zt.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await uv(),{arcadeUtils:r}=n;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:n}}const s=this.getBreakIndex(t,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((s,n)=>s+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new yL({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Ue(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Ue(this.visualVariables),legendOptions:Ue(this.legendOptions),authoringInfo:Ue(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),Qa(t,e,this.valueExpression)];bl(t,e,this.field),bl(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:n,arcade:r,timeZone:o}=e??{},{valueExpression:l}=this;let u=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const f=r.arcadeUtils;if(!u){const _=f.createSyntaxTree(l);u=f.createFunction(_),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=l;const y=f.executeFunction(u,f.createExecContext(t,f.getViewInfo({viewingMode:i,scale:s,spatialReference:n}),o));return this._getBreakIndexfromInfos(y)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,s=this.normalizationType;let n=parseFloat(i[e]);if(s){const r=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(s===gfe)n=Math.log(n)*Math.LOG10E;else if(s!==mI||r==null||isNaN(r)){if(s===gI&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/r*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=t&&(e?t<=s[1]:t<s[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};I([N(uG)],Qr.prototype,"backgroundFillSymbol",void 0),I([N({type:[u6]})],Qr.prototype,"classBreakInfos",void 0),I([At("classBreakInfos")],Qr.prototype,"readClassBreakInfos",null),I([Ft("classBreakInfos")],Qr.prototype,"writeClassBreakInfos",null),I([N({type:String,json:{write:!0}})],Qr.prototype,"defaultLabel",void 0),I([N(cA)],Qr.prototype,"defaultSymbol",void 0),I([N({type:String,json:{write:!0}})],Qr.prototype,"field",void 0),I([Sn("field")],Qr.prototype,"castField",null),I([N({type:Boolean})],Qr.prototype,"isMaxInclusive",void 0),I([N({type:hG,json:{write:!0}})],Qr.prototype,"legendOptions",void 0),I([N({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Qr.prototype,"minValue",null),I([N({type:String,json:{write:!0}})],Qr.prototype,"normalizationField",void 0),I([N({type:Number,json:{write:!0}})],Qr.prototype,"normalizationTotal",void 0),I([N({type:_4.apiValues,value:null,json:{type:_4.jsonValues,read:_4.read,write:_4.write}})],Qr.prototype,"normalizationType",null),I([ni({classBreaks:"class-breaks"})],Qr.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],Qr.prototype,"valueExpression",void 0),I([N({type:String,json:{write:!0}})],Qr.prototype,"valueExpressionTitle",void 0),Qr=yL=I([ke("esri.renderers.ClassBreaksRenderer")],Qr);const yfe=Qr,vL=-3,CLe=vL-1;var Tp;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Tp||(Tp={}));let PLe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Fy,this._users=new Fy}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const s=this._db.get(e.id+i);return(s==null?void 0:s.size)??0}put(e,i,s,n,r){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==s&&this._notifyRemove(i,o.entry,o.size,Tp.ALL)),n>this._maxSize)return void this._notifyRemove(i,s,n,Tp.ALL);if(s===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,s,0,Tp.ALL);const l=1+Math.max(r,CLe)-vL;this._db.set(i,new TLe(s,n,l)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i,s,n){i=e.id+i;const r=this._db.get(i);if(r&&r.entry===s){for(this._size-=r.size,e.size-=r.size;n>this._maxSize;){const o=this._notifyRemove(i,s,n,Tp.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}r.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,i){i=e.id+i;const s=this._db.get(i);if(s)return this._size-=s.size,e.size-=s.size,this._db.delete(i),++this._hit,s.entry;++this._miss}get(e,i){i=e.id+i;const s=this._db.get(i);if(s!==void 0)return this._db.delete(i),s.lives=s.lifetime,this._db.set(i,s),++this._hit,s.entry;++this._miss}peek(e,i){const s=this._db.get(e.id+i);return s?++this._hit:++this._miss,s==null?void 0:s.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((o,l)=>{const u=o.lifetime;s[u]=(s[u]||0)+o.size,this._users.forAll(f=>{const{id:y,name:_}=f;if(l.startsWith(y)){const x=i[_]||0;i[_]=x+o.size}})});const n={};this._users.forAll(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const u=i[l]||0;i[l]=u,n[l]=Math.round(100*o.hitRate)+"%"}else n[l]="0%"});const r=Object.keys(i);r.sort((o,l)=>i[l]-i[o]),r.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=s.length-1;o>=0;--o){const l=s[o];l&&(e["Priority "+(o+vL-1)]=Math.round(l/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((s,n)=>{n.startsWith(i)&&(this._size-=s.size,this._db.delete(n),this._notifyRemove(n,s.entry,s.size,Tp.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,Tp.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,s,n){let r;return this._removeFuncs.some(o=>{if(e.startsWith(o[0])){const l=o[1](i,n,s);return typeof l=="number"&&(r=l),!0}return!1}),r}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){const i=e??this;if(i.maxSize<0||i.size<=i.maxSize)return;const s=e==null?void 0:e.id;let n=!0;for(;n;){n=!1;for(const[r,o]of this._db)if(o.lifetime===0&&(!s||r.startsWith(s))){if(this._purgeItem(r,o,e),i.size<=.9*i.maxSize)return;n||(n=this._db.has(r))}}for(const[r,o]of this._db)if((!s||r.startsWith(s))&&(this._purgeItem(r,o,e),i.size<=.9*i.maxSize))return}_purgeItem(e,i,s=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,s&&(s.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,Tp.SOME);n!=null&&n>0&&(this._size+=n,s&&(s.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},TLe=class{constructor(e,i,s){this.entry=e,this.size=i,this.lifetime=s,this.lives=s}},ILe=class{constructor(e,i){this._storage=new PLe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,s=1){this._storage.put(this,e,i,s,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},vfe=class _L{constructor(e,i,s=""){this.major=e,this.minor=i,this._context=s}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new rt(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new _L(this.major,this.minor,this._context)}static parse(e,i=""){const[s,n]=e.split("."),r=/^\s*\d+\s*$/;if(!(s!=null&&s.match)||!r.test(s))throw new rt((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!r.test(n))throw new rt((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(s,10),l=parseInt(n,10);return new _L(o,l,i)}},uA=class{};function MLe(t){return t instanceof ax?t===uA.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function bmt(t){return MLe(t)?uA.instance:t}uA.instance=new Fc("Etc/UTC");function ALe(t){return"timeZone"in t}function DLe(t){return"timeZone"in t}function kLe(t){return"dateFieldsTimeZone"in t}const NLe=new Map;let _fe=class yI{static fromJSON(e){return new yI(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new yI(e.fields??[],AK(e))}static fromLayerJSON(e){return new yI(e.fields??[],AK(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const s=[];for(const r of this.fields){const o=r==null?void 0:r.name,l=MK(o);if(o&&l){const u=xy(o);this._fieldsMap.set(o,r),this._fieldsMap.set(u,r),this._normalizedFieldsMap.set(l,r),s.push(`${u}:${r.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),FNe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):OV(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),BZ(r)||HZ(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}s.sort(),this.uid=s.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)BZ(e)||HZ(e)||e.nullable||PNe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(xy(e))??this._normalizedFieldsMap.get(MK(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(zt.getLogger("esri.layers.support.FieldsIndex").error(new rt("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),pf):bfe.has(i.type)?av:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===av?uA.instance:i===pf?Uo.utcInstance:Iq(NLe,i,()=>Fc.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return zNe(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>k9(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function xy(t){return t.trim().toLowerCase()}function MK(t){var e;return((e=hNe(t))==null?void 0:e.toLowerCase())??""}const bfe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function AK(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:s,editFieldsInfo:n}=t,r=(s?"startField"in s?s.startField:s.startTimeField:"")??"",o=(s?"endField"in s?s.endField:s.endTimeField:"")??"",l=kLe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?$T(t.dateFieldsTimeReference):null,u=n?ALe(n)?n.timeZone??l:n.dateFieldsTimeReference?$T(n.dateFieldsTimeReference):l??pf:null,f=s?DLe(s)?s.timeZone??l:s.timeReference?$T(s.timeReference):l:null,y=new Map([[xy((n==null?void 0:n.creationDateField)??""),u],[xy((n==null?void 0:n.editDateField)??""),u],[xy(r),f],[xy(o),f]]);for(const{name:_,type:x}of t.fields)if(bfe.has(x))e.set(_,av);else if(x!=="date"&&x!=="esriFieldTypeDate")e.set(_,null);else if(i)e.set(_,av);else{const S=y.get(xy(_??""))??l;e.set(_,S)}return e}function O2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function $Le(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function dG(t,e,i,s,n){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}function xfe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function wfe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Sfe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Efe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function OLe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function RLe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function LLe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function FLe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function zLe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Cfe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function qLe(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t}function Pfe(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(i*i+s*s+n*n+r*r)}function Tfe(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=e[3]-t[3];return i*i+s*s+n*n+r*r}function fG(t){const e=t[0],i=t[1],s=t[2],n=t[3];return Math.sqrt(e*e+i*i+s*s+n*n)}function pG(t){const e=t[0],i=t[1],s=t[2],n=t[3];return e*e+i*i+s*s+n*n}function VLe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function GLe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Ife(t,e){const i=e[0],s=e[1],n=e[2],r=e[3];let o=i*i+s*s+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=s*o,t[2]=n*o,t[3]=r*o),t}function mG(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hA(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=e[3];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t[2]=o+s*(i[2]-o),t[3]=l+s*(i[3]-l),t}function jLe(t,e=1){const i=kC;let s,n,r,o,l,u;do s=2*i()-1,n=2*i()-1,l=s*s+n*n;while(l>=1);do r=2*i()-1,o=2*i()-1,u=r*r+o*o;while(u>=1);const f=Math.sqrt((1-l)/u);return t[0]=e*s,t[1]=e*n,t[2]=e*r*f,t[3]=e*o*f,t}function BLe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3];return t[0]=i[0]*s+i[4]*n+i[8]*r+i[12]*o,t[1]=i[1]*s+i[5]*n+i[9]*r+i[13]*o,t[2]=i[2]*s+i[6]*n+i[10]*r+i[14]*o,t[3]=i[3]*s+i[7]*n+i[11]*r+i[15]*o,t}function HLe(t,e,i){const s=e[0],n=e[1],r=e[2],o=i[0],l=i[1],u=i[2],f=i[3],y=f*s+l*r-u*n,_=f*n+u*s-o*r,x=f*r+o*n-l*s,S=-o*s-l*n-u*r;return t[0]=y*f+S*-o+_*-u-x*-l,t[1]=_*f+S*-l+x*-o-y*-u,t[2]=x*f+S*-u+y*-l-_*-o,t[3]=e[3],t}function ULe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Mfe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function BC(t,e){const i=t[0],s=t[1],n=t[2],r=t[3],o=e[0],l=e[1],u=e[2],f=e[3],y=oo();return Math.abs(i-o)<=y*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-l)<=y*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=y*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-f)<=y*Math.max(1,Math.abs(r),Math.abs(f))}const YLe=wfe,XLe=Sfe,WLe=Efe,ZLe=Pfe,KLe=Tfe,JLe=fG,QLe=pG;Object.freeze(Object.defineProperty({__proto__:null,add:xfe,ceil:OLe,copy:O2,copyVec3:$Le,dist:ZLe,distance:Pfe,div:WLe,divide:Efe,dot:mG,equals:BC,exactEquals:Mfe,floor:RLe,inverse:GLe,len:JLe,length:fG,lerp:hA,max:FLe,min:LLe,mul:XLe,multiply:Sfe,negate:VLe,normalize:Ife,random:jLe,round:zLe,scale:Cfe,scaleAndAdd:qLe,set:dG,sqrDist:KLe,sqrLen:QLe,squaredDistance:Tfe,squaredLength:pG,str:ULe,sub:YLe,subtract:wfe,transformMat4:BLe,transformQuat:HLe},Symbol.toStringTag,{value:"Module"}));function vm(){return[0,0,0,0]}function eFe(t){return[t[0],t[1],t[2],t[3]]}function ju(t,e,i,s){return[t,e,i,s]}function tFe(t,e,i,s){return[t,e,i,s]}function Afe(t,e=vm()){const i=Math.min(4,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function iFe(t,e){return new Float64Array(t,e,4)}function Dfe(){return vm()}function kfe(){return ju(1,1,1,1)}function Nfe(){return ju(1,0,0,0)}function $fe(){return ju(0,1,0,0)}function Ofe(){return ju(0,0,1,0)}function Rfe(){return ju(0,0,0,1)}const sFe=Dfe(),nFe=kfe(),rFe=Nfe(),oFe=$fe(),aFe=Ofe(),lFe=Rfe();Object.freeze(Object.defineProperty({__proto__:null,ONES:nFe,UNIT_W:lFe,UNIT_X:rFe,UNIT_Y:oFe,UNIT_Z:aFe,ZEROS:sFe,clone:eFe,create:vm,createView:iFe,freeze:tFe,fromArray:Afe,fromValues:ju,ones:kfe,unitW:Rfe,unitX:Nfe,unitY:$fe,unitZ:Ofe,zeros:Dfe},Symbol.toStringTag,{value:"Module"}));function Lfe(t){return"r"in t&&"g"in t&&"b"in t}function Ffe(t){return"h"in t&&"s"in t&&"v"in t}function zfe(t){return"l"in t&&"a"in t&&"b"in t}function qfe(t){return"l"in t&&"c"in t&&"h"in t}function cFe(t){return"x"in t&&"y"in t&&"z"in t}const uFe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],hFe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Vfe(t,e){const i=[];let s,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const r=t.length,o=t[0].length;let l=0;for(s=0;s<r;s++){for(l=0,n=0;n<o;n++)l+=t[s][n]*e[n];i.push(l)}return i}function Gfe(t){const e=[t.r/255,t.g/255,t.b/255].map(s=>s<=.04045?s/12.92:((s+.055)/1.055)**2.4),i=Vfe(uFe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function gG(t){const e=Vfe(hFe,[t.x/100,t.y/100,t.z/100]).map(i=>{const s=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(s,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function jfe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Bfe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(s=>s>6/29?s**3:3*(6/29)**2*(s-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function dFe(t){const e=t.l,i=t.a,s=t.b,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r=r>0?r:r+2*Math.PI,{l:e,c:n,h:r}}function fFe(t){const e=t.l,i=t.c,s=t.h;return{l:e,a:i*Math.cos(s),b:i*Math.sin(s)}}function pFe(t){return jfe(Gfe(t))}function mFe(t){return gG(Bfe(t))}function gFe(t){return dFe(jfe(Gfe(t)))}function yFe(t){return gG(Bfe(fFe(t)))}function vFe(t){const e=t.r,i=t.g,s=t.b,n=Math.max(e,i,s),r=n-Math.min(e,i,s);let o=n,l=r===0?0:n===e?(i-s)/r%6:n===i?(s-e)/r+2:(e-i)/r+4,u=r===0?0:r/o;return l<0&&(l+=6),l*=60,u*=100,o*=100/255,{h:l,s:u,v:o}}function _Fe(t){const e=(t.h+360)%360/60,i=t.s/100,s=t.v/100*255,n=s*i,r=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:r,b:0};break;case 1:o={r,g:n,b:0};break;case 2:o={r:0,g:n,b:r};break;case 3:o={r:0,g:r,b:n};break;case 4:o={r,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:r};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+s-n),o.g=Math.round(o.g+s-n),o.b=Math.round(o.b+s-n),o}function HC(t){return Lfe(t)?t:qfe(t)?yFe(t):zfe(t)?mFe(t):cFe(t)?gG(t):Ffe(t)?_Fe(t):t}function bFe(t){return Ffe(t)?t:vFe(HC(t))}function xFe(t){return zfe(t)?t:pFe(HC(t))}function xmt(t){return qfe(t)?t:gFe(HC(t))}function wFe(t){let{r:e,g:i,b:s,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),s=Math.round(n*s+255*(1-n))),new fi({r:e,g:i,b:s})}function SFe(t,e){const{r:i,g:s,b:n}=e!=null&&e.ignoreAlpha?t:wFe(t);return .2126*i+.7152*s+.0722*n}var bL;function wmt(t,e=bL.High){return SFe(t,{ignoreAlpha:!0})>e?new fi([0,0,0,t.a]):new fi([255,255,255,t.a])}function Smt(t,e){const i=xFe(t);i.l*=1-e;const s=HC(i),n=t.clone();return n.setColor(s),n.a=t.a,n}function Emt(t,e){const i=t.clone();return i.a*=e,i}function Cmt(t,e){const i=bFe(t);i.s*=e;const s=HC(i),n=t.clone();return n.setColor(s),n.a=t.a,n}function Pmt(t){return fi.toUnitRGBA(t)}function Tmt(t){return ju(t[0],t[1],t[2],t.length>3?t[3]:1)}function Imt(t,e){const i=fi.toUnitRGBA(t);return i[3]*=e,i}function Mmt(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(s=>typeof s=="string"?new fi(s):s)).length===1||e===1){const s=[],n=t[0];for(let r=0;r<e;r++)s.push(n.clone());return s}if(i.shuffle&&(t=roe(Ue(t),i.seed)),t.length>=e){const s=[],n=(t.length-1)/(e-1);for(let r=0;r<e;r++){const o=Math.round(r*n);s.push(t[o].clone())}return s}return EFe(t,e,i)}function EFe(t,e,i={}){const s=[],n=t.length-1,r=Math.ceil((e-t.length)/n);e:for(let o=0;o<n;o++){const l=t[o],u=t[o+1];for(let f=1;f<=r;f++){const y=f/(r+1);if(s.push(CFe(l,u,y,i)),s.length+t.length===e)break e}}return[...t.map(o=>o.clone()),...roe(s,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(bL||(bL={}));const N8=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function CFe(t,e,i,s={}){const n=t.r,r=t.g,o=t.b,l=e.r,u=e.g,f=e.b,y=Math.round(n+(l-n)*i),_=Math.round(r+(u-r)*i),x=Math.round(o+(f-o)*i);if(!s.offset)return new fi([y,_,x]);const S=noe(s.seed);return new fi([N8(y,S),N8(_,S),N8(x,S)])}var DK,kK,NK,$K,OK,RK,LK,FK,zK,qK,xL,wL,VK,GK,jK,BK,HK,UK,YK,XK,WK,ZK,KK,JK,QK,eJ,tJ,iJ,sJ,nJ,rJ,oJ,aJ,lJ,cJ,uJ,hJ,dJ,fJ,pJ,mJ,gJ,yJ,vJ,_J,bJ,xJ,wJ,SJ,EJ,CJ,PJ,TJ,IJ,MJ,AJ,DJ,kJ,NJ,$J,OJ,RJ;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(DK||(DK={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(kK||(kK={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(NK||(NK={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}($K||($K={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(OK||(OK={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(RK||(RK={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(LK||(LK={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(FK||(FK={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(zK||(zK={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(qK||(qK={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(xL||(xL={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(wL||(wL={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(VK||(VK={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(GK||(GK={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(jK||(jK={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(BK||(BK={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(HK||(HK={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(UK||(UK={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(YK||(YK={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(XK||(XK={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(WK||(WK={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(ZK||(ZK={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(KK||(KK={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(JK||(JK={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(QK||(QK={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(eJ||(eJ={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(tJ||(tJ={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(iJ||(iJ={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(sJ||(sJ={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(nJ||(nJ={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(rJ||(rJ={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(oJ||(oJ={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(aJ||(aJ={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AloneLine=1]="AloneLine"}(lJ||(lJ={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(cJ||(cJ={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(uJ||(uJ={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(hJ||(hJ={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(dJ||(dJ={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(fJ||(fJ={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(pJ||(pJ={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(mJ||(mJ={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(gJ||(gJ={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(yJ||(yJ={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(vJ||(vJ={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(_J||(_J={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(bJ||(bJ={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(xJ||(xJ={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(wJ||(wJ={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(SJ||(SJ={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(EJ||(EJ={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(CJ||(CJ={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(PJ||(PJ={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(TJ||(TJ={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(IJ||(IJ={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(MJ||(MJ={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(AJ||(AJ={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(DJ||(DJ={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(kJ||(kJ={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(NJ||(NJ={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}($J||($J={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(OJ||(OJ={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(RJ||(RJ={}));const PFe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},SL={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:xL.Loop,repeatdelay:0,easing:wL.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function TFe(t){return typeof t=="function"}function Amt(t,e,i,s){return TFe(t)?t(e,i,s):t}function Dmt(t){return[t.r,t.g,t.b,t.a]}const IFe=` /-,
`;function LJ(t){let e=t.length;for(;e--;)if(!IFe.includes(t.charAt(e)))return!1;return!0}function MFe(t,e){const i=[];let s=0,n=-1;do if(n=t.indexOf("[",s),n>=s){if(n>s){const r=t.slice(s,n);i.push([r,null,LJ(r)])}if(s=n+1,n=t.indexOf("]",s),n>=s){if(n>s){const r=e[t.slice(s,n)];r&&i.push([null,r,!1])}s=n+1}}while(n!==-1);if(s<t.length){const r=t.slice(s);i.push([r,null,LJ(r)])}return i}function AFe(t,e,i,s){let n="",r=null;for(const o of e){const[l,u,f]=o;if(l)f?r=l:(r&&(n+=r,r=null),n+=l);else{let y=u;i!=null&&(y=Hfe(u,i));const _=t.attributes[y];_&&(r&&(n+=r,r=null),n+=_)}}return DFe(n,s)}function DFe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function kmt(t,e,i,s,n,r,o=!0){const l=e/n,u=i/r,f=Math.ceil(l/2),y=Math.ceil(u/2);for(let _=0;_<r;_++)for(let x=0;x<n;x++){const S=4*(x+(o?r-_-1:_)*n);let P=0,A=0,k=0,$=0,F=0,G=0,V=0;const B=(_+.5)*u;for(let W=Math.floor(_*u);W<(_+1)*u;W++){const J=Math.abs(B-(W+.5))/y,re=(x+.5)*l,se=J*J;for(let oe=Math.floor(x*l);oe<(x+1)*l;oe++){let pe=Math.abs(re-(oe+.5))/f;const ce=Math.sqrt(se+pe*pe);ce>=-1&&ce<=1&&(P=2*ce*ce*ce-3*ce*ce+1,P>0&&(pe=4*(oe+W*e),V+=P*t[pe+3],k+=P,t[pe+3]<255&&(P=P*t[pe+3]/250),$+=P*t[pe],F+=P*t[pe+1],G+=P*t[pe+2],A+=P))}}s[S]=$/A,s[S+1]=F/A,s[S+2]=G/A,s[S+3]=V/k}}function kFe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function Nmt(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function $mt(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function Omt(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function Rmt(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function NFe(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Lmt=(t,e=0)=>t==null||isNaN(t)?e:t,Fmt=(t,e)=>t??e,zmt=(t,e)=>t??e,qmt=t=>t.tintColor?kFe(t.tintColor):[255,255,255,1],Vmt=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function Gmt(){return nt(()=>import("./geometryEngineJSON-axG6AZK_.js").then(t=>t.g),__vite__mapDeps([239,174]),import.meta.url)}function jmt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Bmt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Hmt(t){let e="normal",i="normal";if(t){const s=t.toLowerCase();s.includes("italic")?e="italic":s.includes("oblique")&&(e="oblique"),s.includes("bold")?i="bold":s.includes("light")&&(i="lighter")}return{style:e,weight:i}}function Umt(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function FJ(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=FJ(e);if(i!=null)return i}break;case"CIMTextSymbol":return FJ(t.symbol);case"CIMSolidFill":return t.color}return null}function zJ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const s=zJ(i);if(s!=null)return s}break}case"CIMTextSymbol":return zJ(t.symbol);case"CIMSolidStroke":return t.color}}function qJ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=qJ(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return qJ(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function Ymt(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Xmt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function $Fe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Wmt=t=>t.includes("data:image/svg+xml");function Zmt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function dA(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Kmt(t,e,i,s,n,r,o=!0){const{infos:l}=r;let u=1,f=0,y=0,_=0,x=1;for(const{absoluteAnchorPoint:A,offsetX:k,offsetY:$,rotation:F,size:G,frameHeight:V,rotateClockWise:B,scaleSymbolsProportionally:W}of l)x=A?1:u,y=jJ(k,$,f,x,y),_=GJ(k,$,f,x,_),V&&(W||o)&&(u*=G/V),f=BJ(F,B,f);const S=jJ(s,n,f,x,y),P=GJ(s,n,f,x,_);return{size:t*u,rotation:BJ(e,i,f),offsetX:S,offsetY:P}}function OFe(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>OFe(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function RFe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...PFe[e]];const i=SL[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function LFe(t){return t.split(" ").map(e=>Number(e))}function FFe(t){return typeof t=="string"?LFe(t):t}function zFe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=FFe(t.dashTemplate)),t}function EL(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return EL(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return EL(i.symbol)}}return"Normal"}function Jmt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=i.size??SL.CIMVectorMarker.size;s>e&&(e=s);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const s=i.width;s!=null&&s>e&&(e=s);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&NFe(i.markerPlacement)){const s=i.size??SL.CIMVectorMarker.size;s>e&&(e=s)}break;case"CIMPictureFill":{const s=i.height;s!=null&&s>e&&(e=s)}}}return e}}}function Hfe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function qFe(t){return t.map(e=>({...e,propertyName:dA(e.propertyName)}))}function VJ(t){const e={};for(const i in t){const s=t[i];e[dA(i)]=s}return e}function GJ(t,e,i,s,n){const r=i*Math.PI/180;if(r){const o=Math.cos(r);return(Math.sin(r)*t+o*e)*s+n}return e*s+n}function jJ(t,e,i,s,n){const r=i*Math.PI/180;return r?(Math.cos(r)*t-Math.sin(r)*e)*s+n:t*s+n}function BJ(t,e,i){return e?i-t:i+t}function Qmt(t,e,i){const s=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let r=e[dA(i)];if(r!=null&&(s?r=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]:n&&(r*=Math.PI/180)),r==null&&(r=RFe(e.type,i.toLowerCase()),r!=null&&(s?r=[r[0]/255,r[1]/255,r[2]/255,r[3]]:n&&(r*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const l=o[i];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(r=l,r!=null&&(s?r=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]:n&&(r*=Math.PI/180))):(r={valueExpressionInfo:l,defaultValue:r},r!=null&&(s?r={type:"Process",op:"ArcadeColor",value:r}:n&&(r={type:"Process",op:"Divide",left:r,right:180/Math.PI}))))}}if(r==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return r}function e0t(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function VFe(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function UC(t){if(VFe(t))return t;const{originPosition:e,scale:i,translate:s}=t,n=i[0]??1,r=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?r:-r,i[2]??1,i[3]??1],translate:[s[0]??0,s[1]??0,s[2]??0,s[3]??0]}}function GFe({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function jFe({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function BFe({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function HFe({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function YC({scale:t,translate:e},i){return i*t[0]+e[0]}function XC({scale:t,translate:e},i){return i*t[1]+e[1]}function bE({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function xE({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function yG(t,e){return t&&e?WFe:t&&!e?YFe:!t&&e?XFe:UFe}const UFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=YC(t,s[0]),r=XC(t,s[1]);i[0]=[n,r];const{scale:o,originPosition:l}=t,u=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x]=e[y];n+=u*_,r+=f*x,i[y]=[n,r]}return i},YFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=YC(t,s[0]),r=XC(t,s[1]);i[0]=[n,r,bE(t,s[2])];const{scale:o,originPosition:l}=t,u=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S]=e[y];n+=u*_,r+=f*x,i[y]=[n,r,bE(t,S)]}return i},XFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=YC(t,s[0]),r=XC(t,s[1]);i[0]=[n,r,xE(t,s[2])];const{scale:o,originPosition:l}=t,u=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S]=e[y];n+=u*_,r+=f*x,i[y]=[n,r,xE(t,S)]}return i},WFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=YC(t,s[0]),r=XC(t,s[1]);i[0]=[n,r,bE(t,s[2]),xE(t,s[3])];const{scale:o,originPosition:l}=t,u=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S,P]=e[y];n+=u*_,r+=f*x,i[y]=[n,r,bE(t,S),xE(t,P)]}return i};function Ufe(t,e,i){const s=new Array(i.length);for(let n=0;n<i.length;n++)s[n]=e(t,i[n]);return s}function t0t(t,e,i){const s=UC(t);return e.x=GFe(s,i.x),e.y=jFe(s,i.y),i.z!=null&&(e.z=BFe(s,i.z)),i.m!=null&&(e.m=HFe(s,i.m)),e}function ZFe(t,e,i,s=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=UC(t);e.points=yG(s,n)(r,i.points),e.hasZ=s,e.hasM=n}return e}function KFe(t,e,i,s=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return e;const r=UC(t);return e.x=YC(r,i.x),e.y=XC(r,i.y),s&&(e.z=bE(r,i.z)),n&&(e.m=xE(r,i.m)),e}function JFe(t,e,i,s=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=UC(t);e.rings=Ufe(r,yG(s,n),i.rings),e.hasZ=s,e.hasM=n}return e}function QFe(t,e,i,s=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=UC(t);e.paths=Ufe(r,yG(s,n),i.paths),e.hasZ=s,e.hasM=n}return e}function eze(t,e,i,s,n){if(t==null)return null;const r=t.referencesGeometry()&&n?tze(e,s,n):e,o=t.repurposeFeature(r);try{return t.evaluate({...i,$feature:o},t.services)}catch(l){return zt.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const $8=new Map;function tze(t,e,i){const{transform:s,hasZ:n,hasM:r}=i;$8.has(e)||$8.set(e,ize(e));const o=$8.get(e)(t.geometry,s,n,r);return{...t,geometry:o}}function ize(t){const e={};switch(t){case"esriGeometryPoint":return(i,s,n,r)=>KFe(s,e,i,n,r);case"esriGeometryPolygon":return(i,s,n,r)=>JFe(s,e,i,n,r);case"esriGeometryPolyline":return(i,s,n,r)=>QFe(s,e,i,n,r);case"esriGeometryMultipoint":return(i,s,n,r)=>ZFe(s,e,i,n,r);default:return zt.getLogger("esri.views.2d.support.arcadeOnDemand").error(new rt("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const sze=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:s,a:n}=t;return[e,i,s,255*n]};let Yfe=class er{static findApplicableOverrides(e,i,s){if(e&&i){if(e.primitiveName){let n=!1;for(const r of s)if(r.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const r of i)r.primitiveName===e.primitiveName&&s.push(r)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)er.findApplicableOverrides(n,i,s);if(e.symbolLayers)for(const n of e.symbolLayers)er.findApplicableOverrides(n,i,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)er.findApplicableOverrides(n,i,s);if(e.markerPlacement&&er.findApplicableOverrides(e.markerPlacement,i,s),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)er.findApplicableOverrides(n,i,s),er.findApplicableOverrides(n.symbol,i,s)}else e.type==="CIMCharacterMarker"?er.findApplicableOverrides(e.symbol,i,s):e.type==="CIMHatchFill"?er.findApplicableOverrides(e.lineSymbol,i,s):e.type==="CIMPictureMarker"&&er.findApplicableOverrides(e.animatedSymbolProperties,i,s)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&zFe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const s=VJ(e),n=e.primitiveName,r=[];for(const o of i)o.primitiveName===n&&r.push(VJ(o));return{type:"cim-effect-param",effect:s,overrides:qFe(r)}}static async resolveSymbolOverrides(e,i,s,n,r,o,l){if(!(e!=null&&e.symbol))return null;let{symbol:u,primitiveOverrides:f}=e;const y=!!f;if(!y&&!n)return u;u=Ue(u),f=Ue(f);let _=!0;if(i||(i={attributes:{}},_=!1),y){if(_||(f=f.filter(x=>{var S;return!((S=x.valueExpressionInfo)!=null&&S.expression.includes("$feature"))})),l||(f=f.filter(x=>{var S;return!((S=x.valueExpressionInfo)!=null&&S.expression.includes("$view"))})),f.length>0){const x={spatialReference:s,fields:$Fe(i.attributes),geometryType:r};await er.createRenderExpressions(f,x),er.evaluateOverrides(f,i,r??"esriGeometryPoint",o,l)}er.applyOverrides(u,f)}return n&&er.applyDictionaryTextOverrides(u,i,n,null),u}static async createRenderExpressions(e,i){const s=[];for(const n of e){const r=n.valueExpressionInfo;if(!r||er._expressionToRenderExpression.has(r.expression))continue;const o=aNe(r.expression,i.spatialReference,i.fields);s.push(o),o.then(l=>er._expressionToRenderExpression.set(r.expression,l))}s.length>0&&await Promise.all(s)}static evaluateOverrides(e,i,s,n,r){const o={$view:{scale:r==null?void 0:r.scale}};for(const l of e){l.value&&typeof l.value=="object"&&Lfe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=sze(l.value));const u=l.valueExpressionInfo;if(!u)continue;const f=er._expressionToRenderExpression.get(u.expression);f&&(l.value=eze(f,i,o,s,n))}}static applyDictionaryTextOverrides(e,i,s,n,r="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const l of o)l&&l.type==="CIMVectorMarker"&&er.applyDictionaryTextOverrides(l,i,s,n,e.type==="CIMTextSymbol"?e.textCase:r)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const l of o)l&&er.applyDictionaryTextOverrides(l,i,s,n)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const l=MFe(o,s);e.textString=AFe(i,l,n,r)}}}}static applyOverrides(e,i,s,n){if(e.primitiveName){for(const r of i)if(r.primitiveName===e.primitiveName){const o=dA(r.propertyName);if(n&&n.push({cim:e,nocapPropertyName:o,value:e[o]}),s){let l=!1;for(const u of s)u.primitiveName===e.primitiveName&&(l=!0);l||s.push(r)}r.value!=null&&(e[o]=r.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const r of e.effects)er.applyOverrides(r,i,s,n);if(e.symbolLayers)for(const r of e.symbolLayers)er.applyOverrides(r,i,s,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const r of e.effects)er.applyOverrides(r,i,s,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const r of e.markerGraphics)er.applyOverrides(r,i,s,n),er.applyOverrides(r.symbol,i,s,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const s of e)s.value!==void 0&&(i+=`${s.primitiveName}${s.propertyName}${JSON.stringify(s.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(s=>Number(s));if(e==="Color"){const s=new fi(i).toRgba();return s[3]*=255,s}return i}};Yfe._expressionToRenderExpression=new Map;const HJ="esri.renderers.support.DictionaryLoader",nze={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Xfe=class{constructor(e,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new ILe(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){var _;let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(x){if(cd(x))return this._dictionaryPromise=null,null}const n=(_=this._dictionaryVersion)==null?void 0:_.greaterEqual(4,0),r={};if(this.fieldMap)for(const x of this._symbolFields){const S=Hfe(this.fieldMap[x],this._fieldIndex);if(S){const P=e.attributes[S];r[x]=n?P:P!=null?""+e.attributes[S]:""}else r[x]=""}let o=null;try{o=s==null?void 0:s(r,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const l=o.split(";"),u=[],f=[];for(let x=0;x<l.length;x++){const S=l[x];if(S){if(S.includes("po:")){const P=S.slice(3).split("|");if(P.length===3){const A=P[0],k=P[1];let $=P[2];const F="countrylabel";if(A===F&&k==="TextString"){if(this.fieldMap!=null){let G=this.fieldMap[F];G==null&&(G=F,this.fieldMap[G]=G),e.attributes[G]=$}continue}if(k==="DashTemplate")$=$.split(" ").map(G=>Number(G));else if(k==="Color"){const G=new fi($).toRgba();$=[G[0],G[1],G[2],255*G[3]]}else $=Number($);f.push({primitiveName:A,propertyName:k,value:$,defaultValue:null})}}else if(S.includes("|")){for(const P of S.split("|"))if(this._itemNames.has(P)){u.push(P);break}}else if(this._itemNames.has(S))u.push(S);else if(x===0){u.length=0;let P="Invalid_P";e.geometry!=null&&(Wb(e.geometry)?P="Invalid_A":PV(e.geometry)&&(P="Invalid_L")),u.push(P);break}}}const y=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point";return this._cimPartsToCIMSymbol(e,u,f,y,i)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void zt.getLogger(HJ).error("no valid URL!");const i=Qs(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:s}]=await Promise.all([i,uv()]);if(!s)throw this._dictionaryPromise=null,new rt("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:r,expression:o,itemsNames:l}=s,u=o;let f=!1;r&&(this._dictionaryVersion=vfe.parse(r),f=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=n.symbol;const y={};if(this.config){const S=this.config;for(const P in S)y[P]=S[P]}if(n.configuration)for(const S of n.configuration)y.hasOwnProperty(S.name)||(y[S.name]=S.value);const _=[];if(e!=null&&e.fields&&this.fieldMap)for(const S in this.fieldMap){const P=this.fieldMap[S],A=e.fields.filter(k=>k.name.toLowerCase()===(P==null?void 0:P.toLowerCase()));A.length>0&&_.push({...A[0],type:f?A[0].type:"esriFieldTypeString"})}_.length>0&&(this._fieldIndex=new _fe(_));const x=lNe(u,e!=null?e.spatialReference:null,_,y).then(S=>{const P={scale:0};return(A,k)=>{if(S==null)return null;const $=S.repurposeFeature({geometry:null,attributes:A});return P.scale=k!=null?k.scale??void 0:void 0,S.evaluate({$feature:$,$view:P},S.services)}}).catch(S=>(zt.getLogger(HJ).error("Creating dictionary expression failed:",S),null));return this._dictionaryPromise=x,x}async _cimPartsToCIMSymbol(e,i,s,n,r){const o=new Array(i.length);for(let f=0;f<i.length;f++)o[f]=this._getSymbolPart(i[f],r);let l=await Promise.all(o);const u=this.fieldMap;if(u){l=Ue(l);for(const f of l)Yfe.applyDictionaryTextOverrides(f,e,u,this._fieldIndex,EL(f))}return new Vg({data:rze(l,s,n)})}async _getSymbolPart(e,i){const s=this._symbolCache.get(e);if(s)return s;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),r=Qs(n,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,r),r.finally(()=>this._ongoingRequests.delete(e));try{const o=await r;return this._symbolCache.put(e,o.data),o.data}catch(o){throw o}}};function rze(t,e,i){if(!t||t.length===0)return null;const s={...t[0]};if(t.length>1){s.effects=null,s.symbolLayers=[];for(const n of t){const r=n;if(r.effects!=null)for(const o of r.symbolLayers)o.effects==null?o.effects=r.effects:o.effects.unshift(...r.effects);s.symbolLayers.unshift(...r.symbolLayers)}}return i&&(s.callout=nze),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:e}}var CL;let Eh=CL=class extends Sx(ym){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Xfe(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,s){s!=null&&s.origin||super.writeVisualVariables(t,e,i,s)}clone(){return new CL({config:Ue(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Ue(this.fieldMap),url:Ue(this.url),visualVariables:Ue(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Qa(t,e,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];e.has(s)&&t.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};I([N({type:Xfe})],Eh.prototype,"_loader",null),I([N({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Eh.prototype,"config",void 0),I([N({type:Object,json:{write:!0}})],Eh.prototype,"fieldMap",void 0),I([N({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Eh.prototype,"scaleExpression",void 0),I([Ft("scaleExpression")],Eh.prototype,"writeData",null),I([N({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Eh.prototype,"scaleExpressionTitle",void 0),I([N({type:String,json:{write:!0}})],Eh.prototype,"url",void 0),I([Ft("visualVariables")],Eh.prototype,"writeVisualVariables",null),Eh=CL=I([ke("esri.renderers.DictionaryRenderer")],Eh);const oze=Eh;var PL;let up=PL=class extends wt{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(zt.getLogger(this).error(".field: field must be a string value"),null):bC(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new PL({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};I([N({type:fi,json:{type:[Number],write:!0}})],up.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],up.prototype,"field",void 0),I([Sn("field")],up.prototype,"castField",null),I([N({type:String,json:{write:!0}})],up.prototype,"label",void 0),I([N({type:String,json:{write:!0}})],up.prototype,"valueExpression",void 0),I([N({type:String,json:{write:!0}})],up.prototype,"valueExpressionTitle",void 0),up=PL=I([ke("esri.renderers.support.AttributeColorInfo")],up);const Wfe=up;var TL;let vI=TL=class extends wt{constructor(){super(...arguments),this.unit=null}clone(){return new TL({unit:this.unit})}};I([N({type:String,json:{write:!0}})],vI.prototype,"unit",void 0),vI=TL=I([ke("esri.renderers.support.DotDensityLegendOptions")],vI);const aze=vI;var IL;let Rl=IL=class extends Sx(ym){constructor(t){super(t),this.attributes=null,this.backgroundColor=new fi([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Al,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new gm({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new IL({attributes:Ue(this.attributes),backgroundColor:Ue(this.backgroundColor),dotBlendingEnabled:Ue(this.dotBlendingEnabled),dotShape:Ue(this.dotShape),dotSize:Ue(this.dotSize),dotValue:Ue(this.dotValue),legendOptions:Ue(this.legendOptions),outline:Ue(this.outline),referenceScale:Ue(this.referenceScale),seed:Ue(this.seed),visualVariables:Ue(this.visualVariables),authoringInfo:Ue(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Qa(t,e,i.valueExpression),i.field&&t.add(i.field)}};I([N({type:[Wfe],json:{write:!0}})],Rl.prototype,"attributes",void 0),I([N({type:fi,json:{write:!0}})],Rl.prototype,"backgroundColor",void 0),I([N({type:Boolean,json:{write:!0}})],Rl.prototype,"dotBlendingEnabled",void 0),I([N({type:String,json:{write:!1}})],Rl.prototype,"dotShape",void 0),I([N({type:Number,json:{write:!0}})],Rl.prototype,"dotSize",void 0),I([N({type:aze,json:{write:!0}})],Rl.prototype,"legendOptions",void 0),I([N({type:Al,json:{default:null,write:!0}})],Rl.prototype,"outline",void 0),I([N({type:Number,json:{write:!0}})],Rl.prototype,"dotValue",void 0),I([N({type:Number,json:{write:!0}})],Rl.prototype,"referenceScale",void 0),I([N({type:Number,json:{write:!0}})],Rl.prototype,"seed",void 0),I([ni({dotDensity:"dot-density"})],Rl.prototype,"type",void 0),Rl=IL=I([ke("esri.renderers.DotDensityRenderer")],Rl);const lze=Rl;var ML;let U3=ML=class extends wt{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new ML({color:this.color&&this.color.clone(),ratio:this.ratio})}};I([N({type:fi,json:{type:[wn],default:null,write:!0}})],U3.prototype,"color",void 0),I([N({type:Number,json:{write:!0}})],U3.prototype,"ratio",void 0),U3=ML=I([ke("esri.renderers.support.HeatmapColorStop")],U3);const _I=U3;let nb=class extends Hs(wt){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};I([N({type:String,json:{write:!0}})],nb.prototype,"minLabel",void 0),I([N({type:String,json:{write:!0}})],nb.prototype,"maxLabel",void 0),I([N({type:String,json:{write:!0}})],nb.prototype,"title",void 0),nb=I([ke("esri.renderers.support.HeatmapLegendOptions")],nb);const vG=2.4;function cze(t){return Wu(t*vG)}function uze(t){return oke(t)/vG}function hze(t,e,i,s){let{color:n,ratio:r}=e,{color:o,ratio:l}=i;l===r&&(l===1?r-=1e-6:l+=1e-6);const u=Xu((s-r)/(l-r),0,1);hA(t,n.toArray(),o.toArray(),u)}function n0t(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:l})=>l>=0&&l<=1).sort((l,u)=>l.ratio-u.ratio).map(({color:l,ratio:u})=>({color:l,ratio:Math.max(u,.001)})),t.length<1)return i;let s=t[0],n=t[0],r=1;const o=vm();for(let l=0;l<512;l++){const u=(l+.5)/512;for(;u>n.ratio&&r<t.length;)s=n,n=t[r++];hze(o,s,n,u),i.set(o,4*l)}return i}function r0t(t,e,i){const s=Math.sqrt(t**2+e**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function o0t(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var AL;function UJ(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:s}=t;if(e!=null||i!=null||s!=null){const{blurRadius:n,maxPixelIntensity:r,minPixelIntensity:o,...l}=t;return l}}return t}let $o=AL=class extends ym{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new _I({ratio:0,color:new fi("rgba(255, 140, 0, 0)")}),new _I({ratio:.75,color:new fi("rgba(255, 140, 0, 1)")}),new _I({ratio:.9,color:new fi("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return UJ(t)}get blurRadius(){return uze(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",cze(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(vG**2*this.blurRadius**4)}read(t,e){t=UJ(t),super.read(t,e)}getSymbol(){return new zc}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,s=this.valueExpression;i&&typeof i=="string"&&bl(t,e,i),s&&typeof s=="string"&&await Qa(t,e,s)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new AL({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:Ue(this.colorStops),field:this.field,legendOptions:Ue(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};I([N({type:rG,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],$o.prototype,"authoringInfo",void 0),I([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$o.prototype,"blurRadius",null),I([N({type:[_I],json:{write:!0}})],$o.prototype,"colorStops",void 0),I([N({type:String,json:{write:!0}})],$o.prototype,"field",void 0),I([N({type:nb,json:{write:!0}})],$o.prototype,"legendOptions",void 0),I([N({type:Number,json:{write:!0}})],$o.prototype,"maxDensity",void 0),I([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$o.prototype,"maxPixelIntensity",null),I([N({type:Number,json:{write:!0}})],$o.prototype,"minDensity",void 0),I([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$o.prototype,"minPixelIntensity",null),I([N({type:Number,cast:fs,json:{write:!0}})],$o.prototype,"radius",void 0),I([N({type:Number,range:{min:0},json:{default:0,write:!0}})],$o.prototype,"referenceScale",void 0),I([ni({heatmap:"heatmap"})],$o.prototype,"type",void 0),I([N({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],$o.prototype,"valueExpression",void 0),I([N({type:String})],$o.prototype,"valueExpressionTitle",void 0),I([N({readOnly:!0})],$o.prototype,"_pixelIntensityToDensity",null),$o=AL=I([ke("esri.renderers.HeatmapRenderer")],$o);const Zfe=$o;let wy=class extends Hs(wt){constructor(){super(...arguments),this.color=new fi([0,0,0,0]),this.label=null,this.threshold=0}};I([N({type:fi,json:{write:!0}})],wy.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],wy.prototype,"label",void 0),I([N({type:Number,range:{min:0,max:1},json:{write:!0}})],wy.prototype,"threshold",void 0),wy=I([ke("esri.renderers.support.OthersCategory")],wy);const dze={base:wx,key:"type",typeMap:{size:lA,opacity:oG}};let Ll=class extends Sx(Hs(ym)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new fi([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new wy,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new zc({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(yl)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,s)=>i+s.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const s of this.attributes)s.valueExpression&&await Qa(e,i,s.valueExpression),s.field&&e.add(s.field)}};I([N({type:[Wfe],json:{write:!0}})],Ll.prototype,"attributes",void 0),I([N(uG)],Ll.prototype,"backgroundFillSymbol",void 0),I([N({type:fi,json:{write:!0}})],Ll.prototype,"defaultColor",void 0),I([N({type:String,json:{write:!0}})],Ll.prototype,"defaultLabel",void 0),I([N({type:Number,range:{min:0,max:1},json:{write:!0}})],Ll.prototype,"holePercentage",void 0),I([N({type:wy,json:{write:!0}})],Ll.prototype,"othersCategory",void 0),I([N({type:hG,json:{write:!0}})],Ll.prototype,"legendOptions",void 0),I([N({type:Al,json:{default:null,write:!0}})],Ll.prototype,"outline",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],Ll.prototype,"size",void 0),I([ni({pieChart:"pie-chart"})],Ll.prototype,"type",void 0),I([N({types:[dze]})],Ll.prototype,"visualVariables",void 0),Ll=I([ke("esri.renderers.PieChartRenderer")],Ll);const fze=Ll;var DL;let ny=DL=class extends Sx(ym){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new DL({description:this.description,label:this.label,symbol:Ue(this.symbol),visualVariables:Ue(this.visualVariables),authoringInfo:Ue(this.authoringInfo)})}};I([N({type:String,json:{write:!0}})],ny.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],ny.prototype,"label",void 0),I([N(cG)],ny.prototype,"symbol",void 0),I([ni({simple:"simple"})],ny.prototype,"type",void 0),ny=DL=I([ke("esri.renderers.SimpleRenderer")],ny);const Ex=ny,pze=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function kL(t){return t instanceof Ei}function YJ(t){return t instanceof ci?Object.keys(t.items):kL(t)?Sl(t).keys():t?Object.keys(t):[]}function b4(t,e){return t instanceof ci?t.items[e]:t[e]}function mze(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function FS(t){return t?t.declaredClass:null}function Kfe(t,e){var _;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const s=YJ(t),n=YJ(e);if(s.length===0&&n.length===0)return;if(!s.length||!n.length||mze(t,e))return{type:"complete",oldValue:t,newValue:e};const r=n.filter(x=>!s.includes(x)),o=s.filter(x=>!n.includes(x)),l=s.filter(x=>n.includes(x)&&b4(t,x)!==b4(e,x)).concat(r,o).sort(),u=FS(t);if(u&&pze.has(u)&&l.length)return{type:"complete",oldValue:t,newValue:e};let f;const y=kL(t)&&kL(e);for(const x of l){const S=b4(t,x),P=b4(e,x);let A;if((y||typeof S!="function"&&typeof P!="function")&&S!==P&&(S!=null||P!=null)){if(i&&i[x]&&typeof i[x]=="function")A=(_=i[x])==null?void 0:_.call(i,S,P);else if(S instanceof Date&&P instanceof Date){if(S.getTime()===P.getTime())continue;A={type:"complete",oldValue:S,newValue:P}}else A=typeof S=="object"&&typeof P=="object"&&FS(S)===FS(P)?Kfe(S,P):{type:"complete",oldValue:S,newValue:P};A!=null&&(f!=null?f.diff[x]=A:f={type:"partial",diff:{[x]:A}})}}return f}function c0t(t,e){return gze(t,e)}function gze(t,e){if(t==null)return!1;const i=e.split(".");let s=t;for(const n of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const r=s.diff[n];if(!r)return!1;s=r}}return!0}function u0t(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Jfe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&FS(t)!==FS(e)?{type:"complete",oldValue:t,newValue:e}:Kfe(t,e)}function x4(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!x4(i))return!1;for(const i of e.removed)if(!x4(i))return!1;for(const i of e.changed)if(!x4(i))return!1;return!0}case"partial":for(const e in t.diff)if(!x4(t.diff[e]))return!1;return!0}}let rb=class extends Hs(wt){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};I([N(pI)],rb.prototype,"value",void 0),I([N(pI)],rb.prototype,"value2",void 0),I([N(pI)],rb.prototype,"value3",void 0),rb=I([ke("esri.renderers.support.UniqueValue")],rb);const n2=rb;let T0=class extends Hs(wt){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(s=>new n2({value:s})):i==="object"?e[0]instanceof n2?e:e.map(s=>new n2(s)):null}};I([N({type:String,json:{write:!0}})],T0.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],T0.prototype,"label",void 0),I([N(cA)],T0.prototype,"symbol",void 0),I([N({type:[n2],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new n2({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const s of t){const n=[s.value,s.value2,s.value3].filter(yl).map(r=>r.toString());i.push(n)}e.values=i}}}})],T0.prototype,"values",void 0),I([Sn("values")],T0.prototype,"castValues",null),T0=I([ke("esri.renderers.support.UniqueValueClass")],T0);const Qfe=T0;let Y3=class extends Hs(wt){constructor(e){super(e),this.heading=null,this.classes=null}};I([N({type:String,json:{write:!0}})],Y3.prototype,"heading",void 0),I([N({type:[Qfe],json:{write:!0}})],Y3.prototype,"classes",void 0),Y3=I([ke("esri.renderers.support.UniqueValueGroup")],Y3);const NL=Y3;var $L;let ry=$L=class extends wt{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new $L({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};I([N({type:String,json:{write:!0}})],ry.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],ry.prototype,"label",void 0),I([N(cG)],ry.prototype,"symbol",void 0),I([N(pI)],ry.prototype,"value",void 0),ry=$L=I([ke("esri.renderers.support.UniqueValueInfo")],ry);const zS=ry,XJ=new Map;async function yze(t,e){try{return{data:(await xze(t,e)).data,baseUrl:oIe(t),styleUrl:t}}catch(i){return Oh(i),null}}function vze(t,e,i){var u;const s=e.portal!=null?e.portal:Lc.getDefault();let n;const r=`${s.url} - ${(u=s.user)==null?void 0:u.username} - ${t}`,o=XJ.get(r);if(o)return o;const l=_ze(t,s,i).then(f=>(n=f,f.fetchData())).then(f=>({data:f,baseUrl:n.itemUrl??"",styleName:t}));return XJ.set(r,l),l}function _ze(t,e,i){return e.load(i).then(()=>{const s=new Fh({disableExtraQuery:!0,query:`owner:${WJ} AND type:${ZJ} AND typekeywords:"${t}"`});return e.queryItems(s,i)}).then(({results:s})=>{var o;let n=null;const r=t.toLowerCase();if(s&&Array.isArray(s)){for(const l of s)if(((o=l.typeKeywords)==null?void 0:o.some(f=>f.toLowerCase()===r))&&l.type===ZJ&&l.owner===WJ){n=l;break}}if(!n)throw new rt("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function bze(t,e,i){return(t==null?void 0:t.styleUrl)!=null?yze(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?vze(t.styleName,e,i):Promise.reject(new rt("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function p0t(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function m0t(t,e,i=["gltf"]){if(e==="cimRef")return encodeURI(t.cimRef);if(t.formatInfos&&!ht("enable-feature:force-wosr"))for(const s of i){const n=t.formatInfos.find(r=>r.type===s);if(n)return n.href}return encodeURI(t.webRef)}function xze(t,e){const i={responseType:"json",query:{f:"json"},...e};return Qs(Vu(t),i)}const WJ="esri_en",ZJ="Style",g0t="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var X3;const epe="esri.renderers.UniqueValueRenderer",u0=()=>zt.getLogger(epe),KJ="uvInfos-watcher",JJ="uvGroups-watcher",wze=",",Sze=Ko(zS);function Eze(t){const{field1:e,field2:i,field3:s,fieldDelimiter:n,uniqueValueInfos:r,valueExpression:o}=t,l=!(!e||!i);return[{classes:(r??[]).map(u=>{var $;const{symbol:f,label:y,value:_,description:x}=u,[S,P,A]=l?(($=_==null?void 0:_.toString())==null?void 0:$.split(n||""))||[]:[_],k=[];return(e||o)&&k.push(S),i&&k.push(P),s&&k.push(A),{symbol:f,label:y,values:[k],description:x}})}]}function D_(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Bn=X3=class extends Sx(ym){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let s=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let r=0;r<i.length;r++){const o=e.find(l=>l.value===i[r].value);o?Jfe(o,i[r])?(n.changed.push({type:"complete",oldValue:o,newValue:i[r]}),s=!0):n.unchanged.push({oldValue:o,newValue:i[r]}):(n.added.push(i[r]),s=!0)}for(let r=0;r<e.length;r++)i.find(o=>o.value===e[r].value)||(n.removed.push(e[r]),s=!0);return s?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:bC(t)}writeField(t,e,i,s){typeof t=="string"?e[i]=t:s!=null&&s.messages?s.messages.push(new rt("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):u0().error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Lc.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const s=mx(e.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(t,e,i,s){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=$C(t.styleUrl,s))}set uniqueValueGroups(t){this.styleOrigin?u0().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?u0().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var s;if(this.styleOrigin)return void u0().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?Sze(t):new zS({value:t,symbol:Qde(e)}),(s=this.uniqueValueInfos)==null||s.push(i),this._valueInfoMap[D_(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void u0().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(String(s.value)===String(t)){delete this._valueInfoMap[D_(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await uv()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void u0().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await uv(),{arcadeUtils:r}=n;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:n}}const s=this._getUniqueValueInfo(t,i);return(s==null?void 0:s.symbol)||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var s;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(s=this.uniqueValueInfos)==null?void 0:s.reduce((n,r)=>n+r.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new X3({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Ue(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Ue(this.visualVariables),legendOptions:Ue(this.legendOptions),authoringInfo:Ue(this.authoringInfo),backgroundFillSymbol:Ue(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=Ue(this.uniqueValueInfos),i=Ue(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(Ue(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),Qa(t,e,this.valueExpression)];bl(t,e,this.field),bl(t,e,this.field2),bl(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return bze(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(s=>{const n=new Fv({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:s.name});this.defaultSymbol||s.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const r=new zS({value:s.name,symbol:n});e.push(r),this._valueInfoMap[D_(s.name)]=r}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",wze)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[D_(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(KJ);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(xi(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(s,n)=>{s!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,KJ)}}_watchUniqueValueGroups(){this.removeHandles(JJ);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(xi(()=>({classes:i.classes}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const s of i.classes??[])e.push(xi(()=>({symbol:s.symbol,values:s.values,label:s.label,description:s.description}),(n,r)=>{n!==r&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,JJ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:s,fieldDelimiter:n,uniqueValueGroups:r,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!e||!i);for(const u of r)for(const f of u.classes??[]){const{symbol:y,label:_,values:x,description:S}=f;for(const P of x??[]){const{value:A,value2:k,value3:$}=P,F=[A];i&&F.push(k),s&&F.push($);const G=l?F.join(n||""):F[0]??void 0;t.push(new zS({symbol:y,label:_,value:G,description:S}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:s,fieldDelimiter:n,uniqueValueInfos:r}=this;if(!e&&!s||!r.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),l=r.map(f=>{var $;const{symbol:y,label:_,value:x,description:S}=f,[P,A,k]=o?(($=x==null?void 0:x.toString())==null?void 0:$.split(n||""))||[]:[x];return new Qfe({symbol:y,label:_,description:S,values:[new n2({value:P,value2:A,value3:k})]})}),u=[new NL({classes:l})];t&&Object.freeze(u),this._set("uniqueValueGroups",u),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:n,arcade:r,timeZone:o}=e??{};let l=this._cache.compiledFunc;const u=r.arcadeUtils;if(!l){const y=u.createSyntaxTree(this.valueExpression);l=u.createFunction(y),this._cache.compiledFunc=l}const f=u.executeFunction(l,u.createExecContext(t,u.getViewInfo({viewingMode:i,scale:s,spatialReference:n}),o));return this._valueInfoMap[D_(f)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let s;if(this.field2){const n=this.field2,r=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),r&&o.push(i[r]),s=o.join(this.fieldDelimiter||"")}else e&&(s=i[e]);return this._valueInfoMap[D_(s)]}static fromPortalStyle(t,e){const i=new X3(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Lc.getDefault());const s=i.populateFromStyle();return s.catch(n=>{u0().error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),s}static fromStyleUrl(t,e){const i=new X3(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const s=i.populateFromStyle();return s.catch(n=>{u0().error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),s}};I([N({readOnly:!0})],Bn.prototype,"_cache",null),I([ni({uniqueValue:"unique-value"})],Bn.prototype,"type",void 0),I([N(uG)],Bn.prototype,"backgroundFillSymbol",void 0),I([N({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Bn.prototype,"field",null),I([Sn("field")],Bn.prototype,"castField",null),I([Ft("field")],Bn.prototype,"writeField",null),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"field2",null),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"field3",null),I([N({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Bn.prototype,"orderByClassesEnabled",void 0),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"valueExpression",null),I([N({type:String,json:{write:!0}})],Bn.prototype,"valueExpressionTitle",void 0),I([N({type:hG,json:{write:!0}})],Bn.prototype,"legendOptions",void 0),I([N({type:String,json:{write:!0}})],Bn.prototype,"defaultLabel",void 0),I([N(wq({...cA},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Bn.prototype,"defaultSymbol",null),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"fieldDelimiter",null),I([N({type:Lc,readOnly:!0})],Bn.prototype,"portal",void 0),I([At("portal",["styleName"])],Bn.prototype,"readPortal",null),I([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Bn.prototype,"styleOrigin",void 0),I([At("styleOrigin",["styleName","styleUrl"])],Bn.prototype,"readStyleOrigin",null),I([Ft("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Bn.prototype,"writeStyleOrigin",null),I([N({type:[NL],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||Eze(e)).map(s=>NL.fromJSON(s,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Bn.prototype,"uniqueValueGroups",null),I([N({type:[zS],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Bn.prototype,"uniqueValueInfos",null),Bn=X3=I([ke(epe)],Bn);const _G=Bn,fA={key:"type",base:ym,typeMap:{heatmap:Zfe,simple:Ex,"unique-value":_G,"class-breaks":yfe,"dot-density":lze,dictionary:oze,"pie-chart":fze},errorContext:"renderer"},Cze={key:"type",base:ym,typeMap:{simple:Ex,"unique-value":_G,"class-breaks":yfe,heatmap:Zfe},errorContext:"renderer",validate:Pze};function Pze(t){switch(t.type){case"simple":return Tze(t);case"unique-value":return Ize(t);case"class-breaks":return Mze(t);case"heatmap":return t}}function Tze(t){if(t.symbol)return t;zt.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Ize(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:s,label:n},r)=>(s||zt.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${r}] ${n}) without a symbol from web scene.`),!!s));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function Mze(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:s,label:n},r)=>(s||zt.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${r}] ${n}) without a symbol from web scene.`),!!s));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function y0t(t,e){return wE(t,null,e)}const Aze=nx({types:fA});function wE(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new ed("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Aze(t,e,i):null}var OL;let oy=OL=class extends wt{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new OL({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};I([N({type:String,json:{write:!0}})],oy.prototype,"expression",void 0),I([N({type:String,json:{write:!0}})],oy.prototype,"name",void 0),I([N({type:["boolean","date","number","string"],json:{write:!0}})],oy.prototype,"returnType",void 0),I([N({type:String,json:{write:!0}})],oy.prototype,"title",void 0),oy=OL=I([ke("esri.form.ExpressionInfo")],oy);const Dze=oy;let ay=class extends wt{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};I([N({type:String,json:{write:!0}})],ay.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],ay.prototype,"label",void 0),I([N()],ay.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],ay.prototype,"visibilityExpression",void 0),ay=I([ke("esri.form.elements.Element")],ay);const dv=ay;let bI=class extends Hs(wt){constructor(e){super(e),this.type=null}};I([N()],bI.prototype,"type",void 0),bI=I([ke("esri.form.elements.inputs.attachments.Input")],bI);const Ig=bI,pA=["any","capture","upload"];let ob=class extends Ig{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};I([N({type:["audio"],readOnly:!0,json:{write:!0}})],ob.prototype,"type",void 0),I([N({type:pA,json:{write:!0}})],ob.prototype,"inputMethod",void 0),I([N({type:Number,json:{write:!0}})],ob.prototype,"maxDuration",void 0),ob=I([ke("esri.form.elements.inputs.attachments.AudioInput")],ob);const QJ=ob;let W3=class extends Ig{constructor(e){super(e),this.type="document",this.maxFileSize=null}};I([N({type:["document"],readOnly:!0,json:{write:!0}})],W3.prototype,"type",void 0),I([N({type:Number,json:{write:!0}})],W3.prototype,"maxFileSize",void 0),W3=I([ke("esri.form.elements.inputs.attachments.DocumentInput")],W3);const eQ=W3;let ab=class extends Ig{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};I([N({type:["image"],readOnly:!0,json:{write:!0}})],ab.prototype,"type",void 0),I([N({type:pA,json:{write:!0}})],ab.prototype,"inputMethod",void 0),I([N({type:Number,json:{write:!0}})],ab.prototype,"maxImageSize",void 0),ab=I([ke("esri.form.elements.inputs.attachments.ImageInput")],ab);const tQ=ab;let Z3=class extends Ig{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};I([N({type:["signature"],readOnly:!0,json:{write:!0}})],Z3.prototype,"type",void 0),I([N({type:pA,json:{write:!0}})],Z3.prototype,"inputMethod",void 0),Z3=I([ke("esri.form.elements.inputs.attachments.SignatureInput")],Z3);const iQ=Z3;let lb=class extends Ig{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};I([N({type:["video"],readOnly:!0,json:{write:!0}})],lb.prototype,"type",void 0),I([N({type:pA,json:{write:!0}})],lb.prototype,"inputMethod",void 0),I([N({type:Number,json:{write:!0}})],lb.prototype,"maxDuration",void 0),lb=I([ke("esri.form.elements.inputs.attachments.VideoInput")],lb);const sQ=lb;function tpe(t){return{nestableTypes:{base:Ig,key:"type",typeMap:{audio:QJ,document:eQ,image:tQ,signature:iQ,video:sQ}},allTypes:{base:Ig,key:"type",typeMap:{attachment:t,audio:QJ,document:eQ,image:tQ,signature:iQ,video:sQ}}}}function kze(t,e,i){return t?t.map(s=>Yu(e.nestableTypes,s)):null}function Nze(t,e,i){if(!t)return null;const s=e.nestableTypes.typeMap;return t.filter(n=>s[n.type]).map(n=>s[n.type].fromJSON(n))}function $ze(t,e,i){if(!t)return null;const s=e.nestableTypes.typeMap;return t.filter(n=>s[n.type]).map(n=>n.toJSON())}let Vd=class extends Ig{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return kze(e,O8)}readInputs(e,i){return Nze(i.inputTypes,O8)}writeInputs(e,i){i.inputTypes=$ze(e,O8)}};I([N({type:["attachment"],readOnly:!0,json:{write:!0}})],Vd.prototype,"type",void 0),I([N({type:["any","exact","exactOrNone"],json:{write:!0}})],Vd.prototype,"attachmentAssociationType",void 0),I([N({json:{write:{isRequired:!0}}})],Vd.prototype,"inputTypes",void 0),I([Sn("inputTypes")],Vd.prototype,"castInputs",null),I([At("inputTypes")],Vd.prototype,"readInputs",null),I([Ft("inputTypes")],Vd.prototype,"writeInputs",null),Vd=I([ke("esri.form.elements.inputs.attachments.AttachmentInput")],Vd);const O8=tpe(Vd),Oze=Vd;var RL;const Rze=tpe(Oze);let gc=RL=class extends dv{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new RL({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};I([N({type:Boolean,json:{write:!0}})],gc.prototype,"allowUserRename",void 0),I([N({type:String,json:{write:{isRequired:!0}}})],gc.prototype,"attachmentKeyword",void 0),I([N({type:Boolean,json:{write:!0}})],gc.prototype,"displayFilename",void 0),I([N({type:String,json:{write:!0}})],gc.prototype,"editableExpression",void 0),I([N({type:String,json:{write:!0}})],gc.prototype,"filenameExpression",void 0),I([N({types:Rze.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],gc.prototype,"input",void 0),I([N({type:Number,json:{write:!0}})],gc.prototype,"maxAttachmentCount",void 0),I([N({type:Number,json:{write:!0}})],gc.prototype,"minAttachmentCount",void 0),I([N({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],gc.prototype,"type",void 0),I([N({type:Boolean,json:{write:!0}})],gc.prototype,"useOriginalFilename",void 0),gc=RL=I([ke("esri.form.elements.AttachmentElement")],gc);const nQ=gc;let xI=class extends wt{constructor(e){super(e),this.type=null}};I([N()],xI.prototype,"type",void 0),xI=I([ke("esri.form.elements.inputs.Input")],xI);const _m=xI;let K3=class extends _m{constructor(e){super(e),this.maxLength=null,this.minLength=0}};I([N({type:Number,json:{write:!0}})],K3.prototype,"maxLength",void 0),I([N({type:Number,json:{write:!0}})],K3.prototype,"minLength",void 0),K3=I([ke("esri.form.elements.inputs.TextInput")],K3);const bG=K3;var LL;let wI=LL=class extends bG{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new LL({maxLength:this.maxLength,minLength:this.minLength})}};I([N({type:["barcode-scanner"],json:{read:!1,write:!0}})],wI.prototype,"type",void 0),wI=LL=I([ke("esri.form.elements.inputs.BarcodeScannerInput")],wI);const Lze=wI;var FL;let cb=FL=class extends _m{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new FL({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};I([N({type:String,json:{write:!0}})],cb.prototype,"noValueOptionLabel",void 0),I([N({type:Boolean,json:{write:!0}})],cb.prototype,"showNoValueOption",void 0),I([N({type:["combo-box"],json:{read:!1,write:!0}})],cb.prototype,"type",void 0),cb=FL=I([ke("esri.form.elements.inputs.ComboBoxInput")],cb);const Fze=cb;var zL;function rQ(t){return t??null}function oQ(t){return t??null}let Od=zL=class extends _m{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return rQ(e.max)}writeMax(t,e){e.max=oQ(t)}readMin(t,e){return rQ(e.min)}writeMin(t,e){e.min=oQ(t)}clone(){return new zL({max:this.max,min:this.min})}};I([N({type:String,json:{type:String,write:!0}})],Od.prototype,"max",void 0),I([At("max")],Od.prototype,"readMax",null),I([Ft("max")],Od.prototype,"writeMax",null),I([N({type:String,json:{type:String,write:!0}})],Od.prototype,"min",void 0),I([At("min")],Od.prototype,"readMin",null),I([Ft("min")],Od.prototype,"writeMin",null),I([N({type:["date-picker"],json:{read:!1,write:!0}})],Od.prototype,"type",void 0),Od=zL=I([ke("esri.form.elements.inputs.DatePickerInput")],Od);const zze=Od;var qL;function R8(t){return t??null}function L8(t){return t??null}let Fl=qL=class extends _m{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return R8(e.max)}writeMax(t,e){e.max=L8(t)}readMin(t,e){return R8(e.min)}writeMin(t,e){e.min=L8(t)}readTimeResolution(t,e){return R8(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=L8(t)}clone(){return new qL({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};I([N({type:Boolean,json:{write:!0}})],Fl.prototype,"includeTimeOffset",void 0),I([N({type:String,json:{type:String,write:!0}})],Fl.prototype,"max",void 0),I([At("max")],Fl.prototype,"readMax",null),I([Ft("max")],Fl.prototype,"writeMax",null),I([N({type:String,json:{type:String,write:!0}})],Fl.prototype,"min",void 0),I([At("min")],Fl.prototype,"readMin",null),I([Ft("min")],Fl.prototype,"writeMin",null),I([N({type:String,json:{type:String,write:!0}})],Fl.prototype,"timeResolution",void 0),I([At("timeResolution")],Fl.prototype,"readTimeResolution",null),I([Ft("timeResolution")],Fl.prototype,"writeTimeResolution",null),I([N({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Fl.prototype,"type",void 0),Fl=qL=I([ke("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Fl);const qze=Fl;var VL;function aQ(t){return t!=null?new Date(t):null}function lQ(t){return t?t.getTime():null}let Ch=VL=class extends _m{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return aQ(e.max)}writeMax(t,e){e.max=lQ(t)}readMin(t,e){return aQ(e.min)}writeMin(t,e){e.min=lQ(t)}clone(){return new VL({includeTime:this.includeTime,max:this.max,min:this.min})}};I([N({type:Boolean,json:{write:!0}})],Ch.prototype,"includeTime",void 0),I([N({type:Date,json:{type:Number,write:!0}})],Ch.prototype,"max",void 0),I([At("max")],Ch.prototype,"readMax",null),I([Ft("max")],Ch.prototype,"writeMax",null),I([N({type:Date,json:{type:Number,write:!0}})],Ch.prototype,"min",void 0),I([At("min")],Ch.prototype,"readMin",null),I([Ft("min")],Ch.prototype,"writeMin",null),I([N({type:["datetime-picker"],json:{read:!1,write:!0}})],Ch.prototype,"type",void 0),Ch=VL=I([ke("esri.form.elements.inputs.DateTimePickerInput")],Ch);const Vze=Ch;var GL;let ub=GL=class extends _m{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new GL({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};I([N({type:String,json:{write:!0}})],ub.prototype,"noValueOptionLabel",void 0),I([N({type:Boolean,json:{write:!0}})],ub.prototype,"showNoValueOption",void 0),I([N({type:["radio-buttons"],json:{read:!1,write:!0}})],ub.prototype,"type",void 0),ub=GL=I([ke("esri.form.elements.inputs.RadioButtonsInput")],ub);const Gze=ub;var jL;let hb=jL=class extends _m{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new jL({offValue:this.offValue,onValue:this.onValue})}};I([N({type:[String,Number],json:{write:!0}})],hb.prototype,"offValue",void 0),I([N({type:[String,Number],json:{write:!0}})],hb.prototype,"onValue",void 0),I([N({type:["switch"],json:{read:!1,write:!0}})],hb.prototype,"type",void 0),hb=jL=I([ke("esri.form.elements.inputs.SwitchInput")],hb);const jze=hb;var BL;let SI=BL=class extends bG{constructor(t){super(t),this.type="text-area"}clone(){return new BL({maxLength:this.maxLength,minLength:this.minLength})}};I([N({type:["text-area"],json:{read:!1,write:!0}})],SI.prototype,"type",void 0),SI=BL=I([ke("esri.form.elements.inputs.TextAreaInput")],SI);const Bze=SI;var HL;let EI=HL=class extends bG{constructor(t){super(t),this.type="text-box"}clone(){return new HL({maxLength:this.maxLength,minLength:this.minLength})}};I([N({type:["text-box"],json:{read:!1,write:!0}})],EI.prototype,"type",void 0),EI=HL=I([ke("esri.form.elements.inputs.TextBoxInput")],EI);const Hze=EI;var UL;function F8(t){return t??null}function z8(t){return t??null}let yc=UL=class extends _m{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return F8(e.max)}writeMax(t,e){e.max=z8(t)}readMin(t,e){return F8(e.min)}writeMin(t,e){e.min=z8(t)}readTimeResolution(t,e){return F8(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=z8(t)}clone(){return new UL({max:this.max,min:this.min,timeResolution:this.timeResolution})}};I([N({type:String,json:{type:String,write:!0}})],yc.prototype,"max",void 0),I([At("max")],yc.prototype,"readMax",null),I([Ft("max")],yc.prototype,"writeMax",null),I([N({type:String,json:{type:String,write:!0}})],yc.prototype,"min",void 0),I([At("min")],yc.prototype,"readMin",null),I([Ft("min")],yc.prototype,"writeMin",null),I([N({type:String,json:{type:String,write:!0}})],yc.prototype,"timeResolution",void 0),I([At("timeResolution")],yc.prototype,"readTimeResolution",null),I([Ft("timeResolution")],yc.prototype,"writeTimeResolution",null),I([N({type:["time-picker"],json:{read:!1,write:!0}})],yc.prototype,"type",void 0),yc=UL=I([ke("esri.form.elements.inputs.TimePickerInput")],yc);const Uze=yc,Yze={base:_m,key:"type",typeMap:{"barcode-scanner":Lze,"combo-box":Fze,"date-picker":zze,"datetime-picker":Vze,"datetimeoffset-picker":qze,"radio-buttons":Gze,switch:jze,"text-area":Bze,"text-box":Hze,"time-picker":Uze}};var YL;let Ay=YL=class extends wt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new YL({name:this.name,code:this.code})}};I([N({type:String,json:{write:!0}})],Ay.prototype,"name",void 0),I([N({type:[String,Number],json:{write:!0}})],Ay.prototype,"code",void 0),Ay=YL=I([ke("esri.layers.support.CodedValue")],Ay);const Xze=new ps({inherited:"inherited",codedValue:"coded-value",range:"range"});let J3=class extends wt{constructor(e){super(e),this.name=null,this.type=null}};I([N({type:String,json:{write:!0}})],J3.prototype,"name",void 0),I([ni(Xze)],J3.prototype,"type",void 0),J3=I([ke("esri.layers.support.Domain")],J3);const mA=J3;var XL;let Q3=XL=class extends mA{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(s=>(String(s.code)===i&&(e=s.name),!!e))}return e}clone(){return new XL({codedValues:Ue(this.codedValues),name:this.name})}};I([N({type:[Ay],json:{write:!0}})],Q3.prototype,"codedValues",void 0),I([ni({codedValue:"coded-value"})],Q3.prototype,"type",void 0),Q3=XL=I([ke("esri.layers.support.CodedValueDomain")],Q3);const gA=Q3;var WL;let CI=WL=class extends mA{constructor(t){super(t),this.type="inherited"}clone(){return new WL}};I([ni({inherited:"inherited"})],CI.prototype,"type",void 0),CI=WL=I([ke("esri.layers.support.InheritedDomain")],CI);const ipe=CI;var ZL;let db=ZL=class extends mA{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new ZL({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};I([N({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],db.prototype,"maxValue",void 0),I([N({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],db.prototype,"minValue",void 0),I([ni({range:"range"})],db.prototype,"type",void 0),db=ZL=I([ke("esri.layers.support.RangeDomain")],db);const spe=db,npe={key:"type",base:mA,typeMap:{range:spe,"coded-value":gA,inherited:ipe}};function yA(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return spe.fromJSON(t);case"codedValue":return gA.fromJSON(t);case"inherited":return ipe.fromJSON(t)}return null}var KL;let _u=KL=class extends dv{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new KL({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};I([N({types:npe,json:{read:{reader:yA},write:!0}})],_u.prototype,"domain",void 0),I([N({type:Boolean,json:{write:!0}})],_u.prototype,"editable",void 0),I([N({type:String,json:{write:!0}})],_u.prototype,"editableExpression",void 0),I([N({type:String,json:{write:!0}})],_u.prototype,"fieldName",void 0),I([N({type:String,json:{write:!0}})],_u.prototype,"hint",void 0),I([N({types:Yze,json:{read:{source:"inputType"},write:{target:"inputType"}}})],_u.prototype,"input",void 0),I([N({type:String,json:{write:!0}})],_u.prototype,"requiredExpression",void 0),I([N({type:String,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],_u.prototype,"valueExpression",void 0),_u=KL=I([ke("esri.form.elements.FieldElement")],_u);const cQ=_u;var JL;let hp=JL=class extends dv{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new JL({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:Ue(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};I([N({type:Number,json:{write:!0}})],hp.prototype,"displayCount",void 0),I([N({type:["list"],json:{write:!0}})],hp.prototype,"displayType",void 0),I([N({type:String,json:{write:!0}})],hp.prototype,"editableExpression",void 0),I([N({type:[UV],json:{write:!0}})],hp.prototype,"orderByFields",void 0),I([N({type:Number,json:{write:!0}})],hp.prototype,"relationshipId",void 0),I([N({type:["relationship"],json:{read:!1,write:!0}})],hp.prototype,"type",void 0),hp=JL=I([ke("esri.form.elements.RelationshipElement")],hp);const uQ=hp;var QL;let fb=QL=class extends dv{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new QL({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};I([N({type:String,json:{write:!0}})],fb.prototype,"text",void 0),I([N({type:String,json:{write:!0}})],fb.prototype,"textFormat",void 0),I([N({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],fb.prototype,"type",void 0),fb=QL=I([ke("esri.form.elements.TextElement")],fb);const hQ=fb;function rpe(t){return{typesWithGroup:{base:dv,key:"type",typeMap:{attachment:nQ,field:cQ,group:t,relationship:uQ,text:hQ}},typesWithoutGroup:{base:dv,key:"type",typeMap:{attachment:nQ,field:cQ,relationship:uQ,text:hQ}}}}function ope(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>s[n.type].fromJSON(n))}function ape(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>n.toJSON())}function lpe(t,e,i=!0){return t?t.map(s=>Yu(i?e.typesWithGroup:e.typesWithoutGroup,s)):null}var eF;let Gd=eF=class extends dv{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return lpe(t,q8,!1)}readElements(t,e){return ope(e.formElements,q8,!1)}writeElements(t,e){e.formElements=ape(t,q8,!1)}clone(){return new eF({description:this.description,elements:Ue(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};I([N({json:{write:!0}})],Gd.prototype,"elements",void 0),I([Sn("elements")],Gd.prototype,"castElements",null),I([At("elements",["formElements"])],Gd.prototype,"readElements",null),I([Ft("elements")],Gd.prototype,"writeElements",null),I([N({type:["collapsed","expanded"],json:{write:!0}})],Gd.prototype,"initialState",void 0),I([N({type:String,json:{read:!1,write:!0}})],Gd.prototype,"type",void 0),Gd=eF=I([ke("esri.form.elements.GroupElement")],Gd);const q8=rpe(Gd),Wze=Gd,Zze=t=>t.type==="field",Kze=t=>t.type==="group",Jze=t=>t.type==="text",M0t=t=>t.type==="relationship";var tF;const V8=rpe(Wze);let Ph=tF=class extends wt{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return lpe(t,V8)}readElements(t,e){return ope(e.formElements,V8)}writeElements(t,e){e.formElements=ape(t,V8)}clone(){return new tF({description:this.description,expressionInfos:Ue(this.expressionInfos),elements:Ue(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:s,elements:n,expressionInfos:r,title:o}=this;if(qS(i,t,s),qS(i,t,o),!n)return[];const l=Qze(n,r).map(u=>Qa(i,t,u));await Promise.all(l);for(const u of n)cpe(i,{fieldsIndex:t,relationships:e},u);return Array.from(i).sort()}};function cpe(t,e,i){var n;const{fieldsIndex:s}=e;if(!s||s.fields.length!==t.size)switch(qS(t,s,i.label),qS(t,s,i.description),i.type){case"field":bl(t,s,i.fieldName);break;case"group":i.elements.forEach(r=>cpe(t,e,r));break;case"relationship":if(e.relationships){const r=e.relationships.find(o=>o.id===i.relationshipId);r&&bl(t,s,r.keyField)}hv(t,s,(n=i.orderByFields)==null?void 0:n.map(r=>r.field));break;case"text":qS(t,s,i.text)}}function Qze(t,e){if(!e||e.length===0)return[];const i=upe(t),s=[];for(const n of e)i.has(n.name)&&s.push(n.expression);return s}function upe(t){const e=new Set;for(const i of t)if(WX(e,i.visibilityExpression),!Jze(i)){if(Kze(i))E9(e,upe(i.elements));else if(WX(e,i.editableExpression),Zze(i)){const{requiredExpression:s,valueExpression:n}=i;E9(e,[s,n])}}return e}function qS(t,e,i){hv(t,e,Fhe(i))}I([N({type:String,json:{write:!0}})],Ph.prototype,"description",void 0),I([N({json:{write:!0}})],Ph.prototype,"elements",void 0),I([Sn("elements")],Ph.prototype,"castElements",null),I([At("elements",["formElements"])],Ph.prototype,"readElements",null),I([Ft("elements")],Ph.prototype,"writeElements",null),I([N({type:[Dze],json:{write:!0}})],Ph.prototype,"expressionInfos",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],Ph.prototype,"preserveFieldValuesWhenHidden",void 0),I([N({type:String,json:{write:!0}})],Ph.prototype,"title",void 0),Ph=tF=I([ke("esri.form.FormTemplate")],Ph);const eqe=Ph;let iF=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new IC,this._items=new Set}get length(){return mi(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return mi(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(s=>{e(s)||this._items.delete(s)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){mi(this._observable),yield*this._items}};const hpe=new FinalizationRegistry(t=>{t.close()});function tqe(t,e){hpe.register(t,e,e)}function iqe(t){hpe.unregister(t)}function dpe(t,e){return new Proxy({},{get:(i,s,n)=>(...r)=>{let o,l;const u=r[r.length-1];return sqe(u)&&(o=u.signal,l=u.transferList,r.pop()),t.apply(e?`${e}.${s.toString()}`:s.toString(),r,{transferList:l,signal:o})}})}function sqe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const nqe={statsWorker:()=>nt(()=>import("./statsWorker-eSmXr85F.js"),__vite__mapDeps([240,178,52,2,135,136]),import.meta.url),geometryEngineWorker:()=>nt(()=>import("./geometryEngineWorker-BCW7smKj.js"),__vite__mapDeps([241,239,174]),import.meta.url),CSVSourceWorker:()=>nt(()=>import("./CSVSourceWorker-C6jppEpz.js"),__vite__mapDeps([242,196,174,103,104,169,102,105,170,171,22,172,173,12,13,14,15,175,176,177,97,55,133,178,52,2,135,136,179,101,132,111]),import.meta.url),EdgeProcessingWorker:()=>nt(()=>import("./EdgeProcessingWorker-CAJC-ZhK.js"),__vite__mapDeps([243,244,245,215,246,247,248,212,211,120,249,25,225,250]),import.meta.url),ElevationSamplerWorker:()=>nt(()=>import("./ElevationSamplerWorker-C2Ivt6uo.js"),__vite__mapDeps([251,171,22,213,128,129,214,215,216]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>nt(()=>import("./FeatureServiceSnappingSourceWorker-DGSK-yrH.js"),__vite__mapDeps([252,169,102,103,104,105,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,6,7,253,145,146,144,39]),import.meta.url),GeoJSONSourceWorker:()=>nt(()=>import("./GeoJSONSourceWorker-CqYokrdP.js"),__vite__mapDeps([254,102,103,104,105,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,195,196,132,111,197]),import.meta.url),LercWorker:()=>nt(()=>import("./LercWorker-DpUnuuc1.js"),[],import.meta.url),MemorySourceWorker:()=>nt(()=>import("./MemorySourceWorker-CDEqmaYD.js"),__vite__mapDeps([255,102,103,104,105,189,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111,197,196]),import.meta.url),PBFDecoderWorker:()=>nt(()=>import("./PBFDecoderWorker-D_4EYip0.js"),__vite__mapDeps([256,257,102,103,104,105,145,146]),import.meta.url),FeaturePipelineWorker:()=>nt(()=>import("./FeaturePipelineWorker-jM1rzwDZ.js"),__vite__mapDeps([258,6,7,19,20,21,8,22,23,259,260,26,25,261,262,225,263,17,55,264,265,266,104,224,16,267,176,102,103,105,268,126,247,173,12,13,14,15,174,172,269,270,271,210,272,273,175,177,97,133,178,52,2,135,136,179,144,145,146,194,195,196,132,111,197,274,275]),import.meta.url),PointCloudWorker:()=>nt(()=>import("./PointCloudWorker-upAZbzKQ.js"),__vite__mapDeps([276,277,201,119,120,127,128,129]),import.meta.url),RasterWorker:()=>nt(()=>import("./RasterWorker-ByB63Pg2.js"),__vite__mapDeps([278,154,76,155,159,158]),import.meta.url),SceneLayerSnappingSourceWorker:()=>nt(()=>import("./SceneLayerSnappingSourceWorker-D3p4ilVB.js"),__vite__mapDeps([279,184,280,247,248,212,211,245,215,246,120,249,25,225,250]),import.meta.url),SceneLayerWorker:()=>nt(()=>import("./SceneLayerWorker-BMAd6PUS.js"),__vite__mapDeps([281,214,118,119,120,121,122,123,124,125,126,127,128,129]),import.meta.url),WFSSourceWorker:()=>nt(()=>import("./WFSSourceWorker-BP3cMNij.js"),__vite__mapDeps([282,102,103,104,105,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,195,196,197,231,232]),import.meta.url),WorkerTileHandler:()=>nt(()=>import("./WorkerTileHandler-O-CA7rdp.js"),__vite__mapDeps([283,223,224,267,284,222,146,271,23,285,221,25,225,18,210,265]),import.meta.url),Lyr3DWorker:()=>nt(()=>import("./Lyr3DWorker-CfJy-04t.js"),[],import.meta.url),Feature3DPipelineWorker:()=>nt(()=>import("./Feature3DPipelineWorker-C-9-CXVD.js"),__vite__mapDeps([286,177,12,13,14,15,102,103,104,105,97,55,172,173,174,133,178,52,2,135,136,179,8,171,22,176,144,145,146,211,287,288,127,128,129,124,120,126,247,26,25,289,290,125,183,184,291,215,292,249,225,245,246,293,294,280,295,182,277,296,297,122,262,298,123,299]),import.meta.url)},fpe="worker:port-closed";var Vo;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Vo||(Vo={}));let rqe=0;function ppe(){return rqe++}function oqe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function SE(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function xG(t,e,i,s){if(e.type===Vo.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Vo.INVOKE&&e.type!==Vo.RESPONSE)return void t.postMessage(e);let n;if(oqe(i)?(n=dQ(i.transferList),e.data=i.result):(n=dQ(s),e.data=i),n){if(ht("ff")){for(const r of n)if("byteLength"in r&&r.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Vo.INVOKE:throw o;case Vo.RESPONSE:return void xG(t,{type:Vo.RESPONSE,jobId:e.jobId,error:SE(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function EE(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function dQ(t){if(!(t!=null&&t.length))return null;if(ht("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!aqe(i));return e.length?e:null}function aqe(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function D0t(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===fpe;if(!(cd(e)||i))throw e;return}}const{CLOSE:fQ,ABORT:pQ,INVOKE:mQ,RESPONSE:Bw,OPEN_PORT:gQ,ON:lqe}=Vo,cqe=2;let uqe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Vo.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Mg=class pb{static connect(e,i){const s=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const r=new pb(s.port1,{channel:s,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=r),pb.clients.set(r,n),s.port2}static loadWorker(e){const i=nqe[e];return i?i():Promise.resolve(null)}constructor(e,i,s){this._port=e,this._jobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new uqe(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:fQ}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,s){return this.apply(e,[i],s)}apply(e,i,s){const n=s==null?void 0:s.signal,r=s==null?void 0:s.transferList;if(!this._port)return Promise.reject(new rt(fpe,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=ppe();return new Promise((l,u)=>{if(Rc(n))return this._processWork(),void u(or());const f=Ul(n,()=>{const _=this._outJobs.get(o);_&&(this._outJobs.delete(o),this._processWork(),Co(_.abortHandle),this._post({type:pQ,jobId:o}),u(or()))}),y={resolve:l,reject:u,abortHandle:f,debugInfo:e};this._outJobs.set(o,y),this._post({type:mQ,jobId:o,methodName:e,abortable:n!=null},i,r)})}createInvokeProxy(e){return dpe(this,e)}on(e,i){const s=new MessageChannel;function n(r){i(r.data)}return this._port.postMessage({type:Vo.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",n),s.port1.start(),ds(()=>{s.port1.postMessage({type:Vo.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:gQ,port:e.port2}),e.port1}_processWork(){var o;if(this._outJobs.size>=cqe)return;const e=(o=this._jobQueue)==null?void 0:o.pop();if(!e)return;const{methodName:i,data:s,invokeOptions:n,resolver:r}=e;this.apply(i,s,n).then(l=>r.resolve(l)).catch(l=>r.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Co(e.abortHandle),e.reject(or(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const s=EE(e);if(s)switch(s.type){case Bw:this._onResponseMessage(s);break;case mQ:i?this._onInvokeMessage(s):this._invokeQueue.push(s);break;case pQ:this._onAbortMessage(s);break;case fQ:this._onCloseMessage();break;case gQ:this._onOpenPortMessage(s);break;case lqe:this._onOnMessage(s)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,n=i.get(s);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&pb.clients.get(this)===e&&e.destroy(),pb.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:s,data:n=[],abortable:r}=e,o=r?new AbortController:null,l=this._inJobs;let u,f=this._client,y=f[i];try{if(!y&&i&&i.includes(".")){const _=i.split(".");for(let x=0;x<_.length-1;x++)f=f[_[x]],y=f[_[x+1]]}if(typeof y!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),u=y.apply(f,n)}catch(_){return void this._post({type:Bw,jobId:s,error:SE(_)})}Iv(u)?(l.set(s,{controller:o,promise:u}),u.then(_=>{l.has(s)&&(l.delete(s),this._post({type:Bw,jobId:s},_))},_=>{l.has(s)&&(l.delete(s),cd(_)||this._post({type:Bw,jobId:s,error:SE(_||{message:`Error encountered at method ${i}`})}))})):this._post({type:Bw,jobId:s},u)}_onOpenPortMessage(e){new pb(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,s=this._client.on(e.eventType,r=>{i.postMessage(r)}),n=zy(e.port,"message",r=>{const o=EE(r);(o==null?void 0:o.type)===Vo.CLOSE&&(n.remove(),s.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:s,data:n}=e,r=this._outJobs;if(!r.has(i))return;const o=r.get(i);r.delete(i),this._processWork(),Co(o.abortHandle),s?o.reject(rt.fromJSON(JSON.parse(s))):o.resolve(n)}_post(e,i,s){return xG(this._port,e,i,s)}};Mg.kernelInfo={buildDate:Aae,fullVersion:Vq,revision:Dae},Mg.clients=new Map;let hqe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new iF}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((s,n)=>{let r=!0;const o=l=>{Ql(i.signal),r&&(r=!1,l())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let l=0;l<e.length;++l){const u=e[l];Iv(u)?this._clientPromises[l]=u.then(f=>(this._clients[l]=new Mg(f,i,this._ongoingJobsQueue),o(s),this._clients[l]),()=>(o(n),null)):(this._clients[l]=new Mg(u,i,this._ongoingJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(s))}})}broadcast(e,i,s){const n=new Array(this._clientPromises.length);for(let r=0;r<this._clientPromises.length;++r){const o=this._clientPromises[r];n[r]=o.then(l=>l==null?void 0:l.invoke(e,i,s))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(or(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(s=>s==null?void 0:s.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,iqe(this)}invoke(e,i,s){return this.apply(e,[i],s)}apply(e,i,s){const n=Tc();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:s,resolver:n});for(let r=0;r<this._clientPromises.length;r++){const o=this._clients[r];o?o.jobAdded():this._clientPromises[r].then(l=>l==null?void 0:l.jobAdded())}return n.promise}createInvokeProxy(e){return dpe(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>pm(this._clients.map(s=>s.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(r=>{r&&(i[n]=r.openPort()),--s==0&&e(i)})})}get test(){}};const dqe={async request(t,e){var o,l;const i=t.options,s=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((o=V$(t.url))!=null&&o.after)?s:"array-buffer";const n=await Qs(t.url,i),r={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((l=n.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete r.data.signal,r;case"blob":r.data=await r.data.arrayBuffer();break;case"json":r.data=new TextEncoder().encode(JSON.stringify(r.data)).buffer;break;case"text":r.data=new TextEncoder().encode(r.data).buffer}return{result:r,transferList:[r.data]}}},yQ={};function fqe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...yQ.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=yQ.baseUrl),e}let pqe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>e[i](...s)})}},PI=class{constructor(){this._dispatcher=new pqe,this._workerPostMessage({type:Vo.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){_2(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,s){this._dispatcher.addEventListener(e,i,s)}removeEventListener(e,i,s){this._dispatcher.removeEventListener(e,i,s)}_workerPostMessage(e){_2(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=EE(e);if(i&&i.type===Vo.OPEN){const{modulePath:s,jobId:n}=i;let r=await Mg.loadWorker(s);r||(r=await import(s));const o=Mg.connect(r);this._workerPostMessage({type:Vo.OPENED,jobId:n,data:o})}}};const sF=()=>zt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:mqe}=Vo,gqe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let w4,S4;const vQ="Failed to create Worker. Fallback to execute module in main thread";async function yqe(){if(!ht("esri-workers"))return _Q(new PI);if(!w4&&!S4)try{const e=gqe.split("{CONFIGURATION}").join(vqe());w4=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){S4=e||{}}let t;if(w4)try{t=new Worker(w4,{name:"esri-worker-"+_qe++})}catch{sF().warn(vQ,S4),t=new PI}else sF().warn(vQ,S4),t=new PI;return _Q(t)}async function _Q(t){return new Promise(e=>{function i(n){const r=EE(n);r&&r.type===mqe&&(t.removeEventListener("message",i),t.removeEventListener("error",s),e(t))}function s(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",s),sF().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new PI).addEventListener("message",i),t.addEventListener("error",s)}t.addEventListener("message",i),t.addEventListener("error",s)})}function vqe(){let t;if(Gs.default!=null){const n={...Gs};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Gs));t.assetsPath=ml(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?ml(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=kc(),t.has={"esri-csp-restrictions":ht("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ht("esri-2d-update-debug"),"esri-2d-log-updating":ht("esri-2d-log-updating"),"featurelayer-pbf":ht("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ht("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ht("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ht("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ht("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ht("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":ht("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":ht("featurelayer-snapshot-enabled"),"esri-atomics":ht("esri-atomics"),"esri-shared-array-buffer":ht("esri-shared-array-buffer"),"esri-tiles-debug":ht("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ht("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ht("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=ml(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=ml(t.workers.workerPath):t.workers.workerPath=ml(EC("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Gs.workers.loaderConfig,i=fqe({baseUrl:e==null?void 0:e.baseUrl,locale:kc(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:Aae,fullVersion:Vq,revision:Dae}})}let _qe=0;const{ABORT:bQ,INVOKE:bqe,OPEN:xqe,OPENED:wqe,RESPONSE:Hw}=Vo;let Sqe=class mpe{static async create(e){const i=await yqe();return new mpe(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",s=>{s.preventDefault(),zt.getLogger("esri.core.workers.WorkerOwner").error(s)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:s}=i,n=ppe();return new Promise((r,o)=>{const l={resolve:r,reject:o,abortHandle:joe(s,()=>{this._outJobs.delete(n),this._post({type:bQ,jobId:n})})};this._outJobs.set(n,l),this._post({type:xqe,jobId:n,modulePath:e})})}_onMessage(e){const i=EE(e);if(i)switch(i.type){case wqe:this._onOpenedMessage(i);break;case Hw:this._onResponseMessage(i);break;case bQ:this._onAbortMessage(i);break;case bqe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,n=i.get(s);n&&(n.controller&&n.controller.abort(),i.delete(s))}_onInvokeMessage(e){const{methodName:i,jobId:s,data:n,abortable:r}=e,o=r?new AbortController:null,l=this._inJobs,u=dqe[i];let f;try{if(typeof u!="function")throw new TypeError(`${i} is not a function`);f=u.call(null,n,{signal:o?o.signal:null})}catch(y){return void this._post({type:Hw,jobId:s,error:SE(y)})}Iv(f)?(l.set(s,{controller:o,promise:f}),f.then(y=>{l.has(s)&&(l.delete(s),this._post({type:Hw,jobId:s},y))},y=>{l.has(s)&&(l.delete(s),y||(y={message:"Error encountered at method"+i}),cd(y)||this._post({type:Hw,jobId:s,error:SE(y||{message:`Error encountered at method ${i}`})}))})):this._post({type:Hw,jobId:s},f)}_onOpenedMessage(e){const{jobId:i,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Co(n.abortHandle),n.resolve(s))}_onResponseMessage(e){const{jobId:i,error:s,data:n}=e,r=this._outJobs.get(i);r&&(this._outJobs.delete(i),Co(r.abortHandle),s?r.reject(rt.fromJSON(JSON.parse(s))):r.resolve(n))}_post(e,i,s){return xG(this.worker,e,i,s)}};const xQ=ht("host-browser")?Math.min(navigator.hardwareConcurrency-1,ht("workers-pool-size")??8):0;let Dy=ht("esri-mobile")?Math.min(xQ,3):xQ;Dy||(Dy=ht("safari")&&ht("mac")?7:2);let wQ=0;const TI=[];function R0t(){gpe()}async function E4(t,e){const i=new hqe,{registryTarget:s,...n}=e;return await i.open(t,n),s&&tqe(s,i),i}async function Eqe(t,e={}){if(typeof t!="string")throw new rt("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ht("host-webworker")&&!ht("esri-workers")&&(i="local"),i==="local"){let s=await Mg.loadWorker(t);s||(s=await import(t)),Ql(e.signal);const n=e.client||s;return E4([Mg.connect(s,e.schedule)],{...e,client:n})}if(await gpe(),Ql(e.signal),i==="dedicated"){const s=wQ++%Dy;return E4([await TI[s].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const s=Math.min(e.maxNumWorkers,Dy);if(s<Dy){const n=new Array(s);for(let r=0;r<s;++r){const o=wQ++%Dy;n[r]=TI[o].open(t,e)}return E4(n,e)}}return E4(TI.map(s=>s.open(t,e)),e)}let C4=null;async function gpe(){if(C4)return C4;new AbortController;const t=[];for(let e=0;e<Dy;e++){const i=Sqe.create(e).then(s=>(TI[e]=s,s));t.push(i)}return C4=Promise.all(t),C4}function SQ(t,e,i){if(t.hasM==null||t.hasZ)for(const s of e)for(const n of s)n.length>2&&(n[2]*=i)}function Cqe(t,e,i){if(!t&&!e||!i)return;const s=j9(i);EQ(t,i,s),EQ(e,i,s)}function EQ(t,e,i){if(t)for(const s of t)Pqe(s.geometry,e,i)}function Pqe(t,e,i){if(!(t!=null&&t.spatialReference)||Jo(t.spatialReference,e))return;const s=j9(t.spatialReference)/i;if(s!==1){if("x"in t)t.z!=null&&(t.z*=s);else if("rings"in t)SQ(t,t.rings,s);else if("paths"in t)SQ(t,t.paths,s);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=s)}}function CQ(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const s=tde(i.geometryType,e,t.outSpatialReference);if(s!=null)for(const n of i.features)s(n.geometry)}const Tqe=new ps({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var nF;const Iqe=new ps({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let La=nF=class extends wt{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?Iqe.fromJSON(i.fieldValueType):null}clone(){var t;return new nF({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};I([N({type:String,json:{write:!0}})],La.prototype,"alias",void 0),I([N({type:[String,Number],json:{write:{allowNull:!0}}})],La.prototype,"defaultValue",void 0),I([N()],La.prototype,"description",void 0),I([At("description")],La.prototype,"readDescription",null),I([N({types:npe,json:{read:{reader:yA},write:!0}})],La.prototype,"domain",void 0),I([N({type:Boolean,json:{write:!0}})],La.prototype,"editable",void 0),I([N({type:wn,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],La.prototype,"length",void 0),I([N({type:String,json:{write:!0}})],La.prototype,"name",void 0),I([N({type:Boolean,json:{write:!0}})],La.prototype,"nullable",void 0),I([ni(Tqe)],La.prototype,"type",void 0),I([N()],La.prototype,"valueType",void 0),I([At("valueType",["description"])],La.prototype,"readValueType",null),I([N({type:Boolean,json:{read:!1}})],La.prototype,"visible",void 0),La=nF=I([ke("esri.layers.support.Field")],La);const wG=La;var rF;const oF=new ps({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Oo=rF=class extends wt{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){var n;const i=qi.fromJSON(e.spatialReference),s=[];for(let r=0;r<t.length;r++){const o=t[r],l=tm.fromJSON(o),u=(n=o.geometry)==null?void 0:n.spatialReference;l.geometry==null||u||(l.geometry.spatialReference=i);const f=o.aggregateGeometries,y=l.aggregateGeometries;if(f&&y!=null)for(const _ in y){const x=y[_],S=f[_],P=S==null?void 0:S.spatialReference;x==null||P||(x.spatialReference=i)}s.push(l)}return s}writeGeometryType(t,e,i,s){if(t)return void oF.write(t,e,i,s);const{features:n}=this;if(n){for(const r of n)if((r==null?void 0:r.geometry)!=null)return void oF.write(r.geometry.type,e,i,s)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,s=MC(t);return s&&!i&&e.spatialReference&&(s.spatialReference=qi.fromJSON(e.spatialReference)),s}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&s.geometry!=null&&s.geometry.spatialReference)return void(e.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new rF(this.cloneProperties())}cloneProperties(){return Ue({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const s=e.features[i];if(s.geometry){const n=t==null?void 0:t[i];s.geometry=(n==null?void 0:n.toJSON())||s.geometry}}return e}quantize(t){const{scale:[e,i],translate:[s,n]}=t,r=f=>Math.round((f-s)/e),o=f=>Math.round((n-f)/i),l=this.features,u=this._getQuantizationFunction(this.geometryType,r,o);for(let f=0,y=l.length;f<y;f++)u!=null&&u(l[f].geometry)||(l.splice(f,1),f--,y--);return this.transform=t,this}unquantize(){var x,S;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[s,n],scale:[r,o]}=i,l=P=>P*r+s,u=P=>n-P*o;let f=null,y=null;if(this.hasZ&&((x=i==null?void 0:i.scale)==null?void 0:x[2])!=null){const{translate:[,,P],scale:[,,A]}=i;f=k=>k*A+P}if(this.hasM&&((S=i==null?void 0:i.scale)==null?void 0:S[3])!=null){const{translate:[,,,P],scale:[,,,A]}=i;y=k=>k==null?k:k*A+P}const _=this._getHydrationFunction(t,l,u,f,y);for(const{geometry:P}of e)P!=null&&_&&_(P);return this.transform=null,this}_quantizePoints(t,e,i){let s,n;const r=[];for(let o=0,l=t.length;o<l;o++){const u=t[o];if(o>0){const f=e(u[0]),y=i(u[1]);f===s&&y===n||(r.push([f-s,y-n]),s=f,n=y)}else s=e(u[0]),n=i(u[1]),r.push([s,n])}return r.length>0?r:null}_getQuantizationFunction(t,e,i){return t==="point"?s=>(s.x=e(s.x),s.y=i(s.y),s):t==="polyline"||t==="polygon"?s=>{const n=Wb(s)?s.rings:s.paths,r=[];for(let o=0,l=n.length;o<l;o++){const u=n[o],f=this._quantizePoints(u,e,i);f&&r.push(f)}return r.length>0?(Wb(s)?s.rings=r:s.paths=r,s):null}:t==="multipoint"?s=>{const n=this._quantizePoints(s.points,e,i);return n&&n.length>0?(s.points=n,s):null}:t==="extent"?s=>s:null}_getHydrationFunction(t,e,i,s,n){return t==="point"?r=>{r.x=e(r.x),r.y=i(r.y),s&&(r.z=s(r.z))}:t==="polyline"||t==="polygon"?r=>{const o=Wb(r)?r.rings:r.paths;let l,u;for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];x>0?(l+=P[0],u+=P[1]):(l=P[0],u=P[1]),P[0]=e(l),P[1]=i(u)}}if(s&&n)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=s(P[2]),P[3]=n(P[3])}}else if(s)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=s(P[2])}}else if(n)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=n(P[2])}}}:t==="extent"?r=>{r.xmin=e(r.xmin),r.ymin=i(r.ymin),r.xmax=e(r.xmax),r.ymax=i(r.ymax),s&&r.zmax!=null&&r.zmin!=null&&(r.zmax=s(r.zmax),r.zmin=s(r.zmin)),n&&r.mmax!=null&&r.mmin!=null&&(r.mmax=n(r.mmax),r.mmin=n(r.mmin))}:t==="multipoint"?r=>{const o=r.points;let l,u;for(let f=0,y=o.length;f<y;f++){const _=o[f];f>0?(l+=_[0],u+=_[1]):(l=_[0],u=_[1]),_[0]=e(l),_[1]=i(u)}if(s&&n)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=s(_[2]),_[3]=n(_[3])}else if(s)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=s(_[2])}else if(n)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=n(_[2])}}:null}};I([N({type:String,json:{write:!0}})],Oo.prototype,"displayFieldName",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Oo.prototype,"exceededTransferLimit",void 0),I([N({type:[tm],json:{write:!0}})],Oo.prototype,"features",void 0),I([At("features")],Oo.prototype,"readFeatures",null),I([N({type:[wG],json:{write:!0}})],Oo.prototype,"fields",void 0),I([N({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:oF.read}}})],Oo.prototype,"geometryType",void 0),I([Ft("geometryType")],Oo.prototype,"writeGeometryType",null),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Oo.prototype,"hasM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Oo.prototype,"hasZ",void 0),I([N({types:AC,json:{write:!0}})],Oo.prototype,"queryGeometry",void 0),I([At("queryGeometry")],Oo.prototype,"readQueryGeometry",null),I([N({type:qi,json:{write:!0}})],Oo.prototype,"spatialReference",void 0),I([Ft("spatialReference")],Oo.prototype,"writeSpatialReference",null),I([N({json:{write:!0}})],Oo.prototype,"transform",void 0),Oo=rF=I([ke("esri.rest.support.FeatureSet")],Oo),Oo.prototype.toJSON.isDefaultToJSON=!0;const ype=Oo;let Mqe=0,Ip=class extends SC.LoadableMixin(Gq(ci)){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const s=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);CQ(e,this.layer.spatialReference,s);const n=ype.fromJSON(s);if(!this._requiresClientGraphicMapping())return n;const r=this.layer.objectIdField;for(const o of n.features){const l=o.attributes[r],u=this._idToClientGraphic.get(l);u&&(o.geometry=u.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new rt("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const s=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return CQ(e,this.layer.spatialReference,s),s}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(s=>({count:s.count,extent:ur.fromJSON(s.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new rt("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let s=null;const n=[],r=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=y=>"objectId"in y&&y.objectId!=null?y.objectId:"attributes"in y&&y.attributes[i]!=null?y.attributes[i]:null;if(e.addFeatures&&(s=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const y of e.deleteFeatures){const _=o(y);_!=null&&n.push(_)}const l=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const y of e.updateFeatures)if(r.push(this._serializeFeature(y)),l){const _=o(y);_!=null&&l.set(_,y)}}Cqe(s?s.features:null,r,this.layer.spatialReference);const{fullExtent:u,featureEditResults:f}=await this._connection.invoke("applyEdits",{adds:s?s.features:[],updates:r,deletes:n});return this.fullExtent=u,s&&s.finish(f.uidToObjectId),this._updateClientGraphicIds(l,f),this._createEditsResult(f)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const s=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||s.push(n.load({signal:i}));s.length&&await Promise.all(s)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const s of i.updateResults){if(!s.success)continue;const n=e.get(s.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const s of i.deleteResults)s.success&&this._idToClientGraphic.delete(s.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new rt("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,s=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const l=e[o],u=this._serializeFeature(l);n||l.geometry==null||(n=l.geometry.type),s[o]=u,i.set(`${u.uid}`,l)}const r=this;return{features:s,inferredGeometryType:n,finish(o){const l=r.sourceJSON.objectIdField;for(const u in o){const f=o[u],y=i.get(u);y&&(y.attributes||(y.attributes={}),f===-1?delete y.attributes[l]:y.attributes[l]=f,r._addIdToClientGraphic(y))}}}}_addIdToClientGraphic(e){var n;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,s=(n=e.attributes)==null?void 0:n[i];s!=null&&this._idToClientGraphic.set(s,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,s=this._geometryForSerialization(e),n=(Mqe++).toString();return s?{uid:n,geometry:s.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Za.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await Eqe("MemorySourceWorker",{strategy:ht("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:s,objectIdField:n,hasM:r,hasZ:o,timeInfo:l,dateFieldsTimeZone:u}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const y=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",P=>{zt.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const _={features:y.features,fields:i==null?void 0:i.map(P=>P.toJSON()),geometryType:MZ.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&r,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:f?null:s&&s.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:u},x=await this._connection.invoke("load",_,{signal:e});for(const P of x.warnings)zt.getLogger(this.layer).warn("#load()",`${P.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:P});x.featureErrors.length&&zt.getLogger(this.layer).warn("#load()",`Encountered ${x.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:x.featureErrors});const S=x.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(y.inferredGeometryType)&&(S.geometryType=MZ.toJSON(y.inferredGeometryType)),this.sourceJSON=S,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),y.finish(x.assignedObjectIds)}};I([dV({Type:tm,ensureType:Ko(tm)})],Ip.prototype,"itemType",void 0),I([N()],Ip.prototype,"type",void 0),I([N({constructOnly:!0})],Ip.prototype,"layer",void 0),I([N({readOnly:!0})],Ip.prototype,"_workerGeometryType",null),I([N()],Ip.prototype,"sourceJSON",void 0),Ip=I([ke("esri.layers.graphics.sources.MemorySource")],Ip);function Aqe(t){return"portalItem"in t}const Dqe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Aqe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return I([N({type:String})],e.prototype,"apiKey",null),e=I([ke("esri.layers.mixins.APIKeyMixin")],e),e},vpe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},_pe=Object.values(vpe),bpe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${_pe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),kqe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${_pe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Nqe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function F0t(t){return bpe.test(t)}function WC(t){if(t==null)return null;const e=vl(t),i=(e==null?void 0:e.path.match(bpe))||(e==null?void 0:e.path.match(kqe));if(!i)return null;const[,s,n,r,o]=i,l=n.indexOf("/");return{title:SG(l!==-1?n.slice(l+1):n),serverType:vpe[r.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:s}}}function $qe(t){const e=vl(t).path.match(Nqe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function SG(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Oqe(t,e){const i=[];if(t){const s=WC(t);s!=null&&s.title&&i.push(s.title)}if(e){const s=SG(e);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function xpe(t){let e=Gu(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function Rqe(t,e){return t&&Tae(Iae(t,e))}function Lqe(t){let{url:e}=t;if(!e)return{url:e};e=Iae(e,t.logger);const i=vl(e),s=WC(i.path);let n;if(s!=null)s.sublayer!=null&&t.layer.layerId==null&&(n=s.sublayer),e=s.url.path;else if(t.nonStandardUrlAllowed){const r=$qe(i.path);r!=null&&(e=r.serviceUrl,n=r.sublayerId)}return{url:Tae(e),layerId:n}}function Fqe(t,e,i,s,n){lv(e,s,"url",n),s.url&&t.layerId!=null&&(s.url=b2(s.url,i,t.layerId.toString()))}function z0t(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),s=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),r=e.includes("/wmsserver");return i&&(s||n||r)}function q0t(t){var s;if(!t)return!1;const e=new Yl(ml(t)),i=(s=e.authority)==null?void 0:s.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const zqe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=WC(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Rqe(i,zt.getLogger(this)))}};return I([N()],e.prototype,"title",null),I([N({type:String})],e.prototype,"url",null),e=I([ke("esri.layers.mixins.ArcGISService")],e),e},qqe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return I([N({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=I([ke("esri.layers.mixins.CustomParametersMixin")],e),e},Vqe=DAe(),wpe=new Map,Spe=new Map;async function V0t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const s=new URL(t).host;let n=wpe.get(s);if(!n){const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Qs(r,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function G0t(t,e,i=!1){var r,o,l;if(!t||!e)return!0;const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(r=Spe.get(s))==null?void 0:r.entries();if(n){for(const[u,f]of n)if(f.name===e){const y=!((o=f.stack)!=null&&o.hasForwardEdits());if(!y&&i){const[{deleteForwardEdits:_},{default:x}]=await Promise.all([nt(()=>import("./deleteForwardEdits-B5ZMknkf.js"),__vite__mapDeps([300,14]),import.meta.url),nt(()=>import("./DeleteForwardEditsParameters-BNcwqdqx.js"),[],import.meta.url)]),S=await _(s,u,new x({sessionId:Vqe,moment:f.moment}));return S.success&&((l=f.stack)==null||l.clearForwardEdits()),S.success}return y}}return!0}function Gqe(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=Spe.get(i))==null?void 0:n.entries();if(s){for(const[r,o]of s)if(o.name===e)return o.lockType==="edit"}return!1}const EG=new Sa.EventEmitter;function jqe(t){return EG.on("apply-edits",new WeakRef(t))}function Bqe(t){return EG.on("update-moment",new WeakRef(t))}function j0t(t,e,i=null,s=!1){const n=Tc();return s=e==null||s,EG.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:s,result:n.promise}),n}const Epe=Symbol();function B0t(t){return t!=null&&typeof t=="object"&&Epe in t}function Uw(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function G8(t,e,i){const s=new URL(t).host,n=wpe.get(s),r=o=>!o||o===n;return r(e)&&r(i)||e===i}const Hqe=t=>{var e;let i=class extends t{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=n=>{const{serviceUrl:r,layerId:o,gdbVersion:l,mayReceiveServiceEdits:u,result:f}=n,y=r===this.url,_=o!=null&&this.layerId!=null&&o===this.layerId,x=Uw(this),S=Uw(this)&&G8(r,l,this.gdbVersion);if(!y||x&&!S||!_&&!u)return;const P=f.then(A=>{var F;if(this.lastEditsEventDate=new Date,_&&(A.addedFeatures.length||A.updatedFeatures.length||A.deletedFeatures.length||A.addedAttachments.length||A.updatedAttachments.length||A.deletedAttachments.length))return this.emit("edits",Ue(A)),A;const k=(F=A.editedFeatures)==null?void 0:F.find(({layerId:G})=>G===this.layerId);if(k){const{adds:G,updates:V,deletes:B}=k.editedFeatures,W={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:G?G.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],deletedFeatures:B?B.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],updatedFeatures:V?V.map(({current:{attributes:J}})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],editedFeatures:Ue(A.editedFeatures),exceededTransferLimit:!1,historicMoment:Ue(A.historicMoment)};return this.emit("edits",W),W}const $={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:Ue(A.editedFeatures),exceededTransferLimit:!1,historicMoment:Ue(A.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(r,l,$.historicMoment)&&this.emit("edits",$),$}).then(A=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(r,l,A.historicMoment)&&(this.historicMoment=A.historicMoment),A));this.emit("apply-edits",{result:P})},this._updateMomentHandler=n=>{const{serviceUrl:r,gdbVersion:o,moment:l}=n,u=r===this.url,f=Uw(this),y=Uw(this)&&G8(r,o,this.gdbVersion),_=Uw(this)&&!G8(r,this.gdbVersion,null);u&&f&&y&&_&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(jqe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(Bqe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,n,r){return"historicMoment"in this&&this.historicMoment!==r&&Gqe(s,n)}};return e=Epe,I([N()],i.prototype,"lastEditsEventDate",void 0),i=I([ke("esri.layers.mixins.EditBusLayer")],i),i};var aF;let mb=aF=class extends wt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new aF({mapLayerId:t,gdbVersion:e})}};I([ni({mapLayer:"map-layer"})],mb.prototype,"type",void 0),I([N({type:wn,json:{write:!0}})],mb.prototype,"mapLayerId",void 0),I([N({type:String,json:{write:!0}})],mb.prototype,"gdbVersion",void 0),mb=aF=I([ke("esri.layers.support.source.MapLayerSource")],mb);var lF;let dp=lF=class extends wt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:s,geometryType:n}=this,r={workspaceId:t,query:e,oidFields:i,spatialReference:(s==null?void 0:s.clone())??void 0,geometryType:n};return new lF(r)}};I([ni({queryTable:"query-table"})],dp.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],dp.prototype,"workspaceId",void 0),I([N({type:String,json:{write:!0}})],dp.prototype,"query",void 0),I([N({type:String,json:{write:!0}})],dp.prototype,"oidFields",void 0),I([N({type:qi,json:{write:!0}})],dp.prototype,"spatialReference",void 0),I([ni(ZDe)],dp.prototype,"geometryType",void 0),dp=lF=I([ke("esri.layers.support.source.QueryTableDataSource")],dp);var cF;let gb=cF=class extends wt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new cF({workspaceId:t,dataSourceName:e})}};I([ni({raster:"raster"})],gb.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],gb.prototype,"dataSourceName",void 0),I([N({type:String,json:{write:!0}})],gb.prototype,"workspaceId",void 0),gb=cF=I([ke("esri.layers.support.source.RasterDataSource")],gb);var uF;let ly=uF=class extends wt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new uF({workspaceId:t,gdbVersion:e,dataSourceName:i})}};I([ni({table:"table"})],ly.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],ly.prototype,"workspaceId",void 0),I([N({type:String,json:{write:!0}})],ly.prototype,"gdbVersion",void 0),I([N({type:String,json:{write:!0}})],ly.prototype,"dataSourceName",void 0),ly=uF=I([ke("esri.layers.support.source.TableDataSource")],ly);var hF,dF;const Uqe=wa()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let vc=hF=class extends wt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return PQ()(t,e,i)}castLeftTableSource(t){return Yu(fF(),t)}readRightTableSource(t,e,i){return PQ()(t,e,i)}castRightTableSource(t){return Yu(fF(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:s,joinType:n}=this,r={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(s==null?void 0:s.clone())??void 0,joinType:n};return new hF(r)}};I([ni({joinTable:"join-table"})],vc.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],vc.prototype,"leftTableKey",void 0),I([N({type:String,json:{write:!0}})],vc.prototype,"rightTableKey",void 0),I([N({json:{write:!0}})],vc.prototype,"leftTableSource",void 0),I([At("leftTableSource")],vc.prototype,"readLeftTableSource",null),I([Sn("leftTableSource")],vc.prototype,"castLeftTableSource",null),I([N({json:{write:!0}})],vc.prototype,"rightTableSource",void 0),I([At("rightTableSource")],vc.prototype,"readRightTableSource",null),I([Sn("rightTableSource")],vc.prototype,"castRightTableSource",null),I([ni(Uqe)],vc.prototype,"joinType",void 0),vc=hF=I([ke("esri.layers.support.source.JoinTableDataSource")],vc);let j8=null;function PQ(){return j8||(j8=nx({types:fF()})),j8}let B8=null;function fF(){return B8||(B8={key:"type",base:null,typeMap:{"data-layer":$h,"map-layer":mb}}),B8}const Yqe={key:"type",base:null,typeMap:{"join-table":vc,"query-table":dp,raster:gb,table:ly}};let $h=dF=class extends wt{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new dF({fields:t,dataSource:e})}};I([ni({dataLayer:"data-layer"})],$h.prototype,"type",void 0),I([N({type:[wG],json:{write:!0}})],$h.prototype,"fields",void 0),I([N({types:Yqe,json:{write:!0}})],$h.prototype,"dataSource",void 0),$h=dF=I([ke("esri.layers.support.source.DataLayerSource")],$h),$h.from=Ko($h);let cy=class extends Hs(wt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};I([N({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],cy.prototype,"onFields",void 0),I([N({type:String,json:{write:!0}})],cy.prototype,"operator",void 0),I([N({type:String,json:{write:!0}})],cy.prototype,"searchTerm",void 0),I([N({type:String,json:{write:!0}})],cy.prototype,"searchType",void 0),cy=I([ke("esri.rest.support.FullTextSearch")],cy);const Xqe=cy;var pF;const TQ=new ps({upperLeft:"upper-left",lowerLeft:"lower-left"});let uy=pF=class extends wt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new pF(Ue({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};I([N({type:ur,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],uy.prototype,"extent",void 0),I([N({type:["view","edit"],json:{write:!0}})],uy.prototype,"mode",void 0),I([N({type:String,json:{read:TQ.read,write:TQ.write}})],uy.prototype,"originPosition",void 0),I([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],uy.prototype,"tolerance",void 0),uy=pF=I([ke("esri.rest.support.QuantizationParameters")],uy);const Wqe=uy,Zqe=new ps({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var mF;const IQ=new ps({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Th=mF=class extends wt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Ue(t))}clone(){return new mF({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Ue(this.statisticParameters)})}};I([N({type:Number,json:{write:!0}})],Th.prototype,"maxPointCount",void 0),I([N({type:Number,json:{write:!0}})],Th.prototype,"maxRecordCount",void 0),I([N({type:Number,json:{write:!0}})],Th.prototype,"maxVertexCount",void 0),I([N({type:String,json:{write:!0}})],Th.prototype,"onStatisticField",void 0),I([N({type:String,json:{write:!0}})],Th.prototype,"outStatisticFieldName",void 0),I([N({type:String,json:{read:{source:"statisticType",reader:IQ.read},write:{target:"statisticType",writer:IQ.write}}})],Th.prototype,"statisticType",void 0),I([N({type:Object})],Th.prototype,"statisticParameters",void 0),I([Ft("statisticParameters")],Th.prototype,"writeStatisticParameters",null),Th=mF=I([ke("esri.rest.support.StatisticDefinition")],Th);const Kqe=Th;var II;const Jqe=new ps({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pi=II=class extends wt{static from(t){return xC(II,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const s in t){const n=t[s];Array.isArray(n)?i[s]=n.map(r=>r instanceof Date?r.getTime():r):n instanceof Date?i[s]=n.getTime():i[s]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new II(Ue({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};pi.MAX_MAX_RECORD_COUNT_FACTOR=5,I([N({json:{write:!0}})],pi.prototype,"aggregateIds",void 0),I([N({type:Boolean,json:{write:!0}})],pi.prototype,"cacheHint",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"compactGeometryEnabled",void 0),I([N({json:{write:!0}})],pi.prototype,"datumTransformation",void 0),I([Sn("datumTransformation")],pi.prototype,"castDatumTransformation",null),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"defaultSpatialReferenceEnabled",void 0),I([N({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],pi.prototype,"distance",void 0),I([N({type:$h,json:{write:!0}})],pi.prototype,"dynamicDataSource",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"formatOf3DObjects",void 0),I([N({type:[Xqe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],pi.prototype,"fullText",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"gdbVersion",void 0),I([N({types:AC,json:{read:MC,write:!0}})],pi.prototype,"geometry",void 0),I([N({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),I([N({type:[String],json:{write:!0}})],pi.prototype,"groupByFieldsForStatistics",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"having",void 0),I([N({type:Date})],pi.prototype,"historicMoment",void 0),I([Ft("historicMoment")],pi.prototype,"writeHistoricMoment",null),I([N({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),I([N({type:Number,cast:t=>t<1?1:t>pi.MAX_MAX_RECORD_COUNT_FACTOR?pi.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],pi.prototype,"maxRecordCountFactor",void 0),I([N({type:["xyFootprint"],json:{write:!0}})],pi.prototype,"multipatchOption",void 0),I([N({type:Number,json:{read:{source:"resultRecordCount"}}})],pi.prototype,"num",void 0),I([N({json:{write:!0}})],pi.prototype,"objectIds",void 0),I([N({type:[String],json:{write:!0}})],pi.prototype,"orderByFields",void 0),I([N({type:[String],json:{write:!0}})],pi.prototype,"outFields",void 0),I([N({type:qi,json:{name:"outSR",write:!0}})],pi.prototype,"outSpatialReference",void 0),I([N({type:[Kqe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],pi.prototype,"outStatistics",void 0),I([N({json:{write:!0}})],pi.prototype,"parameterValues",void 0),I([Ft("parameterValues")],pi.prototype,"writeParameterValues",null),I([N({type:Yi,json:{write:!0}})],pi.prototype,"pixelSize",void 0),I([N({type:Wqe,json:{write:!0}})],pi.prototype,"quantizationParameters",void 0),I([N({type:[Object],json:{write:!0}})],pi.prototype,"rangeValues",void 0),I([N({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],pi.prototype,"relationParameter",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"resultType",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnCentroid",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnDistinctValues",void 0),I([N({type:Boolean,json:{default:!0,write:!0}})],pi.prototype,"returnExceededLimitFeatures",void 0),I([N({type:Boolean,json:{write:!0}})],pi.prototype,"returnGeometry",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnQueryGeometry",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnZ",void 0),I([N({type:qi,json:{write:!0}})],pi.prototype,"sourceSpatialReference",void 0),I([ni(Zqe,{ignoreUnknown:!1,name:"spatialRel"})],pi.prototype,"spatialRelationship",void 0),I([N({type:Number,json:{read:{source:"resultOffset"}}})],pi.prototype,"start",void 0),I([Ft("start"),Ft("num")],pi.prototype,"writeStart",null),I([N({type:String,json:{write:!0}})],pi.prototype,"sqlFormat",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"text",void 0),I([N({type:Pg,json:{write:!0}})],pi.prototype,"timeExtent",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"timeReferenceUnknownClient",void 0),I([ni(Jqe,{ignoreUnknown:!1}),N({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],pi.prototype,"units",void 0),I([N({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],pi.prototype,"where",void 0),I([Ft("where")],pi.prototype,"writeWhere",null),pi=II=I([ke("esri.rest.support.Query")],pi);const Hg=pi;var gF;const H8=new ps({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),U8=new ps({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Rd=gF=class extends wt{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:s,timeExtent:n,objectIds:r,units:o,distance:l}=this;return new Hg({geometry:Ue(i),objectIds:Ue(r),spatialRelationship:s,timeExtent:Ue(n),where:e,units:o,distance:l,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:s,objectIds:n,units:r,distance:o}=this;return new gF({geometry:Ue(e),objectIds:Ue(n),spatialRelationship:i,timeExtent:Ue(s),where:t,units:r,distance:o})}};I([N({type:String,json:{write:!0}})],Rd.prototype,"where",void 0),I([N({types:AC,json:{write:!0}})],Rd.prototype,"geometry",void 0),I([N({type:H8.apiValues,json:{name:"spatialRel",read:{reader:H8.read},write:{allowNull:!1,writer:H8.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Rd.prototype,"spatialRelationship",void 0),I([N({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Rd.prototype,"distance",void 0),I([N({type:[Number],json:{write:!0}})],Rd.prototype,"objectIds",void 0),I([N({type:U8.apiValues,json:{read:U8.read,write:{writer:U8.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Rd.prototype,"units",void 0),I([N({type:Pg,json:{write:!0}})],Rd.prototype,"timeExtent",void 0),Rd=gF=I([ke("esri.layers.support.FeatureFilter")],Rd);const Qqe=Rd;var yF;const MQ={read:{reader:fE},write:{writer:pE,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},AQ={read:{reader:fE},write:{writer:pE,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},DQ={name:"showExcludedLabels",default:!0};let hy=yF=class extends wt{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var s,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return(s=e.messages)==null||s.push(new rt("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new rt("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new yF({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};I([N({type:Qqe,json:{write:{allowNull:!0,writer(t,e,i,s){const n=t==null?void 0:t.write({},s);n&&Object.keys(n).length!==0?Ja(i,n,e):Ja(i,null,e)}}}})],hy.prototype,"filter",void 0),I([N({json:{read:fE,write:{writer:pE,allowNull:!0},origins:{"web-map":MQ,"portal-item":MQ}}})],hy.prototype,"includedEffect",void 0),I([N({json:{read:fE,write:{writer:pE,allowNull:!0},origins:{"web-map":AQ,"portal-item":AQ}}})],hy.prototype,"excludedEffect",void 0),I([N({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":DQ,"portal-item":DQ}}})],hy.prototype,"excludedLabelsVisible",void 0),hy=yF=I([ke("esri.layers.support.FeatureEffect")],hy);const eVe=hy,kQ={write:{allowNull:!0}},tVe={type:eVe,json:{origins:{"web-map":kQ,"portal-item":kQ}}},iVe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return I([N(tVe)],e.prototype,"featureEffect",void 0),e=I([ke("esri.layers.mixins.FeatureEffectLayer")],e),e};var eS;const h6=wa()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Cpe=h6.jsonValues.slice();PPe(Cpe,"orthometric");const VS=wa()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ih=eS=class extends wt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return h6.write(t,e,i)}readHeightModel(t,e,i){return h6.read(t)||(i!=null&&i.messages&&i.messages.push(sVe(t,{context:i})),null)}readHeightUnit(t,e,i){return VS.read(t)||(i!=null&&i.messages&&i.messages.push(NQ(t,{context:i})),null)}readHeightUnitService(t,e,i){return Kae(t)||VS.read(t)||(i!=null&&i.messages&&i.messages.push(NQ(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new eS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Jae(e);return new eS({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new eS;return e.read(t,{origin:"web-scene"}),e}};function NQ(t,e){return new ed("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function sVe(t,e){return new ed("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}I([N({type:h6.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Cpe,default:"ellipsoidal"}}}})],Ih.prototype,"heightModel",void 0),I([Ft("web-scene","heightModel")],Ih.prototype,"writeHeightModel",null),I([At(["web-scene","service"],"heightModel")],Ih.prototype,"readHeightModel",null),I([N({type:VS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:VS.jsonValues,write:VS.write}}}})],Ih.prototype,"heightUnit",void 0),I([At("web-scene","heightUnit")],Ih.prototype,"readHeightUnit",null),I([At("service","heightUnit")],Ih.prototype,"readHeightUnitService",null),I([N({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ih.prototype,"vertCRS",void 0),I([At("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ih.prototype,"readVertCRS",null),Ih=eS=I([ke("esri.geometry.HeightModelInfo")],Ih);const nVe=Ih;let fp=class extends Hs(wt){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};I([N()],fp.prototype,"creatorField",void 0),I([N()],fp.prototype,"creationDateField",void 0),I([N()],fp.prototype,"editorField",void 0),I([N()],fp.prototype,"editDateField",void 0),I([N()],fp.prototype,"realm",void 0),I([N(W9("dateFieldsTimeReference",!0))],fp.prototype,"timeZone",void 0),fp=I([ke("esri.layers.support.EditFieldsInfo")],fp);const rVe=fp;let jd=class extends Hs(wt){constructor(e){super(e)}};I([N({constructOnly:!0,json:{write:!0}})],jd.prototype,"name",void 0),I([N({constructOnly:!0,json:{write:!0}})],jd.prototype,"fields",void 0),I([N({constructOnly:!0,json:{write:!0}})],jd.prototype,"isAscending",void 0),I([N({constructOnly:!0,json:{write:!0}})],jd.prototype,"indexType",void 0),I([N({constructOnly:!0,json:{write:!0}})],jd.prototype,"isUnique",void 0),I([N({constructOnly:!0,json:{write:!0}})],jd.prototype,"description",void 0),jd=I([ke("esri.layers.support.FeatureIndex")],jd);async function oVe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=Ppe(t));const s=aVe(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=s;let r=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(r==null?r=o:r.features=r.features.concat(o.features),r.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=s}return r}function aVe(t){return Ppe(t)*lVe(t)}function lVe(t){return t.capabilities.query.maxRecordCount||2e3}function Ppe(t){return t.capabilities.query.supportsMaxRecordCountFactor?Hg.MAX_MAX_RECORD_COUNT_FACTOR:1}var vF;let Ro=vF=class extends wt{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new vF(Ue({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};I([N({type:[String],json:{write:!0}})],Ro.prototype,"attachmentTypes",void 0),I([N({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ro.prototype,"attachmentsWhere",void 0),I([N({type:Boolean,json:{write:!0}})],Ro.prototype,"cacheHint",void 0),I([N({type:[String],json:{write:!0}})],Ro.prototype,"keywords",void 0),I([N({type:[String],json:{write:!0}})],Ro.prototype,"globalIds",void 0),I([N({json:{write:!0}})],Ro.prototype,"name",void 0),I([N({type:Number,json:{read:{source:"resultRecordCount"}}})],Ro.prototype,"num",void 0),I([N({type:[Number],json:{write:!0}})],Ro.prototype,"objectIds",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],Ro.prototype,"returnMetadata",void 0),I([N({type:[Number],json:{write:!0}})],Ro.prototype,"size",void 0),I([N({type:Number,json:{read:{source:"resultOffset"}}})],Ro.prototype,"start",void 0),I([Ft("start"),Ft("num")],Ro.prototype,"writeStart",null),I([N({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ro.prototype,"where",void 0),Ro=vF=I([ke("esri.rest.support.AttachmentQuery")],Ro),Ro.from=Ko(Ro);const cVe=Ro;var _F;let tr=_F=class extends wt{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new _F(Ue({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};I([N({type:Boolean,json:{write:!0}})],tr.prototype,"cacheHint",void 0),I([N({type:$h,json:{write:!0}})],tr.prototype,"dynamicDataSource",void 0),I([N({type:String,json:{write:!0}})],tr.prototype,"gdbVersion",void 0),I([N({type:Number,json:{write:!0}})],tr.prototype,"geometryPrecision",void 0),I([N({type:Date})],tr.prototype,"historicMoment",void 0),I([Ft("historicMoment")],tr.prototype,"_writeHistoricMoment",null),I([N({type:Number,json:{write:!0}})],tr.prototype,"maxAllowableOffset",void 0),I([N({json:{write:!0}})],tr.prototype,"objectIds",void 0),I([N({type:[String],json:{write:!0}})],tr.prototype,"orderByFields",void 0),I([N({type:[String],json:{write:!0}})],tr.prototype,"outFields",void 0),I([N({type:qi,json:{read:{source:"outSR"},write:{target:"outSR"}}})],tr.prototype,"outSpatialReference",void 0),I([N({json:{write:!0}})],tr.prototype,"relationshipId",void 0),I([N({type:Number,json:{read:{source:"resultOffset"}}})],tr.prototype,"start",void 0),I([Ft("start"),Ft("num")],tr.prototype,"writeStart",null),I([N({type:Number,json:{read:{source:"resultRecordCount"}}})],tr.prototype,"num",void 0),I([N({json:{write:!0}})],tr.prototype,"returnGeometry",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],tr.prototype,"returnM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],tr.prototype,"returnZ",void 0),I([N({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],tr.prototype,"where",void 0),tr=_F=I([ke("esri.rest.support.RelationshipQuery")],tr),tr.from=Ko(tr);const CG=tr,X0t=Object.freeze(Object.defineProperty({__proto__:null,default:CG},Symbol.toStringTag,{value:"Module"})),bF=new ps({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function uVe(t,e,i,s){const n=await Ug(t);if(await PG(t,e,s),!n.addAttachment)throw new rt(s,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function PG(t,e,i){var r,o;const{attributes:s}=e,{objectIdField:n}=t;return(o=(r=t.capabilities)==null?void 0:r.data)!=null&&o.supportsAttachment?e?s?n&&s[n]?Promise.resolve():Promise.reject(new rt(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new rt(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new rt(i,"A feature is required to add/delete/update attachments")):Promise.reject(new rt(i,"this layer doesn't support attachments"))}async function hVe(t,e,i,s,n){const r=await Ug(t);if(await PG(t,e,n),!r.updateAttachment)throw new rt(n,"Layer source does not support updateAttachment capability");return r.updateAttachment(e,i,s)}async function dVe(t,e,i){const{applyEdits:s}=await nt(()=>import("./editingSupport-Bgj8P6iJ.js"),__vite__mapDeps([141,12,13,14,15,65]),import.meta.url),n=await t.load();let r=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(r={...r,globalIdToObjectId:await kVe(n,e.deleteFeatures,n.globalIdField)}),s(n,n.source,e,i)}async function fVe(t,e,i){const{uploadAssets:s}=await nt(()=>import("./editingSupport-Bgj8P6iJ.js"),__vite__mapDeps([141,12,13,14,15,65]),import.meta.url),n=await t.load();return s(n,n.source,e,i)}async function pVe(t,e,i,s){const n=await Ug(t);if(await PG(t,e,s),!n.deleteAttachments)throw new rt(s,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function mVe(t,e,i){const s=(await t.load({signal:e==null?void 0:e.signal})).source;if(!s.fetchRecomputedExtents)throw new rt(i,"Layer source does not support fetchUpdates capability");return s.fetchRecomputedExtents(e)}async function gVe(t,e,i,s){var S,P;e=cVe.from(e),await t.load();const n=t.source,r=t.capabilities;if(!((S=r==null?void 0:r.data)!=null&&S.supportsAttachment))throw new rt(s,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:u,num:f,size:y,start:_,where:x}=e;if(!((P=r==null?void 0:r.operations)!=null&&P.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(u==null?void 0:u.length)>0||(y==null?void 0:y.length)>0||f||_||x))throw new rt(s,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(l!=null&&l.length||u!=null&&u.length||x))throw new rt(s,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new rt(s,"Layer source does not support queryAttachments capability",e);return n.queryAttachments(e)}async function yVe(t,e,i,s){const n=await Ug(t);if(!n.queryObjectIds)throw new rt(s,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Hg.from(e)??t.createQuery(),i)}async function vVe(t,e,i,s){const n=await Ug(t);if(!n.queryFeatureCount)throw new rt(s,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Hg.from(e)??t.createQuery(),i)}async function _Ve(t,e,i,s){const n=await Ug(t);if(!n.queryExtent)throw new rt(s,"Layer source does not support queryExtent capability");return n.queryExtent(Hg.from(e)??t.createQuery(),i)}async function bVe(t,e,i,s){const n=await Ug(t);if(!n.queryRelatedFeatures)throw new rt(s,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(CG.from(e),i)}async function xVe(t,e,i,s){const n=await Ug(t);if(!n.queryRelatedFeaturesCount)throw new rt(s,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(CG.from(e),i)}async function wVe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:s}=await e.refresh();if(s!=null&&(t.sourceJSON={...t.sourceJSON,...s},t.read(s,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await _he(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function SVe(t){var o,l;const e=new Hg,i=(o=t.capabilities)==null?void 0:o.data,s=(l=t.capabilities)==null?void 0:l.query;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,s&&(e.compactGeometryEnabled=s.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=s.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:r}=t;return e.timeExtent=n!=null&&r!=null?r.offset(-n.value,n.unit):r||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function Tpe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const s of i)if(s.type==="esriFieldTypeGlobalID")return s.name}}function Ipe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const s of i)if(s.type==="esriFieldTypeOID")return s.name}}function EVe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function CVe(t,e){const{subtypes:i,subtypeField:s}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!s)return null;const n=e.attributes[s];return n==null?null:i.find(r=>r.code===n)}function PVe(t,e){var o,l;const{fieldsIndex:i,subtypeField:s}=t,{name:n,type:r}=i.get(e)??{};if(!n)return null;if((s&&((o=i.get(s))==null?void 0:o.name))===n&&((l=t.subtypes)!=null&&l.length)){const u=t.subtypes.map(f=>new Ay({code:Mpe(f.code,r),name:f.name}));if(u!=null&&u.length)return new gA({codedValues:u})}return null}function TVe(t,e){var r,o;const{fieldsIndex:i}=t,{name:s,type:n}=i.get(e)??{};if(!s)return null;if(("typeIdField"in t?(r=i.get(t.typeIdField))==null?void 0:r.name:null)===s&&"types"in t&&((o=t.types)!=null&&o.length)){const l=t.types.map(u=>new Ay({code:Mpe(u.id,n),name:u.name}));return new gA({codedValues:l})}return null}function Mpe(t,e){return e?Lhe({type:e})&&typeof t=="number"?`${t}`:LNe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Ug(t){return(await t.load()).source}async function IVe(t,e){if(!Li||Li.findCredential(t))return;let i;try{const s=await Whe(t,e);s&&(i=await Li.checkSignInStatus(`${s}/sharing`))}catch{}if(i)try{const s=e!=null?e.signal:null;await Li.getCredential(t,{signal:s})}catch{}}async function MVe(t,e,i){var n;const s=(n=t.parsedUrl)==null?void 0:n.path;s&&t.authenticationTriggerEvent===e&&await IVe(s,i)}function AVe(t){return!MI(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const Y8=nx({types:Jde});function TG(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new _G({defaultSymbol:Y8(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(s=>({id:s.id,symbol:Y8(s.symbol,s,e)}))}):new Ex({symbol:Y8(t.defaultSymbol,t,e)})}function DVe(t){var s,n,r;let e=(s=t.sourceJSON)==null?void 0:s.cacheMaxAge;if(!e)return!1;const i=(r=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:r.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function kVe(t,e,i){if(e==null)return null;const s=[],{objectIdField:n}=t;if(e.forEach(f=>{let y=null;if("attributes"in f){const{attributes:_}=f;y={globalId:_[i],objectId:_[n]!=null&&_[n]!==-1?_[n]:null}}else y={globalId:f.globalId,objectId:f.objectId!=null&&f.objectId!==-1?f.objectId:null};y.globalId!=null&&(y.objectId!=null&&y.objectId!==-1||s.push(y.globalId))}),s.length===0)return null;const r=t.createQuery();r.where=s.map(f=>`${i}='${f}'`).join(" OR "),r.returnGeometry=!1,r.outFields=[n,i],r.cacheHint=!1;const o=await xAe(oVe(t,r));if(!o.ok)return null;const l=new Map,u=o.value.features;for(const f of u){const y=f.attributes[i],_=f.attributes[n];y!=null&&_!=null&&_!==-1&&l.set(kAe(y),_)}return l}function NVe(t,e,i){if(!e||!i||!t)return null;const s=i.getAttribute(e);return s==null?null:t.find(n=>{const{id:r}=n;return r!=null&&r.toString()===s.toString()})??null}function MI(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||$Ve(t)}function $Ve(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(s=>s.trim()).includes("map"))}function OVe(t,e,i){const s=e==null?void 0:e.queryBins;if(!s)throw new rt(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!s.supportsAutoInterval)throw new rt(i,"Layer source does not support auto-interval binning");break;case"date":if(!s.supportsDate)throw new rt(i,"Layer source does not support date binning");break;case"fixed-boundaries":if(!s.supportsFixedBoundaries)throw new rt(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!s.supportsFixedInterval)throw new rt(i,"Layer source does not support fixed-interval binning")}const n=s==null?void 0:s.supportedStatistics;if(t.outStatistics&&n){const r=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const l=r.get(o);if(l&&!n[l])throw new rt(i,`Layer source does not support ${o} statistic type`)}}}let yb=class extends Hs(wt){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};I([N({type:String,json:{read:{source:"shapeAreaFieldName"}}})],yb.prototype,"shapeAreaField",void 0),I([N({type:String,json:{read:{source:"shapeLengthFieldName"}}})],yb.prototype,"shapeLengthField",void 0),I([N({type:String,json:{read:t=>c9e.read(t)||u9e.read(t)}})],yb.prototype,"units",void 0),yb=I([ke("esri.layers.support.GeometryFieldsInfo")],yb);const RVe=yb;var xF;let vb=xF=class extends wt{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ci}clone(){return new xF({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};I([N({type:String,json:{write:!0}})],vb.prototype,"floorField",void 0),I([N({json:{read:!1,write:!1}})],vb.prototype,"viewAllMode",void 0),I([N({json:{read:!1,write:!1}})],vb.prototype,"viewAllLevelIds",void 0),vb=xF=I([ke("esri.layers.support.LayerFloorInfo")],vb);const LVe=vb,$Q=new ps({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),OQ=new ps({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let bu=class extends Hs(wt){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};I([N({json:{read:$Q.read,write:$Q.write}})],bu.prototype,"cardinality",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"composite",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"id",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"keyField",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"keyFieldInRelationshipTable",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"name",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"relatedTableId",void 0),I([N({json:{read:!0,write:!0}})],bu.prototype,"relationshipTableId",void 0),I([N({json:{read:OQ.read,write:OQ.write}})],bu.prototype,"role",void 0),bu=I([ke("esri.layers.support.Relationship")],bu);const FVe=bu;function Jt(t,e,i){return!!Ape(t,e,i)}function tS(t,e,i){return Ape(t,e,i)}function Ape(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const zVe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function qVe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(s=>s.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function ZC(t,e){var s;const i=(s=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:s.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function VVe(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(s=>s.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_continuous")),percentileDiscrete:!!(e!=null&&e.includes("percentile_discrete")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Dpe(t,e){return{analytics:GVe(t),attachment:jVe(t),data:BVe(t),metadata:HVe(t),operations:UVe(t.capabilities,t,e),query:YVe(t,e),queryBins:ZVe(t),queryRelated:XVe(t),queryTopFeatures:WVe(t),editing:KVe(t)}}function GVe(t){return{supportsCacheHint:ZC(t.advancedQueryCapabilities,"queryAnalytics")}}function jVe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:ZC(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Jt(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(s=>{const n=zVe[s.name];n&&(i[n]=!!s.isEnabled)}),i}function BVe(t){return{isVersioned:Jt(t,"isDataVersioned",!1),isBranchVersioned:Jt(t,"isDataBranchVersioned",!1),supportsAttachment:Jt(t,"hasAttachments",!1),supportsM:Jt(t,"hasM",!1),supportsZ:Jt(t,"hasZ",!1)}}function HVe(t){return{supportsAdvancedFieldProperties:Jt(t,"supportsFieldDescriptionProperty",!1)}}function UVe(t,e,i){const s=t?t.toLowerCase().split(",").map(x=>x.trim()):[],n=i?WC(i):null,r=s.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=s.includes("editing")&&!e.datesInUnknownTimezone;let l=o&&s.includes("create"),u=o&&s.includes("delete"),f=o&&s.includes("update");const y=s.includes("changetracking"),_=e.advancedQueryCapabilities;return o&&!(l||u||f)&&(l=u=f=!0),{supportsCalculate:Jt(e,"supportsCalculate",!1),supportsTruncate:Jt(e,"supportsTruncate",!1),supportsValidateSql:Jt(e,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:u,supportsEditing:o,supportsChangeTracking:y,supportsQuery:r,supportsQueryAnalytics:Jt(_,"supportsQueryAnalytic",!1),supportsQueryAttachments:Jt(_,"supportsQueryAttachments",!1),supportsQueryBins:Jt(_,"supportsQueryBins",!1),supportsQueryTopFeatures:Jt(_,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Jt(e,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:Jt(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Jt(e,"supportsAsyncConvert3D",!1)}}function YVe(t,e){const i=t.advancedQueryCapabilities,s=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,r=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),l=!o||r>=ht("mapserver-pbf-version-support"),u=xpe(e),f=new Set((t.supportedQueryFormats??"").split(",").map(y=>y.toLowerCase().trim()));return{maxRecordCount:tS(t,"maxRecordCount",void 0),maxRecordCountFactor:tS(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:tS(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:qVe(i),supportsCacheHint:Jt(i,"supportsQueryWithCacheHint",!1)||ZC(i,"query"),supportsCentroid:Jt(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:u,supportsDefaultSpatialReference:Jt(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Jt(i,"supportsDisjointSpatialRel",!1),supportsDistance:Jt(i,"supportsQueryWithDistance",!1),supportsDistinct:Jt(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Jt(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&f.has("pbf"),supportsFullTextSearch:Jt(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Jt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Jt(i,"supportsHavingClause",!1),supportsHistoricMoment:Jt(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Jt(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Jt(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Jt(i,"supportsPagination",!1),supportsPercentileStatistics:Jt(i,"supportsPercentileStatistics",!1),supportsQuantization:Jt(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Jt(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Jt(s,"allowAnonymousToQuery",!0),supportsQueryByOthers:Jt(s,"allowOthersToQuery",!0),supportsQueryGeometry:Jt(t,"supportsReturningQueryGeometry",!1),supportsResultType:Jt(i,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:Jt(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Jt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Jt(t,"useStandardizedQueries",!1),supportsStatistics:Jt(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:Jt(i,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:tS(t,"tileMaxRecordCount",void 0)}}function XVe(t){const e=t.advancedQueryCapabilities,i=Jt(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Jt(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:ZC(e,"queryRelated")}}function WVe(t){return{supportsCacheHint:ZC(t.advancedQueryCapabilities,"queryTopFilter")}}function ZVe(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:Jt(e,"supportsDateBin",!1),supportsFixedInterval:Jt(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:Jt(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Jt(e,"supportsFixedBoundariesBin",!1),supportedStatistics:VVe(e)}}function KVe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Jt(t,"allowGeometryUpdates",!0),supportsGlobalId:Jt(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Jt(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Jt(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Jt(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Jt(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Jt(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Jt(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Jt(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Jt(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Jt(i,"supportsAsyncApplyEdits",!1),zDefault:tS(t,"zDefault",void 0)}}function K0t(t){var e;return{operations:{supportsAppend:Jt(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:Jt(t,"supportsExportClip",!1),supportsExportFrameset:Jt(t,"supportsExportFrameset",!1),supportsMensuration:Jt(t,"supportsMensuration",!1),supportsUpdate:Jt(t,"supportsUpdate",!1)}}}let pp=class extends Hs(wt){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const s of Object.keys(e))i[s]=yA(e[s]);return i}writeDomains(e,i){var n;if(!e)return;const s={};for(const r of Object.keys(e))e[r]&&(s[r]=(n=e[r])==null?void 0:n.toJSON());i.domains=s}};I([N({type:Number,json:{write:!0}})],pp.prototype,"code",void 0),I([N({type:Object,json:{write:!0}})],pp.prototype,"defaultValues",void 0),I([N({json:{write:!0}})],pp.prototype,"domains",void 0),I([At("domains")],pp.prototype,"readDomains",null),I([Ft("domains")],pp.prototype,"writeDomains",null),I([N({type:String,json:{write:!0}})],pp.prototype,"name",void 0),pp=I([ke("esri.layers.support.Subtype")],pp);const JVe=pp,QVe=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ci.ofType(jd)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=qi.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var n;if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:r,operations:o,editing:l}=i;if(!r.supportsQueryByOthers||!r.supportsQueryByAnonymous||o.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}if((n=this.serviceDefinitionExpression)!=null&&n.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(DVe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s!=null&&s.creatorField||s!=null&&s.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,s){return Dpe(s,this.url)}readEditingInfo(i,s){const{editingInfo:n}=s;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const s=Ue(i),{operations:n,editing:r}=s;return MI(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=r.supportsDeleteByOthers=r.supportsGeometryUpdate=r.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=r.supportsGeometryUpdate=!0),s)}readGlobalIdFieldFromService(i,s){return Tpe(s)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||MI(this))return!1;const{operations:s,editing:n}=i;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:s,editing:n}=i;return MI(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,s){return s.type==="Table"}readMaxScale(i,s){return s.effectiveMaxScale||i||0}readMinScale(i,s){return s.effectiveMinScale||i||0}readObjectIdFieldFromService(i,s){return Ipe(s)}readServiceDefinitionExpression(i,s){return s.definitionQuery||s.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const s=Lqe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:zt.getLogger(this)});this._set("url",s.url),s.layerId!=null&&this._set("layerId",s.layerId)}writeUrl(i,s,n,r){Fqe(this,i,null,s,r)}readVersion(i,s){return EVe(s)}};return I([N({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),I([N({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),I([N({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),I([At("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),I([N(W9("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),I([N({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),I([N({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),I([N({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),I([N({readOnly:!0,type:rVe})],e.prototype,"editFieldsInfo",void 0),I([N({readOnly:!0})],e.prototype,"editingInfo",void 0),I([At("editingInfo")],e.prototype,"readEditingInfo",null),I([N({readOnly:!0})],e.prototype,"effectiveCapabilities",null),I([N((()=>{const i=Ue(s$e),s=i.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),I([N({type:LVe,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Xo}}}}})],e.prototype,"floorInfo",void 0),I([N({type:ur,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),I([N()],e.prototype,"gdbVersion",void 0),I([N({readOnly:!0,type:RVe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),I([N({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:bF.read}}}})],e.prototype,"geometryType",void 0),I([N({type:String})],e.prototype,"globalIdField",void 0),I([At("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),I([N({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),I([N({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),I([N({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),I([N({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),I([N({readOnly:!0,type:nVe})],e.prototype,"heightModelInfo",void 0),I([N({type:Date})],e.prototype,"historicMoment",void 0),I([N({type:ci.ofType(jd),readOnly:!0})],e.prototype,"indexes",void 0),I([N({readOnly:!0})],e.prototype,"isTable",void 0),I([At("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),I([N({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),I([N(a$e)],e.prototype,"maxScale",void 0),I([At("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),I([N(o$e)],e.prototype,"minScale",void 0),I([At("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),I([N({type:String})],e.prototype,"objectIdField",void 0),I([At("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),I([N(W9("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),I([N({type:[FVe],readOnly:!0})],e.prototype,"relationships",void 0),I([N({type:Boolean})],e.prototype,"returnM",void 0),I([N({type:Boolean})],e.prototype,"returnZ",void 0),I([N({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),I([N({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),I([At("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),I([N({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),I([N()],e.prototype,"sourceJSON",void 0),I([N({type:qi,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),I([N({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),I([N({type:[JVe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),I([N({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),I([N(t$e)],e.prototype,"url",null),I([Ft("url")],e.prototype,"writeUrl",null),I([N({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),I([At("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=I([ke("esri.layers.mixins.FeatureLayerBase")],e),e};let _b=class extends Hs(wt){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};I([N({type:String,json:{write:!0}})],_b.prototype,"expression",void 0),I([N({type:String,json:{write:!0}})],_b.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],_b.prototype,"returnType",void 0),_b=I([ke("esri.layers.support.ExpressionInfo")],_b);const IG=_b;var wF;let mp=wF=class extends wt{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new wF({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:Ue(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};I([N({type:Boolean,json:{write:!0}})],mp.prototype,"isAutoGenerated",void 0),I([N({type:String,json:{write:!0}})],mp.prototype,"name",void 0),I([N({type:String,json:{write:!0}})],mp.prototype,"alias",void 0),I([N({type:String,json:{write:!0}})],mp.prototype,"onStatisticField",void 0),I([N({type:IG,json:{write:!0}})],mp.prototype,"onStatisticExpression",void 0),I([N({type:String,json:{write:!0}})],mp.prototype,"statisticType",void 0),mp=wF=I([ke("esri.layers.support.AggregateField")],mp);const fv=mp;let pg=class extends wt{constructor(){super(...arguments),this.type=null}};I([N({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],pg.prototype,"type",void 0),pg=I([ke("esri.layers.support.FeatureReduction")],pg);const MG="__begin__",AG="__end__",eGe=new RegExp(MG,"ig"),tGe=new RegExp(AG,"ig"),RQ=new RegExp("^"+MG,"i"),LQ=new RegExp(AG+"$","i"),d6='"',iGe=d6+" + ",sGe=" + "+d6;function nGe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function rGe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function DG(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=nGe(t.labelExpression),e.type="conventional"),e}function oGe(t){const e=DG(t);if(!e)return null;switch(e.type){case"conventional":return SF(e.expression);case"arcade":return e.expression}return null}function aGe(t){const e=DG(t);if(!e)return null;switch(e.type){case"conventional":return cGe(e.expression);case"arcade":return kpe(e.expression)}return null}function SF(t){let e;return t?(e=yM(t,i=>MG+'$feature["'+i+'"]'+AG),e=RQ.test(e)?e.replace(RQ,""):d6+e,e=LQ.test(e)?e.replace(LQ,""):e+d6,e=e.replaceAll(eGe,iGe).replaceAll(tGe,sGe)):e='""',e}const lGe=/^\s*\{([^}]+)\}\s*$/i;function cGe(t){const e=t==null?void 0:t.match(lGe);return(e==null?void 0:e[1].trim())||null}const uGe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,hGe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,dGe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function kpe(t){if(!t)return null;let e=uGe.exec(t)||hGe.exec(t);return e?e[1]||e[3]:(e=dGe.exec(t),e?e[2]:null)}var EF;let I0=EF=class extends wt{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?SF(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=SF(this.value)),t!=null&&(e[i]=t)}clone(){return new EF({expression:this.expression,title:this.title,value:this.value})}};I([N({type:String,json:{write:{writerEnsuresNonNull:!0}}})],I0.prototype,"expression",void 0),I([At("expression",["expression","value"])],I0.prototype,"readExpression",null),I([Ft("expression")],I0.prototype,"writeExpression",null),I([N({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],I0.prototype,"title",void 0),I([N({json:{read:!1,write:!1}})],I0.prototype,"value",void 0),I0=EF=I([ke("esri.layers.support.LabelExpressionInfo")],I0);const Npe=I0;var CF;const P4=new ps({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function T4(t,e,i){return{enabled:!GO(i==null?void 0:i.layer)}}function $pe(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function fGe(t){return(t==null?void 0:t.type)==="map-image"}function Ope(t){var e,i;return!!fGe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function pGe(t){return $pe(t)||Ope(t==null?void 0:t.layer)}let Dr=CF=class extends wt{static evaluateWhere(t,e){const i=(s,n,r)=>{switch(n){case"=":return s==r;case"<>":return s!=r;case">":return s>r;case">=":return s>=r;case"<":return s<r;case"<=":return s<=r}return!1};try{if(t==null)return!0;const s=t.split(" ");if(s.length===3)return i(e[s[0]],s[1],s[2]);if(s.length===7){const n=i(e[s[0]],s[1],s[2]),r=s[3],o=i(e[s[4]],s[5],s[6]);switch(r){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=pLe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=rGe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=kpe(this.labelExpressionInfo.expression);s&&(t="["+s+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,s){if(t==null&&this.labelExpression!=null&&$pe(s))t=new Npe({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(s);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return DG(this)}getLabelExpressionArcade(){return oGe(this)}getLabelExpressionSingleField(){return aGe(this)}hash(){return JSON.stringify(this)}clone(){return new CF({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Ue(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Ue(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};I([N({type:String,json:{write:!0}})],Dr.prototype,"name",void 0),I([N({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:T4}}}}})],Dr.prototype,"allowOverrun",void 0),I([N({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:T4}}}}})],Dr.prototype,"deconflictionStrategy",void 0),I([N({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&Ope(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Dr.prototype,"labelExpression",void 0),I([At("labelExpression")],Dr.prototype,"readLabelExpression",null),I([Ft("labelExpression")],Dr.prototype,"writeLabelExpression",null),I([N({type:Npe,json:{write:{overridePolicy:(t,e,i)=>pGe(i)?{allowNull:!0}:{enabled:!1}}}})],Dr.prototype,"labelExpressionInfo",void 0),I([Ft("labelExpressionInfo")],Dr.prototype,"writeLabelExpressionInfo",null),I([N({type:P4.apiValues,json:{type:P4.jsonValues,read:P4.read,write:P4.write}})],Dr.prototype,"labelPlacement",void 0),I([N({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Dr.prototype,"labelPosition",void 0),I([N({type:Number})],Dr.prototype,"maxScale",void 0),I([Ft("maxScale")],Dr.prototype,"writeMaxScale",null),I([N({type:Number})],Dr.prototype,"minScale",void 0),I([Ft("minScale")],Dr.prototype,"writeMinScale",null),I([N({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:T4}}}}})],Dr.prototype,"repeatLabel",void 0),I([N({type:Number,cast:fs,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:T4}}}}})],Dr.prototype,"repeatLabelDistance",void 0),I([N({types:ERe,json:{origins:{"web-scene":{types:CRe,write:TK,default:null}},write:TK,default:null}})],Dr.prototype,"symbol",void 0),I([N({type:Boolean,json:{write:!0}})],Dr.prototype,"useCodedValues",void 0),I([N({type:String,json:{write:!0}})],Dr.prototype,"where",void 0),Dr=CF=I([ke("esri.layers.support.LabelClass")],Dr);const vA=Dr;var PF;let Fa=PF=class extends pg{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=fs("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const s=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ja(i,s,e)}readRenderer(t,e,i){var n;const s=(n=e.drawingInfo)==null?void 0:n.renderer;return s?wE(s,e,i)??void 0:TG(e,i)}clone(){return new PF({fields:Ue(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Ue(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:Ue(this.popupTemplate),renderer:Ue(this.renderer),binType:Ue(this.binType),size:this.size})}};I([ni({binning:"binning"})],Fa.prototype,"type",void 0),I([ni({geohash:"geohash",square:"square"}),N({type:["geohash","square"]})],Fa.prototype,"binType",void 0),I([N({type:Number,json:{write:!0}})],Fa.prototype,"fixedBinLevel",void 0),I([N({type:[vA],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Fa.prototype,"labelingInfo",void 0),I([N(zV)],Fa.prototype,"labelsVisible",void 0),I([N({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Fa.prototype,"maxScale",void 0),I([N(FV)],Fa.prototype,"popupEnabled",void 0),I([N({type:FC,json:{name:"popupInfo",write:!0}})],Fa.prototype,"popupTemplate",void 0),I([N({cast:t=>t==="auto"?t:sx(fs(t))})],Fa.prototype,"size",void 0),I([N({type:[fv],json:{write:!0}})],Fa.prototype,"fields",void 0),I([Ft("fields")],Fa.prototype,"writeFields",null),I([N({types:fA,json:{write:{target:"drawingInfo.renderer"}}})],Fa.prototype,"renderer",void 0),I([At("renderer",["drawingInfo.renderer"])],Fa.prototype,"readRenderer",null),Fa=PF=I([ke("esri.layers.support.FeatureReductionBinning")],Fa);const Rpe=Fa;var TF;function FQ(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let eo=TF=class extends wt{constructor(t){super(t),this.type="cluster",this.clusterRadius=fs("80px"),this.clusterMinSize=fs("12px"),this.clusterMaxSize=fs("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,r;const s=(n=e.drawingInfo)==null?void 0:n.renderer;return(r=s==null?void 0:s.authoringInfo)!=null&&r.isAutoGenerated?null:s?FQ(s)?null:wE(s,e,i)??void 0:TG(e,i)}readSymbol(t,e,i){var n,r;const s=(n=e.drawingInfo)==null?void 0:n.renderer;if((r=s==null?void 0:s.authoringInfo)!=null&&r.isAutoGenerated)return null;if(s&&FQ(s)){const o=wE(s,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,s){var r,o;const n=(o=(r=this.renderer)==null?void 0:r.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const l=new Ex({symbol:t});e.drawingInfo={renderer:l.write({},s)}}}writeFields(t,e,i){const s=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ja(i,s,e)}readFields(t,e,i){return t.filter(s=>!s.isAutoGenerated).map(s=>fv.fromJSON(s))}clone(){return new TF({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Ue(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Ue(this.fields),maxScale:this.maxScale,renderer:Ue(this.renderer),symbol:Ue(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:Ue(this.popupTemplate)})}};I([N({type:["cluster"],readOnly:!0,json:{write:!0}})],eo.prototype,"type",void 0),I([N({cast:t=>t==="auto"?t:sx(fs(t)),json:{write:!0}})],eo.prototype,"clusterRadius",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],eo.prototype,"clusterMinSize",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],eo.prototype,"clusterMaxSize",void 0),I([N({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],eo.prototype,"maxScale",void 0),I([N(FV)],eo.prototype,"popupEnabled",void 0),I([N({type:FC,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],eo.prototype,"popupTemplate",void 0),I([N({types:fA,json:{write:{target:"drawingInfo.renderer"}}})],eo.prototype,"renderer",void 0),I([At("renderer",["drawingInfo.renderer"])],eo.prototype,"readRenderer",null),I([N({types:wRe})],eo.prototype,"symbol",void 0),I([At("symbol",["drawingInfo.renderer"])],eo.prototype,"readSymbol",null),I([Ft("symbol")],eo.prototype,"writeSymbol",null),I([N({type:[vA],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],eo.prototype,"labelingInfo",void 0),I([N(zV)],eo.prototype,"labelsVisible",void 0),I([N({type:[fv],json:{write:!0}})],eo.prototype,"fields",void 0),I([Ft("fields")],eo.prototype,"writeFields",null),I([At("fields")],eo.prototype,"readFields",null),eo=TF=I([ke("esri.layers.support.FeatureReductionCluster")],eo);const Lpe=eo;var IF;let AI=IF=class extends pg{constructor(t){super(t),this.type="selection"}clone(){return new IF}};I([N({type:["selection"]})],AI.prototype,"type",void 0),AI=IF=I([ke("esri.layers.support.FeatureReductionSelection")],AI);const zQ=AI,qQ={key:"type",base:pg,typeMap:{cluster:Lpe,binning:Rpe}},mGe={types:{key:"type",base:pg,typeMap:{selection:zQ,cluster:Lpe,binning:Rpe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:qQ},"portal-item":{types:qQ},"web-scene":{types:{key:"type",base:pg,typeMap:{selection:zQ}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Xo}}}}},k_={Base64:0,Hex:1,String:2,Raw:3},r2=8,Fpe=(1<<r2)-1;function ng(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function gGe(t){const e=[];for(let i=0,s=t.length*r2;i<s;i+=r2)e[i>>5]|=(t.charCodeAt(i/r2)&Fpe)<<i%32;return e}function yGe(t){const e=[];for(let i=0,s=32*t.length;i<s;i+=r2)e.push(String.fromCharCode(t[i>>5]>>>i%32&Fpe));return e.join("")}function vGe(t){const e="0123456789abcdef",i=[];for(let s=0,n=4*t.length;s<n;s++)i.push(e.charAt(t[s>>2]>>s%4*8+4&15)+e.charAt(t[s>>2]>>s%4*8&15));return i.join("")}function _Ge(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];for(let n=0,r=4*t.length;n<r;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let l=0;l<4;l++)8*n+6*l>32*t.length?s.push(e):s.push(i.charAt(o>>6*(3-l)&63))}return s.join("")}function bGe(t,e){return t<<e|t>>>32-e}function _A(t,e,i,s,n,r){return ng(bGe(ng(ng(e,t),ng(s,r)),n),i)}function Da(t,e,i,s,n,r,o){return _A(e&i|~e&s,t,e,n,r,o)}function ka(t,e,i,s,n,r,o){return _A(e&s|i&~s,t,e,n,r,o)}function Na(t,e,i,s,n,r,o){return _A(e^i^s,t,e,n,r,o)}function $a(t,e,i,s,n,r,o){return _A(i^(e|~s),t,e,n,r,o)}function xGe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,s=-271733879,n=-1732584194,r=271733878;for(let o=0;o<t.length;o+=16){const l=i,u=s,f=n,y=r;i=Da(i,s,n,r,t[o],7,-680876936),r=Da(r,i,s,n,t[o+1],12,-389564586),n=Da(n,r,i,s,t[o+2],17,606105819),s=Da(s,n,r,i,t[o+3],22,-1044525330),i=Da(i,s,n,r,t[o+4],7,-176418897),r=Da(r,i,s,n,t[o+5],12,1200080426),n=Da(n,r,i,s,t[o+6],17,-1473231341),s=Da(s,n,r,i,t[o+7],22,-45705983),i=Da(i,s,n,r,t[o+8],7,1770035416),r=Da(r,i,s,n,t[o+9],12,-1958414417),n=Da(n,r,i,s,t[o+10],17,-42063),s=Da(s,n,r,i,t[o+11],22,-1990404162),i=Da(i,s,n,r,t[o+12],7,1804603682),r=Da(r,i,s,n,t[o+13],12,-40341101),n=Da(n,r,i,s,t[o+14],17,-1502002290),s=Da(s,n,r,i,t[o+15],22,1236535329),i=ka(i,s,n,r,t[o+1],5,-165796510),r=ka(r,i,s,n,t[o+6],9,-1069501632),n=ka(n,r,i,s,t[o+11],14,643717713),s=ka(s,n,r,i,t[o],20,-373897302),i=ka(i,s,n,r,t[o+5],5,-701558691),r=ka(r,i,s,n,t[o+10],9,38016083),n=ka(n,r,i,s,t[o+15],14,-660478335),s=ka(s,n,r,i,t[o+4],20,-405537848),i=ka(i,s,n,r,t[o+9],5,568446438),r=ka(r,i,s,n,t[o+14],9,-1019803690),n=ka(n,r,i,s,t[o+3],14,-187363961),s=ka(s,n,r,i,t[o+8],20,1163531501),i=ka(i,s,n,r,t[o+13],5,-1444681467),r=ka(r,i,s,n,t[o+2],9,-51403784),n=ka(n,r,i,s,t[o+7],14,1735328473),s=ka(s,n,r,i,t[o+12],20,-1926607734),i=Na(i,s,n,r,t[o+5],4,-378558),r=Na(r,i,s,n,t[o+8],11,-2022574463),n=Na(n,r,i,s,t[o+11],16,1839030562),s=Na(s,n,r,i,t[o+14],23,-35309556),i=Na(i,s,n,r,t[o+1],4,-1530992060),r=Na(r,i,s,n,t[o+4],11,1272893353),n=Na(n,r,i,s,t[o+7],16,-155497632),s=Na(s,n,r,i,t[o+10],23,-1094730640),i=Na(i,s,n,r,t[o+13],4,681279174),r=Na(r,i,s,n,t[o],11,-358537222),n=Na(n,r,i,s,t[o+3],16,-722521979),s=Na(s,n,r,i,t[o+6],23,76029189),i=Na(i,s,n,r,t[o+9],4,-640364487),r=Na(r,i,s,n,t[o+12],11,-421815835),n=Na(n,r,i,s,t[o+15],16,530742520),s=Na(s,n,r,i,t[o+2],23,-995338651),i=$a(i,s,n,r,t[o],6,-198630844),r=$a(r,i,s,n,t[o+7],10,1126891415),n=$a(n,r,i,s,t[o+14],15,-1416354905),s=$a(s,n,r,i,t[o+5],21,-57434055),i=$a(i,s,n,r,t[o+12],6,1700485571),r=$a(r,i,s,n,t[o+3],10,-1894986606),n=$a(n,r,i,s,t[o+10],15,-1051523),s=$a(s,n,r,i,t[o+1],21,-2054922799),i=$a(i,s,n,r,t[o+8],6,1873313359),r=$a(r,i,s,n,t[o+15],10,-30611744),n=$a(n,r,i,s,t[o+6],15,-1560198380),s=$a(s,n,r,i,t[o+13],21,1309151649),i=$a(i,s,n,r,t[o+4],6,-145523070),r=$a(r,i,s,n,t[o+11],10,-1120210379),n=$a(n,r,i,s,t[o+2],15,718787259),s=$a(s,n,r,i,t[o+9],21,-343485551),i=ng(i,l),s=ng(s,u),n=ng(n,f),r=ng(r,y)}return[i,s,n,r]}function zpe(t,e=k_.Hex){const i=e||k_.Base64,s=xGe(gGe(t),t.length*r2);switch(i){case k_.Raw:return s;case k_.Hex:return vGe(s);case k_.String:return yGe(s);case k_.Base64:return _Ge(s)}}const wGe=()=>zt.getLogger("esri.views.2d.layers.support.clusterUtils");ht.add("esri-cluster-arcade-enabled",!0);const SGe=ht("esri-cluster-arcade-enabled"),EGe=new Set(["simple-line","simple-fill","picture-fill"]);function VQ(t,e){let i=e.clone();if(!CGe(i))return i;if(e.getSymbols().some(s=>EGe.has(s.type))&&(i=new Ex({symbol:new zc})),i.authoringInfo||(i.authoringInfo=new rG),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const s=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");s.forEach(n=>{n.type==="rotation"?n.field?n.field=M1(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=Yw(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=M1(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=M1(t,n.field,"avg","number"):n.valueExpression&&(n.field=Yw(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=s}switch(i.type){case"simple":break;case"pie-chart":for(const s of i.attributes)s.field?s.field=M1(t,s.field,"sum","number"):s.valueExpression&&(s.field=Yw(t,s.valueExpression,"sum","number"),s.valueExpression=null);break;case"unique-value":i.field?i.field=M1(t,i.field,"mode","string"):i.valueExpression&&(i.field=Yw(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=M1(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=M1(t,i.field,"avg","number"):i.valueExpression&&(i.field=Yw(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const CGe=t=>{const e=i=>wGe().error(new rt("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!SGe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function PGe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const s=i,n="field",r=e.toLowerCase()+",norm:"+n+","+s.toLowerCase();return"cluster_avg_"+zpe(r)}}}function Yw(t,e,i,s){const n=zpe(e),r=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===r)||t.push(new fv({name:r,isAutoGenerated:!0,onStatisticExpression:new IG({expression:e,returnType:s}),statisticType:i})),r}function M1(t,e,i,s,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const r=PGe(i,e,n);return t.some(o=>o.name===r)||(i==="avg_norm"?t.push(new fv({name:r,isAutoGenerated:!0,onStatisticExpression:new IG({expression:`$feature.${e} / $feature.${n}`,returnType:s}),statisticType:"avg"})):t.push(new fv({name:r,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),r}const TGe=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(xi(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},Jp))}set featureReduction(i){const s=this._normalizeFeatureReduction(i);this._set("featureReduction",s)}set renderer(i){}_withClusterVariable(i,s,n){const r=i.clone();return"visualVariables"in r&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.some(o=>o.type==="size")||r.visualVariables.push(new lA({field:"cluster_count",stops:[new uI({value:1}),new uI({useMinValue:!0,size:s}),new uI({useMaxValue:!0,size:n})]}))),r}_normalizeFeatureReduction(i){var _;if((i==null?void 0:i.type)!=="cluster")return i;const s=i.clone(),n=[new fv({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],r=(s.fields??[]).filter(x=>!x.isAutoGenerated),o=i.renderer&&!((_=i.renderer.authoringInfo)!=null&&_.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:u}=s;if(o){s.fields=[...n,...r];const x=this._withClusterVariable(s.renderer,l,u);return s.effectiveFeatureRenderer=x,s.effectiveClusterRenderer=x,s}if(i.symbol){if(s.fields=[...n,...r],s.renderer=null,!this.renderer)return s.effectiveFeatureRenderer=null,s.effectiveClusterRenderer=null,s;const x=VQ(n,this.renderer),S=this._withClusterVariable(x,l,u),P="visualVariables"in S&&S.visualVariables?S.visualVariables:[],A=new Ex({symbol:i.symbol,visualVariables:P});return s.fields=[...n,...r],s.effectiveFeatureRenderer=S,s.effectiveClusterRenderer=A,s}if(!this.renderer)return i;const f=VQ(n,this.renderer);s.fields=[...n,...r],s.renderer=f;const y=this._withClusterVariable(f,l,u);return s.effectiveFeatureRenderer=y,s.effectiveClusterRenderer=y,s}};return I([N(mGe)],e.prototype,"featureReduction",null),e=I([ke("esri.layers.mixins.FeatureReductionLayer")],e),e};var MF;const I4=new ps({asc:"ascending",desc:"descending"});let bb=MF=class extends wt{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new MF({field:this.field,valueExpression:this.valueExpression,order:this.order})}};I([N({type:String,json:{write:!0}})],bb.prototype,"field",void 0),I([N({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],bb.prototype,"valueExpression",void 0),I([N({type:I4.apiValues,json:{type:I4.jsonValues,read:I4.read,write:I4.write}})],bb.prototype,"order",void 0),bb=MF=I([ke("esri.layers.support.OrderByInfo")],bb);const qpe=bb;function IGe(t,e,i){if(!t)return null;const s=t.find(r=>!!r.field);if(!s)return null;const n=new qpe;return n.read(s,i),[n]}function MGe(t,e,i,s){const n=t.find(r=>!!r.field);n&&Ja(i,[n.toJSON()],e)}const AGe={type:[qpe],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:IGe},write:{writer:MGe}}},DGe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return I([N(AGe)],e.prototype,"orderBy",void 0),e=I([ke("esri.layers.mixins.OrderedLayer")],e),e};let iS=class extends Ei{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};I([N()],iS.prototype,"updating",void 0),I([N()],iS.prototype,"status",void 0),iS=I([ke("esri.layers.support.PublishingInfo")],iS);const kGe=iS,NGe=Symbol(),$Ge=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const n=new kGe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(s){let o=0;const l=async f=>{let y;s.updating=!0;try{y=await this.fetchPublishingStatus()}catch{y="unavailable"}y!=="published"&&y!=="unavailable"||(s.status==="publishing"&&this.refresh(),u.remove()),s.status=y,s.updating=!1,u.removed||(o=setTimeout(l,f,f+125))},u={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>u.remove()),l(250),this.addHandles(u)}};return e=NGe,I([N({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=I([ke("esri.layers.mixins.PublishableLayer")],i),i},rg=new ci,GS=new WeakMap;function OGe(t){LGe(t)&&rg.push(new WeakRef(t))}function RGe(t){const e=rg.find(i=>i.deref()===t);e&&rg.remove(e)}function LGe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Vpe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Vpe(e,t%e):0}let X8=0,M4=0;function FGe(){const t=Date.now();let e=!1;for(const i of rg){const s=i.deref();s?s.refreshInterval&&t-(GS.get(s)??0)+5>=6e4*s.refreshInterval&&(GS.set(s,t),s.refresh(t)):e=!0}if(e)for(let i=rg.length-1;i>=0;i--)rg.at(i).deref()||rg.removeAt(i)}Tq(()=>{const t=Date.now();let e=0;for(const i of rg){const s=i.deref();s&&(e=Vpe(Math.round(6e4*s.refreshInterval),e),s.refreshInterval?GS.get(s)||GS.set(s,t):GS.delete(s))}if(e!==M4){if(M4=e,clearInterval(X8),M4===0)return void(X8=0);X8=setInterval(FGe,M4)}},Jp);const GQ=.1,zGe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Mv(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||OGe(this)},()=>{})}destroy(){RGe(this)}castRefreshInterval(i){return i>=GQ?i:i<=0?0:GQ}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Qh(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{zt.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){}};return I([N({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Xo}}}}})],e.prototype,"refreshInterval",void 0),I([Sn("refreshInterval")],e.prototype,"castRefreshInterval",null),I([N({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),I([N({readOnly:!0})],e.prototype,"refreshParameters",null),e=I([ke("esri.layers.mixins.RefreshableLayer")],e),e},Gpe=wa()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let sS=class extends Hs(wt){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return zue(this.value,this.unit,"milliseconds")}};I([ni(Gpe,{nonNullable:!0})],sS.prototype,"unit",void 0),I([N({type:Number,json:{write:!0},nonNullable:!0})],sS.prototype,"value",void 0),sS=I([ke("esri.time.TimeInterval")],sS);const f6=sS;function jQ(t,e){return f6.fromJSON({value:t,unit:e})}let ca=class extends Hs(wt){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Pg.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?jQ(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?jQ(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};I([N({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ca.prototype,"cumulative",void 0),I([N({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ca.prototype,"endField",void 0),I([N({type:Pg,json:{write:{enabled:!0,allowNull:!0}}})],ca.prototype,"fullTimeExtent",void 0),I([At("fullTimeExtent",["timeExtent"])],ca.prototype,"readFullTimeExtent",null),I([Ft("fullTimeExtent")],ca.prototype,"writeFullTimeExtent",null),I([N({type:Boolean,json:{write:!0}})],ca.prototype,"hasLiveData",void 0),I([N({type:f6,json:{write:{enabled:!0,allowNull:!0}}})],ca.prototype,"interval",void 0),I([At("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ca.prototype,"readInterval",null),I([Ft("interval")],ca.prototype,"writeInterval",null),I([N({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ca.prototype,"startField",void 0),I([N(W9("timeReference",!0))],ca.prototype,"timeZone",void 0),I([N({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ca.prototype,"trackIdField",void 0),I([N({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ca.prototype,"useTime",void 0),I([N({type:[Date],json:{read:!1}})],ca.prototype,"stops",void 0),ca=I([ke("esri.layers.support.TimeInfo")],ca);const jpe=ca,qGe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Xo}}},VGe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const n=s.timeInfo.exportOptions;if(!n)return null;const r=n.timeOffset,o=Gpe.fromJSON(n.timeOffsetUnits);return r&&o?new f6({value:r,unit:o}):null}set timeInfo(i){Ihe(i,this.fieldsIndex),this._set("timeInfo",i)}};return I([N({type:Pg,json:{write:!1}})],e.prototype,"timeExtent",void 0),I([N({type:f6})],e.prototype,"timeOffset",void 0),I([At("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),I([N({value:null,type:jpe,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),I([N(qGe)],e.prototype,"useViewTime",void 0),e=I([ke("esri.layers.mixins.TemporalLayer")],e),e},BQ=new ps({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let M0=class extends Hs(wt){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};I([N({json:{write:!0}})],M0.prototype,"name",void 0),I([N({json:{write:!0}})],M0.prototype,"description",void 0),I([N({json:{read:BQ.read,write:BQ.write}})],M0.prototype,"drawingTool",void 0),I([N({json:{write:!0}})],M0.prototype,"prototype",void 0),I([N({json:{write:!0}})],M0.prototype,"thumbnail",void 0),M0=I([ke("esri.layers.support.FeatureTemplate")],M0);const kG=M0;let gp=class extends Hs(wt){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const s of Object.keys(e))i[s]=yA(e[s]);return i}writeDomains(e,i){var n;const s={};for(const r of Object.keys(e))e[r]&&(s[r]=(n=e[r])==null?void 0:n.toJSON());i.domains=s}};I([N({json:{write:!0}})],gp.prototype,"id",void 0),I([N({json:{write:!0}})],gp.prototype,"name",void 0),I([N({json:{write:!0}})],gp.prototype,"domains",void 0),I([At("domains")],gp.prototype,"readDomains",null),I([Ft("domains")],gp.prototype,"writeDomains",null),I([N({type:[kG],json:{write:!0}})],gp.prototype,"templates",void 0),gp=I([ke("esri.layers.support.FeatureType")],gp);const Bpe=gp;function GGe(){return{fields:{type:[wG],value:null,set:function(t){if(t&&ht("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(s=>`'${s.name}'`).join(", ");zt.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return _fe.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||zt.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return XM(this.fieldsIndex,t)}}}}const W8=()=>zt.getLogger("esri.layers.support.labelingInfo"),jGe=/\[([^[\]]+)\]/gi;function Z8(t,e,i){return t?t.map(s=>{var r;const n=new vA;if(n.read(s,i),n.labelExpression){const o=e.fields||((r=e.layerDefinition)==null?void 0:r.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(jGe,(l,u)=>`[${BGe(u,o)}]`)}return n}):null}function BGe(t,e){if(!e)return t;const i=t.toLowerCase();for(let s=0;s<e.length;s++){const n=e[s].name;if(n.toLowerCase()===i)return n}return t}const HGe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function ogt(t,e){const i=[];for(const s of t){const n=s.labelPlacement,r=HGe[e];if(!s.symbol)return W8().warn("No ILabelClass symbol specified."),[];if(!r)return W8().error(new rt("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(r.includes(n))i.push(s);else{const o=r[0];n&&W8().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const l=s.clone();l.labelPlacement=o,i.push(l)}}return i}const xb=[];function UGe(t,e){if(xpe(t.url??""))return!0;const{wkid:i}=e;for(const s of xb){if((t.version??0)>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}xb.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),xb.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),xb.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),xb.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),xb.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function YGe(t,e,i){const s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const n=await hV(s.populateFromStyle());if(Ql(i),n.ok===!1){const r=n.error;e!=null&&e.messages&&e.messages.push(new ed("renderer:style-reference",`Failed to create unique value renderer from style reference: ${r.message}`,{error:r,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function XGe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:s,title:n},r){if(!i)return null;const o=JGe({editFieldsInfo:e,fields:i,objectIdField:s},r);if(!o.length)return null;const l=tje({titleBase:n,fields:i,displayField:t}),u=eje();return new FC({title:l,content:u,fieldInfos:o})}function agt(t){var u;const{title:e,graphic:i}=t??{},{attributes:s,sourceLayer:n}=i??{},r=n&&"displayField"in n?n.displayField:null,o=r?s==null?void 0:s[r]:null,l=(u=i==null?void 0:i.getObjectId())==null?void 0:u.toString();return e||o||l||""}const WGe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):ENe(t,e);function ZGe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const s=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===s&&(t=t.slice()),i!==!0&&t.sort(KGe),t}function KGe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:HQ(t)?-1:HQ(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function JGe(t,e){const i=e==null?void 0:e.visibleFieldNames;return ZGe({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||ije,sortDisabled:e==null?void 0:e.sortDisabled}).map(s=>new BV({fieldName:s.name,isEditable:SNe(s,t),label:s.alias,format:QGe(s),visible:WGe(s,{...t,visibleFieldNames:i})}))}function QGe(t){switch(t.type){case"small-integer":case"integer":case"single":return new HT({digitSeparator:!0,places:0});case"double":return new HT({digitSeparator:!0,places:2});case"string":return XNe(t.name)?new HT({digitSeparator:!0,places:0}):void 0;default:return}}function eje(){return[new $2,new N2]}function tje(t){const e=Ahe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function HQ(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const ije=["geometry","blob","raster","guid","xml"],sje=1/255.5,ra="FeatureLayer";function A4(t,e){return new rt("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function UQ(t){return t&&t instanceof ci}const K8=GGe();function J8(t,e,i){const s=!!(i!=null&&i.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let Zt=class extends QVe(TGe(iVe($Ge(Hqe(kV(DGe(VGe(jV(zGe(zqe(Uhe(dde(bV(qqe(Dqe(Hs(GM))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=qi.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Mv(async(i,s,n)=>{const{save:r,saveAs:o}=await nt(()=>import("./featureLayerUtils-DzklkwKT.js"),__vite__mapDeps([301,113,114,238,32,95]),import.meta.url);switch(i){case nf.SAVE:return r(this,s);case nf.SAVE_AS:return o(this,n,s)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const s=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Oh).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstValidLayerId(i);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new rt("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>MVe(this,"load",e));return this.addResolvingPromise(s),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var e,i,s;((e=this.elevationInfo)==null?void 0:e.mode)==="on-the-ground"&&((i=this.renderer)==null?void 0:i.type)==="simple"&&((s=this.renderer.symbol)==null?void 0:s.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(n=>n.type==="fill"&&n.material!=null&&(!n.material.color||n.material.color.a*this.opacity<sje)&&(this.loadWarnings.push(new ed("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,i){return i=i.layerDefinition||i,Dpe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,s){return this._readEditingEnabled(i,!0,s)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,s,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return AVe(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,s,n){n!=null&&n.writeLayerSchema&&Ja(s,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return Tpe(i.layerDefinition||i)}readObjectIdField(e,i){return Ipe(i.layerDefinition||i)}get parsedUrl(){const e=vl(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=b2(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=b2(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){GZ(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,s){var r;i=i.layerDefinition||i;const n=(r=i.drawingInfo)==null?void 0:r.renderer;if(n){const o=wE(n,i,s)??void 0;return o||zt.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:s}),o}return TG(i,s)}set source(e){const i=this._get("source");i!==e&&(UQ(i)&&this._resetMemorySource(i),UQ(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ci?new Ip({layer:this,items:e}):e:null}readSource(e,i){const s=ype.fromJSON(i.featureSet);return new Ip({layer:this,items:(s==null?void 0:s.features)??[]})}readTemplates(e,i){const s=i.editFieldsInfo,n=s==null?void 0:s.creatorField,r=s==null?void 0:s.editorField;return e=e==null?void 0:e.map(o=>kG.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,r),e}readTitle(e,i){var r,o,l;const s=((r=i.layerDefinition)==null?void 0:r.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(s){const u=(l=this.portalItem)==null?void 0:l.title;if(this.sublayerTitleMode==="item-title")return this.url?Oqe(this.url,s):s;let f=s;if(!f&&this.url){const y=WC(this.url);y!=null&&(f=y.title)}return f?(this.sublayerTitleMode==="item-title-and-service-name"&&u&&u!==f&&(f=u+" - "+f),SG(f)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var s;return i.title||((s=i.layerDefinition)==null?void 0:s.name)}readTypeIdField(e,i){let s=(i=i.layerDefinition||i).typeIdField;if(s&&i.fields){s=s.toLowerCase();const n=i.fields.find(r=>r.name.toLowerCase()===s);n&&(s=n.name)}return s}readTypes(e,i){e=(i=i.layerDefinition||i).types;const s=i.editFieldsInfo,n=s==null?void 0:s.creatorField,r=s==null?void 0:s.editorField;return e==null?void 0:e.map(o=>(o=Bpe.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,r),o))}readVisible(e,i){var s;return((s=i.layerDefinition)==null?void 0:s.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const s=await uVe(this,e,i,ra);return this.lastEditsEventDate=new Date,s}async updateAttachment(e,i,s){const n=await hVe(this,e,i,s,ra);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return dVe(this,e,i)}async uploadAssets(e,i){return fVe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return XGe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await _C(nt(()=>import("./FeatureLayerSource-BkOwzc3-.js"),__vite__mapDeps([137,138,65,139,140,141,12,13,14,15,132,133,111,142,143,144,145,146,104,103,105,147,102]),import.meta.url),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=SVe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,s=bhe(this.definitionExpression,i);return e.where=s||"1=1",e}async deleteAttachments(e,i){const s=await pVe(this,e,i,ra);return this.lastEditsEventDate=new Date,s}async fetchRecomputedExtents(e){return mVe(this,e,ra)}getFeatureType(e){return NVe(this.types,this.typeIdField,e)}getFieldDomain(e,i){var u,f;const s=i==null?void 0:i.feature,n=!!((u=this.subtypes)!=null&&u.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const y=PVe(this,e);if(y)return y}const r=n&&CVe(this,s);if(r){const y=(f=r==null?void 0:r.domains)==null?void 0:f[e];return(y==null?void 0:y.type)==="inherited"?this._getLayerDomain(e):y}const o=this.getFeatureType(s),l=this._getLayerDomain(e);if(o){const y=o.domains&&o.domains[e];if(y&&(y==null?void 0:y.type)!=="inherited")return y}if(l)return l;if(!(i!=null&&i.excludeImpliedDomains)){const y=TVe(this,e);if(y)return y}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return gVe(this,e,i,ra)}async queryFeatures(e,i){const s=await this.load(),n=await s.source.queryFeatures(Hg.from(e)??s.createQuery(),i);if(n!=null&&n.features)for(const r of n.features)r.layer=r.sourceLayer=s;return n}async queryObjectIds(e,i){return yVe(this,e,i,ra)}async queryFeatureCount(e,i){return vVe(this,e,i,ra)}async queryExtent(e,i){return _Ve(this,e,i,ra)}async queryRelatedFeatures(e,i){return bVe(this,e,i,ra)}async queryRelatedFeaturesCount(e,i){return xVe(this,e,i,ra)}async queryTopFeatures(e,i){var l;const{source:s,capabilities:n}=await this.load();if(!s.queryTopFeatures||!((l=n==null?void 0:n.query)!=null&&l.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryTopFeatures capability");const r=await nt(()=>import("./TopFeaturesQuery-CMMokzjr.js"),[],import.meta.url),o=await s.queryTopFeatures(r.default.from(e),i);if(o!=null&&o.features)for(const u of o.features)u.layer=u.sourceLayer=this;return o}async queryBins(e,i){var l;const{source:s,capabilities:n}=await this.load();if(!s.queryBins||!((l=n==null?void 0:n.operations)!=null&&l.supportsQueryBins))throw new rt(ra,"Layer source does not support queryBins capability");OVe(e,n,ra);const r=await nt(()=>import("./BinsQuery-CEOfJAVZ.js"),__vite__mapDeps([302,173,12,13,14,15,174]),import.meta.url),o=await s.queryBins(r.default.from(e),i);if(o.features)for(const u of o.features)u.layer=u.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:s,capabilities:n}=await this.load();if(!s.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryTopObjectIds capability");const r=await nt(()=>import("./TopFeaturesQuery-CMMokzjr.js"),[],import.meta.url);return s.queryTopObjectIds(r.default.from(e),i)}async queryTopFeaturesExtent(e,i){var o;const{source:s,capabilities:n}=await this.load();if(!s.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryTopExtents capability");const r=await nt(()=>import("./TopFeaturesQuery-CMMokzjr.js"),[],import.meta.url);return s.queryTopExtents(r.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:s,capabilities:n}=await this.load();if(!s.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryFeatureCount capability");const r=await nt(()=>import("./TopFeaturesQuery-CMMokzjr.js"),[],import.meta.url);return s.queryTopCount(r.default.from(e),i)}read(e,i){const s=e.featureCollection;if((s||e.type==="Feature Collection")&&(this.resourceInfo=e),s){const n=s.layers;n&&n.length===1&&(super.read(n[0],i),s.showLegend!=null&&super.read({showLegend:s.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:s,layerContainerType:n,messages:r}=i;if(this.dynamicDataSource)return r==null||r.push(A4(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((s==="web-map"||s==="web-scene")&&n!=="tables")return r==null||r.push(A4(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return r==null||r.push(A4(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(s==="web-map"||s==="web-scene")&&n==="tables")return r==null||r.push(A4(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new rt(ra,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||UGe(this,e))}async save(e){return this._debouncedSaveOperations(nf.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(nf.SAVE_AS,i,e)}_readEditingEnabled(e,i,s){var r;let n=(r=e.layerDefinition)==null?void 0:r.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(s==null?void 0:s.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,s,n){var r,o;if(!e){const l=(o=(r=this.capabilities)==null?void 0:r.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Ja("layerDefinition.capabilities",l,i),s&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=l)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstValidLayerId(e){return Qs(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const s=i.data;if(s)return this.findFirstValidLayerId(s)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),GZ(this.renderer,this.fieldsIndex),Ihe(this.timeInfo,this.fieldsIndex),YGe(this,{origin:"service"})}async hasDataChanged(){return wVe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,s;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(s=this.fields)!=null&&s.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(s=>{var r;const n=(r=s.prototype)==null?void 0:r.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new rt("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new rt("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};I([N(l$e)],Zt.prototype,"attributeTableTemplate",void 0),I([At("service","capabilities")],Zt.prototype,"readCapabilities",null),I([N({json:{origins:{"web-scene":{write:!1}},write:!0}})],Zt.prototype,"charts",void 0),I([N({readOnly:!0})],Zt.prototype,"createQueryVersion",null),I([N({json:{read:{source:"layerDefinition.copyrightText"}}})],Zt.prototype,"copyright",void 0),I([N({json:{read:{source:"layerDefinition.displayField"}}})],Zt.prototype,"displayField",void 0),I([N({types:Fu,readOnly:!0})],Zt.prototype,"defaultSymbol",void 0),I([N({type:$h})],Zt.prototype,"dynamicDataSource",void 0),I([N({type:Boolean})],Zt.prototype,"editingEnabled",null),I([At(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Zt.prototype,"readEditingEnabled",null),I([At("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Zt.prototype,"readEditingEnabledFromWebMap",null),I([Ft(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Zt.prototype,"writeEditingEnabled",null),I([Ft("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Zt.prototype,"writeEditingEnabledToWebMap",null),I([N({readOnly:!0})],Zt.prototype,"effectiveEditingEnabled",null),I([N({...K8.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:J8}}}}})],Zt.prototype,"fields",void 0),I([N(K8.fieldsIndex)],Zt.prototype,"fieldsIndex",void 0),I([N({type:eqe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Zt.prototype,"formTemplate",void 0),I([N({json:{read:{source:"layerDefinition.extent"}}})],Zt.prototype,"fullExtent",void 0),I([N({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:J8,writer(t,e,i){const s=t?bF.toJSON(t):null;s&&Ja(i,s,e)}}}},read:{source:"layerDefinition.geometryType",reader:bF.read}}})],Zt.prototype,"geometryType",void 0),I([N({json:{read:{source:"layerDefinition.hasM"}}})],Zt.prototype,"hasM",void 0),I([N({json:{read:{source:"layerDefinition.hasZ"}}})],Zt.prototype,"hasZ",void 0),I([N(r$e)],Zt.prototype,"id",void 0),I([N({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Zt.prototype,"infoFor3D",void 0),I([N({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Zt.prototype,"isTable",void 0),I([At("service","isTable",["type","geometryType"]),At("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Zt.prototype,"readIsTable",null),I([Ft("web-map","isTable")],Zt.prototype,"writeIsTable",null),I([N(zV)],Zt.prototype,"labelsVisible",void 0),I([N({type:[vA],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Z8,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:Z8,write:{enabled:!0,layerContainerTypes:Xo}}},name:"layerDefinition.drawingInfo.labelingInfo",read:Z8,write:!0}})],Zt.prototype,"labelingInfo",void 0),I([N((()=>{const t=Ue(n$e);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,s){Ja(s,LV(e),i)}}},t})())],Zt.prototype,"opacity",void 0),I([N(i$e)],Zt.prototype,"legendEnabled",void 0),I([N({type:["show","hide"],json:(()=>{const t=Ue(Hhe.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Zt.prototype,"listMode",void 0),I([At("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Zt.prototype,"readGlobalIdField",null),I([N({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:J8}}}}})],Zt.prototype,"objectIdField",void 0),I([At("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Zt.prototype,"readObjectIdField",null),I([N({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Zt.prototype,"operationalLayerType",void 0),I([N(K8.outFields)],Zt.prototype,"outFields",void 0),I([N({readOnly:!0})],Zt.prototype,"parsedUrl",null),I([N({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Zt.prototype,"path",void 0),I([N(FV)],Zt.prototype,"popupEnabled",void 0),I([N({type:FC,json:{name:"popupInfo",write:!0}})],Zt.prototype,"popupTemplate",void 0),I([N({readOnly:!0})],Zt.prototype,"defaultPopupTemplate",null),I([N({types:fA,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Cze,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Xo,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Zt.prototype,"renderer",null),I([At("service","renderer",["drawingInfo.renderer","defaultSymbol"]),At("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Zt.prototype,"readRenderer",null),I([N()],Zt.prototype,"resourceInfo",void 0),I([N((()=>{const t=Ue(e$e);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Zt.prototype,"screenSizePerspectiveEnabled",void 0),I([N({clonable:!1})],Zt.prototype,"source",null),I([Sn("source")],Zt.prototype,"castSource",null),I([At("portal-item","source",["featureSet"]),At("web-map","source",["featureSet"])],Zt.prototype,"readSource",null),I([N({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Zt.prototype,"spatialReference",void 0),I([N({type:Number})],Zt.prototype,"subtypeCode",void 0),I([N({type:[kG]})],Zt.prototype,"templates",void 0),I([At("templates",["editFieldsInfo","creatorField","editorField","templates"])],Zt.prototype,"readTemplates",null),I([N({type:jpe})],Zt.prototype,"timeInfo",void 0),I([N()],Zt.prototype,"title",void 0),I([At("service","title",["name"]),At("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Zt.prototype,"readTitle",null),I([At("web-map","title",["layerDefinition.name","title"])],Zt.prototype,"readTitleFromWebMap",null),I([N({type:String})],Zt.prototype,"sublayerTitleMode",void 0),I([N({json:{read:!1}})],Zt.prototype,"type",void 0),I([N({type:String})],Zt.prototype,"typeIdField",void 0),I([At("service","typeIdField"),At("typeIdField",["layerDefinition.typeIdField"])],Zt.prototype,"readTypeIdField",null),I([N({type:[Bpe]})],Zt.prototype,"types",void 0),I([At("service","types",["types"]),At("types",["layerDefinition.types"])],Zt.prototype,"readTypes",null),I([N({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Zt.prototype,"visible",void 0),I([At("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Zt.prototype,"readVisible",null),Zt=I([ke("esri.layers.FeatureLayer")],Zt);const KC=Zt,nje=Object.freeze(Object.defineProperty({__proto__:null,default:KC},Symbol.toStringTag,{value:"Module"}));let wb=class extends Ei{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};I([N()],wb.prototype,"length",void 0),I([N()],wb.prototype,"verticalLength",void 0),I([N()],wb.prototype,"area",void 0),wb=I([ke("esri.views.interactive.sketch.Units")],wb);const p6=wb;let bA=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,s=!1){return YQ(this.range,this.min,this.max,e,i,s)}clamp(e,i=0){return Xu(e-i,this.min,this.max)+i}monotonic(e,i,s){return e<i?i:i+AF(this.range,e-i,s)}minimalMonotonic(e,i,s){return YQ(this.range,e,e+this.range,i,s)}center(e,i,s){return i=this.monotonic(e,i,s),this.normalize((e+i)/2,s)}diff(e,i,s){return this.monotonic(e,i,s)-e}shortestSignedDiff(e,i){e=this.normalize(e);const s=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(s)<Math.abs(n)?s:n}contains(e,i,s){return i=this.minimalMonotonic(e,i),(s=this.minimalMonotonic(e,s))>e&&s<i}};function YQ(t,e,i,s,n=0,r=!1){return(s-=n)<e?s+=AF(t,e-s):s>i&&(s-=AF(t,s-i)),r&&s===i&&(s=e),s+n}function AF(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const hgt=new bA(0,2*Math.PI),dgt=new bA(-Math.PI,Math.PI),rje=new bA(0,360);function oje(t,e){return{type:iv(e),value:t,unit:e}}function fgt(t){return{value:t}}function Hpe(t,e){return{type:iv(e),value:t,unit:e}}function aje(t,e){return{type:iv(e),value:t,unit:e}}function vf(t,e,i="arithmetic"){return{type:iv(e),value:t,unit:e,rotationType:i}}function pgt(t,e){const i=xA(t,e);return t.type==="angle"?vf(i,e,t.rotationType):oje(i,e)}function xA(t,e){return cn(t.value,t.unit,e)}function mgt(t,e){return t==null?e:e==null||t.value>cn(e.value,e.unit,t.unit)?t:e}function ggt(t,e){return t==null?null:{...t,value:t.value*e}}function NG(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const ygt=Hpe(0,"meters"),vgt=aje(0,"square-meters");vf(0,"radians");const _gt=vf(0,"degrees"),bgt=vf(0,"degrees","geographic");function Upe(t,e){return t[0]=e[0],t[1]=e[1],t}function $G(t,e,i){return t[0]=e,t[1]=i,t}function Ype(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Po(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Xpe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Wpe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function lje(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function cje(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function uje(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function hje(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function dje(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Zpe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Wh(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t}function JC(t,e){const i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)}function wA(t,e){const i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s}function SA(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function im(t){const e=t[0],i=t[1];return e*e+i*i}function fje(t,e){return t[0]=-e[0],t[1]=-e[1],t}function pje(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Kpe(t,e){const i=e[0],s=e[1];let n=i*i+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Yg(t,e){return t[0]*e[0]+t[1]*e[1]}function mje(t,e,i){const s=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=s,t}function OG(t,e,i,s){const n=e[0],r=e[1];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t}function gje(t,e=1){const i=2*kC()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function yje(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[2]*n,t[1]=i[1]*s+i[3]*n,t}function vje(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[2]*n+i[4],t[1]=i[1]*s+i[3]*n+i[5],t}function _je(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[3]*n+i[6],t[1]=i[1]*s+i[4]*n+i[7],t}function bje(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[4]*n+i[12],t[1]=i[1]*s+i[5]*n+i[13],t}function Jpe(t,e,i,s){const n=e[0]-i[0],r=e[1]-i[1],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l-r*o+i[0],t[1]=n*o+r*l+i[1],t}function Qpe(t,e){const i=t[0],s=t[1],n=e[0],r=e[1];let o=i*i+s*s;o>0&&(o=1/Math.sqrt(o));let l=n*n+r*r;l>0&&(l=1/Math.sqrt(l));const u=(i*n+s*r)*o*l;return u>1?0:u<-1?Math.PI:Math.acos(u)}function xje(t){return"vec2("+t[0]+", "+t[1]+")"}function DF(t,e){return t[0]===e[0]&&t[1]===e[1]}function eme(t,e){const i=t[0],s=t[1],n=e[0],r=e[1],o=oo();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(s-r)<=o*Math.max(1,Math.abs(s),Math.abs(r))}function kF(t,e,i,s,n){let r=e[0]-i[0],o=e[1]-i[1];const l=(s[0]*r+s[1]*o)*(n-1);return r=s[0]*l,o=s[1]*l,t[0]=e[0]+r,t[1]=e[1]+o,t}const wje=SA,tme=Po,Sje=Xpe,Eje=Wpe,Cje=JC,Pje=wA,Tje=im;Object.freeze(Object.defineProperty({__proto__:null,add:Ype,angle:Qpe,ceil:lje,copy:Upe,cross:mje,dist:Cje,distance:JC,div:Eje,divide:Wpe,dot:Yg,equals:eme,exactEquals:DF,floor:cje,inverse:pje,len:wje,length:SA,lerp:OG,max:hje,min:uje,mul:Sje,multiply:Xpe,negate:fje,normalize:Kpe,projectAndScale:kF,random:gje,rotate:Jpe,round:dje,scale:Zpe,scaleAndAdd:Wh,set:$G,sqrDist:Pje,sqrLen:Tje,squaredDistance:wA,squaredLength:im,str:xje,sub:tme,subtract:Po,transformMat2:yje,transformMat2d:vje,transformMat3:_je,transformMat4:bje},Symbol.toStringTag,{value:"Module"}));function vr(){return[0,0]}function Ije(t){return[t[0],t[1]]}function Bu(t,e){return[t,e]}function ime(t,e=vr()){const i=Math.min(2,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function Mje(t,e){return new Float64Array(t,e,2)}function sme(){return vr()}function nme(){return Bu(1,1)}function rme(){return Bu(1,0)}function ome(){return Bu(0,1)}const ame=sme(),Aje=nme(),Dje=rme(),lme=ome();Object.freeze(Object.defineProperty({__proto__:null,ONES:Aje,UNIT_X:Dje,UNIT_Y:lme,ZEROS:ame,clone:Ije,create:vr,createView:Mje,fromArray:ime,fromValues:Bu,ones:nme,unitX:rme,unitY:ome,zeros:sme},Symbol.toStringTag,{value:"Module"}));function sd(t){const e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function Jl(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Vn(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function Wl(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function $r(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function cme(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function ume(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function kje(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Nje(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function $je(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function Oje(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function Rje(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function Lje(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function Fje(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function zje(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function qc(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Go(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function Xg(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+s*s+n*n)}function R2(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return i*i+s*s+n*n}function EA(t){const e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function NF(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function qje(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Eo(t,e){const i=e[0],s=e[1],n=e[2];let r=i*i+s*s+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t}function Es(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gr(t,e,i){const s=e[0],n=e[1],r=e[2],o=i[0],l=i[1],u=i[2];return t[0]=n*u-r*l,t[1]=r*o-s*u,t[2]=s*l-n*o,t}function Vje(t,e,i){const s=e[0],n=e[1],r=e[2],o=i[0],l=i[1],u=i[2],f=n*u-r*l,y=r*o-s*u,_=s*l-n*o,x=Math.sqrt(f*f+y*y+_*_);return t[0]=f/x,t[1]=y/x,t[2]=_/x,t}function Cx(t,e,i,s){const n=e[0],r=e[1],o=e[2];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t[2]=o+s*(i[2]-o),t}function Gje(t,e,i,s,n,r){const o=r*r,l=o*(2*r-3)+1,u=o*(r-2)+r,f=o*(r-1),y=o*(3-2*r);return t[0]=e[0]*l+i[0]*u+s[0]*f+n[0]*y,t[1]=e[1]*l+i[1]*u+s[1]*f+n[1]*y,t[2]=e[2]*l+i[2]*u+s[2]*f+n[2]*y,t}function jje(t,e,i,s,n,r){const o=1-r,l=o*o,u=r*r,f=l*o,y=3*r*l,_=3*u*o,x=u*r;return t[0]=e[0]*f+i[0]*y+s[0]*_+n[0]*x,t[1]=e[1]*f+i[1]*y+s[1]*_+n[1]*x,t[2]=e[2]*f+i[2]*y+s[2]*_+n[2]*x,t}function Bje(t,e=1){const i=kC,s=2*i()*Math.PI,n=2*i()-1,r=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(s)*r,t[1]=Math.sin(s)*r,t[2]=n*e,t}function hme(t,e,i){const s=e[0],n=e[1],r=e[2];return t[0]=i[0]*s+i[4]*n+i[8]*r+i[12],t[1]=i[1]*s+i[5]*n+i[9]*r+i[13],t[2]=i[2]*s+i[6]*n+i[10]*r+i[14],t}function Hje(t,e,i){const s=e[0],n=e[1],r=e[2];return t[0]=s*i[0]+n*i[3]+r*i[6],t[1]=s*i[1]+n*i[4]+r*i[7],t[2]=s*i[2]+n*i[5]+r*i[8],t}function $F(t,e,i){const s=i[0],n=i[1],r=i[2],o=i[3],l=e[0],u=e[1],f=e[2],y=n*f-r*u,_=r*l-s*f,x=s*u-n*l,S=n*x-r*_,P=r*y-s*x,A=s*_-n*y,k=2*o;return t[0]=l+y*k+2*S,t[1]=u+_*k+2*P,t[2]=f+x*k+2*A,t}function Uje(t,e,i,s){const n=[],r=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),r[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function Yje(t,e,i,s){const n=[],r=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],r[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),r[1]=n[1],r[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function Xje(t,e,i,s){const n=[],r=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],r[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),r[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function Wje(t,e){Eo(XQ,t),Eo(WQ,e);const i=Es(XQ,WQ);return i>1?0:i<-1?Math.PI:Math.acos(i)}const XQ=Nt(),WQ=Nt();function Zje(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function hn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function CE(t,e){if(t===e)return!0;const i=t[0],s=t[1],n=t[2],r=e[0],o=e[1],l=e[2],u=oo();return Math.abs(i-r)<=u*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-o)<=u*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(n-l)<=u*Math.max(1,Math.abs(n),Math.abs(l))}function OF(t,e,i){const s=i[0]-e[0],n=i[1]-e[1],r=i[2]-e[2];let o=s*s+n*n+r*r;return o>0?(o=1/Math.sqrt(o),t[0]=s*o,t[1]=n*o,t[2]=r*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Zl=$r,Kje=cme,Jje=ume,Qje=Xg,eBe=R2,dme=sd,m6=EA;Object.freeze(Object.defineProperty({__proto__:null,abs:$je,add:Wl,angle:Wje,bezier:jje,ceil:kje,clamp:Fje,copy:Jl,cross:Gr,crossAndNormalize:Vje,direction:OF,dist:Qje,distance:Xg,div:Jje,divide:ume,dot:Es,equals:CE,exactEquals:hn,floor:Nje,hermite:Gje,inverse:qje,len:dme,length:sd,lerp:Cx,max:Lje,min:Rje,mul:Kje,multiply:cme,negate:NF,normalize:Eo,random:Bje,rotateX:Uje,rotateY:Yje,rotateZ:Xje,round:zje,scale:qc,scaleAndAdd:Go,set:Vn,sign:Oje,sqrDist:eBe,sqrLen:m6,squaredDistance:R2,squaredLength:EA,str:Zje,sub:Zl,subtract:$r,transformMat3:Hje,transformMat4:hme,transformQuat:$F},Symbol.toStringTag,{value:"Module"}));function fme(t,e,i,s){if(em(t.spatialReference,i)){D4[0]=t.x,D4[1]=t.y;const r=t.z;return D4[2]=r??s??0,gx(D4,t.spatialReference,0,e,i,0)}const n=k2(t,i);return!!n&&(e[0]=n==null?void 0:n.x,e[1]=n==null?void 0:n.y,e[2]=(n==null?void 0:n.z)??s??0,!0)}async function xgt(t,e,i,s,n){return await RC(t.spatialReference,i,null,n),fme(t,e,i,s)}const D4=Nt();function Af(t,e,i,s){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:s,type:"point"}}function pme(t,e,i,s,n){t.x=e,t.y=i,t.z=s,t.hasZ=s!=null,t.spatialReference=n}function Ag(t,e,i,s,n){return!(e==null||s==null||t.length<2)&&(Xw.x=t[0],Xw.y=t[1],Xw.z=t[2],Xw.spatialReference=e,fme(Xw,i,s,n))}const Xw=Af(0,0,0,qi.WGS84);function mme(t){if(!t)return null;const e=t.wkid;if(e)return S$e[e];const i=t.wkt2??t.wkt;return i?tBe(i):null}function tBe(t){const e=x$e.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const s=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(s)||isNaN(n)?null:{a:s,f:n===0?0:1/n}}function CA(t){const e=mme(t);if(iBe(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function iBe(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function k4(t,e,i){const{a:s,eSq:n}=CA(i),r=Math.sqrt(n),o=Math.sin(e[1]*dl),l=s*e[0]*dl;let u;return n>0?u=s*((1-n)*(o/(1-n*(o*o))-1/(2*r)*Math.log((1-r*o)/(1+r*o))))*.5:u=s*o,t[0]=l,t[1]=u,t}function PA(t){return w2(t)&&!!mme(t)}function wgt(t,e="square-meters"){if(t.some(o=>!PA(o.spatialReference)))throw new rt("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const l=t[o],u=l.spatialReference,{radius:f,densificationRatio:y}=CA(u),_=f*y;i.push(sBe(l,_))}const s=[],n=[0,0],r=[0,0];for(let o=0;o<i.length;o++){const{rings:l,spatialReference:u}=i[o];let f=0;for(let y=0;y<l.length;y++){const _=l[y];k4(n,_[0],u),k4(r,_[_.length-1],u);let x=r[0]*n[1]-n[0]*r[1];for(let S=0;S<_.length-1;S++)k4(n,_[S+1],u),k4(r,_[S],u),x+=r[0]*n[1]-n[0]*r[1];f+=x}f=cn(f,"square-meters",e),s.push(f/-2)}return s}function Sgt(t,e="meters"){if(!t)throw new rt("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(s=>!PA(s.spatialReference)))throw new rt("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let s=0;s<t.length;s++){const n=t[s],{spatialReference:r}=n,o=n.type==="polyline"?n.paths:n.rings;let l=0;for(let u=0;u<o.length;u++){const f=o[u];let y=0;for(let _=1;_<f.length;_++){const x=f[_-1][0],S=f[_][0],P=f[_-1][1],A=f[_][1];if(P!==A||x!==S){const k=new QC;e5(k,[x,P],[S,A],r),y+=k.distance}}l+=y}l=cn(l,"meters",e),i.push(l)}return i}function sBe(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new rt("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!PA(i))throw new rt("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const s=t.type==="polyline"?t.paths:t.rings,n=[],r=[0,0],o=new QC;for(const u of s){const f=[];n.push(f),f.push([u[0][0],u[0][1]]);let y,_,x=u[0][0],S=u[0][1];for(let P=0;P<u.length-1;P++){if(y=u[P+1][0],_=u[P+1][1],x===y&&S===_)continue;const A=[x,S];e5(o,[x,S],[y,_],i);const{azimuth:k,distance:$}=o,F=$/e;if(F>1){for(let G=1;G<=F-1;G++)mg(r,A,k,G*e,i),f.push(r.slice());mg(r,A,k,($+Math.floor(F-1)*e)/2,i),f.push(r.slice())}mg(r,A,k,$,i),f.push(r.slice()),x=r[0],S=r[1]}}const l=xC(qi,i);return t.type==="polyline"?new If({paths:n,spatialReference:l}):new Za({rings:n,spatialReference:l})}let QC=class{constructor(e=0,i=void 0,s=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=s}};function mg(t,e,i,s,n){const r=e[0],o=e[1],l=r*dl,u=o*dl,f=(i??0)*dl,{a:y,b:_,f:x}=CA(n),S=Math.sin(f),P=Math.cos(f),A=(1-x)*Math.tan(u),k=1/Math.sqrt(1+A*A),$=A*k,F=Math.atan2(A,P),G=k*S,V=G*G,B=1-V,W=B*(y*y-_*_)/(_*_),J=1+W/16384*(4096+W*(W*(320-175*W)-768)),re=W/1024*(256+W*(W*(74-47*W)-128));let se,oe,pe,ce,ue=s/(_*J),ne=2*Math.PI;for(;Math.abs(ue-ne)>1e-12;)pe=Math.cos(2*F+ue),se=Math.sin(ue),oe=Math.cos(ue),ce=re*se*(pe+re/4*(oe*(2*pe*pe-1)-re/6*pe*(4*se*se-3)*(4*pe*pe-3))),ne=ue,ue=s/(_*J)+ce;const de=$*se-k*oe*P,Se=Math.atan2($*oe+k*se*P,(1-x)*Math.sqrt(V+de*de)),Pe=Math.atan2(se*S,k*oe-$*se*P),Re=x/16*B*(4+x*(4-3*B)),Oe=Se/dl,we=(l+(Pe-(1-Re)*x*G*(ue+Re*se*(pe+Re*oe*(2*pe*pe-1)))))/dl;return t[0]=we,t[1]=Oe,t}function e5(t,e,i,s){const n=e[0]*dl,r=e[1]*dl,o=i[0]*dl,l=i[1]*dl,{a:u,b:f,f:y,radius:_}=CA(s),x=o-n,S=Math.atan((1-y)*Math.tan(r)),P=Math.atan((1-y)*Math.tan(l)),A=Math.sin(S),k=Math.cos(S),$=Math.sin(P),F=Math.cos(P);let G,V,B,W,J,re,se,oe,pe,ce,ue=1e3,ne=x;do{if(se=Math.sin(ne),oe=Math.cos(ne),B=Math.sqrt(F*se*(F*se)+(k*$-A*F*oe)*(k*$-A*F*oe)),B===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;J=A*$+k*F*oe,re=Math.atan2(B,J),pe=k*F*se/B,V=1-pe*pe,W=J-2*A*$/V,isNaN(W)&&(W=0),ce=y/16*V*(4+y*(4-3*V)),G=ne,ne=x+(1-ce)*y*pe*(re+ce*B*(W+ce*J*(2*W*W-1)))}while(Math.abs(ne-G)>1e-12&&--ue>0);if(ue===0){const we=_,Fe=Math.acos(Math.sin(r)*Math.sin(l)+Math.cos(r)*Math.cos(l)*Math.cos(o-n))*we,it=o-n,vt=Math.sin(it)*Math.cos(l),ot=Math.cos(r)*Math.sin(l)-Math.sin(r)*Math.cos(l)*Math.cos(it),ut=Math.atan2(vt,ot);return t.azimuth=ut/dl,t.distance=Fe,t.reverseAzimuth=void 0,t}const de=V*(u*u-f*f)/(f*f),Se=de/1024*(256+de*(de*(74-47*de)-128)),Pe=f*(1+de/16384*(4096+de*(de*(320-175*de)-768)))*(re-Se*B*(W+Se/4*(J*(2*W*W-1)-Se/6*W*(4*B*B-3)*(4*W*W-3)))),Re=Math.atan2(F*Math.sin(ne),k*$-A*F*Math.cos(ne)),Oe=Math.atan2(k*Math.sin(ne),k*$*Math.cos(ne)-A*F);return t.azimuth=Re/dl,t.distance=Pe,t.reverseAzimuth=Oe/dl,t}function g6(t){return PA(t)?t:td(t)?qi.WGS84:null}var so;function RG(t,e){if(t==null||e==null)return;const i=RF(t,e);return i!=null?vf(i,"radians","geographic"):void 0}(function(t){t.Absolute="absolute",t.Relative="relative",t.RelativeBilateral="relative-bilateral"})(so||(so={}));const RF=(()=>{const t=Nt(),e=Nt();return(i,s)=>(Vn(t,i.x,i.y,i.z??0),Vn(e,s.x,s.y,s.z??0),nBe(t,e,i.spatialReference,s.spatialReference))})(),nBe=(()=>{const t=vr(),e=Nt(),i=Nt();return(s,n,r,o)=>{if(hn(s,n))return;const l=g6(r),u=g6(o);if(l&&u&&Jo(l,u)&&Ag(s,r,e,l)&&Ag(n,o,i,u)){const{azimuth:y}=e5(aBe,e,i,l);return y!=null?cn(y,"degrees","radians"):void 0}t[0]=n[0]-s[0],t[1]=n[1]-s[1];let f=Qpe(lme,t);return t[0]<0&&(f=lBe-f),f}})();function Cgt(t,e,i,s=so.Absolute){if(e&&i)switch(s){case so.Absolute:return RG(e,i);case so.Relative:return KQ(ZQ(t,e,i),so.Relative);case so.RelativeBilateral:return KQ(ZQ(t,e,i),so.RelativeBilateral)}}function ZQ(t,e,i){if(!t||!e||!i)return;const s=RF(t,e),n=RF(e,i);return s!=null&&n!=null?vf(n-s,"radians","geographic"):void 0}function KQ(t,e){if(t!=null)switch(e){case so.Absolute:return rBe(t);case so.Relative:{const i=_f(t);let s=JQ.normalize(i,0,!0);return s===-180&&(s=180),vf(s,"degrees","geographic")}case so.RelativeBilateral:{const i=_f(t),s=Math.abs(JQ.normalize(i,0,!0));return vf(s,"degrees","geographic")}}}function rBe(t){const e=_f(t),i=cBe.normalize(e,0,!0);return vf(i,"degrees","geographic")}const oBe=(()=>{const t=Nt();return(e,i,s,n,r,o="geodesic")=>{Jl(t,i);const l=_f(r);if(o==="geodesic"){const S=g6(s);if(S&&Ag(t,s,t,S))return mg(e,t,l,n,S),e[2]=i[2],!!Ag(e,S,e,s)}const u=NG(l,"geographic","arithmetic"),f=cn(u,"degrees","radians"),y=i[0]+n*Math.cos(f),_=i[1]+n*Math.sin(f),x=i[2];return Vn(e,y,_,x),!0}})();function _f(t){if(t!=null)return NG(gme(t),t.rotationType,"geographic")}function Pgt(t){if(t!=null)return NG(gme(t),t.rotationType,"arithmetic")}function gme(t){return cn(t.value,t.unit,"degrees")}const aBe=new QC,lBe=2*Math.PI,cBe=rje,JQ=new bA(-180,180);let A0=class extends Ei{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?so.RelativeBilateral:so.Relative;case"absolute":return so.Absolute}}get displayUnits(){return this._get("displayUnits")??new p6}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new p6}set inputUnits(e){this._set("inputUnits",e)}};I([N({type:String,nonNullable:!0})],A0.prototype,"directionMode",void 0),I([N({type:Boolean,nonNullable:!0})],A0.prototype,"relativeDirectionIsBilateral",void 0),I([N()],A0.prototype,"effectiveDirectionMode",null),I([N({type:p6,nonNullable:!0})],A0.prototype,"displayUnits",null),I([N({type:p6,nonNullable:!0})],A0.prototype,"inputUnits",null),A0=I([ke("esri.views.interactive.sketch.SketchValueOptions")],A0);const TA=A0;let DI=class extends ci{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ci.ofType(this.itemType.Type))(e):new ci(e)}};function uBe(t,e){return{type:t,cast:fde,set(i){const s=QM(i,this._get(e),t);s.owner=this,this._set(e,s)}}}I([N()],DI.prototype,"owner",null),DI=I([ke("esri.core.support.OwningCollection")],DI);let jS=class extends DI{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};I([dV({Type:tm,ensureType:Ko(tm)})],jS.prototype,"itemType",void 0),jS=I([ke("esri.support.GraphicsCollection")],jS);let yp=class extends kV(jV(GM)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new jS,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};I([N({type:zhe})],yp.prototype,"elevationInfo",void 0),I([N(uBe(jS,"graphics"))],yp.prototype,"graphics",void 0),I([N({type:["show","hide"]})],yp.prototype,"listMode",void 0),I([N()],yp.prototype,"screenSizePerspectiveEnabled",void 0),I([N({readOnly:!0})],yp.prototype,"type",void 0),I([N({constructOnly:!0})],yp.prototype,"internal",void 0),yp=I([ke("esri.layers.GraphicsLayer")],yp);const Wg=yp,hBe=Object.freeze(Object.defineProperty({__proto__:null,default:Wg},Symbol.toStringTag,{value:"Module"}));function QQ(t){switch(t){case _n.SUPPORTED:break;case _n.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case _n.GEOMETRY_MISSING:return"no geometry";case _n.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case _n.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case _n.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var _n;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(_n||(_n={}));function yme(t){return t?Dg:bBe}function dBe(t,e){return e!=null&&e.mode?e.mode:yme(t).mode}function vme(t,e){return e??yme(t)}function _me(t,e){return dBe(t==null||(t.hasZ??!1),e)}function Dgt(t,e){return vme(t==null||(t.hasZ??!1),e)}function fBe(t){const e=bme(t);return _me(t.geometry,e)}function pBe(t){const e=bme(t),i=_me(t.geometry,e),s=e!=null&&i!=="on-the-ground"?_Be(e):0,n=e==null?void 0:e.featureExpressionInfo;return{mode:i,offset:s,featureExpressionInfo:n}}function mBe(t){return IA(pBe(t))}function kgt(t){return IA(t)||gBe(t)}function gBe(t){var e;return((e=t==null?void 0:t.featureExpressionInfo)==null?void 0:e.expression)==="0"}function IA(t){if(!t||t.mode==="on-the-ground")return!1;const e=t!=null&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function bme(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function LG(t,e){if(!(t!=null&&t.offset))return 0;const{offset:i,unit:s}=t;if(s==="decimal-degrees")return 0;const n=s!=="unknown"&&s?s:"meters",r=ele(e);return r?cn(i,n,r):0}function y6(t,e,i){if(!(i!=null&&i.mode))return;const s=t.hasZ?t.z:0,n=LG(i,t.spatialReference);switch(i.mode){case"absolute-height":return s-n;case"on-the-ground":return 0;case"relative-to-ground":return s-((e.elevationProvider.getElevation(t.x,t.y,s,t.spatialReference,"ground")??0)+n);case"relative-to-scene":return s-((e.elevationProvider.getElevation(t.x,t.y,s,t.spatialReference,"scene")??0)+n)}}function FG(t,e,i,s=null){return MA(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,s)}function xme(t,e,i,s,n=null){return MA(t,e[0],e[1],e.length>2?e[2]:0,i,s,n)}function MA(t,e,i,s,n,r,o=null){if(r==null)return;const l=o!=null?o.mode:"absolute-height";if(l==="on-the-ground")return 0;const{absoluteZ:u}=yBe(e,i,s,n,t,r);return vBe(u,e,i,s,n,t,o,l)}function yBe(t,e,i,s,n,r){const o=LG(r,s);switch(r.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const l=n.elevationProvider.getElevation(t,e,0,s,"ground")??0;return{absoluteZ:l,elevation:l}}case"relative-to-ground":{const l=n.elevationProvider.getElevation(t,e,i,s,"ground")??0;return{absoluteZ:i+l+o,elevation:l}}case"relative-to-scene":{const l=n.elevationProvider.getElevation(t,e,i,s,"scene")??0;return{absoluteZ:i+l+o,elevation:l}}}}function vBe(t,e,i,s,n,r,o,l){const u=LG(o,n);switch(l){case"absolute-height":return t-u;case"relative-to-ground":return t-((r.elevationProvider.getElevation(e,i,s,n,"ground")??0)+u);case"relative-to-scene":return t-((r.elevationProvider.getElevation(e,i,s,n,"scene")??0)+u)}}function Ngt(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function $gt(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function Ogt(t,e,i){return(i==null?void 0:i.mode)===e?`${t} do not support ${e} elevation mode`:null}function Rgt(t,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function Lgt(t,e){e&&t.warn(".elevationInfo=",e)}function _Be(t){return((t==null?void 0:t.offset)??0)*WNe(t==null?void 0:t.unit)}const Dg={mode:"absolute-height",offset:0},bBe={mode:"on-the-ground",offset:null};function xBe(t){var s,n;if(t.graphic&&((s=t.graphic.layer)==null?void 0:s.type)!=="graphics")return _n.GRAPHICS_LAYER_MISSING;const e=(n=t.operations)==null?void 0:n.data.type;if(!e)return _n.GEOMETRY_TYPE_UNSUPPORTED;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return _n.GEOMETRY_TYPE_UNSUPPORTED}const i=t.elevationInfo;return IA(i)?_n.ELEVATION_MODE_UNSUPPORTED:_n.SUPPORTED}function wBe(t){return SBe(t).result}function SBe(t){var s;if(t.graphic&&((s=t.graphic.layer)==null?void 0:s.type)!=="graphics")return{result:_n.GRAPHICS_LAYER_MISSING};if(!t.operations)return{result:_n.GEOMETRY_MISSING};if(IA(t.elevationInfo))return{result:_n.ELEVATION_MODE_UNSUPPORTED};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:_n.SUPPORTED,geometry:i}:{result:_n.GEOMETRY_TYPE_UNSUPPORTED}}function EBe(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return _n.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return _n.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return _n.SUPPORTED;default:return _n.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some(s=>s.type==="object")?_n.SYMBOL_TYPE_UNSUPPORTED:fBe(t)!=="on-the-ground"&&mBe(t)?_n.ELEVATION_MODE_UNSUPPORTED:_n.SUPPORTED}function eee(t,e,i){if(!e||!(t!=null&&t.map))return;const{map:s}=t;s.layers.find(r=>r===e)||s.add(e,i)}function tee(t,e){const i=(e==null?void 0:e.type)==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(s=>{const n=s.layer;return n===i||"sublayers"in n&&n.sublayers!=null&&n.sublayers.includes(i)})}const wme=ht("mac")?"Meta":"Control",CBe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),PBe=t=>CBe.has(t);let TBe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}},Sme=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,s){let n;typeof i=="function"?(s=i,n=[]):n=i||[];const r=typeof e=="string"?new TBe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=y=>{const _=this._incoming[y.match.eventType];if(_){const x=_.indexOf(y);_.splice(x,1),o(),this._manager&&this._manager.updateDependencies()}},u=new IBe(r,s,{onPause:l,onRemove:l,onResume:y=>{const _=this._incoming[y.match.eventType];_&&!_.includes(y)&&(_.push(y),o(),this._manager&&this._manager.updateDependencies())}});let f=this._incoming[r.eventType];return f||(f=[],this._incoming[r.eventType]=f),f.push(u),o(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new MBe(e,{onEmit:(s,n,r,o)=>{var l;(l=this._manager)==null||l.emit(s.eventType,n,r,o)},onRemove:s=>{var n;delete this._outgoing[s.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var s;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((s=n.callback)==null||s.call(n,e),e.shouldStopPropagation()))break}}},IBe=class{constructor(e,i,s){this.match=e,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},MBe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,s){this._removed||this._handler.onEmit(this,e,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},ABe=class extends Sme{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:n}=e;i===this._value&&this._x===s&&this._y===n||(this._value=i,this._x=s,this._y=n,this._onChange(i,s,n))}},DBe=class{constructor(e,i){this._observable=new IC,this._value=e,this._equalityFunction=i}get value(){return mi(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function v6(t,e=boe){return new DBe(t,e)}let kBe=class extends Sme{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=v6(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},NBe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in e){const n=e[s],r=new qoe(n,void 0,void 0,2,2);this._properties[s]={pool:r,acquired:[]}}this._afterDispatchHandle=z4e(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const s of i.acquired)KX(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),s=this._properties[e];let n=s.pool.acquire();for(s.acquired.push(n);n===i;)s.acquired.push(n),n=s.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let s=0;for(const n of i.acquired)KX(n)?i.acquired[s++]=n:i.pool.release(n);i.acquired.length=s}}},fh=class extends Ei{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=wme,this._latestPointerType="mouse",this._propertiesPool=new NBe({latestPointerLocation:RBe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,s=sr.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(r=>({handler:r,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let r=n.handlers.length-1;r>=0;r--){const o=n.handlers[r];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,u,f,y,_)=>{this._emitInputEvent(o.priorityIndex+1,l,u,f,_,y)},setPointerCapture:(l,u)=>{this._setPointerCapture(n,o,l,u)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(s=>{var n;s.removed=!0,(n=s.uninstallCallback)==null||n.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):zt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const n=this._handlers[s];n.priorityIndex=s,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const n=this._handlersPriority[s];n.priorityIndex=s;let r=n.handler.hasSideEffects;if(!r){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){r=!0;break}}if(r)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const l of o.keyModifiers)PBe(l)||i.add(l)}n.active=r}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,s){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==s){const r=this._propertiesPool.get("latestPointerLocation");r.x=i,r.y=s,this._set("latestPointerLocation",r)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const r=i;this._pointerCaptures.delete(r.native.pointerId)}this._updateKeyModifiers(e,i);const s=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,s,n)}_updateKeyModifiers(e,i){if(!i)return;let s=!1;const n=()=>{s||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),s=!0)},r=(l,u)=>{u&&!this._activeKeyModifiers.has(l)?(n(),this._activeKeyModifiers.add(l)):!u&&this._activeKeyModifiers.has(l)&&(n(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=i.key;this._keyModifiers.has(l)&&r(l,e==="key-down")}const o=i.native;r("Alt",!!(o!=null&&o.altKey)),r("Control",!!(o!=null&&o.ctrlKey)),r("Ctrl",!!(o!=null&&o.ctrlKey)),r("Shift",!!(o!=null&&o.shiftKey)),r("Meta",!!(o!=null&&o.metaKey)),r("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ABe((e,i,s)=>this._setLatestPointer(e,i,s)),this._multiTouchHandler=new kBe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],sr.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,sr.INTERNAL)}_setPointerCapture(e,i,s,n){const r=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,o),n?(o.add(r),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):o.has(r)&&(o.delete(r),o.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,s,n){this._emitInputEvent(0,e,i,s,n)}_emitInputEvent(e,i,s,n,r,o){const l=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),u=r!==void 0&&r,f={event:new $Be(i,s,l,o||this._activeKeyModifiers,u),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(f):this._doNewPropagation(f)}_doNewPropagation(e){this._currentPropagation={events:new iF,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,s,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:r,priorityIndex:o}=e.events.pop(),l=(i=r.data)==null?void 0:i.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((n=(s=e.currentHandler).eventCallback)==null||n.call(s,r)),r.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new iF;i.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)i.push(s.events.pop());s.events=i,s.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(s.eventType!==n.eventType)continue;const r=s.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(r.length===s.keyModifiers.length!=(r.length===n.keyModifiers.length))return s.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const s of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(s,i[n])>=0;)n++;i.splice(n,0,s)}return i}get debug(){const e=i=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=s};return{injectEvent:(i,s)=>{e(()=>this._onEventReceived(i,s))},disablePointerCapture:e}}};I([N({readOnly:!0})],fh.prototype,"hasPendingInputs",null),I([N({constructOnly:!0})],fh.prototype,"eventSource",void 0),I([N({constructOnly:!0})],fh.prototype,"recognizers",void 0),I([N()],fh.prototype,"_latestPointerType",void 0),I([N()],fh.prototype,"latestPointerType",null),I([N()],fh.prototype,"multiTouchActive",null),I([N({readOnly:!0})],fh.prototype,"latestPointerLocation",void 0),I([N()],fh.prototype,"_paused",void 0),I([N({readOnly:!0})],fh.prototype,"updating",null),fh=I([ke("esri.views.input.InputManager")],fh);let $Be=class{constructor(e,i,s,n,r){this.type=e,this.data=i,this.timestamp=s,this.modifiers=n,this.cancelable=r,this._propagationState=j0.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=j0.STOPPED}shouldStopPropagation(){return!!(this._propagationState&j0.STOPPED)}async(e){this._propagationState|=j0.PAUSED;const i=(s,n)=>{this._propagationState&=~j0.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),n)throw s;return s};return(typeof e=="function"?e():e).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&j0.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var j0;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(j0||(j0={}));const sr={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let OBe=class{};const RBe=OBe,LBe="z",FBe="r",Fn={redo:FBe,undo:LBe,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},iee={toggle:"Control"},Wgt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Zgt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:wme,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Kgt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,s=>{s.type==="key-down"&&i(s)})}addToggle(e,i){const s=zBe.fromDefinition(e,i),n=Iq(this._bindings,s.key,()=>[]);return n.push(s),ds(()=>gM(n,s))}register(e,i=sr.WIDGET){return pm([e.on("key-down",s=>this.dispatch(e.inputManager,s),i),e.on("key-up",s=>this.dispatch(e.inputManager,s),i)])}dispatch(e,i){const s=i.key,n=this._bindings.get(s);if(n)for(const r of n)r.process(e,i)}},zBe=class LF{constructor(e,i,s,n,r){this.key=e,this.modifiers=i,this.repeats=s,this.continuePropagation=n,this.callback=r}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const s of this.modifiers)if(!e.isModifierKeyDown(s))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new LF(e,[],!1,!1,i);const{key:s,modifier:n,repeats:r,continuePropagation:o}=e;return new LF(s,n?Array.isArray(n)?n:[n]:[],!!r,!!o,i)}},kI=class extends Ei{constructor(e){super(e),this.enabled=!1}};I([N({type:Boolean,nonNullable:!0})],kI.prototype,"enabled",void 0),kI=I([ke("esri.views.interactive.sketch.SketchLabelOptions")],kI);const t5=kI;let BS=class extends Ei{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};I([N({type:String,nonNullable:!0})],BS.prototype,"mode",void 0),BS=I([ke("esri.views.interactive.sketch.SketchTooltipElevationOptions")],BS);let za=class extends Ei{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};I([N({type:Boolean,nonNullable:!0})],za.prototype,"area",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"coordinates",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"direction",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"distance",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"elevation",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"header",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"helpMessage",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"orientation",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"radius",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"rotation",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"scale",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"size",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"totalLength",void 0),za=I([ke("esri.views.interactive.sketch.SketchTooltipVisibleElements")],za);const Eme=za;let ll=class extends Ei{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new BS,this.placement="auto",this.offset=null,this.visibleElements=new Eme,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};I([N({type:Boolean,nonNullable:!0})],ll.prototype,"enabled",void 0),I([N()],ll.prototype,"forceEnabled",void 0),I([N()],ll.prototype,"effectiveEnabled",null),I([N()],ll.prototype,"helpMessage",void 0),I([N()],ll.prototype,"helpMessageIcon",void 0),I([N({type:Boolean,nonNullable:!0})],ll.prototype,"inputEnabled",void 0),I([N({type:BS,nonNullable:!0})],ll.prototype,"elevation",void 0),I([N()],ll.prototype,"placement",void 0),I([N()],ll.prototype,"offset",void 0),I([N({type:Eme,nonNullable:!0})],ll.prototype,"visibleElements",void 0),I([N()],ll.prototype,"visualVariables",void 0),I([N()],ll.prototype,"xyMode",void 0),ll=I([ke("esri.views.interactive.sketch.SketchTooltipOptions")],ll);const zG=ll;let Sb=class extends Ei{constructor(e){super(e),this.labels=new t5,this.tooltips=new zG,this.values=new TA}};I([N({nonNullable:!0,type:t5})],Sb.prototype,"labels",void 0),I([N({nonNullable:!0,type:zG})],Sb.prototype,"tooltips",void 0),I([N({nonNullable:!0,type:TA})],Sb.prototype,"values",void 0),Sb=I([ke("esri.views.interactive.sketch.SketchOptions")],Sb);const AA=Sb;var pv;function Cme(t,e,i){return To(t,e,i)}function To(t=0,e=0,i=0){return _l(t,e,i)}function n1t(t){return t}function r1t(t){return t}function kg(t,e,i){return _l(t,e,i)}function L2(t){const[e,i,s]=t;return t.length>3?[e,i,s,t[3]]:[e,i,s]}function Q8(t){return t[3]=((t.length>3?t[3]:void 0)??pv.NONE)|pv.TARGET,t}function o1t(t){return!!(((t.length>3?t[3]:void 0)??pv.NONE)&pv.TARGET)}function see(t,e,{coordinateHelper:i,elevationInfo:s},n){return t?og(i.vectorToDehydratedPoint(t,qBe),e,s,n):null}function og(t,e,i,s=To()){return s[0]=t.x,s[1]=t.y,s[2]=t.z??0,e==null||(e.type==="2d"?s[2]=0:s[2]=FG(e,t,i,Dg)??0),s}function a1t(t,e,i){return i?(pme(i,t[0],t[1],t[2],e),i):Af(t[0],t[1],t[2],e)}function FF(t,e,{z:i,m:s},n,r){const{spatialReference:o,elevationInfo:l}=n;let u;i==null&&s==null?u=void 0:e==null||e.type==="2d"?u=i??void 0:u=xme(e,t,o,Dg,l)??0;const[f,y]=t;return r?pme(r,f,y,u,o):r=Af(f,y,u,o),s!=null&&(r.m=s,r.hasM=!0),r}function l1t(t,e,i,s,n=To()){const[r,o]=t;return n[0]=r,n[1]=o,t.length>3&&(n[3]=t[3]??pv.NONE),(i==null?void 0:i.type)!=="3d"?(n[2]=e.value,n):(n[2]=MA(i,r,o,e.value,s,e.elevationInfo,Dg)??0,n)}(function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"})(pv||(pv={}));const qBe=Af(0,0,0,null);let Bh=class extends wt{constructor(){super(...arguments),this.enabled=!0}};I([N({type:Boolean})],Bh.prototype,"enabled",void 0),Bh=I([ke("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],Bh);let Ln=class extends wt{constructor(e){super(e),this.lineSnapper=new Bh,this.parallelLineSnapper=new Bh,this.rightAngleSnapper=new Bh,this.rightAngleTriangleSnapper=new Bh,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new fi([255,127,0]),this.orangeTransparent=new fi([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};I([N({type:Bh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"lineSnapper",void 0),I([N({type:Bh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"parallelLineSnapper",void 0),I([N({type:Bh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"rightAngleSnapper",void 0),I([N({type:Bh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"rightAngleTriangleSnapper",void 0),I([N({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Ln.prototype,"shortLineThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Ln.prototype,"distance",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"pointThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"intersectionParallelLineThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"parallelLineThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Ln.prototype,"verticalLineThresholdMeters",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"touchSensitivityMultiplier",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"pointOnLineThreshold",void 0),I([N({type:fi,nonNullable:!0})],Ln.prototype,"orange",void 0),I([N({type:fi,nonNullable:!0})],Ln.prototype,"orangeTransparent",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"lineHintWidthReference",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"lineHintWidthTarget",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Ln.prototype,"lineHintFadedExtensions",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"parallelLineHintWidth",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Ln.prototype,"parallelLineHintLength",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Ln.prototype,"parallelLineHintOffset",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Ln.prototype,"rightAngleHintSize",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Ln.prototype,"rightAngleHintOutlineSize",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Ln.prototype,"satisfiesConstraintScreenThreshold",void 0),Ln=I([ke("esri.views.interactive.snapping.Settings.Defaults")],Ln);const _6=new Ln;var Wa;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Wa||(Wa={}));let D0=class extends Ei{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new ci}};I([N({constructOnly:!0})],D0.prototype,"layer",void 0),I([N()],D0.prototype,"enabled",void 0),I([N()],D0.prototype,"updating",void 0),I([N()],D0.prototype,"availability",void 0),I([N()],D0.prototype,"sublayerSources",void 0),D0=I([ke("esri.views.interactive.snapping.FeatureSnappingLayerSource")],D0);const qG=D0;let Lo=class extends Ei{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new ci,this.distance=_6.distance,this.touchSensitivityMultiplier=_6.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var u;const e=this.featureSources;e.some(nee)&&zt.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(GBe),s=((u=this._get("_effectiveFeatureSources"))==null?void 0:u.filter(nee))??new ci;for(const f of i){const y=s.find(_=>_.layer===f.layer.parent);if(y)y.sublayerSources.includes(f)||y.sublayerSources.add(f);else if(f.layer.parent){const _=new qG({layer:f.layer.parent});_.sublayerSources.add(f),s.add(_)}}for(const f of s){const y=f.sublayerSources.filter(_=>!i.includes(_));f.sublayerSources.removeMany(y)}s.removeMany(s.filter(f=>f.sublayerSources.length===0));const n=e.filter(VBe),r=this._get("_effectiveFeatureSources")??new ci,{added:o,removed:l}=CPe(r.toArray(),[...n,...s]);return r.removeMany(l),r.addMany(o),r}};I([N()],Lo.prototype,"enabled",void 0),I([N()],Lo.prototype,"enabledToggled",void 0),I([N()],Lo.prototype,"forceDisabled",void 0),I([N()],Lo.prototype,"selfEnabled",void 0),I([N()],Lo.prototype,"featureEnabled",void 0),I([N()],Lo.prototype,"gridEnabled",void 0),I([N()],Lo.prototype,"attributeRulesEnabled",void 0),I([N({type:ci.ofType(qG)})],Lo.prototype,"featureSources",void 0),I([N()],Lo.prototype,"distance",void 0),I([N()],Lo.prototype,"touchSensitivityMultiplier",void 0),I([N({readOnly:!0})],Lo.prototype,"effectiveEnabled",null),I([N({readOnly:!0})],Lo.prototype,"effectiveGridEnabled",null),I([N({readOnly:!0})],Lo.prototype,"effectiveSelfEnabled",null),I([N({readOnly:!0})],Lo.prototype,"effectiveFeatureEnabled",null),I([N({readOnly:!0})],Lo.prototype,"_effectiveFeatureSources",null),Lo=I([ke("esri.views.interactive.snapping.SnappingOptions")],Lo);const i5=Lo;function nee(t){return t.layer.type==="subtype-group"}function VBe(t){return t.layer.type!=="subtype-group"}function GBe(t){return t.layer.type==="subtype-sublayer"}let jBe=class extends vfe{constructor(e,i){super(e,i,"webmap")}};function BBe(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const p1t=new jBe(2,32),m1t=Symbol("grid-placement-graphic");function Pme(t,e){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s}function g1t(t,e){return Math.sqrt(Pme(t,e))}function HBe(t,e){e.sort((i,s)=>R2(i.targetPoint,t)-R2(s.targetPoint,t))}var Zu;function y1t({point:t,distance:e,returnEdge:i,vertexMode:s,coordinateHelper:{spatialReference:n},filter:r},o,l){return l=l!=null?l.clone():new Hg({where:"1=1"}),r&&(l.geometry=r.geometry,l.distance=r.distance,l.spatialRelationship=r.spatialRelationship,l.where=bhe(l.where,r.where),l.timeExtent=QDe(l.timeExtent,r.timeExtent),l.objectIds=UBe(l.objectIds,r.objectIds)),{point:Af(t[0],t[1],t[2],n.toJSON()),mode:o,distance:e,returnEdge:i,vertexMode:s,query:l.toJSON()}}function UBe(t,e){return t||e?e?t?Array.from(Yoe(new Set(t),new Set(e))):e:t:null}function v1t(t,e,i){return{left:see(t.leftVertex.pos,e,i),right:see(t.rightVertex.pos,e,i)}}function _1t(t){return t.createQuery()}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Zu||(Zu={}));const ree=Symbol("snapping-toggle");function Tme(t,e=()=>{}){const i=xi(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:s,snappingOptions:n})=>{if(t.removeHandles(ree),!s||!n)return;const r=sr.TOOL,o=[s.on("key-down",l=>{l.key!==iee.toggle||l.repeat||(n.enabledToggled=!0,e())},r),s.on("key-up",l=>{l.key===iee.toggle&&(n.enabledToggled=!1,e())},r),s.on("pointer-move",l=>{const u=l.native.ctrlKey;n.enabledToggled!==u&&(n.enabledToggled=u,e())},r)];t.addHandles(o,ree)},ec);t.addHandles(i)}function b1t(t){var e;return BBe(t)&&"utilityNetworks"in t&&!!((e=t.utilityNetworks)!=null&&e.length)}function x1t(t,e,i){const s=Es(t,e)/Es(t,t);return qc(i,t,s)}function HS(t,e){return Es(t,e)/sd(t)}function Ime(t,e){const i=Es(t,e)/(sd(t)*sd(e));return-xV(i)}function w1t(t,e,i){Eo(N4,t),Eo(eN,e);const s=Es(N4,eN),n=xV(s),r=Gr(N4,N4,eN);return Es(r,i)<0?2*Math.PI-n:n}const N4=Nt(),eN=Nt();function DA(){return[1,0,0,0,1,0,0,0,1]}function YBe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function XBe(t,e,i,s,n,r,o,l,u){return[t,e,i,s,n,r,o,l,u]}function WBe(t,e){return new Float64Array(t,e,9)}const ZBe=DA();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:ZBe,clone:YBe,create:DA,createView:WBe,fromValues:XBe},Symbol.toStringTag,{value:"Module"}));function VG(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function KBe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function JBe(t,e,i,s,n,r,o,l,u,f,y,_,x,S,P,A){return[t,e,i,s,n,r,o,l,u,f,y,_,x,S,P,A]}function QBe(t,e){return new Float64Array(t,e,16)}const eHe=VG();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:eHe,clone:KBe,create:VG,createView:QBe,fromValues:JBe},Symbol.toStringTag,{value:"Module"}));function mv(){return[0,0,0,1]}function tHe(t){return[t[0],t[1],t[2],t[3]]}function iHe(t,e,i,s){return[t,e,i,s]}const sHe=mv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:sHe,clone:tHe,create:mv,fromValues:iHe},Symbol.toStringTag,{value:"Module"}));let Px=class dy{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&_2(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new dy(vr)}static createVec3f64(){return new dy(Nt)}static createVec4f64(){return new dy(vm)}static createMat3f64(){return new dy(DA)}static createMat4f64(){return new dy(VG)}static createQuatf64(){return new dy(mv)}get test(){}};const S1t=Px.createVec2f64(),Wo=Px.createVec3f64(),nHe=Px.createVec4f64();Px.createMat3f64();const rHe=Px.createMat4f64(),E1t=Px.createQuatf64();function C1t(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],s=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}function P1t(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),s=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),n=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return Vn(t,i,s,n),t}function GG(t,e,i){Math.abs(t[0])>Math.abs(t[1])?Vn(e,0,1,0):Vn(e,1,0,0),Gr(i,t,e),Gr(e,i,t),Eo(i,i),Eo(e,e)}function el(t=nS){return[t[0],t[1],t[2],t[3]]}function T1t(t=nS[0],e=nS[1],i=nS[2],s=nS[3]){return Mme(t,e,i,s,nHe.get())}function NI(t,e){return Mme(e[0],e[1],e[2],e[3],t)}function I1t(t){return t}function Mme(t,e,i,s,n=el()){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n}function Tx(t,e,i){const s=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.abs(s-1)>1e-5&&s>1e-12?1/Math.sqrt(s):1;return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function Ame(t,e,i,s=el()){const n=i[0]-e[0],r=i[1]-e[1],o=i[2]-e[2],l=t[0]-e[0],u=t[1]-e[1],f=t[2]-e[2],y=r*f-o*u,_=o*l-n*f,x=n*u-r*l,S=y*y+_*_+x*x,P=Math.abs(S-1)>1e-5&&S>1e-12?1/Math.sqrt(S):1;return s[0]=y*P,s[1]=_*P,s[2]=x*P,s[3]=-(s[0]*t[0]+s[1]*t[1]+s[2]*t[2]),s}function Dme(t,e,i,s=0,n=Math.floor(i*(1/3)),r=Math.floor(i*(2/3))){if(i<3)return!1;e(Ww,s);let o=n,l=!1;for(;o<i-1&&!l;)e(N_,o),o++,l=!hn(Ww,N_);if(!l)return!1;for(o=Math.max(o,r),l=!1;o<i&&!l;)e(Sy,o),o++,$r($4,Ww,N_),Eo($4,$4),$r(O4,N_,Sy),Eo(O4,O4),l=!hn(Ww,Sy)&&!hn(N_,Sy)&&Math.abs(Es($4,O4))<oHe;return l?(Ame(Ww,N_,Sy,t),!0):(s!==0||n!==1||r!==2)&&Dme(t,e,i,0,1,2)}function M1t(t,e,i=!0){const s=e.length/3;return Dme(t,(n,r)=>Vn(n,e[3*r+0],e[3*r+1],e[3*r+2]),i?s-1:s)}const oHe=.99619469809,Ww=Nt(),N_=Nt(),Sy=Nt(),$4=Nt(),O4=Nt();function A1t(t,e,i){return e!==t&&NI(t,e),t[3]=-Es(t,i),t}function D1t(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function k1t(t,e,i,s){return Gr(Sy,e,t),Tx(i,Sy,s)}function jG(t,e,i,s){return kA(NA(t,e,$r(Wo.get(),i,e),lHe,s))}function N1t(t,e,i){return e!=null&&kA(NA(t,e.origin,e.direction,cHe,i))}function $1t(t,e,i){return kA(NA(t,e.origin,e.vector,hf.NONE,i))}function O1t(t,e,i){return kA(NA(t,e.origin,e.vector,hf.CLAMP,i))}function kme(t,e){return ef(t,e)>=0}function R1t(t,e){const i=Es(t,e.ray.direction),s=-ef(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return s>0;const n=s/i;return i>0?n<e.c1&&(e.c1=n):n>e.c0&&(e.c0=n),e.c0<=e.c1}function BG(t,e,i){const s=qc(Wo.get(),t,-t[3]),n=aHe(t,$r(Wo.get(),e,s),Wo.get());return Wl(i,n,s),i}function L1t(t,e,i,s){const n=t,r=Wo.get(),o=Wo.get();GG(n,r,o);const l=$r(Wo.get(),i,e),u=HS(r,l),f=HS(o,l),y=HS(n,l);return Vn(s,u,f,y)}function aHe(t,e,i){const s=qc(Wo.get(),t,Es(t,e));return $r(i,e,s),i}function zF(t,e){return Math.abs(ef(t,e))}function ef(t,e){return Es(t,e)+t[3]}var Zd;function kA(t){return t===Zd.INTERSECTS_INSIDE_OUT||t===Zd.INTERSECTS_OUTSIDE_IN}function NA(t,e,i,s,n){const r=Es(t,i),o=ef(t,e);if(r===0)return o>=0?Zd.INSIDE:Zd.OUTSIDE;let l=-o/r;return s&hf.CLAMP&&(l=Xu(l,0,1)),!(s&hf.INFINITE_MIN)&&l<0||!(s&hf.INFINITE_MAX)&&l>1?o>=0?Zd.INSIDE:Zd.OUTSIDE:(Wl(n,e,qc(n,i,l)),o>=0?Zd.INTERSECTS_INSIDE_OUT:Zd.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(Zd||(Zd={}));const nS=[0,0,1,0];var hf;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(hf||(hf={}));const lHe=hf.INFINITE_MIN|hf.INFINITE_MAX,cHe=hf.INFINITE_MAX;let uHe=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&_2(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*oee);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,oee));e++)this._items.push(this._allocator())}};const oee=1024;function hHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function dHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function fHe(t,e,i,s,n,r,o,l,u,f){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t[6]=l,t[7]=u,t[8]=f,t}function pHe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function mHe(t,e){if(t===e){const i=e[1],s=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function gHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],u=e[6],f=e[7],y=e[8],_=y*o-l*f,x=-y*r+l*u,S=f*r-o*u;let P=i*_+s*x+n*S;return P?(P=1/P,t[0]=_*P,t[1]=(-y*s+n*f)*P,t[2]=(l*s-n*o)*P,t[3]=x*P,t[4]=(y*i-n*u)*P,t[5]=(-l*i+n*r)*P,t[6]=S*P,t[7]=(-f*i+s*u)*P,t[8]=(o*i-s*r)*P,t):null}function yHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],u=e[6],f=e[7],y=e[8];return t[0]=o*y-l*f,t[1]=n*f-s*y,t[2]=s*l-n*o,t[3]=l*u-r*y,t[4]=i*y-n*u,t[5]=n*r-i*l,t[6]=r*f-o*u,t[7]=s*u-i*f,t[8]=i*o-s*r,t}function vHe(t){const e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],o=t[5],l=t[6],u=t[7],f=t[8];return e*(f*r-o*u)+i*(-f*n+o*l)+s*(u*n-r*l)}function Nme(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=e[6],y=e[7],_=e[8],x=i[0],S=i[1],P=i[2],A=i[3],k=i[4],$=i[5],F=i[6],G=i[7],V=i[8];return t[0]=x*s+S*o+P*f,t[1]=x*n+S*l+P*y,t[2]=x*r+S*u+P*_,t[3]=A*s+k*o+$*f,t[4]=A*n+k*l+$*y,t[5]=A*r+k*u+$*_,t[6]=F*s+G*o+V*f,t[7]=F*n+G*l+V*y,t[8]=F*r+G*u+V*_,t}function _He(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=e[6],y=e[7],_=e[8],x=i[0],S=i[1];return t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=l,t[5]=u,t[6]=x*s+S*o+f,t[7]=x*n+S*l+y,t[8]=x*r+S*u+_,t}function bHe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=e[6],y=e[7],_=e[8],x=Math.sin(i),S=Math.cos(i);return t[0]=S*s+x*o,t[1]=S*n+x*l,t[2]=S*r+x*u,t[3]=S*o-x*s,t[4]=S*l-x*n,t[5]=S*u-x*r,t[6]=f,t[7]=y,t[8]=_,t}function xHe(t,e,i){const s=i[0],n=i[1],r=i[2];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=r*e[6],t[7]=r*e[7],t[8]=r*e[8],t}function wHe(t,e,i){const s=i[0],n=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function SHe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function EHe(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function CHe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function PHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function THe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,l=s+s,u=n+n,f=i*o,y=s*o,_=s*l,x=n*o,S=n*l,P=n*u,A=r*o,k=r*l,$=r*u;return t[0]=1-_-P,t[3]=y-$,t[6]=x+k,t[1]=y+$,t[4]=1-f-P,t[7]=S-A,t[2]=x-k,t[5]=S+A,t[8]=1-f-_,t}function IHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[4],o=e[5],l=e[6],u=e[8],f=e[9],y=e[10],_=y*o-l*f,x=-y*r+l*u,S=f*r-o*u,P=i*_+s*x+n*S;if(!P)return null;const A=1/P;return t[0]=_*A,t[1]=(-y*s+n*f)*A,t[2]=(l*s-n*o)*A,t[3]=x*A,t[4]=(y*i-n*u)*A,t[5]=(-l*i+n*r)*A,t[6]=S*A,t[7]=(-f*i+s*u)*A,t[8]=(o*i-s*r)*A,t}function MHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],u=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],k=e[14],$=e[15],F=i*l-s*o,G=i*u-n*o,V=i*f-r*o,B=s*u-n*l,W=s*f-r*l,J=n*f-r*u,re=y*A-_*P,se=y*k-x*P,oe=y*$-S*P,pe=_*k-x*A,ce=_*$-S*A,ue=x*$-S*k;let ne=F*ue-G*ce+V*pe+B*oe-W*se+J*re;return ne?(ne=1/ne,t[0]=(l*ue-u*ce+f*pe)*ne,t[1]=(u*oe-o*ue-f*se)*ne,t[2]=(o*ce-l*oe+f*re)*ne,t[3]=(n*ce-s*ue-r*pe)*ne,t[4]=(i*ue-n*oe+r*se)*ne,t[5]=(s*oe-i*ce-r*re)*ne,t[6]=(A*J-k*W+$*B)*ne,t[7]=(k*V-P*J-$*G)*ne,t[8]=(P*W-A*V+$*F)*ne,t):null}function AHe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function DHe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kHe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function NHe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function $me(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function $He(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function OHe(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t}function RHe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function LHe(t,e){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],u=t[6],f=t[7],y=t[8],_=e[0],x=e[1],S=e[2],P=e[3],A=e[4],k=e[5],$=e[6],F=e[7],G=e[8],V=oo();return Math.abs(i-_)<=V*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-x)<=V*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(n-S)<=V*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-P)<=V*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(o-A)<=V*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(l-k)<=V*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(u-$)<=V*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(f-F)<=V*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(y-G)<=V*Math.max(1,Math.abs(y),Math.abs(G))}function FHe(t){const e=oo(),i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],u=t[6],f=t[7],y=t[8];return Math.abs(1-(i*i+r*r+u*u))<=e&&Math.abs(1-(s*s+o*o+f*f))<=e&&Math.abs(1-(n*n+l*l+y*y))<=e}const zHe=Nme,qHe=$me;Object.freeze(Object.defineProperty({__proto__:null,add:NHe,adjoint:yHe,copy:dHe,determinant:vHe,equals:LHe,exactEquals:RHe,frob:kHe,fromMat2d:PHe,fromMat4:hHe,fromQuat:THe,fromRotation:EHe,fromScaling:CHe,fromTranslation:SHe,identity:pHe,invert:gHe,isOrthoNormal:FHe,mul:zHe,multiply:Nme,multiplyScalar:$He,multiplyScalarAndAdd:OHe,normalFromMat4:MHe,normalFromMat4Legacy:IHe,projection:AHe,rotate:bHe,scale:xHe,scaleByVec2:wHe,set:fHe,str:DHe,sub:qHe,subtract:$me,translate:_He,transpose:mHe},Symbol.toStringTag,{value:"Module"}));function $A(t){return t?aee(ic(t.origin),ic(t.direction)):aee(Nt(),Nt())}function aee(t,e){return{origin:t,direction:e}}function z1t(t,e){const i=BHe.get();return i.origin=t,i.direction=e,i}function q1t(t,e=$A()){return GHe(t.origin,t.direction,e)}function VHe(t,e,i=$A()){return Jl(i.origin,t),$r(i.direction,e,t),i}function GHe(t,e,i=$A()){return Jl(i.origin,t),Jl(i.direction,e),i}function V1t(t,e){const i=Gr(Wo.get(),Eo(Wo.get(),t.direction),$r(Wo.get(),e,t.origin));return Es(i,i)}function jHe(t,e,i){const s=Es(t.direction,$r(i,e,t.origin));return Wl(i,t.origin,qc(i,t.direction,s)),i}const BHe=new uHe(()=>$A());function lee(t,e){const i=sd(t),s=wV(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return Vn(e,i,s,n),e}const HHe=HG();function HG(){return vm()}const Ome=BC,UHe=BC;function Rme(t,e){return O2(e,t)}function Lme(t,e){return ju(t[0],t[1],t[2],e)}function YHe(t){return t}function XHe(t){t[0]=t[1]=t[2]=t[3]=0}function WHe(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function s5(t){return t[3]}function ZHe(t){return t}function KHe(t,e,i,s){return ju(t,e,i,s)}function JHe(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function QHe(t,e,i){return t!==i&&Rme(t,i),i}function eUe(t,e){return e}function OA(t,e,i){if(e==null||!zme(t,e,b6))return!1;let{t0:s,t1:n}=b6;if((s<0||n<s&&n>0)&&(s=n),s<0)return!1;if(i){const{origin:r,direction:o}=e;i[0]=r[0]+o[0]*s,i[1]=r[1]+o[1]*s,i[2]=r[2]+o[2]*s}return!0}function Fme(t,e,i){const s=VHe(e,i);if(!zme(t,s,b6))return[];const{origin:n,direction:r}=s,{t0:o,t1:l}=b6,u=f=>{const y=Nt();return Go(y,n,r,f),RA(t,y,y)};return Math.abs(o-l)<oo()?[u(o)]:[u(o),u(l)]}const b6={t0:0,t1:0};function zme(t,e,i){const{origin:s,direction:n}=e,r=tUe;r[0]=s[0]-t[0],r[1]=s[1]-t[1],r[2]=s[2]-t[2];const o=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];if(o===0)return!1;const l=2*(n[0]*r[0]+n[1]*r[1]+n[2]*r[2]),u=l*l-4*o*(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]-t[3]*t[3]);if(u<0)return!1;const f=Math.sqrt(u);return i.t0=(-l-f)/(2*o),i.t1=(-l+f)/(2*o),!0}const tUe=Nt();function iUe(t,e){return OA(t,e,null)}function sUe(t,e,i){if(OA(t,e,i))return i;const s=qme(t,e,Wo.get());return Wl(i,e.origin,qc(Wo.get(),e.direction,Xg(e.origin,s)/sd(e.direction))),i}function qme(t,e,i){const s=Wo.get(),n=rHe.get();Gr(s,e.origin,e.direction);const r=s5(t);Gr(i,s,e.origin),qc(i,i,1/sd(i)*r);const o=Vme(t,e.origin),l=Ime(e.origin,i);return the(n,l+o,s),hme(i,i,n),i}function nUe(t,e,i,s){const n=s5(t),r=n*n,o=e+.5*Math.PI,l=i*i+r-2*Math.cos(o)*i*n,u=Math.sqrt(l),f=l-r;if(f<=0)return .5;const y=Math.sqrt(f),_=Math.acos(y/u)-Math.asin(n/(u/Math.sin(o)));return Math.min(1,(_+.5*s)/s)}function rUe(t,e,i){return OA(t,e,i)?i:(jHe(e,t,i),RA(t,i,i))}function RA(t,e,i){const s=$r(Wo.get(),e,t),n=qc(Wo.get(),s,t[3]/sd(s));return Wl(i,n,t)}function oUe(t,e){const i=$r(Wo.get(),e,t),s=EA(i),n=t[3]*t[3];return Math.sqrt(Math.abs(s-n))}function Vme(t,e){const i=$r(Wo.get(),e,t),s=sd(i),n=s5(t),r=n+Math.abs(n-s);return xV(n/r)}const tN=Nt();function Gme(t,e,i,s){const n=$r(tN,e,t);switch(i){case Yh.X:{const r=lee(n,tN)[2];return Vn(s,-Math.sin(r),Math.cos(r),0)}case Yh.Y:{const r=lee(n,tN),o=r[1],l=r[2],u=Math.sin(o);return Vn(s,-u*Math.cos(l),-u*Math.sin(l),Math.cos(o))}case Yh.Z:return Eo(s,n);default:return}}function jme(t,e){const i=$r(qF,e,t);return sd(i)-t[3]}function aUe(t,e,i,s){const n=jme(t,e),r=Gme(t,e,Yh.Z,qF),o=qc(qF,r,i-n);return Wl(s,e,o)}function lUe(t,e){const i=R2(t,e),s=s5(t);return i<=s*s}function cUe(t,e,i=vm()){const s=Xg(t,e),n=t[3],r=e[3];return s+r<n?(O2(i,t),i):s+n<r?(O2(i,e),i):(Cx(i,t,e,(s+r-n)/(2*s)),i[3]=(s+n+r)/2,i)}const qF=Nt(),uUe=HG(),G1t=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:HHe,altitudeAt:jme,angleToSilhouette:Vme,axisAt:Gme,cameraFrustumCoverage:nUe,clear:XHe,closestPoint:rUe,closestPointOnSilhouette:qme,containsPoint:lUe,copy:Rme,create:HG,distanceToSilhouette:oUe,elevate:JHe,equals:UHe,exactEquals:Ome,fromCenterAndRadius:Lme,fromRadius:WHe,fromValues:KHe,getCenter:ZHe,getExtent:eUe,getRadius:s5,intersectLine:Fme,intersectRay:OA,intersectRayClosestSilhouette:sUe,intersectsRay:iUe,projectPoint:RA,setAltitudeAt:aUe,setExtent:QHe,tmpSphere:uUe,union:cUe,wrap:YHe},Symbol.toStringTag,{value:"Module"}));function iN(t,e){return t[0]*e[1]-t[1]*e[0]}function hUe(t,e,i){const s=Yg(i,e)/im(i);return Zpe(t,i,s)}function j1t(t,e,i,s,n=i){return Po(By,s,i),Po(x6,e,n),hUe(F2,x6,By),Ype(t,n,F2)}function B1t(t,e,i,s){Po(By,e,i);const n=s/SA(By);return Wh(t,i,By,n)}function dUe(t,e){const i=t.start,s=t.end,n=e.start,r=e.end,o=Po(By,s,i),l=Po(Bme,r,n),u=iN(o,l);if(Math.abs(u)<=pUe)return[];const f=Po(x6,i,n),y=iN(l,f)/u,_=iN(o,f)/u;if(y>=0){if(_>=0||e.type===qn.LINE)return[Wh(F2,i,o,y)]}else if(t.type===qn.LINE&&(_>=0||e.type===qn.LINE))return[Wh(F2,i,o,y)];return[]}function fUe(t,e,i){const s=[],n=Po(By,t.end,t.start),r=Po(Bme,t.start,e),o=im(n),l=2*Yg(n,r),u=l*l-4*o*(im(r)-i*i);if(u===0){const f=-l/(2*o);(t.type===qn.LINE||f>=0)&&s.push(Wh(F2,t.start,n,f))}else if(u>0){const f=Math.sqrt(u),y=(-l+f)/(2*o);(t.type===qn.LINE||y>=0)&&s.push(Wh(F2,t.start,n,y));const _=(-l-f)/(2*o);(t.type===qn.LINE||_>=0)&&s.push(Wh(x6,t.start,n,_))}return s}var qn;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(qn||(qn={}));const pUe=1e-6,By=vr(),Bme=vr(),x6=vr(),F2=vr();function UG({start:t,end:e,type:i},s,n){const r=[],o=Po(n5,e,t),l=Po(LA,t,s),u=im(o),f=2*Yg(o,l),y=f*f-4*u*(im(l)-n*n);if(y===0){const _=-f/(2*u);(i===$c.PLANE||_>=0)&&r.push(Wh(vr(),t,o,_))}else if(y>0){const _=Math.sqrt(y),x=(-f+_)/(2*u);(i===$c.PLANE||x>=0)&&r.push(Wh(vr(),t,o,x));const S=(-f-_)/(2*u);(i===$c.PLANE||S>=0)&&r.push(Wh(vr(),t,o,S))}return r}function Hme(t,e){const i=t.start,s=t.end,n=Po(n5,s,i),r=Vn(zA,-n[1],n[0],0),o=e.start,l=e.end,u=Zl(XG,l,o),f=Es(u,r),y=Vn(Qme,i[0],i[1],0),_=Zl(e0e,y,o),x=Es(_,r),S=oo();if(Math.abs(f)<S)return[];const P=Go(t0e,o,u,x/f);if(e.type===qn.RAY){const A=Zl(VF,P,o);if(Es(A,u)<-S)return[]}if(t.type===$c.HALF_PLANE){const A=tme(LA,P,i);if(Yg(A,n)<-S)return[]}return[ic(P)]}function mUe(t,e){return yUe(w6(WG,e[2],t),e)}function Ume(t,e){return Kme(w6(WG,0,t),w6(xUe,0,e)).map(([s,n])=>Bu(s,n))}function Yme(t,e,i){return Wme(t,w6(WG,t[2],e),i)}function Xme(t,e,i,s=Nt()){const n=Po(n5,t,e),r=SA(n);return Wh(s,e,n,r===0?1:i/r),s[2]=t[2],s}function Wme(t,{start:e,end:i,type:s},n=Nt()){const r=Zl(FA,t,e),o=Zl(zA,i,e),l=Es(r,o)/Es(o,o);return Go(n,e,o,s===qn.RAY?Math.max(l,0):l)}const gUe=(()=>{const t=Nt(),e=Nt(),i=Nt();return({start:s,end:n},{center:r,radius:o,normal:l,slicePlane:u})=>{const f=Tx(r,l,bUe);if(An(zF(f,s),0)&&An(zF(f,n),0)){GG(l,t,e);const _=(P,A)=>($r(i,A,r),$G(P,Es(i,t),Es(i,e)),P),x=fUe({start:_(n5,s),end:_(LA,n),type:qn.LINE},ame,o),S=[];for(const[P,A]of x){const k=Jl(Nt(),r);Go(k,k,t,P),Go(k,k,e,A),u&&!gg(u,k)||S.push(k)}return S}const y=Nt();return jG(f,s,n,y)?!An(Xg(y,r),o)||u&&!gg(u,y)?[]:[y]:[]}})();function Zme({start:t,end:e,type:i},s,n){const r=[],o=$r(FA,e,t),l=Po(LA,t,s),u=im(o),f=2*Yg(o,l),y=f*f-4*u*(im(l)-n*n);if(y===0){const _=-f/(2*u);(i===qn.LINE||_>=0)&&r.push(Go(Nt(),t,o,_))}else if(y>0){const _=Math.sqrt(y),x=(-f+_)/(2*u);(i===qn.LINE||x>=0)&&r.push(Go(Nt(),t,o,x));const S=(-f-_)/(2*u);(i===qn.LINE||S>=0)&&r.push(Go(Nt(),t,o,S))}return r}function Kme(t,e){const i=t.start,s=t.end,n=e.start,r=e.end,o=Zl(FA,s,i),l=Zl(zA,r,n),u=Zl(XG,n,i),f=Gr(Qme,o,l);if(!An(Es(u,f),0))return[];const y=m6(f);if(An(y,0))return[];const _=Gr(e0e,u,l),x=Es(_,f)/y,S=Go(t0e,i,o,x);if(t.type===qn.RAY){const P=Zl(VF,S,i);if(Es(o,P)<-oo())return[]}if(e.type===qn.RAY){const P=Zl(VF,S,n);if(Es(l,P)<-oo())return[]}return[ic(S)]}function yUe({start:t,end:e,type:i},s){const n=Zl(FA,s,t),r=Zl(zA,e,t),o=Gr(XG,r,n),l=m6(o)/m6(r),u=oo();if(l<u)switch(i){case qn.LINE:return[ic(s)];case qn.RAY:return Es(r,n)<-u?[]:[ic(s)]}return[]}function YG(t,e,i,s){const[n,r]=t,[o,l]=i,u=o-n,f=l-r,y=u*u+f*f,_=Math.sqrt(y);if(_>e+s)return[];if(_<Math.abs(e-s))return[];if(An(_,0)&&An(e,s))return[];const x=(e*e-s*s+y)/(2*_),S=Math.sqrt(e*e-x*x),P=S*f/_,A=S*u/_,[k,$]=OG(n5,t,i,x/_);return An(P,A)?[Bu(k,$)]:[Bu(k+P,$-A),Bu(k-P,$+A)]}function w6(t,e,{start:i,end:s,type:n}){return Vn(t.start,i[0],i[1],e),Vn(t.end,s[0],s[1],e),t.type=_Ue[n],t}function Jme(t,e){return An(t[2],e[2])}function An(t,e){return tg(Math.abs(t-e),0,oo())}function vUe(t,e){return e.filter(i=>gg(t,i))}function gg(t,e){return kme(t,e)}var $c;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})($c||($c={}));const _Ue={[$c.PLANE]:qn.LINE,[$c.HALF_PLANE]:qn.RAY},n5=vr(),LA=vr(),FA=Nt(),zA=Nt(),XG=Nt(),Qme=Nt(),e0e=Nt(),t0e=Nt(),VF=Nt(),bUe=el(),WG={start:Nt(),end:Nt(),type:qn.LINE},xUe={start:Nt(),end:Nt(),type:qn.LINE};let Qu=class{intersect(e){return vp(this,e)}closestPoints(e){return[this.closestTo(e)]}},zv=class extends Qu{constructor(e){super(),this.point=e}equals(e){return this===e||Eu(e)&&hn(this.point,e.point)}closestTo(){return L2(this.point)}},ZG=class extends Qu{constructor(e,i,s){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:s}}equals(e){return this===e||Bd(e)&&this.lineLike.type===e.lineLike.type&&hn(this.start,e.start)&&hn(this.end,e.end)}closestTo(e){const i=To();return Wme(e,this.lineLike,i),i}},KG=class extends ZG{constructor(e,i){super(e,i,qn.LINE)}},wUe=class extends ZG{constructor(e,i){super(e,i,qn.RAY)}},i0e=class extends Qu{constructor(e){super(),this.constraints=e}equals(e){return this===e||GF(e)&&ff(this.constraints,e.constraints,(i,s)=>i.equals(s))}closestTo(e){let i,s=1/0;for(const n of this.constraints){const r=n.closestTo(e),o=R2(e,r);o<s&&(s=o,i=r)}return L2(i??e)}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}},JG=class extends Qu{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||Ud(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=To();return Xme(e,this.center,this.radius,i),i}},QG=class extends Qu{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||bp(e)&&hn(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=To();return Xme(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new ej(L2(this.center),this.radius,kg(0,0,1))}},ej=class extends Qu{constructor(e,i,s,n=void 0){super(),this.center=e,this.radius=i,this.normal=s,this.slicePlane=n}equals(e){return this===e||k0(e)&&hn(this.center,e.center)&&hn(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:s}=this;BG(this.getPlane(SUe),e,sN);const n=Zl(sN,sN,i),r=EA(n);if(An(r,0))return L2(e);const o=s/Math.sqrt(r),l=To();Go(l,i,n,o);const{slicePlane:u}=this;if(u&&!gg(u,l)){const f=sj(u,this);return(f==null?void 0:f.closestTo(e))??L2(e)}return l}getPlane(e=el()){return Tx(this.center,this.normal,e)}};const sN=Nt(),SUe=el();let s0e=class extends Qu{constructor(e){super(),this.z=e}equals(e){return this===e||_p(e)&&this.z===e.z}closestTo(e){return kg(e[0],e[1],this.z)}getPlane(e=el()){return Vn(cee,0,0,this.z),Tx(cee,Kue,e)}};const cee=Nt();let tj=class extends Qu{constructor(e,i,s){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:s}}equals(e){return this===e||Hd(e)&&this.planeLike.type===e.planeLike.type&&hn(this.start,e.start)&&hn(this.end,e.end)}closestTo(e){const i=To();return Yme(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:s}=this.planeLike;return Math.sign(Yg(Po(EUe,s,i),Po(CUe,e,i)))>0?this.end:this.start}getPlane(e=el()){const i=Jl(uee,this.end);return i[2]+=1,Ame(this.start,this.end,i,e)}getSlicePlane(e=el()){const{start:i,end:s,type:n}=this.planeLike;if(n===$c.PLANE)return;const r=Vn(uee,i[0],i[1],0),o=Vn(hee,s[0],s[1],0),l=$r(hee,o,r);return Tx(r,l,e),e}};const EUe=vr(),CUe=vr(),uee=Nt(),hee=Nt();let PUe=class extends tj{constructor(e,i){super(e,i,$c.HALF_PLANE)}},n0e=class extends tj{constructor(e,i){super(e,i,$c.PLANE)}},TUe=class extends Qu{constructor(e,i){super(),this.sphere=Lme(e,i)}equals(e){return this===e||xp(e)&&Ome(this.sphere,e.sphere)}closestTo(e){const i=To();return RA(this.sphere,e,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}};class r0e extends Qu{constructor(e,i,s){super(),this.start=e,this.end=i,this.getZ=s,this.planeLike={start:e,end:i,type:$c.PLANE}}equals(e){return this===e||S6(e)&&hn(this.start,e.start)&&hn(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return DUe(this,e)}addIfOnTheGround(e,i){for(const s of i){const n=this.getZ(s[0],s[1])??0;An(s[2],n)&&(s[2]=n,e.push(s))}}}let ij=class extends Qu{constructor(e,i,s){super(),this._x=e,this._y=i,this._z=s}equals(e){return this===e||YUe(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,s]){return Cme(this._x??e,this._y??i,this._z??s)}},o0e=class extends Qu{constructor(e,i,s,n,r){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=s,this._z=n,this._directionDegrees=r}equals(e){return this===e||UUe(e)&&DF(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,i,s]){return $G(Zw,e,i),DF(Zw,this._origin)||this._applyDirectionAndDistance(Zw),Cme(Zw[0],Zw[1],this._z??s)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)mg(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)MUe(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=e5(IUe,this._origin,e,this._spatialReference);mg(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}};const Zw=[0,0],IUe=new QC;function MUe(t,e,i,s,n){let{azimuth:r,distance:o}=e5(AUe,e,s,n);r??(r=0);let l=o*Math.cos((r-i)*dl);l=Math.max(0,l),mg(t,e,i,l,n)}const AUe=new QC;function DUe(t,e){const i=To();return Yme(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??l0e,i}function vp(t,e){if(GF(t)){const i=[];for(const s of t.constraints){const n=s.intersect(e);n&&i.push(n)}return r5(i)}if(GF(e))return vp(e,t);if(S6(t))return dee(t,e);if(S6(e))return dee(e,t);if(Eu(t)){const{point:i}=t;if(Eu(e))return hn(i,e.point)?t:void 0;const s=e.closestTo(i);return CE(s,i)?t:void 0}if(Bd(t)){if(Eu(e))return vp(e,t);if(Bd(e))return Hh(Kme(t.lineLike,e.lineLike));if(_p(e))return kUe(t,e);if(Hd(e))return Hh(Hme(e.planeLike,t.lineLike));if(Ud(e))return Hh(Zme(t.lineLike,e.center,e.radius));if(k0(e))return Hh(gUe(t.lineLike,e));if(bp(e))return NUe(t,e);if(xp(e))return $Ue(t,e)}else if(_p(t)){if(Eu(e)||Bd(e))return vp(e,t);if(_p(e))return OUe(t,e);if(Hd(e))return RUe(t,e);if(Ud(e))return LUe(t,e);if(k0(e))return zUe(t,e);if(bp(e))return FUe(t,e);if(xp(e))return qUe(t,e)}else if(Hd(t)){if(Eu(e)||Bd(e)||_p(e))return vp(e,t);if(Hd(e))return nN(Ume(t.planeLike,e.planeLike));if(Ud(e))return nN(UG(t.planeLike,e.center,e.radius));if(k0(e))return GUe(t,e);if(bp(e))return VUe(t,e);if(xp(e))return jUe(t,e)}else if(Ud(t)){if(Eu(e)||Bd(e)||_p(e)||Hd(e))return vp(e,t);if(Ud(e))return nN(YG(t.center,t.radius,e.center,e.radius));if(k0(e))return void 0;if(bp(e))return BUe(t,e);if(xp(e))return void 0}else if(k0(t)){if(Eu(e)||Bd(e)||_p(e)||Hd(e)||Ud(e))return vp(e,t);if(k0(e))return void 0;if(bp(e))return e.asCircle(),void 0;if(xp(e))return void 0}else if(bp(t)){if(Eu(e)||Bd(e)||_p(e)||Hd(e)||Ud(e)||k0(e))return vp(e,t);if(bp(e))return HUe(e,t);if(xp(e))return void 0}else if(xp(t)){if(Eu(e)||Bd(e)||_p(e)||Hd(e)||Ud(e)||bp(e))return vp(e,t);if(xp(e))return void 0}}const kUe=(()=>{const t=el();return(e,i)=>{const{start:s,end:n}=e;if(Jme(s,n)&&An(s[2],i.z))return e;const r=To();return jG(i.getPlane(t),s,n,r)?new zv(r):void 0}})();function NUe({lineLike:t},{center:e,radius:i}){const s=e[2];return Hh(Zme(t,e,i).filter(n=>An(n[2],s)))}function $Ue({lineLike:t},{sphere:e}){return Hh(Fme(e,t.start,t.end))}const sj=(()=>{const t=vm(),e=Nt(),i=Nt();return(s,n,r)=>{const{normal:o,center:l,radius:u}=n;GG(o,e,i);const f=s,y=u*Es(f,e),_=u*Es(f,i);dG(t,l[0],l[1],l[2],1);const x=mG(s,t),S=Math.hypot(y,_),P=An(S,0);if(An(zF(s,l),0)){if(P)return n;if(An(u,0))return!r||gg(r,l)?new zv(L2(l)):void 0;Gr(e,f,o),Eo(e,e);const W=new Array,J=ic(l);Go(J,J,e,u),r&&!gg(r,J)||W.push(J);const re=ic(l);return Go(re,re,e,-u),r&&!gg(r,re)||W.push(re),Hh(W)}if(P)return;const A=-x/S;if(Math.abs(A)>1||An(A,1))return;const k=Math.atan(y/_),$=wV(A)-k,F=Math.PI-$,G=new Array,V=Nt();Go(V,l,e,u*Math.cos($)),Go(V,V,i,u*Math.sin($)),G.push(V);const B=Nt();return Go(B,l,e,u*Math.cos(F)),Go(B,B,i,u*Math.sin(F)),G.push(B),Hh(r?vUe(r,G):G)}})();function OUe(t,e){return An(t.z,e.z)?t:void 0}function RUe({z:t},{planeLike:e}){const[i,s]=e.start,[n,r]=e.end,o=kg(i,s,t),l=kg(n,r,t);return e.type===$c.PLANE?new KG(o,l):new wUe(o,l)}function LUe(t,e){const[i,s]=e.center;return new QG(kg(i,s,t.z),e.radius)}function FUe(t,e){return An(e.center[2],t.z)?e:void 0}const zUe=(()=>{const t=el();return(e,i)=>sj(e.getPlane(t),i,i.slicePlane)})();function qUe(t,{center:e,radius:i}){const s=Math.abs(e[2]-t.z);if(s>i&&!An(s,i))return;const n=kg(e[0],e[1],t.z),r=Math.sqrt(i**2-s**2);return An(r,0)?void 0:new QG(n,r)}const VUe=(()=>{const t=el();return(e,{center:i,radius:s})=>{const n=UG(e.planeLike,i,s),r=i[2];e.getSlicePlane(t);const o=new Array;for(const[l,u]of n){const f=[l,u,r];gg(t,f)&&o.push(f)}return Hh(o)}})(),GUe=(()=>{const t=el(),e=el();return(i,s)=>sj(i.getPlane(t),s,i.getSlicePlane(e))})(),jUe=(()=>{const t=el();return(e,{center:i,radius:s})=>{const n=e.getPlane(t),r=ef(n,i),o=Math.abs(r);if(o>s&&!An(o,s))return;const l=Math.sqrt(s**2-r**2);if(An(l,0)){const y=To();return BG(n,i,y),new zv(y)}const u=To(),f=ic(n);return Go(u,i,f,r),new ej(u,l,f,e.getSlicePlane())}})();function BUe(t,e){const i=wA(t.center,e.center);return An(i,0)&&An(t.radius,e.radius)?e:a0e(YG(t.center,t.radius,e.center,e.radius),e.center[2])}function HUe(t,e){if(!Jme(t.center,e.center))return;const i=wA(t.center,e.center);return An(i,0)&&An(t.radius,e.radius)?t:a0e(YG(t.center,t.radius,e.center,e.radius),t.center[2])}function dee(t,e){const{planeLike:i,getZ:s}=t,n=new Array;if(Eu(e))t.addIfOnTheGround(n,mUe(i,e.point));else if(Bd(e))t.addIfOnTheGround(n,Hme(i,e.lineLike));else if(Ud(e))for(const[r,o]of UG(i,e.center,e.radius)){const l=s(r,o);l!=null&&n.push(_l(r,o,l))}else if(Hd(e)||S6(e))for(const[r,o]of Ume(i,e.planeLike)){const l=s(r,o)??l0e;n.push(_l(r,o,l))}return Hh(n)}function nN(t){return r5(t.map(([e,i])=>{const s=kg(e,i,0),n=kg(e,i,1);return new KG(s,n)}))}function Hh(t){return r5(t.map(e=>e?new zv(e):void 0))}function a0e(t,e){return Hh(t.map(([i,s])=>[i,s,e]))}function r5(t){if(t.length!==0)return t.length===1?t[0]??void 0:new i0e(t.filter(yl))}function GF(t){return t instanceof i0e}function Eu(t){return t instanceof zv}function Bd(t){return t instanceof ZG}function _p(t){return t instanceof s0e}function Hd(t){return t instanceof tj}function Ud(t){return t instanceof JG}function bp(t){return t instanceof QG}function k0(t){return t instanceof ej}function xp(t){return t instanceof TUe}function S6(t){return t instanceof r0e}function UUe(t){return t instanceof o0e}function YUe(t){return t instanceof ij}const l0e=0;let Ix=class{constructor(e,i,s,n){this.targetPoint=e,this.constraint=i,this.isDraped=s,this.domain=n}},c0e=class extends Ix{constructor({targetPoint:e,objectId:i,constraint:s,isDraped:n}){super(e,s,n,Wa.FEATURE),this.objectId=i}},qA=class{constructor(e,i){this.isDraped=e,this.domain=i}},bf=class u0e extends qA{constructor(e,i,s,n,r=Wa.ALL,o=!0,l=!0){super(n,r),this.type=e,this.lineStart=i,this.lineEnd=s,this.fadeLeft=o,this.fadeRight=l}equals(e){return e instanceof u0e&&this.type===e.type&&hn(this.lineStart,e.lineStart)&&hn(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return Xg(this.lineStart,this.lineEnd)}},XUe=class extends c0e{constructor(e){super({...e,isDraped:!0,constraint:new r0e(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new bf(Zu.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},WUe=class extends c0e{constructor(e){super({...e,constraint:new KG(e.edgeStart,e.edgeEnd)})}get hints(){return[new bf(Zu.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},ZUe=class h0e extends qA{constructor(e,i,s=Wa.ALL){super(i,s),this.intersectionPoint=e}equals(e){return e instanceof h0e&&hn(this.intersectionPoint,e.intersectionPoint)}},$I=class extends Ix{constructor(e,i,s,n){super(e,new zv(e),n,Wa.ALL),this.first=i,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new ZUe(this.targetPoint,this.isDraped,this.domain)]}},KUe=class extends Ix{constructor({lineStart:e,lineEnd:i,targetPoint:s,isDraped:n}){super(s,new n0e(e,i),n,Wa.SELF),this._referenceLineHint=new bf(Zu.REFERENCE_EXTENSION,e,i,n,this.domain)}get hints(){return[this._referenceLineHint,new bf(Zu.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},JUe=class d0e extends qA{constructor(e,i,s,n=Wa.ALL){super(s,n),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof d0e&&hn(this.lineStart,e.lineStart)&&hn(this.lineEnd,e.lineEnd)}},QUe=class extends Ix{constructor({referenceLine:e,lineStart:i,targetPoint:s,isDraped:n}){const r=ic(i),{left:o,right:l}=e;$r(r,Wl(r,r,l),o),super(s,new n0e(i,r),n,Wa.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new bf(Zu.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new JUe(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new bf(Zu.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(s=>{hn(e.right,s.edge.left)&&(s.fadeLeft=!1,i.fadeRight=!1),hn(e.right,s.edge.right)&&(s.fadeRight=!1,i.fadeRight=!1),hn(e.left,s.edge.right)&&(s.fadeRight=!1,i.fadeLeft=!1),hn(e.left,s.edge.left)&&(s.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},f0e=class p0e extends qA{constructor(e,i,s,n,r=Wa.ALL){super(n,r),this.previousVertex=e,this.centerVertex=i,this.nextVertex=s}equals(e){return e instanceof p0e&&hn(this.previousVertex,e.previousVertex)&&hn(this.centerVertex,e.centerVertex)&&hn(this.nextVertex,e.nextVertex)}},eYe=class extends Ix{constructor({targetPoint:e,constraint:i,previousVertex:s,otherVertex:n,otherVertexType:r,isDraped:o,selfSnappingType:l,objectId:u,domain:f}){super(e,i,o,f??Wa.SELF),this.previousVertex=s,this.otherVertex=n,this.otherVertexType=r,this.selfSnappingType=l??C6.None,this.objectId=u??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===E6.CENTER?this.otherVertex:this.targetPoint,s=this.otherVertexType===E6.CENTER?this.targetPoint:this.otherVertex;return[new bf(Zu.TARGET,i,s,this.isDraped,this.domain),new bf(Zu.REFERENCE,e,i,this.isDraped,this.domain),new f0e(this.previousVertex,i,s,this.isDraped,this.domain)]}};var E6,C6;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(E6||(E6={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(C6||(C6={}));let tYe=class extends Ix{constructor({targetPoint:e,point1:i,point2:s,isDraped:n}){super(e,new JG(Cx(Nt(),i,s,.5),.5*JC(i,s)),n,Wa.SELF),this._p1=i,this._p2=s}get hints(){return[new bf(Zu.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new bf(Zu.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new f0e(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function iYe(t,e,i,s,n=Nt()){const r=Jl(sYe,t);return r[2]=xme(s,r,e,i)||0,s.renderCoordsHelper.toRenderCoords(r,e,n),n}const sYe=Nt();function nYe(t,e,i,s){return s.type==="2d"?(R4.x=t[0],R4.y=t[1],R4.spatialReference=e,s.toScreen(R4)):(iYe(t,e,i,s,fee),s.state.camera.projectToScreen(fee,rN),Qp(rN[0],rN[1]))}const R4=Af(0,0,0,null),fee=Nt(),rN=Bue();let Ah=class extends Sa.EventedMixin(Ei){constructor(e){super(e),this.options=new i5,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Mp.MAIN}initialize(){this.addHandles([xi(()=>{const{distance:e,touchSensitivityMultiplier:i,effectiveSelfEnabled:s,effectiveFeatureEnabled:n,effectiveGridEnabled:r}=this.options;return{selfEnabled:s,featureEnabled:n,gridEnabled:this.view.type==="2d"&&r,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:i}},(e,i)=>{var s;i&&(this.doneSnapping(),this.emit("changed")),(s=this._loadTask)==null||s.abort(),this._loadTask=RM(n=>this._updateEngines(e,i,n))},ec),xi(()=>this.options,e=>{for(const i of this._engines)i.options=e},Jp)])}destroy(){this._destroyEngines()}get updating(){var e;return this._engines.some(i=>i.updating)||!((e=this._loadTask)!=null&&e.finished)}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,i,s){if(!e.viewReady)return void this._destroyEngines();(i==null?void 0:i.viewSpatialReference)!==e.viewSpatialReference&&this._destroyEngines();const{_engineCache:n}=this,r=[];e.featureEnabled&&!n.has("feature")&&r.push(this._setupFeatureSnappingEngine(s)),e.selfEnabled&&!n.has("self")&&r.push(this._setupSelfSnappingEngine(s)),e.gridEnabled&&!n.has("grid")&&this.view.type==="2d"&&r.push(this._setupGridSnappingEngine(s)),await Promise.allSettled(r),s.aborted||(this._engines=Array.from(n.values()))}async _setupSelfSnappingEngine(e){const{SelfSnappingEngine:i}=await nt(()=>import("./SelfSnappingEngine-DLZ1quNy.js"),__vite__mapDeps([303,304]),import.meta.url);Ql(e);const s=new i({view:this.view,options:this.options});this._engineCache.set("self",s)}async _setupGridSnappingEngine(e){const{view:i}=this,{GridSnappingEngine:s}=await nt(async()=>{const{GridSnappingEngine:n}=await import("./GridSnappingEngine-DqHpHMAb.js");return{GridSnappingEngine:n}},__vite__mapDeps([305,12,13,14,15,73,306]),import.meta.url);if(Ql(e),i.type==="2d"){const n=new s({view:i,options:this.options});this._engineCache.set("grid",n)}}async _setupFeatureSnappingEngine(e){const{FeatureSnappingEngine:i}=await nt(()=>import("./FeatureSnappingEngine-BfFrJRg6.js"),__vite__mapDeps([307,74]),import.meta.url);Ql(e);const{view:s,options:n,_engineCache:r}=this,o=new i({view:s,options:n,spatialReference:s.spatialReference});r.set("feature",o)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,s=e*i;return s*s}snap(e){return aYe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:s}=e;this._removeVisualization();const n=this._currentMainCandidate;if(n==null)return i;const r=this._selectUpdateInput(e);if(r==null)return i;const{spatialReference:o}=s,l=gf(r,o);if(l==null)return i;const{view:u}=this,{elevationInfo:f,visualizer:y}=s,_=[],x=og(l,u,f),S=n.constraint.closestTo(x);if(!this._arePointsWithinScreenThreshold(x,S,s)||!aN(n,s.drawConstraints))return this._resetSnappingState(),i;n.targetPoint=Q8(S),_.push(...n.hints);for(const P of this._currentOtherActiveCandidates)aN(P,s.drawConstraints)&&(P.targetPoint=Q8(S),_.push(...P.hints));return y!=null&&this.addHandles(y.draw(_,{spatialReference:o,elevationInfo:lYe(s),view:u,selfSnappingZ:s.selfSnappingZ}),oN),FF(S,u,i,s)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case Mp.MAIN:return e;case Mp.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Mp.MAIN}_removeVisualization(){this.removeHandles(oN)}async _snapSinglePoint({point:e,context:i,signal:s}){const{view:n}=this,{elevationInfo:r}=i,o=og(e,n,r),l=await this._fetchCandidates(o,Wa.ALL,i,s);return this._createSnapResult(o,Mp.MAIN,l,n,e,i,s)}async _snapMultiPoint({point:e,scenePoint:i,context:s,signal:n}){const{view:r}=this,{coordinateHelper:o,elevationInfo:l,spatialReference:u}=s;await RC(i.spatialReference,u);const f=gf(i,u),y=og(f,r,l),_=await this._fetchCandidates(y,Wa.FEATURE,s,n);if(_.length>0){const P=await this._fetchCandidates(y,Wa.SELF,s,n);return this._createSnapResult(y,Mp.SCENE,[..._,...P],r,f,s,n)}const x=og(e,r,l),S=await this._fetchCandidates(x,Wa.SELF,s,n);return this._createSnapResult(x,Mp.MAIN,S,r,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0},s,n)}async _fetchCandidates(e,i,s,n){return(await Promise.all(this._engines.map(r=>r.fetchCandidates(e,i,s,n)))).flat()}_createSnapResult(e,i,s,n,r,o,l){return{get valid(){return!Rc(l)},apply:()=>{const{spatialReference:u}=o,{snappedPoint:f,hints:y}=this._processCandidates(e,i,s,o);return this._removeVisualization(),o.visualizer!=null&&this.addHandles(o.visualizer.draw(y,{spatialReference:u,elevationInfo:Dg,view:n,selfSnappingZ:o.selfSnappingZ}),oN),FF(f,n,r,o)}}}_processCandidates(e,i,s,n){if(s.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),HBe(e,s);const r=this._currentMainCandidate;if(r!=null){const o=oYe(r,s);if(o>=0){if(!(s[o]instanceof $I))return this._intersectWithOtherCandidates(o,s,e,i,n);if(this._arePointsWithinScreenThreshold(e,r.targetPoint,n))return this._updateSnappingCandidate(r,i,s,n)}}return this._intersectWithOtherCandidates(0,s,e,i,n)}_intersectWithOtherCandidates(e,i,s,n,r){const{coordinateHelper:o}=r,l=i[e],u=[];for(let f=0;f<i.length;++f){if(f===e)continue;const y=i[f],_=l.constraint.intersect(y.constraint);if(_)for(const x of _.closestPoints(l.targetPoint))u.push([new $I(Q8(x),l,y,y.isDraped),this._squaredScreenDistance(s,x,o)])}return u.length>0&&(u.sort((f,y)=>f[1]-y[1]),u[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(u[0][0],n,i,r):aN(l,r.drawConstraints)?this._updateSnappingCandidate(l,n,i,r):{snappedPoint:s,hints:[]}}_updateSnappingCandidate(e,i,s,n){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const r=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const l of s){if(e instanceof $I){if(l.constraint.equals(e.first.constraint)||l.constraint.equals(e.second.constraint))continue}else if(l.constraint.equals(e.constraint))continue;const u=l.constraint.closestTo(r);this._squaredScreenDistance(u,r,n.coordinateHelper)<rYe()&&(l.targetPoint=r,this._currentOtherActiveCandidates.push(l),o.push(...l.hints))}return{snappedPoint:r,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,s){return this._squaredScreenDistance(e,i,s.coordinateHelper)<this._squaredPointProximityThreshold(s.pointer)}_squaredScreenDistance(e,i,s){return Pme(this._toScreen(e,s),this._toScreen(i,s))}_toScreen(e,i){return nYe(e,i.spatialReference,Dg,this.view)}get test(){}};var Mp;I([N({constructOnly:!0})],Ah.prototype,"view",void 0),I([N()],Ah.prototype,"options",void 0),I([N({readOnly:!0})],Ah.prototype,"updating",null),I([N()],Ah.prototype,"_loadTask",void 0),I([N()],Ah.prototype,"_engines",void 0),I([N()],Ah.prototype,"_squaredMouseProximityThreshold",null),I([N()],Ah.prototype,"_squaredTouchProximityThreshold",null),Ah=I([ke("esri.views.interactive.snapping.SnappingManager")],Ah),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Mp||(Mp={}));const oN="visualization-handle";function rYe(){return _6.satisfiesConstraintScreenThreshold*_6.satisfiesConstraintScreenThreshold}function aN(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof XUe||t instanceof WUe||t instanceof KUe||t instanceof QUe||t instanceof tYe)&&(!(t instanceof eYe)||e.direction==null&&t.selfSnappingType===C6.LastVertex)}function oYe(t,e){return t instanceof $I?lN(e,t.first)>=0&&lN(e,t.second)>=0?0:-1:lN(e,t)}function lN(t,e){let i=-1;for(let s=0;s<t.length;++s)if(e.constraint.equals(t[s].constraint)){i=s;break}return i}function aYe(t){return t.scenePoint!=null}function lYe({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Dg:e}async function vyt(t,e){if(t.type==="2d")return t.hitTest(e);const i=await t.hitTest(e);if(i.results.length===0)return i;const s=i.results[0],n=(s.distance??0)*(1+cYe),r=i.results.findIndex(o=>(o.distance??0)>n);return r!==-1&&(i.results=i.results.slice(0,r)),s&&i.ground.distance>n&&(i.ground.mapPoint=null),i}const cYe=.05;function m0e(t){return(t==null?void 0:t.type)==="graphic"}function uYe(t){return t.find(m0e)??null}function _yt(t){return t.filter(m0e)}function jF(t){return Qp(t.x,t.y)}function hYe(t,e){var s;const i=(s=t instanceof HTMLElement?t:t.surface)==null?void 0:s.getBoundingClientRect();return i?Qp(e.clientX-i.left,e.clientY-i.top):Qp(0,0)}function byt(t,e){return e instanceof Event?hYe(t,e):jF(e)}function xyt(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let da=class extends Sa.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};I([N()],da.prototype,"activeComponent",void 0),I([N()],da.prototype,"cancelled",void 0),I([N()],da.prototype,"history",void 0),I([N()],da.prototype,"tool",null),I([N()],da.prototype,"type",void 0),I([N()],da.prototype,"canUndo",null),I([N()],da.prototype,"canRedo",null),I([N()],da.prototype,"onEnd",void 0),I([N()],da.prototype,"undo",null),I([N()],da.prototype,"redo",null),I([N()],da.prototype,"toggleTool",void 0),I([N()],da.prototype,"addToSelection",void 0),I([N()],da.prototype,"removeFromSelection",void 0),da=I([ke("esri.widgets.Sketch.support.OperationHandle")],da);let OI=class extends da{};I([N()],OI.prototype,"activeComponent",void 0),OI=I([ke("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],OI);let $p=class extends da{};I([N()],$p.prototype,"activeComponent",void 0),$p=I([ke("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],$p);const pee={defaultZ:0},Kw={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let Zs=class extends Sa.EventedAccessor{constructor(e){var i;super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new Wg({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new zc({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new gm({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Al({color:[130,130,130,1],width:2}),this.meshSymbol=new bx({symbolLayers:new ci([new jg])}),this.updateGraphics=new ci,this.updateOnGraphicClick=!0,this.vertexSymbol=new zc({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new AA,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=pee,this.defaultUpdateOptions=Kw,this.snappingOptions=((i=e==null?void 0:e.snappingManager)==null?void 0:i.options)??(e==null?void 0:e.snappingOptions)??new i5}initialize(){this.addHandles([mf(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),mf(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const i of e.removed)this.updateGraphics.includes(i)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(i):this._operationHandle.cancel())}),xi(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},ec),xi(()=>this.view,e=>{this._defaultSnappingManager=no(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new Ah({view:e,options:this.snappingOptions})),e.type==="2d"?nt(()=>import("./editingTools-D2I2tFvn.js"),__vite__mapDeps([308,40,41,42,309,310,139,140,10,38,39,37,128,304,62,311,312,210,291,184,183,59,44,313]),import.meta.url):e.type==="3d"&&(nt(()=>import("./ImageMaterial.glsl-yCS7tLYl.js").then(i=>i.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url),nt(()=>import("./LineCallout.glsl-TuKcMUbH.js").then(i=>i.G),__vite__mapDeps([321,11,316,129,295,182,183,184,288,127,128,124,120,126,247,26,25,289,290,125,211,291,215,292,277,296,280,245,246,122,257,77,5,2,299,298,123,121,103,104,175,176,17,102,105,171,22,130,322,99,55,56,100,101,323,33,14,15,324,24]),import.meta.url)))},ec),xi(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,i)=>{e&&i&&!e.equals(i)&&this.cancel()})]),Tme(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=no(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeTooltip(){const{activeComponent:e,destroyed:i}=this,s=!i&&e&&"tooltip"in e?e.tooltip:null;return s!=null&&s.visible?s:null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...pee,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...Kw,...e,reshapeOptions:{...Kw.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...Kw.highlightOptions,...e==null?void 0:e.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e;return((e=this.snappingManager)==null?void 0:e.options)??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=no(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:i}=this;!this._defaultSnappingManager&&i&&(this._defaultSnappingManager=new Ah({options:this.snappingOptions,view:i})),this._clearOverride("snappingManager")}}get state(){var s;const e=!(!((s=this.view)!=null&&s.ready)||!this.layer),i=this._operationHandle;return e&&i?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const i=this._get("view");if(i){const{container:n,map:r}=i;n&&(i.cursor=null),r==null||r.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const s="view-ready";this.removeHandles(s),e&&this.addHandles(Eg(()=>e.ready,n=>{this.removeHandles(this._viewHandlesKey),n&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},ec),s),this._set("view",e)}cancel(){this._moduleLoaderAbortController=dg(this._moduleLoaderAbortController),this._viewReadyAbortController=dg(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:i}=this;if(e==="active"&&i.length){const{activeTool:s,layer:n}=this,r=i.toArray();n.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:s})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(i=>i.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,i){this.cancel(),await this._waitViewReady();const{view:s,layer:n}=this;if(!s||this.state==="disabled")throw n||this._logMissingLayer(),or();if(s.activeTool!=null&&(s.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");eee(s,this._internalGraphicsLayer);const r=await this._setupCreateOperation(e,i);if(r==null||this.destroyed)return void s.map.remove(this._internalGraphicsLayer);const o=()=>{var l;if(r===this._operationHandle){const u=this.createGraphic,f=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(l=this.view)!=null&&l.map&&this.view.map.remove(this._internalGraphicsLayer),r.cancelled||u==null||n.add(u),this.emit("create",{graphic:u,state:f?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};r.on("complete",o),this._operationHandle=r,s.ready&&s.focus()}async place(e,i){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...i})}async update(e,i){this.cancel(),await this._waitViewReady();const{layer:s,view:n,state:r}=this;if(!n||r==="disabled")throw s||this._logMissingLayer(),or();n.activeTool!=null&&(n.activeTool=null);const o=Array.isArray(e)?e:[e];if(e==null||!(o!=null&&o.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(o.some(u=>u.layer!==s?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):u.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const l=await this._setupUpdateOperation(o,i);this.destroyed||l==null||Wr(l)||(eee(n,this._internalGraphicsLayer),this._setUpdateOperationHandle(l,i),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:l.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const i=this.view;if(i){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const s of e)s.geometry==null||s.geometry.type==="mesh"||Jo(s.geometry.spatialReference,i.spatialReference)||(em(s.geometry.spatialReference,i.spatialReference)||yx()||await D2(),s.geometry=gf(s.geometry,i.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){var e;return!!((e=this._operationHandle)!=null&&e.canUndo())}canRedo(){var e;return!!((e=this._operationHandle)!=null&&e.canRedo())}toggleUpdateTool(){var e;(e=this._operationHandle)==null||e.toggleTool()}async _getFirstHit(e){const i=this.view;if(!i)return this._logMissingView(),null;if(i.type==="2d"){const r=[];i.map.allLayers.forEach(l=>{l.type!=="vector-tile"&&l.type!=="imagery"||r.push(l)});const o=await i.hitTest(e,{exclude:r});return uYe(o.results)}const s=[i.map.ground];i.map.allLayers.forEach(r=>{m$e(r.type)&&s.push(r)});const n=await i.hitTest(e,{exclude:s});if(n.results.length>0){const r=n.results[0];if(r!=null&&r.type==="graphic"&&r.graphic&&(!n.ground.mapPoint||i.map.ground.opacity<1||n.ground.distance-(r.distance??0)>-Math.min(3*n.ground.distance,i.viewingMode==="global"?Wq(i.renderCoordsHelper.spatialReference).radius/i.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return r}return null}_generateViewHandles(e){return[e.on("immediate-click",async i=>{var o;const s=this.state==="active"&&((o=this._operationHandle)==null?void 0:o.type)==="create";if(this.state==="disabled"||s||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const n=await i.async(()=>this._getFirstHit(jF(i)));let r=null;if(n!=null){const l=n.graphic;this.updateGraphics.includes(l)||l.layer===this.layer?(i.stopPropagation(),r=l):e.type!=="2d"||this._isComponentGraphic(l)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();r==null||this.updateGraphics.includes(r)||await this.update([r],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},sr.WIDGET)]}async _setupCreateOperation(e,i){const s=this.view;if(!s)return this._logMissingView(),null;const n={hasZ:s.type==="3d",...this.defaultCreateOptions,...i},r=await this._setupDrawGraphicTool(e,s,n);return r==null?null:(s.tools.add(r),s.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(e,i,s){if(e==="multipoint"&&i.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!i)return this._logMissingView(),null;const{cursor:n,defaultZ:r,hasZ:o,geometryToPlace:l,graphicProperties:u,mode:f,preserveAspectRatio:y}=s,_=e==="rectangle"||e==="circle"?"hybrid":"click",x=y??e!=="rectangle",S={centered:e!=="rectangle"&&!(e==="circle"&&!x),cursor:n,defaultZ:r,forceUniformSize:x,graphicProperties:u,geometryToPlace:l,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:o,mode:f??_,snappingManager:this.snappingManager,snapToScene:!1,view:i};return i.type==="2d"?this._makeDrawGraphicTool2D(S):this._makeDrawGraphicTool3D(S)}async _makeDrawGraphicTool2D(e){const i=await this._requireModule(nt(()=>import("./editingTools-D2I2tFvn.js"),__vite__mapDeps([308,40,41,42,309,310,139,140,10,38,39,37,128,304,62,311,312,210,291,184,183,59,44,313]),import.meta.url));return Wr(i)||this.destroyed?null:new i.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:fYe(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const i=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-yCS7tLYl.js").then(n=>n.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Wr(i)||this.destroyed)return null;const{elevationInfo:s}=this.layer;return new i.module.DrawGraphicTool3D({...e,elevationInfo:s,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const i=this.view;if(!i)return this._logMissingView(),null;let s=null;const n=e.forceUniformSize,r=e.centered,o=[i.on("key-down",u=>{if(u.key===Fn.pan)u.stopPropagation(),u.repeat||(e.enabled=!1);else if(u.key===Fn.complete)u.stopPropagation(),e.completeCreateOperation();else if(u.key!==Fn.vertexAdd||u.repeat)u.key===Fn.undo?(u.stopPropagation(),l.undo()):u.key===Fn.redo?(u.stopPropagation(),l.redo()):u.key!==Fn.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||u.repeat?u.key===Fn.center&&(u.repeat||(e.centered=!r,u.stopPropagation())):(e.forceUniformSize=!n,u.stopPropagation());else{const f=e.drawOperation.geometryType;f!=="polyline"&&f!=="polygon"&&f!=="multipoint"||(u.stopPropagation(),e.drawOperation.commitStagedVertex())}},sr.WIDGET),i.on("key-up",u=>{u.key===Fn.pan?e.enabled=!0:u.key!==Fn.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?u.key===Fn.center&&(e.centered=r,u.stopPropagation()):(e.forceUniformSize=n,u.stopPropagation())},sr.WIDGET),e.on("vertex-add",u=>{switch(s=s==null?"start":"active",u.operation){case"apply":this.emit("create",{graphic:e.graphic,state:s,tool:this.activeTool,toolEventInfo:u,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",u=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:u.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",u=>{switch(u.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:u,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",u=>{this._set("createGraphic",u.graphic),s="complete",u.aborted?l&&l.cancel():l&&l.complete()}),xi(()=>this._getGraphicSymbolFromTool(e.geometryType),u=>{e.graphicSymbol=u})],l=new OI({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var u;xd(o),(u=i.tools)==null||u.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return l}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,i){var l;const{layer:s,view:n}=this;if(!n)return this._logMissingView(),null;const r={...this.defaultUpdateOptions,...i,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...i==null?void 0:i.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...i==null?void 0:i.highlightOptions}};let o=r.tool??Kw.tool;for(const u of e)s.remove(u),s.add(u);if(n.type==="3d"){if(e.length===0)return null;switch(o){case"move":return this._setupMove3DOperation(e,r,n,o);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],r,n);case"transform":return this._setupGraphicTransform3DOperation(e,r,n)}}switch(o){case"move":return this._setupMove2DOperation(e,r,n);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,o,r,n);case"transform":if(e.length===1){const u=(l=e[0].geometry)==null?void 0:l.type;u!=="point"&&u!=="multipoint"||(o="reshape")}return this._setupTransformOrReshape2DOperation(e,o,r,n)}}async _setupMove3DOperation(e,i,s,n,r=!1){const o=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-yCS7tLYl.js").then(P=>P.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Wr(o))return o;const{ManipulatedObject3DGraphic:l,MoveTool3D:u}=o.module,f=new Map,y=()=>{f.forEach(P=>P.destroy()),f.clear()};for(const P of e){const A=new l({view:s,graphic:P}),k=xBe(A);if(k!==_n.SUPPORTED)return y(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${QQ(k)}).`),null;f.set(P,A)}const _=new u({view:s,enableZ:i.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});s.tools.add(_),_.objects.addMany(Array.from(f.values())),r||this.updateGraphics.addMany(e);const x=[],S=new $p({activeComponent:_,tool:n,type:"update",onEnd:()=>{xd(x),z4(s,_),y()},undo:()=>{gee(this.view,_),L4(S,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{F4(S,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:P=>{this.updateGraphics.push(P);const A=new l({view:s,graphic:P});f.set(P,A),_.objects.push(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[P],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:P=>{const A=this.updateGraphics.indexOf(P);if(S.history.undo.forEach($=>$.updates.splice(A,1)),S.history.redo.forEach($=>$.updates.splice(A,1)),this.updateGraphics.remove(P),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[P],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void S.complete();const k=f.get(P);k&&(_.objects.remove(k),k.destroy(),f.delete(P))},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1||n!=="transform")return;const P=this.updateGraphics.at(0),A=await this._setupReshape3DOperation(P,i,s,!0);A&&!Wr(A)&&(S.onEnd(),S.destroy(),this._setUpdateOperationHandle(A,i))}});return x.push(...this._getHandlesForComponent(S,i),s.on("immediate-click",P=>this._getCommonUpdateOperationClickHandlers(S,P,i),sr.WIDGET),s.on("key-down",P=>{this._getCommonUpdateOperationKeyDownHandlers(S,P)},sr.WIDGET)),S}_setupGraphicTransform3DOperation(e,i,s,n=!1){if(e.length===1&&EBe(e[0])===_n.SUPPORTED){const r=e[0],o=r.geometry;if(o!=null&&(o.type==="point"||o.type==="mesh"))return this._setupPointTransform3DOperation(r,i,s);if(o!=null&&(o.type==="polygon"||o.type==="polyline"))return this._setupPolyTransform3DOperation(r,i,s,n)}return this._setupMove3DOperation(e,i,s,"transform",n)}async _setupPointTransform3DOperation(e,i,s){const n="transform",{enableRotation:r,enableScaling:o,enableZ:l}=i,u=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-yCS7tLYl.js").then(A=>A.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Wr(u))return u;const{TransformTool3D:f,ManipulatedObject3DGraphic:y}=u.module,_=new y({graphic:e,view:s}),x=new f({object:_,view:s,enableRotation:r,enableScaling:o,enableZ:l,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});s.tools.add(x),this.updateGraphics.add(e);const S=[],P=new $p({activeComponent:x,tool:n,type:"update",onEnd:()=>{xd(S),z4(s,x),_.destroy()},undo:()=>{gee(this.view,x),L4(P,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{F4(P,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"}),P.onEnd(),P.destroy();const k=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,s,"transform",!0);Wr(k)||this._setUpdateOperationHandle(k,i)},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),P.complete()},toggleTool:()=>{}});return S.push(...this._getHandlesForComponent(P,i),s.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(P,A,i),sr.WIDGET),s.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(P,A)},sr.WIDGET)),P}async _setupPolyTransform3DOperation(e,i,s,n=!1){var F,G;const r="transform",{enableRotation:o,enableScaling:l,enableZ:u,preserveAspectRatio:f}=i,y=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-yCS7tLYl.js").then(V=>V.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Wr(y))return y;const{ManipulatedObject3DGraphic:_,ExtentTransformTool:x}=y.module,S=(G=(F=this.view)==null?void 0:F.inputManager)==null?void 0:G.isModifierKeyDown(Fn.constraint),P=new _({view:s,graphic:e}),A=new x({object:P,view:s,enableRotation:o,enableScaling:l,enableZ:u,preserveAspectRatio:!!f!=!!S,sketchOptions:this.sketchOptions});s.tools.add(A),n||this.updateGraphics.add(e);const k=[],$=new $p({activeComponent:A,tool:r,type:"update",onEnd:()=>{xd(k),z4(s,A),P.destroy()},canUndo:()=>!A.destroyed&&A.canUndo,undo:()=>{A.destroyed||(A.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!A.destroyed&&A.canRedo,redo:()=>{A.destroyed||(A.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async V=>{this.updateGraphics.add(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[V],removed:[],type:"selection-change"},type:"update"}),$.onEnd(),$.destroy();const B=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,s,"transform",!0);Wr(B)||this._setUpdateOperationHandle(B,i)},removeFromSelection:V=>{this.updateGraphics.remove(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[V],type:"selection-change"},type:"update"}),$.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1)return;const V=await this._setupReshape3DOperation(e,i,s,!0);V&&!Wr(V)&&($.onEnd(),$.destroy(),this._setUpdateOperationHandle(V,i))}});return k.push(...this._getHandlesForComponent($,i),s.on("immediate-click",V=>this._getCommonUpdateOperationClickHandlers($,V,i),sr.WIDGET),s.on("key-down",V=>this._getCommonUpdateOperationKeyDownHandlers($,V),sr.WIDGET),s.on("key-down",V=>{V.key!==Fn.constraint||V.repeat||(A.preserveAspectRatio=!A.preserveAspectRatio,V.stopPropagation())},sr.WIDGET),s.on("key-up",V=>{V.key===Fn.constraint&&(A.preserveAspectRatio=!A.preserveAspectRatio,V.stopPropagation())},sr.WIDGET)),$}async _setupMove2DOperation(e,i,s){const n="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const r=await this._getGraphicMover(e,i,s);if(Wr(r))return r;const o=new $p({activeComponent:r,tool:n,type:"update",onEnd:()=>{var y;this._displayDefaultCursor(),xd(f),xd(u),r.destroy(),(y=this._internalGraphicsLayer)==null||y.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const y=this.updateGraphics.toArray();L4(o,y),o.refreshComponent(),this._emitUndoEvent({graphics:y,tool:n})},redo:()=>{const y=this.updateGraphics.toArray();F4(o,y),o.refreshComponent(),this._emitRedoEvent({graphics:y,tool:n})},addToSelection:async y=>{await this._updateSpatialReference(y),this.updateGraphics.push(y),r.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[y],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:y=>{const _=this.updateGraphics.indexOf(y);o.history.undo.forEach(S=>S.updates.splice(_,1)),o.history.redo.forEach(S=>S.updates.splice(_,1)),this.updateGraphics.remove(y);const x=this.updateGraphics.toArray();this.emit("update",{graphics:x,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[y],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?r.graphics=x:o.complete()}});let l=!1;const u=[s.on("immediate-click",y=>this._getCommonUpdateOperationClickHandlers(o,y,i),sr.WIDGET),s.on("key-down",y=>{this._getCommonUpdateOperationKeyDownHandlers(o,y),y.key!==Fn.constraint||y.repeat||(l=!0,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},sr.WIDGET),s.on("key-up",y=>{y.key===Fn.constraint&&l&&(l=!1,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},sr.WIDGET)],f=this._getHandlesForComponent(o,i);return o}async _setupReshape3DOperation(e,i,s,n=!1){const r="reshape",o=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-yCS7tLYl.js").then(A=>A.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Wr(o))return o;const{ManipulatedObject3DGraphic:l,ReshapeTool3D:u}=o.module,f=new l({view:s,graphic:e}),y=wBe(f);if(y!==_n.SUPPORTED)return f.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${QQ(y)}).`),null;const _=i.reshapeOptions,x=new u({view:s,object:f,enableZVertex:i.enableZ&&(_==null?void 0:_.vertexOperation)==="move",enableZShape:i.enableZ&&(_==null?void 0:_.shapeOperation)==="move",enableMoveObject:(_==null?void 0:_.shapeOperation)==="move"||(_==null?void 0:_.shapeOperation)==="move-xy",enableMidpoints:(_==null?void 0:_.edgeOperation)==="split",enableEdgeOffset:(_==null?void 0:_.edgeOperation)==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});s.tools.add(x),n||this.updateGraphics.add(f.graphic);const S=[],P=new $p({activeComponent:x,tool:r,type:"update",onEnd:()=>{xd(S),z4(s,x),f.destroy()},canUndo:()=>!x.destroyed&&x.canUndo,undo:()=>{x.destroyed||(x.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!x.destroyed&&x.canRedo,redo:()=>{x.destroyed||(x.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"}),P.onEnd(),P.destroy();const k=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,s,"transform",!0);Wr(k)||this._setUpdateOperationHandle(k,i)},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),P.complete()},toggleTool:async()=>{if(i.toggleToolOnClick===!1)return;P.onEnd(),P.destroy();const A=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),i,s,!0);Wr(A)||this._setUpdateOperationHandle(A,i)}});return S.push(...this._getHandlesForComponent(P,i),s.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(P,A,i),sr.WIDGET),s.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(P,A)},sr.WIDGET)),P}async _setupTransformOrReshape2DOperation(e,i,s,n){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const r=i==="transform"?await this._getBox(e,s,n):await this._getReshape(e,s,n);if(Wr(r))return r;const o=new $p({activeComponent:r,type:"update",onEnd:()=>{xd(u),xd(l),o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{L4(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{F4(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:async f=>{let y=o.activeComponent;if((y==null?void 0:y.type)==="reshape"){const _=[...this.updateGraphics,f];this.updateGraphics.removeAll(),o.onEnd(),o.destroy();const x=await this._setupTransformOrReshape2DOperation(_,"transform",s,n);if(Wr(x))return;this._setUpdateOperationHandle(x,s)}else this.updateGraphics.add(f),y.graphics=this.updateGraphics.toArray(),y.refresh(),o.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async f=>{const y=this.updateGraphics.indexOf(f);o.history.undo.forEach(x=>x.updates.splice(y,1)),o.history.redo.forEach(x=>x.updates.splice(y,1)),this.updateGraphics.remove(f);const _=this.updateGraphics.toArray();if(_.length===0)o.complete();else{const x=_[0].geometry;_.length!==1||x==null||x.type!=="point"&&x.type!=="multipoint"?o.activeComponent.graphics=_:o.toggleTool()}this.emit("update",{graphics:_,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"})},toggleTool:async()=>{var x;if(this.updateGraphics.length>1)return;const f=this.updateGraphics.at(0),y=f.geometry;if(y!=null&&(o.tool==="reshape"&&(y.type==="point"||y.type==="multipoint")||o.tool==="transform"&&y.type==="extent"))return;let _=null;o.tool==="transform"?_=await this._getReshape([f],s,n):o.tool==="reshape"&&(_=await this._getBox([f],s,n)),Wr(_)||((x=o.activeComponent)==null||x.destroy(),o.activeComponent=_,o.activeComponent&&(xd(u),u=this._getHandlesForComponent(o,s)))}}),l=[n.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(o,f,s),sr.WIDGET),n.on("key-down",f=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,f),f.key===Fn.constraint&&!f.repeat&&o){const y=o.activeComponent;y&&y.type==="box"&&(y.preserveAspectRatio=!y.preserveAspectRatio)}},sr.WIDGET),n.on("key-up",f=>{if(f.key===Fn.constraint&&o){const y=o.activeComponent;y&&y.type==="box"&&(y.preserveAspectRatio=!y.preserveAspectRatio)}},sr.WIDGET)];let u=this._getHandlesForComponent(o,s);return o}async _getGraphicMover(e,i,s){const{enableMoveAllGraphics:n,highlightOptions:r}=i,o=await this._requireModule(nt(()=>import("./GraphicMover-MtB_6RiJ.js"),__vite__mapDeps([325,313,64,51,52,2,44]),import.meta.url));return Wr(o)?o:new o.module.default({enableMoveAllGraphics:n,highlightsEnabled:!!(r!=null&&r.enabled),indicatorsEnabled:!1,graphics:e,view:s,callbacks:{onGraphicMoveStart:({dx:l,dy:u,graphic:f})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:u,mover:f,type:"move-start"},type:"update"})},onGraphicMove:({dx:l,dy:u,graphic:f})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:u,mover:f,type:"move"},type:"update"}),onGraphicMoveStop:({dx:l,dy:u,graphic:f})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:u,mover:f,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,i,s){var y,_;const{enableRotation:n,enableScaling:r,highlightOptions:o,preserveAspectRatio:l}=i,u=await this._requireModule(nt(()=>import("./Box-C4id9zhp.js"),__vite__mapDeps([326,313,325,64,51,52,2,44,327,310,139,140,10,38,39,37,128,304,320,319]),import.meta.url));if(Wr(u))return u;const f=(_=(y=this.view)==null?void 0:y.inputManager)==null?void 0:_.isModifierKeyDown(Fn.constraint);return new u.module.default({graphics:e,enableRotation:n,enableScaling:r,highlightsEnabled:!!(o!=null&&o.enabled),preserveAspectRatio:!!l!=!!f,layer:this._internalGraphicsLayer,view:s,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onMove:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onMoveStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScaleStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScale:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScaleStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotateStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotate:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotateStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"})}})}async _getReshape(e,i,s){var u,f,y;const n=((u=i.reshapeOptions)==null?void 0:u.edgeOperation)==="split",r=((f=i.reshapeOptions)==null?void 0:f.shapeOperation)==="move",o=!!((y=i.highlightOptions)!=null&&y.enabled),l=await this._requireModule(nt(()=>import("./Reshape-Cu2Pdt4I.js"),__vite__mapDeps([328,40,41,42,313,325,64,51,52,2,44,310,139,140,10,38,39,37,128,304,318,312,210,291,184,319,327]),import.meta.url));return Wr(l)?l:new l.module.default({enableMidpoints:n,enableMovement:r,graphic:e[0],highlightsEnabled:o,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:s,callbacks:{onReshapeStart:_=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{..._},type:"update"}),onReshape:_=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{..._},type:"update"}),onReshapeStop:({mover:_,type:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:_,type:x},type:"update"}),onMoveStart:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onMove:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onMoveStop:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onVertexAdd:({added:_,type:x,vertices:S})=>{const P=_.map(A=>CZ(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:P,vertices:S,type:x},type:"update"})},onVertexRemove:({removed:_,type:x,vertices:S})=>{const P=_.map(A=>CZ(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:P,vertices:S,type:x},type:"update"})}}})}_getHandlesForComponent(e,i){const s=e.activeComponent;if(!s)return[];switch(s.type){case"graphic-mover":return[s.on("graphic-click",({graphic:n,viewEvent:r})=>{var o;(o=r.native)!=null&&o.shiftKey&&(r.stopPropagation(),e.removeFromSelection(n))}),s.on("graphic-move-start",n=>e.addToHistory(h0(n.allGraphics)))];case"box":return[s.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(e,i,n)),s.on("move-start",n=>e.addToHistory(h0(n.graphics))),s.on("rotate-start",n=>e.addToHistory(h0(n.graphics))),s.on("scale-start",n=>e.addToHistory(h0(n.graphics)))];case"reshape":return[s.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(e,i,n)),s.on("move-start",n=>e.addToHistory(h0([n.mover]))),s.on("reshape-start",n=>e.addToHistory(h0([n.graphic]))),s.on("vertex-add",n=>e.addToHistory(h0([n.oldGraphic]))),s.on("vertex-remove",n=>e.addToHistory(h0([n.oldGraphic])))];case"move-3d":return[s.events.on("record-undo",({updates:n})=>{e.addToHistory({updates:n})}),s.events.on("move-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.objects.length>0?n.objects[0].graphic:null,type:"move-start"},type:"update"})}),s.events.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:n.dx,dy:n.dy,mover:n.objects.length>0?n.objects[0].graphic:null,type:"move"},type:"update"})}),s.events.on("move-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.objects.length>0?n.objects[0].graphic:null,type:"move-stop"},type:"update"})}),s.events.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,i):e.toggleTool()})];case"transform-3d":return[s.events.on("record-undo",({updates:n})=>{e.addToHistory({updates:n})}),s.events.on("translate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-start"},type:"update"})}),s.events.on("translate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-stop"},type:"update"})}),s.events.on("rotate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,angle:n.angle,type:"rotate-start"},type:"update"})}),s.events.on("rotate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,angle:n.angle,type:"rotate-stop"},type:"update"})}),s.events.on("scale-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-start"},type:"update"})}),s.events.on("scale-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-stop"},type:"update"})}),s.events.on("translate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move"},type:"update"})}),s.events.on("rotate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,angle:n.angle,type:"rotate"},type:"update"})}),s.events.on("scale",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale"},type:"update"})}),s.events.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,i):e.toggleTool()})];case"reshape-3d":return[s.events.on("reshape",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...n,mover:n.object.graphic},type:"update"})}),s.events.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...n,mover:n.object.graphic},type:"update"})}),s.events.on("vertex-add",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),s.events.on("vertex-remove",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),s.events.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,i):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,i,s){var o;const{graphic:n,viewEvent:r}=s;return(o=r.native)!=null&&o.shiftKey&&n.layer===this.layer?(r.stopPropagation(),e.removeFromSelection(n)):i.toggleToolOnClick?(r.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,i){var r;this._operationHandle=e;const s=(r=this.view)==null?void 0:r.map;this._disablePopup(i);const n=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),l=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),s&&s.remove(this._internalGraphicsLayer),this._restorePopup(i),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:l,toolEventInfo:null,type:"update"})}};e.on("complete",n)}async _getCommonUpdateOperationClickHandlers(e,i,s){const n=jF(i),r=await i.async(()=>this._getFirstHit(n));if(r==null)return void e.complete();if(i.native.shiftKey&&this._toggleSelection([r.graphic],e,s))return void i.stopPropagation();this.updateGraphics.includes(r.graphic)?i.stopPropagation():e.complete()}_toggleSelection(e,i,s){const n=!!s.multipleSelectionEnabled;return e.some(r=>r!=null&&!(!n||r.layer!==this.layer)&&(this.updateGraphics.includes(r)?i.removeFromSelection(r):i.addToSelection(r),!0))}_getCommonUpdateOperationKeyDownHandlers(e,i){if(!e)return;const s=i.key;s===Fn.undo&&e.canUndo()?(i.stopPropagation(),e.undo()):s===Fn.redo&&e.canRedo()?(i.stopPropagation(),e.redo()):s===Fn.cancel?(i.stopPropagation(),e.cancel()):this.allowDeleteKey&&Fn.delete.includes(s)&&this._onDeleteKey(i)}_onDeleteKey(e){var n;if(!this._operationHandle||this._operationHandle.type!=="update")return;const i=this.activeComponent,s=this.updateGraphics.toArray();i!=null&&(i.type!=="reshape"||s.length===1&&((n=s[0].geometry)==null?void 0:n.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,i;this._internalGraphicsLayer&&((i=(e=this.view)==null?void 0:e.map)==null||i.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=no(this._internalGraphicsLayer))}_isComponentGraphic(e){var s;const{activeComponent:i}=this;return!(!e||i==null)&&(((s=e.attributes)==null?void 0:s.esriSketchTool)||i.type==="draw-2d"&&i.graphic===e||(i.type==="box"||i.type==="reshape")&&i.isUIGraphic(e))}_displayPointerCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,i,s){zt.getLogger(this).error(new rt(e,i,s))}async _requireModule(e){const i=new AbortController;this._moduleLoaderAbortController=i;const s=await e;return this._moduleLoaderAbortController!==i||i.signal.aborted?{requireError:"aborted"}:{module:s}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return gO(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var i;return((i=this.view)==null?void 0:i.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(dg(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await _C(gO(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",mee("view"))}_logMissingLayer(){this._logError(dYe,mee("layer"))}};I([N()],Zs.prototype,"_defaultSnappingManager",void 0),I([N()],Zs.prototype,"updating",null),I([N()],Zs.prototype,"_operationHandle",void 0),I([N({readOnly:!0})],Zs.prototype,"activeTool",null),I([N()],Zs.prototype,"activeTooltip",null),I([N()],Zs.prototype,"activeFillSymbol",void 0),I([N()],Zs.prototype,"activeLineSymbol",void 0),I([N()],Zs.prototype,"activeVertexSymbol",void 0),I([N()],Zs.prototype,"allowDeleteKey",void 0),I([N({readOnly:!0})],Zs.prototype,"createGraphic",null),I([N()],Zs.prototype,"defaultCreateOptions",null),I([N()],Zs.prototype,"defaultUpdateOptions",null),I([N({type:t5,nonNullable:!0})],Zs.prototype,"labelOptions",null),I([N()],Zs.prototype,"layer",void 0),I([N({types:Fu})],Zs.prototype,"pointSymbol",void 0),I([N({types:Fu})],Zs.prototype,"polygonSymbol",void 0),I([N({types:Fu})],Zs.prototype,"polylineSymbol",void 0),I([N()],Zs.prototype,"meshSymbol",void 0),I([N({type:i5,nonNullable:!0})],Zs.prototype,"snappingOptions",null),I([N()],Zs.prototype,"snappingManager",null),I([N({readOnly:!0})],Zs.prototype,"state",null),I([N({type:zG,nonNullable:!0})],Zs.prototype,"tooltipOptions",null),I([N({readOnly:!0})],Zs.prototype,"updateGraphics",void 0),I([N()],Zs.prototype,"updateOnGraphicClick",void 0),I([N({type:TA,nonNullable:!0})],Zs.prototype,"valueOptions",null),I([N({types:Fu})],Zs.prototype,"vertexSymbol",void 0),I([N({value:null})],Zs.prototype,"view",null),I([N({constructOnly:!0,type:AA})],Zs.prototype,"sketchOptions",void 0),Zs=I([ke("esri.widgets.Sketch.SketchViewModel")],Zs);const dYe="sketch:missing-property",mee=t=>`Property '${t}' is missing on SketchViewModel.`;function fYe(t){return t==="polygon"||t==="rectangle"||t==="circle"}function L4(t,e){g0e("undo",t.history.undo,t.history.redo,e)}function F4(t,e){g0e("redo",t.history.redo,t.history.undo,e)}function g0e(t,e,i,s){const n=e.pop();if(!n)return;const r=n.updates,o=[];s.forEach((l,u)=>{const f=r[u];f!=null&&("geometry"in f&&f.geometry!=null&&(o.push({geometry:l.geometry}),l.geometry=f.geometry),"symbol"in f&&f.symbol!=null&&(o.push({symbol:l.symbol}),l.symbol=f.symbol),"undo"in f&&(o.push(f),f[t](l)))}),i.push({updates:o})}function gee(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function h0(t){return{updates:t.map(({geometry:e})=>(e==null?void 0:e.type)==="mesh"?{geometry:e.cloneShallow()}:{geometry:e})}}function z4(t,e){var i;(i=t.tools)==null||i.remove(e),e.destroyed||e.destroy()}function Wr(t){return"requireError"in t&&t.requireError==="aborted"}const pYe=Zs;let xu=class extends Ei{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};I([N({type:Boolean,nonNullable:!0})],xu.prototype,"colorSelection",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"dynamicScaleToggle",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"gridEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"numericInputs",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"gridSnapEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"lineIntervalInput",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"outOfScaleWarning",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"placementButtons",void 0),I([N({type:Boolean,nonNullable:!0})],xu.prototype,"rotateWithMapToggle",void 0),xu=I([ke("esri.widgets.support.GridControls.VisibleElements")],xu);const y0e=xu;let wu=class extends Ei{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new y0e({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};I([N({type:Boolean,nonNullable:!0})],wu.prototype,"enabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"featureEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"gridEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"header",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"layerList",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"gridControls",void 0),I([N({type:y0e,nonNullable:!0})],wu.prototype,"gridControlsElements",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"layerListToggleLayersButton",void 0),I([N({type:Boolean,nonNullable:!0})],wu.prototype,"selfEnabledToggle",void 0),wu=I([ke("esri.widgets.support.SnappingControls.VisibleElements")],wu);const VA=wu;let Dh=class extends Ei{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"point",void 0),I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"polyline",void 0),I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"polygon",void 0),I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"rectangle",void 0),I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"circle",void 0),I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"multipoint",void 0),I([N({type:Boolean,nonNullable:!0})],Dh.prototype,"mesh",void 0),Dh=I([ke("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],Dh);let Ey=class extends Ei{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};I([N({nonNullable:!0})],Ey.prototype,"rectangle-selection",void 0),I([N({nonNullable:!0})],Ey.prototype,"lasso-selection",void 0),I([N({nonNullable:!0})],Ey.prototype,"custom-selection",void 0),Ey=I([ke("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Ey);let _c=class extends Ei{constructor(e){super(e),this.createTools=new Dh,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new Ey,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new VA,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};I([N({type:Dh,nonNullable:!0})],_c.prototype,"createTools",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"directionModePicker",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"duplicateButton",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"labelsToggle",void 0),I([N({type:Ey,nonNullable:!0})],_c.prototype,"selectionTools",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"settingsMenu",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"snappingControls",void 0),I([N({type:VA,nonNullable:!0})],_c.prototype,"snappingControlsElements",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"tooltipsToggle",void 0),I([N({type:Boolean,nonNullable:!0})],_c.prototype,"undoRedoMenu",void 0),_c=I([ke("esri.widgets.Sketch.VisibleElements")],_c);const v0e=_c,PE={anchor:"esri-widget__anchor",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetDisabled:"esri-widget--disabled"};function Dyt(t){return t&&typeof t.highlight=="function"}function mYe(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function kyt(t,e){if(e&&t){const{minScale:i,maxScale:s}=t;if(gYe(i,s))return mYe(e,i,s)}return!0}function gYe(t,e){return t!=null&&t>0||e!=null&&e>0}function Nyt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}function RI(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatures"in t&&"layer"in t&&"view"in t}function P6(){return[1,0,0,1,0,0]}function _0e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function yYe(t,e,i,s,n,r){return[t,e,i,s,n,r]}function vYe(t,e){return new Float64Array(t,e,6)}const b0e=P6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:b0e,clone:_0e,create:P6,createView:vYe,fromValues:yYe},Symbol.toStringTag,{value:"Module"}));function yee(t){let e,i,s=[],n=!1;function r(...o){return n&&e===this&&_Ye(o,s)||(i=t.apply(this,o),e=this,s=o,n=!0),i}return r}function _Ye(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}let bYe=class{constructor(e){this._observable=new IC,this._set=new Set(e)}get size(){return mi(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return mi(this._observable),this._set.entries()}forEach(e,i){mi(this._observable),this._set.forEach((s,n)=>e.call(i,s,n,this),i)}has(e){return mi(this._observable),this._set.has(e)}keys(){return mi(this._observable),this._set.keys()}values(){return mi(this._observable),this._set.values()}[Symbol.iterator](){return mi(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}},LI=class extends Ei{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,s={}){return this._installWatch(e,i,s,xi)}addWhen(e,i,s={}){return this._installWatch(e,i,s,Eg)}addOnCollectionChange(e,i,{initial:s=!1,final:n=!1}={}){const r=++this._handleId;return this.addHandles([mf(e,"after-changes",this._createSyncUpdatingCallback(),Jp),mf(e,"change",i,{onListenerAdd:s?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],r),ds(()=>this.removeHandles(r))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(ds(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(q4)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const s=()=>this.removeHandles(i);return e.then(s,s),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,s={},n){const r=++this._handleId;s.sync||this._installSyncUpdatingWatch(e,r);const o=n(e,i,s);return this.addHandles(o,r),ds(()=>this.removeHandles(r))}_installSyncUpdatingWatch(e,i){const s=this._createSyncUpdatingCallback(),n=xi(e,s,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(q4),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Cq(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(q4))}),q4)}}};I([N({readOnly:!0})],LI.prototype,"updating",void 0),LI=I([ke("esri.core.support.UpdatingHandles")],LI);const q4=-42;function FI(t,e){return t===e||t!=null&&e!=null&&Jo(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function cN(t,e,i){return t===e||t!=null&&e!=null&&Jo(t.spatialReference,e.spatialReference)&&tg(t.x,e.x,i)&&tg(t.y,e.y,i)&&tg(t.z??0,e.z??0,i)&&tg(t.m??0,e.m??0,i)}var TE;function Ryt(t){return t===TE.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(TE||(TE={}));const Lyt=["freehand","hybrid","click"],x0e="click";let xYe=class{constructor({consumesClicks:e,grabbableForEvent:i}){this.events=new Sa,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=i}destroy(){}intersectionDistance(e,i){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}};var Lr;(function(t){t[t.Z=0]="Z",t[t.M=1]="M"})(Lr||(Lr={}));let wYe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(vr())}pointToVector(e){return this._tag(Bu(e.x,e.y))}arrayToVector(e){return this._tag(Bu(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(e,i,s,n){return OG(n,e,i,s)}addDelta(e,i,s){e[0]+=i,e[1]+=s}distance(e,i){return JC(e,i)}getZ(e,i=void 0){return i}hasZ(){return!1}getM(e,i=void 0){return i}hasM(){return!1}clone(e){return this._tag(ime(e))}copy(e,i){return Upe(i,e)}fromXYZ(e){return this._tag(Bu(e[0],e[1]))}toXYZ(e,i=Nt()){return Vn(i,e[0],e[1],0)}pointToXYZ(e,i=Nt()){return Vn(i,e.x,e.y,0)}equals(e,i){return eme(e,i)}_tag(e){return e}},vee=class{constructor(e,i){this._valueType=e,this.spatialReference=i}createVector(){return this._tag(Nt())}pointToVector(e){return this._tag(_l(e.x,e.y,this._valueType===Lr.Z?e.z:e.m))}arrayToVector(e){return this._tag(_l(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===Lr.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=this._valueType===Lr.Z?e[2]:void 0,i.m=this._valueType===Lr.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=this._valueType===Lr.Z?e[2]:void 0,i.m=this._valueType===Lr.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(!e)return;i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"});const s=this._valueType===Lr.Z,n=this._valueType===Lr.M;return i.x=e[0],i.y=e[1],i.z=s?e[2]:void 0,i.m=n?e[2]:void 0,i.hasZ=s,i.hasM=n,i.spatialReference=this.spatialReference,i}lerp(e,i,s,n){return Cx(n,e,i,s)}addDelta(e,i,s,n){e[0]+=i,e[1]+=s,this._valueType===Lr.Z&&(e[2]+=n)}distance(e,i){return this._valueType===Lr.Z?Xg(e,i):JC(e,i)}getZ(e,i=void 0){return this._valueType===Lr.Z?e[2]:i}hasZ(){return this._valueType===Lr.Z}getM(e,i=void 0){return this._valueType===Lr.M?e[2]:i}hasM(){return this._valueType===Lr.M}clone(e){return this._tag(Hue(e))}copy(e,i){return Jl(i,e)}fromXYZ(e,i=0,s=0){return this._tag(_l(e[0],e[1],this._valueType===Lr.Z?e.length>2?e[2]:i:s))}toXYZ(e,i=Nt()){return Vn(i,e[0],e[1],this._valueType===Lr.Z?e[2]:0)}pointToXYZ(e,i=Nt()){return Vn(i,e.x,e.y,this._valueType===Lr.Z?e.z??0:0)}equals(e,i){return CE(e,i)}_tag(e){return e}},SYe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(vm())}pointToVector(e){return this._tag(ju(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(ju(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(e,i,s,n){return hA(n,e,i,s)}addDelta(e,i,s,n){e[0]+=i,e[1]+=s,e[2]+=n}distance(e,i){return Xg(e,i)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(Afe(e))}copy(e,i){return O2(i,e)}fromXYZ(e,i=0,s=0){return this._tag(ju(e[0],e[1],e.length>2?e[2]:i,s))}toXYZ(e,i=Nt()){return Vn(i,e[0],e[1],e[2])}pointToXYZ(e,i=Nt()){return Vn(i,e.x,e.y,e.z??0)}equals(e,i){return BC(e,i)}_tag(e){return e}};function w0e(t,e,i){return t&&e?new SYe(i):e?new vee(Lr.M,i):t?new vee(Lr.Z,i):new wYe(i)}var BF;let Eb=BF=class extends Hs(wt){constructor(t){super(t),this.type="georeferenced",this.origin=null}};Eb.absolute=new BF,I([ni({georeferenced:"georeferenced"},{readOnly:!0})],Eb.prototype,"type",void 0),I([N({type:[Number],nonNullable:!1,json:{write:!0}})],Eb.prototype,"origin",void 0),Eb=BF=I([ke("esri.geometry.support.MeshGeoreferencedVertexSpace")],Eb);const EYe=Eb;let rS=class extends Hs(wt){constructor(e){super(e),this.type="local",this.origin=Nt()}};I([ni({local:"local"},{readOnly:!0})],rS.prototype,"type",void 0),I([N({type:[Number],nonNullable:!0,json:{write:!0}})],rS.prototype,"origin",void 0),rS=I([ke("esri.geometry.support.MeshLocalVertexSpace")],rS);const CYe=rS;function _ee(){return zt.getLogger("esri.geometry.Mesh")}function jyt(t){return!nj(t)}function nj(t){return t.origin!=null}function PYe(t){return nj(t.vertexSpace)}function Byt(t,e){if(!nj(t))return null;const[i,s,n]=t.origin;return new Yi({x:i,y:s,z:n,spatialReference:e})}function Hyt(t,e){const{x:i,y:s,z:n,spatialReference:r}=t,o=[i,s,n??0];return(e==null?void 0:e.geographic)!==void 0&&(v2(_ee(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),e.vertexSpace&&_ee().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),((e==null?void 0:e.vertexSpace)??IYe(e==null?void 0:e.geographic)??TYe(r))==="local"?new CYe({origin:o}):new EYe({origin:o})}function TYe(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}function IYe(t){return t==null?void 0:t?"local":"georeferenced"}function Uyt(t,e){return t.type===e.type&&(t.origin===e.origin||t.origin!=null&&e.origin!=null&&hn(t.origin,e.origin))}function MYe(t){return"declaredClass"in t}function bee(t){return"declaredClass"in t}function AYe(t){return"declaredClass"in t}function Yyt(t,e){return t?AYe(t)?t:new tm({layer:e,sourceLayer:e,visible:t.visible,symbol:Ue(t.symbol),attributes:Ue(t.attributes),geometry:DYe(t.geometry)}):null}function DYe(t){return t==null?null:MYe(t)?t:MC(kYe(t))}function kYe(t){const{wkid:e,wkt:i,wkt2:s,latestWkid:n}=t.spatialReference,r={wkid:e,wkt:i,wkt2:s,latestWkid:n};switch(t.type){case"point":{const{x:o,y:l,z:u,m:f}=t;return{x:o,y:l,z:u,m:f,spatialReference:r}}case"polygon":{const{rings:o,hasZ:l,hasM:u}=t;return{rings:xee(o),hasZ:l,hasM:u,spatialReference:r}}case"polyline":{const{paths:o,hasZ:l,hasM:u}=t;return{paths:xee(o),hasZ:l,hasM:u,spatialReference:r}}case"extent":{const{xmin:o,xmax:l,ymin:u,ymax:f,zmin:y,zmax:_,mmin:x,mmax:S,hasZ:P,hasM:A}=t;return{xmin:o,xmax:l,ymin:u,ymax:f,zmin:y,zmax:_,mmin:x,mmax:S,hasZ:P,hasM:A,spatialReference:r}}case"multipoint":{const{points:o,hasZ:l,hasM:u}=t;return{points:E0e(o)?S0e(o):o,hasZ:l,hasM:u,spatialReference:r}}default:return}}function xee(t){return NYe(t)?t.map(e=>S0e(e)):t}function S0e(t){return t.map(e=>Array.from(e))}function NYe(t){for(const e of t)if(e.length!==0)return E0e(e);return!1}function E0e(t){return t.length>0&&(fC(t[0])||pC(t[0]))}function GA(t,e){if(!t)return null;let i;if(bee(t)){if(e==null)return t.clone();if(bee(e))return e.copy(t)}return e!=null?(i=e,i.x=t.x,i.y=t.y,i.spatialReference=t.spatialReference,t.hasZ?(i.z=t.z,i.hasZ=t.hasZ):(i.z=void 0,i.hasZ=!1),t.hasM?(i.m=t.m,i.hasM=!0):(i.m=void 0,i.hasM=!1)):(i=Af(t.x,t.y,t.z,t.spatialReference),t.hasM&&(i.m=t.m,i.hasM=!0)),i}function $Ye(t){const{wkid:e,wkt:i,wkt2:s,latestWkid:n}=t,r={wkid:e,wkt:i,wkt2:s,latestWkid:n};return qi.fromJSON(r)}function OYe(t,e){if(!e.supported)return;let i=1/0,s=-1/0;const n=e.upperBoundX-e.lowerBoundX;t.forEach(o=>{let l=o.pos[0];for(;l<e.lowerBoundX;)l+=n;for(;l>e.upperBoundX;)l-=n;i=Math.min(i,l),s=Math.max(s,l),o.pos[0]=l});const r=s-i;n-r<r&&t.forEach(o=>{o.pos[0]<0&&(o.pos[0]+=n)})}function RYe(t,e){const i=Hb(t);return e===TE.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let o5=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},sm=class{constructor(e,i,s){this.component=e,this.leftVertex=i,this.rightVertex=s,this.type="edge",i.rightEdge=this,s.leftEdge=this}},jA=class{constructor(e,i){this._spatialReference=e,this._viewingMode=i,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||OYe(this.vertices,RYe(this._spatialReference,this._viewingMode))}updateVertexIndex(e,i){if(this.vertices.length===0)return;const s=this.vertices[0];let n=null,r=e,o=i;do n=r,n.index=o++,r=n.rightEdge?n.rightEdge.rightVertex:null;while(r!=null&&r!==s);n.leftEdge&&n!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(n),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,i){const s=this.vertices[e];this.vertices[e]=this.vertices[i],this.vertices[i]=s}iterateVertices(e){if(this.vertices.length===0)return;const i=this.vertices[0];let s=i;do e(s,s.index),s=s.rightEdge!=null?s.rightEdge.rightVertex:null;while(s!==i&&s!=null)}},HF=class C0e extends Sa{constructor(e,i){super(),this.type=e,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:this.type}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const i of e.vertices)yield i}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],i=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const n=[];let r=s.vertices.find(l=>l.leftEdge==null);const o=r;do n.push(i(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null;while(r&&r!==o);e.push(n)}return new If({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],i=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const n=[],r=s.vertices[0];let o=r;const l=o;do n.push(i(o.pos)),o=o.rightEdge!=null?o.rightEdge.rightVertex:null;while(o&&o!==l);s.isClosed()&&n.push(i(r.pos)),e.push(n)}return new Za({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,i){const s=e.spatialReference,n=w0e(e.hasZ,e.hasM,s),r=new C0e(e.type,n);switch(e.type){case"polygon":LYe(r,e,i);break;case"polyline":FYe(r,e,i);break;case"point":wee(r,e,i);break;case"mesh":wee(r,e.origin,i),r._geometry=e,r._dirty=!1}return r}};function LYe(t,e,i){const s=e.spatialReference,n=t.coordinateHelper,r=e.rings;for(let o=0;o<r.length;++o){const l=r[o],u=new jA(s,i);u.index=o;const f=l.length>2&&ff(l[0],l[l.length-1]),y=f?l.length-1:l.length;for(let x=0;x<y;++x){const S=n.arrayToVector(l[x]),P=new o5(u);u.vertices.push(P),P.pos=S,P.index=x}const _=u.vertices.length-1;for(let x=0;x<_;++x){const S=u.vertices[x],P=u.vertices[x+1],A=new sm(u,S,P);u.edges.push(A)}if(f){const x=new sm(u,u.vertices[u.vertices.length-1],u.vertices[0]);u.edges.push(x)}t.components.push(u)}}function FYe(t,e,i){const s=e.spatialReference,n=t.coordinateHelper,r=e.paths;for(let o=0;o<r.length;++o){const l=r[o],u=new jA(s,i);u.index=o;const f=l.length;for(let _=0;_<f;++_){const x=n.arrayToVector(l[_]),S=new o5(u);u.vertices.push(S),S.pos=x,S.index=_}const y=u.vertices.length-1;for(let _=0;_<y;++_){const x=u.vertices[_],S=u.vertices[_+1],P=new sm(u,x,S);u.edges.push(P)}t.components.push(u)}}function wee(t,e,i){const s=e.spatialReference,n=t.coordinateHelper,r=new jA(s,i);r.index=0;const o=new o5(r);o.index=0,o.pos=n.pointToVector(e),r.vertices.push(o),t.components.push(r)}function Jw(t){return t.type==="mesh"}var ql;(function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(ql||(ql={}));let zYe=class{constructor(e,i,s){this._editGeometry=e,this._component=i,this._pos=s,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";this._addedVertex==null&&(e="apply",this._addedVertex=new o5(this._component));const i=this._component.getLastVertex();if(i==null)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let s=null;i.rightEdge&&(this._originalEdge=i.rightEdge,s=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._left==null&&(this._left=new sm(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,this._originalEdge!=null&&s!=null&&(this._right==null&&(this._right=new sm(this._component,this._addedVertex,s)),this._component.edges.push(this._right),s.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){this._addedVertex!=null&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),this._left!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),this._right!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),this._originalEdge!=null&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),this._left!=null?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},qYe=class P0e{constructor(e,i,s){this._editGeometry=e,this._vertices=i,this.operation=s,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let i=0;i<e._vertices.length;++i)if(e._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof P0e&&this.canAccumulate(e))&&(this._vertices.forEach(i=>this.operation.accumulate(i,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}};var zu;(function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"})(zu||(zu={}));let VYe=class{constructor(e,i,s=0){this._editGeometry=e,this._vertices=i,this._minNumberOfVertices=s,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(s=>{const n=this._removeVertex(s);n!=null&&i.push(n)}),e="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;(e=this.removedVertices)==null||e.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const i=e.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const s={removedVertex:e,createdEdge:null},n=e.leftEdge,r=e.rightEdge;return i.vertices.splice(i.vertices.indexOf(e),1),n&&(i.edges.splice(i.edges.indexOf(n),1),n.leftVertex.rightEdge=null),r&&(i.edges.splice(i.edges.indexOf(r),1),r.rightVertex.leftEdge=null),e.index===0&&r&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(r.rightVertex),0),n&&r&&(s.createdEdge=new sm(i,n.leftVertex,r.rightVertex),i.edges.push(s.createdEdge)),r&&i.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),s}_undoRemoveVertex(e){const i=e.removedVertex,s=e.removedVertex.component,n=i.leftEdge,r=i.rightEdge;e.createdEdge&&s.edges.splice(s.edges.indexOf(e.createdEdge),1),s.vertices.push(i),n&&(s.edges.push(n),n.leftVertex.rightEdge=n),r&&(s.edges.push(r),r.rightVertex.leftEdge=r),s.updateVertexIndex(i,i.index)}},GYe=class{constructor(e,i,s){this._editGeometry=e,this._edge=i,this._t=s,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const i=this._edge,s=i.component,n=i.leftVertex,r=i.rightVertex;s.edges.splice(s.edges.indexOf(i),1),this.createdVertex==null&&(e="apply",this.createdVertex=new o5(i.component)),s.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),this._left==null&&(this._left=new sm(s,n,this.createdVertex)),this._left.leftVertex.leftEdge?s.edges.push(this._left):s.edges.unshift(this._left),n.rightEdge=this._left,this._right==null&&(this._right=new sm(s,this.createdVertex,r)),s.edges.push(this._right),r.leftEdge=this._right,s.updateVertexIndex(this.createdVertex,n.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(this.createdVertex==null||this._left==null||this._right==null)return null;const e=this._edge,i=e.component,s=this.createdVertex.leftEdge,n=this.createdVertex.rightEdge,r=s==null?void 0:s.leftVertex,o=n==null?void 0:n.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),r&&(r.rightEdge=e),o&&(o.leftEdge=e),r&&i.updateVertexIndex(r,r.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},jYe=class T0e{constructor(e,i,s){this._editGeometry=e,this._vertex=i,this._pos=s}apply(){const e=this._originalPosition==null;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof T0e&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},BYe=class{constructor(e,i){this._editGeometry=e,this._component=i,this._createdEdge=null}apply(){let e="redo";if(this._createdEdge==null){e="apply";const i=this._component.getFirstVertex(),s=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||i==null||s==null)return;this._createdEdge=new sm(this._component,s,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){this._createdEdge!=null&&(gM(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},See=class I0e{constructor(e,i,s,n){this._editGeometry=e,this.dx=i,this.dy=s,this.dz=n,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const i=this._editGeometry.geometry;return e instanceof I0e&&e._editGeometry.geometry===i&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,i,s,n){const r=this._editGeometry.geometry;r.offset(i,s,n);const o=this._editGeometry.components[0].getFirstVertex();if(!o)return;const l=this._editGeometry.coordinateHelper;o.pos=l.pointToVector(r.origin),this._editGeometry.notifyChanges({operation:e,updatedVertices:[o]})}},HYe=class M0e{constructor(e,i,s,n){this._helper=e,this.dx=i,this.dy=s,this.dz=n}_move(e,i,s,n){this._helper.addDelta(e.pos,i,s,n)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof M0e}accumulate(e,i){this._move(e,i.dx,i.dy,i.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},UYe=class UF{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,i,s,n=0,r=US.IMMEDIATE){this._helper=e,this._planeType=i,this._edge=s,this.distance=n,this._plane=el(),this._offsetPlane=el(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,r===US.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var r,o,l,u;const e=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((o=(r=this._edge.leftVertex.leftEdge)==null?void 0:r.leftVertex)==null?void 0:o.pos),s=this._toXYZ(this._edge.rightVertex.pos),n=this._toXYZ((u=(l=this._edge.rightVertex.rightEdge)==null?void 0:l.rightVertex)==null?void 0:u.pos);this._edgeDirection=OF(Nt(),e,s),i?(this._left=this._computeNeighbor(e,i,this._edgeDirection),this._right=this._computeNeighbor(s,n,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(s,n,this._edgeDirection),this._left=this._computeNeighbor(e,i,this._edgeDirection,this._right))}_toXYZ(e){return e!=null?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,i,s,n){const r=Nt();if(i){OF(r,e,i);const o=!this._passesBisectingAngleThreshold(r,s);return{start:e,end:i,direction:o?this._bisectVectorsPerpendicular(s,r):r,isOriginalDirection:!o}}return this._helper.hasZ()?n&&(Gr(r,s,n.direction),Gr(r,r,s),Eo(r,r),Math.sign(r[1])!==Math.sign(s[0])&&qc(r,r,-1)):Vn(r,-s[1],s[0],0),{start:e,end:i,direction:r,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,i){const s=Math.abs(Ime(i,e));return s>=Eee&&s<=Math.PI-Eee}_bisectVectorsPerpendicular(e,i){const s=Es(e,i)<0?e:NF(Nt(),e),n=Math.abs(Es(s,i));if(!(n<Cee||n>1-Cee))return this._bisectDirection(s,i);const r=Gr(Nt(),s,[0,0,1]);return Eo(r,r)}_bisectDirection(e,i){const s=Wl(Nt(),e,i);return Eo(s,s)}_initializePlane(){const e=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);Es(e,i)<0&&NF(i,i),Tx(this._left.start,this._bisectDirection(e,i),this._plane)}_computeNormalDirection(e){const i=Gr(Nt(),e.direction,this._edgeDirection);Eo(i,i);const s=Gr(Nt(),this._edgeDirection,i);return this._planeType===YF.XY&&(s[2]=0),Eo(s,s)}_initializeDistanceConstraints(){this._left.end==null||this.requiresSplitEdgeLeft||this._updateDistanceConstraint(ef(this._plane,this._left.end)),this._right.end==null||this.requiresSplitEdgeRight||this._updateDistanceConstraint(ef(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const i=e,s=this._edgeDirection,n=Wl(Nt(),this._left.start,this._left.direction),r=Wl(Nt(),this._right.start,this._right.direction),o=this._pointInBasis2D(vr(),i,s,this._left.start),l=this._pointInBasis2D(vr(),i,s,n),u=this._pointInBasis2D(vr(),i,s,this._right.start),f=this._pointInBasis2D(vr(),i,s,r),[y]=dUe({start:l,end:o,type:qn.LINE},{start:f,end:u,type:qn.LINE});if(!y)return;const _=Po(vr(),o,l);Kpe(_,_);const x=Po(vr(),y,l),S=Yg(_,x),P=Wl(Nt(),n,qc(Nt(),this._left.direction,-S)),A=ef(e,P);this._updateDistanceConstraint(A)}_pointInBasis2D(e,i,s,n){return e[0]=HS(i,n),e[1]=HS(s,n),e}_offset(e,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),NI(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const s=(r,o,l)=>o!=null&&jG(this._offsetPlane,r,Wl(Nt(),r,o),l),n=Nt();(e===this._edge.leftVertex?s(this._left.start,this._left.direction,n):s(this._right.start,this._right.direction,n))&&this._helper.copy(this._helper.fromXYZ(n,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=kme(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return ef(this.plane,this._pointToXYZ(e))}clampedStartAndEnd(e){const i=this._helper.toXYZ(this._helper.pointToVector(e)),s=BG(this._plane,i,Nt()),n=ef(this._plane,i),r=Xu(n,this._minDistance,this._maxDistance);return Cx(i,s,i,r/n),{start:s,end:i}}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof UF&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&CE(this._plane,e._plane)}accumulate(e,i){const s=this._plane[3]-i._plane[3]+i.distance;this._offset(e,s)}accumulateParams(e){const i=e.distance-e._plane[3];this.distance=i+this._plane[3]}clone(){const e=new UF(this._helper,this._planeType,this._edge,this.distance,US.DEFERRED);return NI(e._plane,this._plane),NI(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=Jl(Nt(),this._edgeDirection),e}_maybeEqualsVec3(e,i){return e==null&&i==null||e!=null&&i!=null&&CE(e,i)}_cloneNeighbor({start:e,end:i,direction:s,isOriginalDirection:n}){return{start:Jl(Nt(),e),end:i!=null?Jl(Nt(),i):null,direction:Jl(Nt(),s),isOriginalDirection:n}}};const Eee=mue(15),Cee=.001;var YF,US;(function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"})(YF||(YF={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(US||(US={}));let YYe=class A0e{constructor(e,i,s=zu.CUMULATIVE){this.origin=e,this.angle=i,this._accumulationType=s}_rotate(e,i){Jpe(e.pos,e.pos,this.origin,i)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof A0e&&ff(this.origin,e.origin)}accumulate(e,i){const s=i._accumulationType===zu.REPLACE;this._rotate(e,s?i.angle-this.angle:i.angle)}accumulateParams(e){const i=e._accumulationType===zu.REPLACE;this.angle=i?e.angle:this.angle+e.angle}},XYe=class D0e{constructor(e,i,s,n,r=zu.CUMULATIVE){this.origin=e,this.axis1=i,this.factor1=s,this.factor2=n,this._accumulationType=r,this.axis2=Bu(i[1],-i[0])}_scale(e,i,s){kF(e.pos,e.pos,this.origin,this.axis1,i),kF(e.pos,e.pos,this.origin,this.axis2,s)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof D0e&&ff(this.origin,e.origin)&&ff(this.axis1,e.axis1)}accumulate(e,i){i._accumulationType===zu.REPLACE?this._scale(e,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(e,i.factor1,i.factor2)}accumulateParams(e){const i=e._accumulationType===zu.REPLACE;this.factor1=i?e.factor1:this.factor1*e.factor1,this.factor2=i?e.factor2:this.factor2*e.factor2}},WYe=class k0e{constructor(e,i){this._editGeometry=e,this._newPositions=i}apply(){const e=this._originalPositions==null?"apply":"redo";if(!this._originalPositions){const i=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(s=>i.clone(s.pos))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof k0e&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,i){const s=this._editGeometry.coordinateHelper,n=this._editGeometry.allVertices;for(let r=0;r<n.length;r++)s.copy(i[r],n[r].pos);this._editGeometry.components.forEach(r=>r.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:n})}};var N0e;const ZYe=Symbol();let KYe=class{constructor(e){this._operations=[],this._closed=!1,this[N0e]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(e)||(this._operations.push(e),e.apply()),!0}};N0e=ZYe;let XF=class $0e extends Sa{constructor(e,i){super(),this.data=e,this.viewingMode=i,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",s=>{s.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:s.addedVertices,operation:s.operation}),s.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:s.removedVertices,operation:s.operation}),s.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:s.updatedVertices,operation:s.operation})})}destroy(){this._listener.remove()}splitEdge(e,i){return this._apply(new GYe(this.data,e,i))}updateVertices(e,i,s=ql.ACCUMULATE_STEPS){return this._apply(new qYe(this.data,e,i),s)}move(e,i,s,n=ql.ACCUMULATE_STEPS){return Jw(this.data)?this._apply(new See(this.data,e,i,s),n):this.moveVertices(this.data.allVertices,e,i,s,n)}moveVertices(e,i,s,n,r=ql.ACCUMULATE_STEPS){return Jw(this.data)?this._apply(new See(this.data,i,s,n),r):this.updateVertices(e,new HYe(this.data.coordinateHelper,i,s,n),r)}scale(e,i,s,n,r=ql.ACCUMULATE_STEPS,o=zu.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,i,s,n,r,o)}scaleVertices(e,i,s,n,r,o=ql.ACCUMULATE_STEPS,l=zu.CUMULATIVE){return this.updateVertices(e,new XYe(i,s,n,r,l),o)}rotate(e,i,s=ql.ACCUMULATE_STEPS,n=zu.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,i,s,n)}rotateVertices(e,i,s,n=ql.ACCUMULATE_STEPS,r=zu.CUMULATIVE){return this.updateVertices(e,new YYe(i,s,r),n)}removeVertices(e){return this._apply(new VYe(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new zYe(this.data,this.data.components[0],e))}setVertexPosition(e,i){return this._apply(new jYe(this.data,e,i))}offsetEdge(e,i,s,n=ql.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new UYe(this.data.coordinateHelper,e,i,s),n)}trySetGeometry(e,i=ql.ACCUMULATE_STEPS){const{data:s}=this,{coordinateHelper:n}=s;if(s.type!==e.type||!s.spatialReference.equals(e.spatialReference)||n.hasZ()!==e.hasZ||n.hasM()!==e.hasM||!xDe(s.geometry,e)||Jw(s))return;const r=Array.from(HF.fromGeometry(e,this.viewingMode).iterateVertices(),o=>o.pos);return this.setVertexPositions(r,i)}setVertexPositions(e,i=ql.ACCUMULATE_STEPS){return this._apply(new WYe(this.data,e),i)}createResetState(){if(Jw(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return ds(()=>this.trySetGeometry(e))}closeComponent(e){return this.data.components.includes(e)?this._apply(new BYe(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new KYe;return this._apply(e),ds(()=>e.close())}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,i=ql.ACCUMULATE_STEPS){return i!==ql.NEW_STEP&&this.lastOperation!=null&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!Jw(this.data))return ds();const e=this.data.geometry,{vertexSpace:i}=e;if(i.origin){const n=ic(i.origin);return ds(()=>{e.vertexSpace.origin=n})}const s=e.vertexAttributes.clonePositional();return ds(()=>{e.vertexAttributes=s,e.vertexAttributesChanged()})}static fromGeometry(e,i){return new $0e(HF.fromGeometry(e,i),i)}};function JYe(t,e){let i=null,s=null;return n=>{if(n.action==="cancel")return void(s!=null&&(s.execute({action:"cancel"}),i=null,s=null));const r={action:n.action,screenStart:n.start,screenEnd:n.screenPoint};n.action==="start"&&i==null&&(i=new WF,s=new WF,e(t,i,s,n.pointerType,r)),i!=null&&i.execute(r),n.action==="end"&&i!=null&&(i=null,s=null)}}function uN(t,e){return t.events.on("drag",JYe(t,e))}function ivt(t,e){const i=[t.x,t.y,t.z??0],s=e,n=[Math.cos(s),Math.sin(s)],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(r===0)return null;n[0]/=r,n[1]/=r;const o=l=>{const u=(l.x-i[0])*n[0]+(l.y-i[1])*n[1];l.x=i[0]+u*n[0],l.y=i[1]+u*n[1]};return l=>(o(l.mapStart),o(l.mapEnd),{...l,axis:n})}function QYe(t){let e=null;return i=>{if(i.action==="start"&&(e=eXe(t,i.mapStart.spatialReference)),e==null)return null;const s=i.mapEnd.x-i.mapStart.x,n=i.mapEnd.y-i.mapStart.y,r=(i.mapEnd.z??0)-(i.mapStart.z??0);return e.move(s,n,r,i.action),{...i,translationX:s,translationY:n,translationZ:r}}}function Pee(t,e){return t==null?null:t.spatialReference.equals(e)?t.clone():gf(t,e)}function eXe(t,e){const i=t.operations;if(!i)return null;const s=i.data.geometry,n=$Ye(e);if(s.spatialReference.equals(n))return hN(t,i,()=>{});if(s.type!=="mesh"){const r=Pee(s,n);if(r==null)return null;const o=s.spatialReference;return hN(t,XF.fromGeometry(r,i.viewingMode),()=>{const l=gf(s,o);i.trySetGeometry(l)})}if(PYe(s)){const r=Pee(s.origin,n);if(!r)return null;const o=s.spatialReference,l=XF.fromGeometry(r,i.viewingMode);return hN(t,i,()=>{const u=gf(l.data.geometry,o),f=u.x-s.origin.x,y=u.y-s.origin.y,_=(u.z??0)-(s.origin.z??0);i.move(f,y,_)})}return null}function hN(t,e,i){let s=0,n=0,r=0;return{move:(o,l,u,f)=>{var S;f==="start"&&(s=0,n=0,r=0);const y=o-s,_=l-n,x=u-r;e.move(y,_,x),s+=y,n+=_,r+=x,i(),f==="end"&&((S=t.endInteraction)==null||S.call(t))}}}function svt(t,e=null,i){var o;let s=null;const n=e==null||(o=t.spatialReference)!=null&&o.equals(e)?l=>l:l=>l!=null?gf(l,e):l,r={exclude:[],...i};return l=>{if(l.action==="start"&&(s=n(t.toMap(l.screenStart,r))),s==null)return null;const u=n(t.toMap(l.screenEnd,r));return u!=null?{...l,mapStart:s,mapEnd:u}:null}}function nvt(t){const e=t.map(i=>QYe(i)).filter(yl);return i=>{const s=i.mapEnd.x-i.mapStart.x,n=i.mapEnd.y-i.mapStart.y,r=i.mapEnd.z-i.mapStart.z;return e.forEach(o=>o(i)),{...i,translationX:s,translationY:n,translationZ:r}}}function tXe(t){var i;const e=(i=t.operations)==null?void 0:i.createResetState();return s=>(e==null||e.remove(),s)}function rvt(t){const e=t.map(i=>tXe(i)).filter(i=>i!=null);return i=>(e.forEach(s=>s(i)),i)}function ovt(){let t=0,e=0,i=0;return s=>{s.action==="start"&&(t=s.mapStart.x,e=s.mapStart.y,i=s.mapStart.z);const n=s.mapEnd.x-t,r=s.mapEnd.y-e,o=s.mapEnd.z-i;return t=s.mapEnd.x,e=s.mapEnd.y,i=s.mapEnd.z,{...s,mapDeltaX:n,mapDeltaY:r,mapDeltaZ:o,mapDeltaSpatialReference:s.mapStart.spatialReference}}}function avt(){let t=0,e=0;return i=>{i.action==="start"&&(t=i.screenStart.x,e=i.screenStart.y);const s=i.screenEnd.x-t,n=i.screenEnd.y-e;return t=i.screenEnd.x,e=i.screenEnd.y,{...i,screenDeltaX:s,screenDeltaY:n}}}function lvt(t,e){let i=null,s=0,n=0;return r=>{var f;if(r.action==="start"&&(i=(f=t.toScreen)==null?void 0:f.call(t,e),i!=null&&(i.x<0||i.x>t.width||i.y<0||i.y>t.height?i=null:(s=r.screenStart.x-i.x,n=r.screenStart.y-i.y))),i==null)return null;const o=Xu(r.screenEnd.x-s,0,t.width),l=Xu(r.screenEnd.y-n,0,t.height),u=Qp(o,l);return r.screenStart=i,r.screenEnd=u,r}}const iXe=()=>{};let WF=class O0e{constructor(){this.execute=iXe}next(e,i=new O0e){return e!=null&&(this.execute=s=>{const n=e(s);n!=null&&i.execute(n)}),i}};function sXe(t,e,i=[]){if(t.type==="2d")return n=>n;let s=null;return n=>{n.action==="start"&&(s=t.toMap(n.screenStart,{exclude:i}),s!=null&&(s.z=y6(s,t,e)));const r=t.toMap(n.screenEnd,{exclude:i});r!=null&&(r.z=y6(r,t,e));const o=s!=null&&r!=null?{sceneStart:s,sceneEnd:r}:null;return{...n,scenePoints:o}}}function Tee(t,e,i){const s=e.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,n=GA(t);return n.z=s,n.hasZ=!0,n.z=y6(n,e,i),n}function cvt(t,e){if(t.type==="2d")return s=>s;let i=null;return s=>{s.action==="start"&&(i=Tee(s.mapStart,t,e));const n=Tee(s.mapEnd,t,e),r=i!=null&&n!=null?{sceneStart:i,sceneEnd:n}:null;return{...s,scenePoints:r}}}function uvt(t,e,i,s,n,r){let o="geodesic",l=g6(i);const u=To();return og(t,e,s,u),u[2]=0,l&&Ag(u,i,u,l)||(o="euclidean",l=i),{mode:o,view:e,elevationInfo:s,hasZ:n,directionMode:r,spatialReference:t.spatialReference,measurementSR:l,origin:u}}function nXe(t,e,i){if(e==null||t==null)return;const s=s9e(i.measurementSR);if(s==null)return;const n=BA(t,i);if(n==null)return;const r=xA(e,s);return new JG(n,r)}function rXe(t,e,i,s){if(i==null||t==null)return;const n=BA(t,s);if(n==null)return;const r=_f(i),o=10,l=f=>{if(f==null)return;const y=To(),_=vf(f,"degrees","geographic");return oBe(y,n,s.measurementSR,o,_,s.mode)?new PUe(n,y):void 0},u=()=>{if(e!=null&&t!=null)return _f(RG(e,t))};switch(s.directionMode){case so.Absolute:return l(r);case so.Relative:{const f=u();return f==null?void 0:l(f+r)}case so.RelativeBilateral:{const f=u();return f==null?void 0:r5([l(f+r),l(f-r)])}}}function R0e(t,e){const i=HA(t,e);return i!=null?new s0e(i):void 0}function L0e(t,e,i){const{context:s,longitude:n,latitude:r,direction:o,distance:l,elevation:u}=i;if(n!=null||r!=null||l!=null||u!=null||o!=null){if(n!=null||r!=null){const f=_f(n),y=_f(r),_=HA(u,s);return new ij(f,y,_)}return oXe(t,e,i)}}function oXe(t,e,{context:i,direction:s,distance:n,elevation:r}){if(e==null)return R0e(r,i);const{view:o,elevationInfo:l,measurementSR:u}=i,f=og(e,o,l);if(!u||!Ag(f,e.spatialReference,Iee,u))return;const[y,_]=Iee,x=n!=null?xA(n,"meters"):void 0,S=_f(s),P=HA(r,i),A=$=>{const F=new o0e([y,_],u,x,P,$);return x==null||$==null||P==null&&i.hasZ?F:new zv(F.closestTo(f))};if(S==null)return A(void 0);const k=()=>{if(t!=null&&e!=null)return _f(RG(t,e))};switch(i.directionMode){case so.Absolute:return A(S);case so.Relative:{const $=k();return $==null?void 0:A($+S)}case so.RelativeBilateral:{const $=k();return $==null?void 0:r5([A($+S),A($-S)])}}}function aXe(t){return t.context.mode==="geodesic"?L0e(null,null,t):F0e(t)}function lXe(t,e,i){const{context:s,x:n,y:r,distance:o,direction:l,elevation:u}=i;return s.mode==="geodesic"?L0e(e,t,i):n!=null||r!=null?F0e(i):cXe([nXe(t,o,s),rXe(t,e,l,s),R0e(u,s)])}function F0e({x:t,y:e,elevation:i,context:s}){V4.x=(t==null?void 0:t.value)??0,V4.y=(e==null?void 0:e.value)??0,V4.spatialReference=s.spatialReference;const n=BA(V4,s,dXe);return new ij(t!=null&&n!=null?n[0]:void 0,e!=null&&n!=null?n[1]:void 0,HA(i,s))}function cXe(t){let e;for(const i of t)i&&(e=(e==null?void 0:e.intersect(i))??i);return e}function BA(t,e,i=To()){const{view:s,elevationInfo:n,measurementSR:r,origin:o,mode:l}=e;if(og(t,s,n,i),Ag(i,t.spatialReference,i,r))return l!=="geodesic"&&$r(i,i,o),i}function uXe(t,e,i,s){const{view:n,measurementSR:r,spatialReference:o,origin:l,mode:u}=i;if(u==="geodesic"?Jl(Qw,t):Wl(Qw,t,l),Ag(Qw,r,Qw,o))return FF(Qw,n,e,i,s)}function HA(t,e){var i;return((i=hXe(t,e))==null?void 0:i.value)??void 0}function hXe(t,{view:e,origin:i,elevationInfo:s,hasZ:n,measurementSR:r}){if(t==null||!n)return;const o=ele(r);if(o==null)return;const[l,u]=i,f=xA(t,o),y=(e==null?void 0:e.type)==="3d"?MA(e,l,u,f,r,s):f;return y!=null?Hpe(y,o):void 0}const Iee=To(),dXe=To(),Qw=To(),V4=Af(0,0,0,qi.WGS84);let ZF=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}};const z0e=Symbol("Yield");let fXe=class{constructor(){this._tasks=new Array,this._runningTasks=v6(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return z0e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,s){return++this._runningTasks.value,new Promise((n,r)=>this._tasks.push(new Mee(n,r,e,i,s))).finally(()=>--this._runningTasks.value)}unshift(e,i,s){return++this._runningTasks.value,new Promise((n,r)=>this._tasks.unshift(new Mee(n,r,e,i,s))).finally(()=>--this._runningTasks.value)}_process(e){var s;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=Rc(i.signal);if(n&&!i.abortCallback)i.reject(or());else{const r=n?(s=i.abortCallback)==null?void 0:s.call(i,or()):i.callback(e);Iv(r)?r.then(i.resolve,i.reject):i.resolve(r)}}catch(n){i.reject(n)}return!0}cancelAll(){const e=or();for(const i of this._tasks)if(i.abortCallback){const s=i.abortCallback(e);i.resolve(s)}else i.reject(e);this._tasks.length=0}},Mee=class{constructor(e,i,s,n=void 0,r=void 0){this.resolve=e,this.reject=i,this.callback=s,this.signal=n,this.abortCallback=r}},oS=class extends Ei{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};I([N()],oS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),I([N()],oS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),oS=I([ke("esri.views.support.debugFlags")],oS);const pXe=new oS;var xc;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(xc||(xc={}));function mvt(){return new T6.Scheduler}var Oi;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(Oi||(Oi={}));const Cu=0,Aee=new Map([[Oi.RESOURCE_CONTROLLER_IMMEDIATE,Cu],[Oi.RESOURCE_CONTROLLER,4],[Oi.SLIDE,Cu],[Oi.STREAM_DATA_LOADER,Cu],[Oi.ELEVATION_QUERY,Cu],[Oi.TERRAIN_SURFACE,1],[Oi.SURFACE_GEOMETRY_UPDATES,1],[Oi.LOD_RENDERER,2],[Oi.GRAPHICS_CORE,2],[Oi.I3S_CONTROLLER,2],[Oi.POINT_CLOUD_LAYER,2],[Oi.FEATURE_TILE_FETCHER,2],[Oi.CLOUDS_GENERATOR,2],[Oi.OVERLAY,4],[Oi.STAGE,4],[Oi.GRAPHICS_DECONFLICTOR,4],[Oi.FILTER_VISIBILITY,4],[Oi.SCALE_VISIBILITY,4],[Oi.FRUSTUM_VISIBILITY,4],[Oi.POINT_OF_INTEREST_FREQUENT,6],[Oi.POINT_OF_INTEREST_INFREQUENT,30],[Oi.LABELER,8],[Oi.FEATURE_QUERY_ENGINE,8],[Oi.FEATURE_TILE_TREE,16],[Oi.FEATURE_TILE_TREE_ACTIVE,Cu],[Oi.ELEVATION_ALIGNMENT,12],[Oi.ELEVATION_ALIGNMENT_SCENE,14],[Oi.TEXT_TEXTURE_ATLAS,12],[Oi.TEXTURE_UNLOAD,12],[Oi.LINE_OF_SIGHT_TOOL,16],[Oi.LINE_OF_SIGHT_TOOL_INTERACTIVE,Cu],[Oi.SNAPPING,Cu],[Oi.SHADOW_ACCUMULATOR,30],[Oi.MAPVIEW_FETCH_QUEUE,Cu],[Oi.MAPVIEW_LAYERVIEW_UPDATE,2],[Oi.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Cu]]);function Dee(t){return Aee.has(t)?Aee.get(t):typeof t=="number"?t:1}const mXe=6.5,kee=1,gXe=30,yXe=1e3/30,vXe=100,Nee=.9;var T6,A1;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(r=>r.needsUpdate)}constructor(){this._updating=v6(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new bS("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new s,this._state=xc.INTERACTING,this._tasks=new Fy,this._runQueue=new Fy,this._load=0,this._idleStateCallbacks=new Fy,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=xi(()=>pXe.SCHEDULER_LOG_SLOW_TASKS,r=>this._debug=r,Xl);for(const r of Object.keys(Oi))this.performanceInfo.tasks.set(Oi[r],new bS(Oi[r]))}destroy(){this._tasks.toArray().forEach(r=>r.remove()),this._tasks.clear(),Co(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(r){this._updatingChanged(),r&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(r,o){const l=new i(this,r,o);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(r)||this.performanceInfo.tasks.set(r,new bS(r)),l}registerIdleStateCallbacks(r,o){const l={idleBegin:r,idleEnd:o};this._idleStateCallbacks.push(l),this.state===xc.IDLE&&this._idleUpdatesStartFired&&l.idleBegin();const u=this;return{remove:()=>this._removeIdleStateCallbacks(l),set idleBegin(f){u._idleUpdatesStartFired&&(l.idleEnd(),u._state===xc.IDLE&&f()),l.idleBegin=f},set idleEnd(f){l.idleEnd=f}}}get load(){return this._load}set state(r){this._state!==r&&(this._state=r,this.state!==xc.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(r){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=mXe,l=r.frameDuration,u=kee;switch(this.state){case xc.IDLE:o=0,l=Math.max(vXe,r.frameDuration),u=gXe;break;case xc.INTERACTING:l=Math.max(yXe,r.frameDuration);case xc.ANIMATING:}return l=l-r.elapsedFrameTime-o,this.state!==xc.IDLE&&l<kee&&!this._forceTask?(this._forceTask=!0,!1):(l=Math.max(l,u),this._budget.reset(l,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case xc.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(r=>r.idleBegin())),this._runIdle();break;case xc.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(r){this._idleUpdatesStartFired&&r.idleEnd(),this._idleStateCallbacks.removeUnordered(r)}removeTask(r){this._tasks.removeUnordered(r),this._runQueue.removeUnordered(r),this._updatingChanged()}_updateTask(r){this._tasks.forAll(o=>{o.name===r&&o.setPriority(r)})}_getState(r){if(this._runQueue.some(l=>l.name===r))return A1.SCHEDULED;let o=A1.IDLE;return this._tasks.forAll(l=>{l.name===r&&l.needsUpdate&&(l.schedulePriority<=1?o=A1.READY:o!==A1.READY&&(o=A1.WAITING))}),o}_getRuntime(r){let o=0;return this._tasks.forAll(l=>{l.name===r&&(o+=l.runtime)}),o}_resetRuntimes(){this._tasks.forAll(r=>r.runtime=0)}_getRunning(){const r=new Map;if(this._tasks.forAll(l=>{l.needsUpdate&&r.set(l.name,(r.get(l.name)||0)+1)}),r.size===0)return null;let o="";return r.forEach((l,u)=>{o+=l>1?` ${l}x ${u}`:` ${u}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const r=this._tasks.reduce((o,l)=>l.needsUpdate?++o:o,0);this._load=this._load*Nee+r*(1-Nee)}_schedule(){for(this._runQueue.filterInPlace(r=>!!r.needsUpdate||(r.schedulePriority=r.basePriority,!1)),this._tasks.forAll(r=>{r.basePriority===Cu&&r.needsUpdate&&!this._runQueue.includes(r)&&r.blockFrame!==this._frameNumber&&this._runQueue.unshift(r)});this._runQueue.length===0;){let r=!1,o=0;if(this._tasks.forAll(l=>{l.needsUpdate&&l.schedulePriority!==0&&l.basePriority!==Cu&&l.blockFrame!==this._frameNumber&&(r=!0,o=Math.max(o,l.basePriority),l.schedulePriority===1?(l.schedulePriority=0,this._runQueue.push(l)):--l.schedulePriority)}),!r)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const r=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),l=this._runQueue.pop();this._budget.resetProgress();try{l.task.runTask(this._budget)===z0e&&(l.blockFrame=this._frameNumber)}catch(f){zt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${l.name}"`,f),l.blockFrame=this._frameNumber}!this._budget.hasProgressed&&l.blockFrame!==this._frameNumber&&l.needsUpdate&&(l.name,Oi.I3S_CONTROLLER,l.blockFrame=this._frameNumber),l.schedulePriority=l.basePriority;const u=this._budget.now()-o;if(l.runtime+=u,this._frameTaskTimes.set(l.priority,this._frameTaskTimes.get(l.priority)+u),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-r)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-r)}_startFrameTaskTimes(){for(const r of Object.keys(Oi))this._frameTaskTimes.set(Oi[r],0)}_recordFrameTaskTimes(r){this._frameTaskTimes.forEach((o,l)=>this.performanceInfo.tasks.get(l).push(o)),this.performanceInfo.total.push(r)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(r,o,l){this._scheduler=r,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new fXe,this._handles=new vM,this._basePriority=Dee(o),this.schedulePriority=this._basePriority,this._task=v6(l??this._queue),this._handles.add(Eg(()=>this.task.running,u=>r.taskRunningChanged(u)))}remove(){this.processQueue(q0e),this._scheduler.removeTask(this),this.schedule=I6.schedule,this.reschedule=I6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(r){if(this.name===r)return;this.name=r;const o=Dee(r);this._basePriority!==Cu&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(r){this.setPriority(r)}get needsUpdate(){return this.updating||this.task.running}schedule(r,o,l){return this._queue.push(r,o,l)}reschedule(r,o,l){return this._queue.unshift(r,o,l)}processQueue(r){return this._queue.runTask(r)}}class s{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=xc.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(r){return!this.done&&(r()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(r){this._enabled=r}reset(r,o){this._begin=this.now(),this._budget=r,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=s})(T6||(T6={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(A1||(A1={}));const q0e=(()=>{const t=new T6.Budget;return t.enabled=!1,t})();let _Xe=class{remove(){}processQueue(){}schedule(e,i,s){try{if(Rc(i)){const n=or();return s?Promise.resolve(s(n)):Promise.reject(n)}return I$(e(q0e))}catch(n){return Promise.reject(n)}}reschedule(e,i,s){return this.schedule(e,i,s)}};const I6=new _Xe;function bXe({predicate:t=()=>!0,snappingManager:e,snappingContext:i,updatingHandles:s,useZ:n=!0}){const r=new WF;if(e==null)return{snappingStep:[$ee,r],cancelSnapping:$ee};let o,l=null,u=null,f=null;const y=()=>{l=dg(l),e.doneSnapping(),u==null||u.frameTask.remove(),u=null,o=Co(o),f=null},_=xXe(e,n,r);let x=null,S=null,P=null;return{snappingStep:[A=>{if(!t(A))return A;const{action:k}=A;if(k==="start"){const{info:$}=A,F=wXe(e.view);if(u=SXe(i,A,F),u.context.selfSnappingZ=null,!n&&$!=null){const G=CXe(i.coordinateHelper,$.handle.component);G!=null&&(u.context.selfSnappingZ={value:G,elevationInfo:i.elevationInfo??Dg})}}if(u!=null){const{context:$,originalScenePos:F,originalPos:G}=u,{mapEnd:V,mapStart:B,scenePoints:W}=A,J=V0e(G,KF(V,B)),re=KF(B,G),se={...A,action:"update"},oe=u.context,pe=EXe(F,W),ce=e.update({point:J,scenePoint:pe,context:$});if(P=ce,G0e(V,ce,re,n),x=J,S=pe,k!=="end"){const{frameTask:ue}=u;l==null&&(l=new AbortController),f=ne=>{s.addPromise(Qh(_({frameTask:ue,event:se,context:oe,point:J,scenePoint:pe,delta:re,getLastState:()=>({point:x,scenePoint:S,updatePoint:ne.forceUpdate?null:P})},l.signal)))},f({forceUpdate:!1}),o==null&&(o=xi(()=>e.options.effectiveEnabled,()=>f==null?void 0:f({forceUpdate:!0})))}}return k==="end"&&y(),A},r],cancelSnapping:A=>(y(),A)}}function xXe(t,e,i){return Mv(async({frameTask:s,point:n,scenePoint:r,context:o,event:l,delta:u,getLastState:f},y)=>{const _=await s.schedule(()=>t.snap({point:n,scenePoint:r,context:o,signal:y}),y);if(_.valid){let x=await s.schedule(()=>_.apply(),y);const S=f();S.point!=null&&n!==S.point&&(x=t.update({point:S.point,scenePoint:S.scenePoint,context:o})),S.updatePoint!=null&&FI(x,S.updatePoint)||(G0e(l.mapEnd,x,u,e),i.execute(l))}})}function wXe(t){return t.type==="3d"?t.resourceController.scheduler.registerTask(Oi.SNAPPING):I6}function SXe(t,e,i){return{context:new ZF({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:e.info!=null?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:e.snapOrigin!=null?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:e.scenePoints!=null?e.scenePoints.sceneStart:null,frameTask:i}}function V0e(t,[e,i,s]){const n=GA(t);return n.x+=e,n.y+=i,n.hasZ&&(n.z+=s),n}function EXe(t,e){return t==null||e==null?null:V0e(t,KF(e.sceneEnd,e.sceneStart))}function KF(t,e){const i=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,i]}function G0e(t,e,[i,s,n],r){t.x=e.x+i,t.y=e.y+s,r&&t.hasZ&&e.hasZ&&(t.z=e.z+n)}function CXe(t,e){if(!t.hasZ())return null;const i=e.vertices;let s=null;for(const n of i){const r=t.getZ(n.pos);if(s!=null&&r!=null&&Math.abs(r-s)>1e-6)return null;s==null&&(s=r)}return s}function $ee(t){return t}let fy=class extends Ei{constructor(e){super(e),this.constrainResult=i=>i,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=Mv(async(i,s,n,r)=>{const o=this._frameTask;if(o==null)return;const l=await o.schedule(()=>s.snap({...i,context:n,signal:r}),r);l.valid&&await o.schedule(()=>{this.stagedPoint=l.apply(),i!==this._snapPoints&&this._snapPoints!=null&&(this.stagedPoint=s.update({...this._snapPoints,context:n}))},r)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var i,s;const e=this.view.type==="3d"?(s=(i=this.view)==null?void 0:i.resourceController)==null?void 0:s.scheduler:null;this._frameTask=e!=null?e.registerTask(Oi.SNAPPING):I6}destroy(){this._abortController=dg(this._abortController),this._frameTask=Co(this._frameTask)}update(e,i,s){this._snapPoints=e;const{point:n,scenePoint:r}=e,o=i.update({point:n,scenePoint:r,context:s});return this.stagedPoint=o,o}async snap(e,i,s){const{point:n,scenePoint:r}=e;return this.stagedPoint=i.update({point:n,scenePoint:r,context:s}),this._snapPoints=e,this._abortController==null&&(this._abortController=new AbortController),this._snap(e,i,s,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,i){this._snapPoints!=null&&await this.snap(this._snapPoints,e,i)}abort(){this._abortController=dg(this._abortController),this._snapPoints=null}};I([N({constructOnly:!0})],fy.prototype,"view",void 0),I([N()],fy.prototype,"stagedPoint",null),I([N()],fy.prototype,"constrainResult",void 0),I([N()],fy.prototype,"_stagedPoint",void 0),fy=I([ke("esri.views.interactive.snapping.SnappingOperation")],fy);const PXe="crosshair",TXe="progress",Oee=Symbol(),Ree=Symbol();let os=class extends Sa.EventedMixin(Ei){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new bYe,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new LI,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=yee(aXe),this._getPolylineOrPolygonConstraint=yee(lXe),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new t5,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,e.elevationInfo==null&&(this.elevationInfo=vme(!!e.hasZ))}initialize(){const{geometryType:e,view:i}=this,s=i.spatialReference,n="viewingMode"in i.state?i.state.viewingMode:TE.Local,r=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=w0e(this.hasZ,this.hasM,s),this._editGeometryOperations=new XF(new HF(r,this.coordinateHelper),n),this._snappingOperation=new fy({view:i}),this.addHandles([xi(()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint}),({stagedPoint:u,constraint:f},y)=>{const{snappingOptions:_}=this;if(_&&(_.forceDisabled=f!=null&&Eu(f)),y!=null&&u===y.stagedPoint&&f!==y.constraint)return this._onKeyboardBasedChange();this._processCursor(u??this._screenToMap(this._stagedScreenPoint))},{equals:(u,f)=>u.stagedPoint===f.stagedPoint&&Toe(u.constraint,f.constraint)}),xi(()=>this.view.viewpoint,(u,f)=>{u&&f&&Jfe(u,f)&&this._onKeyboardBasedChange()})]),this._activeComponent=new jA(s,n),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;o!=null&&(o.context={view:i,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(xi(()=>this.labelOptions.enabled,u=>{o.visible=u},ec))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],u=>{var P,A,k,$;const f=u.vertices.map(F=>({componentIndex:0,vertexIndex:F.index,coordinates:this.coordinateHelper.vectorToArray(F.pos)})),y=f.map(F=>F.coordinates),_=this.coordinateHelper.vectorToDehydratedPoint((P=this._activeComponent.getFirstVertex())==null?void 0:P.pos)??null;FI(_,this.firstVertex)||(this.firstVertex=_);const x=this.coordinateHelper.vectorToDehydratedPoint((A=this._activeComponent.getLastVertex())==null?void 0:A.pos)??null;FI(x,this.lastVertex)||(this.lastVertex=x);const S=this.coordinateHelper.vectorToDehydratedPoint(($=(k=this._activeComponent.edges.at(-1))==null?void 0:k.leftVertex)==null?void 0:$.pos)??null;switch(FI(S,this.secondToLastVertex)||(this.secondToLastVertex=S),this._processCursor(this.cursorVertex),u.type){case"vertex-add":this.emit(u.type,{...u,added:y,vertices:f});break;case"vertex-update":this.emit(u.type,{...u,updated:y,vertices:f});break;case"vertex-remove":this.emit(u.type,{...u,removed:y,vertices:f})}}));const l=this._manipulator=new xYe({consumesClicks:!1,grabbableForEvent:u=>this.drawingMode!=="click"||u.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1});this.manipulators.add(l),l.grabbable=e!=="point",this.addHandles([l.events.on("immediate-click",u=>this._onImmediateClick(u)),l.events.on("immediate-double-click",u=>this._onImmediateDoubleClick(u)),xi(()=>this.drawingMode,()=>{this.removeHandles(Oee),this.addHandles(this._createManipulatorDragPipeline(l),Oee)},ec),xi(()=>({effectiveCursor:this.effectiveCursor}),({effectiveCursor:u})=>{l.cursor=u},ec)]),Tme(this,()=>{const u=this.view.inputManager.latestPointerType??"mouse",f=this._getSnappingContext(u);if(this.snappingManager!=null){const y=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,f);this._updatingHandles.addPromise(Qh(y))}})}destroy(){no(this.segmentLabels),no(this._snappingOperation),this._editGeometryOperations=no(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:i}=this;return e!=null&&this._pointerDownStates.has(e)||i.grabbing||!i.interactive}get _snappingEnabled(){return this.snappingManager!=null&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}get _constraint(){const{constraints:e,constraintsEnabled:i}=this;if(e&&i)switch(this.geometryType){case"point":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??x0e)}get effectiveCursor(){return this.loading?TXe:this._hideDefaultCursor?null:this.cursor||PXe}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return this.snappingManager!=null?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return this._stagedPointerType==="mouse"?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:i,firstVertex:s,geometryType:n}=this;return n==="polygon"&&cN(e,s)||cN(e,i)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:i,coordinateHelper:s}=this,n=e.slice();return i!=null&&n.push(s.pointToArray(i)),n}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;e!=null&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){var o;const i=(e==null?void 0:e.aborted)||!1;this._snappingOperation.abort(),(o=this.snappingManager)==null||o.doneSnapping();const{geometryType:s,numCommittedVertices:n}=this,r=s==="multipoint"&&n===0||s==="polyline"&&n<2||s==="polygon"&&n<3;s!=="segment"&&s!=="point"||this.commitStagedVertex(),this._createOperationCompleted=!r,(this.isCompleted||i)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map((l,u)=>({componentIndex:0,vertexIndex:u,coordinates:l})),aborted:i,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){this.snappingManager!=null&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){var l,u;const i=Ue(this.cursorVertex),s=Ue(e),n=s&&(((l=this._updateAndGetEffectiveDrawSurface())==null?void 0:l.constrainZ(s))??s),r=this._snapToClosingVertex(n),o=this._applyConstraints(r);cN(i,o)||(this._set("cursorVertex",o),(u=this.segmentLabels)==null||u.set("stagedVertex",o!=null?this.coordinateHelper.pointToVector(o):null),o==null||this._stagedPointerType!=="mouse"?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(o)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(e==null||this._isDragging||this.geometryType!=="polygon"||this.numCommittedVertices<=2)return e;const i=this._mapToScreen(e);if(!i)return e;const s=this._activeComponent;return this._vertexWithinPointerDistance(s.vertices[0].pos,i)?this.firstVertex:this._vertexWithinPointerDistance(s.vertices.at(-1).pos,i)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return uN(e,(i,s,n,r)=>{const o=r==="touch"&&this._snappingEnabled;if(this.isCompleted||!o)return;const{snappingStep:l,cancelSnapping:u}=bXe({predicate:()=>o,snappingManager:this.snappingManager,snappingContext:new ZF({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:r,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});n=n.next(f=>(o&&this.snappingManager!=null&&this.snappingManager.doneSnapping(),f)).next(u),s.next(this._screenToMapDragEventStep()).next(f=>(f.action==="start"&&(this._processCursor(f.mapStart),(this.geometryType==="segment"||o&&!this.numCommittedVertices)&&this.commitStagedVertex()),f)).next(sXe(this.view,this.elevationInfo)).next(...l).next(f=>(o&&(this._processCursor(f.mapEnd),f.action==="end"&&this.commitStagedVertex()),f)).next(f=>(f.action==="end"&&(this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),f))})}_createManipulatorDragPipelineFreehand(e){return uN(e,(i,s)=>{this.isCompleted||s.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(this._snappingOperation.abort(),this.committableVertex==null&&this._processCursor(n.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this._processCursor(n.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return n})})}_createManipulatorDragPipelineHybrid(e){return uN(e,(i,s)=>{this.isCompleted||s.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),Ree),this._processCursor(n.mapStart),this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this._processCursor(n.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.removeHandles(Ree),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return n})})}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:i,geometryType:s,numCommittedVertices:n}=this;return e?i!=null||s==="segment"&&n>0:(s==="segment"||s==="polygon")&&n>0}_updateAndGetEffectiveDrawSurface(){var f;const{constraintsEnabled:e,coordinateHelper:i,drawSurface:s,elevationDrawSurface:n,snapToSceneEnabled:r}=this;if(n==null)return s;if(!this.hasZ)return n.defaultZ=null,n;const o=(f=this.elevationInfo)==null?void 0:f.mode;let l=this.defaultZ,u=e||o==="absolute-height";return r!=null&&(u=r),o==="on-the-ground"&&(u=!1),this._drawAtFixedElevation&&(l=(e?this.constraintZ:null)??i.getZ(this._activeComponent.vertices[0].pos),u=!1),u?s:(n.defaultZ=l,n)}_mapToScreen(e){var i;return(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging))try{const{drawingMode:i,geometryType:s}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const n=this._screenToMap(e.screenPoint);if(n==null||n==null||i==="freehand"&&s!=="point")return;if(this._snappingEnabled&&this.cursorVertex!=null||this._processCursor(n),this.committableVertex==null)return void this.complete();this.commitStagedVertex(),e.pointerType!=="mouse"&&this._processCursor(null),(i==="freehand"||s==="point"||s==="segment"&&this.numCommittedVertices===2||s==="segment"&&i==="hybrid"&&this.numCommittedVertices===1)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const i=Qp(e.x,e.y);this._stagedScreenPoint=i,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(i,e.pointerType))}_onKeyboardBasedChange(){this._stagedPointerType==="mouse"&&this._stagedScreenPoint&&this._stagedPointerId!=null&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,i){var u;const s=this._snappingOperation,n=this._screenToMap(e),r=this._requiresScenePoint?(u=this.drawSurface)==null?void 0:u.screenToMap(e):null;if(n==null)return this._hideDefaultCursor=!0,this._processCursor(null),void s.abort();this._hideDefaultCursor=!1;const o=this.snappingManager;if(o==null)return this._processCursor(n),void s.abort();const l=this._getSnappingContext(i);this._updatingHandles.addPromise(Qh(s.snap({point:n,scenePoint:r},o,l)))}_applyConstraints(e){const{_constraint:i,constraints:s}=this;if(!e||!s||!i)return e;const{context:n}=s,r=BA(e,n),o=r?i.closestTo(r):void 0;if(!o)return e;const l=uXe(o,e,n),u=this.view.type==="2d"||n.elevationInfo.mode!=="absolute-height";return l!=null&&u&&this.constraintZ!=null&&this.hasZ&&(l.z=this.constraintZ),l}_screenToMap(e){var i;return e?(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return i=>{if(i.action==="start"&&(e=this._screenToMap(i.screenStart)),e==null)return null;const s=this._screenToMap(i.screenEnd);return s!=null?{...i,mapStart:e,mapEnd:s}:null}}_vertexWithinPointerDistance(e,i){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return n!=null&&IXe(n,i,25)}_getSnappingContext(e){var s;const i=this._drawAtFixedElevation?(s=this.elevationDrawSurface)==null?void 0:s.defaultZ:null;return new ZF({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:i!=null?{value:i,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function IXe(t,e,i){const s=t.x-e.x,n=t.y-e.y;return s*s+n*n<=i}I([N()],os.prototype,"_hideDefaultCursor",void 0),I([N()],os.prototype,"_stagedPointerId",void 0),I([N()],os.prototype,"_isDragging",null),I([N()],os.prototype,"_snappingOperation",void 0),I([N()],os.prototype,"_snappingEnabled",null),I([N({constructOnly:!0})],os.prototype,"graphic",void 0),I([N()],os.prototype,"constraintsEnabled",void 0),I([N()],os.prototype,"constraints",void 0),I([N()],os.prototype,"_constraint",null),I([N()],os.prototype,"constraintZ",void 0),I([N()],os.prototype,"defaultZ",void 0),I([N()],os.prototype,"isDraped",void 0),I([N({value:x0e})],os.prototype,"drawingMode",null),I([N({constructOnly:!0})],os.prototype,"elevationDrawSurface",void 0),I([N({constructOnly:!0})],os.prototype,"elevationInfo",void 0),I([N({constructOnly:!0,type:t5})],os.prototype,"labelOptions",void 0),I([N({constructOnly:!0})],os.prototype,"geometryType",void 0),I([N({constructOnly:!0})],os.prototype,"hasM",void 0),I([N({constructOnly:!0})],os.prototype,"hasZ",void 0),I([N()],os.prototype,"cursor",void 0),I([N()],os.prototype,"effectiveCursor",null),I([N()],os.prototype,"loading",void 0),I([N({constructOnly:!0})],os.prototype,"manipulators",void 0),I([N({constructOnly:!0})],os.prototype,"drawSurface",void 0),I([N({constructOnly:!0})],os.prototype,"segmentLabels",void 0),I([N({constructOnly:!0})],os.prototype,"snappingManager",void 0),I([N({constructOnly:!0})],os.prototype,"snappingVisualizer",void 0),I([N()],os.prototype,"snapToSceneEnabled",void 0),I([N({readOnly:!0})],os.prototype,"cursorVertex",null),I([N({readOnly:!0})],os.prototype,"visualizationCursorVertex",null),I([N()],os.prototype,"committableVertex",null),I([N()],os.prototype,"firstVertex",void 0),I([N()],os.prototype,"lastVertex",void 0),I([N()],os.prototype,"secondToLastVertex",void 0),I([N()],os.prototype,"updating",null),I([N({constructOnly:!0})],os.prototype,"view",void 0),os=I([ke("esri.views.draw.DrawOperation")],os);let _vt=class{constructor(e,i,s,n=null){this._elevationInfo=e,this.defaultZ=i,this._view=s,this._excludeGraphics=n}screenToMap(e){const{defaultZ:i,_view:s}=this,n=s.sceneIntersectionHelper.intersectElevationFromScreen(Bue(e.x,e.y),this._elevationInfo,i??0,this._excludeGraphics);return i==null&&n!=null&&(n.z=void 0),n}mapToScreen(e){const i=Af(e.x,e.y,FG(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(i)}constrainZ(e){const{defaultZ:i}=this;return i!=null&&e.z!==i&&((e=GA(e)).z=i),e}},xvt=class{constructor(e,i,s=[]){this.view=e,this.elevationInfo=i,this.exclude=s}screenToMap(e){const i=this.view.toMap(e,{exclude:this.exclude,excludeLabels:!0});return i!=null&&(i.z=y6(i,this.view,this.elevationInfo)),i}mapToScreen(e){let i=e;return this.elevationInfo!=null&&(i=Af(e.x,e.y,FG(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(i)}constrainZ(e){return e}},Svt=class{constructor(e,i=!1,s=0){this.view=e,this.hasZ=i,this.defaultZ=s,this.mapToScreen=n=>e.toScreen(n),this.screenToMap=i?n=>{const r=e.toMap(n);return r.z=s,r}:n=>e.toMap(n)}constrainZ(e){const{defaultZ:i}=this;return this.hasZ&&e.z!==i&&((e=GA(e)).z=i),e}},JF=class j0e{screenToMap(e){const{x:i,y:s}=e;return new Yi({x:i,y:s,spatialReference:j0e.spatialReference})}mapToScreen(e){return Qp(e.x,e.y)}constrainZ(e){return e}};JF.spatialReference=new qi;var QF;let N0=QF=class extends Za{constructor(t){super(t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=cn(this.radius,this.radiusUnit,"meters"),s=t.spatialReference;let n,r="geographic";if(s.isWebMercator?r="webMercator":((s.wkid&&Ee[s.wkid])!=null||(s.wkt2||s.wkt)&&IM(s.wkt2||s.wkt))&&(r="projected"),this.geodesic){let o;switch(r){case"webMercator":o=Ab(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}n=this._createGeodesicCircle(o,i,e),r==="webMercator"&&(n=CT(n))}else{let o;r==="webMercator"||r==="projected"?o=i/Zq(t.spatialReference):r==="geographic"&&(o=Zae(i,"meters",Wq(t.spatialReference).radius)),n=this._createPlanarCircle(t,o,e)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:s,geodesic:n}=this;return new QF({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:s,geodesic:n})}_createGeodesicCircle(t,e,i){let s=0;const n=[];for(;s<360;){const r=[0,0],o=[t.x,t.y];mg(r,o,s,e,qi.WGS84),this.hasZ&&r.push(t.z),n.push(r),s+=360/i}return n.push(n[0]),new Za({rings:[n]})}_createPlanarCircle(t,e,i){const s=[],n=2*Math.PI/i;for(let r=0;r<i;++r){const o=n*r,l=[t.x+Math.cos(-o)*e,t.y+Math.sin(-o)*e];this.hasZ&&l.push(t.z),s.push(l)}return s.push(s[0]),new Za({spatialReference:t.spatialReference,rings:[s]})}};I([N({type:Yi})],N0.prototype,"center",void 0),I([N()],N0.prototype,"geodesic",void 0),I([N()],N0.prototype,"numberOfPoints",void 0),I([N()],N0.prototype,"radius",void 0),I([N()],N0.prototype,"radiusUnit",void 0),N0=QF=I([ke("esri.geometry.Circle")],N0);const MXe=N0;var Cvt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AXe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DXe(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const r=Object.getOwnPropertyDescriptor(s,n);r&&Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Lee,Fee={exports:{}};function kXe(){return Lee||(Lee=1,function(t){function e(){function s(m){if(typeof m=="number")return ye.Tc.Zg(m);if(m==null)return null;if(mn[m]!=null)return ye.Tc.Zg(mn[m]);throw Error("Unrecognised Unit Type")}function n(m){if(typeof m=="number")return ye.Tc.Zg(m);if(m==null)return null;if(Br[m]!=null)return ye.Tc.Zg(Br[m]);throw Error("Unrecognised Unit Type")}function r(m){if(m)switch(m){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function o(m,j,T,p){if(T==null||T.B())return null;switch(T.getType()){case ye.qn.Point:return m.exportPoint(j,T,p);case ye.qn.Polygon:return m.exportPolygon(j,T,p);case ye.qn.Polyline:return m.exportPolyline(j,T,p);case ye.qn.MultiPoint:return m.exportMultipoint(j,T,p);case ye.qn.Envelope:return m.exportExtent(j,T,p)}return null}function l(m,j,T,p){if(T.getType()!==ye.qn.Point)throw Error("Geometry not Point");return m.exportPoint(j,T,p)}function u(m,j,T){return m.convertToGEGeometry(j,T)}function f(m){var j=m.wkid;m=m.wkt2||m.wkt;var T=Cs.get(j||m);return T==null&&(j!==-1&&j!=null?(T=ye.Eg.create(j),Cs.set(j,T)):m&&(T=ye.Eg.qP(m),Cs.set(m,T)),Ys.has(j||m)&&T.VW(Ys.get(j||m))),T}function y(m){var j,T,p;if(m==null)return null;var h=f(m);return m=h.Hd(),h=h.Kn(),(j={}).tolerance=h,j.unitType=m==null?-1:m.od,j.unitID=m==null?-1:m.Ec(),j.unitBaseFactor=m==null?0:m.ai,j.unitSquareDerivative=m==null?0:(p=(T=ye.Tc.aG(m))===null||T===void 0?void 0:T.Ec())!==null&&p!==void 0?p:0,j}function _(m,j,T,p){return T==null?null:(T=ye.$b.clip(u(m,xt,T),u(m,xt,p),f(j)),o(m,xt,T,j))}function x(m,j,T,p){T=ye.$b.dl(u(m,xt,T),u(m,xt,p),f(j)),p=[];for(var h=0;h<T.length;h++)p.push(o(m,xt,T[h],j));return p}function S(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.contains(u(m,xt,T),u(m,xt,p),f(j))}function P(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.BP(u(m,xt,T),u(m,xt,p),f(j))}function A(m,j,T,p,h){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.tb(u(m,xt,T),u(m,xt,p),f(j),s(h))}function k(m,j,T,p){return!(T==null&&p!=null||p==null&&T!=null)&&ye.$b.Nb(u(m,xt,T),u(m,xt,p),f(j))}function $(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.TS(u(m,xt,T),u(m,xt,p),f(j))}function F(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.touches(u(m,xt,T),u(m,xt,p),f(j))}function G(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.qY(u(m,xt,T),u(m,xt,p),f(j))}function V(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.TP(u(m,xt,T),u(m,xt,p),f(j))}function B(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.DU(u(m,xt,T),u(m,xt,p),f(j))}function W(m,j,T,p,h){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.yB(u(m,xt,T),u(m,xt,p),f(j),h)}function J(m,j,T){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.dT(u(m,xt,T),f(j))}function re(m,j,T){if(T==null)throw Error("Illegal Argument Exception");return T=ye.$b.eC(u(m,xt,T),f(j)),o(m,xt,T,j)}function se(m,j,T,p){if(p===void 0&&(p=!1),T==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){var h=p,a=[];for(p=0;p<T.length;p++)a.push(u(m,xt,T[p]));for(T=ye.$b.jP(a,h),h=Array(T.length),p=0;p<T.length;p++)h[p]=o(m,xt,T[p],j);return h}return p=ye.$b.iP(u(m,xt,T),f(j)),o(m,xt,p,j)}function oe(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(u(m,xt,T[a]));for(T=ye.$b.QP(h,u(m,xt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);return p}return a=ye.$b.im(u(m,xt,T),u(m,xt,p),f(j)),o(m,xt,a,j)}function pe(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(u(m,xt,T[a]));for(T=ye.$b.VX(h,u(m,xt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);return p}return a=ye.$b.ep(u(m,xt,T),u(m,xt,p),f(j)),o(m,xt,a,j)}function ce(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(u(m,xt,T[a]));for(T=ye.$b.RS(h,u(m,xt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);return p}return a=ye.$b.Ea(u(m,xt,T),u(m,xt,p),f(j)),o(m,xt,a,j)}function ue(m,j,T,p){if(T==null)return null;var h=[];if(Array.isArray(T)){if(T.length===0)return null;for(p=0;p<T.length;p++)h.push(u(m,xt,T[p]))}else h.push(u(m,xt,T)),p!=null&&h.push(u(m,xt,p));return o(m,xt,ye.$b.jY(h,f(j)),j)}function ne(m,j,T,p,h,a,c,d){var g=0;if(a!=null)switch(a){case"round":g=0;break;case"bevel":g=1;break;case"miter":g=2;break;case"square":g=3}if(Array.isArray(T)){if(T==null)m=null;else if(T.length===0)m=[];else{var v=[];for(a=0;a<T.length;a++)v.push(u(m,xt,T[a]));for(T=ye.$b.BU(v,f(j),p,g,c,d,s(h)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);m=p}return m}return T=ye.$b.offset(u(m,xt,T),f(j),p,g,c,d,s(h)),o(m,xt,T,j)}function de(m,j,T,p,h,a){if(a===void 0&&(a=!1),Array.isArray(T)){if(!Array.isArray(p)){for(var c=[],d=0;d<T.length;d++)c.push(p);p=c}if(p.length!=T.length){if(p.length==0)throw Error("Illegal Argument Exception");c=[];var g=0;for(d=0;d<T.length;d++)p[d]===void 0?c.push(g):(c.push(p[d]),g=p[d]);p=c}return Pe(m,j,T,p,h,!1,a,"geodesic",NaN)}return T=ye.$b.buffer(u(m,xt,T),f(j),p,s(h),!1,0,NaN),o(m,xt,T,j)}function Se(m,j,T,p,h,a,c,d){if(Array.isArray(T)){if(!Array.isArray(p)){for(var g=[],v=0;v<T.length;v++)g.push(p);p=g}if(p.length!==T.length){if(p.length===0)throw Error("Illegal Argument Exception");g=[];var b=0;for(v=0;v<T.length;v++)p[v]===void 0?g.push(b):(g.push(p[v]),b=p[v]);p=g}return Pe(m,j,T,p,h,!0,a,c,d)}return c===void 0&&(c=NaN),T=ye.$b.buffer(u(m,xt,T),f(j),p,s(h),!0,r(a),c),o(m,xt,T,j)}function Pe(m,j,T,p,h,a,c,d,g){if(g===void 0&&(g=NaN),T==null)return null;if(T.length===0)return[];for(var v=[],b=0;b<T.length;b++)v.push(u(m,xt,T[b]));for(T=ye.$b.MN(v,f(j),p,s(h),a,c,r(d),g),p=Array(T.length),b=0;b<T.length;b++)p[b]=o(m,xt,T[b],j);return p}function Re(m,j,T,p,h){var a;return h===void 0&&(h=!0),T=ye.$b.nz(u(m,xt,T),u(m,xt,p),h),(a={}).coordinate=l(m,xt,T.fz(),j),a.distance=T.hz(),a.isRightSide=T.Sz(),a.vertexIndex=T.Ua(),a.isEmpty=T.B(),a}function Oe(m,j,T,p){var h;return T=ye.$b.oz(u(m,xt,T),u(m,xt,p)),(h={}).coordinate=l(m,xt,T.fz(),j),h.distance=T.hz(),h.isRightSide=T.Sz(),h.vertexIndex=T.Ua(),h.isEmpty=T.B(),h}function we(m,j,T,p,h,a){var c;for(T=ye.$b.pz(u(m,xt,T),u(m,xt,p),h,a),p=[],h=0;h<T.length;h++)T[h].B()===!1&&p.push(((c={}).coordinate=l(m,xt,T[h].fz(),j),c.distance=T[h].hz(),c.isRightSide=T[h].Sz(),c.vertexIndex=T[h].Ua(),c.isEmpty=T[h].B(),c));return p}function Fe(m,j,T,p,h,a){return T=ye.$b.QQ(u(m,xt,T),f(j),p,h,s(a)),o(m,xt,T,j)}function it(m,j,T,p,h){return T=ye.$b.Qr(u(m,xt,T),f(j),p,s(h)),o(m,xt,T,j)}function vt(m,j,T,p,h,a){return a===void 0&&(a=0),T=ye.$b.Wy(u(m,xt,T),f(j),p,s(h),a),o(m,xt,T,j)}function ot(m,j,T,p){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.JU(u(m,xt,T),f(j),n(p))}function ut(m,j,T,p){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.KU(u(m,xt,T),f(j),s(p))}function Ct(m,j,T,p,h){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.WQ(u(m,xt,T),f(j),n(p),r(h))}function qt(m,j,T,p,h){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.ZQ(u(m,xt,T),f(j),s(p),r(h))}function Lt(m){ye.NL.bind(m)}function Dt(m,j,T,p,h){var a=null,c=null;if(p){if(!h)throw ye.i.N("AOI missing Spatial Reference");a=u(m,xt,p),c=f(h).fh()}return(m=ye.gu.XR(f(j).fh(),f(T).fh(),a,c))!==null?m:null}function Wi(m,j,T,p,h){var a=null,c=null;if(p){if(!h)throw ye.i.N("AOI missing Spatial Reference");a=u(m,xt,p),c=f(h).fh()}return ye.gu.YR(f(j).fh(),f(T).fh(),a,c)}function us(m,j,T,p,h,a){if(h===void 0&&(h=null),a===void 0&&(a=null),a){var c=new ye.yC;c.Vu=a.densificationStep,c.Jr=a.centralMeridianOfOutputGCS,a.clipWithInputHorizon&&c.PW(a.clipWithInputHorizon),a.clipWithOutputHorizon&&c.QW(a.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(j.length===0)return[];if(h){if(!(a=h.getCachedGeTransformation(T,p)))e:{if(a=h,h=null,a){var d=a.getGTListEntry();if(d!==null){h=new ye.wC(null);for(var g=0,v=d.steps;g<v.length;g++){d=v[g];var b=new ye.Dx(d.geogtran);d.isInverse&&b.Qz(),h.add(b)}c=ye.vr.Nr(f(T).fh(),f(p).fh(),h,c),a.assignCachedGe(T,p,c),a=c;break e}}if(h===null&&a&&a.steps&&0<a.steps.length){for(h=new ye.wC(null),g=0,v=a.steps;g<v.length;g++)(d=v[g]).wkid!=-1&&d.wkid!=null?h.add(ye.Dx.create(d.wkid,d.isInverse)):h.add(ye.Dx.uP(d.wkt,d.isInverse));c=ye.vr.Nr(f(T).fh(),f(p).fh(),h,c),a.assignCachedGe(T,p,c),a=c}else a=ye.vr.Nr(f(T).fh(),f(p).fh(),h,c)}for(T=[],h=0;h<j.length;h++)c=j[h],T.push(fn(m,c,p,a))}else for(a=ye.vr.Nr(f(T).fh(),f(p).fh(),null),T=[],h=0;h<j.length;h++)c=j[h],T.push(fn(m,c,p,a));return T}function fn(m,j,T,p){return j=ye.$b.zh(u(m,xt,j),p),o(m,xt,j,T)}function Us(m,j){m!=null&&(m=m.wkid||m.wkt2||m.wkt,Ys.has(m),Ys.set(m,j),Cs.has(m)&&Cs.delete(m))}function dr(m){m!=null&&(m=m.wkid||m.wkt2||m.wkt,Ys.has(m)&&(Ys.delete(m),Cs.has(m)&&Cs.delete(m)))}function ho(m,j,T,p){if(T==null||p==null)return[];var h=[],a=0;for(T=ye.$b.QS(u(m,xt,T),u(m,xt,p),f(j))||[];a<T.length;a++)h.push(o(m,xt,T[a],j));return h}var ss,ye,Fi,Sr,ri=this&&this.__extends||function(){function m(j,T){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var a in h)h.hasOwnProperty(a)&&(p[a]=h[a])})(j,T)}return function(j,T){function p(){this.constructor=j}m(j,T),j.prototype=T===null?Object.create(T):(p.prototype=T.prototype,new p)}}();(function(m){var j;(j=m.qn||(m.qn={}))[j.Unknown=0]="Unknown",j[j.Point=33]="Point",j[j.Line=322]="Line",j[j.Envelope=197]="Envelope",j[j.MultiPoint=550]="MultiPoint",j[j.Polyline=1607]="Polyline",j[j.Polygon=1736]="Polygon",function(p){p[p.enumMild=0]="enumMild",p[p.enumMedium=1]="enumMedium",p[p.enumHot=2]="enumHot"}(m.YK||(m.YK={}));var T=function(){function p(){this.description=null,this.VA=0}return p.prototype.getType=function(){return 0},p.prototype.Db=function(){return-1},p.prototype.Nf=function(h){this.vc(),h!=this.description&&this.sn(h)},p.prototype.sn=function(){},p.prototype.Jl=function(h){this.vc(),h!=this.description&&(h=m.ee.CR(this.description,h))!=this.description&&this.sn(h)},p.prototype.hasAttribute=function(h){return this.description.hasAttribute(h)},p.prototype.re=function(h){this.vc(),this.description.hasAttribute(h)||(h=m.ee.BR(this.description,h),this.sn(h))},p.prototype.Tg=function(){return null},p.prototype.bn=function(){},p.prototype.A=function(){},p.prototype.Qo=function(){},p.prototype.xc=function(h){this.A(h)},p.prototype.B=function(){return!0},p.prototype.Oa=function(){},p.prototype.Oc=function(){},p.prototype.Ia=function(){return null},p.prototype.copyTo=function(){},p.prototype.Ke=function(){return 0},p.prototype.Qb=function(){return 0},p.prototype.iG=function(){return this.hasAttribute(1)},p.tf=function(h){return 1+((192&h)>>6)>>1},p.Rn=function(h){return!!(32&h)},p.US=function(h){return!!(128&h)},p.yd=function(h){return!!(256&h)},p.xj=function(h){return!!(512&h)},p.Hc=function(h){return!!(1024&h)},p.prototype.Of=function(){var h=this.Ia();return this.copyTo(h),h},p.prototype.mg=function(){return null},p.jg=function(h){var a=h.Ia();return h.copyTo(a),a},p.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},p.Ax=function(h){var a=h.getType();if(p.xj(a))return h.I();if(h.B())return 0;if(a==197)return 4;if(a==33)return 1;if(p.yd(a))return 2;throw m.i.fa("missing type")},p}();m.aa=T})(ye||(ye={})),Fi=ye||(ye={}),Sr=function(){function m(){this.y=this.x=0}return m.construct=function(j,T){var p=new m;return p.x=j,p.y=T,p},m.al=function(j){var T=new m;return T.x=j.x,T.y=j.y,T},m.prototype.ma=function(j,T){this.x=j,this.y=T},m.prototype.L=function(j){this.x=j.x,this.y=j.y},m.prototype.fq=function(j,T){return this.x===j&&this.y===T},m.prototype.Rz=function(j){return 2220446049250313e-31>=Math.abs(this.x-j.x)&&2220446049250313e-31>=Math.abs(this.y-j.y)},m.prototype.qb=function(j){return this.x===j.x&&this.y===j.y},m.prototype.Nb=function(j){return j==this||j instanceof m&&this.x==j.x&&this.y==j.y},m.prototype.sub=function(j){this.x-=j.x,this.y-=j.y},m.prototype.uc=function(j,T){this.x=j.x-T.x,this.y=j.y-T.y},m.prototype.add=function(j,T){T!==void 0?(this.x=j.x+T.x,this.y=j.y+T.y):(this.x+=j.x,this.y+=j.y)},m.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},m.prototype.mt=function(j){this.x=-j.x,this.y=-j.y},m.prototype.NS=function(j,T,p){this.x=j.x*(1-p)+T.x*p,this.y=j.y*(1-p)+T.y*p},m.prototype.Ct=function(j,T){this.x=this.x*j+T.x,this.y=this.y*j+T.y},m.prototype.HW=function(j,T,p){this.x=T.x*j+p.x,this.y=T.y*j+p.y},m.prototype.scale=function(j){this.x*=j,this.y*=j},m.prototype.compare=function(j){return this.y<j.y?-1:this.y>j.y?1:this.x<j.x?-1:this.x>j.x?1:0},m.prototype.normalize=function(){var j=this.length();j==0&&(this.x=1,this.y=0),this.x/=j,this.y/=j},m.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},m.prototype.Sk=function(){return this.x*this.x+this.y*this.y},m.tb=function(j,T){return Math.sqrt(this.yc(j,T))},m.Oy=function(j,T,p,h){return j-=p,T-=h,Math.sqrt(j*j+T*T)},m.prototype.Qh=function(j){return this.x*j.x+this.y*j.y},m.prototype.fD=function(j){return Math.abs(this.x*j.x)+Math.abs(this.y*j.y)},m.prototype.wi=function(j){return this.x*j.y-this.y*j.x},m.prototype.Bt=function(j,T){var p=-this.x*T+this.y*j;this.x=this.x*j+this.y*T,this.y=p},m.prototype.Hv=function(){var j=this.x;this.x=-this.y,this.y=j},m.prototype.MG=function(j){this.x=-j.y,this.y=j.x},m.prototype.ar=function(){var j=this.x;this.x=this.y,this.y=-j},m.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},m.nu=function(j,T){var p=j.qu(),h=T.qu();return h==p?0>(j=j.wi(T))?1:0<j?-1:0:p<h?-1:1},m.yc=function(j,T){var p=j.x-T.x;return p*p+(j=j.y-T.y)*j},m.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},m.prototype.Rc=function(){this.y=this.x=NaN},m.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},m.prototype.offset=function(j,T){var p=m.tb(j,T),h=m.construct(this.x,this.y);if(p==0)return m.tb(h,j);var a=new m;return a.L(T),a.sub(j),h.sub(j),h.wi(a)/p},m.Uq=function(j,T,p){var h=new Fi.Wb;h.set(T.x),h.sub(j.x);var a=new Fi.Wb;a.set(p.y),a.sub(j.y);var c=new Fi.Wb;c.set(T.y),c.sub(j.y);var d=new Fi.Wb;return d.set(p.x),d.sub(j.x),h.Ag(a),c.Ag(d),h.sub(c),h.ps()?(h=new Fi.hp(T.x),a=new Fi.hp(j.x),c=new Fi.hp(j.y),h=h.jt(a),j=(j=new Fi.hp(p.y)).jt(c),T=(T=new Fi.hp(T.y)).jt(c),p=(p=new Fi.hp(p.x)).jt(a),h=h.lr(j),T=T.lr(p),(h=h.lr(T)).nT()?-1:h.fS()?1:0):0>(p=h.value())?-1:0<p?1:0},m.prototype.cc=function(){return Fi.O.uj(Fi.O.uj())},m}(),Fi.h=Sr,function(m){var j=function(){function T(p){this.Fy=this.Mt=0,this.OX=p}return T.prototype.reset=function(){this.Fy=this.Mt=0},T.prototype.add=function(p){p-=this.Fy;var h=this.Mt+p;this.Fy=h-this.Mt-p,this.Mt=h},T.prototype.sub=function(p){this.add(-p)},T.prototype.rm=function(){return this.OX+this.Mt},T}();m.Fx=j,m.lc=function(){function T(){}return T.Cn=function(p,h){return 0<=h?Math.abs(p):-Math.abs(p)},T.sign=function(p){return 0>p?-1:0<p?1:0},T.RK=function(p){return p-360*Math.floor(p/360)},T.round=function(p){return Math.floor(p+.5)},T.ox=function(p){return p*p},T.hq=function(p,h,a){return .5>=a?p+(h-p)*a:h-(h-p)*(1-a)},T.OG=function(p,h,a,c){.5>=a?(c.x=p.x+(h.x-p.x)*a,c.y=p.y+(h.y-p.y)*a):(c.x=h.x-(h.x-p.x)*(1-a),c.y=h.y-(h.y-p.y)*(1-a))},T.lT=function(p,h,a,c,d,g){.5>=d?(g.x=p+(a-p)*d,g.y=h+(c-h)*d):(g.x=a-(a-p)*(1-d),g.y=c-(c-h)*(1-d))},T}()}(ye||(ye={})),function(m){var j=function(T){function p(){var h=T.call(this)||this;return h.sa=0,h.na=0,h.pa=0,h.la=0,h.ka=null,h}return ri(p,T),p.prototype.ac=function(){return m.h.construct(this.sa,this.na)},p.prototype.Yp=function(h){h.x=this.sa,h.y=this.na},p.prototype.Dc=function(h){this.em(0,h)},p.prototype.ZB=function(h,a){this.em(0,m.h.construct(h,a))},p.prototype.To=function(h){this.hD(0,h)},p.prototype.setStart=function(h){this.uD(0,h)},p.prototype.wv=function(h,a){return this.Od(0,h,a)},p.prototype.YB=function(h,a,c){this.tn(0,h,a,c)},p.prototype.wc=function(){return m.h.construct(this.pa,this.la)},p.prototype.Tr=function(h){h.x=this.pa,h.y=this.la},p.prototype.Qc=function(h){this.em(1,h)},p.prototype.Ql=function(h,a){this.em(1,m.h.construct(h,a))},p.prototype.Po=function(h){this.hD(1,h)},p.prototype.setEnd=function(h){this.uD(1,h)},p.prototype.gv=function(h,a){return this.Od(1,h,a)},p.prototype.OB=function(h,a,c){this.tn(1,h,a,c)},p.prototype.Db=function(){return 1},p.prototype.B=function(){return this.Ac()},p.prototype.Oa=function(){},p.prototype.Ke=function(){return 0},p.prototype.Ea=function(h,a,c,d,g){return this.KM(h,a,c,d,g)},p.prototype.isIntersecting=function(h,a){return this.zr(h,a,!1)!=0},p.prototype.qs=function(h,a){return this.ru(h,a,!1)},p.prototype.ru=function(){return null},p.prototype.Ac=function(){return!1},p.prototype.ay=function(h){if(this.vc(),this.ka==null&&0<h)this.ka=m.O.lg(2*h);else if(this.ka!=null&&this.ka.length<2*h){for(var a=this.ka.slice(0),c=this.ka.length;c<2*h;c++)a[c]=0;this.ka=a}},p.gM=function(h,a,c){if(0<c)var d=0;for(var g=0;g<c;g++)a[0+d]=h[0],d++},p.prototype.em=function(h,a){h!=0?(this.pa=a.x,this.la=a.y):(this.sa=a.x,this.na=a.y)},p.prototype.sn=function(h){if(this.ka!=null){for(var a=m.ee.Iw(h,this.description),c=[],d=p.Gg(this.description,0),g=p.Gg(this.description,1),v=p.Gg(h,0),b=p.Gg(h,1),C=0,M=1,O=h.Aa;M<O;M++){var L=h.kd(M),q=m.ra.Va(L);if(a[M]==-1){var U=m.ra.se(L);for(L=0;L<q;L++)c[v+C]=U,c[b+C]=U,C++}else for(U=this.description.$j(a[M])-2,L=0;L<q;L++)c[v+C]=this.ka[d+U],c[b+C]=this.ka[g+U],C++,U++}this.ka=c}this.description=h},p.prototype.hD=function(h,a){if(this.Ac())throw m.i.fa("empty geometry");a.Nf(this.description),a.Ac()&&a.un();for(var c=0;c<this.description.Aa;c++)for(var d=this.description.Ed(c),g=0,v=m.ra.Va(d);g<v;g++){var b=this.Od(h,d,g);a.setAttribute(d,g,b)}},p.prototype.uD=function(h,a){if(this.vc(),a.Ac())throw m.i.fa("empty geometry");for(var c=a.description,d=0,g=c.Aa;d<g;d++)for(var v=c.Ed(d),b=m.ra.Va(v),C=0;C<b;C++){var M=a.Uc(v,C);this.tn(h,v,C,M)}},p.prototype.Od=function(h,a,c){if(this.Ac())throw m.i.fa("This operation was performed on an Empty Geometry.");if(a==0)return h!=0?c!=0?this.la:this.pa:c!=0?this.na:this.sa;if(c>=m.ra.Va(a))throw m.i.ce();var d=this.description.Pf(a);return 0<=d?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[p.Gg(this.description,h)+this.description.$j(d)-2+c]):m.ra.se(a)},p.prototype.tn=function(h,a,c,d){if(this.vc(),c>=m.ra.Va(a))throw m.i.ce();var g=this.description.Pf(a);0>g&&(this.re(a),g=this.description.Pf(a)),a==0?h!=0?c!=0?this.la=d:this.pa=d:c!=0?this.na=d:this.sa=d:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[p.Gg(this.description,h)+this.description.$j(g)-2+c]=d)},p.prototype.copyTo=function(h){if(h.getType()!=this.getType())throw m.i.N();h.description=this.description,h.ay(this.description.Ae.length-2),p.gM(this.ka,h.ka,2*(this.description.Ae.length-2)),h.sa=this.sa,h.na=this.na,h.pa=this.pa,h.la=this.la,h.vc(),this.op(h)},p.prototype.Tg=function(h,a){var c=new m.Nc;return this.Ac()?(c.Oa(),c):(c.oa=this.Od(0,h,a),c.va=c.oa,c.Lk(this.Od(1,h,a)),c)},p.prototype.ZI=function(h){this.Ac()?h.Oa():(h.oa=this.Od(0,0,0),h.va=h.oa,h.Lk(this.Od(1,0,0)))},p.prototype.Tw=function(h,a){a.Nf(this.description),a.Cb(this.hc(h));for(var c=1,d=this.description.Aa;c<d;c++)for(var g=this.description.Ed(c),v=m.ra.Va(g),b=0;b<v;b++){var C=this.Uc(h,g,b);a.setAttribute(g,b,C)}},p.prototype.FM=function(h){if(this.description!=h.description||this.sa!=h.sa||this.pa!=h.pa||this.na!=h.na||this.la!=h.la)return!1;for(var a=0;a<2*(this.description.Ae.length-2);a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},p.prototype.reverse=function(){var h=this.sa;this.sa=this.pa,this.pa=h,h=this.na,this.na=this.la,this.la=h,h=1;for(var a=this.description.Aa;h<a;h++)for(var c=this.description.kd(h),d=0,g=m.ra.Va(c);d<g;d++){var v=this.Od(0,c,d),b=this.Od(1,c,d);this.tn(0,c,d,b),this.tn(1,c,d,v)}},p.prototype.zr=function(h,a,c){var d=this.getType(),g=h.getType();if(d===322){if(g==322)return m.yb.OM(this,h,a,c);throw m.i.Qa()}throw m.i.Qa()},p.prototype.KM=function(h,a,c,d,g){var v=this.getType(),b=h.getType();if(v===322){if(b==322)return m.yb.Zx(this,h,a,c,d,g);throw m.i.Qa()}throw m.i.Qa()},p.prototype.Tx=function(){return null},p.Gg=function(h,a){return a*(h.Ae.length-2)},p.prototype.hc=function(h,a){if(a===void 0)return a=new m.h,this.hc(h,a),a;m.lc.lT(this.sa,this.na,this.pa,this.la,h,a)},p.prototype.fe=function(){return null},p.prototype.eG=function(){return null},p.prototype.cq=function(){return null},p.prototype.Bi=function(){return null},p.prototype.Pn=function(){return null},p.prototype.kg=function(){return null},p.prototype.Ux=function(h,a){return a!==void 0?this.vx(a)-this.vx(h):this.vx(h)},p.prototype.op=function(){},p.prototype.dl=function(){return null},p.prototype.ah=function(){},p.prototype.Uc=function(){return null},p.prototype.Pe=function(){return null},p.prototype.vx=function(){return null},p.prototype.NG=function(){return null},p.prototype.tb=function(h,a){if(!a&&this.zr(h,0,!1)!=0)return 0;a=17976931348623157e292;var c=this.ac(),d=h.fe(c,!1);return c.sub(h.hc(d)),(c=c.length())<a&&(a=c),c=this.wc(),d=h.fe(c,!1),c.sub(h.hc(d)),(c=c.length())<a&&(a=c),c=h.ac(),d=this.fe(c,!1),c.sub(this.hc(d)),(c=c.length())<a&&(a=c),c=h.wc(),d=this.fe(c,!1),c.sub(this.hc(d)),(c=c.length())<a&&(a=c),a},p.prototype.mg=function(){return m.pi.gm(this,null)},p}(m.aa);m.SC=j}(ye||(ye={})),new ye.h,function(m){var j;(j=m.$K||(m.$K={}))[j.Unknown=-1]="Unknown",j[j.Not=0]="Not",j[j.Weak=1]="Weak",j[j.Strong=2]="Strong",function(p){p[p.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",p[p.IsWeakSimple=2]="IsWeakSimple",p[p.IsStrongSimple=4]="IsStrongSimple",p[p.DirtyOGCFlags=8]="DirtyOGCFlags",p[p.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",p[p.DirtyExactIntervals=64]="DirtyExactIntervals",p[p.DirtyLooseIntervals=128]="DirtyLooseIntervals",p[p.DirtyIntervals=192]="DirtyIntervals",p[p.DirtyIsEnvelope=256]="DirtyIsEnvelope",p[p.DirtyLength2D=512]="DirtyLength2D",p[p.DirtyRingAreas2D=1024]="DirtyRingAreas2D",p[p.DirtyCoordinates=1993]="DirtyCoordinates",p[p.DirtyAllInternal=65535]="DirtyAllInternal",p[p.DirtyAll=16777215]="DirtyAll"}(m.MK||(m.MK={}));var T=function(p){function h(){var a=p.call(this)||this;return a.Hm=65535,a.wa=0,a.Pg=-1,a.Bb=null,a}return ri(h,p),h.prototype.op=function(){},h.prototype.$x=function(){},h.prototype.iy=function(){},h.prototype.I=function(){return this.wa},h.prototype.B=function(){return this.Ac()},h.prototype.Ac=function(){return this.wa==0},h.prototype.ak=function(a){return!!(this.Hm&a)},h.prototype.Lf=function(a,c){this.Hm=c?this.Hm|a:this.Hm&~a},h.prototype.mc=function(){this.ak(32)&&this.bN()},h.prototype.wx=function(){if(this.Ac())throw m.i.fa("This operation was performed on an Empty Geometry.")},h.prototype.ve=function(a,c){if(0>a||a>=this.wa)throw m.i.fa("index out of bounds");this.mc(),c.Nf(this.description),c.B()&&c.un();for(var d=0;d<this.description.Aa;d++)for(var g=this.description.Ed(d),v=0,b=m.ra.Va(g);v<b;v++){var C=this.za[d].eg(b*a+v);c.setAttribute(g,v,C)}},h.prototype.Ht=function(a,c){this.mc();for(var d=c.description,g=0;g<d.Aa;g++)for(var v=d.Ed(g),b=m.ra.Va(v),C=0;C<b;C++){var M=c.Uc(v,C);this.setAttribute(v,a,C,M)}},h.prototype.D=function(a,c){if(0>a||a>=this.I())throw m.i.ce();this.mc(),this.za[0].tc(2*a,c)},h.prototype.Na=function(a){var c=new m.h;return this.D(a,c),c},h.prototype.Gc=function(a,c){this.za[0].tc(2*a,c)},h.prototype.Cb=function(a,c,d){if(0>a||a>=this.wa)throw m.i.ce();this.mc();var g=this.za[0];d!==void 0?(g.write(2*a,c),g.write(2*a+1,d)):g.Tt(2*a,c),this.Pc(1993)},h.prototype.Cz=function(){if(void 0>=this.I())throw m.i.ce();this.mc();var a=this.za[0],c=new m.Nd;return c.x=a.read(NaN),c.y=a.read(NaN),c.z=this.hasAttribute(1)?this.za[1].eg():m.ra.se(1),c},h.prototype.dC=function(a){if(0>a||a>=this.I())throw m.i.ce();this.re(1),this.mc(),this.Pc(1993);var c=this.za[0];c.write(2*a,(void 0).x),c.write(2*a+1,(void 0).y),this.za[1].pr(a,(void 0).z)},h.prototype.Uc=function(a,c,d){if(0>c||c>=this.wa)throw m.i.ce();var g=m.ra.Va(a);if(d>=g)throw m.i.ce();this.mc();var v=this.description.Pf(a);return 0<=v?this.za[v].eg(c*g+d):m.ra.se(a)},h.prototype.yF=function(a,c){return this.Uc(a,c)},h.prototype.setAttribute=function(a,c,d,g){if(0>c||c>=this.wa)throw m.i.ce();var v=m.ra.Va(a);if(d>=v)throw m.i.ce();this.re(a),this.mc(),a=this.description.Pf(a),this.Pc(1993),this.za[a].pr(c*v+d,g)},h.prototype.ub=function(a){return this.wx(),this.re(a),this.mc(),this.za[this.description.Pf(a)]},h.prototype.hn=function(a,c){if(c!=null&&m.ra.Tp(a)!=c.Tp())throw m.i.N();this.re(a),a=this.description.Pf(a),this.za==null&&(this.za=m.Yc.qI(this.description.Aa)),this.za[a]=c,this.Pc(16777215)},h.prototype.sn=function(a){var c=null;if(this.za!=null){var d=m.ee.Iw(a,this.description);c=[];for(var g=0,v=a.Aa;g<v;g++)d[g]!=-1&&(c[g]=this.za[d[g]])}this.description=a,this.za=c,this.Pg=-1,this.Pc(16777215)},h.prototype.AD=function(a){this.wu(!0),a instanceof m.l?this.$.A(a):this.$.Qo(a)},h.prototype.aN=function(a){this.wu(!1),a instanceof m.l?this.$.A(a):this.$.Qo(a)},h.prototype.bn=function(a){this.wu(!0),this.$.copyTo(a)},h.prototype.A=function(a){this.AD(a)},h.prototype.Qo=function(a){this.AD(a)},h.prototype.xc=function(a){this.aN(a)},h.prototype.Tg=function(a,c){var d=new m.Nc;return this.Ac()?(d.Oa(),d):(this.wu(!0),this.$.Tg(a,c))},h.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var c=this.I(),d=0,g=this.description.Aa;d<g;d++)a=this.za[d].An(a,0,c*m.ra.Va(this.description.Ed(d)));return a},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h&&this.description.Nb(a.description))||this.Ac()!=a.Ac())return!1;if(this.Ac())return!0;var c=this.I();if(c!=a.I())return!1;for(var d=0;d<this.description.Aa;d++){var g=this.description.kd(d),v=this.ub(g),b=a.ub(g);if(!v.Nb(b,0,c*m.ra.Va(g)))return!1}return!0},h.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw m.i.N();this.dD(a)},h.prototype.dD=function(a){this.mc(),a.description=this.description,a.za=null;var c=this.description.Aa,d=null;if(this.za!=null){d=[];for(var g=0;g<c;g++)this.za[g]!=null&&(d[g]=this.za[g].GB(this.I()*m.ra.Va(this.description.Ed(g))))}this.$!=null?(a.$=this.$.Ia(),this.$.copyTo(a.$)):a.$=null,a.wa=this.wa,a.Hm=this.Hm,a.za=d;try{this.op(a)}catch{throw a.Oa(),m.i.fu()}},h.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},h.prototype.Pc=function(a){a==16777215&&(this.Pg=-1,this.$x()),this.Hm|=a,this.lM(),this.vc()},h.prototype.wu=function(a){if(this.mc(),this.ak(192))if(this.$==null?this.$=new m.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(a);for(var c=1;c<this.description.Aa;c++)for(var d=this.description.Ed(c),g=m.ra.Va(d),v=this.za[c],b=0;b<g;b++){var C=new m.Nc;C.Oa();for(var M=0;M<this.wa;M++){var O=v.eg(M*g+b);C.Zb(O)}this.$.setInterval(d,b,C)}a&&this.Lf(192,!1)}},h.prototype.hy=function(){this.$.Oa();for(var a=this.za[0],c=new m.h,d=0;d<this.wa;d++)a.tc(2*d,c),this.$.Zb(c)},h.prototype.yp=function(a){a.Oa();for(var c=this.za[0],d=new m.h,g=0;g<this.wa;g++)c.tc(2*g,d),a.Zb(d)},h.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=m.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var a=0;a<this.description.Aa;a++){var c=this.description.Ed(a);if(this.za[a]!=null){var d=m.ra.Va(c),g=m.O.truncate(this.za[a].size/d);g<this.wa&&(g=m.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[a].resize(g*d,m.ra.se(c))),g<this.Pg&&(this.Pg=g)}else this.za[a]=m.Yc.YE(c,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},h.prototype.dm=function(a){if(0>a)throw m.i.N();a!=this.wa&&(this.wa=a,this.Pc(65535))},h.prototype.om=function(a){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=a)return this.ak(8)?1:2}return-1},h.prototype.Ch=function(a,c){if(this.QT=c,a==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),a==0)this.Lf(2,!1),this.Lf(4,!1);else if(a==1)this.Lf(2,!0),this.Lf(4,!1);else{if(a!=2)throw m.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},h.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},h.prototype.kD=function(a,c,d,g){if(0>a||a>=this.wa||0>c||c>=this.wa)throw m.i.fa("index out of bounds");this.mc(),g.Nf(this.description),g.B()&&g.un();for(var v=0;v<this.description.Aa;v++)for(var b=this.description.Ed(v),C=0,M=m.ra.Va(b);C<M;C++){var O=this.za[v].eg(M*a+C),L=this.za[v].eg(M*c+C);g.setAttribute(b,C,m.lc.hq(O,L,d))}},h.prototype.yr=function(a,c){var d=this.za[0].o,g=d[2*a]-d[2*c];return a=d[2*a+1]-d[2*c+1],Math.sqrt(g*g+a*a)},h.prototype.KR=function(a){if(0>a||a>=this.wa)throw m.i.ce();this.mc();var c=new m.Sa;c.Nf(this.description),c.B()&&c.un();for(var d=0;d<this.description.Aa;d++)for(var g=this.description.kd(d),v=0,b=m.ra.Va(g);v<b;v++){var C=this.za[d].eg(b*a+v);c.setAttribute(g,v,C)}return c},h.prototype.Dh=function(a,c){if(0>a||a>=this.wa)throw m.i.ce();if(c.B())throw m.i.N();this.mc();for(var d=c.description,g=0;g<d.Aa;g++)for(var v=d.kd(g),b=m.ra.Va(v),C=0;C<b;C++){var M=c.Uc(v,C);this.setAttribute(v,a,C,M)}},h.prototype.lu=function(){return null},h.prototype.fj=function(){return null},h}(m.aa);m.Gx=T}(ye||(ye={})),function(m){var j=function(){function T(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new m.$c(7),this.Zn=null}return T.prototype.Vo=function(p){this.Zn=p},T.prototype.RP=function(){this.Rv=!1},T.prototype.De=function(p){this.ob.De(p)},T.prototype.Pr=function(p){var h=this.ob.Ce();return this.rX(h),this.uX(p,h),h},T.prototype.MP=function(p){this.ob.jd(p)},T.prototype.addElement=function(p,h){return h==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),h=this.Qe),this.FD(p,0,h)},T.prototype.KD=function(p){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(p,1,this.Qe)},T.prototype.xn=function(p){this.Qe==-1&&(this.Qe=this.Pr(-1));var h=this.Qe,a=this.ob.o;if(h==-1||a[7*h]==-1)return p=this.ob.Ll([-1,-1,-1,p,this.gl(),-1,-1]),(a=this.ob.o)[7*h]=p,this.vp(-1,p,h,a),p;var c=h==-1?-1:a[7*h+2];return p=this.ob.Ll([-1,-1,c,p,this.gl(),-1,-1]),(a=this.ob.o)[7*c+1]=p,this.oy(p,a),a[7*p+2]===-1&&(a[7*h]=p),this.vp(-1,p,h,a),p},T.prototype.zu=function(p,h,a,c){var d=-1;d==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),d=this.Qe);var g=this.ob.o;if(d==-1||g[7*d]==-1)return a=this.ob.Ll([-1,-1,-1,a,this.gl(),-1,-1]),(g=this.ob.o)[7*d]=a,this.vp(-1,a,d,g),a;if(c){c=h!=-1?this.Zn.compare(this,a,h):-1;var v=p!=-1?this.Zn.compare(this,a,p):1}else c=-1,v=1;if(c==0||v==0)return g[7*d+3]=c==0?h:p,-1;for((h!=-1&&p!=-1?this.Tm>m.O.bB(this.Tm)>>1:h!=-1)?p=h:c=v,h=!0;;){if(0>c){if((v=g[7*p])==-1){c=p,a=this.ob.Ll([-1,-1,p,a,this.gl(),-1,-1]),(g=this.ob.o)[7*p]=a;break}p=v}else{if((v=g[7*p+1])==-1){c=g[7*p+6],a=this.ob.Ll([-1,-1,p,a,this.gl(),-1,-1]),(g=this.ob.o)[7*p+1]=a;break}p=v}h&&(c*=-1,h=!1)}return this.oy(a,g),g[7*a+2]===-1&&(g[7*d]=a),this.vp(c,a,d,g),a},T.prototype.FF=function(){return this.iR(this.Qe)},T.prototype.vd=function(p,h){h=h==-1?this.Qe:h,this.Rv?this.LP(p,h):this.iY(p,h)},T.prototype.search=function(p,h){for(h=this.sv(h);h!=-1;){var a=this.Zn.compare(this,p,h);if(a==0)return h;h=0>a?this.ll(h):this.Xp(h)}return-1},T.prototype.IW=function(p){for(var h=this.sv(-1),a=-1;h!=-1;){var c=p.compare(this,h);if(c==0)return h;0>c?h=this.ll(h):(a=h,h=this.Xp(h))}return a},T.prototype.uJ=function(p){for(var h=this.sv(-1),a=-1;h!=-1;){var c=p.compare(this,h);if(c==0)return h;0>c?(a=h,h=this.ll(h)):h=this.Xp(h)}return a},T.prototype.ja=function(p){return this.ob.T(p,3)},T.prototype.ll=function(p){return this.ob.T(p,0)},T.prototype.Xp=function(p){return this.ob.T(p,1)},T.prototype.getParent=function(p){return this.ob.T(p,2)},T.prototype.lb=function(p){return this.ob.T(p,6)},T.prototype.we=function(p){return this.ob.T(p,5)},T.prototype.rc=function(p){return p==-1?this.kl(this.Qe):this.kl(p)},T.prototype.Fc=function(p){return p==-1?this.Zr(this.Qe):this.Zr(p)},T.prototype.ZR=function(p){return p==-1?this.bG(this.Qe):this.bG(p)},T.prototype.Sj=function(p,h){this.NB(p,h)},T.prototype.sv=function(p){return p==-1?this.YF(this.Qe):this.YF(p)},T.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},T.prototype.size=function(p){return p==-1?this.$F(this.Qe):this.$F(p)},T.prototype.KN=function(p,h){for(var a=h[7*p],c=h[7*p+1],d=h[7*p+4];a!=-1||c!=-1;){var g=a!=-1?h[7*a+4]:2147483647;if(c=c!=-1?h[7*c+4]:2147483647,d<=Math.min(g,c))break;g<=c?this.sJ(a,h):this.rJ(p,h),a=h[7*p],c=h[7*p+1]}},T.prototype.oy=function(p,h){if(this.Rv)for(var a=h[7*p+4],c=h[7*p+2];c!=-1&&h[7*c+4]>a;)h[7*c]==p?this.sJ(p,h):this.rJ(c,h),c=h[7*p+2]},T.prototype.rJ=function(p,h){var a=h[7*p+1];h[7*a+2]=h[7*p+2],h[7*p+2]=a;var c=h[7*a];h[7*p+1]=c,c!=-1&&(h[7*c+2]=p),h[7*a]=p,(c=h[7*a+2])!=-1&&(h[7*c]==p?h[7*c]=a:h[7*c+1]=a)},T.prototype.sJ=function(p,h){var a=h[7*p+2];h[7*p+2]=h[7*a+2],h[7*a+2]=p;var c=h[7*p+1];h[7*a]=c,c!=-1&&(h[7*c+2]=a),h[7*p+1]=a,(c=h[7*p+2])!=-1&&(h[7*c]===a?h[7*c]=p:h[7*c+1]=p)},T.prototype.Pk=function(p,h){this.ob.S(p,2,h)},T.prototype.TB=function(p,h){this.ob.S(p,0,h)},T.prototype.XB=function(p,h){this.ob.S(p,1,h)},T.prototype.WB=function(p,h){this.ob.S(p,5,h)},T.prototype.ex=function(p,h){this.ob.S(p,6,h)},T.prototype.XJ=function(p,h){this.ob.S(h,0,p)},T.prototype.rX=function(p){this.ob.S(p,4,0)},T.prototype.uX=function(p,h){this.ob.S(h,5,p)},T.prototype.YF=function(p){return p==-1?-1:this.ob.T(p,0)},T.prototype.kl=function(p){return p==-1?-1:this.ob.T(p,1)},T.prototype.Zr=function(p){return p==-1?-1:this.ob.T(p,2)},T.prototype.iR=function(p){return p==-1?-1:this.ob.T(p,3)},T.prototype.$F=function(p){return p==-1?0:this.ob.T(p,4)},T.prototype.bG=function(p){return this.ob.T(p,5)},T.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},T.prototype.fl=function(p){p!=-1&&this.ob.jd(p)},T.prototype.gl=function(){return this.Tm=m.O.bB(this.Tm),1073741823&this.Tm},T.prototype.FD=function(p,h,a){var c=this.ob.o;if(a==-1||c[7*a]==-1)return p=this.ob.Ll([-1,-1,-1,p,this.gl(),-1,-1]),(c=this.ob.o)[7*a]=p,this.vp(-1,p,a,c),p;for(var d=a==-1?-1:c[7*a];;){var g=h==-1?1:this.Zn.compare(this,p,d);if(0>g){if((g=this.ll(d))==-1){h=d,p=this.ob.Ll([-1,-1,d,p,this.gl(),-1,-1]),(c=this.ob.o)[7*d]=p;break}d=g}else{if(h==1&&g==0)return c[7*a+3]=d,-1;if((g=c[7*d+1])==-1){h=c[7*d+6],p=this.ob.Ll([-1,-1,d,p,this.gl(),-1,-1]),(c=this.ob.o)[7*d+1]=p;break}d=g}}return this.oy(p,c),c[7*p+2]===-1&&(c[7*a]=p),this.vp(h,p,a,c),p},T.prototype.vp=function(p,h,a,c){if(p!=-1){var d=c[7*p+5];c[7*p+5]=h}else d=a==-1?-1:c[7*a+2];c[7*h+5]=d,d!=-1&&(c[7*d+6]=h),c[7*h+6]=p,p==(a==-1?-1:c[7*a+1])&&(c[7*a+1]=h),p==-1&&(c[7*a+2]=h),c[7*a+4]=(a==-1?0:c[7*a+4])+1},T.prototype.AB=function(p,h){var a=this.ob.o,c=a[7*p+5];p=a[7*p+6],c!=-1?a[7*c+6]=p:a[7*h+1]=p,p!=-1?a[7*p+5]=c:a[7*h+2]=c,a[7*h+4]=h===-1?-1:a[7*h+4]-1},T.prototype.iY=function(p,h){this.AB(p,h);var a=this.ll(p),c=this.Xp(p),d=this.getParent(p),g=p;if(a!=-1&&c!=-1){this.Tm=m.O.bB(this.Tm);var v=1073741823<this.Tm?this.lb(p):this.we(p),b=this.getParent(v)==p;this.ob.gC(p,v,0),this.ob.gC(p,v,1),this.ob.gC(p,v,2),d!=-1?this.ll(d)==p?this.TB(d,v):this.XB(d,v):this.XJ(v,h),b?(a==v?(this.TB(v,p),this.Pk(c,v)):c==v&&(this.XB(v,p),this.Pk(a,v)),this.Pk(p,v),d=v):(this.Pk(a,v),this.Pk(c,v),d=this.getParent(p),g=v),a=this.ll(p),c=this.Xp(p),a!=-1&&this.Pk(a,p),c!=-1&&this.Pk(c,p)}a=a!=-1?a:c,d==-1?this.XJ(a,h):this.ll(d)==g?this.TB(d,a):this.XB(d,a),a!=-1&&this.Pk(a,d),this.fl(p)},T.prototype.LP=function(p,h){var a=this.ob.o;a[7*p+4]=2147483647;var c=-1,d=-1,g=h===-1?-1:a[7*h],v=g==p;if(v&&(c=a[7*g],d=a[7*g+1],c==-1&&d==-1))return this.AB(g,h),this.fl(g),void(a[7*h]=-1);this.KN(p,a),(g=a[7*p+2])!=-1&&(a[7*g]==p?a[7*g]=-1:a[7*g+1]=-1),this.AB(p,h),this.fl(p),v&&(a[7*h]=c==-1||a[7*c+2]!=-1?d:c)},T.prototype.NB=function(p,h){this.ob.S(p,3,h)},T}();m.Yj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){p!==void 0&&this.K(p,h)}return T.prototype.K=function(p,h){this.oa=p,this.va=h,this.normalize()},T.prototype.isIntersecting=function(p){return this.oa<=p.oa?this.va>=p.oa:p.va>=this.oa},T.prototype.move=function(p){this.B()||(this.oa+=p,this.va+=p)},T.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var p=this.oa;this.oa=this.va,this.va=p}isNaN(this.va)&&this.Oa()}},T.prototype.Oa=function(){this.va=this.oa=NaN},T.prototype.B=function(){return isNaN(this.oa)},T.prototype.Zb=function(p){typeof p=="number"?this.B()?this.va=this.oa=p:this.Lk(p):p.B()||(this.B()?(this.oa=p.oa,this.va=p.va):(this.oa>p.oa&&(this.oa=p.oa),this.va<p.va&&(this.va=p.va),this.oa>this.va&&this.Oa()))},T.prototype.Lk=function(p){p<this.oa?this.oa=p:p>this.va&&(this.va=p)},T.prototype.contains=function(p){return typeof p=="number"?p>=this.oa&&p<=this.va:p.oa>=this.oa&&p.va<=this.va},T.prototype.Ea=function(p){this.B()||p.B()?this.Oa():(this.oa<p.oa&&(this.oa=p.oa),this.va>p.va&&(this.va=p.va),this.oa>this.va&&this.Oa())},T.prototype.W=function(p){this.B()||(this.oa-=p,this.va+=p,this.va<this.oa&&this.Oa())},T.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},T.prototype.KB=function(p,h){p>h?(this.oa=h,this.va=p):(this.oa=p,this.va=h)},T.prototype.It=function(p){return m.O.Rk(p,this.oa,this.va)},T.prototype.R=function(){return this.va-this.oa},T.prototype.sf=function(){return .5*(this.oa+this.va)},T.prototype.Nb=function(p){return p==this||p instanceof T&&(!(!this.B()||!p.B())||this.oa==p.oa&&this.va==p.va)},T.prototype.cc=function(){return m.O.uj(m.O.uj())},T}();m.Nc=j}(ye||(ye={})),function(m){var j=new m.Nc,T=new m.Nc,p=function(){this.ne=null,this.pb=-1,this.sb=new m.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new m.Nc,this.Uf.KB(0,0)};m.IY=p;var h=function(){function a(c,d,g){this.g=c,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=d,this.Nq=10*d,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=g,this.TA=new p,this.YH=new p,m.O.truncate(3*c.fd/2)}return a.prototype.mG=function(c,d,g,v){c.ne=v===null?null:v[g[5*d]],c.Tv=c.ne!=null,c.Tv||((v=g[5*d+2])!==-1&&this.g.mW(g[5*d],g[5*v],c.sb),c.ne=c.sb,c.Uf.KB(c.sb.sa,c.sb.pa),c.Uf.va+=this.qa,c.sb.rI(),c.Vv=c.sb.la==c.sb.na,c.Vv||(c.qA=(c.sb.pa-c.sb.sa)/(c.sb.la-c.sb.na)))},a.prototype.OO=function(c,d){var g=c.zr(d,this.qa,!0);return g!=0?g==2?this.Qy():this.xi():(c.Yp(pn),c.Tr(ms),d.Yp(Ji),d.Tr(tn),Ai.ma(this.Kq,this.Hk),pn.qb(Ji)&&this.Hk==pn.y?0>ms.compare(tn)?Ai.L(ms):Ai.L(tn):pn.qb(tn)&&this.Hk==pn.y?0>ms.compare(Ji)?Ai.L(ms):Ai.L(Ji):Ji.qb(ms)&&this.Hk==Ji.y?0>pn.compare(tn)?Ai.L(pn):Ai.L(tn):ms.qb(tn)&&this.Hk==ms.y&&(0>pn.compare(Ji)?Ai.L(pn):Ai.L(Ji)),c.Pe(Ai.y,Ai.x)<d.Pe(Ai.y,Ai.x)?-1:1)},a.prototype.MO=function(c,d){if(c.sb.na==d.sb.na&&c.sb.sa==d.sb.sa)return c.sb.la==d.sb.la&&c.sb.pa==d.sb.pa?this.gA?this.Qy():0:this.PE(c,d);if(c.sb.la==d.sb.la&&c.sb.pa==d.sb.pa)return this.OE(c,d);var g=this.OE(c,d);return c=this.PE(c,d),0>g&&0>c?-1:0<g&&0<c?1:this.xi()},a.prototype.IO=function(c,d){if(c.pa>d.pa){if(d.pa>d.sa&&d.la-d.na<2*this.qa&&c.vi(d.pa,d.la,this.qa))return this.xi()}else if((d.la-d.na)/(d.pa-d.sa)*(c.pa-c.sa)<this.Nq&&d.vi(c.pa,c.la,this.qa))return this.xi();return 1},a.prototype.JO=function(c,d){if(c.sa<d.sa){if(d.pa>d.sa&&d.la-d.na<2*this.qa&&c.vi(d.pa,d.la,this.qa))return this.xi()}else if((d.la-d.na)/(d.pa-d.sa)*(c.sa-c.pa)<this.Nq&&d.vi(c.sa,c.na,this.qa))return this.xi();return-1},a.prototype.KO=function(c,d){var g=new m.h;g.uc(d.wc(),d.ac()),g.ar(),g.normalize();var v=new m.h;v.uc(c.ac(),d.ac());var b=new m.h;b.uc(c.wc(),d.ac()),v=v.Qh(g),g=b.Qh(g),b=Math.abs(v);var C=Math.abs(g);if(b<C){if(b<this.Nq&&d.vi(c.sa,c.na,this.qa))return this.xi()}else if(C<this.Nq&&d.vi(c.pa,c.la,this.qa))return this.xi();return 0>v&&0>g?-1:0<v&&0<g?1:this.xi()},a.prototype.NE=function(c,d){return c.na==d.na&&c.sa==d.sa?this.IO(c,d):c.la==d.la&&c.pa==d.pa?this.JO(c,d):this.KO(c,d)},a.prototype.LO=function(c,d){return c.la==d.la&&c.pa==d.pa&&c.na==d.na&&c.sa==d.sa?this.gA?this.Qy():0:this.xi()},a.prototype.OE=function(c,d){var g=1;if(c.sb.na<d.sb.na){g=-1;var v=c;c=d,d=v}c=c.sb,v=d.sb;var b=c.sa-v.sa;d=d.qA*(c.na-v.na);var C=this.Nq;return b<d-C?-g:b>d+C?g:v.vi(c.sa,c.na,this.qa)?this.xi():b<d?-g:g},a.prototype.PE=function(c,d){var g=1;if(d.sb.la<c.sb.la){g=-1;var v=c;c=d,d=v}c=c.sb,v=d.sb;var b=c.pa-v.sa;d=d.qA*(c.la-v.na);var C=this.Nq;return b<d-C?-g:b>d+C?g:v.vi(c.pa,c.la,this.qa)?this.xi():b<d?-g:g},a.prototype.Qy=function(){return this.rg=!0,this.Ni=new m.Md(5,this.Lo,this.gt),-1},a.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new m.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},a.prototype.NO=function(c,d,g,v){if(this.rg)return-1;var b=this.OH==this.Hk&&this.NH==this.Kq;if(b&&c==this.Ws)var C=this.PH;else C=NaN,this.Ws=-1;return b&&d==this.Xs?b=this.QH:(b=NaN,this.Xs=-1),g.ne.ZI(j),v.ne.ZI(T),j.va<T.oa?-1:T.va<j.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(C)&&(this.Ws=c,this.PH=C=c=g.ne.Pe(this.Hk,this.Kq)),isNaN(b)&&(this.Xs=d,this.QH=b=c=v.ne.Pe(this.Hk,this.Kq)),Math.abs(C-b)<=this.qa?this.OO(g.ne,v.ne):C<b?-1:C>b?1:0)},a.prototype.Kr=function(){this.rg=!1},a.prototype.rm=function(){return this.Ni},a.prototype.$J=function(c,d){this.Hk=c,this.Kq=d,this.gt=this.Lo=this.Xs=this.Ws=-1},a.prototype.compare=function(c,d,g){return this.rg?-1:(c=c.ja(g),this.Dm=g,this.RE(d,d,c,c))},a.prototype.RE=function(c,d,g,v){if(this.Lo==d)var b=this.TA;else this.Lo=d,b=this.TA,this.TA.pb=c,this.mG(b,d,this.g.td.o,this.g.We);if(C==null){this.gt=v;var C=this.YH;this.YH.pb=g,this.mG(C,v,this.g.td.o,this.g.We)}return b.Tv||C.Tv?this.NO(d,v,b,C):b.Uf.va<C.Uf.oa?-1:C.Uf.va<b.Uf.oa?1:(c=b.Vv?1:0,(c|=C.Vv?2:0)==0?this.MO(b,C):c==1?this.NE(b.sb,C.sb):c==2?-1*this.NE(C.sb,b.sb):this.LO(b.sb,C.sb))},a}();m.UC=h}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.g=p,this.qa=h,this.rg=!1,this.Lo=-1,this.Uf=new m.Nc,this.Gq=new m.h,this.Gq.Rc(),this.ie=new m.yb,this.Dm=-1,this.BA=17976931348623157e292}return T.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},T.prototype.Dh=function(p){this.Gq.L(p)},T.prototype.compare=function(p,h){return this.SE(h,p.ja(h))},T.prototype.SE=function(p,h){var a=this.g.bc(h)!=null;if(a||(this.g.ed(h,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),a)throw m.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=p,this.rg=!0,0;this.ie.rI(),a=this.ie.ac(),(h=new m.h).uc(this.ie.wc(),a),h.ar();var c=new m.h;return c.uc(this.Gq,a),a=h.Qh(c),(a/=h.length())<10*-this.qa?-1:a>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((h=Math.abs(a))<this.BA&&(this.Dm=p,this.BA=h),this.rg=!0,h<.25*this.qa)?0:0>a?-1:1},T}();m.aM=j}(ye||(ye={})),function(m){function j(p,h,a,c){a=new Float64Array(p.subarray(a,c)),p.set(a,h)}var T=function(){function p(h){this.Pb=this.pk=!1,this.o=null;var a=h;2>a&&(a=2),this.o=new Float64Array(a),this.size=h}return p.prototype.rotate=function(h,a,c){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>c||h>c)throw m.i.N();h!=a&&c!=a&&(this.ni(h,a-h,1),this.ni(a,c-a,1),this.ni(h,c-h,1))},p.qf=function(h,a){var c=new p(h),d=c.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return c},p.Bn=function(h){var a=new p(0);return a.o=new Float64Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var c=new p(0);return c.size=h.size,c.size>a&&(c.size=a),2>(a=c.size)&&(a=2),c.o=new Float64Array(a),c.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),c},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Float64Array(h):h<=this.o.length||(0<this.o.length?((h=new Float64Array(h)).set(this.o),this.o=h):this.o=new Float64Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var c=new Float64Array(this.o,0,h);this.o=c}}else{h>this.o.length&&(c=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(c=new Float64Array(c)).set(this.o),this.o=c),c=this.o;for(var d=this.size;d<h;d++)c[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,c){for(var d=this.size;a<d&&a<c;a++)h=m.O.uj(this.read(a));return h},p.prototype.Nb=function(h,a,c){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(c>d||c>g&&d!=g)return!1;for(c>d&&(c=d);a<c;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,c,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||c%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+c),d)this.o.set(h.o.subarray(a,a+c),v);else{d=c;for(var b=0;b<c;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,c,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();var C=this.size-b;if(C<d&&this.resize(this.size+d-C),j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<c&&(c+=d),g)this.o.set(a.o.subarray(c,c+d),h);else for(g=d,b=0;b<d;b+=v)for(g-=v,C=0;C<v;C++)this.o[h+b+C]=a.o[c+g+C]},p.prototype.Iz=function(h,a,c,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[c++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[c+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.Ln=function(h,a,c,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<c;d++)this.o[h+d]=a},p.prototype.vj=function(h,a,c){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(c-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,c,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||c.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),c==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=c.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=c.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=c.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,c){if(this.Pb||h+a>this.size)throw m.i.Hb();0<c-(h+a)&&j(this.o,h,h+a,h+(c-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,c){if(this.Pb||1>c||a%c!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=c){a-=c;for(var v=0;v<c;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,c){if(0>a||0>c||0>a||c+a>this.size)throw m.i.N();for(var d=a;d<a+c;d++)this.o[d]=h},p.prototype.Ar=function(h,a,c,d,g){if(!(d&&h==c||(this.o.set(this.o.subarray(c,c+a),h),d)))for(c=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[c+v];this.o[c+v]=this.o[h+v],this.o[h+v]=b}c+=g,h-=g}},p.prototype.vC=function(h,a,c,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=c[d].x,this.o[h+1]=c[d].y,h+=g},p.prototype.uC=function(h,a,c){if(0>h||0>a)throw m.i.N();if(a!=0){this.size<(a<<1)+h&&this.resize((a<<1)+h),a+=0;for(var d=0;d<a;d++)this.o[h]=c[d][0],this.o[h+1]=c[d][1],h+=2}},p.prototype.Vw=function(h,a,c,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)c[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)c[d]=this.o[h],d--},p.prototype.uB=function(h,a,c){if(0>h||0>a||this.size<(a>>1)+h)throw m.i.N();if(a!=0){a=0+a;for(var d=0;d<a;d++)c[d][0]=this.o[h],c[d][1]=this.o[h+1],h+=2}},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,c){Array.prototype.sort.call(this.o.subarray(h,a),c)},p.prototype.Tp=function(){return 1},p}();m.be=T}(ye||(ye={})),function(m){function j(p,h,a,c){a=new Int32Array(p.subarray(a,c)),p.set(a,h)}m.rY=function(){this.random=1973};var T=function(){function p(h){this.Pb=this.pk=!1,this.o=null;var a=h;2>a&&(a=2),this.o=new Int32Array(a),this.size=h}return p.prototype.rotate=function(h,a,c){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>c||h>c)throw m.i.N();h!=a&&c!=a&&(this.ni(h,a-h,1),this.ni(a,c-a,1),this.ni(h,c-h,1))},p.qf=function(h,a){var c=new p(h),d=c.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return c},p.Bn=function(h){var a=new p(0);return a.o=new Int32Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var c=new p(0);return c.size=h.size,c.size>a&&(c.size=a),2>(a=c.size)&&(a=2),c.o=new Int32Array(a),c.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),c},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Int32Array(h):h<=this.o.length||(0<this.o.length?((h=new Int32Array(h)).set(this.o),this.o=h):this.o=new Int32Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var c=new Int32Array(this.o,0,h);this.o=c}}else{h>this.o.length&&(c=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(c=new Int32Array(c)).set(this.o),this.o=c),c=this.o;for(var d=this.size;d<h;d++)c[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,c){for(var d=this.size;a<d&&a<c;a++)h=m.O.Th(this.read(a),h);return h},p.prototype.Nb=function(h,a,c){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(c>d||c>g&&d!=g)return!1;for(c>d&&(c=d);a<c;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,c,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||c%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+c),d)this.o.set(h.o.subarray(a,a+c),v);else{d=c;for(var b=0;b<c;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,c,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();if(j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<c&&(c+=d),g)this.o.set(a.o.subarray(c,c+d),h);else for(g=d,b=0;b<d;b+=v){g-=v;for(var C=0;C<v;C++)this.o[h+b+C]=a.o[c+g+C]}},p.prototype.Iz=function(h,a,c,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[c++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[c+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.Ln=function(h,a,c,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<c;d++)this.o[h+d]=a},p.prototype.vj=function(h,a,c){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(c-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,c,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||c.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),c==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=c.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=c.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=c.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,c){if(this.Pb||h+a>this.size)throw m.i.Hb();0<c-(h+a)&&j(this.o,h,h+a,h+(c-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,c){if(this.Pb||1>c||a%c!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=c){a-=c;for(var v=0;v<c;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,c){if(0>a||0>c||0>a||c+a>this.size)throw m.i.N();for(var d=a;d<a+c;d++)this.o[d]=h},p.prototype.Ar=function(h,a,c,d,g){if(!(d&&h==c||(this.o.set(this.o.subarray(c,c+a),h),d)))for(c=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[c+v];this.o[c+v]=this.o[h+v],this.o[h+v]=b}c+=g,h-=g}},p.prototype.vC=function(h,a,c,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=c[d].x,this.o[h+1]=c[d].y,h+=g},p.prototype.Vw=function(h,a,c,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)c[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)c[d]=this.o[h],d--},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,c){10>a-h?p.rG(this.o,h,a,c):p.qB(this.o,h,a-1,c)},p.prototype.Tp=function(){return 2},p.prototype.Fc=function(){return this.o[this.size-1]},p.prototype.If=function(){this.resize(this.size-1)},p.prototype.bX=function(h){this.o[this.size-1]=h},p.prototype.SV=function(h){h<this.size-1&&(this.o[h]=this.o[this.size-1]),this.resize(this.size-1)},p.prototype.lF=function(h){for(var a=0,c=this.size;a<c;a++)if(this.o[a]==h)return a;return-1},p.prototype.hG=function(h){return 0<=this.lF(h)},p.rG=function(h,a,c,d){for(var g=a;g<c;g++){for(var v=h[g],b=g-1;b>=a&&0<d(h[b],v);)h[b+1]=h[b],b--;h[b+1]=v}},p.tx=function(h,a,c){var d=h[c];h[c]=h[a],h[a]=d},p.qB=function(h,a,c,d){if(!(a>=c))for(;;){if(9>c-a){p.rG(h,a,c+1,d);break}var g=h[a];p.tx(h,a,c);for(var v=a,b=a;b<c;b++)0>=d(h[b],g)&&(p.tx(h,v,b),v+=1);p.tx(h,v,c),v-a<c-v?(p.qB(h,a,v-1,d),a=v+1):(p.qB(h,v+1,c,d),c=v-1)}},p}();m.ia=T}(ye||(ye={})),function(m){function j(p,h,a,c){a=new Int8Array(p.subarray(a,c)),p.set(a,h)}var T=function(){function p(h){this.o=null;var a=h;2>a&&(a=2),this.o=new Int8Array(a),this.size=h}return p.prototype.rotate=function(h,a,c){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>c||h>c)throw m.i.N();h!=a&&c!=a&&(this.ni(h,a-h,1),this.ni(a,c-a,1),this.ni(h,c-h,1))},p.qf=function(h,a){var c=new p(h),d=c.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return c},p.Bn=function(h){var a=new p(0);return a.o=new Int8Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var c=new p(0);return c.size=h.size,c.size>a&&(c.size=a),2>(a=c.size)&&(a=2),c.o=new Int8Array(a),c.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),c},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Int8Array(h):h<=this.o.length||(0<this.o.length?((h=new Int8Array(h)).set(this.o),this.o=h):this.o=new Int8Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var c=new Int8Array(this.o,0,h);this.o=c}}else{h>this.o.length&&(c=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(c=new Int8Array(c)).set(this.o),this.o=c),c=this.o;for(var d=this.size;d<h;d++)c[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,c){for(var d=this.size;a<d&&a<c;a++)h=m.O.Th(this.read(a),h);return h},p.prototype.Nb=function(h,a,c){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(c>d||c>g&&d!=g)return!1;for(c>d&&(c=d);a<c;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,c,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||c%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+c),d)this.o.set(h.o.subarray(a,a+c),v);else{d=c;for(var b=0;b<c;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,c,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();if(j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<c&&(c+=d),g)this.o.set(a.o.subarray(c,c+d),h);else for(g=d,b=0;b<d;b+=v){g-=v;for(var C=0;C<v;C++)this.o[h+b+C]=a.o[c+g+C]}},p.prototype.Ln=function(h,a,c,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<c;d++)this.o[h+d]=a},p.prototype.Iz=function(h,a,c,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[c++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[c+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.vj=function(h,a,c){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(c-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,c,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||c.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),c==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=c.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=c.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=c.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,c){if(this.Pb||h+a>this.size)throw m.i.Hb();0<c-(h+a)&&j(this.o,h,h+a,h+(c-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,c){if(this.Pb||1>c||a%c!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=c){a-=c;for(var v=0;v<c;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,c){if(0>a||0>c||0>a||c+a>this.size)throw m.i.N();for(var d=a;d<a+c;d++)this.o[d]=h},p.prototype.Ar=function(h,a,c,d,g){if(!(d&&h==c||(this.o.set(this.o.subarray(c,c+a),h),d)))for(c=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[c+v];this.o[c+v]=this.o[h+v],this.o[h+v]=b}c+=g,h-=g}},p.prototype.vC=function(h,a,c,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=c[d].x,this.o[h+1]=c[d].y,h+=g},p.prototype.Vw=function(h,a,c,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)c[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)c[d]=this.o[h],d--},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,c){a=this.o.subarray(h,a),Array.prototype.sort.call(a,c),this.o.set(a,h)},p.prototype.zJ=function(h,a){if(this.Pb)throw m.i.fa("invalid call. Attribute Stream is read only.");this.o[h]|=a},p.prototype.KE=function(h,a){if(this.Pb)throw m.i.fa("invalid call. Attribute Stream is read only.");this.o[h]&=~a},p.prototype.Tp=function(){return 1},p}();m.pn=T}(ye||(ye={})),function(m){m.Yc=function(){function j(){}return j.Mr=function(T,p){return m.pn.qf(T,p)},j.Dn=function(T,p){return m.be.qf(T,p)},j.pP=function(T,p,h){switch(T){case 1:T=m.be.qf(p,h);break;case 2:T=m.ia.qf(p,h);break;case 4:T=m.pn.qf(p,h);break;default:throw m.i.Qa()}return T},j.YE=function(T,p){return j.pP(m.ra.Tp(T),p*m.ra.Va(T),m.ra.se(T))},j.Oh=function(T,p){return m.ia.qf(T,p)},j.qI=function(T){var p,h=[];for(p=0;p<T;p++)h.push(null);return h},j}()}(ye||(ye={})),function(m){m.ga=function(j){j===void 0&&(j=0),this.u=j}}(ye||(ye={})),function(m){m.NL=function(){function j(){}return j.bind=function(T){m.Sc=T.PeDefs,m.pf=T.PeFactory,m.NC=T.PeVertcs,m.ej=T.PeCSTransformations,m.MC=T.PeGTTransformations,m.LL=T.PeGeogtran,m.KL=T.PeFactoryCodechange,m.LC=T.PeGCSExtent,m.Cg=T.PePCSInfo,m.ML=T.PeHorizon,m.JL=T.PeCoordsys,m.lp=T.PeGTlistExtended,m.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,m.pf.initialize(null),m.Mx=T.PeGTlistExtendedEntry,m.pf.fromString(m.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},j}(),m.pf=null,m.NC=null,m.JL=null,m.ML=null,m.Cg=null,m.lp=null,m.Mx=null,m.LC=null,m.KL=null,m.LL=null,m.Sc=null,m.MC=null,m.ej=null}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Mb=function(p,h){return 0<=h?T.P(p):-T.P(p)},T.P=function(p){return 0>p?-p:p},T.ti=function(p){return 3552713678800501e-30>p},T.KC=function(p,h,a){return T.P(p-h)<=a*(1+(T.P(p)+T.P(h))/2)},T.Y=function(p,h){return T.KC(p,h,3552713678800501e-30)},T.FL=function(p){return 3552713678800501e-30>=T.P(p)},T.Cd=function(p){return T.FL(p)},T}();m.s=j,m.F=function(){function T(){}return T.gp=function(p,h){var a=0;return(p=j.P(p))+(h=j.P(h))!=0&&(p>h?(a=h/p,a=p*Math.sqrt(1+a*a)):(a=p/h,a=h*Math.sqrt(1+a*a))),a},T.Wq=function(p,h,a,c,d){for(var g=[0,0,0],v=[0,0,0],b=0;2>=b;b++)h[b]-=p[b],a[b]-=h[b];a=g[1]*v[2]-g[2]*v[1],h=g[2]*v[0]-g[0]*v[2],g=g[0]*v[1]-g[1]*v[0],p=-1*(a*p[0]+h*p[1]+g*p[2]),c[0]=a,c[1]=h,c[2]=g,c[3]=p,v=T.on(c),c[0]/=v,c[1]/=v,c[2]/=v,c[3]/=v,d!=0&&(v=j.Cd(g)?j.Cd(p)?j.Mb(1,h):-j.Mb(1,p):j.Mb(1,g),v*=j.Mb(1,d),c[0]*=v,c[1]*=v,c[2]*=v,c[3]*=v)},T.zx=function(p,h,a){a[0]=p[1]*h[2]-h[1]*p[2],a[1]=p[2]*h[0]-h[2]*p[0],a[2]=p[0]*h[1]-h[0]*p[1]},T.St=function(p,h){return p[0]*h[0]+p[1]*h[1]+p[2]*h[2]},T.on=function(p){return T.gp(T.gp(p[0],p[1]),p[2])},T.cl=function(p,h,a,c,d,g,v,b){p=T.n(p,h,a);var C=Math.cos(a);g.u=(p+d)*C*Math.cos(c),v.u=(p+d)*C*Math.sin(c),b.u=(p*(1-h)+d)*Math.sin(a)},T.jO=function(p,h,a,c,d,g,v){var b=T.gp(h,a),C=1*Math.sqrt(1-p),M=C/1;if(j.Y(b,0))g.u=0,d.u=j.Mb(1.570796326794897,c),v.u=j.P(c)-C;else{g.u=Math.atan2(a,h),a=Math.atan2(1*c,C*b),g=Math.cos(a);var O=Math.sin(a);h=C*p/(1-p),p*=1,a=Math.atan2(c+h*O*O*O,b-p*g*g*g),3.141592653589793<j.P(a)&&(a=j.Mb(3.141592653589793,a)-a),a=Math.atan(M*Math.tan(a)),O=Math.sin(a),g=Math.cos(a),d.u=Math.atan2(c+h*O*O*O,b-p*g*g*g),1.570796326794897<j.P(d.u)&&(d.u=j.Mb(3.141592653589793,d.u)-d.u),a=Math.atan(M*Math.tan(d.u)),O=Math.sin(a),g=Math.cos(a),v.u=(c-C*O)*Math.sin(d.u)+(b-1*g)*Math.cos(d.u)}},T.n=function(p,h,a){return a=Math.sin(a),p/Math.sqrt(1-h*a*a)},T.ot=function(p,h){return Math.atan2(Math.sin(h)*(1-p),Math.cos(h))},T.Qj=function(p,h){return Math.atan2(Math.sin(h),Math.cos(h)*(1-p))},T.Rq=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=Math.sqrt(1-p),c=(1-a)/(1+a),d=c*c,g=c*d,v=c*g,b=c*v,C=c*b,M=c*C,O=1.572916666666667*g-3.2578125*b+4.295068359375*M;p=2.142578125*v-6.071484375*C,a=3.129296875*b-11.249837239583334*M;var L=4.775276692708333*C,q=7.958636765252976*M,U=Math.cos(2*h);return h+Math.sin(2*h)*(1.5*c-.84375*g+.525390625*b-.2688395182291667*M-O+a-q+U*(2*(1.3125*d-1.71875*v+1.650146484375*C)-4*p+6*L+U*(4*O-12*a+24*q+U*(8*p-32*L+U*(16*a-80*q+U*(32*L+64*U*q))))))}for(a=1-p,c=p/2,g=(d=j.P(h))*T.Zu(p)/(1.570796326794897*a),v=9999,C=d,d=0;1e-16<v&&50>d;d++)M=T.w(p,C),b=C-(O=(b=(T.kG(C,p)-c*Math.sin(2*C)/M)/a-g)/(M=1/(M*M*M))),v=j.P(O),C=b;return 0<=h?C:-C},T.qW=function(p,h){return j.ti(h)?p:p*T.Zu(h)/1.570796326794897},T.ba=function(p){return 0>(p=T.pF(p,6.283185307179586))?p+6.283185307179586:3.141592653589793>j.P(p)||j.Y(j.P(p),3.141592653589793)?p:p-6.283185307179586},T.pF=function(p,h){return p-Math.floor(p/h)*h},T.Ah=function(p,h){if(.006884661117170036>h){var a=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h,c=a*a;return p/(1+h)*(1+.25*a+.015625*c+.00390625*a*c)*1.570796326794897}return p*T.Zu(h)},T.Vq=function(p,h){var a=j.Mb(1,Math.sin(h));return h=1.570796326794897>=(h=j.P(T.pF(h,3.141592653589793)))?h:3.141592653589793-h,(j.Y(h,1.570796326794897)?h:Math.atan(Math.sqrt(1-p)*Math.tan(h)))*a},T.q=function(p,h,a){if(.006884661117170036>h){var c=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h,d=h*c,g=h*d,v=h*g,b=h*v,C=h*b,M=-.7291666666666666*d+.2278645833333333*v+.03987630208333334*C,O=.615234375*g-.21533203125*b,L=-.54140625*v+.20302734375*C,q=.48876953125*b,U=-.4488699776785715*C,ee=Math.cos(2*a);return p/(1+h)*((1+.25*c+.015625*g+.00390625*b)*a+Math.sin(2*a)*(-1.5*h+.1875*d+.0234375*v+.00732421875*C-M+L-U+ee*(2*(.9375*c-.234375*g-.03662109375*b)-4*O+6*q+ee*(4*M-12*L+24*U+ee*(8*O-32*q+ee*(16*L-80*U+ee*(32*q+64*ee*U)))))))}return p*(T.kG(a,h)-.5*h*Math.sin(2*a)/T.w(h,a))},T.w=function(p,h){return h=Math.sin(h),Math.sqrt(1-p*h*h)},T.Zu=function(p){return j.KC(p,1,2220446049250313e-31)?1:1>p?T.Xw(0,1-p)-p/3*T.Uw(0,1-p):NaN},T.kG=function(p,h){var a=j.Mb(1,p);p=j.P(p);var c=Math.floor(p/1.570796326794897);if(1<h)h=p==0?0:NaN;else if(j.Cd(c))h=(p=T.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p);else{var d=m.O.truncate(c%2),g=T.Zu(h);0<d?(p=1.570796326794897*(c+1)-p,h=g*(c+1)-(h=(p=Math.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p))):(p-=1.570796326794897*c,h=g*c+(h=(p=Math.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p)))}return h*a},T.sin=function(p){p=T.ba(p);var h=j.Mb(1,p);return p=j.P(p),j.Y(p,3.141592653589793)?0:j.Y(p,1.570796326794897)?1*h:Math.sin(p)*h},T.Uw=function(p,h){var a,c,d,g,v=p,b=h,C=1;for(h=0,p=1;c=((a=.2*(v+b+3*C))-v)/a,d=(a-b)/a,g=(a-C)/a,!(1e-4>j.P(c)&&1e-4>j.P(d)&&1e-4>j.P(g));)g=Math.sqrt(b),h+=p/((a=Math.sqrt(C))*(C+(g=Math.sqrt(v)*(g+a)+g*a))),p*=.25,v=.25*(v+g),b=.25*(b+g),C=.25*(C+g);return b=(v=c*d)-(C=g*g),3*h+p*(1+(C=v-6*C)*(.10227272727272728*C-.2142857142857143-.1730769230769231*g*(c=C+b+b))+g*(.1666666666666667*c+g*(-.4090909090909091*b+.1153846153846154*g*v)))/(a*Math.sqrt(a))},T.Xw=function(p,h){for(var a,c,d,g,v=1;c=2-((a=(p+h+v)/3)+p)/a,d=2-(a+h)/a,g=2-(a+v)/a,!(1e-4>j.P(c)&&1e-4>j.P(d)&&1e-4>j.P(g));v=.25*(v+a))a=Math.sqrt(h),c=Math.sqrt(v),p=.25*(p+(a=Math.sqrt(p)*(a+c)+a*c)),h=.25*(h+a);return(1+(.04166666666666666*(p=c*d-g*g)-.1-.06818181818181818*(h=c*d*g))*p+.07142857142857142*h)/Math.sqrt(a)},T.Qw=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=p*p,c=p*a,d=p*c,g=p*d,v=p*g,b=p*v,C=-(.02708333333333333*c+.03430059523809524*d+.03149181547619048*g+.02634359154541446*v+.02156896735835538*b),M=.007669890873015873*d+.01299603174603175*g+.0148051353064374*v+.01454454953803912*b,O=-(.002275545634920635*g+.004830845032667949*v+.006558395368616723*b),L=.0006957236677288761*v+.001775193002406544*b,q=-.000217324089394402*b,U=Math.cos(2*h);return h+Math.sin(2*h)*(-(.5*p+.2083333333333333*a+.09375*c+.04878472222222222*d+.02916666666666667*g+.01938905423280423*v+.01388255931712963*b)-C+O-q+U*(2*(.1041666666666667*a+.0875*c+.06050347222222222*d+.04151785714285714*g+.02958958540013228*v+.02203667534722222*b)-4*M+6*L+U*(4*C-12*O+24*q+U*(8*M-32*L+U*(16*O-80*q+U*(32*L+64*U*q))))))}return h==0||j.Y(j.P(h),1.570796326794897)?a=h:(d=(c=Math.sqrt(p))*Math.sin(h),a=Math.tan(.7853981633974483+h/2)*Math.pow((1-d)/(1+d),c/2),a=2*Math.atan(a)-1.570796326794897),a},T.yO=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=p*(L=p*(O=p*(U=p*p))),c=p*(q=p*a),d=.05833333333333333*O+.07232142857142858*L+.05634300595238095*a+.0355325796406526*q+.020235546186067*c,g=.02653149801587302*L+.04379960317460317*a+.0429211791776896*q+.03255384637546096*c,v=.01294022817460318*a+.02668104344536636*q+.03155651254609588*c,b=.00659454790965208*q+.0163075268674227*c,C=.003463473736911237*c,M=Math.cos(2*h);return h+Math.sin(2*h)*(.5*p+.2083333333333333*U+.08333333333333333*O+.03611111111111111*L+.01875*a+.01195601851851852*q+.008863673941798942*c-d+v-C+M*(2*(.1458333333333333*U+.1208333333333333*O+.07039930555555556*L+.03616071428571429*a+.01839451058201058*q+.01017113095238095*c)-4*g+6*b+M*(4*d-12*v+24*C+M*(8*g-32*b+M*(16*v-80*C+M*(32*b+64*M*C))))))}var O=Math.sqrt(p),L=O/2,q=Math.tan(.7853981633974483+h/2);p=0,d=1;for(var U=h;d!=0;U=c)a=O*Math.sin(U),c=q*Math.pow((1+a)/(1-a),L),c=2*Math.atan(c)-1.570796326794897,p++,(j.Y(c,U)||3e4<p)&&(d=0);return U},T}()}(ye||(ye={})),function(m){var j=function(){function T(p){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new m.h,this.XH=new m.h,this.KA=!1,this.vq=new m.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=p,this.As=m.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var h=p.getCode();0<h?(this.Kk=h,m.pf.getCode(p)):this.Kk=m.pf.getCode(p),0>this.Kk&&(this.Kk=0);var a=this.Ue.getType();if(this.jH=a==m.Sc.PE_TYPE_PROJCS?2:1,a==m.Sc.PE_TYPE_PROJCS&&!p.loadConstants())throw m.i.N("PeProjcs.loadConstants failed");h=a==m.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),a!=m.Sc.PE_TYPE_GEOGCS&&m.pf.getCode(h),this.Eo=p.getUnit(),this.RH=h.getPrimem().getLongitude(),this.wH=p=h.getUnit().getUnitFactor(),p=Math.PI/(180*p),1e-10>Math.abs(p-1)&&(p=1),this.GA=p,a&m.Sc.PE_TYPE_PROJCS?(h=this.Ue,this.HA=1/h.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=m.Cg.generate(h,m.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=m.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,a=1/h.getUnit().getUnitFactor(),this.sw=.001/h.getDatum().getSpheroid().getAxis()*a,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return T.prototype.$r=function(){return this.Kk},T.prototype.kk=function(){return this.tw},T.Py=function(p,h){return p==h||p!=null&&h!=null&&p.Kk==0&&h.Kk==0&&p.As===h.As},T.prototype.Wc=function(){return this.zl},T.prototype.gh=function(p){p.K(this.so)},T.prototype.pv=function(){return this.so.v},T.prototype.ov=function(){return this.so.C},T.prototype.GR=function(p){p.K(this.uw)},T.prototype.lY=function(){var p=this.Ue.getType();if(p==m.Sc.PE_TYPE_PROJCS){p=this.Ue;var h=this.kk().getCentralMeridian(),a=p.getGeogcs();if(a==null)throw m.i.fa("internal error");h=[[h+(a=1/a.getUnit().getUnitFactor()*Math.PI),0]],m.ej.geogToProj(p,1,h),h=h[0][0],a=p.getParameters()[m.Sc.PE_PARM_X0].getValue();var c=this.ml();p=new m.l,c.A(p),h=(c=Math.abs(h-a))+a,a=-1*c+a,c=p.H,p=p.G;var d=new m.l;d.K(a,p,h,c),this.so==null&&(this.so=d)}else{if(p!=m.Sc.PE_TYPE_GEOGCS)throw m.i.fa("internal error");a=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(p=new m.l).K(-a,-a/2,a,a/2),this.so==null&&(this.so=p)}},T.prototype.mY=function(){var p=this.Ue.getType();if(p==m.Sc.PE_TYPE_PROJCS){var h=this.Ue;if(p=this.kk().getCentralMeridian(),(h=h.getGeogcs())==null)throw m.i.fa("internal error");h=1/h.getUnit().getUnitFactor()*Math.PI;var a=this.Vr(),c=new m.l;a.A(c),(a=new m.l).K(p-h,c.G,p+h,c.H),this.uw==null&&(this.uw=a)}else{if(p!=m.Sc.PE_TYPE_GEOGCS)throw m.i.fa("internal error");h=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(p=new m.l).K(-h,-h/2,h,h/2),this.uw==null&&(this.uw=p)}},T.prototype.bf=function(){return this.GA},T.prototype.pm=function(){return this.HA},T.prototype.Vr=function(){if(this.zl)return this.ul;var p=this.ul;return p??(this.xx(),this.ul)},T.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},T.prototype.xx=function(){if(this.Ue.getType()==m.Sc.PE_TYPE_PROJCS){var p=this.Ue,h=p.getGeogcs(),a=p.horizonGcsGenerate();if(a!=null){var c=a[0].getNump(),d=a[0].getKind();p=0<a[0].getInclusive();var g=this.bf(),v=90*g,b=360*g,C=370*g,M=180*g*m.Sc.PE_HORIZON_DELTA/Math.PI,O=new m.l,L=null;if(1<c){for(var q=1;q<c;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_LINE){L==null&&(L=new m.Ta);var U=a[q].getCoord();L.sx(U[0][0],U[0][1]),L.yj(U[1][0],U[1][1])}}if(d==m.Sc.PE_HORIZON_RECT)a=a[0].getCoord(),O.K(a[0][0],a[0][1]),O.Zb(a[1][0],a[1][1]),Math.abs(O.H-v)<1e-7*M&&(O.H=v),Math.abs(O.G+v)<1e-7*M&&(O.G=-v),O.R()>C&&(a=-400*g,O.K(a,O.G,a+5*b,O.H)),a=new m.Fh(O),this.ul==null&&(this.ul=a,this.Iv=p);else{if(C=new m.Da,b=this.kk().isGcsHorizonMultiOverlap(),O=m.gu.bF(h,m.hu.Integer64),b){for(C=new m.gL,M=m.Gh.local().V(C,O,null),q=0;q<c;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_POLY){for(h=a[q].getSize(),g=a[q].getCoord(),d=[],v=0;v<h;v++)d[v]=m.h.construct(g[v][0],g[v][1]);a[q].getInclusive(),b&&((g=new m.Da).Yk(d,h-1),C.ZX(g),M.qe())}C=M.next()}else for(q=0;q<c;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_POLY){for(h=a[q].getSize(),g=a[q].getCoord(),b=[],v=0;v<h;v++)b[v]=m.h.construct(g[v][0],g[v][1]);a[q].getInclusive(),C.Yk(b,h-1)}p?m.Xj.local().wn(C,O,1):m.kp.local().wn(C,O,1),m.dj.local().wn(C,O,1),this.ul==null&&(this.ul=C,this.Iv=p,this.YG=L)}}}},T.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},T.prototype.DK=function(){if(this.jH==2){var p=this.Ue.horizonPcsGenerate();if(p!=null){var h=p[0].getKind();p[0].getInclusive();var a=p[0].getNump(),c=!1;if(h==m.Sc.PE_HORIZON_RECT)p=p[0].getCoord(),(a=new m.l).K(p[0][0],p[0][1]),a.Zb(p[1][0],p[1][1]),p=new m.Fh(a);else{for(h=-1,c=0;c<a;c++)p[c].getKind()==m.Sc.PE_HORIZON_POLY&&(h=c);for(c=p[h].getSize()-1,p=p[h].getCoord(),a=[],h=0;h<c;h++)a[h]=m.h.construct(p[h][0],p[h][1]);p=h=new m.Da,h.Yk(a,c),c=!0}this.kk().isDensificationNeeded()&&(a=1e5*this.pm(),p=m.Xl.local().V(p,a,null)),c&&(c=new m.Fh,p.bn(c),p.Ke(),p.Qb(),p.qR(),m.Xj.local().wn(p,null,1)),this.Us==null&&(this.Us=p)}}},T.prototype.ml=function(){if(this.zl)return this.Us;var p=this.Us;return p??(this.DK(),this.Us)},T.prototype.nY=function(){if(this.Ue.getType()==m.Sc.PE_TYPE_PROJCS){var p=90*this.bf();p=[[0,p],[0,-p]],m.ej.geogToProj(this.Ue,2,p);var h=this.kk(),a=h.getNorthPoleLocation()!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY;h=h.getSouthPoleLocation()!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(a&&this.HH.ma(p[0][0],p[0][1]),h&&this.XH.ma(p[1][0],p[1][1]))}this.KA=!0},T.prototype.CK=function(){if(this.jH==1){var p=400*this.bf();this.vq.K(-p,-p,p,p)}else p=m.Cg.generate(this.Ue,m.Cg.PE_PCSINFO_OPTION_DOMAIN),p=m.l.construct(p.getDomainMinx(),p.getDomainMiny(),p.getDomainMaxx(),p.getDomainMaxy()),this.vq.B()&&this.vq.K(p)},T.prototype.hR=function(p){this.zl&&p.K(this.vq),this.vq.B()&&this.CK(),p.K(this.vq)},T.prototype.Up=function(){return this.RH},T.prototype.zi=function(){return this.bA},T.prototype.Hd=function(){return this.Eo},T.prototype.Xr=function(){return this.wH},T}();m.OC=j}(ye||(ye={})),function(m){var j=function(){function T(p){this.KT=p,this.As=m.zb.xv(p,0,!0);var h=p.getCode();this.ss=0<h?h:m.pf.getCode(p),0>this.ss&&(this.ss=0),this.Eo=h=this.KT.getUnit(),this.IH=1/h.getUnitFactor(),m.pf.getCode(p)}return T.Py=function(p,h){return p==h||p!=null&&h!=null&&p.ss==0&&h.ss==0&&p.As===h.As},T.prototype.$r=function(){return this.ss},T}();m.PL=j}(ye||(ye={})),function(m){m.Yg=function(){function j(){}return j.tb=function(T,p,h,a,c,d,g,v){if(d!=null||g!=null||v!=null){a=m.F.ba(a),p=m.F.ba(p),h=m.F.ba(h),c=m.F.ba(c),1.570796326794897<m.s.P(h)&&(h=m.s.Mb(3.141592653589793,h)-h,p=m.F.ba(p+3.141592653589793)),1.570796326794897<m.s.P(c)&&(c=m.s.Mb(3.141592653589793,c)-c,a=m.F.ba(a+3.141592653589793));var b=m.F.ba(a-p);if(m.s.Y(h,c)&&(m.s.Y(p,a)||m.s.Y(m.s.P(h),1.570796326794897)))d!=null&&(d.u=0),g!=null&&(g.u=0),v!=null&&(v.u=0);else{if(m.s.Y(h,-c)){if(m.s.Y(m.s.P(h),1.570796326794897))return d!=null&&(d.u=3.141592653589793*T),g!=null&&(g.u=0<h?m.F.ba(3.141592653589793-m.F.ba(a)):m.F.ba(a)),void(v!=null&&(v.u=0<h?m.F.ba(a):m.F.ba(3.141592653589793-m.F.ba(a))));if(m.s.Y(m.s.P(b),3.141592653589793))return d!=null&&(d.u=3.141592653589793*T),g!=null&&(g.u=0),void(v!=null&&(v.u=0))}var C=m.s.P(h)==1.570796326794897?0:Math.cos(h),M=Math.sin(h),O=m.s.P(c)==1.570796326794897?0:Math.cos(c),L=Math.sin(c),q=m.s.P(b)==1.570796326794897?0:Math.cos(b),U=m.s.P(b)==3.141592653589793?0:Math.sin(b);if(d!=null){var ee=Math.sin((c-h)/2);b=Math.sin(b/2),d.u=2*Math.asin(Math.sqrt(ee*ee+C*O*b*b))*T}g!=null&&(g.u=m.s.Y(m.s.P(h),1.570796326794897)?0>h?a:m.F.ba(3.141592653589793-a):Math.atan2(O*U,C*L-M*O*q)),v!=null&&(m.s.Y(m.s.P(c),1.570796326794897)?v.u=0>c?p:m.F.ba(3.141592653589793-p):(v.u=Math.atan2(C*U,L*C*q-O*M),v.u=m.F.ba(v.u+3.141592653589793)))}}},j.rf=function(T,p,h,a,c,d,g){if(d!=null||g!=null){p=m.F.ba(p),h=m.F.ba(h),1.570796326794897<m.s.P(h)&&(h=m.s.Mb(3.141592653589793,h)-h,p=m.F.ba(p+3.141592653589793)),m.s.Y(m.s.P(h),1.570796326794897)&&(p=0),c=m.F.ba(c);var v=m.s.Y(m.s.P(c),1.570796326794897)?0:Math.cos(c),b=m.s.Y(m.s.P(c),3.141592653589793)?0:Math.sin(c),C=m.s.Y(m.s.P(h),1.570796326794897)?0:Math.cos(h),M=Math.sin(h);T=a/T,a=m.s.Y(m.s.P(T),1.570796326794897)?0:Math.cos(T);var O=m.s.Y(m.s.P(T),3.141592653589793)?0:Math.sin(T),L=Math.asin(M*a+C*O*v);g!=null&&(g.u=L),d!=null&&(d.u=m.s.Y(m.s.P(L),1.570796326794897)?m.s.Y(h,-L)?0>L?c:m.F.ba(3.141592653589793-c):p:m.s.Y(m.s.P(h),1.570796326794897)&&m.s.Y(T,3.141592653589793)?0>h?c:m.F.ba(3.141592653589793-c):m.F.ba(p+Math.atan2(O*b,C*a-M*O*v)))}},j}()}(ye||(ye={})),function(m){m.Wk=function(){function j(){}return j.tb=function(T,p,h,a,c,d,g,v,b){var C=new m.ga(0),M=new m.ga(0),O=[0,0,0],L=[0,0,0],q=[0,0,0],U=new m.ga(0),ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0);if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,c,d,g,v,b);else{c=m.F.ba(c),h=m.F.ba(h);var fe=m.F.ba(c-h);if(m.s.Y(a,d)&&(m.s.Y(h,c)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(c)):m.F.ba(c)),void(b!=null&&(b.u=0<a?m.F.ba(c):m.F.ba(3.141592653589793-m.F.ba(c))));m.s.Y(m.s.P(fe),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897))&&(m.s.Y(m.s.P(a),1.570796326794897)?h=c:c=h);var Ce=0;if(0>fe){Ce=1;var Ie=h;h=c,c=Ie,Ie=a,a=d,d=Ie}fe=m.F.ot(p,a);var Ne=m.F.ot(p,d);v==null&&b==null||(m.Yg.tb(T,h,fe,c,Ne,null,C,M),C=Math.atan2(Math.sin(C.u)*Math.cos(a-fe),Math.cos(C.u)),M=Math.atan2(Math.sin(M.u)*Math.cos(d-Ne),Math.cos(M.u)),Ce!=0&&(Ie=C,C=M,M=Ie),v!=null&&(v.u=C),b!=null&&(b.u=M)),g!=null&&(m.F.cl(1,p,a,h,0,Q,ge,ve),O[0]=Q.u,O[1]=ge.u,O[2]=ve.u,m.F.cl(1,p,d,c,0,Q,ge,ve),L[0]=Q.u,L[1]=ge.u,L[2]=ve.u,q[0]=O[1]*L[2]-L[1]*O[2],q[1]=-(O[0]*L[2]-L[0]*O[2]),q[2]=O[0]*L[1]-L[0]*O[1],p=1-m.F.w(p,m.F.Vq(p,m.F.Qj(p,Math.acos(q[2]/Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]))))),p*=2-p,v=Math.atan2(-q[1],-q[0]),q=m.F.ba(v-1.570796326794897),v=m.F.ba(v+1.570796326794897),q=m.s.P(m.F.ba(h-q))<=m.s.P(m.F.ba(h-v))?q:v,m.Yg.tb(1,q,0,h,fe,U,null,null),m.Yg.tb(1,q,0,c,Ne,ee,null,null),3.141592653589793<U.u+ee.u&&(q=m.F.ba(q+3.141592653589793),m.Yg.tb(1,q,0,h,fe,U,null,null),m.Yg.tb(1,q,0,c,Ne,ee,null,null)),U.u*=m.s.Mb(1,a),ee.u*=m.s.Mb(1,d),U.u=m.F.Qj(p,U.u),ee.u=m.F.Qj(p,ee.u),h=m.F.q(T,p,U.u),T=m.F.q(T,p,ee.u),g.u=m.s.P(T-h))}}},j.rf=function(T,p,h,a,c,d,g,v){var b=0,C=new m.ga(0),M=new m.ga(0),O=[0,0,0],L=[0,0,0],q=new m.ga(0),U=new m.ga(0),ee=new m.ga(0);if(g!=null||v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,c,d,g,v);else if(m.s.Cd(c))g!=null&&(g.u=h),v!=null&&(v.u=a);else if(d=m.F.ba(d),0>c&&(c=m.s.P(c),d=m.F.ba(d+3.141592653589793)),h=m.F.ba(h),a=m.F.ba(a),1.570796326794897<m.s.P(a)&&(h=m.F.ba(h+3.141592653589793),a=m.s.Mb(3.141592653589793,a)-a),m.s.Y(m.s.P(a),1.570796326794897)&&(h=0),m.s.Cd(a)){var Q=m.s.P(1.570796326794897-m.s.P(d));Q=m.F.Qj(p,Q),Q=1-m.F.w(p,m.F.Vq(p,Q)),Q*=2-Q,T=c/m.F.Ah(T,Q)*1.570796326794897,T=m.F.Rq(Q,T),T=m.F.ot(Q,T),m.Yg.rf(1,h,a,T,d,g,C),v!=null&&(b=C.u),v!=null&&(v.u=m.F.Qj(p,b))}else if(m.s.Y(m.s.P(a),1.570796326794897))C=2*(b=m.F.Ah(T,p)),d=0<(T=m.s.Mb(1.570796326794897,a))?m.F.ba(3.141592653589793-d):d,a=b-c,m.s.P(a)<=b?g!=null&&(g.u=d):(a=Math.floor(c/C),m.O.truncate(a%2)==0?(g!=null&&(g.u=d),c-=a*C):(g!=null&&(g.u=m.F.ba(d+3.141592653589793)),c=(a+1)*C-c),a=b-c),v!=null&&(v.u=m.F.Rq(p,a/b*T));else{Q=m.F.ot(p,a),d=Math.atan2(Math.sin(d),Math.cos(d)*Math.cos(a-Q));var ge=m.O.truncate(m.s.Mb(1,Q))*(1.570796326794897>=m.s.P(d)?1:-1);d=m.F.ba(h+Math.atan(Math.tan(d)*-Math.sin(Q))),m.Yg.tb(T,d,0,h,Q,null,M,null),Q=m.s.P(1.570796326794897-m.s.P(M.u)),Q=m.F.Qj(p,Q),Q=1-m.F.w(p,m.F.Vq(p,Q)),Q*=2-Q,m.F.cl(1,p,0,d,0,q,U,ee),O[0]=q.u,O[1]=U.u,O[2]=ee.u,m.F.cl(1,p,a,h,0,q,U,ee),L[0]=q.u,L[1]=U.u,L[2]=ee.u,a=Math.acos((O[0]*L[0]+O[1]*L[1]+O[2]*L[2])/Math.sqrt(L[0]*L[0]+L[1]*L[1]+L[2]*L[2])),a=m.F.Qj(Q,a),c=0<(a=m.F.q(T,Q,a)+c*ge)?M.u:m.F.ba(M.u+3.141592653589793),T=m.s.P(a)/m.F.Ah(T,Q)*1.570796326794897,T=m.F.Rq(Q,T),T=m.F.ot(Q,T),m.Yg.rf(1,d,0,T,c,g,C),v!=null&&(b=C.u),v!=null&&(v.u=m.F.Qj(p,b))}},j}()}(ye||(ye={})),function(m){m.cu=function(){function j(){}return j.tb=function(T,p,h,a,c,d,g,v,b){var C=0,M=0,O=0;if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,c,d,g,v,b);else{var L=m.F.ba(c-h);if(m.s.Y(a,d)&&(m.s.Cd(L)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(c)):m.F.ba(c)),void(b!=null&&(b.u=0<a?m.F.ba(c):m.F.ba(3.141592653589793-m.F.ba(c))));m.s.Y(m.s.P(L),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else if(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897)||m.s.Cd(L)||m.s.Y(m.s.P(L),3.141592653589793))return void m.Wk.tb(T,p,h,a,c,d,g,v,b);var q=1-Math.sqrt(1-p),U=p/(1-p),ee=T*(1-q);T=m.F.Vq(p,a);var Q=m.F.Vq(p,d);p=m.s.P(T)==1.570796326794897?0:Math.cos(T);var ge=Math.sin(T),ve=m.s.P(Q)==1.570796326794897?0:Math.cos(Q),fe=Math.sin(Q),Ce=L,Ie=Math.cos(Ce),Ne=Math.sin(Ce),Ve=1,Xe=0;do{var et=Ce,dt=Math.sqrt(Math.pow(ve*Ne,2)+Math.pow(p*fe-ge*ve*Ie,2)),ct=ge*fe+p*ve*Ie,mt=Math.atan2(dt,ct);if(dt==0){Ve=0;break}var lt=p*ve*Ne/dt;if(C=Math.cos(Math.asin(lt)),M=ct-2*ge*fe/(C*=C),1<m.s.P(M)&&(M=m.s.Mb(1,M)),Ce=L+(1-(Ce=q/16*C*(4+q*(4-3*C))))*q*lt*(mt+Ce*dt*(M+Ce*ct*(2*(O=M*M)-1))),Ie=Math.cos(Ce),Ne=Math.sin(Ce),Xe++,3.141592653589793<m.s.P(Ce)&&30<Xe){Ve=0;break}}while(5e3>=Xe&&!m.s.Y(et,Ce));if(Ve!=0)q=(U*=C)*(256+U*(U*(74-47*U)-128))/1024,g!=null&&(g.u=ee*(1+U*(4096+U*(U*(320-175*U)-768))/16384)*(mt-q*dt*(M+q/4*(ct*(2*O-1)-q/6*M*(4*dt*dt-3)*(4*O-3))))),v!=null&&(v.u=m.s.Y(m.s.P(a),1.570796326794897)?0>a?c:m.F.ba(3.141592653589793-c):Math.atan2(ve*Ne,p*fe-ge*ve*Ie)),b!=null&&(m.s.Y(m.s.P(d),1.570796326794897)?b.u=0>d?h:m.F.ba(3.141592653589793-h):(b.u=Math.atan2(p*Ne,p*fe*Ie-ge*ve),b.u=m.F.ba(b.u+3.141592653589793)));else{Ce=m.s.Mb(3.141592653589793,L),ct=ge*fe-p*ve,mt=Math.acos(ct),dt=Math.sin(mt),C=1,Xe=lt=0;do O=lt,Ie=1-.25*(lt=q*(C*=C)*(1+q+q*q))+.1875*(M=q*q*(Ie=C*C)*(1+2.25*q))-.1953125*(Ve=q*q*q*Ie*C),lt=.25*lt-.25*M+.29296875*Ve,Ne=.03125*M-.05859375*Ve,Ve*=.00651041666666667,M=ct-2*ge*fe/C,1<m.s.P(M)&&(M=m.s.Mb(1,M)),C=Math.acos(M),ct=Math.cos(2*C),et=Math.cos(3*C),Ne=(lt=m.s.Y(a,-d)?m.F.ba(3.141592653589793-L)/(3.141592653589793*q*Ie):m.F.ba(Ce-L)/(q*(Ie*mt+lt*dt*M+Ne*Math.sin(2*mt)*ct+Ve*Math.sin(3*mt)*et)))*dt/(p*ve),Ce=1.570796326794897<m.s.P(L)?m.s.Mb(3.141592653589793,Ne)-Math.asin(Ne):Math.asin(Ne),Ie=Math.cos(Ce),dt=Math.sqrt(Math.pow(ve*Ne,2)+Math.pow(p*fe-ge*ve*Ie,2)),mt=3.141592653589793-Math.asin(m.s.P(dt)),ct=Math.cos(mt),C=Math.cos(Math.asin(lt)),Xe++;while(70>=Xe&&!m.s.Y(O,lt));g!=null&&(Ie=1+(U*=C*=C)*(4096+U*(U*(320-175*U)-768))/16384,m.s.Y(a,-d)?g.u=3.141592653589793*ee*Ie:(M=ct-2*ge*fe/C,C=Math.acos(M),ct=Math.cos(2*C),et=Math.cos(3*C),g.u=ee*(Ie*mt+U*(U*(128+U*(35*U-60))-512)/2048*dt*M+U*(5*U-4)/6144*U*U*Math.sin(2*mt)*ct+Ve*Math.sin(3*mt)*et+-762939453125e-16*U*U*U*U*Math.sin(4*mt)*Math.cos(4*C)))),v!=null&&(m.s.Cd(a)&&m.s.Cd(d)?(C=Math.sqrt(1-lt*lt),v.u=Math.acos(C),0>L&&(v.u*=-1)):m.s.Y(m.s.P(a),1.570796326794897)?v.u=0>a?c:m.F.ba(3.141592653589793-c):(g=lt/p,ee=Math.sqrt(1-g*g),0>p*fe-ge*ve*Math.cos(Ce)&&(ee*=-1),v.u=Math.atan2(g,ee),m.s.Y(a,-d)&&m.s.P(m.F.ba(h-c))>3.141592653589793*(1-q*Math.cos(a))&&(0<a&&1.570796326794897>m.s.P(v.u)||0>a&&1.570796326794897<m.s.P(v.u))&&(v.u=m.s.Mb(3.141592653589793,v.u)-v.u))),b!=null&&(m.s.Cd(a)&&m.s.Cd(d)?(C=Math.sqrt(1-lt*lt),b.u=Math.acos(C),0<=L&&(b.u*=-1)):m.s.Y(m.s.P(d),1.570796326794897)?b.u=0>d?h:m.F.ba(3.141592653589793-h):(L=lt/ve,g=Math.sqrt(1-L*L),ee=Math.sin(Ce/2),0>Math.sin(Q-T)-2*p*fe*ee*ee&&(g*=-1),b.u=Math.atan2(L,g),b.u=m.F.ba(b.u+3.141592653589793),m.s.Y(a,-d)&&!m.s.Cd(a)&&!m.s.Y(m.s.P(a),1.570796326794897)&&m.s.P(m.F.ba(h-c))>3.141592653589793*(1-q*Math.cos(a))&&(v!=null?ee=v.u:(g=lt/p,ee=Math.sqrt(1-g*g),0>p*fe-ge*ve*Math.cos(Ce)&&(ee*=-1),ee=Math.atan2(g,ee),m.s.Y(a,-d)&&m.s.P(m.F.ba(h-c))>3.141592653589793*(1-q*Math.cos(a))&&(0<a&&1.570796326794897>m.s.P(ee)||0>a&&1.570796326794897<m.s.P(ee))&&(ee=m.s.Mb(3.141592653589793,ee)-ee)),1.570796326794897>=m.s.P(ee)&&1.570796326794897<m.s.P(b.u)||1.570796326794897<=m.s.P(ee)&&1.570796326794897>m.s.P(b.u))&&(b.u=-1*m.F.ba(b.u+3.141592653589793))))}}}},j.rf=function(T,p,h,a,c,d,g,v){if(g!=null||v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,c,d,g,v);else if(d=m.F.ba(d),m.s.Y(m.s.P(a),1.570796326794897)||m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))m.Wk.rf(T,p,h,a,c,d,g,v);else{var b=m.s.P(d)==1.570796326794897?0:Math.cos(d),C=m.s.P(d)==3.141592653589793?0:Math.sin(d);m.s.Y(m.s.P(a),1.570796326794897)&&(h=0),d=1-Math.sqrt(1-p);var M=m.F.Vq(p,a);a=m.s.P(M)==1.570796326794897?0:Math.cos(M);var O=Math.sin(M);M=Math.atan2(Math.tan(M),b);var L=a*C,q=L*L,U=1-q,ee=p/(1-p)*U,Q=(p=ee*(256+ee*(ee*(74-47*ee)-128))/1024)/4,ge=p/6,ve=c/(T*(1-d)*(1+ee*(4096+ee*(ee*(320-175*ee)-768))/16384)),fe=ve;do{var Ce=fe;c=m.s.P(fe)==1.570796326794897?0:Math.cos(fe);var Ie=(ee=m.s.P(fe)==3.141592653589793?0:Math.sin(fe))*ee;fe=p*ee*((T=Math.cos(2*M+fe))+Q*(c*(2*(fe=T*T)-1)-ge*T*(4*Ie-3)*(4*fe-3)))+ve}while(!m.s.Y(Ce,fe));c=m.s.P(fe)==1.570796326794897?0:Math.cos(fe),ee=m.s.P(fe)==3.141592653589793?0:Math.sin(fe),g!=null&&(C=Math.atan2(ee*C,a*c-O*ee*b),U=d/16*U*(4+d*(4-3*U)),T=Math.cos(2*M+fe),g.u=m.F.ba(h+(C-(1-U)*d*L*(fe+U*ee*(T+U*c*(2*T*T-1)))))),v!=null&&(U=O*ee-a*c*b,U=(1-d)*Math.sqrt(q+U*U),v.u=Math.atan2(O*c+a*ee*b,U))}},j}()}(ye||(ye={})),function(m){m.PC=function(){function j(){}return j.tb=function(T,p,h,a,c,d,g,v,b){var C=m.F.ba(c-h),M=m.s.Y(m.s.P(a),1.570796326794897),O=m.s.Y(m.s.P(d),1.570796326794897);if(m.s.Y(a,d)&&(m.s.Cd(C)||M))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.ti(p)){var L=Math.sin(a),q=Math.sin(d);L=Math.sqrt((1+L)/(1-L)),q=Math.sqrt((1+q)/(1-q)),L=Math.log(q)-Math.log(L),L=Math.atan2(C,L),g!=null&&(g.u=m.s.Y(a,d)?m.s.P(T*Math.cos(a)*C):m.s.P((T*d-T*a)/Math.cos(L)))}else q=m.F.Qw(p,d),L=Math.sin(m.F.Qw(p,a)),q=Math.sin(q),L=Math.sqrt((1+L)/(1-L)),q=Math.sqrt((1+q)/(1-q)),L=Math.log(q)-Math.log(L),L=Math.atan2(C,L),g!=null&&(m.s.Y(a,d)?g.u=m.s.P(T*C*Math.cos(a)/m.F.w(p,a)):(C=m.F.q(T,p,a),T=m.F.q(T,p,d),g.u=m.s.P((T-C)/Math.cos(L))));v==null&&b==null||(g=m.F.ba(L+3.141592653589793),M&&O||!M&&!O||(M?L=0>a?c:m.F.ba(3.141592653589793-c):O&&(g=0>d?h:m.F.ba(3.141592653589793-h))),v!=null&&(v.u=L),b!=null&&(b.u=g))}},j.rf=function(T,p,h,a,c,d,g,v){d=m.F.ba(d),0>c&&(c=m.s.P(c),d=m.F.ba(d+3.141592653589793)),m.s.ti(p)?m.s.Y(m.s.P(a),1.570796326794897)?(h=0>a?d:m.F.ba(3.141592653589793-d),3.141592653589793>=(d=c/T%6.283185307179586)?T=a-m.s.Mb(d,a):(h=m.F.ba(h+3.141592653589793),T=-a+m.s.Mb(d-3.141592653589793,a))):m.s.Y(m.s.P(d),1.570796326794897)?(h=m.F.ba(h+m.s.Mb(c,d)/(T*Math.cos(a))),T=a):(T=a+c*Math.cos(d)/T,1.570796326794897<m.s.P(T)&&(T=1.570796326794897),m.s.Y(m.s.P(T),1.570796326794897)&&(m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))||(1.570796316258184<m.s.P(T)&&(T=m.s.Mb(1.570796316258184,T)),p=Math.sin(a),a=Math.sin(T),p=Math.sqrt((1+p)/(1-p)),a=Math.sqrt((1+a)/(1-a)),p=Math.log(a)-Math.log(p),h=m.F.ba(h+Math.tan(d)*p))):m.s.Y(m.s.P(a),1.570796326794897)?(h=0>a?d:m.F.ba(3.141592653589793-d),d=c/m.F.qW(T,p),3.141592653589793>=(d%=6.283185307179586)?T=a-m.s.Mb(d,a):(h=m.F.ba(h+3.141592653589793),T=-a+m.s.Mb(d-3.141592653589793,a)),T=m.F.Rq(p,T)):m.s.Y(m.s.P(d),1.570796326794897)?(h=m.F.ba(h+m.s.Mb(c,d)*m.F.w(p,a)/(T*Math.cos(a))),T=a):(T=1.570796326794897*(c*Math.cos(d)+m.F.q(T,p,a))/m.F.Ah(T,p),1.570796326794897<m.s.P(T)&&(T=m.s.Mb(1.570796326794897,T)),T=m.F.Rq(p,T),m.s.Y(m.s.P(T),1.570796326794897)&&(m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))||(c=m.F.Qw(p,a),a=m.F.Qw(p,T),1.570796316258184<m.s.P(a)&&(a=m.s.Mb(1.570796316258184,T),T=m.F.yO(p,a)),p=Math.sin(c),a=Math.sin(a),p=Math.sqrt((1+p)/(1-p)),a=Math.sqrt((1+a)/(1-a)),p=Math.log(a)-Math.log(p),h=m.F.ba(h+Math.tan(d)*p))),g!=null&&(g.u=h),v!=null&&(v.u=T)},j}()}(ye||(ye={})),function(m){m.kb=function(){function j(){}return j.Xy=function(T,p,h,a,c,d,g){m.cu.tb(T,p,h,a,c,d,null,g,null)},j.yi=function(T,p,h,a,c,d,g,v){m.cu.rf(T,p,h,a,c,d,g,v)},j.wd=function(T,p,h,a,c,d,g,v,b,C){switch(C){case 2:m.Wk.tb(T,p,h,a,c,d,g,v,b);break;case 3:m.QC.tb(T,p,h,a,c,d,g,v,b);break;case 1:m.PC.tb(T,p,h,a,c,d,g,v,b);break;default:m.cu.tb(T,p,h,a,c,d,g,v,b)}},j.oj=function(T,p,h,a,c,d,g,v,b){switch(b){case 2:m.Wk.rf(T,p,h,a,c,d,g,v);break;case 3:m.QC.rf(T,p,h,a,c,d,g,v);break;case 1:m.PC.rf(T,p,h,a,c,d,g,v);break;default:m.cu.rf(T,p,h,a,c,d,g,v)}},j}()}(ye||(ye={})),function(m){var j=function(){function p(){this.y=this.x=null}return p.construct=function(h){var a=new p;return a.x=new m.Wb,a.x.set(h.x),a.y=new m.Wb,a.y.set(h.y),a},p.VE=function(h,a){var c=new p;return c.x=new m.Wb,c.x.set(h),c.y=new m.Wb,c.y.set(a),c},p.prototype.qg=function(){return this.x.qg()&&this.y.qg()},p.prototype.value=function(){return m.h.construct(this.x.value(),this.y.value())},p}();m.vY=j;var T=function(){function p(){this.z=this.y=this.x=null}return p.construct=function(h){var a=new p;return a.x=new m.Wb,a.x.set(h.x),a.y=new m.Wb,a.y.set(h.y),a.z=new m.Wb,a.z.set(h.z),a},p.VE=function(h,a,c){var d=new p;return d.x=new m.Wb,d.x.set(h),d.y=new m.Wb,d.y.set(a),d.z=new m.Wb,d.z.set(c),d},p.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},p.prototype.value=function(){return new m.Nd(this.x.value(),this.y.value(),this.z.value())},p.prototype.Qh=function(h){var a=new m.Wb,c=new m.Wb,d=new m.Wb;return a.Kl(this.x,h.x),c.Kl(this.y,h.y),d.Kl(this.z,h.z),(h=new m.Wb).dN(a,c),h.add(d),h},p.prototype.cF=function(h){var a=new p;a.x.Kl(this.y,h.z),a.y.Kl(this.z,h.x),a.z.Kl(this.x,h.y);var c=new m.Wb,d=new m.Wb,g=new m.Wb;return c.Kl(this.z,h.y),d.Kl(this.x,h.z),g.Kl(this.y,h.x),a.x.sub(c),a.y.sub(d),a.z.sub(g),a},p}();m.wY=T,m.Ox=function(){function p(){}return p.EP=function(h,a,c){var d=a.x;a=a.y,p.cl(1,h,Math.cos(d),Math.sin(d),Math.cos(a),Math.sin(a),c)},p.DP=function(h,a){var c=new m.Nd;return p.EP(h,a,c),c},p.cl=function(h,a,c,d,g,v,b){h/=Math.sqrt(1-a*v*v),b.K(h*g*c,h*g*d,h*(1-a)*v)},p.Yu=function(h,a){var c=new m.Wb,d=new m.Wb,g=new m.Wb,v=new m.Wb;c.cos(a.x),d.sin(a.x),g.cos(a.y),v.sin(a.y);var b=new m.Wb;return b.set(v),b.Ag(v),b.No(h),b.No(-1),b.kN(),b.sqrt(),(a=new m.Wb).set(1),a.jm(b),(b=new m.Wb).set(a),b.Ag(g),b.Ag(c),(c=new m.Wb).set(a),c.Ag(g),c.Ag(d),(d=new m.Wb).set(a),d.No(1-h),d.Ag(v),T.VE(b,c,d)},p.SS=function(h,a,c,d){if(Math.abs(a.x-c.x)>Math.PI||Math.abs(a.y)>.5*Math.PI||Math.abs(c.y)>.5*Math.PI||(Math.abs(a.y)==.5*Math.PI||Math.abs(c.y)==.5*Math.PI)&&a.x!=c.x)return NaN;if(d=p.cB(d,Math.min(a.x,c.x),Math.max(a.x,c.x)),!new m.Nc(a.x,c.x).contains(d))return NaN;var g=j.construct(a);if(c=j.construct(c),g=p.Yu(h,g),c=p.Yu(h,c),(c=g.cF(c)).z.qg())return a.y;var v=new m.Wb;v.set(c.x),v.jm(c.z),v.No(-1);var b=new m.Wb;b.set(c.y),b.jm(c.z),b.No(-1);var C=new m.Wb;return C.set(b),C.Ag(b),(g=new m.Wb).set(v),g.Ag(v),g.add(C),g.sqrt(),g.qg()||v.qg()&&b.qg()?a.y:(a=Math.atan2(b.value(),v.value()),a=Math.atan2(g.value()*Math.cos(a-d),1-h),d=p.DP(h,m.h.construct(d,a)),h=new m.Nd(d.x,d.y,-d.z),d=c.value().Qh(d),h=c.value().Qh(h),Math.abs(h)<Math.abs(d)&&(a=-a),a)},p.Oz=function(h,a,c,d,g){if(g[0]=NaN,g[1]=NaN,Math.abs(a.x-c.x)>Math.PI||Math.abs(a.y)>.5*Math.PI||Math.abs(c.y)>.5*Math.PI||(Math.abs(a.y)==.5*Math.PI||Math.abs(c.y)==.5*Math.PI)&&a.x!=c.x||Math.abs(d)>=.5*Math.PI||0<a.y&&0<c.y&&a.y>d&&c.y>d||0>a.y&&0>c.y&&a.y<d&&c.y<d)return 0;var v=j.construct(a),b=j.construct(c);v=p.Yu(h,v),b=p.Yu(h,b);var C=v.cF(b);if(C.z.qg())return new m.Nc(a.y,c.y).contains(d)?(g[0]=a.x,1):0;(b=new m.Wb).set(C.x),b.jm(C.z),b.No(-1),(v=new m.Wb).set(C.y),v.jm(C.z),v.No(-1),(C=new m.Wb).set(v),C.Ag(v);var M=new m.Wb;return M.set(b),M.Ag(b),M.add(C),M.sqrt(),M.qg()||b.qg()&&v.qg()?d==0?(g[0]=a.x,g[1]=c.x,2):0:(h=(1-h)*Math.tan(d)/M.value(),1<Math.abs(h)?0:(h=Math.acos(h),C=Math.atan2(v.value(),b.value()),b=Math.min(a.x,c.x),v=Math.max(a.x,c.x),c=p.cB(C-h,b,v),h=d!=0?p.cB(C+h,b,v):c,d=0,b<=c&&c<=v&&(g[d]=c,d++),h!=c&&b<=h&&h<=v&&(g[d]=h,++d==2&&Math.abs(g[0]-a.x)>Math.abs(g[1]-a.x)&&(a=g[0],g[0]=g[1],g[1]=a)),d))},p.cB=function(h,a,c){return h>c?h-=2*(a=Math.ceil((h-c)/(2*Math.PI)))*Math.PI:h<a&&(h+=2*(a=Math.ceil((a-h)/(2*Math.PI)))*Math.PI),h},p}()}(ye||(ye={})),function(m){m.XK=function(){function j(){}return j.$X=function(T,p){var h=8,a=[0,0,0,0],c=new m.h;c.L(p),c.scale(m.cb.sc(T).Hd().Ec()==9102?1:m.cb.sc(T).Hd().ai/3.141592653589793*180),-180>c.x?(c.x-=c.x%360,-180>c.x&&(c.x+=360)):180<c.x&&(c.x-=c.x%360,180<c.x&&(c.x-=360)),90<c.y&&(c.y=90),-90>c.y&&(c.y=-90);for(var d=-180,g=180,v=(T=5*h)-1,b=(p=(T+31)/32)-1;0<=b;b--)for(var C=v-32*b,M=Math.min(32,T-32*b),O=1;O<M;O+=2){var L=.5*(g+d);c.x>=L?(a[b]|=1<<C,d=L):g=L,C-=2,v-=2}for(d=-90,g=90,v=T-2,b=p-1;0<=b;b--)for(C=v-32*b,M=Math.min(32,T-32*b),O=0;O<M;O+=2)L=.5*(g+d),c.y>=L?(a[b]|=1<<C,d=L):g=L,C-=2,v-=2;return j.$P(a,h,h)},j.$P=function(T,p,h){for(var a=[],c=0;c<p;c++)a[c]="";for(var d=c=0,g=0;g<p;g++){var v=T[c]>>d&31;if(31<(d+=5)){var b=37-d;v&=(1<<b)-1,d-=32,v|=(T[++c]&(1<<d)-1)<<b}a[p-1-g]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[v]}if(h>p)for(g=0;g<h-p;g++)a.push("0");else h<p&&(a.length=h);return a.join("")},j}()}(ye||(ye={})),function(m){var j={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},T={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};m.wr=function(){function p(){}return p.Sy=function(h){p.xp===!1&&p.yt();var a=p.FQ(h);if(a==-1){var c=p.Bx(h);c!=h&&(a=p.Sy(c))}return a==-1&&(c=p.FK(h))!=h&&(a=p.Sy(c)),a},p.FQ=function(h){return p.Fw[h]!==void 0?p.Fw[h]:-1},p.CQ=function(h){p.xp===!1&&p.yt();var a=p.nF(h);if(a==1e38){var c=p.Bx(h);if(c!=h&&(a=p.nF(c)),a==1e38)return 1e-10}return a},p.ZS=function(h){if(p.Is[h]!==void 0)return!0;var a=p.Bx(h);return a!=h&&p.Is[a]!==void 0},p.aT=function(h){if(p.xo[h]!==void 0)return!0;var a=p.Bx(h);return a!=h&&p.xo[a]!==void 0},p.nF=function(h){return p.xp===!1&&p.yt(),p.Is[h]!==void 0?p.Is[h]:p.xo[h]!==void 0?p.xo[h]:1e38},p.FK=function(h){return p.xp===!1&&p.yt(),p.WA[h]!==void 0?p.WA[h]:h},p.Bx=function(h){return p.xp===!1&&p.yt(),p.XA[h]!==void 0?p.XA[h]:h},p.yt=function(){for(var h,a=j,c=0;c<a.pcsid.length;c+=2)p.xo[a.pcsid[c]]=a.pcstol[2*a.pcsid[c+1]+1];for(c=0;c<a.pcsidc.length;c+=1)for(var d=(h=a.pcsidc[c])[0];d<=h[1];d++)p.xo[d]=a.pcstol[2*h[2]+1];for(c=0;c<a.gcsid.length;c+=2)p.Is[a.gcsid[c]]=a.gcstol[2*a.gcsid[c+1]+1];for(c=0;c<a.gcsidc.length;c+=1)for(d=(h=a.gcsidc[c])[0];d<=h[1];d++)p.xo[d]=a.gcstol[2*h[2]+1];for(c=0;c<T.c.length;c+=1)for(d=(h=T.c[c])[0];d<=h[1];d++)p.Fw[d]=h[2];for(c=0;c<T.nc.length;c+=2)p.Fw[T.nc[c]]=T.nc[c+1];for(T=null,c=0;c<a.newtoold.length;c+=2)p.WA[a.newtoold[c+1]]=a.newtoold[c],p.XA[a.newtoold[c]]=a.newtoold[c+1];j=null,p.xp=!0},p.xp=!1,p.Is=[],p.xo=[],p.WA=[],p.XA=[],p.Fw=[],p}()}(ye||(ye={})),function(m){function j(p){return p.length===0?'""':p[0]=='"'||p[0]=="."||"0"<=p[0]&&"9">=p[0]?p:'"'+p.trim()+'"'}var T=[];m.XC=function(){function p(){}return p.EQ=function(h){try{for(var a=0;a<T.length;a++)if(T[a].wkttext===h)return T[a].unit;for(var c,d=a="",g=!1,v=0;v<h.length;v++){var b=h[v];g===!0?b=='"'?h[v+1]=='"'?a+=b:g=g=!1:a+=b:/[\s]/.test(b)||(b==","?(d=a!==""?d+(j(a)+","):d+",",a=""):b==")"||b=="]"?(d=a!==""?d+(j(a)+"]}"):d+"]}",a=""):b=="("||b=="["?(d+='{ "entity": "'+a.toUpperCase().trim()+'", "values":[',a=""):b=='"'?(g=!0,a=""):a+=b)}c=JSON.parse(d);var C=p.mF(c);if(C===null)return null;for(c=null,b=0;b<C.values.length;b++)if(typeof C.values[b]=="object"&&(C.values[b].entity==="UNIT"||C.values[b].entity==="ANGLEUNIT"||C.values[b].entity==="LENGTHUNIT")){c=C.values[b];break}if(c===null)return null;var M=m.Tc.ZO(C.entity==="GEOGCS"||C.entity==="GEOGCRS"?1:0,c.values[1],c.values[2]);return T.push({wkttext:h,unit:M}),10<T.length&&T.shift(),M}catch{return null}},p.mF=function(h){if(h===null)return null;switch(h.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return h}for(var a=[],c=0;c<h.values.length;c++)if(typeof h.values[c]=="object"&&h.values[c].entity!==void 0)switch(h.values[c].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return h.values[c];default:a.push(h.values[c])}for(h=0;h<a.length;h++)if((c=p.mF(a[h]))!==null)return c;return null},p.DQ=function(h){var a=-1;if(h!=null&&0<h.length){var c=h.search(/PROJCR?S/);if(0<=c){var d=0;if(0<=(c=h.lastIndexOf("UNIT"))&&0<(c=h.indexOf(",",c+4))){c++;var g=h.indexOf("]",c+1);if(0<g)try{d=parseFloat(h.substring(c,g))}catch{d=0}}0<d&&(a=.001/d)}else if(0<=(c=h.search(/GEOGCR?S/))){var v=0;if(d=0,(c=h.indexOf("SPHEROID",c+6))===-1&&(c=h.indexOf("ELLIPSOID",c+7)),0<c&&0<(c=h.indexOf(",",c+8))){if(c++,0<(g=h.indexOf(",",c+1)))try{v=parseFloat(h.substring(c,g))}catch{v=0}if(0<v&&((c=h.lastIndexOf("ANGLEUNIT",g+1))===-1&&(c=h.lastIndexOf("UNIT",g+1)),0<=c&&0<(c=h.indexOf(",",c+4))&&(c++,0<(g=h.indexOf("]",c+1)))))try{d=parseFloat(h.substring(c,g))}catch{d=0}}0<v&&0<d&&(a=.001/(v*d))}}return a},p}()}(ye||(ye={})),function(m){var j;(j=m.eL||(m.eL={}))[j.NONE=0]="NONE",j[j.LINEAR=1]="LINEAR",j[j.ANGULAR=2]="ANGULAR",function(p){p[p.enumFloat=0]="enumFloat",p[p.enumDouble=1]="enumDouble",p[p.enumInt32=2]="enumInt32",p[p.enumInt64=3]="enumInt64",p[p.enumInt8=4]="enumInt8",p[p.enumInt16=5]="enumInt16"}(m.QL||(m.QL={})),function(p){p[p.POSITION=0]="POSITION",p[p.Z=1]="Z",p[p.M=2]="M",p[p.ID=3]="ID",p[p.NORMAL=4]="NORMAL",p[p.TEXTURE1D=5]="TEXTURE1D",p[p.TEXTURE2D=6]="TEXTURE2D",p[p.TEXTURE3D=7]="TEXTURE3D",p[p.ID2=8]="ID2",p[p.MAXSEMANTICS=10]="MAXSEMANTICS"}(m.Ih||(m.Ih={}));var T=function(){function p(h,a){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,a!==void 0){for(this.Aa=a.Aa,this.Oq=a.Oq,this.bg=a.bg.slice(0),this.uh=a.uh.slice(0),this.wl=a.wl,this.Vs=[],h=a=0;h<this.Aa;h++)this.Vs[h]=a,a+=p.Va(this.bg[h]);for(this.Oq=a,this.Ae=[],h=0;h<this.Aa;h++){a=p.Va(this.kd(h));for(var c=p.se(this.kd(h)),d=0;d<a;d++)this.Ae[this.Vs[h]+d]=c}}else this.Oq=this.Aa=0}return p.prototype.kd=function(h){if(0>h||h>this.Aa)throw m.i.N();return this.bg[h]},p.prototype.Pf=function(h){return this.uh[h]},p.lz=function(h){return p.JM[h]},p.Tp=function(h){return p.SM[h]},p.Va=function(h){return p.rM[h]},p.prototype.hasAttribute=function(h){return 0<=this.uh[h]},p.prototype.iG=function(){return this.hasAttribute(1)},p.se=function(h){return p.eD[h]},p.prototype.LR=function(h){return this.Vs[h]},p.DG=function(h,a){return p.eD[h]===a},p.prototype.Nb=function(h){return this===h},p.prototype.An=function(){for(var h=m.O.Th(this.bg[0]),a=1;a<this.Aa;a++)h=m.O.Th(this.bg[a],h);return h},p.prototype.$j=function(h){return this.Vs[h]},p.prototype.cc=function(){return this.wl},p.prototype.Ed=function(h){return this.bg[h]},p.eD=[0,0,NaN,0,0,0,0,0,0],p.JM=[1,1,1,0,2,1,1,1,0],p.SM=[1,1,1,2,0,0,0,0,2],p.rM=[2,1,1,1,3,1,2,3,2],p}();m.ra=T}(ye||(ye={})),function(m){function j(g,v,b){var C=v-(g=new d(g)).e,M=g.c;for(M.length>++v&&T(g,C,d.eu),M[0]?b?C=v:(M=g.c,C=g.e+C+1):++C;M.length<C;M.push(0));return C=g.e,b===1||b&&(v<=C||C<=h)?(0>g.Bd&&M[0]?"-":"")+(1<M.length?M[0]+"."+M.join("").slice(1):M[0])+(0>C?"e":"e+")+C:g.toString()}function T(g,v,b,C){var M=g.c,O=g.e+v+1;if(b===1?C=5<=M[O]:b===2?C=5<M[O]||M[O]==5&&(C||0>O||M[O+1]!==void 0||1&M[O-1]):b===3?C=C||M[O]!==void 0||0>O:(C=!1,b!==0&&p("!Big.RM!")),1>O||!M[0])C?(g.e=-v,g.c=[1]):g.c=[g.e=0];else{if(M.length=O--,C)for(;9<++M[O];)M[O]=0,O--||(++g.e,M.unshift(1));for(O=M.length;!M[--O];M.pop());}return g}function p(g){throw(g=Error(g)).name="BigError",g}var h=-7,a=21,c=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,d=function(){function g(v){if(v instanceof g)this.Bd=v.Bd,this.e=v.e,this.c=v.c.slice();else{var b,C,M;for(v===0&&0>1/v?v="-0":c.test(v+="")||p(NaN),this.Bd=v.charAt(0)=="-"?(v=v.slice(1),-1):1,-1<(b=v.indexOf("."))&&(v=v.replace(".","")),0<(C=v.search(/e/i))?(0>b&&(b=C),b+=+v.slice(C+1),v=v.substring(0,C)):0>b&&(b=v.length),C=0;v.charAt(C)=="0";C++);if(C==(M=v.length))this.c=[this.e=0];else{for(;v.charAt(--M)=="0";);for(this.e=b-C-1,this.c=[],b=0;C<=M;this.c[b++]=+v.charAt(C++));}}}return g.prototype.abs=function(){var v=new g(this);return v.Bd=1,v},g.prototype.cmp=function(v){var b=this.c,C=(v=new g(v)).c,M=this.Bd,O=v.Bd,L=this.e,q=v.e;if(!b[0]||!C[0])return b[0]?M:C[0]?-O:0;if(M!=O)return M;if(v=0>M,L!=q)return L>(q^v)?1:-1;for(M=-1,O=(L=b.length)<(q=C.length)?L:q;++M<O;)if(b[M]!=C[M])return b[M]>(C[M]^v)?1:-1;return L==q?0:L>(q^v)?1:-1},g.prototype.jm=function(v){var b=this.c,C=(v=new g(v)).c,M=this.Bd==v.Bd?1:-1,O=g.rr;if((O!==~~O||0>O||1e6<O)&&p("!Big.DP!"),!b[0]||!C[0])return b[0]==C[0]&&p(NaN),C[0]||p(M/0),new g(0*M);var L,q,U=C.slice(),ee=L=C.length,Q=b.length,ge=b.slice(0,L),ve=ge.length,fe=v,Ce=fe.c=[],Ie=0,Ne=O+(fe.e=this.e-v.e)+1;for(fe.Bd=M,M=0>Ne?0:Ne,U.unshift(0);ve++<L;ge.push(0));do{for(q=0;10>q;q++){if(L!=(ve=ge.length))var Ve=L>ve?1:-1;else{var Xe=-1;for(Ve=0;++Xe<L;)if(C[Xe]!=ge[Xe]){Ve=C[Xe]>ge[Xe]?1:-1;break}}if(!(0>Ve))break;for(v=ve==L?C:U;ve;){if(ge[--ve]<v[ve]){for(Xe=ve;Xe&&!ge[--Xe];ge[Xe]=9);--ge[Xe],ge[ve]+=10}ge[ve]-=v[ve]}for(;!ge[0];ge.shift());}Ce[Ie++]=Ve?q:++q,ge[0]&&Ve?ge[ve]=b[ee]||0:ge=[b[ee]]}while((ee++<Q||ge[0]!==void 0)&&M--);return Ce[0]||Ie==1||(Ce.shift(),fe.e--),Ie>Ne&&T(fe,O,g.eu,ge[0]!==void 0),fe},g.prototype.fS=function(){return 0<this.cmp(0)},g.prototype.nT=function(){return 0>this.cmp(0)},g.prototype.jt=function(v){var b,C=this.Bd,M=(v=new g(v)).Bd;if(C!=M)return v.Bd=-M,this.tI(v);var O=this.c.slice(),L=this.e,q=v.c,U=v.e;if(!O[0]||!q[0])return q[0]?(v.Bd=-M,v):new g(O[0]?this:0);if(C=L-U){for((b=0>C)?(C=-C,L=O):(U=L,L=q),L.reverse(),M=C;M--;L.push(0));L.reverse()}else for(L=((b=O.length<q.length)?O:q).length,C=M=0;M<L;M++)if(O[M]!=q[M]){b=O[M]<q[M];break}if(b&&(L=O,O=q,q=L,v.Bd=-v.Bd),0<(M=(L=q.length)-(b=O.length)))for(;M--;O[b++]=0);for(M=b;L>C;){if(O[--L]<q[L]){for(b=L;b&&!O[--b];O[b]=9);--O[b],O[L]+=10}O[L]-=q[L]}for(;O[--M]==0;O.pop());for(;O[0]==0;)O.shift(),--U;return O[0]||(v.Bd=1,O=[U=0]),v.c=O,v.e=U,v},g.prototype.tI=function(v){var b=this.Bd,C=(v=new g(v)).Bd;if(b!=C)return v.Bd=-C,this.jt(v);C=this.e;var M=this.c,O=v.e,L=v.c;if(!M[0]||!L[0])return L[0]?v:new g(M[0]?this:0*b);if(M=M.slice(),b=C-O){for(0<b?(O=C,C=L):(b=-b,C=M),C.reverse();b--;C.push(0));C.reverse()}for(0>M.length-L.length&&(C=L,L=M,M=C),b=L.length,C=0;b;)C=(M[--b]=M[b]+L[b]+C)/10|0,M[b]%=10;for(C&&(M.unshift(C),++O),b=M.length;M[--b]==0;M.pop());return v.c=M,v.e=O,v},g.prototype.pow=function(v){var b=this,C=new g(1),M=C,O=0>v;for((v!==~~v||-1e6>v||1e6<v)&&p("!pow!"),v=O?-v:v;1&v&&(M=M.lr(b)),v>>=1;)b=b.lr(b);return O?C.jm(M):M},g.prototype.round=function(v,b){var C=this;return v==null?v=0:(v!==~~v||0>v||1e6<v)&&p("!round!"),T(C=new g(C),v,b??g.eu),C},g.prototype.sqrt=function(){var v=this.c,b=this.Bd,C=this.e,M=new g("0.5");if(!v[0])return new g(this);0>b&&p(NaN),(b=Math.sqrt(this.toString()))==0||b==1/0?((b=v.join("")).length+C&1||(b+="0"),(v=new g(Math.sqrt(b).toString())).e=((C+1)/2|0)-(0>C||1&C)):v=new g(b.toString()),b=v.e+(g.rr+=4);do C=v,v=M.lr(C.tI(this.jm(C)));while(C.c.slice(0,b).join("")!==v.c.slice(0,b).join(""));return T(v,g.rr-=4,g.eu),v},g.prototype.lr=function(v){var b=this.c,C=(v=new g(v)).c,M=b.length,O=C.length,L=this.e,q=v.e;if(v.Bd=this.Bd==v.Bd?1:-1,!b[0]||!C[0])return new g(0*v.Bd);if(v.e=L+q,M<O){var U=b;b=C,C=U,q=M,M=O,O=q}for(U=Array(q=M+O);q--;U[q]=0);for(L=O;L--;){for(O=0,q=M+L;q>L;)O=U[q]+C[L]*b[q-L-1]+O,U[q--]=O%10,O=O/10|0;U[q]=(U[q]+O)%10}for(O&&++v.e,U[0]||U.shift(),L=U.length;!U[--L];U.pop());return v.c=U,v},g.prototype.toString=function(){var v=this.e,b=this.c.join(""),C=b.length;if(v<=h||v>=a)b=b.charAt(0)+(1<C?"."+b.slice(1):"")+(0>v?"e":"e+")+v;else if(0>v){for(;++v;b="0"+b);b="0."+b}else if(0<v)if(++v>C)for(v-=C;v--;b+="0");else v<C&&(b=b.slice(0,v)+"."+b.slice(v));else 1<C&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.Bd&&this.c[0]?"-"+b:b},g.prototype.toExponential=function(v){return v==null?v=this.c.length-1:(v!==~~v||0>v||1e6<v)&&p("!toExp!"),j(this,v,1)},g.prototype.toFixed=function(v){var b=h,C=a;if(h=-(a=1/0),v==null)var M=this.toString();else v===~~v&&0<=v&&1e6>=v&&(M=j(this,this.e+v),0>this.Bd&&this.c[0]&&0>M.indexOf("-")&&(M="-"+M));return h=b,a=C,M||p("!toFix!"),M},g.prototype.toPrecision=function(v){return v==null?this.toString():((v!==~~v||1>v||1e6<v)&&p("!toPre!"),j(this,v-1,2))},g.rr=20,g.eu=1,g}();m.hp=d}(ye||(ye={})),function(m){var j=function(){function T(p){this.lf=p}return T.prototype.nr=function(p,h,a){var c=new m.h,d=new m.h,g=this.lf;a.Vd(p,h,function(v,b){return g.tc(2*v,c),g.tc(2*b,d),c.compare(d)})},T.prototype.$p=function(p){return this.lf.read(2*p+1)},T}();m.pi=function(){function T(){}return T.aq=function(p){if(p.B())return!1;var h=p.getType();return h==1736?p.Ke()!=0:h==1607?(h=[!1],T.sE(p,!0,h),h[0]):!(h!=197&&(!m.aa.yd(h)||p.BG()))},T.gm=function(p){var h=p.getType();if(h==1736)return h=new m.Ta(p.description),p.B()||p.dD(h),h;if(h==1607)return T.sE(p,!1,null);if(h==197)return h=new m.Ta(p.description),p.B()||h.ad(p,!1),h;if(m.aa.yd(h)){if(h=new m.de(p.description),!p.B()&&!p.BG()){var a=new m.Sa;p.To(a),h.add(a),p.Po(a),h.add(a)}return h}if(m.aa.Rn(h))return null;throw m.i.N()},T.sE=function(p,h,a){a!=null&&(a[0]=!1);var c=null;if(h||(c=new m.de(p.description)),!p.B()){var d=new m.ia(0);d.Jb(2*p.da());for(var g=0,v=p.da();g<v;g++)if(0<p.Ja(g)&&!p.Nn(g)){var b=p.Ba(g);d.add(b),b=p.Vc(g)-1,d.add(b)}if(0<d.size){v=new m.Xt,g=p.ub(0),v.sort(d,0,d.size,new j(g)),v=new m.h,g.tc(2*d.get(0),v),b=0;for(var C=1,M=new m.Sa,O=new m.h,L=1,q=d.size;L<q;L++)if(g.tc(2*d.get(L),O),O.qb(v))d.get(b)>d.get(L)?(d.set(b,2147483647),b=L):d.set(L,2147483647),C++;else{if(1&C){if(h)return a!=null&&(a[0]=!0),null}else d.set(b,2147483647);v.L(O),b=L,C=1}if(1&C){if(h)return a!=null&&(a[0]=!0),null}else d.set(b,2147483647);if(!h)for(d.Vd(0,d.size,function(U,ee){return U-ee}),L=0,q=d.size;L<q&&d.get(L)!=2147483647;L++)p.ve(d.get(L),M),c.add(M)}}return h?null:c},T}()}(ye||(ye={})),function(m){var j=function(){function T(){this.yf=new m.ia(0),this.ys=new m.ia(0),this.EH=1,this.Es=NaN}return T.prototype.sort=function(p,h,a,c){if(32>a-h)c.nr(h,a,p);else{var d=!0;try{for(var g=1/0,v=-1/0,b=h;b<a;b++){var C=c.$p(p.get(b));C<g&&(g=C),C>v&&(v=C)}if(this.reset(a-h,g,v,a-h)){for(b=h;b<a;b++){var M=p.get(b);C=c.$p(M);var O=this.zF(C);this.yf.set(O,this.yf.get(O)+1),this.ys.write(b-h,M)}var L=this.yf.get(0);this.yf.set(0,0),b=1;for(var q=this.yf.size;b<q;b++){var U=this.yf.get(b);this.yf.set(b,L),L+=U}for(b=h;b<a;b++){M=this.ys.read(b-h),C=c.$p(M),O=this.zF(C);var ee=this.yf.get(O);p.set(ee+h,M),this.yf.set(O,ee+1)}d=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(d)c.nr(h,a,p);else{for(b=a=0,q=this.yf.size;b<q;b++)d=a,(a=this.yf.get(b))>d&&c.nr(h+d,h+a,p);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},T.prototype.reset=function(p,h,a,c){return!(2>p||a==h)&&(p=Math.min(T.hL,p),this.yf.Jb(p),this.yf.resize(p),this.yf.Wj(0,0,this.yf.size),this.EH=h,this.ys.resize(c),this.Es=(a-h)/(p-1),!0)},T.prototype.zF=function(p){return m.O.truncate((p-this.EH)/this.Es)},T.hL=65536,T}();m.Xt=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.enum_line=1]="enum_line",T[T.enum_arc=2]="enum_arc",T[T.enum_dummy=4]="enum_dummy",T[T.enum_concave_dip=8]="enum_concave_dip",T[T.enum_connection=3]="enum_connection";var p=function(){function g(){}return g.Qu=function(v,b,C,M,O,L){var q=new g;return q.Im=new m.h,q.Vm=new m.h,q.aw=new m.h,q.Im.L(v),q.Vm.L(b),q.aw.L(C),q.Co=M,q.qh=O,q.sh=L,q},g.construct=function(v,b,C,M){var O=new g;return O.Im=new m.h,O.Vm=new m.h,O.aw=new m.h,O.Im.L(v),O.Vm.L(b),O.aw.Rc(),O.Co=4,O.qh=C,O.sh=M,O},g}(),h=function(){function g(v,b,C,M,O,L){this.Yv=null,this.ya=0,this.EA=v,this.bI=this.$H=0,this.Ka=b,this.Mj=C,this.vk=M,this.Dq=O,this.Ub=L}return g.prototype.next=function(){for(var v=new m.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,v),this.ya++,!v.B())break}var b=!1;if(this.Yv==null&&(this.$H=v.Lg(),this.bI=v.ih(),this.Yv=d.buffer(v,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),b=!0),this.ya<this.EA.I()){var C=new m.Da;this.Yv.copyTo(C)}else C=this.Yv;if(!b){b=new m.Dd;var M=v.Lg()-this.$H;v=v.ih()-this.bI,b.gg(M,v),C.Oc(b)}return C},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),a=function(){function g(v,b){this.Wa=v,this.ya=0,this.oq=b}return g.prototype.next=function(){var v=this.Wa.X;if(this.ya<v.da()){var b=this.ya;if(this.ya++,!v.Nn(b))for(var C=v.Na(v.Vc(b)-1);this.ya<v.da();){var M=v.Na(v.Ba(this.ya));if(v.Nn(this.ya)||M!=C)break;C=v.Na(v.Vc(this.ya)-1),this.ya++}if(this.ya-b==1)return this.Wa.kE(this.Wa.X,b,this.oq);for((C=new m.Ta(this.Wa.X.description)).addPath(this.Wa.X,b,!0),b+=1;b<this.ya;b++)C.Dr(this.Wa.X,b,0,v.rv(b),!1);return this.Wa.kE(C,0,this.oq)}return null},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),c=function(){function g(v){this.Wa=v,this.ya=0}return g.prototype.next=function(){var v=this.Wa.X;if(this.ya<v.da()){var b=this.ya;for(v.Ir(this.ya),this.ya++;this.ya<v.da()&&!(0<v.Ir(this.ya));)this.ya++;return b==0&&this.ya==v.da()?this.Wa.py(v,0,v.da()):this.Wa.py(v,b,this.ya)}return null},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),d=function(){function g(v){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=v,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return g.buffer=function(v,b,C,M,O,L){if(v==null||0>M)throw m.i.N();if(v.B())return new m.Da(v.description);var q=new m.l;return v.xc(q),0<b&&q.W(b,b),(L=new g(L)).Mj=C,L.X=v,L.qa=m.ta.Wd(C,q,!0),L.ct=m.ta.Wd(null,q,!0),L.Ka=b,L.JT=v.getType(),0>=O&&(O=96),L.rb=Math.abs(L.Ka),L.Kv=L.rb!=0?1/L.rb:0,isNaN(M)||M==0?M=1e-5*L.rb:M>.5*L.rb&&(M=.5*L.rb),12>O&&(O=12),(v=Math.abs(b)*(1-Math.cos(Math.PI/O)))>M?M=v:(v=Math.PI/Math.acos(1-M/Math.abs(b)))<O-1&&12>(O=m.O.truncate(v))&&(O=12,M=Math.abs(b)*(1-Math.cos(Math.PI/O))),L.vk=M,L.Dq=O,L.tA=Math.min(L.ct,.25*M),L.lE()},g.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var v=this.qE();v=m.O.truncate((v+3)/4);var b=.5*Math.PI/v;this.oA=b;for(var C=0;C<4*v;C++)this.Id.push(null);var M=Math.cos(b);b=Math.sin(b);var O=m.h.construct(0,1);for(C=0;C<v;C++)this.Id[C+0*v]=m.h.construct(O.y,-O.x),this.Id[C+1*v]=m.h.construct(-O.x,-O.y),this.Id[C+2*v]=m.h.construct(-O.y,O.x),this.Id[C+3*v]=O,(O=m.h.construct(O.x,O.y)).Bt(M,b)},g.prototype.lE=function(){var v=this.X.getType();if(m.aa.yd(v))return(v=new m.Ta(this.X.description)).oc(this.X,!0),this.X=v,this.lE();if(this.Ka<=this.qa){if(!m.aa.US(v))return new m.Da(this.X.description);if(0>=this.Ka&&(v=new m.l,this.X.A(v),v.R()<=2*-this.Ka||v.ca()<=2*this.Ka))return new m.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw m.i.Qa()}},g.prototype.RN=function(){if(this.EG(this.X)){var v=new m.Sa;this.X.ve(0,v);var b=new m.l;return this.X.A(b),v.Cb(b.sf()),this.Gu(v)}return this.X=this.WV(this.X),v=new a(this,this.oq),m.Gh.local().V(v,this.Mj,this.Ub).next()},g.prototype.QN=function(){if(this.Ka==0)return this.X;var v=m.Yl.local();if(this.cv(),this.X=v.V(this.X,null,!1,this.Ub),0>this.Ka){var b=this.X;return b=this.py(b,0,b.da()),v.V(b,this.Mj,!1,this.Ub)}return this.EG(this.X)?(v=new m.Sa,this.X.ve(0,v),b=new m.l,this.X.A(b),v.Cb(b.sf()),this.Gu(v)):(v=new c(this),m.Gh.local().V(v,this.Mj,this.Ub).next())},g.prototype.py=function(v,b,C){for(var M=new m.Da(v.description);b<C;b++)if(!(1>v.Ja(b))){var O=v.Ir(b),L=new m.l;if(v.Rj(b,L),0<this.Ka){if(0<O)if(this.FG(v,b))O=new m.Sa,v.ve(v.Ba(b),O),O.Cb(L.sf()),this.yu(M,O);else{var q=O=new m.Ta(v.description);q=m.Zt.JG(this.X,b)||this.zn(this.X,b,q,!0,1)==2?this.jE(v,b):this.yn(O),M.add(q,!1)}else if(!(L.R()+this.qa<=2*this.rb||L.ca()+this.qa<=2*this.rb||(q=O=new m.Ta(v.description),this.zn(this.X,b,q,!0,1),O.B()))){var U=new m.l;for(U.K(L),U.W(this.rb,this.rb),q.tp(U),L=1,O=(q=this.yn(O)).da();L<O;L++)M.addPath(q,L,!0)}}else if(0<O){if(!(L.R()+this.qa<=2*this.rb||L.ca()+this.qa<=2*this.rb||(q=O=new m.Ta(v.description),this.zn(this.X,b,q,!0,-1),O.B())))for(U=new m.l,q.xc(U),U.W(this.rb,this.rb),q.tp(U),L=1,O=(q=this.yn(O)).da();L<O;L++)M.addPath(q,L,!0)}else for(q=O=new m.Ta(v.description),this.zn(this.X,b,q,!0,-1),L=0,O=(q=this.yn(O)).da();L<O;L++)M.addPath(q,L,!0)}if(0<this.Ka)return 1<M.da()?M=this.yn(M):g.kx(M);if(v=new m.l,M.xc(v),M.B())return g.kx(M);for(v.W(this.rb,this.rb),M.tp(v),M=this.yn(M),v=new m.Da(M.description),L=1,O=M.da();L<O;L++)v.addPath(M,L,!1);return g.kx(v)},g.prototype.PN=function(){return this.Gu(this.X)},g.prototype.Gu=function(v){var b=new m.Da(this.X.description);return this.yu(b,v),this.sX(b)},g.prototype.ON=function(){var v=new h(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return m.Gh.local().V(v,this.Mj,this.Ub).next()},g.prototype.LN=function(){var v=new m.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)v.ad(this.X,!1);else{var b=new m.Fh;this.X.bn(b),b.W(this.Ka,this.Ka),v.ad(b,!1)}return v}return v.ad(this.X,!1),this.X=v,this.jE(v,0)},g.prototype.jE=function(v,b){this.cv();var C=new m.Da(v.description),M=new m.h,O=new m.h,L=new m.h,q=new m.h,U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h,ve=v.Ja(b),fe=v.Ba(b),Ce=0;for(b=v.Ja(b);Ce<b;Ce++){if(v.D(fe+Ce,O),v.D(fe+(Ce+1)%ve,q),v.D(fe+(Ce+2)%ve,ee),Q.uc(q,O),Q.length()==0||(Q.Hv(),Q.normalize(),Q.scale(this.rb),M.add(Q,O),L.add(Q,q),Ce==0?C.Lt(M):C.Ci(M),C.Ci(L),ge.uc(ee,q),ge.length()==0))throw m.i.Qa();ge.Hv(),ge.normalize(),ge.scale(this.rb),U.add(ge,q),this.GD(C,q,L,U,!1)}return g.kx(C)},g.prototype.kE=function(v,b,C){if(this.cv(),1>v.Ja(b))return null;if(this.FG(v,b)&&0<this.Ka){C=new m.Sa,v.ve(v.Ba(b),C);var M=new m.l;return v.Rj(b,M),C.Cb(M.sf()),this.Gu(C)}if(M=new m.Ta(v.description),v.Nn(b))this.zn(v,b,M,C,1),this.zn(v,b,M,C,-1);else{var O=new m.Ta(v.description);O.addPath(v,b,!1),O.Dr(v,b,0,v.rv(b),!1),this.zn(O,0,M,C,1)}return this.yn(M)},g.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw m.i.fu("user_canceled")},g.prototype.yn=function(v){return m.Fg.Mk(v,this.ct,!0,!0,this.Ub)},g.prototype.qE=function(){if(this.vk==0)return this.Dq;var v=1-this.vk*Math.abs(this.Kv);return 4>(v=-1>v?4:2*Math.PI/Math.acos(v)+.5)?v=4:v>this.Dq&&(v=this.Dq),m.O.truncate(v)},g.prototype.GD=function(v,b,C,M,O){this.cv();var L=new m.h;L.uc(C,b),L.scale(this.Kv);var q=new m.h;q.uc(M,b),q.scale(this.Kv),0>(L=Math.atan2(L.y,L.x)/this.oA)&&(L=this.Id.length+L),L=this.Id.length-L,0>(q=Math.atan2(q.y,q.x)/this.oA)&&(q=this.Id.length+q),(q=this.Id.length-q)<L&&(q+=this.Id.length);var U=m.O.truncate(q);q=m.O.truncate(Math.ceil(L)),(L=new m.h).L(this.Id[q%this.Id.length]),L.Ct(this.rb,b);var ee=10*this.qa;for(L.sub(C),L.length()<ee&&(q+=1),L.L(this.Id[U%this.Id.length]),L.Ct(this.rb,b),L.sub(M),L.length()<ee&&--U,C=U-q,C++,U=0,q%=this.Id.length;U<C;U++,q=(q+1)%this.Id.length)L.L(this.Id[q]),L.Ct(this.rb,b),v.Ci(L),this.Xq();O&&v.Ci(M)},g.prototype.zn=function(v,b,C,M,O){var L=new m.gd,q=L.mN(v,b);if(L.Gp(this.tA,!1,!1),2>L.I(q))return 0>O||(O=v,L=new m.Sa,O.ve(O.Ba(b),L),this.yu(C,L)),1;var U=L.Na(L.Xa(L.Ob(q))),ee=new m.Dd;if(ee.gg(-U.x,-U.y),L.Oc(ee),M&&(this.tQ(L,q,O),2>L.I(q)))return 0>O||(O=v,L=new m.Sa,O.ve(O.Ba(b),L),this.yu(C,L)),1;this.Zd.length=0;var Q=L.Ob(q);b=L.Xa(Q);var ge=O==1?L.Ma(b):L.U(b);v=O==1?L.U(b):L.Ma(b);var ve=!0;M=new m.h,q=new m.h;var fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h,ct=this.rb;Q=L.Ja(Q);for(var mt=0;mt<Q;mt++)L.D(v,q),ve&&(L.D(b,M),L.D(ge,fe),Xe.uc(M,fe),Xe.normalize(),dt.MG(Xe),dt.scale(ct),Ce.add(dt,M)),Ve.uc(q,M),Ve.normalize(),et.MG(Ve),et.scale(ct),Ie.add(M,et),ge=Xe.wi(Ve),ve=Xe.Qh(Ve),0>ge||0>ve&&ge==0?this.Zd.push(p.Qu(Ce,Ie,M,2,this.Zd.length+1,this.Zd.length-1)):Ce.qb(Ie)||(this.Zd.push(p.construct(Ce,M,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(p.construct(M,Ie,this.Zd.length+1,this.Zd.length-1,"dummy"))),Ne.add(q,et),this.Zd.push(p.Qu(Ie,Ne,M,1,this.Zd.length+1,this.Zd.length-1)),Ce.L(Ne),dt.L(et),fe.L(M),M.L(q),Xe.L(Ve),ge=b,b=v,ve=!1,v=O==1?L.U(b):L.Ma(b);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(C),ee.gg(U.x,U.y),C.YD(ee,C.da()-1),1},g.prototype.YV=function(v){for(var b=this.zO(),C=!0,M=b+1,O=b;M!=b;O=M){var L=this.Zd[O];M=L.qh!=-1?L.qh:(O+1)%this.Zd.length,L.Co!=0&&(C&&v.Lt(L.Im),L.Co==2?this.GD(v,L.aw,L.Im,L.Vm,!0):v.Ci(L.Vm),C=!1)}},g.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var v=0,b=0,C=this.Zd.length;b<C;){var M=this.Zd[b];if(3&M.Co){v=b;break}b=M.qh}for(C=v+1,b=v;C!=v;b=C){C=(M=this.Zd[b]).qh;for(var O=1,L=null;C!=b&&!(3&(L=this.Zd[C]).Co);)C=L.qh,O++;O!=1&&(M.Co&L.Co)==1&&(this.Ls==null&&(this.Ls=new m.yb,this.lw=new m.yb),this.Ls.Dc(M.Im),this.Ls.Qc(M.Vm),this.lw.Dc(L.Im),this.lw.Qc(L.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(M.Vm.L(this.Ks[0]),L.Im.L(this.Ks[0]),M.qh=C,L.sh=b))}return v},g.prototype.Fv=function(v,b,C){var M=new m.h;if(M.uc(C,v),C=M.length(),0<(C=this.rb*this.rb-C*C*.25)){C=Math.sqrt(C),M.normalize(),M.ar();var O=new m.h;if(O.uc(b,v),O.Qh(M)+C>=this.rb)return!0}return!1},g.prototype.tQ=function(v,b,C){for(var M=0;1>M;M++){var O=!1,L=v.Ob(b),q=v.Ja(L);if(q==0)break;var U=q;if(3>q)break;!v.dc(L)&&(U=q-1),L=v.Xa(L),q=0<C?v.Ma(L):v.U(L);for(var ee=0<C?v.U(L):v.Ma(L),Q=q,ge=!0,ve=new m.h,fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=m.h.construct(0,0),Xe=new m.h,et=new m.h,dt=new m.h,ct=new m.h,mt=this.rb,lt=0,gi=0;gi<U&&(v.D(ee,fe),ge&&(v.D(L,ve),v.D(q,Ce),Q=q),et.uc(ve,Ce),et.normalize(),Xe.uc(fe,ve),Xe.normalize(),Q!=ee);){var oi=et.wi(Xe),Ni=et.Qh(Xe),Qi=!0;if(0>oi||0>Ni&&oi==0||!this.Fv(Ce,ve,fe)||(Ve.L(fe),Qi=!1,++lt,O=!0),Qi){if(0<lt)for(;(oi=0<C?v.Ma(Q):v.U(Q))!=L;){if(v.D(oi,Ie),!this.Fv(Ie,Ce,Ve)){oi!=ee&&this.Fv(Ie,Ce,fe)&&this.Fv(Ie,ve,fe)&&(Ce.L(Ie),Q=oi,Qi=!1,++lt);break}Ce.L(Ie),Q=oi,Qi=!1,++lt}if(!Qi)continue;if(0<lt){for(Q=0<C?v.Ma(q):v.U(q),ge=1;ge<lt;ge++)Qi=0<C?v.Ma(Q):v.U(Q),v.pd(Q,!0),Q=Qi;dt.uc(ve,Ce),lt=mt*mt-(lt=dt.length())*lt*.25,mt-(lt=Math.sqrt(lt))>.5*this.vk?(Ne.add(Ce,ve),Ne.scale(.5),dt.normalize(),dt.ar(),ct.L(dt),ct.scale(mt-lt),Ne.add(ct),v.mf(q,Ne)):v.pd(q,!0),lt=0}Ce.L(ve),Q=L}ve.L(fe),q=L,L=ee,ee=0<C?v.U(L):v.Ma(L),gi++,ge=!1}if(0<lt){for(Q=0<C?v.Ma(q):v.U(q),ge=1;ge<lt;ge++)Qi=0<C?v.Ma(Q):v.U(Q),v.pd(Q,!0),Q=Qi;Ne.add(Ce,ve),Ne.scale(.5),dt.uc(ve,Ce),lt=mt*mt-(lt=dt.length())*lt*.25,lt=Math.sqrt(lt),dt.normalize(),dt.ar(),ct.L(dt),ct.scale(mt-lt),Ne.add(ct),v.mf(q,Ne)}if(v.Gp(this.tA,!1,!1),!O)break}},g.prototype.FG=function(v,b){if(v.Ja(b)==1)return!0;var C=new m.l;return v.Rj(b,C),Math.max(C.R(),C.ca())<.5*this.vk},g.prototype.EG=function(v){var b=new m.l;return v.A(b),Math.max(b.R(),b.ca())<.5*this.vk},g.prototype.WV=function(v){for(var b=0,C=0,M=(v=m.EC.local().V(v,.25*this.vk,!1,this.Ub)).da();C<M;C++)b=Math.max(v.Ja(C),b);return 32>b?(this.oq=!1,v):(this.oq=!0,m.Fg.Mk(v,this.ct,!1,!0,this.Ub))},g.prototype.yu=function(v,b){if(b=b.D(),this.Id!=null&&this.Id.length!==0){var C=new m.h;C.L(this.Id[0]),C.Ct(this.rb,b),v.Lt(C);for(var M=1,O=this.Id.length;M<O;M++)C.L(this.Id[M]),C.Ct(this.rb,b),v.Ci(C)}else{M=this.qE(),C=m.O.truncate((M+3)/4),M=.5*Math.PI/C,O=Math.cos(M);for(var L=Math.sin(M),q=new m.h,U=3;0<=U;U--){switch(q.ma(0,this.rb),U){case 0:for(M=0;M<C;M++)v.yj(q.x+b.x,q.y+b.y),q.Bt(O,L);break;case 1:for(M=0;M<C;M++)v.yj(-q.y+b.x,q.x+b.y),q.Bt(O,L);break;case 2:for(M=0;M<C;M++)v.yj(-q.x+b.x,-q.y+b.y),q.Bt(O,L);break;default:for(v.sx(q.y+b.x,-q.x+b.y),M=1;M<C;M++)q.Bt(O,L),v.yj(q.y+b.x,-q.x+b.y)}this.Xq()}}},g.kx=function(v){return v.Ch(1,0),v},g.prototype.sX=function(v){return v.Ch(2,this.qa),v.fm(),v},g}();m.HK=d}(ye||(ye={})),function(m){var j=function(){function T(p){this.Ca=p,this.g=new m.gd,this.dd=new m.ia(0)}return T.prototype.Lh=function(p,h,a){switch(h){case 0:if(p.v<a&&p.C<=a)break;return p.v>=a?1:-1;case 1:if(p.G<a&&p.H<=a)break;return p.G>=a?1:-1;case 2:if(p.v>=a&&p.C>a)break;return p.C<=a?1:-1;case 3:if(!(p.G>=a&&p.H>a))return p.H<=a?1:-1}return 0},T.prototype.Ay=function(p,h){return p.getType()==1736?this.Cy(p,h):this.Dy(p)},T.prototype.Cy=function(p,h){if(this.Ca.R()==0||this.Ca.ca()==0)return p.Ia();var a=new m.l;p.xc(a),this.X=this.g.Ib(p);var c=new m.l,d=new m.l,g=new m.h,v=new m.h,b=[0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0];new m.ig;var M=new m.yb,O=new m.ia(0);O.Jb(Math.min(100,p.I()));for(var L=!1,q=0;!L&&4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=a.v<=Q&&a.C>=Q;break;case 1:Q=this.Ca.G,U=a.G<=Q&&a.H>=Q;break;case 2:Q=this.Ca.C,U=a.v<=Q&&a.C>=Q;break;case 3:Q=this.Ca.H,U=a.G<=Q&&a.H>=Q}if(U)for(L=!0,U=this.g.Ob(this.X);U!=-1;){var ge=-1,ve=-1,fe=this.g.Xa(U),Ce=fe;do{var Ie=this.g.bc(Ce);Ie==null&&(Ie=M,this.g.D(Ce,g),Ie.Dc(g),this.g.D(this.g.U(Ce),v),Ie.Qc(v)),Ie.A(c);var Ne=this.Lh(c,q,Q),Ve=0,Xe=-1;if(Ne==-1){Ve=0<(Ie=Ie.cq(ee,Q,b,C))?this.g.Ul(Ce,C,Ie):0,Ve+=1;var et=Ce,dt=this.g.U(et);for(Ie=0;Ie<Ve;Ie++){if(this.g.D(et,g),this.g.D(dt,v),(Xe=this.g.bc(et))==null&&((Xe=M).Dc(g),Xe.Qc(v)),Xe.A(d),(Xe=this.Lh(d,q,Q))==-1){if(ee)(Xe=Math.abs(g.y-Q))<(ct=Math.abs(v.y-Q))?(g.y=Q,this.g.mf(et,g)):(v.y=Q,this.g.mf(dt,v));else{Xe=Math.abs(g.x-Q);var ct=Math.abs(v.x-Q);Xe<ct?(g.x=Q,this.g.mf(et,g)):(v.x=Q,this.g.mf(dt,v))}(Xe=this.g.bc(et))==null&&((Xe=M).Dc(g),Xe.Qc(v)),Xe.A(d),Xe=this.Lh(d,q,Q)}ct=ge,ge=Xe,ve==-1&&(ve=ge),ct==0&&ge==1||ct==1&&ge==0||ct!=0||ge!=0||O.add(et),ge==1&&(L=!1),Xe=et=dt,dt=this.g.U(dt)}}Ve==0&&(ct=ge,ge=Ne,ve==-1&&(ve=ge),ct==0&&ge==1||ct==1&&ge==0||ct!=0||ge!=0||O.add(Ce),ge==1&&(L=!1),Xe=this.g.U(Ce)),Ce=Xe}while(Ce!=fe);for(ve==0&&ge==0&&O.add(fe),Ie=0,ge=O.size;Ie<ge;Ie++)ve=O.get(Ie),this.g.pd(ve,!1);O.clear(!1),U=3>this.g.Ja(U)?this.g.Zq(U):this.g.Rb(U)}}return L?p.Ia():(this.FB(),0<h&&this.My(h),this.g.Ne(this.X))},T.prototype.Dy=function(p){var h=new m.l,a=new m.l,c=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],g=new m.ig,v=p,b=new m.l;p.xc(b);for(var C=0;4>C;C++){var M=!1,O=!!(1&C),L=0;switch(C){case 0:L=this.Ca.v,M=b.v<=L&&b.C>=L;break;case 1:L=this.Ca.G,M=b.G<=L&&b.H>=L;break;case 2:L=this.Ca.C,M=b.v<=L&&b.C>=L;break;case 3:L=this.Ca.H,M=b.G<=L&&b.H>=L}if(M){M=v,v=p.Ia(),(M=M.Ga()).Zi();for(var q,U=new m.h;M.$a();)for(var ee,Q=!0;M.Ha();){var ge=M.ha();ge.A(h);var ve=this.Lh(h,C,L);if(ve==-1){if(0<(ve=ge.cq(O,L,c,d))){var fe=0;q=ge.ac();for(var Ce=0;Ce<=ve;Ce++)if(fe!=(ee=Ce<ve?d[Ce]:1)){ge.ah(fe,ee,g);var Ie=g.get();Ie.Dc(q),Ce<ve&&(O?(U.x=c[Ce],U.y=L):(U.x=L,U.y=c[Ce]),Ie.Qc(U)),Ie.A(a);var Ne=this.Lh(a,C,L);if(Ne==-1){if(q=Ie.ac(),fe=Ie.wc(),O)(Ne=Math.abs(q.y-L))<(Ve=Math.abs(fe.y-L))?(q.y=L,Ie.Dc(q)):(fe.y=L,Ie.Qc(fe));else{Ne=Math.abs(q.x-L);var Ve=Math.abs(fe.x-L);Ne<Ve?(q.x=L,Ie.Dc(q)):(fe.x=L,Ie.Qc(fe))}Ie.A(a),Ne=this.Lh(a,C,L)}q=Ie.wc(),fe=ee,(ee=Ne)==1?(v.oc(Ie,Q),Q=!1):Q=!0}}}else(ee=ve)==1?(v.oc(ge,Q),Q=!1):Q=!0}}}return v},T.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var p=new m.h,h=this.g.Ob(this.X);h!=-1;h=this.g.Rb(h))for(var a=this.g.Xa(h),c=0,d=this.g.Ja(h);c<d;c++,a=this.g.U(a))this.g.D(a,p),(this.Ca.v==p.x||this.Ca.C==p.x||this.Ca.G==p.y||this.Ca.H==p.y)&&(this.g.Ra(a,this.ji,this.dd.size),this.dd.add(a));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},T.prototype.My=function(p){for(var h=new m.h,a=new m.h,c=m.O.lg(2048,0),d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d)){var g=this.g.Xa(d),v=g;do{var b=this.g.U(v);this.g.D(v,h);var C=-1;if(h.x==this.Ca.v?(this.g.D(b,a),a.x==this.Ca.v&&(C=1)):h.x==this.Ca.C&&(this.g.D(b,a),a.x==this.Ca.C&&(C=1)),h.y==this.Ca.G?(this.g.D(b,a),a.y==this.Ca.G&&(C=0)):h.y==this.Ca.H&&(this.g.D(b,a),a.y==this.Ca.H&&(C=0)),C!=-1&&(C=m.h.tb(h,a),!(1>=(C=m.O.truncate(Math.min(Math.ceil(C/p),2048)))))){for(var M=1;M<C;M++)c[M-1]=1*M/C;this.g.Ul(v,c,C-1)}v=b}while(v!=g)}},T.prototype.Vl=function(p,h){var a=this.g.Gd(),c=new m.h,d=new m.ia(0);d.Jb(100);for(var g=this.g.Ob(this.X);g!=-1;g=this.g.Rb(g))for(var v=this.g.Xa(g),b=0,C=this.g.Ja(g);b<C;b++){var M=this.g.U(v);this.g.D(v,c),(p?c.y==h:c.x==h)&&(this.g.D(M,c),(p?c.y==h:c.x==h)&&(this.g.Pa(v,a)!=1&&(d.add(v),this.g.Ra(v,a,1)),this.g.Pa(M,a)!=1&&(d.add(M),this.g.Ra(M,a,1)))),v=M}if(this.g.Td(a),!(3>d.size)){var O=this;d.Vd(0,d.size,function(Ne,Ve){return O.Mh(Ne,Ve)}),a=new m.h,g=new m.h,v=new m.h,g.Rc();var L=-1;b=new m.ia(0),C=new m.ia(0),M=this.g.Gd();for(var q=this.g.Gd(),U=0,ee=d.size;U<ee;U++){var Q=d.get(U);if(this.g.D(Q,c),!c.qb(g)){if(L!=-1){for(var ge=L;ge<U;ge++){L=d.get(ge);var ve=this.g.U(L);Q=this.g.Ma(L);var fe=!1;0>this.Mh(L,ve)&&(this.g.D(ve,a),p?a.y==h:a.x==h)&&(b.add(L),fe=!0,this.g.Ra(L,q,1)),0>this.Mh(L,Q)&&(this.g.D(Q,a),p?a.y==h:a.x==h)&&(fe||b.add(L),this.g.Ra(L,M,1))}for(ge=0,fe=b.size;ge<fe;ge++){if(L=b.get(ge),Q=this.g.Pa(L,M),ve=this.g.Pa(L,q),Q==1){Q=this.g.Ma(L),this.g.D(Q,v);var Ce=[0];if(Ce[0]=0,!v.qb(c)){var Ie=m.h.tb(g,v);Ce[0]=m.h.tb(v,c)/Ie,Ce[0]==0?Ce[0]=2220446049250313e-31:Ce[0]==1&&(Ce[0]=.9999999999999998),this.g.Ul(Q,Ce,1),Q=this.g.Ma(L),this.g.mf(Q,c),C.add(Q),this.g.Ra(Q,M,1),this.g.Ra(Q,q,-1)}}ve==1&&(ve=this.g.U(L),this.g.D(ve,v),(Ce=[0])[0]=0,v.qb(c)||(Ie=m.h.tb(g,v),Ce[0]=m.h.tb(g,c)/Ie,Ce[0]==0?Ce[0]=2220446049250313e-31:Ce[0]==1&&(Ce[0]=.9999999999999998),this.g.Ul(L,Ce,1),Q=this.g.U(L),this.g.mf(Q,c),C.add(Q),this.g.Ra(Q,M,-1),this.g.Ra(Q,q,1)))}L=b,b=C,(C=L).clear(!1)}L=U,g.L(c)}}this.g.Td(M),this.g.Td(q)}},T.prototype.Nl=function(p,h){var a=new m.h,c=new m.ia(0);c.Jb(100);for(var d=this.g.Gd(),g=0,v=this.dd.size;g<v;g++){var b=this.dd.get(g);if(b!=-1){var C=this.g.U(b);this.g.D(b,a),(p?a.y==h:a.x==h)&&(this.g.D(C,a),(p?a.y==h:a.x==h)&&(this.g.Pa(b,d)!=-2&&(c.add(b),this.g.Ra(b,d,-2)),this.g.Pa(C,d)!=-2&&(c.add(C),this.g.Ra(C,d,-2))))}}if(c.size!=0){var M=this;for(c.Vd(0,c.size,function(Ve,Xe){return M.Mh(Ve,Xe)}),g=0,v=c.size;g<v;g++){var O=c.get(g);this.g.Ra(O,d,g)}b=new m.h,(C=new m.h).Rc();var L=-1;for(g=0,v=c.size;g<v;g++)if((O=c.get(g))!=-1&&(this.g.D(O,a),!a.qb(C))){if(L!=-1)for(;;){O=!1;for(var q=1<g-L?g-1:g,U=L;U<q;U++){var ee=c.get(U);if(ee!=-1){var Q=-1,ge=this.g.U(ee);0>this.Mh(ee,ge)&&(this.g.D(ge,b),p?b.y==h:b.x==h)&&(Q=ge),ge=-1;var ve=this.g.Ma(ee);if(0>this.Mh(ee,ve)&&(this.g.D(ve,b),p?b.y==h:b.x==h)&&(ge=ve),Q!=-1&&ge!=-1)this.Kh(ee,c,d),this.g.pd(ee,!1),this.Kh(Q,c,d),this.g.pd(Q,!1),O=!0;else if(Q!=-1||ge!=-1){for(ve=U+1;ve<g;ve++){var fe=c.get(ve);if(fe!=-1){var Ce=this.g.U(fe),Ie=-1;0>this.Mh(fe,Ce)&&(this.g.D(Ce,b),p?b.y==h:b.x==h)&&(Ie=Ce),Ce=this.g.Ma(fe);var Ne=-1;if(0>this.Mh(fe,Ce)&&(this.g.D(Ce,b),p?b.y==h:b.x==h)&&(Ne=Ce),Ie!=-1&&Ne!=-1){this.Kh(fe,c,d),this.g.pd(fe,!1),this.Kh(Ie,c,d),this.g.pd(Ie,!1),O=!0;break}if(Q!=-1&&Ne!=-1){this.zt(c,ee,Q,fe,Ne,d),O=!0;break}if(ge!=-1&&Ie!=-1){this.zt(c,fe,Ie,ee,ge,d),O=!0;break}}}if(O)break}}}if(!O)break}L=g,C.L(a)}}this.g.Td(d)},T.prototype.Kh=function(p,h,a){a=this.g.Pa(p,a),h.set(a,-1),a=this.g.Pa(p,this.ji),this.dd.set(a,-1),(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p&&(this.g.Jf(h,-1),this.g.Wg(h,-1))},T.prototype.zt=function(p,h,a,c,d,g){this.g.Bc(h,c),this.g.Cc(c,h),this.g.Cc(a,d),this.g.Bc(d,a),this.Kh(c,p,g),this.g.mi(c,!1),this.Kh(d,p,g),this.g.mi(d,!0)},T.prototype.Ty=function(){for(var p=0,h=this.dd.size;p<h;p++){var a=this.dd.get(p);a!=-1&&this.g.aj(a,-1)}for(var c=0,d=0,g=this.g.Ob(this.X);g!=-1;){var v=this.g.Xa(g);if(v==-1||g!=this.g.bd(v)){var b=g;g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)}else{a=v,b=0;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),this.g.pd(v,!1)),b=g,g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)):(this.g.cp(g,!1),this.g.Wg(g,this.g.Ma(v)),this.g.Vj(g,b),d+=b,c++,g=this.g.Rb(g))}}for(p=0,h=this.dd.size;p<h;p++)if((a=this.dd.get(p))!=-1&&(g=this.g.bd(a))==-1){g=this.g.vf(this.X,-1),b=0,v=a;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(0<=(a=this.g.Pa(v,this.ji))&&this.dd.set(a,-1),this.g.pd(v,!1)),b=g,this.g.Jf(b,-1),this.g.$q(b)):(this.g.kn(g,!0),this.g.Vj(g,b),this.g.Jf(g,v),this.g.Wg(g,this.g.Ma(v)),this.g.cp(g,!1),d+=b,c++)}for(this.g.Rl(this.X,c),this.g.Tj(this.X,d),p=0,h=this.g.ld;h!=-1;h=this.g.ue(h))p+=this.g.I(h);this.g.bC(p)},T.By=function(p,h,a){return new T(h).Ay(p,a)},T.clip=function(p,h,a,c){if(p.B())return p;if(h.B())return p.Ia();if((a=p.getType())==33)return c=p.D(),h.contains(c)?p:p.Ia();if(a==197)return c=new m.l,p.A(c),c.Ea(h)?(h=new m.Fh,p.copyTo(h),h.Xo(c),h):p.Ia();var d=new m.l;if(p.xc(d),h.contains(d))return p;if(!h.isIntersecting(d))return p.Ia();if((d=p.Bb)!=null&&(d=d.Fk)!=null){if((d=d.Ro(h))==1){if(a!=1736)throw m.i.Qa();return(p=new m.Da(p.description)).tp(h),p}if(d==0)return p.Ia()}switch(a){case 550:a=null,d=p.I();for(var g=p.ub(0),v=0,b=0;b<d;b++)c=new m.h,g.tc(2*b,c),h.contains(c)||(v==0&&(a=p.Ia()),v<b&&a.Fd(p,v,b),v=b+1);return 0<v&&a.Fd(p,v,d),v==0?p:a;case 1736:case 1607:return T.By(p,h,c);default:throw m.i.Qa()}},T.prototype.Mh=function(p,h){var a=new m.h;return this.g.D(p,a),p=new m.h,this.g.D(h,p),a.compare(p)},T}();m.Ud=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.Ca=p,this.g=new m.gd,this.dd=new m.ia(0),this.nd=h}return T.prototype.Lh=function(p,h,a){switch(h){case 0:if(p.v<a&&p.C<=a)break;return p.v>=a?1:-1;case 1:if(p.G<a&&p.H<=a)break;return p.G>=a?1:-1;case 2:if(p.v>=a&&p.C>a)break;return p.C<=a?1:-1;case 3:if(!(p.G>=a&&p.H>a))return p.H<=a?1:-1}return 0},T.prototype.Ay=function(p,h){return p.getType()==1736?this.Cy(p,h):this.Dy(p)},T.prototype.Cy=function(p,h){if(this.Ca.R()==0||this.Ca.ca()==0)return p.Ia();var a=new m.l;p.xc(a),this.X=this.g.Ib(p);var c=new m.l,d=new m.l,g=new m.h,v=new m.h,b=[0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0],M=new m.yb,O=new m.ia(0);O.Jb(256);for(var L=!1,q=0;!L&&4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=a.v<=Q&&a.C>=Q;break;case 1:Q=this.Ca.G,U=a.G<=Q&&a.H>=Q;break;case 2:Q=this.Ca.C,U=a.v<=Q&&a.C>=Q;break;case 3:Q=this.Ca.H,U=a.G<=Q&&a.H>=Q}if(U)for(L=!0,U=this.g.Ob(this.X);U!=-1;){var ge=!0,ve=-1,fe=-1,Ce=this.g.Xa(U),Ie=Ce;do{var Ne=this.g.bc(Ie);Ne==null&&(Ne=M,this.g.D(Ie,g),Ne.Dc(g),this.g.D(this.g.U(Ie),v),Ne.Qc(v)),Ne.A(c);var Ve=this.Lh(c,q,Q),Xe=0,et=-1;if(Ve==-1){Xe=0<(Ne=Ne.cq(ee,Q,b,C))?this.g.LX(Ie,C,Ne):0,Xe+=1;var dt=Ie,ct=this.g.U(dt);for(Ne=0;Ne<Xe;Ne++){if(this.g.D(dt,g),this.g.D(ct,v),(et=this.g.bc(dt))==null&&((et=M).Dc(g),et.Qc(v)),et.A(d),(et=this.Lh(d,q,Q))==-1){if(ee)(et=Math.abs(g.y-Q))<(mt=Math.abs(v.y-Q))?(g.y=Q,this.g.mf(dt,g)):(v.y=Q,this.g.mf(ct,v));else{et=Math.abs(g.x-Q);var mt=Math.abs(v.x-Q);et<mt?(g.x=Q,this.g.mf(dt,g)):(v.x=Q,this.g.mf(ct,v))}(et=this.g.bc(dt))==null&&((et=M).Dc(g),et.Qc(v)),et.A(d),et=this.Lh(d,q,Q)}mt=ve,ve=et,fe==-1&&(fe=ve),mt==0&&ve==1||mt==1&&ve==0||mt!=0||ve!=0||O.add(dt),ve==1&&(ge=L=!1),et=dt=ct,ct=this.g.U(ct)}}if(Xe==0&&(mt=ve,ve=Ve,fe==-1&&(fe=ve),mt==0&&ve==1||mt==1&&ve==0||mt!=0||ve!=0||O.add(Ie),ve==1&&(ge=L=!1),et=this.g.U(Ie)),Ie=et,256<=O.size){for(Ne=1,Ve=O.size-1;Ne<Ve;Ne++)Xe=O.get(Ne),this.g.pd(Xe,!1);O.set(1,O.Fc()),O.Bh(2)}}while(Ie!=Ce);if(!ge)for(fe==0&&ve==0&&O.add(Ce),Ne=0,Ve=O.size;Ne<Ve;Ne++)Xe=O.get(Ne),this.g.pd(Xe,!1);O.clear(!1),U=ge||this.g.Ja(U)==0?this.g.Zq(U):this.g.Rb(U)}}return L?p.Ia():(this.FB(),0<h&&this.My(h),this.g.Ne(this.X))},T.prototype.Dy=function(p){var h=new m.l,a=new m.l,c=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],g=new m.ig,v=p,b=new m.l;p.xc(b);for(var C=new m.h,M=new m.h,O=null,L=null,q=0;4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=b.v<=Q&&b.C>=Q;break;case 1:Q=this.Ca.G,U=b.G<=Q&&b.H>=Q;break;case 2:Q=this.Ca.C,U=b.v<=Q&&b.C>=Q;break;case 3:Q=this.Ca.H,U=b.G<=Q&&b.H>=Q}if(U)for(U=v,v=p.Ia(),(U=U.Ga()).Zi();U.$a();)for(var ge,ve=!0;U.Ha();){var fe=U.ha();fe.A(h);var Ce=this.Lh(h,q,Q);if(Ce==-1){if(0<(Ce=fe.cq(ee,Q,c,d))){var Ie=0;fe.Yp(C);for(var Ne=0;Ne<=Ce;Ne++)if(Ie!=(ge=Ne<Ce?d[Ne]:1)){fe.ah(Ie,ge,g);var Ve=g.get();Ve.Dc(C),Ne<Ce&&(ee?(M.x=c[Ne],M.y=Q):(M.x=Q,M.y=c[Ne]),Ve.Qc(M)),Ve.A(a);var Xe=this.Lh(a,q,Q);Xe==-1&&(O==null&&(O=new m.h),L==null&&(L=new m.h),Ve.Yp(O),Ve.Tr(L),ee?(Ie=Math.abs(O.y-Q))<(Xe=Math.abs(L.y-Q))?(O.y=Q,Ve.Dc(O)):(L.y=Q,Ve.Qc(L)):(Ie=Math.abs(O.x-Q))<(Xe=Math.abs(L.x-Q))?(O.x=Q,Ve.Dc(O)):(L.x=Q,Ve.Qc(L)),Ve.A(a),Xe=this.Lh(a,q,Q)),Ve.Tr(C),Ie=ge,(ge=Xe)==1?(v.oc(Ve,ve),ve=!1):ve=!0}}}else(ge=Ce)==1?(v.oc(fe,ve),ve=!1):ve=!0}}return v},T.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var p=new m.h,h=this.g.Ob(this.X);h!=-1;h=this.g.Rb(h))for(var a=this.g.Xa(h),c=0,d=this.g.Ja(h);c<d;c++,a=this.g.U(a))this.g.D(a,p),(this.Ca.v==p.x||this.Ca.C==p.x||this.Ca.G==p.y||this.Ca.H==p.y)&&(this.g.Ra(a,this.ji,this.dd.size),this.dd.add(a));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},T.prototype.My=function(p){for(var h=new m.h,a=new m.h,c=null,d=null,g=m.O.lg(2048,0),v=this.g.Ob(this.X);v!=-1;v=this.g.Rb(v)){var b=this.g.Xa(v),C=b;do{var M=this.g.U(C);this.g.D(C,h);var O=-1;if(h.x==this.Ca.v?(this.g.D(M,a),a.x==this.Ca.v&&(O=1)):h.x==this.Ca.C&&(this.g.D(M,a),a.x==this.Ca.C&&(O=1)),h.y==this.Ca.G?(this.g.D(M,a),a.y==this.Ca.G&&(O=0)):h.y==this.Ca.H&&(this.g.D(M,a),a.y==this.Ca.H&&(O=0)),O!=-1){if(c==null&&(c=new m.h),d==null&&(d=new m.h),c.L(h),d.ma(0,0),O==0){var L=h.x-this.Ca.v;d.x=m.lc.sign(a.x-h.x),c.x=p*m.lc.Cn(Math.floor(Math.abs(L/p)),L)+this.Ca.v,0>c.x&&(c.x+=p)}else L=h.y-this.Ca.G,d.y=m.lc.sign(a.y-h.y),c.y=p*m.lc.Cn(Math.floor(Math.abs(L/p)),L)+this.Ca.G,0>c.y&&(c.y+=p);L=O!=0?a.y-h.y:a.x-h.x;var q=Math.abs(L);if(65536<q/p)throw m.i.fa("internal error");if(0<q){q=m.O.truncate(q/p)+2,g.length<q&&(g=m.O.lg(q));for(var U=q=0;;U++){var ee=new m.h;if(ee.x=c.x+d.x*U*p,ee.y=c.y+d.y*U*p,1<=(ee=(O!=0?ee.y-h.y:ee.x-h.x)/L))break;0>=ee||(g[q]=ee,q++)}q!=0&&this.g.Ul(C,g,q)}}C=M}while(C!=b)}},T.prototype.Vl=function(p,h){for(var a=-1,c=new m.h,d=null,g=this.g.Ob(this.X);g!=-1;g=this.g.Rb(g))for(var v=this.g.Xa(g),b=0,C=this.g.Ja(g);b<C;b++){var M=this.g.U(v);this.g.D(v,c),(p?c.y==h:c.x==h)&&(this.g.D(M,c),(p?c.y==h:c.x==h)&&(a==-1&&(a=this.g.Gd()),d==null&&(d=new m.ia(0)).Jb(100),this.g.Pa(v,a)!=1&&(d.add(v),this.g.Ra(v,a,1)),this.g.Pa(M,a)!=1&&(d.add(M),this.g.Ra(M,a,1)))),v=M}if(a!=-1&&this.g.Td(a),!(d==null||3>d.size)){var O=this;d.Vd(0,d.size,function(Ne,Ve){return O.Mh(Ne,Ve)}),a=new m.h,g=new m.h,v=new m.h,g.Rc();var L=-1;b=new m.ia(0),C=new m.ia(0),M=null;for(var q=this.g.Gd(),U=this.g.Gd(),ee=0,Q=d.size;ee<Q;ee++){var ge=d.get(ee);if(this.g.D(ge,c),!c.qb(g)){if(L!=-1){for(var ve=L;ve<ee;ve++){L=d.get(ve);var fe=this.g.U(L);ge=this.g.Ma(L);var Ce=!1;this.g.D(fe,a),0>g.compare(a)&&(p?a.y==h:a.x==h)&&(b.add(L),Ce=!0,this.g.Ra(L,U,1)),this.g.D(ge,a),0>g.compare(a)&&(p?a.y==h:a.x==h)&&(Ce||b.add(L),this.g.Ra(L,q,1))}for(ve=0,Ce=b.size;ve<Ce;ve++){if(L=b.get(ve),ge=this.g.Pa(L,q),fe=this.g.Pa(L,U),ge==1&&(ge=this.g.Ma(L),this.g.D(ge,v),!v.qb(c))){M==null&&(M=[]);var Ie=m.h.tb(g,v);M[0]=m.h.tb(v,c)/Ie,M[0]==0?M[0]=2220446049250313e-31:M[0]==1&&(M[0]=.9999999999999998),this.g.Ul(ge,M,1),ge=this.g.Ma(L),this.g.mf(ge,c),C.add(ge),this.g.Ra(ge,q,1),this.g.Ra(ge,U,-1)}fe==1&&(fe=this.g.U(L),this.g.D(fe,v),v.qb(c)||(M==null&&(M=[]),Ie=m.h.tb(g,v),M[0]=m.h.tb(g,c)/Ie,M[0]==0?M[0]=2220446049250313e-31:M[0]==1&&(M[0]=.9999999999999998),this.g.Ul(L,M,1),ge=this.g.U(L),this.g.mf(ge,c),C.add(ge),this.g.Ra(ge,q,-1),this.g.Ra(ge,U,1)))}L=b,b=C,(C=L).clear(!1)}L=ee,g.L(c)}}this.g.Td(q),this.g.Td(U)}},T.prototype.Nl=function(p,h){for(var a=new m.h,c=null,d=-1,g=0,v=this.dd.size;g<v;g++){var b=this.dd.get(g);if(b!=-1){var C=this.g.U(b);this.g.D(b,a),(p?a.y==h:a.x==h)&&(this.g.D(C,a),(p?a.y==h:a.x==h)&&(d==-1&&(d=this.g.Gd()),c==null&&(c=new m.ia(0)).Jb(100),this.g.Pa(b,d)!=-2&&(c.add(b),this.g.Ra(b,d,-2)),this.g.Pa(C,d)!=-2&&(c.add(C),this.g.Ra(C,d,-2))))}}if(c==null)d!=-1&&this.g.Td(d);else{var M=this;for(c.Vd(0,c.size,function(Ve,Xe){return M.Mh(Ve,Xe)}),g=0,v=c.size;g<v;g++){var O=c.get(g);this.g.Ra(O,d,g)}b=new m.h,(C=new m.h).Rc();var L=-1;for(g=0,v=c.size;g<v;g++)if((O=c.get(g))!=-1&&(this.g.D(O,a),!a.qb(C))){if(L!=-1)for(;;){O=!1;for(var q=1<g-L?g-1:g,U=L;U<q;U++){var ee=c.get(U);if(ee!=-1){var Q=-1,ge=this.g.U(ee);this.g.D(ge,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Q=ge),ge=-1;var ve=this.g.Ma(ee);if(this.g.D(ve,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(ge=ve),Q!=-1&&ge!=-1)this.Kh(ee,c,d),this.g.pd(ee,!1),this.Kh(Q,c,d),this.g.pd(Q,!1),O=!0;else if(Q!=-1||ge!=-1){for(ve=U+1;ve<g;ve++){var fe=c.get(ve);if(fe!=-1){var Ce=this.g.U(fe),Ie=-1;this.g.D(Ce,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Ie=Ce),Ce=this.g.Ma(fe);var Ne=-1;if(this.g.D(Ce,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Ne=Ce),Ie!=-1&&Ne!=-1){this.Kh(fe,c,d),this.g.pd(fe,!1),this.Kh(Ie,c,d),this.g.pd(Ie,!1),O=!0;break}if(Q!=-1&&Ne!=-1){this.zt(c,ee,Q,fe,Ne,d),O=!0;break}if(ge!=-1&&Ie!=-1){this.zt(c,fe,Ie,ee,ge,d),O=!0;break}}}if(O)break}}}if(!O)break}L=g,C.L(a)}this.g.Td(d)}},T.prototype.Kh=function(p,h,a){a=this.g.Pa(p,a),h.set(a,-1),a=this.g.Pa(p,this.ji),this.dd.set(a,-1),(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p&&(this.g.Jf(h,-1),this.g.Wg(h,-1))},T.prototype.zt=function(p,h,a,c,d,g){this.g.Bc(h,c),this.g.Cc(c,h),this.g.Cc(a,d),this.g.Bc(d,a),this.Kh(c,p,g),this.g.mi(c,!1),this.Kh(d,p,g),this.g.mi(d,!0)},T.prototype.Ty=function(){for(var p=0,h=this.dd.size;p<h;p++){var a=this.dd.get(p);a!=-1&&this.g.aj(a,-1)}for(var c=0,d=0,g=this.g.Ob(this.X);g!=-1;){var v=this.g.Xa(g);if(v==-1||g!=this.g.bd(v)){var b=g;g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)}else{a=v,b=0;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);this.g.cp(g,!1),this.g.Wg(g,this.g.Ma(v)),this.g.Vj(g,b),d+=b,c++,g=this.g.Rb(g)}}for(p=0,h=this.dd.size;p<h;p++)if((a=this.dd.get(p))!=-1&&(g=this.g.bd(a))==-1){g=this.g.vf(this.X,-1),b=0,v=a;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(0<=(a=this.g.Pa(v,this.ji))&&this.dd.set(a,-1),this.g.pd(v,!1)),b=g,this.g.Jf(b,-1),this.g.$q(b)):(this.g.kn(g,!0),this.g.Vj(g,b),this.g.Jf(g,v),this.g.Wg(g,this.g.Ma(v)),this.g.cp(g,!1),d+=b,c++)}for(this.g.Rl(this.X,c),this.g.Tj(this.X,d),p=0,h=this.g.ld;h!=-1;h=this.g.ue(h))p+=this.g.I(h);this.g.bC(p)},T.By=function(p,h,a,c){return new T(h,c).Ay(p,a)},T.clip=function(p,h,a,c,d){return T.Nu(p,h,null,a,c,d)},T.Nu=function(p,h,a,c,d,g){var v=p.getType();if(v==33)return d=p.D(),h.contains(d)?p:p.Ia();if(v==197)return d=new m.l,p.A(d),d.Ea(h)?(h=new m.Fh,p.copyTo(h),h.Xo(d),h):p.Ia();if(p.B())return p;if(h.B())return p.Ia();var b=new m.l;if(p.xc(b),h.contains(b))return p;if(!h.isIntersecting(b))return p.Ia();if((a!=null||isNaN(c))&&m.ta.ty(a,h,!1),!m.aa.xj(v))throw m.i.N();if((a=p.Bb)!=null&&(a=a.Fk)!=null){if((a=a.Ro(h))==1){if(v!=1736)throw m.i.fa("internal error");return(p=new m.Da(p.description)).tp(h),p}if(a==0)return p.Ia()}switch(v){case 550:for(g=null,v=p.I(),a=p.ub(0),c=0,d=new m.h,b=0;b<v;b++)a.tc(2*b,d),h.contains(d)||(c==0&&(g=p.Ia()),c<b&&g.Fd(p,c,b),c=b+1);return 0<c&&g.Fd(p,c,v),c==0?p:g;case 1736:case 1607:return T.By(p,h,d,g);default:throw m.i.fa("internal error")}},T.prototype.Mh=function(p,h){var a=new m.h;return this.g.D(p,a),p=new m.h,this.g.D(h,p),a.compare(p)},T}();m.ri=j}(ye||(ye={})),function(m){var j=new m.h,T=function(){function h(a,c,d,g,v){this.Pm=new m.h,this.Dk=new m.h,this.Pi=new m.h,this.g=a,this.Aw=d,this.no=g,this.Pm=c,this.yl=v,this.Dk.Rc(),this.Pi.Rc()}return h.prototype.xE=function(a){this.g.D(a,this.Dk),a=m.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var c=m.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return p.jG(a,c)},h.prototype.jz=function(a){return this.g.Pa(a,this.yl)},h.prototype.Py=function(a,c){return this.g.D(a,this.Dk),this.g.D(c,this.Pi),p.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},h}();m.sY=function(){};var p=function(){function h(){this.Pm=new m.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return h.iQ=function(a,c){var d=new h;return d.g=a,d.qa=c,d.Aw=c*c,d.$v=2*c,d.no=1/d.$v,d.BO()},h.Cv=function(a,c,d,g,v){return(a-=d)*a+(c-=g)*c<=v},h.jG=function(a,c){return m.O.Th(c,m.O.Th(a))},h.prototype.DO=function(a,c){this.g.Gc(a,j);for(var d=(j.y-this.Pm.y)*this.no,g=m.O.truncate((j.x-this.Pm.x)*this.no),v=m.O.truncate(d),b=d=0;1>=b;b+=1)for(var C=0;1>=C;C+=1){var M=h.jG(g+b,v+C),O=this.xl.rR(M);O!=-1&&(this.pq[d]=O,this.xs[d]=M,d++)}for(g=d-1;1<=g;g--)for(O=this.pq[g],v=g-1;0<=v;v--)if(O==this.pq[v]){this.xs[v]=-1,g!=--d&&(this.xs[g]=this.xs[d],this.pq[g]=this.pq[d]);break}for(v=0;v<d;v++)this.EO(a,this.xs[v],j,this.pq[v],c)},h.prototype.EO=function(a,c,d,g,v){for(var b=new m.h;g!=-1;g=this.xl.ER(g)){var C=this.xl.ja(g);a==C||c!=-1&&this.g.Pa(C,this.yl)!=c||(this.g.Gc(C,b),h.Cv(d.x,d.y,b.x,b.y,this.Aw)&&v.add(g))}},h.prototype.Xm=function(a,c,d){var g=this.g.Pa(a,this.qo),v=this.g.Pa(c,this.qo);return g==-1&&(g=this.zd.Ph(),this.zd.addElement(g,a),this.g.Ra(a,this.qo,g)),v==-1?this.zd.addElement(g,c):this.zd.Hy(g,v),this.g.Ra(c,this.qo,-2),c=this.YT(a,c),d&&(d=this.kw.xE(a),this.g.Ra(a,this.yl,d)),c},h.WT=function(a,c,d){a.Nb(c),d=a;var g=new m.h;h.XT(a.D(),c.D(),g),d.Cb(g)},h.XT=function(a,c,d){var g=a.x;a.x!=c.x&&(g=(1*a.x+1*c.x)/2);var v=a.y;a.y!=c.y&&(v=(1*a.y+1*c.y)/2),d.ma(g,v)},h.prototype.YT=function(a,c){var d=new m.h;this.g.D(a,d);var g=new m.h;this.g.D(c,g);var v=this.g.cG(a),b=v+(c=this.g.cG(c)),C=0,M=d.x;d.x!=g.x&&(M=(d.x*v+g.x*c)/b,C++);var O=d.y;return d.y!=g.y&&(O=(d.y*v+g.y*c)/b,C++),0<C&&this.g.Cb(a,M,O),this.g.vX(a,b),C!=0},h.prototype.BO=function(){var a=this.g.fd,c=this.g.IF();for(this.Pm=c.mz(),c=Math.max(c.ca(),c.R())/2147483646,this.$v<c&&(this.$v=c,this.no=1/this.$v),this.zd=new m.au,this.zd.At(m.O.truncate(this.g.fd/3+1)),this.zd.fn(m.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new T(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new m.dL(m.O.truncate(4*a/3),this.kw),this.xl.AW(this.g.fd),a=!1,c=this.g.ld;c!=-1;c=this.g.ue(c))for(var d=this.g.Ob(c);d!=-1;d=this.g.Rb(d))for(var g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++){var C=this.kw.xE(g);this.g.Ra(g,this.yl,C),this.xl.addElement(g,C),g=this.g.U(g)}var M=new m.ia(0);for(M.Jb(10),c=this.g.ld;c!=-1;c=this.g.ue(c))for(d=this.g.Ob(c);d!=-1;d=this.g.Rb(d))for(g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++){if(this.g.Pa(g,this.qo)!=-2)for(C=this.g.Pa(g,this.yl),this.xl.jd(g,C);this.DO(g,M),M.size!=0;){C=!1;for(var O=0,L=M.size;O<L;O++){var q=M.get(O),U=this.xl.ja(q);this.xl.vd(q),C=this.Xm(g,U,O+1==L)||C}if(a=a||C,M.clear(!1),!C)break}g=this.g.U(g)}return a&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),a},h.prototype.vN=function(){for(var a=new m.h,c=this.zd.je;c!=-1;c=this.zd.qz(c)){var d=this.zd.rc(c);for(this.g.D(this.zd.ja(d),a),d=this.zd.lb(d);d!=-1;d=this.zd.lb(d))this.g.mf(this.zd.ja(d),a)}},h}();m.Yt=p}(ye||(ye={})),function(m){var j=function(){function T(p){p===void 0&&(p=null),this.yg=null,this.Pb=!1,this.yg=p===null?[]:p}return T.prototype.copyTo=function(p){if(p.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");for(var h=0;h<this.yg.length;h++)p.yg.push(this.yg[h].Of())},T.prototype.count=function(){return this.yg.length},T.prototype.add=function(p){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(p.Of())},T.prototype.clear=function(){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},T.prototype.remove=function(p){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(p,1)},T.prototype.jg=function(){var p=new T;return this.copyTo(p),p},T.prototype.Of=function(){return this.jg()},T.prototype.transform=function(p,h,a,c){if(p.length<h)throw m.i.fa("invalid Argument");var d=a;for(a=0;a<this.yg.length;a++){var g=this.yg[a];if(g.qm()!=null){var v=g.Un,b=v?1:0,C=v?g.qm().getGeogcs2():g.qm().getGeogcs1();if(C=d/(C=C.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(C-1))for(d=0;d<h;d++)p[d][0]*=C,p[d][1]*=C;m.MC.geogToGeog(g.qm(),h,p,null,b),d=(v?g.qm().getGeogcs1():g.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(C=d/c,3552713678800501e-30<Math.abs(C-1))for(d=0;d<h;d++)p[d][0]*=C,p[d][1]*=C;return h},T.prototype.Nb=function(p){if(p==this)return!0;if(!(p instanceof T)||this.yg.length!=p.yg.length)return!1;for(var h=0;h<this.yg.length;h++)if(!this.yg[h].Nb(p.yg[h]))return!1;return!0},T.prototype.ix=function(){this.Pb=!0},T.prototype.toString=function(){for(var p="CGT ("+this.count()+") ",h=0,a=this.count();h<a;++h)p+=this.yg[h].toString()+", ";return 200<p.length?p.substring(0,197)+"... ("+p.length.toString()+" characters)":p},T.create=function(){return new T},T}();m.wC=j}(ye||(ye={})),function(m){var j,T=Math.PI,p=2*Math.PI,h=Math.PI/2,a=function(){function g(){}return g.TO=function(v,b){var C=new g;return C.x=v,C.y=b,C.type=0,C.Uh=0,C},g.al=function(v){var b=new g;return b.x=v.x,b.y=v.y,b.type=0,b.Uh=0,b},g.SO=function(v){var b=new g;return b.x=v.x,b.y=v.y,b.type=v.type,b.Uh=v.Uh,b},g.Pd=function(v,b,C){var M=new g;return M.x=v.x+b*Math.cos(C),M.y=v.y+b*Math.sin(C),M.type=v.type,M.Uh=v.Uh,M},g.Pu=function(v,b){var C=new g;return C.x=.5*(v.x+b.x),C.y=.5*(v.y+b.y),C.type=v.type,C.Uh=v.Uh,C},g.TE=function(v,b){var C=new g;return C.x=v.x+.001*(b.x-v.x),C.y=v.y+.001*(b.y-v.y),C.type=v.type,C.Uh=v.Uh,C},g}(),c=function(){};(j=m.fL||(m.fL={}))[j.Round=0]="Round",j[j.Bevel=1]="Bevel",j[j.Miter=2]="Miter",j[j.Square=3]="Square";var d=function(){function g(v){this.NA=this.Yb=this.wg=null,this.nd=v}return g.V=function(v,b,C,M,O,L){if(v==null||1>v.Db())throw m.i.N();return b==0||v.B()?v:((L=new g(L)).ko=v,L.Ka=b,L.qa=O,L.Ki=C,L.CA=M,L.Rx())},g.prototype.eM=function(){var v=this.ko,b=v.ac(),C=v.wc(),M=new m.h;return M.uc(C,b),M.normalize(),M.Hv(),M.scale(this.Ka),b.add(M),C.add(M),M=v.Ia(),v.Dc(b),v.Qc(C),M},g.prototype.dM=function(){var v=this.ko;if(0<this.Ka&&this.Ki!=2){var b=new m.Da;return b.ad(v,!1),this.ko=b,this.Rx()}return(v=new m.Fh(v.$)).W(this.Ka,this.Ka),v},g.prototype.tJ=function(v,b,C,M){return(b.x-v.x)*(M.x-C.x)+(b.y-v.y)*(M.y-C.y)},g.prototype.fc=function(v,b){if(b===void 0)this.Yb.push(v),this.gf++;else if(this.gf==0)this.fc(v);else{var C=this.Bw,M=this.wg[b==0?C-1:b-1],O=this.wg[b],L=this.tJ(M,O,this.Yb[this.gf-1],v);0<L?this.fc(v):0>L&&(0<this.tJ(M,O,O,this.Yb[this.gf-1])?(O=this.wg[b==0?C-2:b==1?C-1:b-2],C=a.Pd(M,this.Ka,Math.atan2(M.y-O.y,M.x-O.x)-h),this.Yb[this.gf-1]=C,this.Ki==1||this.Ki==2?(C=a.Pu(C,M),this.fc(C),C=a.Pd(M,this.Ka,this.Jv+h),(M=a.Pu(C,M)).type|=256,this.fc(M)):(C=a.Pd(M,this.Ka,this.Jv+h)).type|=256,this.fc(C),this.fc(v,b)):(C=a.Pd(O,this.Ka,this.Jv+h),this.fc(C),this.Ki==1||this.Ki==2?(C=a.Pu(C,O),this.fc(C),C=a.Pd(O,this.Ka,this.aA-h),(M=a.Pu(C,O)).type|=256,this.fc(M)):(C=a.Pd(O,this.Ka,this.aA-h)).type|=256,this.fc(C)))}},g.prototype.mE=function(){var v,b=this.Bw;this.gf=0;var C=.5*this.qa,M=0,O=0;for(v=0;v<b;v++){var L=this.wg[v],q=v==0?this.wg[b-1]:this.wg[v-1],U=v==b-1?this.wg[0]:this.wg[v+1],ee=q.x-L.x,Q=q.y-L.y,ge=U.x-L.x,ve=U.y-L.y,fe=Math.atan2(Q,ee),Ce=Math.atan2(ve,ge);if(this.Jv=fe,this.aA=Ce,v==0&&(M=fe,O=Ce),ee=ee*ve-ge*Q,Q=Ce,Ce<fe&&(Ce+=p),0<ee*this.Ka)this.Ki==1||this.Ki==2?(fe=a.Pd(L,this.Ka,fe+h),this.fc(fe),fe=a.TE(L,fe),this.fc(fe),fe=a.Pd(L,this.Ka,Ce-h),(L=a.TE(L,fe)).type|=256,this.fc(L),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),this.fc(fe,v));else if(512&L.type){for(ee=1-C/Math.abs(this.Ka),q=1,U=0>this.Ka?-T:T,-1<ee&&1>ee&&(.017453292519943295>(Q=2*Math.acos(ee))&&(Q=.017453292519943295),1<(q=m.O.truncate(T/Q+1.5))&&(U/=q)),Q=fe+h,fe=a.Pd(L,this.Ka,Q),v==0&&(fe.type|=1024),this.fc(fe,v),ee=this.Ka/Math.cos(U/2),Q+=U/2,(fe=a.Pd(L,ee,Q)).type|=1024,this.fc(fe);0<--q;)Q+=U,(fe=a.Pd(L,ee,Q)).type|=1024,this.fc(fe);(fe=a.Pd(L,this.Ka,Ce-h)).type|=1024,this.fc(fe)}else if(this.Ki==1)fe=a.Pd(L,this.Ka,fe+h),this.fc(fe,v),fe=a.Pd(L,this.Ka,Ce-h),this.fc(fe);else if(this.Ki==0)for(ee=1-C/Math.abs(this.Ka),q=1,U=Ce-h-(fe+h),-1<ee&&1>ee&&(.017453292519943295>(Q=2*Math.acos(ee))&&(Q=.017453292519943295),1<(q=m.O.truncate(Math.abs(U)/Q+1.5))&&(U/=q)),ee=this.Ka/Math.cos(.5*U),Q=fe+h+.5*U,fe=a.Pd(L,ee,Q),this.fc(fe,v);0<--q;)Q+=U,fe=a.Pd(L,ee,Q),this.fc(fe);else this.Ki==2?(ee=q.x-L.x,Q=q.y-L.y,.99999999<(q=(ee*(ge=U.x-L.x)+Q*(ve=U.y-L.y))/Math.sqrt(ee*ee+Q*Q)/Math.sqrt(ge*ge+ve*ve))?(fe=a.Pd(L,1.4142135623730951*this.Ka,Ce-.25*T),this.fc(fe,v),fe=a.Pd(L,1.4142135623730951*this.Ka,Ce+.25*T),this.fc(fe)):(q=Math.abs(this.Ka/Math.sin(.5*Math.acos(q))))>(U=Math.abs(this.CA*this.Ka))?(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),Ce=m.h.construct(fe.x,fe.y),fe=m.h.construct(L.x,L.y),(L=new m.h).uc(Ce,fe),(Ce=new m.h).HW(U/L.length(),L,fe),fe=(q-U)*Math.abs(this.Ka)/Math.sqrt(q*q-this.Ka*this.Ka),0<this.Ka?L.Hv():L.ar(),L.scale(fe/L.length()),(fe=new m.h).add(Ce,L),(q=new m.h).uc(Ce,L),fe=a.al(fe),this.fc(fe,v),fe=a.al(q),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),this.fc(fe,v))):(Ce=Q,0<this.Ka?(Ce>fe&&(Ce-=p),q=fe-Ce<h):(Ce<fe&&(Ce+=p),q=Ce-fe<h),q?(Q=0>(ee=1.4142135623730951*this.Ka)?fe+.25*T:fe+.75*T,fe=a.Pd(L,ee,Q),this.fc(fe,v),Q=0>ee?Ce-.25*T:Ce-.75*T,fe=a.Pd(L,ee,Q),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),Ce<fe&&(Ce+=p),fe=a.Pd(L,ee,(fe+Ce)/2),this.fc(fe,v)))}return this.Jv=M,this.aA=O,this.fc(this.Yb[0],0),L=a.SO(this.Yb[this.gf-1]),this.Yb[0]=L,this.wW()},g.prototype.Au=function(v,b){if(!(2>b))for(var C=0;C<b;C++){var M=this.Yb[v+C];C!=0?this.NA.Ci(m.h.construct(M.x,M.y)):this.NA.Lt(m.h.construct(M.x,M.y))}},g.prototype.fM=function(v,b,C){var M=v.Ba(b),O=v.Vc(b);if(this.Yb=[],this.NA=C,v.dc(b)){for(b=v.Na(M);v.Na(O-1).qb(b);)O--;if(2<=O-M){for(this.Bw=O-M,this.wg=[],b=M;b<O;b++)this.wg.push(a.al(v.Na(b)));this.mE()&&this.Au(0,this.gf-1)}}else{for(b=v.Na(M);M<O&&v.Na(M+1).qb(b);)M++;for(b=v.Na(O-1);M<O&&v.Na(O-2).qb(b);)O--;if(2<=O-M){for(this.Bw=2*(O-M)-2,this.wg=[],(C=a.al(v.Na(M))).type|=1536,this.wg.push(C),b=M+1;b<O-1;b++)C=a.al(v.Na(b)),this.wg.push(C);for((C=a.al(v.Na(O-1))).type|=512,this.wg.push(C),b=O-2;b>=M+1;b--)(C=a.al(v.Na(b))).type|=1024,this.wg.push(C);if(this.mE())if(2<=this.Yb.length){for(v=-1,(O=!!(1024&this.Yb[this.gf-1].type))||(v=0),b=1;b<this.gf;b++)(M=!!(1024&this.Yb[b].type))?O||1<(O=b-1)-v+1&&this.Au(v,O-v+1):O&&(v=b-1),O=M;O||1<(O=this.gf-1)-v+1&&this.Au(v,O-v+1)}else v=0,O=this.gf-1,0<=v&&1<=O-v&&this.Au(v,O-v+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},g.prototype.wW=function(){for(var v=!1,b=0;b<this.gf;b++){var C=this.Yb[b];C.qh=b+1,C.sh=b-1,this.Yb[b]=C}for((C=this.Yb[0]).sh=this.gf-2,this.Yb[0]=C,(C=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=C,b=C=0;b<this.gf;b++)if(256&this.Yb[C].type){var M=this.GP(C);if(M==-1){v=!0;break}C=M}else C=this.Yb[C].qh;return!v&&(this.QO(C),!0)},g.prototype.GP=function(v){for(var b,C,M=this.gf-1,O=v,L=1;L<=M-2;L++){b=O=this.Yb[O].qh,C=v;for(var q=1;q<=L;q++){if(C=this.Yb[C].sh,!(256&this.Yb[C].type||256&this.Yb[b].type)){var U=this.gS(C,b);if(U!=-1)return U}b=this.Yb[b].sh}}return-1},g.prototype.gS=function(v,b){var C=this.Yb[this.Yb[v].sh],M=this.Yb[v],O=this.Yb[this.Yb[b].sh],L=this.Yb[b];if(!this.JW(C,M,O,L))return-1;var q=new c;return this.xQ(C,M,O,L,q)&&!q.bE&&m.O.bK((M.x-C.x)*(L.y-O.y)-(M.y-C.y)*(L.x-O.x))!=m.O.bK(this.Ka)?(C=this.Yb[v].sh,q.an.type=M.type,q.an.qh=b,q.an.sh=C,this.Yb[v]=q.an,q.an=this.Yb[b],q.an.sh=v,this.Yb[b]=q.an,b):-1},g.prototype.JW=function(v,b,C,M){return Math.max(v.x,b.x)>=Math.min(C.x,M.x)&&Math.max(C.x,M.x)>=Math.min(v.x,b.x)&&Math.max(v.y,b.y)>=Math.min(C.y,M.y)&&Math.max(C.y,M.y)>=Math.min(v.y,b.y)},g.prototype.xQ=function(v,b,C,M,O){O.bE=!1;var L=(b.y-v.y)*(M.x-C.x)-(b.x-v.x)*(M.y-C.y),q=(C.y-v.y)*(b.x-v.x)-(C.x-v.x)*(b.y-v.y);if(0<=(L=L==0?2:q/L)&&1>=L){var U=L;if(L=(M.y-C.y)*(b.x-v.x)-(M.x-C.x)*(b.y-v.y),q=(v.y-C.y)*(M.x-C.x)-(v.x-C.x)*(M.y-C.y),0<=(L=L==0?2:q/L)&&1>=L)return O.an=a.TO(v.x+L*(b.x-v.x),v.y+L*(b.y-v.y)),O.an.Uh=C.Uh+U*(M.Uh-C.Uh),U!=0&&U!=1||L!=0&&L!=1||(O.bE=!0),O.VY=L,O.WY=U,!((U==0||U==1)&&0<L&&1>L||(L==0||L==1)&&0<U&&1>U)}return!1},g.prototype.QO=function(v){for(;this.Yb[v].sh<v;)v=this.Yb[v].sh;var b=0,C=v;do C=this.Yb[C],this.Yb[b]=C,C=C.qh,b++;while(C!=v);this.Yb[b]=this.Yb[0],this.gf=b+1},g.prototype.$C=function(v){var b=this.ko,C=b.Ga();if(C!=null){C.Zi();for(var M=-1;C.$a();)M++,this.fM(b,M,v)}},g.prototype.Rx=function(){var v=this.ko.getType();return v==322?this.eM():v==197?this.dM():m.aa.yd(v)?((v=new m.Ta).oc(this.ko,!0),this.ko=v,this.Rx()):v==1607?(v=new m.Ta,this.$C(v),v):v==1736?(v=new m.Da,this.$C(v),v):null},g}();m.IK=d}(ye||(ye={})),function(m){var j=function(){function a(c){this.qk=c}return a.prototype.D=function(c,d){this.qk.g.D(c,d)},a.prototype.vd=function(c){var d=this.qk.Fa.ja(c);this.qk.Fa.vd(c,-1),this.qk.g.pd(d,!1)},a}(),T=function(){function a(c){this.qk=c}return a.prototype.D=function(c,d){this.qk.IT.D(c,d)},a.prototype.vd=function(c){this.qk.Fa.vd(c,-1)},a}(),p=function(){function a(c){this.qk=c}return a.prototype.D=function(c,d){d.L(this.qk.LT[c])},a.prototype.vd=function(c){this.qk.Fa.vd(c,-1)},a}(),h=function(){function a(c){c===void 0?(this.Fa=new m.Yj,this.Fa.De(20),this.g=new m.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new j(this)):c instanceof Array?(this.Fa=new m.Yj,this.Fa.De(20),this.LT=c,this.Xh=new p(this)):(this.Fa=new m.Yj,this.Fa.De(20),this.IT=c,this.Xh=new T(this))}return a.prototype.Ib=function(c){var d=c.getType();if(m.Gx.xj(d))this.jN(c);else if(m.Vk.yd(d))this.oN(c);else if(d==197)this.gN(c);else{if(d!=33)throw m.i.N("invalid shape type");this.nN(c)}},a.prototype.cR=function(){var c=new m.Sa,d=this.Fa.rc(-1),g=new m.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(d),c),g.nf(c),d=this.Fa.lb(d);d!=-1;d=this.Fa.lb(d))this.g.Vi(this.Fa.ja(d),c),g.lineTo(c);return g},a.RO=function(c){var d=new a(c),g=c.I(),v=1,b=new m.h,C=new m.h,M=new m.h;for(c.D(0,b);c.D(v,C),C.Rz(b)&&v<g-1;)v++;for(d.Fa.addElement(0,-1),d.Fa.xn(v),g=v+1;g<c.I();g++)c.D(g,M),(v=d.pC(M))!=-1&&d.Fa.Sj(v,g);for(M=new m.Sa,v=d.Fa.rc(-1),g=new m.Da(c.description),c.ve(d.Fa.ja(v),M),g.nf(M),v=d.Fa.lb(v);v!=-1;v=d.Fa.lb(v))c.ve(d.Fa.ja(v),M),g.lineTo(M);return g},a.construct=function(c,d,g){for(var v=new a(c),b=1,C=c[0];c[b].Rz(C)&&b<d-1;)b++;for(v.Fa.addElement(0,-1),v.Fa.xn(b),b+=1;b<d;b++)(C=v.pC(c[b]))!=-1&&v.Fa.Sj(C,b);for(c=0,d=v.Fa.rc(-1);d!=-1;d=v.Fa.lb(d))g[c++]=v.Fa.ja(d);return c},a.JG=function(c,d){var g=c.Ba(d),v=c.Vc(d);if(d=!c.dc(d)&&c.Nn(d),c=c.ub(0),v*=2,d&&(v-=2),6>v-(g*=2))return!0;d=new m.h;var b=new m.h,C=new m.h;c.tc(g,d),c.tc(g+2,b),c.tc(g+4,C);var M=a.Wu(b,C,d);if(M.ps()||!a.um(M.value()))return!1;var O=m.h.construct(b.x,b.y),L=new m.h;for(g+=6;g<v;g+=2)if(L.L(b),b.L(C),c.tc(g,C),(M=a.Wu(b,C,d)).ps()||!a.um(M.value())||(M=a.Wu(O,C,d)).ps()||!a.um(M.value())||(M=a.Wu(b,C,L)).ps()||!a.um(M.value()))return!1;return!0},a.prototype.jN=function(c){for(var d=new m.Sa,g=new m.h,v=0;v<c.I();v++){c.D(v,g);var b=this.Cr(g);if(b!=-1){c.ve(v,d);var C=this.g.fc(this.Ss,d);this.Fa.Sj(b,C)}}},a.prototype.gN=function(c){for(var d=new m.Sa,g=new m.h,v=0;4>v;v++){c.mB(v,g);var b=this.Cr(g);if(b!=-1){c.Hf(v,d);var C=this.g.fc(this.Ss,d);this.Fa.Sj(b,C)}}},a.prototype.oN=function(c){var d=new m.Sa,g=c.ac();if((g=this.Cr(g))!=-1){c.To(d);var v=this.g.fc(this.Ss,d);this.Fa.Sj(g,v)}g=c.wc(),(g=this.Cr(g))!=-1&&(c.Po(d),c=this.g.fc(this.Ss,d),this.Fa.Sj(g,c))},a.prototype.nN=function(c){var d=c.D();(d=this.Cr(d))!=-1&&(c=this.g.fc(this.Ss,c),this.Fa.Sj(d,c))},a.prototype.Cr=function(c){var d=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var g=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return c.Rz(g)||(d=this.Fa.xn(-5)),d}return this.pC(c)},a.prototype.pC=function(c){var d=-1;do{var g=this.Fa.rc(-1),v=this.Fa.Fc(-1),b=this.Fa.ja(g),C=this.Fa.ja(v),M=new m.h,O=new m.h;if(this.Xh.D(b,M),this.Xh.D(C,O),b=m.h.Uq(O,c,M),a.um(b))d=this.Fa.xn(-1),(M=this.nC(c,v,g))!=g&&this.oC(c,g,this.Fa.we(M));else if(a.CG(b)){O=this.Fa.sv(-1);var L=this.Fa.rc(-1),q=this.Fa.Fc(-1);for(b=new m.h,C=new m.h;L!=this.Fa.we(q);){var U=this.Fa.ja(O);this.Xh.D(U,b),U=m.h.Uq(b,c,M),a.CG(U)?(q=O,O=this.Fa.ll(O)):(L=O,O=this.Fa.Xp(O))}if(O=q,M=L,U=this.Fa.ja(O),L=this.Fa.ja(M),this.Xh.D(U,b),this.Xh.D(L,C),M!=g&&(b=m.h.Uq(C,c,b),!a.um(b)))continue;d=this.Fa.zu(M,O,-2,!1),this.oC(c,O,v),this.nC(c,M,g)}else this.sb==null&&(this.sb=new m.yb),this.sb.Dc(O),this.sb.Qc(M),0>(M=this.sb.fe(c,!0))?(M=this.Fa.we(v),this.Fa.vd(v,-1),d=this.Fa.xn(-3),this.nC(c,M,g)):1<M&&(M=this.Fa.lb(g),this.Fa.vd(g,-1),d=this.Fa.zu(-1,M,-3,!1),this.oC(c,M,v))}while(!1);return d},a.prototype.oC=function(c,d,g){if(d!=g){var v=this.Fa.ja(d),b=this.Fa.lb(d),C=new m.h,M=new m.h;for(this.Xh.D(v,C);d!=g&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(b),M),v=m.h.Uq(M,c,C),!a.um(v));)v=d,d=b,C.L(M),b=this.Fa.lb(d),this.Xh.vd(v)}},a.prototype.nC=function(c,d,g){if(d==g)return g;var v=this.Fa.ja(d),b=this.Fa.we(d),C=new m.h,M=new m.h;for(this.Xh.D(v,C);d!=g&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(b),M),v=m.h.Uq(C,c,M),!a.um(v));)v=d,d=b,C.L(M),b=this.Fa.we(d),this.Xh.vd(v);return d},a.Wu=function(c,d,g){var v=new m.Wb;v.set(d.x),v.sub(c.x);var b=new m.Wb;b.set(g.y),b.sub(c.y);var C=new m.Wb;return C.set(d.y),C.sub(c.y),(d=new m.Wb).set(g.x),d.sub(c.x),v.Ag(b),C.Ag(d),v.sub(C),v},a.um=function(c){return 0>c},a.CG=function(c){return 0<c},a}();m.Zt=h}(ye||(ye={})),function(m){var j=function(){function T(p){this.g=null,this.tH=!0,this.nd=p}return T.zU=function(p,h,a){return p=m.ta.Er(p),m.Yt.Cv(h.Lg(),h.ih(),a.Lg(),a.ih(),m.lc.ox(p))},T.CO=function(p,h){var a=new m.Sa;return m.Yt.WT(p,h,a),a},T.V=function(p,h,a,c){return(a=new T(a)).g=p,a.qa=h,a.tH=c,a.EM()},T.prototype.nM=function(p){return m.Yt.iQ(this.g,p)},T.prototype.sM=function(p){return m.$t.V(this.g,p,this.nd)},T.prototype.EM=function(){var p=this.qa,h=m.ta.Er(p),a=1.00001*(p=m.ta.rN(p));p*=1.000001;for(var c=!1,d=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),g=0,v=this.g.jS();;g++){if(g>d)throw m.i.fa("Internal Error: max number of iterations exceeded");var b=this.nM(h);if(c=c||b,this.tH&&(b=this.g.Gp(h,!0,!1)!=0,c=c||b),b=!1,(g==0||v||m.$t.kI(!0,this.g,p,null,this.nd))&&(b=this.sM(a),c=c||b),!b)break;m.mp.zp(this.nd)}return c},T}();m.Tk=j}(ye||(ye={})),function(m){var j=function(){function p(h){this.$d=this.Mc=null,this.Ys=0,this.Ub=h,this.cA=!0}return p.prototype.uv=function(h,a){var c=this.g.bc(h);if(c==null){if(!this.g.ed(h,a))return null;c=a}return c},p.prototype.Xq=function(){var h;h===void 0&&(h=!1),this.Ys++,!h&&4095&this.Ys||(this.Ys=0,m.mp.zp(this.Ub))},p.prototype.nP=function(){var h=this.g.Yq(!1),a=!1,c=new m.yb,d=new m.yb,g=new m.l;g.Oa();var v=new m.l;v.Oa();for(var b=new m.Sa,C=new m.TC,M=h.next();M!=-1;M=h.next()){m.mp.zp(this.Ub);var O=null,L=!1;if(!m.aa.Rn(this.g.ic(h.ck))){if((O=this.uv(M,c))==null)continue;if(O.A(g),g.W(this.qa,this.qa),O.Bi(this.qa)){if(!O.Bi(0))continue;L=!0,O=null}}var q=this.g.Yq(h),U=q.next();for(U!=-1&&(U=q.next());U!=-1;U=q.next()){var ee=null,Q=!1;if(!m.aa.Rn(this.g.ic(q.ck))){if((ee=this.uv(U,d))==null)continue;if(ee.A(v),ee.Bi(this.qa)){if(!ee.Bi(0))continue;Q=!0,ee=null}}var ge=0,ve=0;if(O!=null&&ee!=null)g.HG(v)&&(C.Oo(O),C.Oo(ee),C.Ea(this.qa,!1),0<(ge=C.ol(0))+(ve=C.ol(1))&&(this.g.jr(M,C,0,!0),this.g.jr(U,C,1,!0)),C.clear());else if(O!=null){var fe=new m.h;if(this.g.D(U,fe),g.contains(fe)){if(C.Oo(O),this.g.Vi(U,b),C.Kz(this.qa,b,!1),0<(ge=C.ol(0)))if(this.g.jr(M,C,0,!0),Q){for(Q=-1,fe=this.g.U(U);fe!=-1&&fe!=U&&(Q=fe,(ee=this.uv(fe,d))!=null&&ee.Bi(0));fe=this.g.U(fe));for(fe=U;fe!=-1&&(this.g.Dh(fe,C.Bf),fe!=Q);fe=this.g.U(fe));}else this.g.Dh(U,C.Bf);C.clear()}}else{if(ee==null)continue;if(fe=new m.h,this.g.D(M,fe),v.W(this.qa,this.qa),v.contains(fe)){if(C.Oo(ee),this.g.Vi(M,b),C.Kz(this.qa,b,!1),0<(ve=C.ol(0)))if(this.g.jr(U,C,0,!0),L){for(Q=-1,fe=this.g.U(M);fe!=-1&&fe!=M&&(Q=fe,(ee=this.uv(fe,d))!=null&&ee.Bi(0));fe=this.g.U(fe));for(fe=M;fe!=-1&&(this.g.Dh(fe,C.Bf),fe!=Q);fe=this.g.U(fe));}else this.g.Dh(M,C.Bf);C.clear()}}if(ge+ve!=0){if(ge!=0){if((O=this.g.bc(M))==null){if(!this.g.ed(M,c))continue;O=c,c.A(g)}else O.A(g);if(O.Bi(this.qa))break}a=!0}}}return a},p.prototype.oP=function(){return this.QU()},p.prototype.QU=function(){return new m.RC().PX(this.g,this.qa)},p.prototype.lI=function(){var h=!1;this.Mc==null&&(this.Mc=new m.Yj);var a=new m.ia(0);a.Jb(this.g.fd+1);for(var c=this.g.Yq(),d=c.next();d!=-1;d=c.next())a.add(d);this.g.nx(a,a.size),a.add(-1),c=this.g.Gd(),d=this.g.Gd(),this.$d=new m.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var g=new m.ia(0),v=new m.ia(0),b=0;new m.h;var C=this.g.td;this.g.vb.mc();for(var M,O,L=this.g.vb.za[0].o,q=a.get(b++);q!=-1;){var U=M=L[2*(O=C.T(q,0))],ee=O=L[2*O+1];do{var Q=C.T(q,2),ge=C.T(q,1);if(Q!=-1){var ve=C.T(Q,0),fe=L[2*ve];0>(ee<(ve=L[2*ve+1])?-1:ee>ve?1:U<fe?-1:U>fe?1:0)&&(v.add(q),v.add(Q))}ge!=-1&&(fe=L[2*(ve=C.T(ge,0))],0>(ee<(ve=L[2*ve+1])?-1:ee>ve?1:U<fe?-1:U>fe?1:0)&&(v.add(ge),v.add(ge))),(fe=this.g.Pa(q,c))!=-1&&(g.add(fe),this.g.Ra(q,c,-1)),(fe=this.g.Pa(q,d))!=-1&&(g.add(fe),this.g.Ra(q,d,-1)),(q=a.get(b++))!==-1&&(U=L[2*(ee=C.T(q,0))],ee=L[2*ee+1])}while(q!=-1&&U===M&&ee===O);for(U=g.size==1&&v.size==2,fe=ee=-1,Q=0,ge=g.size;Q<ge;Q++){ve=g.get(Q);var Ce=this.Mc.we(ve);if(Ce==-1||g.hG(Ce)||(ee=Ce),(ve=this.Mc.lb(ve))==-1||g.hG(ve)||(fe=ve),ee!=-1&&fe!=-1)break}for(this.$d.$J(O,M),Q=0,ge=g.size;Q<ge;Q++)ve=g.get(Q),this.Mc.vd(ve,-1);if(g.clear(!1),!U&&ee!=-1&&fe!=-1&&this.qO(ee,fe)){h=!0,this.Ni=this.$d.rm();break}for(Q=0,ge=v.size;Q<ge;Q+=2){if(O=v.get(Q),M=v.get(Q+1),U?(O=this.Mc.zu(ee,fe,O,!0),U=!1):O=this.Mc.addElement(O,-1),this.$d.rg){this.Ni=this.$d.rm(),h=!0;break}this.g.Pa(M,c)==-1?this.g.Ra(M,c,O):this.g.Ra(M,d,O)}if(h)break;v.Bh(0)}return this.g.Td(c),this.g.Td(d),h},p.prototype.qO=function(h,a){return this.$d.compare(this.Mc,this.Mc.ja(h),a),h=this.$d.rg,this.$d.Kr(),h},p.yE=function(h){for(var a=h.ld;a!=-1;a=h.ue(a))if(m.aa.Hc(h.ic(a)))return!0;return!1},p.fQ=function(h,a,c,d){return!!p.yE(h)&&((a=new p(d)).g=h,a.qa=c,15>h.fd?h=a.nP():a.oP())},p.V=function(h,a,c){return p.fQ(h,h.IF(),a,c)},p.kI=function(h,a,c,d,g){if(!p.yE(a))return!1;var v=new p(g);if(v.g=a,v.qa=c,v.cA=h,v.lI())return d!=null&&d.Wt(v.Ni),!0;var b=new m.Dd;return b.$B(),a.Oc(b),(v=new p(g)).g=a,v.qa=c,v.cA=h,h=v.lI(),b.$B(),a.Oc(b),!!h&&(d!=null&&d.Wt(v.Ni),!0)},p.Ml=function(h,a){return!(16>(h=h.I()))&&2*h+Math.log(h)*Math.LOG10E/Math.log(2)*a<1*h*a},p.lP=function(h,a,c,d){var g=a.getType();if(m.aa.Hc(g))return new p(d).mP(h,a,c);throw m.i.fa("crack_A_with_B")},p.prototype.mP=function(h,a,c){var d=new m.l;h.xc(d);var g=new m.l;if(a.xc(g),g.W(c,c),!g.isIntersecting(d))return h;var v=h.Bb,b=null;v!=null&&(b=v.Fb),p.Ml(h,h.I())&&(b=m.ta.jj(h,g));var C=b!=null?b.getIterator():null,M=a.Ga();a=h.Ga();var O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(g=[];M.$a();)for(;M.Ha();){var L=M.ha();if(b!=null){for(C.Uo(L,c),v=C.next();v!=-1;v=C.next())if(this.Xq(),a.Vb(b.ja(v),-1),a.Ha()){var q=(v=a.ha()).Ea(L,null,O,null,c);for(v=0;v<q;++v){var U=O[v];if(U!=0&&U!=1){var ee=a.wb(),Q=new T;Q.t=U,Q.index=ee,g.push(Q)}}}}else{var ge=new m.l;if(L.xc(ge),ge.W(c,c),d.isIntersecting(ge)){for(a.Zi();a.$a();)for(;a.Ha();)if(this.Xq(),v=a.ha(),U=new m.l,v.xc(U),U.isIntersecting(ge))for(q=v.Ea(L,null,O,null,c),v=0;v<q;++v)(U=O[v])!=0&&U!=1&&(ee=a.wb(),(Q=new T).t=U,Q.index=ee,g.push(Q))}}}if(g.length==0)return h;for(g=g.sort(T.Ey),h=h.Ia(),a.Zi();a.$a()&&!a.Ha(););for(c=a.ha(),d=new m.ig,b=-1,v=0,C=g.length;v<C;){for(O=g[v].index,M=v+1;M<C&&g[M].index==O;)++M;for(;a.wb()<O;){if(this.Xq(),L=a.Ha(),U=a.gb,(ge=L||!a.On()||a.Pn())&&h.oc(c,b!=U),b=U,!L)for(;a.$a()&&!a.Ha(););c=a.ha()}for(O=0;v<M;v++)(U=g[v].t)!=O&&(c.ah(O,U,d),O=U,U=a.gb,h.oc(d.get(),b!=U),b=U);if((ge=(L=a.Ha())||!a.On()||a.Pn())&&(c.ah(O,1,d),h.oc(d.get(),!1)),L)c=a.ha();else{for(;a.$a()&&!a.Ha(););c=a.Ha()?a.ha():null}v=M}for(c!=null&&(U=a.gb,(ge=(L=a.Ha())||!a.On()||a.Pn())&&h.oc(c,b!=U),b=U),L=a.Ha();;){if(!L){for(;a.$a()&&!(L=a.Ha()););if(!L)break}c=a.ha(),U=a.gb,(ge=(L=a.Ha())||!a.On()||a.Pn())&&h.oc(c,b!=U),b=U}return h},p}();m.$t=j;var T=function(){function p(){}return p.Ey=function(h,a){return h.index==a.index?h.t>a.t?1:h.t<a.t?-1:0:h.index>a.index?1:-1},p}()}(ye||(ye={})),function(m){var j;(j=m.KK||(m.KK={}))[j.Left=0]="Left",j[j.Right=1]="Right",j[j.Coincident=2]="Coincident",j[j.Undefined=3]="Undefined",j[j.Uncut=4]="Uncut";var T=function(a,c,d,g,v,b,C,M,O,L,q){this.X=a,this.bt=c,this.Ns=d,this.tg=g,this.Lm=L,this.Al=q};m.uY=T;var p=function(){function a(c,d){this.JH=c,this.Hi=d}return a.prototype.qM=function(c,d){var g=new m.h;this.Hi.D(c,g);var v=new m.h;return this.Hi.D(d,v),(g=g.compare(v))!=0?g:(c=this.Hi.Pa(c,this.JH))<(d=this.Hi.Pa(d,this.JH))?-1:c==d?0:1},a}(),h=function(a,c,d,g,v,b,C,M,O){this.tg=a,this.Ns=c,this.OA=d,this.UH=g,this.Ei=v,this.Al=b,this.Lm=C,this.VH=M,this.OT=O};m.tY=h,m.LK=function(){function a(){}return a.JK=function(c,d,g,v,b,C){if(d.B())c=new T(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(c);else if(g.B())c=new T(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(c);else{var M=new m.gd;if(M.Ib(d),M.Ib(g),m.Tk.V(M,v,C,!0),M.fd==0)c=new T(d.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(c);else{for(d=0,g=M.Gd(),v=M.ld;v!=-1;v=M.ue(v))for(C=M.Ob(v);C!=-1;C=M.Rb(C))for(var O=M.Xa(C),L=0,q=M.Ja(C);L<q;O=M.U(O),L++)M.Ra(O,g,d++);d=a.HM(g,M),a.cM(c,d,M,b)}}},a.HM=function(c,d){for(var g=d.fd,v=new m.ia(0),b=d.ld;b!=-1;b=d.ue(b))for(var C=d.Ob(b);C!=-1;C=d.Rb(C))for(var M=d.Xa(C),O=0,L=d.Ja(C);O<L;M=d.U(M),O++)v.add(M);var q=new p(c,d);v.Vd(0,g,function(dt,ct){return q.qM(dt,ct)}),c=[];var U=[],ee=d.Gd(),Q=d.Gd();b=d.ld,C=d.ue(b),L=new m.h;var ge=new m.h,ve=v.get(0),fe=d.bd(ve),Ce=d.Qf(fe);d.D(ve,L);var Ie=1;for(M=0;Ie<g-1;){var Ne=!1;for(O=Ie;O<g;O++)if(O!=M){var Ve=v.get(O),Xe=d.bd(Ve),et=d.Qf(Xe);if(d.D(Ve,ge),!L.qb(ge))break;Ce==b&&et==C&&(Ne=a.uM(ee,Q,d,c,U,fe,ve,Xe,Ve))}if(Ne||M==Ie-1){if(Ne&&M==Ie-1&&Ie--,++M==g)break;ve=v.get(M),fe=d.bd(ve),Ce=d.Qf(fe),d.D(ve,L)}Ne||(Ie=M+1)}for(g=[],b=d.ld;b!=-1;b=d.ue(b))for(C=d.Ob(b);C!=-1;C=d.Rb(C))for(v=d.Xa(C),O=0,L=d.Ja(C);O<L;v=d.U(v),O++){if(0<=(M=d.Pa(v,Q)))for(;M<U.length&&U[M].tg==v;)g.push(U[M++]);if(0<=(M=d.Pa(v,ee)))for(;M<c.length&&c[M].tg==v;)g.push(c[M++])}return d.Td(ee),d.Td(Q),g},a.uM=function(c,d,g,v,b,C,M,O,L){var q=g.rj(C),U=g.rj(O),ee=g.Xa(C),Q=g.Xa(O),ge=g.Ma(M),ve=g.Ma(L),fe=!1,Ce=!1,Ie=!1,Ne=!1;return M!=ee&&(L!=Q&&(fe=a.vM(c,g,v,C,ge,O,ve)),L!=U&&(Ce=a.wM(c,g,v,C,ge,O,L))),M!=q&&(L!=Q&&(Ie=a.xM(d,g,b,C,M,O,ve,ee)),L!=U&&(Ne=a.yM(d,g,b,C,M,O,L,ee))),fe&&Ce&&Ie?(c=v.length-1,b[Ne?b.length-2:b.length-1].Ei==2&&(v[c-1]=v[c],--v.length)):fe&&Ce&&Ne&&b[b.length-1].Ei==2&&(b=v[v.length-1],--v.length,g.Pa(b.tg,c)==v.length&&g.Ra(b.tg,c,-1)),fe||Ce||Ie||Ne},a.vM=function(c,d,g,v,b,C,M){var O=new m.yb,L=new m.yb,q=[0,0],U=[0,0],ee=d.bc(b);return ee==null&&(d.ed(b,O),ee=O),(O=d.bc(M))==null&&(d.ed(M,L),O=L),2>(ee=ee.Ea(O,null,q,U,0))&&(v=new h(b,v,q[0],NaN,ee,M,C,U[0],NaN),g.push(v),0>(v=d.Pa(b,c))&&d.Ra(b,c,g.length-1)),!0},a.wM=function(c,d,g,v,b,C,M){var O=new m.yb,L=new m.yb,q=[0,0],U=[0,0],ee=d.bc(b);return ee==null&&(d.ed(b,O),ee=O),(O=d.bc(M))==null&&(d.ed(M,L),O=L),2>(ee=ee.Ea(O,null,q,U,0))&&(v=new h(b,v,q[0],NaN,ee,M,C,U[0],NaN),g.push(v),0>(v=d.Pa(b,c))&&d.Ra(b,c,g.length-1),!0)},a.xM=function(c,d,g,v,b,C,M,O){var L=new m.yb,q=new m.yb,U=[0,0],ee=[0,0],Q=d.bc(b);return Q==null&&(d.ed(b,L),Q=L),(L=d.bc(M))==null&&(d.ed(M,q),L=q),(Q=Q.Ea(L,null,U,ee,0))==2?(v=new h(b,v,U[0],U[1],Q,M,C,ee[0],ee[1]),g.push(v),0>(v=d.Pa(b,c))&&d.Ra(b,c,g.length-1),!0):(q=!1,b==O&&(v=new h(b,v,U[0],NaN,Q,M,C,ee[0],NaN),g.push(v),0>(v=d.Pa(b,c))&&d.Ra(b,c,g.length-1),q=!0),q)},a.yM=function(c,d,g,v,b,C,M,O){var L=new m.yb,q=new m.yb,U=[0,0],ee=[0,0],Q=d.bc(b);return Q==null&&(d.ed(b,L),Q=L),(L=d.bc(M))==null&&(d.ed(M,q),L=q),(Q=Q.Ea(L,null,U,ee,0))==2?(v=new h(b,v,U[0],U[1],Q,M,C,ee[0],ee[1]),g.push(v),0>(v=d.Pa(b,c))&&d.Ra(b,c,g.length-1),!0):(q=!1,b==O&&(v=new h(b,v,U[0],NaN,Q,M,C,ee[0],NaN),g.push(v),0>(v=d.Pa(b,c))&&d.Ra(b,c,g.length-1),q=!0),q)},a.cM=function(c,d,g,v){var b=[];b[0]=new m.h,b[1]=new m.h,b[2]=new m.h,b[3]=new m.h;var C=new m.h,M=new m.h,O=new m.h,L=new m.h,q=null;v!=null&&(q=new m.ig).Or();var U=0,ee=null,Q=new m.yb;new m.yb;for(var ge=g.Ob(g.ld);ge!=-1;ge=g.Rb(ge)){for(var ve=4,fe=-1,Ce=-1,Ie=-1,Ne=-1,Ve=NaN,Xe=!0,et=!1,dt=!0,ct=!0,mt=!0,lt=0,gi=ge,oi=0,Ni=g.Xa(ge),Qi=g.Ja(ge),_s=0;_s<Qi;Ni=g.U(Ni),_s++){var as=g.bc(Ni);if(as==null){if(!g.ed(Ni,Q))continue;as=Q}Ce==-1&&(Ce=Ni);for(var $i=0;U<d.length&&Ni==d[U].tg;){fe=d[U].Ns;var ui=d[U].tg,Kt=d[U].OA,Xs=d[U].Lm,Ps=d[U].Al,Qn=d[U].VH;if(d[U].Ei==2){if(et||(gi=fe,Ce=ui,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,ve=2,v!=null?ee=new m.Ta:lt=0,mt=!1,ct=!0),Kt=d[U].UH,Qn=d[U].OT,v!=null?(as.ah($i,d[U].UH,q),ee.oc(q.get(),ct)):lt++,$i=Kt,et=!0,ct=Xe=!1,U+1==d.length||d[U+1].Ei!=2||d[U+1].tg==ui&&d[U+1].OA!=$i){if(v!=null){var wi=new T(ee,2,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps);v.push(wi)}else null.add(lt);gi=fe,Ce=ui,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,ve=2,et=Xe=!1,ct=mt=!0}}else{var sn=g.U(ui);if(U<d.length-1&&d[U+1].tg==sn&&d[U+1].Al==Ps&&d[U+1].Ei==2)Kt!=$i&&(mt&&(v!=null?ee=new m.Ta:lt=0),Xe=0<U&&d[U-1].Ns==fe?ve==1?0:ve==0?1:3:3,v!=null?(as.ah($i,Kt,q),ee.oc(q.get(),ct),wi=new T(ee,Xe,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):(lt++,null.add(lt)),$i=Kt,gi=fe,Ce=ui,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,ve=Xe,Xe=dt=!1,ct=mt=!0);else if(!a.CM(c,g,d,U,C,M)){a.zM(g,d,U,ge,Ni,O,L);var ns=!1;if(sn=!1,wi=!0,!(C.qb(O)||M.qb(O)||C.qb(L)||M.qb(L))){b[0].L(C),b[1].L(M),b[2].L(O),b[3].L(L),b.sort(m.h.nu);var fr=b[0],eh=b[1],Zc=b[2],ze=b[3];fr.qb(C)?eh.qb(M)?c?(sn=ns=!0,wi=!1):ns=!1:ze.qb(M)?c?wi=sn=ns=!0:ns=!1:(ns=!0,wi=eh.qb(O)):eh.qb(C)?Zc.qb(M)?c?(sn=ns=!0,wi=!1):ns=!1:fr.qb(M)?c?wi=sn=ns=!0:ns=!1:(ns=!0,wi=Zc.qb(O)):Zc.qb(C)?ze.qb(M)?c?(sn=ns=!0,wi=!1):ns=!1:eh.qb(M)?c?wi=sn=ns=!0:ns=!1:(ns=!0,wi=ze.qb(O)):fr.qb(M)?c?(sn=ns=!0,wi=!1):ns=!1:Zc.qb(M)?c?wi=sn=ns=!0:ns=!1:(ns=!0,wi=fr.qb(O))}ns&&(ns=Ni==ui,(Kt!=$i||ns&&$i==0)&&(mt&&(v!=null?ee=new m.Ta:lt=0),v!=null?(as.ah($i,Kt,q),ee.oc(q.get(),ct)):lt++),wi?ve!=1?((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,1,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),sn?(U>=d.length-2||d[U+2].Ns!=fe)&&(ve=0):ve=1):((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,3,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),ve=1):ve!=0?((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,0,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),sn?(U>=d.length-2||d[U+2].Ns!=fe)&&(ve=1):ve=0):((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,3,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),ve=0),(Kt!=$i||ns&&$i==0)&&($i=Kt,gi=fe,Ce=ui,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,Xe=dt=!1,ct=mt=!0))}}U++}$i!=1&&(mt&&(v!=null?ee=new m.Ta:lt=0),v!=null?(as.ah($i,1,q),ee.oc(q.get(),ct)):lt++,ct=mt=!1,dt=!0)}dt&&(Kt=1,ui=g.rj(ge),ui=g.Ma(ui),Ps=Xs=-1,Qn=NaN,Xe?v!=null?(wi=new T(ee,4,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt):(Xe=ve==1?0:ve==0?1:3,v!=null?(wi=new T(ee,Xe,fe,ui,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)))}},a.CM=function(c,d,g,v,b,C){var M=g[v].VH;if(M==1)return a.AM(c,d,g,v,b,C);if(M==0)return a.BM(c,d,g,v,b,C);throw m.i.Qa()},a.AM=function(c,d,g,v,b,C){var M=new m.yb,O=g[v].tg,L=g[v].Lm,q=g[v].Al,U=-1,ee=-1,Q=-1,ge=-1;if(!c&&0<v){var ve=g[v-1];U=ve.tg,ee=ve.Lm,Q=ve.Al,ge=ve.Ei}var fe=-1,Ce=-1,Ie=-1,Ne=-1;v<g.length-1&&(fe=(ve=g[v+1]).tg,Ce=ve.Lm,Ie=ve.Al,Ne=ve.Ei);var Ve=d.U(O);return ve=d.U(q),c?v==g.length-1||fe!=O||Ce!=L||Ie!=ve||Ne==2?((c=d.bc(q))==null&&(d.ed(q,M),c=M),C.L(c.kg()),b.mt(C),C.normalize(),b.normalize(),!1):((c=d.bc(q))==null&&(d.ed(q,M),c=M),b.L(c.kg()),(c=d.bc(ve))==null&&(d.ed(ve,M),c=M),C.L(c.kg()),b.Sq(),C.normalize(),b.normalize(),!1):0<v&&U==O&&ee==L&&Q==ve&&ge==2||v<g.length-1&&fe==Ve&&Ce==L&&Ie==ve&&Ne==2?((c=d.bc(q))==null&&(d.ed(q,M),c=M),C.L(c.kg()),b.mt(C),C.normalize(),b.normalize(),!1):!(v<g.length-1&&fe==O&&Ce==L&&Ie==ve)||((c=d.bc(q))==null&&(d.ed(q,M),c=M),b.L(c.kg()),(c=d.bc(ve))==null&&(d.ed(ve,M),c=M),C.L(c.kg()),b.Sq(),C.normalize(),b.normalize(),!1)},a.BM=function(c,d,g,v,b,C){var M=new m.yb,O=g[v].tg,L=g[v].Lm,q=g[v].Al,U=-1,ee=-1,Q=-1,ge=-1;if(!c&&v<g.length-1){var ve=g[v+1];U=ve.tg,ee=ve.Lm,Q=ve.Al,ge=ve.Ei}var fe=-1,Ce=-1,Ie=-1;ve=-1,0<v&&(fe=(ve=g[v-1]).tg,Ce=ve.Lm,Ie=ve.Al,ve=ve.Ei);var Ne=d.U(O),Ve=d.Ma(q);return c?v!=0&&fe==O&&Ce==L&&Ie==Ve&&ve!=2||((c=d.bc(q))==null&&(d.ed(q,M),c=M),C.L(c.kg()),b.mt(C),C.normalize(),b.normalize(),!1):!(0<v&&fe==O&&Ce==L&&Ie==Ve&&ve==2||v<g.length-1&&U==Ne&&ee==L&&Q==Ve&&ge==2)||((c=d.bc(q))==null&&(d.ed(q,M),c=M),C.L(c.kg()),b.mt(C),C.normalize(),b.normalize(),!1)},a.zM=function(c,d,g,v,b,C,M){var O=new m.yb,L=c.bc(b);if(L==null&&(c.ed(b,O),L=O),d=(g=d[g]).tg,g=g.OA,b=c.U(d),g==1)C.L(L.kg()),b!=-1&&b!=c.rj(v)?((L=c.bc(b))==null&&(c.ed(b,O),L=O),M.L(L.kg()),(L=c.bc(d))==null&&c.ed(d,O)):M.L(C),C.Sq(),M.normalize(),C.normalize();else{if(g!=0)throw m.i.Qa();M.L(L.kg()),C.mt(M),M.normalize(),C.normalize()}},a}()}(ye||(ye={})),function(m){var j;(j=m.bM||(m.bM={}))[j.Linear=0]="Linear",j[j.Angular=1]="Angular",j[j.Area=2]="Area";var T=function(){function v(b,C,M){this.od=C,this.ai=M,this.vA=b}return v.prototype.Nb=function(b){return b instanceof v&&this.ai===b.ai},v.aG=function(b){return b.od!==0?null:b.vA===-1?new v(-1,2,b.ai*b.ai):v.Zg(d[b.vA])},v.Zg=function(b){return(b=c[b])===void 0?null:b},v.ZO=function(b,C,M){var O=null;if(M!=null)try{M.values[0]==="EPSG"&&(O=v.Zg(parseInt(M.values[1])))}catch{}return O===null&&(O=new v(-1,b,C)),O},v.prototype.Ec=function(){return this.vA},v.prototype.CF=function(b){if(b.od!=this.od)throw m.i.Hb();return this.ai/b.ai},v.Nh=function(b,C,M){return C.CF(M)*b},v.XE=function(b,C,M,O,L){for(M=M.CF(O),O=0;O<C;O++)L[O]=b[O]*M},v}();m.Tc=T;for(var p=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],h=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],c=[],d=[],g=0;g<p.length;g+=2)c[p[g]]=new T(p[g],2,p[g+1]);for(p=null,g=0;g<h.length;g+=2)c[h[g]]=new T(h[g],1,h[g+1]);for(h=null,g=0;g<a.length;g+=3)c[a[g]]=new T(a[g],0,a[g+1]),d[a[g]]=a[g+2];a=null}(ye||(ye={})),function(m){var j=function(){function T(){this.xb=this.pb=0}return T.prototype.set=function(p,h){h!==void 0?(this.pb=p,this.xb=h):typeof p=="number"?(this.pb=p,this.xb=0):(this.pb=p.pb,this.xb=p.xb)},T.prototype.value=function(){return this.pb},T.prototype.add=function(p){var h=this.pb+p.pb;p=this.xb+p.xb+2220446049250313e-31*Math.abs(h),this.pb=h,this.xb=p},T.prototype.kN=function(){var p=this.pb+1,h=this.xb+2220446049250313e-31*Math.abs(p);this.pb=p,this.xb=h},T.prototype.dN=function(p,h){this.pb=p.pb+h.pb,this.xb=p.xb+h.xb+2220446049250313e-31*Math.abs(this.pb)},T.prototype.sub=function(p){if(typeof p=="number"){var h=this.pb-p;p=this.xb+2220446049250313e-31*Math.abs(h)}else h=this.pb-p.pb,p=this.xb+p.xb+2220446049250313e-31*Math.abs(h);this.pb=h,this.xb=p},T.prototype.Ag=function(p){var h=this.pb*p.pb;this.xb=this.xb*Math.abs(p.pb)+p.xb*Math.abs(this.pb)+this.xb*p.xb+2220446049250313e-31*Math.abs(h),this.pb=h},T.prototype.No=function(p){var h=this.pb*p;this.xb=this.xb*Math.abs(p)+2220446049250313e-31*Math.abs(h),this.pb=h},T.prototype.Kl=function(p,h){var a=Math.abs(p.pb)*Math.abs(h.pb);this.xb=p.xb*Math.abs(h.pb)+h.xb*Math.abs(p.pb)+p.xb*h.xb+2220446049250313e-31*Math.abs(a),this.pb=a},T.prototype.jm=function(p){var h=Math.abs(p.pb),a=this.pb/p.pb,c=(this.xb+Math.abs(a)*p.xb)/h;p.xb>.01*h&&(c*=1+(1+(p=p.xb/h))*p),this.pb=a,this.xb=c+2220446049250313e-31*Math.abs(a)},T.prototype.sqrt=function(){if(0<=this.pb){var p=Math.sqrt(this.pb),h=this.pb>10*this.xb?.5*this.xb/p:this.pb>this.xb?p-Math.sqrt(this.pb-this.xb):Math.max(p,Math.sqrt(this.pb+this.xb)-p);h+=2220446049250313e-31*Math.abs(p)}else this.pb<-1*this.xb?h=p=NaN:(p=0,h=Math.sqrt(this.xb));this.pb=p,this.xb=h},T.prototype.sin=function(p){var h=Math.sin(p.pb),a=Math.cos(p.pb);this.pb=h,h=Math.abs(h),this.xb=(Math.abs(a)+.5*h*p.xb)*p.xb+2220446049250313e-31*h},T.prototype.cos=function(p){var h=Math.sin(p.pb),a=Math.cos(p.pb);this.pb=a,a=Math.abs(a),this.xb=(Math.abs(h)+.5*a*p.xb)*p.xb+2220446049250313e-31*a},T.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},T.prototype.ps=function(){return this.qg()&&this.xb!=0},T}();m.Wb=j}(ye||(ye={}));var Ai=new ye.h,pn=new ye.h,ms=new ye.h,Ji=new ye.h,tn=new ye.h;(function(m){var j,T;(T=j||(j={}))[T.closedPath=1]="closedPath",T[T.exteriorPath=2]="exteriorPath",T[T.ringAreaValid=4]="ringAreaValid";var p=function(){function h(a,c,d,g,v,b,C){c!==void 0?(this.ib=a,this.ck=c,this.bl=d,this.ii=g,this.ya=b,this.hA=C,this.ew=v):(this.ib=a.ib,this.ck=a.ck,this.bl=a.bl,this.ii=a.ii,this.ya=a.ya,this.hA=a.hA,this.ew=a.ew),this.bH=!0}return h.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},h.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!m.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},h.AP=function(a,c,d,g,v,b,C){return new h(a,c,d,g,v,b,C)},h}();m.zY=p,j=function(){function h(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return h.prototype.Sh=function(a){return this.We!=null?this.We[a]:null},h.prototype.Xg=function(a,c){if(this.We==null){if(c==null)return;this.We=[];for(var d=0,g=this.vb.I();d<g;d++)this.We.push(null)}this.We[a]=c},h.prototype.bp=function(a,c){this.md.S(a,1,c)},h.prototype.ap=function(a,c){this.md.S(a,2,c)},h.prototype.VB=function(a,c){this.md.S(a,6,c)},h.prototype.Sp=function(a){return this.md.T(a,6)},h.prototype.gx=function(a,c){this.md.S(a,7,c)},h.prototype.qv=function(a){return this.md.T(a,0)},h.prototype.OJ=function(a,c){this.cd.S(a,1,c)},h.prototype.SJ=function(a,c){this.cd.S(a,0,c)},h.prototype.JF=function(a){return this.cd.T(a,7)},h.prototype.Zo=function(a,c){this.cd.S(a,3,c)},h.prototype.$o=function(a,c){this.cd.S(a,4,c)},h.prototype.uU=function(a){this.cd==null&&(this.cd=new m.$c(8));var c=this.cd.Ce();return this.cd.S(c,2,a),this.cd.S(c,5,0),this.cd.S(c,6,0),this.cd.S(c,7,c),c},h.prototype.OQ=function(a){this.cd.jd(a)},h.prototype.wU=function(a){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0));var c=this.md.Ce();return this.md.S(c,0,c),this.md.S(c,3,0),this.md.S(c,6,0),this.gx(c,a),c>=this.Oi.size&&(a=16>c?16:m.O.truncate(3*c/2),this.Oi.resize(a),this.vo.resize(a)),this.Oi.set(c,0),this.vo.set(c,0),c},h.prototype.sF=function(a){this.md.jd(a)},h.prototype.Vy=function(a){this.td.jd(a),this.fd--},h.prototype.oI=function(a){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0));var c=this.td.Ce(),d=0<=a?a:c;if(this.td.S(c,0,d),0>a){if(d>=this.vb.I()){if(a=16>d?16:m.O.truncate(3*d/2),this.vb.resize(a),this.We!=null)for(var g=0;g<a;g++)this.We.push(null);this.Sg!=null&&this.Sg.resize(a),this.it=this.vb.ub(0)}this.vb.Cb(d,-1e38,-1e38),this.We!=null&&(this.We[d]=null),this.Sg!=null&&this.Sg.write(d,1)}return this.td.S(c,4,2*d),this.fd++,c},h.prototype.wj=function(a,c,d){var g=c!=-1?this.Ma(c):this.rj(a),v=g!=-1?this.U(g):-1,b=this.oI(d==null?this.fd:-1),C=this.Ua(b);return d!=null&&this.vb.Ht(C,d),this.aj(b,a),this.Bc(b,v),this.Cc(b,g),v!=-1&&this.Cc(v,b),g!=-1&&this.Bc(g,b),d=this.dc(a),g=this.Xa(a),c==-1&&this.Wg(a,b),c==g&&this.Jf(a,b),d&&v==-1&&(this.Bc(b,b),this.Cc(b,b)),this.Vj(a,this.Ja(a)+1),a=this.Qf(a),this.Tj(a,this.I(a)+1),b},h.prototype.nm=function(){return this.jo==null&&(this.jo=new m.Sa(this.vb.description)),this.jo},h.prototype.Yo=function(a,c){this.cd.S(a,2,-134217729&this.cd.T(a,2)||(c==1?134217728:0))},h.prototype.In=function(a){return 134217728&this.cd.T(a,2)?1:0},h.prototype.hN=function(a){var c=this.Ig(a.getType(),a.description);return a.getType()==1736&&this.Yo(c,a.In()),this.UD(c,a),c},h.prototype.iN=function(a){var c=this.Ig(a.getType(),a.description);return this.VD(c,a),c},h.prototype.XV=function(a,c){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0)),this.md.De(this.md.Hg+a),this.td.De(this.td.Hg+c),this.Oi.Jb(this.Oi.size+a),this.vo.Jb(this.vo.size+a)},h.prototype.UD=function(a,c){this.XV(c.da(),c.I()),this.Il.Fd(c,0,c.I()),this.it=this.vb.ub(0);for(var d=this.We!=null&&c.Ve!=null,g=0,v=c.da();g<v;g++)if(!(2>c.Ja(g))){var b=this.vf(a,-1);this.kn(b,c.dc(g));for(var C=c.Ba(g),M=c.Vc(g);C<M;C++){var O=this.wj(b,-1,null);if(d)if(O=this.Ua(O),1&c.ZF(C))this.Xg(O,null);else{var L=new m.ig;c.bc(C,L,!0),this.Xg(O,L.get())}}}},h.prototype.VD=function(a,c){this.Il.Fd(c,0,c.I()),this.it=this.vb.ub(0),a=this.vf(a,-1);var d=0;for(c=c.I();d<c;d++)this.wj(a,-1,null)},h.prototype.NX=function(a,c,d){var g=this.U(a);if(g==-1)throw m.i.Qa();for(var v=this.nm(),b=this.bd(a),C=0,M=c.ol(d);C<M;C++){var O=this.Ua(a),L=this.U(a),q=c.Vp(d,C);C==0&&(q.To(v),this.Dh(a,v)),q.getType()==322?this.Xg(O,null):this.Xg(O,m.aa.jg(q)),q.Po(v),C<M-1?a=this.wj(b,L,v):this.Dh(g,v)}},h.prototype.MX=function(a,c,d){var g=this.U(a);if(g==-1)throw m.i.Qa();for(var v=this.nm(),b=this.bd(a),C=0,M=c.ol(d);C<M;C++){var O=this.Ua(a),L=this.U(a),q=c.Vp(d,M-C-1);C==0&&(q.Po(v),this.Dh(a,v)),q.getType()==322?this.Xg(O,null):this.Xg(O,m.aa.jg(q)),q.To(v),C<M-1?a=this.wj(b,L,v):this.Dh(g,v)}},h.prototype.IF=function(){var a=new m.l;a.Oa();for(var c=this.Yq(),d=new m.h,g=!0,v=c.next();v!=-1;v=c.next())this.D(v,d),g?a.Zb(d.x,d.y):a.Lk(d.x,d.y),g=!1;return a},h.prototype.Ib=function(a){var c=a.getType();if(m.aa.Hc(c))return this.hN(a);if(c==550)return this.iN(a);throw m.i.Qa()},h.prototype.uN=function(a,c){var d=c.getType();if(m.aa.Hc(d))this.UD(a,c);else{if(d!=550)throw m.i.Qa();this.VD(a,c)}},h.prototype.mN=function(a,c){var d=this.Ig(1736,a.description);if(2>a.Ja(c))return d;this.Il.Fd(a,a.Ba(c),a.Vc(c)),this.it=this.vb.ub(0);var g=this.vf(d,-1);this.kn(g,a.dc(c)||!0);var v=this.We!=null&&a.Ve!=null,b=a.Ba(c);for(c=a.Vc(c);b<c;b++){var C=this.wj(g,-1,null);if(v)if(C=this.Ua(C),1&a.ZF(b))this.Xg(C,null);else{var M=new m.ig;a.bc(b,M,!0),this.Xg(C,M.get())}}return d},h.prototype.Ne=function(a){var c=this.ic(a),d=m.ZK.Ig(c,this.Il.description),g=this.I(a);if(g==0)return d;if(m.aa.Hc(c)){c=this.da(a);for(var v=m.Yc.Oh(c+1),b=m.Yc.Mr(c+1,0),C=d.description,M=0,O=C.Aa;M<O;M++){for(var L=C.kd(M),q=m.ra.Va(L),U=m.Yc.YE(L,g),ee=this.vb.ub(L),Q=0,ge=0,ve=0,fe=this.Ob(a);fe!=-1;fe=this.Rb(fe)){var Ce=0;this.dc(fe)&&(Ce|=1),this.YS(fe)&&(Ce|=4),Ce!=0&&b.zJ(ge,Ce);var Ie=this.Ja(fe);if(v.write(ge++,ve),ve+=Ie,L==0){Ie=ee;var Ne=U,Ve=new m.h;for(Ce=this.Xa(fe);Q<ve;Ce=this.U(Ce),Q++){var Xe=this.Ua(Ce);Ie.tc(2*Xe,Ve),Ne.Tt(2*Q,Ve)}}else for(Ce=this.Xa(fe);Q<ve;Ce=this.U(Ce),Q++)for(Xe=this.Ua(Ce),Ne=0;Ne<q;Ne++)Ve=ee.eg(Xe*q+Ne),U.pr(Q*q+Ne,Ve)}d.hn(L,U),v.write(c,g)}d.PJ(b),d.QJ(v),d.Pc(16777215)}else if(c==550){for(C=d.description,d.resize(g),M=0,O=C.Aa;M<O;M++){for(L=C.kd(M),q=m.ra.Va(L),U=d.ub(L),ee=this.vb.ub(L),Q=0,fe=this.Ob(a),Ie=this.Ja(fe),Ce=this.Xa(fe);Q<Ie;Ce=this.U(Ce),Q++)for(Xe=this.Ua(Ce),Ne=0;Ne<q;Ne++)Ve=ee.eg(Xe*q+Ne),U.pr(Q*q+Ne,Ve);d.hn(L,U)}d.Pc(16777215)}return d},h.prototype.BB=function(a){for(var c=this.Ob(a);c!=-1;c=this.Zq(c));c=this.PR(a);var d=this.ue(a);c!=-1?this.OJ(c,d):this.ld=d,d!=-1?this.SJ(d,c):this.qw=c,this.OQ(a)},h.prototype.Ig=function(a,c){return c===void 0?this.$E(a,m.ee.og()):this.$E(a,c)},h.prototype.$E=function(a,c){return a=this.uU(a),this.vb==null?this.vb=this.Il=new m.de(c):this.Il.Jl(c),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=a:(this.SJ(a,this.qw),this.OJ(this.qw,a)),this.qw=a},h.prototype.ue=function(a){return this.cd.T(a,1)},h.prototype.PR=function(a){return this.cd.T(a,0)},h.prototype.ic=function(a){return 2147483647&this.cd.T(a,2)},h.prototype.HJ=function(a,c,d){c=this.wk[c],(a=this.JF(a))>=c.size&&c.resize(Math.max(m.O.truncate(1.25*a),16),-1),c.write(a,d)},h.prototype.KF=function(a,c){return(a=this.JF(a))<(c=this.wk[c]).size?c.read(a):-1},h.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var a=0;a<this.wk.length;a++)if(this.wk[a]==null)return this.wk[a]=m.Yc.Oh(0),a;return this.wk.push(m.Yc.Oh(0)),this.wk.length-1},h.prototype.xW=function(a){this.wk[a]=null},h.prototype.Ob=function(a){return this.cd.T(a,3)},h.prototype.kv=function(a){return this.cd.T(a,4)},h.prototype.I=function(a){return this.cd.T(a,5)},h.prototype.da=function(a){return this.cd.T(a,6)},h.prototype.Gp=function(a,c,d){for(var g=0,v=this.ld;v!=-1;v=this.ue(v)){var b=this.ic(v);if(m.aa.Hc(b)&&(!d||b==1736)){b=this.ic(v)==1736;for(var C=this.Ob(v);C!=-1;){for(var M=0,O=this.Xa(C);M<m.O.truncate(this.Ja(C)/2);){var L=this.U(O);if(L==-1)break;var q=this.Ua(O),U=this.Sh(q);U!=null?q=U.Qb():(U=this.Ua(L),q=this.vb.yr(q,U)),q<=a?(q==0?g==0&&(g=-1):g=1,L!=this.rj(C)&&(this.lC(L,O),this.pd(L,!0))):O=this.U(O),M++}for(M=this.Xa(C),O=this.dc(C)?M:this.rj(C);0<this.Ja(C);){if((L=this.Ma(O))==-1){this.pd(O,!0),g==0&&(g=-1);break}var ee=this.Ua(L);if((U=this.Sh(ee))!=null?q=U.Qb():(q=this.Ua(O),q=this.vb.yr(q,ee)),q<=a)q==0?g==0&&(g=-1):g=1,this.lC(L,O),this.pd(L,!1),M==L&&(M=this.Xa(C));else if((O=this.Ma(O))==M)break}O=this.Ja(C),c&&(b?3>O:2>O)?(C=this.Zq(C),g=0<O?1:g==0?-1:g):C=this.Rb(C)}}}return g},h.prototype.lC=function(a,c){var d=this.Ua(a),g=this.Ua(c);if(this.Sg!=null&&(d=this.Sg.read(d),this.Sg.write(g,d)),this.bi!=null){for(g=0,d=this.bi.length;g<d;g++)if(this.bi[g]!=null){var v=this.Pa(a,g);v!=-1&&this.Ra(c,g,v)}}},h.prototype.Ul=function(a,c,d){var g=0,v=this.U(a);if(v==-1)throw m.i.Qa();for(var b=this.Ua(a),C=this.Ua(v),M=this.Sh(b),O=M==null?this.vb.yr(b,C):M.Qb(),L=0;L<d;L++){var q=c[L];if(0<q&&1>q){var U=q;M!=null&&(U=0<O?M.Ux(q)/O:0),this.vb.kD(b,C,U,this.nm());var ee=this.wj(this.bd(a),v,this.nm());if(g++,M!=null){var Q=M.dl(0,q);U=this.Ua(this.Ma(ee)),this.Xg(U,Q),this.mf(ee,Q.wc()),L!=d-1&&c[L+1]!=1||(q=M.dl(q,1),this.Xg(U,q))}}}return g},h.prototype.LX=function(a,c,d){var g=0,v=this.U(a);if(v==-1)throw m.i.fa("internal error");var b=this.Ua(a),C=this.Ua(v),M=this.Sh(b),O=M==null?this.vb.yr(b,C):M.Qb(),L=0;a=this.bd(a);for(var q=0;q<d;q++){var U=c[q];if(L<U&&1>U){var ee=U;if(M!=null&&(ee=0<O?M.Ux(U)/O:0),this.vb.kD(b,C,ee,this.nm()),ee=this.yS(a,v,this.nm()),g++,M!=null){L=M.dl(L,U);var Q=this.Ua(this.Ma(ee));this.Xg(Q,L),this.Cb(ee,L.pa,L.la),q!=d-1&&c[q+1]!=1||(L=M.dl(U,1),ee=this.Ua(ee),this.Xg(ee,L))}}L=U}return g},h.prototype.yS=function(a,c,d){var g=c!=-1?this.Ma(c):this.rj(a),v=g!=-1?this.U(g):-1,b=this.oI(d==null?this.fd:-1),C=this.Ua(b);return d!=null&&this.vb.Ht(C,d),this.aj(b,a),this.Bc(b,v),this.Cc(b,g),v!=-1&&this.Cc(v,b),g!=-1&&this.Bc(g,b),d=this.dc(a),g=this.Xa(a),c==-1&&this.Wg(a,b),c==g&&(d&&g!=-1||this.Jf(a,b)),d&&v==-1&&(this.Bc(b,b),this.Cc(b,b)),this.Vj(a,this.Ja(a)+1),a=this.Qf(a),this.Tj(a,this.I(a)+1),b},h.prototype.uE=function(a,c,d){var g=this.Ua(c),v=this.Ua(d);if(0>g||v>this.fd-1)throw m.i.N("invalid call");if(g>v&&!this.dc(a))throw m.i.N("cannot iterate across an open path");for(a=0;c!=d;c=this.U(c))g=this.Ua(c),(v=this.Sh(g))!=null?a+=v.Qb():(v=this.Ua(this.U(c)),a+=this.vb.yr(g,v));return a},h.prototype.Dh=function(a,c){var d=this.Ua(a);this.vb.Ht(d,c),(d=this.Sh(d))!=null&&d.setStart(c),(a=this.Ma(a))!=-1&&(a=this.Ua(a),this.Sh(a)!=null&&d.setEnd(c))},h.prototype.Vi=function(a,c){a=this.Ua(a),this.vb.ve(a,c)},h.prototype.mf=function(a,c){this.Cb(a,c.x,c.y)},h.prototype.Cb=function(a,c,d){var g=this.Ua(a);this.vb.Cb(g,c,d),(g=this.Sh(g))!=null&&g.ZB(c,d),(a=this.Ma(a))!=-1&&(a=this.Ua(a),this.Sh(a)!=null&&g.Ql(c,d))},h.prototype.D=function(a,c){this.vb.D(this.td.T(a,0),c)},h.prototype.Gc=function(a,c){this.vb.za[0].tc(2*this.td.T(a,0),c)},h.prototype.Na=function(a){var c=new m.h;return this.vb.D(this.td.T(a,0),c),c},h.prototype.dG=function(a,c){this.it.tc(2*a,c)},h.prototype.Uc=function(a,c,d){return this.vb.Uc(a,this.Ua(c),d)},h.prototype.setAttribute=function(a,c,d,g){this.vb.setAttribute(a,this.Ua(c),d,g)},h.prototype.Ua=function(a){return this.td.T(a,0)},h.prototype.ih=function(){var a=new m.h;return this.D(void 0,a),a.y},h.prototype.fq=function(a,c){a=this.Ua(a),c=this.Ua(c);var d=this.vb.za[0].o;return d[2*a]===d[2*c]&&d[2*a+1]===d[2*c+1]},h.prototype.Dv=function(a,c){a=this.Ua(a);var d=this.vb.za[0].o;return d[2*a]===c.x&&d[2*a+1]===c.y},h.prototype.vX=function(a,c){if(1>c&&(c=1),this.Sg==null){if(c==1)return;this.Sg=m.Yc.Dn(this.vb.I(),1)}(a=this.Ua(a))>=this.Sg.size&&this.Sg.resize(a+1,1),this.Sg.write(a,c)},h.prototype.cG=function(a){return a=this.Ua(a),this.Sg==null||a>=this.Sg.size?1:this.Sg.read(a)},h.prototype.Ra=function(a,c,d){c=this.bi[c],a=this.Ua(a),c.size<this.vb.I()&&c.resize(this.vb.I(),-1),c.write(a,d)},h.prototype.Pa=function(a,c){return(a=this.Ua(a))<(c=this.bi[c]).size?c.read(a):-1},h.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var a=0;a<this.bi.length;a++)if(this.bi[a]==null)return this.bi[a]=m.Yc.Oh(0,-1),a;return this.bi.push(m.Yc.Oh(0,-1)),this.bi.length-1},h.prototype.Td=function(a){this.bi[a]=null},h.prototype.bc=function(a){return this.We!=null?(a=this.Ua(a),this.We[a]):null},h.prototype.ed=function(a,c){var d=this.td.T(a,2);if(d==-1)return!1;if(this.fA){var g=new m.Sa;this.Vi(a,g),c.setStart(g),this.Vi(d,g),c.setEnd(g)}else this.vb.Gc(this.td.T(a,0),Ai),c.em(0,Ai),this.vb.Gc(this.td.T(d,0),Ai),c.em(1,Ai);return!0},h.prototype.mW=function(a,c,d){if(this.fA){var g=new m.Sa;this.Vi(a,g),d.setStart(g),this.Vi(c,g),d.setEnd(g)}else this.vb.Gc(a,Ai),d.em(0,Ai),this.vb.Gc(c,Ai),d.em(1,Ai)},h.prototype.vf=function(a,c){if(c!=-1){if(a!=this.Qf(c))throw m.i.Qa();var d=this.cs(c)}else d=this.kv(a);var g=this.wU(a);return c!=-1&&this.bp(c,g),this.ap(g,c),this.bp(g,d),d!=-1?this.ap(d,g):this.Zo(a,g),c==-1&&this.$o(a,g),this.Rl(a,this.da(a)+1),g},h.prototype.nG=function(a,c,d,g){a=this.vf(a,-1);for(var v=0,b=c,C=!1;b==d&&(C=!0),this.aj(b,a),v++,(b=this.U(b))!=c;);return this.kn(a,!0),this.Vj(a,v),C&&(c=d),this.Jf(a,c),this.Wg(a,this.Ma(c)),this.cp(a,!1),g!=null&&(g[0]=C),a},h.prototype.Zq=function(a){var c=this.cs(a),d=this.Rb(a),g=this.Qf(a);return c!=-1?this.ap(c,d):this.Zo(g,d),d!=-1?this.bp(d,c):this.$o(g,c),this.AO(a),this.Rl(g,this.da(g)-1),this.sF(a),d},h.prototype.AO=function(a){var c=this.Xa(a);if(c!=-1){for(var d=0,g=this.Ja(a);d<g;d++){var v=c;c=this.U(c),this.Vy(v)}c=this.Qf(a),this.Tj(c,this.I(c)-this.Ja(a))}this.Vj(a,0)},h.prototype.Rb=function(a){return this.md.T(a,2)},h.prototype.cs=function(a){return this.md.T(a,1)},h.prototype.Ja=function(a){return this.md.T(a,3)},h.prototype.dc=function(a){return!!(1&this.Sp(a))},h.prototype.kn=function(a,c){if(this.dc(a)!=c){if(0<this.Ja(a)){var d=this.Xa(a),g=this.rj(a);c?(this.Bc(g,d),this.Cc(d,g),d=this.Ua(g)):(this.Bc(g,-1),this.Cc(d,-1),d=this.Ua(g)),this.Xg(d,null)}this.VB(a,(1|this.Sp(a))-1|(c?1:0))}},h.prototype.Qf=function(a){return this.md.T(a,7)},h.prototype.YS=function(a){return!!(2&this.Sp(a))},h.prototype.PB=function(a,c){this.VB(a,(2|this.Sp(a))-2|(c?2:0))},h.prototype.wz=function(a){if(this.cT(a))return this.Oi.get(this.qv(a));var c=new m.yb,d=this.Xa(a);if(d==-1)return 0;var g=new m.h;this.D(d,g);for(var v=0,b=0,C=this.Ja(a);b<C;b++,d=this.U(d)){var M=this.bc(d);if(M==null){if(!this.ed(d,c))continue;M=c}v+=M.Tx(g.x,g.y)}return this.cp(a,!0),this.Oi.set(this.qv(a),v),v},h.prototype.gr=function(a,c,d){c=this.Ck[c],a=this.qv(a),c.size<this.Oi.size&&c.resize(this.Oi.size,-1),c.write(a,d)},h.prototype.sj=function(a,c){return(a=this.qv(a))<(c=this.Ck[c]).size?c.read(a):-1},h.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var a=0;a<this.Ck.length;a++)if(this.Ck[a]==null)return this.Ck[a]=m.Yc.Oh(0),a;return this.Ck.push(m.Yc.Oh(0)),this.Ck.length-1},h.prototype.CB=function(a){this.Ck[a]=null},h.prototype.ZT=function(a,c,d){if(d==-1)throw m.i.N();if(c!=d){var g=this.Rb(d),v=this.cs(d),b=this.Qf(d);v==-1?this.Zo(b,g):this.ap(v,g),g==-1?this.$o(b,v):this.bp(g,v),this.Tj(b,this.I(b)-this.Ja(d)),this.Rl(b,this.da(b)-1),v=c==-1?this.kv(a):this.cs(c),this.bp(d,v),this.ap(d,c),c==-1?this.$o(a,d):this.bp(c,d),v==-1?this.Zo(a,d):this.ap(v,d),this.Tj(a,this.I(a)+this.Ja(d)),this.Rl(a,this.da(a)+1),this.gx(d,a)}},h.prototype.ij=function(a,c){this.vb.ve(this.Ua(c),this.nm()),this.wj(a,-1,this.nm())},h.prototype.pd=function(a,c){var d=this.bd(a),g=this.Ma(a),v=this.U(a);g!=-1&&this.Bc(g,v);var b=this.Ja(d);if(a==this.Xa(d)&&this.Jf(d,1<b?v:-1),v!=-1&&this.Cc(v,g),a==this.rj(d)&&this.Wg(d,1<b?g:-1),g!=-1&&v!=-1){g=this.Ua(g);var C=this.Ua(v);c?(c=this.Sh(g))!=null&&(g=new m.h,this.vb.D(C,g),c.Qc(g)):(C=this.Ua(a),c=this.Sh(C),this.Xg(g,c),c!=null&&(g=this.vb.Na(g),c.Dc(g)))}return this.Vj(d,b-1),d=this.Qf(d),this.Tj(d,this.I(d)-1),this.Vy(a),v},h.prototype.Xa=function(a){return this.md.T(a,4)},h.prototype.rj=function(a){return this.md.T(a,5)},h.prototype.U=function(a){return this.td.T(a,2)},h.prototype.Ma=function(a){return this.td.T(a,1)},h.prototype.bd=function(a){return this.td.T(a,3)},h.prototype.fc=function(a,c){return this.wj(a,-1,c)},h.prototype.Yq=function(a){if(a===void 0)return this.Yq(!1);if(a instanceof p)return new p(a);var c,d=-1,g=-1,v=-1,b=0,C=!1;for(c=this.ld;c!=-1;c=this.ue(c))if(!a||m.aa.Hc(this.ic(c))){for(d=this.Ob(c);d!=-1;d=this.Rb(d))if(v=g=this.Xa(d),b=0,g!=-1){C=!0;break}if(C)break}return p.AP(this,c,d,g,v,b,a)},h.prototype.Oc=function(a){if(this.Il.Oc(a),this.We!=null)for(var c=0,d=this.We.length;c<d;c++)this.We[c]!=null&&this.We[c].Oc(a)},h.prototype.jr=function(a,c,d,g){g?this.NX(a,c,d):this.MX(a,c,d)},h.prototype.Cc=function(a,c){this.td.S(a,1,c)},h.prototype.Bc=function(a,c){this.td.S(a,2,c)},h.prototype.aj=function(a,c){this.td.S(a,3,c)},h.prototype.Vj=function(a,c){this.md.S(a,3,c)},h.prototype.Jf=function(a,c){this.md.S(a,4,c)},h.prototype.Wg=function(a,c){this.md.S(a,5,c)},h.prototype.Rl=function(a,c){this.cd.S(a,6,c)},h.prototype.Tj=function(a,c){this.cd.S(a,5,c)},h.prototype.pJ=function(a){var c=a;do{var d=this.U(c);this.Bc(c,this.Ma(c)),this.Cc(c,d),c=d}while(c!=a)},h.prototype.bC=function(a){this.fd=a},h.prototype.$q=function(a){var c=this.cs(a),d=this.Rb(a),g=this.Qf(a);c!=-1?this.ap(c,d):this.Zo(g,d),d!=-1?this.bp(d,c):this.$o(g,c),this.Jf(a,-1),this.Wg(a,-1),this.sF(a)},h.prototype.mi=function(a,c){var d=this.Ma(a),g=this.U(a);if(d!=-1&&this.Bc(d,g),g!=-1&&this.Cc(g,d),d!=-1&&g!=-1)if(d=this.Ua(d),g=this.Ua(g),c){if((c=this.Sh(d))!=null){var v=new m.h;this.vb.D(g,v),c.Qc(v)}}else c=this.Ua(a),c=this.Sh(c),this.Xg(d,c),c!=null&&(v=new m.h,this.vb.D(d,v),c.Dc(v));this.Vy(a)},h.prototype.cT=function(a){return!!(4&this.Sp(a))},h.prototype.cp=function(a,c){this.VB(a,(4|this.Sp(a))-4|(c?4:0))},h.prototype.nx=function(a,c){var d=this.td.o;this.vb.mc();var g=this.vb.za[0].o;a.Vd(0,c,function(v,b){var C=d[5*v];v=d[5*b],b=g[2*C],C=g[2*C+1];var M=g[2*v];return C<(v=g[2*v+1])?-1:C>v?1:b<M?-1:b>M?1:0})},h.prototype.jS=function(){for(var a=this.ld;a!=-1;a=this.ue(a))if(!m.aa.Hc(this.ic(a)))return!0;return!1},h.prototype.hC=function(a,c){for(var d=this.Ob(a),g=this.Ob(c),v=this.kv(a),b=this.kv(c),C=this.Ob(a);C!=-1;C=this.Rb(C))this.gx(C,c);for(C=this.Ob(c);C!=-1;C=this.Rb(C))this.gx(C,a);this.Zo(a,g),this.Zo(c,d),this.$o(a,b),this.$o(c,v),d=this.I(a),g=this.da(a),v=this.da(c),this.Tj(a,this.I(c)),this.Tj(c,d),this.Rl(a,v),this.Rl(c,g),d=this.cd.T(a,2),this.cd.S(a,2,this.cd.T(c,2)),this.cd.S(c,2,d)},h}(),m.gd=j})(ye||(ye={})),function(m){var j=function(T){function p(h,a,c,d){var g=T.call(this)||this;return g.$=new m.l,h===void 0?g.UE():typeof h=="number"?g.VO(h,a,c,d):h instanceof m.Sa?a!==void 0?g.Qu(h,a,c):g.WO(h):h instanceof m.ra?a!==void 0?g.YO(h,a):g.XO(h):h instanceof m.l?g.UO(h):g.UE(),g}return ri(p,T),p.prototype.Qu=function(h,a,c){this.description=m.ee.og(),this.$.Oa(),h.B()||this.tu(h,a,c)},p.prototype.UO=function(h){this.description=m.ee.og(),this.$.K(h),this.$.normalize()},p.prototype.XO=function(h){if(h==null)throw m.i.N();this.description=h,this.$.Oa()},p.prototype.YO=function(h,a){if(h==null)throw m.i.N();this.description=h,this.$.K(a),this.$.normalize()},p.prototype.UE=function(){this.description=m.ee.og(),this.$.Oa()},p.prototype.WO=function(h){this.description=m.ee.og(),this.$.Oa(),h.B()||this.tu(h)},p.prototype.VO=function(h,a,c,d){this.description=m.ee.og(),this.K(h,a,c,d)},p.prototype.K=function(h,a,c,d){if(this.vc(),typeof h=="number")this.$.K(h,a,c,d);else for(this.Oa(),a=0,c=h.length;a<c;a++)this.Zb(h[a])},p.prototype.Xo=function(h){if(this.vc(),!h.fT())throw m.i.N();this.$.K(h)},p.prototype.Oa=function(){this.vc(),this.$.Oa()},p.prototype.B=function(){return this.$.B()},p.prototype.R=function(){return this.$.R()},p.prototype.ca=function(){return this.$.ca()},p.prototype.gk=function(){return this.$.gk()},p.prototype.Jp=function(){return this.$.Jp()},p.prototype.Ip=function(){return this.$.sf()},p.prototype.Zb=function(h){if(h instanceof m.h)this.vc(),this.$.Zb(h);else if(h instanceof m.l)this.vc(),this.$.Zb(h);else if(h instanceof m.Sa){if(this.vc(),!h.Ac()){var a=h.description;if(this.description!=a&&this.Jl(a),this.B())this.tu(h);else{this.$.Zb(h.D());for(var c=1,d=a.Aa;c<d;c++)for(var g=a.Ed(c),v=m.ra.Va(g),b=0;b<v;b++){var C=h.Uc(g,b),M=this.Tg(g,b);M.Zb(C),this.setInterval(g,b,M)}}}}else if(h instanceof p&&!h.B())for((a=h.description)!=this.description&&this.Jl(a),this.$.Zb(h.$),c=1,d=a.Aa;c<d;c++)for(g=a.kd(c),v=m.ra.Va(g),b=0;b<v;b++)C=h.Tg(g,b),(M=this.Tg(g,b)).Zb(C),this.setInterval(g,b,M)},p.prototype.tu=function(h,a,c){if(a!==void 0){this.$.K(h.D(),a,c),c=1;for(var d=(a=h.description).Aa;c<d;c++)for(var g=a.Ed(c),v=m.ra.Va(g),b=0;b<v;b++){var C=h.Uc(g,b);this.setInterval(g,b,C,C)}}else for(this.$.K(h.ka[0],h.ka[1]),c=1,d=(a=h.description).Aa;c<d;c++)for(g=a.Ed(c),v=m.ra.Va(g),b=0;b<v;b++)C=h.Uc(g,b),this.setInterval(g,b,C,C)},p.prototype.setInterval=function(h,a,c,d){if(c=typeof c=="number"?new m.Nc(c,d):c,this.vc(),h==0)if(a==0)this.$.v=c.oa,this.$.C=c.va;else{if(a!=1)throw m.i.ce();this.$.G=c.oa,this.$.H=c.va}else this.vD(0,h,a,c.oa),this.vD(1,h,a,c.va)},p.prototype.W=function(h,a){this.vc(),this.$.W(h,a)},p.prototype.Oc=function(h){if(h instanceof m.Dd)this.vc(),h.mC(this.$);else if(this.vc(),!this.$.B()){var a=new m.OK;this.Qo(a),a.XS()?a.Oa():h.mC(a)}},p.prototype.copyTo=function(h){if(h.getType()!=this.getType())throw m.i.N();if(h.vc(),h.description=this.description,h.$.K(this.$),h.ka=null,this.ka!=null){h.ou();for(var a=0;a<2*(this.description.Ae.length-2);a++)h.ka[a]=this.ka[a]}},p.prototype.Ia=function(){return new p(this.description)},p.prototype.Ke=function(){return this.$.wF()},p.prototype.Qb=function(){return this.$.yR()},p.prototype.getType=function(){return 197},p.prototype.Db=function(){return 2},p.prototype.bn=function(h){this.copyTo(h)},p.prototype.A=function(h){h.v=this.$.v,h.G=this.$.G,h.C=this.$.C,h.H=this.$.H},p.prototype.Qo=function(h){h.v=this.$.v,h.G=this.$.G,h.C=this.$.C,h.H=this.$.H,h.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},p.prototype.Tg=function(h,a){var c=new m.Nc;return c.K(this.Od(0,h,a),this.Od(1,h,a)),c},p.prototype.Hf=function(h,a){a.Nf(this.description);var c=this.description.Aa-1;switch(h){case 0:for(h=0;h<c;h++)for(var d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(0,d,v));a.Cb(this.$.v,this.$.G);break;case 1:for(h=0;h<c;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(1,d,v));a.Cb(this.$.v,this.$.H);break;case 2:for(h=0;h<c;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(0,d,v));a.Cb(this.$.C,this.$.H);break;case 3:for(h=0;h<c;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(1,d,v));a.Cb(this.$.C,this.$.G);break;default:throw m.i.ce()}},p.prototype.mB=function(h,a){h=this.$.mB(h),a.ma(h.x,h.y)},p.prototype.kR=function(h,a){return a*(h.Oq-2)},p.prototype.xF=function(h,a,c){if(this.$.B())throw m.i.fa("empty geometry");if(a==0)return h!=0?c!=0?this.$.H:this.$.C:c!=0?this.$.G:this.$.v;if(c>=m.ra.Va(a))throw m.i.N();var d=this.description.Pf(a);return this.ou(),0<=d?this.ka[this.kR(this.description,h)+this.description.LR(d)-2+c]:m.ra.se(a)},p.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var h=p.Gg(this.description,0),a=p.Gg(this.description,1),c=0,d=1,g=this.description.Aa;d<g;d++){var v=this.description.kd(d),b=m.ra.Va(v);v=m.ra.se(v);for(var C=0;C<b;C++)this.ka[h+c]=v,this.ka[a+c]=v,c++}}},p.prototype.sn=function(h){if(this.ka!=null)if(2<h.Ae.length){for(var a=m.ee.Iw(h,this.description),c=[],d=p.Gg(this.description,0),g=p.Gg(this.description,1),v=p.Gg(h,0),b=p.Gg(h,1),C=0,M=1,O=h.Aa;M<O;M++){var L=h.kd(M),q=m.ra.Va(L);if(a[M]==-1){var U=m.ra.se(L);for(L=0;L<q;L++)c[v+C]=U,c[b+C]=U,C++}else for(U=this.description.$j(a[M])-2,L=0;L<q;L++)c[v+C]=this.ka[d+U],c[b+C]=this.ka[g+U],C++,U++}this.ka=c}else this.ka=null;this.description=h},p.prototype.Od=function(h,a,c){if(this.$.B())throw m.i.fa("This operation was performed on an Empty Geometry.");if(a==0)return h!=0?c!=0?this.$.H:this.$.C:c!=0?this.$.G:this.$.v;if(c>=m.ra.Va(a))throw m.i.ce();var d=this.description.Pf(a);return 0<=d?(this.ou(),this.ka[p.Gg(this.description,h)+this.description.$j(d)-2+c]):m.ra.se(a)},p.prototype.vD=function(h,a,c,d){if(this.vc(),a==0)h!=0?c!=0?this.$.H=d:this.$.C=d:c!=0?this.$.G=d:this.$.v=d;else{if(c>=m.ra.Va(a))throw m.i.ce();if(!this.hasAttribute(a)){if(m.ra.DG(a,d))return;this.re(a)}a=this.description.Pf(a),this.ou(),this.ka[p.Gg(this.description,h)+this.description.$j(a)-2+c]=d}},p.Gg=function(h,a){return a*(h.Ae.length-2)},p.prototype.Ea=function(h){this.vc();var a=new m.l;return h.A(a),this.$.Ea(a)},p.prototype.isIntersecting=function(h){return h instanceof m.l?this.$.isIntersecting(h):this.$.isIntersecting(h.$)},p.prototype.Ju=function(h,a){this.vc(),h.B()?this.Oa():a!==void 0?this.tu(h,a):this.$.Ju(h.Lg(),h.ih())},p.prototype.offset=function(h,a){this.vc(),this.$.offset(h,a)},p.prototype.normalize=function(){this.vc(),this.$.normalize()},p.prototype.sf=function(h){if(h===void 0){if(h=new m.Sa(this.description),this.B())return h;for(a=this.description.Aa,c=1;c<a;c++)for(d=this.description.Ed(c),g=m.ra.Va(d),v=0;v<g;v++)b=.5*(this.Od(0,d,v)+this.Od(1,d,v)),h.setAttribute(d,v,b);return h.Cb(this.$.gk(),this.$.Jp()),h}if(h.Nf(this.description),this.B())h.Oa();else{for(var a=this.description.Aa,c=1;c<a;c++)for(var d=this.description.kd(c),g=m.ra.Va(d),v=0;v<g;v++){var b=.5*(this.xF(0,d,v)+this.xF(1,d,v));h.setAttribute(d,v,b)}h.Cb(this.$.sf())}},p.prototype.mz=function(){return new m.Sa(this.$.mz())},p.prototype.contains=function(h){return h instanceof m.Sa?!h.B()&&this.$.contains(h.Lg(),h.ih()):this.$.contains(h.$)},p.prototype.dP=function(h){return this.$.contains(h)},p.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof p)||this.description!=h.description)return!1;if(this.B())return!!h.B();if(!this.$.Nb(h.$))return!1;for(var a=0,c=2*(this.description.Ae.length-2);a<c;a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.cc=function(){var h=this.description.cc();if(h=m.O.Th(h,this.$.cc()),!this.B()&&this.ka!=null)for(var a=0,c=2*(this.description.Ae.length-2);a<c;a++)h=m.O.Th(h,this.ka[a]);return h},p.prototype.es=function(){return this.$.v},p.prototype.gs=function(){return this.$.G},p.prototype.ds=function(){return this.$.C},p.prototype.fs=function(){return this.$.H},p.prototype.mg=function(){return m.pi.gm(this,null)},p.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},p}(m.aa);m.Fh=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c){p===void 0?this.Oa():(this.v=p,this.G=h,this.C=a,this.H=c)}return T.construct=function(p,h,a,c){var d=new T;return d.v=p,d.G=h,d.C=a,d.H=c,d},T.prototype.K=function(p,h,a,c){typeof p=="number"?a!==void 0?(this.v=p,this.G=h,this.C=a,this.H=c,this.normalize()):(this.v=p,this.G=h,this.C=p,this.H=h):p instanceof m.h?h!==void 0?(this.v=p.x-.5*h,this.C=this.v+h,this.G=p.y-.5*a,this.H=this.G+a,this.normalize()):(this.v=p.x,this.G=p.y,this.C=p.x,this.H=p.y):p instanceof T?this.K(p.v,p.G,p.C,p.H):p instanceof m.Nc&&(p.B()||h.B()?this.Oa():(this.v=p.oa,this.C=p.va,this.G=h.oa,this.H=h.va))},T.prototype.Zw=function(p,h){if(h!==void 0)if(h==0)this.Oa();else{this.v=p[0].x,this.G=p[0].y,this.C=this.v,this.H=this.G;for(var a=1;a<h;a++){var c=p[a];c.x<this.v?this.v=c.x:c.x>this.C&&(this.C=c.x),c.y<this.G?this.G=c.y:c.y>this.H&&(this.H=c.y)}}else if(p==null||p.length==0)this.Oa();else for(c=p[0],this.K(c.x,c.y),a=1;a<p.length;a++)h=p[a],this.Lk(h.x,h.y)},T.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},T.prototype.B=function(){return isNaN(this.v)},T.prototype.Zb=function(p,h){typeof p=="number"?this.B()?(this.v=p,this.G=h,this.C=p,this.H=h):(this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h)):p instanceof m.h||p instanceof m.Nd?this.Zb(p.x,p.y):p instanceof T&&!p.B()&&(this.Zb(p.v,p.G),this.Zb(p.C,p.H))},T.prototype.Lk=function(p,h){this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h)},T.prototype.W=function(p,h){this.B()||(this.v-=p,this.C+=p,this.G-=h,this.H+=h,(this.v>this.C||this.G>this.H)&&this.Oa())},T.prototype.scale=function(p){0>p&&this.Oa(),this.B()||(this.v*=p,this.C*=p,this.G*=p,this.H*=p)},T.prototype.zoom=function(p,h){this.B()||this.K(this.sf(),p*this.R(),h*this.ca())},T.prototype.isIntersecting=function(p){return!this.B()&&!p.B()&&(this.v<=p.v?this.C>=p.v:p.C>=this.v)&&(this.G<=p.G?this.H>=p.G:p.H>=this.G)},T.prototype.HG=function(p){return(this.v<=p.v?this.C>=p.v:p.C>=this.v)&&(this.G<=p.G?this.H>=p.G:p.H>=this.G)},T.prototype.Ea=function(p){return!this.B()&&!p.B()&&(p.v>this.v&&(this.v=p.v),p.C<this.C&&(this.C=p.C),p.G>this.G&&(this.G=p.G),p.H<this.H&&(this.H=p.H),(p=this.v<=this.C&&this.G<=this.H)||this.Oa(),p)},T.prototype.mB=function(p){switch(p){case 0:return m.h.construct(this.v,this.G);case 1:return m.h.construct(this.v,this.H);case 2:return m.h.construct(this.C,this.H);case 3:return m.h.construct(this.C,this.G);default:throw m.i.ce()}},T.prototype.nB=function(p){if(p==null||4>p.length)throw m.i.N();p[0]!=null?p[0].ma(this.v,this.G):p[0]=m.h.construct(this.v,this.G),p[1]!=null?p[1].ma(this.v,this.H):p[1]=m.h.construct(this.v,this.H),p[2]!=null?p[2].ma(this.C,this.H):p[2]=m.h.construct(this.C,this.H),p[3]!=null?p[3].ma(this.C,this.G):p[3]=m.h.construct(this.C,this.G)},T.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},T.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},T.prototype.gk=function(){return(this.C+this.v)/2},T.prototype.Jp=function(){return(this.H+this.G)/2},T.prototype.R=function(){return this.C-this.v},T.prototype.ca=function(){return this.H-this.G},T.prototype.move=function(p,h){this.B()||(this.v+=p,this.G+=h,this.C+=p,this.H+=h)},T.prototype.Ju=function(p,h){if(h!==void 0)this.move(p-this.gk(),h-this.Jp());else if(p instanceof m.h)this.Ju(p.x,p.y);else{if(!(p instanceof m.Sa))throw m.i.N();h=(this.C-this.v)/2;var a=(this.H-this.G)/2;this.v=p.Lg()-h,this.C=p.Lg()+h,this.G=p.ih()-a,this.H=p.ih()+a}},T.prototype.offset=function(p,h){this.v+=p,this.C+=p,this.G+=h,this.H+=h},T.prototype.normalize=function(){if(!this.B()){var p=Math.min(this.v,this.C),h=Math.max(this.v,this.C);this.v=p,this.C=h,p=Math.min(this.G,this.H),h=Math.max(this.G,this.H),this.G=p,this.H=h}},T.prototype.dn=function(p){p.ma(this.v,this.G)},T.prototype.$I=function(p){p.ma(this.C,this.G)},T.prototype.cJ=function(p){p.ma(this.v,this.H)},T.prototype.en=function(p){p.ma(this.C,this.H)},T.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},T.prototype.sf=function(){return m.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},T.prototype.mz=function(){return m.h.construct(this.v,this.G)},T.prototype.contains=function(p,h){if(h!==void 0)return p>=this.v&&p<=this.C&&h>=this.G&&h<=this.H;if(p instanceof m.Sa)return this.contains(p.Lg(),p.ih());if(p instanceof m.h)return this.contains(p.x,p.y);if(p instanceof T)return p.v>=this.v&&p.C<=this.C&&p.G>=this.G&&p.H<=this.H;throw m.i.N()},T.prototype.hm=function(p,h){if(h!==void 0)return p>this.v&&p<this.C&&h>this.G&&h<this.H;if(p instanceof m.h)return this.hm(p.x,p.y);if(p instanceof T)return p.v>this.v&&p.C<this.C&&p.G>this.G&&p.H<this.H;throw m.i.N()},T.prototype.Nb=function(p){return p==this||p instanceof T&&(!(!this.B()||!p.B())||this.v==p.v&&this.G==p.G&&this.C==p.C&&this.H==p.H)},T.prototype.cc=function(){var p=this.v;p=m.O.truncate(p^p>>>32);var h=m.O.Th(p);return p=this.C,p=m.O.truncate(p^p>>>32),h=m.O.Th(p,h),p=this.G,p=m.O.truncate(p^p>>>32),h=m.O.Th(p,h),p=this.H,p=m.O.truncate(p^p>>>32),m.O.Th(p,h)},T.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},T.prototype.zy=function(p,h){var a=this.Zj(p),c=this.Zj(h);if(a&c)return 0;if(!(a|c))return 4;var d=(a!=0?1:0)|(c!=0?2:0);do{var g=h.x-p.x,v=h.y-p.y;if(g>v?a&T.YC?(a&T.ju?(p.y+=v*(this.v-p.x)/g,p.x=this.v):(p.y+=v*(this.C-p.x)/g,p.x=this.C),a=this.Zj(p)):c&T.YC?(c&T.ju?(h.y+=v*(this.v-h.x)/g,h.x=this.v):(h.y+=v*(this.C-h.x)/g,h.x=this.C),c=this.Zj(h)):a!=0?(a&T.ku?(p.x+=g*(this.G-p.y)/v,p.y=this.G):(p.x+=g*(this.H-p.y)/v,p.y=this.H),a=this.Zj(p)):(c&T.ku?(h.x+=g*(this.G-h.y)/v,h.y=this.G):(h.x+=g*(this.H-h.y)/v,h.y=this.H),c=this.Zj(h)):a&T.ZC?(a&T.ku?(p.x+=g*(this.G-p.y)/v,p.y=this.G):(p.x+=g*(this.H-p.y)/v,p.y=this.H),a=this.Zj(p)):c&T.ZC?(c&T.ku?(h.x+=g*(this.G-h.y)/v,h.y=this.G):(h.x+=g*(this.H-h.y)/v,h.y=this.H),c=this.Zj(h)):a!=0?(a&T.ju?(p.y+=v*(this.v-p.x)/g,p.x=this.v):(p.y+=v*(this.C-p.x)/g,p.x=this.C),a=this.Zj(p)):(c&T.ju?(h.y+=v*(this.v-h.x)/g,h.x=this.v):(h.y+=v*(this.C-h.x)/g,h.x=this.C),c=this.Zj(h)),a&c)return 0}while(a|c);return d},T.prototype.Zj=function(p){return(p.x<this.v?1:0)|(p.x>this.C?1:0)<<1|(p.y<this.G?1:0)<<2|(p.y>this.H?1:0)<<3},T.prototype.Bi=function(p){return!this.B()&&(this.R()<=p||this.ca()<=p)},T.prototype.tb=function(p){return p instanceof m.h?Math.sqrt(this.iK(p)):Math.sqrt(this.px(p))},T.prototype.px=function(p){var h=0,a=0,c=this.v-p.C;return c>h&&(h=c),(c=this.G-p.H)>a&&(a=c),(c=p.v-this.C)>h&&(h=c),(c=p.G-this.H)>a&&(a=c),h*h+a*a},T.prototype.iK=function(p){var h=0,a=0,c=this.v-p.x;return c>h&&(h=c),(c=this.G-p.y)>a&&(a=c),(c=p.x-this.C)>h&&(h=c),(c=p.y-this.H)>a&&(a=c),h*h+a*a},T.prototype.cn=function(p){this.B()?p.Oa():p.K(this.v,this.C)},T.ju=1,T.ku=4,T.YC=3,T.ZC=12,T}();m.l=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.initialize=0]="initialize",T[T.initializeRed=1]="initializeRed",T[T.initializeBlue=2]="initializeBlue",T[T.initializeRedBlue=3]="initializeRedBlue",T[T.sweep=4]="sweep",T[T.sweepBruteForce=5]="sweepBruteForce",T[T.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",T[T.sweepRedBlue=7]="sweepRedBlue",T[T.sweepRed=8]="sweepRed",T[T.sweepBlue=9]="sweepBlue",T[T.iterate=10]="iterate",T[T.iterateRed=11]="iterateRed",T[T.iterateBlue=12]="iterateBlue",T[T.iterateBruteForce=13]="iterateBruteForce",T[T.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",T[T.resetRed=15]="resetRed",T[T.resetBlue=16]="resetBlue";var p=function(){function h(a,c){this.ci=a,this.dH=c}return h.prototype.nr=function(a,c,d){this.ci.JX(d,a,c,this.dH)},h.prototype.$p=function(a){return this.ci.Rr(a,this.dH)},h}();j=function(){function h(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new m.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return h.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new m.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},h.prototype.ad=function(a,c){if(!this.Pv)throw m.i.Hb();var d=new m.l;d.K(c),this.fo.add(a),this.Eb.push(d)},h.prototype.Fp=function(){if(!this.Pv)throw m.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},h.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new m.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},h.prototype.JD=function(a,c){if(!this.Ov)throw m.i.Hb();var d=new m.l;d.K(c),this.fo.add(a),this.Eb.push(d)},h.prototype.iF=function(){if(!this.Ov)throw m.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},h.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new m.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},h.prototype.ED=function(a,c){if(!this.Nv)throw m.i.Hb();var d=new m.l;d.K(c),this.cw.add(a),this.qd.push(d)},h.prototype.hF=function(){if(!this.Nv)throw m.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},h.prototype.next=function(){if(this.Ic)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.Gz();break;case 1:a=this.rS();break;case 2:a=this.oS();break;case 3:a=this.qS();break;case 4:a=this.UX();break;case 5:a=this.QX();break;case 6:a=this.RX();break;case 7:a=this.SX();break;case 8:a=this.ux();break;case 9:a=this.iC();break;case 10:a=this.Uz();break;case 11:a=this.jT();break;case 12:a=this.gT();break;case 13:a=this.hT();break;case 14:a=this.iT();break;case 15:a=this.kJ();break;case 16:a=this.jJ();break;default:throw m.i.Qa()}return!this.Ic},h.prototype.aC=function(a){this.qa=a},h.prototype.uz=function(a){return this.Eb[a]},h.prototype.az=function(a){return this.qd[a]},h.prototype.nl=function(a){return this.fo.read(a)},h.prototype.hl=function(a){return this.cw.read(a)},h.Tz=function(a){return!(1&~a)},h.eq=function(a){return!(1&a)},h.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},h.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var c=this.Eb[a];this.rd.Br(c.v,c.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},h.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var c=this.Eb[a];this.rd.Br(c.v,c.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},h.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new m.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new m.ia(0)),this.ff.kr();for(var a=0;a<this.qd.length;a++){var c=this.qd[a];this.ff.Br(c.v,c.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),a=0;a<2*this.qd.length;a++)this.Ef.add(a);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},h.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.ff==null&&(this.ff=new m.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var c=this.Eb[a];this.rd.Br(c.v,c.C)}for(this.rd.Fp(),this.ff.kr(),a=0;a<this.qd.length;a++)c=this.qd[a],this.ff.Br(c.v,c.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);for(a=0;a<2*this.qd.length;a++)this.Ef.add(a);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},h.prototype.UX=function(){var a=this.Ld.get(--this.pe),c=a>>1;return h.eq(a)?(this.rd.remove(c),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[c].v,this.Eb[c].C,this.qa),this.Vf=c,this.Xb=10,!0)},h.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},h.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},h.prototype.SX=function(){var a=this.Ld.get(this.pe-1),c=this.Ef.get(this.Rg-1),d=this.Rr(a,!0),g=this.Rr(c,!1);return d>g?this.ux():d<g?this.iC():h.Tz(a)?this.ux():h.Tz(c)?this.iC():this.ux()},h.prototype.ux=function(){var a=this.Ld.get(--this.pe),c=a>>1;if(h.eq(a))return this.Df!=-1&&this.Ij.get(c)!=-1?(this.Ad.jd(this.Df,this.Ij.get(c)),this.Ij.set(c,-1)):this.rd.remove(c),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(a=this.Ad.rc(this.Cf);a!=-1;){var d=this.Ad.getData(a);this.ff.vj(d),this.Hj.set(d,-1),d=this.Ad.lb(a),this.Ad.jd(this.Cf,a),a=d}return 0<this.ff.size()?(this.ow.EB(this.Eb[c].v,this.Eb[c].C,this.qa),this.Vf=c,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new m.jp),this.Ij=new m.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(c,this.Ad.addElement(this.Df,c)),this.Xb=7),!0},h.prototype.iC=function(){var a=this.Ef.get(--this.Rg),c=a>>1;if(h.eq(a))return this.Cf!=-1&&this.Hj.get(c)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(c)),this.Hj.set(c,-1)):this.ff.remove(c),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(a=this.Ad.rc(this.Df);a!=-1;){var d=this.Ad.getData(a);this.rd.vj(d),this.Ij.set(d,-1),d=this.Ad.lb(a),this.Ad.jd(this.Df,a),a=d}return 0<this.rd.size()?(this.oo.EB(this.qd[c].v,this.qd[c].C,this.qa),this.Af=c,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new m.jp),this.Hj=new m.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(c,this.Ad.addElement(this.Cf,c)),this.Xb=7),!0},h.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var a=this.Ld.get(this.pe)>>1;return this.rd.vj(a),this.Xb=4,!0},h.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var a=this.Ef.get(this.Rg)>>1;return this.ff.vj(a),this.Xb=7,!0},h.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var a=this.Ld.get(this.pe)>>1;return this.rd.vj(a),this.Xb=7,!0},h.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var a=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(a)||(this.Af=this.Rg,!1)},h.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var a=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(a)||(this.Af=this.Rg,!1)},h.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},h.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},h.prototype.Kt=function(a,c,d){this.Am==null&&(this.Am=new m.Xt),d=new p(this,d),this.Am.sort(a,0,c,d)},h.prototype.JX=function(a,c,d,g){var v=this;a.Vd(c,d,function(b,C){var M=v.Rr(b,g),O=v.Rr(C,g);return M<O||M==O&&h.eq(b)&&h.Tz(C)?-1:1})},h.prototype.Rr=function(a,c){var d=.5*this.qa;return c?(c=this.Eb[a>>1],h.eq(a)?c.G-d:c.H+d):(c=this.qd[a>>1],h.eq(a)?c.G-d:c.H+d)},h}(),m.xC=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.construct=function(p,h,a,c,d,g){var v=new T;return v.v=p,v.G=h,v.Ye=a,v.C=c,v.H=d,v.Bg=g,v},T.prototype.Oa=function(){this.Ye=this.v=NaN},T.prototype.B=function(){return isNaN(this.v)},T.prototype.XS=function(){return isNaN(this.Ye)},T.prototype.K=function(p,h,a,c,d,g){c!==void 0?typeof p=="number"?(this.v=p,this.G=h,this.Ye=a,this.C=c,this.H=d,this.Bg=g):(this.v=p.x-.5*h,this.C=this.v+h,this.G=p.y-.5*a,this.H=this.G+a,this.Ye=p.z-.5*c,this.Bg=this.Ye+c):(this.v=p,this.G=h,this.Ye=a,this.C=p,this.H=h,this.Bg=a)},T.prototype.move=function(p){this.v+=p.x,this.G+=p.y,this.Ye+=p.z,this.C+=p.x,this.H+=p.y,this.Bg+=p.z},T.prototype.copyTo=function(p){p.v=this.v,p.G=this.G,p.C=this.C,p.H=this.H},T.prototype.Lk=function(p,h,a){this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h),isNaN(this.Ye)==0?this.Ye>a?this.Ye=a:this.Bg<a&&(this.Bg=a):this.Bg=this.Ye=a},T.prototype.Zb=function(p,h,a){if(typeof p=="number")this.B()?(this.v=p,this.G=h,this.Ye=a,this.C=p,this.H=h,this.Bg=a):this.Lk(p,h,a);else if(p instanceof m.Nd)this.Zb(p.x,p.y,p.z);else{if(!(p instanceof T))throw m.i.N();p.B()||(this.Zb(p.v,p.G,p.Ye),this.Zb(p.C,p.H,p.Bg))}},T.prototype.construct=function(p,h,a){p.B()||h.B()?this.Oa():(this.v=p.oa,this.C=p.va,this.G=h.oa,this.H=h.va,this.Ye=a.oa,this.Bg=a.va)},T.prototype.nB=function(p){if(p==null||8>p.length)throw m.i.N();p[0]=new m.Nd(this.v,this.G,this.Ye),p[1]=new m.Nd(this.v,this.H,this.Ye),p[2]=new m.Nd(this.C,this.H,this.Ye),p[3]=new m.Nd(this.C,this.G,this.Ye),p[4]=new m.Nd(this.v,this.G,this.Bg),p[5]=new m.Nd(this.v,this.H,this.Bg),p[6]=new m.Nd(this.C,this.H,this.Bg),p[7]=new m.Nd(this.C,this.G,this.Bg)},T.prototype.Zw=function(p){if(p==null||p.length==0)this.Oa();else{var h=p[0];for(this.K(h.x,h.y,h.z),h=1;h<p.length;h++){var a=p[h];this.Lk(a.x,a.y,a.z)}}},T}();m.OK=j}(ye||(ye={})),function(m){(function(j){j.Qa=function(){var T=Error();return T.message="Internal Error",T},j.Ie=function(){var T=Error();return T.message="Not Implemented",T},j.Xk=function(){var T=Error();return T.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",T},j.Hb=function(){var T=Error();return T.message="Invalid Call",T},j.N=function(T){var p=Error();return p.message="Illegal Argument Exception",T!==void 0&&(p.message+=": "+T),p},j.fu=function(T){var p=Error();return p.message=T!==void 0?"Runtime Exception: "+T:"Runtime Exception.",p},j.fa=function(T){var p=Error();return p.message="Geometry Exception: "+T,p},j.GK=function(){var T=Error();return T.message="Assert Failed Exception",T},j.ce=function(){var T=Error();return T.message="IndexOutOfBoundsException",T},j.WC=function(){var T=Error();return T.message="UserCancelException",T}})(m.i||(m.i={}))}(ye||(ye={})),function(m){(m=m.bm||(m.bm={}))[m.forward=0]="forward",m[m.reverse=1]="reverse"}(ye||(ye={})),function(m){var j=function(){function h(a,c){this.Wa=a,this.FH=c,this.LH=-1,this.sl=!1}return h.prototype.qe=function(){},h.prototype.next=function(){if(++this.LH==this.FH.I())return null;var a=this.FH.Na(this.LH);a.scale(this.Wa.ec);var c=new m.Da;return this.Wa.sy(a,this.sl,c),c},h.prototype.La=function(){return 0},h}(),T=function(){function h(a,c,d){this.Wa=a,this.rw=c,this.Xn=!1,this.co=d,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new m.Da,this.uk=[]}return h.prototype.qe=function(){},h.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var a=m.aa.jg(this.qq);return m.Fg.Mk(a,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}a=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var c=this.uk.length=0,d=new m.h,g=new m.h,v=[0];this.sd.Ha()&&8>this.FA;){var b=this.sd.ha();if(d.L(b.ac()),g.L(b.wc()),d.scale(this.Wa.ec),g.scale(this.Wa.ec),m.cj.Mu(d,g)?d.x=g.x:m.cj.Ku(d,g)&&(g.x=d.x),this.uk.length=0,m.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,d,g,this.Wa.QA,this.Wa.Zs,v,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(b=this.uk.slice(0),this.co.qG(this.co.da()-1,b,b.length-1)),m.cj.Lu(d,g)?(this.qq.Oa(),this.Wa.sy(d,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(v[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}a==null&&(a=new m.Da).Yk(null,0),this.OD(a),c++}if(this.bw[0]=0,0<c){for(v=this.sd.wb();0<c;)this.sd.li(),d.L(this.rw.Na(this.sd.wb())),g.L(this.rw.Na(this.sd.ik())),d.scale(this.Wa.ec),g.scale(this.Wa.ec),this.sl&&(m.cj.Mu(d,g)?d.x=g.x:m.cj.Ku(d,g)&&(g.x=d.x)),this.uk.length=0,m.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,g,d,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(a),c--;return d.L(this.rw.Na(this.sd.wb())),d.scale(this.Wa.ec),p.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,d,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,a,NaN,NaN),this.sd.Vb(v),this.sd.ha(),c=m.ta.kj(null,a,!0),m.Fg.Mk(a,c,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),a=m.aa.jg(this.qq),m.Fg.Mk(a,this.Wa.Aq,!0,!0,this.Wa.Ub)},h.prototype.OD=function(a){var c=this.uk[0],d=this.Nj[0]-1.570796326794897,g=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var v=this.di+1.570796326794897;d=v+3.141592653589793-(this.di-this.Nj[0])}else d=(v=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var b=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),C=!1;if(Math.abs(d-v)<=.5*this.Wa.ao)if(b){var M=a.Na(a.I()-2);M.scale(this.Wa.ec);var O=new m.ga(0);for(m.kb.Xy(this.Wa.Tb,this.Wa.kc,c.x,c.y,M.x,M.y,O),M=O.u;M<=v;)M+=6.283185307179586;for(;M>v;)M-=6.283185307179586;M<d&&(C=!0)}else C=!0;C?(a.DB(0,a.I()-1),this.sl||((c=new m.h).L(a.Na(a.I()-1)),c.scale(this.Wa.ec),-3.141592653589793>c.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<c.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),b||(d=.5*(d+v))):(b?((v=new m.h).L(c),v.scale(1/this.Wa.ec),a.wf(0,-1,v)):p.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],v,d,this.Wa.ao,this.sl,this.sk,a,NaN,NaN),this.FA+=1)}p.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,d,g,this.sl,this.sk,a),this.di=this.Gs[0]},h.prototype.xy=function(a,c){return this.Wa.xy(this.uk,a,this.Nj[0],this.Gs[0],this.sl,c)},h.prototype.La=function(){return 0},h}(),p=function(){function h(){}return h.buffer=function(a,c,d,g,v,b){if(a==null)throw m.i.N("Geometry::Geodesic_bufferer::buffer");if(a.B())return new m.Da(a.description);var C=new h;C.Qg=c,C.Jc=m.cb.sc(c);var M=m.cb.vv(C.Jc);if(C.Ub=b,C.Tb=m.cb.ev(C.Jc),C.kc=M*(2-M),C.ec=C.Jc.Hd().ai,C.qa=C.Qg.Kn(),C.Aq=C.Jc.Kn(),C.Zs=C.Aq*C.ec,C.zq=1.570796326794897/C.ec,C.OY=3.141592653589793/C.ec,C.Js=6.283185307179586/C.ec,C.PY=C.Js/6,C.LA=0,C.NY=1.5707963267948966*C.Tb/C.LA,d==4?(C.ze=2,C.Wv=!0):(C.ze=d,C.Wv=!1),C.Ka=g,C.rb=Math.abs(g),isNaN(v)||.001>v?C.xX():C.$n=v,d=a.getType(),m.aa.yd(d)?((d=new m.Ta(a.description)).oc(a,!0),a=d,d=1607):d==197&&(d=new m.l,a.A(d),d.R()<=C.qa||d.ca()<=C.qa?((d=new m.Ta(a.description)).ad(a,!1),a=d,d=1607):((d=new m.Da(a.description)).ad(a,!1),a=d,d=1736)),C.yX(),m.aa.Rn(d)||C.zX(),C.rb<=.5*C.$n)return d!=1736?new m.Da(a.description):C.Wv?a:m.cj.Qr(a,C.Qg,C.ze,C.QA,-1,b);if(0>C.Ka&&d!=1736)return new m.Da(a.description);if(C.Wv&&m.aa.Hc(d)?(c=m.cj.Qr(a,c,4,NaN,C.$n,b),a=m.cb.zh(c,C.Qg,C.Jc)):a=m.cb.zh(a,C.Qg,C.Jc),(a=m.Hh.lj(a,C.Jc)).B())return new m.Da(a.description);switch(!C.Wv&&m.aa.Hc(d)&&(a=m.cj.pI(C.ec,a)),a=h.KX(a,C.Jc),d){case 1736:c=C.UN(a);break;case 1607:c=C.VN(a);break;case 550:c=C.SN(a);break;case 33:c=C.TN(a);break;default:throw m.i.fa("corrupted_geometry")}return(C=m.cb.zh(c,C.Jc,C.Qg)).Jl(a.description),C},h.prototype.UN=function(a){var c=new m.Da;a=new T(this,a,c),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),a=m.ip.nj(a,this.Jc,2);var d=new m.Dd;return d.scale(1/this.ec,1/this.ec),c.Oc(d),c=m.ip.nj(c,this.Jc,2),0<=this.Ka?m.Gh.local().V(c,a,this.Jc,this.Ub):m.kp.local().V(c,a,this.Jc,this.Ub)},h.prototype.VN=function(a){return a=new T(this,a,null),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),m.ip.nj(a,this.Jc,2)},h.prototype.SN=function(a){return a=new j(this,a),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),m.ip.nj(a,this.Jc,2)},h.prototype.TN=function(a){(a=a.D()).scale(this.ec);var c=new m.Da;return this.sy(a,!1,c),m.ip.nj(c,this.Jc,2)},h.prototype.xy=function(a,c,d,g,v,b){var C=a[0],M=a[a.length-1],O=C.y>M.y?C.y:M.y,L=m.F.q(this.Tb,this.kc,C.y<M.y?C.y:M.y);if(O=m.F.q(this.Tb,this.kc,O),.001<this.LA-(L+c+this.rb)&&.001<this.LA+(O-c-this.rb))return!1;L=(c=d-1.570796326794897)-3.141592653589793,O=c+3.141592653589793;var q=(d=g+1.570796326794897)+3.141592653589793,U=[NaN],ee=[NaN],Q=[NaN],ge=[NaN];if(g=!1,h.dJ(this.Tb,this.kc,this.rb,C,c,L,M,d,U,ee),h.dJ(this.Tb,this.kc,this.rb,M,q,d,C,L,Q,ge),(d<U[0]&&U[0]<q||d<ee[0]&&ee[0]<q)&&(g=!0),g||(L<Q[0]&&Q[0]<c||L<ge[0]&&ge[0]<c)&&(g=!0),!g&&v)return!1;for(var ve=[],fe=a.length-1;0<=fe;fe--)ve.push(a[fe]);return b.Oa(),b.Yk(null,0),fe=[0],h.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,a,c,d,v,fe,b),h.Hr(this.Tb,this.kc,this.ec,this.rb,M,d,q,this.ao,v,fe,b,U[0],ee[0]),h.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,ve,q,O,v,fe,b),h.Hr(this.Tb,this.kc,this.ec,this.rb,C,L,c,this.ao,v,fe,b,Q[0],ge[0]),a=!1,v||(a=this.IE(this.ec,b)),g||a},h.prototype.sy=function(a,c,d){d.Oa(),d.Yk(null,0),h.Hr(this.Tb,this.kc,this.ec,this.rb,a,-this.ao,6.283185307179586,this.ao,c,[0],d,NaN,NaN),c||this.IE(this.ec,d)},h.prototype.IE=function(a,c){var d=this.vO(a,c);return a=this.wO(a,c),d||a},h.prototype.vO=function(a,c){var d=c.I(),g=!1,v=new m.l;if(c.A(v),!m.s.Y(v.H*a,1.570796326794897)&&!m.s.Y(v.G*a,-1.570796326794897))return!1;var b=new m.h;for(--d;0<=d;d--)c.D(d,b),(b.y==v.H&&m.s.Y(b.y*a,1.570796326794897)||b.y==v.G&&m.s.Y(b.y*a,-1.570796326794897))&&(g=!0,this.OI(b,d,c));return g},h.prototype.wO=function(a,c){var d=c.Na(0),g=c.Na(c.I()-1);return 3.141592653589793<Math.abs(d.x-g.x)*a?(this.VV(c),!0):this.uO(c)},h.prototype.uO=function(a){return 0>a.Ke()&&(this.UV(a),!0)},h.prototype.OI=function(a,c,d){var g=d.I(),v=0<c?c-1:g-1;if(g=d.Na(c<g-1?c+1:0),v=d.Na(v),!m.s.Y(g.y,a.y)&&!m.s.Y(g.x,a.x)){var b=new m.h;b.ma(g.x,a.y),d.Cb(c,b)}m.s.Y(v.y,a.y)||m.s.Y(v.x,a.x)||((g=new m.h).ma(v.x,a.y),d.wf(0,c,g))},h.prototype.VV=function(a){var c=new m.Da,d=new m.Da,g=new m.Dd,v=a.Na(0),b=a.Na(a.I()-1),C=new m.h;v.x>b.x?(b=this.zq,g.gg(-this.Js,0)):(b=-this.zq,g.gg(this.Js,0)),c.add(a,!1),a.Oa(),d.add(c,!1),d.Oc(g),v=new m.l,d.A(v),v.W((this.Js-v.R())/2,0),v.G=-this.zq,v.H=this.zq;for(var M=0;M<d.I();M++)d.D(M,C),c.wf(0,-1,C);for(d.Oc(g),M=0;M<d.I();M++)d.D(M,C),c.wf(0,-1,C);d=c.Na(0),g=c.Na(c.I()-1),C.ma(g.x,b),c.wf(0,-1,C),C.ma(.5*(g.x+d.x),b),c.wf(0,-1,C),C.ma(d.x,b),c.wf(0,-1,C),c=m.Hh.ks(c,this.Jc,2,!0,v.v),c=m.Hh.ks(c,this.Jc,2,!0,v.C),c=m.Ud.clip(c,v,this.Aq,NaN),a.add(c,!1)},h.prototype.UV=function(a){var c=new m.l;a.A(c),c.W((this.Js-c.R())/2,0),c.G=-this.zq,c.H=this.zq,a.Yk(null,0);var d=new m.h;d.ma(c.v,c.G),a.wf(1,-1,d),d.ma(c.v,c.H),a.wf(1,-1,d),d.ma(.5*(c.v+c.C),c.H),a.wf(1,-1,d),d.ma(c.C,c.H),a.wf(1,-1,d),d.ma(c.C,c.G),a.wf(1,-1,d),d.ma(.5*(c.v+c.C),c.G),a.wf(1,-1,d)},h.qy=function(a,c,d,g,v,b,C,M,O,L,q){var U=null;O||((U=new m.h).Rc(),0<q.I()&&(U.L(q.Na(q.I()-1)),U.scale(d)));var ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.h,fe=new m.h,Ce=b[b.length-1];d=1/d;for(var Ie=0;Ie<b.length;Ie++){var Ne=b[Ie];if(Ie==0)var Ve=C;else Ie==b.length-1?Ve=M:(m.kb.wd(a,c,Ce.x,Ce.y,Ne.x,Ne.y,null,null,ee,v),Ve=ee.u-1.570796326794897);m.kb.yi(a,c,Ne.x,Ne.y,g,Ve,Q,ge),O?fe.ma(Q.u,ge.u):(ve.ma(Q.u,ge.u),h.gJ(Ne.x,ve.x,U.x,L),fe.ma(L[0]+ve.x,ve.y),U.L(fe)),fe.scale(d),q.wf(0,-1,fe)}},h.Hr=function(a,c,d,g,v,b,C,M,O,L,q,U,ee){if(!(C-b<M)){var Q=new m.ga(0),ge=new m.ga(0),ve=new m.h,fe=new m.h,Ce=null;O||((Ce=new m.h).Rc(),0<q.I()&&(Ce.L(q.Na(q.I()-1)),Ce.scale(d)));var Ie=m.O.truncate(Math.ceil(b/M)),Ne=Ie++*M;for(Ne==b&&(Ne=Ie++*M),d=1/d;Ne<C+M&&(b<U&&U<Ne?(Ne=U,Ie--):b<ee&&ee<Ne&&(Ne=ee,Ie--),!(Ne>=C));)m.kb.yi(a,c,v.x,v.y,g,Ne,Q,ge),O?fe.ma(Q.u,ge.u):(ve.ma(Q.u,ge.u),h.gJ(v.x,ve.x,Ce.x,L),fe.ma(L[0]+ve.x,ve.y),Ce.L(fe)),fe.scale(d),q.wf(0,-1,fe),b=Ne,Ne=Ie++*M}},h.dJ=function(a,c,d,g,v,b,C,M,O,L){var q=new m.h,U=new m.h,ee=new m.ga(0),Q=new m.ga(0);for(m.kb.yi(a,c,g.x,g.y,d,v,ee,Q),q.ma(ee.u,Q.u),m.kb.yi(a,c,g.x,g.y,d,b,ee,Q),U.ma(ee.u,Q.u),d=new m.ga(0),m.kb.Xy(a,c,C.x,C.y,q.x,q.y,d),O[0]=d.u,m.kb.Xy(a,c,C.x,C.y,U.x,U.y,d),L[0]=d.u;O[0]<=L[0];)O[0]+=6.283185307179586;for(;O[0]>L[0];)O[0]-=6.283185307179586;for(;O[0]>=M;)O[0]-=6.283185307179586,L[0]-=6.283185307179586;for(;O[0]<M;)O[0]+=6.283185307179586,L[0]+=6.283185307179586},h.gJ=function(a,c,d,g){if(isNaN(d)){for(;3.141592653589793<g[0]+c-a;)g[0]-=6.283185307179586;for(;3.141592653589793<a-(g[0]+c);)g[0]+=6.283185307179586}else 3.141592653589793<g[0]+c-d?g[0]-=6.283185307179586:3.141592653589793<d-(g[0]+c)&&(g[0]+=6.283185307179586)},h.KX=function(a,c){var d=a.getType(),g=m.aa.Hc(d)?a.da():d==550?a.I():1;if(g==1)return a;var v=new m.ia(0);v.resize(g);for(var b=[],C=new m.l,M=0;M<g;M++){if(v.write(M,M),m.aa.Hc(d)){a.Rj(M,C);var O=C.sf()}else O=a.Na(M);O=m.XK.$X(c,O),b[M]=O}for(v.Vd(0,v.size,function(L,q){return b[L]<b[q]?-1:b[L]>b[q]?1:0}),c=a.Ia(),M=0;M<g;M++)C=v.read(M),m.aa.Hc(d)?c.addPath(a,C,!0):c.Fd(a,C,C+1);return c},h.prototype.yX=function(){var a=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);a=Math.min(a,.39269908169872414*this.Tb);var c=new m.h;c.ma(0,10*this.ec);var d=45*this.ec,g=new m.ga(0),v=new m.ga(0),b=new m.ga(0),C=new m.ga(0),M=new m.ga(0),O=new m.ga(0),L=new m.ga(0),q=new m.ga(0),U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h;m.kb.yi(this.Tb,this.kc,c.x,c.y,a,0,g,v),U.ma(g.u,v.u),m.kb.yi(this.Tb,this.kc,c.x,c.y,a,d,b,C),ee.ma(b.u,C.u),g=new m.ga(0),v=new m.ga(0);for(var ve=new m.ga(0);m.kb.yi(this.Tb,this.kc,c.x,c.y,a,.5*(0+d),M,O),Q.ma(M.u,O.u),m.kb.wd(this.Tb,this.kc,U.x,U.y,ee.x,ee.y,g,v,null,2),m.kb.oj(this.Tb,this.kc,U.x,U.y,.5*g.u,v.u,L,q,2),ge.ma(L.u,q.u),m.kb.wd(this.Tb,this.kc,Q.x,Q.y,ge.x,ge.y,ve,null,null,2),!(ve.u<=this.$n);)d*=.9,m.kb.yi(this.Tb,this.kc,c.x,c.y,a,d,b,C),ee.ma(b.u,C.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(d-0))},h.prototype.zX=function(){var a=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);a=Math.min(a,.39269908169872414*this.Tb);var c=new m.h,d=new m.h;c.ma(0,10*this.ec),d.ma(10*this.ec,10*this.ec);var g=new m.ga(0),v=new m.ga(0),b=new m.ga(0);m.kb.wd(this.Tb,this.kc,c.x,c.y,d.x,d.y,b,g,v,this.ze);var C=new m.ga(0),M=new m.ga(0),O=new m.ga(0),L=new m.ga(0),q=new m.h,U=new m.ga(0),ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.ga(0),Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h,ct=1;g=g.u,v=v.u+1.570796326794897,b=b.u,m.kb.yi(this.Tb,this.kc,c.x,c.y,a,g-1.570796326794897,ee,Q),Ve.ma(ee.u,Q.u),m.kb.yi(this.Tb,this.kc,d.x,d.y,a,v,ge,ve),Xe.ma(ge.u,ve.u),ee=new m.ga(0),Q=new m.ga(0),v=new m.ga(0);for(var mt=new m.ga(0);m.kb.oj(this.Tb,this.kc,c.x,c.y,.5*(0+ct)*b,g,C,M,this.ze),q.ma(C.u,M.u),m.kb.wd(this.Tb,this.kc,c.x,c.y,q.x,q.y,null,null,U,this.ze),m.kb.yi(this.Tb,this.kc,q.x,q.y,a,U.u+1.570796326794897,fe,Ce),et.ma(fe.u,Ce.u),m.kb.wd(this.Tb,this.kc,Ve.x,Ve.y,Xe.x,Xe.y,ee,Q,null,2),m.kb.oj(this.Tb,this.kc,Ve.x,Ve.y,.5*ee.u,Q.u,Ie,Ne,2),dt.ma(Ie.u,Ne.u),m.kb.wd(this.Tb,this.kc,et.x,et.y,dt.x,dt.y,v,null,null,2),!(v.u<=this.$n);)ct*=.9,m.kb.oj(this.Tb,this.kc,c.x,c.y,ct*b,g,O,L,this.ze),d.ma(O.u,L.u),m.kb.wd(this.Tb,this.kc,c.x,c.y,d.x,d.y,null,null,mt,this.ze),m.kb.yi(this.Tb,this.kc,d.x,d.y,a,mt.u+1.570796326794897,ge,ve),Xe.ma(ge.u,ve.u);1e5<(a=ct*b)&&(a=1e5),this.QA=a},h.prototype.xX=function(){var a=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/a&&(a=this.rb/500),.01>a&&(a=.01),this.$n=a},h}();m.VK=p}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Mf=function(p,h){var a=new m.h;a.L(h),p.push(a)},T.up=function(p,h){p.add(h.x),p.add(h.y)},T.hB=function(p){p.Bh(p.size-2)},T.oB=function(p,h){h.ma(p.get(p.size-2),p.get(p.size-1))},T.Qr=function(p,h,a,c,d,g){if(p==null)throw m.i.N();var v=p.getType();if(p.B()||m.aa.Rn(v))return p;var b=new T;b.Qg=h,b.Jc=m.cb.sc(h);var C=m.cb.vv(b.Jc);if(b.Ub=g,b.Tb=m.cb.ev(b.Jc),b.kc=C*(2-C),b.ec=b.Jc.Hd().ai,b.Aq=b.Jc.Kn(),b.Zs=b.Aq*b.ec,b.AA=c,b.zA=d,b.ze=a,v==197?(a=new m.Da(p.description)).ad(p,!1):m.aa.yd(v)?(a=new m.Ta(p.description)).oc(p,!0):a=p,b.ze!=4){if((h=b.Qg.Nb(b.Jc)==0?m.cb.zh(a,b.Qg,b.Jc):m.Hh.lj(a,b.Jc)).B())return h;h=T.pI(b.ec,h),h=b.Zy(h),h=m.ip.nj(h,b.Jc,b.ze),b=m.cb.zh(h,b.Jc,b.Qg)}else{if(m.Eg.Sb(h)==2?(p=m.cb.ml(),(h=m.Xj.local().V(a,p,h,g))==p&&(h=new m.Da,p.copyTo(h))):h=m.Hh.lj(a,b.Jc),h.B())return h;b=b.CX(h)}return b},T.pI=function(p,h){var a=new m.l;if(h.xc(a),3.141592653589793>a.R()*p)return h;var c=!1;a=h.Ga();for(var d=new m.h,g=new m.h;a.$a();)for(;a.Ha();){var v=a.ha();if(d.L(v.ac()),g.L(v.wc()),d.scale(p),g.scale(p),3.141592653589793<Math.abs(d.x-g.x)){var b=T.Lu(d,g);if(!b){c=!0;break}if(6.283185307179586<Math.abs(d.x-g.x)){c=!0;break}}}if(!c)return h;c=h.Ia();var C=1<h.description.Aa,M=new m.h,O=new m.h,L=new m.h,q=new m.h,U=new m.Sa;for(a.Zi();a.$a();)for(var ee=NaN,Q=[0];a.Ha();){if(v=a.ha(),d.L(v.ac()),g.L(v.wc()),d.scale(p),g.scale(p),isNaN(ee)?(T.Wi(d.x,NaN,Q),O.L(d)):O.L(L),ee=O.x,b=T.Lu(d,g)){if(6.283185307179586<g.x-d.x)for(;6.283185307179586<g.x-d.x;)g.x-=6.283185307179586;if(-6.283185307179586>g.x-d.x)for(;-6.283185307179586>g.x-d.x;)g.x+=6.283185307179586;T.Wi(g.x,NaN,Q),L.L(g)}else M.L(g),T.AU(M),T.Wi(M.x,ee,Q),L.ma(Q[0]+M.x,M.y);.5>Math.abs(L.x-g.x)&&L.L(g),C?(v.Tw(0,U),q.L(O),q.scale(1/p),U.Cb(q),(b=a.vm())?c.nf(U):c.lineTo(U),a.Qn()&&!h.dc(a.gb)&&(v.Tw(1,U),q.L(L),q.scale(1/p),U.Cb(q),c.lineTo(U))):((b=a.vm())&&c.Hz(null,0),v=c.da()-1,q.L(O),q.scale(1/p),c.wf(v,-1,q),a.Qn()&&!h.dc(a.gb)&&(q.L(L),q.scale(1/p),c.wf(v,-1,q)))}return c},T.tF=function(p,h,a,c,d,g,v,b,C,M,O,L){var q=new m.h,U=new m.h,ee=0<c.compare(d);T.fJ(ee,c,d,q,U),T.uF(p,h,a,q,U,g,NaN,v,b,C,M,null,O,L),ee&&T.fC(C,M,null,O)},T.prototype.Zy=function(p){var h=p.Ia(),a=p.Ga(),c=[],d=null,g=null,v=1<p.description.Aa;v&&(d=new m.be(0),g=new m.ig);for(var b=[0],C=new m.h,M=new m.h,O=new m.h,L=new m.h;a.$a();)for(b[0]=0;a.Ha();){var q=a.ha();C.L(q.ac()),M.L(q.wc()),C.scale(this.ec),M.scale(this.ec);var U=0<C.compare(M);T.fJ(U,C,M,O,L),c.length=0,d!=null&&d.Bh(0),0<this.AA?T.uF(this.Tb,this.kc,this.ze,O,L,this.AA,this.zA,this.Zs,null,null,null,v?d:null,c,b):T.aR(this.Tb,this.kc,this.ze,O,L,this.zA,this.Zs,v?d:null,c,b),U&&T.fC(null,null,v?d:null,c),c[0].L(q.ac()),c[c.length-1].L(q.wc());for(var ee=1;ee<c.length-1;ee++)c[ee].scale(1/this.ec);v?(U=T.eJ(U,q,g),T.TD(a.vm(),a.Qn()&&!p.dc(a.gb),q,U,d,c,h)):T.SD(a.vm(),a.Qn()&&!p.dc(a.gb),c,h)}return h},T.prototype.CX=function(p){var h=p.Ia(),a=p.Ga(),c=[],d=null,g=new m.ig,v=1<p.description.Aa;for(v&&(d=new m.be(0));a.$a();)for(;a.Ha();){var b=a.ha(),C=b.ac(),M=b.wc();C=0<C.compare(M),M=T.eJ(C,b,g),c.length=0,d!=null&&d.Bh(0),T.BX(this.Tb,this.kc,this.ec,M,this.Qg,this.AA,this.zA,v?d:null,c),C&&T.fC(null,null,v?d:null,c),v?T.TD(a.vm(),a.Qn()&&!p.dc(a.gb),b,M,d,c,h):T.SD(a.vm(),a.Qn()&&!p.dc(a.gb),c,h)}return h},T.SD=function(p,h,a,c){p&&c.Hz(null,0),p=c.da()-1;var d=a.slice(0);c.qG(p,d,d.length-1),h&&c.wf(p,-1,a[a.length-1])},T.TD=function(p,h,a,c,d,g,v){var b=new m.Sa;if(a.To(b),p?v.nf(b):v.lineTo(b),2<g.length){p=c.Qb();for(var C=1;C<g.length-1;C++){var M=c.NG(d.get(C)*p);c.Tw(M,b),b.Cb(g[C]),v.lineTo(b)}}h&&(a.Po(b),v.lineTo(b))},T.uF=function(p,h,a,c,d,g,v,b,C,M,O,L,q,U){var ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0);m.kb.wd(p,h,c.x,c.y,d.x,d.y,ge,ee,Q,a),ge=ge.u;var ve=ee=ee.u;0>ve&&(ve+=6.283185307179586),0>(Q=Q.u)&&(Q+=6.283185307179586),C!=null&&(C[0]=ge),M!=null&&(M[0]=ve),O!=null&&(O[0]=Q),M=C=NaN,L!=null&&(C=((M=m.F.Ah(p,h))-(O=m.F.q(p,h,c.y)))/ge,M=(M+O)/ge),O=T.Mu(c,d),Q=T.Ku(c,d),ve=O||Q;var fe=T.FE(c,d,b),Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.h,Ve=new m.h,Xe=new m.h;T.Wi(c.x,NaN,U);var et=[U[0]];if(ge<=g)T.Mf(q,c),T.Wi(d.x,NaN,U),L!=null&&L.add(0),ve?(O&&T.kB(c,d,L,q),Q&&T.iB(c,d,L,q)):fe?T.jB(c,d,ee,C,M,L,q):0<v&&(Ve.ma(c.x-et[0],c.y),Ne.ma(d.x-U[0],d.y),T.Yy(p,h,a,c,ge,ee,Ve,Ne,0,1,v,L,q,et)),T.Mf(q,d);else{var dt=ge/((g=1+m.O.truncate(Math.ceil(ge/g)))-1),ct=new m.h,mt=0;T.Mf(q,c),ct.L(c),Ve.ma(c.x-U[0],c.y),L!=null&&L.add(0);for(var lt=1;lt<g;lt++){if(lt<g-1){m.kb.oj(p,h,c.x,c.y,lt*dt,ee,Ce,Ie,a),Ne.ma(Ce.u,Ie.u),T.Wi(Ne.x,ct.x,U),Xe.ma(U[0]+Ne.x,Ne.y);var gi=lt/(g-1)}else T.Wi(d.x,NaN,U),Ne.ma(d.x-U[0],d.y),Xe.L(d),gi=1;ve?(lt==1&&O&&T.kB(c,Xe,L,q),lt==g-1&&Q&&T.iB(ct,d,L,q)):fe?T.EE(ct,Xe,b)&&(c.x<d.x?ct.x>Xe.x&&(U[0]+=6.283185307179586,Xe.ma(U[0]+Ne.x,Ne.y)):ct.x<Xe.x&&(U[0]-=6.283185307179586,Xe.ma(U[0]+Ne.x,Ne.y)),T.jB(ct,Xe,ee,C,M,L,q)):0<v&&T.Yy(p,h,a,c,ge,ee,Ve,Ne,mt,gi,v,L,q,et),T.Mf(q,Xe),L!=null&&L.add(gi),ct.L(Xe),Ve.L(Ne),et[0]=U[0],mt=gi}}},T.aR=function(p,h,a,c,d,g,v,b,C,M){var O=new m.ga(0),L=new m.ga(0),q=new m.ga(0);m.kb.wd(p,h,c.x,c.y,d.x,d.y,q,O,L,a),L=q.u,O=O.u;var U=q=NaN;if(b!=null){U=m.F.Ah(p,h);var ee=m.F.q(p,h,c.y);q=(U-ee)/L,U=(U+ee)/L}ee=T.Mu(c,d);var Q=T.Ku(c,d),ge=ee||Q;v=T.FE(c,d,v);var ve=T.Lu(c,d);ve=ge||v||ve,T.Wi(c.x,NaN,M);var fe=new m.h;T.Mf(C,c),fe.L(c),b!=null&&b.add(0),ve?(ge?(ee&&T.kB(c,d,b,C),Q&&T.iB(c,d,b,C)):v&&T.jB(c,d,O,q,U,b,C),T.Wi(d.x,NaN,M),T.Mf(C,d)):L<=g?(T.Wi(d.x,NaN,M),T.Mf(C,d)):(q=new m.h,v=new m.h,q.L(c),v.L(d),q.x-=M[0],v.x-=M[0],-3.141592653589793>v.x?v.x+=6.283185307179586:3.141592653589793<v.x&&(v.x-=6.283185307179586),T.Yy(p,h,a,c,L,O,q,v,0,1,g,b,C,M),T.Mf(C,d),T.Wi(d.x,NaN,M)),b!=null&&b.add(1)},T.Yy=function(p,h,a,c,d,g,v,b,C,M,O,L,q,U){var ee=new m.h,Q=new m.h;ee.ma(v.x+U[0],v.y),new m.ga(0),new m.ga(0),new m.ga(0),new m.ga(0);var ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=new m.h;Ce.L(v),Ie.L(b),v=new m.be(0),b=new m.be(0),T.up(v,Ie),b.add(M);var Xe=new m.h,et=new m.yb,dt=[];for(T.YJ(4,dt);0<v.size;){for(var ct,mt=!1,lt=NaN,gi=0;3>gi;gi++)if(ct=dt[gi]*M+(1-dt[gi])*C,m.kb.oj(p,h,c.x,c.y,ct*d,g,ge,ve,a),Ne.ma(ge.u,ve.u),gi==0&&(lt=ct,Ve.L(Ne)),T.WW(Ce,Ne,Ie,et),et.hc(et.fe(Ne,!0),Xe),m.kb.wd(p,h,Ne.x,Ne.y,Xe.x,Xe.y,fe,null,null,2),fe.u>O){mt=!0;break}mt?(Ie.L(Ve),M=lt,T.up(v,Ie),b.add(M)):(T.hB(v),b.En(b.size-1,1,b.size-1),0<v.size&&(T.Wi(Ie.x,ee.x,U),Q.ma(U[0]+Ie.x,Ie.y),T.Mf(q,Q),ee.L(Q),L!=null&&L.add(M),Ce.L(Ie),C=M,T.oB(v,Ie),M=b.get(b.size-1)))}},T.BX=function(p,h,a,c,d,g,v,b,C){var M=new m.h,O=new m.h,L=new m.h,q=new m.h,U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h,ve=new m.h,fe=new m.h,Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.h,Ve=[[],[]],Xe=m.Eg.Sb(d)==1;d=d.Xd(0);var et=c.ac(),dt=c.wc();Xe?(ee.ma(et.x*a,et.y*a),Q.ma(dt.x*a,dt.y*a)):(Ve[0][0]=et.x,Ve[0][1]=et.y,Ve[1][0]=dt.x,Ve[1][1]=dt.y,m.cb.vt(),ee.x=Ve[0][0]*a,ee.y=Ve[0][1]*a,Q.x=Ve[1][0]*a,Q.y=Ve[1][1]*a);var ct=0,mt=0,lt=1,gi=c.Pn();M.L(et),O.L(dt),dt=new m.be(0);var oi=new m.be(0),Ni=new m.be(0);T.up(dt,O),T.up(oi,Q),Ni.add(lt),T.Mf(C,M),b!=null&&b.add(mt);var Qi=[],_s=0<v?gi?5:3:gi?5:1;T.YJ(_s,Qi);for(var as=new m.ga(0),$i=new m.ga(0),ui=new m.ga(0),Kt=new m.ga(0),Xs=new m.ga(0),Ps=new m.ga(0),Qn=new m.ga(0);0<oi.size;){var wi=!1,sn=NaN;for(m.kb.wd(p,h,ee.x,ee.y,Q.x,Q.y,as,$i,null,2),et=0;et<_s&&!(et==0&&(!gi&&0>=v&&as.u<=g&&3.141592653589793>Math.abs(ee.x-Q.x)||c.Ux(mt,lt)<=d));et++){var ns=Qi[et]*lt+(1-Qi[et])*mt;if(c.hc(ns,L),Xe?ge.ma(L.x*a,L.y*a):(Ve[0][0]=L.x,Ve[0][1]=L.y,m.cb.vt(),ge.x=Ve[0][0]*a,ge.y=Ve[0][1]*a),et==0&&(sn=ns,U.L(L),fe.L(ge),0<g&&(as.u>g||3.141592653589793<=Math.abs(ee.x-Q.x)))){wi=!0;break}if(gi&&0<g){if(m.kb.wd(p,h,ee.x,ee.y,ge.x,ge.y,ui,null,null,2),ui.u>g||3.141592653589793<=Math.abs(ee.x-ge.x)){wi=!0;break}}else if(0<v){if(gi?(q.NS(M,O,Qi[et]),Xe?ve.ma(q.x*a,q.y*a):(Ve[0][0]=q.x,Ve[0][1]=q.y,m.cb.vt(),ve.x=Ve[0][0]*a,ve.y=Ve[0][1]*a)):(q.L(L),ve.L(ge)),m.kb.wd(p,h,ee.x,ee.y,ve.x,ve.y,Kt,null,null,2),!(Kt.u<=as.u)){wi=!0;break}if(m.kb.oj(p,h,ee.x,ee.y,Kt.u,$i.u,Ce,Ie,2),Ne.ma(Ce.u,Ie.u),m.kb.wd(p,h,Ne.x,Ne.y,ge.x,ge.y,Xs,null,null,2),Xs.u>v){wi=!0;break}if(gi){if(m.kb.wd(p,h,Ne.x,Ne.y,ve.x,ve.y,Ps,null,null,2),Ps.u>v){wi=!0;break}if(m.kb.wd(p,h,ve.x,ve.y,ge.x,ge.y,Qn,null,null,2),Qn.u>v){wi=!0;break}}}}wi?(O.L(U),Q.L(fe),lt=sn,T.up(dt,O),T.up(oi,Q),Ni.add(lt)):(T.hB(dt),T.hB(oi),Ni.En(Ni.size-1,1,Ni.size-1),T.Mf(C,O),ct+=as.u,b!=null&&b.add(ct),0<oi.size&&(M.L(O),ee.L(Q),mt=lt,T.oB(dt,O),T.oB(oi,Q),lt=Ni.get(Ni.size-1)))}if(b!=null)for(p=1/ct,et=0;et<b.size;et++)b.write(et,b.read(et)*p)},T.fC=function(p,h,a,c){c.reverse(),a!=null&&a.ni(0,a.size,1),a=p!=null?p[0]:NaN,c=h!=null?h[0]:NaN,p!=null&&(p[0]=c),h!=null&&(h[0]=a)},T.fJ=function(p,h,a,c,d){p?(c.L(a),d.L(h)):(c.L(h),d.L(a))},T.eJ=function(p,h,a){return p?(a.create(h.getType()),h.copyTo(a.get()),a.get().reverse(),a.get()):h},T.Wi=function(p,h,a){if(isNaN(h)){for(;3.141592653589793<a[0]-p;)a[0]-=6.283185307179586;for(;3.141592653589793<p-a[0];)a[0]+=6.283185307179586}else 3.141592653589793<a[0]+p-h?a[0]-=6.283185307179586:3.141592653589793<h-(a[0]+p)&&(a[0]+=6.283185307179586)},T.WW=function(p,h,a,c){3.141592653589793>Math.abs(h.x-p.x)?(c.Dc(p),3.141592653589793<=a.x-p.x?c.Ql(a.x-6.283185307179586,a.y):3.141592653589793<=p.x-a.x?c.Ql(a.x+6.283185307179586,a.y):c.Ql(a.x,a.y)):(c.Dc(a),3.141592653589793<=p.x-a.x?c.Ql(p.x-6.283185307179586,p.y):3.141592653589793<=a.x-p.x?c.Ql(p.x+6.283185307179586,p.y):c.Ql(p.x,p.y))},T.YJ=function(p,h){for(var a=0;a<p;a++){var c=Math.ceil(a/2)/(p+1);a%2!=0&&(c=-c),h[a]=.5+c}},T.Mu=function(p,h){return!!(m.s.Y(p.y,1.570796326794897)&&!m.s.Y(h.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)&&!m.s.Y(h.y,-1.570796326794897))},T.Ku=function(p,h){return!!(m.s.Y(h.y,1.570796326794897)&&!m.s.Y(p.y,1.570796326794897)||m.s.Y(h.y,-1.570796326794897)&&!m.s.Y(p.y,-1.570796326794897))},T.FE=function(p,h,a){return!(!T.EE(p,h,a)||m.s.Y(p.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)||m.s.Y(h.y,1.570796326794897)||m.s.Y(h.y,-1.570796326794897))},T.EE=function(p,h,a){return Math.abs(Math.abs(p.x-h.x)-3.141592653589793)<=a},T.Lu=function(p,h){return!!(m.s.Y(p.y,1.570796326794897)&&m.s.Y(h.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)&&m.s.Y(h.y,-1.570796326794897))},T.kB=function(p,h,a,c){if(0<p.y){var d=new m.h;d.ma(h.x,1.570796326794897)}else(d=new m.h).ma(h.x,-1.570796326794897);m.s.Y(p.x,d.x)||m.s.Y(h.y,d.y)||(T.Mf(c,d),a!=null&&a.add(0))},T.iB=function(p,h,a,c){if(0<h.y){var d=new m.h;d.ma(p.x,1.570796326794897)}else(d=new m.h).ma(p.x,-1.570796326794897);m.s.Y(h.x,d.x)||m.s.Y(p.y,d.y)||(T.Mf(c,d),a!=null&&a.add(1))},T.jB=function(p,h,a,c,d,g,v){m.s.Cd(a)?(0<1.570796326794897-p.y&&((a=new m.h).ma(p.x,1.570796326794897),T.Mf(v,a),g!=null&&g.add(c)),0<1.570796326794897-h.y&&((a=new m.h).ma(h.x,1.570796326794897),T.Mf(v,a),g!=null&&g.add(c))):(0<1.570796326794897+p.y&&((a=new m.h).ma(p.x,-1.570796326794897),T.Mf(v,a),g!=null&&g.add(d)),0<1.570796326794897+h.y&&((a=new m.h).ma(h.x,-1.570796326794897),T.Mf(v,a),g!=null&&g.add(d)))},T.AU=function(p){if(-3.141592653589793>p.x)for(;-3.141592653589793>p.x;)p.x+=6.283185307179586;if(3.141592653589793<p.x)for(;3.141592653589793<p.x;)p.x-=6.283185307179586},T}();m.cj=j}(ye||(ye={})),function(m){m.ip=function(){function j(){}return j.nj=function(T,p,h){if(T==null||p==null||!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var a=T,c=a.getType();if(m.aa.Hc(c)){a=m.Hh.lj(T,p),T=new m.l,a.A(T),c=m.ta.Wd(p,T,!1);for(var d=m.cb.gh(p),g=Math.floor((T.v-d.v)/d.R())*d.R()+d.v;g<T.C;)g>T.v+c&&g<T.C-c&&(a=m.Hh.ks(a,p,h,!0,g)),g+=d.R()}else{if(c==197)return(T=new m.Da(a.description)).ad(a,!1),j.nj(T,p,h);if(m.aa.yd(c))return(T=new m.Ta(a.description)).oc(a,!0),j.nj(T,p,h)}return j.Uy(a,p)},j.Uy=function(T,p){if(T==null||p==null||!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var h=T.getType();return h==197?(h=new m.Da(T.description)).ad(T,!1):m.aa.yd(h)?(h=new m.Ta(T.description)).oc(T,!0):h=T,(h=m.Hh.lj(h,p)).B()?h:m.Eg.Sb(p)==1?m.Hh.Fn(h,p,0,h!=T,0):j.NQ(h,p,h!=T)},j.NQ=function(T,p,h){if(!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var a=m.cb.bf(p),c=-180*a;return a*=360,m.Eg.Sb(p)==2&&(a=(c=m.cb.gh(p)).C,a-=c=c.v),m.Hh.Hp(T,c,a,p,h,0,!0)},j}()}(ye||(ye={})),function(m){m.BY=function(){function j(){}return j.P=function(T){return 0>T?-T:T},j.Mb=function(T,p){return 0<=p?j.P(T):-j.P(T)},j.Y=function(T,p){return T==p||j.P(T-p)<=j.JC*(1+(j.P(T)+j.P(p))/2)},j.Cd=function(T){return T==0||j.P(T)<=j.JC},j.Ah=function(T,p){var h=(p=(1-(p=Math.sqrt(1-p)))/(1+p))*p;return T/(1+p)*(1+h*(.25+h*(.015625+1/256*h)))*j.EL},j.EL=1.5707963267948966,j.JC=3552713678800501e-30,j}()}(ye||(ye={})),function(m){var j=function(p){this.Wf=p,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};m.DY=j;var T=function(){function p(h){h===void 0&&(h=null),this.Cj=null,this.Un=!1,h!==null&&(this.Cj=new j(h))}return p.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},p.prototype.Of=function(){var h=new p;return this.copyTo(h),h},p.prototype.copyTo=function(h){h.Cj=this.Cj,h.Un=this.Un},p.prototype.Qz=function(){this.Un=!this.Un},p.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},p.prototype.LJ=function(h){if(0>=h)throw m.i.N();if(h!=this.Ec()){if((h=m.pf.geogtran(h))==null)throw m.i.N("Geogtran not found.");this.Cj=new j(h)}},p.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},p.prototype.tX=function(h){if(h==null)throw m.i.N();var a=null;try{a=m.pf.fromString(m.Sc.PE_TYPE_GEOGTRAN,h)}catch{throw m.i.N()}this.Cj=new j(a)},p.prototype.Nb=function(h){return h==this||!(!(h instanceof p)||(0>=this.Ec()||this.Ec()!=h.Ec())&&!this.qm().isEqual(h.qm()))&&this.Un==h.Un},p.prototype.toString=function(){var h="GeographicTransformation: "+this.Bz();return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},p.create=function(h,a){var c=new p;return c.LJ(h),a&&c.Qz(),c},p.uP=function(h,a){var c=new p;return c.tX(h),a&&c.Qz(),c},p}();m.Dx=T}(ye||(ye={})),function(m){var j=function(){function p(){}return p.construct=function(h,a,c,d){var g=new p;return g.hw=h,g.iw=a,g.QY=c,g.RY=d,g},p.Ey=function(h,a){return h.hw==a.hw?h.iw==a.iw?0:h.iw<a.iw?-1:1:h.hw<a.hw?-1:1},p}(),T=function(){function p(){this.yT=[],this.zT=[],this.qp()}return p.kz=function(){return p.jK==null&&(p.jK=new p),p.jK},p.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},p.prototype.iD=function(h){try{var a=[];a=a.sort(j.Ey);for(var c=0;c<a.length;c++)h.push(a[c])}catch{}},p}();m.CY=T}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.yD=function(p){this.Fk=p},T.prototype.WM=function(p){this.Fb=p},T.prototype.xD=function(p){this.zo=p},T.CE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736)},T.AE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736||20>p.I())},T.BE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736||20>p.I())},T}();m.Uk=j}(ye||(ye={})),function(m){m.$b=function(){function j(){}return j.TT=function(T){var p=new m.Da;return p.sx(T.es(),T.gs()),p.yj(T.es(),T.fs()),p.yj(T.ds(),T.fs()),p.yj(T.ds(),T.gs()),p},j.zh=function(T,p){return T===null?null:m.Hx.local().V(T,p,null)},j.jY=function(T,p){var h=m.Gh.local();return T=new m.Zc(T),h.V(T,p,null).next()},j.im=function(T,p,h){return m.kp.local().V(T,p,h,null)},j.ep=function(T,p,h){return m.Kx.local().V(T,p,h,null)},j.VX=function(T,p,h){var a=m.Kx.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.Nb=function(T,p,h){return m.dj.local().V(3,T,p,h,null)},j.TP=function(T,p,h){return m.dj.local().V(4,T,p,h,null)},j.RS=function(T,p,h){var a=m.Xj.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.QP=function(T,p,h){var a=m.kp.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.Ea=function(T,p,h){return m.Xj.local().V(T,p,h,null)},j.QS=function(T,p,h){if((T=m.Xj.local().V(T,p,h,null,1))===null)return[];if(T.getType()===550){for(p=[],h=0;h<T.wa;h++)p.push(T.KR(h));return p}return T.getType()===33?[T]:[]},j.qY=function(T,p,h){return m.dj.local().V(2,T,p,h,null)},j.contains=function(T,p,h){return m.dj.local().V(1,T,p,h,null)},j.BP=function(T,p,h){return m.dj.local().V(16,T,p,h,null)},j.touches=function(T,p,h){return m.dj.local().V(8,T,p,h,null)},j.DU=function(T,p,h){return m.dj.local().V(32,T,p,h,null)},j.TS=function(T,p,h){return m.dj.local().V(1073741824,T,p,h,null)},j.yB=function(T,p,h,a){return m.zL.local().V(T,p,h,a,null)},j.tb=function(T,p,h,a){var c=null;if(h!=null){if(c=h.Hd(),a!=null&&c.Ec()!=a.Ec()&&c.od!=a.od)throw m.i.Xk()}else if(a!=null)throw m.i.N();return T=m.rL.local().V(T,p,null),c!==null&&a!==null&&(T=m.Tc.Nh(T,c,a)),T},j.clip=function(T,p,h){return m.kL.local().V(T,m.l.construct(p.es(),p.gs(),p.ds(),p.fs()),h,null)},j.dl=function(T,p,h){if(T==null||p==null)return null;for(T=m.mL.local().V(!0,T,p,h,null),p=[];(h=T.next())!=null;)h.B()||p.push(h);return p.slice(0)},j.MN=function(T,p,h,a,c,d,g,v){if(c===!0)return j.NN(T,p,h,a,d,g,v);if(c=h,p!=null){if(g=p.Hd(),a!=null&&g.Ec()!=a.Ec()){if(g.od!=a.od)throw m.i.Xk();c=[],m.Tc.XE(h,h.length,a,g,c)}}else if(a!=null)throw m.i.N();if(h=m.AC.local(),d){for(T=new m.Zc(T),p=h.V(T,p,c,d,null),T=[];(d=p.next())!=null;)T.push(d);d=T.slice(0)}else for(d=[],a=0;a<T.length;a++)d[a]=h.V(T[a],p,c[a],null);return d},j.NN=function(T,p,h,a,c,d,g){if(p===null||(a==null&&(a=p.Ec()!==4326?p.Hd():m.Tc.Zg(9001)),a.od!==0))throw m.i.N();if(m.Tc.XE(h,h.length,a,m.Tc.Zg(9001),h),a=m.FC.local(),c){for(T=new m.Zc(T),p=a.V(T,p,d,h,g,!1,c,null),h=[];(d=p.next())!=null;)h.push(d);c=h.slice(0)}else{c=[];for(var v=0;v<T.length;v++)c[v]=a.V(T[v],p,d,h[v],g,!1,null)}return c},j.buffer=function(T,p,h,a,c,d,g){var v=h;if(c===!1){if(p!=null){if(c=p.Hd(),a!=null&&c.Ec()!=a.Ec()){if(c.od!=a.od)throw m.i.Xk();v=m.Tc.Nh(h,a,c)}}else if(a!=null)throw m.i.N();T=m.AC.local().V(T,p,v,null)}else{if(p===null||(a==null&&(a=p.Ec()!==4326?p.Hd():m.Tc.Zg(9001)),a.od!==0))throw m.i.N();v=m.Tc.Nh(h,a,m.Tc.Zg(9001)),T=m.FC.local().V(T,p,d,v,g,!1,null)}return T},j.BU=function(T,p,h,a,c,d,g){if(p!=null){var v=p.Hd();if(g!=null&&v.Ec()!=g.Ec()){if(v.od!=g.od)throw m.i.Xk();h=m.Tc.Nh(h,g,v)}}else if(g!=null)throw m.i.N();for(T=new m.Zc(T),p=m.IC.local().V(T,p,h,a,c,d,null),h=[];(a=p.next())!=null;)h.push(a);return h.slice(0)},j.offset=function(T,p,h,a,c,d,g){if(p!=null){var v=p.Hd();if(g!=null&&v.Ec()!=g.Ec()){if(v.od!=g.od)throw m.i.Xk();h=m.Tc.Nh(h,g,v)}}else if(g!=null)throw m.i.N();return m.IC.local().V(T,p,h,a,c,d,null)},j.iP=function(T){return m.CC.local().V(T,null)},j.jP=function(T,p){var h=m.CC.local();for(T=new m.Zc(T),p=h.V(T,p,null),h=[];(T=p.next())!=null;)h.push(T);return h},j.nz=function(T,p,h){return m.Ix.local().nz(T,p,h)},j.oz=function(T,p){return m.Ix.local().oz(T,p)},j.pz=function(T,p,h,a){return m.Ix.local().pz(T,p,h,a)},j.eC=function(T,p){return m.Yl.local().V(T,p,!1,null)},j.dT=function(T,p){return m.Yl.local().rs(T,p,null)},j.QQ=function(T,p,h,a,c){var d=m.EC.local();if(p!=null){if(p=p.Hd(),c!=null&&p.Ec()!=c.Ec()){if(p.od!=c.od)throw m.i.Xk();h=m.Tc.Nh(h,c,p)}}else if(c!=null)throw m.i.N();return d.V(T,h,a,null)},j.Qr=function(T,p,h,a){var c=m.Xl.local();if(p!=null){if(p=p.Hd(),a!=null&&p.Ec()!=a.Ec()){if(p.od!=a.od)throw m.i.Xk();h=m.Tc.Nh(h,a,p)}}else if(a!=null)throw m.i.N();return c.V(T,h,null)},j.Wy=function(T,p,h,a,c){c===void 0&&(c=0);var d=m.tL.local();if(c==4||c!==0)throw m.i.Ie();if(a!==null){if(a.od!==0)throw m.i.N("Unit must be a linear unit type");h=m.Tc.Nh(h,a,m.Tc.Zg(9001))}return d.V(T,h,p,c,null)},j.WQ=function(T,p,h,a){if(T===null)return 0;if(a==4||a!==0)throw m.i.Ie();if(T.getType()==197)T=j.TT(T);else if(T.getType()!=1736)return 0;if(a=m.cb.sc(p),T=m.cb.zh(T,p,a),T=m.UK.XQ([T])[0],h!==null){if(h.od!==2)throw m.i.N("Unit must be a area unit type");T=m.Tc.Nh(T,m.Tc.Zg(109404),h)}return T},j.ZQ=function(T,p,h,a){if(T=m.vL.local().V(T,p,a,null),h!==null){if(h.od!==0)throw m.i.N("Unit must be a linear unit type");T=m.Tc.Nh(T,m.Tc.Zg(9001),h)}return T},j.JU=function(T,p,h){if(T===null)return 0;var a=null;if(p!=null){if((a=p.Hd()).od==0&&(a=m.Tc.aG(a))==null&&h!==null)throw m.i.N();if(h!=null&&a.Ec()!=h.Ec()&&a.od!=h.od)throw m.i.Xk()}else if(h!=null)throw m.i.N();return T.getType()==1736||T.getType()==197?(T=T.Ke(),h!==null?m.Tc.Nh(T,a,h):T):0},j.KU=function(T,p,h){if(T===null||T.B()||1>T.Db())return 0;var a=null;if(p!=null){if(a=p.Hd(),h!=null&&a.Ec()!=h.Ec()&&a.od!=h.od)throw m.i.Xk()}else if(h!=null)throw m.i.N();T.getType()==1736||T.getType()==197?p=T.mg():m.aa.yd(T.getType())?(p=new m.Ta(T.description)).oc(T,!0):p=T,T=0,p=p.Ga();for(var c=new m.h,d=new m.h;p.$a();)for(;p.Ha();){var g=p.ha();g.Yp(c),g.Tr(d),T+=m.h.tb(c,d)}return a!==null&&h!==null&&(T=m.Tc.Nh(T,a,h)),T},j.fP=function(T){return T.points!==void 0?j.mS(T,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM):T.rings!==void 0?j.lG(T.rings,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM,"P"):T.paths!==void 0?j.lG(T.paths,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM,"L"):T.x!==void 0?j.nS(T):T.xmin!==void 0?j.lS(T):null},j.nS=function(T){if(T.x==null||T.x=="NaN")return new m.Sa;var p=new m.Sa(T.x,T.y);return T.z!==void 0&&T.z!==null&&p.wX(T.z),T.m!==void 0&&T.m!==null&&p.hX(T.m),p},j.lS=function(T){if(T.xmin==null||T.xmin=="NaN")return new m.Fh;var p=new m.Fh(T.xmin,T.ymin,T.xmax,T.ymax);return T.zmin!==void 0&&T.zmin!==null&&p.setInterval(1,0,T.zmin,T.zmax),T.mmin!==void 0&&T.mmin!==null&&p.setInterval(2,0,T.mmin,T.mmax),p},j.mS=function(T,p,h){var a=0,c=new m.de,d=3*T.points.length;d%2!=0&&d++,2>d&&(d=2);var g=m.O.truncate(3*T.points.length/2);4>g?g=4:16>g&&(g=16),d=m.Yc.Dn(d,0);var v=m.Yc.Dn(g);g=m.Yc.Dn(g);for(var b=0;b<T.points.length;b++)d.write(2*b,T.points[b][0]),d.write(2*b+1,T.points[b][1]),v.write(b,p||h?T.points[b][2]:NaN),g.write(b,h&&p?T.points[b][3]:NaN),a++;return a!=0&&(c.resize(a),c.hn(0,d)),p&&(c.re(1),c.hn(1,v)),h&&(c.re(2),c.hn(2,p==0?v:g)),c.Pc(16777215),c},j.lG=function(T,p,h,a){var c=0,d=2;if(a=="P"){var g=new m.Da;c=1,d=3}else g=new m.Ta;for(var v=m.Yc.Oh(0),b=m.Yc.Mr(0),C=0,M=0,O=[],L=[],q=0;q<T.length;q++){var U=T[q].length;if(O[q]=!1,a==="P"&&T[q][0][0]===T[q][T[q].length-1][0]&&T[q][0][1]===T[q][T[q].length-1][1]){var ee=h==0||T[q][0][3]===T[q][T[q].length-1][3]||T[q][0][3]===void 0&&T[q][T[q].length-1][3]===void 0;(p==0||T[q][0][2]===T[q][T[q].length-1][2]||T[q][0][2]===void 0&&T[q][T[q].length-1][2]===void 0)&&ee&&(O[q]=!0,--U)}U>=d?(L[q]=!1,M+=1,v.add(C),b.add(c),C+=U):L[q]=!0}for((a=3*C)%2!=0&&a++,2>a&&(a=2),4>(q=m.O.truncate(3*C/2))?q=4:16>q&&(q=16),a=m.Yc.Dn(a,0),c=m.Yc.Dn(q),d=m.Yc.Dn(q),q=U=0;q<T.length;q++)if(L[q]===!1)for(ee=0;ee<T[q].length;ee++){var Q=!1;ee===T[q].length-1&&O[q]===!0&&(Q=!0),Q||(a.write(2*U,T[q][ee][0]),a.write(2*U+1,T[q][ee][1]),c.write(U,p||h?T[q][ee][2]:NaN),d.write(U,h&&p?T[q][ee][3]:NaN),U++)}return C!=0&&(T=g,v.resize(M),b.resize(M),0<C&&(v.add(C),b.add(0)),T.hn(0,a),T.PJ(b),T.QJ(v)),p&&(g.re(1),g.hn(1,c)),h&&(g.re(2),g.hn(2,p==0?c:d)),g.Pc(16777215),g},j}()}(ye||(ye={})),function(m){m.Ex=function(){function j(){}return j.br=function(T){var p,h=0,a=T.length,c=T[0];for(p=0;p<a-1;p++){var d=T[p+1];h+=(d[0]-c[0])*(d[1]+c[1]),c=d}return 0<=h},j.rotate=function(T,p,h){p=p*Math.PI/180;var a=Math.cos(p),c=Math.sin(p);if(T.paths!==void 0){p={paths:[]};for(var d=0;d<T.paths.length;d++){for(var g=T.paths[d],v=[],b=0;b<g.length;b++){var C=g[b].slice(0);v.push(C);var M=a*(g[b][0]-h.x)-c*(g[b][1]-h.y)+h.x,O=c*(g[b][0]-h.x)+a*(g[b][1]-h.y)+h.y;C[0]=M,C[1]=O}p.paths.push(v),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM)}return p}if(T.rings!==void 0){for(p={rings:[]},d=0;d<T.rings.length;d++){g=T.rings[d],v=[];var L=j.br(g);for(b=0;b<g.length;b++)C=g[b].slice(0),v.push(C),M=a*(g[b][0]-h.x)-c*(g[b][1]-h.y)+h.x,O=c*(g[b][0]-h.x)+a*(g[b][1]-h.y)+h.y,C[0]=M,C[1]=O;j.br(v)!==L&&v.reverse(),p.rings.push(v),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM)}return p}if(T.x!==void 0)return p={x:a*(T.x-h.x)-c*(T.y-h.y)+h.x,y:c*(T.x-h.x)+a*(T.y-h.y)+h.y},T.z!==void 0&&(p.z=T.z),T.m!==void 0&&(p.m=T.m),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM),p;if(T.points!==void 0){for(p={points:[]},d=T.points,b=0;b<d.length;b++)(g=d[b].slice(0))[0]=a*(d[b][0]-h.x)-c*(d[b][1]-h.y)+h.x,g[1]=c*(d[b][0]-h.x)+a*(d[b][1]-h.y)+h.y,p.points.push(g);return T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM),p}return null},j.JQ=function(T,p){if(T.paths!==void 0){for(var h={paths:[]},a=0;a<T.paths.length;a++){for(var c=T.paths[a],d=[],g=0;g<c.length;g++){var v=c[g].slice(0);d.push(v);var b=p.x-c[g][0];v[0]=c[g][0]+2*b}h.paths.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.rings!==void 0){for(h={rings:[]},a=0;a<T.rings.length;a++){c=T.rings[a];var C=j.br(c);for(d=[],g=0;g<c.length;g++)v=c[g].slice(0),d.push(v),b=p.x-c[g][0],v[0]=c[g][0]+2*b;j.br(d)!==C&&d.reverse(),h.rings.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.x!==void 0)return b=p.x-T.x,h={x:T.x+2*b,y:T.y},T.z!==void 0&&(h.z=T.z),T.m!==void 0&&(h.m=T.m),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h;if(T.points!==void 0){for(h={points:[]},a=T.points,g=0;g<a.length;g++)c=a[g].slice(0),b=p.x-c[0],c[0]+=2*b,h.points.push(c);return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}return T.xmin!==void 0?(h={v:T.xmin,G:T.ymin,C:T.xmax,H:T.ymax},T.zmin!==void 0&&(h.zmin=T.zmin,h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin,h.mmax=T.mmax),b=p.x-T.xmin,h.xmax=T.xmin+2*b,b=p.x-T.xmax,h.xmin=T.xmax+2*b,T.zmin!==void 0&&(h.zmin=T.zmin),T.zmax!==void 0&&(h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin),T.mmax!==void 0&&(h.mmax=T.mmax),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h):null},j.KQ=function(T,p){if(T.paths!==void 0){for(var h={paths:[]},a=0;a<T.paths.length;a++){for(var c=T.paths[a],d=[],g=0;g<c.length;g++){var v=c[g].slice(0);d.push(v);var b=p.y-c[g][1];v[1]=c[g][1]+2*b}h.paths.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.rings!==void 0){for(h={rings:[]},a=0;a<T.rings.length;a++){c=T.rings[a];var C=j.br(c);for(d=[],g=0;g<c.length;g++)v=c[g].slice(0),d.push(v),b=p.y-c[g][1],v[1]=c[g][1]+2*b;j.br(d)!==C&&d.reverse(),h.rings.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.x!==void 0)return b=p.y-T.y,h={y:T.y+2*b,x:T.x},T.z!==void 0&&(h.z=T.z),T.m!==void 0&&(h.m=T.m),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h;if(T.points!==void 0){for(h={points:[]},a=T.points,g=0;g<a.length;g++)c=a[g].slice(0),b=p.y-c[1],c[1]+=2*b,h.points.push(c);return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}return T.xmin!==void 0?(h={v:T.xmin,G:T.ymin,C:T.xmax,H:T.ymax},T.zmin!==void 0&&(h.zmin=T.zmin,h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin,h.mmax=T.mmax),b=p.y-T.ymin,h.ymax=T.ymin+2*b,b=p.y-T.ymax,h.ymin=T.ymax+2*b,T.zmin!==void 0&&(h.zmin=T.zmin),T.zmax!==void 0&&(h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin),T.mmax!==void 0&&(h.mmax=T.mmax),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h):null},j}()}(ye||(ye={})),function(m){m.ZK=function(){function j(){}return j.Ig=function(T,p){switch(p==null&&(p=m.ee.og()),T){case 33:return new m.Sa(p);case 322:return new m.yb(p);case 197:return new m.Fh(p);case 550:return new m.de(p);case 1607:return new m.Ta(p);case 1736:return new m.Da(p);default:throw m.i.fa("invalid argument.")}},j}()}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.Te=m.ia.qf(p,-1),this.ua=new m.au,this.wl=h}return T.prototype.AW=function(p){this.ua.At(Math.min(this.Te.size,p)),this.ua.fn(p)},T.prototype.addElement=function(p,h){if(h===void 0)return this.eN(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);return a==-1&&(a=this.ua.Ph(),this.Te.set(h,a)),this.ua.addElement(a,p)},T.prototype.eN=function(p){var h=this.wl.jz(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);return a==-1&&(a=this.ua.Ph(),this.Te.set(h,a)),this.ua.addElement(a,p)},T.prototype.jd=function(p,h){if(h===void 0)this.KP(p);else{h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var c=this.ua.rc(a),d=-1;c!=-1;){var g=this.ua.lb(c);this.ua.ja(c)==p?(this.ua.jd(a,d,c),this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1))):d=c,c=g}}},T.prototype.KP=function(p){var h=this.wl.jz(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var c=this.ua.rc(a),d=-1;c!=-1;){var g=this.ua.lb(c);this.ua.ja(c)==p?(this.ua.jd(a,d,c),this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1))):d=c,c=g}},T.prototype.rR=function(p){return p=m.O.truncate(p%this.Te.size),(p=this.Te.get(p))==-1?-1:this.ua.rc(p)},T.prototype.ER=function(p){return this.ua.lb(p)},T.prototype.vd=function(p){var h=this.wl.jz(this.ja(p));h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var c=this.ua.rc(a),d=-1;c!=-1;){if(c==p)return this.ua.jd(a,d,c),void(this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1)));d=c,c=this.ua.lb(c)}throw m.i.N()},T.prototype.ja=function(p){return this.ua.ja(p)},T.prototype.clear=function(){this.Te=m.ia.qf(this.Te.size,-1),this.ua.clear()},T.prototype.size=function(){return this.ua.TF()},T}();m.dL=j}(ye||(ye={})),function(m){var j=function(){function T(){this.Li=new m.$c(3),this.ua=new m.$c(6),this.sT=!1,this.je=-1}return T.prototype.fl=function(p){this.Li.jd(p)},T.prototype.Pw=function(){return this.Li.Ce()},T.prototype.bv=function(p){this.ua.jd(p)},T.prototype.$A=function(){return this.ua.Ce()},T.prototype.WB=function(p,h){this.Li.S(p,1,h)},T.prototype.ex=function(p,h){this.Li.S(p,2,h)},T.prototype.gX=function(p,h){this.Li.S(p,3,h)},T.prototype.UB=function(p,h){this.ua.S(p,4,h)},T.prototype.jX=function(p,h){this.ua.S(p,3,h)},T.prototype.TJ=function(p,h){this.ua.S(p,2,h)},T.prototype.Ph=function(p){var h=this.$A();return this.ua.S(h,3,this.je),this.ua.S(h,4,0),this.ua.S(h,5,p),this.je!=-1&&this.TJ(this.je,h),this.je=h},T.prototype.bh=function(p){this.LE(p);var h=this.ua.T(p,2),a=this.ua.T(p,3);return h!=-1?this.jX(h,a):this.je=a,a!=-1&&this.TJ(a,h),this.bv(p),a},T.prototype.At=function(p){this.ua.De(p)},T.prototype.PF=function(p){return this.ua.T(p,5)},T.prototype.fX=function(p,h){this.ua.S(p,5,h)},T.prototype.addElement=function(p,h){return this.tS(p,h)},T.prototype.tS=function(p,h){var a=this.Pw();this.ex(a,-1),this.ua.T(p,0)==-1&&this.ua.S(p,0,a);var c=this.ua.T(p,1);return this.WB(a,c),c!=-1&&this.ex(c,a),this.ua.S(p,1,a),this.setData(a,h),this.UB(p,this.bs(p)+1),this.sT&&this.gX(a,p),a},T.prototype.jd=function(p,h){var a=this.we(h),c=this.lb(h);return a!=-1?this.ex(a,c):this.ua.S(p,0,c),c!=-1?this.WB(c,a):this.ua.S(p,1,a),this.fl(h),this.UB(p,this.bs(p)-1),c},T.prototype.fn=function(p){this.Li.De(p)},T.prototype.getData=function(p){return this.Li.T(p,0)},T.prototype.setData=function(p,h){this.Li.S(p,0,h)},T.prototype.lb=function(p){return this.Li.T(p,2)},T.prototype.we=function(p){return this.Li.T(p,1)},T.prototype.rc=function(p){return this.ua.T(p,0)},T.prototype.Fc=function(p){return this.ua.T(p,1)},T.prototype.clear=function(){for(var p=this.je;p!=-1;)p=this.bh(p)},T.prototype.LE=function(p){for(var h=this.Fc(p);h!=-1;){var a=h;h=this.we(a),this.fl(a)}this.ua.S(p,0,-1),this.ua.S(p,1,-1),this.UB(p,0)},T.prototype.B=function(){return this.Li.size==0},T.prototype.TF=function(){return this.Li.size},T.prototype.bs=function(p){return this.ua.T(p,4)},T.prototype.qz=function(p){return this.ua.T(p,3)},T}();m.jp=j}(ye||(ye={})),function(m){var j=function(){function T(p){p===void 0?(this.ug=new m.$c(2),this.ua=new m.$c(4),this.je=-1,this.Qv=!0):(this.ug=new m.$c(2),this.ua=new m.$c(p?4:2),this.je=-1,this.Qv=p)}return T.prototype.fl=function(p){this.ug.jd(p)},T.prototype.Pw=function(){return this.ug.Ce()},T.prototype.bv=function(p){this.ua.jd(p)},T.prototype.$A=function(){return this.ua.Ce()},T.prototype.Ph=function(){var p=this.$A();return this.Qv&&(this.ua.S(p,3,this.je),this.je!=-1&&this.ua.S(this.je,2,p),this.je=p),p},T.prototype.bh=function(p){for(var h=this.rc(p);h!=-1;){var a=h;h=this.lb(h),this.fl(a)}this.Qv&&(h=this.ua.T(p,2),a=this.ua.T(p,3),h!=-1?this.ua.S(h,3,a):this.je=a,a!=-1&&this.ua.S(a,2,h)),this.bv(p)},T.prototype.At=function(p){this.ua.De(p)},T.prototype.addElement=function(p,h){var a=this.ua.T(p,1),c=this.Pw();return a!=-1?this.ug.S(a,1,c):this.ua.S(p,0,c),this.ua.S(p,1,c),this.ug.S(c,0,h),c},T.prototype.fn=function(p){this.ug.De(p)},T.prototype.jd=function(p,h,a){h!=-1?(this.ug.S(h,1,this.ug.T(a,1)),this.ua.T(p,1)==a&&this.ua.S(p,1,h)):(this.ua.S(p,0,this.ug.T(a,1)),this.ua.T(p,1)==a&&this.ua.S(p,1,-1)),this.fl(a)},T.prototype.Hy=function(p,h){var a=this.ua.T(p,1),c=this.ua.T(h,0);c!=-1&&(a!=-1?this.ug.S(a,1,c):this.ua.S(p,0,c),this.ua.S(p,1,this.ua.T(h,1))),this.Qv&&(p=this.ua.T(h,2),a=this.ua.T(h,3),p!=-1?this.ua.S(p,3,a):this.je=a,a!=-1&&this.ua.S(a,2,p)),this.bv(h)},T.prototype.ja=function(p){return this.ug.T(p,0)},T.prototype.Sj=function(p,h){this.ug.S(p,0,h)},T.prototype.lb=function(p){return this.ug.T(p,1)},T.prototype.rc=function(p){return this.ua.T(p,0)},T.prototype.Jn=function(p){return this.ja(this.rc(p))},T.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},T.prototype.B=function(){return this.ug.size==0},T.prototype.TF=function(){return this.ug.size},T.prototype.qz=function(p){return this.ua.T(p,3)},T}();m.au=j}(ye||(ye={})),function(m){m.ta=function(){function j(){}return j.Wd=function(T,p,h){return p=p.xr(),T=T!=null&&T.Xd!==void 0?T.Xd(0):0,h&&(p*=4,T*=1.1),Math.max(T,p)},j.Er=function(T){return 2*Math.sqrt(2)*T},j.rN=function(T){return Math.sqrt(2)*T},j.kj=function(T,p,h){var a=new m.l;return p.A(a),j.Wd(T,a,h)},j.wE=function(T,p,h){return p=p.Tg(1,0).xr(),T=T!=null?T.Xd(1):0,h&&(p*=4,T*=1.1),Math.max(T,p)},j.mv=function(T,p){var h=new m.l;return T.xc(h),T=new m.l,p.xc(T),h.Zb(T),h},j.YN=function(T){var p=new m.l;if(T.xc(p),p.B())return null;var h=new m.du(p,8),a=-1,c=new m.l,d=!1;do for(var g=0,v=T.da();g<v;g++){if(T.Rj(g,c),(a=h.Jz(g,c,a))==-1){if(d)throw m.i.fa("internal error");T.yp(p,!1),d=!0,h.reset(p,8);break}d=!1}while(d);return h},j.nE=function(T){var p=new m.l;T.xc(p);for(var h=new m.du(p,8),a=-1,c=T.Ga(),d=new m.l,g=!1;c.$a();)for(;c.Ha();){var v=c.ha(),b=c.wb();if(v.A(d),(a=h.Jz(b,d,a))==-1){if(g)throw m.i.Qa();T.yp(p,!1),g=!0,h.reset(p,8),c.Zi();break}}return h},j.jj=function(T,p){var h=new m.l;T.xc(h);for(var a=new m.du(h,8),c=-1,d=new m.l,g=T.Ga(),v=!1;g.$a();)for(;g.Ha();){var b=g.ha(),C=g.wb();if(b.A(d),d.isIntersecting(p)&&(c=a.Jz(C,d,c))==-1){if(v)throw m.i.fa("internal error.");T.yp(h,!1),v=!0,a.reset(h,8),g.Zi();break}}return a},j.oE=function(T,p){for(var h=new m.du(p,8),a=new m.h,c=!1,d=new m.l,g=0;g<T.I();g++)if(T.D(g,a),p.contains(a)&&(d.K(a),h.vj(g,d)==-1)){if(c)throw m.i.Qa();c=!0,g=new m.l,T.yp(g,!1),h.reset(g,8),g=-1}return h},j.lR=function(T,p,h){var a=new m.l,c=new m.l;T.xc(a),p.xc(c),a.W(h,h),c.W(h,h);var d=new m.l;d.K(a),d.Ea(c),T=T.Ga(),p=p.Ga();var g=new m.xC;g.aC(h);var v=!1;for(g.pK();T.$a();)for(;T.Ha();)T.ha().A(a),a.isIntersecting(d)&&(v=!0,(h=new m.l).K(a),g.JD(T.wb(),h));if(g.iF(),!v)return null;for(a=!1,g.oK();p.$a();)for(;p.Ha();)p.ha().A(c),c.isIntersecting(d)&&(a=!0,(h=new m.l).K(c),g.ED(p.wb(),h));return g.hF(),a?g:null},j.mR=function(T,p,h,a,c){var d=T.getType(),g=p.getType(),v=new m.l,b=new m.l;T.xc(v),p.xc(b),v.W(h,h),b.W(h,h);var C=new m.l;C.K(v),C.Ea(b);var M=new m.xC;M.aC(h);var O=!1;M.pK();var L=0;for(h=T.da();L<h;L++)a&&d==1736&&!T.Ev(L)||(T.Rj(L,v),v.isIntersecting(C)&&(O=!0,M.JD(L,v)));if(M.iF(),!O)return null;for(T=!1,M.oK(),a=0,h=p.da();a<h;a++)c&&g==1736&&!p.Ev(a)||(p.Rj(a,b),b.isIntersecting(C)&&(T=!0,M.ED(a,b)));return M.hF(),T?M:null},j.Ru=function(T,p,h){if(T!=p)for(var a=0;a<h;a++)T[a]==null?T[a]=m.h.al(p[a]):T[a].L(p[a])},j.Jy=function(T,p,h,a){var c=0;for(a+=0;c<a;h++,c++)T[c]==null&&(T[c]=[0,0]),T[c][0]=p[h].x,T[c][1]=p[h].y},j.Iy=function(T,p,h,a){var c=p,d=0;for(p=a+p;c<p;d++,c++)T[c]==null?T[c]=m.h.construct(h[d][0],h[d][1]):T[c].ma(h[d][0],h[d][1])},j.kP=function(T,p,h){if(T!=p)for(var a=0;a<h;a++)T[a]==null?T[a]=new m.Sa(p[a]):p[a].copyTo(T[a])},j.vE=function(T,p,h,a){var c=0;return T!=null&&(c=T.Xd(0),a&&!h||T==null||(c+=1.01*T.vz(0))),h&&(p*=4,c*=1.01),Math.max(c,p)},j.ty=function(T,p,h){return j.vE(T,p.xr(),h,!1)},j.gO=function(T,p){var h=new m.l;return p.A(h),j.ty(T,h,!0)},j.uy=function(T,p){return j.vE(T,p.xr(),!1,!0)},j.Hu=function(T,p){var h=new m.l;return p.A(h),j.uy(T,h)},j.AG=function(T,p,h,a){a*=a;var c=new m.h;if(c.uc(T,p),(T=new m.h).uc(h,p),p=c.Sk(),h=T.Sk(),p<=a&&h<=a)return!0;var d=m.lc.ox(c.wi(T));return(d<=a*p||d<=a*h)&&0<=c.Qh(T)},j.dK=function(T,p,h,a){for(var c=0;c<p;c++){var d=T[c].y,g=m.O.Rk(d,h,a);g!=d&&(T[c].y=g)}},j}()}(ye||(ye={})),function(m){var j,T,p=function(){function d(g){this.Ya=g}return d.prototype.compare=function(g,v,b){g=g.ja(b),b=this.Ya.nk(v);var C=this.Ya.nk(g);return b<C?-1:b==C?c.gq(v)&&c.Gv(g)?-1:c.gq(g)&&c.Gv(v)?1:0:1},d}(),h=function(){function d(g){this.Ya=g}return d.prototype.nr=function(g,v,b){this.Ya.GX(b,g,v)},d.prototype.$p=function(g){return this.Ya.nk(g)},d}();(T=j||(j={}))[T.initialize=0]="initialize",T[T.pIn=1]="pIn",T[T.pL=2]="pL",T[T.pR=3]="pR",T[T.pT=4]="pT",T[T.right=5]="right",T[T.left=6]="left",T[T.all=7]="all";var a=function(){function d(){this.Ya=null,this.Qi=new m.Nc,this.hi=new m.ia(0),this.sg=[0,0]}return d.prototype.Xi=function(g,v){this.Qi.oa=g.oa-v,this.Qi.va=g.va+v,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.EB=function(g,v,b){if(g>v)throw m.i.N();this.Qi.oa=g-b,this.Qi.va=v+b,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.Uo=function(g,v){this.Qi.oa=g-v,this.Qi.va=g+v,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.next=function(){if(!this.Ya.lq)throw m.i.Hb();if(0>this.he)return-1;for(var g=!0;g;)switch(this.sg[this.he]){case 1:g=this.FU();break;case 2:g=this.GU();break;case 3:g=this.HU();break;case 4:g=this.IU();break;case 5:g=this.GW();break;case 6:g=this.kT();break;case 7:g=this.tN();break;case 0:g=this.Gz();break;default:throw m.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},d.construct=function(g){var v=new d;return v.Ya=g,v.hi.Jb(20),v.he=-1,v},d.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},d.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var g=this.Ya.Np(this.Lc);return this.Qi.va<g?(g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=6),!0):g<this.Qi.oa?(g=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.Zr(g),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),!0)},d.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var g=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.Zr(g),this.sg[++this.he]=5),!0}return g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),(g=this.Ya.lk(this.Lc))!=-1&&this.hi.add(g),!0},d.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var g=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=6),!0}return g=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),(g=this.Ya.qj(this.Lc))!=-1&&this.hi.add(g),!0},d.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var g=this.Ya.mk(this.Lc);return g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},d.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&c.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},d.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&c.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},d.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&c.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},d.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},d.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},d.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},d}();m.EY=a;var c=function(){function d(g){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=g,this.lq=this.Sv=!1}return d.prototype.kr=function(){this.Nk(!0)},d.prototype.Br=function(g,v){if(!this.Sv)throw m.i.Hb();this.Fj.push(new m.Nc(g,v))},d.prototype.Fp=function(){if(!this.Sv)throw m.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},d.prototype.vj=function(g){if(!this.Sf||!this.lq)throw m.i.N("invalid call");if(this.kf==-1){var v=this.Fj.length;if(this.iA){var b=new m.ia(0);b.Jb(2*v),this.bJ(b),this.$h.Jb(2*v),this.$h.resize(0),this.aJ(b),this.Km.resize(v,-1),this.Km.Wj(-1,0,v),this.iA=!1}else this.Km.Wj(-1,0,v);this.kf=this.Tu()}v=this.pG(g<<1,this.kf),b=this.$f.addElement(1+(g<<1),this.xz(v)),this.VJ(v,b),this.Km.set(g,v),this.Zv++},d.prototype.remove=function(g){if(!this.Sf||!this.lq)throw m.i.fa("invalid call");var v=this.Km.get(g);if(v==-1)throw m.i.N("the interval does not exist in the interval tree");this.Km.set(g,-1),this.Zv--;var b=this.xz(v),C=this.$f.ZR(b);this.$f.vd(this.wR(v),b),this.$f.vd(this.TR(v),b),(g=this.$f.size(b))==0&&(this.$f.MP(b),this.ZJ(C,-1)),this.Ej.jd(v),b=this.UF(C);var M=this.qj(C),O=this.lk(C);for(v=0;!(0<g||C==this.kf||M!=-1&&O!=-1);)C==this.qj(b)?M!=-1?(this.Ok(b,M),this.Uj(M,b),this.Ok(C,-1)):O!=-1?(this.Ok(b,O),this.Uj(O,b),this.Qk(C,-1)):this.Ok(b,-1):M!=-1?(this.Qk(b,M),this.Uj(M,b),this.Ok(C,-1)):O!=-1?(this.Qk(b,O),this.Uj(O,b),this.Qk(C,-1)):this.Qk(b,-1),this.Uj(C,-1),v++,C=b,g=(b=this.mk(C))!=-1?this.$f.size(b):0,M=this.qj(C),O=this.lk(C),b=this.UF(C)},d.prototype.reset=function(){if(!this.Sf||!this.lq)throw m.i.N("invalid call");this.Nk(!1)},d.prototype.size=function(){return this.Zv},d.prototype.getIterator=function(){return a.construct(this)},d.prototype.bJ=function(g){for(var v=this.Fj.length,b=0;b<2*v;b++)g.add(b);this.HX(g,2*v)},d.prototype.aJ=function(g){for(var v=NaN,b=0;b<g.size;b++){var C=g.get(b),M=this.nk(C);M!=v&&(this.$h.add(C),v=M)}},d.prototype.vS=function(){var g=this.Fj.length,v=new m.ia(0);v.Jb(2*g),this.bJ(v),this.$h.Jb(2*g),this.$h.resize(0),this.aJ(v),this.Ej.De(g),this.Ti.fn(2*g);var b=m.Yc.Oh(g);for(b.Wj(-1,0,g),this.kf=this.Tu(),g=0;g<v.size;g++){var C=v.get(g),M=b.get(C>>1);M!=-1?this.VJ(M,this.Ti.addElement(this.xz(M),C)):(M=this.pG(C,this.kf),b.set(C>>1,M))}},d.prototype.pG=function(g,v){var b=v,C=v,M=-1,O=0,L=this.$h.size-1,q=0,U=g>>1,ee=NaN,Q=NaN,ge=!0,ve=this.DR(U);for(U=this.AR(U);ge;){O<L?(q=O+m.O.truncate((L-O)/2),this.gz(b)==-1&&this.FJ(b,this.$h.get(q),this.$h.get(q+1))):this.gz(b)==-1&&this.FJ(b,this.$h.get(O),this.$h.get(O));var fe=this.Np(b);if(U<fe)v!=-1&&(v==b?(C=b,ee=fe,Q=(v=this.qj(b))!=-1?this.Np(v):NaN):Q>fe&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Qk(b,v),this.Sf&&(this.Uj(b,C),this.Uj(v,b)),C=b,ee=fe,v=-1,Q=NaN)),(L=this.xR(b))==-1&&(L=this.Tu(),this.dX(b,L)),b=L,L=q;else if(ve>fe)v!=-1&&(v==b?(C=b,ee=fe,Q=(v=this.lk(b))!=-1?this.Np(v):NaN):Q<fe&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Ok(b,v),this.Sf&&(this.Uj(b,C),this.Uj(v,b)),C=b,ee=fe,v=-1,Q=NaN)),(O=this.UR(b))==-1&&(O=this.Tu(),this.oX(b,O)),b=O,O=q+1;else{(ge=this.mk(b))==-1&&(ge=this.zP(b),this.ZJ(b,ge));var Ce=this.fN(ge,g);M=this.xP(),this.qX(M,ge),this.cX(M,Ce),b!=v&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Sf&&this.Uj(b,C),v!=-1&&(Q<fe?this.Ok(b,v):this.Qk(b,v),this.Sf&&this.Uj(v,b))),ge=!1}}return M},d.prototype.Tu=function(){return this.me.Ce()},d.prototype.zP=function(g){return this.Sf?this.$f.Pr(g):this.Ti.Ph(g)},d.prototype.xP=function(){return this.Ej.Ce()},d.prototype.Nk=function(g){g?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=m.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=m.Yc.Oh(0),this.$f=new m.Yj,this.$f.Vo(new p(this))):this.$f.clear():this.Ti==null?this.Ti=new m.jp:this.Ti.clear(),this.me==null?(this.Ej=new m.$c(3),this.me=new m.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},d.prototype.FJ=function(g,v,b){this.XW(g,v),this.YW(g,b)},d.prototype.Np=function(g){var v=this.gz(g);return v==-1?NaN:(v=this.nk(v))==(g=this.nk(this.gR(g)))?v:.5*(v+g)},d.prototype.XW=function(g,v){this.me.S(g,0,v)},d.prototype.YW=function(g,v){this.me.S(g,1,v)},d.prototype.dX=function(g,v){this.me.S(g,3,v)},d.prototype.oX=function(g,v){this.me.S(g,4,v)},d.prototype.ZJ=function(g,v){this.me.S(g,2,v)},d.prototype.Ok=function(g,v){this.me.S(g,5,v)},d.prototype.Qk=function(g,v){this.me.S(g,6,v)},d.prototype.Uj=function(g,v){this.me.S(g,7,v)},d.prototype.qX=function(g,v){this.Ej.S(g,0,v)},d.prototype.fN=function(g,v){return this.Sf?this.$f.addElement(v,g):this.Ti.addElement(g,v)},d.prototype.cX=function(g,v){this.Ej.S(g,1,v)},d.prototype.VJ=function(g,v){this.Ej.S(g,2,v)},d.prototype.kl=function(g){return this.Sf?this.$f.rc(g):this.Ti.rc(g)},d.prototype.Zr=function(g){return this.Sf?this.$f.Fc(g):this.Ti.Fc(g)},d.gq=function(g){return!(1&g)},d.Gv=function(g){return!(1&~g)},d.prototype.gz=function(g){return this.me.T(g,0)},d.prototype.gR=function(g){return this.me.T(g,1)},d.prototype.mk=function(g){return this.me.T(g,2)},d.prototype.xR=function(g){return this.me.T(g,3)},d.prototype.UR=function(g){return this.me.T(g,4)},d.prototype.qj=function(g){return this.me.T(g,5)},d.prototype.lk=function(g){return this.me.T(g,6)},d.prototype.UF=function(g){return this.me.T(g,7)},d.prototype.xz=function(g){return this.Ej.T(g,0)},d.prototype.wR=function(g){return this.Ej.T(g,1)},d.prototype.TR=function(g){return this.Ej.T(g,2)},d.prototype.DR=function(g){return this.Fj[g].oa},d.prototype.AR=function(g){return this.Fj[g].va},d.prototype.HX=function(g,v){this.Am==null&&(this.Am=new m.Xt);var b=new h(this);this.Am.sort(g,0,v,b)},d.prototype.GX=function(g,v,b){var C=this;g.Vd(v,b,function(M,O){var L=C.nk(M),q=C.nk(O);return L<q||L==q&&d.gq(M)&&d.Gv(O)?-1:1})},d.prototype.nk=function(g){var v=this.Fj[g>>1];return d.gq(g)?v.oa:v.va},d}();m.sr=c}(ye||(ye={})),function(m){var j=function(){function T(p){if(p==null)throw m.i.fa("Invalid arguement");this.hf=p;var h=p.nR();h.hS()?p.ef.IG()?this.lo=m.si.PannableFold:this.lo=m.si.Clip:this.lo=m.si.DontClip,h.iS()?p.Yf.IG()?this.Qm=m.si.PannableFold:this.Qm=m.si.Clip:this.Qm=m.si.DontClip,this.Bm=h.Jr,this.mH=h.Vu,p=this.hf.sH,this.aH=p.hs(2147483648),this.Uv=p.hs(1073741824)}return T.zh=function(p,h,a){return h.ww.zh(p,a)},T.Rt=function(p,h,a,c){return p.ww.Rt(h,a,c)},T.Qt=function(p,h,a,c){if(a=0>a?h.length:a,(p=p.ww.Rt(h,a,c))==a)return p;for(var d=h=0;d<a;d++){var g=c[d];g.isNaN()||(h<d&&c[h].L(g),h++)}for(;h<a;h++)c[h].Rc();return p},T.transform=function(p,h,a,c,d){if(p.isIdentity())return m.ta.kP(c,h,a),a;for(var g=[],v=0,b=0;b<a;){for(var C=Math.min(g.length,a-b),M=b,O=0;M<C;M++,O++)g[O]==null?g[O]=h[M].D():h[M].D(g[O]);var L=d?T.Qt(p,g,C,g):T.Rt(p,g,C,g);for(O=M=0;M<L;M++,O++)c[b]==null&&(c[b]=new m.Sa(h[b])),c[b].Cb(g[O]);b+=C,v+=L}return v},T.prototype.Rt=function(p,h,a){if(this.hf.isIdentity())return p!=a&&m.ta.Ru(a,p,h),h;var c=this.hf.ef,d=this.hf.Yf,g=c.Sb(),v=d.Sb();if(g==0&&g===v){var b=c.Qp();return d=b/(d=d.Qp()),(b=new m.Dd).setScale(d,d),b.eY(p,h,a),h}if(b=m.O.Fu(Math.min(h,64)),g==3){var C=c.Ji;g=(c=C.fk()).Sb(),a!=p&&m.ta.Ru(a,p,h),m.zb.$k(C,a,h,!0),C.Qt(m.bm.forward,a,h),m.zb.Zk(C,a,h,!0)}if(g==3||v===3)throw m.i.fa("image: transform_in_place_");if(g==2)this.lo==m.si.Clip?(a!=p&&m.ta.Ru(a,p,h),p=c.ml(),m.zb.OS(p,c,a,h)):(a!=p&&m.ta.Ru(a,p,h),c.Wc()&&(g=c.Xd(0),C=c.Oe(),m.zb.EX(a,h,C,g),m.zb.qF(a,h,c,0))),m.zb.IL(c,a,h,b);else for(g=c.Xd(0),C=c.Oe(),c=0;c<h;c++)m.zb.FX(p[c],C,g,a[c]);for(m.zb.GL(this.hf,a,h,b),p=0,(v=v==2)?p=d.zi():isNaN(this.Bm)||(p=this.Bm),v&&this.Qm!=m.si.Clip||m.zb.qF(a,h,d.sc(),p),v&&(m.zb.yG(a,h,d,this.Qm),m.zb.HL(d,a,h,b)),p=h,c=0;c<h;++c)a[c].isNaN()&&p--;return p},T.prototype.zh=function(p,h){if(this.hf.isIdentity()||p.B())return p;if(p.getType()==33)return this.XI(p);var a=this.hf.ef,c=this.hf.Yf,d=a.Sb(),g=c.Sb();if(d==0&&d==g)return h=a.Qp(),h/=c=c.Qp(),(c=new m.Dd).setScale(h,h),(p=m.aa.jg(p)).Oc(c),p;switch(p.getType()){case 1607:case 1736:p=this.VI(p,h);break;case 550:p=this.fW(p,h);break;case 197:p=this.eW(p,h);break;default:throw m.i.fa("")}return p},T.prototype.XI=function(p){var h=p.D(),a=[];return a[0]=h,this.Rt(a,1,a),(p=new m.Sa(p)).Cb(a[0]),p},T.prototype.VI=function(p,h){if(p.tm())throw m.i.fa("curves not supported");var a=p.getType();if(a==1736)return this.gW(p,h);if(a==1607)return this.hW(p,h);throw m.i.fa("projectMultiPath")},T.prototype.gW=function(p,h){var a=this.hf.ef,c=this.hf.Yf,d=a.Sb(),g=c.Sb(),v=m.O.Fu(Math.min(p.I(),64)),b=m.Da.jg(p);d==3&&(d=(a=(p=a.Ji).fk()).Sb(),b=p.$k(b,!0),this.wp(p,m.bm.forward,b),b=p.Zk(b,!0)),p=null,g==3&&(g=(c=(p=c.Ji).fk()).Sb());var C=d==2,M=g==2,O=M?c.sc():c,L=!M&&!this.Uv;g=!1;var q=b;if(C){if((q=m.zb.UI(q,a,this.lo,h)).B())return q}else{if(b=new m.l,q.xc(b),d=a.Oe(),b.G<d.G||b.H>d.H){var U=m.l.construct(b.v-1,d.G,b.C+1,d.H);if((q=m.ri.Nu(q,U,a,NaN,0,h)).B())return q}b.R()>2*d.R()&&(q=m.zb.Hp(q,-2*d.R(),2*d.R(),a,!0,0,!0,h))}b=this.mH,(d=!isNaN(b))&&(q=m.Xl.local().V(q,b,h)),U=M?c.kk():null;var ee=NaN;C&&(ee=a.zi());var Q=c.Wr()!=null;if(this.aH)C&&(m.zb.ur(a,ee,q,v),d&&(C=a.hh(),b*=(ee=a.sc().hh())/C)),m.zb.tr(this.hf,q,L,v),d&&(C=a.sc().hh(),b*=(ee=c.sc().hh())/C),a=q;else{var ge=new m.Ta(q.description);ge.DD(q),C&&(m.zb.ur(a,ee,ge,v),d&&(C=a.hh(),b*=(ee=a.sc().hh())/C)),m.zb.tr(this.hf,ge,L,v),d&&(C=a.sc().pm(),b*=(ee=c.sc().pm())/C),L=NaN,M?(U=c.kk(),L=c.zi()):isNaN(this.Bm)||(L=this.Bm),C=T.tv(a)|T.tv(c),ee=10*O.Xd(0),this.Uv&&(C=3,ee=0),a=m.zb.UQ(q,a,ge,O,L,h,C,ee)}return Q&&(a=m.zb.XD(a,c,h)),M&&(g||(M=O.Oe().R(),a.Tg(0,0).R()>=M-O.Xd(0)&&(O=U.getNorthPoleLocation(),M=U.getSouthPoleLocation(),q=U.getNorthPoleGeometry(),U=U.getSouthPoleGeometry(),L=0,q==m.Cg.PE_POLE_POINT&&O!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(L=1),U==m.Cg.PE_POLE_POINT&&M!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(L|=2),L!==0&&(g=!0))),a=m.zb.Mz(a,c,this.Qm,h),d&&(a=m.Xl.local().V(a,b,h)),m.zb.Lx(c,a,v)),a.B()||(g&&(a=m.Yl.local().V(a,c,!1,h)),p!=null&&(a=p.Zk(a,!1),this.wp(p,m.bm.reverse,a),a=p.$k(a,!1))),a},T.tv=function(p){if(p.Sb()!=2)return 0;var h=0,a=p.kk();p=a.getNorthPoleLocation();var c=a.getSouthPoleLocation(),d=a.getNorthPoleGeometry();return a=a.getSouthPoleGeometry(),d==m.Cg.PE_POLE_POINT&&p!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(h=1),a==m.Cg.PE_POLE_POINT&&c!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(h|=2),h},T.prototype.hW=function(p,h){var a=this.hf.ef,c=this.hf.Yf,d=a.Sb(),g=c.Sb(),v=m.O.Fu(Math.min(p.I(),64)),b=m.Ta.jg(p);d==3&&(d=(a=(p=a.Ji).fk()).Sb(),b=p.$k(b,!0),this.wp(p,m.bm.forward,b),b=p.Zk(b,!0)),p=null,g==3&&(g=(c=(p=c.Ji).fk()).Sb());var C=d==2;d=(g=g==2)?c.sc():c;var M=!g&&!this.Uv;if(C){if((b=m.zb.UI(b,a,this.lo,h)).B())return b}else{var O=new m.l;b.xc(O);var L=a.Oe();if((O.G<L.G||O.H>L.H)&&(O=m.l.construct(O.v-1,L.G,O.C+1,L.H),(b=m.ri.Nu(b,O,a,NaN,0,h)).B()))return b}var q=NaN;C&&(q=a.zi()),O=c.Wr()!=null,L=this.mH;var U=!isNaN(L);if(U&&(b=m.Xl.local().V(b,L,h)),this.aH)C&&m.zb.ur(a,q,b,v),U&&(C=a.hh(),L*=(q=a.sc().hh())/C),m.zb.tr(this.hf,b,M,v),U&&(C=a.sc().hh(),L*=(q=c.sc().hh())/C),a=b;else{var ee=new m.Ta(b.description);ee.DD(b),C&&(m.zb.ur(a,q,ee,v),U&&(C=a.hh(),L*=(q=a.sc().hh())/C)),m.zb.tr(this.hf,ee,M,v),U&&(C=a.sc().hh(),L*=(q=c.sc().hh())/C),M=NaN,g?M=c.zi():isNaN(this.Bm)||(M=this.Bm),C=T.tv(a)|T.tv(c),q=10*d.Xd(0),this.Uv&&(C=3,q=0),a=m.zb.VQ(b,a,ee,d,M,h,C,q)}return O&&(a=m.zb.XD(a,c,h)),g&&(a=m.zb.Mz(a,c,this.Qm,h),U&&(a=m.Xl.local().V(a,L,h)),m.zb.Lx(c,a,v)),a.B()||p!=null&&(a=p.Zk(a,!1),this.wp(p,m.bm.reverse,a),a=p.$k(a,!1)),a},T.prototype.eW=function(p,h){var a=(p.ca()+p.R())/400;return a!=0?(a=m.Xl.local().V(p,a,h),a=this.VI(a,h),h=p.Ia(),a.bn(h)):(h=new m.Sa(p.Ip()),a=this.XI(h),h=p.Ia(),a.B()?h.Oa():(p.copyTo(h),p=a.D(),h.K(p.x,p.y,p.x,p.y))),h},T.prototype.fW=function(p,h){p=m.aa.jg(p);var a=this.hf.ef,c=this.hf.Yf,d=a.Sb(),g=c.Sb(),v=m.O.Fu(Math.min(p.I(),64));if(d==3){var b=a.Ji;d=(a=b.fk()).Sb(),p=b.Zk(p,!0),this.wp(b,m.bm.forward,p),p=b.$k(p,!0)}if(d==2){if(this.lo==m.si.Clip?p=m.Xj.local().V(p,a.ml(),a,h):a.Wc()&&(d=new m.l,p.xc(d),a.Oe().contains(d)||(this.lo==m.si.PannableFold&&(p=m.zb.lj(p,a)),m.zb.Jt(p,a.Oe(),a.Xd(0),!0),p=m.zb.Fn(p,a,0,!0,0,h))),p.B())return p;m.zb.ur(a,0,p,v)}else m.zb.Jt(p,a.Oe(),a.Xd(0),!0);return m.zb.tr(this.hf,p,!1,v),a=0,d=!1,b=null,g==3&&(d=!0,g=(c=(b=c.Ji).fk()).Sb()),(g=g==2)?a=c.zi():isNaN(this.Bm)||(a=this.Bm),g&&this.Qm!=m.si.Clip||(p=m.zb.Fn(p,c.sc(),a,!1,0,h)),g&&(p=m.zb.Mz(p,c,this.Qm,h),m.zb.Lx(c,p,v),p.B())||d&&(p=b.Zk(p,!0),this.wp(b,m.bm.reverse,p),p=b.$k(p,!0)),p},T.prototype.wp=function(p,h,a){var c=a.I();if(c!=0){for(var d=a.ub(0),g=m.O.lg(200,0),v=[],b=0;b<c;){var C=Math.min(100,c-b);d.Vw(2*b,2*C,g,2,!0);for(var M=0;M<C;++M)v[M]=m.h.construct(g[2*b],g[2*b+1]);p.Qt(h,v,C),b+=C}a.Pc(1993)}},T.Uy=function(p,h,a){if(p==null||h==null||!h.Wc())throw m.i.fa("Invalid Arguement");if(p.B())return p;var c=p.getType();return c==197?(c=new m.Da(p.description)).ad(p,!1):m.aa.yd(c)?(c=new m.Ta(p.description)).oc(p,!0):c=p,(c=m.zb.lj(c,h)).B()?c:m.zb.Fn(c,h,0,c!=p,0,a)},T.nj=function(p,h,a,c){if(p==null||h==null||!h.Wc())throw m.i.fa("Invalid Arguement");if(p.B())return p;var d=p.getType();if(m.aa.Hc(d)){p=m.zb.lj(p,h),d=new m.l,p.A(d);for(var g=m.ta.ty(h,d,!1),v=h.gh(),b=Math.floor((d.v-v.v)/v.R())*v.R()+v.v;b<d.C;)b>d.v+g&&b<d.C-g&&(p=m.zb.uS(p,h,a,b)),b+=v.R()}else{if(d==197)return(d=new m.Da(p.description)).ad(p,!1),T.nj(d,h,a,c);if(m.aa.yd(d))return(d=new m.Ta(p.description)).oc(p,!0),T.nj(d,h,a,c)}return T.Uy(p,h,c)},T}();m.bu=j}(ye||(ye={})),function(m){var j=function(T){function p(h,a,c,d){var g=T.call(this)||this;return h===void 0?g.description=m.ee.og():c===void 0?g.description=h:(g.description=m.ee.og(),g.ZB(h,a),g.Ql(c,d)),g}return ri(p,T),p.prototype.getType=function(){return 322},p.prototype.Qb=function(){var h=this.sa-this.pa,a=this.na-this.la;return Math.sqrt(h*h+a*a)},p.prototype.Bi=function(h){var a=this.sa-this.pa,c=this.na-this.la;return Math.sqrt(a*a+c*c)<=h},p.prototype.Pn=function(){return!1},p.prototype.kg=function(){var h=new m.h;return h.uc(this.wc(),this.ac()),h},p.cP=function(h,a){return new p(h.x,h.y,a.x,a.y)},p.prototype.bn=function(h){h.Oa(),h.Nf(this.description);var a=new m.l;this.A(a),h.Xo(a),a=1;for(var c=this.description.Aa;a<c;a++)for(var d=this.description.kd(a),g=m.ra.Va(d);a<g;a++){var v=this.Tg(d,0);h.setInterval(d,0,v)}},p.prototype.A=function(h){h.K(this.sa,this.na,this.pa,this.la),h.normalize()},p.prototype.Qo=function(h){h.Oa(),h.Zb(this.sa,this.na,this.Od(0,1,0)),h.Zb(this.pa,this.la,this.Od(1,1,0))},p.prototype.Oc=function(h){if(h instanceof m.Dd){this.vc();var a=new m.h;a.x=this.sa,a.y=this.na,h.Eh(a,a),this.sa=a.x,this.na=a.y,a.x=this.pa,a.y=this.la,h.Eh(a,a),this.pa=a.x,this.la=a.y}else this.vc(),(a=new m.Nd).x=this.sa,a.y=this.na,a.z=this.Od(0,1,0),a=h.fp(a),this.sa=a.x,this.na=a.y,this.tn(0,1,0,a.z),a.x=this.pa,a.y=this.la,a.z=this.Od(1,1,0),a=h.fp(a),this.pa=a.x,this.la=a.y,this.tn(1,1,0,a.z)},p.prototype.Ia=function(){return new p(this.description)},p.prototype.Tx=function(h,a){return(this.pa-h-(this.sa-h))*(this.la-a+(this.na-a))*.5},p.prototype.vx=function(h){return h*this.Qb()},p.prototype.NG=function(h){return h/this.Qb()},p.prototype.DF=function(h){return m.lc.hq(this.sa,this.pa,h)},p.prototype.fR=function(h){return m.lc.hq(this.na,this.la,h)},p.prototype.dl=function(h,a){var c=new m.ig;return this.ah(h,a,c),c.get()},p.prototype.ah=function(h,a,c){if(c==null)throw m.i.N();c.Or(),(c=c.get()).Nf(this.description);var d=new m.h;this.hc(h,d),c.ZB(d.x,d.y),this.hc(a,d),c.Ql(d.x,d.y),d=1;for(var g=this.description.Aa;d<g;d++)for(var v=this.description.Ed(d),b=m.ra.Va(v),C=0;C<b;C++){var M=this.Uc(h,v,C);c.YB(v,C,M),M=this.Uc(a,v,C),c.OB(v,C,M)}},p.prototype.Uc=function(h,a,c){if(a==0)return c==0?this.hc(h).x:this.hc(h).y;switch(m.ra.lz(a)){case 0:return .5>h?this.wv(a,c):this.gv(a,c);case 1:var d=this.wv(a,c);return a=this.gv(a,c),m.lc.hq(d,a,h);case 2:throw m.i.fa("not implemented")}throw m.i.Qa()},p.prototype.fe=function(h,a){var c=this.pa-this.sa,d=this.la-this.na,g=c*c+d*d;return g==0?.5:(h=((h.x-this.sa)*c+(h.y-this.na)*d)/g,a||(0>h?h=0:1<h&&(h=1)),h)},p.prototype.cq=function(h,a,c,d){if(h){if((h=this.la-this.na)==0)return a==this.la?-1:0;if(0>(a=(a-this.na)/h)||1<a)return 0;c!=null&&(c[0]=this.DF(a))}else{if((h=this.pa-this.sa)==0)return a==this.pa?-1:0;if(0>(a=(a-this.sa)/h)||1<a)return 0;c!=null&&(c[0]=this.fR(a))}return d!=null&&(d[0]=a),1},p.prototype.Pe=function(h,a){var c=this.la-this.na;return c==0?h==this.la?a:NaN:(h=(h-this.na)/c,a=this.DF(h),h==1&&(a=this.pa),a)},p.prototype.ru=function(h,a,c){return 0<=this.rp(h.x,h.y,a,c)},p.prototype.vi=function(h,a,c){return 0<=this.rp(h,a,c,!0)},p.prototype.qs=function(h,a){return this.ru(h,a,!1)},p.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var h=this.sa;this.sa=this.pa,this.pa=h,h=this.na,this.na=this.la,this.la=h,h=0;for(var a=this.description.Oq-2;h<a;h++){var c=this.ka[h];this.ka[h]=this.ka[h+a],this.ka[h+a]=c}}},p.prototype.uu=function(h,a){(a=m.h.construct(h,a)).sub(this.ac());var c=new m.h;return c.uc(this.wc(),this.ac()),(h=c.wi(a))>(a=8881784197001252e-31*(Math.abs(c.x*a.y)+Math.abs(c.y*a.x)))?-1:h<-a?1:0},p.prototype.rp=function(h,a,c,d){var g=this.sa,v=this.na,b=h-g,C=a-v;if((b=Math.sqrt(b*b+C*C))<=Math.max(c,6661338147750939e-31*b))return d&&b==0?NaN:0;if(b=h-this.pa,C=a-this.la,(b=Math.sqrt(b*b+C*C))<=Math.max(c,6661338147750939e-31*b))return d&&b==0?NaN:1;if(b=this.pa-this.sa,C=this.la-this.na,0<(d=Math.sqrt(b*b+C*C))){var M=1/d,O=h-g,L=a-v,q=O*(b*=M)+L*(C*=M),U=17763568394002505e-31*(Math.abs(O*b)+Math.abs(L*C)),ee=b;if(b=-C,C=ee,q<-(U=Math.max(c,U))||q>d+U)return NaN;if(Math.abs(O*b+L*C)<=Math.max(c,17763568394002505e-31*(Math.abs(O*b)+Math.abs(L*C)))&&(.5>=(b=m.O.Rk(q*M,0,1))?(C=this.sa+(this.pa-this.sa)*b,d=this.na+(this.la-this.na)*b):(C=this.pa-(this.pa-this.sa)*(1-b),d=this.la-(this.la-this.na)*(1-b)),m.h.Oy(C,d,h,a)<=c)){if(.5>b){if(m.h.Oy(C,d,g,v)<=c)return 0}else if(m.h.Oy(C,d,this.pa,this.la)<=c)return 1;return b}}return NaN},p.prototype.Nb=function(h){return h!=null&&(h==this||h.constructor===this.constructor&&this.FM(h))},p.prototype.rD=function(h,a,c){var d=c?this.sa:this.pa;c=c?this.na:this.la;var g=new m.h;return g.x=h.pa-d,g.y=h.la-c,!(a.Qh(g)>6661338147750939e-31*a.fD(g))||(g.x=h.sa-d,g.y=h.na-c,a.Qh(g)<=6661338147750939e-31*a.fD(g))},p.prototype.qD=function(h){var a=new m.h;return a.x=this.pa-this.sa,a.y=this.la-this.na,!!this.rD(h,a,!1)&&(a.Sq(),!!this.rD(h,a,!0))},p.NM=function(h,a){var c=h.uu(a.sa,a.na),d=h.uu(a.pa,a.la);return!(0>c&&0>d||0<c&&0<d)&&(c=a.uu(h.sa,h.na),d=a.uu(h.pa,h.la),!(0>c&&0>d||0<c&&0<d)&&((c=h.Qb())>(d=a.Qb())?h.qD(a):a.qD(h)))},p.LM=function(h,a,c){var d=m.h.construct(NaN,NaN),g=h.pa-h.sa,v=h.la-h.na,b=a.pa-a.sa,C=a.la-a.na,M=b*v-g*C;if(M==0)return d;var O=8881784197001252e-31*(Math.abs(b*v)+Math.abs(g*C)),L=a.sa-h.sa,q=a.na-h.na,U=b*q-L*C,ee=U/M,Q=Math.abs(M);return ee<-(b=(8881784197001252e-31*(Math.abs(b*q)+Math.abs(L*C))*Q+O*Math.abs(U))/(M*M)+2220446049250313e-31*Math.abs(ee))||ee>1+b||(b=(C=g*q-L*v)/M)<-(g=(8881784197001252e-31*(Math.abs(g*q)+Math.abs(L*v))*Q+O*Math.abs(C))/(M*M)+2220446049250313e-31*Math.abs(b))||b>1+g||(ee=m.O.Rk(ee,0,1),g=m.O.Rk(b,0,1),v=h.hc(ee),M=a.hc(g),(O=new m.h).uc(v,M),O.length()>c&&(O.add(v,M),O.scale(.5),ee=h.fe(O,!1),g=a.fe(O,!1),h=h.hc(ee),a=a.hc(g),h.sub(a),h.length()>c)||d.ma(ee,g)),d},p.OM=function(h,a,c,d){var g=0;if((h.sa==a.sa&&h.na==a.na||h.sa==a.pa&&h.na==a.la)&&(g++,!d))return 1;if(h.pa==a.sa&&h.la==a.na||h.pa==a.pa&&h.la==a.la){if(++g==2)return 2;if(!d)return 1}return a.vi(h.sa,h.na,c)||a.vi(h.pa,h.la,c)||h.vi(a.sa,a.na,c)||h.vi(a.pa,a.la,c)?1:d&&g!=0||p.NM(h,a)==0?0:1},p.Zx=function(h,a,c,d,g,v){var b=0,C=h.rp(a.sa,a.na,v,!1),M=h.rp(a.pa,a.la,v,!1),O=a.rp(h.sa,h.na,v,!1),L=a.rp(h.pa,h.la,v,!1);return isNaN(C)||(d!=null&&(d[b]=C),g!=null&&(g[b]=0),c!=null&&(c[b]=m.h.construct(a.sa,a.na)),b++),isNaN(M)||(d!=null&&(d[b]=M),g!=null&&(g[b]=1),c!=null&&(c[b]=m.h.construct(a.pa,a.la)),b++),b==2||isNaN(O)||C==0&&O==0||M==0&&O==1||(d!=null&&(d[b]=0),g!=null&&(g[b]=O),c!=null&&(c[b]=m.h.construct(h.sa,h.na)),b++),b==2||isNaN(L)||C==1&&L==0||M==1&&L==1||(d!=null&&(d[b]=1),g!=null&&(g[b]=L),c!=null&&(c[b]=m.h.construct(a.pa,a.la)),b++),0<b?(b==2&&d!=null&&d[0]>d[1]&&(h=d[0],d[0]=d[1],d[1]=h,g!=null&&(d=g[0],g[0]=g[1],g[1]=d),c!=null&&(g=m.h.construct(c[0].x,c[0].y),c[0]=c[1],c[1]=g)),b):(b=p.LM(h,a,v),isNaN(b.x)?0:(c!=null&&(c[0]=h.hc(b.x)),d!=null&&(d[0]=b.x),g!=null&&(g[0]=b.y),1))},p.prototype.eG=function(){return 0},p.prototype.op=function(){},p.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},p}(m.SC);m.yb=j}(ye||(ye={})),function(m){var j=function(){function T(){this.Jm=[],this.ya=-1}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var p=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),p}return this.Jm=null},T.prototype.ZX=function(p){this.Jm.push(p)},T.prototype.qe=function(){},T}();m.gL=j}(ye||(ye={})),function(m){var j;(j=m.SL||(m.SL={}))[j.enumFillRuleOddEven=0]="enumFillRuleOddEven",j[j.enumFillRuleWinding=1]="enumFillRuleWinding";var T=function(p){function h(a,c){var d=p.call(this)||this;if(d.xf=!1,d.Eq=null,d.sq=0,d.rq=0,d.Aj=null,d.Mg=!1,d.nb=null,d.mb=null,d.Ve=null,d.Lj=null,d.Sd=null,d.tq=0,d.gb=0,d.xq=0,c===void 0)d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=m.ee.og();else{if(c==null)throw m.i.N();d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=c}return d.Aj=null,d.gb=0,d}return ri(h,p),h.prototype.tm=function(){return 0<this.tq},h.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new m.Sa(this.description):this.Eq.Nf(this.description)},h.prototype.sx=function(a,c){var d=new m.h;d.x=a,d.y=c,this.Lt(d)},h.prototype.Lt=function(a){this.Yx(),this.Eq.Cb(a),this.Mg=!0},h.prototype.nf=function(a){if(a.B())throw m.i.N();this.Jl(a.description),this.Yx(),a.copyTo(this.Eq),this.Mg=!0},h.prototype.Sx=function(){var a=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=m.Yc.Oh(2),this.nb.write(0,0),this.mb=m.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),a++);var c=this.wa;this.nb.write(this.nb.size-1,this.wa+a),this.dm(c+a),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(c,this.Eq),this.Mg=!1)},h.prototype.yj=function(a,c){this.Sx(),this.Cb(this.wa-1,a,c)},h.prototype.Ci=function(a){this.Sx(),this.Cb(this.wa-1,a)},h.prototype.lineTo=function(a){this.Sx(),this.Ht(this.wa-1,a)},h.prototype.CU=function(a){if(this.vc(),this.xf)throw m.i.Qa();var c=this.da();if(a>c)throw m.i.Qa();if(this.dc(a)){if(this.mb==null)throw m.i.Qa();var d=this.wa,g=this.Ba(a),v=this.Vc(a);this.dm(this.wa+1),this.mc();for(var b=0,C=this.description.Aa;b<C;b++)if(this.za[b]!=null){var M=m.ra.Va(this.description.Ed(b));this.za[b].Mn(M*v,this.za[b],M*g,M,!0,1,M*d)}for(;c>a;c--)d=this.nb.read(c),this.nb.write(c,d+1);this.mb.KE(a,1)}},h.prototype.Ap=function(){if(this.wx(),a===void 0){this.Mg=!1;var a=this.da()-1}var c=this.mb.read(a);this.mb.write(a,1|c),this.Ve!=null&&(a=this.Vc(a)-1,this.Ve.write(a,1),this.Lj.write(a,-1))},h.prototype.dc=function(a){return!!(1&this.mb.read(a))},h.prototype.Nn=function(a){if(this.dc(a))return!0;var c=this.Ba(a);return!(c>(a=this.Vc(a)-1))&&(c=this.Na(c),a=this.Na(a),c.qb(a))},h.prototype.yv=function(a){return!!(2&this.mb.read(a))},h.prototype.oc=function(a,c){if(this.Jl(a.description),a.getType()!=322)throw m.i.Qa();var d=new m.Sa;(c||this.B())&&(a.To(d),this.nf(d)),a.Po(d),this.lineTo(d)},h.prototype.tp=function(a){var c=this.wa==0;this.sx(a.v,a.G),this.yj(a.v,a.H),this.yj(a.C,a.H),this.yj(a.C,a.G),this.Ap(),this.Mg=!1,c&&this.Lf(256,!1)},h.prototype.ad=function(a,c){if(!a.B()){for(var d=this.wa==0,g=new m.Sa(this.description),v=0;4>v;v++)a.Hf(c?4-v-1:v,g),v==0?this.nf(g):this.lineTo(g);this.Ap(),this.Mg=!1,d&&!c&&this.Lf(256,!1)}},h.prototype.add=function(a,c){for(var d=0;d<a.da();d++)this.addPath(a,d,!c)},h.prototype.addPath=function(a,c,d){this.vf(-1,a,c,d)},h.prototype.Yk=function(a,c){this.Hz(a,c)},h.prototype.Dr=function(a,c,d,g,v){if(v||this.da()!=0||(v=!0),0>c&&(c=a.da()-1),c>=a.da()||0>d||0>g||g>a.rv(c))throw m.i.fa("index out of bounds");if(g!=0){var b=a.dc(c)&&d+g==a.rv(c);if(!b||g!=1){if(this.Mg=!1,this.Jl(a.description),d=a.Ba(c)+d+1,v&&(g++,d--),b&&g--,b=this.wa,this.dm(this.wa+g),this.mc(),v){if(g==0)return;this.nb.add(this.wa),v=a.mb.read(c),v&=-5,this.xf&&(v|=1),this.mb.write(this.mb.size-1,v),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);v=0;for(var C=this.description.Aa;v<C;v++){var M=this.description.kd(v),O=m.ra.Va(M),L=a.description.Pf(M);0>L||a.za[L]==null?this.za[v].Ln(O*b,m.ra.se(M),g*O,O*b):this.za[v].Mn(O*b,a.za[L],O*d,g*O,!0,O,O*b)}if(this.tm()||a.yv(c))throw m.i.Qa();this.Pc(1993)}}},h.prototype.oJ=function(){for(var a=0,c=this.da();a<c;a++)this.FW(a)},h.prototype.FW=function(a){if(this.mc(),a>=this.da())throw m.i.N();var c=this.Ba(a),d=this.Ja(a);a=this.dc(a)?1:0;for(var g=0,v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var b=m.ra.Va(this.description.Ed(g));this.za[g].ni(b*(c+a),b*(d-a),b)}this.Pc(1993)},h.prototype.Zq=function(a){this.mc();var c=this.da();if(0>a&&(a=c-1),a>=c)throw m.i.N();for(var d=this.Ba(a),g=this.Ja(a),v=0,b=this.description.Aa;v<b;v++)if(this.za[v]!=null){var C=m.ra.Va(this.description.Ed(v));this.za[v].En(C*d,C*g,C*this.wa)}for(d=a+1;d<=c;d++)v=this.nb.read(d),this.nb.write(d-1,v-g);if(this.mb==null)for(d=a+1;d<=c;d++)a=this.mb.read(d),this.mb.write(d-1,a);this.nb.resize(c),this.mb.resize(c),this.wa-=g,this.Pg-=g,this.Pc(1993)},h.prototype.vf=function(a,c,d,g){if(c==this||d>=c.da())throw m.i.N();var v=this.da();if(a>v)throw m.i.N();0>a&&(a=v),0>d&&(d=c.da()-1),this.Mg=!1,this.Jl(c.description),c.mc();var b=c.Ba(d),C=c.Ja(d),M=this.wa,O=c.dc(d)&&!g?1:0;this.dm(this.wa+C),this.mc();for(var L=a<v?this.Ba(a):M,q=0,U=this.description.Aa;q<U;q++){var ee=this.description.Ed(q),Q=c.description.Pf(ee),ge=m.ra.Va(ee);0<=Q&&c.za[Q]!=null?(O!=0&&this.za[q].Mn(L*ge,c.za[Q],ge*b,ge,!0,ge,ge*M),this.za[q].Mn((L+O)*ge,c.za[Q],ge*(b+O),ge*(C-O),g,ge,ge*(M+O))):this.za[q].Ln(L*ge,m.ra.se(ee),ge*C,ge*M)}for(this.nb.add(M+C),g=v;g>=a+1;g--)b=this.nb.read(g-1),this.nb.write(g,b+C);for(c.yv(d),this.mb.add(0),g=v-1;g>=a+1;g--)v=this.mb.read(g),v&=-5,this.mb.write(g+1,v);v=c.JR().read(d),v&=-5,this.xf&&(v|=1),this.mb.write(a,v)},h.prototype.Hz=function(a,c){var d=-1,g=this.da();if(d>g)throw m.i.N();0>d&&(d=g),this.Mg=!1;var v=this.wa;this.dm(this.wa+c),this.mc();var b=d<g?this.Ba(d):v;if(a!=null)this.za[0].Iz(2*b,a,0,c,!0,2*v);else{var C=m.ra.se(0);this.za[0].Ln(2*b,C,2*c,2*v)}a=1;for(var M=this.description.Aa;a<M;a++){C=this.description.kd(a);var O=m.ra.Va(C);C=m.ra.se(C),this.za[a].Ln(b*O,C,O*c,O*v)}for(this.nb.add(this.wa),v=g;v>=d+1;v--)b=this.nb.read(v-1),this.nb.write(v,b+c);for(this.mb.add(0),v=g-1;v>=d+1;v--)c=this.mb.read(v),c&=-5,this.mb.write(v+1,c);this.xf&&this.mb.write(d,1)},h.prototype.qG=function(a,c,d){var g=-1;if(0>a&&(a=this.da()),a>this.da()||g>this.Ja(a)||d>c.length)throw m.i.fa("index out of bounds");if(d!=0){a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>g&&(g=this.Ja(a)),this.mc();var v=this.wa;this.dm(this.wa+d),this.mc();for(var b=0,C=this.description.Aa;b<C;b++){var M=this.description.Ed(b),O=m.ra.Va(M);this.za[b].Ut(O*(this.Ba(a)+g+d),(v-this.Ba(a)-g)*O,this.za[b],O*(this.Ba(a)+g),!0,O),b==0?this.za[b].vC(O*(this.Ba(a)+g),d,c,0,!0):this.za[b].Wj(m.ra.se(M),(this.Ba(a)+g)*O,d*O)}for(this.tm()&&(this.Ve.Ut(this.Ba(a)+g+d,v-this.Ba(a)-g,this.Ve,this.Ba(a)+g,!0,1),this.Lj.Ut(this.Ba(a)+g+d,v-this.Ba(a)-g,this.Lj,this.Ba(a)+g,!0,1),this.Ve.Wj(1,this.Ba(a)+g,d),this.Lj.Wj(-1,this.Ba(a)+g,d)),a+=1,c=this.da();a<=c;a++)this.nb.write(a,this.nb.read(a)+d)}},h.prototype.wf=function(a,c,d){var g=this.da();if(0>a&&(a=this.da()),a>=g||c>this.Ja(a))throw m.i.fa("index out of bounds");a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ja(a));var v=this.wa;this.dm(this.wa+1),this.mc();var b=this.Ba(a);this.za[0].vj(2*(b+c),d,2*v),d=1;for(var C=this.description.Aa;d<C;d++){var M=this.description.Ed(d),O=m.ra.Va(M);this.za[d].Ln(O*(b+c),m.ra.se(M),O,O*v)}for(a+=1;a<=g;a++)this.nb.write(a,this.nb.read(a)+1)},h.prototype.DB=function(a,c){var d=this.da();if(0>a&&(a=d-1),a>=d||c>=this.Ja(a))throw m.i.fa("index out of bounds");this.mc();var g=this.Ba(a);0>c&&(c=this.Ja(a)-1),c=g+c,g=0;for(var v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var b=m.ra.Va(this.description.Ed(g));this.za[g].En(b*c,b,b*this.wa)}for(;d>=a+1;d--)c=this.nb.read(d),this.nb.write(d,c-1);this.wa--,this.Pg--,this.Pc(1993)},h.prototype.uE=function(a,c,d){var g=this.Ba(a)+c;if((d=this.Ba(d)+void 0)<g||0>g||d>this.I()-1)throw m.i.N();c=0,(a=this.Ga()).Vb(g);do{for(;a.Ha()&&(g=a.ha(),a.wb()!=d);)c+=g=g.Qb();if(a.wb()==d)break}while(a.$a());return c},h.prototype.fO=function(a,c,d){if(c=this.Ba(a)+c,d=this.Ba(a)+d,0>c||d>this.I()-1)throw m.i.N();var g=this.Ga();if(c>d){if(!this.dc(a))throw m.i.N("cannot iterate across an open path");g.JB()}var v=a=0;g.Vb(c);do v+=a,a=g.ha().Qb();while(g.wb()!=d);return v},h.prototype.mg=function(){return m.pi.gm(this,null)},h.prototype.KS=function(a,c,d){for(var g=a;g<d-1;g++)if(this.dc(g))throw m.i.N("cannot interpolate across closed paths");if((g=this.description.Aa)!=1){var v=this.uE(a,c,d);if(v!=0)for(var b=1;b<g;b++){var C=this.description.kd(b);if(m.ra.lz(C)!=2)for(var M=m.ra.Va(C),O=0;O<M;O++)this.MS(C,a,c,d,v,O)}}},h.prototype.JS=function(a,c,d){var g=this.description.Aa;if(g!=1){var v=this.fO(a,c,d);if(v!=0)for(var b=1;b<g;b++){var C=this.description.kd(b);if(m.ra.lz(C)!=2)for(var M=m.ra.Va(C),O=0;O<M;O++)this.LS(C,a,c,d,v,O)}}},h.prototype.MS=function(a,c,d,g,v,b){var C=this.Ga(),M=this.Ba(c)+d;g=this.Ba(g)+void 0,c=this.Uc(a,M,b),d=this.Uc(a,g,b);var O=c,L=0;C.Vb(M);do if(C.Ha()){if(C.ha(),C.wb()==g)break;this.setAttribute(a,C.wb(),b,O),C.li();do{if(M=C.ha(),C.ik()==g)return;L+=M=M.Qb(),O=m.lc.hq(c,d,L/v),C.On()||this.setAttribute(a,C.ik(),b,O)}while(C.Ha())}while(C.$a())},h.prototype.LS=function(a,c,d,g,v,b){var C=this.Ga(),M=this.Ba(c)+d;if((c=this.Ba(c)+g)!=M){g=this.Uc(a,M,b),d=this.Uc(a,c,b);var O=0;C.Vb(M),C.JB(),M=g;do{var L=C.ha();this.setAttribute(a,C.wb(),b,M),O+=M=L.Qb(),M=m.lc.hq(g,d,O/v)}while(C.ik()!=c)}},h.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},h.prototype.Oc=function(a){a instanceof m.Dd?this.YD(a,-1):this.wN(a)},h.prototype.YD=function(a,c){if(!this.B()&&!a.isIdentity()){this.mc();var d=this.za[0],g=new m.h,v=new m.h;if(0>c){var b=this.tm(),C=0;c=this.wa}else b=this.yv(c),C=this.Ba(c),c=this.Vc(c);for(;C<c;C++){if(g.x=d.read(2*C),g.y=d.read(2*C+1),b){var M=this.Lj.read(C);if(0<=M)switch(7&this.Ve.read(C)){case 2:v.x=this.Sd.read(M),v.y=this.Sd.read(M+1),a.Eh(v,v),this.Sd.write(M,v.x),this.Sd.write(M+1,v.y),v.x=this.Sd.read(M+3),v.y=this.Sd.read(M+4),a.Eh(v,v),this.Sd.write(M+3,v.x),this.Sd.write(M+4,v.y);break;case 4:throw m.i.Qa()}}a.Eh(g,g),d.write(2*C,g.x),d.write(2*C+1,g.y)}this.Pc(1993)}},h.prototype.wN=function(a){if(!this.B()){this.re(1),this.mc();for(var c=this.za[0],d=this.za[1],g=new m.Nd,v=new m.Nd,b=this.tm(),C=0;C<this.wa;C++){if(g.x=c.read(2*C),g.y=c.read(2*C+1),g.z=d.read(C),b){var M=this.Lj.read(C);if(0<=M)switch(7&this.Ve.read(C)){case 2:v.x=this.Sd.read(M),v.y=this.Sd.read(M+1),v.z=this.Sd.read(M+2),v=a.fp(v),this.Sd.write(M,v.x),this.Sd.write(M+1,v.y),this.Sd.write(M+1,v.z),v.x=this.Sd.read(M+3),v.y=this.Sd.read(M+4),v.z=this.Sd.read(M+5),v=a.fp(v),this.Sd.write(M+3,v.x),this.Sd.write(M+4,v.y),this.Sd.write(M+5,v.z);break;case 4:throw m.i.Qa()}}g=a.fp(g),c.write(2*C,g.x),c.write(2*C+1,g.y),d.write(C,g.z)}this.Pc(1993)}},h.prototype.iy=function(){this.nb==null&&(this.nb=m.Yc.Oh(1,0),this.mb=m.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},h.prototype.op=function(a){a.Mg=!1,a.tq=this.tq,a.xq=this.xq,a.nb=this.nb!=null?m.ia.Bn(this.nb):null,a.mb=this.mb!=null?m.pn.Bn(this.mb):null,a.Lj=this.Lj!=null?m.ia.Bn(this.Lj):null,a.Ve=this.Ve!=null?m.pn.Bn(this.Ve):null,a.Sd=this.Sd!=null?m.be.Bn(this.Sd):null,a.sq=this.sq,a.rq=this.rq,a.Aj=this.ak(1024)?null:this.Aj},h.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var a=this.Ga(),c=new m.Fx(0);a.$a();)for(;a.Ha();)c.add(a.ha().Qb());return this.sq=c.rm(),this.Lf(512,!1),c.rm()},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h&&p.prototype.Nb.call(this,a)))return!1;var c=this.da();return!(c!=a.da()||this.nb!=null&&!this.nb.Nb(a.nb,0,c+1)||this.xq!=a.xq||this.mb!=null&&!this.mb.Nb(a.mb,0,c))&&p.prototype.Nb.call(this,a)},h.prototype.Ga=function(){return new m.YL(this)},h.prototype.hy=function(a){if(p.prototype.hy.call(this,a),this.tm())for(a=this.Ga();a.$a();)a.Ha()},h.prototype.yp=function(a,c){if(p.prototype.yp.call(this,a,c),this.tm())for(a=this.Ga();a.$a();)a.Ha()},h.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},h.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},h.prototype.Ev=function(a){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(a)):!!(4&this.mb.read(a)))},h.prototype.Ir=function(a){return this.xf?(this.xu(),this.Aj.read(a)):0},h.prototype.xu=function(){if(this.ak(1024)){var a=this.da();this.Aj==null?this.Aj=new m.be(a):this.Aj.size!=a&&this.Aj.resize(a),a=new m.Fx(0);for(var c=new m.Fx(0),d=new m.h,g=0,v=this.Ga();v.$a();){for(c.reset(),this.D(this.Ba(v.gb),d);v.Ha();)c.add(v.ha().Tx(d.x,d.y));a.add(c.rm());var b=g++;this.Aj.write(b,c.rm())}this.rq=a.rm(),this.Lf(1024,!1)}},h.prototype.FR=function(){if(this.xf){this.fm();for(var a=this.da(),c=0;c<a;c++)4&this.mb.read(c)}},h.prototype.fm=function(){if(this.ak(8)){this.xu();var a=this.da();(this.mb==null||this.mb.size<a)&&(this.mb=m.Yc.Mr(a+1));for(var c=1,d=0;d<a;d++){var g=this.Aj.read(d);d==0&&(c=0<g?1:-1),0<g*c?this.mb.zJ(d,4):this.mb.KE(d,4)}this.Lf(8,!1)}},h.prototype.sz=function(a){var c=this.gb,d=this.da();if(0<=c&&c<d){if(a<this.Vc(c)){if(a>=this.Ba(c))return c;c--}else c++;if(0<=c&&c<d&&a>=this.Ba(c)&&a<this.Vc(c))return this.gb=c}if(5>d){for(c=0;c<d;c++)if(a<this.Vc(c))return this.gb=c;throw m.i.fa("corrupted geometry")}for(c=0,--d;d>c;){var g=c+(d-c>>1);if(a<this.Ba(g))d=g-1;else{if(!(a>=(c=this.Vc(g))))return this.gb=g;c=g+1}}return this.gb=c},h.prototype.yz=function(){var a=this.I();if(!this.xf){a-=this.da();for(var c=0,d=this.da();c<d;c++)this.dc(c)&&a++}return a},h.prototype.rv=function(a){var c=this.Ja(a);return this.dc(a)||c--,c},h.prototype.Ia=function(){return new h(this.xf,this.description)},h.prototype.Db=function(){return this.xf?2:1},h.prototype.getType=function(){return this.xf?1736:1607},h.prototype.QJ=function(a){this.nb=a,this.Pc(16777215)},h.prototype.VR=function(){return this.wx(),this.Ve},h.prototype.JR=function(){return this.wx(),this.mb},h.prototype.PJ=function(a){this.mb=a,this.Pc(16777215)},h.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},h.prototype.Vc=function(a){return this.nb.read(a+1)},h.prototype.Ja=function(a){return this.nb.read(a+1)-this.nb.read(a)},h.prototype.Ba=function(a){return this.nb.read(a)},h.prototype.lu=function(a,c){this.Bb==null&&(this.Bb=new m.Uk),c=m.Nx.pW(c);var d=this.Bb.Fk;if(d!=null){if(!(d.Ik<a||c>d.RR()))return!0;this.Bb.yD(null)}return d=m.Nx.create(this,a,c),this.Bb.yD(d),!0},h.prototype.cc=function(){var a=p.prototype.cc.call(this);if(!this.Ac()){var c=this.da();this.nb!=null&&this.nb.An(a,0,c+1),this.mb!=null&&this.mb.An(a,0,c)}return a},h.prototype.ZF=function(a){return this.Ve!=null?this.Ve.read(a):1},h.prototype.bc=function(a,c,d){var g=this.sz(a);if(a==this.Vc(g)-1&&!this.dc(g))throw m.i.fa("index out of bounds");this.mc();var v=this.Ve,b=1;if(v!=null&&(b=7&v.read(a)),b!==1)throw m.i.Qa();if(c.Or(),c=c.get(),d?c.Nf(m.ee.og()):c.Nf(this.description),g=a==this.Vc(g)-1&&this.dc(g)?this.Ba(g):a+1,v=new m.h,this.D(a,v),c.Dc(v),this.D(g,v),c.Qc(v),!d)for(d=1,v=this.description.Aa;d<v;d++){b=this.description.Ed(d);for(var C=m.ra.Va(b),M=0;M<C;M++){var O=this.Uc(b,a,M);c.YB(b,M,O),O=this.Uc(b,g,M),c.OB(b,M,O)}}},h.prototype.Rj=function(a,c){if(a>=this.da())throw m.i.N();if(this.B())c.Oa();else{if(this.yv(a))throw m.i.fa("not implemented");var d=this.ub(0),g=new m.h,v=new m.l;v.Oa();var b=this.Ba(a);for(a=this.Vc(a);b<a;b++)d.tc(2*b,g),v.Zb(g);c.K(v)}},h.prototype.fj=function(a){return this.Bb==null&&(this.Bb=new m.Uk),!(a==0||16>this.I())&&(a=m.ta.nE(this),this.Bb.WM(a),!0)},h.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new m.Uk),this.Bb.zo==null){this.Bb.xD(null);var a=m.ta.YN(this);this.Bb.xD(a)}},h.prototype.Yo=function(a){this.xq=a},h.prototype.In=function(){return this.xq},h.prototype.DD=function(a){if(this==a)throw m.i.fa("MultiPathImpl.add");for(var c=this.da(),d=0;d<a.da();d++)this.addPath(a,d,!0),this.CU(c),c++},h.prototype.kO=function(a){var c=this.sz(a),d=this.Ba(c);if(d!=a){if(a>=(c=this.Vc(c))||a<d)throw m.i.fa("change_ring_start_point");for(var g=0,v=this.description.Aa;g<v;g++){var b=this.description.kd(g);b=m.ra.Va(b),this.za[g].rotate(d*b,a*b,c*b)}}},h}(m.Gx);m.Vk=T}(ye||(ye={})),function(m){var j=function(T){function p(h){var a=T.call(this)||this;if(h!==void 0){if(h==null)throw m.i.N();a.description=h}else a.description=m.ee.og();return a.wa=0,a}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.add=function(h){this.resize(this.wa+1),this.Dh(this.wa-1,h)},p.prototype.Bu=function(h,a){this.resize(this.wa+1);var c=new m.h;c.ma(h,a),this.Cb(this.wa-1,c)},p.prototype.Fd=function(h,a,c){if(c=0>c?h.I():c,0>a||a>h.I()||c<a)throw m.i.N();if(a!=c){this.Jl(h.description),c-=a;var d=this.wa;this.resize(this.wa+c),this.mc();for(var g=0,v=h.description.Aa;g<v;g++){var b=h.description.Ed(g),C=m.ra.Va(b),M=this.ub(b);b=h.ub(b),M.Mn(d*C,b,a*C,c*C,!0,1,d*C)}}},p.prototype.HD=function(h,a){var c=h.length;if(a=0>a?c:a,0>c||0>a)throw m.i.N();if(a!=0){c=a-0,a=this.wa,this.resize(this.wa+c);for(var d=0;d<c;d++)this.Cb(a+d,h[0+d])}},p.prototype.DB=function(h){if(0>h||h>=this.I())throw m.i.fa("index out of bounds");this.mc();for(var a=0,c=this.description.Aa;a<c;a++)if(this.za[a]!=null){var d=m.ra.Va(this.description.Ed(a));this.za[a].En(d*h,d,d*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},p.prototype.resize=function(h){this.dm(h)},p.prototype.op=function(){},p.prototype.Oa=function(){T.prototype.wD.call(this)},p.prototype.Oc=function(h){if(h instanceof m.Dd){if(this.B())return;this.mc();for(var a=this.za[0],c=new m.h,d=0;d<this.wa;d++)c.x=a.read(2*d),c.y=a.read(2*d+1),h.Eh(c,c),a.write(2*d,c.x),a.write(2*d+1,c.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),a=this.za[0],c=this.za[1];var g=new m.Nd;for(d=0;d<this.wa;d++){g.x=a.read(2*d),g.y=a.read(2*d+1),g.z=c.read(d);var v=h.fp(g);a.write(2*d,v.x),a.write(2*d+1,v.y),c.write(d,v.z)}}this.Pc(1993)},p.prototype.Db=function(){return 0},p.prototype.getType=function(){return 550},p.prototype.Ke=function(){return 0},p.prototype.Qb=function(){return 0},p.prototype.Nb=function(h){return h==this||h instanceof p&&T.prototype.Nb.call(this,h)},p.prototype.lW=function(h,a){var c=this.wa;if(c=Math.min(c,a+1e3),0>a||a>=this.wa||c<a||h.length!=1e3)throw m.i.N();var d=c-a,g=[];for(this.ub(0).Vw(2*a,2*d,g,0,!0),a=0;a<d;a++)h[a]=m.h.construct(g[2*a],g[2*a+1]);return c},p.prototype.$x=function(){},p.prototype.iy=function(){},p.prototype.lu=function(){return!1},p.prototype.fj=function(){return!1},p.prototype.mg=function(){return null},p}(m.Gx);m.de=j}(ye||(ye={})),function(m){var j;(j=m.iL||(m.iL={}))[j.NotDetermined=0]="NotDetermined",j[j.Structure=1]="Structure",j[j.DegenerateSegments=2]="DegenerateSegments",j[j.Clustering=3]="Clustering",j[j.Cracking=4]="Cracking",j[j.CrossOver=5]="CrossOver",j[j.RingOrientation=6]="RingOrientation",j[j.RingOrder=7]="RingOrder",j[j.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",j[j.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",j[j.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var T=function(){function p(h,a,c){h===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=h,this.Jo=a,this.Ko=c)}return p.prototype.Wt=function(h){this.Jj=h.Jj,this.Jo=h.Jo,this.Ko=h.Ko},p}();m.Md=T}(ye||(ye={})),function(m){m.O=function(){function j(){}return j.assert=function(T){if(T===!1)throw m.i.GK()},j.bK=function(T){return isNaN(T)?NaN:T===0?T:0<T?1:-1},j.Fu=function(T){var p;p===void 0&&(p=0);for(var h=[],a=0;a<T;a++)h[a]=j.lg(2,p);return h},j.lg=function(T,p){p===void 0&&(p=0);for(var h=[],a=0;a<T;a++)h[a]=p;return h},j.$u=function(T,p){var h,a;for(h===void 0&&(h=0),a===void 0&&(a=T.length-1);h<=a;h++)T[h]=p},j.Rk=function(T,p,h){return T<p?p:T>h?h:T},j.Th=function(T,p){var h=5381;return((h=((h=((h=p!==void 0?(p<<5)+p+(255&T):(h<<5)+h+(255&T))<<5)+h+(T>>8&255))<<5)+h+(T>>16&255))<<5)+h+(T>>24&255)&2147483647},j.uj=function(){throw Error("Not Implemented")},j.bB=function(T){return j.aU(T)+12345&2147483647},j.XG=function(T){var p=32,h=T%j.Qx|0,a=T/j.Qx|0;return(p&=63)==0?T:(32>p?(T=h>>>p|a<<32-p,p=a>>p):(T=a>>p-32,p=0<=a?0:-1),p*j.Qx+(T>>>0))},j.aU=function(T){var p=1103515245,h=65535&p;return((p-h)*(T|=0)|0)+(h*T|0)|0},j.truncate=function(T){return 0>T?-1*Math.floor(Math.abs(T)):Math.floor(T)},j.MAX_SAFE_INTEGER=Math.pow(2,53)-1,j.MIN_SAFE_INTEGER=-j.MAX_SAFE_INTEGER,j.VC=65536,j.Qx=j.VC*j.VC,j}()}(ye||(ye={})),function(m){var j;(j=m.CL||(m.CL={}))[j.Project=0]="Project",j[j.Union=1]="Union",j[j.Difference=2]="Difference",j[j.Proximity2D=3]="Proximity2D",j[j.Relate=4]="Relate",j[j.Equals=5]="Equals",j[j.Disjoint=6]="Disjoint",j[j.Intersects=7]="Intersects",j[j.Within=8]="Within",j[j.Contains=9]="Contains",j[j.Crosses=10]="Crosses",j[j.Touches=11]="Touches",j[j.Overlaps=12]="Overlaps",j[j.Buffer=13]="Buffer",j[j.Distance=14]="Distance",j[j.Intersection=15]="Intersection",j[j.Clip=16]="Clip",j[j.Cut=17]="Cut",j[j.DensifyByLength=18]="DensifyByLength",j[j.DensifyByAngle=19]="DensifyByAngle",j[j.LabelPoint=20]="LabelPoint",j[j.GeodesicBuffer=21]="GeodesicBuffer",j[j.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",j[j.ShapePreservingDensify=23]="ShapePreservingDensify",j[j.GeodeticLength=24]="GeodeticLength",j[j.GeodeticArea=25]="GeodeticArea",j[j.Simplify=26]="Simplify",j[j.SimplifyOGC=27]="SimplifyOGC",j[j.Offset=28]="Offset",j[j.Generalize=29]="Generalize",j[j.SymmetricDifference=30]="SymmetricDifference",j[j.ConvexHull=31]="ConvexHull",j[j.Boundary=32]="Boundary",j[j.SimpleRelation=33]="SimpleRelation";var T=function(){function p(){}return p.prototype.getType=function(){return null},p.prototype.wn=function(){},p.prototype.Iu=function(){return!1},p}();m.Je=T}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 13},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d,g){return h instanceof m.aa?(g=new m.Zc(h),this.V(g,a,[c],!1,d).next()):d===!0?(c=new m.BC(h,a,c,!1,g),m.Gh.local().V(c,a,g)):new m.BC(h,a,c,!1,g)},p.instance=null,p}(m.Je);m.AC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c,d){this.ya=-1,this.Rd=p,this.$z=h,this.Cs=a,this.tT=new m.l,this.tT.Oa(),this.eo=-1,this.Ub=d}return T.prototype.next=function(){for(var p;(p=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(p,this.Cs[this.eo]);return null},T.prototype.La=function(){return this.ya},T.prototype.buffer=function(p,h){return m.HK.buffer(p,h,this.$z,NaN,96,this.Ub)},T.prototype.qe=function(){},T}();m.BC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 16},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,c,d).next()):new m.lL(h,a,c,d)},p.instance=null,p}(m.Je);m.kL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){if(this.ya=-1,p==null)throw m.i.N();this.$=h,this.yk=p,this.qa=m.ta.Wd(a,h,!1)}return T.prototype.next=function(){var p;return(p=this.yk.next())!=null?(this.ya=this.yk.La(),m.Ud.clip(p,this.$,this.qa,0)):null},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.lL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 31},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c){return h instanceof m.aa?m.DC.rE(h):new m.DC(a,h,c)},p.instance=null,p}(m.Je);m.CC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){if(this.uA=new m.Zt,this.ya=-1,h==null)throw m.i.N();this.cH=p,this.Ic=!1,this.yk=h,this.Ub=a}return T.prototype.next=function(){if(this.cH){if(!this.Ic){var p=this.dO(this.yk);return this.Ic=!0,p}return null}if(!this.Ic){if((p=this.yk.next())!=null)return this.ya=this.yk.La(),T.rE(p);this.Ic=!0}return null},T.prototype.La=function(){return this.ya},T.prototype.dO=function(p){for(var h;(h=p.next())!=null;)this.uA.Ib(h);return this.uA.cR()},T.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw m.i.fa("Invalid call for non merging convex hull.");var p=this.yk.next();if(p==null)throw m.i.fa("Expects a non-null geometry.");this.uA.Ib(p)}},T.rE=function(p){if(T.VS(p))return p;var h=p.getType();if(m.Vk.yd(h))return(h=new m.Ta(p.description)).oc(p,!0),h;if(h==550&&p.I()==2){var a=new m.Sa;return h=new m.Ta(p.description),p.ve(0,a),h.nf(a),p.ve(1,a),h.lineTo(a),h}return m.Zt.RO(p)},T.VS=function(p){if(p.B())return!0;var h=p.getType();return h==33||h==197||!m.Vk.yd(h)&&(h==550?p.I()==1:h==1607?p.da()==1&&2>=p.I():p.da()==1&&(2>=p.I()||m.Zt.JG(p,0)))},T}();m.DC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 17},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d,g){return new m.nL(h,a,c,d,g)},p.instance=null,p}(m.Je);m.mL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c,d){if(this.Tf=null,h==null||a==null)throw m.i.fa("invalid argument");this.qT=p,this.nA=h,this.lH=a,p=m.ta.mv(h,a),this.qa=m.ta.Wd(c,p,!0),this.kH=-1,this.nd=d}return T.prototype.La=function(){return 0},T.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},T.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},T.prototype.TQ=function(){var p=new m.Ta,h=new m.Ta,a=new m.Ta;this.Tf.push(p),this.Tf.push(h);var c=[];m.LK.JK(this.qT,this.nA,this.lH,this.qa,c,this.nd);for(var d=0;d<c.length;d++){var g=c[d];if(g.bt==0)p.add(g.X,!1);else if(g.bt==1||g.bt==2)h.add(g.X,!1);else if(g.bt==3)this.Tf.push(g.X);else{if(g.bt!=4)throw m.i.fa("internal");a.add(g.X,!1)}}a.B()||p.B()&&h.B()&&!(3<=this.Tf.length)||this.Tf.push(a),p.B()&&h.B()&&3>this.Tf.length&&(this.Tf.length=0)},T.prototype.SQ=function(){var p=new m.ia(0),h=new m.gd,a=h.aF(),c=h.Ib(this.nA),d=h.Ib(this.lH),g=new m.Fg;try{g.Ft(h,this.qa,this.nd),g.dl(a,c,d,p);var v=h.Ne(c),b=new m.Da,C=new m.Da;for(this.Tf.length=0,this.Tf.push(b),this.Tf.push(C),c=0;c<p.size;c++){var M=new m.gd,O=M.Ib(v),L=M.Ib(h.Ne(p.get(c)));g.dr(M,this.nd);var q=g.Av(O,L),U=M.Ne(q);if(!U.B()){var ee=h.KF(p.get(c),a);ee==2?b.add(U,!1):ee==1?C.add(U,!1):this.Tf.push(U);var Q=new m.gd;O=Q.Ib(v),L=Q.Ib(h.Ne(p.get(c))),g.dr(Q,this.nd),v=Q.Ne(g.im(O,L))}}!v.B()&&0<p.size&&this.Tf.push(v),b.B()&&C.B()&&(this.Tf.length=0)}finally{g.Ug()}},T.prototype.qe=function(){},T}();m.nL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 18},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c){if(h instanceof m.aa)return h=new m.Zc(h),this.V(h,a,c).next();if(0>=a)throw m.i.N();return new m.oL(h,a,c)},p.instance=null,p}(m.Je);m.Xl=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.ya=-1,this.Rd=p,this.Ps=h}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){var p;return(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(p)):null},T.prototype.NP=function(p){if(p.B()||1>p.Db())return p;var h=p.getType();if(h==1736||h==1607)return this.Ny(p);if(m.aa.yd(h))return this.PP(p);if(h==197)return this.OP(p);throw m.i.Qa()},T.prototype.PP=function(p){if(p.Qb()<=this.Ps)return p;var h=new m.Ta(p.description);return h.oc(p,!0),this.Ny(h)},T.prototype.OP=function(p){var h=new m.Da(p.description);h.ad(p,!1);var a=new m.l;return p.A(a),p=a.ca(),a.R()<=this.Ps&&p<=this.Ps?h:this.Ny(h)},T.prototype.Ny=function(p){for(var h=p.Ia(),a=p.Ga();a.$a();)for(var c=!0;a.Ha();){var d=a.ha();if(d.getType()!=322)throw m.i.fa("not implemented");var g=a.On(),v=d.Qb();if(v>this.Ps){var b=Math.ceil(v/this.Ps);v=new m.Sa(p.description),c&&(d.To(v),h.nf(v));var C=c=1/b,M=0;for(--b;M<b;M++)d.Tw(C,v),h.lineTo(v),C+=c;g?h.Ap():(d.Po(v),h.lineTo(v))}else g?h.Ap():h.oc(d,c);c=!1}return h},T.prototype.qe=function(){},T}();m.oL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.getType=function(){return 2},p.prototype.V=function(h,a,c,d){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,c,d).next()):new m.qL(h,a,c,d)},p.im=function(h,a,c,d){if(h.B()||a.B())return h;var g=h.Db(),v=a.Db();if(g>v)return h;var b=h.getType(),C=a.getType(),M=new m.l,O=new m.l,L=new m.l;h.A(M),a.A(O),L.K(M),L.Zb(O);var q=(L=m.ta.Wd(c,L,!0))*Math.sqrt(2)*1.00001,U=new m.l;if(U.K(M),U.W(q,q),!U.isIntersecting(O))return h;if(g==1&&v==2)return p.KV(h,a,C,c,d);if(b==33)switch(m.Vk.yd(C)?(c=new m.Ta(a.description),c.oc(a,!0)):c=a,C){case 1736:return p.XU(h,c,L);case 1607:return p.YU(h,c,L);case 550:return p.VU(h,c,L);case 197:return p.UU(h,c,L);case 33:return p.WU(h,c,L);default:throw m.i.N()}else if(b==550)switch(C){case 1736:return p.nU(h,a,L);case 197:return p.lU(h,a,L);case 33:return p.mU(h,a,L)}return m.Fg.im(h,a,c,d)},p.XU=function(h,a,c){return m.hd.KG(a,h,c)==0?h:h.Ia()},p.YU=function(h,a,c){var d=h.D();a=a.Ga();for(var g=c*Math.sqrt(2)*1.00001,v=g*g,b=new m.l;a.$a();)for(;a.Ha();){var C=a.ha();if(C.A(b),b.W(g,g),b.contains(d)){if(C.qs(d,c))return h.Ia();var M=C.ac();if(m.h.yc(d,M)<=v||(M=C.wc(),m.h.yc(d,M)<=v))return h.Ia()}}return h},p.VU=function(h,a,c){var d=a.ub(0);a=a.I();var g=h.D(),v=new m.h;c=c*Math.sqrt(2)*1.00001,c*=c;for(var b=0;b<a;b++)if(d.tc(2*b,v),m.h.yc(v,g)<=c)return h.Ia();return h},p.UU=function(h,a,c){var d=new m.l;return a.A(d),d.W(c,c),a=h.D(),d.contains(a)?h.Ia():h},p.WU=function(h,a,c){c=c*Math.sqrt(2)*1.00001,c*=c;var d=h.D();return a=a.D(),m.h.yc(d,a)<=c?h.Ia():h},p.nU=function(h,a,c){var d=new m.l;a.A(d),d.W(c,c);for(var g=h.I(),v=!1,b=[],C=0;C<g;C++)b[C]=!1;var M=new m.h;for(C=0;C<g;C++)h.D(C,M),d.contains(M)&&m.hd.Yd(a,M,c)!=0&&(v=!0,b[C]=!0);if(!v)return h;for(a=h.Ia(),C=0;C<g;C++)b[C]||a.Fd(h,C,C+1);return a},p.lU=function(h,a,c){var d=new m.l;a.A(d),d.W(c,c),a=h.I();var g=!1;c=[];for(var v=0;v<a;v++)c[v]=!1;var b=new m.h;for(v=0;v<a;v++)h.D(v,b),d.contains(b)&&(g=!0,c[v]=!0);if(!g)return h;for(d=h.Ia(),v=0;v<a;v++)c[v]||d.Fd(h,v,v+1);return d},p.mU=function(h,a,c){var d=h.ub(0),g=h.I(),v=a.D(),b=new m.h,C=!1;a=[];for(var M=0;M<g;M++)a[M]=!1;for(c=(M=c*Math.sqrt(2)*1.00001)*M,M=0;M<g;M++)d.tc(2*M,b),m.h.yc(b,v)<=c&&(C=!0,a[M]=!0);if(!C)return h;for(d=h.Ia(),M=0;M<g;M++)a[M]||d.Fd(h,M,M+1);return d},p.KV=function(h,a,c,d,g){var v=new m.Fh;h.bn(v);var b=new m.l;return a.A(b),v.Zb(b),v.W(.1*v.R(),.1*v.ca()),(b=new m.Da).ad(v,!1),c==1736?b.add(a,!0):b.ad(a,!0),m.Xj.local().V(h,b,d,g)},p.instance=null,p}(m.Je);m.kp=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c){this.ts=h==null,this.ya=-1,this.Rd=p,this.$z=a,this.wT=h.next(),this.Ub=c}return T.prototype.next=function(){return this.ts?null:(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),m.kp.im(p,this.wT,this.$z,this.Ub)):null;var p},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.qL=j}(ye||(ye={})),function(m){var j=function(){function p(h){this.nd=h,this.Bj=new m.l,this.Bj.Oa(),this.oh=new m.l,this.oh.Oa()}return p.prototype.Nt=function(){var h=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=h,h=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=h,h=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=h,h=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=h},p.prototype.eQ=function(h,a){if(this.nd!=null&&!this.nd.progress(-1,-1))throw m.i.fu("user_canceled");var c=!this.Bj.isIntersecting(this.oh);return m.aa.Hc(h.getType())&&m.aa.Hc(a.getType())?h.I()>a.I()?this.gE(h,a,c):(this.Nt(),h=this.gE(a,h,c),this.Nt(),h):h.getType()==550&&m.aa.Hc(a.getType())?(h=this.hE(a,h,c),this.Nt(),h):a.getType()==550&&m.aa.Hc(h.getType())?this.hE(h,a,c):h.getType()==550&&a.getType()==550?h.I()>a.I()?this.iE(h,a):(this.Nt(),h=this.iE(a,h),this.Nt(),h):0},p.prototype.gE=function(h,a,c){var d=h.Ga(),g=a.Ga(),v=new m.l,b=new m.l,C=17976931348623157e292;if(!c&&this.pY(h,a,d,g))return 0;for(;d.$a();)for(;d.Ha();)if((h=d.ha()).A(v),!(v.px(this.oh)>C)){for(;g.$a();)for(;g.Ha();)if((a=g.ha()).A(b),v.px(b)<C&&(a=h.tb(a,c),(a*=a)<C)){if(a==0)return 0;C=a}g.Zi()}return Math.sqrt(C)},p.prototype.hE=function(h,a,c){var d=h.Ga(),g=new m.l,v=17976931348623157e292,b=new m.h,C=a.I();for(c=!c&&h.getType()==1736;d.$a();)for(;d.Ha();){var M=d.ha();if(M.A(g),!(1<C&&g.px(this.oh)>v)){for(var O=0;O<C;O++){if(a.D(O,b),c&&m.hd.Yd(h,b,0)!=0)return 0;var L=M.fe(b,!1);if(b.sub(M.hc(L)),(L=b.Sk())<v){if(L==0)return 0;v=L}}c=!1}}return Math.sqrt(v)},p.prototype.iE=function(h,a){for(var c,d=17976931348623157e292,g=new m.h,v=new m.h,b=h.I(),C=a.I(),M=0;M<b;M++)if(h.D(M,g),!(1<C&&this.oh.iK(g)>d)){for(var O=0;O<C;O++)if(a.D(O,v),(c=m.h.yc(g,v))<d){if(c==0)return 0;d=c}}return Math.sqrt(d)},p.prototype.pY=function(h,a,c,d){if(h.getType()==1736){for(;d.$a();)if(d.Ha()){var g=d.ha();if(m.hd.Yd(h,g.wc(),0)!=0)return!0}d.Zi()}if(a.getType()==1736){for(;c.$a();)if(c.Ha()&&(h=c.ha(),m.hd.Yd(a,h.wc(),0)!=0))return!0;c.Zi()}return!1},p.prototype.gm=function(h,a){return h.B()||a.B()?NaN:(h.A(this.Bj),a.A(this.oh),this.eQ(h,a))},p}(),T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.prototype.V=function(a,c,d){if(a==null||c==null)throw m.i.N();if(a.B()||c.B())return NaN;var g=a.getType(),v=c.getType();if(g==33){if(v==33)return m.h.tb(a.D(),c.D());if(v==197)return d=new m.l,c.A(d),d.tb(a.D());(g=new m.de).add(a),a=g}else if(g==197){if(v==197)return v=new m.l,a.A(v),d=new m.l,c.A(d),d.tb(v);(g=new m.Da).ad(a,!1),a=g}return v==33?((v=new m.de).add(c),c=v):v==197&&((v=new m.Da).ad(c,!1),c=v),new j(d).gm(a,c)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 14},h.instance=null,h}(m.Je);m.rL=T}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c){this.zH=p,this.DH=h,this.nd=c,this.$G=a}return T.prototype.next=function(){var p=this.zH.next();return p==null?null:this.zC(p)},T.prototype.La=function(){return this.zH.La()},T.prototype.zC=function(p){var h=p.getType();if(m.aa.Rn(h))return p;if(h==197)return(h=new m.Da(p.description)).ad(p,!1),this.zC(h);if(p.B())return p;if(p==null)throw m.i.Qa();h=p.Ia();for(var a=new m.yb,c=0,d=p.da();c<d;c++)this.TK(p,c,h,a);return h},T.prototype.TK=function(p,h,a,c){if(!(2>p.Ja(h))){var d=p.Ba(h),g=p.Vc(h)-1,v=p.ub(0),b=p.dc(h),C=new m.ia(0);C.Jb(p.Ja(h)+1);var M=new m.ia(0);for(M.Jb(p.Ja(h)+1),C.add(b?d:g),C.add(d),d=new m.h;1<C.size;){var O=C.Fc();C.If();var L=C.Fc();p.D(O,d),c.Dc(d),p.D(L,d),c.Qc(d),0<=(L=this.SK(c,d,v,O,L,g))?(C.add(L),C.add(O)):M.add(O)}if(b||M.add(C.get(0)),M.size==C.size)a.addPath(p,h,!0);else if(2<=M.size&&(!this.$G||M.size!=2||!(b||m.h.tb(p.Na(M.get(0)),p.Na(M.get(1)))<=this.DH))){for(h=new m.Sa,c=0,g=M.size;c<g;c++)p.ve(M.get(c),h),c==0?a.nf(h):a.lineTo(h);b&&(this.$G||M.size!=2||a.lineTo(h),a.Ap())}}},T.prototype.SK=function(p,h,a,c,d,g){var v=d-1;for(d<=c&&(v=g),g=d=-1,c+=1;c<=v;c++){a.tc(2*c,h);var b=h.x,C=h.y;p.hc(p.fe(h,!1),h),h.x-=b,h.y-=C,(b=h.length())>this.DH&&b>g&&(d=c,g=b)}return d},T.prototype.qe=function(){},T}();m.sL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 29},p.prototype.V=function(h,a,c,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,c,d).next()):new m.sL(h,a,c,d)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.EC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 21},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d,g,v,b,C){return h instanceof m.aa?(C=new m.Zc(h),this.V(C,a,c,[d],g,v,!1,b).next()):b===!0?(c=new m.GC(h,a,c,d,g,!1,!1,C),m.Gh.local().V(c,a,C)):new m.GC(h,a,c,d,g,!1,!1,C)},p.instance=null,p}(m.Je);m.FC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c,d,g,v,b){if(g)throw m.i.Ie();if(h==null)throw m.i.N();this.ya=-1,this.Ms=p,this.vg=h,this.ze=a,this.Cs=c,this.$n=d,this.eo=-1,this.Ub=b,this.uT=new m.l,this.uT.Oa()}return T.prototype.next=function(){for(var p;(p=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(p,this.Cs[this.eo]);return null},T.prototype.La=function(){return this.ya},T.prototype.$Q=function(p,h){return m.VK.buffer(p,this.vg,this.ze,h,this.$n,this.Ub)},T.prototype.qe=function(){},T}();m.GC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 24},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c){if(a==null)throw m.i.N();if(h.B()||1>h.Db())return 0;if(c==4)throw m.i.Ie();var d=m.cb.sc(a),g=m.cb.vv(d),v=m.cb.ev(d);g*=2-g;var b=d.Hd().ai,C=h.getType();if(C==1736||C==197)var M=h.mg();else m.aa.yd(C)?(M=new m.Ta(h.description)).oc(h,!0):M=h;if(d.Nb(a)==0){if(m.cb.Wc(a)){M=m.Hh.lj(M,a),C==1607&&M==h&&(M=m.aa.jg(h)),h=new m.Nc,m.cb.gh(a).cn(h),C=0;for(var O=M.I();C<O;C++){var L=M.Na(C);L.x=m.Hh.Zm(L.x,h),M.Cb(C,L)}}h=M.Ia(),M=m.Hh.WI(a,d,M,h)?h:m.cb.zh(M,a,d)}return this.hQ(M,c,v,g,b)},p.prototype.hQ=function(h,a,c,d,g){var v=new m.ga(0),b=0;for(h=h.Ga();h.$a();)for(;h.Ha();){var C=h.ha(),M=C.ac();C=C.wc(),M.scale(g),C.scale(g),m.kb.wd(c,d,M.x,M.y,C.x,C.y,v,null,null,a),b+=v.u}return b},p.instance=null,p}(m.Je);m.vL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 18},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d,g){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,c,d,g).next()):new m.uL(h,c,d,a,-1,-1,g)},p.instance=null,p}(m.Je);m.tL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c,d,g){if(0<g||a!=4&&0<d)throw m.i.Ie();if(h==null)throw m.i.N();this.ya=-1,this.Ms=p,this.vg=h,this.ze=a,this.DT=c,this.CT=d}return T.prototype.next=function(){for(var p;(p=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(p);return null},T.prototype.La=function(){return this.ya},T.prototype.Zy=function(p){return m.cj.Qr(p,this.vg,this.ze,this.DT,this.CT,this.Ub)},T.prototype.qe=function(){},T}();m.uL=j}(ye||(ye={})),function(m){(function(j){j[j.Unknown=0]="Unknown",j[j.Contains=1]="Contains",j[j.Within=2]="Within",j[j.Equals=3]="Equals",j[j.Disjoint=4]="Disjoint",j[j.Touches=8]="Touches",j[j.Crosses=16]="Crosses",j[j.Overlaps=32]="Overlaps",j[j.NoThisRelation=64]="NoThisRelation",j[j.Intersects=1073741824]="Intersects",j[j.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(m.cL||(m.cL={})),m.wL=function(){function j(){}return j.nW=function(T,p){var h=T.getType(),a=p.getType();if(m.aa.xj(h)){var c=T.Bb;if(c!=null&&(c=c.Fk)!=null){if(a==33){var d=p.D();c=c.So(d.x,d.y)}else d=new m.l,p.A(d),c=c.Ro(d);if(c==1)return 1;if(c==0)return 4}}if(m.aa.xj(a)&&(c=p.Bb)!=null&&(c=c.Fk)!=null){if(h==33?(T=T.D(),c=c.So(T.x,T.y)):(p=new m.l,T.A(p),c=c.Ro(p)),c==1)return 2;if(c==0)return 4}return 0},j}()}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.getType=function(){return 15},p.prototype.V=function(h,a,c,d,g){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,c,d,g===void 0?-1:g).next()):g===void 0?new m.HC(h,a,c,d,-1):new m.HC(h,a,c,d,g)},p.prototype.wn=function(h,a,c){this.Iu(h)&&(a=m.ta.kj(a,h,!1),h.fj(c)||h.lu(a,c))},p.prototype.Iu=function(h){return m.Nx.zE(h)},p.instance=null,p}(m.Je);m.Xj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c,d){if(this.ts=h==null,this.ya=-1,this.Rd=p,this.vg=a,this.Se=h.next(),this.Dj=this.Se.getType(),this.Ub=c,this.Fi=d,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw m.i.N("bad dimension mask")}return T.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var p=this.zw.next();if(p!=null)return p;this.zw=null}for(;(p=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?p=this.Ea(p):(this.zw=this.PS(p),p=this.zw.next()),p;return null},T.prototype.La=function(){return this.ya},T.prototype.Ea=function(p){var h=this.zK(p);if(h!=null)return h;h=m.ta.mv(this.Se,p);var a=m.ta.Wd(this.vg,h,!0);h=new m.l,this.Se.A(h);var c=new m.l;return p.A(c),h.W(2*a,2*a),h.Ea(c),h.W(100*a,100*a),a=m.Ud.clip(this.Se,h,0,0),p=m.Ud.clip(p,h,0,0),m.Fg.Av(p,a,this.vg,this.Ub)},T.prototype.QI=function(p,h,a){var c=0;if(1&h)a[0]==null&&(a[0]=new m.de(p)),c++;else for(var d=0;d<a.length-1;d++)a[d]=a[d+1];if(2&h)a[c]==null&&(a[c]=new m.Ta(p)),c++;else for(d=c;d<a.length-1;d++)a[d]=a[d+1];if(4&h)a[c]==null&&(a[c]=new m.Da(p)),c++;else for(d=c;d<a.length-1;d++)a[d]=a[d+1];if(c!=3){for(p=[],d=0;d<c;d++)p[d]=a[d];return new m.Zc(p)}return new m.Zc(a)},T.prototype.PS=function(p){var h=this.zK(p);if(h!=null){var a=[null,null,null];return a[h.Db()]=h,this.QI(p.description,this.Fi,a)}h=m.ta.mv(this.Se,p),a=m.ta.Wd(this.vg,h,!0),h=new m.l,this.Se.A(h),h.W(2*a,2*a);var c=new m.l;return p.A(c),h.Ea(c),h.W(100*a,100*a),a=m.Ud.clip(this.Se,h,0,0),h=m.Ud.clip(p,h,0,0),a=m.Fg.Pz(h,a,this.vg,this.Ub),this.QI(p.description,this.Fi,a)},T.prototype.zK=function(p){var h=m.ta.mv(p,this.Se),a=m.ta.Wd(this.vg,h,!0);h=p.getType();var c=p.B(),d=this.Se.B();if(!(d=c||d)){d=new m.l,p.A(d);var g=new m.l;this.Se.A(g),g.W(2*a,2*a),d=!d.isIntersecting(g)}if(!d)if((g=m.wL.nW(this.Se,p))==4)d=!0;else{if(2&g)return this.Se;if(1&g)return p}if(d)return(a=m.aa.tf(h))<(d=m.aa.tf(this.Dj))?T.HB(p,c):a>d||a==0&&h==550&&this.Dj==33?this.nJ():T.HB(p,c);if((this.Fi==-1||this.Fi==4)&&h==197&&this.Dj==197)return a=this.Se,h=new m.l,p.A(h),c=new m.l,a.A(c),h.Ea(c),a=new m.Fh,p.copyTo(a),a.Xo(h),a;if(h==197&&m.aa.tf(this.Dj)==0||this.Dj==197&&m.aa.tf(h)==0)return c=h==197?p:this.Se,p=h==197?this.Se:p,h=new m.l,c.A(h),m.Ud.clip(p,h,a,0);if(m.aa.tf(h)==0&&0<m.aa.tf(this.Dj)||0<m.aa.tf(h)&&m.aa.tf(this.Dj)==0){if(a=m.ta.kj(this.vg,p,!1),h==550||h==33)return m.Fg.zG(p,this.Se,a);if(this.Dj==550||this.Dj==33)return m.Fg.zG(this.Se,p,a);throw m.i.Qa()}return this.Fi!=-1&&this.Fi!=2||h!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||h!=1736||this.Dj!=1607?null:this.wK(this.Se,p):this.wK(p,this.Se)},T.prototype.wK=function(p,h){var a=p,c=h,d=m.ta.kj(this.vg,h,!1),g=new m.l;c.A(g);var v=new m.l;a.A(v),v.W(2*d,2*d),g.Ea(v),g.W(10*d,10*d),a=p=m.Ud.clip(p,g,0,0),v=new m.ia(0);var b=-1,C=c.Bb;if(C!=null){var M=C.Fk;if(M!=null){b=0,v.Jb(a.I()+a.da());for(var O=new m.l,L=a.Ga();L.$a();)for(;L.Ha();){L.ha().A(O);var q=M.Ro(O);q==1?v.add(1):q==0?v.add(0):(v.add(-1),b++)}}}if(5<h.I()&&(C=(c=h=m.Ud.clip(h,g,0,0)).Bb),0>b&&(b=a.yz()),g=a.I()+c.I(),b*c.I()>Math.log(g)*g*4)return null;g=null,b=c.Ga(),C!=null&&C.Fb!=null&&(g=C.Fb),g==null&&20<c.I()&&(g=m.ta.nE(c)),p=p.Ia(),c=null,C=a.Ga(),M=[0,0,0,0,0,0,0,0,0],O=new m.be(0),L=new m.ig,q=-1;for(var U=0,ee=0,Q=0<v.size,ge=-1;C.$a();){ge=C.gb;var ve=0;for(q=-1,U=0;C.Ha();){var fe=Q?m.O.truncate(v.get(ee)):-1;ee++;var Ce=C.ha();if(0>fe){if(g!=null)for(c==null?c=g.vR(Ce,d):c.Uo(Ce,d),fe=c.next();fe!=-1;fe=c.next()){b.Vb(g.ja(fe)),fe=b.ha();var Ie=Ce.Ea(fe,null,M,null,d);for(fe=0;fe<Ie;fe++)O.add(M[fe])}else for(b.Zi();b.$a();)for(;b.Ha();)for(fe=b.ha(),Ie=Ce.Ea(fe,null,M,null,d),fe=0;fe<Ie;fe++)O.add(M[fe]);if(0<O.size){O.Vd(0,O.size,function(dt,ct){return dt-ct});var Ne=0;O.add(1),Ie=-1,fe=0;for(var Ve=O.size;fe<Ve;fe++){var Xe=O.get(fe);if(Xe!=Ne){var et=!1;if(Ne!=0||Xe!=1?(Ce.ah(Ne,Xe,L),Ne=L.get()):(Ne=Ce,et=!0),2<=ve){if(p.Dr(a,ge,q,U,ve==3),this.QD(h,Ne.ac(),d)!=1&&this.RD(h,Ne,d)!=1)return null;p.oc(Ne,!1),ve=1,U=0}else switch(Ie=this.RD(h,Ne,d),Ie){case 1:et?2>ve?(q=C.wb()-a.Ba(ge),U=1,ve=ve==0?3:2):U++:(p.oc(Ne,ve==0),ve=1);break;case 0:ve=0,q=-1,U=0;break;default:return null}Ne=Xe}}}else{if(0>(fe=this.QD(h,Ce.ac(),d)))return null;fe==1?(2>ve&&(q=C.wb()-a.Ba(ge),ve=ve==0?3:2),U++):(q=-1,U=0)}O.clear(!1)}else fe!=0&&fe==1&&(ve==0?(ve=3,q=C.wb()-a.Ba(ge)):ve==1?(ve=2,q=C.wb()-a.Ba(ge)):U++)}2<=ve&&(p.Dr(a,ge,q,U,ve==3),q=-1)}return p},T.prototype.QD=function(p,h,a){return m.Dg.wm(p,h,a)},T.prototype.RD=function(p,h,a){var c=h.ac();h=h.wc();var d=m.Dg.wm(p,c,a),g=m.Dg.wm(p,h,a);return d==1&&g==0||d==0&&g==1?-1:d==0||g==0?0:d==1||g==1?1:((d=new m.h).add(c,h),d.scale(.5),(p=m.Dg.wm(p,d,a))==0?0:p==1?1:-1)},T.HB=function(p,h){return h?p:p.Ia()},T.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},T.prototype.qe=function(){},T}();m.HC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 28},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d,g,v,b){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,c,d,g,v,b).next()):new m.xL(h,a,c,d,g,v,b)},p.instance=null,p}(m.Je);m.IC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c,d,g,v){this.ya=-1,this.Rd=p,this.Mj=h,this.Ka=a,this.Ki=c,this.CA=d,this.uH=g,this.nd=v}return T.prototype.next=function(){var p=this.Rd.next();return p!=null?(this.ya=this.Rd.La(),this.jL(p)):null},T.prototype.La=function(){return this.ya},T.prototype.jL=function(p){var h=0>=this.uH?m.ta.kj(this.Mj,p,!1):this.uH;return m.IK.V(p,this.Ka,this.Ki,this.CA,h,this.nd)},T.prototype.qe=function(){},T}();m.xL=j}(ye||(ye={})),function(m){var j;(j=m.NK||(m.NK={}))[j.clipToDomainOnly=1]="clipToDomainOnly",j[j.clipWithHorizon=2]="clipWithHorizon",j[j.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.prototype.getType=function(){return 0},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(a,c,d){return a instanceof m.aa?(a=new m.Zc(a),this.V(a,c,d).next()):new m.yL(a,c,d)},h.prototype.transform=function(a,c,d,g){return m.bu.transform(a,c,d,g,!0)},h.prototype.Qt=function(a,c,d,g){return m.bu.Qt(a,c,d,g)},h.instance=null,h}(m.Je);m.Hx=T}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){this.ya=-1,this.Rd=p,this.MT=h,this.nd=a}return T.prototype.next=function(){var p=this.Rd.next();return p!=null?(this.ya=this.Rd.La(),m.bu.zh(p,this.MT,this.nd)):null},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.yL=j}(ye||(ye={})),function(m){var j=function(){function p(){}return p.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},p.prototype.AQ=function(h,a,c){for(h.Vb(a,c);h.Ha();){var d=h.ha();if((d=d.Qb())!=0)return h.wb()}for(h.Vb(a,c);h.Ez();)if((d=(d=h.li()).Qb())!=0)return h.wb();return-1},p.prototype.BQ=function(h,a){for(h.Vb(a,-1);h.Ez();)if(h.li().Qb()!=0)return h.wb();return-1},p.prototype.zQ=function(h,a){for(h.Vb(a,-1),h.ha();h.Ha();)if(h.ha().Qb()!=0)return h.wb();return-1},p.prototype.yQ=function(h,a,c,d){if(this.xk=this.AQ(a,c,d),this.xk!=-1){a.Vb(this.xk,-1);var g=a.ha(),v=g.hc(g.fe(h,!1));if(c=m.h.yc(v,h),(d=new m.h).L(v),d.sub(g.ac()),(v=new m.h).L(h),v.sub(g.ac()),this.kq=0>d.wi(v),this.ph=this.zQ(a,this.xk),this.ph!=-1){a.Vb(this.ph,-1);var b=(g=a.ha()).fe(h,!1);b=g.hc(b);var C=m.h.yc(b,h);C>c?this.ph=-1:(d.L(b),d.sub(g.ac()),v.L(h),v.sub(g.ac()),this.us=0>d.wi(v))}this.ph==-1&&(this.ph=this.BQ(a,this.xk),this.ph!=-1&&(a.Vb(this.ph,-1),b=(g=a.ha()).fe(h,!1),b=g.hc(b),(C=m.h.yc(b,h))>c?this.ph=-1:(d.L(b),d.sub(g.ac()),v.L(h),v.sub(g.ac()),this.us=0>d.wi(v),h=this.xk,this.xk=this.ph,this.ph=h,h=this.kq,this.kq=this.us,this.us=h)))}},p.prototype.cO=function(h,a,c,d,g){return c=c.Ga(),this.yQ(h,c,d,g),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(c.Vb(this.xk,-1),h=c.ha().kg(),c.Vb(this.ph,-1),a=c.ha().kg(),0<=h.wi(a)):a},p}(),T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 3},h.prototype.nz=function(a,c,d){var g;if(g===void 0&&(g=!1),a.B())return new m.$l;c=c.D();var v=a,b=a.getType();switch(b==197&&((v=new m.Da).ad(a,!1),b=1736),b){case 33:return this.xI(v,c);case 550:return this.jI(v,c);case 1607:case 1736:return this.bU(v,c,d,g);default:throw m.i.fa("not implemented")}},h.prototype.oz=function(a,c){if(a.B())return new m.$l;c=c.D();var d=a,g=a.getType();switch(g==197&&((d=new m.Da).ad(a,!1),g=1736),g){case 33:return this.xI(d,c);case 550:case 1607:case 1736:return this.jI(d,c);default:throw m.i.fa("not implemented")}},h.prototype.pz=function(a,c,d,g){if(0>g)throw m.i.N();if(a.B())return[];c=c.D();var v=a,b=a.getType();switch(b==197&&((v=new m.Da).ad(a,!1),b=1736),b){case 33:return this.TU(v,c,d,g);case 550:case 1607:case 1736:return this.tU(v,c,d,g);default:throw m.i.fa("not implemented")}},h.prototype.bU=function(a,c,d,g){if(a.getType()==1736&&d&&(d=new m.l,a.A(d),d=m.ta.Wd(null,d,!1),(g?m.hd.Yd(a,c,0):m.hd.Yd(a,c,d))!=0)){var v=new m.$l(c,0,0);return g&&v.WJ(!0),v}var b=a.Ga();v=new m.h;for(var C=d=-1,M=17976931348623157e292,O=0;b.$a();)for(;b.Ha();){var L=b.ha();L=L.hc(L.fe(c,!1));var q=m.h.yc(L,c);q<M?(O=1,v=L,d=b.wb(),C=b.gb,M=q):q==M&&O++}return v=new m.$l(v,d,Math.sqrt(M)),g&&(b.Vb(d,C),L=b.ha(),g=0>m.h.Uq(c,L.ac(),L.wc()),1<O&&((O=new j).reset(),g=O.cO(c,g,a,d,C)),v.WJ(g)),v},h.prototype.xI=function(a,c){return a=a.D(),c=m.h.tb(a,c),new m.$l(a,0,c)},h.prototype.jI=function(a,c){for(var d=a.ub(0),g=a.I(),v=a=0,b=0,C=17976931348623157e292,M=0;M<g;M++){var O=new m.h;d.tc(2*M,O);var L=m.h.yc(O,c);L<C&&(v=O.x,b=O.y,a=M,C=L)}return(c=new m.$l).ey(v,b,a,Math.sqrt(C)),c},h.prototype.TU=function(a,c,d,g){return g==0?[]:(d*=d,a=a.D(),(c=m.h.yc(a,c))<=d?(d=[],(g=new m.$l).ey(a.x,a.y,0,Math.sqrt(c)),d[0]=g):d=[],d)},h.prototype.tU=function(a,c,d,g){if(g==0)return[];var v=a.ub(0),b=a.I();a=[],d*=d;for(var C=0;C<b;C++){var M=v.read(2*C),O=v.read(2*C+1),L=c.x-M,q=c.y-O;(L=L*L+q*q)<=d&&((q=new m.$l).ey(M,O,C,Math.sqrt(L)),a.push(q))}return c=a.length,a.sort(function(U,ee){return U.Ka<ee.Ka?-1:U.Ka==ee.Ka?0:1}),g>=c||(a.length=g),a.slice(0)},h.instance=null,h}(m.Je);m.Ix=T}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 4},p.prototype.V=function(h,a,c,d,g){return m.am.yB(h,a,c,d,g)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.Iu=function(h){return m.Vt.wy(h)},p.prototype.wn=function(h,a,c){m.Vt.CD(h,a,c)},p.instance=null,p}(m.Je);m.zL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 33},p.prototype.V=function(h,a,c,d,g){return h===1073741824?!m.ud.zB(a,c,d,4,g):m.ud.zB(a,c,d,h,g)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.Iu=function(h){return m.Vt.wy(h)},p.prototype.wn=function(h,a,c){m.Vt.CD(h,a,c)},p.instance=null,p}(m.Je);m.dj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c){if(this.nd=c,this.rT=a,this.ya=-1,p==null)throw m.i.N();this.yk=p,this.Mj=h}return T.prototype.next=function(){var p;if((p=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw m.i.fu("user_canceled");return this.eC(p)}return null},T.prototype.La=function(){return this.ya},T.prototype.eC=function(p){if(p==null)throw m.i.N();return m.Jx.cK(p,this.Mj,this.rT,this.nd)},T.prototype.qe=function(){},T}();m.AL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 26},p.prototype.V=function(h,a,c,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,c,d).next()):new m.AL(h,a,c,d)},p.prototype.rs=function(h,a,c,d,g){return 0<(d!==void 0?m.Jx.rs(h,a,c,d,g):m.Jx.rs(h,a,!1,null,c))},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.Yl=j}(ye||(ye={})),function(m){var j=function(){function g(){this.yq=0}return g.prototype.nX=function(v){this.yq&=-2,this.yq|=v?1:0},g.prototype.Wp=function(){return!!(1&this.yq)},g.prototype.XF=function(){return this.Wp()?0:1},g}();m.xY=j;var T=function(){},p=function(g,v,b,C){this.x=g,this.y=v,this.Ai=b,this.xm=C},h=function(){function g(v){this.Be=v}return g.prototype.compare=function(v,b,C){return v=v.ja(C),b=this.Be.lf.read(2*b),0>(b-=v=this.Be.lf.read(2*v))?-1:0<b?1:0},g}(),a=function(){function g(v){this.Be=v}return g.prototype.compare=function(v,b,C){b=this.Be.hb[b],v=this.Be.hb[v.ja(C)];var M=b.Wp(),O=v.Wp();C=b.ne.Pe(this.Be.Mo,0);var L=v.ne.Pe(this.Be.Mo,0);return C==L&&((M=.5*((C=Math.min(M?b.ne.na:b.ne.la,O?v.ne.na:v.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(M=C),C=b.ne.Pe(M,0),L=v.ne.Pe(M,0)),C<L?-1:C>L?1:0},g}(),c=function(){function g(v,b){this.YI=new m.h,this.parent=v,this.dS=b}return g.prototype.nr=function(v,b,C){var M=this.parent,O=this.dS;C.Vd(v,b,function(L,q){return M.Mh(L,q,O)})},g.prototype.$p=function(v){return v=this.parent.gi.get(v),this.parent.lf.tc(2*(v>>1),this.YI),this.YI.y+(1&v?this.parent.Oj:-this.parent.Oj)},g}(),d=function(){function g(v,b,C,M,O){this.nH=v.description,this.X=v,this.Qg=b,this.Oj=m.ta.kj(this.Qg,v,!1),this.Bo=m.ta.kj(this.Qg,v,!0),this.xA=C,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new m.jp,this.fb=new m.Yj,this.ke=new m.Md,this.ZG=this.ql=O}return g.prototype.eT=function(){return this.ZG=!0,(!m.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?m.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},g.prototype.kC=function(v,b){var C=this.lf.read(2*v);v=this.lf.read(2*v+1);var M=this.lf.read(2*b);b=this.lf.read(2*b+1);var O=!m.Yt.Cv(C,v,M,b,this.Oj*this.Oj);return O||this.X.Db()!=0&&C==M&&v==b},g.prototype.GE=function(){for(var v=this.X,b=v.xf?3:2,C=0,M=v.da();C<M;C++)if(v.Ja(C)<b)return this.ke=new m.Md(1,C,0),!1;return!0},g.prototype.DE=function(v){var b=this.X,C=b.Ga(),M=b.hasAttribute(1);for(b=M?m.ta.wE(this.Qg,b,!1):0;C.$a();)for(;C.Ha();){var O=C.ha();if(!(O.Qb()>this.Oj)){if(v&&M){var L=O.wv(1,0);if(O=O.wv(1,0),Math.abs(O-L)>b)continue}return this.ke=new m.Md(2,C.wb(),-1),!1}}return!0},g.prototype.mO=function(){var v=this.X,b=null;m.aa.Hc(this.X.getType())&&(b=this.X);var C=(this.ZG||this.ql)&&b!=null,M=v.I();this.lf=v.ub(0),this.gi=new m.ia(0),this.gi.Jb(2*M),this.fi=new m.ia(0),this.fi.Jb(2*M),C&&(this.Fl==null&&(this.Fl=new m.ia(0)),this.Fl.Jb(M));for(var O=v=0;O<M;O++)if(this.gi.add(2*O),this.gi.add(2*O+1),this.fi.add(2*O),this.fi.add(2*O+1),C){for(;O>=b.Vc(v);)v++;this.Fl.add(v)}for(new m.Xt().sort(this.fi,0,2*M,new c(this,C)),this.fb.clear(),this.fb.Vo(new h(this)),this.fb.De(M),b=0,M*=2;b<M;b++)if(C=this.fi.get(b),C=(v=this.gi.get(C))>>1,1&v){if(v=this.fb.search(C,-1),O=this.fb.we(v),L=this.fb.lb(v),this.fb.vd(v,-1),O!=-1&&L!=-1&&!this.kC(this.fb.ja(O),this.fb.ja(L)))return this.ke=new m.Md(3,this.fb.ja(O),this.fb.ja(L)),!1}else{if(v=this.fb.addElement(C,-1),(O=this.fb.we(v))!=-1&&!this.kC(this.fb.ja(O),C))return this.ke=new m.Md(3,C,this.fb.ja(O)),!1;var L=this.fb.lb(v);if(L!=-1&&!this.kC(this.fb.ja(L),C))return this.ke=new m.Md(3,C,this.fb.ja(L)),!1}return!0},g.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},g.prototype.oO=function(){var v=new m.gd;v.Ib(this.X);var b=new m.Md;return!m.$t.kI(!1,v,this.Oj,b,this.nd)||(b.Jo=v.Ua(b.Jo),b.Ko=v.Ua(b.Ko),this.ke.Wt(b),!1)},g.prototype.nO=function(){var v=this.X,b=v.Ga();for(v=v.Ga();b.$a();)for(;b.Ha();){var C=b.ha();if(!b.Qn()||!b.$S()){v.BW(b);do for(;v.Ha();){var M=v.ha();if((M=C.zr(M,this.Oj,!0))!=0)return this.ke=new m.Md(M==2?5:4,b.wb(),v.wb()),!1}while(v.$a())}}return!0},g.prototype.sO=function(){var v=this.X;this.hb.length=0,this.po.length=0,this.Zf=v.Ga(),this.Zf.JB();var b=new m.ia(0);b.Jb(10);var C=NaN,M=0,O=0;for(v=2*v.I();O<v;O++){var L=this.fi.get(O);if(!(1&(L=this.gi.get(L)))){L>>=1;var q=this.lf.read(2*L),U=this.lf.read(2*L+1);if(b.size!=0&&(q!=C||U!=M)){if(!this.RI(b))return!1;b!=null&&b.clear(!1)}b.add(L),C=q,M=U}}return!!this.RI(b)},g.prototype.rO=function(){for(var v=this.X,b=Array(v.da()),C=0,M=v.da();C<M;C++)b[C]=v.Nn(C);M=new T;var O=new m.h;C=this.fi.get(0);var L=(C=this.gi.get(C))>>1;this.lf.tc(2*L,O);var q=b[C=this.Fl.get(L)],U=v.Ba(C),ee=v.Vc(C)-1;M.el=L==U||L==ee,M.ny=this.ql?!q&&M.el:M.el,M.Ai=C,M.x=O.x,M.y=O.y,M.xm=L;for(var Q=new T,ge=1,ve=this.fi.size;ge<ve;ge++)if(C=this.fi.get(ge),!(1&(C=this.gi.get(C)))){L=C>>1,this.lf.tc(2*L,O),(C=this.Fl.get(L))!=M.Ai&&(q=b[C],U=v.Ba(C),ee=v.Vc(C)-1);var fe=L==U||L==ee,Ce=this.ql?!q&&M.el:M.el;if(Q.x=O.x,Q.y=O.y,Q.Ai=C,Q.xm=L,Q.ny=Ce,Q.el=fe,Q.x==M.x&&Q.y==M.y){if(this.ql){if(!(Q.ny&&M.ny||Q.Ai==M.Ai&&(Q.el||M.el)))return this.ke=new m.Md(8,Q.xm,M.xm),!1}else if(!Q.el||!M.el)return this.ke=new m.Md(5,Q.xm,M.xm),!1}C=M,M=Q,Q=C}return!0},g.prototype.JE=function(){for(var v=this.X,b=[],C=-1,M=!1,O=0,L=v.da();O<L;O++)v.Ev(O)&&(M=!1,C++,O<L-1&&(v.Ev(O+1)||(M=!0))),b[O]=M?C:-1;M=new m.h,O=this.fi.get(0);var q=(O=this.gi.get(O))>>1;this.lf.tc(2*q,M),O=this.Fl.get(q),C=new p(M.x,M.y,O,q,b[O]),v=[];var U=1;for(L=this.fi.size;U<L;U++)if(O=this.fi.get(U),!(1&(O=this.gi.get(O)))){if(q=O>>1,this.lf.tc(2*q,M),O=this.Fl.get(q),(O=new p(M.x,M.y,O,q,b[O])).x==C.x&&O.y==C.y){if(O.Ai==C.Ai)return this.ke=new m.Md(9,O.xm,C.xm),!1;0<=b[O.Ai]&&b[O.Ai]==b[C.Ai]&&(v.length!=0&&v[v.length-1]==C||v.push(C),v.push(O))}C=O}if(v.length==0)return!0;for(O=new m.jp(!0),m.O.$u(b,-1),M=-1,(U=new m.h).Rc(),C=0,L=v.length;C<L;C++){(q=v[C]).x==U.x&&q.y==U.y||(M=O.Ph(0),U.x=q.x,U.y=q.y);var ee=b[q.Ai];ee==-1&&(ee=O.Ph(2),b[q.Ai]=ee),O.addElement(ee,M),O.addElement(M,ee)}for((L=new m.ia(0)).Jb(10),C=O.je;C!=-1;C=O.qz(C))if(!(1&(v=O.PF(C)))&&2&v){for(v=-1,L.add(C),L.add(-1);0<L.size;){if(M=L.Fc(),L.If(),U=L.Fc(),L.If(),1&(q=O.PF(U))){v=2&q?U:M;break}for(O.fX(U,1|q),q=O.rc(U);q!=-1;q=O.lb(q))(ee=O.getData(q))!=M&&(L.add(ee),L.add(U))}if(v!=-1){for(O=-1,C=0,L=b.length;C<L;C++)if(b[C]==v){O=C;break}return this.ke=new m.Md(10,O,-1),!1}}return!0},g.prototype.tO=function(){var v=this.X;if(0>=v.Ke())return this.ke=new m.Md(6,v.da()==1?1:-1,-1),0;if(v.da()==1)return this.ql&&!this.JE()?0:2;this.to=m.ia.qf(v.da(),0),this.JA=m.ia.qf(v.da(),-1);for(var b=-1,C=0,M=0,O=v.da();M<O;M++){var L=v.Ir(M);if(this.to.write(M,0>L?0:256),0<L)b=M,C=L;else{if(L==0)return this.ke=new m.Md(6,M,-1),0;if((0>b||C<Math.abs(L))&&(this.ke=new m.Md(7,M,-1),this.ql))return 0;this.JA.write(M,b)}}for(this.dt=v.da(),this.Om=new m.ia(0),this.Om.Jb(10),O=v.I(),this.Mo=NaN,(v=new m.ia(0)).Jb(10),this.Qq=m.ia.qf(O,-1),this.Hw=m.ia.qf(O,-1),this.zj!=null?this.zj.clear(!1):this.zj=new m.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new a(this)),b=0,O*=2;0<this.dt&&b<O;b++)if(C=this.fi.get(b),!(1&(C=this.gi.get(C)))){if(C>>=1,(M=this.lf.read(2*C+1))!=this.Mo&&v.size!=0){if(!this.ut(v))return 0;v!=null&&v.clear(!1)}v.add(C),this.Mo=M}return 0<this.dt&&!this.ut(v)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},g.prototype.RI=function(v){if(v.size==1)return!0;for(var b=0,C=v.size;b<C;b++){var M=v.get(b);this.Zf.Vb(M);var O=this.Zf.li();this.hb.push(this.Su(O,M,this.Zf.gb,!0)),this.Zf.ha(),O=this.Zf.ha(),this.hb.push(this.Su(O,M,this.Zf.gb,!1))}var L=this;for(this.hb.sort(function(ee,Q){return L.XP(ee,Q)}),(M=this.mh.je)==-1&&(M=this.mh.Ph(0)),this.mh.fn(this.hb.length),b=0,C=this.hb.length;b<C;b++)this.mh.addElement(M,b);b=!0;for(var q=C=-1;b&&(b=!1,(O=this.mh.rc(M))!=-1);)for(var U=this.mh.lb(O);U!=-1;)if(C=this.mh.getData(O),q=this.mh.getData(U),(C=this.hb[C].Io)!=(q=this.hb[q].Io))O=U,U=this.mh.lb(O);else if(b=!0,this.mh.jd(M,O),O=this.mh.we(U),(U=this.mh.jd(M,U))==-1||O==-1)break;if(b=this.mh.bs(M),this.mh.LE(M),0<b)return this.ke=new m.Md(5,C,q),!1;for(b=0,C=v.size;b<C;b++)this.vB(this.hb[b]);return this.hb.length=0,!0},g.prototype.ut=function(v){for(var b=0,C=v.size;b<C;b++){var M=v.get(b),O=this.Qq.read(M);if(O!=-1){var L=this.fb.ja(O);this.zj.add(L),this.fb.vd(O,-1),this.vB(this.hb[L]),this.hb[L]=null,this.Qq.write(M,-1)}(O=this.Hw.read(M))!=-1&&(L=this.fb.ja(O),this.zj.add(L),this.fb.vd(O,-1),this.vB(this.hb[L]),this.hb[L]=null,this.Hw.write(M,-1))}for(b=0,C=v.size;b<C;b++){if(M=v.get(b),this.Zf.Vb(M),(O=this.Zf.li()).na>O.la){var q=this.Zf.wb(),U=this.Su(O,M,this.Zf.gb,!0);0<this.zj.size?(L=this.zj.Fc(),this.zj.If(),this.hb[L]=U):(L=this.hb.length,this.hb.push(U)),O=this.fb.addElement(L,-1),this.Qq.read(q)==-1?this.Qq.write(q,O):this.Hw.write(q,O),!(3&this.to.read(this.Zf.gb))&&this.Om.add(O)}this.Zf.ha(),(O=this.Zf.ha()).na<O.la&&(q=this.Zf.ik(),U=this.Su(O,M,this.Zf.gb,!1),0<this.zj.size?(L=this.zj.Fc(),this.zj.If(),this.hb[L]=U):(L=this.hb.length,this.hb.push(U)),O=this.fb.addElement(L,-1),this.Qq.read(q)==-1?this.Qq.write(q,O):this.Hw.write(q,O),!(3&this.to.read(this.Zf.gb))&&this.Om.add(O))}for(b=0,C=this.Om.size;b<C&&0<this.dt;b++)if(O=this.Om.get(b),!(3&this.to.read(this.hb[this.fb.ja(O)].IA))){v=-1,M=this.fb.we(O);var ee=O;U=null,L=-1;for(var Q=0;M!=-1&&(L=this.fb.ja(M),L=(U=this.hb[L]).IA,!(3&(Q=this.to.read(L))));)ee=M,M=this.fb.we(M);M==-1?(q=1,M=ee):(v=(3&Q)==1?L:this.JA.read(L),q=U.XF()!=0?0:1,M=this.fb.lb(M));do{if(L=this.fb.ja(M),L=(U=this.hb[L]).IA,!(3&(ee=this.to.read(L)))){if(q!=U.XF())return this.ke=new m.Md(6,L,-1),!1;if(ee=252&ee|(Q=q==0||U.Wp()?2:1),this.to.write(L,Q),Q==2&&this.ke.Jj==0&&this.JA.read(L)!=v&&(this.ke=new m.Md(7,L,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&ee)==1&&(v=L),ee=M,M=this.fb.lb(M),q=q!=0?0:1}while(ee!=O)}return this.Om!=null?this.Om.clear(!1):this.Om=new m.ia(0),!0},g.prototype.Su=function(v,b,C,M){if(v.getType()!=322)throw m.i.Qa();return(v=this.sP(v)).Io=b,v.IA=C,v.yq=0,v.nX(M),v},g.prototype.sP=function(v){if(0<this.po.length){var b=this.po[this.po.length-1];--this.po.length,v.copyTo(b.ne)}else(b=new j).ne=m.SC.jg(v);return b},g.prototype.vB=function(v){v.ne.getType()==322&&this.po.push(v)},g.prototype.kU=function(){for(var v=this.X.I(),b=new m.ia(0),C=0;C<v;C++)b.add(C);var M=this;for(b.Vd(0,v,function(O,L){return M.Ou(O,L)}),C=1;C<v;C++)if(this.Ou(b.get(C-1),b.get(C))==0)return this.ke=new m.Md(3,b.get(C-1),b.get(C)),0;return 2},g.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},g.prototype.oV=function(){return this.eT()},g.prototype.pU=function(){for(var v=this.X.I(),b=new m.ia(0),C=0;C<v;C++)b.add(C);var M=this;b.Vd(0,v,function(ee,Q){return M.PO(ee,Q)});var O=Array(v);for(m.O.$u(O,!1),O[b.get(0)]=!0,C=1;C<v;C++){var L=b.get(C-1),q=b.get(C);this.Ou(L,q)==0?O[q]=!1:O[q]=!0}b=this.X.Ia(),L=this.X,q=0;var U=1;for(C=0;C<v;C++)O[C]?U=C+1:(q<U&&b.Fd(L,q,U),q=C+1);return q<U&&b.Fd(L,q,U),b.Ch(2,this.Bo),b},g.prototype.NV=function(){var v=this.X,b=v.Ga(),C=v.Ga(),M=this.X.Ia(),O=this.X,L=v.hasAttribute(1),q=L?m.ta.wE(this.Qg,v,!0):0,U=new m.ia(0),ee=new m.ia(0);for(U.Jb(m.O.truncate(v.I()/2+1)),ee.Jb(m.O.truncate(v.I()/2+1));b.$a();)if(C.$a(),!(2>v.Ja(b.gb))){C.EW();for(var Q,ge,ve=!0;b.Ha();){var fe=b.ha(),Ce=C.li();if(b.wb()>C.wb())break;ve&&(U.add(b.wb()),ee.add(C.ik()),ve=!1),ge=U.Fc();var Ie=b.ik();if(1<Ie-ge){var Ne=new m.h;Ne.uc(v.Na(ge),v.Na(Ie)),Q=Ne.length()}else Q=fe.Qb();ge=ee.Fc(),1<(Ie=C.wb())-ge?((Ne=new m.h).uc(v.Na(ge),v.Na(Ie)),ge=Ne.length()):ge=Ce.Qb(),Q>this.Bo?U.add(b.ik()):L&&(Q=v.Uc(1,U.Fc(),0),fe=fe.gv(1,0),Math.abs(fe-Q)>q&&U.add(b.ik())),ge>this.Bo?ee.add(C.wb()):L&&(Q=v.Uc(1,ee.Fc(),0),fe=Ce.gv(1,0),Math.abs(fe-Q)>q&&ee.add(C.wb()))}if(U.Fc()<ee.Fc()?U.size>ee.size?U.If():ee.If():(U.Fc()!=ee.Fc()&&ee.If(),ee.If()),2<=ee.size+U.size){for(ve=new m.Sa,Ce=0,fe=U.size;Ce<fe;Ce++)O.ve(U.get(Ce),ve),Ce==0?M.nf(ve):M.lineTo(ve);for(Ce=ee.size-1;0<Ce;Ce--)O.ve(ee.get(Ce),ve),M.lineTo(ve);O.dc(b.gb)?M.Ap():0<ee.size&&(O.ve(ee.get(0),ve),M.lineTo(ve))}U!=null&&U.clear(!1),ee!=null&&ee.clear(!1)}return M.Ch(2,this.Bo),M},g.prototype.rV=function(){return this.DX()},g.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?m.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new m.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&m.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&m.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},g.rs=function(v,b,C,M,O){if(M!=null&&(M.Jj=0,M.Jo=-1,M.Ko=-1),v.B())return 1;var L=v.getType();if(L==33)return 1;var q=m.ta.kj(b,v,!1);if(L==197)return b=new m.l,v.A(b),b.Bi(q)?(M!=null&&(M.Jj=2,M.Jo=-1,M.Ko=-1),0):1;if(m.aa.yd(L))return(q=new m.Ta(v.description)).oc(v,!0),g.rs(q,b,C,M,O);var U=v.om(q);if((C=C?-1:U)!=-1)return C;if(b=new g(v,b,C,O,!1),L==550)C=b.kU();else if(L==1607)C=b.JV();else{if(L!=1736)throw m.i.Qa();C=b.oV()}return v.Ch(C,q),M!=null&&C==0&&M.Wt(b.ke),C},g.cK=function(v,b,C,M){if(v.B())return v;var O=v.getType();if(O==33)return v;var L=m.ta.kj(b,v,!1);if(O==197)return b=new m.l,v.A(b),b.Bi(L)?v.Ia():v;if(m.aa.yd(O))return(O=new m.Ta(v.description)).oc(v,!0),g.cK(O,b,C,M);if(L=v.om(L),(C=C?-1:L)==2)return v;if(v=new g(v,b,C,M,!1),O==550)v=v.pU();else if(O==1607)v=v.NV();else{if(O!=1736)throw m.i.Qa();v=v.rV()}return v},g.prototype.Mh=function(v,b,C){if(v==b)return 0;v=this.gi.get(v);var M=this.gi.get(b);b=v>>1;var O=M>>1,L=new m.h,q=new m.h;return this.lf.tc(2*b,L),L.y+=1&v?this.Oj:-this.Oj,this.lf.tc(2*O,q),q.y+=1&M?this.Oj:-this.Oj,(v=L.compare(q))==0&&C?0>(C=this.Fl.get(b)-this.Fl.get(O))?-1:0<C?1:0:v},g.prototype.Ou=function(v,b){if(v==b)return 0;var C=this.X,M=C.Na(v),O=C.Na(b);if(M.x<O.x)return-1;if(M.x>O.x)return 1;if(M.y<O.y)return-1;if(M.y>O.y)return 1;for(M=1;M<this.oT;M++){O=this.nH.kd(M);for(var L=m.ra.Va(O),q=0;q<L;q++){var U=C.Uc(O,v,q),ee=C.Uc(O,b,q);if(U<ee)return-1;if(U>ee)return 1}}return 0},g.prototype.PO=function(v,b){var C=this.Ou(v,b);return C==0?v<b?-1:1:C},g.prototype.XP=function(v,b){if(v===b)return 0;var C=v.ne.kg();v.Wp()&&C.Sq(),v=b.ne.kg(),b.Wp()&&v.Sq(),b=C.qu();var M=v.qu();return M==b?(b=C.wi(v),Math.abs(b)<=8881784197001252e-31*(Math.abs(v.x*C.y)+Math.abs(v.y*C.x))&&(b--,b++),0>b?1:0<b?-1:0):b<M?-1:1},g}();m.Jx=d}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 30},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,c,d){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,c,d).next()):new m.BL(h,a,c,d)},p.ep=function(h,a,c,d){var g=h.Db(),v=a.Db();if(h.B()&&a.B())return g>v?h:a;if(h.B())return a;if(a.B())return h;var b=new m.l,C=new m.l,M=new m.l;return h.A(b),a.A(C),M.K(b),M.Zb(C),b=m.ta.Wd(c,M,!0),C=h.getType(),M=a.getType(),C==33&&M==33?p.aV(h,a,b):C!=M?0<g||0<v?g>v?h:a:C==550?p.iI(h,a,b):p.iI(a,h,b):m.Fg.ep(h,a,c,d)},p.aV=function(h,a,c){c=c*Math.sqrt(2)*1.00001,c*=c;var d=h.D(),g=a.D(),v=new m.de(h.description);return m.h.yc(d,g)>c&&(v.add(h),v.add(a)),v},p.iI=function(h,a,c){var d=h.ub(0),g=h.I(),v=a.D(),b=h.Ia();c=c*Math.sqrt(2)*1.00001;var C=new m.l;if(h.A(C),C.W(c,c),C.contains(v)){c*=c,C=!1;for(var M=[],O=0;O<g;O++)M[O]=!1;for(O=0;O<g;O++){var L=d.read(2*O),q=d.read(2*O+1);(L-=v.x)*L+(q-=v.y)*q<=c&&(C=!0,M[O]=!0)}if(C)for(O=0;O<g;O++)M[O]||b.Fd(h,O,O+1);else b.Fd(h,0,g),b.add(a)}else b.Fd(h,0,g),b.add(a);return b},p.instance=null,p}(m.Je);m.Kx=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,c){this.ts=h==null,this.ya=-1,this.Rd=p,this.vg=a,this.NT=h.next(),this.Ub=c}return T.prototype.next=function(){return this.ts?null:(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),m.Kx.ep(p,this.NT,this.vg,this.Ub)):null;var p},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.BL=j}(ye||(ye={})),function(m){var j=function(){function h(){}return h.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},h}(),T=function(){function h(){this.Gr=0,this.pj=[]}return h.prototype.pN=function(a){this.Gr+=a.Ax,this.pj.push(a)},h.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},h.prototype.my=function(){return this.pj[this.pj.length-1]},h.prototype.Nb=function(a){return a===this},h}(),p=function(){function h(a,c,d){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=a,this.vg=c,this.Ub=d}return h.dE=function(a){var c=[],d=0;for(a=Object.keys(a);d<a.length;d++)c.push(Number(a[d]));return c.sort(function(g,v){return g-v}),c},h.prototype.fG=function(a){var c=this.Do[a],d=h.dE(c)[0],g=c[d],v=g.my().$y;return g=g.my().AK,delete c[d],g&&(v=m.Yl.local().V(v,this.vg,!1,this.Ub),a==0&&v.getType()==33&&(a=new m.de(v.description),v.B()||a.add(v),v=a)),v},h.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw m.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},h.prototype.La=function(){return this.ya},h.prototype.qK=function(){if(this.Ic)return!0;var a=null;if(this.Rd!=null&&(a=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),m.mp.zp(this.Ub),a!=null){var c=a.Db();this.AH[c]=!0,c>=this.zk&&!this.jA&&(this.ND(c,!1,a),c>this.zk&&!this.jA&&this.zW(c))}if(0<this.iq)for(c=0;c<=this.zk;c++)for(;1<this.uq[c]&&(a=this.FO(c)).length!=0;)a=m.Fg.VP(a,this.vg,this.Ub),this.ND(c,!0,a);return this.Ic},h.prototype.FO=function(a){for(var c=[],d=[],g=this.Do[a],v=h.dE(g),b=0;b<v.length;b++){var C=v[b],M=g[C];if(this.Ic||1e4<M.Gr&&1<M.pj.length){for(this.uq[a]-=M.pj.length,this.iq-=M.pj.length;0<M.pj.length;)c.push(M.my().$y),M.TV();d.push(C)}}for(b=0;b<d.length;b++)delete g[d[b]];return c},h.prototype.zW=function(a){for(var c=0;c<a;c++)this.Do[c]=[],this.iq-=this.uq[c],this.uq[c]=0},h.prototype.ND=function(a,c,d){var g=new j;if(g.Fz(),g.$y=d,d=h.eS(d),g.Ax=d,d=h.cS(d),a+1>this.Do.length)for(var v=0,b=Math.max(2,a+1);v<b;v++)this.Do.push([]);(v=this.Do[a][d])===void 0&&(v=new T,this.Do[a][d]=v),g.AK=c,v.pN(g),this.uq[a]++,this.iq++,this.zk=Math.max(this.zk,a)},h.cS=function(a){return 0<a?m.O.truncate(Math.log(a)/Math.log(4)+.5):0},h.eS=function(a){var c=a.getType();if(m.aa.xj(c))return a.I();if(c==33)return 1;if(c==197)return 4;if(m.aa.yd(c))return 2;throw m.i.Qa()},h.prototype.qe=function(){this.qK()},h}();m.DL=p}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 1},p.prototype.V=function(h,a,c,d){return d===void 0?new m.DL(h,a,c):this.gQ(h,a,c,d)},p.prototype.gQ=function(h,a,c,d){return h=new m.Zc([h,a]),this.V(h,c,d).next()},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.Gh=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.nextPath=0]="nextPath",T[T.nextSegment=1]="nextSegment",T[T.iterate=2]="iterate",j=function(){function p(h,a,c,d){this.Ts=new m.l,this.GT=h,this.HT=a,this.mq=d,this.uo=-1,this.rl=!1;var g=h.Bb;g!=null&&(g=d?g.zo:g.Fb)!=null&&(this.Ic=!1,this.qa=c,this.Fb=g,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,d?this.uo=a.da():this.sd=a.Ga()),this.rl||(g=a.Bb)!=null&&(g=d?g.zo:g.Fb)!=null&&(this.Ic=!1,this.qa=c,this.Fb=g,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,d?this.uo=h.da():this.sd=h.Ga()),this.rl||(this.ci=d?m.ta.mR(h,a,c,1<=h.om(0),1<=a.om(0)):m.ta.lR(h,a,c))}return p.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var h=!0;h;)switch(this.Xb){case 0:h=this.xU();break;case 1:h=this.yU();break;case 2:h=this.Uz();break;default:throw m.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},p.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},p.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},p.prototype.uz=function(){if(!this.mq)throw m.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},p.prototype.az=function(){if(!this.mq)throw m.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},p.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},p.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var h=this.sd.ha();return this.xw.Uo(h,this.qa),this.Xb=2,!0},p.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},p}(),m.Zl=j}(ye||(ye={})),function(m){(m=m.OL||(m.OL={}))[m.enumClosed=1]="enumClosed",m[m.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",m[m.enumOGCStartPolygon=4]="enumOGCStartPolygon",m[m.enumCalcMask=4]="enumCalcMask"}(ye||(ye={})),function(m){m.QC=function(){function j(){}return j.tb=function(T,p,h,a,c,d,g,v,b){var C=[0,0,0],M=[0,0,0],O=[0,0,0],L=[0,0,0,0],q=new m.ga(0),U=new m.ga(0),ee=new m.ga(0);if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,c,d,g,v,b);else{c=m.F.ba(c),h=m.F.ba(h);var Q=m.F.ba(c-h);if(m.s.Y(a,d)&&(m.s.Y(h,c)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(c)):m.F.ba(c)),void(b!=null&&(b.u=0<a?m.F.ba(c):m.F.ba(3.141592653589793-m.F.ba(c))));m.s.Y(m.s.P(Q),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else if(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897)||m.s.Y(h,c)||m.s.Y(m.s.P(Q),3.141592653589793)||m.s.Cd(a))return void m.Wk.tb(T,p,h,a,c,d,g,v,b);var ge=Math.sqrt(1-p);c=m.F.ba(c-h),h=0,m.F.cl(1,p,a,h,0,q,U,ee),C[0]=q.u,C[1]=U.u,C[2]=ee.u,m.F.cl(1,p,d,c,0,q,U,ee),M[0]=q.u,M[1]=U.u,M[2]=ee.u,O[0]=0,O[1]=0,O[2]=-1*p*m.F.n(1,p,a)*Math.sin(a),0>c?m.F.Wq(O,M,C,L,0):m.F.Wq(O,C,M,L,0),U=[0,0,0],ee=[0,0,0];var ve=[0,0,0];C=[0,0,0],q=[0,0,0];var fe=Math.acos(L[2]/1),Ce=1-p,Ie=Math.tan(fe),Ne=1+Ie*Ie/Ce,Ve=2*O[2]*Ie/Ce;for(Ce=(-Ve+(Ie=Math.sqrt(Ve*Ve-4*Ne*(O[2]*O[2]/Ce-1))))/(Ne*=2),Ve=(-Ve-Ie)/Ne,Ie=Math.tan(fe),fe=(Ce+Ve)/2,O=((Ne=Ie*Ce+O[2])+(Ie*Ve+O[2]))/2,Ie=m.F.gp(Ce-fe,Ne-O),Ce=O/ge*1.570796326794897,Ve=0;100>Ve&&(Ne=(Ne=m.F.w(p,Ce))*Ne/Math.cos(Ce)*(Math.sin(Ce)-O*Ne/(1-p)),!m.s.Cd(Ne));Ve++)Ce-=Ne;O=m.F.n(1,p,Ce)*Math.cos(Ce),Ie=1-Ie/(O=Math.sqrt((O-fe)*(O+fe))),Ie*=2-Ie,Ne=m.F.on(U),fe=m.F.on(ee),Ce=m.F.on(ve);var Xe=m.F.St(ve,U);Ve=m.F.St(ve,ee),m.F.zx(ve,U,C),m.F.zx(ve,ee,q),U=Math.acos(Xe/(Ce*Ne)),ee=Math.acos(Ve/(Ce*fe)),ee*=m.s.Mb(1,m.F.St(C,q)),(1.570796326794897<=m.s.P(U)&&1.570796326794897<=m.s.P(ee)||3.141592653589793<m.s.P(U-ee))&&(U=(3.141592653589793-m.s.P(U))*m.s.Mb(1,U),ee=(3.141592653589793-m.s.P(ee))*m.s.Mb(1,ee)),C=m.F.Qj(Ie,ee),q=m.F.q(O,Ie,m.F.Qj(Ie,U)),C=m.F.q(O,Ie,C),C=m.s.P(C-q)*T,U=new m.ga(0),ee=new m.ga(0),ve=L[1]/1,ve*=-m.s.Mb(1,Q),q=Math.acos(ve)*m.s.Mb(1,Q),j.rf(T,p,h,a,C,q,U,ee),m.s.Y(c,U.u)&&m.s.Y(d,ee.u)||(Ie=m.F.gp(m.F.ba(c-U.u),d-ee.u),j.rf(T,p,h,a,C,m.F.ba(q+3.141592653589793),U,ee),(Ne=m.F.gp(m.F.ba(c-U.u),d-ee.u))<Ie&&(q=m.F.ba(q+3.141592653589793))),U=[0,0,0,0],ee=[0,0,0,0],Ie=[0,0,0],T=[0,0,0],h=[0,0,0],a=[0,0,0],ve=[0,0,0],(O=[0,0,0])[0]=0,O[1]=0,O[2]=ge,Ie[0]=0,Ie[1]=0,Ie[2]=0,m.F.Wq(Ie,O,M,U,0),m.s.Cd(d)?(T[0]=M[0],T[1]=M[1],T[2]=1,h[0]=1*Math.cos(c)-1*Math.sin(c),h[1]=1*Math.sin(c)+1*Math.cos(c)):(p=m.F.n(1,p,d)*Math.cos(d),T[0]=0,T[1]=0,M[2]+=Math.tan(1.570796326794897-m.s.P(d))*p*m.s.Mb(1,d),h[0]=p*Math.cos(c)-p*Math.sin(c),h[1]=p*Math.sin(c)+p*Math.cos(c)),h[2]=M[2],m.F.Wq(M,h,T,ee,1),m.F.zx(ee,U,a),m.F.zx(ee,L,ve),ve=m.F.St(a,ve)/(m.F.on(a)*m.F.on(ve)),ve*=m.s.Mb(1,Q),c=Math.acos(ve)*-m.s.Mb(1,Q),(0<q&&0<c||0>q&&0>c)&&(c=m.F.ba(c+3.141592653589793)),g!=null&&(g.u=C),v!=null&&(v.u=q),b!=null&&(b.u=c)}}},j.rf=function(T,p,h,a,c,d,g,v){var b=[0,0,0],C=[0,0,0],M=[0,0,0],O=[0,0,0],L=[0,0,0],q=[0,0,0],U=[0,0,0],ee=[0,0,0,0],Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.ga(0),Ie=new m.ga(0);if(g!=null&&v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,c,d,g,v);else if(m.s.Cd(c))g!=null&&(g.u=h),v!=null&&(v.u=a);else if(d=m.F.ba(d),0>c&&(c=m.s.P(c),d=m.F.ba(d+3.141592653589793)),h=m.F.ba(h),a=m.F.ba(a),1.570796326794897<m.s.P(a)&&(h=m.F.ba(h+3.141592653589793),a=m.s.Mb(3.141592653589793,a)-a),m.s.Y(m.s.P(a),1.570796326794897)||m.s.Cd(a)||m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))m.Wk.rf(T,p,h,a,c,d,g,v);else{var Ne=Math.sqrt(1-p);for(T=c/T,m.F.cl(1,p,a,0,0,fe,Ce,Ie),b[0]=fe.u,b[1]=Ce.u,b[2]=Ce.u,U[0]=0,U[1]=0,U[2]=-1*p*m.F.n(1,p,a)*Math.sin(a),fe=m.F.n(1,p,a),Ce=m.F.ba(1.570796326794897-d),Ie=Math.sin(Ce),c=Math.cos(a),a=Math.sin(a),L[0]=fe*c-a*Ie,L[1]=Math.cos(Ce),L[2]=(1-p)*fe*a+c*Ie,0>d?m.F.Wq(U,L,b,ee,0):m.F.Wq(U,b,L,ee,0),b=Math.acos(ee[2]/1),ee=Math.atan2(-ee[1],-ee[0]),a=1-p,Ce=1+(L=Math.tan(b))*L/a,a=(-(fe=2*U[2]*L/a)+(L=Math.sqrt(fe*fe-4*Ce*(U[2]*U[2]/a-1))))/(Ce*=2),fe=(-fe-L)/Ce,L=Math.tan(b),b=(a+fe)/2,U=((Ce=L*a+U[2])+(L*fe+U[2]))/2,L=m.F.gp(a-b,Ce-U),Ne=U/Ne*1.570796326794897,a=0;100>a&&(fe=(fe=m.F.w(p,Ne))*fe/Math.cos(Ne)*(Math.sin(Ne)-U*fe/(1-p)),!m.s.Cd(fe));a++)Ne-=fe;Ne=m.F.n(1,p,Ne)*Math.cos(Ne),U=1-L/(Ne=Math.sqrt((Ne-b)*(Ne+b))),U*=2-U,q=Math.acos(m.F.St(q,C)/(m.F.on(q)*m.F.on(C))),q*=m.s.Mb(1,C[0]),d=(m.F.q(Ne,U,m.F.Qj(U,q))+T*m.s.Mb(1,d))/m.F.Ah(Ne,U),d=m.F.ba(1.570796326794897*d),d=m.F.Rq(U,d),m.F.n(Ne,U,d),L=m.F.ba(ee+h),h=Math.cos(L),d=Math.sin(L),M[0]=O[0]*h+O[1]*-d,M[1]=O[0]*d+O[1]*h,M[2]=O[2],m.F.jO(p,M[0],M[1],M[2],ve,ge,Q),g!=null&&(g.u=ge.u),v!=null&&(v.u=ve.u)}},j}()}(ye||(ye={})),function(m){var j=function(){function c(d){this.Ya=null,this.wt=new m.h,this.xt=new m.h,this.g=d}return c.prototype.compare=function(d,g,v){return this.g.Gc(g,this.wt),this.g.Gc(d.ja(v),this.xt),this.wt.compare(this.xt)},c}(),T=function(){function c(d){this.Bf=new m.h,this.Dk=new m.h,this.g=d}return c.prototype.Dh=function(d){this.Bf.L(d)},c.prototype.compare=function(d,g){return this.g.Gc(d.ja(g),this.Dk),this.Bf.compare(this.Dk)},c}(),p=function(c){function d(g){var v=c.call(this,g.g,g.qa,!1)||this;return v.ib=g,v}return ri(d,c),d.prototype.compare=function(g,v,b){if(this.rg)return-1;var C=this.ib.Qd.Jn(this.ib.Rh(v));g=g.ja(b);var M=this.ib.Qd.Jn(this.ib.Rh(g));return this.Dm=b,this.RE(v,C,g,M)},d}(m.UC),h=function(c){function d(g){var v=c.call(this,g.g,g.qa)||this;return v.ib=g,v}return ri(d,c),d.prototype.compare=function(g,v){return this.rg?-1:(g=this.ib.Qd.Jn(this.ib.Rh(g.ja(v))),this.Dm=v,this.SE(v,g))},d}(m.aM),a=function(){function c(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new m.h,this.Pi=new m.h,this.hb=new m.$c(8),this.zd=new m.$c(5),this.lh=new m.au,this.Qd=new m.au,this.Ng=!1,this.vh=new m.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new m.Yj,this.Mc=new m.Yj,this.nh=new m.ia(0),this.Gk=new m.TC,this.Ff=new m.ia(0),this.Ak=new m.ia(0),this.jo=new m.Sa}return c.prototype.PX=function(d,g){var v=new m.Dd;return v.$B(),d.Oc(v),this.er(d),this.Wn=!1,this.qa=g,this.UA=g*g,g=this.jC(),d.Oc(v),g||(this.qQ(),g||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},c.prototype.TX=function(d,g){this.er(d),this.Wn=!1,this.qa=g,this.UA=g*g,this.Ng=!1,this.jC(),this.Ng||(this.Ng=d.Gp(g,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},c.prototype.pg=function(d,g){return this.hb.T(d,0+g)},c.prototype.LB=function(d,g,v){this.hb.S(d,0+g,v)},c.prototype.Rh=function(d){return this.hb.T(d,2)},c.prototype.ZW=function(d,g){this.hb.S(d,2,g)},c.prototype.RF=function(d,g){return this.hb.T(d,3+g)},c.prototype.Pp=function(d){return this.hb.T(d,7)},c.prototype.Pl=function(d,g){this.hb.S(d,7,g)},c.prototype.Rp=function(d,g){return this.hb.T(d,3+this.Op(d,g))},c.prototype.fr=function(d,g,v){this.hb.S(d,3+this.Op(d,g),v)},c.prototype.NR=function(d,g){return this.hb.T(d,5+this.Op(d,g))},c.prototype.hr=function(d,g,v){this.hb.S(d,5+this.Op(d,g),v)},c.prototype.Sr=function(d){return this.zd.T(d,0)},c.prototype.UW=function(d,g){this.zd.S(d,0,g)},c.prototype.ez=function(d){return this.zd.T(d,4)},c.prototype.cr=function(d,g){this.zd.S(d,4,g)},c.prototype.il=function(d){return this.zd.T(d,1)},c.prototype.ln=function(d,g){this.zd.S(d,1,g)},c.prototype.dz=function(d){return this.zd.T(d,3)},c.prototype.Et=function(d,g){this.zd.S(d,3,g)},c.prototype.Ym=function(d){var g=this.zd.Ce(),v=this.lh.Ph();return this.UW(g,v),d!=-1?(this.lh.addElement(v,d),this.g.Ra(d,this.xh,g),this.cr(g,this.g.Ua(d))):this.cr(g,-1),g},c.prototype.HP=function(d){this.zd.jd(d)},c.prototype.LD=function(d,g){this.lh.addElement(this.Sr(d),g),this.g.Ra(g,this.xh,d)},c.prototype.nt=function(d){var g=this.hb.Ce(),v=this.Qd.Ph();return this.ZW(g,v),d!=-1&&this.Qd.addElement(v,d),g},c.prototype.MD=function(d,g){this.Qd.addElement(this.Rh(d),g)},c.prototype.Uu=function(d){this.hb.jd(d),0<=(d=this.nh.lF(d))&&this.nh.SV(d)},c.prototype.hj=function(d,g){if(this.pg(d,0)==-1)this.LB(d,0,g);else{if(this.pg(d,1)!=-1)throw m.i.Qa();this.LB(d,1,g)}this.ky(d,g)},c.prototype.ky=function(d,g){var v=this.il(g);if(v!=-1){var b=this.Rp(v,g);this.hr(b,g,d),this.fr(d,g,b),this.fr(v,g,d),this.hr(d,g,v)}else this.hr(d,g,d),this.fr(d,g,d),this.ln(g,d)},c.prototype.Op=function(d,g){return this.pg(d,0)==g?0:1},c.prototype.Xm=function(d,g){var v,b=this.dz(g);if(b!=-1&&(this.df.vd(b,-1),this.Et(g,-1)),(b=this.il(g))!=-1){var C=v=b;do{var M=!1,O=this.Op(v,g),L=this.RF(v,O);if(this.pg(v,O+1&1)==d){if(this.Xu(v),this.Qd.bh(this.Rh(v)),this.Uu(v),v==L){b=-1;break}b==v&&(b=this.il(g),C=L,M=!0)}v=L}while(v!=C||M);if(b!=-1){do O=this.Op(v,g),L=this.RF(v,O),this.LB(v,O,d),v=L;while(v!=C);(v=this.il(d))!=-1?(C=this.Rp(v,d),M=this.Rp(b,d),C==v?(this.ln(d,b),this.ky(v,d),this.ln(d,v)):M==b&&this.ky(b,d),this.fr(b,d,C),this.hr(C,d,b),this.fr(v,d,M),this.hr(M,d,v)):this.ln(d,b)}}for(b=this.Sr(d),v=this.Sr(g),C=this.lh.rc(v);C!=-1;C=this.lh.lb(C))this.g.Ra(this.lh.ja(C),this.xh,d);this.lh.Hy(b,v),this.HP(g)},c.prototype.UT=function(d,g){var v=this.pg(d,0),b=this.pg(d,1),C=this.pg(g,0),M=this.pg(g,1);this.Qd.Hy(this.Rh(d),this.Rh(g)),g==this.il(v)&&this.ln(v,d),g==this.il(b)&&this.ln(b,d),this.Xu(g),this.Uu(g),v==C&&b==M||b==C&&v==M||(this.Hn(v,this.yo),this.Hn(C,this.Pi),this.yo.qb(this.Pi)?(v!=C&&this.Xm(v,C),b!=M&&this.Xm(b,M)):(b!=C&&this.Xm(b,C),v!=M&&this.Xm(v,M)))},c.prototype.Xu=function(d){var g=this.pg(d,1);this.dF(d,this.pg(d,0)),this.dF(d,g)},c.prototype.dF=function(d,g){var v=this.Rp(d,g),b=this.NR(d,g),C=this.il(g);v!=d?(this.fr(b,g,v),this.hr(v,g,b),C==d&&this.ln(g,v)):this.ln(g,-1)},c.prototype.WD=function(d,g,v){var b=this.Qd.rc(d),C=this.Qd.ja(b);d=this.Le(C);var M=this.Le(this.g.U(C));for(this.g.jr(C,g,v,!0),b=this.Qd.lb(b);b!=-1;b=this.Qd.lb(b)){C=this.Qd.ja(b);var O=this.Le(C)==d;this.g.jr(C,g,v,O)}b=g.Vp(v,0).ac(),g=g.Vp(v,g.ol(v)-1).wc(),this.BK(d,b),this.BK(M,g)},c.prototype.ZE=function(d,g,v){var b=this.Rh(d),C=this.pg(d,0),M=this.pg(d,1),O=this.nt(-1);for(this.nh.add(O),this.Pl(O,-3),this.Ff.add(O),this.hj(O,C),d=1,g=g.ol(v);d<g;d++)v=this.Ym(-1),this.Ak.add(v),this.Ff.add(v),this.hj(O,v),O=this.nt(-1),this.nh.add(O),this.Pl(O,-3),this.Ff.add(O),this.hj(O,v);for(this.hj(O,M),b=this.Qd.rc(b);b!=-1;b=this.Qd.lb(b))if(M=this.Qd.ja(b),this.Le(M)==C){d=0;do 0<d&&(O=this.Ff.get(d-1),this.LD(O,M),this.ez(O)==-1&&this.cr(O,this.g.Ua(M))),O=this.Ff.get(d),d+=2,this.MD(O,M),M=this.g.U(M);while(d<this.Ff.size)}else{d=this.Ff.size-1;do d<this.Ff.size-2&&(O=this.Ff.get(d+1),this.LD(O,M),0>this.ez(O)&&this.cr(O,this.g.Ua(M))),O=this.Ff.get(d),d-=2,this.MD(O,M),M=this.g.U(M);while(0<=d)}this.Ff.clear(!1)},c.prototype.Le=function(d){return this.g.Pa(d,this.xh)},c.prototype.TI=function(d,g,v){var b=this.pg(g,0),C=new m.h;this.Hn(b,C);var M=new m.h,O=this.pg(g,1);this.Hn(O,M);var L=v.ol(d),q=v.Vp(d,0),U=new m.h;if(q.Yp(U),!C.qb(U)){if(!this.Ng){var ee=C.compare(this.vh);0>ee*(U=U.compare(this.vh))&&(this.Ng=!0)}this.vF(b,this.Ff),this.Ak.add(b)}for(!this.Ng&&1<L&&(ee=C.compare(M),q=q.wc(),(C.compare(q)!=ee||q.compare(M)!=ee||0>q.compare(this.vh))&&(this.Ng=!0)),d=(q=v.Vp(d,L-1)).wc(),M.qb(d)||(this.Ng||0>(ee=M.compare(this.vh))*(U=d.compare(this.vh))&&(this.Ng=!0),this.vF(O,this.Ff),this.Ak.add(O)),this.Ff.add(g),M=0,O=this.Ff.size;M<O;M++)d=this.Ff.get(M),v=this.Pp(d),m.$c.LG(v)&&(this.Mc.vd(v,-1),this.Pl(d,-1)),d!=g&&this.Pp(d)!=-3&&(this.nh.add(d),this.Pl(d,-3));this.Ff.clear(!1)},c.prototype.lO=function(d,g){this.$d.compare(this.Mc,this.Mc.ja(d),g),this.$d.rg&&(this.$d.Kr(),this.oF(d,g))},c.prototype.oF=function(d,g){this.Wn=!0,d=this.Mc.ja(d),g=this.Mc.ja(g);var v=this.Qd.Jn(this.Rh(d)),b=this.Qd.Jn(this.Rh(g)),C=this.g.bc(v);C==null&&(this.ie==null&&(this.ie=new m.yb),this.g.ed(v,this.ie),C=this.ie),(v=this.g.bc(b))==null&&(this.Nm==null&&(this.Nm=new m.yb),this.g.ed(b,this.Nm),v=this.Nm),this.Gk.Oo(C),this.Gk.Oo(v),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(d,g,-1,this.Gk),this.Gk.clear()},c.prototype.GQ=function(d,g){this.Wn=!0,g=this.Mc.ja(g);var v=this.Qd.Jn(this.Rh(g)),b=this.g.bc(v);b==null&&(this.ie==null&&(this.ie=new m.yb),this.g.ed(v,this.ie),b=this.ie),v=this.BF(d),this.Gk.Oo(b),this.g.Vi(v,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(g,-1,d,this.Gk),this.Gk.clear()},c.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var d=this.nh.Fc();this.nh.If(),this.Pl(d,-1),this.WS(d)!=-1&&this.wS(d),this.Vn=!1}},c.prototype.wS=function(d){if(this.Vn){var g=this.Mc.zu(this.MH,this.GH,d,!0);this.Vn=!1}else g=this.Mc.KD(d);g==-1?this.UT(this.Mc.ja(this.Mc.FF()),d):(this.Pl(d,g),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,g)))},c.prototype.WS=function(d){var g=this.pg(d,0);if(d=this.pg(d,1),this.Hn(g,this.yo),this.Hn(d,this.Pi),m.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var v=this.yo.compare(this.vh),b=this.Pi.compare(this.vh);return 0>=v&&0<b?d:0>=b&&0<v?g:-1},c.prototype.oQ=function(){var d=new m.ia(0);d.Jb(this.g.fd);for(var g=this.g.Yq(),v=g.next();v!=-1;v=g.next())this.g.Pa(v,this.xh)!=-1&&d.add(v);this.g.nx(d,d.size),this.pQ(d)},c.prototype.pQ=function(d){this.df.clear(),this.df.De(d.size),this.df.Vo(new j(this.g));var g=new m.h;g.Rc();for(var v=-1,b=new m.h,C=0,M=d.size;C<M;C++){var O=d.get(C);this.g.Gc(O,b),b.qb(g)?(O=this.g.Pa(O,this.xh),this.Xm(v,O)):(v=this.Le(O),this.g.Gc(O,g),O=this.df.xn(O),this.Et(v,O))}},c.prototype.qQ=function(){var d=new m.ia(0);d.Jb(this.g.fd);for(var g=this.df.rc(-1);g!=-1;g=this.df.lb(g))d.add(this.df.ja(g));this.df.clear(),this.g.nx(d,d.size),g=0;for(var v=d.size;g<v;g++){var b=d.get(g),C=this.Le(b);b=this.df.xn(b),this.Et(C,b)}},c.prototype.vF=function(d,g){var v=this.il(d);if(v!=-1){var b=v;do m.$c.LG(this.Pp(b))&&g.add(b),b=this.Rp(b,d);while(b!=v)}},c.prototype.BK=function(d,g){for(d=this.lh.rc(this.Sr(d));d!=-1;d=this.lh.lb(d))this.g.mf(this.lh.ja(d),g)},c.prototype.hK=function(d,g,v,b){this.Xu(d),g!=-1&&this.Xu(g),this.TI(0,d,b),g!=-1&&this.TI(1,g,b),v!=-1&&(b.Bf.D(this.yo),this.Hn(v,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(v)),v=0;for(var C=this.Ak.size;v<C;v++){var M=this.Ak.get(v),O=this.dz(M);O!=-1&&(this.df.vd(O,-1),this.Et(M,-1))}for(v=this.Rh(d),C=g!=-1?this.Rh(g):-1,this.WD(v,b,0),g!=-1&&this.WD(C,b,1),this.ZE(d,b,0),g!=-1&&this.ZE(g,b,1),this.Qd.bh(v),this.Uu(d),g!=-1&&(this.Qd.bh(C),this.Uu(g)),v=0,C=this.Ak.size;v<C;v++)(M=this.Ak.get(v))==this.Jq&&(this.Xv=!0),(O=this.dz(M))==-1&&((O=this.df.KD(this.BF(M)))==-1?(d=this.Le(this.df.ja(this.df.FF())),this.Xm(d,M)):this.Et(M,O));this.Ak.clear(!1)},c.prototype.Hn=function(d,g){this.g.dG(this.ez(d),g)},c.prototype.BF=function(d){return this.lh.Jn(this.Sr(d))},c.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new p(this),this.Mc.Zn=this.$d);var d=new m.ia(0),g=null,v=null;this.GH=this.MH=-1,this.Vn=!1;for(var b=this.df.rc(-1);b!=-1;){this.Vn=!1;var C=this.df.ja(b);this.Jq=this.Le(C),this.g.Gc(C,this.vh),this.$d.$J(this.vh.y,this.vh.x);var M=this.il(this.Jq),O=M==-1;if(!O){C=M;do{var L=this.Pp(C);L==-1?(this.nh.add(C),this.Pl(C,-3)):L!=-3&&d.add(L),C=this.Rp(C,this.Jq)}while(C!=M)}if(0<d.size){for(this.Vn=d.size==1&&this.nh.size==1,O=0,M=d.size;O<M;O++)C=this.Mc.ja(d.get(O)),this.Pl(C,-2);var q=-2,U=-2;for(O=0,M=d.size;O<M;O++){if(L=d.get(O),q==-2){var ee=this.Mc.we(L);ee!=-1?(C=this.Mc.ja(ee),(C=this.Pp(C))!=-2&&(q=ee)):q=-1}if(U==-2&&((L=this.Mc.lb(L))!=-1?(C=this.Mc.ja(L),(C=this.Pp(C))!=-2&&(U=L)):U=-1),q!=-2&&U!=-2)break}for(O=0,M=d.size;O<M;O++)L=d.get(O),C=this.Mc.ja(L),this.Mc.vd(L,-1),this.Pl(C,-1);d.clear(!1),this.MH=q!=-1?q:-1,this.GH=U!=-1?U:-1,q!=-1&&U!=-1?this.Vn||this.lO(q,U):q==-1&&U==-1&&(this.Vn=!1)}else O&&(g==null&&(g=new h(this)),g.Dh(this.vh),this.Mc.uJ(g),g.rg&&(g.Kr(),this.GQ(this.Jq,g.Dm)));this.xS(),this.Xv?(this.Xv=!1,v==null&&(v=new T(this.g)),v.Dh(this.vh),b=this.df.uJ(v)):b=this.df.lb(b)}return this.Wn},c.prototype.er=function(d){for(this.g=d,this.xh=this.g.Gd(),this.hb.De(d.fd+32),this.zd.De(d.fd),this.lh.At(d.fd),this.lh.fn(d.fd),this.Qd.At(d.fd+32),this.Qd.fn(d.fd+32),d=this.g.ld;d!=-1;d=this.g.ue(d))if(m.aa.Hc(this.g.ic(d)))for(L=this.g.Ob(d);L!=-1;L=this.g.Rb(L)){var g=this.g.Ja(L),v=this.g.Xa(L),b=this.Ym(v),C=this.nt(v);for(this.hj(C,b),q=this.g.U(v),v=0,g-=2;v<g;v++){var M=this.g.U(q),O=this.Ym(q);this.hj(C,O),C=this.nt(q),this.hj(C,O),q=M}this.g.dc(L)?(O=this.Ym(q),this.hj(C,O),C=this.nt(q),this.hj(C,O),this.hj(C,b)):(O=this.Ym(q),this.hj(C,O))}else for(var L=this.g.Ob(d);L!=-1;L=this.g.Rb(L)){var q=this.g.Xa(L);for(b=0,g=this.g.Ja(L);b<g;b++)this.Ym(q),q=this.g.U(q)}this.oQ()},c}();m.RC=a}(ye||(ye={})),function(m){var j=function(T){function p(h,a,c){var d=T.call(this)||this;if(h!==void 0)if(c!==void 0){d.description=m.ee.og();var g=new m.Nd;g.K(h,a,c),d.dC(g)}else if(a!==void 0)d.description=m.ee.og(),d.Cb(h,a);else if(h instanceof m.ra)d.description=h;else if(h instanceof m.h)d.description=m.ee.og(),d.Cb(h);else{if(!(h instanceof p))throw m.i.N();d.description=h.description,d.Cb(h.Lg(),h.ih()),h.ka!==null&&(d.ka=h.ka.slice(0))}else d.description=m.ee.og();return d}return ri(p,T),p.prototype.D=function(h){if(h===void 0){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return(h=new m.h).ma(this.ka[0],this.ka[1]),h}if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");h.ma(this.ka[0],this.ka[1])},p.prototype.Cb=function(h,a){typeof h=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=h,this.ka[1]=a):(this.vc(),this.Cb(h.x,h.y))},p.prototype.Cz=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");var h=new m.Nd;return h.x=this.ka[0],h.y=this.ka[1],h.z=this.description.iG()?this.ka[2]:m.ra.se(1),h},p.prototype.dC=function(h){this.vc();var a=this.hasAttribute(1);a||m.ra.DG(1,h.z)||(this.re(1),a=!0),this.ka==null&&this.un(),this.ka[0]=h.x,this.ka[1]=h.y,a&&(this.ka[2]=h.z)},p.prototype.Lg=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},p.prototype.cC=function(h){this.setAttribute(0,0,h)},p.prototype.ih=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},p.prototype.aK=function(h){this.setAttribute(0,1,h)},p.prototype.bS=function(){return this.Uc(1,0)},p.prototype.wX=function(h){this.setAttribute(1,0,h)},p.prototype.zR=function(){return this.Uc(2,0)},p.prototype.hX=function(h){this.setAttribute(2,0,h)},p.prototype.Ec=function(){return this.yF(3,0)},p.prototype.LJ=function(h){this.setAttribute(3,0,h)},p.prototype.Uc=function(h,a){var c=this.description.Pf(h);return 0<=c?this.ka[this.description.$j(c)+a]:m.ra.se(h)},p.prototype.yF=function(h,a){var c=this.description.Pf(h);return 0<=c?this.ka[this.description.$j(c)+a]:m.ra.se(h)},p.prototype.setAttribute=function(h,a,c){this.vc();var d=this.description.Pf(h);0>d&&(this.re(h),d=this.description.Pf(h)),this.ka==null&&this.un(),this.ka[this.description.$j(d)+a]=c},p.prototype.getType=function(){return 33},p.prototype.Db=function(){return 0},p.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},p.prototype.sn=function(h){if(this.ka!=null){for(var a=m.ee.Iw(h,this.description),c=[],d=0,g=0,v=h.Aa;g<v;g++){var b=h.kd(g),C=m.ra.Va(b);if(a[g]==-1){var M=m.ra.se(b);for(b=0;b<C;b++)c[d]=M,d++}else for(M=this.description.$j(a[g]),b=0;b<C;b++)c[d]=this.ka[M],d++,M++}this.ka=c}this.description=h},p.prototype.un=function(){this.lJ(this.description.Ae.length),p.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},p.prototype.Oc=function(h){if(h instanceof m.Dd){if(!this.Ac()){var a=this.D();h.Eh(a,a),this.Cb(a)}}else this.Ac()||(this.re(1),a=this.Cz(),this.dC(h.fp(a)))},p.prototype.copyTo=function(h){if(h.getType()!=33)throw m.i.N();h.vc(),this.ka==null?(h.Oa(),h.ka=null,h.Nf(this.description)):(h.Nf(this.description),h.lJ(this.description.Ae.length),p.cE(this.ka,h.ka,this.description.Ae.length))},p.prototype.Ia=function(){return new p(this.description)},p.prototype.B=function(){return this.Ac()},p.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},p.prototype.bn=function(h){h.Oa(),this.description!=h.description&&h.Nf(this.description),h.Zb(this)},p.prototype.A=function(h){this.Ac()?h.Oa():(h.v=this.ka[0],h.G=this.ka[1],h.C=this.ka[0],h.H=this.ka[1])},p.prototype.Qo=function(h){if(this.Ac())h.Oa();else{var a=this.Cz();h.v=a.x,h.G=a.y,h.Ye=a.z,h.C=a.x,h.H=a.y,h.Bg=a.z}},p.prototype.Tg=function(h,a){var c=new m.Nc;return this.Ac()?(c.Oa(),c):(h=this.Uc(h,a),c.oa=h,c.va=h,c)},p.prototype.lJ=function(h){if(this.ka==null)this.ka=m.O.lg(h);else if(this.ka.length<h){for(var a=this.ka.slice(0),c=this.ka.length;c<h;c++)a[c]=0;this.ka=a}},p.cE=function(h,a,c){if(0<c)for(c=0;c<h.length;c++)a[c]=h[c]},p.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof p)||this.description!=h.description)return!1;if(this.Ac())return!!h.Ac();for(var a=0,c=this.description.Ae.length;a<c;a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.cc=function(){var h=this.description.cc();if(!this.Ac())for(var a=0,c=this.description.Ae.length;a<c;a++){var d=this.ka[a];d=m.O.truncate(d^d>>>32),h=m.O.Th(d,h)}return h},p.prototype.mg=function(){return null},p}(m.aa);m.Sa=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){p!==void 0&&(this.x=p,this.y=h,this.z=a)}return T.construct=function(p,h,a){var c=new T;return c.x=p,c.y=h,c.z=a,c},T.prototype.K=function(p,h,a){this.x=p,this.y=h,this.z=a},T.prototype.lx=function(){this.z=this.y=this.x=0},T.prototype.normalize=function(){var p=this.length();p==0&&(this.x/=p,this.y/=p,this.z/=p)},T.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},T.prototype.sub=function(p){return new T(this.x-p.x,this.y-p.y,this.z-p.z)},T.prototype.Ag=function(p){new T(this.x*p,this.y*p,this.z*p)},T.prototype.Qh=function(p){return this.x*p.x+this.y*p.y+this.z*p.z},T}();m.Nd=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){this.Gw=this.DA=null,this.Xf=h,this.FT=h.y-a,this.ET=h.y+a,this.Ew=0,this.dA=p,this.qa=a,this.RT=a*a,this.eA=a!=0,this.Lv=!1}return T.prototype.result=function(){return this.Ew!=0?1:0},T.prototype.ZM=function(p){return p=p.hc(p.fe(this.Xf,!1)),m.h.yc(p,this.Xf)<=this.RT},T.prototype.fF=function(p){if(!this.eA&&(this.dA&&this.Xf.qb(p.ac())||this.Xf.qb(p.wc())))this.Lv=!0;else if(p.na==this.Xf.y&&p.na==p.la){if(this.dA&&!this.eA){var h=Math.max(p.sa,p.pa);this.Xf.x>Math.min(p.sa,p.pa)&&this.Xf.x<h&&(this.Lv=!0)}}else{var a=!1;if(h=Math.max(p.sa,p.pa),this.Xf.x>h?a=!0:this.Xf.x>=Math.min(p.sa,p.pa)&&(a=0<p.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),a){if(this.Xf.y==p.ac().y){if(this.Xf.y<p.wc().y)return}else if(this.Xf.y==p.wc().y&&this.Xf.y<p.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(p.ac().y>p.wc().y?1:-1)}}},T.prototype.SI=function(p){var h=p.Tg(0,1);if(h.oa>this.ET||h.va<this.FT)return!1;if(this.eA&&this.ZM(p))return!0;if(h.oa>this.Xf.y||h.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(h=p.eG()))for(p=0;p<h;p++){var a=this.DA[p].get();if(this.fF(a),this.Lv)return!0}else if(this.fF(p),this.Lv)return!0;return!1},T.PM=function(p,h,a){for(h=new T(p.In()==0,h,a),p=p.Ga();p.$a();)for(;p.Ha();)if(a=p.ha(),h.SI(a))return-1;return h.result()},T.QM=function(p,h,a,c){var d=new m.l;p.xc(d),d.W(c,c);var g=new T(p.In()==0,a,c);p=p.Ga();var v=new m.l;for(v.K(d),v.C=a.x+c,v.G=a.y-c,v.H=a.y+c,c=(a=h.MF(v,c)).next();c!=-1;c=a.next())if(p.Vb(h.ja(c)),p.Ha()&&(c=p.ha(),g.SI(c)))return-1;return g.result()},T.wm=function(p,h,a){if(p.B())return 0;var c=new m.l;if(p.xc(c),c.W(a,a),!c.contains(h))return 0;if((c=p.Bb)!=null){var d=c.Fk;if(d!=null){if((d=d.So(h.x,h.y))==1)return 1;if(d==0)return 0}if((c=c.Fb)!=null)return T.QM(p,c,h,a)}return T.PM(p,h,a)},T.bT=function(p,h,a){return h.B()?0:T.wm(p,h.D(),a)},T.Ml=function(p,h){return!(16>(p=p.I()))&&2*p+Math.log(p)/Math.log(2)*h<1*p*h},T}();m.Dg=j}(ye||(ye={})),function(m){var j=function(T){function p(h){return T.call(this,!0,h)||this}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.Db=function(){return 2},p.prototype.getType=function(){return 1736},p.prototype.xG=function(h,a,c){this.JS(h,a,c)},p.prototype.qR=function(){this.FR()},p}(m.Vk);m.Da=j}(ye||(ye={})),function(m){(function(j){j[j.PiPOutside=0]="PiPOutside",j[j.PiPInside=1]="PiPInside",j[j.PiPBoundary=2]="PiPBoundary"})(m.RL||(m.RL={})),m.hd=function(){function j(){}return j.KG=function(T,p,h){return(T=m.Dg.bT(T,p,h))==0?0:T==1?1:2},j.Yd=function(T,p,h){return(T=m.Dg.wm(T,p,h))==0?0:T==1?1:2},j.WX=function(T,p,h,a,c){if(p.length<h||c.length<h)throw m.i.N();for(var d=0;d<h;d++)c[d]=j.Yd(T,p[d],a)},j.sK=function(T,p,h,a,c){if(T.getType()==1736)j.WX(T,p,h,a,c);else{if(T.getType()!=197)throw m.i.fa("invalid_call");var d=new m.l;T.A(d),j.$M(d,p,h,a,c)}},j.$M=function(T,p,h,a,c){if(p.length<h||c.length<h)throw m.i.N();if(T.B())for(a=0;a<h;a++)c[a]=0;else for(T.W(.5*-a,.5*-a),T.W(.5*a,.5*a),a=0;a<h;a++)T.contains(p[a])?c[a]=1:T.contains(p[a])?c[a]=2:c[a]=0},j.YX=function(T,p,h,a,c){for(var d=0;d<h;d++)c[d]=T.qs(p[d],a)?2:0},j.XX=function(T,p,h,a,c){var d=T.Bb,g=null;d!=null&&(g=d.Fk),d=h;for(var v=0;v<h;v++)if(c[v]=1,g!=null){var b=p[v];g.So(b.x,b.y)==0&&(c[v]=0,d--)}if(d!=0)for(T=T.Ga();T.$a()&&d!=0;)for(;T.Ha()&&d!=0;)for(g=T.ha(),v=0;v<h&&d!=0;v++)c[v]==1&&g.qs(p[v],a)&&(c[v]=2,d--);for(v=0;v<h;v++)c[v]==1&&(c[v]=0)},j.tK=function(T,p,h,a,c){var d=T.getType();if(d==1607)j.XX(T,p,h,a,c);else{if(!m.aa.yd(d))throw m.i.fa("Invalid call.");j.YX(T,p,h,a,c)}},j}()}(ye||(ye={})),function(m){var j=function(T){function p(h,a){if(arguments.length==2){var c=T.call(this,!1,h.description)||this;c.nf(h),c.lineTo(a)}else c=T.call(this,!1,h)||this;return c}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.Db=function(){return 1},p.prototype.getType=function(){return 1607},p.prototype.xG=function(h,a,c){this.KS(h,a,c)},p}(m.Vk);m.Ta=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.progress=function(){return!0},T.zp=function(p){if(p!=null&&!p.progress(-1,-1))throw m.i.WC()},T}();m.mp=j}(ye||(ye={})),function(m){var j;(j=m.PK||(m.PK={}))[j.clipWithInputHorizon=1]="clipWithInputHorizon",j[j.clipWithOutputHorizon=2]="clipWithOutputHorizon";var T=function(){function a(){this.Kg=3,this.Vu=this.Jr=NaN}return a.prototype.PW=function(c){this.QB(1,c)},a.prototype.QW=function(c){this.QB(2,c)},a.prototype.hS=function(){return this.hs(1)},a.prototype.iS=function(){return this.hs(2)},a.prototype.QB=function(c,d){this.Kg=d?this.Kg|c:this.Kg&~c},a.prototype.hs=function(c){return!!(this.Kg&c)},a.prototype.Of=function(){var c=new a;return c.Jr=this.Jr,c.Vu=this.Vu,c.Kg=this.Kg,c},a}();m.yC=T,function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(m.QK||(m.QK={}));var p=function(){function a(){this.Kg=0}return a.prototype.QB=function(c,d){this.Kg=d?this.Kg|c:this.Kg&~c},a.prototype.hs=function(c){return!!(this.Kg&c)},a.jg=function(c){var d=new a;return d.Kg=c.Kg,d},a.prototype.mM=function(c){this.Kg=c.Kg},a}();m.AY=p;var h=function(){function a(c,d,g){this.ef=c,this.Yf=d,this.Uf=new m.l,this.Uf.K(g),this.AT=c.cc()+d.cc()+this.Uf.cc().toString()}return a.prototype.cc=function(){return this.AT},a.prototype.Nb=function(c){return this==c||this.ef.Nb(c.ef)&&this.Yf.Nb(c.Yf)&&this.Uf.Nb(c.Uf)},a}();m.FY=h,h=function(){function a(){this.Yf=this.ef=null,this.rH=new T,this.sH=new p,this.ww=this.Wf=null,this.mw=this.Tn=!0}return a.Nr=function(c,d,g,v){var b;v===void 0&&(v=null),b===void 0&&(b=null);var C=new a;return C.qp(c,d,g,v,b),C},a.prototype.qp=function(c,d,g,v,b){if(c==null||d==null)throw m.i.fa("invalidArgument");if(this.ef=c,this.Yf=d,this.mw=this.Tn=!1,v!=null&&(this.rH=v.Of()),b!=null&&this.sH.mM(b),b=!1,d.Sb()==1&&v!=null&&(v=v.Jr,isNaN(v)||v==0||(b=!0)),c==d)this.Tn=!b,this.mw=!0;else{v=c.Sb();var C=d.Sb();if(v==0||C==0){if(g!=null)throw m.i.N();c.Hd()!=null&&d.Hd()!=null&&(this.Tn=c.Hd().Nb(d.Hd()))}else v==3||C==3?this.Tn=c.Nb(d):this.ef.kS(this.Yf)?this.Tn=!b:this.Tn=!1,this.Wf=g,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},a.prototype.isIdentity=function(){return this.Tn},a.prototype.nR=function(){return this.rH.Of()},a.prototype.Nb=function(c){return c==this||!!(c instanceof a&&this.ef.Nb(c.ef)&&this.Yf.Nb(c.Yf))&&(this.Wf==c.Wf||!(this.Wf==null||c.Wf==null||!this.Wf.Nb(c.Wf)))},a.prototype.oY=function(){this.ww=new m.bu(this)},a}(),m.vr=h}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Cp=function(p){return p*T.oW},T.mx=function(p,h){return T.gP(h-p)},T.hP=function(p){return-360<=p&&720>p?(0>p?p+=360:360<=p&&(p-=360),p):(0>(p=m.lc.RK(p))&&(p+=360),p)},T.gP=function(p){return 180<(p=T.hP(p))&&(p-=360),p},T.oW=57.29577951308232,T}();m.qr=j,m.Hh=function(){function T(){}return T.lj=function(p,h){var a=new m.l;p.A(a);var c=m.cb.gh(h),d=new m.l;return d.K(c),d.v=a.v,d.C=a.C,d.W(.01*d.ca(),0),h=m.ta.Wd(h,a,!1),d.contains(a)?p:m.Ud.clip(p,d,h,0)},T.ks=function(p,h,a,c,d){if(!m.cb.Wc(h))throw m.i.N();var g=m.ta.kj(h,p,!1),v=m.cb.gh(h),b=m.cb.sc(h),C=b.Hd().ai,M=m.cb.vv(b);b=m.cb.ev(b),M*=2-M;var O=new m.Nc;v.cn(O);var L=[[0,0],[0,0]];if(m.Eg.Sb(h)==2?c?(L[0][0]=T.Zm(d,O),L[0][1]=v.Jp(),m.cb.vt(),v=L[0][0]*C):(L[0][0]=v.gk(),L[0][1]=d,m.cb.vt(),v=L[0][1]*C):v=d*C,!c&&v!=0)throw m.i.N();var q=new m.ga,U=new m.gd;p=U.Ib(p);for(var ee=[0],Q=new m.h,ge=new m.h,ve=new m.h,fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=U.Ob(p);Ne!=-1;Ne=U.Rb(Ne)){var Ve=U.Xa(Ne);U.D(Ve,ve);for(var Xe=!1,et=Ve=U.U(Ve);et!=-1;et=U.U(et)){if(et==Ve){if(Xe)break;Xe=!0}if(U.D(et,fe),c&&g<d-ve.x&&fe.x-d>g||g<d-fe.x&&ve.x-d>g||!c&&g<-ve.y&&fe.y>g||g<-fe.y&&ve.y>g)do if(!(Math.abs(ve.x-fe.x)>=.5*O.R())){if(m.Eg.Sb(h)==2?(L[0][0]=T.Zm(ve.x,O),L[0][1]=ve.y,L[1][0]=T.Zm(fe.x,O),L[1][1]=fe.y,m.cb.dW(),Ce.x=L[0][0]*C,Ce.y=L[0][1]*C,Ie.x=L[1][0]*C,Ie.y=L[1][1]*C):(Ce.x=ve.x*C,Ce.y=ve.y*C,Ie.x=fe.x*C,Ie.y=fe.y*C),Ie.x=6.283185307179586*(fe.x-ve.x)/O.R()+Ce.x,c){if(ge.x=v,ge.y=T.Nz(b,M,Ce,Ie,v,a),isNaN(ge.y))break}else{if(ge.x=T.Lz(b,M,Ce,Ie,a),isNaN(ge.x))break;ge.y=0}m.kb.wd(b,M,Ce.x,Ce.y,Ie.x,Ie.y,q,null,null,a);var dt=q.u;m.kb.wd(b,M,Ce.x,Ce.y,ge.x,ge.y,q,null,null,a);var ct=q.u;m.Eg.Sb(h)==2?(L[0][0]=ge.x/C,L[0][1]=ge.y/C,m.cb.bR(),c?(Q.y=L[0][1],Q.x=d):(Q.x=T.os(L[0][0],ve.x,fe.x,O),Q.y=d)):c?(Q.x=d,Q.y=ge.y/C):(Q.x=T.os(ge.x/C,ve.x,fe.x,O),Q.y=d),ee[0]=0<dt?m.O.Rk(ct/dt,0,1):.5,ee[0]!=0&&ee[0]!=1&&(dt=U.Ma(et),U.Ul(dt,ee,1),U.Cb(U.U(dt),Q.x,Q.y))}while(!1);ve.L(fe)}}return U.Ne(p)},T.Fn=function(p,h,a,c,d){if(p.B())return p;var g=m.cb.bf(h);return T.Hp(p,a-180*g,360*g,h,c,d,!0)},T.Nz=function(p,h,a,c,d,g){if(3.141592653589793<=Math.abs(a.x-c.x)||!T.Sn(a.x,c.x,d))return NaN;if(a.x>c.x)var v=c;else v=a,a=c;c=new m.ga(0);var b=new m.ga(0),C=new m.ga(0);m.kb.wd(p,h,v.x,v.y,a.x,a.y,b,c,null,g);var M=b.u,O=0,L=1,q=new m.h;for(q.L(v);M*(L-O)>1e-12*p;){var U=.5*(O+L);if(m.kb.oj(p,h,v.x,v.y,M*U,c.u,b,C,g),q.x=b.u,q.y=C.u,q.x==d)break;if(T.Sn(v.x,q.x,d))L=U;else{if(!T.Sn(a.x,q.x,d))return NaN;O=U}}return q.y},T.Sn=function(p,h,a){return p=j.Cp(p),h=j.mx(p,j.Cp(h)),(a=j.mx(p,j.Cp(a)))==0||0<h&&0<a&&a<=h||0>h&&0>a&&a>=h},T.Zm=function(p,h){var a=h.va-h.oa;return h.It(p-Math.floor((p-h.oa)/a)*a)},T.os=function(p,h,a,c){var d=new m.Nc;for(d.K(h,a),a=c.R(),p=Math.floor((p-h)/a)*a+p,d=d.sf();Math.abs(p-d)>Math.abs(p+a-d);)p+=a;return p},T.Lz=function(p,h,a,c,d){if(a.y>c.y)var g=c;else g=a,a=c;if((c=new m.Nc).K(g.y,a.y),!c.contains(0)||3.141592653589793<=Math.abs(g.x-a.x))return NaN;if(g.x==a.x)return g.x;var v=new m.ga(0),b=new m.ga(0),C=new m.ga(0);m.kb.wd(p,h,g.x,g.y,a.x,a.y,b,v,null,d);var M=b.u,O=0,L=1,q=new m.h;for(q.L(g);M*(L-O)>1e-12*p;){var U=.5*(O+L);if(m.kb.oj(p,h,g.x,g.y,M*U,v.u,b,C,d),q.x=b.u,q.y=C.u,c.K(g.y,q.y),q.y==0)break;if(c.contains(0))L=U;else{if(c.K(a.y,q.y),!c.contains(0))return NaN;O=U}}return q.x},T.Hp=function(p,h,a,c,d,g,v){var b=new m.l;if(p.A(b),b.B())return p;var C=new m.Nc;b.cn(C);var M=new m.Nc;if(M.K(h,h+a),M.contains(C)&&M.va!=C.va)return p;var O=new m.l;O.K(b);var L=p.getType();if(L==33)return((b=(O=d?p:p.Of()).Lg())<M.oa||b>=M.va||v&&b==M.va)&&(b+=Math.ceil((M.oa-b)/a)*a,b=M.It(b),O.cC(b)),O;if(L==550){for(c=(O=d?p:p.Of()).ub(0),L=2*O.I(),p=!1,d=0;d<L;d+=2)((b=c.read(d))<M.oa||b>=M.va||v&&b==M.va)&&(p=!0,b+=Math.ceil((M.oa-b)/a)*a,b=M.It(b),c.write(d,b));return p&&O.Pc(1993),O}if(M.contains(C))return p;if(L==197)return a=d?p:p.Of(),b.Ea(O),a.Xo(b),a;var q=.1*Math.max(b.ca(),b.R());for(O.W(0,q),v=p,M=c.Xd(0),p=m.Gh.local(),d=new m.Dd;;){var U=Math.floor((C.oa-h)/a),ee=Math.ceil((C.va-h)/a);if(!(3<ee-U))break;U=Math.floor(.5*(ee+U)),O.v=b.v-q,O.C=h+a*U;var Q=m.Ud.clip(v,O,M,g);O.v=O.C,O.C=b.C+q;var ge=m.Ud.clip(v,O,M,g);d.gg((U-ee)*a,0),ge.Oc(d),L==1736?v=p.V(Q,ge,c,null):(v=Q).add(ge,!1),v.A(b),b.cn(C)}for(O.v=h,O.C=h+a,(h=new m.l).K(O),h.W(M,0),(h=Math.floor((b.v-O.v)/a)*a)!=0?(O.move(h,0),d.gg(-h,0)):d.RB(),h=L==1607?new m.Ta(v.description):new m.Da(v.description),g=new m.l,C=new m.l;b.C>O.v;)(q=m.Ud.clip(v,O,M,0)).A(C),(L==1607?!q.B()&&(C.R()>M||C.ca()>M):!q.B()&&(L!=1736||C.R()>M))&&(q.Oc(d),q.A(C),h.A(g),g.W(M,M),g.isIntersecting(C)&&L==1736?h=p.V(h,q,c,null):h.add(q,!1)),O.move(a,0),d.shift(-a,0);return h},T.WI=function(p,h,a,c){var d=new m.de(a.description);d.Fd(a,0,-1),d=m.cb.zh(d,p,h);var g=a.I();if(c.Oa(),!m.cb.Wc(p)||g!=d.I())return!1;var v=new m.l;a.A(v);var b=new m.l;if(d.A(b),v=v.R(),b=b.R(),v!=0&&b!=0){if(b/=v,p=m.cb.gh(h).R()/m.cb.gh(p).R(),1e-10<Math.abs(b/p-1))return!1}else if(v!=0||b!=0)return!1;for(c.add(a,!1),a=0;a<g;a++)p=d.Na(a),c.Cb(a,p);return!0},T.Oz=function(){throw m.i.Ie()},T}()}(ye||(ye={})),function(m){var j,T,p;(T=j=m.si||(m.si={}))[T.Clip=0]="Clip",T[T.DontClip=1]="DontClip",T[T.PannableFold=2]="PannableFold",function(h){h[h.Geodesic=0]="Geodesic",h[h.Loxodrome=1]="Loxodrome",h[h.GreatElliptic=2]="GreatElliptic",h[h.NormalSection=3]="NormalSection",h[h.ShapePreserving=4]="ShapePreserving"}(p=m.WK||(m.WK={})),m.zb=function(){function h(){}return h.xv=function(a,c,d){if(d||0<c){for(a=a.toString(m.Sc.PE_STR_NAME_CANON|m.Sc.PE_STR_AUTH_NONE),c=[],d=0;d<a.length;d++)c[d]="a"<=a[d]&&"z">=a[d]?c[d]=a[d].toUpperCase():a[d];return c.join()}return a.toString(m.Sc.PE_STR_AUTH_TOP)},h.ur=function(a,c,d,g){var v=g.length,b=d.I();if(b!=0){var C=d.ub(0),M=Math.min(b,v),O=0,L=a.eh();isNaN(c)&&(c=0);for(var q=a.Wc(),U=179*(a=q?a.sc().Oe().R():0)/360;0<b;){if(C.uB(O<<1,M,g),m.ej.projToGeogCenter(L,M,g,c),q)for(var ee=0;ee<M;ee++){var Q=g[ee][0]-c,ge=m.lc.sign(Q),ve=C.read(2*(O+ee));0>ge*m.lc.sign(ve)&&Math.abs(Q)>U&&(g[ee][0]+=-ge*a)}C.uC(O<<1,M,g),O+=M,b-=M,M=Math.min(b,v)}d.Pc(1993)}},h.IL=function(a,c,d,g){var v=0,b=a.eh();isNaN(v)&&(v=0);var C=a.Wc(),M=a.bf();a=360*M,M*=179;for(var O=g.length,L=0;L<d;){for(var q=L;q<d&&c[q].isNaN();++q)L++;var U=Math.min(O,d-L);if(0<U){q=1;for(var ee=L+1;q<U;++q,++ee)if(c[ee].isNaN()){U=q;break}if(m.ta.Jy(g,c,L,U),m.ej.projToGeogCenter(b,U,g,v),C)for(q=0,ee=L;q<U;++q,++ee){var Q=c[ee].x,ge=g[q][0]-v,ve=m.lc.sign(ge);0>ve*m.lc.sign(Q)&&Math.abs(ge)>M&&(g[q][0]-=ve*a)}m.ta.Iy(c,L,g,U),L+=U}}},h.Lx=function(a,c,d){var g=d.length,v=c.I();if(!(1>v)){var b=c.ub(0),C=Math.min(v,g),M=0,O=a.eh(),L=a.Wc(),q=L?a.Oe().R():0,U=179*q/360,ee=0;for(L&&(ee=a.zi());0<v;){if(b.uB(M<<1,C,d),m.ej.geogToProj(O,C,d),L)for(a=0;a<C;a++){var Q=d[a][0],ge=m.lc.sign(Q),ve=b.read(2*(M+a))-ee;0>ge*m.lc.sign(ve)&&Math.abs(Q)>U&&(d[a][0]+=-ge*q)}b.uC(M<<1,C,d),M+=C,v-=C,C=Math.min(v,g)}c.Pc(1993)}},h.HL=function(a,c,d,g){if(d!=0){var v=a.eh(),b=a.Wc(),C=b?a.Oe().R():0,M=179*C/360,O=0;for(b&&(O=a.zi()),a=0;a<d;){for(var L=a;L<d&&c[L].isNaN();++L)a++;var q=Math.min(g.length,d-a);if(0<q){L=1;for(var U=a+1;L<q;++L,++U)if(c[U].isNaN()){q=L;break}if(m.ta.Jy(g,c,a,q),m.ej.geogToProj(v,q,g),b)for(L=0,U=a;L<q;L++){var ee=g[L][0],Q=m.lc.sign(ee);0>Q*m.lc.sign(c[U].x-O)&&Math.abs(ee)>M&&(g[L][0]-=Q*C)}m.ta.Iy(c,a,g,q),a+=q}}}},h.tr=function(a,c,d,g){var v=c.I();if(v!=0){var b=c.ub(0),C=a.ef,M=a.Yf,O=C.sc().Qp(),L=M.sc().Qp(),q=C.bf(),U=M.bf();if((a=a.Wf)==null||a.count()==0){for(d=O/L,g=(C.Up()-M.Up())*U,L=-90*q,a=90*q,O=!1,U=1,C=2*v;U<C;)q=b.get(U),(M=m.O.Rk(q,L,a))!=q&&(b.set(U,M),O=!0),U+=2;if(g!=0||d!=1)for(O=!0,L=new m.h,U=0;U<v;U++)b.tc(2*U,L),L.x*=d,L.x+=g,L.y*=d,b.Tt(2*U,L);O&&c.Pc(1993)}else{C=g.length,M=Math.min(v,C);var ee=m.O.lg(M),Q=null,ge=0,ve=NaN,fe=NaN,Ce=360*U,Ie=U/q;d&&(fe=90*U,ve=89.9*q,Q=m.O.lg(M));for(var Ne=!0,Ve=0;v!=0;){for(q=!1,b.uB(ge<<1,M,g),U=0;U<M;U++)ee[U]=g[U][0];if(d)for(U=0;U<M;U++){var Xe=Math.abs(g[U][1])-ve;0<Xe&&(q=g[U][1],g[U][1]=m.lc.Cn(ve,q),Q[U]=m.lc.Cn(Xe,q),q=!0)}for(U=g[0][0],a.transform(g,M,O,L),Ne&&(Ve=g[0][0]-Ie*U,Ne=!1),U=0;U<M;U++)Xe=g[U][0]-ee[U]*Ie-Ve,200<Math.abs(Xe)&&(g[U][0]=0<Xe?g[U][0]-Ce:g[U][0]+Ce);if(q){for(U=0;U<M;U++)Q[U]!=0&&(g[U][1]+=Ie*Q[U],g[U][1]>fe?g[U][1]=fe:g[U][1]<-fe&&(g[U][1]=-fe));for(q=0;q<M;q++)Q[q]=0}b.uC(ge<<1,M,g),ge+=M,v-=M,M=Math.min(v,C)}c.Pc(1993)}}},h.GL=function(a,c,d,g){if(a.mw)g=90*a.ef.bf(),m.ta.dK(c,d,-g,g);else{var v=a.Wf,b=a.ef,C=a.Yf;a=b.Xr();var M=C.Xr(),O=b.bf(),L=90*O,q=C.bf();if(v==null||v.count()==0){if(g=a/M,v=(b.Up()-C.Up())*q,m.ta.dK(c,d,-L,L),v!=0||g!=1)for(q=0;q<d;q++)c[q].x*=g,c[q].x+=v,c[q].y*=g}else{b=Math.min(d,g.length),L=m.O.lg(b),C=360*q,O=q/O;for(var U=!0,ee=0,Q=0;d!=0;){for(q=0;q<b;q++)L[q]=c[q+Q].x;for(q=c[0].x,m.ta.Jy(g,c,Q,b),v.transform(g,b,a,M),m.ta.Iy(c,Q,g,b),U&&(ee=c[0].x-O*q,U=!1),q=0;q<b;q++){var ge=c[Q+q].x-L[q]*O-ee;200<Math.abs(ge)&&(c[Q+q].x=0<ge?c[Q+q].x-C:c[Q+q].x+C)}Q+=b,d-=b,b=Math.min(d,g.length)}}}},h.dv=function(a,c){return a=a.gh(),isNaN(c)||a.Ju(c,0),a},h.UQ=function(a,c,d,g,v,b,C,M){for(var O=h.dv(g,v),L=O.R(),q=L/360,U=h.pE*q,ee=a.ub(0),Q=c.Wc(),ge=Q?L/c.Oe().R():0,ve=!1,fe=new m.Da(d.description),Ce=0,Ie=d.da();Ce<Ie;++Ce){var Ne=Q,Ve=new m.Ta(d.description);if(Ve.addPath(d,Ce,!0),C!=0){var Xe=h.PD(!0,Ve,O.H-M,O.H,C);(ve=ve||Xe)&&(Ne=!1)}var et=-1;Ne&&(et=a.Ba(Ce));var dt=Ve.ub(0),ct=Ve.I(),mt=0,lt=dt.read(0),gi=0;Xe=3*g.Xd(0);var oi=!1,Ni=new m.h;Ni.Rc();var Qi=new m.h;Qi.Rc();for(var _s=!1,as=1;as<ct;++as){var $i=m.h.construct(dt.eg(2*as),dt.eg(2*as+1)),ui=$i.x,Kt=ui+mt,Xs=Kt-lt;if($i.x=Kt,Math.abs(Xs)>U){if(Ne){var Ps=et+(as+1<ct?as:0),Qn=ee.read(2*(et+as-1));Ps=(ee.read(2*Ps)-Qn)*ge,Math.abs(Xs-Ps)>1*q&&(Ne=!1)}Ne||(Kt=ui+(mt-=m.lc.Cn(L,Kt-lt)),++gi,_s=mt!=0,$i.x=Kt)}else oi||m.ta.AG(Qi,Ni,$i,Xe)&&(oi=!0);_s&&dt.write(2*as,Kt),lt=Kt,Qi.L(Ni),Ni.L($i)}0<gi&&Ve.Pc(1993),Ne=Ve.Na(0),ct=Ve.Na(ct-1),Ve=m.h.tb(Ne,ct)<Xe?h.uQ(Ve,g,v,b,oi):h.vQ(a,Ce,Ve,g,v),fe.add(Ve,!1)}return v=g.Xd(0),d=O.R()/180,h.Jt(fe,O,.1*v,!1),fe=fe!=(v=m.ri.clip(fe,O,v,d,b)),a=a.Ke(),C=0,0<(M=v.Ke())&&0>a?C=1:0>=M&&0<a&&(M==0?(M=NaN,c.Sb()==2?M=c.ml().Ke():c.Sb()==1&&(M=c.Oe().wF()),a>.99*M&&(C=-1)):C=-1),C!=0&&((c=new m.Da(v.description)).tp(O),(c=m.Xl.local().V(c,d,b)).add(v,!1),fe=!0,v=c),fe&&(v=m.Yl.local().V(v,g,!1,b)),v},h.vQ=function(a,c,d,g,v){var b=d.I(),C=d.Na(0),M=d.Na(b-1);v=(g=h.dv(g,v)).R(),C=m.lc.sign(M.x-C.x);var O=new m.l;d.xc(O);var L=g.gk();if(M=L-v,L+=v,0<=C){var q=Math.ceil((M-O.v)/v);for(q*=v;M>O.v+q;)q+=v;for(;M<O.C+q;)q-=v;var U=q;720<O.R()&&(L=M+360*Math.ceil(O.R()/360))}else{for(q=Math.ceil((L-O.C)/v),q*=v;L<O.C+q;)q-=v;for(;L>O.v+q;)q+=v;U=q,720<O.R()&&(M=L-360*Math.ceil(O.R()/360))}q=C*v;var ee=m.l.construct(O.v,O.G,O.C,O.H);ee.move(U,0);var Q=new m.Dd;Q.gg(U,0),d.Oc(Q),(O=new m.Ta(d.description)).add(d,!1),U=d.Na(b-1),v=0;for(var ge=O.Na(0).x,ve=0;0<C?ee.C<L:ee.v>M;)1024<=ve&&(ve=0),ee.move(q,0),Q.Gb=q,d.Oc(Q),ge+=q,g.v<=ge&&g.C>=ge&&(v=O.I()-1),d.Cb(0,U),U=d.Na(b-1),O.Dr(d,0,0,b-1,!1);return d=new m.Da(O.description),b=0<a.Ir(c),d.add(O,!1),a=O.Na(0),M=O.Na(O.I()-1),c=d.da()-1,(0>C?b:!b)?(C=m.h.construct(M.x,g.H),d.Ci(C),C=m.h.construct(g.gk(),g.H),d.Ci(C),g=m.h.construct(a.x,g.H)):(C=m.h.construct(M.x,g.G),d.Ci(C),C=m.h.construct(g.gk(),g.G),d.Ci(C),g=m.h.construct(a.x,g.G)),d.Ci(g),d.xG(0,c,0),d.kO(v),d},h.uQ=function(a,c,d,g,v){var b=new m.Da(a.description);b.add(a,!1),b.DB(0,b.I()-1);var C=new m.l;b.xc(C);var M=(d=h.dv(c,d)).R(),O=Math.ceil((d.v-C.v)/M);for(O*=M;d.v>C.v+O;)O+=M;for(;d.v<C.C+O;)O-=M;if((O+=M)!=0){C.move(O,0);var L=new m.Dd;L.gg(O,0),b.Oc(L)}if(d.v<=C.v&&d.C>C.C)return v&&(v=b.Ke(),c=(b=m.Yl.local().V(b,c,!0,g)).Ke(),(c=m.lc.sign(v)!=m.lc.sign(c))&&b.oJ()),b;for((a=new m.Da(a.description)).add(b,!1),v=v||C.R()>M-c.Xd(0);C.v<d.C;)C.move(M,0),(L=new m.Dd).gg(M,0),b.Oc(L),a.add(b,!1);return v&&(v=a.Ke(),a.Yo(1),c=(a=m.Yl.local().V(a,c,!0,g)).Ke(),(c=m.lc.sign(v)!=m.lc.sign(c))&&a.oJ()),a},h.PD=function(a,c,d,g,v){for(var b=c.ub(0),C=c.I(),M=!1,O=0;O<C;O++){var L=m.h.construct(b.eg(2*O),b.eg(2*O+1));if(1&v&&L.y>=d){M=!0;break}if(2&v&&L.y<=-d){M=!0;break}}if(!M)return!1;b=!1,a&&(b=c.Nn(0)),C=(a=new m.gd).Ib(c),M=a.Ob(C);var q=-1,U=!0,ee=new m.h;ee.Rc(),O=new m.Sa;for(var Q=-1,ge=a.Xa(M);ge!=-1;ge=a.U(ge)){L=a.Na(ge);var ve=1&v&&90<=L.y?1:0;if(ve|=2&v&&L.y<=-d?2:0,0<q&&q!=ve){if(ee.x!=L.x){ee.x=L.x,a.Vi(a.Ma(ge),O);var fe=a.wj(M,ge,O);a.mf(fe,ee)}if(b)for(Q=Q!=-1?a.U(Q):a.Xa(M),fe=a.Ma(ge);Q!=fe;)Q=a.pd(Q,!1);Q=-1}0<ve&&(L.y=m.lc.Cn(g,L.y),a.mf(ge,L),U||q==ve||(L.x!=ee.x?(a.Vi(ge,O),fe=a.wj(M,ge,O),a.Cb(fe,ee.x,L.y),Q=fe):Q=ge)),q=ve,ee=L,U=!1}if(b){if(Q!=-1)for(Q=a.U(Q);Q!=-1;)Q=a.pd(Q,!1);d=a.Xa(M),a.fq(d,a.rj(M))||(a.Vi(d,O),a.wj(M,-1,O))}return a.Ne(C).copyTo(c),!0},h.Mz=function(a,c,d,g){var v=a;if(v.B()||d==j.DontClip)return v;var b=v.getType();if(b==33)return v=[(g=v).D()],h.yG(v,1,c,d),v[0].isNaN()?g.Oa():g.Cb(v[0]),a;var C=(a=c.sc()).bf(),M=90*C,O=180*C,L=360*C,q=c.zi(),U=.5*C,ee=new m.l;v.A(ee);var Q=c.Vr(),ge=c.PQ(),ve=Q.getType()==197;if(c=new m.l,Q.A(c),d==j.PannableFold&&(d=a.Oe().R(),c.v=q-.5*d,c.C=c.v+d),ee.G<-M||ee.H>M){if(new m.l().K(ee.v-C,-M,ee.C+C,M),(v=m.ri.Nu(v,c,a,NaN,0,g)).B())return v;v.A(ee)}if(ge&&(c.H<ee.G||c.G>ee.H))return v.Ia();if(ee.R()>L&&(v=h.Hp(v,q-O,L,a,!0,0,!0,g)).A(ee),(M=h.eO(ee.v,ee.C,c.v,c.C,L))!=0&&ee.move(M,0),ee.C>c.C||ee.v<c.v){if(ee.C>c.C)for(;ee.v>=c.C;)ee.move(-L,0),M-=L;for(;ee.v<c.C-L;)ee.move(L,0),M+=L}if(d=m.ta.Hu(a,Q),M!=0&&((C=new m.Dd).gg(M,0),v.Oc(C)),ge){if(ve&&c.contains(ee))return v;for(ge=[null,null],M=0;2>M;M++){if(ve?C=m.aa.Hc(b)?m.ri.clip(v,c,d,U,g):m.ri.clip(v,c,d,0,g):(C=m.Xj.local().V(v,Q,a,g))==Q&&(C=m.aa.jg(C)),c.v<=ee.v&&c.C>=ee.C||c.v>=ee.v&&c.C<=ee.C)return C;ge[M]=C,M==0&&(ee.move(-L,0),(C=new m.Dd).gg(-L,0),v.Oc(C))}if(b==550)ge[0].Fd(ge[1],0,-1);else if(m.aa.Hc(b))ge[0].add(ge[1],!1);else{if(b!=33)throw m.i.fa("intersect_with_GCS_horizon: unexpected geometry type");ge[0].B()&&(ge[0]=ge[1])}return ge[0]}if(c.H<ee.G||c.G>ee.H)return v;for(b=0;!v.B()&&ee.C>c.v;)b!=0&&((C=new m.Dd).gg(b,0),v.Oc(C)),m.dj.local().V(4,v,Q,a,g)||Q==(v=m.kp.local().V(v,Q,a,g))&&(v=m.aa.jg(v)),b!=0&&((U=new m.Dd).gg(-b,0),v.Oc(U)),b-=L,ee.move(-L,0);return v},h.yG=function(a,c,d,g){if(c!=0&&g!=j.DontClip)if(g==j.PannableFold){g=d.HR();for(var v=c,b=0;b<c;b++)(a[b].y>g.H||a[b].y<g.G)&&(a[b].Rc(),v--);v!=0&&h.av(a,c,g.v,g.R())}else{var C=90*(g=d.bf()),M=180*g;for(g*=360,v=c,b=0;b<c;b++)(a[b].y>C||a[b].y<-C)&&(a[b].Rc(),v--);if(v!=0){(v=new m.l).Zw(a,c),C=d.Vr();var O=d.hv();b=C.getType()==197;var L=new m.l;if(C.A(L),!O||!(L.H<v.G||L.G>v.H))if(O)if(h.av(a,c,L.gk()-M,g),v=c,b)for(b=0;b<c;b++)L.contains(a[b])||(a[b].Rc(),v--);else for(d=m.ta.Hu(d.sc(),C),b=0;b<c;b++)(M=m.hd.Yd(C,a[b],d)!=0)||(a[b].Rc(),v--);else for(h.av(a,c,-M,g),v=c,d=m.ta.Hu(d.sc(),C),b=0;b<c;b++)(M=a[b]).isNaN()&&v--,O=h.tE(M.x,L.v,L.C,g),M.x+=O,(M=m.hd.Yd(C,M,d)!=0)&&(a[b].Rc(),v--)}}},h.Hp=function(a,c,d,g,v,b,C,M){var O=a.getType(),L=c+d;if(O===33){var q=(g=v?a:a.Of()).Lg();return(q<c||q>=L||C&&q==L)&&(q+=Math.ceil((c-q)/d)*d,q=m.O.Rk(q,c,L),g.cC(q)),g}if(a.B()||(q=new m.l,a.A(q),q.B()))return a;var U=new m.Nc;q.cn(U);var ee=new m.Nc;if(ee.K(c,L),ee.contains(U))return a;if((L=new m.l).K(q),O===550){for(M=(g=v?a:a.Of()).ub(0),O=2*g.I(),L=!1,c=0;c<O;c+=2)((q=M.read(c))<ee.oa||q>=ee.va||C&&q==ee.va)&&(L=!0,q+=Math.ceil((ee.oa-q)/d)*d,q=ee.It(q),M.write(c,q));return L&&g.Pc(1993),g}if(O==197)return d=v?a:a.Of(),q.Ea(L),d.Xo(q),d;var Q=.1*Math.max(q.ca(),q.R());for(L.W(0,Q),C=a,ee=g.Xd(0),a=m.Gh.local(),v=new m.Dd;;){var ge=Math.floor((U.oa-c)/d),ve=Math.ceil((U.va-c)/d);if(!(3<ve-ge))break;ge=Math.floor(.5*(ve+ge)),L.v=q.v-Q,L.C=c+d*ge;var fe=m.ri.clip(C,L,ee,b,M);L.v=L.C,L.C=q.C+Q;var Ce=m.ri.clip(C,L,ee,b,M);v.gg((ge-ve)*d,0),Ce.Oc(v),O==1736?C=a.V(fe,Ce,g,null):(C=fe).add(Ce,!1),C.A(q),q.cn(U)}for(L.v=c,L.C=c+d,(c=new m.l).K(L),c.W(ee,0),(c=Math.floor((q.v-L.v)/d)*d)!=0?(L.move(c,0),v.gg(-c,0)):v.RB(),c=O==1607?new m.Ta(C.description):new m.Da(C.description),b=new m.l,U=new m.l;q.C>L.v;)(Q=m.ri.clip(C,L,ee,0,M)).A(U),(O==1607?!Q.B()&&(U.R()>ee||U.ca()>ee):!Q.B()&&(O!=1736||U.R()>ee))&&(Q.Oc(v),Q.A(U),c.A(b),b.W(ee,ee),b.isIntersecting(U)&&O==1736?c=a.V(c,Q,g,null):c.add(Q,!1)),L.move(d,0),v.shift(-d,0);return c},h.av=function(a,c,d,g){for(var v=d+g,b=0;b<c;b++){var C=a[b].x;d<=C&&C<v||!(C<d||C>v||C==v)||(C+=Math.ceil((d-C)/g)*g,C=m.O.Rk(C,d,v),a[b].x=C)}},h.Fn=function(a,c,d,g,v,b){if(!c.Wc())throw m.i.fa("fold_into_360_degree_range");if(a.B())return a;if(c.Sb()==2){d=c.pv();var C=c.ov()-d}else{var M=c.bf();C=360*M,d-=180*M}return h.Hp(a,d,C,c,g,v,!0,b)},h.qF=function(a,c,d,g){if(d.Sb()==2)g=d.pv(),d=d.ov()-g;else{var v=d.bf();d=360*v,g-=180*v}h.av(a,c,g,d)},h.lj=function(a,c){var d=c.Oe();if(a.getType()==33){var g=a.ih();return d.G<=g&&g<=d.H?a:a.Ia()}g=new m.l,a.A(g);var v=new m.l;return v.K(d),v.v=g.v,v.C=g.C,v.W(.01*v.ca(),0),d=m.ta.uy(c,g),v.contains(g)?a:m.ri.clip(a,v,d,0,null)},h.ir=function(a,c,d){return a>c.C&&a-c.C<d?c.C:a<c.v&&c.v-a<d?c.v:a},h.FX=function(a,c,d,g){g.x=h.ir(a.x,c,d),g.y=a.y},h.EX=function(a,c,d,g){for(var v=0;v<c;v++)a[v].y<d.G||a[v].y>d.H?a[v].Rc():a[v].x=h.ir(a[v].x,d,g)},h.Jt=function(a,c,d,g){if(!a.B()){var v=a.getType();if(!g||v!=1736)if(m.aa.xj(v)){g=a.ub(0),v=0;for(var b=a.I();v<b;v++){var C=g.read(2*v),M=h.ir(C,c,d);M!=C&&g.write(2*v,M)}a.Pc(1993)}else if(v==197)g=new m.l,a.A(g),g.v=h.ir(g.v,c,d),g.C=h.ir(g.C,c,d),a.Xo(g);else{if(v!=33)throw m.i.fa("internal error");a.cC(h.ir(a.Lg(),c,d))}}},h.uS=function(a,c,d,g){var v=new m.gd,b=v.Ib(a);return a=m.ta.Hu(c,a),h.ks(v,b,c,a,d,!0,g),v.Ne(b)},h.ks=function(a,c,d,g,v,b,C){if(!d.Wc())throw m.i.N("invalid call");var M=d.Oe(),O=d.sc(),L=O.eh().getDatum().getSpheroid();O=O.Hd().ai;var q=L.getFlattening();L=L.getAxis(),q*=2-q;var U=new m.Nc;M.cn(U);var ee=null,Q=[[0,0],[0,0]];if(d.Sb()==2?(ee=d.eh(),b?(Q[0][0]=h.Zm(C,U),Q[0][1]=M.Jp(),m.ej.projToGeog(ee,1,Q),M=Q[0][0]*O):(Q[0][0]=M.gk(),Q[0][1]=C,m.ej.projToGeog(ee,1,Q),M=Q[0][1]*O)):M=C*O,!b&&M!=0&&v!=p.GreatElliptic)throw m.i.fa("invalid argument");var ge=new m.ga,ve=[0],fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=[null,null],Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h;for(c=a.Ob(c);c!=-1;c=a.Rb(c)){var ct=a.Xa(c);a.D(ct,Ve);for(var mt=!1,lt=ct=a.U(ct);lt!=-1;lt=a.U(lt)){if(lt==ct){if(mt)break;mt=!0}if(a.D(lt,Xe),b&&(g<C-Ve.x&&Xe.x-C>g||g<C-Xe.x&&Ve.x-C>g)||!b&&(C!=0||g<-Ve.y&&Xe.y>g||g<-Xe.y&&Ve.y>g))do if(!(Math.abs(Ve.x-Xe.x)>=.5*U.R())){if(d.Sb()==2?(Q[0][0]=h.Zm(Ve.x,U),Q[0][1]=Ve.y,Q[1][0]=h.Zm(Xe.x,U),Q[1][1]=Xe.y,m.ej.projToGeogCenter(ee,2,Q,0),et.x=Q[0][0]*O,et.y=Q[0][1]*O,dt.y=Q[1][1]*O):(et.x=Ve.x*O,et.y=Ve.y*O,dt.y=Xe.y*O),dt.x=2*(Xe.x-Ve.x)*Math.PI/U.R()+et.x,b){if(Ce.x=M,Ce.y=h.Nz(L,q,et,dt,M,v),isNaN(Ce.y))break;Ne[0]=Ce;var gi=1}else if(v==p.GreatElliptic){var oi=[0,0];if((gi=m.Ox.Oz(q,et,dt,M,oi))==0)break;Ce.x=oi[0],Ce.y=M,Ne[0]=Ce,gi==2&&(Ie.x=oi[1],Ie.y=M,Ne[1]=Ie)}else{if(Ce.x=h.Lz(L,q,et,dt,v),isNaN(Ce.x))break;Ce.y=0,Ne[0]=Ce,gi=1}var Ni=-1;for(oi=0;oi<gi;oi++){m.kb.wd(L,q,et.x,et.y,dt.x,dt.y,ge,null,null,v);var Qi=ge.u;m.kb.wd(L,q,et.x,et.y,Ne[oi].x,Ne[oi].y,ge,null,null,v);var _s=ge.u;if(d.Sb()==2?(Q[0][0]=Ne[oi].x/O,Q[0][1]=Ne[oi].y/O,m.ej.geogToProj(ee,1,Q),b?(fe.y=Q[0][1],fe.x=C):(fe.x=h.os(Q[0][0],Ve.x,Xe.x,U),fe.y=C)):b?(fe.x=C,fe.y=Ne[oi].y/O):(fe.x=h.os(Ne[oi].x/O,Ve.x,Xe.x,U),fe.y=C),ve[0]=0<Qi?m.O.Rk(_s/Qi,0,1):.5,ve[0]==0||ve[0]==1)break;Ni>ve[0]||(Ni=a.Ma(lt),a.Ul(Ni,ve,1),a.Cb(a.U(Ni),fe.x,fe.y),Ni=ve[0])}}while(!1);Ve.L(Xe)}}},h.Zm=function(a,c){var d=c.va-c.oa;return c.It(a-Math.floor((a-c.oa)/d)*d)},h.os=function(a,c,d,g){var v=new m.Nc;for(v.K(c,d),d=g.R(),a=Math.floor((a-c)/d)*d+a,v=v.sf();Math.abs(a-v)>Math.abs(a+d-v);)a+=d;return a},h.Sn=function(a,c,d){return a=m.qr.Cp(a),c=m.qr.mx(a,m.qr.Cp(c)),(d=m.qr.mx(a,m.qr.Cp(d)))==0||0<c&&0<d&&d<=c||0>c&&0>d&&d>=c},h.Nz=function(a,c,d,g,v,b){if(b==p.GreatElliptic)return m.Ox.SS(c,d,g,v);if(Math.abs(d.x-g.x)>=Math.PI||!h.Sn(d.x,g.x,v))return NaN;if(d.x>g.x)var C=g;else C=d,d=g;g=new m.ga;var M=new m.ga,O=new m.ga;m.kb.wd(a,c,C.x,C.y,d.x,d.y,M,g,null,b);var L=M.u,q=0,U=1,ee=new m.h;for(ee.L(C);L*(U-q)>1e-12*a;){var Q=.5*(q+U);if(m.kb.oj(a,c,C.x,C.y,L*Q,g.u,M,O,b),ee.x=M.u,ee.y=O.u,ee.x==v)break;if(h.Sn(C.x,ee.x,v))U=Q;else{if(!h.Sn(d.x,ee.x,v))return NaN;q=Q}}return ee.y},h.Lz=function(a,c,d,g,v){if(v==p.GreatElliptic)return a=[0,0],m.Ox.Oz(c,d,g,0,a),a[0];if(d.y>g.y)var b=g;else b=d,d=g;if((g=new m.Nc).K(b.y,d.y),!g.contains(0)||Math.abs(b.x-d.x)>=Math.PI)return NaN;if(b.x==d.x)return b.x;var C=new m.ga,M=new m.ga,O=new m.ga;m.kb.wd(a,c,b.x,b.y,d.x,d.y,M,C,null,v);var L=M.u,q=0,U=1,ee=new m.h;for(ee.L(b);L*(U-q)>1e-12*a;){var Q=.5*(q+U);if(m.kb.oj(a,c,b.x,b.y,L*Q,C.u,M,O,v),ee.x=M.u,ee.y=O.u,g.K(b.y,ee.y),ee.y==0)break;if(g.contains(0))U=Q;else{if(g.K(d.y,ee.y),!g.contains(0))return NaN;q=Q}}return ee.x},h.WI=function(a,c,d,g){if(!a.ef.Wc())return!1;var v=new m.de(c.description);if(v.Fd(c,0,-1),g=m.Hx.local().V(v,a,g),v=c.I(),d.Oa(),v!=g.I())return!1;var b=new m.l;c.A(b);var C=new m.l;if(g.A(C),b=b.R(),C=C.R(),b!=0&&C!=0){if(C/=b,a=a.Yf.gh().R()/a.ef.gh().R(),1e-10<Math.abs(C/a-1))return!1}else if(b!=0||C!=0)return!1;for(d.add(c,!1),c=new m.h,a=0;a<v;a++)g.D(a,c),d.Cb(a,c);return!0},h.qN=function(a,c){return(a%=360*c)>=180*c&&(a-=360*c),a},h.UI=function(a,c,d,g){if(d==j.Clip){var v=c.ml();v.getType()==197?(d=new m.l,v.A(d),v=m.ta.uy(c,d),a=m.ri.clip(a,d,v,5e4*c.pm(),g)):m.dj.local().V(1,v,a,c,g)||(a=m.Xj.local().V(a,v,c,g))==v&&(a=m.Vk.jg(a))}else c.Wc()&&(g=new m.l,a.xc(g),c.Oe().contains(g)||(h.Jt(a,c.Oe(),c.Xd(0),!0),d==j.PannableFold&&(a=h.lj(a,c)),a=h.Fn(a,c,0,!0,1e5*c.pm(),null)));return a},h.XD=function(a,c,d){var g=c.Wr();if(g==null)return a;var v=(c=c.sc()).Oe().R(),b=new m.l;a.xc(b);var C=new m.Nc;b.cn(C),b=g.Ga(),g=null;for(var M=new m.Dd;b.$a();)for(;b.Ha();){var O=b.ha(),L=O.Tg(0,0),q=new m.Nc;for(q.K(L.oa,L.va),L=0;q.va>C.oa;)q.move(-v),--L;for(;q.oa<=C.va;){if(q.isIntersecting(C)){g==null&&(g=new m.Ta);var U=m.yb.cP(O.ac(),O.wc());L!=0&&(M.gg(L*v,0),U.Oc(M)),g.oc(U,!0)}q.move(v),++L}}return g!=null?(c=m.ta.gO(c,g),c=m.ta.Er(c),m.$t.lP(a,g,c,d)):a},h.eO=function(a,c,d,g,v){return a>=d&&c<=g?0:h.tE(.5*(c+a),d,g,v)},h.tE=function(a,c,d,g){return m.lc.round((.5*(d+c)-a)/g)*g},h.VQ=function(a,c,d,g,v,b,C,M){var O=h.dv(g,v),L=O.R(),q=L/360,U=h.pE*q,ee=a.ub(0),Q=c.Wc(),ge=Q?L/c.Oe().R():0;c=a.Ia();for(var ve=0,fe=d.da();ve<fe;++ve){var Ce=Q,Ie=new m.Ta(d.description);Ie.addPath(d,ve,!0);var Ne=d.dc(ve);C!=0&&(Ne=h.PD(Ne,Ie,O.H-M,O.H,C))&&(Ce=!1);var Ve=-1;Ne=Ie.I();var Xe=!1;Ce&&(Ve=a.Ba(ve),Xe=a.dc(ve));var et=Ie.ub(0),dt=0,ct=et.read(0),mt=0,lt=3*g.Xd(0),gi=!1,oi=new m.h;oi.Rc();var Ni=new m.h;Ni.Rc();for(var Qi=!1,_s=1;_s<Ne;++_s){var as=m.h.construct(et.eg(2*_s),et.eg(2*_s+1)),$i=as.x,ui=$i+dt,Kt=ui-ct;if(as.x=ui,Math.abs(Kt)>U){if(Ce){var Xs=Ve+_s-1,Ps=Ve;(!Xe||_s+1<Ne)&&(Ps+=_s),Xs=ee.read(2*Xs),Ps=(ee.read(2*Ps)-Xs)*ge,Math.abs(Kt-Ps)>1*q&&(Q=!1)}Ce||(ui=$i+(dt-=m.lc.Cn(L,ui-ct)),++mt,Qi=dt!=0,as.x=ui)}else gi||m.ta.AG(oi,Ni,as,lt)&&(gi=!0);Qi&&et.write(2*_s,ui),ct=ui,oi.L(Ni),Ni.L(as)}mt!=0&&Ie.Pc(1993),Ce=Ie.Na(0),Ne=Ie.Na(Ne-1),m.h.tb(Ce,Ne),Ie=h.wQ(Ie,g,isNaN(v)?0:v,b),c.add(Ie,!1)}return a=g.Xd(0),d=O.R()/180,h.Jt(c,O,.1*a,!1),m.ri.clip(c,O,a,d,b)},h.wQ=function(a,c,d,g){return h.Fn(a,c,d,!0,0,g)},h.OS=function(a,c,d,g){var v=a.getType();if(v==1736)for(c=c!=null?c.Xd(0):0,v=0;v<g;v++)m.hd.Yd(a,d[v],c)!=1&&d[v].Rc();else{if(v!=197)throw m.i.N();for(v=0;v<g;v++)a.dP(d[v])||d[v].Rc()}},h.$k=function(a,c,d,g){if(32>d)for(var v=new m.Sa,b=0;b<d;b++)v.Cb(c[b]),a.$k(v,g).D(c[b]);else{var C=new m.de;for(C.re(3),C.HD(c,d),v=C.ub(3),b=0;b<d;b++)v.write(b,b);for(b=a.$k(C,g),a=b.ub(0),v=b.ub(3),g=m.h.construct(NaN,NaN),C=0;C<d;C++)c[C]=g;for(d=b.I(),b=0;b<d;b++)g=v.read(b),a.tc(2*b,c[g])}},h.Zk=function(a,c,d,g){if(32>d)for(var v=new m.Sa,b=0;b<d;b++)v.Cb(c[b]),a.Zk(v,g).D(c[b]);else{var C=new m.de;for(C.re(3),C.HD(c,d),v=C.ub(3),b=0;b<d;b++)v.write(b,b);for(b=a.Zk(C,g),a=b.ub(0),v=b.ub(3),g=m.h.construct(NaN,NaN),C=0;C<d;C++)c[C]=g;for(d=b.I(),b=0;b<d;b++)g=v.read(b),a.tc(2*b,c[g])}},h.pE=210,h}()}(ye||(ye={})),function(m){var j;(j=m.UL||(m.UL={}))[j.rightSide=1]="rightSide";var T=function(){function p(h,a,c){this.Bs=new m.h,h===void 0?this.Io=-1:(this.Bs.L(h),this.Io=a,this.Ka=c,this.nw=0)}return p.prototype.WJ=function(h){this.nw=h?1|this.nw:-2&this.nw},p.prototype.B=function(){return 0>this.Io},p.prototype.fz=function(){if(this.B())throw m.i.fa("invalid call");return new m.Sa(this.Bs.x,this.Bs.y)},p.prototype.Ua=function(){if(this.B())throw m.i.fa("invalid call");return this.Io},p.prototype.hz=function(){if(this.B())throw m.i.fa("invalid call");return this.Ka},p.prototype.Sz=function(){return!!(1&this.nw)},p.prototype.ey=function(h,a,c,d){this.Bs.x=h,this.Bs.y=a,this.Io=c,this.Ka=d},p}();m.$l=T}(ye||(ye={})),function(m){var j=function(){function p(){}return p.prototype.Uo=function(h,a){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,h.xc(this.Ek),this.Ek.W(a,a),this.Ek.isIntersecting(this.Fb.Ca)){var c=h.getType();(this.vs=m.aa.yd(c))?(this.TH=h.ac(),this.SH=h.wc(),this.qa=a):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},p.prototype.Xi=function(h,a){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(h),this.Ek.W(a,a),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},p.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var h=null,a=null,c=null,d=null;this.vs&&(h=new m.h,a=new m.h,c=new m.l);for(var g=!1;!g;){for(;this.tk!=-1;){var v=this.Fb.bz(this.Fb.fv(this.tk));if(v.isIntersecting(this.Ek)){if(!this.vs){g=!0;break}if(h.L(this.TH),a.L(this.SH),c.K(v),c.W(this.qa,this.qa),0<c.zy(h,a)){g=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){v=this.th.Fc();var b=this.Ii[this.Ii.length-1];for(d==null&&((d=[])[0]=new m.l,d[1]=new m.l,d[2]=new m.l,d[3]=new m.l),T.EJ(b,d),this.th.If(),--this.Ii.length,b=0;4>b;b++){var C=this.Fb.Lp(v,b);if(C!=-1&&0<this.Fb.WR(C)&&d[b].isIntersecting(this.Ek))if(this.vs){if(h.L(this.TH),a.L(this.SH),c.K(d[b]),c.W(this.qa,this.qa),0<c.zy(h,a)){var M=new m.l;M.K(d[b]),this.th.add(C),this.Ii.push(M)}}else(M=new m.l).K(d[b]),this.th.add(C),this.Ii.push(M)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},p.bP=function(h,a,c){var d=new p;return d.Fb=h,d.Ek=new m.l,d.th=new m.ia(0),d.Ii=[],d.Uo(a,c),d},p.aP=function(h,a,c){var d=new p;return d.Fb=h,d.Ek=new m.l,d.th=new m.ia(0),d.Ii=[],d.Xi(a,c),d},p.$O=function(h){var a=new p;return a.Fb=h,a.Ek=new m.l,a.th=new m.ia(0),a.Ii=[],a},p}();m.GY=j;var T=function(){function p(h,a){this.jf=new m.$c(11),this.Zh=new m.$c(5),this.ws=[],this.gw=new m.ia(0),this.Ca=new m.l,this.Nk(h,a)}return p.prototype.reset=function(h,a){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(h,a)},p.prototype.vj=function(h,a){return this.zv(h,a,0,this.Ca,this.kf,!1,-1)},p.prototype.Jz=function(h,a,c){c=c==-1?this.kf:this.WF(c);var d=this.ca(c),g=this.oR(c);return this.zv(h,a,d,g,c,!1,-1)},p.prototype.ja=function(h){return this.jR(h)},p.prototype.GF=function(h){return this.bz(this.fv(h))},p.prototype.ca=function(h){return this.jv(h)},p.prototype.oR=function(h){var a=new m.l;a.K(this.Ca);var c=this.jv(h);h=this.QF(h);for(var d=0;d<2*c;d+=2){var g=m.O.truncate(3&h>>d);g==0?(a.v=.5*(a.v+a.C),a.G=.5*(a.G+a.H)):g==1?(a.C=.5*(a.v+a.C),a.G=.5*(a.G+a.H)):(g==2?a.C=.5*(a.v+a.C):a.v=.5*(a.v+a.C),a.H=.5*(a.G+a.H))}return a},p.prototype.WR=function(h){return this.Az(h)},p.prototype.vR=function(h,a){return j.bP(this,h,a)},p.prototype.MF=function(h,a){return j.aP(this,h,a)},p.prototype.getIterator=function(){return j.$O(this)},p.prototype.Nk=function(h,a){if(0>a||32<2*a)throw m.i.N("invalid height");this.BT=a,this.Ca.K(h),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},p.prototype.zv=function(h,a,c,d,g,v,b){if(!d.contains(a))return c==0?-1:this.zv(h,a,0,this.Ca,this.kf,v,b);if(!v)for(var C=g;C!=-1;C=this.IR(C))this.jx(C,this.Az(C)+1);(C=new m.l).K(d),d=g;var M=[];for(M[0]=new m.l,M[1]=new m.l,M[2]=new m.l,M[3]=new m.l;c<this.BT&&this.iO(d);c++){p.EJ(C,M);for(var O=!1,L=0;4>L;L++)if(M[L].contains(a)){O=!0;var q=this.Lp(d,L);q==-1&&(q=this.rP(d,L)),this.jx(q,this.Az(q)+1),d=q,C.K(M[L]);break}if(!O)break}return this.sS(h,a,c,C,d,v,g,b)},p.prototype.sS=function(h,a,c,d,g,v,b,C){var M=this.NF(g);if(v){if(g==b)return C;this.SP(C),v=C}else v=this.tP(),this.NB(v,h),this.KW(this.fv(v),a);return this.mX(v,g),M!=-1?(this.hx(v,M),this.bx(M,v)):this.GJ(g,v),this.SB(g,v),this.ax(g,this.lv(g)+1),this.hO(g)&&this.MQ(c,d,g),v},p.prototype.SP=function(h){var a=this.WF(h),c=this.NF(a),d=this.OR(h),g=this.nv(h);this.Ur(a)==h?(g!=-1?this.hx(g,-1):this.SB(a,-1),this.GJ(a,g)):c==h?(this.bx(d,-1),this.SB(a,d)):(this.hx(g,d),this.bx(d,g)),this.hx(h,-1),this.bx(h,-1),this.ax(a,this.lv(a)-1)},p.EJ=function(h,a){var c=.5*(h.v+h.C),d=.5*(h.G+h.H);a[0].K(c,d,h.C,h.H),a[1].K(h.v,d,c,h.H),a[2].K(h.v,h.G,c,d),a[3].K(c,h.G,h.C,d)},p.prototype.hO=function(h){return this.lv(h)==8&&!this.gG(h)},p.prototype.MQ=function(h,a,c){var d=this.Ur(c);do{var g=this.fv(d),v=this.Zh.T(d,0);g=this.bz(g),this.zv(v,g,h,a,c,!0,d),d=v=this.nv(d)}while(d!=-1)},p.prototype.iO=function(h){return 8<=this.lv(h)||this.gG(h)},p.prototype.gG=function(h){return this.Lp(h,0)!=-1||this.Lp(h,1)!=-1||this.Lp(h,2)!=-1||this.Lp(h,3)!=-1},p.prototype.rP=function(h,a){var c=this.jf.Ce();return this.OW(h,a,c),this.jx(c,0),this.ax(c,0),this.Pk(c,h),this.KJ(c,this.jv(h)+1),this.NJ(c,a<<2*this.jv(h)|this.QF(h)),c},p.prototype.tP=function(){var h=this.Zh.Ce();if(0<this.gw.size){var a=this.gw.Fc();this.gw.If()}else a=this.ws.length,this.ws.push(new m.l);return this.LW(h,a),h},p.prototype.Lp=function(h,a){return this.jf.T(h,a)},p.prototype.OW=function(h,a,c){this.jf.S(h,a,c)},p.prototype.Ur=function(h){return this.jf.T(h,4)},p.prototype.GJ=function(h,a){this.jf.S(h,4,a)},p.prototype.NF=function(h){return this.jf.T(h,5)},p.prototype.SB=function(h,a){this.jf.S(h,5,a)},p.prototype.QF=function(h){return this.jf.T(h,6)},p.prototype.NJ=function(h,a){this.jf.S(h,6,a)},p.prototype.lv=function(h){return this.jf.T(h,7)},p.prototype.Az=function(h){return this.jf.T(h,8)},p.prototype.ax=function(h,a){this.jf.S(h,7,a)},p.prototype.jx=function(h,a){this.jf.S(h,8,a)},p.prototype.IR=function(h){return this.jf.T(h,9)},p.prototype.Pk=function(h,a){this.jf.S(h,9,a)},p.prototype.jv=function(h){return this.jf.T(h,10)},p.prototype.KJ=function(h,a){this.jf.S(h,10,a)},p.prototype.jR=function(h){return this.Zh.T(h,0)},p.prototype.NB=function(h,a){this.Zh.S(h,0,a)},p.prototype.OR=function(h){return this.Zh.T(h,1)},p.prototype.nv=function(h){return this.Zh.T(h,2)},p.prototype.hx=function(h,a){this.Zh.S(h,1,a)},p.prototype.bx=function(h,a){this.Zh.S(h,2,a)},p.prototype.WF=function(h){return this.Zh.T(h,3)},p.prototype.mX=function(h,a){this.Zh.S(h,3,a)},p.prototype.fv=function(h){return this.Zh.T(h,4)},p.prototype.LW=function(h,a){this.Zh.S(h,4,a)},p.prototype.bz=function(h){return this.ws[h]},p.prototype.KW=function(h,a){this.ws[h].K(a)},p}();m.du=T}(ye||(ye={})),function(m){var j;(j=m.aL||(m.aL={}))[j.Outside=0]="Outside",j[j.Inside=1]="Inside",j[j.Border=2]="Border";var T=function(){function h(a,c){this.PT=c,this.Vh=a}return h.prototype.setColor=function(a,c){this.iH!=c&&a.flush(),this.iH=c},h.prototype.gF=function(a,c){for(var d=0;d<c;)for(var g=a[d++],v=a[d++],b=a[d++]*this.PT;g<v;g++)this.Vh[b+(g>>4)]|=this.iH<<2*(15&g)},h}();m.HY=T;var p=function(){function h(a,c,d){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(a,c,d)}return h.create=function(a,c,d){if(!h.zE(a))throw m.i.N();return h.wP(a,c,d)},h.pW=function(a){switch(a){case 0:a=1024;break;case 1:a=16384;break;case 2:a=262144;break;default:throw m.i.fa("Internal Error")}return a},h.zE=function(a){return!(a.B()||a.getType()!=1607&&a.getType()!=1736)},h.prototype.rQ=function(a,c){c=c.Ga();for(var d=new m.h,g=new m.h;c.$a();)for(;c.Ha();){var v=c.ha();if(v.getType()!=322)throw m.i.fa("Internal Error");a.Eh(v.ac(),d),a.Eh(v.wc(),g),this.Ri.jy(d.x,d.y,g.x,g.y)}this.Ri.iJ(m.Px.Cx)},h.prototype.sQ=function(){throw m.i.fa("Internal Error")},h.prototype.Ry=function(a,c){for(var d=1;4>d;d++)a.jy(c[d-1].x,c[d-1].y,c[d].x,c[d].y);a.jy(c[3].x,c[3].y,c[0].x,c[0].y),this.Ri.iJ(m.Px.Cx)},h.prototype.rK=function(a,c,d){for(var g=[null,null,null,null],v=0;v<g.length;v++)g[v]=new m.h;c=c.Ga(),d=this.Jk.dY(d)+1.5,v=new m.h;for(var b=new m.h,C=new m.h,M=new m.h,O=new m.h,L=new m.l,q=new m.h;c.$a();){var U=!1,ee=!0;for(q.ma(0,0);c.Ha();){var Q=c.ha();if(M.x=Q.sa,M.y=Q.na,O.x=Q.pa,O.y=Q.la,L.Oa(),L.Zb(M.x,M.y),L.Lk(O.x,O.y),this.vl.HG(L)){this.Jk.Eh(O,O),ee?(this.Jk.Eh(M,M),q.L(M),ee=!1):M.L(q),v.uc(O,M);var ge=.5>(Q=v.length());Q==0?v.ma(1,0):(ge||q.L(O),v.scale(d/Q),b.ma(-v.y,v.x),C.ma(v.y,-v.x),M.sub(v),O.add(v),g[0].add(M,b),g[1].add(M,C),g[2].add(O,C),g[3].add(O,b),ge?U=!0:this.Ry(a,g))}else U&&(this.Ry(a,g),U=!1),ee=!0}U&&this.Ry(a,g)}},h.prototype.sC=function(a){return m.O.truncate(a*this.qH+this.aI)},h.prototype.tC=function(a){return m.O.truncate(a*this.Es+this.cI)},h.wP=function(a,c,d){return new h(a,c,d)},h.prototype.Fz=function(a,c,d){this.Gf=Math.max(m.O.truncate(2*Math.sqrt(d)+.5),64),this.Um=m.O.truncate((2*this.Gf+31)/32),this.vl=new m.l,this.Ik=c,d=0;for(var g=this.Gf,v=this.Um;8<=g;)d+=g*v,g=m.O.truncate(g/2),v=m.O.truncate((2*g+31)/32);this.Vh=m.O.lg(d,0),this.Ri=new m.Px,d=new T(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,d),a.A(this.vl),this.vl.W(c,c),g=new m.l;var b=c*(v=m.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(c*=v.ca(),g.K(this.vl.sf(),Math.max(b,this.vl.R()),Math.max(c,this.vl.ca())),this.SA=this.Ik,this.Jk=new m.Dd,this.Jk.pS(g,v),new m.Dd,a.getType()){case 550:d.setColor(this.Ri,2),this.sQ();break;case 1607:d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA);break;case 1736:d.setColor(this.Ri,1),this.rQ(this.Jk,a),d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},h.prototype.XN=function(){this.Ri.flush();for(var a=0,c=this.Gf*this.Um,d=this.Gf,g=m.O.truncate(this.Gf/2),v=this.Um,b=m.O.truncate((2*g+31)/32);8<d;){for(d=0;d<g;d++)for(var C=2*d,M=2*d+1,O=0;O<g;O++){var L=2*O,q=2*O+1,U=L>>4;L=2*(15&L);var ee=q>>4;q=2*(15&q);var Q=this.Vh[a+v*C+U]>>L&3;Q|=this.Vh[a+v*C+ee]>>q&3,Q|=this.Vh[a+v*M+U]>>L&3,Q|=this.Vh[a+v*M+ee]>>q&3,this.Vh[c+b*d+(O>>4)]|=Q<<2*(15&O)}d=g,v=b,a=c,g=m.O.truncate(d/2),b=m.O.truncate((2*g+31)/32),c=a+v*d}},h.prototype.So=function(a,c){return this.vl.contains(a,c)?(a=this.sC(a),c=this.tC(c),0>a||a>=this.Gf||0>c||c>=this.Gf||(c=this.Vh[this.Um*c+(a>>4)]>>2*(15&a)&3)==0?0:c==1?1:2):0},h.prototype.Ro=function(a){if(!a.Ea(this.vl))return 0;var c=this.sC(a.v),d=this.sC(a.C),g=this.tC(a.G);if(a=this.tC(a.H),0>c&&(c=0),0>g&&(g=0),d>=this.Gf&&(d=this.Gf-1),a>=this.Gf&&(a=this.Gf-1),c>d||g>a)return 0;for(var v=Math.max(d-c,1)*Math.max(a-g,1),b=0,C=this.Um,M=this.Gf,O=0;;){if(32>v||16>M){for(v=g;v<=a;v++)for(var L=c;L<=d;L++)if(1<(O=this.Vh[b+C*v+(L>>4)]>>2*(15&L)&3))return 2;if(O==0)return 0;if(O==1)return 1}b+=C*M,M=m.O.truncate(M/2),C=m.O.truncate((2*M+31)/32),c=m.O.truncate(c/2),g=m.O.truncate(g/2),d=m.O.truncate(d/2),a=m.O.truncate(a/2),v=Math.max(d-c,1)*Math.max(a-g,1)}},h.prototype.RR=function(){return this.Gf*this.Um},h}();m.Nx=p}(ye||(ye={})),function(m){var j;(j=m.VL||(m.VL={}))[j.contains=1]="contains",j[j.within=2]="within",j[j.equals=3]="equals",j[j.disjoint=4]="disjoint",j[j.touches=8]="touches",j[j.crosses=16]="crosses",j[j.overlaps=32]="overlaps",j[j.unknown=0]="unknown",j[j.intersects=1073741824]="intersects";var T=function(){function h(){}return h.construct=function(a,c,d,g,v,b,C,M){var O=new h;return O.pw=a,O.Mm=c,O.Kj=d,O.Si=g,O.BH=v,O.SY=b,O.TY=C,O.UY=M,O},h}();m.Vt=function(){function h(){}return h.CD=function(a,c,d){if(h.wy(a)){var g=m.ta.kj(c,a,!1);c=!1,m.Uk.CE(a)&&(c=c||a.lu(g,d)),(g=a.getType())!=1736&&g!=1607||!m.Uk.AE(a)||d==0||(c=c||a.fj(d)),g!=1736&&g!=1607||!m.Uk.BE(a)||d==0||c||a.hM()}},h.wy=function(a){return m.Uk.CE(a)||m.Uk.AE(a)||m.Uk.BE(a)},h}();var p=function(){function h(){this.rh=[]}return h.zB=function(a,c,d,g,v){var b=a.getType(),C=c.getType();if(b==197){if(C==197)return h.tW(a,c,d,g);if(C==33)return g==2?g=1:g==1&&(g=2),h.hJ(c,a,d,g)}else if(b==33){if(C==197)return h.hJ(a,c,d,g);if(C==33)return h.vW(a,c,d,g)}if(a.B()||c.B())return g==4;var M=new m.l;a.A(M);var O=new m.l;c.A(O);var L=new m.l;if(L.K(M),L.Zb(O),d=m.ta.Wd(d,L,!1),h.dk(M,O,d))return g==4;switch(M=!1,m.Vk.yd(b)&&((b=new m.Ta(a.description)).oc(a,!0),a=b,b=1607),m.Vk.yd(C)&&((C=new m.Ta(c.description)).oc(c,!0),c=C,C=1607),b!=197&&C!=197?(a.Db()<c.Db()||b==33&&C==550)&&(g==2?g=1:g==1&&(g=2)):b!=1736&&C!=197&&(g==2?g=1:g==1&&(g=2)),b){case 1736:switch(C){case 1736:M=h.rt(a,c,d,g,v);break;case 1607:M=h.$m(a,c,d,g,v);break;case 33:M=h.qt(a,c,d,g);break;case 550:M=h.pt(a,c,d,g,v);break;case 197:M=h.GI(a,c,d,g,v)}break;case 1607:switch(C){case 1736:M=h.$m(c,a,d,g,v);break;case 1607:M=h.gB(a,c,d,g,v);break;case 33:M=h.tt(a,c,d,g,v);break;case 550:M=h.st(a,c,d,g,v);break;case 197:M=h.MI(a,c,d,g)}break;case 33:switch(C){case 1736:M=h.qt(c,a,d,g);break;case 1607:M=h.tt(c,a,d,g,v);break;case 550:M=h.lt(c,a,d,g)}break;case 550:switch(C){case 1736:M=h.pt(c,a,d,g,v);break;case 1607:M=h.st(c,a,d,g,v);break;case 550:M=h.ZA(a,c,d,g,v);break;case 33:M=h.lt(a,c,d,g);break;case 197:M=h.hI(a,c,d,g)}break;case 197:switch(C){case 1736:M=h.GI(c,a,d,g,v);break;case 1607:M=h.MI(c,a,d,g);break;case 550:M=h.hI(c,a,d,g)}}return M},h.tW=function(a,c,d,g){if(a.B()||c.B())return g==4;var v=new m.l,b=new m.l,C=new m.l;switch(a.A(v),c.A(b),C.K(v),C.Zb(b),a=m.ta.Wd(d,C,!1),g){case 4:return h.dk(v,b,a);case 2:return h.jF(b,v,a);case 1:return h.jF(v,b,a);case 3:return h.ek(v,b,a);case 8:return h.cQ(v,b,a);case 32:return h.bQ(v,b,a);case 16:return h.aQ(v,b,a)}return!1},h.hJ=function(a,c,d,g){if(a.B()||c.B())return g==4;a=a.D();var v=new m.l,b=new m.l;switch(c.A(v),b.K(a),b.Zb(v),c=m.ta.Wd(d,b,!1),g){case 4:return h.Rw(a,v,c);case 2:return h.eB(a,v,c);case 1:return h.RU(a,v,c);case 3:return h.vI(a,v,c);case 8:return h.dB(a,v,c)}return!1},h.vW=function(a,c,d,g){if(a.B()||c.B())return g==4;a=a.D(),c=c.D();var v=new m.l;switch(v.K(a),v.Zb(c),d=m.ta.Wd(d,v,!1),g){case 4:return h.SU(a,c,d);case 2:return h.uI(c,a,d);case 1:return h.uI(a,c,d);case 3:return h.wI(a,c,d)}return!1},h.rt=function(a,c,d,g,v){switch(g){case 4:return h.kV(a,c,d);case 2:return h.Sw(c,a,d,v);case 1:return h.Sw(a,c,d,v);case 3:return h.nV(a,c,d);case 8:return h.vV(a,c,d);case 32:return h.qV(a,c,d,v)}return!1},h.$m=function(a,c,d,g,v){switch(g){case 4:return h.lV(a,c,d);case 1:return h.fB(a,c,d,v);case 8:return h.wV(a,c,d,v);case 16:return h.gV(a,c,d)}return!1},h.qt=function(a,c,d,g){switch(g){case 4:return h.jV(a,c,d);case 1:return h.dV(a,c,d);case 8:return h.uV(a,c,d)}return!1},h.pt=function(a,c,d,g){switch(g){case 4:return h.iV(a,c,d);case 1:return h.cV(a,c,d);case 8:return h.tV(a,c,d);case 16:return h.fV(a,c,d)}return!1},h.GI=function(a,c,d,g,v){if(h.hV(a,c,d))return g==4;if(g==4)return!1;switch(g){case 2:return h.xV(a,c,d);case 1:return h.bV(a,c,d);case 3:return h.mV(a,c,d);case 8:return h.sV(a,c,d,v);case 32:return h.pV(a,c,d,v);case 16:return h.eV(a,c,d,v)}return!1},h.gB=function(a,c,d,g){switch(g){case 4:return h.GV(a,c,d);case 2:return h.KI(c,a,d);case 1:return h.KI(a,c,d);case 3:return h.IV(a,c,d);case 8:return h.NI(a,c,d);case 32:return h.MV(a,c,d);case 16:return h.LI(a,c,d)}return!1},h.tt=function(a,c,d,g){switch(g){case 4:return h.FV(a,c,d);case 1:return h.AV(a,c,d);case 8:return h.QV(a,c,d)}return!1},h.st=function(a,c,d,g){switch(g){case 4:return h.EV(a,c,d);case 1:return h.zV(a,c,d);case 8:return h.PV(a,c,d);case 16:return h.CV(a,c,d)}return!1},h.MI=function(a,c,d,g){if(h.DV(a,c,d))return g==4;if(g==4)return!1;switch(g){case 2:return h.RV(a,c,d);case 1:return h.yV(a,c,d);case 3:return h.HV(a,c,d);case 8:return h.OV(a,c,d);case 32:return h.LV(a,c,d);case 16:return h.BV(a,c,d)}return!1},h.ZA=function(a,c,d,g){switch(g){case 4:return h.gU(a,c,d);case 2:return h.eI(c,a,d);case 1:return h.eI(a,c,d);case 3:return h.iU(a,c,d);case 32:return h.oU(a,c,d)}return!1},h.lt=function(a,c,d,g){switch(g){case 4:return h.fI(a,c,d);case 2:return h.sU(a,c,d);case 1:return h.dU(a,c,d);case 3:return h.Nw(a,c,d)}return!1},h.hI=function(a,c,d,g){switch(g){case 4:return h.fU(a,c,d);case 2:return h.rU(a,c,d);case 1:return h.cU(a,c,d);case 3:return h.hU(a,c,d);case 8:return h.qU(a,c,d);case 16:return h.eU(a,c,d)}return!1},h.nV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!!h.ek(g,v,d)&&(g=h.qc(a,c,!1))!=4&&g!=1&&g!=2&&(!!h.dI(a,c,d)||(g=a.Qb(),v=c.Qb(),!(Math.abs(g-v)>4*Math.max(a.I(),c.I())*d)&&h.Wz(a,c,d,!0)))},h.kV=function(a,c,d){var g=h.qc(a,c,!0);return g==4||g!=1&&g!=2&&g!=1073741824&&h.EI(a,c,d)},h.vV=function(a,c,d){var g=h.qc(a,c,!1);return g!=4&&g!=1&&g!=2&&h.II(a,c,d,null)},h.qV=function(a,c,d,g){var v=h.qc(a,c,!1);return v!=4&&v!=1&&v!=2&&h.FI(a,c,d,g)},h.Sw=function(a,c,d,g){var v=new m.l,b=new m.l;return a.A(v),c.A(b),!!h.zc(v,b,d)&&(v=h.qc(a,c,!1))!=4&&v!=2&&(v==1||h.BI(a,c,d,g))},h.lV=function(a,c,d){var g=h.qc(a,c,!0);return g==4||g!=1&&g!=1073741824&&h.EI(a,c,d)},h.wV=function(a,c,d,g){var v=h.qc(a,c,!1);return v!=4&&v!=1&&h.JI(a,c,d,g)},h.gV=function(a,c,d){var g=h.qc(a,c,!1);return g!=4&&g!=1&&h.DI(a,c,d,null)},h.fB=function(a,c,d,g){var v=new m.l,b=new m.l;return a.A(v),c.A(b),!!h.zc(v,b,d)&&(v=h.qc(a,c,!1))!=4&&(v==1||h.CI(a,c,d,g))},h.jV=function(a,c,d){return m.hd.KG(a,c,d)==0},h.uV=function(a,c,d){return c=c.D(),h.HI(a,c,d)},h.dV=function(a,c,d){return c=c.D(),h.AI(a,c,d)},h.iV=function(a,c,d){var g=h.qc(a,c,!1);if(g==4)return!0;if(g==1)return!1;g=new m.l,a.A(g),g.W(d,d);for(var v=new m.h,b=0;b<c.I();b++)if(c.D(b,v),g.contains(v)){var C=m.hd.Yd(a,v,d);if(C==1||C==2)return!1}return!0},h.tV=function(a,c,d){var g=this.qc(a,c,!1);if(g==4||g==1)return!1;g=new m.l,a.A(g),g.W(d,d);for(var v=!1,b=a,C=!1,M=0;M<c.I();M++){var O=c.Na(M);if(g.contains(O)){if((O=m.hd.Yd(b,O,d))==2)v=!0;else if(O==1)return!1}C||(!m.Dg.Ml(a,c.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?b=a:(b=new m.Da,a.copyTo(b),b.fj(1)),C=!0)}return!!v},h.fV=function(a,c,d){var g=this.qc(a,c,!1);if(g==4||g==1)return!1;var v=new m.l;g=new m.l;var b=new m.l;a.A(v),c.A(b),g.K(v),g.W(d,d),b=v=!1;for(var C=a,M=!1,O=0;O<c.I();O++){var L=c.Na(O);if(g.contains(L)?(L=m.hd.Yd(C,L,d))==0?b=!0:L==1&&(v=!0):b=!0,v&&b)return!0;M||(!m.Dg.Ml(a,c.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?C=a:(C=new m.Da,a.copyTo(C),C.fj(1)),M=!0)}return!1},h.cV=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),!this.zc(g,v,d)||(v=this.qc(a,c,!1))==4)return!1;if(v==1)return!0;v=!1;for(var b=a,C=!1,M=0;M<c.I();M++){var O=c.Na(M);if(!g.contains(O))return!1;if((O=m.hd.Yd(b,O,d))==1)v=!0;else if(O==0)return!1;C||(!m.Dg.Ml(a,c.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?b=a:(b=new m.Da,a.copyTo(b),b.fj(1)),C=!0)}return v},h.mV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!!h.ek(g,v,d)&&((g=new m.Da).ad(c,!1),h.Wz(a,g,d,!0))},h.hV=function(a,c,d){var g=h.qc(a,c,!1);if(g==4)return!0;if(g==1||g==2)return!1;var v=new m.l;if(g=new m.l,a.A(v),c.A(g),h.zc(g,v,d)||(v=new m.h,g.dn(v),(c=m.hd.Yd(a,v,d))!=0)||(g.$I(v),(c=m.hd.Yd(a,v,d))!=0)||(g.en(v),(c=m.hd.Yd(a,v,d))!=0)||(g.cJ(v),(c=m.hd.Yd(a,v,d))!=0))return!1;c=a.ub(0),(v=new m.l).K(g),v.W(d,d);for(var b=0,C=a.I();b<C;b++){var M=c.read(2*b),O=c.read(2*b+1);if(v.contains(M,O))return!1}return!h.TG(a,g,d)},h.sV=function(a,c,d,g){var v=h.qc(a,c,!1);if(v==4||v==1||v==2)return!1;v=new m.l;var b=new m.l;return a.A(v),c.A(b),!h.zc(b,v,d)&&(b.R()<=d&&b.ca()<=d?(c=c.Ip(),h.HI(a,c,d)):b.R()<=d||b.ca()<=d?(v=new m.Ta,b=new m.Sa,c.Hf(0,b),v.nf(b),c.Hf(2,b),v.lineTo(b),h.JI(a,v,d,g)):((v=new m.Da).ad(c,!1),h.II(a,v,d,g)))},h.pV=function(a,c,d,g){var v=h.qc(a,c,!1);if(v==4||v==1||v==2)return!1;v=new m.l;var b=new m.l;return a.A(v),c.A(b),!(h.zc(b,v,d)||b.R()<=d||b.ca()<=d)&&((v=new m.Da).ad(c,!1),h.FI(a,v,d,g))},h.xV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),h.zc(v,g,d)},h.bV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!!h.zc(g,v,d)&&(g=h.qc(a,c,!1))!=4&&g!=2&&(g==1||(v.R()<=d&&v.ca()<=d?(c=c.Ip(),h.AI(a,c,d)):v.R()<=d||v.ca()<=d?(v=new m.Ta,g=new m.Sa,c.Hf(0,g),v.nf(g),c.Hf(2,g),v.lineTo(g),h.CI(a,v,d,null)):((v=new m.Da).ad(c,!1),h.BI(a,v,d,null))))},h.eV=function(a,c,d,g){var v=new m.l,b=new m.l;return a.A(v),c.A(b),!(h.zc(b,v,d)||b.ca()>d&&b.R()>d||b.ca()<=d&&b.R()<=d)&&(v=new m.Ta,b=new m.Sa,c.Hf(0,b),v.nf(b),c.Hf(2,b),v.lineTo(b),h.DI(a,v,d,g))},h.IV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(!h.ek(g,v,d)||h.qc(a,c,!1)==4)&&(!!h.dI(a,c,d)||h.Wz(a,c,d,!1))},h.GV=function(a,c,d){return this.qc(a,c,!1)==4||!!new m.Zl(a,c,d,!0).next()&&!this.UG(a,c,d)},h.NI=function(a,c,d){if(h.qc(a,c,!1)==4)return!1;var g=new m.be(0);if(h.Xz(a,c,d,g)!=0)return!1;for(var v=new m.de,b=0;b<g.size;b+=2){var C=g.read(b),M=g.read(b+1);v.Bu(C,M)}return a=a.mg(),c=c.mg(),a.Fd(c,0,c.I()),h.Mw(a,v,d)},h.LI=function(a,c,d){if(h.qc(a,c,!1)==4)return!1;var g=new m.be(0);if(h.Xz(a,c,d,g)!=0)return!1;for(var v=new m.de,b=0;b<g.size;b+=2){var C=g.read(b),M=g.read(b+1);v.Bu(C,M)}return a=a.mg(),c=c.mg(),a.Fd(c,0,c.I()),!h.Mw(a,v,d)},h.MV=function(a,c,d){return h.qc(a,c,!1)!=4&&h.WG(a,c,d)},h.KI=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(!h.zc(g,v,d)||h.qc(a,c,!1)==4)&&h.ym(c,a,d,!1)},h.FV=function(a,c,d){return h.qc(a,c,!1)==4||(c=c.D(),!h.Yz(a,c,d))},h.QV=function(a,c,d){return h.qc(a,c,!1)!=4&&(c=c.D(),h.Zz(a,c,d))},h.AV=function(a,c,d){return h.qc(a,c,!1)!=4&&(c=c.D(),h.SG(a,c,d))},h.EV=function(a,c,d){return h.qc(a,c,!1)==4||!h.VG(a,c,d,!1)},h.PV=function(a,c,d){if(this.qc(a,c,!1)==4)return!1;var g=a.Ga(),v=new m.l,b=new m.l,C=new m.l;a.A(v),c.A(b),v.W(d,d),b.W(d,d),C.K(v),C.Ea(b),v=null;var M=a.Bb;if(M!=null){var O=M.Fb;v=M.zo,O==null&&(O=M=m.ta.jj(a,C))}else O=M=m.ta.jj(a,C);var L=O.getIterator(),q=null;v!=null&&(q=v.getIterator());var U=new m.h,ee=new m.h,Q=!1,ge=d*d;for(v=new m.pn(c.I()),M=0;M<c.I();M++)v.write(M,0);for(M=0;M<c.I();M++)if(c.D(M,U),C.contains(U)){if(b.K(U.x,U.y,U.x,U.y),q!=null&&(q.Xi(b,d),q.next()==-1))continue;L.Xi(b,d);for(var ve=L.next();ve!=-1;ve=L.next())if(g.Vb(O.ja(ve)),(ve=g.ha()).hc(ve.fe(U,!1),ee),m.h.yc(U,ee)<=ge){v.write(M,1),Q=!0;break}}if(!Q)return!1;for(a=a.mg(),g=new m.de,b=new m.h,M=0;M<c.I();M++)v.read(M)!=0&&(c.D(M,b),g.Bu(b.x,b.y));return this.Mw(a,g,d)},h.CV=function(a,c,d){if(this.qc(a,c,!1)==4)return!1;var g=a.Ga(),v=new m.l,b=new m.l,C=new m.l;a.A(v),c.A(b),v.W(d,d),b.W(d,d),C.K(v),C.Ea(b),v=null;var M=a.Bb;if(M!=null){var O=M.Fb;v=M.zo,O==null&&(O=M=m.ta.jj(a,C))}else O=M=m.ta.jj(a,C);var L=O.getIterator(),q=null;v!=null&&(q=v.getIterator());var U=new m.h,ee=new m.h,Q=!1,ge=!1,ve=d*d;for(v=new m.pn(c.I()),M=0;M<c.I();M++)v.write(M,0);for(M=0;M<c.I();M++)if(c.D(M,U),C.contains(U)){if(b.K(U.x,U.y,U.x,U.y),q!=null&&(q.Xi(b,d),q.next()==-1)){ge=!0;continue}L.Xi(b,d);for(var fe=!1,Ce=L.next();Ce!=-1;Ce=L.next())if(g.Vb(O.ja(Ce)),(Ce=g.ha()).hc(Ce.fe(U,!1),ee),m.h.yc(U,ee)<=ve){v.write(M,1),fe=Q=!0;break}fe||(ge=!0)}else ge=!0;if(!Q||!ge)return!1;for(a=a.mg(),g=new m.de,b=new m.h,M=0;M<c.I();M++)v.read(M)!=0&&(c.D(M,b),g.Bu(b.x,b.y));return!this.Mw(a,g,d)},h.zV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(!h.zc(g,v,d)||h.qc(a,c,!1)==4||!h.VG(a,c,d,!0))&&(a=a.mg(),!h.gI(a,c,d))},h.HV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(v.ca()>d&&v.R()>d)&&h.ek(g,v,d)},h.DV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!h.zc(v,g,d)&&!h.TG(a,v,d)},h.OV=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),v.ca()<=d&&v.R()<=d)return v=c.Ip(),h.Zz(a,v,d);if(v.ca()<=d||v.R()<=d)return v=new m.Ta,g=new m.Sa,c.Hf(0,g),v.nf(g),c.Hf(2,g),v.lineTo(g),h.NI(a,v,d);a=a.Ga(),c=new m.l,g=new m.l,c.K(v),g.K(v),c.W(-d,-d),g.W(d,d),v=!1;for(var b=new m.l,C=new m.l;a.$a();)for(;a.Ha();){if(a.ha().A(b),C.K(c),C.Ea(b),!C.B()&&(C.ca()>d||C.R()>d))return!1;C.K(g),C.Ea(b),C.B()||(v=!0)}return v},h.LV=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(h.zc(g,v,d)||h.zc(v,g,d)||h.zc(v,g,d)||v.ca()>d&&v.R()>d||v.ca()<=d&&v.R()<=d)&&(g=new m.Ta,v=new m.Sa,c.Hf(0,v),g.nf(v),c.Hf(2,v),g.lineTo(v),h.WG(a,g,d))},h.RV=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),!h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d)return h.zc(v,g,d);a=a.Ga(),(c=new m.l).K(v),c.W(-d,-d),v=!1,g=new m.l;for(var b=new m.l;a.$a();)for(;a.Ha();)a.ha().A(g),c.hm(g)?v=!0:(b.K(c),b.Ea(g),!b.B()&&(b.ca()>d||b.R()>d)&&(v=!0));return v},h.yV=function(a,c,d){var g=new m.l,v=new m.l;return c.A(v),a.A(g),!(!h.zc(g,v,d)||v.ca()>d&&v.R()>d)&&(v.ca()<=d&&v.R()<=d?(c=c.Ip(),h.SG(a,c,d)):(g=new m.Ta,v=new m.Sa,c.Hf(0,v),g.nf(v),c.Hf(2,v),g.lineTo(v),h.ym(g,a,d,!1)))},h.BV=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d)return g=new m.Ta,v=new m.Sa,c.Hf(0,v),g.nf(v),c.Hf(2,v),g.lineTo(v),h.LI(a,g,d);a=a.Ga(),c=new m.l,(g=new m.l).K(v),c.K(v),g.W(-d,-d),c.W(d,d);for(var b=v=!1,C=new m.l,M=new m.l;a.$a();)for(;a.Ha();)if(a.ha().A(C),b||c.contains(C)||(b=!0),v||(M.K(g),M.Ea(C),!M.B()&&(M.ca()>d||M.R()>d)&&(v=!0)),v&&b)return!0;return!1},h.iU=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!!h.ek(g,v,d)&&(!!h.jU(a,c,d)||h.YA(a,c,d,!1,!0,!1))},h.gU=function(a,c,d){return!h.gI(a,c,d)},h.oU=function(a,c,d){return h.YA(a,c,d,!1,!1,!0)},h.eI=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!!h.zc(g,v,d)&&h.YA(c,a,d,!0,!1,!1)},h.Mw=function(a,c,d){d*=d;for(var g=new m.h,v=new m.h,b=0;b<c.I();b++){c.D(b,v);for(var C=!1,M=0;M<a.I();M++)if(a.D(M,g),m.h.yc(g,v)<=d){C=!0;break}if(!C)return!1}return!0},h.Nw=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),h.ek(g,v,d)},h.fI=function(a,c,d){return c=c.D(),h.kt(a,c,d)},h.sU=function(a,c,d){return h.Nw(a,c,d)},h.dU=function(a,c,d){return!h.fI(a,c,d)},h.hU=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(v.ca()>d||v.R()>d)&&h.ek(g,v,d)},h.fU=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),h.zc(v,g,d))return!1;for((c=new m.l).K(v),c.W(d,d),d=new m.h,v=0;v<a.I();v++)if(a.D(v,d),c.contains(d))return!1;return!0},h.qU=function(a,c,d){var g=new m.l,v=new m.l,b=new m.l;if(c.A(g),g.ca()<=d&&g.R()<=d)return!1;if(g.ca()<=d||g.R()<=d){c=new m.h;var C=!1;v.K(g),b.K(g),v.W(d,d),g.ca()>d?b.W(0,-d):b.W(-d,0);for(var M=0;M<a.I();M++)if(a.D(M,c),v.contains(c)){if(g.ca()>d){if(c.y>b.G&&c.y<b.H)return!1}else if(c.x>b.v&&c.x<b.C)return!1;C=!0}return C}for(v.K(g),b.K(g),v.W(d,d),b.W(-d,-d),c=new m.h,C=!1,M=0;M<a.I();M++)if(a.D(M,c),v.contains(c)){if(b.hm(c))return!1;C=!0}return C},h.rU=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),!h.zc(v,g,d))return!1;if(v.ca()<=d&&v.R()<=d)return h.ek(g,v,d);if(v.ca()<=d||v.R()<=d){c=!1,g=new m.l;var b=new m.l;g.K(v),b.K(v),v.ca()>d?g.W(0,-d):g.W(-d,0),b.W(d,d);for(var C=new m.h,M=0;M<a.I();M++){if(a.D(M,C),!b.contains(C))return!1;v.ca()>d?C.y>g.G&&C.y<g.H&&(c=!0):C.x>g.v&&C.x<g.C&&(c=!0)}return c}for(c=!1,g=new m.l,b=new m.l,g.K(v),b.K(v),g.W(-d,-d),b.W(d,d),C=new m.h,M=0;M<a.I();M++){if(a.D(M,C),!b.contains(C))return!1;g.hm(C)&&(c=!0)}return c},h.cU=function(a,c,d){var g=new m.l,v=new m.l;return a.A(g),c.A(v),!(!h.zc(g,v,d)||v.ca()>d||v.R()>d)&&(c=c.Ip(),!h.kt(a,c,d))},h.eU=function(a,c,d){var g=new m.l,v=new m.l;if(a.A(g),c.A(v),h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d){c=new m.l,g=new m.l,c.K(v),v.ca()>d?c.W(0,-d):c.W(-d,0),g.K(v),g.W(d,d);for(var b=new m.h,C=!1,M=!1,O=0;O<a.I();O++)if(a.D(O,b),C||(v.ca()>d?b.y>c.G&&b.y<c.H&&(C=!0):b.x>c.v&&b.x<c.C&&(C=!0)),M||g.contains(b)||(M=!0),C&&M)return!0;return!1}for(c=new m.l,g=new m.l,c.K(v),c.W(-d,-d),g.K(v),g.W(d,d),b=new m.h,M=C=!1,O=0;O<a.I();O++)if(a.D(O,b),!C&&c.hm(b)&&(C=!0),M||g.contains(b)||(M=!0),C&&M)return!0;return!1},h.wI=function(a,c,d){return m.h.yc(a,c)<=d*d},h.SU=function(a,c,d){return m.h.yc(a,c)>d*d},h.uI=function(a,c,d){return h.wI(a,c,d)},h.vI=function(a,c,d){var g=new m.l;return g.K(a),h.ek(g,c,d)},h.Rw=function(a,c,d){var g=new m.l;return g.K(c),g.W(d,d),!g.contains(a)},h.dB=function(a,c,d){if(c.ca()<=d&&c.R()<=d)return!1;var g=new m.l,v=new m.l;if(g.K(c),g.W(d,d),!g.contains(a))return!1;if(c.ca()<=d||c.R()<=d){if(v.K(c),c.ca()>d?v.W(0,-d):v.W(-d,0),c.ca()>d){if(a.y>v.G&&a.y<v.H)return!1}else if(a.x>v.v&&a.x<v.C)return!1;return!0}return v.K(c),v.W(-d,-d),!v.hm(a)},h.eB=function(a,c,d){if(c.ca()<=d&&c.R()<=d)return!0;if(c.ca()<=d||c.R()<=d){var g=new m.l;g.K(c),c.ca()>d?g.W(0,-d):g.W(-d,0);var v=!1;return c.ca()>d?a.y>g.G&&a.y<g.H&&(v=!0):a.x>g.v&&a.x<g.C&&(v=!0),v}return(g=new m.l).K(c),g.W(-d,-d),g.hm(a)},h.RU=function(a,c,d){return h.vI(a,c,d)},h.ek=function(a,c,d){return h.zc(a,c,d)&&h.zc(c,a,d)},h.dk=function(a,c,d){var g=new m.l;return g.K(c),g.W(d,d),!a.isIntersecting(g)},h.cQ=function(a,c,d){if(a.ca()<=d&&a.R()<=d){var g=a.sf();return h.dB(g,c,d)}if(c.ca()<=d&&c.R()<=d)return g=c.sf(),h.dB(g,a,d);if(a.ca()>d&&a.R()>d&&(c.ca()<=d||c.R()<=d)?g=c:(g=a,a=c),g.ca()<=d||g.R()<=d){if(a.ca()<=d||a.R()<=d){c=new m.yb;var v=new m.yb,b=[0,0],C=[0,0],M=new m.h;return g.dn(M),c.Dc(M),g.en(M),c.Qc(M),a.dn(M),v.Dc(M),a.en(M),v.Qc(M),c.Ea(v,null,b,C,d),c.Ea(v,null,null,null,d)==1&&(b[0]==0||b[1]==1||C[0]==0||C[1]==1)}return c=new m.l,v=new m.l,c.K(a),c.W(-d,-d),v.K(c),v.Ea(g),!(!v.B()&&(v.ca()>d||v.R()>d))}return a.W(d,d),(v=new m.l).K(g),v.Ea(a),!(v.B()||!v.B()&&v.ca()>d&&v.R()>d)},h.bQ=function(a,c,d){if(h.zc(a,c,d)||h.zc(c,a,d)||a.ca()<=d&&a.R()<=d||c.ca()<=d&&c.R()<=d)return!1;if(a.ca()<=d||a.R()<=d){if(c.ca()>d&&c.R()>d)return!1;var g=new m.yb,v=new m.yb,b=[0,0],C=[0,0],M=new m.h;return a.dn(M),g.Dc(M),a.en(M),g.Qc(M),c.dn(M),v.Dc(M),c.en(M),v.Qc(M),g.Ea(v,null,b,C,d),g.Ea(v,null,null,null,d)==2&&(0<b[0]||1>b[1])&&(0<C[0]||1>C[1])}return!(c.ca()<=d||c.R()<=d)&&((g=new m.l).K(a),g.Ea(c),!(g.B()||g.ca()<=d||g.R()<=d))},h.jF=function(a,c,d){if(!h.zc(a,c,d))return!1;if(a.ca()<=d&&a.R()<=d)return a=a.sf(),h.eB(a,c,d);if(c.ca()<=d&&c.R()<=d)return c=c.sf(),h.eB(c,a,d);if(a.ca()<=d||a.R()<=d)return h.zc(a,c,d);if(c.ca()<=d||c.R()<=d){var g=new m.l;return g.K(a),g.W(-d,-d),g.hm(c)?!0:((a=new m.l).K(g),a.Ea(c),!(a.B()||a.ca()<=d&&a.R()<=d))}return h.zc(a,c,d)},h.aQ=function(a,c,d){if(h.zc(a,c,d)||h.zc(c,a,d)||a.ca()<=d&&a.R()<=d||c.ca()<=d&&c.R()<=d||c.ca()>d&&c.R()>d&&a.ca()>d&&a.R()>d)return!1;if(a.ca()>d&&a.R()>d)var g=c;else g=a,a=c;if(a.ca()>d&&a.R()>d){c=new m.l;var v=new m.l;return v.K(a),v.W(-d,-d),c.K(v),c.Ea(g),!(c.B()||c.ca()<=d&&c.R()<=d)}c=new m.yb,v=new m.yb;var b=[0,0],C=[0,0],M=new m.h;return g.dn(M),c.Dc(M),g.en(M),c.Qc(M),a.dn(M),v.Dc(M),a.en(M),v.Qc(M),c.Ea(v,null,b,C,d),c.Ea(v,null,null,null,d)==1&&0<b[0]&&1>b[1]&&0<C[0]&&1>C[1]},h.EI=function(a,c,d){var g=new m.l,v=new m.l,b=new m.Zl(a,c,d,!0);if(!b.next())return!0;if(this.UG(a,c,d))return!1;var C=a,M=null;c.getType()==1736&&(M=c);var O=!1,L=!1;do{var q=b.nl(),U=b.hl();if(U=c.Na(c.Ba(U)),g.K(b.uz()),g.W(d,d),g.contains(U)&&(U=m.hd.Yd(C,U,0))!=0||c.getType()==1736&&(q=a.Na(a.Ba(q)),v.K(b.az()),v.W(d,d),v.contains(q)&&(U=m.hd.Yd(M,q,0))!=0))return!1;O||(!m.Dg.Ml(a,c.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?C=a:(C=new m.Da,a.copyTo(C),C.fj(1)),O=!0),c.getType()!=1736||L||(L=c,!m.Dg.Ml(L,a.da()-1)||c.Bb!=null&&c.Bb.Fb!=null?M=c:(M=new m.Da,L.copyTo(M),M.fj(1)),L=!0)}while(b.next());return!0},h.zc=function(a,c,d){var g=new m.l;return g.K(a),g.W(d,d),g.contains(c)},h.ls=function(a,c,d){var g=new m.l;return g.K(c),g.W(d,d),c=new m.h,a.dn(c),!g.contains(c)||(a.$I(c),!g.contains(c)||(a.cJ(c),!g.contains(c)||(a.en(c),!g.contains(c))))},h.dI=function(a,c,d){if(a.da()!=c.da()||a.I()!=c.I())return!1;var g=new m.h,v=new m.h,b=!0;d*=d;for(var C=0;C<a.da();C++){if(a.Vc(C)!=c.Vc(C)){b=!1;break}for(var M=a.Ba(C);M<c.Vc(C);M++)if(a.D(M,g),c.D(M,v),m.h.yc(g,v)>d){b=!1;break}if(!b)break}return!!b},h.jU=function(a,c,d){if(a.I()!=c.I())return!1;var g=new m.h,v=new m.h,b=!0;d*=d;for(var C=0;C<a.I();C++)if(a.D(C,g),c.D(C,v),m.h.yc(g,v)>d){b=!1;break}return!!b},h.YA=function(a,c,d,g,v,b){var C=!1;if(a.I()>c.I()){g&&(g=!1,C=!0);var M=c}else M=a,a=c;if(c=null,v||b||C){c=new m.pn(a.I());for(var O=0;O<a.I();O++)c.write(O,0)}O=new m.l;var L=new m.l,q=new m.l;M.A(O),a.A(L),O.W(d,d),L.W(d,d),q.K(O),q.Ea(L),L=new m.h;for(var U=new m.h,ee=!0,Q=m.ta.oE(a,q),ge=Q.getIterator(),ve=d*d,fe=0;fe<M.I();fe++)if(M.D(fe,L),q.contains(L)){var Ce=!1;O.K(L.x,L.y,L.x,L.y),ge.Xi(O,d);for(var Ie=ge.next();Ie!=-1&&(Ie=Q.ja(Ie),a.D(Ie,U),!(m.h.yc(L,U)<=ve&&((v||b||C)&&c.write(Ie,1),Ce=!0,g)));Ie=ge.next());if(!Ce&&(ee=!1,v||g))return!1}else{if(v||g)return!1;ee=!1}if(b&&ee)return!1;if(g)return!0;for(O=0;O<a.I();O++)if(c.read(O)==1){if(b)return!0}else if(v||C)return!1;return!b},h.gI=function(a,c,d){if(a.I()>c.I())var g=c;else g=a,a=c;c=new m.l;var v=new m.l,b=new m.l;g.A(c),a.A(v),c.W(d,d),v.W(d,d),b.K(c),b.Ea(v),v=new m.h;for(var C=new m.h,M=d*d,O=m.ta.oE(a,b),L=O.getIterator(),q=0;q<g.I();q++)if(g.D(q,v),b.contains(v)){c.K(v.x,v.y,v.x,v.y),L.Xi(c,d);for(var U=L.next();U!=-1;U=L.next())if(a.D(O.ja(U),C),m.h.yc(v,C)<=M)return!0}return!1},h.Wz=function(a,c,d,g){return h.ym(a,c,d,g)&&h.ym(c,a,d,g)},h.ym=function(a,c,d,g){function v(mt,lt){return U.QE(mt,lt)}var b,C=!0,M=[0,0],O=[0,0],L=0,q=new m.ia(0),U=new h,ee=new m.l,Q=new m.l,ge=new m.l;a.A(ee),c.A(Q),ee.W(d,d),Q.W(d,d),ge.K(ee),ge.Ea(Q),a=a.Ga(),Q=c.Ga();var ve=null,fe=ve=null,Ce=c.Bb;for(Ce!=null?(ve=Ce.Fb,fe=Ce.zo,ve==null&&(ve=m.ta.jj(c,ge))):ve=m.ta.jj(c,ge),c=ve.getIterator(),Ce=null,fe!=null&&(Ce=fe.getIterator());a.$a();)for(;a.Ha();){var Ie=!1,Ne=a.ha();if(Ne.A(ee),!ee.isIntersecting(ge)||Ce!=null&&(Ce.Xi(ee,d),Ce.next()==-1))return!1;for(fe=Ne.Qb(),c.Uo(Ne,d),b=c.next();b!=-1;b=c.next()){Q.Vb(ve.ja(b)),b=Q.ha();var Ve=Ne.Ea(b,null,M,O,d);if(Ve==2&&(!g||O[0]<=O[1])){Ve=M[0];var Xe=M[1],et=O[0],dt=O[1];if(Ve*fe<=d&&(1-Xe)*fe<=d){Ie=!0,L=0,q.resize(0),U.rh.length=0;var ct=a.wb();for(et=!0;et;){if(a.Ha()){if(fe=(Ne=a.ha()).Qb(),(Ve=Ne.Ea(b,null,M,O,d))==2&&(!g||O[0]<=O[1])&&(Ve=M[0],Xe=M[1],Ve*fe<=d&&(1-Xe)*fe<=d)){ct=a.wb();continue}if(Q.Ha()&&(b=Q.ha(),(Ve=Ne.Ea(b,null,M,O,d))==2&&(!g||O[0]<=O[1])&&(Ve=M[0],Xe=M[1],Ve*fe<=d&&(1-Xe)*fe<=d))){ct=a.wb();continue}}et=!1}ct!=a.wb()&&(a.Vb(ct),a.ha());break}ct=a.wb(),b=T.construct(ct,a.gb,Ve,Xe,Q.wb(),Q.gb,et,dt),U.rh.push(b),q.add(q.size)}}if(!Ie){if(L==U.rh.length)return!1;for(1<q.size-L&&q.Vd(L,q.size,v),Ie=0;L<U.rh.length;L++)if(!((b=U.rh[q.get(L)]).Kj<Ie&&b.Si<Ie)){if(fe*(b.Kj-Ie)>d)return!1;if(fe*(1-(Ie=b.Si))<=d||Ie==1)break}if(fe*(1-Ie)>d)return!1;L=0,q.resize(0),U.rh.length=0}}return C},h.WG=function(a,c,d){if(1>h.Xz(a,c,d,null))return!1;var g=new m.l,v=new m.l;a.A(g),c.A(v);var b=h.ls(g,v,d);return g=h.ls(v,g,d),!(!b||!g)||(b&&!g?!h.ym(c,a,d,!1):g&&!b?!h.ym(a,c,d,!1):!h.ym(a,c,d,!1)&&!h.ym(c,a,d,!1))},h.Xz=function(a,c,d,g){function v(Ni,Qi){return ee.QE(Ni,Qi)}if(a.yz()>c.yz())var b=c,C=a;else b=a,C=c;a=b.Ga(),c=C.Ga();var M=[0,0],O=[0,0],L=-1,q=0,U=new m.ia(0),ee=new h,Q=new m.l,ge=new m.l,ve=new m.l;b.A(Q),C.A(ge),Q.W(d,d),ge.W(d,d),ve.K(Q),ve.Ea(ge),b=null,g!=null&&(b=new m.h);var fe=ge=ge=null,Ce=C.Bb;for(Ce!=null?(ge=Ce.Fb,fe=Ce.zo,ge==null&&(ge=m.ta.jj(C,ve))):ge=m.ta.jj(C,ve),C=ge.getIterator(),Ce=null,fe!=null&&(Ce=fe.getIterator());a.$a();)for(fe=0;a.Ha();){var Ie=a.ha();if(Ie.A(Q),Q.isIntersecting(ve)){if(Ce!=null&&(Ce.Xi(Q,d),Ce.next()==-1))continue;var Ne=Ie.Qb();C.Uo(Ie,d);for(var Ve=C.next();Ve!=-1;Ve=C.next()){var Xe=ge.ja(Ve);c.Vb(Xe);var et=c.ha(),dt=et.Qb(),ct=Ie.Ea(et,null,M,O,d);if(0<ct){Ve=M[0],L=O[0];var mt=ct==2?M[1]:NaN,lt=ct==2?O[1]:NaN;if(ct==2){if(Ne*(mt-Ve)>d)return 1;var gi=Ne*(mt-Ve);if(c.Ha()){if(et=c.ha(),(ct=Ie.Ea(et,null,M,null,d))==2){ct=M[0];var oi=M[1];if(gi+(ct=Ne*(oi-ct))>d)return 1}c.Vb(Xe),c.ha()}if(!c.vm()){if(c.li(),et=c.li(),(ct=Ie.Ea(et,null,M,null,d))==2&&(ct=M[0],gi+(ct=Ne*((oi=M[1])-ct))>d))return 1;c.Vb(Xe),c.ha()}if(a.Ha()){if(Xe=a.wb(),(ct=(Ie=a.ha()).Ea(et,null,M,null,d))==2&&(ct=M[0],gi+(ct=Ne*((oi=M[1])-ct))>d))return 1;a.Vb(Xe),a.ha()}if(!a.vm()){if(Xe=a.wb(),a.li(),(ct=(Ie=a.li()).Ea(et,null,M,null,d))==2&&(ct=M[0],gi+(ct=dt*((oi=M[1])-ct))>d))return 1;a.Vb(Xe),a.ha()}et=T.construct(a.wb(),a.gb,Ve,mt,c.wb(),c.gb,L,lt),ee.rh.push(et),U.add(U.size)}L=0,g!=null&&(Ie.hc(Ve,b),g.add(b.x),g.add(b.y))}}if(q<ee.rh.length){for(U.Vd(q,U.size,v),Ie=0,Ve=ee.rh[U.get(q)].Mm;q<ee.rh.length;q++)if(!((et=ee.rh[U.get(q)]).Kj<Ie&&et.Si<Ie))if(Ne*(et.Kj-Ie)>d)fe=Ne*(et.Si-et.Kj),Ie=et.Si,Ve=et.Mm;else{if(et.Mm!=Ve?(fe=Ne*(et.Si-et.Kj),Ve=et.Mm):fe+=Ne*(et.Si-et.Kj),fe>d)return 1;if((Ie=et.Si)==1)break}Ne*(1-Ie)>d&&(fe=0),q=0,U.resize(0),ee.rh.length=0}}}return L},h.UG=function(a,c,d){var g=a.Ga(),v=c.Ga();for(a=new m.Zl(a,c,d,!1);a.next();){c=a.nl();var b=a.hl();if(g.Vb(c),v.Vb(b),c=g.ha(),0<v.ha().Ea(c,null,null,null,d))return!0}return!1},h.VG=function(a,c,d,g){var v=a.Ga(),b=new m.l,C=new m.l,M=new m.l;a.A(b),c.A(C),b.W(d,d),b.contains(C),C.W(d,d),M.K(b),M.Ea(C),(b=a.Bb)!=null?(b=b.Fb)==null&&(b=m.ta.jj(a,M)):b=m.ta.jj(a,M),a=b.getIterator();for(var O=new m.h,L=new m.h,q=d*d,U=0;U<c.I();U++)if(c.D(U,O),M.contains(O)){C.K(O.x,O.y,O.x,O.y),a.Xi(C,d);for(var ee=!1,Q=a.next();Q!=-1;Q=a.next())if(v.Vb(b.ja(Q)),(Q=v.ha()).hc(Q.fe(O,!1),L),m.h.yc(L,O)<=q){ee=!0;break}if(g){if(!ee)return!1}else if(ee)return!0}return!!g},h.Yz=function(a,c,d){var g=new m.h,v=d*d,b=a.Ga();if((a=a.Bb)!=null&&(a=a.Fb)!=null){var C=new m.l;for(C.K(c),C=(d=a.MF(C,d)).next();C!=-1;C=d.next())if(b.Vb(a.ja(C)),b.Ha()){var M=(C=b.ha()).fe(c,!1);if(C.hc(M,g),m.h.yc(c,g)<=v)return!0}return!1}for(a=new m.l;b.$a();)for(;b.Ha();)if((C=b.ha()).A(a),a.W(d,d),a.contains(c)&&(M=C.fe(c,!1),C.hc(M,g),m.h.yc(c,g)<=v))return!0;return!1},h.SG=function(a,c,d){return h.Yz(a,c,d)&&!h.Zz(a,c,d)},h.Zz=function(a,c,d){return a=a.mg(),!h.kt(a,c,d)},h.TG=function(a,c,d){if(a.tm()){var g=new m.yb(c.v,c.G,c.v,c.H),v=new m.yb(c.v,c.H,c.C,c.H),b=new m.yb(c.C,c.H,c.C,c.G);for(c=new m.yb(c.C,c.G,c.v,c.G),a=a.Ga();a.$a();)for(;a.Ha();){var C=a.ha();if(C.isIntersecting(g,d)||C.isIntersecting(v,d)||C.isIntersecting(b,d)||C.isIntersecting(c,d))return!0}}else{(g=new m.l).K(c),g.W(d,d),d=a.ub(0),v=new m.h,b=new m.h,c=new m.h,C=new m.h;for(var M=0,O=a.da();M<O;M++)for(var L=!0,q=a.Ba(M),U=a.Vc(M);q<U;q++)if(L)d.tc(2*q,b),L=!1;else{if(d.tc(2*q,v),c.L(b),C.L(v),g.zy(c,C)!=0)return!0;b.L(v)}}return!1},h.qc=function(a,c,d){var g=a.getType(),v=c.getType();if(m.aa.xj(g)){var b=a.Bb;if(b!=null&&(b=b.Fk)!=null)if(v==33){var C=c.D();if((C=b.So(C.x,C.y))==1)return 1;if(C==0)return 4}else{if(C=new m.l,c.A(C),(C=b.Ro(C))==1)return 1;if(C==0)return 4;if(d&&m.aa.xj(v)&&h.HE(c,b))return 1073741824}}if(m.aa.xj(v)&&(b=c.Bb)!=null&&(b=b.Fk)!=null)if(g==33){if(a=a.D(),(C=b.So(a.x,a.y))==1)return 2;if(C==0)return 4}else{if(c=new m.l,a.A(c),(C=b.Ro(c))==1)return 2;if(C==0)return 4;if(d&&m.aa.xj(g)&&h.HE(a,b))return 1073741824}return 0},h.HE=function(a,c){for(var d=a.I(),g=new m.h,v=0;v<d;v++)if(a.D(v,g),c.So(g.x,g.y)==1)return!0;return!1},h.II=function(a,c,d,g){for(var v=1<=a.om(0)&&1<=c.om(0),b=a.Ga(),C=c.Ga(),M=[0,0],O=[0,0],L=new m.Zl(a,c,d,!1),q=!1;L.next();){var U=L.nl(),ee=L.hl();if(b.Vb(U),C.Vb(ee),U=b.ha(),(ee=C.ha().Ea(U,null,O,M,d))==2){if(q=M[0],ee=M[1],U=U.Qb(),v&&(ee-q)*U>d)return!1;q=!0}else if(ee!=0){if(q=M[0],U=O[0],0<q&&1>q&&0<U&&1>U)return!1;q=!0}}return!!q&&(b=new m.l,C=new m.l,v=new m.l,a.A(b),c.A(C),b.W(1e3*d,1e3*d),C.W(1e3*d,1e3*d),v.K(b),v.Ea(C),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<c.I()&&(c=m.Ud.clip(c,v,d,0),c.B()))&&m.am.rt(a,c,d,"F********",g))},h.FI=function(a,c,d,g){var v=1<=a.om(0)&&1<=c.om(0),b=new m.l,C=new m.l,M=new m.l;a.A(b),c.A(C);for(var O=!1,L=h.ls(b,C,d),q=h.ls(C,b,d),U=a.Ga(),ee=c.Ga(),Q=[0,0],ge=[0,0],ve=new m.Zl(a,c,d,!1);ve.next();){var fe=ve.nl(),Ce=ve.hl();if(U.Vb(fe),ee.Vb(Ce),Ce=U.ha(),(fe=ee.ha().Ea(Ce,null,ge,Q,d))==2){fe=Q[0];var Ie=Q[1];if(Ce=Ce.Qb(),v&&(Ie-fe)*Ce>d&&(O=!0,L&&q))return!0}else if(fe!=0&&(fe=Q[0],Ce=ge[0],0<fe&&1>fe&&0<Ce&&1>Ce))return!0}if(v=new m.l,U=new m.l,v.K(b),v.W(1e3*d,1e3*d),U.K(C),U.W(1e3*d,1e3*d),M.K(v),M.Ea(U),b="",b=O?b+"**":b+"T*",L){if(10<c.I()&&(c=m.Ud.clip(c,M,d,0)).B())return!1;b+="****"}else b+="T***";if(q){if(10<a.I()&&(a=m.Ud.clip(a,M,d,0)).B())return!1;b+="***"}else b+="T**";return m.am.rt(a,c,d,b.toString(),g)},h.BI=function(a,c,d,g){var v=[!1],b=h.zI(a,c,d,v);return v[0]?b:(v=new m.l,c.A(v),v.W(1e3*d,1e3*d),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B()))&&m.am.Sw(a,c,d,g))},h.zI=function(a,c,d,g){g[0]=!1;for(var v=a.Ga(),b=c.Ga(),C=[0,0],M=[0,0],O=new m.Zl(a,c,d,!1),L=!1;O.next();){var q=O.nl(),U=O.hl();if(v.Vb(q,-1),b.Vb(U,-1),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))!=0&&(L=!0,q==1&&(q=C[0],U=M[0],0<q&&1>q&&0<U&&1>U)))return g[0]=!0,!1}if(!L){for(g[0]=!0,C=new m.l,a.A(C),C.W(d,d),O=a,L=!1,M=new m.l,g=0,v=c.da();g<v;g++)if(0<c.Ja(g)){if(c.Rj(g,M),!C.isIntersecting(M)||(b=c.Na(c.Ba(g)),(b=m.Dg.wm(O,b,0))==0))return!1;L||(!m.Dg.Ml(a,c.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?O=a:(b=new m.Da,a.copyTo(b),b.fj(1),O=b),L=!0)}if(a.da()==1||c.getType()==1607)return!0;for(C=new m.l,c.A(C),C.W(d,d),M=c,O=!1,d=new m.l,g=0,v=a.da();g<v;g++)if(0<a.Ja(g)){if(a.Rj(g,d),C.isIntersecting(d)&&(b=a.Na(a.Ba(g)),(b=m.Dg.wm(M,b,0))==1))return!1;O||(!m.Dg.Ml(c,a.da()-1)||c.Bb!=null&&c.Bb.Fb!=null?M=c:(b=new m.Da,c.copyTo(b),b.fj(1),M=b),O=!0)}return!0}return!1},h.JI=function(a,c,d,g){for(var v=a.Ga(),b=c.Ga(),C=[0,0],M=[0,0],O=new m.Zl(a,c,d,!1),L=!1;O.next();){var q=O.nl(),U=O.hl();if(v.Vb(q),b.Vb(U),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))==2)L=!0;else if(q!=0){if(L=C[0],q=M[0],0<L&&1>L&&0<q&&1>q)return!1;L=!0}}return!!L&&(b=new m.l,C=new m.l,v=new m.l,a.A(b),c.A(C),b.W(1e3*d,1e3*d),C.W(1e3*d,1e3*d),v.K(b),v.Ea(C),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<c.I()&&(c=m.Ud.clip(c,v,d,0),c.B()))&&m.am.$m(a,c,d,"F********",g))},h.DI=function(a,c,d,g){for(var v=a.Ga(),b=c.Ga(),C=[0,0],M=[0,0],O=new m.Zl(a,c,d,!1),L=!1;O.next();){var q=O.nl(),U=O.hl();if(v.Vb(q),b.Vb(U),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))==2)L=!0;else if(q!=0){if(L=C[0],q=M[0],0<L&&1>L&&0<q&&1>q)return!0;L=!0}}return!!L&&(b=new m.l,C=new m.l,M=new m.l,O=new m.l,v=new m.l,a.A(b),c.A(C),h.ls(C,b,d)?(M.K(b),M.W(1e3*d,1e3*d),O.K(C),O.W(1e3*d,1e3*d),v.K(M),v.Ea(O),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<c.I()&&(c=m.Ud.clip(c,v,d,0),c.B()))&&(d=m.am.$m(a,c,d,"T********",g))):d=m.am.$m(a,c,d,"T*****T**",g))},h.CI=function(a,c,d,g){var v=[!1],b=h.zI(a,c,d,v);return v[0]?b:(v=new m.l,c.A(v),v.W(1e3*d,1e3*d),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B()))&&m.am.fB(a,c,d,g))},h.AI=function(a,c,d){return m.hd.Yd(a,c,d)==1},h.HI=function(a,c,d){return m.hd.Yd(a,c,d)==2},h.kt=function(a,c,d){var g=new m.h;d*=d;for(var v=0;v<a.I();v++)if(a.D(v,g),m.h.yc(g,c)<=d)return!1;return!0},h.prototype.QE=function(a,c){return a=this.rh[a],c=this.rh[c],a.Mm<c.Mm||a.Mm==c.Mm&&(a.pw<c.pw||a.pw==c.pw&&(a.Kj<c.Kj||a.Kj==c.Kj&&(a.Si<c.Si||a.Si==c.Si&&a.BH<c.BH)))?-1:1},h}();m.ud=p}(ye||(ye={})),function(m){var j,T,p;(T=j||(j={}))[T.InteriorInterior=0]="InteriorInterior",T[T.InteriorBoundary=1]="InteriorBoundary",T[T.InteriorExterior=2]="InteriorExterior",T[T.BoundaryInterior=3]="BoundaryInterior",T[T.BoundaryBoundary=4]="BoundaryBoundary",T[T.BoundaryExterior=5]="BoundaryExterior",T[T.ExteriorInterior=6]="ExteriorInterior",T[T.ExteriorBoundary=7]="ExteriorBoundary",T[T.ExteriorExterior=8]="ExteriorExterior",function(h){h[h.AreaAreaPredicates=0]="AreaAreaPredicates",h[h.AreaLinePredicates=1]="AreaLinePredicates",h[h.LineLinePredicates=2]="LineLinePredicates",h[h.AreaPointPredicates=3]="AreaPointPredicates",h[h.LinePointPredicates=4]="LinePointPredicates",h[h.PointPointPredicates=5]="PointPointPredicates"}(p||(p={})),j=function(){function h(){this.le=0,this.j=new m.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return h.yB=function(a,c,d,g,v){if(g.length!=9)throw m.i.fa("relation string length has to be 9 characters");for(var b=0;9>b;b++){var C=g.charAt(b);if(C!="*"&&C!="T"&&C!="F"&&C!="0"&&C!="1"&&C!="2")throw m.i.fa("relation string")}if((b=this.MR(g,a.Db(),c.Db()))!=0)return m.ud.zB(a,c,d,b,v);b=new m.l,a.A(b),C=new m.l,c.A(C);var M=new m.l;if(M.K(b),M.Zb(C),d=m.ta.Wd(d,M,!1),a=this.WE(a,d),c=this.WE(c,d),a.B()||c.B())return this.uW(a,c,g);switch(b=a.getType(),C=c.getType(),M=!1,b){case 1736:switch(C){case 1736:M=this.rt(a,c,d,g,v);break;case 1607:M=this.$m(a,c,d,g,v);break;case 33:M=this.qt(a,c,d,g);break;case 550:M=this.pt(a,c,d,g,v)}break;case 1607:switch(C){case 1736:M=this.$m(c,a,d,this.Zp(g),v);break;case 1607:M=this.gB(a,c,d,g,v);break;case 33:M=this.tt(a,c,d,g,v);break;case 550:M=this.st(a,c,d,g,v)}break;case 33:switch(C){case 1736:M=this.qt(c,a,d,this.Zp(g));break;case 1607:M=this.tt(c,a,d,this.Zp(g),v);break;case 33:M=this.$U(a,c,d,g);break;case 550:M=this.lt(c,a,d,this.Zp(g))}break;case 550:switch(C){case 1736:M=this.pt(c,a,d,this.Zp(g),v);break;case 1607:M=this.st(c,a,d,this.Zp(g),v);break;case 550:M=this.ZA(a,c,d,g,v);break;case 33:M=this.lt(a,c,d,g)}break;default:M=!1}return M},h.rt=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.xJ();var C=new m.l,M=new m.l;return a.A(C),c.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Cu(a,c),g=!0),g||((C=m.ud.qc(a,c,!1))==4?(b.Cu(a,c),g=!0):C==1?(b.ly(c),g=!0):C==2&&(b.ZD(a),g=!0)),g||(a=(g=new m.gd).Ib(a),c=g.Ib(c),b.Wo(g,d,v),b.Bp(a,c),b.j.Ug()),h.fg(b.J,b.Xc)},h.Sw=function(a,c,d,g){var v=new h;v.Yi(),v.bj("T*****F**"),v.xJ();var b=new m.l,C=new m.l;a.A(b),c.A(C);var M=!1;return m.ud.dk(b,C,d)&&(v.Cu(a,c),M=!0),M||((b=m.ud.qc(a,c,!1))==4?(v.Cu(a,c),M=!0):b==1?(v.ly(c),M=!0):b==2&&(v.ZD(a),M=!0)),M?this.fg(v.J,v.Xc):(a=(M=new m.gd).Ib(a),b=M.Ib(c),m.Tk.V(M,d,g,!1),d=M.Ne(b).mg(),M.Gp(0,!0,!0),m.rn.V(M,a,-1,!1,g),M.I(a)!=0&&(m.rn.V(M,b,-1,!1,g),v.er(M,g),(c=M.I(b)==0)||(v.Bp(a,b),v.j.Ug(),b=this.fg(v.J,v.Xc))?(a=M.Ne(a),a=(M=new m.gd).Ib(a),b=M.Ib(d),v.er(M,g),v.le=0,v.Yi(),v.bj(c?"T*****F**":"******F**"),v.IB(),v.Bp(a,b),v.j.Ug(),this.fg(v.J,v.Xc)):b))},h.$m=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.IB();var C=new m.l,M=new m.l;return a.A(C),c.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Du(a,c),g=!0),g||((C=m.ud.qc(a,c,!1))==4?(b.Du(a,c),g=!0):C==1&&(b.$D(c),g=!0)),g||(a=(g=new m.gd).Ib(a),c=g.Ib(c),b.Wo(g,d,v),b.kh=b.j.Dp(),h.Jw(c,b.j,b.kh),b.Bp(a,c),b.j.Ep(b.kh),b.j.Ug()),h.fg(b.J,b.Xc)},h.fB=function(a,c,d,g){var v=new h;v.Yi(),v.bj("T*****F**"),v.IB();var b=new m.l,C=new m.l;a.A(b),c.A(C);var M=!1;return m.ud.dk(b,C,d)&&(v.Du(a,c),M=!0),M||((b=m.ud.qc(a,c,!1))==4?(v.Du(a,c),M=!0):b==1&&(v.$D(c),M=!0)),M?this.fg(v.J,v.Xc):(a=(M=new m.gd).Ib(a),c=M.Ib(c),v.Wo(M,d,g),M.I(a)!=0&&(v.Bp(a,c),v.j.Ug(),this.fg(v.J,v.Xc)))},h.pt=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.yJ();var C=new m.l,M=new m.l;return a.A(C),c.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Eu(a),g=!0),g||((C=m.ud.qc(a,c,!1))==4?(b.Eu(a),g=!0):C==1&&(b.zN(),g=!0)),g||(a=(g=new m.gd).Ib(a),c=g.Ib(c),b.Wo(g,d,v),b.Gy(a,c),b.j.Ug()),h.fg(b.J,b.Xc)},h.gB=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.eX(),g=new m.l;var C=new m.l;a.A(g),c.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.PG(a,c),M=!0),M||m.ud.qc(a,c,!1)!=4||(b.PG(a,c),M=!0),M||(a=(g=new m.gd).Ib(a),c=g.Ib(c),b.Wo(g,d,v),b.Yh=b.j.Dp(),b.kh=b.j.Dp(),h.Jw(a,b.j,b.Yh),h.Jw(c,b.j,b.kh),b.Bp(a,c),b.j.Ep(b.Yh),b.j.Ep(b.kh),b.j.Ug()),h.fg(b.J,b.Xc)},h.st=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.MJ(),g=new m.l;var C=new m.l;a.A(g),c.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.Vz(a),M=!0),M||m.ud.qc(a,c,!1)!=4||(b.Vz(a),M=!0),M||(a=(g=new m.gd).Ib(a),c=g.Ib(c),b.Wo(g,d,v),b.Yh=b.j.Dp(),h.Jw(a,b.j,b.Yh),b.Gy(a,c),b.j.Ep(b.Yh),b.j.Ug()),h.fg(b.J,b.Xc)},h.ZA=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.RJ(),g=new m.l;var C=new m.l;a.A(g),c.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.yI(),M=!0),M||(a=(g=new m.gd).Ib(a),c=g.Ib(c),b.Wo(g,d,v),b.Gy(a,c),b.j.Ug()),h.fg(b.J,b.Xc)},h.qt=function(a,c,d,g){var v=new h;v.Yi(),v.bj(g),v.yJ();var b=new m.l;a.A(b),c=c.D();var C=!1;return m.ud.Rw(c,b,d)&&(v.Eu(a),C=!0),C||((d=m.hd.Yd(a,c,d))==1?(v.J[0]=0,v.J[2]=2,v.J[3]=-1,v.J[5]=1,v.J[6]=-1):d==2?(v.J[6]=-1,a.Ke()!=0?(v.J[0]=-1,v.J[3]=0,v.J[2]=2,v.J[5]=1):(v.J[0]=0,v.J[3]=-1,v.J[5]=-1,d=new m.l,a.A(d),v.J[2]=d.ca()==0&&d.R()==0?-1:1)):v.Eu(a)),this.fg(v.J,g)},h.tt=function(a,c,d,g,v){var b=new h;b.Yi(),b.bj(g),b.MJ();var C=new m.l;a.A(C),g=c.D();var M=!1;if(m.ud.Rw(g,C,d)&&(b.Vz(a),M=!0),!M){C=null;var O=M=!1;(b.ea[0]||b.ea[6])&&(m.ud.Yz(a,g,d)?(b.ea[0]&&(C=m.pi.gm(a,v),O=!m.ud.kt(C,g,d),M=!0,b.J[0]=O?-1:0),b.J[6]=-1):(b.J[0]=-1,b.J[6]=0)),b.ea[3]&&(C!=null&&C.B()?b.J[3]=-1:(M||(C==null&&(C=m.pi.gm(a,v)),O=!m.ud.kt(C,g,d),M=!0),b.J[3]=O?0:-1)),b.ea[5]&&(C!=null&&C.B()?b.J[5]=-1:M&&!O?b.J[5]=0:(C==null&&(C=m.pi.gm(a,v)),v=m.ud.Nw(C,c,d),b.J[5]=v?-1:0)),b.ea[2]&&(a.Qb()!=0?b.J[2]=1:((v=new m.de(a.description)).Fd(a,0,a.I()),a=m.ud.Nw(v,c,d),b.J[2]=a?-1:0))}return this.fg(b.J,b.Xc)},h.lt=function(a,c,d,g){var v=new h;v.Yi(),v.bj(g),v.RJ();var b=new m.l;a.A(b),c=c.D();var C=!1;if(m.ud.Rw(c,b,d)&&(v.yI(),C=!0),!C){b=!1,C=!0,d*=d;for(var M=0;M<a.I();M++){var O=a.Na(M);if(m.h.yc(O,c)<=d?b=!0:C=!1,b&&!C)break}b?(v.J[0]=0,v.J[2]=C?-1:0,v.J[6]=-1):(v.J[0]=-1,v.J[2]=0,v.J[6]=0)}return h.fg(v.J,g)},h.$U=function(a,c,d,g){a=a.D(),c=c.D();for(var v=[],b=0;9>b;b++)v[b]=-1;return m.h.yc(a,c)<=d*d?v[0]=0:(v[2]=0,v[6]=0),v[8]=2,h.fg(v,g)},h.fg=function(a,c){for(var d=0;9>d;d++)switch(c.charAt(d)){case"T":if(a[d]==-1)return!1;break;case"F":if(a[d]!=-1)return!1;break;case"0":if(a[d]!=0)return!1;break;case"1":if(a[d]!=1)return!1;break;case"2":if(a[d]!=2)return!1}return!0},h.uW=function(a,c,d){var g=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(a.B()&&c.B()){for(var v=0;9>v;v++)g[v]=-1;return this.fg(g,d)}return v=!1,a.B()&&(a=c,v=!0),g[0]=-1,g[1]=-1,g[3]=-1,g[4]=-1,g[6]=-1,g[7]=-1,g[8]=2,c=a.getType(),m.aa.Hc(c)?c==1736?a.Ke()!=0?(g[2]=2,g[5]=1):(g[5]=-1,c=new m.l,a.A(c),g[2]=c.ca()==0&&c.R()==0?0:1):(c=a.Qb()!=0,g[2]=c?1:0,g[5]=m.pi.aq(a)?0:-1):(g[2]=0,g[5]=-1),v&&this.vK(g),this.fg(g,d)},h.MR=function(a,c,d){return h.dQ(a)?3:h.UP(a)?4:h.cY(a,c,d)?8:h.CP(a,c,d)?16:h.eP(a)?1:h.EU(a,c,d)?32:0},h.dQ=function(a){return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="F"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="F"&&a.charAt(6)=="F"&&a.charAt(7)=="F"&&a.charAt(8)=="*"},h.UP=function(a){return a.charAt(0)=="F"&&a.charAt(1)=="F"&&a.charAt(2)=="*"&&a.charAt(3)=="F"&&a.charAt(4)=="F"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"},h.cY=function(a,c,d){return(c!=0||d!=0)&&((c!=2||d!=2)&&(a.charAt(0)=="F"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="T"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"||c==1&&d==1&&a.charAt(0)=="F"&&a.charAt(1)=="T"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*")||d!=0&&a.charAt(0)=="F"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="T"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*")},h.CP=function(a,c,d){return c>d?a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*":c==1&&d==1&&a.charAt(0)=="0"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"},h.eP=function(a){return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="F"&&a.charAt(7)=="F"&&a.charAt(8)=="*"},h.EU=function(a,c,d){if(c==d){if(c!=1)return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="T"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*";if(a.charAt(0)=="1"&&a.charAt(1)=="*"&&a.charAt(2)=="T"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*")return!0}return!1},h.Jw=function(a,c,d){a=c.La(a);for(var g=c.Re;g!=-1;g=c.Rf(g))if(c.xd(g)&a){var v=c.Me(g);if(v==-1)c.nn(g,d,0);else{var b=v,C=0;do c.dh(b)&a&&C++,b=c.jc(c.xa(b));while(b!=v);c.nn(g,d,C)}}},h.Zp=function(a){var c=""+a.charAt(0);return c+=a.charAt(3),c+=a.charAt(6),c+=a.charAt(1),c+=a.charAt(4),c+=a.charAt(7),c+=a.charAt(2),(c+=a.charAt(5))+a.charAt(8)},h.prototype.Yi=function(){for(var a=0;9>a;a++)this.J[a]=-2,this.Za[a]=-2},h.vK=function(a){var c=a[1],d=a[2],g=a[5];a[1]=a[3],a[2]=a[6],a[5]=a[7],a[3]=c,a[6]=d,a[7]=g},h.prototype.bj=function(a){for(this.Xc=a,a=0;9>a;a++)this.Xc.charAt(a)!="*"?(this.ea[a]=!0,this.le++):this.ea[a]=!1},h.prototype.UJ=function(){for(var a=0;9>a;a++)this.ea[a]&&this.J[a]==-2&&(this.J[a]=-1,this.ea[a]=!1)},h.prototype.pc=function(a){return this.J[a]!=-2&&(this.J[a]==-1?(this.ea[a]=!1,this.le--,!0):this.Xc.charAt(a)!="T"&&this.Xc.charAt(a)!="F"?!(this.J[a]<this.Za[a])&&(this.ea[a]=!1,this.le--,!0):(this.ea[a]=!1,this.le--,!0))},h.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.xN=function(a,c,d){var g=!0;return this.ea[0]&&(this.CS(a,c,d),g=g&&this.pc(0)),this.ea[1]&&(this.sG(a,c,1),g=g&&this.pc(1)),this.ea[2]&&(this.tG(a,c,d,2),g=g&&this.pc(2)),this.ea[3]&&(this.sG(a,d,3),g=g&&this.pc(3)),this.ea[4]&&(this.BN(a,c,d),g=g&&this.pc(4)),this.ea[5]&&(this.eE(a,d,5),g=g&&this.pc(5)),this.ea[6]&&(this.tG(a,d,c,6),g=g&&this.pc(6)),this.ea[7]&&(this.eE(a,c,7),g=g&&this.pc(7)),g},h.prototype.Cu=function(a,c){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(c,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},h.prototype.Fr=function(a,c,d,g,v){c==-1&&g==-1||((d!="T"&&d!="F"&&c!=-1||v!="T"&&v!="F"&&g!=-1)&&a.Ke()==0?(g!=-1&&(this.J[g]=-1),c!=-1&&(d=new m.l,a.A(d),this.J[c]=d.ca()==0&&d.R()==0?0:1)):(c!=-1&&(this.J[c]=2),g!=-1&&(this.J[g]=1)))},h.prototype.ly=function(a){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(a,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},h.prototype.ZD=function(a){this.ly(a),h.vK(this.J)},h.prototype.Du=function(a,c){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var d=this.Xc.charAt(6);d=d=="T"||d=="F"||c.Qb()!=0,this.J[6]=d?1:0}this.ea[7]&&(c=m.pi.aq(c),this.J[7]=c?0:-1),this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},h.prototype.$D=function(a){if(this.ea[0]){var c=this.Xc.charAt(0);c=c=="T"||c=="F"||a.Qb()!=0,this.J[0]=c?1:0}this.ea[1]&&(a=m.pi.aq(a),this.J[1]=a?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},h.prototype.Eu=function(a){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},h.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},h.prototype.PG=function(a,c){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var d=this.Xc.charAt(2);d=d=="T"||d=="F"||a.Qb()!=0,this.J[2]=d?1:0}this.ea[5]&&(a=m.pi.aq(a),this.J[5]=a?0:-1),this.ea[6]&&(d=(d=this.Xc.charAt(6))=="T"||d=="F"||c.Qb()!=0,this.J[6]=d?1:0),this.ea[7]&&(c=m.pi.aq(c),this.J[7]=c?0:-1)},h.prototype.Vz=function(a){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var c=this.Xc.charAt(2);c=c=="T"||c=="F"||a.Qb()!=0,this.J[2]=c?1:0}this.ea[5]&&(a=m.pi.aq(a),this.J[5]=a?0:-1),this.J[6]=0},h.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},h.prototype.yN=function(a,c,d){var g=!0;return this.ea[0]&&(this.DS(a,c),g=g&&this.pc(0)),this.ea[1]&&(this.zS(a,c,d,this.kh),g=g&&this.pc(1)),this.ea[2]&&(this.AS(a,c),g=g&&this.pc(2)),this.ea[3]&&(this.FN(a,c,d,this.kh),g=g&&this.pc(3)),this.ea[4]&&(this.CN(a,c,d,this.kh),g=g&&this.pc(4)),this.ea[5]&&(this.DN(a,c,d),g=g&&this.pc(5)),this.ea[6]&&(this.lQ(a,c),g=g&&this.pc(6)),this.ea[7]&&(this.kQ(a,c,d,this.kh),g=g&&this.pc(7)),g},h.prototype.mT=function(a,c,d){var g=!0;return this.ea[0]&&(this.GS(a,c,d,this.Yh,this.kh),g=g&&this.pc(0)),this.ea[1]&&(this.uG(a,c,d,this.Yh,this.kh,1),g=g&&this.pc(1)),this.ea[2]&&(this.vG(a,c,d,2),g=g&&this.pc(2)),this.ea[3]&&(this.uG(a,d,c,this.kh,this.Yh,3),g=g&&this.pc(3)),this.ea[4]&&(this.HN(a,c,d,this.Yh,this.kh),g=g&&this.pc(4)),this.ea[5]&&(this.fE(a,d,this.Yh,5),g=g&&this.pc(5)),this.ea[6]&&(this.vG(a,d,c,6),g=g&&this.pc(6)),this.ea[7]&&(this.fE(a,c,this.kh,7),g=g&&this.pc(7)),g},h.prototype.aE=function(a,c,d){var g=!0;return this.ea[0]&&(this.ES(a,c),g=g&&this.pc(0)),this.ea[2]&&(this.BS(a,c),g=g&&this.pc(2)),this.ea[3]&&(this.GN(a,c,d),g=g&&this.pc(3)),this.ea[5]&&(this.EN(a,c),g=g&&this.pc(5)),this.ea[6]&&(this.mQ(a,c),g=g&&this.pc(6)),g},h.prototype.QG=function(a,c,d){var g=!0;return this.ea[0]&&(this.HS(a,c,d,this.Yh),g=g&&this.pc(0)),this.ea[2]&&(this.FS(a,d),g=g&&this.pc(2)),this.ea[3]&&(this.JN(a,c,d,this.Yh),g=g&&this.pc(3)),this.ea[5]&&(this.IN(a,c,d,this.Yh),g=g&&this.pc(5)),this.ea[6]&&(this.nQ(a,c,d),g=g&&this.pc(6)),g},h.prototype.ZU=function(a,c,d){var g=!0;return this.ea[0]&&(this.IS(a,c,d),g=g&&this.pc(0)),this.ea[2]&&(this.wG(a,c,d,2),g=g&&this.pc(2)),this.ea[6]&&(this.wG(a,d,c,6),g=g&&this.pc(6)),g},h.prototype.CS=function(a,c,d){this.J[0]!=2&&(a=this.j.af(a))&c&&a&d&&(this.J[0]=2)},h.prototype.sG=function(a,c,d){if(this.J[d]!=1){var g=this.j.af(this.j.xa(a));this.j.af(a)&c&&g&c&&(this.J[d]=1)}},h.prototype.tG=function(a,c,d,g){this.J[g]!=2&&(a=this.j.af(a))&c&&!(a&d)&&(this.J[g]=2)},h.prototype.BN=function(a,c,d){if(this.J[4]!=1){var g=this.j.dh(a);g&c&&g&d?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.xd(this.j.uf(a)))&c&&a&d&&(this.J[4]=0)}},h.prototype.eE=function(a,c,d){if(this.J[d]!=1){var g=this.j.af(this.j.xa(a));!(this.j.af(a)&c)&&!(g&c)&&(this.J[d]=1)}},h.prototype.DS=function(a,c){if(this.J[0]!=1){var d=this.j.af(this.j.xa(a));this.j.af(a)&c&&d&c&&(this.J[0]=1)}},h.prototype.zS=function(a,c,d,g){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a),b=this.j.xd(v);!(b&c)&&this.j.af(a)&c&&(a=this.j.ng(v,g),b&d&&a%2!=0&&(this.J[1]=0))}},h.prototype.AS=function(a,c){this.J[2]!=2&&this.j.dh(a)&c&&(this.J[2]=2)},h.prototype.FN=function(a,c,d,g){if(this.J[3]!=1){var v=this.j.dh(a);v&c&&v&d?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(v=this.j.uf(a),(a=this.j.xd(v))&c&&(c=this.j.ng(v,g),a&d&&c%2==0&&(this.J[3]=0)))}},h.prototype.CN=function(a,c,d,g){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a);(a=this.j.xd(v))&c&&(c=this.j.ng(v,g),a&d&&c%2!=0&&(this.J[4]=0))}},h.prototype.DN=function(a,c,d){this.J[5]!=1&&(a=this.j.dh(a))&c&&!(a&d)&&(this.J[5]=1)},h.prototype.lQ=function(a,c){if(this.J[6]!=1){var d=this.j.af(this.j.xa(a));!(this.j.af(a)&c)&&!(d&c)&&(this.J[6]=1)}},h.prototype.kQ=function(a,c,d,g){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a),b=this.j.xd(v);!(b&c)&&!(this.j.af(a)&c)&&(a=this.j.ng(v,g),b&d&&a%2!=0&&(this.J[7]=0))}},h.prototype.GS=function(a,c,d,g,v){if(this.J[0]!=1){var b=this.j.dh(a);b&c&&b&d?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.uf(a),(b=this.j.xd(a))&c&&b&d&&(c=this.j.ng(a,g),v=this.j.ng(a,v),c%2==0&&v%2==0&&(this.J[0]=0)))}},h.prototype.uG=function(a,c,d,g,v,b){if(this.J[b]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){a=this.j.uf(a);var C=this.j.xd(a);C&c&&C&d&&(c=this.j.ng(a,g),v=this.j.ng(a,v),c%2==0&&v%2!=0&&(this.J[b]=0))}},h.prototype.vG=function(a,c,d,g){this.J[g]!=1&&(a=this.j.dh(a))&c&&!(a&d)&&(this.J[g]=1)},h.prototype.HN=function(a,c,d,g,v){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){a=this.j.uf(a);var b=this.j.xd(a);b&c&&b&d&&(c=this.j.ng(a,g),v=this.j.ng(a,v),c%2!=0&&v%2!=0&&(this.J[4]=0))}},h.prototype.fE=function(a,c,d,g){this.J[g]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.uf(a),!(this.j.xd(a)&c)&&this.j.ng(a,d)%2!=0&&(this.J[g]=0))},h.prototype.ES=function(a,c){this.J[0]!=0&&!(this.j.xd(a)&c)&&this.j.hk(this.j.cz(a))&c&&(this.J[0]=0)},h.prototype.BS=function(a,c){this.J[2]!=2&&this.j.xd(a)&c&&(this.J[2]=2)},h.prototype.GN=function(a,c,d){this.J[3]!=0&&(a=this.j.xd(a))&c&&a&d&&(this.J[3]=0)},h.prototype.EN=function(a,c){this.J[5]!=1&&this.j.xd(a)&c&&(this.J[5]=1)},h.prototype.mQ=function(a,c){this.J[6]!=0&&!(this.j.xd(a)&c)&&!(this.j.hk(this.j.cz(a))&c)&&(this.J[6]=0)},h.prototype.HS=function(a,c,d,g){if(this.J[0]!=0){var v=this.j.xd(a);v&c&&v&d&&this.j.ng(a,g)%2==0&&(this.J[0]=0)}},h.prototype.FS=function(a,c){this.J[2]!=1&&(this.j.Me(a)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(a)&c)&&(this.J[2]=0))},h.prototype.JN=function(a,c,d,g){if(this.J[3]!=0){var v=this.j.xd(a);v&c&&v&d&&this.j.ng(a,g)%2!=0&&(this.J[3]=0)}},h.prototype.IN=function(a,c,d,g){if(this.J[5]!=0){var v=this.j.xd(a);v&c&&!(v&d)&&this.j.ng(a,g)%2!=0&&(this.J[5]=0)}},h.prototype.nQ=function(a,c,d){this.J[6]!=0&&!((a=this.j.xd(a))&c)&&a&d&&(this.J[6]=0)},h.prototype.IS=function(a,c,d){this.J[0]!=0&&(a=this.j.xd(a))&c&&a&d&&(this.J[0]=0)},h.prototype.wG=function(a,c,d,g){this.J[g]!=0&&(a=this.j.xd(a))&c&&!(a&d)&&(this.J[g]=0)},h.prototype.Bp=function(a,c){var d=!1;a=this.j.La(a),c=this.j.La(c),this.Ui=this.j.$g();for(var g=this.j.Re;g!=-1;g=this.j.Rf(g)){var v=this.j.Me(g);if(v==-1){if(this.Sm!=-1)switch(this.Sm){case 3:d=this.aE(g,a,c);break;case 4:d=this.QG(g,a,c);break;default:throw m.i.fa("internal error")}}else{var b=v;do{var C=b;if(this.j.Ab(C,this.Ui)!=1)do{switch(this.vw){case 0:d=this.xN(C,a,c);break;case 1:d=this.yN(C,a,c);break;case 2:d=this.mT(C,a,c);break;default:throw m.i.fa("internal error")}if(d)break;this.j.Kb(C,this.Ui,1),C=this.j.jc(C)}while(C!=b&&!d);if(d)break;b=this.j.jc(this.j.xa(C))}while(b!=v);if(d)break}}d||this.UJ(),this.j.Jg(this.Ui)},h.prototype.Gy=function(a,c){var d=!1;a=this.j.La(a),c=this.j.La(c);for(var g=this.j.Re;g!=-1;g=this.j.Rf(g)){switch(this.Sm){case 3:d=this.aE(g,a,c);break;case 4:d=this.QG(g,a,c);break;case 5:d=this.ZU(g,a,c);break;default:throw m.i.Qa()}if(d)break}d||this.UJ()},h.prototype.er=function(a,c){this.j.dr(a,c)},h.prototype.Wo=function(a,c,d){this.YP(a,c,d),this.er(a,d)},h.prototype.YP=function(a,c,d){for(m.Tk.V(a,c,d,!1),a.Gp(0,!0,!0),c=a.ld;c!=-1;c=a.ue(c))a.ic(c)==1736&&m.rn.V(a,c,-1,!1,d)},h.WE=function(a,c){var d=a.getType();return m.aa.yd(d)?((c=new m.Ta(a.description)).oc(a,!0),c):d==197?(d=new m.l,a.A(d),d.ca()<=c&&d.R()<=c?(c=new m.Sa(a.description),a.sf(c),c):d.ca()<=c||d.R()<=c?(c=new m.Ta(a.description),d=new m.Sa,a.Hf(0,d),c.nf(d),a.Hf(2,d),c.lineTo(d),c):((c=new m.Da(a.description)).ad(a,!1),c)):a},h}(),m.am=j}(ye||(ye={})),function(m){var j=function(){function h(a){this.Em=new m.ia(0),this.dw=new m.ia(0),this.wt=new m.h,this.xt=new m.h,this.g=a,this.Hs=-1}return h.prototype.bc=function(a){return this.g.bc(this.zz(a))},h.prototype.Bv=function(a){var c=this.iz(a);if(a=this.HF(a),this.g.Ma(c)==a){var d=c;c=a,a=d}return this.g.Gc(c,this.wt),this.g.Gc(a,this.xt),this.wt.y<this.xt.y},h.prototype.zz=function(a){var c=this.iz(a);return a=this.HF(a),this.g.U(c)==a?c:a},h.prototype.iz=function(a){return this.Em.get(a)},h.prototype.HF=function(a){return this.dw.get(a)},h.prototype.rF=function(a){this.Em.set(a,this.Hs),this.Hs=a},h.prototype.nI=function(a){if(this.Hs!=-1){var c=this.Hs;return this.Hs=this.Em.get(c),this.Em.set(c,a),this.dw.set(c,this.g.U(a)),c}return this.Em==null&&(this.Em=new m.ia(0),this.dw=new m.ia(0)),c=this.Em.size,this.Em.add(a),this.dw.add(this.g.U(a)),c},h.prototype.rz=function(a){return this.g.bd(this.iz(a))},h}();m.yY=j;var T=function(){function h(a){this.Be=a,this.ie=new m.yb,this.Nm=new m.yb,this.CH=0,this.Ao=null,this.yA=-1}return h.prototype.compare=function(a,c,d){d=a.ja(d);var g=this.Be.hb;if(this.yA==c)var v=this.CH;else this.Ao=g.bc(c),this.Ao==null?((a=g.g).ed(g.zz(c),this.ie),this.Ao=this.ie,v=this.ie.Pe(this.Be.yh,0)):v=this.Ao.Pe(this.Be.yh,0),this.CH=v,this.yA=c;if((a=g.bc(d))==null){(a=g.g).ed(g.zz(d),this.Nm),a=this.Nm;var b=this.Nm.Pe(this.Be.yh,0)}else b=a.Pe(this.Be.yh,0);return v==b&&(c=g.Bv(c),d=g.Bv(d),(c=.5*((d=Math.min(c?this.Ao.la:this.Ao.na,d?a.la:a.na))+this.Be.yh))==this.Be.yh&&(c=d),v=this.Ao.Pe(c,0),b=a.Pe(c,0)),v<b?-1:v>b?1:0},h.prototype.reset=function(){this.yA=-1},h}(),p=function(){function h(){this.Wm=this.Gl=null,this.fb=new m.Yj,this.fb.RP(),this.$d=new T(this),this.fb.Vo(this.$d)}return h.prototype.HQ=function(){var a=!1;if(this.fw&&(a=this.IQ()),this.g.da(this.X)==1){var c=this.g.Ob(this.X);return a=this.g.wz(c),this.g.PB(c,!0),0>a&&(a=this.g.Xa(c),this.g.pJ(a),this.g.Wg(c,this.g.Ma(a)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))this.g.gr(c,this.El,0),this.g.gr(c,this.wo,-1);c=new m.ia(0),this.yh=NaN;var d=new m.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var g=this.Gl.rc(this.Gl.je);g!=-1;g=this.Gl.lb(g)){var v=this.Gl.getData(g);if(this.g.Gc(v,d),d.y!=this.yh&&c.size!=0&&(a=this.ut(c)||a,this.$d.reset(),c.clear(!1)),c.add(v),this.yh=d.y,this.et==0)break}for(0<this.et&&(a=this.ut(c)||a,c.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),c=this.g.Ob(this.X);c!=-1;)if(this.g.sj(c,this.El)==3){for(this.g.PB(c,!0),d=c,c=this.g.sj(c,this.wo);c!=-1;)g=this.g.sj(c,this.wo),this.g.ZT(this.X,this.g.Rb(d),c),d=c,c=g;c=this.g.Rb(d)}else this.g.PB(c,!1),c=this.g.Rb(c);return this.g.CB(this.El),this.g.CB(this.wo),a},h.prototype.ut=function(a){return this.$V(a)},h.prototype.$V=function(a){var c=!1;this.hb==null&&(this.hb=new j(this.g)),this.Wm==null?(this.Wm=new m.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(a);for(var d=0,g=a.size;d<g;d++){var v=a.get(d);v!=-1&&this.oG(v,-1)}for(d=0;d<this.Wm.size&&0<this.et;d++)if(a=this.Wm.get(d),v=this.hb.rz(this.fb.ja(a)),g=-1,this.g.sj(v,this.El)==0){v=this.fb.we(a);for(var b,C=a;v!=-1;){var M=this.fb.ja(v),O=this.hb.rz(M),L=this.g.sj(O,this.El);if(L!=0){g=O;break}C=v,v=this.fb.we(v)}v==-1?(b=!0,v=C):(M=this.fb.ja(v),b=this.hb.Bv(M),v=this.fb.lb(v),b=!b);do{if(M=this.fb.ja(v),O=this.hb.rz(M),(L=this.g.sj(O,this.El))==0&&(b!=this.hb.Bv(M)&&(c=this.g.Xa(O),this.g.pJ(c),this.g.Wg(O,this.g.Ma(c)),c=!0),this.g.gr(O,this.El,b?3:2),b||(C=this.g.sj(g,this.wo),this.g.gr(g,this.wo,O),this.g.gr(O,this.wo,C)),this.et--,this.et==0))return c;g=O,C=v,v=this.fb.lb(v),b=!b}while(C!=a)}return c},h.prototype.ZV=function(a){for(var c=0,d=a.size;c<d;c++){var g=a.get(c),v=this.g.Pa(g,this.ro),b=this.g.Pa(g,this.Rs);if(v!=-1){var C=this.fb.ja(v);this.hb.rF(C),this.g.Ra(g,this.ro,-1)}b!=-1&&(C=this.fb.ja(b),this.hb.rF(C),this.g.Ra(g,this.Rs,-1)),C=-1,v!=-1&&b!=-1?(this.fb.vd(v,-1),this.fb.vd(b,-1),a.set(c,-1)):C=v!=-1?v:b,C!=-1&&(this.oG(g,C)||this.fb.vd(C,-1),a.set(c,-1))}},h.prototype.oG=function(a,c){var d=new m.h,g=new m.h;this.g.Gc(a,d);var v=this.g.U(a);this.g.Gc(v,g);var b=!1;if(d.y<g.y){b=!0;var C=this.hb.nI(a);if(c==-1)var M=this.fb.addElement(C,-1);else M=c,this.fb.Sj(M,C);(C=this.g.Pa(v,this.ro))==-1?this.g.Ra(v,this.ro,M):this.g.Ra(v,this.Rs,M),v=this.g.bd(a),this.g.sj(v,this.El)==0&&this.Wm.add(M)}return v=this.g.Ma(a),this.g.Gc(v,g),d.y<g.y&&(b=!0,C=this.hb.nI(v),c==-1?M=this.fb.addElement(C,-1):(M=c,this.fb.Sj(M,C)),(C=this.g.Pa(v,this.ro))==-1?this.g.Ra(v,this.ro,M):this.g.Ra(v,this.Rs,M),v=this.g.bd(a),this.g.sj(v,this.El)==0&&this.Wm.add(M)),b},h.V=function(a,c,d,g){var v=new h;return v.g=a,v.X=c,v.Gl=d,v.fw=g,v.HQ()},h.prototype.IQ=function(){var a=new m.ia(0),c=new m.ia(0),d=-1,g=-1,v=new m.h;v.Rc();for(var b=-1,C=-1,M=-1,O=new m.h,L=this.Gl.rc(this.Gl.je);L!=-1;L=this.Gl.lb(L)){var q=this.Gl.getData(L);this.g.Gc(q,O);var U=this.g.bd(q);v.qb(O)&&C==U?(g==-1&&(d=this.g.Ky(),g=this.g.Gd()),M==-1&&(M=c.size,this.g.Ra(b,g,M),c.add(1),this.g.sj(U,d)==-1&&(this.g.gr(U,d,b),a.add(U))),this.g.Ra(q,g,M),c.bX(c.Fc()+1)):(M=-1,v.L(O)),b=q,C=U}if(a.size==0)return!1;for(v=new m.ia(0),b=new m.ia(0),C=0,M=a.size;C<M;C++){U=a.get(C);var ee=this.g.sj(U,d);for(q=this.g.Pa(ee,g),v.clear(!1),b.clear(!1),v.add(ee),b.add(q),q=this.g.U(ee);q!=ee;q=this.g.U(q)){var Q=q;if((O=this.g.Pa(Q,g))!=-1)if(b.size==0)b.add(O),v.add(Q);else if(b.Fc()==O){L=v.Fc();var ge=this.g.U(L);ee=this.g.U(Q),this.g.Bc(L,ee),this.g.Cc(ee,L),this.g.Bc(Q,ge),this.g.Cc(ge,Q),Q=[!1],ge=this.g.nG(this.X,ge,this.g.Xa(U),Q),this.g.Ra(q,g,-1),Q[0]&&this.g.Jf(U,ee),q=this.g.Ja(U),q-=ee=this.g.Ja(ge),this.g.Vj(U,q),c.set(O,c.get(O)-1),c.get(O)==1&&(c.set(O,0),b.If(),v.If()),q=ee=L}else v.add(q),b.add(O)}}return this.g.CB(d),this.g.Td(g),!0},h}();m.WL=p}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.ig=function(){this.PA=this.sb=null},T.prototype.get=function(){return this.PA},T.prototype.set=function(p){if(this.PA=p,p!=null)throw p.getType()==322&&(this.sb=p),m.i.Qa()},T.prototype.create=function(p){if(p!=322)throw m.i.fa("Not Implemented");this.Or()},T.prototype.Or=function(){this.sb==null&&(this.sb=new m.yb),this.PA=this.sb},T}();m.ig=j}(ye||(ye={})),function(m){(m=m.XL||(m.XL={}))[m.enumLineSeg=1]="enumLineSeg",m[m.enumBezierSeg=2]="enumBezierSeg",m[m.enumArcSeg=4]="enumArcSeg",m[m.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",m[m.enumSegmentMask=7]="enumSegmentMask",m[m.enumDensified=8]="enumDensified"}(ye||(ye={})),function(m){var j=function(p){this.$i=p,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},T=function(){function p(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new m.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return p.prototype.wB=function(h){if(h!=null){for(var a=0,c=h.length;a<c;a++)this.rW(h[a]);h.length=0}},p.prototype.rW=function(h){h.$i=null,this.Iq.push(h)},p.prototype.Ow=function(h){if(this.Iq.length===0)var a=new j(h);else(a=this.Iq[this.Iq.length-1]).$i=h,--this.Iq.length;return a},p.prototype.SR=function(h,a){return h==0?this.$s[a]:this.yw[a]},p.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new m.ig);var h=this.MA[this.Cw];return this.Cw++,h},p.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},p.prototype.Oo=function(h){this.mo.push(this.Ow(h))},p.prototype.ol=function(h){return h==0?this.$s.length:this.yw.length},p.prototype.Vp=function(h,a){return this.SR(h,a).$i},p.prototype.Ea=function(h,a){if(this.mo.length!=2)throw m.i.Qa();this.qa=h;var c=m.lc.ox(.01*h),d=!1,g=this.mo[0],v=this.mo[1];if(a||5&g.$i.zr(v.$i,h,!0)){if(g.$i.getType()==322){var b=g.$i;if(v.$i.getType()==322){a=v.$i;var C=m.yb.Zx(b,a,null,this.Fq,this.Bk,h);if(C==0)throw m.yb.Zx(b,a,null,this.Fq,this.Bk,h),m.i.Qa();h=Array(9),m.O.$u(h,null);for(var M=0;M<C;M++){var O=this.Fq[M],L=this.Bk[M],q=g.sB,U=1;O==0?(q=g.tB,U=g.rC):O==1&&(q=g.rB,U=g.qC);var ee=v.sB,Q=1;L==0?(ee=v.tB,Q=v.rC):L==1&&(ee=v.rB,Q=v.qC);var ge=new m.h;q==ee?(q=new m.h,b.hc(O,q),O=new m.h,a.hc(L,O),Q/=L=U+Q,m.lc.OG(q,O,Q,ge),m.h.yc(ge,q)+m.h.yc(ge,O)>c&&(d=!0)):q>ee?(b.hc(O,ge),O=new m.h,a.hc(L,O),m.h.yc(ge,O)>c&&(d=!0)):(a.hc(L,ge),q=new m.h,b.hc(O,q),m.h.yc(ge,q)>c&&(d=!0)),h[M]=ge}for(g=0,v=-1,M=0;M<=C;M++)(Q=M<C?this.Fq[M]:1)!=g&&(c=this.aB(),b.ah(g,Q,c),v!=-1&&c.get().Dc(h[v]),M!=C&&c.get().Qc(h[M]),g=Q,this.$s.push(this.Ow(c.get()))),v=M;for(b=[0,0,0,0,0,0,0,0,0],M=0;M<C;M++)b[M]=M;for(1<C&&this.Bk[0]>this.Bk[1]&&(Q=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=Q,M=b[0],b[0]=b[1],b[1]=M),g=0,v=-1,M=0;M<=C;M++)(Q=M<C?this.Bk[M]:1)!=g&&(c=this.aB(),a.ah(g,Q,c),v!=-1&&(g=b[v],c.get().Dc(h[g])),M!=C&&(g=b[M],c.get().Qc(h[g])),g=Q,this.yw.push(this.Ow(c.get()))),v=M;return d}}throw m.i.Qa()}return!1},p.prototype.Kz=function(h,a,c){if(a.copyTo(this.Bf),this.mo.length!=1)throw m.i.Qa();this.qa=h;var d=this.mo[0];if(c||d.$i.ru(a.D(),h,!0)){if(d.$i.getType()!=322)throw m.i.Qa();var g=(h=d.$i).fe(a.D(),!1);this.Fq[0]=g;var v=d.sB;for(c=1,g==0?(v=d.tB,c=d.rC):g==1&&(v=d.rB,c=d.qC),d=new m.h,v==0?(v=new m.h,h.hc(g,v),a=a.D(),m.lc.OG(v,a,1/(c+1),d)):0<v?(d=new m.h,h.hc(g,d)):d=a.D(),c=0,g=-1,v=0;1>=v;v++){if((a=1>v?this.Fq[v]:1)!=c){var b=this.aB();h.ah(c,a,b),g!=-1&&b.get().Dc(d),v!=1&&b.get().Qc(d),c=a,this.$s.push(this.Ow(b.get()))}g=v}this.Bf.Cb(d)}},p}();m.TC=T}(ye||(ye={})),function(m){var j=function(){function T(p){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=p,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new m.h}return T.prototype.BW=function(p){if(this.ib!=p.ib)throw m.i.Hb();this.zf=p.zf,this.Jd=p.Jd,this.gb=p.gb,this.Cl=p.Cl,this.ag=p.ag,this.zm=p.zm,this.rk=null},T.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw m.i.ce();this.Jd++}return this.rk},T.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw m.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},T.prototype.DW=function(){this.zf=-1,this.Jd=0},T.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},T.prototype.Vb=function(p,h){if(h===void 0&&(h=-1),0<=this.gb&&this.gb<this.ib.da()){var a=this.IM();if(p>=a&&p<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=p-a)}h=0<=h&&h<this.ib.da()&&p>=this.ib.Ba(h)&&p<this.ib.Vc(h)?h:this.ib.sz(p),this.Cl=h+1,this.gb=h,this.zf=-1,this.Jd=p-this.ib.Ba(h),this.ag=this.Wx(h),this.ib.Ba(this.gb),this.ib.dc(this.gb)},T.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},T.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},T.prototype.Wx=function(p){if(this.ib.Ac())return 0;var h=1;return this.ib.dc(p)&&(h=0),this.ib.Ja(p)-h},T.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},T.prototype.JB=function(){this.zm=!0},T.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},T.prototype.IM=function(){return this.ib.Ba(this.gb)},T.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},T.prototype.vm=function(){return this.zf==0},T.prototype.Qn=function(){return this.zf==this.ag-1},T.prototype.Ha=function(){return this.Jd<this.ag},T.prototype.Ez=function(){return 0<this.Jd},T.prototype.Of=function(){var p=new T(this.ib);return p.zf=this.zf,p.Jd=this.Jd,p.ag=this.ag,p.gb=this.gb,p.Cl=this.Cl,p.ib=this.ib,p.zm=this.zm,p},T.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw m.i.ce();this.zf=this.Jd;var p=this.wb();this.ib.mc();var h=this.ib.Ve,a=1;switch(h!=null&&(a=7&h.read(p)),h=this.ib.description,a){case 1:this.sb==null&&(this.sb=new m.yb),this.rk=this.sb;break;case 2:throw m.i.fa("internal error");default:throw m.i.Qa()}this.rk.Nf(h),a=this.ik(),this.ib.Gc(p,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(a,this.Ds),this.rk.Qc(this.Ds);for(var c=1,d=h.Aa;c<d;c++)for(var g=h.kd(c),v=m.ra.Va(g),b=0;b<v;b++){var C=this.ib.Uc(g,p,b);this.rk.YB(g,b,C),C=this.ib.Uc(g,a,b),this.rk.OB(g,b,C)}},T.prototype.$S=function(){return this.gb==this.ib.da()-1},T.prototype.Pn=function(){var p=this.ib.VR();return p!=null&&(7&p.read(this.zf))!=1},T}();m.YL=j}(ye||(ye={})),function(m){var j=function(){function T(p){p instanceof m.aa?(this.xH=p,this.ya=-1,this.Ei=1):(this.vT=p.slice(0),this.ya=-1,this.Ei=p.length)}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},T.prototype.qe=function(){},T}();m.Zc=j}(ye||(ye={})),function(m){var j=function(){this.next=null},T=function(){function p(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return p.prototype.AX=function(h,a,c){this.oi=h,this.pl=a,this.Jh=this.Wl=null,this.Tq=0,this.vy=c,this.gn==null&&(this.gn=m.O.lg(384,0)),this.nK()},p.prototype.R=function(){return this.oi},p.prototype.ca=function(){return this.pl},p.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},p.prototype.nK=function(){if(0<this.Tq){for(var h=0;h<this.pl;h++){for(var a=this.Wl[h];a!=null;){var c=a;a=a.next,c.next=null}this.Wl[h]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},p.prototype.iJ=function(h){for(this.kF=h==p.Cx,h=this.Lw;h<=this.Kw;h++)this.sN(),this.lN(h),this.ZP();this.nK()},p.prototype.jy=function(h,a,c,d){if(a!=d){var g=1;if(a>d&&(g=h,h=c,c=g,g=a,a=d,d=g,g=-1),!(0>d||a>=this.pl)){0>h&&0>c?c=h=-1:h>=this.oi&&c>=this.oi&&(c=h=this.oi);var v=(c-h)/(d-a);d>this.pl&&(c=v*((d=this.pl)-a)+h),0>a&&(h=v*(0-a)+h,a=0);var b=Math.max(this.oi+1,8388607);-8388607>h?(a=(0-h)/v+a,h=0):h>b&&(a=(this.oi-h)/v+a,h=this.oi),-8388607>c?d=(0-h)/v+a:c>b&&(d=(this.oi-h)/v+a),(a=m.O.truncate(a))!=(d=m.O.truncate(d))&&((c=new j).x=m.O.truncate(4294967296*h),c.y=a,c.H=d,c.WP=m.O.truncate(4294967296*v),c.dir=g,this.Wl==null&&(this.Wl=m.O.lg(this.pl,null)),c.next=this.Wl[c.y],this.Wl[c.y]=c,c.y<this.Lw&&(this.Lw=c.y),c.H>this.Kw&&(this.Kw=c.H),this.Tq++)}}},p.prototype.sN=function(){if(this.Jh!=null){for(var h=!1,a=null,c=this.Jh;c!=null;)if(c.y++,c.y==c.H){var d=c;c=c.next,a!=null?a.next=c:this.Jh=c,d.next=null}else c.x+=c.WP,a!=null&&a.x>c.x&&(h=!0),a=c,c=c.next;h&&(this.Jh=this.fK(this.Jh))}},p.prototype.lN=function(h){if(!(h>=this.pl)){var a=this.Wl[h];if(a!=null){this.Wl[h]=null,a=this.fK(a),this.Tq-=this.gK,h=this.Jh;for(var c=!0,d=a,g=null;h!=null&&d!=null;)h.x>d.x?(c&&(this.Jh=d),c=d.next,d.next=h,g!=null&&(g.next=d),g=d,d=c):(c=h.next,h.next=d,g!=null&&(g.next=h),g=h,h=c),c=!1;this.Jh==null&&(this.Jh=a)}}},p.eK=function(h,a){return 0>h?0:h>a?a:h},p.prototype.ZP=function(){if(this.Jh!=null){for(var h=0,a=this.Jh,c=m.O.truncate(m.O.XG(a.x)),d=a.next;d!=null;d=d.next)if(h=this.kF?1^h:h+d.dir,d.x>a.x){var g=m.O.truncate(m.O.XG(d.x));h!=0&&(a=p.eK(c,this.oi),(c=p.eK(g,this.oi))>a&&a<this.oi&&(this.gn[this.Ol++]=a,this.gn[this.Ol++]=c,this.gn[this.Ol++]=d.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),a=d,c=g}}},p.prototype.fK=function(h){for(var a=0,c=h;c!=null;c=c.next)a++;if(this.gK=a,a==1)return h;this.Kf==null?this.Kf=m.O.lg(Math.max(a,16),null):this.Kf.length<a&&(this.Kf=m.O.lg(Math.max(a,2*this.Kf.length),null));var d=0;for(c=h;c!=null;c=c.next)this.Kf[d++]=c;for(a==2?this.Kf[0].x>this.Kf[1].x&&(h=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=h):p.AN(this.Kf,a,function(g,v){return g==v?0:g.x<v.x?-1:g.x>v.x?1:0}),h=this.Kf[0],this.Kf[0]=null,c=h,d=1;d<a;d++)c.next=this.Kf[d],c=this.Kf[d],this.Kf[d]=null;return c.next=null,h},p.AN=function(h,a,c){if(a==h.length)h.sort(c);else{var d=h.slice(0,0),g=h.slice(a);a=h.slice(0,a).sort(c),h.length=0,h.push.apply(h,d.concat(a).concat(g))}},p.Cx=0,p}();m.Px=T}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.ui=function(p,h){var a=this.g.Pa(p,this.Pq);if(this.Dl==a&&(this.Dl=this.oe.lb(this.Dl)),this.ho==a&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,a),this.bk(p),h&&(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p){var c=this.g.U(p);if(c!=p){if((a=this.g.bd(c))==h)return void this.g.Jf(h,c);if((c=this.g.Ma(p))!=p&&(a=this.g.bd(c))==h)return void this.g.Jf(h,c)}this.g.Jf(h,-1),this.g.Wg(h,-1)}},T.prototype.pD=function(){for(var p=!1,h=new m.h;;){this.Wh==null?(this.Wh=new m.ia(0),this.zs=new m.ia(0),this.xe=new m.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var a=this.ho,c=0,d=!0;a!=this.Dl;){var g=this.oe.getData(a),v=new m.h;this.g.Gc(g,v),d&&(this.g.Gc(g,h),d=!1),v=this.g.Ma(g);var b=this.g.U(g);this.g.Pa(v,this.zg)!=-559038737&&(this.Wh.add(v),this.g.Ra(v,this.zg,-559038737),this.zs.add(g),this.xe.add(c++)),this.g.Pa(b,this.zg)!=-559038737&&(this.Wh.add(b),this.g.Ra(b,this.zg,-559038737),this.zs.add(g),this.xe.add(c++)),a=this.oe.lb(a)}if(2>this.Wh.size)break;var C=this;for(this.xe.Vd(0,this.xe.size,function(M,O){return C.pM(M,O)}),a=0,c=this.xe.size;a<c;a++)d=this.xe.get(a),d=this.Wh.get(d),this.g.Ra(d,this.zg,a),v=new m.h,this.g.Gc(d,v);for(v=this.TM(h),a=0,c=this.xe.size;a<c;a++)(d=this.xe.get(a))!=-1&&(d=this.Wh.get(d),this.g.Ra(d,this.zg,-1));if(!v)break;p=!0}return p},T.prototype.TM=function(p){for(var h=!1,a=!0;a;){a=!1;var c=0;this.xe.get(c)==-1&&(c=this.cm(c));for(var d=this.cm(c),g=0,v=this.xe.size;g<v&&c!=-1&&d!=-1&&c!=d;g++){var b=this.xe.get(c);d=this.xe.get(d),b=this.Wh.get(b),d=this.Wh.get(d);var C=this.g.U(b);this.g.Dv(C,p)||(C=this.g.Ma(b));var M=this.g.U(d);this.g.Dv(M,p)||(M=this.g.Ma(d));var O=this.pu(C,b),L=this.pu(M,d),q=O?this.g.Ma(C):this.g.U(C),U=L?this.g.Ma(M):this.g.U(M),ee=!1;(this.sp(C)||this.sp(M)||this.sp(b)||this.sp(d)||this.sp(q)||this.sp(U))&&(ee=!0),!ee&&this.g.fq(b,d)&&(ee=!0,this.tD(O,L,C,b,M,d)),!ee&&this.g.fq(q,U)&&(ee=!0,this.tD(!O,!L,C,q,M,U)),ee&&(h=!0),a=a||ee,c=this.cm(c),d=this.cm(c)}}if(!h)for(c=0,this.xe.get(c)==-1&&(c=this.cm(c)),d=this.cm(c),g=0,v=this.xe.size;g<v&&c!=-1&&d!=-1&&c!=d;g++)b=this.xe.get(c),d=this.xe.get(d),b=this.Wh.get(b),d=this.Wh.get(d),C=this.g.U(b),this.g.Dv(C,p)||(C=this.g.Ma(b)),M=this.g.U(d),this.g.Dv(M,p)||(M=this.g.Ma(d)),O=this.pu(C,b),L=this.pu(M,d),q=O?this.g.Ma(C):this.g.U(C),U=L?this.g.Ma(M):this.g.U(M),this.DM(O,L,b,C,q,d,M,U)&&(h=!0),c=this.cm(c),d=this.cm(c);return h},T.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new m.Fg().MU(this.fw,this.g,this.X,this.nd);var p=!1,h=!0;this.zg=this.Pq=-1;var a=this.g.I(this.X),c=new m.ia(0);c.Jb(a);for(var d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++)c.add(g),g=this.g.U(g);var C=this.g.td.o,M=this.g.td.stride;this.g.vb.mc();var O=this.g.vb.za[0].o;for(c.Vd(0,a,function(q,U){var ee=C[M*q],Q=C[M*U],ge=O[2*ee];ee=O[2*ee+1];var ve=O[2*Q];return(ge=ee<(Q=O[2*Q+1])?-1:ee>Q?1:ge<ve?-1:ge>ve?1:0)==0&&(ge=(q=C[M*q+3])<(U=C[M*U+3])?-1:q==U?0:1),ge}),this.Pq=this.g.Gd(),this.oe=new m.jp,this.RA=this.oe.Ph(0),this.oe.fn(a),d=0;d<a;d++)g=c.get(d),v=this.oe.addElement(this.RA,g),this.g.Ra(g,this.Pq,v);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(p=!0);h;){h=!1,a=0,c=!1;do{c=!1,this.ho=-1,b=0,d=new m.h,v=new m.h;for(var L=this.oe.rc(this.RA);L!=-1;)g=this.oe.getData(L),this.ho!=-1?(this.g.Gc(g,v),d.qb(v)?b++:(d.L(v),this.Dl=L,0<b&&(g=this.pD())&&(c=!0,this.Dl!=-1&&(g=this.oe.getData(this.Dl),this.g.Gc(g,d))),this.ho=L=this.Dl,b=0)):(this.ho=L,this.g.Gc(this.oe.getData(L),d),b=0),L!=-1&&(L=this.oe.lb(L));if(this.Dl=-1,0<b&&(g=this.pD())&&(c=!0),10<a++)throw m.i.Qa();c&&this.GM(),this.cD()&&(c=!0),h=h||c&&!1,p=p||c}while(c)}return this.g.Td(this.Pq),this.g.Td(this.zg),m.WL.V(this.g,this.X,this.oe,this.fw)||p},T.prototype.pu=function(p,h){return this.g.U(h)!=p},T.prototype.DM=function(p,h,a,c,d,g,v,b){if(c==v)return this.bk(a),this.bk(g),!1;var C=this.g.Pa(a,this.zg),M=this.g.Pa(d,this.zg),O=this.g.Pa(g,this.zg),L=this.g.Pa(b,this.zg),q=[0,0,0,0];for((a=[0,0,0,0,0,0,0,0])[0]=0,q[0]=C,a[1]=0,q[1]=M,a[2]=1,q[2]=O,a[3]=1,q[3]=L,C=1;4>C;C++){for(M=q[C],O=a[C],L=C-1;0<=L&&q[L]>M;)q[L+1]=q[L],a[L+1]=a[L],L--;q[L+1]=M,a[L+1]=O}return q=0,a[0]!=0&&(q|=1),a[1]!=0&&(q|=2),a[2]!=0&&(q|=4),a[3]!=0&&(q|=8),(q==5||q==10)&&(p==h?p?(this.g.Bc(b,c),this.g.Cc(c,b),this.g.Bc(d,v),this.g.Cc(v,d)):(this.g.Cc(b,c),this.g.Bc(c,b),this.g.Cc(d,v),this.g.Bc(v,d)):p?(this.g.Cc(c,g),this.g.Bc(g,c),this.g.Cc(v,d),this.g.Bc(d,v)):(this.g.Bc(c,g),this.g.Cc(g,c),this.g.Bc(v,d),this.g.Cc(d,v)),!0)},T.prototype.tD=function(p,h,a,c,d,g){this.MY?this.VM():this.UM(p,h,a,c,d,g)},T.prototype.VM=function(){throw m.i.fa("not implemented.")},T.prototype.UM=function(p,h,a,c,d,g){if(p!=h)p?(this.g.Bc(a,d),this.g.Cc(d,a),this.g.Bc(g,c),this.g.Cc(c,g),this.vn(d,a),this.ui(d,!0),this.g.mi(d,!0),this.bk(a),this.vn(g,c),this.ui(g,!0),this.g.mi(g,!1)):(this.g.Bc(d,a),this.g.Cc(a,d),this.g.Bc(c,g),this.g.Cc(g,c),this.vn(d,a),this.ui(d,!0),this.g.mi(d,!1),this.bk(a),this.vn(g,c),this.ui(g,!0),this.g.mi(g,!0)),this.bk(c);else{var v=p?a:c,b=h?d:g;for(p=p?c:a,h=h?g:d,d=!1,this.g.Bc(v,b),this.g.Bc(b,v),this.g.Cc(p,h),this.g.Cc(h,p),g=h;g!=b;)a=this.g.Ma(g),c=this.g.U(g),this.g.Cc(g,c),this.g.Bc(g,a),d=d||g==v,g=c;d||(a=this.g.Ma(b),c=this.g.U(b),this.g.Cc(b,c),this.g.Bc(b,a)),this.vn(b,v),this.ui(b,!0),this.g.mi(b,!1),this.bk(v),this.vn(h,p),this.ui(h,!0),this.g.mi(h,!1),this.bk(p)}},T.prototype.cD=function(){for(var p=!1,h=this.g.Ob(this.X);h!=-1;){for(var a=this.g.Xa(h),c=0,d=this.g.Ja(h);c<d&&1<d;){var g=this.g.Ma(a),v=this.g.U(a);this.g.fq(g,v)?(p=!0,this.ui(a,!1),this.g.pd(a,!0),this.ui(v,!1),this.g.pd(v,!0),a=g,c=0,d=this.g.Ja(h)):(a=v,c++)}if(2>this.g.Ja(h)){for(p=this.g.Xa(h),c=0,d=this.g.Ja(h);c<d;c++)this.ui(p,!1),p=this.g.U(p);h=this.g.Zq(h),p=!0}else h=this.g.Rb(h)}return p},T.prototype.sp=function(p){for(var h=!1;;){var a=this.g.U(p),c=this.g.Ma(p);if(a==p)return this.ui(p,!0),this.g.mi(p,!1),!0;if(!this.g.fq(a,c)||(h=!0,this.bk(c),this.bk(a),this.ui(p,!0),this.g.mi(p,!1),this.vn(a,c),this.ui(a,!0),this.g.mi(a,!0),a==c))break;p=c}return h},T.prototype.GM=function(){for(var p=0,h=this.oe.rc(this.oe.je);h!=-1;h=this.oe.lb(h)){var a=this.oe.getData(h);this.g.aj(a,-1)}for(var c=0,d=this.g.Ob(this.X);d!=-1;)if((h=this.g.Xa(d))==-1||this.g.bd(h)!=-1)a=d,d=this.g.Rb(d),this.g.$q(a);else{this.g.aj(h,d);var g=1;for(a=this.g.U(h);a!=h;a=this.g.U(a))this.g.aj(a,d),g++;this.g.cp(d,!1),this.g.Vj(d,g),this.g.Wg(d,this.g.Ma(h)),c+=g,p++,d=this.g.Rb(d)}for(h=this.oe.rc(this.oe.je);h!=-1;h=this.oe.lb(h))a=this.oe.getData(h),this.g.bd(a)==-1&&(d=this.g.nG(this.X,a,a,null),c+=this.g.Ja(d),p++);for(this.g.Rl(this.X,p),this.g.Tj(this.X,c),p=0,c=this.g.ld;c!=-1;c=this.g.ue(c))p+=this.g.I(c);this.g.bC(p)},T.prototype.cm=function(p){for(var h=0,a=this.xe.size-1;h<a;h++)if(p=(p+1)%this.xe.size,this.xe.get(p)!=-1)return p;return-1},T.prototype.vn=function(p,h){var a=this.g.Pa(h,this.Pq),c=this.g.Pa(h,this.zg);this.g.lC(p,h),this.g.Ra(h,this.Pq,a),this.g.Ra(h,this.zg,c)},T.prototype.bk=function(p){var h=this.g.Pa(p,this.zg);h!=-1&&(this.xe.set(h,-1),this.g.Ra(p,this.zg,-1))},T.V=function(p,h,a,c,d){var g=new T;return g.g=p,g.X=h,g.xA=a,g.fw=c,g.nd=d,g.XM()},T.prototype.pM=function(p,h){var a=this.Wh.get(p),c=new m.h;this.g.Gc(a,c),a=new m.h;var d=this.Wh.get(h);return this.g.Gc(d,a),c.qb(a)?0:(d=this.zs.get(p),p=new m.h,this.g.Gc(d,p),d=this.zs.get(h),h=new m.h,this.g.Gc(d,h),(d=new m.h).uc(c,p),(c=new m.h).uc(a,h),m.h.nu(d,c))},T}();m.rn=j}(ye||(ye={})),function(m){var j;(j=m.$L||(m.$L={}))[j.Local=0]="Local",j[j.Geographic=1]="Geographic",j[j.Projected=2]="Projected",j[j.Image=3]="Image",j[j.Unknown=4]="Unknown",function(p){p[p.Integer32=0]="Integer32",p[p.Integer64=1]="Integer64",p[p.FloatingPoint=2]="FloatingPoint"}(m.TL||(m.TL={}));var T=function(){function p(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return p.prototype.Ec=function(){return this.dg},p.prototype.VF=function(){return 1},p.prototype.VW=function(h){this.mA=h},p.prototype.Xd=function(){if(this.mA!==null)return this.mA;var h=.001;return this.dg!=0?h=m.wr.CQ(this.dg):this.wh!=null&&(h=m.XC.DQ(this.wh)),h},p.prototype.Bz=function(){return this.wh},p.prototype.Hd=function(){return this.dg!=0?m.Tc.Zg(m.wr.Sy(this.dg)):this.wh!=null?m.XC.EQ(this.wh):void 0},p.Sb=function(h){if(h.dg!=0){if(m.wr.ZS(h.dg)===!0)return 1;if(m.wr.aT(h.dg)===!0)return 2}return 4},p.prototype.$r=function(){var h=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=m.wr.FK(h),this.Ho!=-1?this.Ho:h)},p.create=function(h){if(0>=h)throw m.i.N("Invalid or unsupported wkid: "+h);var a=new p;return a.dg=h,a},p.qP=function(h){if(h==null||h.length==0)throw m.i.N("Cannot create SpatialReference from null or empty text.");var a=new p;return a.wh=h,a},p.prototype.Nb=function(h){return this==h||h!=null&&this.constructor==h.constructor&&this.dg==h.dg&&(this.dg!=0||this.wh===h.wh)},p.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},p.prototype.cc=function(){if(this.pp!=="")return this.pp;var h=this.toString();if(Array.prototype.reduce)return this.pp="S"+h.split("").reduce(function(d,g){return 0|(d=(d<<5)-d+g.charCodeAt(0))},0);var a=0;if(h.length===0)return"";for(var c=0;c<h.length;c++)a=(a<<5)-a+h.charCodeAt(c),a&=a;return this.pp="S"+a},p.prototype.Kn=function(){return this.Xd(0)},p.prototype.fh=function(){return this.su!==null?this.su:this.su=m.gu.yP(this)},p.ZN=2147483645,p.$N=9007199254740990,p}();m.Eg=T}(ye||(ye={})),function(m){var j=function(T){function p(){var h=T!==null&&T.apply(this,arguments)||this;return h.Ji=null,h.ST=null,h.Hq=new m.ZL,h.Eo=null,h.jw=null,h}return ri(p,T),p.yP=function(h){var a=new p;if(a.dg=h.dg,a.Ho=h.Ho,a.ZH=h.ZH,a.wh=h.wh,a.wh!==""&&a.wh!==null){h=p.kM(a.wh);var c=p.iM(a.wh);a.Hq.Xx(h,c,m.hu.Integer64),a.by(h),a.gy(c),a.dg=h.$r()}else h=p.jM(a.dg),a.by(h),a.gy(null),a.Hq.Xx(h,null,m.hu.Integer64);return a},p.prototype.Xd=function(h){return this.Hq.Kn(h)},p.iM=function(h){if(0>=h.length)throw m.i.N();var a=null;try{a=m.NC.fromString(h)}catch{a=null}return a==null?null:p.bD(a,!0)},p.prototype.by=function(h){this.Kd=h,this.Eo=this.Kd.Hd()},p.prototype.gy=function(h){this.KH=h,this.ST=this.KH!=null?this.KH.Eo:null},p.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},p.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},p.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},p.prototype.pm=function(){return this.Kd.pm()},p.prototype.bf=function(){return this.Kd.bf()},p.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},p.prototype.Up=function(){return this.Kd.Up()},p.prototype.Wr=function(){return this.Kd.Wr()},p.prototype.kk=function(){return this.Kd.kk()},p.prototype.kS=function(h){return m.OC.Py(this.Kd,h.Kd)},p.prototype.ml=function(){return this.Kd.ml()},p.prototype.Vr=function(){return this.Kd.Vr()},p.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},p.prototype.gh=function(){if(!this.Wc())throw m.i.N("!isPannable()");var h=new m.l;return this.Kd.gh(h),h},p.prototype.Oe=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.so},p.prototype.HR=function(){if(!this.Wc())throw m.i.N("!isPannable()");var h=new m.l;return this.Kd.GR(h),h},p.prototype.pv=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.pv()},p.prototype.ov=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.ov()},p.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},p.prototype.PQ=function(){return this.Kd.hv()},p.prototype.Qp=function(){return this.Eo.getUnitFactor()},p.prototype.vz=function(h){return this.Hq.vz(h)},p.prototype.sc=function(){var h=this.Sb();if(h==1)return this;if(h==3)return this.Ji.fk().sc();if(h==0||h===4)throw m.i.fa("invalid call");if(this.jw!==null)return this.jw;if((h=this.eh().getGeogcs())==null)throw m.i.Qa();return this.jw=p.bF(h,this.Hq.VF())},p.bF=function(h,a){if(h==null)throw m.i.N("null pointer.");var c=new p;return h=p.mu(h,!0),c.Hq.Xx(h,null,a),c.by(h),c.gy(null),c.dg=h.$r(),c},p.prototype.Sb=function(){var h=this.eh();if(h!=null)switch(h.getType()){case m.Sc.PE_TYPE_GEOGCS:return 1;case m.Sc.PE_TYPE_PROJCS:return 2}return 4},p.prototype.hv=function(){return this.Kd.hv()},p.mu=function(h,a){var c=h.getCode();if(0>=c&&0<(c=m.pf.getCode(h))){if((h=m.pf.coordsys(c))==null)throw m.i.N("Text to wkid mapping had failed: "+c);return p.mu(h,a)}if(a&&0<c&&(a=p.qx[c]))return a;a=m.zb.xv(h,c,!1);var d=p.lK[a];return d||(h=0>=c?h:m.pf.coordsys(c),h=new m.OC(h),p.lK[a]=h,0<c&&(p.qx[c]=h),h)},p.jM=function(h){if(0>=h)throw m.i.N("Invalid or unsupported wkid: "+h);var a=p.qx[h];if(a!=null)return a;if((a=m.pf.coordsys(h))==null)throw m.i.N("Invalid or unsupported wkid: "+h);return(a=p.mu(a,!1)).$r()!=h&&(p.qx[h]=a),a},p.kM=function(h){if(h==null||h===void 0||h.length==0)throw m.i.N("Cannot create SpatialReference from null or empty text.");var a=null;try{a=m.pf.fromString(m.Sc.PE_TYPE_COORDSYS,h)}catch(c){throw m.i.N("Cannot create SpatialReference from text. "+c.message)}if(a===null)throw m.i.N("Cannot create SpatialReference from text. ");return p.mu(a,!0)},p.bD=function(h,a){var c,d=h.getCode();if(0>=d&&0<(d=m.pf.getCode(h))){if((d=m.pf.vertcs(d))===null)throw m.i.N();return p.bD(d,a)}if(a&&0<d&&(a=p.kK[d])||(h=m.zb.xv(h,d,!1),a=p.mK[h]))return a;if(0>=d||(c=m.pf.vertcs(d)),c===null)throw m.i.N();return c=new m.PL(c),p.mK[h]=c,0<d&&(p.kK[d]=c),c},p.sI=function(h,a){if(a===null||a.B())return null;var c=new m.l;if(a!==null&&h.Sb()!=1){var d=h.sc(),g=d.eh();h=m.vr.Nr(h,d,null,null),(a=m.Hx.local().V(a,h,null)).A(c)}else g=h.eh(),a.A(c);return a=g.getPrimem().getLongitude(),g=g.getUnit().getUnitFactor(),new m.LC(c.v,c.G,c.C,c.H,a,g)},p.lD=function(h){var a={name:"",steps:[],_pt:null,_entry:null},c=0;for(h=h.getEntries();c<h.length;c++){var d=h[c],g={LY:!1,ZY:"",YY:-1,geogtran:null};d.getDirection()===0?g.isInverse=!1:g.isInverse=!0;var v=d.getGeogtran().getCode();-1<v?g.wkid=v:g.wkt=d.getGeogtran().toString(),a.steps.push(g)}return a},p.XR=function(h,a,c,d){return c===void 0&&(c=null),c=p.sI(d,c),h=m.lp.getGTlist(h.eh(),a.eh(),2,m.lp.PE_GTLIST_OPTS_COMMON,c,1),a=null,h&&0<h.length&&(a=this.lD(h[0]),m.Mx.destroy(h)),c!==null&&c.destroy(),a},p.YR=function(h,a,c,d){var g;if(c===void 0&&(c=null),d===void 0&&(d=null),g===void 0&&(g=30),c=p.sI(d,c),h=m.lp.getGTlist(h.eh(),a.eh(),2,m.lp.PE_GTLIST_OPTS_COMMON,c,g),a=[],h&&0<h.length){for(g=0;g<h.length;g++)a.push(this.lD(h[g]));m.Mx.destroy(h)}return c!==null&&c.destroy(),a},p.qx={},p.lK={},p.kK={},p.mK={},p}(m.Eg);m.gu=j}(ye||(ye={})),function(m){var j,T;(T=j=m.hu||(m.hu={}))[T.Integer32=0]="Integer32",T[T.Integer64=1]="Integer64",T[T.FloatingPoint=2]="FloatingPoint";var p=function(){function h(){this.qp()}return h.prototype.assign=function(a){this.Fm=a.Fm,this.Gm=a.Gm,this.Pj=a.Pj,this.sA=a.sA,this.Fo=a.Fo,this.rA=a.rA,this.Ik=a.Ik,this.Mq=a.Mq,this.Lq=a.Lq,this.Rm=a.Rm},h.prototype.VF=function(){return this.Rm},h.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=j.FloatingPoint},h.prototype.Xx=function(a,c,d){if(this.qp(),this.Rm=d,d!=j.FloatingPoint){var g=new m.l;a.hR(g),this.Fm=g.v,this.Gm=g.G}else this.Gm=this.Fm=-17976931348623157e292;(g=a.Ue.getType())==m.Sc.PE_TYPE_GEOGCS?(g=(d==j.Integer64?1e-9:1/18e5)*a.bf(),this.Pj=1/g):g==m.Sc.PE_TYPE_PROJCS&&(g=(d==j.Integer64?1e-4:.001)*a.pm(),this.Pj=1/g),c!=null?(g=(d==j.Integer32?.001:1e-4)*c.IH,this.Fo=1/g):this.Fo=1e4,this.YM(),this.Ik=a.sw,this.Mq=c!=null?.001*c.IH:.001,this.Lq=2220446049250313e-29},h.prototype.YM=function(){if(this.Rm!=j.FloatingPoint){var a=this.Rm==j.Integer64?m.Eg.$N:m.Eg.ZN,c=a/this.Pj,d=this.Fm+c,g=m.O.truncate((d-this.Fm)*this.Pj);g>a&&(this.Pj=a/(d-this.Fm)),c=this.Gm+c,(g=m.O.truncate((c-this.Gm)*this.Pj))>a&&(this.Pj=a/(c-this.Gm))}},h.prototype.aC=function(a){switch(a){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},h.prototype.Kn=function(a){switch(a){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},h.prototype.vz=function(a){if(this.Rm==j.FloatingPoint)return 0;switch(a){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},h.prototype.toString=function(){var a="SRPD [m_toleranceXY: "+this.Ik.toString();return(a=(a=(a=(a=(a=(a=(a=(a=(a=a+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},h}();m.ZL=p}(ye||(ye={})),function(m){function j(d,g){return 89.99999<g?g=89.99999:-89.99999>g&&(g=-89.99999),g*=.017453292519943,[111319.49079327169*d,31890685e-1*Math.log((1+Math.sin(g))/(1-Math.sin(g)))]}function T(d,g,v){return d=d/6378137*57.29577951308232,v?[d,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]:[d-360*Math.floor((d+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]}function p(d,g,v){var b=d.Of();if(d.getType()===33)g=g(b.Lg(),b.ih()),b.Cb(g[0],g[1]);else if(d.getType()===197){var C=g(d.es(),d.gs(),v);g=g(d.ds(),d.fs(),v),b.K(C[0],C[1],g[0],g[1])}else for(C=new m.h,d=0;d<b.I();d++){b.D(d,C);var M=g(C.x,C.y,v);C.ma(M[0],M[1]),b.Cb(d,C)}return b}function h(d){return p(d,T,!0)}function a(d){return p(d,j,!0)}var c=Math.PI/180;m.UK=function(){function d(){}return d.vu=function(g){var v=Math.sqrt(.006694379990197414),b=Math.sin(g.y*c);return m.h.construct(6378137*g.x*c,3.1677196636462314e6*(b/(1-.006694379990197414*b*b)-1/(2*v)*Math.log((1-v*b)/(1+v*b))))},d.Vx=function(g,v,b,C){var M=.0033528106647474805,O=Math.sin(b);b=Math.cos(b);var L=(1-M)*Math.tan(g),q=L*(g=1/Math.sqrt(1+L*L)),U=Math.atan2(L,b),ee=(L=g*O)*L,Q=1-ee,ge=27233160610754688e-5*Q/4040829998466145e-2,ve=1+ge/16384*(4096+ge*(ge*(320-175*ge)-768)),fe=ge/1024*(256+ge*(ge*(74-47*ge)-128));ge=C/(635675231424518e-8*ve);for(var Ce,Ie,Ne,Ve=2*Math.PI;1e-12<Math.abs(ge-Ve);)Ne=Math.cos(2*U+ge),Ve=ge,ge=C/(635675231424518e-8*ve)+fe*(Ce=Math.sin(ge))*(Ne+fe/4*((Ie=Math.cos(ge))*(2*Ne*Ne-1)-fe/6*Ne*(4*Ce*Ce-3)*(4*Ne*Ne-3)));return C=q*Ce-g*Ie*b,Q=M/16*Q*(4+M*(4-3*Q)),m.h.construct((v+(Math.atan2(Ce*O,g*Ie-q*Ce*b)-(1-Q)*M*L*(ge+Q*Ce*(Ne+Q*Ie*(2*Ne*Ne-1)))))/c,Math.atan2(q*Ie+g*Ce*b,(1-M)*Math.sqrt(ee+C*C))/c)},d.MM=function(g,v,b,C){var M=.0033528106647474805,O=C-v,L=Math.atan((1-M)*Math.tan(g)),q=Math.atan((1-M)*Math.tan(b)),U=Math.sin(L);L=Math.cos(L);var ee=Math.sin(q);q=Math.cos(q);var Q=O,ge=1e3;do{var ve=Math.sin(Q),fe=Math.cos(Q),Ce=Math.sqrt(q*ve*q*ve+(L*ee-U*q*fe)*(L*ee-U*q*fe));if(Ce===0)return 0;fe=U*ee+L*q*fe;var Ie=Math.atan2(Ce,fe),Ne=L*q*ve/Ce,Ve=1-Ne*Ne;ve=fe-2*U*ee/Ve,isNaN(ve)&&(ve=0);var Xe=M/16*Ve*(4+M*(4-3*Ve)),et=Q;Q=O+(1-Xe)*M*Ne*(Ie+Xe*Ce*(ve+Xe*fe*(2*ve*ve-1)))}while(1e-12<Math.abs(Q-et)&&0<--ge);return ge===0?(U=C-v,{azimuth:Math.atan2(Math.sin(U)*Math.cos(b),Math.cos(g)*Math.sin(b)-Math.sin(g)*Math.cos(b)*Math.cos(U)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos(C-v))}):(v=(g=27233160610754688e-5*Ve/4040829998466145e-2)/1024*(256+g*(g*(74-47*g)-128)),{azimuth:Math.atan2(q*Math.sin(Q),L*ee-U*q*Math.cos(Q)),YQ:635675231424518e-8*(1+g/16384*(4096+g*(g*(320-175*g)-768)))*(Ie-v*Ce*(ve+v/4*(fe*(2*ve*ve-1)-v/6*ve*(4*Ce*Ce-3)*(4*ve*ve-3)))),XY:Math.atan2(L*Math.sin(Q),L*ee*Math.cos(Q)-U*q)})},d.jQ=function(g){var v=g.hasAttribute(1),b=g.hasAttribute(2),C=[],M=g.da(),O=null,L=null;v&&(O=g.ub(1)),b&&(L=g.ub(2));for(var q=new m.h,U=0;U<M;U++){for(var ee=g.Ba(U),Q=g.Ja(U),ge=0,ve=0,fe=NaN,Ce=NaN,Ie=NaN,Ne=NaN,Ve=g.dc(U),Xe=[],et=ee;et<ee+Q;et++){g.D(et,q),Ne=Ie=NaN;var dt=[q.x,q.y];v&&(Ie=O.get(et),dt.push(Ie)),b&&(M=L.get(et),dt.push(Ne)),et==ee&&Ve&&(ge=q.x,ve=q.y,fe=Ie,Ce=Ne),Xe.push(dt)}!Ve||ge==q.x&&ve==q.y&&(!v||isNaN(fe)&&isNaN(Ie)||fe==Ie)&&(!b||isNaN(Ce)&&isNaN(Ne)||Ce==Ne)||Xe.push(Xe[0].slice(0)),C.push(Xe)}return C},d.Wy=function(g,v){g=d.jQ(g),637.100877141506>v&&(v=637.100877141506);for(var b,C=[],M=0;M<g.length;M++){var O,L,q=g[M];C.push(b=[]),b.push([q[0][0],q[0][1]]);var U=q[0][0]*c,ee=q[0][1]*c;for(O=0;O<q.length-1;O++){var Q=q[O+1][0]*c,ge=q[O+1][1]*c;if(U!==Q||ee!==ge){Q=(ge=d.MM(ee,U,ge,Q)).azimuth;var ve=(ge=ge.YQ)/v;if(1<ve){for(L=1;L<=ve-1;L++){var fe=d.Vx(ee,U,Q,L*v);b.push([fe.x,fe.y])}L=d.Vx(ee,U,Q,(ge+Math.floor(ve-1)*v)/2),b.push([L.x,L.y])}ee=d.Vx(ee,U,Q,ge),b.push([ee.x,ee.y]),U=ee.x*c,ee=ee.y*c}}}return{qJ:C}},d.XQ=function(g){for(var v=[],b=0;b<g.length;b++){var C=g[b];C=d.Wy(C,1e4),v.push(C)}g=[];for(var M=0;M<v.length;M++){C=v[M];var O=0;for(b=0;b<C.qJ.length;b++){var L,q=C.qJ[b],U=d.vu(m.h.construct(q[0][0],q[0][1])),ee=d.vu(m.h.construct(q[q.length-1][0],q[q.length-1][1])),Q=ee.x*U.y-U.x*ee.y;for(L=0;L<q.length-1;L++)U=d.vu(m.h.construct(q[L+1][0],q[L+1][1])),Q+=(ee=d.vu(m.h.construct(q[L][0],q[L][1]))).x*U.y-U.x*ee.y;O+=Q}O/=1,g.push(O/-2)}return g},d}(),m.cb=function(){function d(){}return d.xB=function(g,v,b,C,M,O,L){d.gD[g.cc()]=v,isNaN(b)==0&&(d.mD[g.cc()]=b),isNaN(C)==0&&(d.zD[g.cc()]=C),isNaN(M)==0&&(d.aD[g.cc()]=M),d.nD[g.cc()]=O,L!==null&&(d.oD[g.cc()]=L)},d.Ww=function(g,v,b){d.sD[g.cc()+"-"+v.cc()]=b},d.sc=function(g){if((g=d.gD[g.cc()])==null)throw m.i.Ie();return g},d.bf=function(g){if((g=d.mD[g.cc()])==null)throw m.i.Ie();return g},d.vv=function(g){if((g=d.zD[g.cc()])==null)throw m.i.Ie();return g},d.ev=function(g){if((g=d.aD[g.cc()])==null)throw m.i.Ie();return g},d.gh=function(g){if((g=d.oD[g.cc()])==null)throw m.i.Ie();return m.l.construct(g[0],g[1],g[2],g[3])},d.Wc=function(g){if((g=d.nD[g.cc()])==null)throw m.i.Ie();return g},d.zh=function(g,v,b){if(v.Nb(b))return g;var C=d.sD[v.cc()+"-"+b.cc()];if(C!==void 0)return C(g,v,b);throw m.i.Ie()},d.vt=function(){throw m.i.Ie()},d.bR=function(){throw m.i.Ie()},d.dW=function(){throw m.i.Ie()},d.ml=function(){throw m.i.Ie()},d.sW=function(){var g=m.Eg.create(102100),v=m.Eg.create(3857),b=m.Eg.create(4326);m.cb.xB(g,b,NaN,NaN,NaN,!1,null),m.cb.xB(b,b,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),m.cb.xB(v,b,NaN,NaN,NaN,!1,null),m.cb.Ww(g,b,h),m.cb.Ww(b,g,a),m.cb.Ww(v,b,h),m.cb.Ww(b,v,a)},d.gD=[],d.mD=[],d.zD=[],d.aD=[],d.nD=[],d.oD=[],d.sD=[],d}()}(ye||(ye={})),ye.cb.sW(),function(m){var j=function(){function T(p){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=p}return T.prototype.jd=function(p){p<this.Bl?(this.o[p*this.stride]=this.io,this.io=p):this.Bl--,this.size--},T.prototype.T=function(p,h){return this.o[p*this.stride+h]},T.prototype.S=function(p,h,a){this.o[p*this.stride+h]=a},T.prototype.Ce=function(){var p=this.io;if(p==-1){if(this.Bl==this.Hg){if(2147483647<(p=this.Hg!=0?m.O.truncate(3*(this.Hg+1)/2):1)&&(p=2147483647),p==this.Hg)throw m.i.ce();this.Dz(p)}p=this.Bl,this.Bl++}else this.io=this.o[p*this.stride];this.size++;for(var h=p*this.stride;h<p*this.stride+this.stride;h++)this.o[h]=-1;return p},T.prototype.Ll=function(p){var h=this.io;if(h==-1){if(this.Bl==this.Hg){if(2147483647<(h=this.Hg!=0?m.O.truncate(3*(this.Hg+1)/2):1)&&(h=2147483647),h==this.Hg)throw m.i.ce();this.Dz(h)}h=this.Bl,this.Bl++}else this.io=this.o[h*this.stride];this.size++;for(var a=h*this.stride,c=0;c<p.length;c++)this.o[a+c]=p[c];return h},T.prototype.mj=function(p){this.io=-1,this.size=this.Bl=0,p&&(this.o=null,this.Hg=0)},T.prototype.De=function(p){p>this.Hg&&this.Dz(p)},T.prototype.tx=function(p,h){p*=this.stride,h*=this.stride;for(var a=0;a<this.stride;a++){var c=this.o[h+a];this.o[h+a]=this.o[p+a],this.o[p+a]=c}},T.prototype.gC=function(p,h,a){var c=this.o[this.stride*h+a];this.o[this.stride*h+a]=this.o[this.stride*p+a],this.o[this.stride*p+a]=c},T.LG=function(p){return 0<=p},T.prototype.Dz=function(p){this.o==null&&(this.o=new Int32Array(0));var h=new Int32Array(this.stride*p);h.set(this.o,0),this.o=h,this.Hg=p},T}();m.$c=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",T[T.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",T[T.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",T[T.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var p=function(){function a(c){this.Be=c,this.yh=NaN,this.eH=new m.ig,this.fH=new m.ig,this.ms=new m.Nc,this.ns=new m.Nc}return a.prototype.compare=function(c,d,g){if(c=c.ja(g),this.Be.pB(d,this.eH),this.Be.pB(c,this.fH),d=this.eH.get(),c=this.fH.get(),this.ms.K(d.sa,d.pa),this.ns.K(c.sa,c.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;g=d.na==d.la;var v=c.na==c.la;if(g||v){if(g&&v)return 0;if(d.na==c.na&&d.sa==c.sa)return g?1:-1;if(d.la==c.la&&d.pa==c.pa)return g?-1:1}return(g=d.Pe(this.yh,this.ms.oa))==(v=c.Pe(this.yh,this.ns.oa))&&((v=.5*((g=Math.min(d.la,c.la))+this.yh))==this.yh&&(v=g),g=d.Pe(v,this.ms.oa),v=c.Pe(v,this.ns.oa)),g<v?-1:g>v?1:0},a.prototype.aK=function(c){this.yh=c},a}(),h=function(){function a(c){this.ib=c,this.WH=new m.ig,this.Bf=new m.h,this.wA=new m.Nc}return a.prototype.kX=function(c){this.Bf.L(c)},a.prototype.compare=function(c,d){return this.ib.pB(c.ja(d),this.WH),c=this.WH.get(),this.wA.K(c.sa,c.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(c=c.Pe(this.Bf.y,this.Bf.x),this.Bf.x<c?-1:this.Bf.x>c?1:0)},a}();j=function(){function a(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new m.Md,this.bO=2147483647,this.aO=m.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return a.prototype.yy=function(c){this.lA=c},a.prototype.Ym=function(){this.ge==null&&(this.ge=new m.$c(8));var c=this.ge.Ce();return this.ge.S(c,1,0),c},a.prototype.vU=function(){this.Kc==null&&(this.Kc=new m.$c(8));var c=this.Kc.Ce();this.Kc.S(c,2,0),this.Kc.S(c,3,0);var d=this.Kc.Ce();return this.Kc.S(d,2,0),this.Kc.S(d,3,0),this.JJ(c,d),this.JJ(d,c),c},a.prototype.mI=function(){this.ye==null&&(this.ye=new m.$c(8));var c=this.ye.Ce();return this.ye.S(c,2,0),c},a.prototype.TW=function(c,d){this.ge.S(c,7,d)},a.prototype.mn=function(c,d){this.ge.S(c,2,d)},a.prototype.SW=function(c,d){this.ge.S(c,1,d)},a.prototype.lX=function(c,d){this.ge.S(c,3,d)},a.prototype.iX=function(c,d){this.ge.S(c,4,d)},a.prototype.cr=function(c,d){this.ge.S(c,5,d)},a.prototype.eR=function(c){return this.ge.T(c,5)},a.prototype.RW=function(c,d){this.ge.S(c,6,d)},a.prototype.cN=function(c,d){this.RW(d,c)},a.prototype.IJ=function(c,d){this.Kc.S(c,1,d)},a.prototype.JJ=function(c,d){this.Kc.S(c,4,d)},a.prototype.Tl=function(c,d){this.Kc.S(c,5,d)},a.prototype.Sl=function(c,d){this.Kc.S(c,6,d)},a.prototype.$W=function(c,d){this.Kc.S(c,2,d)},a.prototype.$w=function(c,d){this.Kc.S(c,3,d)},a.prototype.LF=function(c){return this.Kc.T(c,3)},a.prototype.Gt=function(c,d){this.Kc.S(c,7,d)},a.prototype.EK=function(c,d){if(this.mm(c)!=-1)for(d=d?-1:c,c=this.mm(c);c!=-1;c=this.js(c))this.g.Ra(this.tj(c),this.Cq,d)},a.prototype.yx=function(c,d){c!=-1&&(this.EK(c,d),this.EK(this.xa(c),d))},a.prototype.Dt=function(c,d){this.ye.S(c,1,d)},a.prototype.Vg=function(c,d){this.ye.S(c,2,d)},a.prototype.jn=function(c,d){this.ye.S(c,3,d),this.NW(c,this.dR(d)),this.MW(d,c)},a.prototype.MW=function(c,d){this.ye.S(c,4,d)},a.prototype.NW=function(c,d){this.ye.S(c,5,d)},a.prototype.DJ=function(c,d){this.ye.S(c,6,d)},a.prototype.BJ=function(c,d){this.ye.S(c,7,d)},a.prototype.AJ=function(c,d){this.Yn.write(c,d)},a.prototype.CJ=function(c,d){this.kA.write(c,d)},a.prototype.kY=function(c){var d=0,g=0,v=this.AF(c),b=new m.h,C=new m.h,M=new m.h;this.Yr(v,b),C.L(b);var O=v;do this.lm(O,M),g+=m.h.tb(C,M),this.$e(this.xa(O))!=c&&(d+=(M.x-b.x-(C.x-b.x))*(M.y-b.y+(C.y-b.y))*.5),C.L(M),O=this.jc(O);while(O!=v);this.Yn.write(c,d),this.kA.write(c,g)},a.prototype.PU=function(c,d){var g=new p(this),v=new m.Yj;v.De(m.O.truncate(this.wa/2)),v.Vo(g);for(var b=new m.ia(0),C=this.$g(),M=null,O=0,L=new m.h,q=this.Re;q!=-1;q=this.Rf(q)){if(!(255&++O||d==null||d.progress(-1,-1)))throw m.i.WC();var U=this.Me(q);if(U!=-1){if(b.Bh(0),!this.gY(v,C,b,U)){this.D(q,L),g.aK(L.y);var ee=U;do{var Q=this.Ab(ee,C);Q!=-1&&(v.vd(Q,-1),this.Kb(ee,C,-2)),ee=this.jc(this.xa(ee))}while(U!=ee);ee=U;do(Q=this.Ab(ee,C))==-1&&(Q=v.addElement(ee,-1),b.add(Q)),ee=this.jc(this.xa(ee));while(U!=ee)}for(U=b.size-1;0<=U;U--)Q=b.get(U),ee=v.ja(Q),this.Kb(this.xa(ee),C,Q),this.OU(v,Q,c)}else this.cz(q)==-1&&(M==null&&(M=new h(this)),this.D(q,L),M.kX(L),ee=v.IW(M),U=this.Hl,ee!=-1&&(Q=v.ja(ee),this.$e(Q)==this.$e(this.xa(Q))&&(Q=this.OF(v,ee)),Q!=-1&&(U=this.$e(Q))),this.cN(U,q))}this.Jg(C)},a.prototype.OU=function(c,d,g){var v=c.ja(d),b=this.$e(v);if(this.Gn(b)==-1){var C=this.OF(c,d),M=this.xa(v),O=this.$e(M);this.Kp(b),this.Kp(O);var L=this.Gn(b),q=this.Gn(O);if(C==-1&&L==-1&&(O==b?(this.jn(O,this.Hl),L=q=this.Hl):(q==-1&&(this.jn(O,this.Hl),q=this.Hl),this.jn(b,O),L=O)),C!=-1){var U=this.$e(C);q==-1&&(0>=this.Kp(U)?(q=this.Gn(U),this.jn(O,q)):(this.jn(O,U),q=U),O==b&&(L=q))}L==-1&&this.hY(b,O),g==0?this.jW(c,d,v,C,b,O):g==5?this.kW(c,d,v,M,b,O):g==4&&this.iW(v,C,b,O)}},a.prototype.jW=function(c,d,g,v,b,C){var M=this.hk(b);if(v!=-1){var O=this.hk(C),L=this.hk(this.$e(v));v=M&O&L,L^=L&this.dh(g),(L|=v)!=0&&(this.Vg(C,O|L),this.Vg(b,L|M),M=M||L)}for(d=c.lb(d);d!=-1&&(v=c.ja(d),g=this.$e(this.xa(v)),b=this.hk(g),C=this.dh(v),O=this.$e(v),v=b&(L=this.hk(O))&M,M^=M&C,(M|=v)!=0);d=c.lb(d))this.Vg(g,b|M),this.Vg(O,L|M)},a.prototype.kW=function(c,d,g,v,b,C){if(b!=C){g=this.Ab(g,this.cg),g+=this.Ab(v,this.cg),v=0;var M=new m.ia(0),O=new m.ia(0);O.add(0);for(var L=c.rc(-1);L!=d;L=c.lb(L)){var q=c.ja(L),U=this.xa(q),ee=this.$e(q),Q=this.$e(U);if(ee!=Q){if(q=this.Ab(q,this.cg),v+=q+=this.Ab(U,this.cg),U=!1,M.size!=0&&M.Fc()==Q&&(O.If(),M.If(),U=!0),this.Gn(Q)==-1)throw m.i.Qa();U&&this.Gn(Q)==ee||(O.add(v),M.add(ee))}}v+=g,M.size!=0&&M.Fc()==C&&(O.If(),M.If()),v!=0?O.Fc()==0&&(c=this.g.ld,c=this.La(c),this.Vg(b,c)):O.Fc()!=0&&(c=this.g.ld,c=this.La(c),this.Vg(b,c))}},a.prototype.iW=function(c,d,g,v){var b=this.La(this.g.ld);if(d==-1)this.Vg(v,this.Go),1&(c=this.Ab(c,this.xg))?this.Vg(g,b):this.Vg(g,this.Go);else{var C=this.hk(v);C==0?(C=this.hk(this.$e(d)),this.Vg(v,C),1&(c=this.Ab(c,this.xg))?this.Vg(g,C==b?this.Go:b):this.Vg(g,C)):1&(c=this.Ab(c,this.xg))?this.Vg(g,C==b?this.Go:b):this.Vg(g,C)}},a.prototype.gY=function(c,d,g,v){var b=v,C=-1,M=-1,O=0;do{if(O==2)return!1;var L=this.Ab(b,d);if(L!=-1){if(C!=-1)return!1;C=L}else{if(M!=-1)return!1;M=b}O++,b=this.jc(this.xa(b))}while(v!=b);return M!=-1&&C!=-1&&(this.Kb(c.ja(C),d,-2),c.Sj(C,M),g.add(C),!0)},a.prototype.hY=function(c,d){var g=this.Kp(c);if(g!=0){var v=this.Kp(d);0<g&&0>v||0>g&&0<v?this.jn(c,d):(d=this.Gn(d))!=-1&&this.jn(c,d)}},a.prototype.vP=function(c,d){this.Cq=this.g.Gd();for(var g=0,v=d.size;g<v;g++){var b=d.get(g),C=this.g.Pa(b,this.Cm),M=this.g.Qf(this.g.bd(b)),O=this.g.ic(M);if(m.aa.Hc(O)){var L=this.g.U(b);if(L!=-1){var q=this.g.Pa(L,this.Cm);if(C!=q){var U=this.vU(),ee=this.xa(U),Q=this.jh.Ce();this.jh.S(Q,0,b),this.jh.S(Q,1,-1),this.Gt(U,Q),this.IJ(U,C),(Q=this.Me(C))==-1?(this.mn(C,U),this.Tl(U,ee),this.Sl(ee,U)):(C=this.te(Q),this.Tl(Q,ee),this.Sl(ee,Q),this.Sl(C,U),this.Tl(U,C)),this.IJ(ee,q),(C=this.Me(q))==-1?(this.mn(q,ee),this.Sl(U,ee),this.Tl(ee,U)):(q=this.te(C),this.Tl(C,U),this.Sl(U,C),this.Sl(q,ee),this.Tl(ee,q)),M=this.La(M),c==0?(this.Kb(ee,this.ae,0),this.Kb(U,this.ae,O==1736?M:0)):c==5?(q=new m.h,this.g.D(b,q),b=new m.h,this.g.D(L,b),C=L=0,0>q.compare(b)?L=1:C=-1,this.Kb(ee,this.ae,0),this.Kb(U,this.ae,0),this.Kb(U,this.cg,L),this.Kb(ee,this.cg,C)):c==7?(this.Kb(ee,this.ae,this.Go),this.Kb(U,this.ae,O==1736?M:0)):c==4&&(this.Kb(ee,this.ae,0),this.Kb(U,this.ae,0),this.Kb(U,this.xg,1),this.Kb(ee,this.xg,1)),O=O==1736?this.aO:0,this.$w(U,M|O),this.$w(ee,M|O)}}}}},a.prototype.VT=function(c,d){var g=this.mm(d);if(g!=-1){var v=this.mm(c);this.jh.S(g,1,v),this.Gt(c,g),this.Gt(d,-1)}c=this.xa(c),d=this.xa(d),(g=this.mm(d))!=-1&&(v=this.mm(c),this.jh.S(g,1,v),this.Gt(c,g),this.Gt(d,-1))},a.prototype.IX=function(c){function d(Ie,Ne){return v.HO(Ie,Ne)}var g=new m.ia(0);g.Jb(10);for(var v=this,b=this.Re;b!=-1;b=this.Rf(b)){g.clear(!1);var C=this.Me(b);if(C!=-1){var M=C;do g.add(M),M=this.jc(this.xa(M));while(M!=C);if(1<g.size){if(M=!0,2<g.size)g.Vd(0,g.size,d),g.add(g.get(0));else if(0<this.GO(g.get(0),g.get(1))){var O=g.get(0);g.set(0,g.get(1)),g.set(1,O)}else M=!1;for(var L=O=g.get(0),q=this.uf(L),U=this.xa(L),ee=-1,Q=1,ge=g.size;Q<ge;Q++){var ve=g.get(Q),fe=this.xa(ve),Ce=this.jk(fe);if(Ce==q&&ve!=L){if(c==0)ee=this.LF(L)|this.LF(ve),this.$w(L,ee),this.$w(U,ee),this.Kb(L,this.ae,this.Ab(L,this.ae)|this.Ab(ve,this.ae)),this.Kb(U,this.ae,this.Ab(U,this.ae)|this.Ab(fe,this.ae));else if(this.cg!=-1)ee=this.Ab(L,this.cg)+this.Ab(ve,this.cg),fe=this.Ab(U,this.cg)+this.Ab(fe,this.cg),this.Kb(L,this.cg,ee),this.Kb(U,this.cg,fe);else{if(c==7)return void(this.Ni=new m.Md(5,b,-1));this.xg!=-1&&(ee=this.Ab(L,this.xg)+this.Ab(ve,this.xg),fe=this.Ab(U,this.xg)+this.Ab(fe,this.xg),this.Kb(L,this.xg,ee),this.Kb(U,this.xg,fe))}this.VT(L,ve),this.Ly(ve),ee=L,g.set(Q,-1),ve==O&&(g.set(0,-1),O=-1)}else this.yx(ee,!1),ee=-1,L=ve,q=Ce,U=fe}if(this.yx(ee,!1),ee=-1,M){for(O=-1,Q=0,ge=g.size;Q<ge;Q++)if((ve=g.get(Q))!=-1){if(O==-1)L=O=ve,q=this.uf(L),U=this.xa(L);else if(ve!=L&&(fe=this.xa(ve),Ce=this.jk(fe),this.Sl(U,ve),this.Tl(ve,U),L=ve,q=Ce,U=fe,c==7&&(this.Ab(ve,this.ae)|this.Ab(this.te(ve),this.ae))==(1|this.Go)))return void(this.Ni=new m.Md(5,b,-1))}this.mn(b,O)}else{for(O=-1,Q=0,ge=g.size;Q<ge;Q++)if((ve=g.get(Q))!=-1){O=ve;break}C!=O&&this.mn(b,O)}}}}},a.prototype.WN=function(){for(var c=-1,d=this.$g(),g=this.Re;g!=-1;g=this.Rf(g)){var v=this.Me(g);if(v!=-1){var b=v;do{if(this.Ab(b,d)!=1){var C=this.mI();this.Dt(C,b),this.BJ(C,c),c!=-1&&this.DJ(c,C),c=C;var M=0,O=b;do M|=this.Ab(O,this.ae),this.$W(O,C),this.Kb(O,d,1),O=this.jc(O);while(O!=b);this.Vg(C,M)}b=this.jc(this.xa(b))}while(b!=v)}}C=this.mI(),this.Dt(C,-1),this.BJ(C,c),c!=-1&&this.DJ(c,C),this.Hl=C,this.Yn=m.be.qf(this.ye.size,NaN),this.kA=m.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(d)},a.prototype.sR=function(c,d,g){if((d=d!=-1?d:this.Me(c))==-1)return-1;for(c=d;;){if(this.Ab(d,g)!=1)return d;if((d=this.jc(this.xa(d)))==c)return-1}},a.prototype.yW=function(){for(var c=this.$g(),d=this.Re;d!=-1;d=this.Rf(d))for(var g=-1;;){var v=this.sR(d,g,c);if(v==-1)break;g=this.jc(this.xa(v));for(var b=v;;){var C=this.jc(b),M=this.te(b),O=this.xa(b);if(M==O){if(this.IP(b),g!=b&&g!=O||(g=-1),b==v||M==v){if(b==(v=C)||M==v)break;b=C;continue}}else this.Kb(b,c,1);if((b=C)==v)break}}this.Jg(c)},a.prototype.MB=function(c,d,g,v,b){this.Ug(),this.gH=b,this.g=c,this.Bq=this.g.aF(),(c=new m.ia(0)).Jb(g!=null?this.g.I(g.get(0)):this.g.fd);var C=0,M=1,O=g!=null?g.get(0):this.g.ld;for(b=1;O!=-1;){this.g.HJ(O,this.Bq,M),M<<=1;for(var L=this.g.Ob(O);L!=-1;L=this.g.Rb(L))for(var q=this.g.Xa(L),U=0,ee=this.g.Ja(L);U<ee;U++)c.add(q),q=this.g.U(q);m.aa.Rn(this.g.ic(O))||(C+=this.g.da(O)),g!=null?(O=b<g.size?g.get(b):-1,b++):O=this.g.ue(O)}for(this.Go=M,this.wa=c.size,this.g.nx(c,this.wa),this.jh==null&&(this.jh=new m.$c(2),this.ge=new m.$c(8),this.Kc=new m.$c(8),this.ye=new m.$c(8)),this.jh.De(this.wa),m.mp.zp(v),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,C)),this.Cm=this.g.Gd(),g=new m.h,b=0,C=new m.h,g.Rc(),M=0;M<=this.wa;M++)if(M<this.wa?(q=c.get(M),this.g.D(q,C)):C.Rc(),!g.qb(C)){if(b<M){for(q=this.Ym(),ee=U=-1;b<M;b++)ee=c.get(b),this.g.Ra(ee,this.Cm,q),O=this.jh.Ce(),this.jh.S(O,0,ee),this.jh.S(O,1,U),U=O,L=this.g.bd(ee),O=this.g.Qf(L),O=this.La(O),this.SW(q,this.xd(q)|O);this.TW(q,U),this.cr(q,this.g.Ua(ee)),this.Os!=-1&&this.iX(this.Os,q),this.lX(q,this.Os),this.Os=q,this.Re==-1&&(this.Re=q)}b=M,g.L(C)}m.mp.zp(v),this.ae=this.$g(),d==5&&(this.cg=this.$g()),d==4&&(this.xg=this.$g()),this.vP(d,c),this.Ni.Jj==0&&(this.IX(d),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(d,v))):this.pA=!0))},a.prototype.Ly=function(c){var d=this.jc(c),g=this.te(c),v=this.xa(c),b=this.jc(v),C=this.te(v);d!=v&&(this.Sl(C,d),this.Tl(d,C)),g!=v&&(this.Sl(g,b),this.Tl(b,g)),g=this.jk(c),this.Me(g)==c&&(b!=c?this.mn(g,b):this.mn(g,-1)),b=this.jk(v),this.Me(b)==v&&(d!=v?this.mn(b,d):this.mn(b,-1)),this.Kc.jd(c),this.Kc.jd(v)},a.prototype.OF=function(c,d){for(;;){if((d=c.we(d))==-1)return-1;var g=c.ja(d);if(this.$e(g)!=this.$e(this.xa(g)))return g}},a.prototype.dr=function(c,d){var g;g===void 0&&(g=!0),this.MB(c,0,null,d,g)},a.prototype.vJ=function(c,d,g){var v=new m.ia(0);v.add(d),this.MB(c,4,v,g,c.ic(d)==1736)},a.prototype.wJ=function(c,d,g){var v=new m.ia(0);v.add(d),this.MB(c,5,v,g,!0)},a.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},a.prototype.Me=function(c){return this.ge.T(c,2)},a.prototype.D=function(c,d){this.g.dG(this.eR(c),d)},a.prototype.xd=function(c){return this.ge.T(c,1)},a.prototype.Rf=function(c){return this.ge.T(c,4)},a.prototype.cz=function(c){return this.ge.T(c,6)},a.prototype.km=function(c){return this.ge.T(c,7)},a.prototype.js=function(c){return this.jh.T(c,1)},a.prototype.tj=function(c){return this.jh.T(c,0)},a.prototype.ng=function(c,d){return(d=this.Di[d]).size<=c?-1:d.read(c)},a.prototype.nn=function(c,d,g){(d=this.Di[d]).size<=c&&d.resize(this.ge.size,-1),d.write(c,g)},a.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var c=m.ia.qf(this.ge.Hg,-1),d=0,g=this.Di.length;d<g;d++)if(this.Di[d]==null)return this.Di[d]=c,d;return this.Di.push(c),this.Di.length-1},a.prototype.Ep=function(c){this.Di[c]=null},a.prototype.jk=function(c){return this.Kc.T(c,1)},a.prototype.uf=function(c){return this.jk(this.xa(c))},a.prototype.xa=function(c){return this.Kc.T(c,4)},a.prototype.te=function(c){return this.Kc.T(c,5)},a.prototype.jc=function(c){return this.Kc.T(c,6)},a.prototype.$e=function(c){return this.Kc.T(c,2)},a.prototype.af=function(c){return this.hk(this.Kc.T(c,2))},a.prototype.mm=function(c){return this.Kc.T(c,7)},a.prototype.Yr=function(c,d){this.D(this.jk(c),d)},a.prototype.lm=function(c,d){this.D(this.uf(c),d)},a.prototype.dh=function(c){return this.Kc.T(c,3)&this.bO},a.prototype.Ab=function(c,d){return(d=this.Gi[d]).size<=c?-1:d.read(c)},a.prototype.Kb=function(c,d,g){(d=this.Gi[d]).size<=c&&d.resize(this.Kc.size,-1),d.write(c,g)},a.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var c=m.ia.qf(this.Kc.Hg,-1),d=0,g=this.Gi.length;d<g;d++)if(this.Gi[d]==null)return this.Gi[d]=c,d;return this.Gi.push(c),this.Gi.length-1},a.prototype.Jg=function(c){this.Gi[c]=null},a.prototype.IP=function(c){var d=this.$e(c),g=this.xa(c),v=this.jc(c);v==g&&(v=this.jc(v))==c&&(v=-1);var b=this.AF(d);b!==c&&b!=g||this.Dt(d,v),g=this.Yn.read(d),isNaN(g)||(this.AJ(d,NaN),this.CJ(d,NaN)),this.yx(c,!0),this.Ly(c)},a.prototype.JP=function(c){for(var d=0,g=c.size;d<g;d++){var v=c.get(d),b=this.$e(this.xa(v));this.Dt(this.$e(v),-1),this.Dt(b,-1),this.yx(v,!0),this.Ly(v)}},a.prototype.AF=function(c){return this.ye.T(c,1)},a.prototype.hk=function(c){return this.ye.T(c,2)},a.prototype.Gn=function(c){return this.ye.T(c,3)},a.prototype.dR=function(c){return this.ye.T(c,4)},a.prototype.Kp=function(c){var d=this.Yn.read(c);return isNaN(d)&&(this.kY(c),d=this.Yn.read(c)),d},a.prototype.La=function(c){return this.g.KF(c,this.Bq)},a.prototype.Le=function(c){return this.g.Pa(c,this.Cm)},a.prototype.uR=function(c){return this.g.Pa(c,this.Cq)},a.prototype.tR=function(c,d){var g=this.Me(c);if(g==-1)return-1;var v=g,b=-1,C=-1;do{if(this.uf(v)==d)return v;if(b==-1){if((b=this.Me(d))==-1)break;C=b}if(this.uf(C)==c)return this.xa(C);v=this.jc(this.xa(v)),C=this.jc(this.xa(C))}while(v!=g&&C!=b);return-1},a.prototype.pB=function(c,d){d.Or(),d=d.get();var g=new m.h;this.Yr(c,g),d.Dc(g),this.lm(c,g),d.Qc(g)},a.prototype.HO=function(c,d){if(c==d)return 0;var g=new m.h;this.lm(c,g);var v=new m.h;return this.lm(d,v),g.qb(v)?0:(d=new m.h,this.Yr(c,d),(c=new m.h).uc(g,d),(g=new m.h).uc(v,d),m.h.nu(c,g))},a.prototype.GO=function(c,d){if(c==d)return 0;var g=new m.h;this.lm(c,g);var v=new m.h;return this.lm(d,v),g.qb(v)?0:(d=new m.h,this.Yr(c,d),(c=new m.h).uc(g,d),(g=new m.h).uc(v,d),0<=g.y&&0<c.y?m.h.nu(c,g):0)},a.prototype.xO=function(){for(var c=m.lc.ox(this.lA),d=new m.h,g=new m.h,v=new m.h,b=new m.h,C=new m.h,M=this.Re;M!=-1;M=this.Rf(M)){var O=this.Me(M);if(O!=-1){var L=O;this.Yr(L,d),this.lm(L,g),C.uc(g,d);var q=C.Sk();do{var U=L;if((L=this.jc(this.xa(L)))!=U){this.lm(L,v),b.uc(v,d),U=b.Sk();var ee=b.wi(C);if(ee*ee/(U*q)*Math.min(U,q)<=c)return!1;C.L(b),q=U,g.L(v)}}while(L!=O)}}return!0},a}(),m.iu=j}(ye||(ye={})),function(m){var j=function(){function T(){this.j=null,this.oH=new m.h,this.pH=new m.h,this.Gj=null,this.Mv=!1,this.tl=-1}return T.prototype.cf=function(p){return p<this.Gj.length&&this.Gj[p]},T.prototype.dl=function(p,h,a,c){var d=m.aa.tf(this.j.g.ic(a));if(m.aa.tf(this.j.g.ic(h))!=2||d!=1)throw m.i.Qa();this.FP(p,h,a,c)},T.prototype.dr=function(p,h){this.j==null&&(this.j=new m.iu),this.j.dr(p,h)},T.prototype.Ft=function(p,h,a){for(m.Tk.V(p,h,a,!0),h=p.ld;h!=-1;h=p.ue(h))p.ic(h)==1736&&m.rn.V(p,h,-1,this.Mv,a);this.dr(p,a)},T.prototype.ME=function(p,h,a,c,d){var g=this.j.g;if(g.ic(p)==1736)for(p=g.Ob(p);p!=-1;p=g.Rb(p)){var v=g.Xa(p);this.j.Le(v),this.j.Le(g.U(v));var b=this.j.uR(v);if(b!=-1){var C=this.j.Ab(b,a);if(C!=1&&C!=2)if(this.cf(this.j.af(b))){this.j.Kb(b,a,1),C=g.vf(h,-1);var M=b,O=this.j.Le(v),L=1;do{var q=this.sm(v,d);g.ij(C,q),c!=-1&&this.j.nn(O,c,1),this.j.Kb(M,a,1),M=this.j.jc(M);do var U=(q=L==1?g.U(v):g.Ma(v))!=-1?this.j.Le(q):-1;while(U==O);var ee=this.j.jk(M);if(ee!=U){do U=(q=L==1?g.Ma(v):g.U(v))!=-1?this.j.Le(q):-1;while(U==O);ee!=U?(U=ee,q=this.j.tj(this.j.km(U))):L=-L}O=U,v=q}while(M!=b);g.kn(C,!0)}else this.j.Kb(b,a,2)}}},T.prototype.eF=function(){for(var p=this.j.$g(),h=new m.ia(0),a=this.j.Re;a!=-1;a=this.j.Rf(a)){var c=this.j.Me(a),d=c;if(c!=-1)do{if(this.j.Ab(d,p)!=1){var g=this.j.xa(d);this.j.Kb(g,p,1),this.j.Kb(d,p,1),this.cf(this.j.af(d))&&this.cf(this.j.af(g))&&h.add(d)}d=this.j.jc(this.j.xa(d))}while(d!=c)}this.j.Jg(p),this.j.JP(h)},T.prototype.sm=function(p,h){return h==-1?p:this.aS(p,h)},T.prototype.aS=function(p,h){var a=this.j.g,c=this.j.km(this.j.Le(p));do{var d=this.j.tj(c);if(a.Qf(a.bd(d))==h)return d;c=this.j.js(c)}while(c!=-1);return p},T.prototype.Ot=function(p,h,a){this.eF();var c=this.j.g,d=c.Ig(1736),g=this.j.$g();return this.uK(p,h,d,a,g,-1),this.j.Jg(g),m.rn.V(c,d,1,this.Mv,null),d},T.prototype.uK=function(p,h,a,c,d,g){for(this.ME(p,a,d,g,c),h!=-1&&this.ME(h,a,d,g,c),p=this.j.g,h=this.j.Re;h!=-1;h=this.j.Rf(h)){var v=this.j.Me(h);if(v!=-1){var b=v;do{var C=this.j.Ab(b,d);if(C!=1&&C!=2)if(this.cf(this.j.af(b))){C=p.vf(a,-1);var M=b;do{var O=this.j.mm(M);O!=-1?O=this.j.tj(O):(O=this.j.tj(this.j.mm(this.j.xa(M))),O=this.j.g.U(O)),O=this.sm(O,c),p.ij(C,O),this.j.Kb(M,d,1),g!=-1&&(O=this.j.Le(O),this.j.nn(O,g,1)),M=this.j.jc(M)}while(M!=b);p.kn(C,!0)}else this.j.Kb(b,d,2);b=this.j.jc(this.j.xa(b))}while(b!=v)}}},T.prototype.aY=function(p,h,a){var c=this.j.g,d=c.Ig(1736),g=c.Ig(1607),v=c.Ig(550);this.eF();var b=-1,C=this.j.$g(),M=this.j.Dp();for(this.uK(p,h,d,a,C,M),p=this.j.Re;p!=-1;p=this.j.Rf(p))if((h=this.j.Me(p))!=-1){var O=h;do{var L=this.j.Ab(O,C),q=this.j.Ab(this.j.xa(O),C);if((L|=q)==2)if(L=this.j.dh(O),this.cf(L)){var U=c.vf(g,-1),ee=O;L=this.Yw(p,c),L=this.sm(L,a),c.ij(U,L),this.j.nn(p,M,1);do{if(L=this.j.uf(ee),q=this.Yw(L,c),q=this.sm(q,a),c.ij(U,q),this.j.Kb(ee,C,1),this.j.Kb(this.j.xa(ee),C,1),this.j.nn(L,M,1),ee=this.j.jc(ee),L=this.j.Ab(ee,C),(L|=q=this.j.Ab(this.j.xa(ee),C))!=2)break;if(L=this.j.dh(ee),!this.cf(L)){this.j.Kb(ee,C,1),this.j.Kb(this.j.xa(ee),C,1);break}}while(ee!=O)}else this.j.Kb(O,C,1),this.j.Kb(this.j.xa(O),C,1);O=this.j.jc(this.j.xa(O))}while(O!=h)}for(p=this.j.Re;p!=-1;p=this.j.Rf(p))(L=this.j.ng(p,M))!=1&&(L=this.j.xd(p),this.cf(L)&&(b==-1&&(b=c.vf(v,-1)),(h=this.j.km(p))!=-1&&(h=this.j.tj(h),L=this.sm(h,a),c.ij(b,L))));return this.j.Ep(M),this.j.Jg(C),m.rn.V(c,d,1,this.Mv,null),(a=[])[0]=v,a[1]=g,a[2]=d,a},T.prototype.Yw=function(p,h){var a=-1;for(p=this.j.km(p);p!=-1;p=this.j.js(p)){var c=this.j.tj(p);a==-1&&(a=c);var d=this.j.La(h.Qf(h.bd(c)));if(this.cf(d)){a=c;break}}return a},T.prototype.lB=function(p,h){for(var a=this.jl(h),c=this.j.jk(h),d=this.j.uf(h),g=0,v=0,b=this.j.km(c);b!=-1;b=this.j.js(b)){var C=this.j.tj(b),M=p.bd(C),O=this.j.La(p.Qf(M));M=p.Xa(M),(O=!!(O&a))&&M==C&&(this.tl=h);var L=p.U(C);L!=-1&&this.j.Le(L)==d?(g++,O&&(this.tl===-1&&M==L&&(C=this.j.jc(h),this.cf(this.jl(C))&&(this.tl=C)),v++)):(C=p.Ma(C))!=-1&&this.j.Le(C)==d&&(g--,O&&(this.tl===-1&&M===C&&(C=this.j.jc(h),this.cf(this.jl(C))&&(this.tl=C)),v--))}return this.j.D(c,this.oH),this.j.D(d,this.pH),(v!=0?v:g)*(p=m.h.tb(this.oH,this.pH))},T.prototype.jl=function(p){return this.j.dh(p)|this.j.af(p)|this.j.af(this.j.xa(p))},T.prototype.xK=function(p){for(var h=this.j.xa(this.j.te(p)),a=-1;h!=p;){if(this.cf(this.jl(h))){if(a!=-1)return-1;a=h}h=this.j.xa(this.j.te(h))}return a!=-1?this.j.xa(a):-1},T.prototype.yK=function(p){for(var h=this.j.xa(this.j.jc(p)),a=-1;h!=p;){if(this.cf(this.jl(h))){if(a!=-1)return-1;a=h}h=this.j.xa(this.j.jc(h))}return a!=-1?this.j.xa(a):-1},T.prototype.mJ=function(p,h,a,c,d){var g=this.j.g,v=p,b=this.j.xa(v);this.j.Kb(v,a,1),this.j.Kb(b,a,1),this.tl=-1;for(var C=this.lB(g,v),M=v,O=-1,L=!1,q=1;;){var U=this.j.te(v);if(U==b)break;if(b=this.j.jc(b),this.j.xa(U)!=b){if((v=this.xK(v))==-1){L=!0;break}b=this.j.xa(v)}else v=U;if(v==p){O=p;break}if(U=this.jl(v),!this.cf(U))break;this.j.Kb(v,a,1),this.j.Kb(b,a,1),M=v,C+=this.lB(g,v),q++}if(O==-1)for(v=p,b=this.j.xa(v),O=v;(p=this.j.jc(v))!=b;){if(b=this.j.te(b),this.j.xa(p)!=b){if((v=this.yK(v))==-1){L=!0;break}b=this.j.xa(v)}else v=p;if(U=this.jl(v),!this.cf(U))break;this.j.Kb(v,a,1),this.j.Kb(b,a,1),O=v,C+=this.lB(g,v),q++}else if(this.tl!=-1&&(M=this.tl,O=this.j.te(this.tl),this.j.xa(O)!=this.j.jc(this.j.xa(M))&&(O=this.xK(M))==-1))throw m.i.Qa();for(0<=C||(v=O,O=this.j.xa(M),M=this.j.xa(v)),a=g.vf(h,-1),v=M,M=this.j.jk(M),L=this.j.uf(O)==M&&L,C=this.Yw(M,g),C=this.sm(C,d),g.ij(a,C),c!=-1&&this.j.nn(M,c,1),M=0,q=L?m.O.truncate((q+1)/2):-1;p=this.j.uf(v),C=this.Yw(p,g),C=this.sm(C,d),g.ij(a,C),M++,c!=-1&&this.j.nn(p,c,1),L&&M==q&&(a=g.vf(h,-1),g.ij(a,C)),v!=O;)if(p=this.j.jc(v),this.j.te(this.j.xa(v))!=this.j.xa(p)){if((v=this.yK(v))==-1)throw m.i.Qa()}else v=p},T.prototype.Pt=function(p){for(var h=this.j.g.Ig(1607),a=this.j.$g(),c=this.j.Re;c!=-1;c=this.j.Rf(c)){var d=this.j.Me(c),g=d;do this.j.Ab(g,a)!=1&&this.cf(this.jl(g))&&this.mJ(g,h,a,-1,p),g=this.j.jc(this.j.xa(g));while(g!=d)}return this.j.Jg(a),h},T.prototype.bY=function(p){for(var h=this.j.g,a=h.Ig(1607),c=h.Ig(550),d=this.j.$g(),g=this.j.Dp(),v=-1,b=this.j.Re;b!=-1;b=this.j.Rf(b)){var C=this.j.Me(b),M=C;do{var O=this.j.Ab(M,d);O!=1&&(O=this.jl(M),this.cf(O)&&this.mJ(M,a,d,g,p)),M=this.j.jc(this.j.xa(M))}while(M!=C)}for(b=this.j.Re;b!=-1;b=this.j.Rf(b))(O=this.j.ng(b,g))!=1&&(O=this.j.xd(b),this.cf(O)&&(v==-1&&(v=h.vf(c,-1)),(C=this.j.km(b))!=-1&&(C=this.j.tj(C),C=this.sm(C,p),h.ij(v,C))));return this.j.Jg(d),this.j.Ep(g),(p=[])[0]=c,p[1]=a,p},T.prototype.mr=function(){for(var p=this.j.g,h=p.Ig(550),a=p.vf(h,-1),c=this.j.Re;c!=-1;c=this.j.Rf(c))if(this.cf(this.j.xd(c))){for(var d=-1,g=this.j.km(c);g!=-1;g=this.j.js(g)){var v=this.j.tj(g);d==-1&&(d=v);var b=this.j.La(p.Qf(p.bd(v)));if(this.cf(b)){d=v;break}}p.ij(a,d)}return h},T.prototype.bq=function(p){this.Gj=[];for(var h=0;h<p;h++)this.Gj[h]=!1},T.aW=function(p,h,a){var c=p.Ia(),d=Array(1e3);m.O.$u(d,null);var g=m.O.lg(1e3,0),v=p.I(),b=!0,C=h.Db()==2;if(h.Db()!=1&&h.Db()!=2)throw m.i.Qa();for(var M=0;M<v;){var O=m.O.truncate(p.lW(d,M)-M);C?m.hd.sK(h,d,O,a,g):m.hd.tK(h,d,O,a,g);for(var L=0,q=0;q<O;q++)g[q]==0&&(b&&(b=!1,c.Fd(p,0,M)),L!=q&&c.Fd(p,M+L,M+q),L=q+1);b||L==O||c.Fd(p,M+L,M+O),M+=O}return b?p:c},T.zG=function(p,h,a){return p instanceof m.de?T.aW(p,h,a):h instanceof m.Sa?p.B()||h.B()?p.Ia():m.Tk.zU(a,p,h)?m.Tk.CO(p,h):p.Ia():T.bW(p,h,a)},T.Av=function(p,h,a,c){var d=new m.l;p.A(d);var g=new m.l;h.A(g);var v=new m.l;if(v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),(v=new m.l).K(g),g=m.ta.Er(a),v.W(g,g),!d.isIntersecting(v)){if(p.Db()<=h.Db())return T.ki(T.Xe(p.Ia()),p,"&");if(p.Db()>h.Db())return T.ki(T.Xe(h.Ia()),p,"&")}return g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,c),c=g.Av(v,h),p=T.ki(d.Ne(c),p,"&"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.bW=function(p,h,a){if(p.B()||h.B())return p.Ia();var c=[null],d=[0],g=h.Db()==2;if(h.Db()!=1&&h.Db()!=2)throw m.i.Qa();return c[0]=p.D(),g?m.hd.sK(h,c,1,a,d):m.hd.tK(h,c,1,a,d),d[0]==0?p.Ia():p},T.prototype.LU=function(p,h,a,c,d){if(p.B())return p;var g=new m.gd;return p=g.Ib(p),this.Mk(g,p,h,a,c,d)},T.prototype.NU=function(p,h,a,c,d,g){if(d&&p.ic(h)!=550){var v=new m.RC;v.TX(p,a),v.Ng?(m.Tk.V(p,a,g,!0),d=!1):this.j.yy(a)}else m.Tk.V(p,a,g,!0),d=!1;if(c&&p.ic(h)!=550?this.j.wJ(p,h,g):this.j.vJ(p,h,g),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(p,h,a,c,!1,g);if(this.j.yy(NaN),g=this.j.La(h),this.bq(g+1),this.Gj[g]=!0,p.ic(h)==1736||c&&p.ic(h)!=550)return p.Yo(h,0),h=this.Ot(h,-1,-1),(p=p.Ne(h)).Yo(0),d?p.Ch(1,0):(p.Ch(2,a),p.fm()),p;if(p.ic(h)==1607)return h=this.Pt(-1),p=p.Ne(h),d||p.Ch(2,a),p;if(p.ic(h)==550)return h=this.mr(),p=p.Ne(h),d||p.Ch(2,a),p;throw m.i.Qa()},T.prototype.Mk=function(p,h,a,c,d,g){this.j=new m.iu;try{return this.NU(p,h,a,c,d,g)}finally{this.j.Ug()}},T.Mk=function(p,h,a,c,d){return new T().LU(p,h,a,c,d)},T.prototype.MU=function(p,h,a,c){this.Mv=p,this.j=new m.iu,p=h.In(a);var d=h.ic(a);if(p!=1||d==550?this.j.vJ(h,a,c):this.j.wJ(h,a,c),!this.j.pA)if(this.j.yy(NaN),c=this.j.La(a),this.bq(c+1),this.Gj[c]=!0,h.ic(a)==1736||p==1&&h.ic(a)!=550)h.Yo(a,0),c=this.Ot(a,-1,-1),h.hC(c,a),h.BB(c);else if(h.ic(a)==1607)c=this.Pt(-1),h.hC(c,a),h.BB(c);else{if(h.ic(a)!=550)throw m.i.fa("internal error");c=this.mr(),h.hC(c,a),h.BB(c)}},T.prototype.im=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),c=m.aa.tf(this.j.g.ic(h));if(a>c)return p;var d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)]=!0,a==2&&c==2)return this.Ot(p,h,-1);if(a==1&&c==2||a==1&&c==1)return this.Pt(-1);if(a==0)return this.mr();throw m.i.Qa()},T.prototype.Av=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),c=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)|this.j.La(h)]=!0,d=-1,1<this.j.g.ht.Aa&&(d=p),a==2&&c==2)return this.Ot(p,h,d);if(a==1&&0<c||c==1&&0<a)return this.Pt(d);if(a==0||c==0)return this.mr();throw m.i.Qa()},T.prototype.Pz=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),c=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)|this.j.La(h)]=!0,d=-1,1<this.j.g.ht.Aa&&(d=p),a==2&&c==2)return this.aY(p,h,d);if(a==1&&0<c||c==1&&0<a)return this.bY(d);if(a==0||c==0)return(p=[])[0]=this.mr(),p;throw m.i.Qa()},T.prototype.ep=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),c=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)]=!0,this.Gj[this.j.La(h)]=!0,a==2&&c==2)return this.Ot(p,h,-1);if(a==1&&c==1)return this.Pt(-1);if(a==0&&c==0)return this.mr();throw m.i.Qa()},T.Xe=function(p){var h=p.getType();return h==197?(h=new m.Da(p.description),p.B()||h.ad(p,!1),h):h==33?(h=new m.de(p.description),p.B()||h.add(p),h):h==322?(h=new m.Ta(p.description),p.B()||h.oc(p,!0),h):p},T.ki=function(p,h,a){var c=p.getType();return c==197?(h=new m.Da(p.description),p.B()||h.ad(p,!1),h):c!=33||a!="|"&&a!="^"?c==322?(h=new m.Ta(p.description),p.B()||h.oc(p,!0),h):c==33&&a=="-"&&h.getType()==33||c==550&&a=="&"&&h.getType()==33?(h=new m.Sa(p.description),p.B()||p.ve(0,h),h):p:(h=new m.de(p.description),p.B()||h.add(p),h)},T.im=function(p,h,a,c){if(p.B()||h.B()||p.Db()>h.Db())return T.ki(T.Xe(p),p,"-");var d=new m.l;p.A(d);var g=new m.l;if(h.A(g),!d.isIntersecting(g))return T.ki(T.Xe(p),p,"-");var v=new m.l;return v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,c),c=g.im(v,h),c=d.Ne(c),p=T.ki(c,p,"-"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.VP=function(p,h,a){if(2>p.length)throw m.i.N("not enough geometries to dissolve");for(var c=0,d=0,g=p.length;d<g;d++)c=Math.max(p[d].Db(),c);var v=new m.l;v.Oa();var b=new m.gd,C=-1,M=0,O=-1;for(d=0,g=p.length;d<g;d++)if(p[d].Db()==c)if(p[d].B())O==-1&&(O=d);else{O=d,C==-1?C=b.Ib(T.Xe(p[d])):b.uN(C,T.Xe(p[d]));var L=new m.l;p[d].xc(L),v.Zb(L),M++}return 2>M?T.Xe(p[O]):(p=c==2,h=m.ta.Wd(c==0?h:null,v,!0),new T().Mk(b,C,h,p,!0,a))},T.Pz=function(p,h,a,c){var d=[null,null,null],g=new m.l;p.A(g);var v=new m.l;h.A(v);var b=new m.l;if(b.K(g),b.Zb(v),a=m.ta.Wd(a,b,!0),(b=new m.l).K(v),v=m.ta.Er(a),b.W(v,v),!g.isIntersecting(b)){if(p.Db()<=h.Db())return d[(p=T.ki(T.Xe(p.Ia()),p,"&")).Db()]=p,d;if(p.Db()>h.Db())return d[(p=T.ki(T.Xe(h.Ia()),p,"&")).Db()]=p,d}for(v=new T,b=(g=new m.gd).Ib(T.Xe(p)),h=g.Ib(T.Xe(h)),v.Ft(g,a,c),c=v.Pz(b,h),h=0;h<c.length;h++)v=T.ki(g.Ne(c[h]),p,"&"),m.aa.Hc(v.getType())&&(v.Ch(2,a),v.getType()==1736&&v.fm()),d[v.Db()]=v;return d},T.ep=function(p,h,a,c){if(p.Db()>h.Db())return T.ki(T.Xe(p),p,"^");if(p.Db()<h.Db()||p.B())return T.ki(T.Xe(h),p,"^");if(h.B())return T.ki(T.Xe(p),p,"^");var d=new m.l;p.A(d);var g=new m.l;h.A(g);var v=new m.l;return v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,c),c=g.ep(v,h),p=T.ki(d.Ne(c),p,"^"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.prototype.LQ=function(p,h){var a=this.j.g;p=a.vf(p,-1);for(var c=h.size,d=0;d<c;d++){var g=h.get(d);a.ij(p,g)}a.kn(p,!0)},T.prototype.aX=function(p,h){for(var a=this.j.g,c=a.ld;c!=-1;c=a.ue(c))if(c==h)for(var d=a.Ob(c);d!=-1;d=a.Rb(d)){var g=a.Xa(d);if(g!=-1)for(var v=a.U(g);v!=-1;){g=this.j.Le(g);var b=this.j.Le(v);(g=this.j.tR(g,b))!=-1&&(b=this.j.xa(g),this.j.Kb(g,p,1),this.j.Kb(b,p,2)),g=v,v=a.U(g)}}},T.prototype.cW=function(p,h,a,c){a=this.j.La(a),c=this.j.La(c);var d=new m.ia(0);d.Jb(256);for(var g=this.j.g,v=this.j.$g(),b=this.j.Re;b!=-1;b=this.j.Rf(b)){var C=this.j.Me(b);if(C!=-1){var M=C;do{if(this.j.Ab(M,v)!=1){var O=M,L=M,q=!1,U=0;do{if(this.j.Kb(O,v,1),!q){var ee=this.j.dh(O);ee&c&&this.j.af(O)&a&&(L=O,q=!0)}q&&(d.add(this.j.tj(this.j.km(this.j.jk(O)))),p!=-1&&(ee=this.j.dh(O))&c&&(U|=ee=this.j.Ab(O,p))),O=this.j.jc(O)}while(O!=L);q&&0<this.j.Kp(this.j.$e(L))&&(O=g.Ig(1736),this.LQ(O,d),h!=-1&&g.HJ(O,h,U)),d.clear(!1)}M=this.j.jc(this.j.xa(M))}while(M!=C)}}this.j.Jg(v)},T.prototype.FP=function(p,h,a,c){this.j.yW();var d=-1;p!=-1&&(d=this.j.$g(),this.aX(d,a)),this.cW(d,p,h,a),d!=-1&&(this.j.Jg(d),d=-1);var g=this.j.g;for(p=0,d=g.ld;d!=-1;d=g.ue(d))d!=h&&d!=a&&(c.add(d),p++);c.Vd(0,p,function(v,b){return(v=g.wz(g.Ob(v)))<(b=g.wz(g.Ob(b)))?-1:v==b?0:1})},T.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},T}();m.Fg=j}(ye||(ye={})),function(m){var j=function(){function T(p){p!==void 0?this.setScale(p):this.RB()}return T.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},T.prototype.Nb=function(p){return this==p||p instanceof T&&this.bb==p.bb&&this.eb==p.eb&&this.Gb==p.Gb&&this.jb==p.jb&&this.ab==p.ab&&this.Lb==p.Lb},T.prototype.cc=function(){return m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj()},T.prototype.Eh=function(p,h){var a=this.jb*p.x+this.ab*p.y+this.Lb;h.x=this.bb*p.x+this.eb*p.y+this.Gb,h.y=a},T.prototype.eY=function(p,h,a){for(var c=0;c<h;c++){var d=p[c].x,g=p[c].y,v=this.bb*d+this.eb*g+this.Gb;d=this.jb*d+this.ab*g+this.Lb,a[c]!=null?a[c].ma(v,d):a[c]=m.h.construct(v,d)}},T.prototype.multiply=function(p){T.multiply(this,p,this)},T.multiply=function(p,h,a){var c=p.bb*h.bb+p.jb*h.eb,d=p.eb*h.bb+p.ab*h.eb,g=p.Gb*h.bb+p.Lb*h.eb+h.Gb,v=p.bb*h.jb+p.jb*h.ab,b=p.eb*h.jb+p.ab*h.ab;p=p.Gb*h.jb+p.Lb*h.ab+h.Lb,a.bb=c,a.eb=d,a.Gb=g,a.jb=v,a.ab=b,a.Lb=p},T.prototype.Of=function(){var p=new T;return p.bb=this.bb,p.eb=this.eb,p.Gb=this.Gb,p.jb=this.jb,p.ab=this.ab,p.Lb=this.Lb,p},T.prototype.mC=function(p){if(!p.B()){for(var h=[],a=0;4>a;a++)h[a]=new m.h;p.nB(h),this.fY(h,h),p.Zw(h,4)}},T.prototype.fY=function(p,h){for(var a=0;a<p.length;a++){var c=new m.h,d=p[a];c.x=this.bb*d.x+this.eb*d.y+this.Gb,c.y=this.jb*d.x+this.ab*d.y+this.Lb,h[a]=c}},T.prototype.pS=function(p,h){p.B()||h.B()||p.R()==0||p.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=h.R()/p.R(),this.ab=h.ca()/p.ca(),this.Gb=h.v-p.v*this.bb,this.Lb=h.G-p.G*this.ab)},T.prototype.dY=function(p){var h=new m.h,a=new m.h;h.ma(this.bb,this.jb),a.ma(this.eb,this.ab),h.sub(h);var c=.5*h.Sk();return h.ma(this.bb,this.jb),a.ma(this.eb,this.ab),h.add(a),p*(c>(h=.5*h.Sk())?Math.sqrt(c):Math.sqrt(h))},T.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},T.prototype.isIdentity=function(p){if(p!==void 0){var h=m.h.construct(0,1);return this.Eh(h,h),h.sub(m.h.construct(0,1)),h.Sk()>p*p?!1:(h.ma(0,0),this.Eh(h,h),!(h.Sk()>p*p)&&(h.ma(1,0),this.Eh(h,h),h.sub(m.h.construct(1,0)),h.Sk()<=p*p))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},T.prototype.Bi=function(p){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*p*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},T.prototype.gg=function(p,h){this.bb=1,this.eb=0,this.Gb=p,this.jb=0,this.ab=1,this.Lb=h},T.prototype.setScale=function(p,h){h!==void 0?(this.bb=p,this.jb=this.Gb=this.eb=0,this.ab=h,this.Lb=0):this.setScale(p,p)},T.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},T.prototype.setRotate=function(p){this.pX(Math.cos(p),Math.sin(p))},T.prototype.pX=function(p,h){this.bb=p,this.eb=-h,this.Gb=0,this.jb=h,this.ab=p,this.Lb=0},T.prototype.shift=function(p,h){this.Gb+=p,this.Lb+=h},T.prototype.scale=function(p,h){this.bb*=p,this.eb*=p,this.Gb*=p,this.jb*=h,this.ab*=h,this.Lb*=h},T.prototype.flipX=function(p,h){this.bb=-this.bb,this.eb=-this.eb,this.Gb=p+h-this.Gb},T.prototype.flipY=function(p,h){this.jb=-this.jb,this.ab=-this.ab,this.Lb=p+h-this.Lb},T.prototype.rotate=function(p){var h=new T;h.setRotate(p),this.multiply(h)},T.prototype.inverse=function(p){if(p!==void 0){var h=this.bb*this.ab-this.eb*this.jb;h==0?p.lx():(h=1/h,p.Gb=(this.eb*this.Lb-this.Gb*this.ab)*h,p.Lb=(this.Gb*this.jb-this.bb*this.Lb)*h,p.bb=this.ab*h,p.eb=-this.eb*h,p.jb=-this.jb*h,p.ab=this.bb*h)}else this.inverse(this)},T}();m.Dd=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},T.prototype.setScale=function(p,h,a){this.bb=p,this.eb=this.Ze=this.jb=0,this.ab=h,this.Fe=this.Ee=this.Ge=0,this.He=a,this.hg=this.Lb=this.Gb=0},T.prototype.setTranslate=function(p,h,a){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=p,this.Lb=h,this.hg=a},T.prototype.translate=function(p,h,a){this.Gb+=p,this.Lb+=h,this.hg+=a},T.prototype.mC=function(p){if(!p.B()){for(var h=new m.Nd[8],a=0;8>a;a++)h[a]=new m.Nd;p.nB(h),this.transform(h,8,h),p.Zw(h)}},T.prototype.transform=function(p,h,a){for(var c=0;c<h;c++){var d=new m.Nd,g=p[c];d.x=this.bb*g.x+this.eb*g.y+this.Ee*g.z+this.Gb,d.y=this.jb*g.x+this.ab*g.y+this.Fe*g.z+this.Lb,d.z=this.Ze*g.x+this.Ge*g.y+this.He*g.z+this.hg,a[c]=d}},T.prototype.fp=function(p){var h=new m.Nd;return h.x=this.bb*p.x+this.eb*p.y+this.Ee*p.z+this.Gb,h.y=this.jb*p.x+this.ab*p.y+this.Fe*p.z+this.Lb,h.z=this.Ze*p.x+this.Ge*p.y+this.He*p.z+this.hg,h},T.prototype.Ag=function(p){T.multiply(this,p,this)},T.multiply=function(p,h,a){var c=p.bb*h.bb+p.jb*h.eb+p.Ze*h.Ee,d=p.bb*h.jb+p.jb*h.ab+p.Ze*h.Fe,g=p.bb*h.Ze+p.jb*h.Ge+p.Ze*h.He,v=p.eb*h.bb+p.ab*h.eb+p.Ge*h.Ee,b=p.eb*h.jb+p.ab*h.ab+p.Ge*h.Fe,C=p.eb*h.Ze+p.ab*h.Ge+p.Ge*h.He,M=p.Ee*h.bb+p.Fe*h.eb+p.He*h.Ee,O=p.Ee*h.jb+p.Fe*h.ab+p.He*h.Fe,L=p.Ee*h.Ze+p.Fe*h.Ge+p.He*h.He,q=p.Gb*h.bb+p.Lb*h.eb+p.hg*h.Ee+h.Gb,U=p.Gb*h.jb+p.Lb*h.ab+p.hg*h.Fe+h.Lb;p=p.Gb*h.Ze+p.Lb*h.Ge+p.hg*h.He+h.hg,a.bb=c,a.jb=d,a.Ze=g,a.eb=v,a.ab=b,a.Ge=C,a.Ee=M,a.Fe=O,a.He=L,a.Gb=q,a.Lb=U,a.hg=p},T.inverse=function(p,h){var a=p.bb*(p.ab*p.He-p.Ge*p.Fe)-p.jb*(p.eb*p.He-p.Ge*p.Ee)+p.Ze*(p.eb*p.Fe-p.ab*p.Ee);if(a==0)throw m.i.fa("math singularity");var c=1/a;a=(p.ab*p.He-p.Ge*p.Fe)*c;var d=-(p.eb*p.He-p.Ge*p.Ee)*c,g=(p.eb*p.Fe-p.ab*p.Ee)*c,v=-(p.jb*p.He-p.Fe*p.Ze)*c,b=(p.bb*p.He-p.Ze*p.Ee)*c,C=-(p.bb*p.Fe-p.jb*p.Ee)*c,M=(p.jb*p.Ge-p.Ze*p.ab)*c,O=-(p.bb*p.Ge-p.Ze*p.eb)*c;c*=p.bb*p.ab-p.jb*p.eb;var L=-(p.Gb*a+p.Lb*d+p.hg*g),q=-(p.Gb*v+p.Lb*b+p.hg*C);p=-(p.Gb*M+p.Lb*O+p.hg*c),h.bb=a,h.jb=v,h.Ze=M,h.eb=d,h.ab=b,h.Ge=O,h.Ee=g,h.Fe=C,h.He=c,h.Gb=L,h.Lb=q,h.hg=p},T.prototype.Of=function(){var p=new T;return p.bb=this.bb,p.jb=this.jb,p.Ze=this.Ze,p.eb=this.eb,p.ab=this.ab,p.Ge=this.Ge,p.Ee=this.Ee,p.Fe=this.Fe,p.He=this.He,p.Gb=this.Gb,p.Lb=this.Lb,p.hg=this.hg,p},T}();m.JY=j}(ye||(ye={})),function(m){var j=function(p){function h(a){if(a!==void 0)a=p.call(this,a.cc(),a)||this;else{(a=p.call(this)||this).bg=[],a.bg[0]=0,a.Aa=1,a.uh=[];for(var c=0;10>c;c++)a.uh[c]=-1;a.uh[a.bg[0]]=0}return a.jq=!0,a}return ri(h,p),h.prototype.re=function(a){this.hasAttribute(a)||(this.uh[a]=0,this.jD())},h.prototype.removeAttribute=function(a){if(a==0)throw m.i.N("Position attribue cannot be removed");this.hasAttribute(a)&&(this.uh[a]=-1,this.jD())},h.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var a=0;a<this.uh.length;a++)this.uh[a]=-1;this.uh[this.bg[0]]=0,this.jq=!0},h.prototype.EF=function(){return T.kz().add(this)},h.og=function(){return T.kz().$R()},h.prototype.tM=function(){var a=this.cc();return new m.ra(a,this)},h.prototype.jD=function(){for(var a=this.Aa=0,c=0;10>a;a++)0<=this.uh[a]&&(this.bg[c]=a,this.uh[a]=c,c++,this.Aa++);this.jq=!0},h.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},h.prototype.Nb=function(a){if(a==null)return!1;if(a==this)return!0;if(!(a instanceof h)||a.Aa!=this.Aa)return!1;for(var c=0;c<this.Aa;c++)if(this.bg[c]!=a.bg[c])return!1;return this.jq==a.jq},h.prototype.GG=function(a){if(a.Aa!=this.Aa)return!1;for(var c=0;c<this.Aa;c++)if(this.bg[c]!=a.bg[c])return!1;return!0},h.Iw=function(a,c){for(var d=[],g=0;g<a.Aa;g++)d[g]=-1;g=0;for(var v=a.Aa;g<v;g++)d[g]=c.Pf(a.kd(g));return d},h.BR=function(a,c){return(a=new h(a)).re(c),a.EF()},h.CR=function(a,c){for(var d=null,g=0;10>g;g++)!a.hasAttribute(g)&&c.hasAttribute(g)&&(d==null&&(d=new h(a)),d.re(g));return d!=null?d.EF():a},h}(m.ra);m.ee=j;var T=function(){function p(){this.map=[];var h=new j;this.add(h),(h=new j).re(1),this.add(h)}return p.kz=function(){return p.bL},p.prototype.$R=function(){return p.ft},p.prototype.add=function(h){var a=h.cc();if(p.ft!=null&&p.ft.cc()==a&&h.GG(p.ft))return p.ft;if(p.Dw!=null&&p.Dw.cc()==a&&h.GG(p.Dw))return p.Dw;var c=null;return this.map[a]!==void 0&&(c=this.map[a]),c==null&&((c=h.tM()).Aa==1?p.ft=c:c.Aa==2&&c.kd(1)==1?p.Dw=c:this.map[a]=c),c},p.bL=new p,p}()}(ye||(ye={}));var mn={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Br={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Cs=new(function(){function m(){this.RM=50,this.np=new Map,this.gj=[]}return m.prototype.clear=function(){this.gj.length=0,this.np.clear()},m.prototype.delete=function(j){return!!this.np.delete(j)&&(this.gj.splice(this.gj.indexOf(j),1),!0)},m.prototype.get=function(j){var T=this.np.get(j);if(T!==void 0)return this.gj[0]!==j&&(this.gj.splice(this.gj.indexOf(j),1),this.gj.unshift(j)),T},m.prototype.has=function(j){return this.np.has(j)},m.prototype.set=function(j,T){return this.get(j)!==void 0&&this.delete(j),this.gj.unshift(j),this.np.set(j,T),this.oM(),this},m.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var j=this.gj.pop();this.np.delete(j)}},m}()),xt=((ss={}).convertJSONToGeometry=function(m){return ye.$b.fP(m)},ss.hasM=function(m){return m.hasAttribute(ye.Ih.M)},ss.hasZ=function(m){return m.hasAttribute(ye.Ih.Z)},ss.getPointX=function(m){return m.Lg()},ss.getPointY=function(m){return m.ih()},ss.getPointZ=function(m){return m.bS()},ss.getPointM=function(m){return m.zR()},ss.getXMin=function(m){return m.es()},ss.getYMin=function(m){return m.gs()},ss.getXMax=function(m){return m.ds()},ss.getYMax=function(m){return m.fs()},ss.getZExtent=function(m){return m.Tg(ye.Ih.Z,0)},ss.getMExtent=function(m){return m.Tg(ye.Ih.M,0)},ss.exportPaths=function(m){var j=[],T=m.da(),p=null,h=null,a=m.hasAttribute(ye.Ih.Z),c=m.hasAttribute(ye.Ih.M);a&&(p=m.ub(ye.Ih.Z)),c&&(h=m.ub(ye.Ih.M));for(var d=new ye.h,g=0;g<T;g++){for(var v=m.Ba(g),b=m.Ja(g),C=0,M=0,O=NaN,L=NaN,q=NaN,U=NaN,ee=m.dc(g),Q=[],ge=v;ge<v+b;ge++){m.D(ge,d),U=q=NaN;var ve=[d.x,d.y];a&&(q=p.get(ge),ve.push(q)),c&&(U=h.get(ge),ve.push(U)),ge==v&&ee&&(C=d.x,M=d.y,O=q,L=U),Q.push(ve)}!ee||C==d.x&&M==d.y&&(!a||isNaN(O)&&isNaN(q)||O==q)&&(!c||isNaN(L)&&isNaN(U)||L==U)||Q.push(Q[0].slice(0)),j.push(Q)}return j},ss.exportPathsFlat=function(){},ss.exportPoints=function(m){var j=m.hasAttribute(ye.Ih.Z),T=m.hasAttribute(ye.Ih.M),p=null,h=null;j&&(p=m.ub(ye.Ih.Z)),T&&(h=m.ub(ye.Ih.M));for(var a=new ye.h,c=m.I(),d=[],g=0;g<c;g++){m.D(g,a);var v=[a.x,a.y];j&&v.push(p.get(g)),T&&v.push(h.get(g)),d.push(v)}return d},ss.exportPointsFlat=function(){},ss),Ys=new Map;return function(){function m(){}return m.buffer=de,m.clip=_,m.contains=S,m.convexHull=se,m.crosses=P,m.cut=x,m.densify=it,m.difference=oe,m.disjoint=V,m.distance=A,m.equals=k,m.extendedSpatialReferenceInfo=y,m.generalize=Fe,m.geodesicArea=Ct,m.geodesicBuffer=Se,m.geodesicDensify=vt,m.geodesicLength=qt,m.intersect=ce,m.intersects=$,m.isSimple=J,m.nearestCoordinate=Re,m.nearestVertex=Oe,m.nearestVertices=we,m.offset=ne,m.overlaps=B,m.planarArea=ot,m.planarLength=ut,m.relate=W,m.simplify=re,m.symmetricDifference=pe,m.touches=F,m.union=ue,m.within=G,m.rotate=ye.Ex.rotate,m.flipHorizontal=ye.Ex.JQ,m.flipVertical=ye.Ex.KQ,m.intersectLinesToPoints=ho,m.ExtendedParams=ye.yC,m.clearDefaultSpatialReferenceTolerance=dr,m.changeDefaultSpatialReferenceTolerance=Us,m._enableProjection=Lt,m._project=us,m._getTransformation=Dt,m._getTransformationBySuitability=Wi,m}()}var i=e();i!==void 0&&(t.exports=i)}(Fee)),Fee.exports}var B0e=kXe();const Ki=AXe(B0e),NXe=DXe({__proto__:null,default:Ki},[B0e]),$Xe=Object.freeze(Object.defineProperty({__proto__:null,G:Ki,g:NXe},Symbol.toStringTag,{value:"Module"})),As={convertToGEGeometry:OXe,exportPoint:RXe,exportPolygon:LXe,exportPolyline:FXe,exportMultipoint:zXe,exportExtent:qXe};function OXe(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function RXe(t,e,i){const s=t.hasZ(e),n=t.hasM(e),r=new Yi({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return s&&(r.z=t.getPointZ(e)),n&&(r.m=t.getPointM(e)),r.cache._geVersion=e,r}function LXe(t,e,i){const s=new Za({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function FXe(t,e,i){const s=new If({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function zXe(t,e,i){const s=new $v({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return s.cache._geVersion=e,s}function qXe(t,e,i){const s=t.hasZ(e),n=t.hasM(e),r=new ur({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(s){const o=t.getZExtent(e);r.zmin=o.vmin,r.zmax=o.vmax}if(n){const o=t.getMExtent(e);r.mmin=o.vmin,r.mmax=o.vmax}return r.cache._geVersion=e,r}const VXe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:As},Symbol.toStringTag,{value:"Module"}));function $s(t){const e=Array.isArray(t)?t[0].spatialReference:t.spatialReference;return e?xC(qi,e):qi.WGS84}function GXe(t){return Ki.extendedSpatialReferenceInfo(t)}function jXe(t,e){return Ki.clip(As,$s(t),t,e)}function BXe(t,e){return Ki.cut(As,$s(t),t,e)}function HXe(t,e){return Ki.contains(As,$s(t),t,e)}function UXe(t,e){return Ki.crosses(As,$s(t),t,e)}function H0e(t,e,i){return Ki.distance(As,$s(t),t,e,i)}function YXe(t,e){return Ki.equals(As,$s(t),t,e)}function XXe(t,e){return Ki.intersects(As,$s(t),t,e)}function WXe(t,e){return Ki.touches(As,$s(t),t,e)}function ZXe(t,e){return Ki.within(As,$s(t),t,e)}function KXe(t,e){return Ki.disjoint(As,$s(t),t,e)}function JXe(t,e){return Ki.overlaps(As,$s(t),t,e)}function QXe(t,e,i){return Ki.relate(As,$s(t),t,e,i)}function eWe(t){return Ki.isSimple(As,$s(t),t)}function U0e(t){return Ki.simplify(As,$s(t),t)}function tWe(t,e=!1){return Ki.convexHull(As,$s(t),t,e)}function iWe(t,e){return Ki.difference(As,$s(t),t,e)}function sWe(t,e){return Ki.symmetricDifference(As,$s(t),t,e)}function nWe(t,e){return Ki.intersect(As,$s(t),t,e)}function rWe(t,e=null){return Ki.union(As,$s(t),t,e)}function oWe(t,e,i,s,n,r){return Ki.offset(As,$s(t),t,e,i,s,n,r)}function aWe(t,e,i,s=!1){return Ki.buffer(As,$s(t),t,e,i,s)}function lWe(t,e,i,s,n,r){return Ki.geodesicBuffer(As,$s(t),t,e,i,s,n,r)}function cWe(t,e,i=!0){return Ki.nearestCoordinate(As,$s(t),t,e,i)}function uWe(t,e){return Ki.nearestVertex(As,$s(t),t,e)}function hWe(t,e,i,s){return Ki.nearestVertices(As,$s(t),t,e,i,s)}function rj(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function dWe(t,e,i){if(t==null)throw new z2;const s=t.spatialReference;if((i=i??rj(t))==null)throw new z2;const n=t.constructor.fromJSON(Ki.rotate(t,e,i));return n.spatialReference=s,n}function fWe(t,e){if(t==null)throw new z2;const i=t.spatialReference;if((e=e??rj(t))==null)throw new z2;const s=t.constructor.fromJSON(Ki.flipHorizontal(t,e));return s.spatialReference=i,s}function pWe(t,e){if(t==null)throw new z2;const i=t.spatialReference;if((e=e??rj(t))==null)throw new z2;const s=t.constructor.fromJSON(Ki.flipVertical(t,e));return s.spatialReference=i,s}function mWe(t,e,i,s){return Ki.generalize(As,$s(t),t,e,i,s)}function gWe(t,e,i){return Ki.densify(As,$s(t),t,e,i)}function yWe(t,e,i,s=0){return Ki.geodesicDensify(As,$s(t),t,e,i,s)}function vWe(t,e){return Ki.planarArea(As,$s(t),t,e)}function _We(t,e){return Ki.planarLength(As,$s(t),t,e)}function bWe(t,e,i){return Ki.geodesicArea(As,$s(t),t,e,i)}function xWe(t,e,i){return Ki.geodesicLength(As,$s(t),t,e,i)}function wWe(t,e){return Ki.intersectLinesToPoints(As,$s(t),t,e)}function SWe(t,e){Ki.changeDefaultSpatialReferenceTolerance(t,e)}function EWe(t){Ki.clearDefaultSpatialReferenceTolerance(t)}let z2=class extends Error{constructor(){super("Illegal Argument Exception")}};const Tvt=Object.freeze(Object.defineProperty({__proto__:null,buffer:aWe,changeDefaultSpatialReferenceTolerance:SWe,clearDefaultSpatialReferenceTolerance:EWe,clip:jXe,contains:HXe,convexHull:tWe,crosses:UXe,cut:BXe,densify:gWe,difference:iWe,disjoint:KXe,distance:H0e,equals:YXe,extendedSpatialReferenceInfo:GXe,flipHorizontal:fWe,flipVertical:pWe,generalize:mWe,geodesicArea:bWe,geodesicBuffer:lWe,geodesicDensify:yWe,geodesicLength:xWe,intersect:nWe,intersectLinesToPoints:wWe,intersects:XXe,isSimple:eWe,nearestCoordinate:cWe,nearestVertex:uWe,nearestVertices:hWe,offset:oWe,overlaps:JXe,planarArea:vWe,planarLength:_We,relate:QXe,rotate:dWe,simplify:U0e,symmetricDifference:sWe,touches:WXe,union:rWe,within:ZXe},Symbol.toStringTag,{value:"Module"}));function CWe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function PWe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function TWe(t,e,i,s,n,r,o){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t}function Y0e(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5];let u=i*r-s*n;return u?(u=1/u,t[0]=r*u,t[1]=-s*u,t[2]=-n*u,t[3]=i*u,t[4]=(n*l-r*o)*u,t[5]=(s*o-i*l)*u,t):null}function IWe(t){return t[0]*t[3]-t[1]*t[2]}function X0e(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=i[0],y=i[1],_=i[2],x=i[3],S=i[4],P=i[5];return t[0]=s*f+r*y,t[1]=n*f+o*y,t[2]=s*_+r*x,t[3]=n*_+o*x,t[4]=s*S+r*P+l,t[5]=n*S+o*P+u,t}function MWe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=Math.sin(i),y=Math.cos(i);return t[0]=s*y+r*f,t[1]=n*y+o*f,t[2]=s*-f+r*y,t[3]=n*-f+o*y,t[4]=l,t[5]=u,t}function AWe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=i[0],y=i[1];return t[0]=s*f,t[1]=n*f,t[2]=r*y,t[3]=o*y,t[4]=l,t[5]=u,t}function DWe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],u=e[5],f=i[0],y=i[1];return t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=s*f+r*y+l,t[5]=n*f+o*y+u,t}function kWe(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t}function NWe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function $We(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function OWe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function RWe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function LWe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function W0e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function FWe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function zWe(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t}function qWe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function VWe(t,e){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],u=e[0],f=e[1],y=e[2],_=e[3],x=e[4],S=e[5],P=oo();return Math.abs(i-u)<=P*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-f)<=P*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(n-y)<=P*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=P*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(o-x)<=P*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(l-S)<=P*Math.max(1,Math.abs(l),Math.abs(S))}const GWe=X0e,jWe=W0e;Object.freeze(Object.defineProperty({__proto__:null,add:LWe,copy:CWe,determinant:IWe,equals:VWe,exactEquals:qWe,frob:RWe,fromRotation:kWe,fromScaling:NWe,fromTranslation:$We,identity:PWe,invert:Y0e,mul:GWe,multiply:X0e,multiplyScalar:FWe,multiplyScalarAndAdd:zWe,rotate:MWe,scale:AWe,set:TWe,str:OWe,sub:jWe,subtract:W0e,translate:DWe},Symbol.toStringTag,{value:"Module"}));function BWe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Z0e(t,e,i){i*=.5;const s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t}function HWe(t,e){const i=2*Math.acos(e[3]),s=Math.sin(i/2);return s>oo()?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),i}function K0e(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=i[0],u=i[1],f=i[2],y=i[3];return t[0]=s*y+o*l+n*f-r*u,t[1]=n*y+o*u+r*l-s*f,t[2]=r*y+o*f+s*u-n*l,t[3]=o*y-s*l-n*u-r*f,t}function UWe(t,e,i){i*=.5;const s=e[0],n=e[1],r=e[2],o=e[3],l=Math.sin(i),u=Math.cos(i);return t[0]=s*u+o*l,t[1]=n*u+r*l,t[2]=r*u-n*l,t[3]=o*u-s*l,t}function YWe(t,e,i){i*=.5;const s=e[0],n=e[1],r=e[2],o=e[3],l=Math.sin(i),u=Math.cos(i);return t[0]=s*u-r*l,t[1]=n*u+o*l,t[2]=r*u+s*l,t[3]=o*u-n*l,t}function XWe(t,e,i){i*=.5;const s=e[0],n=e[1],r=e[2],o=e[3],l=Math.sin(i),u=Math.cos(i);return t[0]=s*u+n*l,t[1]=n*u-s*l,t[2]=r*u+o*l,t[3]=o*u-r*l,t}function WWe(t,e){const i=e[0],s=e[1],n=e[2];return t[0]=i,t[1]=s,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-n*n)),t}function zI(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=e[3];let u,f,y,_,x,S=i[0],P=i[1],A=i[2],k=i[3];return f=n*S+r*P+o*A+l*k,f<0&&(f=-f,S=-S,P=-P,A=-A,k=-k),1-f>oo()?(u=Math.acos(f),y=Math.sin(u),_=Math.sin((1-s)*u)/y,x=Math.sin(s*u)/y):(_=1-s,x=s),t[0]=_*n+x*S,t[1]=_*r+x*P,t[2]=_*o+x*A,t[3]=_*l+x*k,t}function ZWe(t){const e=kC,i=e(),s=e(),n=e(),r=Math.sqrt(1-i),o=Math.sqrt(i);return t[0]=r*Math.sin(2*Math.PI*s),t[1]=r*Math.cos(2*Math.PI*s),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function J0e(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=i*i+s*s+n*n+r*r,l=o?1/o:0;return t[0]=-i*l,t[1]=-s*l,t[2]=-n*l,t[3]=r*l,t}function KWe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Q0e(t,e){const i=e[0]+e[4]+e[8];let s;if(i>0)s=Math.sqrt(i+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3;s=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*o+o]+1),t[n]=.5*s,s=.5/s,t[3]=(e[3*r+o]-e[3*o+r])*s,t[r]=(e[3*r+n]+e[3*n+r])*s,t[o]=(e[3*o+n]+e[3*n+o])*s}return t}function JWe(t,e,i,s){const n=.5*Math.PI/180;e*=n,i*=n,s*=n;const r=Math.sin(e),o=Math.cos(e),l=Math.sin(i),u=Math.cos(i),f=Math.sin(s),y=Math.cos(s);return t[0]=r*u*y-o*l*f,t[1]=o*l*y+r*u*f,t[2]=o*u*f-r*l*y,t[3]=o*u*y+r*l*f,t}function QWe(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const eZe=O2,tZe=dG,iZe=xfe,sZe=K0e,nZe=Cfe,rZe=mG,oZe=hA,ege=fG,aZe=ege,tge=pG,lZe=tge,oj=Ife,cZe=Mfe,uZe=BC;function ige(t,e,i){const s=Es(e,i);return s<-.999999?(Gr(Ed,hZe,e),dme(Ed)<1e-6&&Gr(Ed,dZe,e),Eo(Ed,Ed),Z0e(t,Ed,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Gr(Ed,e,i),t[0]=Ed[0],t[1]=Ed[1],t[2]=Ed[2],t[3]=1+s,oj(t,t))}const Ed=Nt(),hZe=_l(1,0,0),dZe=_l(0,1,0);function fZe(t,e,i,s,n,r){return zI(zee,e,n,r),zI(qee,i,s,r),zI(t,zee,qee,2*r*(1-r)),t}const zee=mv(),qee=mv();function pZe(t,e,i,s){const n=mZe;return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=s[0],n[4]=s[1],n[7]=s[2],n[2]=-e[0],n[5]=-e[1],n[8]=-e[2],oj(t,Q0e(t,n))}const mZe=DA();Object.freeze(Object.defineProperty({__proto__:null,add:iZe,calculateW:WWe,conjugate:KWe,copy:eZe,dot:rZe,equals:uZe,exactEquals:cZe,fromEuler:JWe,fromMat3:Q0e,getAxisAngle:HWe,identity:BWe,invert:J0e,len:aZe,length:ege,lerp:oZe,mul:sZe,multiply:K0e,normalize:oj,random:ZWe,rotateX:UWe,rotateY:YWe,rotateZ:XWe,rotationTo:ige,scale:nZe,set:tZe,setAxes:pZe,setAxisAngle:Z0e,slerp:zI,sqlerp:fZe,sqrLen:lZe,squaredLength:tge,str:QWe},Symbol.toStringTag,{value:"Module"}));function M6(t,e,i=null){return i!=null?[t,e,i]:[t,e]}function In(t,e,i=null){return i!=null?{x:t,y:e,z:i}:{x:t,y:e}}let sge=class{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(i=>this.mapToLocal(i)).filter(yl)}get doUnnormalization(){return!1}},nge=class extends sge{constructor(e,i,s=null){super(i),this._defaultZ=s,this.transform=P6(),this.transformInv=P6(),this.transform=_0e(e),Y0e(this.transformInv,this.transform)}makeMapPoint(e,i){return M6(e,i,this._defaultZ)}mapToLocal(e){return In(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return M6(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}},gZe=class extends sge{constructor(e,i){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Nt(),this.tangentFrameUpWS=Nt(),this.tangentFrameRightWS=Nt(),this.tangentFrameForwardWS=Nt(),this.localFrameRightWS=Nt(),this.localFrameUpWS=Nt(),this.worldToLocalTransform=mv(),this.localToWorldTransform=mv(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const s=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Yh.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Yh.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Yh.Z,this.tangentFrameForwardWS);const n=Nt();qc(n,this.tangentFrameForwardWS,Es(s,this.tangentFrameForwardWS)),$r(this.localFrameRightWS,s,n),Eo(this.localFrameRightWS,this.localFrameRightWS),Gr(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),ige(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),J0e(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,i){return M6(e,i,this.defaultZ)}mapToLocal(e){const i=Nt();this.view.renderCoordsHelper.toRenderCoords(new Yi({x:e[0],y:e[1],spatialReference:this.spatialReference}),i),$F(i,i,this.worldToLocalTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(i,new Yi({spatialReference:this.view.spatialReference}));return s!=null?In(s.x/this.scale,s.y/this.scale):null}localToMap(e){const i=Nt();this.view.renderCoordsHelper.toRenderCoords(new Yi({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),i),$F(i,i,this.localToWorldTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(i,new Yi({spatialReference:this.view.spatialReference}));return s!=null?M6(s.x,s.y,this.defaultZ):null}};function Dvt(t,e){if(t.type==="2d")return new nge(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if(t.type==="3d"){const i=e.length>2?new Yi({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new Yi({x:e[0],y:e[1],spatialReference:t.spatialReference});return new gZe(t,i)}return null}function ky(t,e){const i=new Yi({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function kvt(t,e){return new $v({points:t,spatialReference:e})}function Nvt(t,e,i){const s=new If({paths:t,spatialReference:e});return i&&due(s),s}function UA(t,e,i,s=!0){const n=Ue(t);n.forEach(o=>{const l=o[0],u=o[o.length-1];ff(l,u)&&o.length!==1||o.push(o[0])});let r=new Za({rings:n,spatialReference:e});return r.rings.forEach(o=>{VM(o)||o.reverse()}),i&&due(r),s&&r.isSelfIntersecting&&Ou(e)&&(r=U0e(r)),r}function yZe(t,e,i){const s=e.mapToLocalMultiple(t),n=[],r={x:s[0].x,y:s[0].y},o={x:s[1].x,y:s[1].y},l=Math.round(o.x-r.x),u=Math.round(o.y-r.y),f=Math.max(Math.abs(l),Math.abs(u));if(i){const y={x:r.x+f,y:r.y+f},_={x:r.x-f,y:r.y-f};n.push(In(y.x,_.y),In(_.x,_.y),In(_.x,y.y),In(y.x,y.y))}else{const y={x:l>0?r.x+f:r.x-f,y:u>0?r.y+f:r.y-f};n.push(In(r.x,r.y),In(y.x,r.y),In(y.x,y.y),In(r.x,y.y))}return rge(UA([n.map(y=>e.localToMap(y)).filter(yl)],e.spatialReference,e.doUnnormalization,!0),n,e)}function vZe(t,e,i){let s=e.mapToLocalMultiple(t);if(s.length===1){const u=s[0];s=[In(u.x-48,u.y+48),In(u.x+48,u.y-48),In(u.x+48,u.y-48),In(u.x-48,u.y+48)]}const n=[],r={x:s[0].x,y:s[0].y},o={x:s[1].x,y:s[1].y};if(i){const l=Math.round(o.x-r.x),u=Math.round(o.y-r.y);n.push(In(r.x-l,r.y-u),In(o.x,r.y-u),In(o.x,o.y),In(r.x-l,o.y))}else n.push(In(r.x,r.y),In(o.x,r.y),In(o.x,o.y),In(r.x,o.y));return rge(UA([n.map(l=>e.localToMap(l)).filter(yl)],e.spatialReference,e.doUnnormalization,!0),n,e)}function rge(t,e,i){const s=G4(e[3],e[2],i),n=G4(e[1],e[2],i),r=G4(e[0],e[1],i),o=G4(e[0],e[3],i);return{geometry:t,midpoints:s!=null&&n!=null&&r!=null&&o!=null?{top:s,right:n,bottom:r,left:o}:null}}function G4(t,e,i){$_[0]=t.x,$_[1]=t.y,$_[2]=0,O_[0]=e.x,O_[1]=e.y,O_[2]=0,Cx($_,$_,O_,.5),j4.x=$_[0],j4.y=O_[1],j4.z=O_[2];const s=i.localToMap(j4);return s!=null?ky(s,i.spatialReference):null}const j4=In(0,0,0),$_=Nt(),O_=Nt();function _Ze(t,e,i,s){const n=e.mapToLocalMultiple(t);let r=null,o=null;if(i)r=n[0],o=n[1];else{const P=n[0],A=n[1],k=Math.round(A.x-P.x),$=Math.round(A.y-P.y),F=Math.max(Math.abs(k),Math.abs($));r=In(k>0?P.x+F/2:P.x-F/2,$>0?P.y+F/2:P.y-F/2),o=In(Math.abs(k)>Math.abs($)?r.x-F/2:r.x,Math.abs(k)>Math.abs($)?r.y:r.y-F/2)}const l=e.localToMap(r),u=e.localToMap(o);if(l==null||u==null)return null;e.doUnnormalization&&fue([[l,u]],e.spatialReference);const f=ky(l,e.spatialReference),y=ky(u,e.spatialReference),_=Zp(e.spatialReference);let x=0;if(Ou(e.spatialReference))x=_*H0e(f,y,null);else{const P=r.x-o.x,A=r.y-o.y;x=_*Math.sqrt(P*P+A*A)*(s||1)}const S=new MXe({center:f,radius:x,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:UA(S.rings,S.spatialReference,!1),center:f,edge:y}}function bZe(t,e,i){const s=e.mapToLocalMultiple(t),n=s[0],r=s[1],o=Math.round(r.x-n.x),l=Math.round(r.y-n.y),u=In(i?n.x:n.x+o/2,i?n.y:n.y+l/2),f=i?o:o/2,y=i?l:l/2,_=60,x=[],S=2*Math.PI/_;function P(W){const J=Math.cos(W),re=Math.sin(W);return In(f*J+u.x,y*re+u.y)}for(let W=0;W<_;W++)x.push(P(W*S));x.push(x[0]);const{spatialReference:A,doUnnormalization:k}=e,$=UA([x.map(W=>e.localToMap(W)).filter(yl)],A,k,!1),F=e.localToMap(P(Math.PI/2)),G=e.localToMap(P(0)),V=e.localToMap(P(-Math.PI/2)),B=e.localToMap(P(Math.PI));return{geometry:$,midpoints:F!=null&&G!=null&&V!=null&&B!=null?{top:ky(F,A),right:ky(G,A),bottom:ky(V,A),left:ky(B,A)}:null}}var Ap,Vee,Gee;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Ap||(Ap={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Vee||(Vee={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Gee||(Gee={}));var Cy;(function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"})(Cy||(Cy={}));let xZe=class{constructor(){this._isToolEditable=!0,this._manipulators=new ci,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,i=Cy.WhenToolEditable){this.addMany([e],i)}addMany(e,i=Cy.WhenToolEditable){for(const s of e){const n={manipulator:s,visibilityPredicate:i,attached:!1};this._manipulators.add(n),this._attached&&this._updateManipulatorAttachment(n)}}remove(e){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.at(i).manipulator===e){const s=this._manipulators.splice(i,1)[0];this._detachManipulator(s);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>e.destroy()),this._manipulators.destroy(),this._resourceContexts=null}on(e,i){return this._manipulators.on(e,s=>{i(s)})}forEach(e){for(const i of this._manipulators.items)e(i)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(i=>e.push(i.manipulator)),e}intersect(e,i){let s=null,n=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:r,attached:o})=>{if(!o||!r.interactive)return;const l=r.intersectionDistance(e,i);l!=null&&l<n&&(n=l,s=r)}),s}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const i=e.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===Cy.Always||(this._isToolEditable?e.visibilityPredicate===Cy.WhenToolEditable:e.visibilityPredicate===Cy.WhenToolNotEditable)}},ua=class extends Ei{constructor(e){super(e),this.manipulators=new xZe,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Ap.MANAGER,!0],[Ap.USER,!0]]),this._creationFinishedResolver=Tc()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Ap.USER)}set editable(e){this.setEditableFlag(Ap.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){this.view!=null&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,i){this._editableFlags.set(e,i),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Ap.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}endDrag(){const e=this.view.inputManager.latestPointerLocation;if(!e)return;let i=!1;this.manipulators.forEach(({manipulator:s})=>{s.dragging&&(i=!0,s.events.emit("drag",{action:"end",start:e,screenPoint:e}))}),i&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Ap.USER)&&this.getEditableFlag(Ap.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};I([N({constructOnly:!0})],ua.prototype,"view",void 0),I([N({readOnly:!0})],ua.prototype,"active",null),I([N({value:!0})],ua.prototype,"visible",null),I([N({value:!0})],ua.prototype,"editable",null),I([N({readOnly:!0})],ua.prototype,"manipulators",void 0),I([N({readOnly:!0})],ua.prototype,"updating",null),I([N()],ua.prototype,"cursor",null),I([N({readOnly:!0})],ua.prototype,"automaticManipulatorSelection",void 0),I([N()],ua.prototype,"hasFocusedManipulators",null),I([N()],ua.prototype,"hasGrabbedManipulators",void 0),I([N()],ua.prototype,"hasHoveredManipulators",void 0),I([N()],ua.prototype,"firstGrabbedManipulator",void 0),I([N({readOnly:!0})],ua.prototype,"created",void 0),I([N({readOnly:!0})],ua.prototype,"removeIncompleteOnCancel",void 0),ua=I([ke("esri.views.interactive.InteractiveToolBase")],ua);let cl=class extends Ei{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:s6};const i=ODe($De(Ov(s6),this.coordinates),2*this.strokeWidth);i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]+.5),i[3]=Math.ceil(i[3]+.5);for(const s of this.coordinates)e.push([Math.floor(s[0]-i[0])+.5,Math.floor(s[1]-i[1])+.5]);return e.reverse(),{coordinates:e,rect:i}}render(){const{coordinates:e,rect:i}=this._renderCoordinates,s=_ue(i),n=bue(i);return kt("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:i[0]+"px",top:i[1]+"px",width:s+"px",height:n+"px",visibility:this.visible?"visible":"hidden"}},kt("svg",{height:n,styles:{display:"block"},width:s},kt("polygon",{fill:this._fillStyle,points:e.map(([r,o])=>`${r},${o}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),kt("polygon",{fill:"transparent",points:e.map(([r,o])=>`${r},${o}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};I([N()],cl.prototype,"coordinates",void 0),I([N()],cl.prototype,"strokeDash",void 0),I([N()],cl.prototype,"strokeWidth",void 0),I([N()],cl.prototype,"strokeColor",void 0),I([N()],cl.prototype,"strokeDashColor",void 0),I([N()],cl.prototype,"fillColor",void 0),I([N()],cl.prototype,"visible",void 0),I([N()],cl.prototype,"isDecoration",void 0),I([N({readOnly:!0})],cl.prototype,"_strokeStyle",null),I([N({readOnly:!0})],cl.prototype,"_strokeBackgroundStyle",null),I([N({readOnly:!0})],cl.prototype,"_fillStyle",null),I([N({readOnly:!0})],cl.prototype,"_renderCoordinates",null),cl=I([ke("esri.views.overlay.OutlineOverlayItem")],cl);const wZe=cl;let bc=class extends Sa.EventedMixin(ua){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=i=>this.drawOperation.on(i,s=>{this._updateVisuals(),this.emit(i,s)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=no(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e;return((e=this.drawOperation)==null?void 0:e.updating)??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new os({view:e,manipulators:this.manipulators,geometryType:SZe(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new JF,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){var o,l,u;const{drawOperation:e}=this;if(!(e!=null&&e.geometryIncludingUncommittedVertices.length))return[];const{coordinateHelper:i}=e,s=e.committableVertex,n=e.committedVertices.slice();s!=null&&n.push(i.pointToArray(s));const r=n.length;switch(this.geometryType){case"circle":case"rectangle":{const f=new nge(b0e,JF.spatialReference),y=this.geometryType==="circle"?_Ze:yZe,_=this.geometryType==="circle"?bZe:vZe;if(r===1&&e.isCompleted){const x=n[0],S=f.makeMapPoint(x[0]+EZe,x[1]);return((o=y([x,S],f,!0))==null?void 0:o.geometry.rings[0])??[]}if(r===2){const x=this.geometryType!=="rectangle",S=this.centeredToggled!==x,P=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==P?(l=y(n,f,S))==null?void 0:l.geometry.rings[0]:(u=_(n,f,S))==null?void 0:u.geometry.rings[0])??[]}return[]}}return n}_updateVisuals(){var e;if(!this._overlayItem){const i=new wZe({strokeDash:[5],strokeDashColor:[255,255,255,255]});(e=this.view.overlay)==null||e.addItem(i),this.addHandles(ds(()=>{var s;(s=this.view.overlay)==null||s.removeItem(i),i==null||i.destroy(),this._overlayItem=void 0})),this._overlayItem=i}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function SZe(t){switch(t){case"polygon":case"point":return t;case"circle":case"rectangle":return"segment"}}I([N({value:!1})],bc.prototype,"centeredToggled",null),I([N()],bc.prototype,"drawOperation",void 0),I([N({value:!0})],bc.prototype,"enabled",null),I([N({value:!1})],bc.prototype,"uniformSizeToggled",null),I([N({constructOnly:!0})],bc.prototype,"geometryType",void 0),I([N({constructOnly:!0})],bc.prototype,"mode",void 0),I([N({readOnly:!0})],bc.prototype,"type",void 0),I([N({readOnly:!0})],bc.prototype,"updating",null),I([N({constructOnly:!0,nonNullable:!0})],bc.prototype,"view",void 0),I([N()],bc.prototype,"cursor",null),bc=I([ke("esri.views.draw.DrawScreenTool")],bc);const EZe=48;function dN(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function CZe(t){let e=0,i=0;for(let s=0;s<t.length;s++){const n=t[s].size;typeof n=="number"&&(e+=n,i++)}return e/i}function jee(t,e){var i;return typeof t=="number"?t:(i=t==null?void 0:t.stops)!=null&&i.length?CZe(t.stops):e}function PZe(t,e){if(!e)return t;const i=e.filter(o=>o.type==="size").map(o=>{const{maxSize:l,minSize:u}=o;return(jee(l,t)+jee(u,t))/2});let s=0;const n=i.length;if(n===0)return t;for(let o=0;o<n;o++)s+=i[o];const r=Math.floor(s/n);return Math.max(r,t)}function oge(t){var r;const e=t==null?void 0:t.renderer,i=t==null?void 0:t.pointerType,s=i==="touch"?9:6;if(!e)return s;const n="visualVariables"in e?PZe(s,e.visualVariables):s;if(e.type==="simple")return dN(n,e.symbol);if(e.type==="unique-value"){let o=n;return(r=e.uniqueValueInfos)==null||r.forEach(l=>{o=dN(o,l.symbol)}),o}if(e.type==="class-breaks"){let o=n;return e.classBreakInfos.forEach(l=>{o=dN(o,l.symbol)}),o}return e.type==="dot-density"||e.type,n}function age(t,e,i,s=new ur){let n=0;if(i.type==="2d")n=e*(i.resolution??0);else if(i.type==="3d"){const y=i.overlayPixelSizeInMapUnits(t),_=i.basemapSpatialReference;n=_==null||_.equals(i.spatialReference)?e*y:Zp(_)/Zp(i.spatialReference)}const r=t.x-n,o=t.y-n,l=t.x+n,u=t.y+n,{spatialReference:f}=i;return s.xmin=Math.min(r,l),s.ymin=Math.min(o,u),s.xmax=Math.max(r,l),s.ymax=Math.max(o,u),s.spatialReference=f,s}function Fvt(t,e,i){const s=i.toMap(t);return s==null?!1:age(s,oge(),i,TZe).intersects(e)}const TZe=new ur;async function IZe(){return nt(()=>import("./geometryEngineJSON-axG6AZK_.js").then(t=>t.g),__vite__mapDeps([239,174]),import.meta.url)}async function MZe(){return IZe().then(({contains:t,intersects:e,overlaps:i,simplify:s})=>({contains:t,intersects:e,overlaps:i,simplify:s}))}async function AZe(t){const{currentSelection:e,selector:i,signal:s,sources:n,view:r}=t;if(!(n!=null&&n.length))return{added:[],removed:[]};const{layers:o,layerViews:l,graphicsLayers:u}=$Ze(n),f=(await _C(Promise.all([kZe(i,o,r,s),NZe(i,l,r,s),DZe(i,u,r)]),s)).flat();if(!e)return{added:f,removed:[]};const y=e.toArray(),_=f.filter(S=>!Bee(y,S)),x=y.filter(S=>!Bee(f,S));return e.removeMany(x),e.addMany(_),{added:_,removed:x}}const DZe=async(t,e,i)=>FZe({candidates:e.flatMap(s=>s.graphics.toArray())??[],selector:t,view:i}),kZe=async(t,e,i,s)=>{const n=await Qh(RZe({selector:t,signal:s,layers:e,view:i}));return n?lge(n):[]},NZe=async(t,e,i,s)=>{const n=await Qh(OZe({selector:t,signal:s,layerViews:e,view:i}));return n?lge(n):[]};function lge(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i];s.status==="fulfilled"&&e.push(...s.value)}return e}function $Ze(t){const e=[],i=[],s=[];return t.forEach(n=>{var r,o;c$e(n)?e.push(n):(Yhe(n)||Xhe(n))&&((r=n.layers)!=null&&r.length)?e.push(...n.layers.toArray()):h$e(n)&&((o=n.sublayers)!=null&&o.length)?s.push(...n.sublayers.toArray()):u$e(n)?s.push(n):RI(n)&&i.push(n)}),{layers:e,layerViews:i,graphicsLayers:s}}function Bee(t,e){if(t.includes(e))return!0;const i=e.getObjectId(),s=i!=null,{layer:n,uid:r}=e;return s?t.some(o=>{if(n===o.layer)return i===o.getObjectId()}):t.some(o=>{if(n===o.layer)return r===o.uid})}async function OZe(t){const{layerViews:e,selector:i,signal:s,view:n}=t;return _C(Promise.allSettled(e.map(async r=>{const o=r.createQuery(),{geometry:l}=cge(i,r.layer,n);return o.outFields=["*"],o.geometry=l,o.returnGeometry=!0,o.outSpatialReference=n.spatialReference,r.queryFeatures(o,{signal:s}).then(({features:u})=>u)})),s)}async function RZe(t){const{layers:e,selector:i,signal:s,view:n}=t;return _C(Promise.allSettled(e.map(async r=>r.queryFeatures(LZe(r.createQuery(),i,r,n),{signal:s}).then(({features:o})=>o))),s)}function cge(t,e,i){const s="displayField"in e?e.displayField:null,n=Ahe({displayField:s,fields:e.fields}),r=[e.objectIdField];n!=null&&e.fieldsIndex.has(n)&&r.push(n);const o="renderer"in e?oge({renderer:e.renderer}):0;return{geometry:t.type==="point"?age(t,o,i):t,outFields:r}}function LZe(t,e,i,s){const{outFields:n,geometry:r}=cge(e,i,s);return t.outFields=n,t.geometry=r,t.returnGeometry=!0,t.outSpatialReference=s.spatialReference,t}async function FZe(t){const{selector:e,candidates:i,view:s}=t;if(!(i!=null&&i.length)||!e)return[];const{spatialReference:n}=s,r=e,o=await MZe();return i.filter(l=>o.intersects(n,r,l.geometry))}const zZe=100;let py=class extends Sa.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new ci,this.sources=null,this._process=Mv(async(i,s)=>{const{callback:n,selector:r,completed:o}=i,l=RM(async u=>{var x;const{sources:f,selection:y,view:_}=this;if(!(!(f!=null&&f.length)&&!(_!=null&&_.selectionManager.sources.length))&&_){if(r&&f!=null){const S=await AZe({currentSelection:y,selector:r,signal:u,sources:f,view:_});o&&((x=_.selectionManager)==null||x.updateSelection({current:y.toArray(),...S}))}n&&n()}else y.removeAll()});return Ul(s,()=>l.abort()),this._processTask=l,l.promise},zZe)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),(e=this._processTask)==null||e.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const i=this.options,s=(i==null?void 0:i.createTool)??"rectangle",n=(i==null?void 0:i.mode)??(s==="polygon"?"click":"hybrid"),r=Symbol();this._tool=new bc({view:e,mode:n,geometryType:s}),i!=null&&i.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>Qh(this._process({selector:this._selectionArea}))),r),this.addHandles([e.on("key-down",o=>{if(!o.repeat)switch(o.key){case Fn.constraint:this._tool.uniformSizeToggled=!0,o.stopPropagation();break;case Fn.center:this._tool.centeredToggled=!0,o.stopPropagation()}}),e.on("key-up",o=>{switch(o.key){case Fn.constraint:this._tool.uniformSizeToggled=!1,o.stopPropagation();break;case Fn.center:this._tool.centeredToggled=!1,o.stopPropagation()}}),this._tool.on("complete",async o=>{this.removeHandles(r);const l=()=>{this.removeAllHandles(),this.emit("complete",{aborted:o.aborted,selection:this.selection.toArray()})};o.aborted?(this.cancel(),this.selection.removeAll(),l()):await this._process({selector:this._selectionArea,callback:l,completed:!0})})],r),this.addHandles(ds(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=Qp(),i=this._tool.coordinates,s=this.view.spatialReference,n=o=>{e.x=o[0],e.y=o[1];const{x:l,y:u}=this.view.toMap(e);return[l,u]};if(i.length===1){const[o,l]=n(i[0]);return new Yi({x:o,y:l,spatialReference:s})}const r=this._tool.coordinates.map(n);if(r.length!==0)return VM(r)||r.reverse(),new Za({spatialReference:s,rings:[r]})}};I([N()],py.prototype,"options",void 0),I([N({readOnly:!0})],py.prototype,"selection",void 0),I([N()],py.prototype,"sources",void 0),I([N({constructOnly:!0})],py.prototype,"view",void 0),py=I([ke("esri.widgets.support.Selector2D.SelectionOperation")],py);const qZe=py;let wp=class extends Sa.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([xi(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=Co(this._operationHandlesGroup)}get _sources(){const{sources:e,view:i}=this;return i&&(e!=null&&e.length)?e.flatMap(s=>{if(RI(s))return s;if(Yhe(s)||Xhe(s)){const r=s.layers||[],o=r.map(l=>{const u=tee(i,l)||void 0;return RI(u)?u:l});return o.length?o.toArray():r.length?r.toArray():s}const n=tee(i,s)||void 0;return RI(n)?n:s}):[]}get layers(){return v9(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){v9(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:i}=this,s=!(e!=null&&e.length)&&!(i!=null&&i.selectionManager.sources.length);return this.activeOperation?"active":i!=null&&i.ready&&!s?"ready":"disabled"}cancel(){var e;this.state==="active"&&((e=this.activeOperation)==null||e.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:i,state:s,view:n}=this,r=!(i!=null&&i.length)&&!(n!=null&&n.selectionManager.sources.length);if(s==="disabled"||r||!this.view)return;s==="active"&&this.cancel();const o=new qZe({view:this.view,sources:i,options:e});return this._operationHandlesGroup=pm([o.selection.on("change",l=>this.emit("selection-change",l)),o.once("complete",l=>this._onOperationComplete(l))]),this._set("activeOperation",o),o}_onOperationComplete(e){this._operationHandlesGroup=Co(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};I([N()],wp.prototype,"_sources",null),I([N({readOnly:!0})],wp.prototype,"activeOperation",void 0),I([N()],wp.prototype,"layers",null),I([N()],wp.prototype,"sources",void 0),I([N({readOnly:!0})],wp.prototype,"state",null),I([N()],wp.prototype,"view",void 0),wp=I([ke("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],wp);const VZe=wp,Hee={lassoTool:!0,rectangleTool:!0},GZe={createTool:"polygon",mode:"freehand"},jZe={createTool:"rectangle"},fN="esri-selection-toolbar",pN={base:fN,container:`${fN}__container`,toolButton:`${fN}__tool-button`};let zl=class extends fx{constructor(e,i){super(e,i),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new VZe,this.visibleElements={...Hee},this._viewModelHandlesGroup=pm([this.viewModel.on("complete",s=>{this._set("activeToolInfo",null),this.emit("complete",s)})])}destroy(){this._viewModelHandlesGroup=Co(this._viewModelHandlesGroup)}loadDependencies(){return dx({action:()=>nt(()=>import("./calcite-action-Dwjq6huV.js"),[],import.meta.url),icon:()=>nt(()=>import("./calcite-icon-Gtt7RCXD.js"),[],import.meta.url)})}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return v9(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){v9(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...Hee,...e}}get visibleToolCount(){const{view:e,toolConfigs:i,visibleElements:s}=this;return((i==null?void 0:i.length)??0)+((e==null?void 0:e.type)==="2d"?(s.lassoTool?1:0)+(s.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.viewModel.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return kt("div",{"aria-label":this.label,class:this.classes(pN.base,PE.widget)},kt("div",{class:pN.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if(((e=this.view)==null?void 0:e.type)==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if((e=this.toolConfigs)!=null&&e.length)return this.toolConfigs.map(({toolName:i,icon:s})=>{var n;return kt("calcite-action",{active:((n=this.activeToolInfo)==null?void 0:n.toolName)===i,bind:this,class:pN.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(i),scale:"s",text:i,title:i},kt("calcite-icon",{icon:s||"selection",scale:"s"}))})}_renderLassoTool(){const{activeToolInfo:e,messages:i,visibleElements:s}=this;if(!s.lassoTool)return;const n=i.selectByLasso;return kt("calcite-action",{active:(e==null?void 0:e.toolName)==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:n,title:n},kt("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:i,visibleElements:s}=this;if(!s.rectangleTool)return;const n=i.selectByRectangle;return kt("calcite-action",{active:(e==null?void 0:e.toolName)==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:n,title:n},kt("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const i=this._getToolOptions(e);if(!i)return;const s=this.viewModel.activate(i);s&&this._set("activeToolInfo",{toolName:e,operation:s})}_toggleTool(e){if(this.activeToolInfo){const i=this.activeToolInfo.toolName;if(this.cancel(),i===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?GZe:e==="rectangle"?jZe:this.toolConfigs.find(i=>i.toolName===e)}};I([N({readOnly:!0})],zl.prototype,"activeToolInfo",void 0),I([N()],zl.prototype,"label",null),I([N()],zl.prototype,"layers",null),I([N(),Cg("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],zl.prototype,"messages",void 0),I([N()],zl.prototype,"sources",null),I([N()],zl.prototype,"toolConfigs",void 0),I([N()],zl.prototype,"view",null),I([N()],zl.prototype,"viewModel",void 0),I([N()],zl.prototype,"visibleElements",void 0),I([Sn("visibleElements")],zl.prototype,"castVisibleElements",null),I([N()],zl.prototype,"visibleToolCount",null),zl=I([ke("esri.widgets.support.SelectionToolbar")],zl);const BZe=zl,HZe={absolute:"absolute-direction",relative:"relative-direction"},uge=()=>dx({icon:()=>nt(()=>import("./calcite-icon-Gtt7RCXD.js"),[],import.meta.url),label:()=>nt(()=>import("./calcite-label-gEwaqOLW.js"),[],import.meta.url),switch:()=>nt(()=>import("./calcite-switch-KHO4Xs6m.js"),[],import.meta.url),tooltip:()=>nt(()=>Promise.resolve().then(()=>REe),void 0,import.meta.url)}),e3="esri-labeled-switch",t3={label:`${e3}__label`,labelContent:`${e3}__label-content`,iconInfo:`${e3}__icon_info`,iconWarning:`${e3}__icon_warning`,tooltip:`${e3}__tooltip`};function Ob({checked:t,disabled:e,hint:i,key:s,label:n,onChange:r,hintIcon:o,hintKind:l}){return kt("calcite-label",{class:t3.label,disabled:e,key:s,layout:"inline-space-between",scale:"s"},kt("div",{class:t3.labelContent,key:"label-content"},i?kt(nDe,null,kt("div",null,n),kt("calcite-icon",{class:l!=="warning"?t3.iconInfo:t3.iconWarning,icon:o??"information",id:s,scale:"s",tabIndex:0}),kt("calcite-tooltip",{class:t3.tooltip,referenceElement:s},i)):n),kt("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:u=>r(u.target.checked)}))}let my=class extends Ei{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};I([N({type:Boolean,nonNullable:!0})],my.prototype,"directionModePicker",void 0),I([N({type:Boolean,nonNullable:!0})],my.prototype,"header",void 0),I([N({type:Boolean,nonNullable:!0})],my.prototype,"labelsToggle",void 0),I([N({type:Boolean,nonNullable:!0})],my.prototype,"tooltipsToggle",void 0),my=I([ke("esri.widgets.support.SketchTooltipControls.VisibleElements")],my);const hge=my,B4="esri-sketch-tooltip-controls",H4={base:B4,block:`${B4}__block`,blockContent:`${B4}__block-content`,radioButtonLabelWrapper:`${B4}__radio-button-label-wrapper`};let $0=class extends fx{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new hge,this.sketchOptions=new AA,this.viewType=void 0,this._onTooltipsEnabledChange=s=>{this.sketchOptions.tooltips.enabled=s},this._onLabelsEnabledChange=s=>{this.sketchOptions.labels.enabled=s},this._onDirectionModeChange=s=>{this.sketchOptions.values.directionMode=s.target.selectedItem.value}}loadDependencies(){return Promise.all([dx({block:()=>nt(()=>import("./calcite-block-BCsykYIX.js"),__vite__mapDeps([329,330]),import.meta.url),label:()=>nt(()=>import("./calcite-label-gEwaqOLW.js"),[],import.meta.url),icon:()=>nt(()=>import("./calcite-icon-Gtt7RCXD.js"),[],import.meta.url),"radio-button":()=>nt(()=>import("./calcite-radio-button-CbAi342L.js"),[],import.meta.url),"radio-button-group":()=>nt(()=>import("./calcite-radio-button-group-CZqV0-AH.js"),__vite__mapDeps([331,89,91]),import.meta.url)}),uge()])}render(){const{label:e,visibleElements:i}=this,s=this._renderContent();return kt("div",{"aria-label":e,class:this.classes(H4.base,PE.widget)},s?kt("calcite-block",{class:H4.block,heading:i.header?this.label:"",key:"content-block",open:!0},kt("div",{class:H4.blockContent,key:"content"},s)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:i}=this,s=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(yl);return s.length===0?null:s}_renderTooltipsToggle(){const{messages:e,sketchOptions:i}=this;return kt(Ob,{checked:i.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:i}=this;return kt(Ob,{checked:i.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:i}=this,{directionMode:s}=i.values;return kt("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,kt("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:s,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",s,e.directionModeRelative),this._renderDirectionModeOption("absolute",s,e.directionModeAbsolute)))}_renderDirectionModeOption(e,i,s){return kt("calcite-label",{key:e,layout:"inline",scale:"s"},kt("calcite-radio-button",{checked:e===i,scale:"s",value:e}),kt("div",{class:H4.radioButtonLabelWrapper,key:"label-wrapper"},kt("calcite-icon",{icon:HZe[e],scale:"s"}),s))}};I([N()],$0.prototype,"label",null),I([N({type:hge,nonNullable:!0})],$0.prototype,"visibleElements",void 0),I([N(),Cg("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],$0.prototype,"messages",void 0),I([N({nonNullable:!0,type:AA})],$0.prototype,"sketchOptions",void 0),I([N({type:String})],$0.prototype,"viewType",void 0),$0=I([ke("esri.widgets.support.SketchTooltipControls")],$0);const UZe=$0,dge={hide:"hide",hideChildren:"hide-children"},Bvt=10,Hvt=2;function Uvt({exclusive:t,visible:e,visibilityAppearance:i}){const s=i==="checkbox";return e?t?"circle-f":s?"check-square-f":"view-visible":t?"circle":s?"square":"view-hide"}function Yvt({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function Xvt(t){return(t==null?void 0:t.listMode)===dge.hideChildren}function A6(t){return(t==null?void 0:t.listMode)??void 0}function YZe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function XZe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function WZe(t){if(!t)return"inherited";const e=JZe(cj(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function aj(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Wvt(t){const e=(t!=null&&t.layer&&cj(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&e.type!=="catalog"&&(QZe(e)??!0)}function lj(t){return A6(t)!==dge.hide}function ZZe(t,e){if(!t||e==null||isNaN(e))return!1;const i=YZe(t),s=XZe(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,r=s!=null&&!isNaN(s)&&s>0&&e<s;return n||r}function KZe(t,e){t==null||t.sort((i,s)=>{const n="uid"in i?e.indexOf(i.uid):-1,r="uid"in s?e.indexOf(s.uid):-1;return n>r?-1:n<r?1:0})}function Zvt(t,e){const i=t==null?void 0:t.layer;if(!i)return;const s=aj(i);if(!s)return;let n;s==="layers"&&"layers"in i?n=i.layers:s==="sublayers"&&"sublayers"in i&&(n=i.sublayers),KZe(n,e)}function Uee(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function cj(t){return t!=null&&"layer"in t&&t.layer!=null}function JZe(t){const e=fge(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function QZe(t){const e=fge(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function fge(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function Kvt(t){return t==null?void 0:t["data-item"]}function Jvt(t){return t==null?void 0:t.getAttribute("data-layer-type")}function Qvt({children:t,error:e,incompatible:i}){return!!(t!=null&&t.filter(s=>!s.hidden).length)&&!e&&!i}function e_t(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}function Yee(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}var ez;let O0=ez=class extends LC{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new ez({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};I([N()],O0.prototype,"displayValueEnabled",void 0),I([N()],O0.prototype,"max",void 0),I([N()],O0.prototype,"min",void 0),I([N()],O0.prototype,"step",void 0),I([N()],O0.prototype,"value",void 0),O0=ez=I([ke("esri.support.actions.ActionSlider")],O0);const eKe=O0;function tKe(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,s=Array.isArray(t)?t:iKe(t);i.push(...s)}}function iKe(t){return t.split(",").map(e=>e.trim())}function Xee(t){return t&&typeof t.render=="function"}function t_t(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let ha=class extends DC(fx){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([xi(()=>this._canCreateLegend,()=>this._createLegend(),Xl),xi(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Xl)])}destroy(){this._legend=no(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const s="legend";return e===s||e!=null&&!!Array.isArray(e)&&e.includes(s)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,s=e==null?void 0:e.view;return i&&s?{view:s,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const e=(o=this.listItem)==null?void 0:o.layer;if(!e||e.type==="subtype-sublayer")return null;const i=cj(e)?e:null,s=e==null?void 0:e.parent,n=s!=null&&"type"in s&&s.type==="map-image"?i==null?void 0:i.source:null,r="";return n&&s?{layer:s,title:r,sublayerIds:[n.mapLayerId]}:{layer:e,title:r}}get disabled(){var n;const{listItem:e,_legend:i,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return kt("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:s,open:n}=this;return e&&!s&&n?e==="legend"&&i?kt("div",{key:"legend-widget"},i.render()):typeof e=="string"?kt("div",{innerHTML:e,key:e}):Xee(e)?kt("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?kt("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(s=>this._renderContent(s)):this._renderContent(e):null}async _createLegend(){if(no(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await nt(()=>import("./Legend-DfLzMqJI.js"),__vite__mapDeps([69,70,71,72,73,74,75,76,77,59,57,58,16,60,61,78,52,2,46,29]),import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:Xee(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};I([N()],ha.prototype,"_legend",void 0),I([N()],ha.prototype,"_canCreateLegend",null),I([N()],ha.prototype,"_legendOptions",null),I([N()],ha.prototype,"_legendLayerInfo",null),I([N()],ha.prototype,"className",void 0),I([N()],ha.prototype,"content",void 0),I([N()],ha.prototype,"disabled",null),I([N()],ha.prototype,"flowEnabled",void 0),I([N()],ha.prototype,"icon",null),I([N()],ha.prototype,"image",void 0),I([N()],ha.prototype,"listItem",void 0),I([N()],ha.prototype,"open",void 0),I([N()],ha.prototype,"title",null),I([N()],ha.prototype,"visible",void 0),ha=I([ke("esri.widgets.LayerList.ListItemPanel")],ha);const pge=ha;var aS;const sKe=ci.ofType({key:"type",defaultKeyValue:"button",base:LC,typeMap:{button:_de,toggle:bde,slider:eKe}}),mge=ci.ofType(sKe),mN="layer",U4="child-list-mode",nKe="hide";let an=aS=class extends DC(Ei){constructor(t){super(t),this.actionsSections=new mge,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ci.ofType(aS)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([xi(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Xl),xi(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Xl),xi(()=>this.view,t=>this._updateChildrenView(t),Xl),xi(()=>this.panel,t=>this._setListItemOnPanel(t),Xl)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(s=>s.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new pge(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=$u(this,"layer.layer");return(!t||t&&$u(this,"layer.layer.loaded"))&&$u(this,"layer.title")||$u(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:s}=this;return!s&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!ZZe(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return WZe(this.layer)}clone(){return new aS({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,s=t.filter(n=>!i.some(r=>r.layer===n));i.addMany(this._createChildItems(s,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(s=>!t.includes(s.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(U4),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(U4),this.listModeDisabled||this.addHandles(t.toArray().map(e=>xi(()=>e.listMode,()=>this._compileChildren(t))),U4)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>A6(i)!==nKe);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),mN)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||lj(i)?new aS({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(yl).reverse()}_watchLayerProperties(t){if(this.removeHandles(mN),this.removeHandles(U4),!t)return;if((!this.listModeDisabled&&A6(t))==="hide-children")return void this.children.destroyAll();const e=aj(t);e&&this.addHandles(xi(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Xl),mN)}};I([N({type:mge})],an.prototype,"actionsSections",void 0),I([N()],an.prototype,"actionsOpen",void 0),I([N()],an.prototype,"checkPublishStatusEnabled",void 0),I([N({type:ci})],an.prototype,"children",void 0),I([N()],an.prototype,"childrenSortable",void 0),I([N({readOnly:!0})],an.prototype,"connectionStatus",null),I([N({readOnly:!0})],an.prototype,"error",null),I([N()],an.prototype,"hidden",void 0),I([N({readOnly:!0})],an.prototype,"incompatible",null),I([N()],an.prototype,"layer",void 0),I([N({readOnly:!0})],an.prototype,"layerView",null),I([N()],an.prototype,"listItemCreatedFunction",void 0),I([N({nonNullable:!0})],an.prototype,"listModeDisabled",void 0),I([N()],an.prototype,"open",void 0),I([N({type:pge})],an.prototype,"panel",void 0),I([Sn("panel")],an.prototype,"castPanel",null),I([N()],an.prototype,"parent",void 0),I([N({value:!0})],an.prototype,"sortable",null),I([N()],an.prototype,"title",null),I([N({readOnly:!0})],an.prototype,"publishing",null),I([N({readOnly:!0})],an.prototype,"updating",null),I([N()],an.prototype,"view",void 0),I([N()],an.prototype,"visible",null),I([N({readOnly:!0})],an.prototype,"visibleAtCurrentScale",null),I([N({readOnly:!0})],an.prototype,"visibleAtCurrentTimeExtent",null),I([N({readOnly:!0})],an.prototype,"visibilityMode",null),an=aS=I([ke("esri.widgets.LayerList.ListItem")],an);const uj=an,ph={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},rKe="hide",gge=ci.ofType(uj);let Ld=class extends Sa.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new gge,this.view=null}initialize(){this.addHandles([xi(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),Xl),xi(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),xi(()=>Yee(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],ph.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,s,n){var S,P;const r=e==null?void 0:e.layer;if(!r||r.type==="subtype-sublayer"||r.type==="sublayer")return;const o=(P=(S=this.view)==null?void 0:S.map)==null?void 0:P.layers,l=i?Uee(i):o,u=s?Uee(s):o;if(!l||!u)return;const{operationalItems:f}=this,y=(i==null?void 0:i.children)||f,_=(s==null?void 0:s.children)||f,x=u.length-n;e.parent=s||null,y.remove(e),l.remove(r),_.includes(e)||_.add(e,x),u.includes(r)||u.add(r,x),this._compileList()}_createLayerViewHandles(e){this.removeHandles(ph.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),ph.layerViews)}_createMapLayerHandles(e){this.removeHandles(ph.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),ph.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:s,checkPublishStatusEnabled:n,listModeDisabled:r}=this;return new uj({checkPublishStatusEnabled:n,listModeDisabled:r,layer:e,listItemCreatedFunction:s,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>A6(i)!==rKe):void 0}_watchLayersListMode(e){this.removeHandles(ph.layerListMode),e&&!this.listModeDisabled&&this.addHandles(xi(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),ph.layerListMode)}_compileList(){var n,r;const e=(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers,i=Yee(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:o})=>o==="link-chart"):e;this._watchLayersListMode(i);const s=this._getViewableLayers(i);s!=null&&s.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(s=>{i.some(n=>n.layer===s)||i.add(this._createListItem(s))})}_removeItems(e){const{operationalItems:i}=this,s=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||s.push(n)}),i.destroyMany(s)}_sortItems(e){const{operationalItems:i}=this;i.sort((s,n)=>{const r=e.indexOf(s.layer),o=e.indexOf(n.layer);return r>o?-1:r<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([ph.mapLayers,ph.layerViews,ph.viewLayers]),e!=null&&e.ready?this.addHandles([xi(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.allLayers},i=>this._createMapLayerHandles(i),Xl),xi(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),Xl)],ph.viewLayers):this._removeAllItems()}};I([N()],Ld.prototype,"checkPublishStatusEnabled",void 0),I([N()],Ld.prototype,"listItemCreatedFunction",void 0),I([N({nonNullable:!0})],Ld.prototype,"listModeDisabled",void 0),I([N({type:gge})],Ld.prototype,"operationalItems",void 0),I([N({readOnly:!0})],Ld.prototype,"state",null),I([N()],Ld.prototype,"totalItems",null),I([N()],Ld.prototype,"view",void 0),Ld=I([ke("esri.widgets.LayerList.LayerListViewModel")],Ld);const oKe=Ld,hj=t=>aKe(t)||lKe(t),aKe=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},lKe=t=>{const e=aj(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(hj(i))return!0}return!1},qI=(t,e)=>e!=null&&t!=null&&(e.test(t.title)?"self":!!t.children.some(i=>qI(i,e)!==!1)&&"children");var tz;let Sp=tz=class extends uj{constructor(t){super(t),this.children=new ci,this.parent=null}get enabled(){const{children:t}=this;if(t.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,i=!1;for(const s of t){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?e=!0:s.enabled==="disabled"&&(i=!0),i&&e)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(t=>[t.layer.id,...t.childLayerIds])}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(hj);super._initializeChildLayers(e)}_createChildItems(t){return t.map(e=>lj(e)?new tz({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(yl).reverse()}};I([N()],Sp.prototype,"enabled",null),I([N()],Sp.prototype,"children",void 0),I([N()],Sp.prototype,"childLayerIds",null),I([N()],Sp.prototype,"featureSource",null),I([N({constructOnly:!0})],Sp.prototype,"getFeatureSnappingSources",void 0),I([N()],Sp.prototype,"parent",void 0),Sp=tz=I([ke("esri.widgets.support.SnappingControls.SnappingListItem")],Sp);let gy=class extends oKe{constructor(){super(...arguments),this.featureSnappingSources=new ci}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var i;return!((i=e.children)!=null&&i.length)})}_compileList(){var n,r;const e=(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers;if(!e)return;const i=e.filter(hj);this._watchLayersListMode(i);const s=this._getViewableLayers(i);s!=null&&s.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createListItem(e){return new Sp({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};I([N()],gy.prototype,"featureSnappingSources",void 0),I([N()],gy.prototype,"operationalItems",void 0),I([N()],gy.prototype,"operationalItemsFlat",null),I([N()],gy.prototype,"selectableItems",null),gy=I([ke("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],gy);let Fd=class extends Ei{constructor(e){super(e),this.layerListViewModel=new gy,this.snappingOptions=new i5,this.view=null}initialize(){this.addHandles([xi(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:i})=>{e.view=i},Xl),xi(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:i})=>{e.featureSnappingSources=i},Xl)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>i.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>!i.enabled)}get layersEnabledCount(){var e,i;return((i=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:i.filter(s=>s.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,i){e==null||e.forEach(s=>i?this.enableSnappingForLayer(s):this.disableSnappingForLayer(s))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:i}})=>{e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);i&&(i.enabled=!0)}disableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e);i&&(i.enabled=!1)}updateEnabledFeatureSources(e){for(const i of this.snappingOptions.featureSources)lj(i.layer)&&(i.enabled=e.includes(i.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(i=>i.layer.id===e)}_makeSnappingSourceForLayer(e){var n;const i=(n=this.layerListViewModel.operationalItemsFlat.find(r=>r.layer.id===e))==null?void 0:n.layer;if(!i)throw new rt("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(i.type==="group")return;const s=new qG({layer:i});return this.snappingOptions.featureSources.add(s),s}};I([N()],Fd.prototype,"allLayersEnabled",null),I([N()],Fd.prototype,"allLayersDisabled",null),I([N({constructOnly:!0})],Fd.prototype,"layerListViewModel",void 0),I([N()],Fd.prototype,"layersEnabledCount",null),I([N({type:i5,nonNullable:!0})],Fd.prototype,"snappingOptions",void 0),I([N()],Fd.prototype,"state",null),I([N()],Fd.prototype,"view",void 0),Fd=I([ke("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Fd);const cKe=Fd,Cd="esri-snapping-controls",mh={base:Cd,container:`${Cd}__container`,toggleBlock:`${Cd}__toggle-block`,layerListBlock:`${Cd}__layer-list-block`,layerList:`${Cd}__layer-list`,layerListFilter:`${Cd}__layer-list__filter`,layerListButton:`${Cd}__layer-list__button`,layerListItem:`${Cd}__layer-list__item`,layerListGroup:`${Cd}__layer-list__group`,nestedContainer:`${Cd}__nested-container`};let bo=class extends fx{constructor(e,i){super(e,i),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new VA,this._enableSnappingSwitchChange=o=>{this.snappingOptions.enabled=o},this._featureEnabledSwitchChange=o=>{this.snappingOptions.featureEnabled=o},this._gridEnabledSwitchChange=o=>{this.snappingOptions.gridEnabled=o,o&&this._startLoadGrid()},this._selfEnabledSwitchChange=o=>{this.snappingOptions.selfEnabled=o},this._onToggleLayersButtonClick=o=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),qce(o.target)};const{snappingOptions:s,view:n,viewModel:r}=e;this.viewModel=r??(this._defaultViewModel=new cKe({snappingOptions:s,view:n}))}normalizeCtorArgs(e){const{snappingOptions:i,view:s,viewModel:n,...r}=e;return r}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=no(this._defaultViewModel))}loadDependencies(){return Promise.all([dx({block:()=>nt(()=>import("./calcite-block-BCsykYIX.js"),__vite__mapDeps([329,330]),import.meta.url),button:()=>nt(()=>import("./calcite-button-BeMtepFd.js"),[],import.meta.url),input:()=>nt(()=>import("./calcite-input-CYr-bSKK.js"),__vite__mapDeps([87,88,89,90,91,92]),import.meta.url),list:()=>nt(()=>import("./calcite-list-6BG17EIa.js"),__vite__mapDeps([332,333,334,335,88,89,90,91,92]),import.meta.url),"list-item":()=>nt(()=>import("./calcite-list-item-CvV5ogwp.js"),__vite__mapDeps([336,334,333,330]),import.meta.url),checkbox:()=>nt(()=>import("./calcite-checkbox-CCwnS79v.js"),[],import.meta.url),loader:()=>nt(()=>import("./calcite-loader-DL8DGbGq.js"),[],import.meta.url)}),uge()])}initialize(){this.addHandles(xi(()=>{var e;return((e=this.view)==null?void 0:e.type)==="2d"&&!!this.view.grid},e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=no(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return kt("div",{"aria-label":e,class:this.classes(mh.base,PE.widget)},kt("div",{class:mh.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:i}=this,s=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(i==null?void 0:i.type)==="2d"?this._renderGridEnabledToggle():null].filter(yl),n=[e.enabledToggle?this._renderEnabledToggle():null,s.length>0?kt("div",{class:mh.nestedContainer},s):null].filter(yl);return n.length===0?null:kt("calcite-block",{class:mh.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},n)}_renderEnabledToggle(){return kt(Ob,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return kt(Ob,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return kt(Ob,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return kt(Ob,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:i}=this,s=({target:{value:l}})=>{this._layerListFilter=l===""?null:new RegExp(l,"i")},n=i.layerListViewModel.operationalItems.length>9?kt("calcite-input",{class:mh.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:s}):null,r=this._secondaryElementsDisabled,o=this.layerListOpen&&!r;return kt("calcite-block",{class:mh.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:o,onCalciteBlockToggle:l=>this.layerListOpen=l.target.open},n,this._renderToggleLayersButton(),kt("calcite-list",{class:mh.layerList,selectionMode:"none"},this._renderLayerListItemCollection(i.layerListViewModel.operationalItems)))}_renderGridOptions(){var y;const{view:e,visibleElements:i,snappingManager:s,snappingOptions:n,_openAndReady:r}=this,{gridEnabled:o,enabled:l}=n;(r||(e==null?void 0:e.type)==="2d"&&e.grid)&&this._startLoadGrid();const u=(y=this._gridLoadTask)==null?void 0:y.value,f=u&&(e==null?void 0:e.type)==="2d"&&kt(u,{snappingManager:s,snappingOptions:n,view:e,visibleElements:i.gridControlsElements});return kt("calcite-block",{class:mh.layerListBlock,collapsible:!0,disabled:!o||!l,heading:this.messages.gridOptionsHeading,key:"grid-block",open:r,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},f??kt("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=RM(async()=>(await nt(async()=>{const{default:i}=await import("./GridControls-DGJl_hyK.js");return{default:i}},__vite__mapDeps([337,38,39,73,36,37,306,12,13,14,15,308,40,41,42,309,310,139,140,10,128,304,62,311,312,210,291,184,183,59,44,313,315,101]),import.meta.url)).default))}_renderLayerListItemCollection(e){const i=this._layerListFilter;return e.map(s=>{switch(i?qI(s,i):null){case"children":{const n=s.children.filter(r=>qI(r,i)!==!1);return this._renderLayerListItemGroup(s,n)}case"self":case null:return this._renderLayerListItemOrGroup(s);case!1:return qI(s.parent,i)==="self"?this._renderLayerListItemOrGroup(s):null}}).toArray().filter(yl)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:i}=this,s=e?i.disableAllLayers:i.enableAllLayers;return kt("calcite-button",{appearance:"transparent",class:mh.layerListButton,label:s,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},s)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:i}}=this,s=e.title||i,n=()=>{this.viewModel.toggleSnappingForLayers([e.layer.id],e.enabled!=="enabled")};return kt("calcite-list-item",{class:mh.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:s,onCalciteListItemSelect:r=>{r.stopPropagation(),n()}},kt("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(e,i){const{children:s,title:n}=e,r=n||this.messages.untitledLayer,o=n&&n!==""?n:xS(),l=!!(i!=null&&i.length),u=i??s,f=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")};return kt("calcite-list-item",{class:mh.layerListGroup,key:o,label:r,open:l,onCalciteListItemSelect:y=>{y.stopPropagation(),f()}},kt("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:f}),kt("calcite-list",null,this._renderLayerListItemCollection(u)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};I([N()],bo.prototype,"_defaultViewModel",void 0),I([N()],bo.prototype,"_layerListFilter",void 0),I([N()],bo.prototype,"_gridLoadTask",void 0),I([N()],bo.prototype,"_openAndReady",null),I([N()],bo.prototype,"label",null),I([N({type:Boolean,nonNullable:!0})],bo.prototype,"layerListOpen",void 0),I([N({type:Boolean,nonNullable:!0})],bo.prototype,"gridOptionsOpen",void 0),I([N(),Cg("esri/widgets/support/SnappingControls/t9n/SnappingControls")],bo.prototype,"messages",void 0),I([N(),Cg("esri/t9n/common")],bo.prototype,"messagesCommon",void 0),I([N()],bo.prototype,"snappingOptions",null),I([N()],bo.prototype,"snappingManager",void 0),I([N()],bo.prototype,"view",null),I([N()],bo.prototype,"viewModel",null),I([N({type:VA,nonNullable:!0})],bo.prototype,"visibleElements",void 0),I([N()],bo.prototype,"_enabledToggleDisabled",null),I([N()],bo.prototype,"_secondaryElementsDisabled",null),bo=I([ke("esri.widgets.support.SnappingControls")],bo);const uKe=bo,Nl="esri-sketch",yo={base:Nl,verticalLayout:`${Nl}--vertical`,horizontalLayout:`${Nl}--horizontal`,panel:`${Nl}__panel`,infoPanel:`${Nl}__info-panel`,section:`${Nl}__section`,toolSection:`${Nl}__tool-section`,infoSection:`${Nl}__info-section`,infoCountSection:`${Nl}__info-count-section`,menuContainer:`${Nl}__menu-container`,menuHeader:`${Nl}__menu-header`,menuTitle:`${Nl}__menu-title`,featureCountBadge:`${Nl}__feature-count-badge`,featureCountNumber:`${Nl}__feature-count-number`};let ln=class extends fx{constructor(e,i){super(e,i),this._activeCustomToolOptions=null,this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.customToolOptions=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new v0e,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(e==null?void 0:e.viewModel)||new pYe}initialize(){const{layer:e,view:i}=this,s=new BZe({view:(i==null?void 0:i.type)==="2d"?i:null,sources:e?[e]:null});this.addHandles([xi(()=>this.viewModel,n=>{this._viewModelHandlesGroup=Co(this._viewModelHandlesGroup),n&&(this._viewModelHandlesGroup=pm([n.on("create",r=>{this.scheduleRender(),this._onCreateOperation(r)}),n.on("update",()=>this.scheduleRender()),n.on("delete",r=>this.emit("delete",r)),n.on("undo",()=>this.scheduleRender()),n.on("redo",()=>this.scheduleRender()),xi(()=>n.layer,r=>{this._selectionToolbar&&(this._selectionToolbar.sources=r?[r]:null)}),xi(()=>n.view,r=>{this._selectionToolbar&&(this._selectionToolbar.view=(r==null?void 0:r.type)==="2d"?r:null)}),xi(()=>n.state,()=>this.notifyChange("state"))]))},ec),Eg(()=>s.activeToolInfo,()=>this.viewModel.cancel()),s.on("complete",n=>this._onSelectionOperationComplete(n)),xi(()=>{const{selectionTools:n}=this.visibleElements;return{lassoTool:!!(n!=null&&n["lasso-selection"]),rectangleTool:!!(n!=null&&n["rectangle-selection"])}},n=>{Object.assign(s.visibleElements,n)},ec)]),this._selectionToolbar=s}loadDependencies(){return dx({action:()=>nt(()=>import("./calcite-action-Dwjq6huV.js"),[],import.meta.url),icon:()=>nt(()=>import("./calcite-icon-Gtt7RCXD.js"),[],import.meta.url)})}destroy(){var e;(e=this._selectionToolbar)==null||e.destroy(),this._viewModelHandlesGroup=Co(this._viewModelHandlesGroup)}get activeTool(){var i;const e=(i=this._selectionToolbar)==null?void 0:i.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){var e;return(e=this._selectionToolbar)!=null&&e.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const i=this._get("viewModel");e!==i&&(i&&no(i),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,visibleElements:i}=this;return e==null?void 0:e.filter(s=>{var n;return!!((n=i.createTools)!=null&&n[s])})}create(e,i,s){const n=(s==null?void 0:s.createOptions)??i;return this._activeCreateOptions=n||null,this._activeCustomToolOptions=s,Qh(this.viewModel.create(e,n))}update(e,i){return Qh(this.viewModel.update(e,i))}complete(){this.viewModel.complete()}cancel(){var e;(e=this._selectionToolbar)==null||e.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){var e;this.viewModel.undo(),(e=this.view)==null||e.focus()}redo(){var e;this.viewModel.redo(),(e=this.view)==null||e.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:e,layout:i,viewModel:{state:s}}=this;return kt("div",{"aria-label":e,class:this.classes(yo.base,PE.widget,{[PE.disabled]:s==="disabled",[yo.verticalLayout]:i==="vertical",[yo.horizontalLayout]:i==="horizontal"})},kt("div",{class:yo.panel,role:"toolbar"},this._renderTopPanelContents()),kt("div",{class:this.classes(yo.panel,yo.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var u;const e=this.classes(yo.section,yo.toolSection),{_effectiveAvailableCreateTools:i,customToolOptions:s,visibleElements:n,viewModel:r}=this,o=r.updateOnGraphicClick||((u=this._selectionToolbar)==null?void 0:u.visibleToolCount),l=!(!(i!=null&&i.length)&&!(s!=null&&s.length));return[o?kt("div",{class:e,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,l?kt("div",{class:e,role:"menu"},this._renderDrawActions(),this._renderCustomToolActions()):null,n.undoRedoMenu?kt("div",{class:e,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,n.settingsMenu?kt("div",{class:yo.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[kt("div",{class:this.classes(yo.section,yo.infoSection,yo.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),kt("div",{class:this.classes(yo.section,yo.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:e,snappingOptions:i,view:s,viewModel:n,visibleElements:r}=this,o={directionModePicker:r.directionModePicker,labelsToggle:r.labelsToggle,tooltipsToggle:r.tooltipsToggle};return kt("div",{class:yo.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},kt("header",{class:yo.menuHeader,key:"settings-menu-header"},kt("span",{class:yo.menuTitle},e.settings)),Object.values(o).includes(!0)?kt(UZe,{sketchOptions:n.sketchOptions,viewType:s==null?void 0:s.type,visibleElements:o}):void 0,r.snappingControls&&s&&i?kt(uKe,{snappingManager:this.viewModel.snappingManager,snappingOptions:i,view:s,visibleElements:r.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:e,messages:i,updateGraphics:{length:s}}=this,n=yce(i.selectedCount,{count:s});return kt("div",{"aria-label":n,class:yo.featureCountBadge},kt("span",{class:yo.featureCountNumber},e==="vertical"?s:n))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const e=this.messages,i=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return kt("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:i,title:i},kt("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const e=this.messages,i=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return kt("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:i,title:i},kt("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:e,state:i}=this,s=e.selectFeature;return kt("calcite-action",{active:i==="ready",bind:this,disabled:i==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:s,title:s},kt("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var e;if(((e=this.view)==null?void 0:e.type)==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var i;const{messages:e}=this;return(i=this._effectiveAvailableCreateTools)==null?void 0:i.map(s=>{switch(s){case"point":return this._renderAction(s,e.drawPoint,"pin");case"polyline":return this._renderAction(s,e.drawPolyline,"line");case"polygon":return this._renderAction(s,e.drawPolygon,"polygon");case"rectangle":return this._renderAction(s,e.drawRectangle,"rectangle");case"circle":return this._renderAction(s,e.drawCircle,"circle");default:return}})}_renderCustomToolActions(){var e;return(e=this.customToolOptions)==null?void 0:e.map(i=>this._renderCustomToolAction(i))}_renderCustomToolAction(e){var o;const{icon:i,label:s,toolKey:n,toolName:r}=e;return kt("calcite-action",{active:((o=this._activeCustomToolOptions)==null?void 0:o.toolKey)===n,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(r,null,e),scale:"s",text:s,title:s},kt("calcite-icon",{icon:i,scale:"s"}))}_renderAction(e,i,s){return kt("calcite-action",{active:this.activeTool===e&&!this._activeCustomToolOptions,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(e),scale:"s",text:i,title:i},kt("calcite-icon",{icon:s,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const e=this.messages.undo;return kt("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:e,title:e},kt("calcite-icon",{icon:fZ(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const e=this.messages.redo;return kt("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:e,title:e},kt("calcite-icon",{icon:fZ(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const e=this.messagesCommon.settings;return kt("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:e,title:e},kt("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e,i,s){var r;const n=this._activeCustomToolOptions;if(s||n){if((s==null?void 0:s.toolKey)===(n==null?void 0:n.toolKey))return void this.cancel()}else if(this.activeTool===e)return void this.cancel();(r=this._selectionToolbar)==null||r.cancel(),this.create(e,i,s)}_onCreateOperation(e){if(e.state!=="complete")return;const{creationMode:i}=this,{type:s}=e;if(s==="create"){const{tool:n,graphic:r}=e,o=this._activeCreateOptions;this._activeCreateOptions=null,i==="continuous"?this.create(n,o,this._activeCustomToolOptions):(this._activeCustomToolOptions=null,i==="update"&&this.update([r]))}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const e=this.duplicate(),i=this.viewModel.activeTool;i!=="transform"&&i!=="reshape"||this.update(e,{tool:i})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:i}}=this,{selection:s}=e;if(!e.aborted&&s.length){const n=i.tool,r=s.length>1&&n==="reshape"?"transform":n;this.update(s,{...i,tool:r})}this.notifyChange("state")}_activateDefaultSelectTool(){var e;this.cancel(),(e=this.view)==null||e.focus()}};I([N()],ln.prototype,"_activeCustomToolOptions",void 0),I([N()],ln.prototype,"_activeCreateOptions",void 0),I([N()],ln.prototype,"activeTool",null),I([N({readOnly:!0})],ln.prototype,"activeTooltip",null),I([N({cast:t=>{if(!(t!=null&&t.length))return null;const e=new Set(["point","polyline","polygon","rectangle","circle"]);return t.filter(i=>e.has(i))}})],ln.prototype,"availableCreateTools",void 0),I([N({readOnly:!0})],ln.prototype,"createGraphic",null),I([N()],ln.prototype,"creationMode",void 0),I([N()],ln.prototype,"customToolOptions",void 0),I([N()],ln.prototype,"defaultCreateOptions",null),I([N()],ln.prototype,"defaultUpdateOptions",null),I([N()],ln.prototype,"icon",null),I([N()],ln.prototype,"label",null),I([N()],ln.prototype,"labelOptions",null),I([N()],ln.prototype,"layer",null),I([N({type:["horizontal","vertical"]})],ln.prototype,"layout",void 0),I([N(),Cg("esri/widgets/Sketch/t9n/Sketch")],ln.prototype,"messages",void 0),I([N(),Cg("esri/t9n/common")],ln.prototype,"messagesCommon",void 0),I([N()],ln.prototype,"snappingOptions",null),I([N()],ln.prototype,"state",null),I([N()],ln.prototype,"tooltipOptions",null),I([N({readOnly:!0})],ln.prototype,"updateGraphics",null),I([N({type:TA,nonNullable:!0})],ln.prototype,"valueOptions",null),I([N()],ln.prototype,"view",null),I([N(),tKe(["create","update","undo","redo"])],ln.prototype,"viewModel",null),I([N({type:v0e,nonNullable:!0})],ln.prototype,"visibleElements",void 0),I([N()],ln.prototype,"_effectiveAvailableCreateTools",null),ln=I([ke("esri.widgets.Sketch")],ln);const a5=ln,hKe=Object.freeze(Object.defineProperty({__proto__:null,default:a5},Symbol.toStringTag,{value:"Module"}));let Ca=class{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}},nd=class extends Ca{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}};function dKe(t){switch(t){case 1:return"Unknown error";case 2:return"Corrupted geometry";case 3:return"Empty geometry";case 4:return"Math singularity";case 5:return"Buffer is too small";case 6:return"Invalid shape type";case 7:return"Projection out of supported range";case 8:return"Non simple geometry";case 9:return"Cannot calculate geodesic";case 10:return"Notation conversion";case 11:return"Missing grid file";case 12:return"Invalid call";case 13:return"Internal error";case 14:return"Not implemented";case 15:return"IO error";case 16:return"Invalid 3D";case 17:return"An ambiguous geography edge with antipodal points";case 18:return"Geocentric coordinates require ellipsoidal height";case 19:return"Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane";case 20:return"Geometry is too large to be exported in to a given format";case 21:return"Operation is canceled by the user";default:return"unknown error"}}function K(t,e){try{if(!t)throw new Error(e)}catch(i){throw i}}class qv extends Error{constructor(e,i){super(),this.m_AdditionalMessage=i,this.m_ErrorType=e}what(){return dKe(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:""}code(){return this.m_ErrorType}}let fKe=class extends qv{constructor(e){super(2,e),this.name="corrupted geometry exception"}},pKe=class extends qv{constructor(e){super(3,e),this.name="empty gemetry exception"}},mKe=class extends qv{constructor(e){super(4,e),this.name="match singularity exception"}},gKe=class extends qv{constructor(e){super(8,e),this.name="non simple geometry exception"}};var me;(function(t){t[t.enumUnknown=0]="enumUnknown",t[t.enumPoint=513]="enumPoint",t[t.enumLine=5122]="enumLine",t[t.enumBezier=5123]="enumBezier",t[t.enumEllipticArc=5124]="enumEllipticArc",t[t.enumEnvelope=3077]="enumEnvelope",t[t.enumMultiPoint=8710]="enumMultiPoint",t[t.enumPolyline=25607]="enumPolyline",t[t.enumPolygon=27656]="enumPolygon",t[t.enumMultipatch=40969]="enumMultipatch",t[t.enumGeometryCollection=3594]="enumGeometryCollection",t[t.enumRationalBezier2=5134]="enumRationalBezier2",t[t.enumBezier2=5135]="enumBezier2",t[t.enumRationalBezier23d=5392]="enumRationalBezier23d",t[t.enumGreatArc3d=5393]="enumGreatArc3d"})(me||(me={}));const yKe=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function hl(t){return yKe[15&t]}function Ng(t){return!!(512&t)}function yge(t){return!!(1024&t)}function Wee(t){return!!(2048&t)}function Dn(t){return!!(4096&t)}function tl(t){return!!(8192&t)}function bi(t){return!!(16384&t)}function YA(t){return!!(32768&t)}function IE(t){const e=t.getGeometryType();return tl(e)?t.getPointCount():t.isEmpty()?0:e===me.enumEnvelope?4:e===me.enumPoint?1:Dn(e)?2:void bt("missing type")}function dj(t){const e=t.getGeometryType();if(bi(e))return t.hasNonLinearSegments();if(e===me.enumGeometryCollection){const i=t;for(let s=0,n=i.getGeometryCount();s<n;s++)if(dj(i.getGeometry(s)))return!0;return!1}return!!Dn(e)&&e!==me.enumLine}function vge(t){throw new fKe(t)}function Je(t){const e=new Error(t);throw e.name="invalid argument exception",e}function iz(t){const e=new mKe(t);throw e.name="invalid argument exception",e}function vKe(){Je("Geometry type is not supported for 3D operations.")}function bn(t){throw new qv(12,t)}function XA(t){throw new pKe(t)}function js(t){const e=new qv(14,t);throw e.name="not implemented",e}function Mi(t){const e=new Error(t);throw e.name="out of range exception",e}function bt(t){const e=new qv(13,t);throw e.name="internal error",e}function _Ke(t){const e=new Error(t);throw e.name="logic error exception",e}function sz(t){throw new gKe(t)}function bKe(){js("operation does not support curves yet")}function q2(t){t&&dj(t)&&bKe()}function Ku(t){t&&YA(t.getGeometryType())&&js("Unsupported geometry type.")}function WA(t){t===me.enumGeometryCollection&&Je("Geometry_collection instances are not supported in this operation")}function xKe(t){WA(t.getGeometryType())}function ME(t,e){t||Je(e)}class zr{constructor(e){this.sum=e,this.compensation=0}assign(e){return this.compensation=e.compensation,this.sum=e.sum,this}reset(){this.sum=this.compensation=0}resetToStart(e){this.sum=e,this.compensation=0}normalize(){K(0)}add(e){const i=this.sum+e;let s;if(Math.abs(this.sum)>=Math.abs(e)){const n=this.sum-i+e;s=this.compensation+n}else{const n=e-i+this.sum;s=this.compensation+n}this.sum=i,this.compensation=s}sub(e){this.add(-e)}addProduct(e,i){const s=[0],n=_ge(e,i,s);this.add(n),this.add(s[0])}addKahan(e){K(0)}subKahan(e){K(0)}mulKahan(e){K(0)}mul(e){const i=new zr(0);i.addProduct(this.sum,e),i.addProduct(this.compensation,e),this.assign(i)}getResult(){return this.sum+this.compensation}pe(e){return this.add(e),this}me(e){return this.add(-e),this}meKahan(e){return this.subKahan(e),this}peKahan(e){return this.addKahan(e),this}}const wKe=0x00000000ffffffffn,SKe=0x0000ffffn,EKe=0x000000ffn,CKe=0x0fn,PKe=0xffff0000n,TKe=0xff00n,IKe=0xf0n,MKe=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],AKe=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function nz(t){let e=0;return t&SKe||(e+=16,t>>=16n),t&EKe||(e+=8,t>>=8n),t&CKe||(e+=4,t>>=4n),e+MKe[Number(BigInt.asUintN(4,t))]}function DKe(t){let e=0;return t&PKe&&(e+=16,t>>=16n),t&TKe&&(e+=8,t>>=8n),t&IKe&&(e+=4,t>>=4n),e+AKe[Number(BigInt.asUintN(4,t))]+1}function Zee(t){let e=0;return t&wKe||(e=32,t>>=32n),e+nz(BigInt.asUintN(32,t))}function kKe(t){let e=0;return 0xffffffff00000000n&t&&(e=32,t>>=32n),e+DKe(t)}class Ze{constructor(e,i){if(e!==void 0){if(e instanceof Ze)return this.vmin=e.vmin,void(this.vmax=e.vmax);this.vmin=e,this.vmax=i,this.normalize()}else this.setEmpty()}static construct(e,i){return new Ze(e,i)}static constructEmpty(){return new Ze}setCoords(e,i){this.vmin=e,this.vmax=i,this.normalize()}setCoordsFromEnvelope(e){this.vmin=e.vmin,this.vmax=e.vmax}setEmpty(){this.vmin=Number.NaN,this.vmax=Number.NaN}getCenter(){return .5*(this.vmin+this.vmax)}equalsRange(e,i){return ga(this.vmin,e)&&ga(this.vmax,i)}equals(e,i){return!(!this.isEmpty()||!e.isEmpty())||(i!==void 0?Math.abs(this.vmin-e.vmin)<=i&&Math.abs(this.vmax-e.vmax)<=i:this.vmin===e.vmin&&this.vmax===e.vmax)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return K(0),!0}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY,this.vmax=Number.POSITIVE_INFINITY}move(e){this.isEmpty()||(this.vmin+=e,this.vmax+=e)}contains(e){return e.vmin>=this.vmin&&e.vmax<=this.vmax}containsCoordinate(e){return e>=this.vmin&&e<=this.vmax}containsRightExclusive(e){return e>=this.vmin&&e<this.vmax}containsExclusiveCoordinate(e){return e>this.vmin&&e<this.vmax}containsExclusive(e){return K(0),!0}isIntersecting(e){return this.vmin<=e.vmin?this.vmax>=e.vmin:e.vmax>=this.vmin}mergeCoordinate(e){if(this.isEmpty())return this.vmin=e,void(this.vmax=e);this.mergeNeCoordinate(e)}merge(e){if(e.isEmpty())return;const i=e.vmin,s=e.vmax;this.mergeCoordinate(i),this.mergeCoordinate(s)}mergeNe(e){const i=e.vmin,s=e.vmax;this.mergeNeCoordinate(i),this.mergeNeCoordinate(s)}mergeNeCoordinate(e){e<this.vmin?this.vmin=e:e>this.vmax&&(this.vmax=e)}intersect(e){this.isEmpty()||e.isEmpty()?this.setEmpty():(this.vmin<e.vmin&&(this.vmin=e.vmin),this.vmax>e.vmax&&(this.vmax=e.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(e){K(0)}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=St(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(e){return un(e,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?yv():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*yv()}static unit(){return NKe}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=St(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(e,i){this.vmin=e,this.vmax=i,this.normalizeNoNAN()}clone(){return new Ze(this.vmin,this.vmax)}}const NKe=new Ze(0,1);let Be=class Fs{static getNAN(){return new Fs(Number.NaN)}constructor(e,i){this.m_value=e??0,this.m_eps=i??0}[Symbol.toPrimitive](e){return this}clone(){return new Fs(this.m_value,this.m_eps)}assign(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}scaleError(e){this.m_eps*=e}setError(e){this.m_eps=e}set(e,i){return this.m_value=e,this.m_eps=i??0,this}setWithEps(e,i){return i===void 0&&(i=1),this.m_value=e,this.m_eps=Fs.ulp(e)*i,this}setE(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}precise(){return new Fs(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(e){return this.clone().addThis(e)}addE(e){return this.clone().addThisE(e)}addThisE(e){const i=this.m_value+e.m_value,s=this.m_eps+e.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}addThis(e){const i=this.m_value+e,s=this.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}subE(e){return this.clone().subThisE(e)}sub(e){return this.clone().subThis(e)}subThisE(e){const i=this.m_value-e.m_value,s=this.m_eps+e.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}subThis(e){const i=this.m_value-e,s=this.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}setAddE(e,i){return this.m_value=e.m_value+i.m_value,this.m_eps=e.m_eps+i.m_eps+Fs.ulp(this.m_value),this}setAdd(e,i){return this.m_value=e+i,this.m_eps=Fs.ulp(this.m_value),this}setAddEN(e,i){return this.m_value=e.m_value+i,this.m_eps=e.m_eps+Fs.ulp(this.m_value),this}setAddNE(e,i){return this.m_value=e+i.m_value,this.m_eps=i.m_eps+Fs.ulp(this.m_value),this}setSubE(e,i){return this.m_value=e.m_value-i.m_value,this.m_eps=e.m_eps+i.m_eps+Fs.ulp(this.m_value),this}setSub(e,i){return this.m_value=e-i,this.m_eps=Fs.ulp(this.m_value),this}setSubEN(e,i){return this.m_value=e.m_value-i,this.m_eps=e.m_eps+Fs.ulp(this.m_value),this}setSubNE(e,i){return this.m_value=e-i.m_value,this.m_eps=i.m_eps+Fs.ulp(this.m_value),this}mulThisE(e){const i=this.m_value*e.m_value;return this.m_eps=this.m_eps*Math.abs(e.m_value)+e.m_eps*Math.abs(this.m_value)+this.m_eps*e.m_eps+Fs.ulp(i),this.m_value=i,this}mulThis(e){const i=this.m_value*e;return this.m_eps=this.m_eps*Math.abs(e)+Fs.ulp(i),this.m_value=i,this}mul(e){return this.clone().mulThis(e)}mulE(e){return this.clone().mulThisE(e)}setMulE(e,i){const s=e.m_value*i.m_value;return this.m_eps=e.m_eps*Math.abs(i.m_value)+i.m_eps*Math.abs(e.m_value)+e.m_eps*i.m_eps+Fs.ulp(s),this.m_value=s,this}setMul(e,i){return this.m_value=e*i,this.m_eps=Fs.ulp(this.m_value),this}setMulEN(e,i){return this.setE(e),this.mulThis(i)}setMulNE(e,i){return this.setE(i),this.mulThis(e)}mulThisByPower2(e){return this.m_value*=e,this.m_eps*=Math.abs(e),this}static st_mulByPower2(e,i){return new Fs(e.m_value,e.m_eps).mulThisByPower2(i)}divE(e){return this.clone().divThisE(e)}divThisE(e){const i=Math.abs(e.m_value),s=this.m_value/e.m_value;let n=(this.m_eps+Math.abs(s)*e.m_eps)/i;if(e.m_eps>.01*i){const r=e.m_eps/i;n*=1+(1+r)*r}return this.m_value=s,this.m_eps=n+Fs.ulp(s),this}divThis(e){const i=Math.abs(e);return this.m_value/=e,this.m_eps=this.m_eps/i+Fs.ulp(this.m_value),this}setDivE(e,i){return this.setE(e),this.divThisE(i)}setDiv(e,i){return this.m_value=e/i,this.m_eps=Fs.ulp(this.m_value),this}setDivEN(e,i){return this.setE(e),this.divThis(i)}setDivNE(e,i){return this.set(e),this.divThisE(i)}divThisByPower2(e){return this.m_value/=e,this.m_eps/=Math.abs(e),this}invThis(){return this.setE(nm.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let e,i;return this.m_value>=0?(e=Math.sqrt(this.m_value),i=this.m_value>10*this.m_eps?.5*this.m_eps/e:this.m_value>this.m_eps?e-Math.sqrt(this.m_value-this.m_eps):Math.max(e,Math.sqrt(this.m_value+this.m_eps)-e),i+=Fs.ulp(e)):this.m_value<-this.m_eps?(e=Number.NaN,i=Number.NaN):(e=0,i=Math.sqrt(this.m_eps)),this.m_value=e,this.m_eps=i,this}sqr(){return this.clone().sqrThis()}sqrThis(){const e=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+Fs.ulp(e),this.m_value=e,this}cubeThis(){return K(0),this}setSin(e){const i=Math.sin(e.m_value),s=Math.cos(e.m_value);this.m_value=i;const n=Math.abs(i),r=Math.abs(e.value());return this.m_eps=(Math.abs(s)+.5*n*e.m_eps)*e.m_eps+Fs.ulp(n+r),this}static ulp(e){let i=QA(e);const s=((0x7ff0000000000000n&i)>>52n)-1075n;return s>-1023n?(i=s+0x3ffn<<52n,XKe(i)):e===0?0:Number.MIN_VALUE}setCos(e){const i=Math.sin(e.m_value),s=Math.cos(e.m_value);this.m_value=s;const n=Math.abs(s),r=Math.abs(e.value());return this.m_eps=(Math.abs(i)+.5*n*e.m_eps)*e.m_eps+Fs.ulp(n+r),this}static st_cosAndSin(e,i,s){const n=Math.sin(e.m_value),r=Math.cos(e.m_value);s.m_value=n,i.m_value=r;const o=Math.abs(n),l=Math.abs(r),u=Math.abs(e.value());s.m_eps=(Math.abs(r)+.5*o*e.m_eps)*e.m_eps+Fs.ulp(o+u),i.m_eps=(Math.abs(n)+.5*l*e.m_eps)*e.m_eps+Fs.ulp(l+u)}setLog(e){return K(0),this}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}static atan2(e,i){return K(0),new Fs}acosThis(){return K(0),this}asinThis(){return K(0),this}isInInterval(e){return Ze.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(e)}eq(e){return Math.abs(this.m_value-e.m_value)<=this.m_eps+e.m_eps}ne(e){return!this.eq(e)}gt(e){return this.m_value-e.m_value>this.m_eps+e.m_eps}lt(e){return e.m_value-this.m_value>this.m_eps+e.m_eps}ge(e){return!this.lt(e)}le(e){return!this.gt(e)}tolEQ(e,i){return Math.abs(this.m_value-e.m_value)<=i||this.eq(e)}tolNE(e,i){return!this.tolEQ(e,i)}tolGT(e,i){return this.m_value-e.m_value>i&&this.gt(e)}tolLT(e,i){return e.m_value-this.m_value>i&&this.lt(e)}tolGE(e,i){return!this.tolLT(e,i)}tolLE(e,i){return!this.tolGT(e,i)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&this.m_eps!==0}tolIsZero(e){return Math.abs(this.m_value)<=Math.max(this.m_eps,e)}setPi(){this.setE($Ke)}setEuler(){this.set(2.718281828459045,fj())}cubicRootThis(){return K(0),this}powerThis(e){return K(0),this}setPower(e,i){return this.setE(e),this.powerThis(i)}static size(){return 1}};function oa(t,e){const i=N6(t),s=N6(e),n=53-Zee(i),r=53-Zee(s);return(n>=0?n:0)+(r>=0?r:0)<=52}function Y4(t,e){const i=t+e;return i-t===e&&i-e===t}function rl(t,e){const i=t-e;return t-i===e&&e+i===t}function fj(){return en()}Be.dimensions=1;const $Ke=new Be(Math.PI,.5*fj()),Mx=new Be(0,0),nm=new Be(1,0),OKe=new Be(4,0);function Pu(t,e,i){return t.addE(e.subE(t).mulE(i))}function Tu(t,e,i){return e.subE(e.subE(t).mulE(nm.subE(i)))}function RKe(t,e){return t<e?rr(t,e):rr(e,t)}function rm(t,e){const i=Math.abs(t);return e>=0?i:-i}function gv(t){return Math.round(t)}function Wn(t,e,i,s,n){n[0]=e[0]+(i[0]-e[0])*s,n[1]=e[1]+(i[1]-e[1])*s,t===3&&(n[2]=e[2]+(i[2]-e[2])*s)}function Zn(t,e,i,s,n){n[0]=i[0]-(i[0]-e[0])*(1-s),n[1]=i[1]-(i[1]-e[1])*(1-s),t===3&&(n[2]=i[2]-(i[2]-e[2])*(1-s))}function YS(t,e,i,s,n){s<=.5?Wn(t,e,i,s,n):Zn(t,e,i,s,n)}function Kd(t,e,i,s,n){n[0]=e[0].addE(i[0].subE(e[0]).mulE(s)),n[1]=e[1].addE(i[1].subE(e[1]).mulE(s))}function Jd(t,e,i,s,n){n[0]=i[0].subE(i[0].subE(e[0]).mulE(nm.subE(s))),n[1]=i[1].subE(i[1].subE(e[1]).mulE(nm.subE(s)))}function ji(t,e,i){let s;return s=i<=.5?t+(e-t)*i:e-(e-t)*(1-i),s}function wo(t,e,i){return t+(e-t)*i}function Fr(t,e,i){return e-(e-t)*(1-i)}function ar(t,e,i,s){i<=.5?(s.x=t.x+(e.x-t.x)*i,s.y=t.y+(e.y-t.y)*i):(s.x=e.x-(e.x-t.x)*(1-i),s.y=e.y-(e.y-t.y)*(1-i))}function LKe(t,e,i,s){i<=.5?(s.x=t.x+(e.x-t.x)*i,s.y=t.y+(e.y-t.y)*i,s.z=t.z+(e.z-t.z)*i):(s.x=e.x-(e.x-t.x)*(1-i),s.y=e.y-(e.y-t.y)*(1-i),s.z=e.z-(e.z-t.z)*(1-i))}function Xi(t){return t*t}function Kee(t){return t*t*t}function FKe(t){return 1/Math.sqrt(t)}function xn(t){return t<0?-1:t>0?1:0}const Jee=[0],zKe=[0];function Qee(t,e,i){return qKe(_ge(t,e,Jee),i,Jee[0],zKe)}const gN=[0],yN=[0],vN=[0],_N=[0];function _ge(t,e,i){const s=t*e;return ete(t,gN,yN),ete(e,vN,_N),i[0]=yN[0]*_N[0]-(s-gN[0]*vN[0]-yN[0]*vN[0]-gN[0]*_N[0]),s}function ete(t,e,i){const s=134217729*t;e[0]=s-(s-t),i[0]=t-e[0]}const tte=[0],ite=[0];function qKe(t,e,i,s){const n=bN(t,e,tte),r=bN(n,i,ite);return bN(r,tte[0]+ite[0],s)}function bN(t,e,i){const s=t+e;return Math.abs(t)>Math.abs(e)?i[0]=t-s+e:i[0]=e-s+t,s}function $g(t,e){return t%e}function pj(t){const e=1-t;if(e===0)return 1;let i;if(e<=.01){const s=e,n=Math.log(s);i=1+s*(.4431471805599453-.25*n+s*(.05680519270997949-.09375*n+s*(.02183137044373718-.05859375*n+s*(.011544521417308362-.042724609375*n+s*(.00714200031339596-.0336456298828125*n+s*(.004854743337164948-.027757644653320312*n+s*(.003514687963781376-.023627042770385742*n)))))))}else{if(t<.016){const s=t;return _a()*(1-s*(.25+s*(.046875+s*(.01953125+s*(.01068115234375+s*(.0067291259765625+s*(.004626274108886719+s*(.0033752918243408203+s*.0025710230693221092))))))))}i=bge(0,e,1)-t*xge(0,e,1)/3}return un(i,1,_a())}function mj(t,e,i=Number.NaN){if(K(e>=0&&e<=1),e===0)return t;let s=1,n=t;if(n<0&&(n=-n,s=-1),e===1){const y=Math.round(n/ki()),_=n-y*ki();return s*(2*y+Math.sin(_))}const r=_a(),o=Math.floor(n/r);1&o?n=(o+1)*r-n:n-=o*r;const l=Math.sin(n),u=Number.isNaN(i)?pj(e):i;let f;if(l===1)f=u+Math.sqrt(1-e)*(n-r);else{const y=n*n;if(.01424*Math.pow(y,4)<=2*en())f=n*(1+y*e*(-1/6+y*((4-3*e)/120-(16+(45*e-60)*e)/5040*y)));else if(e<=.01){const _=Math.sin(2*n),x=Math.sin(4*n),S=Math.sin(6*n),P=Math.sin(8*n),A=Math.sin(10*n);f=n+e*((2*-n+_)/8+e*((-3*n+2*_-.25*x)/64+e*((-20*n+15*_-3*x+S/3)/1024+e*(5*(-140*n+112*_-28*x+16/3*S-.5*P)/65536+7*e*((-63*n+52.5*_-15*x+3.75*S-.625*P+.05*A)/65536+e*(-693*n+594*_-185.625*x+1.375*S-12.375*P+1.8*A-.125*Math.sin(12*n))/1048576)))))}else{const _=l*l,x=Math.cos(n),S=x*x,P=wge(l,x,e);f=l*(bge(S,P,1)-e*_*xge(S,P,1)/3)}}return 1&o?f=u*(o+1)-f:f+=u*o,s*f}function VKe(t,e,i=Number.NaN){if(t===0)return 0;let s=1,n=t;t<0&&(n=-n,s=-1);const r=Number.isNaN(i)?pj(e):i,o=Math.floor(n/r);1&o?n=(o+1)*r-n:n-=o*r;let l=n<=0?0:n>=r?_a():GKe(n,e,r);return 1&o?l=_a()*(o+1)-l:l+=_a()*o,s*l}function bge(t,e,i){K((t!==0?1:0)+(e!==0?1:0)+1>1);let s=t,n=e,r=i;for(;;){const o=Math.sqrt(s*n)+Math.sqrt(n*r)+Math.sqrt(r*s);s=.25*(s+o),n=.25*(n+o),r=.25*(r+o);const l=(s+n+r)/3,u=(l-s)/l,f=(l-n)/l,y=(l-r)/l;if(Math.abs(u)<=.0024&&Math.abs(f)<=.0024&&Math.abs(y)<=.0024){const _=u*f-y*y,x=u*f*y;return(1+(1/24*_-.1-3/44*x-5*_*_/208+_*x/16)*_+(1/14+3*x/104)*x)/Math.sqrt(l)}}}function xge(t,e,i){K(t!==0||e!==0);let s=t,n=e,r=i;const o=new zr(0);let l=1;for(;;){const u=.2*(s+n+3*r),f=(u-s)/u,y=(u-n)/u,_=(u-r)/u;if(Math.abs(f)<=.0015&&Math.abs(y)<=.0015&&Math.abs(_)<=.0015){const k=f*y,$=_*_,F=k-$,G=k-6*$,V=G+F+F,B=9/22,W=3/26,J=G*(.25*B*G-3/14-1.5*W*_*V),re=_*(1/6*V+_*(-.4090909090909091*F+_*W*k));return 3*o.getResult()+l*(1+J+re)/(u*Math.sqrt(u))}const x=Math.sqrt(s),S=Math.sqrt(n),P=Math.sqrt(r),A=x*(S+P)+S*P;o.add(l/(P*(r+A))),l*=.25,s=.25*(s+A),n=.25*(n+A),r=.25*(r+A)}}function wge(t,e,i){return t<.999?1-i*Xi(t):1-i+i*Xi(e)}function GKe(t,e,i){if(e===0)return t;if(e===1)return Math.asin(t);let s=0,n=!0;if(t<.2){const o=t*t,l=t*(1+o*e*(1/6+o*((13*e-4)/120+(16-284*e+493*e*e)/5040*o))),u=Math.abs(e*(4944*e-64-31224*e*e+37369*e*e*e)/362880*Math.pow(t,9));if(u<Math.abs(l)*en())return l;s=l,n=u>.1*l}if(n){const o=1-e,l=1-t/i,u=Math.sqrt(l*l+o*o),f=Math.atan2(o,t+en());s=_a()+Math.sqrt(u)*(f-_a())}let r=0;for(let o=0;o<7;o++){r=mj(s,e,i);const l=wge(Math.sin(s),Math.cos(s),e);if(s-=(r-t)/Math.sqrt(l),o>0&&Math.abs(r-t)<=4*en()*t)break}return s}function ZA(t,e,i,s,n){return t===0?s===0?e:s===1?i:n:t===1?s===0?e:s===1?i:ji(e,i,s):(t===2&&js("angular interpolation"),void js(""))}function rz(t,e,i,s,n,r,o,l){if(t===0)for(let u=0;u<r;++u)s[u+n]=o===0?e[u]:o===1?i[u]:l;else if(t===1)if(o===0)dn(s,e,n,0,r);else if(o===1)dn(s,i,n,0,r);else for(let u=0;u<r;++u)s[u+n]=ji(e[u],i[u],o);else if(t===2)if(o===0)dn(s,e,n,0,r);else if(o===1)dn(s,i,n,0,r);else{let u=0;for(let f=0,y=n;f<r;++f,++y)s[y]=ji(e[f],i[f],o),u+=s[y]*s[y];if(u>0){u=Math.sqrt(u);for(let f=n;f<n+r;++f)s[f]/=u}else{for(let f=n;f<n+r;++f)s[f]=0;s[n]=1}}else js("")}function dn(t,e,i,s,n){if(n===0)return;let r=0,o=i,l=s;for(;r++<n;)t[o++]=e[l++]}function St(t,e){return t}function Ax(t){t.sort((e,i)=>e<i?-1:e>i?1:0)}function oz(t,e){const i=t.slice(0,e);Ax(i),dn(t,i,0,0,e)}function rd(t,e,i,s){const n=t.slice(e,e+i);n.sort(s),dn(t,n,e,0,i)}function xf(t,e){return t<e?-1:t>e?1:0}function ste(t,e,i,s){return t<i?-1:t>i?1:e<s?-1:e>s?1:0}function Sge(t,e){if(t.length<2)return t.length;let i=0;for(let s=1;s<t.length;++s)e(t[s],t[i])||(i++,t[s]=St(t[i],t[i]=t[s]));return 1+i}function jKe(t,e){t[e]=t.at(-1),t.pop()}function KA(t,e=!1){return{[Symbol.dispose](){this.bForget||t()},bForget:e}}function Ge(t,e){return Array.from({length:e},()=>new t)}function D6(t,e,i){for(let s=0;s<i;++s)t[s].assign(e[s]);return i}function k6(t,e){const i=t.slice(0,e);for(let s=0;s<e;++s)i[s]=i[s].clone();return i}function XS(t){return Array.from({length:t},()=>null)}function nte(t,e){return Array.from({length:e},()=>t())}function Vi(t,e){return Array.from({length:t},()=>e)}function JA(t,e){return e in t&&Object.getOwnPropertyNames(t).length===1}class BKe{constructor(...e){this.m_elts=e}get length(){return this.m_elts.length}at(e){return this.m_elts[e]}[Symbol.dispose](){for(const e of this.m_elts)e[Symbol.dispose]()}}function rr(t,e){return{first:t,second:e}}const gj=Math.PI,lS=2*Math.PI,Ss=.5*Math.PI,Ege=new ArrayBuffer(8),Cge=new Float64Array(Ege),Pge=new BigUint64Array(Ege),HKe=0x0fffffffffffffn,UKe=0x7ff0000000000000n;function YKe(){return Number.EPSILON*oJe}function QA(t){return Cge[0]=t,Pge[0]}function XKe(t){return Pge[0]=t,Cge[0]}function N6(t){return QA(t)&HKe}function rte(t){return Number((QA(t)&UKe)>>52n)}function D1(t){if(t===0n)return-1n;if(t===1n||-1n===t)return 0n;t<0n&&(t=-t);let e=0n,i=512n,s=1n<<e+i;for(;t>=s;)e+=i,i<<=1n,s<<=i;let n=e;i>>=1n;let r=n+i;for(;i>0n;)t<1n<<r||(n=r),i>>=1n,r=n+i;return n}function ga(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function l5(t,e,i){return t===e||Math.abs(t-e)<=i||Number.isNaN(t)&&Number.isNaN(e)}function Js(t,e){return t<e?-1:t>e?1:0}function WKe(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;{const i=Number.isNaN(t),s=Number.isNaN(e);return i<s?-1:i>s?1:0}}function ya(){return 2147483647}function ote(){return 32767}function So(){return 2147483647}const e7=So(),ZKe=BigInt(e7),Tge=2166136261,cS=16777619;function KKe(t){let e=Tge,i=t;return e=(e^255&i)*cS,i>>=8,e=(e^255&i)*cS,i>>=8,e=(e^255&i)*cS,i>>=8,e=(e^255&i)*cS,e&e7}const JKe=14695981039346656037n,k1=1099511628211n;function QKe(t){let e=JKe,i=t;return e=(e^0xffn&i)*k1,i>>=8n,e=(e^0xffn&i)*k1,i>>=8n,e=(e^0xffn&i)*k1,i>>=8n,e=(e^0xffn&i)*k1,i>>=8n,e=(e^0xffn&i)*k1,i>>=8n,e=(e^0xffn&i)*k1,i>>=8n,e=(e^0xffn&i)*k1,e&ZKe}function eJe(t){return 1103515245*t+12345&2147483647}function tJe(t){let e=Tge;for(let i=0,s=t.length;i<s;++i)e=(e^t.charCodeAt(i))*cS;return e&e7}function Va(t,e){return e+2654435769+(t<<6)+(t>>2)&e7}function iJe(t,e){return Va(t,nJe(e))}function Ige(t){return Va(3735928559,t)}function sJe(t,e){return Va(t,Ige(e))}function tf(t){return KKe(t)}function nJe(t){return Number(QKe(t))}function o2(t){return eJe(t)}const rJe=100,oJe=100;function yv(){return Number.EPSILON*rJe}function az(){return .38196601125010515}function aJe(){return 1.4142135623730951}function en(){return Number.EPSILON}function Ms(t,e,i){return t===e||t===i}function un(t,e,i){return t>=e?t<=i?t:i:e}function lz(t,e,i){const s=t[0];if(s>=e){if(s<=i)return!1;t[0]=i}else t[0]=e;return!0}function lJe(t,e){return t>=e?e:t<-e?-e:t}function ki(){return gj}function jo(){return lS}function _a(){return Ss}const cJe=3*_a();function uJe(){return cJe}function hJe(t){return t+0}function ate(t){return{v:t}}let _t=class ir{constructor(){this.m_rn=ate(0n),this.m_rd=ate(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(e,i){const s=e.clone();return i!==void 0&&s.limitPrecisionThis(i),s}static constructDouble(e){return new ir().setDouble(e)}static constructInt64(e){return new ir().setInt64(e)}static constructRational(e,i){return new ir().setRational(e,i)}static constructInt32(e){return this.constructInt64(BigInt(Math.trunc(e)))}[Symbol.toPrimitive](e){return this}compare(e){return this.lt(e)?-1:this.gt(e)?1:0}assignCopy(e){return this.setThis(e)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return new ir().setThis(this)}setThis(e){return this.m_bNaN=e.m_bNaN,this.m_bNormalized=e.m_bNormalized,this.m_rn.v=e.m_rn.v,this.m_rd.v=e.m_rd.v,this.m_power=e.m_power,this.m_sign=e.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(e){if(this.setZero(),e===0)return this;if(Number.isInteger(e)&&Math.abs(e)<So())return this.setInt32(e);const i=QA(e),s=(i&ir.s_em)>>52n,n=!!(i&ir.s_sm),r=i&ir.s_fm;if(s===ir.s_emax)return r?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=n?-1n:1n,this.m_rd.v=0n,this);s===0n&&js("denormalized numbers not yet implemented");const o=s-1023n,l=o>=0n?o:0n,u=o<0n?-o:0n;return this.m_rn.v=(1n<<52n|r)<<l,this.m_rd.v=1n<<52n+u,this.m_sign=n?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(e){return e===0n?this.setZero():(this.m_bNaN=!1,this.m_sign=e>0n?1:-1,this.m_rn.v=e>0n?e:-e,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(e,i){return e===0n?i===0n?this.setNAN():this.setZero():i===0n?e>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(e>0n?1:-1)*(i>0n?1:-1),this.m_rn.v=e>0n?e:-e,this.m_rd.v=i>0n?i:-i,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(e){return this.setInt64(BigInt(Math.trunc(e)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===1}isNegativeInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===-1}isFinite(){return!this.isNAN()&&this.m_rd.v!==0n}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&e.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&e.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&e.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(e,!1)}thisSubAbs(e){return K(0),this}mulThis(e){return e.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=e.m_sign,this.m_sign===0?this.setZero():(this.m_rn.v*=e.m_rn.v,this.m_rd.v*=e.m_rd.v,this.m_power+=e.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(e){return this.mulThis(ir.constructDouble(e))}thisMulInt64(e){return K(0),this}thisMulInt32(e){return K(0),this}divThis(e){return this.mulThis(e.clone().invertThis())}divDoubleThis(e){return this.divThis(ir.constructDouble(e))}addDoubleThis(e){return this.addThis(ir.constructDouble(e))}subDoubleThis(e){return this.subThis(ir.constructDouble(e))}mul(e){return this.clone().mulThis(e)}mulBigIntThis(e){return this.mulThis(ir.constructInt64(e))}mulDouble(e){return this.clone().mulThis(ir.constructDouble(e))}div(e){return this.clone().divThis(e)}divDouble(e){return this.clone().divDoubleThis(e)}add(e){return this.clone().addThis(e)}fmSubThis(e,i){return this.subThis(e.clone().mulThis(i))}fmAddThis(e,i){return this.addThis(e.clone().mulThis(i))}addThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&e.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&e.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&e.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(e,!0)}addDouble(e){return this.clone().addThis(ir.constructDouble(e))}sub(e){return this.clone().subThis(e)}subDouble(e){return this.clone().subThis(ir.constructDouble(e))}isZero(){return this.m_sign===0}equals(e){return this.clone().subThis(e).isZero()}lt(e){return!this.isNAN()&&!e.isNAN()&&!(this.isPositiveInf()&&e.isPositiveInf()||this.isNegativeInf()&&e.isNegativeInf())&&!this.isPositiveInf()&&(!!e.isPositiveInf()||this.clone().sub(e).LZ())}absLessAbs(e){return this.abs().lt(e.abs())}gt(e){return this.clone().sub(e).GZ()}lte(e){return this.sub(e).LEZ()}gte(e){return this.sub(e).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(this.m_rn.v===0n)return this.setZero();let e=0,i=0xffffffffn;for(;(this.m_rn.v&i)===0n&&i<=this.m_rn.v;)i<<=32n,e+=32;i&=this.m_rn.v,i>>=BigInt(e),e+=nz(BigInt.asUintN(32,i))-1;let s=0;for(i=0xffffffffn;(this.m_rd.v&i)===0n&&i<=this.m_rd.v;)i<<=32n,s+=32;return i&=this.m_rd.v,i>>=BigInt(s),s+=nz(BigInt.asUintN(32,i))-1,this.m_rn.v>>=BigInt(e),this.m_rd.v>>=BigInt(s),this.m_power+=e-s,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):this.m_rn.v===0n?(this.setPositiveInf(),this):(this.m_rd=St(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(e){if(e===0)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let i=Number(D1(this.m_rn.v));if(i>e){const s=i-e;this.m_rn.v>>=BigInt(i-e),this.m_power+=s}if(i=Number(D1(this.m_rd.v)),i>e){const s=i-e;this.m_rd.v>>=BigInt(i-e),this.m_power-=s}return this}hiBitIndex(){return Math.max(Number(D1(this.m_rn.v)),Number(D1(this.m_rd.v)))}ldexp(e){return this.clone().ldexpThis(e)}ldexpThis(e){return e&&(this.m_bNormalized=!1,this.m_power+=e,this.normalizeThis()),this}LZ(){return!this.isNAN()&&this.m_sign===-1}GZ(){return!this.isNAN()&&this.m_sign===1}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(e,i){if(e.m_sign<0n&&Mi("MP_value: sqrt(-1)"),e.isZero())return e.clone();let s=52,n=2220446049250313e-31;for(;s<i;)2*s<=i?(n*=n,s*=2):(n*=2220446049250313e-31,s+=52);s+=52;const r=D1(e.m_rn.v),o=D1(e.m_rd.v);let l,u=e.m_power+Number(r-o);const f=new ir;Math.abs(u)>200?(1&Math.abs(u)&&(u+=1),l=ir.constructAssign(e,53).ldexpThis(-u).value(),f.setThis(e).ldexpThis(-u),K(Number.isFinite(l))):(f.setThis(e),l=f.value(),K(Number.isFinite(l)),u=0),l=Math.sqrt(l);const y=ir.constructDouble(l),_=ir.constructDouble(n);_.mulThis(y).ldexpThis(1);const x=n*l*2,S=y.clone(),P=new ir;let A;for(let k=0;k<10;++k){S.mulThis(y),P.setThis(f).subThis(S).absThis();let $=P.value();if(A=1,$<.9)for(;$>x;)$*=$,++A;else A=4;if(P.lte(_))break;for(let F=0;F<A;F++)S.setThis(y).divThis(f).invertThis().addThis(y).ldexpThis(-1).limitPrecisionThis(s),y.setThis(S)}return y.ldexpThis(u/2)}static cubicRoot(e,i){if(e.isZero())return e.clone();let s=52,n=2220446049250313e-31;for(;s<i;)2*s<=i?(n*=n,s*=2):(n*=2220446049250313e-31,s+=52);s+=52;const r=Math.pow(Math.abs(e.value()),1/3),o=ir.constructDouble(r),l=o.clone();l.sqrThis().mulDoubleThis(3).mulDoubleThis(n),l.limitPrecisionThis(32),e.LZ()&&o.negateThis();for(let u=0;u<10;++u){const f=o.clone();f.sqrThis().mulThis(o);const y=f.clone();if(y.subThis(e),y.absThis().limitPrecisionThis(32),y.lte(l))break;y.setThis(e),y.ldexpThis(1),y.addThis(f);const _=f.clone();_.ldexpThis(1),_.addThis(e),y.divThis(_),o.mulThis(y),o.limitPrecisionThis(s)}return o}isInTheRangeOfDouble(){return K(0),!1}sign(){return this.m_sign}cosAndSin(e,i){K(0)}static nan(){return K(0),new ir}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(this.m_rd.v===0n)return this.m_sign===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;const e=this.m_sign===-1,i=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n);let s=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n);const n=i/s;let r=Number(n);if(BigInt(r)!==n)return e?-r:r;let o=i-n*s;if(o){let l=D1(s)-1023n;l>0n&&(s>>=l,o<<=52n,o>>=l);let u=Number(o);Number.isFinite(u)||(o>>=52n,u=Number(o),l=0n),l>0n&&(u/=Math.pow(2,52)),r+=u/Number(s)}return e?-r:r}signVal(){return this.m_sign===1?1n:this.m_sign===-1?-1n:0n}opPlusMinus(e,i){const s=Math.min(this.m_power,e.m_power);let n,r;this.m_power>s?(n=BigInt(this.m_power-s),r=0n):(n=0n,r=BigInt(e.m_power-s));const o=this.signVal()*this.m_rn.v*e.m_rd.v<<n,l=e.signVal()*e.m_rn.v*this.m_rd.v<<r;return this.m_rn.v=i?o+l:o-l,this.m_rd.v*=e.m_rd.v,this.m_power=s,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}};_t.s_sm=0x8000000000000000n,_t.s_em=0x7ff0000000000000n,_t.s_fm=0x000fffffffffffffn,_t.s_emax=0x7ffn;const zh=_t.constructInt32(1),Bo=_t.constructInt32(0);function dJe(t,e){return kKe(t^e)}function fJe(t,e){let i=rte(t);const s=rte(e);return i===s?(i-=53-dJe(N6(t),N6(e)),i):i>s?i:s}function R_(t){const e=Ge(Y,t.length);for(let i=0,s=t.length;i<s;++i)e[i].setCoords(t[i][0],t[i][1]);return e}let Y=class cs{static construct(e,i){return new cs(e,i)}constructor(e,i){e!==void 0?(this.x=e,this.y=i):this.x=this.y=Number.NaN}clone(){return new cs(this.x,this.y)}assign(e){this.setCoordsPoint2D(e)}setCoords(e,i){return this.x=e,this.y=i,this}setCoordsPoint2D(e){this.x=e.x,this.y=e.y}isEqualPoint2D(e,i){return i!==void 0?Math.abs(this.x-e.x)<=i&&Math.abs(this.y-e.y)<=i:this.x===e.x&&this.y===e.y}isEqual(e,i,s){return s!==void 0?Math.abs(this.x-e)<=s&&Math.abs(this.y-i)<=s:this.x===e&&this.y===i}equalsPoint2D(e,i){return this.isEqualPoint2D(e,i)}setSub(e,i){this.x=e.x-i.x,this.y=e.y-i.y}addThis(e){return this.x+=e.x,this.y+=e.y,this}setAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}absoluteOther(e){}absolute(){return K(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(e){this.x=-e.x,this.y=-e.y}interpolateThis(e,i){}interpolate(e,i,s){K(0)}scaleAddThis(e,i){this.x=this.x*e+i.x,this.y=this.y*e+i.y}scaleAddOther(e,i,s){K(0)}scaleOther(e,i){K(0)}scale(e){this.x*=e,this.y*=e}compare(e){return this.y<e.y?-1:this.y>e.y?1:this.x<e.x?-1:this.x>e.x?1:0}compareX(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}normalizeOther(e){K(0)}normalize(){const e=this.length();return e?(this.x/=e,this.y/=e):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(e,i){return K(0),{}}static average(e,i){const s=new cs;if(i===0)return s.setNAN(),s;if(i===1)return s.assign(e[0]),s;const n=new zr(e[0].x),r=new zr(e[0].y);for(let o=1;o<i;o++)n.add(e[o].x),r.add(e[o].y),255&o||(n.normalize(),r.normalize());return s.x=n.getResult()/i,s.y=r.getResult()/i,s}offset(e,i){const s=cs.distance(e,i),n=cs.construct(this.x,this.y);if(s===0)return cs.distance(n,e);const r=i.clone();return r.subThis(e),n.subThis(e),n.crossProduct(r)/s}side(e,i){return K(0),0}static sqrDistance(e,i){const s=e.x-i.x,n=e.y-i.y;return s*s+n*n}static sqrDistanceCoords(e,i,s,n){const r=s-e,o=n-i;return r*r+o*o}static distance(e,i){return Math.sqrt(cs.sqrDistance(e,i))}dotProduct(e){return this.x*e.x+this.y*e.y}dotProductAbs(e){return Math.abs(this.x*e.x)+Math.abs(this.y*e.y)}crossProduct(e){return this.x*e.y-this.y*e.x}crossProductAbs(e){return K(0),0}rotateDirect(e,i){const s=this.x*e-this.y*i,n=this.x*i+this.y*e;this.x=s,this.y=n}rotateReverse(e,i){const s=this.x*e+this.y*i,n=-this.x*i+this.y*e;this.x=s,this.y=n}leftPerpendicularThis(){const e=this.x;this.x=-this.y,this.y=e}leftPerpendicularOther(e){const i=e.x;this.x=-e.y,this.y=i}rightPerpendicularThis(){const e=this.x;this.x=this.y,this.y=-e}rightPerpendicularOther(e){const i=e.x;this.x=e.y,this.y=-i}equals(e){return this.x===e.x&&this.y===e.y}notequals(e){return this.x!==e.x||this.y!==e.y}not(){return!this.x&&!this.y}gt(e){return this.y>e.y||this.y===e.y&&this.x>e.x}gte(e){return!this.lt(e)}lt(e){return this.y<e.y||this.y===e.y&&this.x<e.x}lte(e){return!this.gt(e)}subThis(e){return this.x-=e.x,this.y-=e.y,this}divThis(e){return this.x/=e,this.y/=e,this}add(e){return new cs(this.x+e.x,this.y+e.y)}sub(e){return new cs(this.x-e.x,this.y-e.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new cs(-this.x,-this.y)}mul(e){return new cs(this.x*e,this.y*e)}mulThis(e){return this.x*=e,this.y*=e,this}divide(e){return new cs(this.x/e,this.y/e)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new cs(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return this.x===0&&this.y===0}norm(e){switch(e){case 0:{const i=Math.abs(this.x),s=Math.abs(this.y),n=i-s;return n>=0?i:n<=0?s:Number.NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:Je("norm")}}getQuarter(){return cs.getQuarterCoords(this.x,this.y)}static getQuarterCoords(e,i){return e>0?i>=0?1:4:i>0?2:e===0?4:3}static compareVectors(e,i){const s=e.getQuarter(),n=i.getQuarter();return n===s?cs.orientationRobustImpl(cs.construct(0,0),i,e,!0):s<n?-1:1}static compareVectorsOrigin(e,i,s){const n=i.sub(e),r=s.sub(e),o=n.getQuarter(),l=r.getQuarter();return l===o?cs.orientationRobustImpl(e,s,i,!0):o<l?-1:1}static orientationRobust(e,i,s){return cs.orientationRobustImpl(e,i,s,!1)}static orientationRobustEx(e,i,s,n){if(e.equals(i)||s.equals(n))return 0;const r=i.x-e.x,o=i.y-e.y,l=n.x-s.x,u=n.y-s.y;{const S=cs.getQuarterCoords(r,o)-1,P=cs.getQuarterCoords(l,u)-1,A=cs.d[S][P];if(A!==0)return A}const f=r*u,y=o*l,_=4*en()*(Math.abs(f)+Math.abs(y)),x=f-y;return Math.abs(x)>=_?x<0?-1:x>0?1:0:cs.orientationRobustExMp(e,i,s,n)}static orientationRobustExMp(e,i,s,n){const r=_t.constructDouble(i.x),o=_t.constructDouble(n.x);r.subThis(_t.constructDouble(e.x)),o.subThis(_t.constructDouble(s.x));const l=_t.constructDouble(i.y),u=_t.constructDouble(n.y);return l.subThis(_t.constructDouble(e.y)),u.subThis(_t.constructDouble(s.y)),r.mulThis(u),l.mulThis(o),r.subThis(l),r.LZ()?-1:r.GZ()?1:0}static orientationNonRobust(e,i,s){const n=i.sub(e).crossProduct(s.sub(e));return n<0?-1:n>0?1:0}static orientationRobustImpl(e,i,s,n){if(i.isEqualPoint2D(e)||s.isEqualPoint2D(e)||i.isEqualPoint2D(s))return 0;const r=i.x-e.x,o=i.y-e.y,l=s.x-e.x,u=s.y-e.y;if(!n){const _=cs.getQuarterCoords(r,o)-1,x=cs.getQuarterCoords(l,u)-1,S=cs.d[_][x];if(S!==0)return S}const f=(Math.abs(r)+Math.abs(o)+Math.abs(l)+Math.abs(u))*(Math.abs(i.x)+Math.abs(i.y)+Math.abs(s.x)+Math.abs(s.y))*8*fj(),y=r*u-o*l;if(Math.abs(y)>f)return y<0?-1:1;if(rl(i.x,e.x)&&rl(s.y,e.y)&&rl(i.y,e.y)&&rl(s.x,e.x)&&oa(r,u)&&oa(o,l)){const _=r*u,x=o*l;if(rl(_,x)){const S=_-x;return S<0?-1:S>0?1:0}}return cs.orientationRobustMp(e,i,s)}static orientationRobustMp(e,i,s){const n=_t.constructDouble(i.x),r=_t.constructDouble(s.x);{const u=_t.constructDouble(e.x);n.subThis(u),r.subThis(u)}const o=_t.constructDouble(s.y),l=_t.constructDouble(i.y);{const u=_t.constructDouble(e.y);o.subThis(u),l.subThis(u)}return n.mulThis(o),l.mulThis(r),n.subThis(l),n.LZ()?-1:n.GZ()?1:0}static inCircleRobust(e,i,s,n){const r=new Be,o=new Be;r.set(e.x),r.subThis(n.x),o.set(e.y),o.subThis(n.y);const l=new Be,u=new Be;l.set(i.x),l.subThis(n.x),u.set(i.y),u.subThis(n.y);const f=new Be,y=new Be;f.set(s.x),f.subThis(n.x),y.set(s.y),y.subThis(n.y);const _=r.mulE(u).subE(o.mulE(l)),x=l.mulE(y).subE(u.mulE(f)),S=r.mulE(y).subE(o.mulE(f)),P=r.mulE(r).addE(o.mulE(o)),A=l.mulE(l).addE(u.mulE(u)),k=f.mulE(f).addE(y.mulE(y)),$=P.mulE(x).subE(A.mulE(S)).addE(k.mulE(_));if(!$.isFuzzyZero()){const F=$.value();return F<0?-1:F>0?1:0}return cs.inCircleRobustMp(e,i,s,n)}static inCircleRobustMp(e,i,s,n){do{if(!rl(e.x,n.x)||!rl(e.y,n.y)||!rl(i.x,n.x)||!rl(i.y,n.y)||!rl(s.x,n.x)||!rl(s.y,n.y))break;const V=e.x-n.x,B=e.y-n.y,W=i.x-n.x,J=i.y-n.y,re=s.x-n.x,se=s.y-n.y;if(!oa(V,J)||!oa(B,W)||!oa(W,se)||!oa(J,re)||!oa(V,se)||!oa(B,re)||!oa(V,V)||!oa(B,B)||!oa(W,W)||!oa(J,J)||!oa(re,re)||!oa(se,se))break;const oe=V*J,pe=B*W,ce=W*se,ue=J*re,ne=V*se,de=B*re,Se=V*V,Pe=B*B,Re=W*W,Oe=J*J,we=re*re,Fe=se*se;if(!rl(oe,pe)||!rl(ce,ue)||!rl(ne,de)||!Y4(Se,Pe)||!Y4(Re,Oe)||!Y4(we,Fe))break;const it=oe-pe,vt=ce-ue,ot=ne-de,ut=Se+Pe,Ct=Re+Oe,qt=we+Fe;if(!oa(ut,vt)||!oa(Ct,ot)||!oa(qt,it))break;const Lt=ut*vt,Dt=Ct*ot,Wi=qt*it;if(!rl(Lt,Dt))break;const us=Lt-Dt;if(!Y4(us,Wi))break;const fn=us+Wi;return fn<0?-1:fn>0?1:0}while(!1);const r=_t.constructDouble(n.x),o=_t.constructDouble(n.y),l=_t.constructDouble(e.x),u=_t.constructDouble(e.y);l.subThis(r),u.subThis(o);const f=_t.constructDouble(i.x),y=_t.constructDouble(i.y);f.subThis(r),y.subThis(o);const _=_t.constructDouble(s.x),x=_t.constructDouble(s.y);_.subThis(r),x.subThis(o);const S=l.mul(y).sub(u.mul(f)),P=f.mul(x).sub(y.mul(_)),A=l.mul(x).sub(u.mul(_)),k=l.mul(l).add(u.mul(u)),$=f.mul(f).add(y.mul(y)),F=_.mul(_).add(x.mul(x)),G=k.mul(P).sub($.mul(A)).add(F.mul(S));return G.LZ()?-1:G.GZ()?1:0}static inCircleRobustMp3Point(e,i,s){const n=_t.constructDouble(e.x),r=_t.constructDouble(e.y),o=_t.constructDouble(i.x),l=_t.constructDouble(i.y),u=_t.constructDouble(s.x),f=_t.constructDouble(s.y),y=u.mul(u).add(f.mul(f)).sub(u.mul(n).add(f.mul(r)).add(u.mul(o)).add(f.mul(l))).add(n.mul(o).add(r.mul(l)));return y.LZ()?-1:y.GZ()?1:0}static inCircleRobust3Point(e,i,s){const n=new Be(e.x),r=new Be(e.y),o=new Be(i.x),l=new Be(i.y),u=new Be(s.x),f=new Be(s.y),y=u.mulE(u).addE(f.mulE(f)).subE(u.mulE(n).addE(f.mulE(r)).addE(u.mulE(o)).addE(f.mulE(l))).addE(n.mulE(o).addE(r.mulE(l)));if(!y.isFuzzyZero()){const _=y.value();return _<0?-1:_>0?1:0}return cs.inCircleRobustMp3Point(e,i,s)}static calculateCircleCenterFromThreePoints(e,i,s){if(e.equals(s)||e.equals(i)||s.equals(i))return cs.getNAN();const n=pJe(e,i,s);return n.isNAN()?mJe(e,i,s):n}static calculateAngle(e,i){return Math.atan2(e.crossProduct(i),e.dotProduct(i))}static isBisectorRobust(e,i,s){return K(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(e){this.x=e}set 1(e){this.y=e}static compareZorder(e,i){const s=cs.c_compare_zorder_xx[e.x<0?1:0]|cs.c_compare_zorder_yy[e.y<0?1:0],n=cs.c_compare_zorder_xx[i.x<0?1:0]|cs.c_compare_zorder_yy[i.y<0?1:0];if(s===n){let r=0,o=0;for(let l=0;l<2;++l){const u=fJe(e[l],i[l]);u>r&&(r=u,o=l)}return e[o]<i[o]}return s<n}static lerp(e,i,s){const n=new cs;return ar(e,i,s,n),n}static getClosestCoordinate(e,i,s,n=!1){const r=cs.getNAN();r.setSub(i,e);const o=r.sqrLength();if(o===0)return .5;if(i.isEqualPoint2D(s))return 1;const l=cs.getNAN();l.setSub(s,e);let u=l.dotProduct(r)/o;return n||(u<0?u=0:u>1&&(u=1)),u}static intersectLinesAtOnePoint(e,i,s,n){return K(0),new cs(0,0)}toString(){return`[${this.x},${this.y}]`}};function pJe(t,e,i){const s=new Be(e.x);s.subThis(t.x);const n=new Be(e.y);n.subThis(t.y);const r=new Be(i.x);r.subThis(t.x);const o=new Be(i.y);o.subThis(t.y);const l=s.clone();l.mulThisE(o);let u=n.clone();if(u.mulThisE(r),l.subThisE(u),l.value()===0)return Y.getNAN();l.mulThis(2);const f=s.clone();f.mulThisE(s);const y=n.clone();y.mulThisE(n);const _=f.clone();_.addThisE(y);const x=r.clone();x.mulThisE(r);const S=o.clone();S.mulThisE(o);const P=x.clone();P.addThisE(S);const A=n.clone();A.mulThisE(P),u=o.clone(),u.mulThisE(_),A.subThisE(u),A.divThisE(l);const k=s.clone();k.mulThisE(P),u=r.clone(),u.mulThisE(_),k.subThisE(u),k.divThisE(l);const $=Y.construct(t.x-A.value(),t.y+k.value()),F=t.sub($).length(),G=e.sub($).length(),V=i.sub($).length(),B=1e-15*(F+Math.abs(t.x)+Math.abs(e.x)+Math.abs(i.x)+Math.abs(t.y)+Math.abs(e.y)+Math.abs(i.y));return Math.abs(F-G)<=B&&Math.abs(F-V)<=B&&A.eps()<B&&k.eps()<B?$:Y.getNAN()}function mJe(t,e,i){const s=_t.constructDouble(e.x);s.subDoubleThis(t.x);const n=_t.constructDouble(e.y);n.subDoubleThis(t.y);const r=_t.constructDouble(i.x);r.subDoubleThis(t.x);const o=_t.constructDouble(i.y);o.subDoubleThis(t.y);const l=s.clone();l.mulThis(o);let u=n.clone();if(u.mulThis(r),l.subThis(u),l.isZero())return Y.getNAN();l.mulDouble(2);const f=s.clone();f.mulThis(s);const y=n.clone();y.mulThis(n);const _=f.clone();_.addThis(y);const x=r.clone();x.mulThis(r);const S=o.clone();S.mulThis(o);const P=x.clone();P.addThis(S);const A=n.clone();A.mulThis(P),u=o.clone(),u.mulThis(_),A.subThis(u),A.divThis(l);const k=s.clone();return k.mulThis(P),u=r.clone(),u.mulThis(_),k.subThis(u),k.divThis(l),Y.construct(t.x-A.value(),t.y+k.value())}Y.dimensions=2,Y.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],Y.c_compare_zorder_xx=[2,0],Y.c_compare_zorder_yy=[1,0];class yr{constructor(e,i,s){if(e instanceof yr)return this.data=e.data,this.N=e.N,this.M=e.M,e.data=null,e.N=0,void(e.M=0);this.data=e,this.N=i,this.M=s}assignMove(e){return K(0),this}assignCopy(e){return this===e||(K(this.N*this.M==e.N*e.M),this.data.set(e.data),this.N=e.N,this.M=e.M),this}setZero(){var e;return(e=this.data)==null||e.fill(0),this}setIdentity(){for(let s=0;s<this.N;s++)for(let n=0;n<this.M;n++)this.setRowCol(s,n,s===n?1:0);return this}rows(){return this.N}cols(){return this.M}row(e){return K(0),{}}set(e,i){return this.data[e]=i,this}setRowCol(e,i,s){return this.data[e*this.M+i]=s,this}at(e){return this.data[e]}atRowCol(e,i){return this.data[e*this.M+i]}mulScalar(e,i){K(0)}mul(e,i){if(K(this.M===e.rows()),K(this.N===i.rows()),K(e.cols()===i.cols()),i===this){const n=new Float64Array(this.N*this.M),r=new yr(n,this.N,this.M);return this.mul(e,r),void i.assignCopy(r)}if(i===e){const n=new Float64Array(e.N*e.M),r=new yr(n,e.N,e.M);return this.mul(e,r),void i.assignCopy(r)}const s=e.cols();for(let n=0;n<this.N;n++)for(let r=0;r<s;r++){let o=0;for(let l=0;l<this.M;l++)o+=this.atRowCol(n,l)*e.atRowCol(l,r);i.setRowCol(n,r,o)}}mulTranspose(e,i){if(K(this.M===e.cols()),K(this.N===i.rows()),K(e.rows()===i.cols()),i===this){const n=new Float64Array(this.N*this.M),r=new yr(n,this.N,this.M);return this.mulTranspose(e,r),void i.assignCopy(r)}if(i===e){const n=new Float64Array(e.N*e.M),r=new yr(n,e.N,e.M);return this.mulTranspose(e,r),void i.assignCopy(r)}const s=e.rows();for(let n=0;n<this.N;n++)for(let r=0;r<s;r++){let o=0;for(let l=0;l<this.M;l++)o+=this.atRowCol(n,l)*e.atRowCol(r,l);i.setRowCol(n,r,o)}}mulLeft(e,i){K(0)}mulLeftTranspose(e,i){K(0)}mulDiag(e,i){if(K(this.M===e.N*e.M),K(this.N===i.rows()),K(this.M===i.cols()),i===this){const n=new Float64Array(this.N*this.M),r=new yr(n,this.N,this.M);return this.mulDiag(e,r),void i.assignCopy(r)}const s=this.M;for(let n=0;n<this.N;n++)for(let r=0;r<s;r++)i.setRowCol(n,r,this.atRowCol(n,r)*e.at(r))}transposeInPlace(){if(this.N===this.M){for(let s=0;s<this.N;s++)for(let n=s+1;n<this.M;n++){const r=this.atRowCol(s,n);this.setRowCol(s,n,this.atRowCol(n,s)),this.setRowCol(n,s,r)}return this}const e=new Float64Array(this.N*this.M),i=new yr(e,this.N,this.M);return i.assignCopy(this),this.M=St(this.N,this.N=this.M),i.transpose(this),this}transpose(e){if(this!==e){yr.checkDims(e,this.M,this.N);for(let i=0;i<this.N;i++)for(let s=0;s<this.M;s++)e.setRowCol(s,i,this.atRowCol(i,s))}else e.transposeInPlace()}add(e,i){}svd(e,i,s,n=!1){if(yr.checkDims(e,this.N,this.M),yr.checkDims(i,this.M,1),yr.checkDims(s,this.M,this.M),n){if(K(this.N===this.M),!this.symmetricEigen(i,s))return!1;for(let ce=0;ce<this.M;++ce)i.at(ce)<0&&i.set(ce,0);return e.assignCopy(s),!0}let r,o,l,u,f,y,_,x=0,S=0,P=0,A=0,k=0;const $=this.M,F=this.N;e.assignCopy(this);const G=new Float64Array($),V=new yr(G,$,1),B=(ce,ue)=>ue>=0?Math.abs(ce):-Math.abs(ce),W=(ce,ue)=>{if((ce=Math.abs(ce))>(ue=Math.abs(ue))){const ne=ue/ce;return ce*Math.sqrt(ne*ne+1)}if(ue>0){const ne=ce/ue;return ue*Math.sqrt(ne*ne+1)}return 0};for(let ce=0;ce<$;ce++){if(x=ce+1,V.set(ce,A*P),P=u=A=0,ce<F){for(let ne=ce;ne<F;ne++)A+=Math.abs(e.atRowCol(ne,ce));if(A){for(let ne=ce;ne<F;ne++)e.setRowCol(ne,ce,e.atRowCol(ne,ce)/A),u+=e.atRowCol(ne,ce)*e.atRowCol(ne,ce);o=e.atRowCol(ce,ce),P=-B(Math.sqrt(u),o),l=o*P-u,e.setRowCol(ce,ce,o-P);for(let ne=x;ne<$;ne++){u=0;for(let de=ce;de<F;de++)u+=e.atRowCol(de,ce)*e.atRowCol(de,ne);o=u/l;for(let de=ce;de<F;de++)e.setRowCol(de,ne,e.atRowCol(de,ne)+o*e.atRowCol(de,ce))}for(let ne=ce;ne<F;ne++)e.setRowCol(ne,ce,e.atRowCol(ne,ce)*A)}}if(i.set(ce,A*P),P=u=A=0,ce<F&&ce!==$-1){for(let ne=x;ne<$;ne++)A+=Math.abs(e.atRowCol(ce,ne));if(A){for(let ne=x;ne<$;ne++)e.setRowCol(ce,ne,e.atRowCol(ce,ne)/A),u+=e.atRowCol(ce,ne)*e.atRowCol(ce,ne);o=e.atRowCol(ce,x),P=-B(Math.sqrt(u),o),l=o*P-u,e.setRowCol(ce,x,o-P);for(let ne=x;ne<$;ne++)V.set(ne,e.atRowCol(ce,ne)/l);for(let ne=x;ne<F;ne++){u=0;for(let de=x;de<$;de++)u+=e.atRowCol(ne,de)*e.atRowCol(ce,de);for(let de=x;de<$;de++)e.setRowCol(ne,de,e.atRowCol(ne,de)+u*V.at(de))}for(let ne=x;ne<$;ne++)e.setRowCol(ce,ne,e.atRowCol(ce,ne)*A)}}const ue=Math.abs(i.at(ce))+Math.abs(V.at(ce));k=ue>k?ue:k}for(let ce=$-1;ce>=0;ce--){if(ce<$-1){if(P){for(let ue=x;ue<$;ue++)s.setRowCol(ue,ce,e.atRowCol(ce,ue)/e.atRowCol(ce,x)/P);for(let ue=x;ue<$;ue++){u=0;for(let ne=x;ne<$;ne++)u+=e.atRowCol(ce,ne)*s.atRowCol(ne,ue);for(let ne=x;ne<$;ne++)s.setRowCol(ne,ue,s.atRowCol(ne,ue)+u*s.atRowCol(ne,ce))}}for(let ue=x;ue<$;ue++)s.setRowCol(ce,ue,0),s.setRowCol(ue,ce,0)}s.setRowCol(ce,ce,1),P=V.at(ce),x=ce}for(let ce=(F<$?F:$)-1;ce>=0;ce--){x=ce+1,P=i.at(ce);for(let ue=x;ue<$;ue++)e.setRowCol(ce,ue,0);if(P){P=1/P;for(let ue=x;ue<$;ue++){u=0;for(let ne=x;ne<F;ne++)u+=e.atRowCol(ne,ce)*e.atRowCol(ne,ue);o=u/e.atRowCol(ce,ce)*P;for(let ne=ce;ne<F;ne++)e.setRowCol(ne,ue,e.atRowCol(ne,ue)+o*e.atRowCol(ne,ce))}for(let ue=ce;ue<F;ue++)e.setRowCol(ue,ce,e.atRowCol(ue,ce)*P)}else for(let ue=ce;ue<F;ue++)e.setRowCol(ue,ce,0);e.setRowCol(ce,ce,e.atRowCol(ce,ce)+1)}for(let ce=$-1;ce>=0;ce--)for(let ue=1;;ue++){let ne=1;for(x=ce;x>=0;x--){if(S=x-1,Math.abs(V.at(x))+k===k){ne=0;break}if(Math.abs(i.at(S))+k===k)break}if(ne){r=0,u=1;for(let de=x;de<=ce&&(o=u*V.at(de),V.set(de,V.at(de)*r),Math.abs(o)+k!==k);de++){P=i.at(de),l=W(o,P),i.set(de,l),l=1/l,r=P*l,u=-o*l;for(let Se=0;Se<F;Se++)y=e.atRowCol(Se,S),_=e.atRowCol(Se,de),e.setRowCol(Se,S,y*r+_*u),e.setRowCol(Se,de,_*r-y*u)}}if(_=i.at(ce),x===ce){if(_<0){i.set(ce,-_);for(let de=0;de<$;de++)s.setRowCol(de,ce,-s.atRowCol(de,ce))}break}if(ue===100)return!1;f=i.at(x),S=ce-1,y=i.at(S),P=V.at(S),l=V.at(ce),o=((y-_)*(y+_)+(P-l)*(P+l))/(2*l*y),P=W(o,1),o=((f-_)*(f+_)+l*(y/(o+B(P,o))-l))/f,r=u=1;for(let de=x;de<=S;de++){const Se=de+1;P=V.at(Se),y=i.at(Se),l=u*P,P*=r,_=W(o,l),V.set(de,_),r=o/_,u=l/_,o=f*r+P*u,P=P*r-f*u,l=y*u,y*=r;for(let Pe=0;Pe<$;Pe++)f=s.atRowCol(Pe,de),_=s.atRowCol(Pe,Se),s.setRowCol(Pe,de,f*r+_*u),s.setRowCol(Pe,Se,_*r-f*u);_=W(o,l),i.set(de,_),_&&(_=1/_,r=o*_,u=l*_),o=r*P+u*y,f=r*y-u*P;for(let Pe=0;Pe<F;Pe++)y=e.atRowCol(Pe,de),_=e.atRowCol(Pe,Se),e.setRowCol(Pe,de,y*r+_*u),e.setRowCol(Pe,Se,_*r-y*u)}V.set(x,0),V.set(ce,o),i.set(ce,f)}const J=new Float64Array(this.N),re=new Float64Array(this.M),se=new yr(J,this.N,1),oe=new yr(re,this.M,1);let pe=1;do pe*=3,pe++;while(pe<=this.M);do{pe/=3,pe=Math.trunc(pe);for(let ce=pe;ce<this.M;ce++){const ue=i.at(ce);for(let de=0;de<this.N;de++)se.set(de,e.atRowCol(de,ce));for(let de=0;de<this.M;de++)oe.set(de,s.atRowCol(de,ce));let ne=ce;for(;i.at(ne-pe)<ue;){i.set(ne,i.at(ne-pe));for(let de=0;de<this.N;de++)e.setRowCol(de,ne,e.atRowCol(de,ne-pe));for(let de=0;de<this.M;de++)s.setRowCol(de,ne,s.atRowCol(de,ne-pe));if(ne-=pe,ne<pe)break}i.set(ne,ue);for(let de=0;de<this.N;de++)e.setRowCol(de,ne,se.at(de));for(let de=0;de<this.M;de++)s.setRowCol(de,ne,oe.at(de))}}while(pe>1);for(let ce=0;ce<this.M;ce++){let ue=0;for(let ne=0;ne<this.N;ne++)e.atRowCol(ne,ce)<0&&ue++;for(let ne=0;ne<this.M;ne++)s.atRowCol(ne,ce)<0&&ue++;if(ue>Math.trunc((this.N+this.M)/2)){for(let ne=0;ne<this.N;ne++)e.setRowCol(ne,ce,-e.atRowCol(ne,ce));for(let ne=0;ne<this.M;ne++)s.setRowCol(ne,ce,-s.atRowCol(ne,ce))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let e=0;e<this.N;e++)for(let i=e+1;i<this.M;i++)if(this.atRowCol(e,i)!==this.atRowCol(i,e))return!1;return!0}isZero(){return K(0),!1}isIdentity(){return K(0),!1}equals(e,i){if(i!==void 0&&K(0),this.N!==e.N||this.M!==e.M)return!1;for(let s=0;s<this.N*this.M;s++)if(this.data[s]!==e.data[s])return!1;return!0}maxElement(){return K(0),0}min_element(){return K(0),0}determinant(){if(K(this.N===this.M),this.N===1)return this.data[0];if(this.N===2)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(this.N===3){const r=this;return r.atRowCol(0,0)*(r.atRowCol(1,1)*r.atRowCol(2,2)-r.atRowCol(1,2)*r.atRowCol(2,1))-r.atRowCol(0,1)*(r.atRowCol(1,0)*r.atRowCol(2,2)-r.atRowCol(2,0)*r.atRowCol(1,2))+r.atRowCol(0,2)*(r.atRowCol(1,0)*r.atRowCol(2,1)-r.atRowCol(1,1)*r.atRowCol(2,0))}const e=new Float64Array(this.N*this.N),i=new yr(e,this.N,this.N),s=new Float64Array(this.N);if(!this.luDecomposition(i,s))return 0;let n=1;for(let r=0;r<this.N;r++)n*=i.atRowCol(r,r),s[r]!==r&&(n=-n);return n}submatrix(e,i,s){K(0)}inverse(e){K(0)}pseudoInverse(e,i=!1,s=2220446049250313e-31){if(e.setZero(),this.N===1&&this.M===1)return this.atRowCol(0,0)!==0?e.setRowCol(0,0,1/this.atRowCol(0,0)):e.setRowCol(0,0,0),!0;if(this.N===2&&this.M===2){const x=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),S=1e-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(x)>S)return e.setRowCol(0,0,this.atRowCol(1,1)/x),e.setRowCol(0,1,-this.atRowCol(0,1)/x),e.setRowCol(1,0,-this.atRowCol(1,0)/x),e.setRowCol(1,1,this.atRowCol(0,0)/x),!0}const n=new Float64Array(this.N*this.M),r=new yr(n,this.N,this.M),o=new Float64Array(this.M),l=new yr(o,this.M,1),u=new Float64Array(this.M*this.M),f=new yr(u,this.M,this.M);if(!this.svd(r,l,f,i))return!1;const y=Math.max(this.N,this.M),_=s*Math.abs(l.at(0))*y;for(let x=0;x<this.M;x++)l.at(x)>_?l.set(x,1/l.at(x)):l.set(x,0);return f.mulDiag(l,e),e.mulTranspose(r,e),!0}luDecomposition(e,i){return K(0),!1}symmetricEigen(e,i){K(this.rows()===this.cols()),K(this.rows()===e.rows()),K(i.rows()===i.cols()&&i.rows()===this.rows()),K(this.isSymmetric());const s=new Float64Array(this.N*this.M),n=new yr(s,this.N,this.M);n.assignCopy(this);const r=100/Number.EPSILON,o=this.rows(),l=new Float64Array(o),u=new Float64Array(o),f=new yr(l,o,1),y=new yr(u,o,1);for(let x=0;x<o;x++)f.set(x,n.atRowCol(x,x)),e.set(x,n.atRowCol(x,x)),y.set(x,0);i.setIdentity();const _=()=>{const x=f;i.transposeInPlace();let S=1;do S*=3,S++;while(S<=o);do{S/=3,S=Math.trunc(S);for(let P=S;P<o;P++){const A=e.at(P),k=Math.abs(A);for(let F=0;F<this.M;F++)x.set(F,i.atRowCol(F,P));let $=P;for(;Math.abs(e.at($-S))<k;){e.set($,e.at($-S));for(let F=0;F<this.M;F++)i.setRowCol(F,$,i.atRowCol(F,$-S));if($-=S,$<S)break}if($!==P){e.set($,A);for(let F=0;F<this.M;F++)i.setRowCol(F,$,x.at(F))}}}while(S>1)};for(let x=1;;x++){let S=0;for(let A=1;A<o;A++)for(let k=0;k<A;k++)S+=Math.abs(n.atRowCol(A,k));if(S===0)return _(),!0;const P=x<4?.2*S/(o*o):0;for(let A=0;A<o;A++)for(let k=A+1;k<o;k++){let $=r*Math.abs(n.atRowCol(k,A));if(x>4&&$<=Math.abs(e.at(A))&&$<=Math.abs(e.at(k)))n.setRowCol(k,A,0);else if(Math.abs(n.atRowCol(k,A))>P){let F,G=e.at(k)-e.at(A);if($<Math.abs(G))F=n.atRowCol(k,A)/G;else{const re=.5*G/n.atRowCol(k,A);F=1/(Math.abs(re)+Math.sqrt(1+re*re)),re<0&&(F=-F)}const V=1/Math.sqrt(1+F*F),B=F*V,W=B/(1+V);G=F*n.atRowCol(k,A),y.set(A,y.at(A)-G),y.set(k,y.at(k)+G),e.set(A,e.at(A)-G),e.set(k,e.at(k)+G),n.setRowCol(k,A,0);let J=0;for(;J<A;J++)$=n.atRowCol(A,J),G=n.atRowCol(k,J),n.setRowCol(A,J,$-B*(G+$*W)),n.setRowCol(k,J,G+B*($-G*W));for(J++;J<k;J++)$=n.atRowCol(J,A),G=n.atRowCol(k,J),n.setRowCol(J,A,$-B*(G+$*W)),n.setRowCol(k,J,G+B*($-G*W));for(J++;J<o;J++)$=n.atRowCol(J,A),G=n.atRowCol(J,k),n.setRowCol(J,A,$-B*(G+$*W)),n.setRowCol(J,k,G+B*($-G*W));for(J=0;J<o;J++)$=i.atRowCol(A,J),G=i.atRowCol(k,J),i.setRowCol(A,J,$-B*(G+$*W)),i.setRowCol(k,J,G+B*($-G*W))}}for(let A=0;A<o;A++)f.set(A,f.at(A)+y.at(A)),e.set(A,f.at(A)),y.set(A,0)}}static checkDims(e,i,s){K(e.rows()===i&&e.cols()===s)}}let Op=class extends yr{constructor(e){if(e.copy){const s=new Float64Array(e.copy.N*e.copy.M);return super(s,e.copy.N,e.copy.M),this.buffer=s,void this.assignCopy(e.copy)}const i=new Float64Array(e.NN*e.MM);super(i,e.NN,e.MM),this.buffer=i,e.initializerList&&dn(this.buffer,e.initializerList,0,0,e.initializerList.length)}assignCopy(e){return this===e||super.assignCopy(e),this}},_i=class Cb{constructor(e){e===void 0?this.setIdentity():e instanceof Cb?this.set(e):this.setScale(e)}set(e){return this.xx=e.xx,this.xy=e.xy,this.xd=e.xd,this.yx=e.yx,this.yy=e.yy,this.yd=e.yd,this}clone(){return new Cb().set(this)}setZero(){this.xx=0,this.yy=0,this.xy=0,this.yx=0,this.xd=0,this.yd=0}isEqual(e){return this===e||this.xx===e.xx&&this.xy===e.xy&&this.xd===e.xd&&this.yx===e.yx&&this.yy===e.yy&&this.yd===e.yd}transformInPlace(e){const i=this.xx*e.x+this.xy*e.y+this.xd,s=this.yx*e.x+this.yy*e.y+this.yd;e.x=i,e.y=s}transform(e){const i=e.clone();return this.transformInPlace(i),i}queryTransform(e,i){const s=this.xx*e.x+this.xy*e.y+this.xd,n=this.yx*e.x+this.yy*e.y+this.yd;i.setCoords(s,n)}transformEnvInPlace(e){if(e.isEmpty())return;const i=Ge(Y,4);e.queryCorners(i),this.transformPoints2D(i,4,i),e.setFromPoints(i,4)}queryTransformEnv(e,i){K(0)}transformInterleaved(e,i,s){K(0)}transformPoints2D(e,i,s){for(let n=0;n<i;++n)this.queryTransform(e[n],s[n])}transformInterleavedPoints(e,i,s){i*=2;const n=Y.getNAN();for(let r=0;r<i;r+=2)n.x=e[r],n.y=e[r+1],this.transformInPlace(n),s[r]=n.x,s[r+1]=n.y}multiply(e){return Cb.st_multiply(this,e,this),this}mulLeft(e){return K(0),this}static st_multiply(e,i,s){const n=e.xx*i.xx+e.yx*i.xy,r=e.xy*i.xx+e.yy*i.xy,o=e.xd*i.xx+e.yd*i.xy+i.xd,l=e.xx*i.yx+e.yx*i.yy,u=e.xy*i.yx+e.yy*i.yy,f=e.xd*i.yx+e.yd*i.yy+i.yd;s.xx=n,s.xy=r,s.xd=o,s.yx=l,s.yy=u,s.yd=f}getCoefficients(e){K(0)}setCoefficients(e){this.xx=e[0],this.xy=e[1],this.xd=e[2],this.yx=e[3],this.yy=e[4],this.yd=e[5]}copyTo(e){K(0)}initializeFromRect(e,i){e.isEmpty()||i.isEmpty()||!e.width()||!e.height()?this.setZero():(this.xy=this.yx=0,this.xx=i.width()/e.width(),this.yy=i.height()/e.height(),this.xd=i.xmin-e.xmin*this.xx,this.yd=i.ymin-e.ymin*this.yy)}initializeFromRectIsotropic(e,i){if(e.isEmpty()||!e.width()||!e.height()||i.isEmpty())this.setZero();else{this.yx=0,this.xy=0,this.xx=i.width()/e.width(),this.yy=i.height()/e.height(),this.xx>this.yy?this.xx=this.yy:this.yy=this.xx;const s=i.getCenter(),n=e.getCenter();this.xd=s.x-n.x*this.xx,this.yd=s.y-n.y*this.yy}}initializeFromCurveParameters(e,i,s){K(0)}initializeFromTwoPointsArray(e,i){if(e[0].equals(i[0])&&e[1].equals(i[1]))return void this.setIdentity();if(e[0].equals(e[1])){if(i[0].equals(i[1]))return void this.setShift(i[0].sub(e[0]));Je("")}if(!e[0].equals(e[1])&&i[0].equals(i[1]))return this.setZero(),void this.shift(i[0]);this.setShiftCoords(-e[0].x,-e[0].y);const s=Y.distance(e[0],e[1]),n=Y.distance(i[0],i[1]),r=n/s;this.scale(r,r);const o=e[1].sub(e[0]);o.divThis(s);const l=i[1].sub(i[0]);l.divThis(n);const u=o.crossProduct(l),f=o.dotProduct(l);this.rotate(f,u),this.shiftCoords(i[0].x,i[0].y)}initializeFromTwoPoints(e,i,s,n){const r=[e,i],o=[s,n];this.initializeFromTwoPointsArray(r,o)}transformSizeInPlace(e){K(0)}transformSize(e,i){K(0)}transformTol(e){return K(0),0}transformWithoutTranslateArray(e,i,s){for(let n=0;n<i;++n)this.transformWithoutTranslate(e[n],s[n])}transformWithoutTranslateInPlace(e){const i=this.xx*e.x+this.xy*e.y,s=this.yx*e.x+this.yy*e.y;e.setCoords(i,s)}transformWithoutTranslate(e,i){const s=this.xx*e.x+this.xy*e.y,n=this.yx*e.x+this.yy*e.y;i.setCoords(s,n)}setIdentity(){this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=1,this.yd=0}isIdentity(){return!(this.xx!==1||this.yy!==1||this.xy||this.xd||this.yx||this.yd)}isIdentityTol(e){const i=e*e;return!(Xi(this.xd)+Xi(this.yd)>i)&&!(Xi(this.xy+this.xd)+Xi(this.yy+this.yd-1)>i)&&!(Xi(this.xx+this.xd-1)+Xi(this.yx+this.yd)>i)}isReflective(){return this.xx*this.yy-this.yx*this.xy<0}isUniform(e){const i=this.xx*this.xx+this.yx*this.yx,s=this.xy*this.xy+this.yy*this.yy,n=(i+s)*e;return Math.abs(i-s)<=n&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=n}isUniformNoRotation(){return this.xx!==0&&Math.abs(this.xx)===Math.abs(this.yy)&&this.xy===0&&this.yx===0}isTranslate(){return K(0),!1}isTranslateTol(e){return K(0),!1}isOrthonormal(e){return K(0),!1}isDegenerate(e){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*e*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return this.xx===0&&this.yy===0&&this.xy===0&&this.yx===0&&this.xd===0&&this.yd===0}isScaleAndTranslate(e){return K(0),!1}setTranslate(e,i){return this.xx=1,this.xy=0,this.xd=e,this.yx=0,this.yy=1,this.yd=i,this}setShiftCoords(e,i){return this.xx=1,this.xy=0,this.xd=e,this.yx=0,this.yy=1,this.yd=i,this}setShift(e){return this.xx=1,this.xy=0,this.xd=e.x,this.yx=0,this.yy=1,this.yd=e.y,this}setScaleCoords(e,i){return this.xx=e,this.xy=0,this.xd=0,this.yx=0,this.yy=i,this.yd=0,this}setScale(e){return this.setScaleCoords(e,e),this}setFlipX(e,i){return this.xx=-1,this.xy=0,this.xd=e+i,this.yx=0,this.yy=1,this.yd=0,this}setFlipY(e,i){return this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=-1,this.yd=e+i,this}setShear(e,i){return K(0),this}scale(e,i){return this.xx*=e,this.xy*=e,this.xd*=e,this.yx*=i,this.yy*=i,this.yd*=i,this}setRotateAngle(e){return this.setRotate(Math.cos(e),Math.sin(e))}setRotate(e,i){return this.xx=e,this.xy=-i,this.xd=0,this.yx=i,this.yy=e,this.yd=0,this}setRotateAngleAbout(e,i){return this.setRotateAbout(Math.cos(e),Math.sin(e),i)}setRotateAbout(e,i,s){return this.setTranslate(-s.x,-s.y),this.rotate(e,i),this.translate(s.x,s.y)}setSwapCoordinates(){return this.xx=0,this.xy=1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}setRotateCw90(){return this.xx=0,this.xy=1,this.xd=0,this.yx=-1,this.yy=0,this.yd=0,this}setRotateCcw90(){return this.xx=0,this.xy=-1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}shiftCoords(e,i){return this.xd+=e,this.yd+=i,this}shift(e){return this.xd+=e.x,this.yd+=e.y,this}translate(e,i){return this.xd+=e,this.yd+=i,this}flipX(e,i){return this.xx=-this.xx,this.xy=-this.xy,this.xd=e+i-this.xd,this}flipY(e,i){return this.yx=-this.yx,this.yy=-this.yy,this.yd=e+i-this.yd,this}shear(e,i){return K(0),this}rotateAngle(e){const i=new Cb;return i.setRotateAngle(e),this.multiply(i)}rotate(e,i){const s=new Cb;return s.setRotate(e,i),this.multiply(s)}rotateAbout(e,i,s){return this.translate(-s.x,-s.y),this.rotate(e,i),this.translate(s.x,s.y)}rotateAngleAbout(e,i){return this.rotateAbout(Math.cos(e),Math.sin(e),i)}setInvert(e){return this.set(e),this.invertThis()}invertThis(){let e=this.xx*this.yy-this.xy*this.yx;if(e===0)return this.setZero(),this;e=1/e;const i=(this.xy*this.yd-this.xd*this.yy)*e,s=(this.xd*this.yx-this.xx*this.yd)*e,n=this.yy*e,r=-this.xy*e,o=-this.yx*e,l=this.xx*e;return this.xd=i,this.yd=s,this.xx=n,this.yy=l,this.xy=r,this.yx=o,this}invertPrecise(e){return this.set(e),this.invertPreciseThis()}invertPreciseThis(){const e=_t.constructDouble(this.xy),i=_t.constructDouble(this.xx),s=i.mulDouble(this.yy).sub(e.mulDouble(this.yx));if(s.isZero())return this.setZero(),this;const n=s.clone();n.invertThis();const r=_t.constructDouble(this.xd),o=e.mulDouble(this.yd).sub(r.mulDouble(this.yy)).mul(n).toDouble(),l=r.mulDouble(this.yx).sub(i.mulDouble(this.yd)).mul(n).toDouble(),u=n.mulDouble(this.yy).toDouble(),f=n.mulDouble(-this.xy).toDouble(),y=n.mulDouble(-this.yx).toDouble(),_=n.mulDouble(this.xx).toDouble();return this.xd=o,this.yd=l,this.xx=u,this.yy=_,this.xy=f,this.yx=y,this}extractScaleTransform(e,i){K(0)}setFromTwoTriangles(e,i){let s=!0;for(let y=0;y<3;++y)s=s&&e[y].equals(i[y]);if(s)return this.setIdentity(),!0;const n=new Y;n.setSub(e[0],e[1]);const r=new Y;r.setSub(e[0],e[2]);const o=new Y;o.setSub(i[0],i[1]);const l=new Y;l.setSub(i[0],i[2]);const u=4*Number.EPSILON*(Math.abs(n.x*r.y)+Math.abs(r.x*n.y));let f=n.x*r.y-n.y*r.x;return Math.abs(f)>u?(f=1/f,this.xx=(o.x*r.y-n.y*l.x)*f,this.xy=(n.x*l.x-o.x*r.x)*f,this.yx=(o.y*r.y-n.y*l.y)*f,this.yy=(n.x*l.y-o.y*r.x)*f,this.xd=i[0].x-(this.xx*e[0].x+this.xy*e[0].y),this.yd=i[0].y-(this.yx*e[0].x+this.yy*e[0].y),!0):(this.setZero(),!1)}initializeFromControlPoints(e,i,s,n,r=null){return i===0?(this.setIdentity(),void(r&&r.setIdentity())):i===1?(this.setShift(n[0].sub(s[0])),void(r&&r.setShift(s[0].sub(n[0])))):(i<3&&(e=1),void(e===4&&i>2?gJe(this,i,s,n,r):yJe(e,this,i,s,n,r)))}calculateErrors(e,i,s,n){K(e>0&&i!==null&&s!==null);let r=0;for(let o=0;o<e;++o){const l=this.transform(i[o]),u=Y.sqrDistance(s[o],l);r+=u,n&&(n[o]=Math.sqrt(u))}return Math.sqrt(r/e)}};const i3=[43,11,41,9,61];function cz(t,e){K(!(e.rows()!==2&&e.rows()!==3||e.cols()!==2&&e.rows()!==3)),t.xx=e.atRowCol(0,0),t.xy=e.atRowCol(0,1),t.yx=e.atRowCol(1,0),t.yy=e.atRowCol(1,1),e.cols()===3?(t.xd=e.atRowCol(0,2),t.yd=e.atRowCol(1,2)):(t.xd=0,t.yd=0)}function gJe(t,e,i,s,n){const r=Y.average(i,e),o=Y.average(s,e),l=new Op({NN:2,MM:2});l.setZero();const u=new Op({NN:2,MM:2});u.setZero();for(let _=0;_<e;++_)l.setRowCol(0,0,l.atRowCol(0,0)+(i[_].x-r.x)*(i[_].x-r.x)),l.setRowCol(0,1,l.atRowCol(0,1)+(i[_].x-r.x)*(i[_].y-r.y)),l.setRowCol(1,1,l.atRowCol(1,1)+(i[_].y-r.y)*(i[_].y-r.y)),u.setRowCol(0,0,u.atRowCol(0,0)+(s[_].x-o.x)*(i[_].x-r.x)),u.setRowCol(0,1,u.atRowCol(0,1)+(s[_].x-o.x)*(i[_].y-r.y)),u.setRowCol(1,0,u.atRowCol(1,0)+(s[_].y-o.y)*(i[_].x-r.x)),u.setRowCol(1,1,u.atRowCol(1,1)+(s[_].y-o.y)*(i[_].y-r.y));l.setRowCol(1,0,l.atRowCol(0,1));const f=new Op({NN:2,MM:2});l.pseudoInverse(f,!0)||iz("Failed to compute pseudo inverse"),u.mul(f,u),cz(t,u);const y=r.clone();t.transformInPlace(y),t.xd=o.x-y.x,t.yd=o.y-y.y,n&&(u.pseudoInverse(f,!1)||iz("Failed to compute pseudo inverse"),cz(n,f),n.transformInPlace(o),n.xd=r.x-o.x,n.yd=r.y-o.y)}function yJe(t,e,i,s,n,r){K(t===1||t===0||t===2||t===3),e.setIdentity();const o=Y.average(s,i),l=Y.average(n,i);if(K(t<i3.length&&t>0),8&i3[t]){const f=new Op({NN:2,MM:2});f.setZero();for(let k=0;k<i;++k)f.setRowCol(0,0,f.atRowCol(0,0)+(n[k].x-l.x)*(s[k].x-o.x)),f.setRowCol(1,0,f.atRowCol(1,0)+(n[k].x-l.x)*(s[k].y-o.y)),f.setRowCol(0,1,f.atRowCol(0,1)+(n[k].y-l.y)*(s[k].x-o.x)),f.setRowCol(1,1,f.atRowCol(1,1)+(n[k].y-l.y)*(s[k].y-o.y));const y=new Op({NN:2,MM:2}),_=new Op({NN:2,MM:1}),x=new Op({NN:2,MM:2});f.svd(y,_,x)||iz("Failed to compute svd");const S=new Op({NN:2,MM:2});y.transpose(S);const P=new Op({NN:2,MM:2});x.mul(S,P),!(32&i3[t])&&P.determinant()<0&&(S.setRowCol(1,0,-S.atRowCol(1,0)),S.setRowCol(1,1,-S.atRowCol(1,1)),x.mul(S,P));const A=new _i;cz(A,P),e.set(A)}if(2&i3[t]){let f=0,y=0;for(let _=0;_<i;++_){const x=s[_].sub(o);f+=x.sqrLength(),e.transformInPlace(x),y+=x.dotProduct(n[_].sub(l))}if(f===0)y===0?e.setIdentity():e.setZero();else{const _=y/f;e.scale(_,_)}}else K(!(4&i3[t]));const u=o.clone();e.transformInPlace(u),e.xd=l.x-u.x,e.yd=l.y-u.y,r&&(r.set(e),r.invertThis(),r.isZero()&&(r.xd=o.x,r.yd=o.y))}class xe{static construct(e,i,s,n){return new xe(e,i,s,n)}constructor(e,i,s,n){e===void 0?(this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN):typeof e=="number"?(this.xmin=e,this.ymin=i,this.xmax=s,this.ymax=n):(this.xmin=e.xmin,this.ymin=e.ymin,this.xmax=e.xmax,this.ymax=e.ymax),this.normalize()}static constructEmpty(){return new xe(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}clone(){return new xe(this)}assign(e){return this.xmin=e.xmin,this.xmax=e.xmax,this.ymin=e.ymin,this.ymax=e.ymax,this}width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}maxDimension(){return Math.max(this.width(),this.height())}minDimension(){return Math.min(this.width(),this.height())}sqrDiagonal(){return K(0),0}diagonal(){return K(0),0}getCenterX(){return .5*(this.xmin+this.xmax)}getCenterY(){return .5*(this.ymin+this.ymax)}getCenter(){return Y.construct(this.getCenterX(),this.getCenterY())}queryCenter(e){K(0)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN}setInfinite(){K(0)}isDegenerate(e){return!this.isEmpty()&&(this.width()<=e||this.height()<=e)}isZero(){return K(0),!1}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}mergeNeCoords(e,i){this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i)}mergeNe(e){this.mergeNeCoords(e.x,e.y)}mergeCoords(e,i){this.isEmpty()?(this.xmin=e,this.ymin=i,this.xmax=e,this.ymax=i):(this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i))}merge(e){this.mergeCoords(e.x,e.y)}mergeEnvelope2D(e){e.isEmpty()||(this.mergeCoords(e.xmin,e.ymin),this.mergeNeCoords(e.xmax,e.ymax))}mergePoints(e,i){for(let s=0;s<i;){if(!this.isEmpty()){for(let n=s;n<i;n++)this.mergeNe(e[n]);break}this.setCoords(e[s]),s++}}mergePointsInterleaved(e,i,s){for(let n=2*i,r=n+2*s;n<r;n+=2)this.mergeCoords(e.read(n),e.read(n+1))}inflateCoords(e,i){this.isEmpty()||(this.xmin-=e,this.xmax+=e,this.ymin-=i,this.ymax+=i,(this.xmin>this.xmax||this.ymin>this.ymax)&&this.setEmpty())}getInflatedCoords(e,i){return K(0),new xe(0,0,0,0)}inflate(e){this.inflateCoords(e,e)}getInflated(e){return K(0),new xe(0,0,0,0)}zoom(e,i){K(0)}scale(e){K(0)}equals(e,i){return!(!this.isEmpty()||!e.isEmpty())||(i?Math.abs(this.xmin-e.xmin)<=i&&Math.abs(this.ymin-e.ymin)<=i&&Math.abs(this.xmax-e.xmax)<=i&&Math.abs(this.ymax-e.ymax)<=i:this.xmin===e.xmin&&this.ymin===e.ymin&&this.xmax===e.xmax&&this.ymax===e.ymax)}setCoords(e){e.xmin!==void 0?(this.xmin=e.xmin,this.xmax=e.xmax,this.ymin=e.ymin,this.ymax=e.ymax):e.x!==void 0?(this.xmin=e.x,this.xmax=e.x,this.ymin=e.y,this.ymax=e.y):e.pt1!==void 0?(this.xmin=e.pt1.x,this.ymin=e.pt1.y,this.xmax=e.pt2.x,this.ymax=e.pt2.y,this.normalize()):e.env2D!==void 0?(this.xmin=e.env2D.xmin,this.xmax=e.env2D.xmax,this.ymin=e.env2D.ymin,this.ymax=e.env2D.ymax,this.normalize()):e.pt!==void 0?(this.xmin=e.pt.x,this.xmax=e.pt.x,this.ymin=e.pt.y,this.ymax=e.pt.y):e.center!==void 0?(this.xmin=e.center.x-.5*e.width,this.xmax=this.xmin+e.width,this.ymin=e.center.y-.5*e.height,this.ymax=this.ymin+e.height,this.normalize()):K(0),this.normalize()}queryIntervalX(e){this.isEmpty()?e.setEmpty():e.setCoords(this.xmin,this.xmax)}queryIntervalY(e){this.isEmpty()?e.setEmpty():e.setCoords(this.ymin,this.ymax)}setFromPoints(e,i){if(i===0)return void this.setEmpty();if(Array.isArray(e)){const n=e;this.setCoords(n[0]);for(let r=1;r<i;){if(!this.isEmpty()){for(let o=r;o<i;o++)this.mergeNe(n[o]);return}this.setCoords(n[r]),r++}return}const s=e;this.setCoords({x:s[0],y:s[1]});for(let n=1,r=2*i;n<r;n+=2){if(!this.isEmpty()){for(let o=n,l=2*i;o<l;o+=2)this.mergeNeCoords(s[o],s[o+1]);return}this.setCoords({x:s[n],y:s[n+1]}),n+=2}}normalize(){let e=!1;this.xmin<=this.xmax||([this.xmin,this.xmax]=[this.xmax,this.xmin],e=!0),this.ymin<=this.ymax||([this.ymin,this.ymax]=[this.ymax,this.ymin],e=!0),!e||this.xmin<=this.xmax&&this.ymin<=this.ymax||this.setEmpty()}isValid(){return this.isEmpty()||this.xmin<=this.xmax&&this.ymin<=this.ymax}getLowerLeft(){return new Y(this.xmin,this.ymin)}getLowerRight(){return new Y(this.xmax,this.ymin)}getUpperLeft(){return new Y(this.xmin,this.ymax)}getUpperRight(){return new Y(this.xmax,this.ymax)}move(e,i){this.isEmpty()||(this.xmin+=e,this.ymin+=i,this.xmax+=e,this.ymax+=i)}centerAtCoords(e,i){this.move(e-this.getCenterX(),i-this.getCenterY())}centerAt(e){this.centerAtCoords(e.x,e.y)}containsCoords(e,i){return e>=this.xmin&&e<=this.xmax&&i>=this.ymin&&i<=this.ymax}contains(e){return this.containsCoords(e.x,e.y)}containsEnvelope(e){return e.xmin>=this.xmin&&e.xmax<=this.xmax&&e.ymin>=this.ymin&&e.ymax<=this.ymax}containsExclusiveCoords(e,i){return e>this.xmin&&e<this.xmax&&i>this.ymin&&i<this.ymax}containsExclusive(e){return this.containsExclusiveCoords(e.x,e.y)}containsExclusiveEnvelope(e){return e.xmin>this.xmin&&e.xmax<this.xmax&&e.ymin>this.ymin&&e.ymax<this.ymax}isIntersecting(e){return(this.xmin<=e.xmin?this.xmax>=e.xmin:e.xmax>=this.xmin)&&(this.ymin<=e.ymin?this.ymax>=e.ymin:e.ymax>=this.ymin)}isIntersectingNe(e){return(this.xmin<=e.xmin?this.xmax>=e.xmin:e.xmax>=this.xmin)&&(this.ymin<=e.ymin?this.ymax>=e.ymin:e.ymax>=this.ymin)}intersect(e){if(this.isEmpty())return!1;if(e.isEmpty())return this.setEmpty(),!1;e.xmin>this.xmin&&(this.xmin=e.xmin),e.xmax<this.xmax&&(this.xmax=e.xmax),e.ymin>this.ymin&&(this.ymin=e.ymin),e.ymax<this.ymax&&(this.ymax=e.ymax);const i=this.xmin<=this.xmax&&this.ymin<=this.ymax;return i||this.setEmpty(),i}queryCorner(e){switch(3&e){case 0:return new Y(this.xmin,this.ymin);case 1:return new Y(this.xmin,this.ymax);case 2:return new Y(this.xmax,this.ymax);default:return new Y(this.xmax,this.ymin)}}queryCorners(e){e[0].setCoords(this.xmin,this.ymin),e[1].setCoords(this.xmin,this.ymax),e[2].setCoords(this.xmax,this.ymax),e[3].setCoords(this.xmax,this.ymin)}queryCornersReversed(e){e[0].setCoords(this.xmin,this.ymin),e[1].setCoords(this.xmax,this.ymin),e[2].setCoords(this.xmax,this.ymax),e[3].setCoords(this.xmin,this.ymax)}reaspect(e,i){K(0)}getArea(){return this.isEmpty()?0:this.width()*this.height()}getLength(){return K(0),0}clipCode(e){return(e.x<this.xmin?1:0)|(e.x>this.xmax?1:0)<<1|(e.y<this.ymin?1:0)<<2|(e.y>this.ymax?1:0)<<3}clipLine(e,i){let s=this.clipCode(e),n=this.clipCode(i);if(s&n)return 0;if(!(s|n))return 4;const r=(s?1:0)|(n?2:0);do{const o=i.x-e.x,l=i.y-e.y;if(Math.abs(o)>Math.abs(l)?s&xe.XMASK?(s&xe.XLESSXMIN?(e.y+=l*(this.xmin-e.x)/o,e.x=this.xmin):(e.y+=l*(this.xmax-e.x)/o,e.x=this.xmax),s=this.clipCode(e)):n&xe.XMASK?(n&xe.XLESSXMIN?(i.y+=l*(this.xmin-i.x)/o,i.x=this.xmin):(i.y+=l*(this.xmax-i.x)/o,i.x=this.xmax),n=this.clipCode(i)):s?(s&xe.YLESSYMIN?(e.x+=o*(this.ymin-e.y)/l,e.y=this.ymin):(e.x+=o*(this.ymax-e.y)/l,e.y=this.ymax),s=this.clipCode(e)):(n&xe.YLESSYMIN?(i.x+=o*(this.ymin-i.y)/l,i.y=this.ymin):(i.x+=o*(this.ymax-i.y)/l,i.y=this.ymax),n=this.clipCode(i)):s&xe.YMASK?(s&xe.YLESSYMIN?(e.x+=o*(this.ymin-e.y)/l,e.y=this.ymin):(e.x+=o*(this.ymax-e.y)/l,e.y=this.ymax),s=this.clipCode(e)):n&xe.YMASK?(n&xe.YLESSYMIN?(i.x+=o*(this.ymin-i.y)/l,i.y=this.ymin):(i.x+=o*(this.ymax-i.y)/l,i.y=this.ymax),n=this.clipCode(i)):s?(s&xe.XLESSXMIN?(e.y+=l*(this.xmin-e.x)/o,e.x=this.xmin):(e.y+=l*(this.xmax-e.x)/o,e.x=this.xmax),s=this.clipCode(e)):(n&xe.XLESSXMIN?(i.y+=l*(this.xmin-i.x)/o,i.x=this.xmin):(i.y+=l*(this.xmax-i.x)/o,i.x=this.xmax),n=this.clipCode(i)),s&n)return 0}while(s|n);return r}distanceFromEnvelope(e){return Math.sqrt(this.sqrDistanceEnvelope(e,null,null))}distance(e){return Math.sqrt(this.sqrDistance(e))}sqrDistanceEnvelope(e,i,s){if(!i&&!s){if(this.isEmpty()||e.isEmpty())return Number.NaN;let f,y=0,_=0;return f=this.xmin-e.xmax,f>y&&(y=f),f=this.ymin-e.ymax,f>_&&(_=f),f=e.xmin-this.xmax,f>y&&(y=f),f=e.ymin-this.ymax,f>_&&(_=f),y*y+_*_}if(this.isEmpty()||e.isEmpty())return i&&i.setNAN(),s&&s.setNAN(),Number.NaN;let n,r=0,o=0;const l=Math.max(this.xmin,e.xmin),u=Math.max(this.ymin,e.ymin);return i&&i.setCoords(l,u),s&&s.setCoords(l,u),n=this.xmin-e.xmax,n>r&&(r=n,i&&(i.x=this.xmin),s&&(s.x=e.xmax)),n=this.ymin-e.ymax,n>o&&(o=n,i&&(i.y=this.ymin),s&&(s.y=e.ymax)),n=e.xmin-this.xmax,n>r&&(r=n,i&&(i.x=this.xmax),s&&(s.x=e.xmin)),n=e.ymin-this.ymax,n>o&&(o=n,i&&(i.y=this.ymax),s&&(s.y=e.ymin)),r*r+o*o}sqrDistance(e,i){if(i===void 0){if(this.isEmpty()||e.isNAN())return Number.NaN;let o,l=0,u=0;return o=this.xmin-e.x,o>l&&(l=o),o=this.ymin-e.y,o>u&&(u=o),o=e.x-this.xmax,o>l&&(l=o),o=e.y-this.ymax,o>u&&(u=o),l*l+u*u}if(this.isEmpty()||e.isNAN())return i.setNAN(),Number.NaN;i.assign(e);let s,n=0,r=0;return s=this.xmin-e.x,s>n&&(n=s,i.x=this.xmin),s=this.ymin-e.y,s>r&&(r=s,i.y=this.ymin),s=e.x-this.xmax,s>n&&(n=s,i.x=this.xmax),s=e.y-this.ymax,s>r&&(r=s,i.y=this.ymax),n*n+r*r}sqrMaxMinDistanceEnvelope(e){if(this.isEmpty()||e.isEmpty())return Number.NaN;let i=Number.MAX_VALUE;{const s=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymin),n=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymax),r=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymin),o=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymax),l=Math.max(s,n),u=Math.max(r,o),f=Math.max(l,u);i=Math.min(f,i)}{const s=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmin,e.ymax),n=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymax),r=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymax),o=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmax,e.ymax),l=Math.max(s,n),u=Math.max(r,o),f=Math.max(l,u);i=Math.min(f,i)}{const s=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymin),n=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymax),r=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymin),o=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymax),l=Math.max(s,n),u=Math.max(r,o),f=Math.max(l,u);i=Math.min(f,i)}{const s=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmin,e.ymin),n=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymin),r=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymin),o=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmax,e.ymin),l=Math.max(s,n),u=Math.max(r,o),f=Math.max(l,u);i=Math.min(f,i)}return i}sqrMaxDistanceEnvelope(e){if(this.isEmpty()||e.isEmpty())return Number.NaN;let i=0;const s=Ge(Y,4);this.queryCorners(s);const n=Ge(Y,4);e.queryCorners(n);for(let r=0;r<4;r++)for(let o=0;o<4;o++){const l=Y.sqrDistance(s[r],n[o]);l>i&&(i=l)}return i}sqrMaxMinDistance(e){const i=Y.sqrDistance(e,this.getLowerLeft()),s=Y.sqrDistance(e,this.getUpperLeft()),n=Y.sqrDistance(e,this.getLowerRight()),r=Y.sqrDistance(e,this.getUpperRight());let o,l=Math.max(i,s);return o=Math.max(i,n),l>o&&(l=o),o=Math.max(s,r),l>o&&(l=o),o=Math.max(n,r),l>o&&(l=o),l}sqrMinDistance(e){return K(0),0}sqrMaxDistance(e){return K(0),0}snapToBoundary(e){return K(0),!1}snapClip(e){const i=un(e.x,this.xmin,this.xmax),s=un(e.y,this.ymin,this.ymax);return Y.construct(i,s)}boundaryDistance(e){return K(0),0}envelopeSide(e){return K(0),0}querySide(e,i){switch(e){case 0:i.constructFromCoords(this.xmin,this.ymin,this.xmin,this.ymax);break;case 1:i.constructFromCoords(this.xmin,this.ymax,this.xmax,this.ymax);break;case 2:i.constructFromCoords(this.xmax,this.ymax,this.xmax,this.ymin);break;case 3:i.constructFromCoords(this.xmax,this.ymin,this.xmin,this.ymin);break;default:Je("query_side")}return i}isPointOnBoundary(e,i){return K(0),!1}calculateToleranceFromEnvelope(){return this.isEmpty()?yv():(Math.abs(this.xmin)+Math.abs(this.xmax)+Math.abs(this.ymin)+Math.abs(this.ymax)+1)*yv()}notEquals(e){return K(0),!1}toString(){return`[${this.xmin}, ${this.ymin}, ${this.xmax}, ${this.ymax}]`}}xe.XLESSXMIN=1,xe.YLESSYMIN=4,xe.XMASK=3,xe.YMASK=12;class il{static constructEmpty(){return new il(Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN)}constructor(e,i,s,n,r,o){this.xmin=e,this.ymin=i,this.zmin=s,this.xmax=n,this.ymax=r,this.zmax=o,this.normalize()}inflate(e){this.inflateCoords(e,e,e)}inflateCoords(e,i,s){K(0)}getEnvelope2D(){return new xe(this.xmin,this.ymin,this.xmax,this.ymax)}getEnvelopeZs(){return new Ze(this.zmin,this.zmax)}setEmptyZ(){this.zmin=Number.NaN,this.zmax=Number.NaN}normalize(){let e=!1;this.xmin<=this.xmax||(this.xmax=St(this.xmin,this.xmin=this.xmax),e=!0),this.ymin<=this.ymax||(this.ymax=St(this.ymin,this.ymin=this.ymax),e=!0),!e||this.xmin<=this.xmax&&this.ymin<=this.ymax?this.zmin<=this.zmax||(this.zmax=St(this.zmin,this.zmin=this.zmax),this.zmin<=this.zmax||this.setEmptyZ()):this.setEmpty()}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}isEmptyZ(){return Number.isNaN(this.zmin)||Number.isNaN(this.zmax)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.zmin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN,this.zmax=Number.NaN}mergeEnv3D(e){e.isEmpty()||(this.mergeCoords(e.xmin,e.ymin,e.zmin),this.mergeCoords(e.xmax,e.ymax,e.zmax))}mergeNe(e){this.mergeNeCoords(e.x,e.y,e.z)}mergeNeCoords(e,i,s){this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i),this.zmin>s?this.zmin=s:this.zmax<s&&(this.zmax=s)}mergeCoords(e,i,s){this.isEmpty()?(this.xmin=e,this.xmax=e,this.ymin=i,this.ymax=i,this.zmin=s,this.zmax=s):(this.isEmptyZ()&&(this.zmin=s,this.zmax=s),this.mergeNeCoords(e,i,s))}setCoords(e,i,s,n,r,o){this.xmin=e,this.ymin=i,this.zmin=s,this.xmax=n,this.ymax=r,this.zmax=o,this.normalize()}sqrDistance(e,i=1){return K(0),0}sqrDistanceAndPoint(e,i,s=1){return K(0),0}sqrDistanceEnvelope3D(e,i=1){return K(0),0}sqrDistanceEnvelope3DAndPoints(e,i,s,n=1){return K(0),0}sqrMaxDistance(e,i=1){return K(0),0}}const lte=[0,0,Number.NaN,0,0,0,0,0,-1,-1,0,0,0,0],vJe=[2,1,1,1,3,1,2,3,2,4,1,1,2,1],_Je=[1,1,1,0,2,1,1,1,0,0,0,0,0,1],bJe=[1,1,1,2,0,0,0,0,2,2,4,2,2,1],xJe=[4,8,4,8,1],yj=25;function yy(){return new Array(yj)}let _r=class Ep{getAttributeCount(){return this.m_attributeCount}getSemantics(e){return this.m_indexToSemantics[e]}getSemanticsBitArray(){return this.m_semanticsBitArray}getAttributeIndex(e){return this.m_semanticsToIndexMap[e]}static getInterpolation(e){return _Je[e]}static getPersistence(e){return bJe[e]}static getPersistenceSize(e){return xJe[e]}static getPersistenceSizeFromSemantics(e){return Ep.getPersistenceSize(Ep.getPersistence(e))*Ep.getComponentCount(e)}static getComponentCount(e){return vJe[e]}static maxComponentCount(){return 4}static isInteger(e){return e===2||e===3||e===4}static isIntegerSemantics(e){return Ep.isInteger(Ep.getPersistence(e))}static isTexture(e){return e===5||e===6||e===7}hasAttribute(e){return!!(this.m_semanticsBitArray&1<<e)}hasAttributesFrom(e){return(this.m_semanticsBitArray&e.m_semanticsBitArray)===e.m_semanticsBitArray}hasZ(){return this.hasAttribute(1)}hasM(){return this.hasAttribute(2)}hasID(){return this.hasAttribute(3)}getTotalComponentCount(){return this.m_totalComponentCount}static getDefaultValue(e){return lte[e]}static isDefaultValue(e,i){return ga(lte[e],i)}equals(e){return this===e}getDefaultPointAttributes(){return this.m_defaultPointAttributes}getPointAttributeOffset(e){return this.m_pointAttributeOffsets[e]}constructor(e){this.m_semanticsBitArray=e,this.m_attributeCount=0,this.m_totalComponentCount=0,this.m_semanticsToIndexMap=new Int32Array(14),this.m_indexToSemantics=new Int32Array(14),this.m_pointAttributeOffsets=new Int32Array(14),this.m_defaultPointAttributes=new Array(yj),this.m_semanticsToIndexMap.fill(-1),this.m_indexToSemantics.fill(-1);let i=0,s=1,n=14;for(;i<n;i++)e&s&&(this.m_semanticsToIndexMap[i]=this.m_attributeCount,this.m_indexToSemantics[this.m_attributeCount]=i,this.m_attributeCount++,this.m_totalComponentCount+=Ep.getComponentCount(i)),s<<=1;let r=0;for(i=0,n=this.getAttributeCount();i<n;i++){const o=this.getSemantics(i),l=Ep.getComponentCount(o),u=Ep.getDefaultValue(o);this.m_pointAttributeOffsets[i]=r;for(let f=0;f<l;f++)this.m_defaultPointAttributes[r]=u,r++}}};var xN=_r;function t7(){return new Array(14)}class vv{static getInstance(){return vv.s_thisInstance}constructor(){this.m_map=new Map,this.m_vd2D=new xN(1),this.m_map.set(1,this.m_vd2D),this.m_vd3D=new xN(3),this.m_map.set(3,this.m_vd2D)}GetVD2D(){return this.m_vd2D}GetVD3D(){return this.m_vd3D}FindOrAdd(e){if(e===1)return this.GetVD2D();if(e===3)return this.GetVD3D();const i=this.m_map.get(e);if(i)return i;const s=new xN(e);return this.m_map.set(e,s),s}}function vj(t){return vv.getInstance().FindOrAdd(t)}function c5(t,e){if(!t||!e)return e||t;const i=t.getSemanticsBitArray()|e.getSemanticsBitArray();return(i&t.getSemanticsBitArray())===i?t:(i&e.getSemanticsBitArray())===i?e:vj(i)}function u5(t,e){const i=t.getSemanticsBitArray()|1<<e;return(i&t.getSemanticsBitArray())===i?t:vj(i)}function _j(t,e){const i=(t.getSemanticsBitArray()|1<<e)-(1<<e);return i===t.getSemanticsBitArray()?(K(0),t):vj(i)}function Ho(){return vv.getInstance().GetVD2D()}function AE(){return vv.getInstance().GetVD3D()}function i7(t,e,i){if(i.fill(-1),t!==null&&e!==null)for(let s=0,n=t.getAttributeCount();s<n;s++)i[s]=e.getAttributeIndex(t.getSemantics(s))}vv.s_thisInstance=new vv;class ii{static construct(e,i,s){return new ii(e,i,s)}constructor(e,i,s){e!==void 0?(this.x=e,this.y=i,this.z=s):this.x=this.y=this.z=Number.NaN}get 0(){return this.x}get 1(){return this.y}get 2(){return this.z}set 0(e){this.x=e}set 1(e){this.y=e}set 2(e){this.z=e}clone(){return new ii(this.x,this.y,this.z)}assign(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}setCoords(e,i,s){return this.x=e,this.y=i,this.z=s,this}setCoordsPoint2DZ(e,i){return this.setCoords(e.x,e.y,i)}setCoordsPoint3D(e){this.x=e.x,this.y=e.y,this.z=e.z}setZero(){this.x=0,this.y=0,this.z=0}setNormalized(e){this.assign(e),this.normalizeThis()}normalizeThis(){const e=this.length();return e?(this.x/=e,this.y/=e,this.z/=e):(this.x=1,this.y=0,this.z=0),this}getUnitVector(){const e=new ii;return e.setNormalized(this),e}sqrLength(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthXY(){return K(0),0}static sqrDistance(e,i){return Xi(e.x-i.x)+Xi(e.y-i.y)+Xi(e.z-i.z)}static sqrDistanceCoords(e,i,s,n,r,o){return K(0),0}static distance(e,i){return Math.sqrt(ii.sqrDistance(e,i))}isEqual(e,i){return i===void 0&&(i=0),Math.abs(this.x-e.x)<=i&&Math.abs(this.y-e.y)<=i&&l5(this.z,e.z,i)}static compareByLength(e,i,s,n){return K(0),0}isEqualCoords(e,i,s,n){return K(0),this.x===e&&this.y===i&&this.z===s}isEqualsTols(e,i,s){return K(0),!1}isEqualCoordsTols(e,i,s,n,r){return K(0),!1}static st_isEqual(e,i,s,n){return K(0),!1}equals(e,i){return K(0),!1}equalsTols(e,i,s){return K(0),!1}divThis(e){return this.x/=e,this.y/=e,this.z/=e,this}subThis(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}setSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}sub(e){return ii.construct(this.x-e.x,this.y-e.y,this.z-e.z)}addThis(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}add(e){return this.clone().addThis(e)}setAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}mul(e){return ii.construct(this.x*e,this.y*e,this.z*e)}dotProduct(e){return this.x*e.x+this.y*e.y+this.z*e.z}crossProductVector(e){const i=this.y*e.z-e.y*this.z,s=e.x*this.z-this.x*e.z,n=this.x*e.y-e.x*this.y;return new ii(i,s,n)}setCrossProductVector(e,i){const s=e.y*i.z-i.y*e.z,n=i.x*e.z-e.x*i.z,r=e.x*i.y-i.x*e.y;return this.x=s,this.y=n,this.z=r,this}setScaled(e,i){return this.x=e*i.x,this.y=e*i.y,this.z=e*i.z,this}scaleThis(e){return this.x*=e,this.y*=e,this.z*=e,this}scaleZThis(e){return this.z*=e,this}setNAN(){return K(0),this}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)||Number.isNaN(this.z)}static getNAN(){return ii.construct(Number.NaN,Number.NaN,Number.NaN)}isFinite(){return K(0),!1}isZero(){return this.x===0&&this.y===0&&this.z===0}norm(e){return K(0),0}sqrDistanceFromCenterToSpheroidSurface(e,i){return K(0),0}distanceFromCenterToSpheroidSurface(e,i){return Math.sqrt(this.sqrDistanceFromCenterToSpheroidSurface(e,i))}static getClosestCoordinate(e,i,s,n=!1){return K(0),0}compare(e){return K(0),0}compareXYZ(e){return K(0),0}negateThis(){this.x=-this.x,this.y=-this.y,this.z=-this.z}static averageFast(e,i){return K(0),{}}static average(e,i){return K(0),{}}static size(){return ii.dimensions}static lerp(e,i,s){const n=new ii;return LKe(e,i,s,n),n}static slerp(e,i,s){return K(0),{}}static compareVectors(e,i){return K(0),0}static selectRightHandedBasisFromNormal(e,i,s){const n=e.getUnitVector(),r=n.createAPerpendicular(),o=new ii;o.setCrossProductVector(n,r),o.normalizeThis(),i.setCoordsPoint3D(r),s.setCoordsPoint3D(o)}createAPerpendicular(){const e=[this.crossProductVector(new ii(0,0,1)),this.crossProductVector(new ii(1,0,0)),this.crossProductVector(new ii(0,1,0))],i=[e[0].sqrLength(),e[1].sqrLength(),e[2].sqrLength()],s=e[i.reduce((n,r,o)=>i[n]>i[o]?n:o,0)];return s.normalizeThis(),s}calculateAngle(e){return K(0),0}static crossDotSign(e,i,s){return K(0),0}static isBisectorRobust(e,i,s){return K(0),0}static compareZOrder(e,i){return K(0),!1}}ii.dimensions=3;var N1=_r;class Ut{constructor(e){if(this.m_description=null,this.x=Number.NaN,this.y=Number.NaN,this.m_attribs=null,e){if(!e.copy)return e.move?(this.m_description=e.move.m_description,e.move.m_description=null,this.m_attribs=e.move.m_attribs,e.move.m_attribs=null,this.x=e.move.x,void(this.y=e.move.y)):e.vd?(this.m_description=e.vd,void(e.attribBuffer?(this.m_attribs=e.attribBuffer,e.initDefaultValues&&this.setDefaultAttributeValues()):this.ensureAttributes())):e.pt?(this.m_description=Ho(),void this.setXY(e.pt)):void("x"in e&&("z"in e?(this.m_description=AE(),this.ensureAttributes(),this.setXYZ(new ii(e.x,e.y,e.z))):(this.m_description=Ho(),this.setXYCoords(e.x,e.y))));e.copy.copyTo(this)}else this.m_description=Ho()}assignCopy(e){return this.m_attribs=null,e.copyTo(this),this}assignMove(e){return K(0),this}vertexCount(){return K(0),1}getXY(){return new Y(this.x,this.y)}setXY(e){this.x=e.x,this.y=e.y}setXYCoords(e,i){this.x=e,this.y=i}getXYZ(){const e=new ii;return e.x=this.x,e.y=this.y,e.z=this.getZ(),e}setXYZ(e){this.addAttribute(1),this.x=e.x,this.y=e.y,this.m_attribs[0]=e.z}getX(){return this.x}setX(e){this.x=e}getY(){return this.y}setY(e){this.y=e}getZ(){return this.m_description.hasZ()?this.m_attribs[0]:N1.getDefaultValue(1)}setZ(e){this.addAttribute(1),this.m_attribs[0]=e}getM(){return this.getAttributeAsDbl(2,0)}setM(e){this.addAttribute(2),this.m_description.hasZ()?this.m_attribs[1]=e:this.m_attribs[0]=e}getID(){return this.getAttributeAsInt(3,0)}setID(e){this.setAttributeBasic(3,0,e)}isEqualXY(e,i){return K(0),!1}isEqualXYCoords(e,i,s){return s===void 0&&(s=0),Math.abs(e-this.x)<=s&&Math.abs(i-this.y)<=s}getAttributeAsDbl(e,i){if(e===0){if(i===0)return this.x;if(i===1)return this.y;Mi("")}const s=N1.getComponentCount(e);(i<0||i>=s)&&Mi("");const n=this.m_description.getAttributeIndex(e);return n>=0?this.m_attribs[this.m_description.getPointAttributeOffset(n)-2+i]:N1.getDefaultValue(e)}getAttributeAsInt(e,i){return Math.trunc(this.getAttributeAsDbl(e,i))}setAttributeBasic(e,i,s){if(e===0)return void(i===0?this.x=s:i===1?this.y=s:Mi(""));const n=N1.getComponentCount(e);(i<0||i>=n)&&Mi("");let r=this.m_description.getAttributeIndex(e);r<0&&(this.addAttribute(e),r=this.m_description.getAttributeIndex(e)),this.m_attribs[this.m_description.getPointAttributeOffset(r)-2+i]=s}copyAttributesFrom(e,i){K(0)}getAttributeArray(){return this.m_attribs}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}mergeVertexDescription(e){K(0)}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=u5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){K(0)}dropAllAttributes(){const e=Ho();e!==this.m_description&&this.assignVertexDescription(e)}getGeometryType(){return me.enumPoint}getDimension(){return 0}queryEnvelope(e){if(e instanceof lr)return e.setEmpty(),e.assignVertexDescription(this.m_description),void e.merge(this);if(e instanceof il){if(this.isEmpty())return void e.setEmpty();const i=this.getXYZ();return e.xmin=i.x,e.ymin=i.y,e.zmin=i.z,e.xmax=i.x,e.ymax=i.y,void(e.zmax=i.z)}this.isEmpty()?e.setEmpty():(e.xmin=this.x,e.ymin=this.y,e.xmax=this.x,e.ymax=this.y)}queryLooseEnvelope(e){this.queryEnvelope(e)}queryInterval(e,i){const s=new Ze;if(this.isEmpty())return s.setEmpty(),s;const n=this.getAttributeAsDbl(e,i);return s.vmin=n,s.vmax=n,s}applyTransformation(e){if(!this.isEmpty()){if(e instanceof _i){const i=this.getXY();return e.transformInPlace(i),void this.setXY(i)}K(0)}}transformAttribute(e,i,s,n,r){K(0)}createInstance(){return new Ut({vd:this.m_description})}copyTo(e){if(this===e)return;e.getGeometryType()!==me.enumPoint&&Je();const i=e;i.x=this.x,i.y=this.y,this.m_attribs?(i.assignVertexDescription(this.m_description),i.m_attribs=this.m_attribs.slice()):(i.releaseAttributes(),i.assignVertexDescription(this.m_description))}isEmpty(){return Number.isNaN(this.x)||Number.isNaN(this.y)}setEmpty(){this.m_description||(this.m_description=Ho(),this.releaseAttributes()),this.x=Number.NaN,this.y=Number.NaN,this.m_attribs&&dn(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,this.m_description.getTotalComponentCount()-2)}calculateArea2D(){return 0}calculateLength2D(){return 0}calculateLength3D(e){return 0}equals(e,i){if(e===this)return!0;if(e.getGeometryType()!==me.enumPoint)return!1;const s=e;if(this.m_description!==s.m_description||this.isEmpty()!==s.isEmpty())return!1;if(this.isEmpty())return!0;if(i===void 0&&(i=0),Math.abs(this.x-s.x)>i||Math.abs(this.y-s.y)>i)return!1;for(let n=0,r=this.m_description.getTotalComponentCount()-2;n<r;n++)if(!l5(this.m_attribs[n],s.m_attribs[n],i))return!1;return!0}getBoundary(){return null}clone(){const e=new Ut({vd:this.m_description});return this.copyTo(e),e}swap(e){K(0)}replaceNaNs(e,i){K(0)}lerp(e,i,s){return K(0),new Ut({x:0,y:0})}setDefaultAttributeValues(){const e=this.m_description.getTotalComponentCount()-2;e>0&&(this.m_attribs?dn(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,e):this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}static sqrDistance2D(e,i){return K(0),0}getImpl(){return this}hasNonLinearSegments(){return K(0),!1}mergeVertexDescriptionImpl(e){K(0)}releaseAttributes(){this.m_attribs=null}assignVertexDescriptionImpl(e){this.m_description||(this.m_description=Ho());const i=t7();i7(e,this.m_description,i);let s=null;e.getTotalComponentCount()-2>0&&(s=e.getDefaultPointAttributes().slice(2));for(let n=1,r=e.getAttributeCount();n<r;n++){const o=i[n];if(o!==-1){const l=this.m_description.getPointAttributeOffset(o)-2,u=e.getPointAttributeOffset(n)-2,f=N1.getComponentCount(e.getSemantics(n));for(let y=0;y<f;y++)s[u+y]=this.m_attribs[l+y]}}this.m_attribs=s,this.m_description=e}ensureAttributes(){this.m_description.getTotalComponentCount()-2>0&&this.m_attribs===null&&(this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}queryValues(e,i){}copyCommonAttributesTo(e){e.x=this.x,e.y=this.y;const i=e.getDescription();if(i===this.m_description)this.m_attribs&&dn(e.m_attribs,this.m_attribs,0,0,this.m_description.getTotalComponentCount()-2);else{let s=0;for(let n=1,r=i.getAttributeCount();n<r;n++){const o=i.getSemantics(n);let l=N1.getComponentCount(o);if(this.m_description.hasAttribute(o)){let u=this.m_description.getPointAttributeOffset(this.m_description.getAttributeIndex(o))-2;for(;l!==0;)e.m_attribs[s++]=this.m_attribs[u++],l--}else{const u=N1.getDefaultValue(o);for(;l!==0;)e.m_attribs[s++]=u,l--}}}}setValues(e,i){}dbgDefaultAttribs(){}}Ut.type=me.enumPoint;var Su=_r;function $6(t,e){return e*(t.getTotalComponentCount()-2)}class Iu{constructor(e){if(this.m_attributes=null,e)if(e.xmin!==void 0)this.m_envelope2D=new xe(e.xmin,e.ymin,e.xmax,e.ymax);else if(e.env2D!==void 0)this.m_envelope2D=new xe(e.env2D);else if(e.move)this.m_envelope2D=new xe(e.move.m_envelope2D),this.m_attributes=e.move.m_attributes,e.move.m_attributes=null;else{if(!e.moveEnv)throw new Error("unrecognized EnvelopeData constructor options");{const i=e.moveEnv.accessEnvelopeData();this.m_envelope2D=new xe(i.m_envelope2D),this.m_attributes=i.m_attributes,i.m_attributes=null}}else this.m_envelope2D=xe.constructEmpty()}ensureAttributes(e){const i=e.getTotalComponentCount()-2;!this.m_attributes&&i&&(this.m_attributes=new Array(2*i),this.m_attributes.fill(Number.NaN))}copyTo(e,i){const s=i,n=e.getTotalComponentCount()-2;if(s.m_description!==e&&(s.releaseAttributes_(),s.m_description=e,n&&(s.m_data.m_attributes=new Array(2*n))),n){K(this.m_attributes&&s.m_data.m_attributes);const r=2*n;dn(s.m_data.m_attributes,this.m_attributes,0,0,r)}s.m_data.m_envelope2D=new xe(this.m_envelope2D)}copyToIfNotNull(e,i){i.m_envelope2D=new xe(this.m_envelope2D),i.releaseAttributes(),e.getTotalComponentCount()-2&&this.m_attributes&&(i.m_attributes=this.m_attributes.slice())}releaseAttributes(){this.m_attributes=null}isEmpty(){return this.m_envelope2D.isEmpty()}transformAttribute(e,i,s,n,r){K(0)}queryInterval(e,i,s,n){if(this.isEmpty())return void n.setEmpty();if(i===0)return void(s===0?this.m_envelope2D.queryIntervalX(n):s===1?this.m_envelope2D.queryIntervalY(n):Mi(""));const r=Su.getComponentCount(i);(s<0||s>=r)&&Mi("");const o=e.getAttributeIndex(i);if(o>=0)return n.vmin=this.m_attributes[$6(e,0)+e.getPointAttributeOffset(o)-2+s],void(n.vmax=this.m_attributes[$6(e,1)+e.getPointAttributeOffset(o)-2+s]);{const l=Su.getDefaultValue(i);return void n.setCoords(l,l)}}queryEnvelope3D(e,i){const s=new Ze;this.queryInterval(e,1,0,s),i.setCoords(this.m_envelope2D.xmin,this.m_envelope2D.ymin,s.vmin,this.m_envelope2D.xmax,this.m_envelope2D.ymax,s.vmax)}setEmpty(e){this.m_envelope2D.setEmpty();const i=e.getTotalComponentCount()-2;i&&(this.m_attributes?this.dbgAssertSize(i):this.m_attributes=new Array(2*i),this.m_attributes.fill(Number.NaN))}dbgAssertSize(e){}}class lr{constructor(e){if(this.m_description=Ho(),e===void 0)this.m_data=new Iu;else if(e.vd!==void 0)this.m_description=e.vd,this.m_data=new Iu,this.ensureAttributes_();else if(e!=null&&e.env2D)this.m_data=new Iu({env2D:e.env2D});else if(e.xmin!==void 0)this.m_data=new Iu({xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax});else if(e.copy)this.m_data=new Iu,e.copy.copyTo(this);else if(e.move)this.m_description=e.move.m_description,e.move.m_description=null,this.m_data=new Iu({move:e.move.m_data});else{if(!e.centerPoint)throw new Error("unrecognized Envelope constructor options");this.m_description=e.centerPoint.getDescription(),this.m_data=new Iu,this.ensureAttributes_(),this.setFromPoint(e.centerPoint,e.width,e.height)}}accessEnvelopeData(){return this.m_description=null,this.m_data}assignMove(e){return this===e||(this.m_description=e.m_description,e.m_description=null,this.m_data=new Iu({move:e.m_data})),this}assignCopy(e){return this===e||e.copyTo(this),this}transformAttribute(e,i,s,n,r){K(0)}vertexCount(){return K(0),0}setAttributeBasic(e,i,s){if(this.addAttribute(e),this.m_data.isEmpty())return;const n=this.queryInterval(e,i);n.vmin=s,n.vmax=s,this.setIntervalEnvelope(e,i,n)}hasNonLinearSegments(){return K(0),!0}mergeVertexDescriptionImpl(e){const i=c5(this.getDescription(),e);this.assignVertexDescription(i)}asEnvelope2D(){return new xe(this.m_data.m_envelope2D)}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}getGeometryType(){return me.enumEnvelope}getDimension(){return 2}getXMin(){return this.m_data.m_envelope2D.xmin}getYMin(){return this.m_data.m_envelope2D.ymin}getXMax(){return this.m_data.m_envelope2D.xmax}getYMax(){return this.m_data.m_envelope2D.ymax}width(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.width()}height(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.height()}getCenterX(){return K(0),0}getCenterY(){return K(0),0}getCenterXY(){return this.m_data.isEmpty()?new Y:this.m_data.m_envelope2D.getCenter()}getCenter(e){if(e.assignVertexDescription(this.m_description),this.m_data.isEmpty())return void e.setEmpty();const i=this.m_description.getAttributeCount();for(let s=1;s<i;s++){const n=this.m_description.getSemantics(s),r=Su.getComponentCount(n);for(let o=0;o<r;o++){const l=.5*(this.getAttributeAsDblImpl(0,n,o)+this.getAttributeAsDblImpl(1,n,o));e.setAttributeBasic(n,o,l)}}e.setXY(this.m_data.m_envelope2D.getCenter())}setCoords(e,i,s,n){this.m_data.m_envelope2D.setCoords({xmin:e,ymin:i,xmax:s,ymax:n})}setEnvelope(e){if(e instanceof xe)this.m_data.m_envelope2D=new xe(e),this.m_data.m_envelope2D.normalize();else{this.addAttribute(1),this.m_data.m_envelope2D=e.getEnvelope2D(),this.m_data.m_envelope2D.normalize();const i=Ze.constructEmpty();i.setCoords(e.zmin,e.zmax),this.setInterval(1,0,i.vmin,i.vmax)}}merge(e){if(e instanceof xe)return e.isValid()||Je(""),void this.m_data.m_envelope2D.mergeEnvelope2D(e);if(e instanceof lr){if(e.m_data.isEmpty())return;const i=e.getDescription();this.mergeVertexDescription(i),this.m_data.m_envelope2D.mergeEnvelope2D(e.m_data.m_envelope2D);for(let s=1,n=i.getAttributeCount();s<n;s++){const r=i.getSemantics(s),o=Su.getComponentCount(r);for(let l=0;l<o;l++){const u=e.queryInterval(r,l),f=this.queryInterval(r,l);f.merge(u),this.setIntervalEnvelope(r,l,f)}}}else if(e instanceof Ut){const i=e;if(i.isEmpty())return;const s=i.getDescription();if(this.mergeVertexDescription(s),this.m_data.isEmpty())return void this.setFromPoint(i);this.m_data.m_envelope2D.merge(i.getXY());for(let n=1,r=s.getAttributeCount();n<r;n++){const o=s.getSemantics(n),l=Su.getComponentCount(o);for(let u=0;u<l;u++){const f=i.getAttributeAsDbl(o,u),y=this.queryInterval(o,u);y.mergeCoordinate(f),this.setIntervalEnvelope(o,u,y)}}}else K(0)}intersect(e){if(!this.m_data.m_envelope2D.intersect(e.m_data.m_envelope2D))return this.setEmpty(),!1;const i=e.getDescription();this.mergeVertexDescription(i);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s),o=Su.getComponentCount(r);for(let l=0;l<o;l++){const u=e.queryInterval(r,l),f=this.queryInterval(r,l);f.intersect(u),this.setIntervalEnvelope(r,l,f)}}return!0}intersectCommonAttributes(e){if(!this.m_data.m_envelope2D.intersect(e.m_data.m_envelope2D))return this.setEmpty(),!1;const i=e.getDescription();for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s);if(!i.hasAttribute(r))continue;const o=Su.getComponentCount(r);for(let l=0;l<o;l++){const u=e.queryInterval(r,l),f=this.queryInterval(r,l);f.intersect(u),this.setIntervalEnvelope(r,l,f)}}return!0}move(e,i){K(0)}centerAt(e,i){this.m_data.m_envelope2D.centerAtCoords(e,i)}centerAtPoint(e){}reaspect(e,i){K(0)}inflateCoords(e,i){this.m_data.m_envelope2D.inflateCoords(e,i)}containsCoords(e,i){return K(0),!1}contains(e){return K(0),!1}containsPoint(e){return K(0),!1}containsEnvelope(e){return K(0),!1}setIntervalEnvelope(e,i,s){if(this.addAttribute(e),this.m_data.isEmpty())return;const n=new Ze(s);if(n.normalize(),e===0){if(n.isEmpty())return void this.setEmpty();i===0?(this.m_data.m_envelope2D.xmin=n.vmin,this.m_data.m_envelope2D.xmax=n.vmax):i===1?(this.m_data.m_envelope2D.ymin=n.vmin,this.m_data.m_envelope2D.ymax=n.vmax):Mi("")}else this.setAttributeAsDblImpl(0,e,i,n.vmin),this.setAttributeAsDblImpl(1,e,i,n.vmax)}setInterval(e,i,s,n){this.setIntervalEnvelope(e,i,new Ze(s,n))}queryInterval(e,i){const s=new Ze;return this.m_data.queryInterval(this.m_description,e,i,s),s}queryEnvelope(e){e instanceof xe?e.setCoords({env2D:this.m_data.m_envelope2D}):e instanceof il?this.m_data.queryEnvelope3D(this.m_description,e):e instanceof lr?this.copyTo(e):K(0)}applyTransformation(e){e instanceof _i?e.transformEnvInPlace(this.m_data.m_envelope2D):K(0)}createInstance(){return K(0),this}copyTo(e){e!==this&&this.m_data.copyTo(this.m_description,e)}isEmpty(){return this.m_data.isEmpty()}setEmpty(){this.m_description||(this.m_description=Ho()),this.m_data.setEmpty(this.m_description)}calculateArea2D(){return this.m_data.m_envelope2D.getArea()}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}equals(e,i){if(e===this)return!0;const s=e;if(this.m_description!==s.m_description||this.m_data.isEmpty()!==s.m_data.isEmpty())return!1;if(this.m_data.isEmpty())return!0;if(i===void 0&&(i=0),Math.abs(this.m_data.m_envelope2D.xmin-s.m_data.m_envelope2D.xmin)>i||Math.abs(this.m_data.m_envelope2D.ymin-s.m_data.m_envelope2D.ymin)>i||Math.abs(this.m_data.m_envelope2D.xmax-s.m_data.m_envelope2D.xmax)>i||Math.abs(this.m_data.m_envelope2D.ymax-s.m_data.m_envelope2D.ymax)>i)return!1;for(let n=0,r=2*(this.m_description.getTotalComponentCount()-2);n<r;n++)if(!l5(this.m_data.m_attributes[n],s.m_data.m_attributes[n],i))return!1;return!0}getBoundary(){return js("getBoundary not available in this context. Use the boundary operator with an envelope parameter"),null}clone(){return new lr({copy:this})}swap(e){K(0)}queryCoordinates(e){K(0)}queryCornerByVal(e,i){(e<0||e>3)&&Mi(""),i.assignVertexDescription(this.m_description);const s=this.getDescription().getAttributeCount();for(let n=1;n<s;n++){const r=this.m_description.getSemantics(n),o=Su.getComponentCount(r);for(let l=0;l<o;l++)i.setAttributeBasic(r,l,this.getAttributeAsDblImpl(e%2,r,l))}i.setXY(this.m_data.m_envelope2D.queryCorner(e))}queryCorner(e,i){i.assign(this.m_data.m_envelope2D.queryCorner(e))}getDescription(){return this.m_description}mergeVertexDescription(e){this.m_description!==e&&(this.m_description&&this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=u5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=_j(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){K(0)}queryLooseEnvelope(e){this.queryEnvelope(e)}replaceNaNs(e,i){K(0)}getImpl(){return this}setFromPoint(e,i,s){this.m_data.m_envelope2D.setCoords({center:e.getXY(),width:i??0,height:s??0});const n=e.getDescription();for(let r=1,o=n.getAttributeCount();r<o;r++){const l=n.getSemantics(r),u=Su.getComponentCount(l);for(let f=0;f<u;f++){const y=e.getAttributeAsDbl(l,f);this.setInterval(l,f,y,y)}}}assignVertexDescriptionImpl(e){const i=t7();i7(e,this.m_description,i);let s=null;const n=e.getTotalComponentCount()-2,r=this.m_description?this.m_description.getTotalComponentCount()-2:0;n>0&&(s=new Array(2*n),s.fill(Number.NaN));for(let o=1;o<e.getAttributeCount();o++){const l=i[o];if(l!==-1){const u=e.getPointAttributeOffset(o)-2,f=Su.getComponentCount(e.getSemantics(o)),y=this.m_description.getPointAttributeOffset(l)-2;dn(s,this.m_data.m_attributes,u,y,f),dn(s,this.m_data.m_attributes,n+u,r+y,f)}}this.releaseAttributes_(),this.m_data.m_attributes=s,this.m_description=e}getAttributeAsDblImpl(e,i,s){if(this.m_data.isEmpty()&&XA(""),i===0)return e?s?this.m_data.m_envelope2D.ymax:this.m_data.m_envelope2D.xmax:s?this.m_data.m_envelope2D.ymin:this.m_data.m_envelope2D.xmin;s>=Su.getComponentCount(i)&&Mi("");const n=this.m_description.getAttributeIndex(i);return n>=0?this.m_data.m_attributes[$6(this.m_description,e)+this.m_description.getPointAttributeOffset(n)-2+s]:_r.getDefaultValue(i)}setAttributeAsDblImpl(e,i,s,n){i===0&&(e?s===1?this.m_data.m_envelope2D.ymax=n:s===0?this.m_data.m_envelope2D.xmax=n:Mi(""):s===1?this.m_data.m_envelope2D.ymin=n:s===0?this.m_data.m_envelope2D.xmin=n:Mi(""));const r=Su.getComponentCount(i);(s<0||s>=r)&&Mi(""),this.addAttribute(i);const o=this.m_description.getAttributeIndex(i);this.m_data.m_attributes[$6(this.m_description,e)+this.m_description.getPointAttributeOffset(o)-2+s]=n}releaseAttributes_(){this.m_data.releaseAttributes()}ensureAttributes_(){this.m_data.ensureAttributes(this.m_description)}}lr.type=me.enumEnvelope;const Rb=-559038737;var a2=_r;function Mge(t,e,i){switch(t){case 0:return new O6(e,i);case 1:return new od(e,i);case 2:return new Ns(e,i);case 3:throw new Error("64 bit int attribute stream not implemented");case 4:return new _v(e,i);default:Je("")}}function Age(t,e){const i=a2.getComponentCount(t);return Mge(a2.getPersistence(t),e*i,a2.getDefaultValue(t))}function VI(t,e){const i=a2.getComponentCount(t);return Mge(a2.getPersistence(t),e*i)}function Ga(t,e){return new Ns(t,e)}function R0(t,e){return new _v(t,e)}function Ny(t,e){return new od(t,e)}class om{size(){return this.m_size}checkResize(e,i){e>this.m_size&&this.resize(e,i)}resize(e,i){if((e=Math.trunc(e))===this.m_size)return;const s=!!i||Number.isNaN(i);if(e<this.m_a.length)this.m_a.length>om.s_resizeMin&&1.25*e<this.m_a.length&&(this.m_a=this.m_a.slice(0,e)),s&&e>this.m_size&&this.m_a.fill(i,this.m_size,e);else if(e>=this.m_a.length){const n=1.25*e,r=new this.m_a.constructor(n);r.set(this.m_a),this.m_a=r,s&&this.m_a.fill(i,this.m_size,e)}this.m_size=e}resizeRounded(e,i){return this.resize(e,i)}reserve(e){}read(e){return K(e>=0&&e<this.m_size),this.m_a[e]}readAsDbl(e){return this.read(e)}write(e,i){this.m_a[e]=i}writeAsDbl(e,i){this.write(e,i)}setRange(e,i,s){(i<0||s<0||s+i>this.size())&&Je(),this.m_a.fill(e,i,i+s)}add(e){this.resize(this.m_size+1),this.m_a[this.m_size-1]=e}addArray(e,i){const s=this.m_size;i===void 0?(this.resize(this.m_size+e.length),this.m_a.set(e,s)):(this.resize(this.m_size+i),this.m_a.set(e.slice(0,i),s))}equals(e,i,s,n){return this.getPersistence()!==e.getPersistence()?!1:wJe(this,e,i,s,n)}insertRange(e,i,s,n){s&&this.checkResize(n+s),this.m_a.copyWithin(e+s,e,n||this.m_size),this.m_a.fill(i,e,e+s)}readRange(e,i){return this.m_a.slice(e,e+i)}insertRangeFromStream(e,i,s,n,r,o,l){K(this.getPersistence()===i.getPersistence());const u=i;n&&this.checkResize(l+n),this.m_a.copyWithin(e+n,e,l||this.m_size),this.m_a.set(u.readRange(s,n),e),r||this.reverseRange(e,n,o)}writeRange(e,i,s,n,r,o){K(this.getPersistence()===s.getPersistence());const l=s;if((e<0||i<0||n<0)&&Je(),l.size()<n+i&&Je(),i===0)return;this.size()<i+e&&this.resize(i+e);const u=l.m_a.subarray(n,n+i);SJe(this.m_a,e,i,u)}insertAttributes(e,i,s,n){const r=a2.getComponentCount(s);this.m_a.copyWithin(e+r,e,n||this.m_size);for(let o=0;o<r;o++)this.m_a[e+o]=i.getAttributeAsDbl(s,o)}insertAttributesFromPoints(e,i,s,n,r){K(0)}eraseRange(e,i,s){this.m_size<e+i&&Je(),this.m_a.copyWithin(e,e+i),this.m_size-=i}reverseRange(e,i,s){if((s<1||i%s!=0)&&Je(),this.m_a.subarray(e,e+i).reverse(),s>1)for(let n=e,r=e+i;n<r;n+=s){let o=n,l=n+s-1;for(;o<l;){const u=this.m_a[o];this.m_a[o]=this.m_a[l],this.m_a[l]=u,o++,l--}}}rotate(e,i,s){(i<e||i>s||e>s)&&Mi("rotate"),i!==e&&i!==s&&(this.reverseRange(e,i-e,1),this.reverseRange(i,s-i,1),this.reverseRange(e,s-e,1))}adjacentDifference(e,i,s){return K(0),0}sort(e,i,s){this.m_a.subarray(e,i).sort(s)}constructor(e){if(e.move)this.m_a=e.move.m_a,this.m_size=e.move.m_size,e.move.m_a=e.move.m_a.slice(0,0),e.move.m_size=0;else if(e.copy)this.m_size=e.copy.m_size,e.maxSize&&(this.m_size=Math.min(e.maxSize,this.m_size)),this.m_a=e.copy.m_a.slice(0,this.m_size);else{const i=Math.max(e.size,om.s_constructMin);this.m_a=new e.ctor(i),(e.defaultValue||Number.isNaN(e.defaultValue))&&this.m_a.fill(e.defaultValue),this.m_size=e.size}}}om.s_constructMin=2,om.s_resizeMin=30;class _v extends om{setBits(e,i){this.m_a[e]|=i}clearBits(e,i){this.m_a[e]&=~i}getPersistence(){return 4}clone(){return new _v({ctor:Int8Array,copy:this})}restrictedClone(e){return new _v({ctor:Int8Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Int8Array,size:e,defaultValue:i}:e)}}class Ns extends om{getPersistence(){return 2}clone(){return new Ns({ctor:Int32Array,copy:this})}restrictedClone(e){return new Ns({ctor:Int32Array,copy:this,maxSize:e})}write(e,i){K(i<=So()),super.write(e,i)}constructor(e,i){super(typeof e=="number"?{ctor:Int32Array,size:e,defaultValue:i}:e)}}class O6 extends om{getPersistence(){return 0}clone(){return new O6({ctor:Float32Array,copy:this})}restrictedClone(e){return new O6({ctor:Float32Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Float32Array,size:e,defaultValue:i}:e)}}class od extends om{getPersistence(){return 1}getArray(){return this.m_a}applyTransformation(e,i,s){(1&i||i+2*s>this.size())&&Je();const n=i===0?this.m_a:this.m_a.subarray(i);e.transformInterleavedPoints(n,s,n)}readPoint2D(e){const i=this.m_a[e],s=this.m_a[e+1];return new Y(i,s)}queryPoint2D(e,i){return i.x=this.m_a[e],i.y=this.m_a[e+1],i}writePoint2D(e,i){this.write(e,i.x),this.write(e+1,i.y)}insert(e,i,s){if(s+2>=this.m_a.length)throw RangeError("AttributeStreamOfDbl::insert");this.m_a.copyWithin(e+2,e,s||this.m_size),this.m_a[e]=i.x,this.m_a[e+1]=i.y}insertRangeFromPoints(e,i,s,n,r,o){if(this.m_a.copyWithin(e+2*n,e,o||this.m_size),r)for(let l=s,u=e,f=0;f<n;++f,++l){const y=i[l];this.m_a[u++]=y.x,this.m_a[u++]=y.y}else for(let l=s+n-1,u=e,f=0;f<n;++f,--l){const y=i[l];this.m_a[u++]=y.x,this.m_a[u++]=y.y}}queryRange(e,i,s,n,r){if((e<0||i<0)&&Je(),!n&&(r<=0||i%r!=0)&&Je(),i===0)return;if(i===1)return void(s[0]=this.m_a[e]);const o=this.m_a.subarray(e,e+i);s.set(o)}writeRangeFromArray(e,i,s,n,r){if((e<0||i<0)&&Je(),i===0)return;if(i===1)return void(this.m_a[e]=s[0]);let o=s;i<s.length&&(o=s.subarray(0,i)),this.m_a.set(o,e)}clone(){return new od({ctor:Float64Array,copy:this})}restrictedClone(e){return new od({ctor:Float64Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Float64Array,size:e,defaultValue:i}:e)}}function wJe(t,e,i,s,n){if(t.getPersistence()!==e.getPersistence())return!1;const r=t.getPersistence()<=1,o=t.size(),l=e.size();if(s>o||s>l)return!1;if(n)for(let u=i;u<s;u++){let f=t.read(u)-e.read(u);if(f<0&&(f=-f),f>n)return!1}else for(let u=i;u<s;u++){const f=t.read(u),y=e.read(u);if(f!==y){if(r&&Number.isNaN(f)&&Number.isNaN(y))continue;return!1}}return!0}function SJe(t,e,i,s,n,r){if((e<0||i<0)&&Je(),i===0)return;if(i===1)return void(t[e]=s[0]);let o=s;i<s.length&&(o=s.subarray(0,i)),t.set(o,e)}class X4{constructor(e){this.posStream=null,this.streams=null,e!==void 0&&K(0)}assignMove(e){return K(0),this}get(e){return e>0?this.streams[e-1]:this.posStream}set(e,i){e>0?this.streams[e-1]=i:this.posStream=i}destroyAndSetSize(e){if(this.streams=null,e>1){this.streams=new Array(e-1);for(let i=0;i<e-1;++i)this.streams[i]=null}this.posStream=null}swap(e){[this.streams,e.streams]=[e.streams,this.streams],[this.posStream,e.posStream]=[e.posStream,this.posStream]}empty(){return this.posStream===null&&this.streams===null}}class ad{constructor(){this.m_minValue=-1,this.m_maxValue=-1,this.m_dy=Number.NaN,this.m_buckets=new Ns(0),this.m_bucketedIndices=new Ns(0)}static sortEx(e,i,s,n,r=32){if(s-i<=r)return void n.userSort(i,s,e);new ad().sort(e,i,s,n,r)}sort(e,i,s,n,r=32){if(s-i<=r)return void n.userSort(i,s,e);let o=!0,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(let y=i;y<s;y++){const _=n.getValue(e.read(y));_<l&&(l=_),_>u&&(u=_)}if(this.reset(s-i,l,u,s-i)){for(let _=i;_<s;_++){const x=e.read(_),S=n.getValue(x),P=this.getBucket(S);this.m_buckets.write(P,this.m_buckets.read(P)+1),this.m_bucketedIndices.write(_-i,x)}let y=this.m_buckets.read(0);this.m_buckets.write(0,0);for(let _=1,x=this.m_buckets.size();_<x;_++){const S=this.m_buckets.read(_);this.m_buckets.write(_,y),y+=S}for(let _=i;_<s;_++){const x=this.m_bucketedIndices.read(_-i),S=n.getValue(x),P=this.getBucket(S),A=this.m_buckets.read(P);e.write(A+i,x),this.m_buckets.write(P,A+1)}o=!1}if(o)return void n.userSort(i,s,e);let f=0;for(let y=0,_=this.m_buckets.size();y<_;y++){const x=f;f=this.m_buckets.read(y),f>x&&n.userSort(i+x,i+f,e)}this.m_buckets.size()>100&&(this.m_buckets.resize(0),this.m_bucketedIndices.resize(0))}reset(e,i,s,n){if(e<2||s===i)return!1;const r=Math.min(ad.c_maxBuckets,e);return this.m_buckets.resize(r),this.m_buckets.setRange(0,0,this.m_buckets.size()),this.m_minValue=i,this.m_maxValue=s,this.m_bucketedIndices.resize(n),this.m_dy=(s-i)/(r-1),!0}getBucket(e){return Math.trunc((e-this.m_minValue)/this.m_dy)}getBucketCount(){return this.m_buckets.size()}}ad.c_maxBuckets=65536;class Yt{constructor(e){this.m_buffer=null,this.m_firstFree=-1,this.m_last=0,this.m_size=0,this.m_capacity=0,this.m_bufferSize=0,this.m_stride=0,this.m_stride=e,this.m_realStride=e,this.m_blockSize=Math.trunc(Yt.st_realBlockSize/this.m_realStride)}dbgdelete_(e){return this.m_buffer[e>>Yt.st_blockPower][1+(e&Yt.st_blockMask)]=Yt.st_deadVertex,!0}deleteElement(e){(e>>Yt.st_blockPower)*this.m_blockSize*this.m_realStride+(e&Yt.st_blockMask)<this.m_last*this.m_realStride?(this.m_buffer[e>>Yt.st_blockPower][e&Yt.st_blockMask]=this.m_firstFree,this.m_firstFree=e):this.m_last--,this.m_size--}getField(e,i){return this.m_buffer[e>>Yt.st_blockPower][(e&Yt.st_blockMask)+i]}setField(e,i,s){this.m_buffer[e>>Yt.st_blockPower][(e&Yt.st_blockMask)+i]=s}getStride(){return this.m_stride}newElement(){let e=this.m_firstFree;if(e===-1){if(this.m_last===this.m_capacity){const n=this.m_capacity!==0?Math.trunc(2*(this.m_capacity+1)):1;this.grow(n)}e=(this.m_last/this.m_blockSize<<Yt.st_blockPower)+this.m_last%this.m_blockSize*this.m_realStride,this.m_last++}else this.m_firstFree=this.m_buffer[e>>Yt.st_blockPower][e&Yt.st_blockMask];this.m_size++;const i=this.m_buffer[e>>Yt.st_blockPower],s=e&Yt.st_blockMask;for(let n=0;n<this.m_stride;n++)i[s+n]=-1;return e}elementToIndex(e){return(e>>Yt.st_blockPower)*this.m_blockSize+(e&Yt.st_blockMask)/this.m_realStride}deleteAll(e){this.m_firstFree=-1,this.m_last=0,this.m_size=0,e&&(this.m_buffer=null,this.m_capacity=0)}size(){return this.m_size}setCapacity(e){e>this.m_capacity&&this.grow(e)}capacity(){return this.m_capacity}swap(e,i){const s=this.m_buffer[e>>Yt.st_blockPower],n=this.m_buffer[i>>Yt.st_blockPower],r=e&Yt.st_blockMask,o=i&Yt.st_blockMask;for(let l=0;l<this.m_stride;l++){const u=s[r+l];s[r+l]=n[o+l],n[o+l]=u}}swapField(e,i,s){const n=this.m_buffer[e>>Yt.st_blockPower],r=this.m_buffer[i>>Yt.st_blockPower],o=(e&Yt.st_blockMask)+s,l=(i&Yt.st_blockMask)+s,u=n[o];n[o]=r[l],r[l]=u}static impossibleIndex2(){return-2}static impossibleIndex3(){return-3}static isValidElement(e){return e>=0}ensureBufferBlocksCapacity(e){if(this.m_buffer.length<e){const i=new Array(e);for(let s=0;s<this.m_buffer.length;s++)i[s]=this.m_buffer[s];this.m_buffer=i}}grow(e){this.m_buffer===null&&(this.m_bufferSize=0,this.m_buffer=new Array(8));const i=Math.trunc((e+this.m_blockSize-1)/this.m_blockSize);if(this.ensureBufferBlocksCapacity(i),i===1){let s=0;const n=e*this.m_realStride;for(;n>Yt.st_sizes[s];)s++;const r=new Int32Array(Yt.st_sizes[s]);this.m_bufferSize===1?(r.set(this.m_buffer[0]),this.m_buffer[0]=r):(this.m_buffer[this.m_bufferSize]=r,this.m_bufferSize++),this.m_capacity=Math.trunc(r.length/this.m_realStride)}else{if(this.m_bufferSize===1&&this.m_buffer[0].length<Yt.st_realBlockSize){const s=new Int32Array(Yt.st_realBlockSize);s.set(this.m_buffer[0]),this.m_buffer[0]=s,this.m_capacity=this.m_blockSize}for(;this.m_bufferSize<i;)this.m_buffer[this.m_bufferSize++]=new Int32Array(Yt.st_realBlockSize),this.m_capacity+=this.m_blockSize}}}function EJe(t,e){return{element:t,box:e.clone()}}Yt.st_realBlockSize=16384,Yt.st_blockMask=16383,Yt.st_blockPower=14,Yt.st_sizes=[16,32,64,128,256,512,1024,2048,4096,8192,16384],Yt.st_deadVertex=-2125315821;class zo{constructor(e,i,s){this.m_extent=new xe,this.m_dataExtent=new xe,this.m_childExtents=[new xe,new xe,new xe,new xe],this.m_elementNodes=new Yt(4),this.m_data=[],this.m_freeData=[],this.m_root=-1,this.m_height=8,s===void 0&&(s=!1),this.m_quadTreeNodes=new Yt(s?11:10),this.m_bStoreDuplicates=s,this.reset_(e,i)}reset(e,i){K(0)}insert(e,i){if(this.m_root===-1&&this.createRoot_(),this.m_bStoreDuplicates){const n=this.insertDuplicates_(e,i,0,this.m_extent,this.m_root,!1,-1);return n!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),n}const s=this.insert_(e,i,0,this.m_extent,this.m_root,!1,-1);return s!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),s}insertEx(e,i,s){if(this.m_root===-1&&this.createRoot_(),this.m_bStoreDuplicates){const u=this.insertDuplicates_(e,i,0,this.m_extent,this.m_root,!1,-1);return u!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),u}let n;n=s===-1?this.m_root:this.getQuad_(s);const r=this.getHeight(n),o=this.getExtent(n),l=this.insert_(e,i,r,o,n,!1,-1);return l!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),l}removeElement(e){K(0)}getElement(e){return this.getElementValue_(this.getData_(e))}getElementAtIndex(e){return K(0),0}getElementExtent(e){const i=this.getData_(e);return this.getBoundingBoxValue_(i).clone()}getElementExtentAtIndex(e){return K(0),{}}getDataExtent(){return this.m_dataExtent.clone()}getQuadTreeExtent(){return K(0),{}}getHeight(e){return this.m_quadTreeNodes.getField(e,6)>>zo.m_heightBitShift}getMaxHeight(){return this.m_height}getExtent(e){const i=new xe;if(i.setCoords({env2D:this.m_extent}),e===this.m_root)return i;const s=[];let n=e;do s.push(this.getQuadrant_(n)),n=this.getParent_(n);while(n!==this.m_root);const r=s.length;for(let o=0;o<r;o++){const l=s.at(-1);s.pop(),l===0?(i.xmin=.5*(i.xmin+i.xmax),i.ymin=.5*(i.ymin+i.ymax)):l===1?(i.xmax=.5*(i.xmin+i.xmax),i.ymin=.5*(i.ymin+i.ymax)):l===2?(i.xmax=.5*(i.xmin+i.xmax),i.ymax=.5*(i.ymin+i.ymax)):(i.xmin=.5*(i.xmin+i.xmax),i.ymax=.5*(i.ymin+i.ymax))}return i}getQuad(e){return this.getQuad_(e)}getElementCount(){return this.m_root===-1?0:this.getSubTreeElementCount_(this.m_root)}getSubTreeElementCount(e){return this.getSubTreeElementCount_(e)}getContainedSubTreeElementCount(e){return this.m_bStoreDuplicates?this.getContainedSubTreeElementCount_(e):this.getSubTreeElementCount_(e)}getIntersectionCount(e,i,s){if(this.m_root===-1)return 0;const n=new xe;n.setCoords({env2D:e}),n.inflateCoords(i,i);const r=[],o=[];r.push(this.m_root),o.push(this.m_extent.clone());const l=Ge(xe,4);let u=0;for(;r.length>0;){let f=!1;const y=r.at(-1),_=o.at(-1);if(r.pop(),o.pop(),n.containsEnvelope(_)){if(u+=this.getSubTreeElementCount(y),s>0&&u>=s)return s}else if(n.isIntersecting(_)){for(let x=this.getFirstElement_(y);x!==-1;x=this.getNextElement_(x)){const S=this.getData_(x);if(this.getBoundingBoxValue_(S).isIntersecting(n)&&(u++,s>0&&u>=s))return s}f=this.getHeight(y)+1<=this.m_height}if(f){zo.setChildExtents_(_,l);for(let x=0;x<4;x++){const S=this.getChild_(y,x);S!==-1&&this.getSubTreeElementCount_(S)>0&&n.isIntersecting(l[x])&&(r.push(S),o.push(l[x].clone()))}}}return u}hasData(e,i){return this.getIntersectionCount(e,i,1)>=1}getIterator(e,i){return new cte(this,e,i)}getIteratorForQT(){return new cte(this)}getSortedIterator(e,i){return new ute(this.getIterator(e,i))}getSortedIteratorForQT(){return new ute(this.getIteratorForQT())}visitLeavesNearest(e,i,s,n){K(0)}reset_(e,i){(i<0||i>127)&&Je("invalid height"),this.m_height=i,this.m_extent.setCoords({env2D:e}),this.m_dataExtent.setEmpty(),this.m_root=-1}insert_(e,i,s,n,r,o,l){if(!n.containsEnvelope(i))return s===0?-1:this.insert_(e,i,0,this.m_extent,this.m_root,o,l);if(!o)for(let _=r;_!==-1;_=this.getParent_(_))this.setSubTreeElementCount_(_,this.getSubTreeElementCount_(_)+1);const u=new xe;u.setCoords({env2D:n});let f,y=r;for(f=s;f<this.m_height&&this.canPushDown_(y);f++){zo.setChildExtents_(u,this.m_childExtents);let _=!1;for(let x=0;x<4;x++)if(this.m_childExtents[x].containsEnvelope(i)){_=!0;let S=this.getChild_(y,x);S===-1&&(S=this.createChild_(y,x)),this.setSubTreeElementCount_(S,this.getSubTreeElementCount_(S)+1),y=S,u.setCoords({env2D:this.m_childExtents[x]});break}if(!_)break}return this.insertAtQuad_(e,i,f,u,y,o,r,l,-1)}insertDuplicates_(e,i,s,n,r,o,l){if(!o){if(!n.containsEnvelope(i))return-1;this.setSubTreeElementCount_(r,this.getSubTreeElementCount_(r)+1),this.setContainedSubTreeElementCount_(r,this.getContainedSubTreeElementCount_(r)+1)}const u=Math.max(i.width(),i.height());let f=-1;const y=[],_=[],x=[];y.push(r),_.push(n.clone()),x.push(s);const S=Ge(xe,4);for(;y.length>0;){let P=!1;const A=y.at(-1),k=_.at(-1),$=x.at(-1);if(y.pop(),_.pop(),x.pop(),$+1<this.m_height&&this.canPushDown_(A)&&u<=Math.max(k.width(),k.height())/2&&(P=!0),P){zo.setChildExtents_(k,S);let F=!1;for(let G=0;G<4;G++)if(F=S[G].containsEnvelope(i),F){let V=this.getChild_(A,G);V===-1&&(V=this.createChild_(A,G)),y.push(V),_.push(S[G].clone()),x.push($+1),this.setSubTreeElementCount_(V,this.getSubTreeElementCount_(V)+1),this.setContainedSubTreeElementCount_(V,this.getContainedSubTreeElementCount_(V)+1);break}if(!F){for(let G=0;G<4;G++)if(S[G].isIntersecting(i)){let V=this.getChild_(A,G);V===-1&&(V=this.createChild_(A,G)),y.push(V),_.push(S[G].clone()),x.push($+1),this.setSubTreeElementCount_(V,this.getSubTreeElementCount_(V)+1)}}}else f=this.insertAtQuad_(e,i,$,k,A,o,r,l,f),o=!1}return 0}insertAtQuad_(e,i,s,n,r,o,l,u,f){this.getFirstElement_(r);const y=this.getLastElement_(r);let _=-1;if(o){if(r===l)return u;this.disconnectElementHandle_(u),_=u}else f===-1?(_=this.createElement_(),this.setDataValues_(this.getData_(_),e,i)):_=this.createElementFromDuplicate_(f);return this.setQuad_(_,r),y!==-1?(this.setPrevElement_(_,y),this.setNextElement_(y,_)):this.setFirstElement_(r,_),this.setLastElement_(r,_),this.setLocalElementCount_(r,this.getLocalElementCount_(r)+1),this.canFlush_(r)&&this.flush_(s,n,r),_}static setChildExtents_(e,i){const s=.5*(e.xmin+e.xmax),n=.5*(e.ymin+e.ymax);i[0].setCoords({xmin:s,ymin:n,xmax:e.xmax,ymax:e.ymax}),i[1].setCoords({xmin:e.xmin,ymin:n,xmax:s,ymax:e.ymax}),i[2].setCoords({xmin:e.xmin,ymin:e.ymin,xmax:s,ymax:n}),i[3].setCoords({xmin:s,ymin:e.ymin,xmax:e.xmax,ymax:n})}disconnectElementHandle_(e){const i=this.getQuad_(e),s=this.getFirstElement_(i),n=this.getLastElement_(i),r=this.getPrevElement_(e),o=this.getNextElement_(e);s===e?(o!==-1?this.setPrevElement_(o,-1):this.setLastElement_(i,-1),this.setFirstElement_(i,o)):n===e?(this.setNextElement_(r,-1),this.setLastElement_(i,r)):(this.setPrevElement_(o,r),this.setNextElement_(r,o)),this.setPrevElement_(e,-1),this.setNextElement_(e,-1),this.setLocalElementCount_(i,this.getLocalElementCount_(i)-1)}canFlush_(e){return this.getLocalElementCount_(e)===zo.m_flushingCount&&!this.hasChildren_(e)}flush_(e,i,s){let n;const r=new xe;let o=this.getFirstElement_(s),l=-1,u=-1;do u=this.getData_(o),n=this.getElementValue_(u),r.setCoords({env2D:this.getBoundingBoxValue_(u)}),l=this.getNextElement_(o),this.m_bStoreDuplicates?this.insertDuplicates_(n,r,e,i,s,!0,o):this.insert_(n,r,e,i,s,!0,o),o=l;while(o!==-1)}canPushDown_(e){return this.getLocalElementCount_(e)>=zo.m_flushingCount||this.hasChildren_(e)}hasChildren_(e){return this.getChild_(e,0)!==-1||this.getChild_(e,1)!==-1||this.getChild_(e,2)!==-1||this.getChild_(e,3)!==-1}createChild_(e,i){const s=this.m_quadTreeNodes.newElement();return this.setChild_(e,i,s),this.setSubTreeElementCount_(s,0),this.setLocalElementCount_(s,0),this.setParent_(s,e),this.setHeightAndQuadrant_(s,this.getHeight_(e)+1,i),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(s,0),s}createRoot_(){this.m_root=this.m_quadTreeNodes.newElement(),this.setSubTreeElementCount_(this.m_root,0),this.setLocalElementCount_(this.m_root,0),this.setHeightAndQuadrant_(this.m_root,0,0),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(this.m_root,0)}createElement_(){const e=this.m_elementNodes.newElement();let i;return this.m_freeData.length>0?(i=this.m_freeData.at(-1),this.m_freeData.pop()):(i=this.m_data.length,this.m_data.length=i+1),this.setData_(e,i),e}createElementFromDuplicate_(e){const i=this.m_elementNodes.newElement(),s=this.getData_(e);return this.setData_(i,s),i}freeElementAndBoxNode_(e){K(0)}getChild_(e,i){return this.m_quadTreeNodes.getField(e,i)}setChild_(e,i,s){this.m_quadTreeNodes.setField(e,i,s)}getFirstElement_(e){return this.m_quadTreeNodes.getField(e,4)}setFirstElement_(e,i){this.m_quadTreeNodes.setField(e,4,i)}getLastElement_(e){return this.m_quadTreeNodes.getField(e,5)}setLastElement_(e,i){this.m_quadTreeNodes.setField(e,5,i)}getQuadrant_(e){return this.m_quadTreeNodes.getField(e,6)&zo.m_quadrantMask}getHeight_(e){return this.m_quadTreeNodes.getField(e,6)>>zo.m_heightBitShift}setHeightAndQuadrant_(e,i,s){const n=i<<zo.m_heightBitShift|s;this.m_quadTreeNodes.setField(e,6,n)}getLocalElementCount_(e){return this.m_quadTreeNodes.getField(e,7)}setLocalElementCount_(e,i){this.m_quadTreeNodes.setField(e,7,i)}getSubTreeElementCount_(e){return this.m_quadTreeNodes.getField(e,8)}setSubTreeElementCount_(e,i){this.m_quadTreeNodes.setField(e,8,i)}getParent_(e){return this.m_quadTreeNodes.getField(e,9)}setParent_(e,i){this.m_quadTreeNodes.setField(e,9,i)}getContainedSubTreeElementCount_(e){return this.m_quadTreeNodes.getField(e,10)}setContainedSubTreeElementCount_(e,i){this.m_quadTreeNodes.setField(e,10,i)}getData_(e){return this.m_elementNodes.getField(e,0)}setData_(e,i){this.m_elementNodes.setField(e,0,i)}getPrevElement_(e){return this.m_elementNodes.getField(e,1)}getNextElement_(e){return this.m_elementNodes.getField(e,2)}setPrevElement_(e,i){this.m_elementNodes.setField(e,1,i)}setNextElement_(e,i){this.m_elementNodes.setField(e,2,i)}getQuad_(e){return this.m_elementNodes.getField(e,3)}setQuad_(e,i){this.m_elementNodes.setField(e,3,i)}getElementValue_(e){return this.m_data[e].element}getBoundingBoxValue_(e){return this.m_data[e].box}setDataValues_(e,i,s){this.m_data[e]=EJe(i,s)}}zo.m_quadrantMask=3,zo.m_heightBitShift=2,zo.m_flushingCount=5;class cte{constructor(e,i,s){this.m_bLinear=!1,this.m_queryStart=new Y,this.m_queryEnd=new Y,this.m_queryBox=new xe,this.m_tolerance=0,this.m_currentElementHandle=-1,this.m_nextElementHandle=-1,this.m_quadsStack=[],this.m_extentsStack=[],this.m_childExtents=[new xe,new xe,new xe,new xe],this.m_quadTree=e,i&&this.resetIterator(i,s)}resetIterator(e,i){if(i===void 0&&(i=0),e instanceof xe)return this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,this.m_queryBox.setCoords({env2D:e}),this.m_queryBox.inflateCoords(i,i),this.m_tolerance=Number.NaN,void(this.m_quadTree.m_root!==-1&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)?(this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root),this.m_bLinear=!1):this.m_nextElementHandle=-1);if(this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,e.queryLooseEnvelope(this.m_queryBox),this.m_queryBox.inflateCoords(i,i),this.m_quadTree.m_root!==-1&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)){const s=e.getGeometryType();if(this.m_bLinear=s===me.enumLine,this.m_bLinear){const n=e;this.m_queryStart.assign(n.getStartXY()),this.m_queryEnd.assign(n.getEndXY()),this.m_tolerance=i}else this.m_tolerance=Number.NaN;this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root)}else this.m_nextElementHandle=-1}next(){if(this.m_quadsStack.length===0)return-1;this.m_currentElementHandle=this.m_nextElementHandle;const e=new Y,i=new Y,s=new xe;let n=!1;for(;!n;){for(;this.m_currentElementHandle!==-1;){const r=this.m_quadTree.getData_(this.m_currentElementHandle);if(s.setCoords({env2D:this.m_quadTree.getBoundingBoxValue_(r)}),s.isIntersecting(this.m_queryBox)){if(!this.m_bLinear){n=!0;break}if(e.setCoordsPoint2D(this.m_queryStart),i.setCoordsPoint2D(this.m_queryEnd),s.inflateCoords(this.m_tolerance,this.m_tolerance),s.clipLine(e,i)>0){n=!0;break}}this.m_currentElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle)}if(this.m_currentElementHandle===-1){const r=this.m_quadsStack.at(-1),o=this.m_extentsStack.at(-1);zo.setChildExtents_(o,this.m_childExtents),this.m_quadsStack.pop(),this.m_extentsStack.pop();for(let l=0;l<4;l++){const u=this.m_quadTree.getChild_(r,l);if(u!==-1&&this.m_quadTree.getSubTreeElementCount(u)>0&&this.m_childExtents[l].isIntersecting(this.m_queryBox))if(this.m_bLinear){e.setCoordsPoint2D(this.m_queryStart),i.setCoordsPoint2D(this.m_queryEnd);const f=new xe;f.setCoords({env2D:this.m_childExtents[l]}),f.inflateCoords(this.m_tolerance,this.m_tolerance),f.clipLine(e,i)>0&&(this.m_quadsStack.push(u),this.m_extentsStack.push(this.m_childExtents[l].clone()))}else this.m_quadsStack.push(u),this.m_extentsStack.push(this.m_childExtents[l].clone())}if(this.m_quadsStack.length===0)return-1;this.m_currentElementHandle=this.m_quadTree.getFirstElement_(this.m_quadsStack.at(-1))}}return this.m_nextElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle),this.m_currentElementHandle}clone(){return K(0),{}}}class ute{constructor(e){this.m_bucketSort=new ad,this.m_sortedHandles=new Ns(0),this.m_index=-1,this.m_quadTreeIteratorImpl=e}resetIterator(e,i){this.m_quadTreeIteratorImpl.resetIterator(e,i),this.m_sortedHandles.resize(0),this.m_index=-1}next(){if(this.m_index===-1){let e=-1;for(;(e=this.m_quadTreeIteratorImpl.next())!==-1;)this.m_sortedHandles.add(e);const i=this,s={userSort(n,r,o){o.sort(n,r,(l,u)=>i.m_quadTreeIteratorImpl.m_quadTree.getElement(l)-i.m_quadTreeIteratorImpl.m_quadTree.getElement(u))},getValue:n=>i.m_quadTreeIteratorImpl.m_quadTree.getElement(n)};this.m_bucketSort.sort(this.m_sortedHandles,0,this.m_sortedHandles.size(),s)}return this.m_index===this.m_sortedHandles.size()-1?-1:(this.m_index++,this.m_sortedHandles.read(this.m_index))}clone(){return K(0),{}}}class Vv{constructor(e=!1){this.m_bNotifyOnActions=e}onDelete(e){}onSet(e){}onEndSearch(e){}onAddUniqueElementFailed(e){}onDeleteImpl(e,i){this.m_bNotifyOnActions&&this.onDelete(e.getElement(i))}onSetImpl(e,i){this.m_bNotifyOnActions&&this.onSet(e.getElement(i))}onAddUniqueElementFailedImpl(e){this.m_bNotifyOnActions&&this.onAddUniqueElementFailed(e)}onEndSearchImpl(e){this.m_bNotifyOnActions&&this.onEndSearch(e)}}class jt{static st_nullNode(){return-1}constructor(){this.m_defaultTreap=-1,this.m_random=124234251,this.m_comparator=null,this.m_treapData=new Yt(7),this.m_treapCount=0,this.m_maxDepthEver=0,this.m_bBalancing=!0}setComparator(e){this.m_comparator=e}getComparator(){return this.m_comparator}disableBalancing(){this.m_bBalancing=!1}enableBalancing(){this.m_bBalancing||(K(this.m_treapCount<=1),this.rebalance(-1),this.m_bBalancing=!0)}isAutoBalancing(){return this.m_bBalancing}rebalance(e){if(this.m_bBalancing||(e===-1&&(e=this.m_defaultTreap),this.size(e)===0))return;const i=[];for(let s=this.getFirst(e);s!==-1;s=this.getNext(s))i.push(s),this.setParent_(s,-1),this.setRight_(s,-1),this.setLeft_(s,-1);this.setRoot_(-1,e),this.setFirst_(-1,e),this.setLast_(-1,e),this.setSize_(0,e),this.m_bBalancing=!0;for(const s of i)this.addBiggestElement_(s,e);this.m_bBalancing=!1}setCapacity(e){this.m_treapData.setCapacity(e)}createTreap(e){const i=this.m_treapData.newElement();return this.setSize_(0,i),this.setTreapData_(e,i),this.m_treapCount++,i}deleteTreap(e){this.m_treapData.deleteElement(e),this.m_treapCount--}addElement(e,i=-1){return i===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap),this.addElement_(e,0,i)}addUniqueElement(e,i=-1){return i===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap),this.addElement_(e,1,i)}addBiggestElement(e,i=-1){i===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap);const s=this.newNode_(e);return this.addBiggestElement_(s,i),s}addElementAtPosition(e,i,s,n,r,o=-1){if(o===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),o=this.m_defaultTreap),this.getRoot_(o)===jt.st_nullNode()){const A=this.newNode_(s);return this.setRoot_(A,o),this.addToList_(-1,A,o),A}let l,u,f,y,_;if(r?(l=i!==jt.st_nullNode()?this.m_comparator.compare(this,s,i):-1,u=e!==jt.st_nullNode()?this.m_comparator.compare(this,s,e):1):(l=-1,u=1),n&&(l===0||u===0)){this.m_comparator.onAddUniqueElementFailedImpl(s);const A=l===0?i:e;return this.setDuplicateElement_(A,o),-1}_=i!==jt.st_nullNode()&&e!==jt.st_nullNode()?this.m_random>o2(this.m_random)>>1:i!==jt.st_nullNode(),_?(y=l,f=i):(y=u,f=e);let x=-1,S=-1,P=!0;for(;;){if(y<0){const A=this.getLeft(f);if(A===jt.st_nullNode()){S=f,x=this.newNode_(s),this.setLeft_(f,x),this.setParent_(x,f);break}f=A}else{const A=this.getRight(f);if(A===jt.st_nullNode()){S=this.getNext(f),x=this.newNode_(s),this.setRight_(f,x),this.setParent_(x,f);break}f=A}P&&(y*=-1,P=!1)}return this.bubbleUp_(x),this.getParent(x)===jt.st_nullNode()&&this.setRoot_(x,o),this.addToList_(S,x,o),x}replaceElementAtPosition(e,i,s,n,r=-1){if(n){const o=this.getNext(e);let l=-1;o!==jt.st_nullNode()&&(l=this.m_comparator.compare(this,i,o));const u=this.getPrev(e);let f=-1;if(u!==jt.st_nullNode()&&(f=this.m_comparator.compare(this,i,u)),s&&(l===0||f===0)){this.m_comparator.onAddUniqueElementFailedImpl(i);const y=l===0?o:u;return r===jt.st_nullNode()&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),r=this.m_defaultTreap),this.setDuplicateElement_(y,r),-1}}return this.setElement_(e,i),e}getDuplicateElement(e=-1){return e===-1?this.getDuplicateElement_(this.m_defaultTreap):this.getDuplicateElement_(e)}deleteNode(e,i=-1){this.m_comparator&&this.m_comparator.onDeleteImpl(this,e),i===-1&&(i=this.m_defaultTreap),this.m_bBalancing?this.deleteNode_(e,i):this.unbalancedDelete_(e,i)}search(e,i=-1){let s=this.getRoot(i);for(;s!==jt.st_nullNode();){const n=this.m_comparator.compare(this,e,s);if(!n)return s;s=n<0?this.getLeft(s):this.getRight(s)}return this.m_comparator.onEndSearchImpl(e),jt.st_nullNode()}searchLowerBound(e,i=-1){let s=this.getRoot(i),n=-1;for(;s!==jt.st_nullNode();){const r=e.compare(this,s);if(!r)return s;r<0?s=this.getLeft(s):(n=s,s=this.getRight(s))}return n}searchUpperBound(e,i=-1){let s=this.getRoot(i),n=-1;for(;s!==jt.st_nullNode();){const r=e.compare(this,s);if(!r)return s;r<0?(n=s,s=this.getLeft(s)):s=this.getRight(s)}return n}getElement(e){return this.m_treapData.getField(e,3)}getLeft(e){return this.m_treapData.getField(e,0)}getRight(e){return this.m_treapData.getField(e,1)}getParent(e){return this.m_treapData.getField(e,2)}getNext(e){return this.m_treapData.getField(e,6)}getPrev(e){return this.m_treapData.getField(e,5)}getFirst(e=-1){return e===-1?this.getFirst_(this.m_defaultTreap):this.getFirst_(e)}getLast(e=-1){return e===-1?this.getLast_(this.m_defaultTreap):this.getLast_(e)}getTreapData(e=-1){return e===-1?this.getTreapData_(this.m_defaultTreap):this.getTreapData_(e)}setElement(e,i){this.m_comparator!==null&&this.m_comparator.onSetImpl(this,e),this.setElement_(e,i)}getRoot(e=-1){return e===-1?this.getRoot_(this.m_defaultTreap):this.getRoot_(e)}clear(){this.m_treapData.deleteAll(!1),this.m_defaultTreap=jt.st_nullNode(),this.m_treapCount=0,this.m_maxDepthEver=0}addToList_(e,i,s){let n;e!==-1?(n=this.getPrev(e),this.setPrev_(e,i)):n=this.getLast_(s),this.setPrev_(i,n),n!==-1&&this.setNext_(n,i),this.setNext_(i,e),e===this.getFirst_(s)&&this.setFirst_(i,s),e===-1&&this.setLast_(i,s),this.setSize_(this.getSize_(s)+1,s)}size(e=-1){return e===-1?this.getSize_(this.m_defaultTreap):this.getSize_(e)}getMaxDepth(e=-1){return this.getMaxDepthHelper_(this.getRoot(e))}getMaxDepthEver(){return this.m_maxDepthEver}static st_isValidNode(e){return Yt.isValidElement(e)}dbgCheck_(e){K(0)}getPriority_(e){return this.m_treapData.getField(e,4)}bubbleDown_(e){let i=this.getLeft(e),s=this.getRight(e);const n=this.getPriority_(e);for(;i!==jt.st_nullNode()||s!==jt.st_nullNode();){const r=i!==jt.st_nullNode()?this.getPriority_(i):ya(),o=s!==jt.st_nullNode()?this.getPriority_(s):ya();if(n<=Math.min(r,o))return;r<=o?this.rotateRight_(i):this.rotateLeft_(e),i=this.getLeft(e),s=this.getRight(e)}}bubbleUp_(e){if(!this.m_bBalancing)return;const i=this.getPriority_(e);let s=this.getParent(e);for(;s!==jt.st_nullNode()&&this.getPriority_(s)>i;)this.getLeft(s)===e?this.rotateRight_(e):this.rotateLeft_(s),s=this.getParent(e)}rotateLeft_(e){const i=e,s=this.getRight(e);let n;this.setParent_(s,this.getParent(i)),this.setParent_(i,s),n=this.getLeft(s),this.setRight_(i,n),n!==jt.st_nullNode()&&this.setParent_(n,i),this.setLeft_(s,i),n=this.getParent(s),n!==jt.st_nullNode()&&(this.getLeft(n)===i?this.setLeft_(n,s):this.setRight_(n,s))}rotateRight_(e){const i=this.getParent(e),s=e;let n;this.setParent_(s,this.getParent(i)),this.setParent_(i,s),n=this.getRight(s),this.setLeft_(i,n),n!==jt.st_nullNode()&&this.setParent_(n,i),this.setRight_(s,i),n=this.getParent(s),n!==jt.st_nullNode()&&(this.getLeft(n)===i?this.setLeft_(n,s):this.setRight_(n,s))}setParent_(e,i){this.m_treapData.setField(e,2,i)}setLeft_(e,i){this.m_treapData.setField(e,0,i)}setRight_(e,i){this.m_treapData.setField(e,1,i)}setPriority_(e,i){this.m_treapData.setField(e,4,i)}setPrev_(e,i){this.m_treapData.setField(e,5,i)}setNext_(e,i){this.m_treapData.setField(e,6,i)}setRoot_(e,i){this.m_treapData.setField(i,0,e)}setFirst_(e,i){this.m_treapData.setField(i,1,e)}setLast_(e,i){this.m_treapData.setField(i,2,e)}setDuplicateElement_(e,i){this.m_treapData.setField(i,3,e)}setSize_(e,i){this.m_treapData.setField(i,4,e)}setTreapData_(e,i){this.m_treapData.setField(i,5,e)}getRoot_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,0)}getFirst_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,1)}getLast_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,2)}getDuplicateElement_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,3)}getSize_(e){return e===-1?0:this.m_treapData.getField(e,4)}getTreapData_(e){return this.m_treapData.getField(e,5)}newNode_(e){const i=this.m_treapData.newElement();return this.setPriority_(i,this.generatePriority_()),this.setElement_(i,e),i}freeNode_(e,i){e!==jt.st_nullNode()&&this.m_treapData.deleteElement(e)}generatePriority_(){return this.m_random=o2(this.m_random),this.m_random&ya()>>1}maxPriority(){return K(0),0}getMaxDepthHelper_(e){return e===jt.st_nullNode()?0:1+Math.max(this.getMaxDepthHelper_(this.getLeft(e)),this.getMaxDepthHelper_(this.getRight(e)))}addElement_(e,i,s){if(this.getRoot(s)===jt.st_nullNode()){const u=this.newNode_(e);return this.setRoot_(u,s),this.addToList_(-1,u,s),this.m_maxDepthEver=Math.max(this.m_maxDepthEver,1),u}let n=this.getRoot_(s),r=-1,o=-1,l=1;for(;;){const u=i===-1?1:this.m_comparator.compare(this,e,n);if(u<0){const f=this.getLeft(n);if(f===jt.st_nullNode()){o=n,r=this.newNode_(e),this.setLeft_(n,r),this.setParent_(r,n);break}n=f}else{if(i===1&&u===0)return this.m_comparator.onAddUniqueElementFailedImpl(e),this.setDuplicateElement_(n,s),-1;const f=this.getRight(n);if(f===jt.st_nullNode()){o=this.getNext(n),r=this.newNode_(e),this.setRight_(n,r),this.setParent_(r,n);break}n=f}l++}return this.bubbleUp_(r),this.getParent(r)===jt.st_nullNode()&&this.setRoot_(r,s),this.addToList_(o,r,s),this.m_maxDepthEver=Math.max(l,this.m_maxDepthEver),r}removeFromList_(e,i){const s=this.getPrev(e),n=this.getNext(e);s!==-1?this.setNext_(s,n):this.setFirst_(n,i),n!==-1?this.setPrev_(n,s):this.setLast_(s,i),this.setSize_(this.getSize_(i)-1,i)}unbalancedDelete_(e,i){this.removeFromList_(e,i);let s=this.getLeft(e),n=this.getRight(e),r=this.getParent(e),o=e;if(s!==-1&&n!==-1){let u;this.m_random=o2(this.m_random),u=this.m_random>ya()>>1?this.getNext(e):this.getPrev(e);const f=this.getParent(u)===e;this.m_treapData.swapField(e,u,0),this.m_treapData.swapField(e,u,1),this.m_treapData.swapField(e,u,2),r!==-1?this.getLeft(r)===e?this.setLeft_(r,u):this.setRight_(r,u):this.setRoot_(u,i),f?(s===u?(this.setLeft_(u,e),this.setParent_(n,u)):n===u&&(this.setRight_(u,e),this.setParent_(s,u)),this.setParent_(e,u),r=u):(this.setParent_(s,u),this.setParent_(n,u),r=this.getParent(e),o=u),s=this.getLeft(e),n=this.getRight(e),s!==-1&&this.setParent_(s,e),n!==-1&&this.setParent_(n,e)}const l=s!==-1?s:n;r===-1?this.setRoot_(l,i):this.getLeft(r)===o?this.setLeft_(r,l):this.setRight_(r,l),l!==-1&&this.setParent_(l,r),this.freeNode_(e,i)}deleteNode_(e,i){this.setPriority_(e,ya());let s=jt.st_nullNode(),n=jt.st_nullNode();const r=this.getRoot_(i),o=r===e;if(o&&(s=this.getLeft(r),n=this.getRight(r),s===jt.st_nullNode()&&n===jt.st_nullNode()))return this.removeFromList_(r,i),this.freeNode_(r,i),void this.setRoot_(jt.st_nullNode(),i);this.bubbleDown_(e);const l=this.getParent(e);l!==jt.st_nullNode()&&(this.getLeft(l)===e?this.setLeft_(l,jt.st_nullNode()):this.setRight_(l,jt.st_nullNode())),this.removeFromList_(e,i),this.freeNode_(e,i),o&&this.setRoot_(s===jt.st_nullNode()||this.getParent(s)!==jt.st_nullNode()?n:s,i)}setElement_(e,i){this.m_treapData.setField(e,3,i)}addBiggestElement_(e,i){if(this.getRoot_(i)===jt.st_nullNode())return this.setRoot_(e,i),void this.addToList_(-1,e,i);const s=this.getLast_(i);this.setRight_(s,e),this.setParent_(e,s),this.bubbleUp_(e),this.getParent(e)===jt.st_nullNode()&&this.setRoot_(e,i),this.addToList_(-1,e,i)}}class to{constructor(e){this.m_lists=new Yt(6),this.m_listOfLists=to.st_nullNode(),e===void 0?(this.m_listNodes=new Yt(3),this.m_bStoreListIndexWithNode=!1):(this.m_listNodes=new Yt(e?4:3),this.m_bStoreListIndexWithNode=e)}freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){K(0)}newList_(){return this.m_lists.newElement()}setPrev_(e,i){this.m_listNodes.setField(e,1,i)}setNext_(e,i){this.m_listNodes.setField(e,2,i)}setData_(e,i){K(0)}setList_(e,i){return this.m_listNodes.setField(e,3,i)}setListSize_(e,i){this.m_lists.setField(e,4,i)}setNextList_(e,i){K(0)}setPrevList_(e,i){this.m_lists.setField(e,2,i)}createList(e){const i=this.newList_();return this.m_lists.setField(i,3,this.m_listOfLists),this.m_lists.setField(i,4,0),this.m_lists.setField(i,5,e),this.m_listOfLists!==to.st_nullNode()&&this.setPrevList_(this.m_listOfLists,i),this.m_listOfLists=i,i}deleteList(e){this.clear(e);const i=this.m_lists.getField(e,2),s=this.m_lists.getField(e,3);return i!==to.st_nullNode()?this.setNextList_(i,s):this.m_listOfLists=s,s!==to.st_nullNode()&&this.setPrevList_(s,i),this.freeList_(e),s}reserveLists(e){K(0)}getListData(e){return this.m_lists.getField(e,5)}getList(e){return K(0),0}setListData(e,i){this.m_lists.setField(e,5,i)}addElement(e,i){return this.insertElement(e,-1,i)}insertElement(e,i,s){const n=this.newNode_();let r=-1;if(i!==to.st_nullNode()&&(r=this.getPrev(i),this.setPrev_(i,n)),this.setNext_(n,i),r!==to.st_nullNode()&&this.setNext_(r,n),i===this.m_lists.getField(e,0)&&this.m_lists.setField(e,0,n),i===to.st_nullNode()){const o=this.m_lists.getField(e,1);this.setPrev_(n,o),o!==-1&&this.setNext_(o,n),this.m_lists.setField(e,1,n)}return this.setData(n,s),this.setListSize_(e,this.getListSize(e)+1),this.m_bStoreListIndexWithNode&&this.setList_(n,e),n}deleteElement(e,i){const s=this.getPrev(i),n=this.getNext(i);return s!==to.st_nullNode()?this.setNext_(s,n):this.m_lists.setField(e,0,n),n!==to.st_nullNode()?this.setPrev_(n,s):this.m_lists.setField(e,1,s),this.freeNode_(i),this.setListSize_(e,this.getListSize(e)-1),n}reserveNodes(e){this.m_listNodes.setCapacity(e)}getData(e){return this.m_listNodes.getField(e,0)}getElement(e){return this.getData(e)}setData(e,i){this.m_listNodes.setField(e,0,i)}getNext(e){return this.m_listNodes.getField(e,2)}getPrev(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getLast(e){return this.m_lists.getField(e,1)}static st_nullNode(){return-1}clear(e){if(e!==void 0){let i=this.getLast(e);for(;i!==to.st_nullNode();){const s=i;i=this.getPrev(s),this.freeNode_(s)}return this.m_lists.setField(e,0,-1),this.m_lists.setField(e,1,-1),void this.setListSize_(e,0)}for(let i=this.getFirstList();i!==-1;)i=this.deleteList(i)}isEmpty(e){return K(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getListSize(e){return this.m_lists.getField(e,4)}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}class CJe extends Vv{constructor(e){super(),this.m_intervalTree=e}compare(e,i,s){const n=e.getElement(s),r=this.m_intervalTree.getValue_(i),o=this.m_intervalTree.getValue_(n);return r<o?-1:r===o?va.isLeft_(i)&&va.isRight_(n)?-1:va.isLeft_(n)&&va.isRight_(i)?1:0:1}}class va{constructor(e){this.m_bEnvelopesRef=!1,this.m_intervals=[],this.m_envelopesRef=null,this.m_intervalNodes=new Yt(3),this.m_intervalHandles=[],this.m_endIndicesUnique=[],this.m_cCount=-1,this.m_root=-1,this.m_bSortIntervals=!1,this.m_bConstructing=!1,this.m_bConstructionEnded=!1,this.m_bOfflineDynamic=e,this.m_tertiaryNodes=new Yt(this.m_bOfflineDynamic?5:4),this.m_secondaryTreaps=new jt,this.m_secondaryTreaps.setComparator(new CJe(this)),this.m_secondaryLists=new to}addEnvelopesRef(e){this.reset_(!0,!0),this.m_bEnvelopesRef=!0,this.m_envelopesRef=e,this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_envelopesRef.length)}startConstruction(){this.reset_(!0,!1)}addInterval(e){this.m_bConstructing||bn(""),this.m_intervals.push(e.clone())}addIntervalCoords(e,i){K(0)}endConstruction(){this.m_bConstructing||bn(""),this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_intervals.length)}insert(e){if(this.m_bOfflineDynamic&&this.m_bConstructionEnded||bn(""),this.m_root===-1){const r=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;if(this.m_bSortIntervals){const o=new Ns(0);this.querySortedEndPointIndices_(o),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(o),this.m_intervalHandles.length=r,this.m_intervalHandles.fill(-1),this.m_bSortIntervals=!1}else this.m_intervalHandles.fill(-1,0,r);this.m_root=this.createRoot_()}const i=this.insertIntervalEnd_(e<<1,this.m_root),s=this.getSecondaryFromInterval_(i),n=this.m_secondaryTreaps.addElement(1+(e<<1),s);this.setRightEnd_(i,n),this.m_intervalHandles[e]=i,this.m_cCount++}remove(e){this.m_bOfflineDynamic&&this.m_bConstructionEnded||bn("");const i=this.m_intervalHandles[e];let s;i===-1&&Je("the interval does not exist in the interval tree"),this.m_intervalHandles[e]=-1,this.m_cCount--;let n=this.getSecondaryFromInterval_(i),r=-1;r=this.m_secondaryTreaps.getTreapData(n),this.m_secondaryTreaps.deleteNode(this.getLeftEnd_(i),n),this.m_secondaryTreaps.deleteNode(this.getRightEnd_(i),n),s=this.m_secondaryTreaps.size(n),s===0&&(this.m_secondaryTreaps.deleteTreap(n),this.setSecondaryToTertiary_(r,-1)),this.m_intervalNodes.deleteElement(i);let o=this.getPptr_(r),l=this.getLptr_(r),u=this.getRptr_(r);for(;!(s>0||r===this.m_root||l!==-1&&u!==-1);)r===this.getLptr_(o)?l!==-1?(this.setLptr_(o,l),this.setPptr_(l,o),this.setLptr_(r,-1),this.setPptr_(r,-1)):u!==-1?(this.setLptr_(o,u),this.setPptr_(u,o),this.setRptr_(r,-1),this.setPptr_(r,-1)):(this.setLptr_(o,-1),this.setPptr_(r,-1)):l!==-1?(this.setRptr_(o,l),this.setPptr_(l,o),this.setLptr_(r,-1),this.setPptr_(r,-1)):u!==-1?(this.setRptr_(o,u),this.setPptr_(u,o),this.setRptr_(r,-1),this.setPptr_(r,-1)):(this.setRptr_(o,-1),this.setPptr_(r,-1)),this.m_tertiaryNodes.deleteElement(r),r=o,n=this.getSecondaryFromTertiary_(r),s=n!==-1?this.m_secondaryTreaps.size(n):0,l=this.getLptr_(r),u=this.getRptr_(r),o=this.getPptr_(r)}size(){return this.m_cCount}getIteratorQuery(e,i){return e instanceof Ze?new hte(this,e,i):(K(0),{})}getIterator(){return new hte(this)}querySortedEndPointIndices_(e){const i=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;for(let s=0;s<2*i;s++)e.add(s);this.sortEndIndices_(e,0,2*i)}querySortedDuplicatesRemoved_(e){let i=Number.NaN;for(let s=0;s<e.size();s++){const n=e.read(s),r=this.getValue_(n);r!==i&&(this.m_endIndicesUnique.push(n),i=r)}}insertIntervalsStatic_(){const e=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length,i=new Ns(0);this.querySortedEndPointIndices_(i),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(i),this.m_intervalNodes.setCapacity(e),this.m_secondaryLists.reserveNodes(2*e);const s=Vi(e,-1);this.m_root=this.createRoot_();for(let n=0;n<i.size();n++){const r=i.read(n);let o=s[r>>1];if(o!==-1){const l=this.getSecondaryFromInterval_(o);this.setRightEnd_(o,this.m_secondaryLists.addElement(l,r))}else o=this.insertIntervalEnd_(r,this.m_root),s[r>>1]=o}}createRoot_(){const e=this.calculateDiscriminantIndex1_(0,this.m_endIndicesUnique.length-1);return this.createTertiaryNode_(e)}insertIntervalEnd_(e,i){let s=-1,n=i,r=-1,o=-1,l=0,u=this.m_endIndicesUnique.length-1,f=0;const y=e>>1;let _=Number.NaN,x=Number.NaN,S=!0;const P=this.getMin_(y),A=this.getMax_(y);let k=-1;for(;S;){f=l+(u-l>>1),k=this.calculateDiscriminantIndex1_(l,u);const $=this.getDiscriminantFromIndex1_(k);if(A<$){if(n!==-1){if(k===this.getDiscriminantIndex1_(n))s=n,_=$,n=this.getLptr_(n),x=n!==-1?this.getDiscriminant_(n):Number.NaN;else if(x>$){const V=this.createTertiaryNode_(k);$<_?this.setLptr_(s,V):this.setRptr_(s,V),this.setRptr_(V,n),this.m_bOfflineDynamic&&(this.setPptr_(V,s),this.setPptr_(n,V)),s=V,_=$,n=-1,x=Number.NaN}}u=f;continue}if(P>$){if(n!==-1){if(k===this.getDiscriminantIndex1_(n))s=n,_=$,n=this.getRptr_(n),x=n!==-1?this.getDiscriminant_(n):Number.NaN;else if(x<$){const V=this.createTertiaryNode_(k);$<_?this.setLptr_(s,V):this.setRptr_(s,V),this.setLptr_(V,n),this.m_bOfflineDynamic&&(this.setPptr_(V,s),this.setPptr_(n,V)),s=V,_=$,n=-1,x=Number.NaN}}l=f+1;continue}let F=-1;F=n===-1||k!==this.getDiscriminantIndex1_(n)?this.createTertiaryNode_(k):n,r=this.getSecondaryFromTertiary_(F),r===-1&&(r=this.createSecondary_(F),this.setSecondaryToTertiary_(F,r));const G=this.addEndIndex_(r,e);o=this.createIntervalNode_(),this.setSecondaryToInterval_(o,r),this.setLeftEnd_(o,G),n!==-1&&k===this.getDiscriminantIndex1_(n)||($<_?this.setLptr_(s,F):this.setRptr_(s,F),this.m_bOfflineDynamic&&this.setPptr_(F,s),n!==-1&&(x<$?this.setLptr_(F,n):this.setRptr_(F,n),this.m_bOfflineDynamic&&this.setPptr_(n,F))),S=!1;break}return o}createTertiaryNode_(e){const i=this.m_tertiaryNodes.newElement();return this.setDiscriminantIndex1_(i,e),i}createSecondary_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.createTreap(e):this.m_secondaryLists.createList(e)}createIntervalNode_(){return this.m_intervalNodes.newElement()}reset(){this.m_bOfflineDynamic&&this.m_bConstructionEnded||bn(""),this.reset_(!1,this.m_bEnvelopesRef)}reset_(e,i){e?(this.m_bEnvelopesRef=!1,this.m_envelopesRef=null,this.m_bSortIntervals=!0,this.m_bConstructing=!0,this.m_bConstructionEnded=!1,this.m_endIndicesUnique.length=0,i?(this.m_intervals.length=0,this.m_bEnvelopesRef=!0):this.m_intervals.length=0):this.m_bSortIntervals=!1,this.m_bOfflineDynamic?this.m_secondaryTreaps.clear():this.m_secondaryLists.clear(),this.m_intervalNodes.deleteAll(!1),this.m_tertiaryNodes.deleteAll(!1),this.m_root=-1,this.m_cCount=0}getDiscriminant_(e){const i=this.getDiscriminantIndex1_(e);return this.getDiscriminantFromIndex1_(i)}getDiscriminantFromIndex1_(e){if(e===-1)return Number.NaN;if(e>0){const n=e-2,r=this.m_endIndicesUnique[n],o=this.m_endIndicesUnique[n+1];return .5*(this.getValue_(r)+this.getValue_(o))}const i=-e-2,s=this.m_endIndicesUnique[i];return this.getValue_(s)}calculateDiscriminantIndex1_(e,i){let s;return e<i?s=e+(i-e>>1)+2:s=-(e+2),s}setDiscriminantIndex1_(e,i){this.m_tertiaryNodes.setField(e,0,i)}setSecondaryToTertiary_(e,i){this.m_tertiaryNodes.setField(e,1,i)}setLptr_(e,i){this.m_tertiaryNodes.setField(e,2,i)}setRptr_(e,i){this.m_tertiaryNodes.setField(e,3,i)}setPptr_(e,i){this.m_tertiaryNodes.setField(e,4,i)}setSecondaryToInterval_(e,i){this.m_intervalNodes.setField(e,0,i)}addEndIndex_(e,i){let s=-1;return s=this.m_bOfflineDynamic?this.m_secondaryTreaps.addElement(i,e):this.m_secondaryLists.addElement(e,i),s}setLeftEnd_(e,i){this.m_intervalNodes.setField(e,1,i)}setRightEnd_(e,i){this.m_intervalNodes.setField(e,2,i)}getFirst_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getFirst(e):this.m_secondaryLists.getFirst(e)}getLast_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getLast(e):this.m_secondaryLists.getLast(e)}static isLeft_(e){return!(1&e)}static isRight_(e){return!(1&~e)}getDiscriminantIndex1_(e){return this.m_tertiaryNodes.getField(e,0)}getSecondaryFromTertiary_(e){return this.m_tertiaryNodes.getField(e,1)}getLptr_(e){return this.m_tertiaryNodes.getField(e,2)}getRptr_(e){return this.m_tertiaryNodes.getField(e,3)}getPptr_(e){return this.m_tertiaryNodes.getField(e,4)}getSecondaryFromInterval_(e){return this.m_intervalNodes.getField(e,0)}getLeftEnd_(e){return this.m_intervalNodes.getField(e,1)}getRightEnd_(e){return this.m_intervalNodes.getField(e,2)}getMin_(e){return this.m_bEnvelopesRef?this.m_envelopesRef[e].xmin:this.m_intervals[e].vmin}getMax_(e){return this.m_bEnvelopesRef?this.m_envelopesRef[e].xmax:this.m_intervals[e].vmax}sortEndIndices_(e,i,s){const n=this,r={userSort(o,l,u){n.sortEndIndicesHelper_(u,o,l)},getValue:o=>n.getValue_(o)};new ad().sort(e,i,s,r)}sortEndIndicesHelper_(e,i,s){e.sort(i,s,(n,r)=>{const o=this.getValue_(n),l=this.getValue_(r);return o<l||o===l&&va.isLeft_(n)&&va.isRight_(r)?-1:1})}getValue_(e){if(!this.m_bEnvelopesRef){const s=this.m_intervals[e>>1];return va.isLeft_(e)?s.vmin:s.vmax}const i=this.m_envelopesRef[e>>1];return va.isLeft_(e)?i.xmin:i.xmax}checkValidation_(){return K(0),!1}checkValidationHelper_(e){return K(0),0}}class hte{constructor(e,i,s){this.m_query=Ze.constructEmpty(),this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_nextEndHandle=-1,this.m_tertiaryStack=[],this.m_functionIndex=0,this.m_intervalTree=e,this.m_functionStack=new Array(2),this.m_functionStack[0]=this.nullFunc_,this.m_functionStack[1]=this.nullFunc_,i!==void 0&&this.resetIterator(i,s)}nullFunc_(){return K(0),!1}resetIterator(e,i){if(typeof e=="number"){const s=new Ze;s.setCoords(e,e),this.resetIterator(s,i)}else i===void 0&&(i=0),this.m_query.vmin=e.vmin-i,this.m_query.vmax=e.vmax+i,this.m_tertiaryStack.length=0,this.m_functionIndex=0,this.m_functionStack[0]=this.initialize_}next(){if(this.m_intervalTree.m_bConstructionEnded||bn(""),this.m_functionIndex<0)return-1;for(;this.m_fi=this.m_functionStack[this.m_functionIndex],this.m_fi(););return this.m_currentEndHandle!==-1?this.getCurrentEndIndex_()>>1:-1}initialize_(){return this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_intervalTree.m_tertiaryNodes.size()>0?(this.m_functionStack[0]=this.pIn_,this.m_nextTertiaryHandle=this.m_intervalTree.m_root,!0):(this.m_functionIndex=-1,!1)}pIn_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;const e=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<e){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(s),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}if(e<this.m_query.vmin){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(s),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}this.m_functionStack[this.m_functionIndex]=this.pL_,this.m_forkedHandle=this.m_tertiaryHandle;const i=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),i!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(i),this.m_functionStack[++this.m_functionIndex]=this.all_),!0}pL_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionStack[this.m_functionIndex]=this.pR_,this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_forkedHandle),!0;if(this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle)<this.m_query.vmin){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(s),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),e!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_);const i=this.m_intervalTree.getRptr_(this.m_tertiaryHandle);return i!==-1&&this.m_tertiaryStack.push(i),!0}pR_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionStack[this.m_functionIndex]=this.pT_,!0;const e=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<e){const n=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),n!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(n),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}const i=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),i!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(i),this.m_functionStack[++this.m_functionIndex]=this.all_);const s=this.m_intervalTree.getLptr_(this.m_tertiaryHandle);return s!==-1&&this.m_tertiaryStack.push(s),!0}pT_(){if(this.m_tertiaryStack.length===0)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;this.m_tertiaryHandle=this.m_tertiaryStack.at(-1),this.m_tertiaryStack.pop();const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return e!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_),this.m_intervalTree.getLptr_(this.m_tertiaryHandle)!==-1&&this.m_tertiaryStack.push(this.m_intervalTree.getLptr_(this.m_tertiaryHandle)),this.m_intervalTree.getRptr_(this.m_tertiaryHandle)!==-1&&this.m_tertiaryStack.push(this.m_intervalTree.getRptr_(this.m_tertiaryHandle)),!0}left_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&va.isLeft_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())<=this.m_query.vmax?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}right_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&va.isRight_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())>=this.m_query.vmin?(this.m_nextEndHandle=this.getPrev_(),!1):(this.m_functionIndex--,!0)}all_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&va.isLeft_(this.getCurrentEndIndex_())?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}getNext_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getNext(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getNext(this.m_currentEndHandle)}getPrev_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getPrev(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getPrev(this.m_currentEndHandle)}getCurrentEndIndex_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getElement(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getData(this.m_currentEndHandle)}}class h5{constructor(){this.m_tolerance=0,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_intervalTreeRed=null,this.m_intervalTreeBlue=null,this.m_iteratorRed=null,this.m_iteratorBlue=null,this.m_envelopesRed=[],this.m_envelopesBlue=[],this.m_elementsRed=[],this.m_elementsBlue=[],this.m_sortedEndIndicesRed=new Ns(0),this.m_sortedEndIndicesBlue=new Ns(0),this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_queuedEnvelopes=new to,this.m_queuedIndicesRed=[],this.m_queuedIndicesBlue=[],this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_bDone=!0,this.m_function=this.nullFunc_,this.reset_()}startConstruction(){this.reset_(),this.m_bAddRedRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addEnvelope(e,i){this.m_bAddRedRed||bn(""),this.m_elementsRed.push(e),this.m_envelopesRed.push(new xe(i))}endConstruction(){this.m_bAddRedRed||bn(""),this.m_bAddRedRed=!1,this.m_envelopesRed.length>0&&(this.m_function=this.initialize_,this.m_bDone=!1)}startRedConstruction(){this.reset_(),this.m_bAddRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addRedEnvelope(e,i){this.m_bAddRed||bn(""),this.m_elementsRed.push(e),this.m_envelopesRed.push(i.clone())}endRedConstruction(){this.m_bAddRed||bn(""),this.m_bAddRed=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeBlue_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeRed_),this.m_bDone=!1)}startBlueConstruction(){this.reset_(),this.m_bAddBlue=!0,this.m_elementsBlue.length=0,this.m_envelopesBlue.length=0}addBlueEnvelope(e,i){this.m_bAddBlue||bn(""),this.m_elementsBlue.push(e),this.m_envelopesBlue.push(i.clone())}endBlueConstruction(){this.m_bAddBlue||bn(""),this.m_bAddBlue=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeRed_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeBlue_),this.m_bDone=!1)}next(){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}getHandleA(){return this.m_envelopeHandleA}getHandleB(){return this.m_envelopeHandleB}setTolerance(e){this.m_tolerance=e}getEnvelope(e){return K(0),{}}getElement(e){return this.m_elementsRed[e]}getRedEnvelope(e){return this.m_envelopesRed[e]}getBlueEnvelope(e){return this.m_envelopesBlue[e]}getRedElement(e){return this.m_elementsRed[e]}getBlueElement(e){return this.m_elementsBlue[e]}isTop_(e){return!(1&~e)}isBottom_(e){return!(1&e)}reset_(){this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_bDone=!0}initialize_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new va(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,2*this.m_envelopesRed.length,!0),this.m_sweepIndexRed=2*this.m_envelopesRed.length,this.m_function=this.sweep_,!0}initializeRed_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new va(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_function=this.sweepRedBlue_,this.resetBlue_()}initializeBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new va(!0)),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),this.m_iteratorBlue==null&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesBlue.resize(0);for(let e=0;e<2*this.m_envelopesBlue.length;e++)this.m_sortedEndIndicesBlue.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,this.resetRed_()}initializeRedBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new va(!0)),this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new va(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_iteratorBlue===null&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesRed.resize(0),this.m_sortedEndIndicesBlue.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);for(let e=0;e<2*this.m_envelopesBlue.length;e++)this.m_sortedEndIndicesBlue.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,!0}sweep_(){const e=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),i=e>>1;if(this.isBottom_(e))return this.m_intervalTreeRed.remove(i),this.m_sweepIndexRed!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);const s=Ze.construct(this.m_envelopesRed[i].xmin,this.m_envelopesRed[i].xmax);return this.m_iteratorRed.resetIterator(s,this.m_tolerance),this.m_envelopeHandleA=i,this.m_function=this.iterate_,!0}sweepBruteForce_(){return--this.m_sweepIndexRed==-1?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_sweepIndexRed,this.m_function=this.iterateBruteForce_,!0)}sweepRedBlueBruteForce_(){return--this.m_sweepIndexRed==-1?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_envelopesBlue.length,this.m_function=this.iterateRedBlueBruteForce_,!0)}sweepRedBlue_(){const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed-1),i=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue-1),s=this.getAdjustedValue_(e,!0),n=this.getAdjustedValue_(i,!1);return s>n?this.sweepRed_():s<n?this.sweepBlue_():this.isTop_(e)?this.sweepRed_():this.isTop_(i)?this.sweepBlue_():this.sweepRed_()}sweepRed_(){const e=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),i=e>>1;if(this.isBottom_(e))return this.m_queuedListRed!==-1&&this.m_queuedIndicesRed[i]!==-1?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,this.m_queuedIndicesRed[i]),this.m_queuedIndicesRed[i]=-1):this.m_intervalTreeRed.remove(i),this.m_sweepIndexRed!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(this.m_queuedListBlue!==-1&&this.m_queuedEnvelopes.getListSize(this.m_queuedListBlue)>0){let s=this.m_queuedEnvelopes.getFirst(this.m_queuedListBlue);for(;s!==-1;){const n=this.m_queuedEnvelopes.getData(s);this.m_intervalTreeBlue.insert(n),this.m_queuedIndicesBlue[n]=-1;const r=this.m_queuedEnvelopes.getNext(s);this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,s),s=r}}if(this.m_intervalTreeBlue.size()>0){const s=Ze.construct(this.m_envelopesRed[i].xmin,this.m_envelopesRed[i].xmax);this.m_iteratorBlue.resetIterator(s,this.m_tolerance),this.m_envelopeHandleA=i,this.m_function=this.iterateBlue_}else this.m_queuedListRed===-1&&(this.m_queuedIndicesRed.length=this.m_envelopesRed.length,this.m_queuedIndicesRed.fill(-1),this.m_queuedListRed=this.m_queuedEnvelopes.createList(1)),this.m_queuedIndicesRed[i]=this.m_queuedEnvelopes.addElement(this.m_queuedListRed,i),this.m_function=this.sweepRedBlue_;return!0}sweepBlue_(){const e=this.m_sortedEndIndicesBlue.read(--this.m_sweepIndexBlue),i=e>>1;if(this.isBottom_(e))return this.m_queuedListBlue!==-1&&this.m_queuedIndicesBlue[i]!==-1?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,this.m_queuedIndicesBlue[i]),this.m_queuedIndicesBlue[i]=-1):this.m_intervalTreeBlue.remove(i),this.m_sweepIndexBlue!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(this.m_queuedListRed!==-1&&this.m_queuedEnvelopes.getListSize(this.m_queuedListRed)>0){let s=this.m_queuedEnvelopes.getFirst(this.m_queuedListRed);for(;s!==-1;){const n=this.m_queuedEnvelopes.getData(s);this.m_intervalTreeRed.insert(n),this.m_queuedIndicesRed[n]=-1;const r=this.m_queuedEnvelopes.getNext(s);this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,s),s=r}}if(this.m_intervalTreeRed.size()>0){const s=Ze.construct(this.m_envelopesBlue[i].xmin,this.m_envelopesBlue[i].xmax);this.m_iteratorRed.resetIterator(s,this.m_tolerance),this.m_envelopeHandleB=i,this.m_function=this.iterateRed_}else this.m_queuedListBlue===-1&&(this.m_queuedIndicesBlue.length=this.m_envelopesBlue.length,this.m_queuedIndicesBlue.fill(-1),this.m_queuedListBlue=this.m_queuedEnvelopes.createList(0)),this.m_queuedIndicesBlue[i]=this.m_queuedEnvelopes.addElement(this.m_queuedListBlue,i),this.m_function=this.sweepRedBlue_;return!0}iterate_(){if(this.m_envelopeHandleB=this.m_iteratorRed.next(),this.m_envelopeHandleB!==-1)return!1;const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(e),this.m_function=this.sweep_,!0}iterateRed_(){if(this.m_envelopeHandleA=this.m_iteratorRed.next(),this.m_envelopeHandleA!==-1)return!1;this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1;const e=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue)>>1;return this.m_intervalTreeBlue.insert(e),this.m_function=this.sweepRedBlue_,!0}iterateBlue_(){if(this.m_envelopeHandleB=this.m_iteratorBlue.next(),this.m_envelopeHandleB!==-1)return!1;const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(e),this.m_function=this.sweepRedBlue_,!0}iterateBruteForce_(){if(--this.m_sweepIndexBlue==-1)return this.m_function=this.sweepBruteForce_,!0;const e=this.m_envelopesRed[this.m_sweepIndexRed].clone(),i=this.m_envelopesRed[this.m_sweepIndexBlue];return e.inflateCoords(this.m_tolerance,this.m_tolerance),!e.isIntersecting(i)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}iterateRedBlueBruteForce_(){if(--this.m_sweepIndexBlue==-1)return this.m_function=this.sweepRedBlueBruteForce_,!0;const e=this.m_envelopesRed[this.m_sweepIndexRed].clone(),i=this.m_envelopesBlue[this.m_sweepIndexBlue];return e.inflateCoords(this.m_tolerance,this.m_tolerance),!e.isIntersecting(i)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}resetRed_(){return this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_intervalTreeRed.size()>0&&this.m_intervalTreeRed.reset(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_bDone=!1,!0}resetBlue_(){return this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_intervalTreeBlue.size()>0&&this.m_intervalTreeBlue.reset(),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_bDone=!1,!0}nullFunc_(){return K(0),!1}sortYEndIndices_(e,i,s,n){const r=this,o={userSort(l,u,f){r.sortYEndIndicesHelper_(f,l,u,n)},getValue:l=>r.getAdjustedValue_(l,n)};new ad().sort(e,i,s,o)}sortYEndIndicesHelper_(e,i,s,n){e.sort(i,s,(r,o)=>{const l=this.getAdjustedValue_(r,n),u=this.getAdjustedValue_(o,n);return l<u||l===u&&this.isBottom_(r)&&this.isTop_(o)?-1:1})}getAdjustedValue_(e,i){const s=.5*this.m_tolerance;if(i){const r=this.m_envelopesRed[e>>1];return this.isBottom_(e)?r.ymin-s:r.ymax+s}const n=this.m_envelopesBlue[e>>1];return this.isBottom_(e)?n.ymin-s:n.ymax+s}}var dte=_r;class Qo{constructor(e,i){this.tolerance=e!==void 0?e:Number.NaN,this.resolution=i!==void 0?i:Number.NaN}add(e){return new Qo(this.tolerance+e,this.resolution)}scale(e){return new Qo(this.tolerance*e,this.resolution*e)}total(){return this.tolerance+this.resolution}}function PJe(t,e,i,s,n){const r=s*s,o=t.sub(e),l=i.sub(e),u=o.sqrLength(),f=l.sqrLength();if(u<=r||f<=r)return!0;const y=Xi(o.crossProduct(l));return y<=r*u||y<=r*f?o.dotProduct(l)>=0:!1}function TJe(t,e,i){return s=>i===0?(s+t)*e:1*(s-t*e)/e}function bj(t,e){const i=new xe;return t.queryLooseEnvelope(i),i.mergeEnvelope2D(e),i}function W4(t,e){const i=xe.constructEmpty();t.queryLooseEnvelope(i);const s=xe.constructEmpty();return e.queryLooseEnvelope(s),i.mergeEnvelope2D(s),i}function Dge(t,e,i){const s=xe.constructEmpty();return s.setFromPoints(t,e),s7(0,null,s.calculateToleranceFromEnvelope(),i,!1)}function Kn(t,e,i){return s7(0,t,e.calculateToleranceFromEnvelope(),i,!1)}function DE(t,e,i){return s7(1,t,e.calculateToleranceFromEnvelope(),i,!1)}function fte(t,e,i){return DE(t,e.queryInterval(1,0),i)}function xl(t,e,i){const s=xe.constructEmpty();return e.queryEnvelope(s),Kn(t,s,i)}function Zg(t,e,i=!1){return s7(0,t,e.calculateToleranceFromEnvelope(),i,!0).total()}function kE(t,e,i){const s=xe.constructEmpty();return e.queryEnvelope(s),Zg(t,s,i)}function s7(t,e,i,s,n){const r=new Qo(0,0);if(e!==null&&(r.tolerance=e.getTolerance(t),(!n||s)&&e!==null)){const o=e.getResolution(t);r.resolution=o,s&&(r.resolution*=2)}return s&&(i*=4,r.tolerance*=1.01,r.resolution*=1.01),r.total()<i?new Qo(i,0):r}function Yc(t){return Math.sqrt(2)*(2*t.tolerance+t.resolution)}function kge(t){return Math.sqrt(2)*(t.tolerance+t.resolution)}function wf(t){return t>=3}function IJe(t,e){const i=[0];return t.getImpl().getIsSimple(e,i)>=3}function Nge(t,e){t.getImpl().setIsSimple(3,e)}function MJe(t,e,i,s){if(Xi(e.x-t.x)+Xi(e.y-t.y)<=i*i){const n=t.z,r=e.z;return l5(n,r,s)}return!1}function yg(t){return t>=4}function AJe(t,e){return t===me.enumPolygon?wf(e):e>=1}function DJe(t,e,i){const s=xe.constructEmpty(),n=xe.constructEmpty();t.queryLooseEnvelope(s),e.queryLooseEnvelope(n),s.inflateCoords(i,i),n.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:s}),r.intersect(n);const o=t.querySegmentIterator(),l=e.querySegmentIterator(),u=xe.constructEmpty(),f=xe.constructEmpty(),y=new h5;y.setTolerance(i);let _=!1;for(y.startRedConstruction();o.nextPath();)for(;o.hasNextSegment();)o.nextSegment().queryLooseEnvelope(u),u.isIntersecting(r)&&(_=!0,y.addRedEnvelope(o.getStartPointIndex(),u));if(y.endRedConstruction(),!_)return null;let x=!1;for(y.startBlueConstruction();l.nextPath();)for(;l.hasNextSegment();)l.nextSegment().queryLooseEnvelope(f),f.isIntersecting(r)&&(x=!0,y.addBlueEnvelope(l.getStartPointIndex(),f));return y.endBlueConstruction(),x?y:null}function kJe(t,e,i,s,n){t.getGeometryType(),e.getGeometryType();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryLooseEnvelope(r),e.queryLooseEnvelope(o),r.inflateCoords(i,i),o.inflateCoords(i,i);const l=xe.constructEmpty();l.setCoords({env2D:r}),l.intersect(o);const u=new h5;u.setTolerance(i);let f=!1;u.startRedConstruction();for(let _=0,x=t.getPathCount();_<x;_++)t.queryLoosePathEnvelope(_,r),r.isIntersecting(l)&&(f=!0,u.addRedEnvelope(_,r));if(u.endRedConstruction(),!f)return null;let y=!1;u.startBlueConstruction();for(let _=0,x=e.getPathCount();_<x;_++)e.queryLoosePathEnvelope(_,o),o.isIntersecting(l)&&(y=!0,u.addBlueEnvelope(_,o));return u.endBlueConstruction(),y?u:null}function pte(t,e,i){const s=xe.constructEmpty(),n=xe.constructEmpty();t.queryLooseEnvelope(s),e.queryEnvelope(n),s.inflateCoords(i,i),n.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:s}),r.intersect(n);const o=t.querySegmentIterator(),l=new h5;l.setTolerance(i);let u=!1;for(l.startRedConstruction();o.nextPath();)for(;o.hasNextSegment();)o.nextSegment().queryLooseEnvelope(s),s.isIntersecting(r)&&(u=!0,l.addRedEnvelope(o.getStartPointIndex(),s));if(l.endRedConstruction(),!u)return null;let f=!1;l.startBlueConstruction();for(let y=0,_=e.getPointCount();y<_;y++){const x=e.getXY(y);r.contains(x)&&(f=!0,l.addBlueEnvelope(y,xe.construct(x.x,x.y,x.x,x.y)))}return l.endBlueConstruction(),f?l:null}function NJe(t,e,i){const s=xe.constructEmpty(),n=xe.constructEmpty();t.queryEnvelope(s),e.queryEnvelope(n),s.inflateCoords(i,i),n.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:s}),r.intersect(n);const o=new h5;o.setTolerance(i);let l=!1;o.startRedConstruction();const u=new Y;for(let _=0,x=t.getPointCount();_<x;_++)t.queryXY(_,u),r.contains(u)&&(l=!0,o.addRedEnvelope(_,xe.construct(u.x,u.y,u.x,u.y)));if(o.endRedConstruction(),!l)return null;let f=!1;o.startBlueConstruction();const y=new Y;for(let _=0,x=e.getPointCount();_<x;_++)e.queryXY(_,y),r.contains(y)&&(f=!0,o.addBlueEnvelope(_,xe.construct(y.x,y.y,y.x,y.y)));return o.endBlueConstruction(),f?o:null}function $Je(t){const e=new xe;return t.queryLooseEnvelope(e),e.inflateCoords(1,1),OJe(t,e)}function OJe(t,e,i){const s=new xe;if(t.queryLooseEnvelope(s),s.isEmpty())return null;t.getGeometryType();const n=new zo(s,8);let r=-1;const o=new xe;let l=!1;do for(let u=0,f=t.getPathCount();u<f;u++)if(t.queryLoosePathEnvelope(u,o),o.isIntersecting(e)){if(r=n.insertEx(u,o,r),r===-1){l&&bt("build_quad_tree_for_paths"),s.assign(t.calculateEnvelope2D(!1)),l=!0,n.reset(s,8);break}l=!1}while(l);return n}function V2(t,e){if(!e){const u=new xe;t.queryLooseEnvelope(u);const f=new zo(u,8);let y=-1;const _=new xe,x=t.querySegmentIterator();let S=!1;for(;x.nextPath();)for(;x.hasNextSegment();){const P=x.nextSegment(),A=x.getStartPointIndex();if(P.queryLooseEnvelope(_),y=f.insertEx(A,_,y),y===-1){S&&bt(""),u.assign(t.calculateEnvelope2D(!1)),S=!0,f.reset(u,8),x.resetToFirstPath();break}}return f}const i=new xe;t.queryLooseEnvelope(i);const s=new zo(i,8);let n=-1;const r=new xe,o=t.querySegmentIterator();let l=!1;for(;o.nextPath();)for(;o.hasNextSegment();){const u=o.nextSegment(),f=o.getStartPointIndex();if(u.queryLooseEnvelope(r),r.isIntersecting(e)&&(n=s.insertEx(f,r,n),n===-1)){l&&bt(""),i.assign(t.calculateEnvelope2D(!1)),l=!0,s.reset(i,8),o.resetToFirstPath();break}}return s}function mte(t,e){if(e){const i=new zo(e,8),s=new Y,n=new xe;let r=!1;for(let o=0;o<t.getPointCount();o++)s.setCoordsPoint2D(t.getXY(o)),e.contains(s)&&(n.setCoords({pt:s}),i.insert(o,n)!==-1||(r&&bt(""),r=!0,i.reset(t.calculateEnvelope2D(),8),o=-1));return i}return K(0),null}function gte(t,e,i,s,n){let r=!1;const o=n.vmin,l=n.vmax;for(let u=i;u<e;u+=s){const f=t.read(u);f<o?(r=!0,t.write(u,o)):f>l&&(r=!0,t.write(u,l))}return r}function uz(t,e,i,s){if(!t.hasAttribute(i))return!1;const n=t.getGeometryType();if(n===me.enumGeometryCollection){const r=t,o=r.getGeometryCount();let l=0;for(let u=0;u<o;++u)l|=uz(r.getGeometry(u),e,i,s)?1:0;return!!l}if(tl(n)){const r=t,o=dte.getPersistence(i),l=dte.getComponentCount(i),u=r.getPointCount();if(o===1){const f=gte(r.getAttributeStreamRef(i),u*l,s,l,e);return f&&r.notifyModified(),f}if(o===2){const f=gte(r.getAttributeStreamRef(i),u*l,s,l,e);return f&&r.notifyModified(),f}bt("snap_coordinate not implemented")}if(n===me.enumEnvelope){const r=t,o=r.queryInterval(i,s);let l=!1;return o.vmin<e.vmin&&(l=!0,o.vmin=e.vmin),o.vmax>e.vmax&&(l=!0,o.vmax=e.vmax),l&&r.setIntervalEnvelope(i,s,o),l}if(n===me.enumPoint){const r=t;let o=r.getAttributeAsDbl(i,s),l=!1;return o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setAttributeBasic(i,s,o),l}if(Dn(n)){const r=t;let o=r.getStartAttributeAsDbl(i,s),l=!1;return o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setStartAttribute(i,s,o),o=r.getEndAttributeAsDbl(i,s),o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setEndAttribute(i,s,o),l}bt("snap_coordinate not implemented")}function RJe(t,e,i,s,n){(e<0||i<0||s<1||e+s*(i-1)+1>t.size())&&Je("Index out of bound");for(let r=e,o=e+s*(i-1)+1;r<o;r+=s)t.writeAsDbl(r,n(t.readAsDbl(r)))}function LJe(t,e){let i=o2(t);const s=e.length/So();for(let n=0;n<e.length;++n){const r=Math.trunc(i*s);i=o2(i);const o=Math.trunc(i*s),l=e[r];e[r]=e[o],e[o]=l}}function FJe(t,e,i){const s=t.getDescription().getTotalComponentCount();K(s<=i),t.setX(e[0]),t.setY(e[1]),dn(t.getAttributeArray(),e,0,2,s-2)}var Gn=_r;const $ge="can not assign an empty point to a vertex";class Oge{constructor(e){if(this.m_accelerators=null,e!==void 0&&e.move)this.m_description=e.move.m_description,e.move.m_description=Ho(),this.m_vertexAttributes=e.move.m_vertexAttributes,e.move.m_vertexAttributes=new X4,this.m_envelopeData=e.move.m_envelopeData,e.move.m_envelopeData=new Iu,this.m_pointCount=e.move.m_pointCount,this.m_reservedPointCount=e.move.m_reservedPointCount,this.m_flags=e.move.m_flags,this.m_bFillRule=e.move.m_bFillRule,this.m_bPathStarted=e.move.m_bPathStarted,this.m_bPolygon=e.move.m_bPolygon,this.m_simpleTolerance=e.move.m_simpleTolerance;else{const i=e!==void 0&&e.vd?e.vd:Ho();this.m_description=i,this.m_vertexAttributes=new X4,this.m_envelopeData=new Iu,this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_flags=4063,this.m_bFillRule=this.m_bPathStarted=this.m_bPolygon=!1,this.m_simpleTolerance=0,e!==void 0&&e.copy&&e.copy.copyTo(this)}}equalsBase(e,i){if(!tl(e.getGeometryType()))return!1;const s=e;if(this===s)return!0;if(!this.m_description.equals(s.getDescription())||this.isEmptyImpl()!==s.isEmptyImpl())return!1;if(this.isEmptyImpl())return!0;const n=this.getPointCount();if(n!==s.getPointCount())return!1;for(let r=0;r<this.m_description.getAttributeCount();r++){const o=this.m_description.getSemantics(r),l=this.getAttributeStreamRef(o),u=s.getAttributeStreamRef(o),f=Gn.getComponentCount(o);if(!l.equals(u,0,n*f,i))return!1}if(i){if(!this.equalsImplTol(e,i))return!1}else if(!this.equalsImpl(e))return!1;return!0}vertexCount(){return K(0),0}transformAttribute(e,i,s,n,r){this.addAttribute(e),this.isEmpty()||s===0&&n===1||(RJe(this.getAttributeStreamRef(e),i,this.getPointCount(),Gn.getComponentCount(e),TJe(s,n,r)),this.notifyModified())}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}mergeVertexDescriptionImpl(e){const i=c5(this.getDescription(),e);this.assignVertexDescription(i)}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=u5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=_j(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){const e=Ho();e!==this.m_description&&this.assignVertexDescription(e)}getAttributeStreamRef(e){this.throwIfEmpty(),this.m_description.hasAttribute(e)||Je("AttributeStream : Geometry does not have the attribute");const i=this.m_description.getAttributeIndex(e);return this.m_vertexAttributes.get(i)}setAttributeStreamRef(e,i){i||Je("stream"),i&&Gn.getPersistence(e)!==i.getPersistence()&&Je(""),this.addAttribute(e);const s=this.m_description.getAttributeIndex(e);this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_vertexAttributes.set(s,i),this.notifyModifiedFlags(2001)}notifyModifiedFlags(e){e===65535&&(this.m_reservedPointCount=-1,this.notifyModifiedAllImpl()),this.setDirtyFlagProtected(e,!0),this.clearAccelerators(),32&e&&this.verifyAllStreamsAfterSizeChange()}notifyModified(){this.notifyModifiedFlags(2001)}getPointCount(){return this.m_pointCount}getPointByVal(e,i){const s=i;s.assignVertexDescription(this.m_description);for(let n=0;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n);for(let o=0,l=Gn.getComponentCount(r);o<l;o++){const u=this.m_vertexAttributes.get(n).readAsDbl(l*e+o);s.setAttributeBasic(r,o,u)}}}setPointByVal(e,i){const s=i;s.isEmpty()&&Je($ge);const n=s.getDescription();n!==this.m_description&&this.mergeVertexDescription(n);const r=this.m_vertexAttributes.get(0);r.write(2*e,s.getX()),r.write(2*e+1,s.getY());for(let o=1,l=this.m_description.getAttributeCount();o<l;o++){const u=this.m_description.getSemantics(o),f=Gn.getComponentCount(u);for(let y=0;y<f;y++){const _=s.getAttributeAsDbl(u,y);this.m_vertexAttributes.get(o).writeAsDbl(e*f+y,_)}}this.notifyModifiedFlags(2001)}setPointByValFromArray(e,i,s,n){K(0)}getPointByValAsArray(e,i,s,n){K(0)}isEmpty(){return this.isEmptyImpl()}isEmptyImpl(){return this.m_pointCount===0}getAttributeAsDbl(e,i,s){const n=Gn.getComponentCount(e);s>=n&&Mi("");const r=this.m_description.getAttributeIndex(e);return r>=0?this.m_vertexAttributes.get(r).readAsDbl(i*n+s):Gn.getDefaultValue(e)}queryAttributeAsDbl(e,i,s,n){const r=Gn.getComponentCount(e);n<r&&Mi("");const o=this.m_description.getAttributeIndex(e);if(o>=0){const l=i*r,u=this.m_vertexAttributes.get(o);for(let f=0;f<r;f++)s[f]=u.readAsDbl(l+f)}else{const l=Gn.getDefaultValue(e);for(let u=0;u<r;u++)s[u]=l}}getAttributeAsInt(e,i,s){return Math.trunc(this.getAttributeAsDbl(e,i,s))}queryAttributeAsInt(e,i,s,n){K(0)}setAttribute(e,i,s,n){const r=Gn.getComponentCount(e);s>=r&&Mi(""),this.addAttribute(e);const o=this.m_description.getAttributeIndex(e);this.notifyModifiedFlags(2001),this.m_vertexAttributes.get(o).writeAsDbl(i*r+s,n)}setAttributeFromArray(e,i,s,n){(i<0||i>=this.m_pointCount)&&Mi("");const r=Gn.getComponentCount(e);n!==r&&Mi(""),this.addAttribute(e);const o=this.m_description.getAttributeIndex(e);this.notifyModifiedFlags(2001);const l=this.m_vertexAttributes.get(o);for(let u=0;u<r;++u)l.writeAsDbl(i*r+u,s[u])}getXY(e){return this.m_vertexAttributes.get(0).readPoint2D(2*e)}queryXY(e,i){return this.m_vertexAttributes.get(0).queryPoint2D(2*e,i)}setXY(e,i){this.m_vertexAttributes.get(0).writePoint2D(2*e,i),this.notifyModifiedFlags(2001)}setXYCoords(e,i,s){const n=this.m_vertexAttributes.get(0);n.write(2*e,i),n.write(2*e+1,s),this.notifyModifiedFlags(2001)}getXYZ(e){const i=this.m_vertexAttributes.get(0),s=ii.getNAN();return s.x=i.read(2*e),s.y=i.read(2*e+1),this.m_description.hasAttribute(1)?s.z=this.m_vertexAttributes.get(1).read(e):s.z=Gn.getDefaultValue(1),s}setXYZ(e,i){this.addAttribute(1),this.notifyModifiedFlags(2001);const s=this.m_vertexAttributes.get(0);s.write(2*e,i.x),s.write(2*e+1,i.y),this.m_vertexAttributes.get(1).write(e,i.z)}queryEnvelope(e){e instanceof xe||e instanceof il?this.updateEnvelope(e):(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,e))}queryLooseEnvelope(e){this.updateLooseEnvelope(e)}queryInterval(e,i){const s=Ze.constructEmpty();return this.isEmptyImpl()||(this.updateAllDirtyIntervals(!0),this.m_envelopeData.queryInterval(this.m_description,e,i,s)),s}setAttributeBasic(e,i,s){this.setAttributeImpl(e,i,s)}setAttributeImpl(e,i,s){if(this.addAttribute(e),this.isEmpty())return;let n=!1;const r=Gn.getComponentCount(e),o=this.getAttributeStreamRef(e),l=Number.isNaN(s);if(o.getPersistence()===1){const u=o;for(let f=i,y=this.m_pointCount*r;f<y;f+=r){const _=u.read(f);(l||_===s)&&Number.isNaN(_)||(u.write(f,s),n=!0)}}else for(let u=i,f=this.m_pointCount*r;u<f;u+=r)o.readAsDbl(u)!==s&&(o.writeAsDbl(u,s),n=!0);n&&this.notifyModifiedFlags(2001)}replaceNaNs(e,i){if(this.addAttribute(e),this.isEmpty())return;let s=!1;const n=Gn.getComponentCount(e),r=this.getAttributeStreamRef(e);for(let o=0;o<n;o++)if(r.getPersistence()===1){const l=r;for(let u=0,f=this.m_pointCount*n;u<f;u++){const y=l.read(u);Number.isNaN(y)&&(l.write(u,i),s=!0)}}else for(let l=0,u=this.m_pointCount*n;l<u;l++){const f=r.readAsDbl(l);Number.isNaN(f)&&(r.writeAsDbl(l,i),s=!0)}s&&this.notifyModifiedFlags(2001)}calculateLength3D(e){return K(0),0}setEnvelopeForImport(e){this.m_description.equals(e.getDescription())||Je(""),this.m_envelopeData=new Iu({moveEnv:e}),this.setDirtyFlagProtected(192,!1)}copyTo(e){e.getGeometryType()!==this.getGeometryType()&&Je(""),this!==e&&this.copyToUnchecked(e,!1)}queryCoordinates(e,i,s,n){let r=n<0?this.m_pointCount:n;if(r=Math.min(r,s+i),(s<0||r<s||this.m_pointCount>0&&s>=this.m_pointCount)&&Je(""),this.m_pointCount===0)return r;const o=this.getAttributeStreamRef(0);for(let l=2*s,u=2*r,f=0;l<u;l+=2,f++)o.queryPoint2D(l,e[f]);return r}queryCoordinates3D(e,i,s,n){let r=n<0?this.m_pointCount:n;if(r=Math.min(r,s+i),(s<0||r<s||this.m_pointCount>0&&s>=this.m_pointCount)&&Je(""),this.m_pointCount===0)return r;const o=this.getAttributeStreamRef(0);let l=null;const u=Gn.getDefaultValue(1),f=this.m_description.hasAttribute(1);f&&(l=this.getAttributeStreamRef(1));let y=0;for(let _=s;_<r;_++,y++)e[y].x=o.read(2*_),e[y].y=o.read(2*_+1),e[y].z=f?l.read(_):u;return r}clearAndSetDirtyFlagProtected(e,i){let s=0;const n=e&~i,r=i|n;s=this.m_flags,(s&r)!==i&&(this.m_flags=s&~n|i)}getIsSimple(e,i){i[0]=0;let s=-1;const n=this.m_flags,r=this.m_simpleTolerance;return 1&n||(s=(14&n)>>1,i[0]=r,r<e&&(s=-1)),s}setIsSimple(e,i,s=!1){if(e===2?K(this.getGeometryType()===me.enumPolyline):e===1?K(this.getGeometryType()===me.enumMultiPoint||this.getGeometryType()===me.enumPolyline):e===3&&K(this.getGeometryType()===me.enumPolygon),e===-1)this.setDirtyFlagProtected(17,!0);else{let n=e<<1;s||(n|=16),this.clearAndSetDirtyFlagProtected(31,n),this.m_simpleTolerance!==i&&(this.m_simpleTolerance=i)}}attributeStreamIsAllocated(e){this.throwIfEmpty();const i=this.m_description.getAttributeIndex(e);return i>=0&&this.m_vertexAttributes.get(i)!==null}capacity(){return this.m_reservedPointCount===-1&&this.m_pointCount===0?0:this.m_reservedPointCount}getDescriptionImpl(){return this.m_description}copyToUnchecked(e,i=!1){i&&this.hasDirtyFlag(32)&&_Ke("Cannot do shallow clone on unprepared geometry");const s=e,n=this.getGeometryType(),r=s.getGeometryType();K(n===r||n===me.enumPolygon&&r===me.enumPolyline,"failure in copyToUnchcked"),s.clearAccelerators(),s.m_description=this.m_description,s.m_vertexAttributes.destroyAndSetSize(0),s.m_envelopeData.releaseAttributes();const o=this.m_description.getAttributeCount(),l=new X4;if(!this.m_vertexAttributes.empty()){l.destroyAndSetSize(o);for(let u=0;u<o;u++)if(this.m_vertexAttributes.get(u))if(i)l.set(u,this.m_vertexAttributes.get(u));else{const f=Gn.getComponentCount(this.m_description.getSemantics(u));l.set(u,this.m_vertexAttributes.get(u).restrictedClone(this.getPointCount()*f))}}if(this.m_envelopeData.copyToIfNotNull(this.m_description,s.m_envelopeData),s.m_flags=this.m_flags,s.m_simpleTolerance=this.m_simpleTolerance,n!==r){const u=[0];s.getIsSimple(0,u)>=3?s.setIsSimple(1,u[0]):s.setIsSimple(-1,0)}s.m_vertexAttributes.swap(l),l.destroyAndSetSize(0),s.m_pointCount=this.m_pointCount,s.hasDirtyFlag(32)?(K(!i),s.m_reservedPointCount=-1):s.m_reservedPointCount=s.m_pointCount;try{this.copyToImpl(s,i)}catch(u){throw s.setEmpty(),u}s.verifyAllStreamsAfterSizeChange()}buildRasterizedGeometryAccelerator(e,i){return!1}getAccelerators(){return this.m_accelerators}clearAccelerators(){this.m_accelerators&&this.m_accelerators.release(),this.m_accelerators=null}ensureUniqueAccelerators(){if(this.m_accelerators&&!this.m_accelerators.uniqueUse()){const e=this.m_accelerators.clone();this.m_accelerators.release(),this.m_accelerators=e}}interpolateTwoVertices(e,i,s,n){(e<0||e>=this.m_pointCount)&&Mi(""),(i<0||i>=this.m_pointCount)&&Mi(""),n.assignVertexDescription(this.m_description);const r=new Array(Gn.maxComponentCount()),o=new Array(Gn.maxComponentCount()),l=yy();let u=0;for(let f=0;f<this.m_description.getAttributeCount();f++){const y=this.m_description.getSemantics(f),_=Gn.getInterpolation(y),x=Gn.getComponentCount(y),S=Gn.getDefaultValue(y);this.queryAttributeAsDbl(y,e,r,x),this.queryAttributeAsDbl(y,i,o,x),K(u+x<=yj),rz(_,r,o,l,u,x,s,S),u+=x}FJe(n,l,u)}getShortestDistance(e,i){return Y.distance(this.getXY(e),this.getXY(i))}getShortestSqrDistance(e,i){return Y.sqrDistance(this.getXY(e),this.getXY(i))}resizeImpl(e){if(e<0&&Je(),(e=Math.ceil(e))===this.m_pointCount)return;this.m_pointCount=e;const i=this.m_pointCount<=this.m_reservedPointCount?2001:4095;this.notifyModifiedFlags(i)}verifyPointIndex(e){K(0)}assignVertexDescriptionImpl(e){if(!this.m_vertexAttributes.empty()){const i=t7();i7(e,this.m_description,i);const s=new X4;s.destroyAndSetSize(e.getAttributeCount());for(let n=0;n<e.getAttributeCount();n++){const r=i[n];r!==-1?s.set(n,this.m_vertexAttributes.get(r)):this.m_reservedPointCount=-1}s.swap(this.m_vertexAttributes)}this.m_description=e,this.m_envelopeData.releaseAttributes(),this.notifyModifiedFlags(4095)}hasDirtyFlag(e){return!!(this.m_flags&e)}setDirtyFlagProtected(e,i){i?this.m_flags|=e:this.m_flags&=~e}notifyModifiedAllImpl(){}verifyAllStreamsAfterSizeChange(){this.hasDirtyFlag(32)&&this.verifyAllStreamsAfterSizeChangeImpl()}verifyAllStreamsAfterSizeChangeImpl(){if(this.hasDirtyFlag(32)){if(this.m_reservedPointCount<this.m_pointCount){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_reservedPointCount=Number.MAX_SAFE_INTEGER;let e=0;e=this.m_pointCount<4?3:this.m_pointCount<=128?2*this.m_pointCount:(4*this.m_pointCount+2)/3;for(let i=0;i<this.m_description.getAttributeCount();i++){const s=this.m_description.getSemantics(i);let n=0;if(this.m_vertexAttributes.get(i)!==null){const r=Gn.getComponentCount(s);n=this.m_vertexAttributes.get(i).size()/r,n<this.m_pointCount&&(this.m_vertexAttributes.get(i).resize(e*r,Gn.getDefaultValue(s)),n=e)}else this.m_vertexAttributes.set(i,Age(s,e)),n=e;n<this.m_reservedPointCount&&(this.m_reservedPointCount=n)}}this.verifyStreamsAfterSizeChangeExtraImpl(),this.setDirtyFlagProtected(32,!1)}}verifyStreamsAfterSizeChangeExtraImpl(){}updateAllDirtyIntervals(e){if(e?this.hasDirtyFlag(192):this.hasDirtyFlag(128)){if(this.isEmpty())return this.hasDirtyFlag(192)&&this.m_envelopeData.setEmpty(this.m_description),void this.setDirtyFlagProtected(192,!1);const i=this.updateXYImpl(e),s=new lr({vd:this.m_description});s.setEnvelope(i);for(let n=1;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n),o=Gn.getComponentCount(r),l=this.m_vertexAttributes.get(n);for(let u=0;u<o;u++){const f=new Ze;f.setEmpty();for(let y=0;y<this.m_pointCount;y++){const _=l.readAsDbl(y*o+u);f.mergeCoordinate(_)}s.setIntervalEnvelope(r,u,f)}}(e?this.hasDirtyFlag(192):this.hasDirtyFlag(128))&&(this.m_envelopeData=new Iu({moveEnv:s}),this.clearDirtyIntervalsFlag(e))}}updateXYImpl(e){const i=xe.constructEmpty(),s=this.m_vertexAttributes.get(0);return i.mergePointsInterleaved(s,0,this.m_pointCount),i}updateEnvelope3D(e){K(0)}updateLooseEnvelope(e){this.updateAllDirtyIntervals(!1),e instanceof xe?e.assign(this.m_envelopeData.m_envelope2D):this.m_envelopeData.queryEnvelope3D(this.m_description,e)}updateEnvelope(e){this.updateAllDirtyIntervals(!0),e.assign(this.m_envelopeData.m_envelope2D)}setEmptyImpl(){this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_vertexAttributes.destroyAndSetSize(0),this.notifyModifiedFlags(4095)}clearDirtyIntervalsFlag(e){this.setDirtyFlagProtected(192,!1)}reserveImpl(e,i){if(e<0&&Je(""),e===0)return;let s=e=Math.ceil(e);if(this.m_reservedPointCount<s){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),i?(this.m_vertexAttributes.get(0)===null&&this.m_vertexAttributes.set(0,VI(0,0)),this.m_vertexAttributes.get(0).resizeRounded(2*s),s=this.m_vertexAttributes.get(0).size()>>1):this.m_vertexAttributes.get(0)===null?this.m_vertexAttributes.set(0,VI(0,s)):this.m_vertexAttributes.get(0).resize(2*s);for(let n=1;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n),o=Gn.getComponentCount(r);this.m_vertexAttributes.get(n)!==null?this.m_vertexAttributes.get(n).resize(s*o):this.m_vertexAttributes.set(n,VI(r,s))}this.reserveImplImpl(s,i),this.m_reservedPointCount=s}}reserveRounded(e){e<0&&Je(),e=Math.ceil(e),this.reserveImpl(e,!0)}reserveImplImpl(e,i){}throwIfEmpty(){this.isEmptyImpl()&&XA("")}}class Jn extends Oge{constructor(e){super(e),e&&(e.points?this.addPoints2D(e.points,e.pointsSize,0,-1):e.point&&this.add(e.point))}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}insertPoint2D(e,i){K(0)}insertPoint(e,i){K(0)}insertPoints(e,i,s){K(0)}insertPoints2D(e,i,s){K(0)}removePoints(e,i){K(0)}removePoint(e){for(let i=0,s=this.m_description.getAttributeCount();i<s;i++)if(this.m_vertexAttributes.get(i)){const n=this.m_description.getSemantics(i),r=_r.getComponentCount(n);this.m_vertexAttributes.get(i).eraseRange(r*e,r,r*this.m_pointCount)}this.m_pointCount--,this.m_reservedPointCount>0&&this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}calculateEnvelope2D(){return K(0),new xe(0,0,0,0)}resizeNoInit(e){this.resizeImpl(e)}resizeAndInitNonPositionAttributes(e){const i=this.m_pointCount;if(this.resizeImpl(e),this.m_pointCount>i)for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s),o=_r.getDefaultValue(r),l=_r.getComponentCount(r);this.m_vertexAttributes.get(s).insertRange(l*i,o,l*(this.m_pointCount-i),l*i)}}queryCoordinates3D(e,i,s,n){return K(0),0}queryAttributeAsInt(e,i,s,n){K(0)}add(e){e.isEmpty()&&Je($ge),this.resizeAndInitNonPositionAttributes(this.m_pointCount+1),this.setPointByVal(this.m_pointCount-1,e)}addXY(e,i){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const s=new Y(e,i);this.setXY(this.m_pointCount-1,s)}addXYZ(e,i,s){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const n=new ii;n.setCoords(e,i,s),this.setXYZ(this.m_pointCount-1,n)}addPoint2D(e){this.addXY(e.x,e.y)}addPoint3D(e){this.addXYZ(e.x,e.y,e.z)}addPoints(e,i,s){this===e&&Je("Multi_point_impl.add");const n=s<0?e.getPointCount():s;if((i<0||i>e.getPointCount()||n<i)&&Je(""),i===n)return;const r=e.getDescription();this.mergeVertexDescription(r);const o=n-i,l=this.m_pointCount;this.resizeNoInit(this.m_pointCount+o);for(let u=0,f=this.m_description.getAttributeCount();u<f;u++){const y=this.m_description.getSemantics(u),_=_r.getComponentCount(y),x=this.getAttributeStreamRef(y);if(r.hasAttribute(y)){const S=e.getAttributeStreamRef(y);x.insertRangeFromStream(l*_,S,i*_,o*_,!0,1,l*_)}else{const S=_r.getDefaultValue(y);x.insertRange(l*_,S,o*_,l*_)}}}addPoints2D(e,i,s,n){let r=i;const o=n<0?r:n;if((r<0||s<0||s>r||o<s)&&Je(""),s===o)return;r=o-s;const l=this.m_pointCount;this.resizeAndInitNonPositionAttributes(this.m_pointCount+r);const u=this.getAttributeStreamRef(0);for(let f=0;f<r;++f)u.writePoint2D(2*(l+f),e[s+f]);this.notifyModifiedFlags(2001)}addPoints3D(e,i,s,n){K(0)}getGeometryType(){return me.enumMultiPoint}getDimension(){return 0}createInstance(){return new Jn({vd:this.getDescription()})}setEmpty(){this.setEmptyImpl()}applyTransformation(e){if(this.isEmpty()||e.isIdentity())return;const i=this.m_vertexAttributes.get(0);e instanceof _i?i.applyTransformation(e,0,this.m_pointCount):K(0),this.notifyModifiedFlags(2001)}calculateArea2D(){return K(0),0}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}equals(e,i){return e.getGeometryType()===me.enumMultiPoint&&this.equalsBase(e,i)}queryEnvelope(e){e instanceof lr?(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,e)):e instanceof xe?this.updateEnvelope(e):K(0)}getImpl(){return this}getBoundary(){return null}reserve(e){this.reserveImpl(e)}clone(){const e=this.createInstance();return this.copyTo(e),e}swap(e){K(0)}buildQuadTreeAccelerator(e){return!1}getHashCodeImpl(){return K(0),0}equalsImpl(e){return!0}equalsImplTol(e,i){return!0}copyToImpl(e,i){}}Jn.type=me.enumMultiPoint;class jr{constructor(){this.envAabb=xe.constructEmpty(),this.envRot=xe.constructEmpty()}static constructEmpty(){return new jr}width(){return this.envAabb.width()}height(){return this.envAabb.height()}maxDim(){return Math.max(this.width(),this.height())}isEmpty(){return K(0),!1}setEmpty(){this.envAabb.setEmpty(),this.envRot.setEmpty()}setCoords(e){this.envAabb.setCoords(e),this.envRot.setCoords({x:s3(e),y:n3(e)})}setFromPoints(e,i){this.setEmpty(),this.mergePoints(e,i)}mergePoint2D(e){K(0)}mergeNe(e){this.envAabb.mergeNe(e),this.envRot.mergeNeCoords(s3(e),n3(e))}mergeCoords(e,i){K(0)}mergeW(e){K(0)}mergeE2D(e){K(0)}mergePoints(e,i){this.envAabb.mergePoints(e,i);for(let s=0;s<i;){if(!this.envRot.isEmpty()){for(let n=s;n<i;n++){const r=s3(e[n]),o=n3(e[n]);this.envRot.mergeNeCoords(r,o)}break}{const n=s3(e[s]),r=n3(e[s]);this.envRot.setCoords({x:n,y:r}),s++}}}isIntersectingPoint2D(e){return!(!this.envAabb.contains(e)||!this.envRot.containsCoords(s3(e),n3(e)))}isIntersectingW(e){return this.envAabb.isIntersecting(e.envAabb)&&this.envRot.isIntersecting(e.envRot)}containsW(e){return!(!this.envAabb.containsEnvelope(e.envAabb)||!this.envRot.containsEnvelope(e.envRot))}containsPoint2D(e){return this.isIntersectingPoint2D(e)}intersectW(e){const i=this.envAabb.intersect(e.envAabb),s=this.envRot.intersect(e.envRot);return i&&!s&&this.envAabb.setEmpty(),s&&!i&&this.envRot.setEmpty(),i&&s}inflate(e){this.envAabb.inflateCoords(e,e);const i=e*aJe();this.envRot.inflateCoords(i,i),i<0&&jr.st_reduceEmpty(this)}sqrMaxMinDistance(e){return K(0),0}sqrMinDistance(e){return K(0),0}sqrMaxDistance(e){return K(0),0}getEnvelope2D(){return K(0),new xe(this.envAabb)}static st_reduceEmpty(e){const i=e.envAabb.isEmpty(),s=e.envRot.isEmpty();i&&!s?e.envRot.setEmpty():s&&!i&&e.envAabb.setEmpty()}}function s3(t){return t.x-t.y}function n3(t){return t.x+t.y}class zJe{isIdentity(){return K(0),!0}}class Rge{constructor(e){this.m_factor=1,this.m_wkid=0,this.m_peUnit=null,e&&(this.m_peUnit=e,this.m_factor=e.getUnitFactor(),this.m_wkid=e.getCode(),this.m_wkid<0&&(this.m_wkid=0))}getName(){return this.m_peUnit.getName()}getID(){return this.m_wkid}getConversionFactor(e){return this.getUnitType()!==e.getUnitType()&&Je("unit type mismatch"),this.getUnitToBaseFactor()/e.getUnitToBaseFactor()}getUnitToBaseFactor(){return this.m_factor}getHashCode(){return Va(tf(this.getUnitType()),tf(this.getUnitToBaseFactor()))}equals(e){return!!e&&this.getUnitType()===e.getUnitType()&&this.getUnitToBaseFactor()===e.getUnitToBaseFactor()&&this.getID()===e.getID()&&this.getName()===e.getName()}static isValidWkid(e){return!1}}class qJe extends Ca{constructor(e,i){super(),this.m_index=-1,this.gc=e,this.dim=i}next(){for(;;){if(this.m_index>=this.gc.getGeometryCount()||(this.m_index++,this.m_index===this.gc.getGeometryCount()))return null;const e=this.gc.getGeometry(this.m_index);if(this.dim===-1||1<<e.getDimension()&this.dim)return e}return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}class NE{constructor(e){this.m_geoms=[],this.m_description=Ho(),e&&(e.vd?this.m_description=e.vd:e.copy?e.copy.copyTo(this):K(0))}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}getGeometryCount(){return this.m_geoms.length}reserve(e){K(0)}addGeometry(e){if(e.getGeometryType()===me.enumGeometryCollection){const i=e;for(let s=0,n=i.getGeometryCount();s<n;s++)this.addGeometry(i.getGeometry(s))}else this.m_geoms.push(e.clone()),this.mergeVertexDescription(e.getDescription())}addGeometryMove(e){K(0)}addCursor(e){K(0)}getGeometry(e){return(e<0||e>=this.m_geoms.length)&&Je("Geometry_collection.get_geometry"),this.m_geoms[e]}modifiedElementIndex(e){K(0)}modifiedElement(e){K(0)}getGeometryType(){return me.enumGeometryCollection}getDimension(){let e=0;for(const i of this.m_geoms)e=Math.max(e,i.getDimension());return e}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}assignVertexDescriptionImpl(e){for(const i of this.m_geoms)i.assignVertexDescription(e);this.m_description=e}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=u5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){K(0)}dropAllAttributes(){K(0)}queryInterval(e,i){return K(0),new Ze(0,0)}queryEnvelope(e){K(0)}queryLooseEnvelope(e){K(0)}isEmpty(){return this.m_geoms.length===0}setEmpty(){K(0)}applyTransformation(e){if(e instanceof _i)for(const i of this.m_geoms)i.applyTransformation(e);K(0)}transformAttribute(e,i,s,n,r){K(0)}createInstance(){return new NE({vd:this.getDescription()})}copyTo(e){e.getGeometryType()!==me.enumGeometryCollection&&Je("");const i=e;if(i!==this){i.m_geoms.length=0,i.assignVertexDescription(this.m_description);for(const s of this.m_geoms)i.m_geoms.push(s.clone())}}calculateArea2D(){return K(0),0}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}getBoundary(){return K(0),this}clone(){return new NE({copy:this})}equals(e,i){if(e===this)return!0;if(e.getGeometryType()!==me.enumGeometryCollection)return!1;const s=e;if(this.m_description!==s.m_description||this.m_geoms.length!==s.m_geoms.length)return!1;for(let n=0;n<this.m_geoms.length;++n)if(!this.m_geoms[n].equals(s.m_geoms[n],i))return!1;return!0}swap(e){K(0)}setAttributeBasic(e,i,s){K(0)}replaceNaNs(e,i){K(0)}getImpl(){return this}vertexCount(){return K(0),0}hasNonLinearSegments(){return K(0),!1}mergeVertexDescriptionImpl(e){const i=c5(this.getDescription(),e);this.assignVertexDescription(i)}}function VJe(t,e=-1){return new qJe(t,e)}NE.type=me.enumGeometryCollection;class xs{assign(e){this.m_reason=e.m_reason,this.m_vertexIndex1=e.m_vertexIndex1,this.m_vertexIndex2=e.m_vertexIndex2}constructor(e,i,s){e!==void 0?(this.m_reason=e,this.m_vertexIndex1=i,this.m_vertexIndex2=s):(this.m_reason=0,this.m_vertexIndex1=-1,this.m_vertexIndex2=-2)}clear(){K(0)}}class yte{constructor(e){if(this.m_geom=this.m_sr=null,e){if(e.move)return this.m_geom=e.move.m_geom,e.move.m_geom=null,this.m_sr=e.move.m_sr,void(e.move.m_sr=null);if(e.copy)return this.m_geom=e.copy.m_geom?e.copy.m_geom.clone():null,void(this.m_sr=e.copy.m_sr);e.geom&&(this.m_geom=e.geom),e.sr&&(this.m_sr=e.sr)}}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}getGeometry(){return this.m_geom}getSpatialReference(){return this.m_sr}setGeometry(e){this.m_geom=e}setSpatialReference(e){this.m_sr=e}getHashCode(){return K(0),0}equals(e,i){return K(0),!1}clone(){return K(0),this}hasGeom(){return!!this.m_geom}}const R6={330:104878,500:104879,1300:104899,1450:104986,2230:104988,3800:104978,5e3:104919,6200:104906,8200:104909,9500:104927,9600:104977,1e4:[104911,104936],11e3:104941,11080:104872,11100:104907,12e3:104920,12400:104995,13e3:104948,14e3:[104923,104989],15e3:[104913,104954],15100:104976,16e3:[104926,104931],18e3:[104922,104982],21e3:104947,21500:104877,27e3:[104950,104957],29e3:104964,3e4:104921,31e3:104949,33e3:104946,4e4:[104914,104967],40600:104897,41900:104937,42e3:104951,43100:104993,49300:104924,50100:104939,54e3:104955,58200:104981,59500:104930,74e3:104961,77e3:104956,79e3:104962,83500:104910,85e3:104917,88800:104934,89200:104985,96e3:104997,104e3:104963,106500:104898,11e4:104938,133e3:104932,135e3:104983,17e4:104965,198200:104987,198630:104935,208e3:104966,235800:104952,249400:104929,252100:104980,255e3:104973,47e4:104972,529800:104942,531e3:104996,56e4:104928,561400:104979,578900:104945,584700:104959,593e3:104970,606e3:104999,718e3:104933,745700:104984,761400:104953,763500:104994,764e3:104940,788900:104958,1188300:104998,1195e3:104969,1352600:104968,1560800:104874,1562090:104915,1737400:104903,1821460:104918,1821490:104876,2409300:104912,2410300:104873,2439400:104974,2439700:104900,2575e3:104943,2631200:104875,2632345:104916,3393400:104904,3396190:[104905,104971],6051e3:104901,6051800:104902,637e4:104128,6370997:[4052,37008],6371e3:4035,6371007:4047,6371228:[4053,10346],6376045:[8042,8043],6376523:[4027,4901,4902],6376896:37007,6378135:[4122,4322,4324,4720,4985,4987],6378136:[4740,4923,7678,7680,9474,9475,104017,104018],6378137:[3823,3824,3888,3889,4017,4019,4023,4031,4040,4046,4055,4074,4075,4080,4081,4121,4126,4130,4133,4140,4141,4148,4151,4152,4163,4166,4167,4170,4171,4172,4173,4176,4180,4189,4190,4258,4269,4283,4318,4319,4326,4463,4466,4469,4470,4480,4482,4483,4490,4557,4558,4612,4617,4619,4624,4627,4659,4661,4667,4669,4670,4674,4686,4687,4693,4694,4702,4737,4742,4747,4749,4750,4755,4756,4757,4758,4759,4761,4762,4763,4764,4765,4883,4885,4887,4889,4893,4895,4898,4907,4909,4921,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4971,4975,4977,4979,4981,4983,4989,4997,4999,5012,5013,5245,5246,5251,5252,5263,5264,5323,5324,5340,5342,5353,5354,5359,5360,5364,5365,5370,5371,5372,5373,5380,5381,5392,5393,5488,5489,5545,5546,5592,5593,5885,5886,6134,6135,6310,6311,6318,6319,6321,6322,6324,6325,6364,6365,6667,6668,6705,6706,6782,6783,6980,6982,6983,6987,6989,6990,7034,7035,7036,7037,7038,7039,7040,7041,7042,7072,7073,7084,7085,7086,7087,7133,7135,7136,7138,7139,7372,7373,7657,7659,7661,7663,7665,7685,7686,7797,7798,7816,7843,7844,7880,7881,7885,7886,7900,7901,7902,7903,7904,7905,7906,7907,7908,7909,7910,7911,7912,7915,7917,7919,7921,7923,7925,7927,7929,7931,8085,8086,8231,8232,8235,8237,8239,8240,8244,8246,8248,8249,8251,8252,8254,8255,8399,8403,8426,8427,8449,8542,8544,8545,8684,8685,8698,8699,8817,8818,8860,8888,8899,8900,8901,8902,8906,8907,8916,8918,8920,8922,8924,8926,8928,8930,8932,8934,8936,8938,8940,8942,8944,8946,8948,8949,8972,8973,8974,8975,8976,8977,8978,8979,8980,8981,8982,8983,8984,8985,8986,8987,8988,8989,8990,8991,8992,8993,8994,8995,8996,8997,8998,8999,9e3,9002,9003,9005,9006,9008,9009,9011,9012,9013,9014,9016,9017,9018,9019,9053,9054,9055,9056,9057,9059,9060,9061,9062,9063,9064,9065,9066,9067,9068,9069,9071,9072,9074,9075,9139,9140,9147,9148,9152,9153,9183,9184,9293,9294,9299,9308,9309,9332,9333,9364,9372,9379,9380,9384,9453,9469,9470,9546,9547,9695,9696,9701,9702,9739,9754,9755,9758,9763,9776,9777,9778,9779,9781,9782,9783,9784,9866,9871,9939,9964,9969,9974,9989,9990,10175,10177,10178,10185,10191,10196,10204,10209,10214,10219,10224,10229,10237,10272,10277,10283,10284,10298,10299,10300,10304,10305,10307,10309,10310,10311,10312,10327,10328,10413,10414,10468,10474,10475,10570,10571,10605,10606,10623,10628,20033,20040,20041,20045,20046,104009,104010,104011,104012,104013,104014,104015,104016,104019,104020,104021,104022,104024,104027,104028,104050,104100,104107,104108,104110,104111,104114,104115,104116,104117,104118,104119,104120,104121,104122,104123,104124,104129,104133,104134,104137,104141,104142,104143,104144,104145,104179,104180,104181,104182,104183,104184,104185,104186,104199,104223,104257,104258,104259,104260,104286,104287,104602,104613,104644,104645,104646,104647,104653,104804,104896,104991],6378140:4610,6378145:[4025,4276,4760,4891,37001],6378150:37003,6378155:[37004,37207],6378160:[3821,4003,4021,4036,4202,4203,4237,4238,4291,4618,4708,5527,37231,104023,104136],6378166:37002,6378200:[4020,4229,4286,4303,4706],6378245:[4024,4147,4164,4178,4179,4191,4200,4205,4214,4284,4317,4555,4676,4677,4678,4991,4993,5560,5561,37257,104135],6378270:[4732,37005,37229],6378273:[4054,10345],6378300:[4029,4168,4174],6378388:[4022,4123,4153,4154,4158,4159,4160,4161,4165,4181,4182,4183,4184,4185,4192,4194,4195,4196,4199,4204,4207,4208,4215,4218,4221,4224,4225,4230,4231,4233,4235,4236,4247,4248,4249,4254,4255,4259,4264,4265,4271,4272,4274,4285,4287,4288,4292,4297,4309,4311,4313,4316,4472,4475,4611,4614,4615,4616,4621,4622,4623,4625,4626,4628,4629,4630,4631,4632,4633,4636,4637,4639,4641,4642,4643,4644,4645,4646,4658,4660,4662,4663,4664,4665,4668,4672,4673,4684,4688,4689,4690,4691,4692,4698,4704,4705,4707,4709,4710,4711,4712,4714,4715,4716,4718,4719,4721,4722,4724,4725,4727,4728,4729,4730,4733,4734,4735,4739,4741,4753,4754,4802,4803,4806,4809,4810,4823,4824,4900,5524,6883,8428,8430,8431,9248,9251,9253,9403,9893,10158,10249,10252,37201,37204,37205,37212,37213,37214,37215,37216,37217,37218,37219,37221,37222,37224,37226,37227,37230,37232,37233,37234,37235,37237,37238,37241,37242,37245,37246,37247,37249,37250,37251,37253,37259,104104,104106,104125,104126,104127,104130,104138,104248],6378523:104786,24764e3:104960,25559e3:104944,60268e3:104925,71492e3:104908,6957e5:104975,6377397155e-3:[3819,3906,4004,4120,4124,4125,4149,4150,4156,4162,4211,4219,4257,4262,4280,4289,4294,4295,4301,4306,4308,4312,4314,4613,4666,4745,4746,4801,4804,4805,4808,4813,4814,4815,4818,4820,4904,5132,5228,5229,5681,5830,8351,9267,10268,37255,104101,104102,104105,104131,104648,104696,104697,104990,104992],6377563396e-3:[4001,4188,4277,4278,4279],6377340189e-3:[4002,4299,4300],6377492018e-3:[4005,4273,4817],6377483865280418e-9:[4006,4293],6378293645208759e-9:[4007,4157,4302,4738,5464],63782064e-1:[4008,4127,4128,4129,4135,4136,4137,4138,4139,4169,4216,4242,4253,4267,4608,4609,4638,4675,4683,4695,4717,4723,4726,4995,5451,5467,37220,37239,37243,37252,37260,104e3,104109,104112,104113,104132],6378450047e-3:[4009,4268],6378300789e-3:[4010,4281],63782492e-1:[4011,4014,4155,4193,4206,4213,4223,4226,4227,4228,4252,4261,4266,4275,4282,4296,4304,4310,4315,4671,4807,4811,4816,4821,37223,37225,104139,104140,104261,104304],6378249145e-3:[4012,4013,4132,4134,4142,4143,4175,4197,4198,4201,4209,4210,4212,4220,4222,4232,4234,4246,4250,4251,4256,4260,4263,4270,4305,4307,4600,4601,4602,4603,4604,4605,4606,4607,4620,4679,4680,4696,4697,4699,4700,4701,4703,4713,4731,4736,4743,4744,4812,4819,6881,6882,6892,6894,8694,37206,37208,37211,37228,37240,37254,104025,104026,104103,104305],6377276345e-3:[4015,4131,4144,4239,4240,4244,4682,5233,6207,37202,104256,104664,104693],6377298556e-3:[4016,4298],6377304063e-3:[4018,4245],63782983e-1:[4028,4903],63781362e-1:4032,63781363e-1:4033,6378249144808011e-9:[4034,4241],209229318e-1:[4042,4243],6377301243e-3:[4044,4145,37203],6377299151e-3:[4045,4146],637701927e-2:[4657,10256,10260,10265],63783063696e-4:[4748,4752],6377295664e-3:[4751,37006],63781365e-1:[7682,7683],63710087714e-4:104047,6378418941e-3:[104700,104726,104760],6378586581e-3:[104701,104743],6378505809e-3:104702,6378544823e-3:104703,6378490569e-3:104704,6378470757e-3:[104705,104776],6378403701e-3:[104706,104750],6378434181e-3:[104707,104724,104739,104764],6378454907e-3:104708,6378400653e-3:104709,6378567378e-3:104710,6378546957e-3:[104711,104717,104780],6378476853e-3:[104712,104736],6378411321e-3:[104713,104728],6378647541e-3:[104714,104715],6378514953e-3:[104716,104782],6378421989e-3:[104718,104770],6378481425e-3:[104719,104753,104774,104781],6378518001e-3:[104720,104725],6378521049e-3:[104721,104723,104731,104745,104748],6378464661e-3:104722,6378436619e-3:104727,6378574389e-3:[104729,104730],6378472281e-3:[104732,104756],6378498189e-3:[104733,104746],6378449421e-3:[104734,104766],6378525621e-3:[104735,104754],6378466185e-3:104737,6378496665e-3:104738,6378643579e-3:104740,6378559758e-3:104741,6378414369e-3:[104742,104763,104772],6378441801e-3:104744,6378502761e-3:[104747,104759,104773,104775],6378617061e-3:104749,6378624681e-3:[104751,104765],6378468623e-3:104752,6378445763e-3:[104755,104758,104761],6378670401e-3:104757,6378438753e-3:104762,6378543909e-3:104767,6378605783e-3:104768,6378540861e-3:104769,6378443325e-3:[104771,104784],6378548481e-3:104777,6378463746e-3:104778,6378426561e-3:104779,6378453688e-3:104783,6378530193e-3:104785,6378376271e-3:[104800,104828],637847192e-2:104801,6378472931e-3:104802,6378411351e-3:104803,6378380991e-3:104805,637841496e-2:104806,637834509e-2:[104807,104819,104844,104870],6378412542e-3:104808,6378470401e-3:104809,6378376331e-3:104810,6378379031e-3:104811,6378407621e-3:104812,6378376811e-3:[104813,104827],637831392e-2:104814,637841493e-2:104815,6378413021e-3:104816,6378380381e-3:104817,6378530851e-3:104818,6378591521e-3:104820,6378378881e-3:104821,6378408481e-3:[104822,104832],6378375601e-3:[104823,104838],6378408041e-3:104824,6378655071e-3:104825,6378409151e-3:104826,63783157e-1:[104829,104840,104845,104851],637828586e-2:[104830,104835,104859],6378379301e-3:104831,6378560121e-3:104833,6378531821e-3:104834,63785006e-1:104836,6378376041e-3:104837,6378406601e-3:104839,6378438991e-3:104841,637834542e-2:104842,637859386e-2:104843,6378381271e-3:[104846,104847],6378413671e-3:104848,6378344377e-3:104849,6378563891e-3:104850,6378408091e-3:104852,6378377671e-3:104853,6378472751e-3:104854,6378412511e-3:104855,6378407281e-3:104856,6378534451e-3:104857,6378406051e-3:104858,6378532921e-3:104860,6378380091e-3:104861,6378408941e-3:104862,6378624171e-3:104863,6378377411e-3:104864,6378474591e-3:104865,6378407141e-3:104866,6378376871e-3:104867,6378375251e-3:104868,6378405971e-3:104869,6378437651e-3:104871};function GJe(){for(const t in R6)delete R6[t]}class Ht{constructor(){this.x=Be.getNAN(),this.y=Be.getNAN()}static getNAN(){return new Ht}static constructPoint2D(e){const i=new Ht;return i.x.set(e.x),i.y.set(e.y),i}static constructCoords(e,i){const s=new Ht;return s.x.set(e),s.y.set(i),s}static constructCoordsE(e,i){const s=new Ht;return s.setCoordsE(e,i),s}get 0(){return this.x.clone()}set 0(e){this.x.setE(e)}get 1(){return this.y.clone()}set 1(e){this.y.setE(e)}clone(){return new Ht().setE(this)}setCoords(e,i){return this.x.set(e),this.y.set(i),this}setCoordsE(e,i){return this.x.setE(e),this.y.setE(i),this}set(e){return this.x.set(e.x),this.y.set(e.y),this}setE(e){return this.x.setE(e.x),this.y.setE(e.y),this}setWithEps(e,i){return this.x.setWithEps(e.x,i),this.y.setWithEps(e.y,i),this}getUnitVector(){const e=this.clone();return e.normalize(),e}sqrLength(){return this.x.sqr().addE(this.y.sqr())}length(){return this.sqrLength().sqrt()}mulE(e){const i=new Ht;return i.setCoordsE(this.x.mulE(e),this.y.mulE(e)),i}mul(e){const i=new Ht;return i.setCoordsE(this.x.mul(e),this.y.mul(e)),i}mulThis(e){return this.x.mulThis(e),this.y.mulThis(e),this}divE(e){return this.clone().divThisE(e)}divThisE(e){return this.x.divThisE(e),this.y.divThisE(e),this}normalize(){const e=this.length();e.value()===0?(this.x=nm.clone(),this.y=Mx.clone()):(this.x.divThisE(e),this.y.divThisE(e))}addE(e){return this.clone().addThisE(e)}addThisE(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this}subE(e){return this.clone().subThisE(e)}subThisE(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this}static distance(e,i){return e.subE(i).length()}negateThis(){return this.x.negateThis(),this.y.negateThis(),this}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)}isZero(){return this.x.isZero()&&this.y.isZero()}isTrueZero(){return!this.x.value()&&!this.y.value()}rotateDirect(e,i){const s=this.x.mulE(e).subThisE(this.y.mulE(i)),n=this.x.mulE(i).addThisE(this.y.mulE(e));return this.x.setE(s),this.y.setE(n),this}rotateReverse(e,i){const s=this.x.mulE(e).addThisE(this.y.mulE(i)),n=this.x.negate().mulThisE(i).addThisE(this.y.mulE(e));return this.x.setE(s),this.y.setE(n),this}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y))}crossProduct(e){return this.x.mulE(e.y).subE(this.y.mulE(e.x))}value(){return Y.construct(this.x.value(),this.y.value())}}class $E{constructor(){this.a11=new Be(1),this.a12=new Be(0),this.a21=new Be(0),this.a22=new Be(1)}clone(){const e=new $E;return e.a11.setE(this.a11),e.a12.setE(this.a12),e.a21.setE(this.a21),e.a22.setE(this.a22),e}assign(e){return this.a11.setE(e.a11),this.a12.setE(e.a12),this.a21.setE(e.a21),this.a22.setE(e.a22),this}mulThis(e){const i=this.a11.mulE(e.a11).addThisE(this.a12.mulE(e.a21)),s=this.a11.mulE(e.a12).addThisE(this.a12.mulE(e.a22)),n=this.a21.mulE(e.a11).addThisE(this.a22.mulE(e.a21)),r=this.a21.mulE(e.a12).addThisE(this.a22.mulE(e.a22));return this.a11=i,this.a12=s,this.a21=n,this.a22=r,this}mulLeftThis(e){const i=e.clone();return this.assign(i.mulThis(this)),this}det(){return this.a11.mulE(this.a22).subThisE(this.a12.mulE(this.a21))}invertThis(){const e=this.det();if(e.value()!==0){const i=this.a22.divE(e),s=this.a12.negate().divThisE(e),n=this.a21.negate().divThisE(e),r=this.a11.divE(e);this.a11=i,this.a12=s,this.a21=n,this.a22=r}else this.setZero();return!e.isZero()}transposeThis(){return this.a21=St(this.a12,this.a12=this.a21),this}transformPoint(e){return K(0),new Ht}eigenValues(e){return K(0),0}eigenVectors(e,i){return K(0),0}eigenSymmetric(e,i){const s=this.a12.clone();s.addThisE(this.a21),s.mulThisByPower2(.5);let n=new Be(1),r=new Be(0);if(s.isZero())e[0].setE(this.a11),e[1].setE(this.a22);else{const o=new Be(1);if(this.a11.ne(this.a22)){const l=this.a11.subE(this.a22).divE(s);l.mulThisByPower2(.5);const u=l.sqr();o.setE(l),o.absThis(),o.subThisE(u.add(1).sqrtThis()),l.gt(Mx)&&o.negateThis();const f=o.sqr().addThis(1).sqrtThis().invThis();r=o.mulE(f),n.setE(f);const y=o.mulE(s);e[0]=this.a11.addE(y),e[1]=this.a22.subE(y)}else n=new Be(1/Math.sqrt(2)),r=n.clone(),e[0]=this.a11.addE(s),e[1]=this.a22.subE(s)}i[0].x=n.toDouble(),i[0].y=r.toDouble(),i[1].x=r.negate().toDouble(),i[1].y=n.toDouble(),Math.abs(e[0].toDouble())>Math.abs(e[1].toDouble())&&(e[1]=St(e[0],e[0]=e[1]),i[1]=St(i[0],i[0]=i[1]))}setZero(){this.a11.set(0),this.a21.set(0),this.a12.set(0),this.a22.set(0)}}var bv=_r;function Kg(t,e){const i=t.getStartXY();if(i.equals(e.getStartXY())||i.equals(e.getEndXY()))return!0;const s=t.getEndXY();return!!s.equals(e.getStartXY())||!!s.equals(e.getEndXY())}function n7(t,e){let i=t.calculateLowerLength2D();return!(i>e)&&(!!t.isLine()||(i=t.calculateUpperLength2D(),i<=e||e!==0&&t.calculateLength2D()<=e))}function xj(t,e){const i=t.getEndXY().sub(t.getStartXY()).length(),s=t.calculateUpperLength2D()-i<=e[0];return e[0]*=.1,s}function Lge(t,e,i,s,n,r,o,l){let u=t.calculateUpperLength2D(),f=e.calculateUpperLength2D(),y=t,_=e,x=!1;u>f&&(_=St(y,y=_),s=St(i,i=s),f=St(u,u=f),x=!0);const S=i===0;{o[0]=S?1:0;const W=y.getCoord2D(o[0]);l[0]=_.getClosestCoordinate(W,!1);const J=_.getCoord2D(l[0]);if(Y.distance(W,J)<=n){const re=[.5,.75,.25,.1,.9];let se=!0;for(let oe=0;oe<re.length;oe++)if(W.assign(y.getCoord2D(re[oe])),!_.isCloserThanDistance(W,new Ze(0,1),n)){se=!1;break}if(se)return x&&(l[0]=St(o[0],o[0]=l[0])),1}}if(u<=3*n)return 0;let P=un(Math.max(n/u,.1),0,.5),A=.01*n,k=0,$=0,F=P,G=-1,V=0,B=1/32;for(let W=0;;W++){K(W<4095);const J=S?P:1-P,re=y.getCoord2D(J),se=_.getClosestCoordinate(re,!1);if(se===s)return V;const oe=_.getCoord2D(se),pe=Y.distance(re,oe);if(W===0&&(G=pe),pe<=A?(B=.5,$=pe,k=P):(F=P,G=pe),Math.abs($-G)>.1*A&&F-k>1e-16)P=ji(k,F,B);else{if(o[V]=J,l[V]=se,x&&(l[V]=St(o[V],o[V]=l[V])),r===1||V===1)return V===1&&o[0]>o[1]&&(o[1]=St(o[0],o[0]=o[1]),l[1]=St(l[0],l[0]=l[1])),V+1;V++,k=F,$=G,F=.8,G=-1,P=.8,B=1/32,A=10*n,W=0}}}function uS(t,e,i,s,n,r,o,l,u){if(Ms(i,0,1)&&Ms(s,0,1)&&Y.distance(t.getCoord2D(i),e.getCoord2D(s))===0){const y=new Ht,_=en();if(t.queryDerivative(new Be(i,_),y),y.isTrueZero()){const k=i===1?-1e-12:1e-12;t.queryDerivative(new Be(i,_).add(k),y)}i===1&&y.negateThis();const x=new Ht;if(e.queryDerivative(new Be(s,_),x),x.isTrueZero()){const k=i===1?-1e-12:1e-12;e.queryDerivative(new Be(s,_).add(k),x)}s===1&&x.negateThis(),y.isZero()||y.normalize(),x.isZero()||x.normalize();const S=y.dotProduct(x),P=y.crossProduct(x);P.scaleError(3);const A=()=>{{const k=t.calculateUpperLength2D(),$=e.calculateUpperLength2D();return Math.min(.01*n/Math.min(k,$),1e-10)}};if(S.ge(Mx)&&(P.isZero()||Math.abs(P.value())<A()))return Lge(t,e,i,s,n,r,o,l)}return 0}function jJe(t,e,i){return K(t.isCurve()||e.isCurve()),!!(t.getStartXY().equals(e.getStartXY())&&uS(t,e,0,0,i,2,[0,0],[0,0])||t.getEndXY().equals(e.getEndXY())&&uS(t,e,1,1,i,2,[0,0],[0,0])||t.getStartXY().equals(e.getEndXY())&&uS(t,e,0,1,i,2,[0,0],[0,0])||t.getEndXY().equals(e.getStartXY())&&uS(t,e,1,0,i,2,[0,0],[0,0]))}function wj(t,e){t.m_XStart=e.x,t.m_YStart=e.y}function vte(t,e,i){t.m_XStart=e,t.m_YStart=i}function Sj(t,e){t.m_XEnd=e.x,t.m_YEnd=e.y}function _te(t,e,i){t.m_XEnd=e,t.m_YEnd=i}function BJe(t,e,i){e?t.m_XEnd===i.x&&t.m_YEnd===i.y||(t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified()):t.m_XStart===i.x&&t.m_YStart===i.y||(t.m_XStart=i.x,t.m_YStart=i.y,t.endPointModified())}function bte(t,e,i){t.m_description.hasZ()||t.addAttribute(1),e?t.m_XEnd===i.x&&t.m_YEnd===i.y||(t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified()):t.m_XStart===i.x&&t.m_YStart===i.y||(t.m_XStart=i.x,t.m_YStart=i.y,t.endPointModified()),t.m_attributes[(t.m_description.getTotalComponentCount()-2)*e]=i.z}function xte(t,e,i){i.assignVertexDescription(t.m_description);const s=e===0?t.m_XStart:t.m_XEnd,n=e===0?t.m_YStart:t.m_YEnd;i.setXYCoords(s,n);for(let r=1;r<t.m_description.getAttributeCount();r++){const o=t.m_description.getSemantics(r);for(let l=0,u=bv.getComponentCount(o);l<u;l++){const f=Rh(t,e,o,l);i.setAttributeBasic(o,l,f)}}}function wte(t,e,i){i.isEmpty()&&XA(""),BJe(t,e,i.getXY());const s=i.getDescription();s!==t.m_description&&t.mergeVertexDescription(s);for(let n=1,r=s.getAttributeCount();n<r;n++){const o=s.getSemantics(n),l=bv.getComponentCount(o);for(let u=0;u<l;u++)Rp(t,e,o,u,i.getAttributeAsDbl(o,u))}}function Rh(t,e,i,s){if((e<0||e>1)&&Mi(""),i===0)return(s<0||s>=2)&&Mi(""),e===0?s===0?t.m_XStart:t.m_YStart:s===0?t.m_XEnd:t.m_YEnd;const n=bv.getComponentCount(i);(s<0||s>=n)&&Mi("");const r=t.m_description.getAttributeIndex(i);return r>=0?t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(r)-2+s]:bv.getDefaultValue(i)}function Rp(t,e,i,s,n){if((e<0||e>1)&&Mi(""),i===0)return e===0?s===0?t.m_XStart=n:s===1?t.m_YStart=n:Mi(""):e===1?s===0?t.m_XEnd=n:s===1?t.m_YEnd=n:Mi(""):Mi(""),void t.endPointModified();const r=bv.getComponentCount(i);(s<0||s>=r)&&Mi("");let o=t.m_description.getAttributeIndex(i);o<0&&(t.addAttribute(i),o=t.m_description.getAttributeIndex(i)),t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(o)-2+s]=n}function HJe(t,e){if(t===e)return;e.isEmpty()&&XA("");const i=e.getDescription();i!==t.m_description&&t.mergeVertexDescription(i);for(let s=1,n=i.getAttributeCount();s<n;s++){const r=i.getSemantics(s),o=bv.getComponentCount(r);for(let l=0;l<o;l++){let u=Rh(e,0,r,l);Rp(t,0,r,l,u),u=Rh(e,1,r,l),Rp(t,1,r,l,u)}}}function UJe(t,e){const i=t7();i7(e,t.m_description,i);let s=null;const n=e.getTotalComponentCount()-2,r=t.m_description?t.m_description.getTotalComponentCount()-2:0;if(n>0&&(s=new Array(2*n),dn(s,e.getDefaultPointAttributes(),0,2,n),dn(s,e.getDefaultPointAttributes(),n,2,n),t.m_description!==null))for(let o=1;o<e.getAttributeCount();o++){const l=i[o];if(l!==-1){const u=t.m_description.getPointAttributeOffset(l)-2,f=e.getPointAttributeOffset(o)-2,y=bv.getComponentCount(e.getSemantics(o));for(let _=0;_<y;++_)s[f]=t.m_attributes[u],s[n+f]=t.m_attributes[r+u]}}t.m_attributes=s,t.m_description=e}function rf(t){return t.absNorm()*yv()}function Dl(t,e){return Math.max(t.absNorm(),e.absNorm())*yv()}function Xc(t,e,i){const s=new jr;t.queryEnvelopeW(Ze.unit(),s);const n=new jr;return e.queryEnvelopeW(Ze.unit(),n),n.inflate(i),!s.isIntersectingW(n)}function Ej(t,e,i){const s=k6(t,i),n=k6(e,i);s.sort((r,o)=>r.compare(o)),n.sort((r,o)=>r.compare(o));for(let r=0;r<3;r++){if(s[r].compare(n[r])<0)return-1;if(s[r].compare(n[r])!==0)return 1}return 0}var wN=_r;class d5{constructor(e){if(e.copy)this.m_XStart=e.copy.m_XStart,this.m_YStart=e.copy.m_YStart,this.m_XEnd=e.copy.m_XEnd,this.m_YEnd=e.copy.m_YEnd,this.m_description=e.copy.m_description,this.m_attributes=null,this.m_description&&this.m_description.getTotalComponentCount()-2&&(this.m_attributes=e.copy.m_attributes.slice());else{if(e.move)return this.m_description=e.move.m_description,e.move.m_description=null,this.m_attributes=e.move.m_attributes,e.move.m_attributes=null,this.m_XStart=e.move.m_XStart,this.m_YStart=e.move.m_YStart,this.m_XEnd=e.move.m_XEnd,void(this.m_YEnd=e.move.m_YEnd);if(e.XStart!==void 0)return this.m_XStart=e.XStart,this.m_YStart=e.YStart,this.m_XEnd=e.XEnd,this.m_YEnd=e.YEnd,this.m_attributes=null,this.m_description=e.vd?e.vd:Ho(),void(e.vd&&this.setDefaultAttributeValues());if(e.ZStart!==void 0)return this.m_XStart=e.XStart,this.m_YStart=e.YStart,this.m_XEnd=e.XEnd,this.m_YEnd=e.YEnd,this.m_description=e.vd?e.vd:AE(),void(e.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=e.ZStart,this.m_attributes[this.m_description.getTotalComponentCount()-2]=e.ZEnd):this.m_attributes=[e.ZStart,e.ZEnd]);if(e.start)return this.m_XStart=e.start.x,this.m_YStart=e.start.y,this.m_XEnd=e.end.x,this.m_YEnd=e.end.y,this.m_attributes=null,void(this.m_description=Ho());if(e.start3D)return this.m_XStart=e.start3D.x,this.m_YStart=e.start3D.y,this.m_XEnd=e.end3D.x,this.m_YEnd=e.end3D.y,this.m_description=e.vd?e.vd:AE(),void(e.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=e.start3D.z,this.m_attributes[this.m_description.getTotalComponentCount()-2]=e.end3D.z):this.m_attributes=[e.start3D.z,e.end3D.z]);K(0),this.m_XStart=this.m_YStart=this.m_XEnd=this.m_YEnd=Number.NaN}}setDefaultAttributeValues(){const e=this.m_description.getTotalComponentCount()-2;e>0&&(this.m_attributes===null&&(this.m_attributes=Vi(2*e,Number.NaN)),dn(this.m_attributes,this.m_description.getDefaultPointAttributes(),0,2,e),dn(this.m_attributes,this.m_description.getDefaultPointAttributes(),e,2,e))}absNormXYZ(e){return js("not implemented"),0}snapControlPoints3D(){return js("not implemented"),!1}setCoordsForIntersector3D(e,i,s){js("not implemented")}transformAttribute(e,i,s,n,r){js("")}mergeVertexDescriptionImpl(e){const i=c5(this.getDescription(),e);this.assignVertexDescription(i)}changeEndPoints(e,i){const s=e.getXY(),n=i.getXY();this.changeEndPoints2D(s,n);let r=e.getDescription();r!==this.getDescription()&&this.mergeVertexDescription(r),r=i.getDescription(),r!==this.getDescription()&&this.mergeVertexDescription(r);for(let o=1,l=r.getAttributeCount();o<l;o++){const u=r.getSemantics(o),f=wN.getComponentCount(u);for(let y=0;y<f;y++)Rp(this,0,u,y,e.getAttributeAsDbl(u,y)),Rp(this,1,u,y,i.getAttributeAsDbl(u,y))}}getStartXY(){return new Y(this.m_XStart,this.m_YStart)}setStartXY(e){this.m_XStart=e.x,this.m_YStart=e.y,this.endPointModified()}setStartXYCoords(e,i){this.m_XStart=e,this.m_YStart=i,this.endPointModified()}getStartXYZ(){return K(0),new ii(0,0,0)}setStartXYZ(e){K(0)}setStartXYZCoords(e,i,s){bte(this,0,ii.construct(e,i,s))}queryStart(e){xte(this,0,e)}setStart(e){wte(this,0,e)}setStart2D(e){this.setStartXY(e)}getStartAttributeAsDbl(e,i){return Rh(this,0,e,i)}getStartAttributeAsInt(e,i){return K(0),0}setStartAttribute(e,i,s){Rp(this,0,e,i,s)}setStartAttributesFromPoint(e,i){K(0)}setEndAttributesFromPoint(e,i){K(0)}getStartX(){return this.m_XStart}getStartY(){return this.m_YStart}getStartZ(){return K(0),0}getEndX(){return this.m_XEnd}getEndY(){return this.m_YEnd}getEndZ(){return K(0),0}getEndXY(){return new Y(this.m_XEnd,this.m_YEnd)}setEndXY(e){this.m_XEnd=e.x,this.m_YEnd=e.y,this.endPointModified()}setEndXYCoords(e,i){this.m_XEnd=e,this.m_YEnd=i,this.endPointModified()}getEndXYZ(){return K(0),new ii(0,0,0)}setEndXYZ(e){K(0)}setEndXYZCoords(e,i,s){bte(this,1,ii.construct(e,i,s))}queryEnd(e){xte(this,1,e)}setEnd(e){wte(this,1,e)}setEnd2D(e){this.setEndXY(e)}getEndAttributeAsDbl(e,i){return Rh(this,1,e,i)}getEndAttributeAsInt(e,i){return K(0),Math.trunc(0)}setEndAttribute(e,i,s){Rp(this,1,e,i,s)}getDimension(){return 1}copyTo(e){if(this===e)return;e.getGeometryType()!==this.getGeometryType()&&Je("");const i=e;i.assignVertexDescription(this.m_description),i.m_attributes&&dn(i.m_attributes,this.m_attributes,0,0,2*(this.m_description.getTotalComponentCount()-2)),i.m_XStart=this.m_XStart,i.m_YStart=this.m_YStart,i.m_XEnd=this.m_XEnd,i.m_YEnd=this.m_YEnd,this.copyToImpl(i)}isEmpty(){return this.isEmptyImpl()}isClosed(){return this.m_XStart===this.m_XEnd&&this.m_YStart===this.m_YEnd}setEmpty(){}calculateArea2D(){return 0}queryInterval(e,i){const s=Ze.constructEmpty();return s.vmin=Rh(this,0,e,i),s.vmax=s.vmin,s.mergeNeCoordinate(Rh(this,1,e,i)),s}calculateLength3D(e){return K(0),0}getCoord3D(e){return K(0),{}}getCoord2D(e){const i=Y.getNAN();return this.queryCoord2D(e,i),i}queryCoord3D(e,i){K(0)}getCoordZ(e){return K(0),0}queryCoord(e,i){i.assignVertexDescription(this.m_description),i.setXY(this.getCoord2D(e));for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s),o=wN.getComponentCount(r);for(let l=0;l<o;l++){const u=this.getAttributeAsDbl(e,r,l);i.setAttributeBasic(r,l,u)}}}isCloserThanDistance(e,i,s){const n=xe.constructEmpty();if(this.queryLooseEnvelopeOnInterval(i,n),n.distance(e)>s)return!1;const r=this.getClosestCoordinateOnInterval(e,i,s);return!Number.isNaN(r)&&Y.distance(e,this.getCoord2D(r))<=s}isMonotoneQuickAndDirty(){return!1}isTrue3D(){return!1}getReversed(){const e=this.clone();return e.reverse(),e}reverse(){this.m_XEnd=St(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=St(this.m_YStart,this.m_YStart=this.m_YEnd),this.reverseImpl();for(let e=1,i=this.m_description.getAttributeCount();e<i;e++){const s=this.m_description.getSemantics(e);for(let n=0,r=wN.getComponentCount(s);n<r;n++){const o=Rh(this,0,s,n);Rp(this,0,s,n,Rh(this,1,s,n)),Rp(this,1,s,n,o)}}return this.afterCompletedModification(),this}isEmptyImpl(){return!1}isCircular(){return!1}distance(e,i,s,n){if(!i&&this.isIntersecting(e,0,!1)){if(s!==null||n!==null){const f=new Array(9),y=new Array(9),_=this.intersect(e,null,f,y,0);K(_<=9),_===0&&bt(""),s!==null&&(s[0]=f[0]),n!==null&&(n[0]=y[0])}return 0}let r,o=Number.MAX_VALUE,l=-1,u=o;return r=this.getStartXY(),l=e.getClosestCoordinate(r,!1),r.subThis(e.getCoord2D(l)),u=r.length(),u<o&&(o=u,n!==null&&(n[0]=l),s!==null&&(s[0]=0)),r=this.getEndXY(),l=e.getClosestCoordinate(r,!1),r.subThis(e.getCoord2D(l)),u=r.length(),u<o&&(o=u,n!==null&&(n[0]=l),s!==null&&(s[0]=1)),r=e.getStartXY(),l=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(l)),u=r.length(),u<o&&(o=u,s!==null&&(s[0]=l),n!==null&&(n[0]=0)),r=e.getEndXY(),l=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(l)),u=r.length(),u<o&&(o=u,s!==null&&(s[0]=l),n!==null&&(n[0]=1)),o}calculateSubLengthFromStart(e){return this.tToLength(e)}calculateSubLength(e,i){return i===e?0:this.tToLength(i)-this.tToLength(e)}static recalculateParentT(e,i,s){return ji(e,i,s)}moveTo(e){const i=this.isClosed(),s=new _i;s.setShift(e.sub(this.getStartXY())),this.applyTransformation(s),i?this.changeEndPoints2D(e,e):this.changeEndPoints2D(e,this.getEndXY())}moveTo3D(e){K(0)}getDescription(){return this.m_description}assignVertexDescription(e){UJe(this,e)}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=u5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=_j(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){const e=Ho();e!==this.m_description&&this.assignVertexDescription(e)}swap(e){K(0)}equals(e,i){if(this.getGeometryType()!==e.getGeometryType())return!1;const s=i===void 0;s&&(i=0);const n=e;if(this===n)return!0;if(this.m_description!==n.m_description||Math.abs(this.m_XStart-n.m_XStart)>i||Math.abs(this.m_XEnd-n.m_XEnd)>i||Math.abs(this.m_YStart-n.m_YStart)>i||Math.abs(this.m_YEnd-n.m_YEnd)>i)return!1;for(let r=0,o=2*(this.m_description.getTotalComponentCount()-2);r<o;r++)if(!l5(this.m_attributes[r],n.m_attributes[r],i))return!1;return s?this.equalsImpl(n):this.equalsImplTol(n,i)}getImpl(){return this}setAttributeBasic(e,i,s){if(this.addAttribute(e),e===0&&this.isCurve()){(i<0||i>1)&&Je("");const n=new _i,r=i===0?s:0,o=i===1?s:0;n.setShiftCoords(r,o),i===0?n.xx=0:n.yy=0,this.applyTransformation(n)}else this.setStartAttribute(e,i,s),this.setEndAttribute(e,i,s)}replaceNaNs(e,i){K(0)}}d5.s_maxMonotonicPartParams=8;class f5 extends d5{constructor(e){super(e)}}class YJe extends f5{isTrue3D(){return!0}constructor(e){super(e)}}function gl(t,e,i){Cj(e,t.getStartXY(),t.getEndXY(),i)}function Cj(t,e,i,s){ar(e,i,t,s)}function SN(t,e){return ji(t.m_XStart,t.m_XEnd,e)}function Ste(t,e){return ji(t.m_YStart,t.m_YEnd,e)}function XJe(t,e,i){const s=Ht.constructPoint2D(t.getStartXY()),n=Ht.constructPoint2D(t.getEndXY());i.setCoordsE(n.x.subE(s.x),n.y.subE(s.y))}function Fge(t,e,i){e.value()<=.5?Kd(2,Ht.constructPoint2D(t.getStartXY()),Ht.constructPoint2D(t.getEndXY()),e,i):Jd(2,Ht.constructPoint2D(t.getStartXY()),Ht.constructPoint2D(t.getEndXY()),e,i)}function WJe(t,e,i){t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,t.afterCompletedModification()}function zge(t){if(t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart){t.m_XEnd=St(t.m_XStart,t.m_XStart=t.m_XEnd),t.m_YEnd=St(t.m_YStart,t.m_YStart=t.m_YEnd);for(let e=0,i=t.m_description.getTotalComponentCount()-2;e<i;e++)t.m_attributes[e+i]=St(t.m_attributes[e],t.m_attributes[e]=t.m_attributes[e+i])}}function ZJe(t,e,i,s){let n=0;if((t.m_XStart===e.m_XStart&&t.m_YStart===e.m_YStart||t.m_XStart===e.m_XEnd&&t.m_YStart===e.m_YEnd)&&(n++,!s))return 1;if(t.m_XEnd===e.m_XStart&&t.m_YEnd===e.m_YStart||t.m_XEnd===e.m_XEnd&&t.m_YEnd===e.m_YEnd){if(n++,n===2)return 2;if(!s)return 1}return e.isIntersectingPoint(t.getStartXY(),i,!0)||e.isIntersectingPoint(t.getEndXY(),i,!0)||t.isIntersectingPoint(e.getStartXY(),i,!0)||t.isIntersectingPoint(e.getEndXY(),i,!0)?4:s&&n?0:JJe(t,e)?4:0}function r7(t,e,i,s,n,r,o,l){s!==null&&(s.length=2),n!==null&&(n.length=2),i!==null&&(i.length=2);const u=KJe(t,e,2,i,s,n,r,o,l);return s&&(s.length=u),n&&(n.length=u),i&&(i.length=u),u}function KJe(t,e,i,s,n,r,o,l,u){const f=Lb(t,e.getStartXY(),o,!1),y=Lb(t,e.getEndXY(),o,!1),_=Lb(e,t.getStartXY(),o,!1),x=Lb(e,t.getEndXY(),o,!1);let S=0,P=0;if(!Number.isNaN(f)){let k=!1;l&&Ms(f,0,1)&&t.getCoord2D(f).isEqualPoint2D(e.getStartXY())&&(S++,k=!0),k||(n&&(n[P]=f),r&&(r[P]=0),s&&(s[P]=Y.construct(e.m_XStart,e.m_YStart)),P++)}if(!Number.isNaN(y)){let k=!1;l&&Ms(y,0,1)&&t.getCoord2D(y).isEqualPoint2D(e.getEndXY())&&(S++,k=!0),k||(i>P&&(n&&(n[P]=y),r&&(r[P]=1),s&&(s[P]=Y.construct(e.m_XEnd,e.m_YEnd))),P++)}if(P!==2&&!Number.isNaN(_)&&!(f===0&&_===0||y===0&&_===1)){let k=!1;l&&Ms(_,0,1)&&e.getCoord2D(_).isEqualPoint2D(t.getStartXY())&&(S++,k=!0),k||(i>P&&(n&&(n[P]=0),r&&(r[P]=_),s&&(s[P]=Y.construct(t.m_XStart,t.m_YStart))),P++)}if(P!==2&&!Number.isNaN(x)&&!(f===1&&x===0||y===1&&x===1)){let k=!1;l&&Ms(x,0,1)&&e.getCoord2D(x).isEqualPoint2D(t.getEndXY())&&(S++,k=!0),k||(i>P&&(n&&(n[P]=1),r&&(r[P]=x),s&&(s[P]=Y.construct(e.m_XEnd,e.m_YEnd))),P++)}if(P>0)return u&&(r=St(n,n=r)),P===2&&i>=2&&n&&n[0]>n[1]&&(n[1]=St(n[0],n[0]=n[1]),r&&(r[1]=St(r[0],r[0]=r[1])),s&&(s[1]=St(s[0],s[0]=s[1]))),P;if(S>0)return 0;const A=QJe(t,e,o);return Number.isNaN(A.x)?0:(s&&(s[0]=t.getCoord2D(A.x)),n&&(n[0]=A.x),r&&(r[0]=A.y),1)}function JJe(t,e){const i=Z4(t,e.m_XStart,e.m_YStart),s=Z4(t,e.m_XEnd,e.m_YEnd);if(i<0&&s<0||i>0&&s>0)return!1;const n=Z4(e,t.m_XStart,t.m_YStart),r=Z4(e,t.m_XEnd,t.m_YEnd);return n<0&&r<0||n>0&&r>0?!1:hz(t)>hz(e)?Cte(t,e):Cte(e,t)}function Lb(t,e,i,s){const n=Y.getNAN(),r=Y.getNAN();let o=!1;t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart?(n.setCoords(t.m_XEnd,t.m_YEnd),r.setCoords(t.m_XStart,t.m_YStart),o=!0):(n.setCoords(t.m_XStart,t.m_YStart),r.setCoords(t.m_XEnd,t.m_YEnd));const l=o?1:0,u=o?0:1,f=Y.getNAN();f.setSub(e,n);let y=f.length(),_=3*y*en();if(y<=Math.max(i,_))return s&&y===0?Number.NaN:l;if(f.setSub(e,r),y=f.length(),_=3*y*en(),y<=Math.max(i,_))return s&&y===0?Number.NaN:u;f.setCoords(r.x-n.x,r.y-n.y);const x=f.length();if(x>0){const S=1/x;f.scale(S);const P=Y.getNAN();P.setSub(e,n);const A=P.dotProduct(f),k=8*P.dotProductAbs(f)*en();f.leftPerpendicularThis();const $=P.dotProduct(f),F=8*P.dotProductAbs(f)*en(),G=Math.max(i,k);if(A<-G||A>x+G)return Number.NaN;const V=Math.max(i,F);if(Math.abs($)<=V){let B=A*S;B=un(B,0,1);const W=Y.getNAN();if(Cj(B,n,r,W),Y.distance(W,e)<=i){if(B<.5){if(Y.distance(W,n)<=i&&Y.distance(e,n)<=i)return l}else if(Y.distance(W,r)<=i&&Y.distance(e,r)<=i)return u;return o?1-B:B}}}return Number.NaN}function Z4(t,e,i){const s=Y.getNAN();s.setCoords(e,i),s.subThis(t.getStartXY());const n=Y.getNAN();n.setSub(t.getEndXY(),t.getStartXY());const r=n.crossProduct(s),o=4*en()*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x));return r>o?-1:r<-o?1:0}function Ete(t,e,i,s){const n=s?t.m_XStart:t.m_XEnd,r=s?t.m_YStart:t.m_YEnd,o=Y.getNAN();return o.x=e.getEndX()-n,o.y=e.getEndY()-r,i.dotProduct(o)>3*en()*i.dotProductAbs(o)?(o.x=e.getStartX()-n,o.y=e.getStartY()-r,i.dotProduct(o)<=3*en()*i.dotProductAbs(o)):!0}function Cte(t,e){const i=Y.getNAN();return i.x=t.m_XEnd-t.m_XStart,i.y=t.m_YEnd-t.m_YStart,!!Ete(t,e,i,!1)&&(i.negateThis(),!!Ete(t,e,i,!0))}function hz(t){const e=t.m_XStart-t.m_XEnd,i=t.m_YStart-t.m_YEnd;return e*e+i*i}function QJe(t,e,i){const s=t.m_XEnd-t.m_XStart,n=t.m_YEnd-t.m_YStart,r=e.m_XEnd-e.m_XStart,o=e.m_YEnd-e.m_YStart,l=r*n-s*o;if(l===0)return Y.getNAN();const u=4*en()*(Math.abs(r*n)+Math.abs(s*o)),f=e.m_XStart-t.m_XStart,y=e.m_YStart-t.m_YStart,_=r*y-f*o,x=4*en()*(Math.abs(r*y)+Math.abs(f*o)),S=_/l,P=Math.abs(l),A=(x*P+u*Math.abs(_))/(l*l)+en()*Math.abs(S);if(S<-A||S>1+A)return Y.getNAN();const k=s*y-f*n,$=k/l,F=(4*en()*(Math.abs(s*y)+Math.abs(f*n))*P+u*Math.abs(k))/(l*l)+en()*Math.abs($);if($<-F||$>1+F)return Y.getNAN();let G=un(S,0,1),V=un($,0,1);const B=Y.getNAN();gl(t,G,B);const W=Y.getNAN();if(gl(e,V,W),!i||Y.distance(B,W)>i){const J=Y.getNAN();ar(B,W,.5,J),G=t.getClosestCoordinate(J,!1),V=e.getClosestCoordinate(J,!1);const re=Y.getNAN();gl(t,G,re);const se=Y.getNAN();gl(e,V,se),re.subThis(se);const oe=re.length(),pe=(t.absNorm()+e.absNorm())*yv();if(oe>Math.max(i,pe))return Y.getNAN()}return new Y(G,V)}class EN{constructor(e){if(this.m_segFlagStream=null,this.m_xyStream=null,this.m_bCirculator=!1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_parent=e.parent,this.m_buffer=new this.m_parent.m_segmentBufferCTor,this.m_description=e.parent.getDescription(),this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),e.pointIndex!==void 0){(e.pointIndex<0||e.pointIndex>=e.parent.getPointCount())&&Mi("");const i=e.parent.getPathIndexFromPointIndex(e.pointIndex);this.m_currentPathIndex=i,this.m_nextPathIndex=i+1,this.m_nextSegmentIndex=e.pointIndex-e.parent.getPathStart(i),this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex)}else if(e.pathIndex!==void 0){(e.pathIndex<0||e.pathIndex>=e.parent.getPathCount()||e.segmentIndex<0)&&Mi("");const i=e.parent.isClosedPath(e.pathIndex)?0:1;e.segmentIndex>=e.parent.getPathSize(e.pathIndex)-i&&Mi(""),this.m_nextSegmentIndex=e.segmentIndex,this.m_currentPathIndex=e.pathIndex,this.m_nextPathIndex=this.m_nextSegmentIndex+1,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex)}this.prepare(),this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1,this.m_bStripAttributes=!1,this.m_prevPathIndex=-1,this.m_prevSegmentIndex=-1,this.m_bNeedsUpdate=!1,this.m_currentPathIndex>-1&&(this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex))}stripAttributes(){this.m_bStripAttributes=!0}clone(){return K(0),this}prepare(){this.m_bCirculator=!1,this.m_parent.isEmptyImpl()?(this.m_segFlagStream=null,this.m_xyStream=null):(this.m_segFlagStream=this.m_parent.getSegmentFlagsStreamRef(),this.m_xyStream=this.m_parent.getAttributeStreamRef(0))}nextPath(){return this.m_currentPathIndex=this.m_nextPathIndex,!(this.m_currentPathIndex>=this.m_parent.getPathCount())&&(this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.m_nextPathIndex++,!0)}previousPath(){return this.m_nextPathIndex!==0&&(this.m_nextPathIndex--,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),this.m_currentPathIndex=this.m_nextPathIndex,this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.resetToLastSegment(),!0)}getSegmentCount(e){return this.m_parent.isEmptyImpl()?0:this.m_parent.getSegmentCountPath(e)}resetToFirstPath(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}resetToLastPath(){this.m_nextPathIndex=this.m_parent.getPathCount(),this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1}resetToPath(e){(e<0||e>this.m_parent.getPathCount())&&Mi(""),this.m_nextPathIndex=e,this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}isLastPath(){return this.m_currentPathIndex===this.m_parent.getPathCount()-1}isFirstSegmentInPath(){return this.m_currentSegmentIndex===0}isLastSegmentInPath(){return this.m_currentSegmentIndex===this.m_segmentCount-1}resetToFirstSegment(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0}resetToLastSegment(){this.m_nextSegmentIndex=this.m_segmentCount,this.m_currentSegmentIndex=-1}resetTo(e){this.m_parent!==e.m_parent&&bn(""),this.m_currentSegmentIndex=e.m_currentSegmentIndex,this.m_nextSegmentIndex=e.m_nextSegmentIndex,this.m_currentPathIndex=e.m_currentPathIndex,this.m_nextPathIndex=e.m_nextPathIndex,this.m_segmentCount=e.m_segmentCount,this.m_bCirculator=e.m_bCirculator,this.m_pathBegin=e.m_pathBegin,this.m_bCurrentPathClosed=e.m_bCurrentPathClosed,this.m_bStripAttributes=e.m_bStripAttributes,this.m_description=e.m_description}resetToVertex(e,i){if(this.m_currentPathIndex>=0&&this.m_currentPathIndex<this.m_parent.getPathCount()){const n=this.getPathBegin();if(e>=n&&e<this.m_parent.getPathEnd(this.m_currentPathIndex))return this.m_currentSegmentIndex=-1,void(this.m_nextSegmentIndex=e-n)}let s;s=i>=0&&i<this.m_parent.getPathCount()&&e>=this.m_parent.getPathStart(i)&&e<this.m_parent.getPathEnd(i)?i:this.m_parent.getPathIndexFromPointIndex(e),this.m_nextPathIndex=s+1,this.m_currentPathIndex=s,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=e-this.m_parent.getPathStart(s),this.m_segmentCount=this.getSegmentCount(s),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex)}hasNextSegment(){return this.m_nextSegmentIndex<this.m_segmentCount}hasPreviousSegment(){return this.m_nextSegmentIndex>0}nextSegment(){return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&Mi("Segment_iterator_impl::next_segment"),this.m_nextSegmentIndex++),this.m_buffer.get()}previousSegment(){return this.m_bCirculator?this.m_nextSegmentIndex=(this.m_segmentCount+this.m_nextSegmentIndex-1)%this.m_segmentCount:(this.m_nextSegmentIndex===0&&Mi(""),this.m_nextSegmentIndex--),this.m_nextSegmentIndex!==this.m_currentSegmentIndex&&this.updateSegment(),this.m_buffer.get()}nextCurve(){if(!this.m_parent.hasNonLinearSegments())return this.resetToLastSegment(),null;let e=0;for(;;){if(this.m_nextSegmentIndex===this.m_segmentCount||e===this.m_segmentCount)return null;const i=this.getPathBegin()+this.m_nextSegmentIndex;if((31&this.m_segFlagStream.read(i))!==1){this.updateSegment();break}this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:this.m_nextSegmentIndex++,e++}return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&Mi(""),this.m_nextSegmentIndex++),this.m_buffer.get()}getPathBegin(){return this.m_pathBegin}getPathIndex(){return this.m_currentPathIndex}getStartPointIndex(){return this.getPathBegin()+this.m_currentSegmentIndex}getEndPointIndex(){return this.isClosingSegment()?this.getPathBegin():this.getStartPointIndex()+1}updateSegment(){(this.m_nextSegmentIndex<0||this.m_nextSegmentIndex>=this.m_segmentCount||this.m_currentPathIndex<0)&&Mi(""),this.m_currentSegmentIndex=this.m_nextSegmentIndex,this.m_parent.getSegmentFromPath(this.m_currentPathIndex,this.m_currentSegmentIndex,this.m_buffer,this.m_bStripAttributes)}isClosingSegment(){return this.m_bCurrentPathClosed&&this.m_currentSegmentIndex===this.m_segmentCount-1}isCurve(){return this.m_segFlagStream!==null?(31&this.m_segFlagStream.read(this.m_currentSegmentIndex))!==1:!1}isPathClosed(){return this.m_bCurrentPathClosed}setCirculator(e){this.m_bCirculator=e}getImpl(){return this}}class L6{constructor(e){this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null,this.m_refCount=1,e&&e.copyTo(this)}assignCopy(e){return K(0),this}getRasterizedGeometry(){return this.m_rasterizedGeometry}copyTo(e){e!==this&&(K(e.uniqueUse()),e.m_quadTree=this.m_quadTree,e.m_quadTreeForPaths=this.m_quadTreeForPaths,e.m_rasterizedGeometry=this.m_rasterizedGeometry)}clone(){const e=new L6;return this.copyTo(e),e}uniqueUse(){return this.m_refCount===1}addRef(){++this.m_refCount}release(){--this.m_refCount==0&&(this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null)}setRasterizedGeometry(e){K(this.uniqueUse())}setQuadTree(e){K(this.uniqueUse()),this.m_quadTree=e}setQuadTreeForPaths(e){K(this.uniqueUse()),this.m_quadTreeForPaths=e}getQuadTree(){return this.m_quadTree}getQuadTreeForPaths(){return this.m_quadTreeForPaths}}function F6(t){return!(t.isEmpty()||t.getGeometryType()!==me.enumPolyline&&t.getGeometryType()!==me.enumPolygon)&&!(t.getPointCount()<20)}function qge(t){return!(t.isEmpty()||t.getGeometryType()!==me.enumPolyline&&t.getGeometryType()!==me.enumPolygon)&&!(t.getPointCount()<20)}function eQe(t,e){return t.readPoint2D(e+4)}function CN(t){const e=t.getGeometryType();return e===me.enumEllipticArc?10:e===me.enumBezier?4:e===me.enumRationalBezier2?5:e===me.enumBezier2?2:void bt("")}function du(t){const e=31&t;return e===4?10:e===2?4:e===8?5:e===16?2:0}function Jg(t,e,i,s){const n=4*en()*(Math.abs(e.vmin)+Math.abs(e.vmax)),r=en();if(t.getMaxDerivative()===1){K(i>0);const y=Tte(t,0,e,en(),n);return s[0]=y.root,y.cRoots}let o,l=[];const u=new Ze(e.vmin-n,e.vmax+n);l.push(new Y(u.vmin,u.vmax));let f=0;for(let y=t.getMaxDerivative()-1;y>=0;y--){o=l,l=[];for(let _=0,x=o.length;_<x;_++){if(o[_][0]<o[_][1]){let S,P,A;if(y===t.getMaxDerivative()-1?{root:S,funcAtRoot:P,cRoots:A}=Tte(t,y,Ze.construct(o[_][0],o[_][1]),r,.5*n):{root:S,funcAtRoot:P,cRoots:A}=nQe(t,y,Ze.construct(o[_][0],o[_][1]),r,.5*n),A===1){if(y===0)f<i&&(o[_][0]<=e.vmin&&o[_][1]>=e.vmin&&S!==e.vmin&&t.getValue(0,e.vmin)===0&&(S=e.vmin),o[_][0]<=e.vmax&&o[_][1]>=e.vmax&&S!==e.vmax&&t.getValue(0,e.vmax)===0&&(S=e.vmax),s[f]=e.snapClip(S),f>0?s[f]-s[f-1]>n&&f++:f++);else{const k=Y.getNAN();k[0]=o[_][0],k[1]=S,l.push(k);const $=Y.getNAN();$[0]=S,$[1]=o[_][1],l.push($)}continue}}l.push(o[_])}}return f}function tQe(t,e,i,s){const n=new Be,r=OE(new Be(t),new Be(e),i,n);return s[0]=n.value(),r}function xv(t,e,i,s,n,r){const o=Ge(Be,2),l=El(new Be(t),new Be(e),new Be(i),s,n,o);return r[0]=o[0].value(),r[1]=o[1].value(),l}function Vge(t,e,i,s,n,r,o){const l=Ge(Be,3),u=z6(new Be(t),new Be(e),new Be(i),new Be(s),n,r,l);return o[0]=l[0].value(),o[1]=l[1].value(),o[2]=l[2].value(),u}function Pte(t,e,i,s,n,r,o,l){return sQe(t,e,i,s,n,r,o,l)}function iQe(t,e,i,s,n,r){return rQe(t,e,i,s,n,r)}function sQe(t,e,i,s,n,r,o,l){const u=new Array(i*i);u.fill(0),dn(l,s,0,0,i);const f=new Array(i),y=new Array(i),_=new Array(i);let x=t(l,i,e);const S=100;let P=0;for(P=0;P<S;P++){const A=x;for(let G=0;G<i;++G)y[G]=l[G];if(P%i==0){u.fill(0);for(let G=0;G<i;G++)u[G*i+G]=1}let k=0,$=0;for(let G=0;G<i;++G){for(let W=0;W<i;++W)f[W]=u[G*i+W];const V=x;x=Ite(t,e,l,f,n,r,i);const B=V-x;B>k&&($=G,k=B)}for(let G=0;G<i;G++)f[G]=l[G]-y[G],_[G]=l[G]+(l[G]-y[G]);const F=t(_,i,e);if(F<A&&2*(A-2*x+F)*Xi(A-x-k)<Xi(A-F)*k){x=Ite(t,e,l,f,n,r,i);for(let G=0;G<i;++G)u[$*i+G]=u[(i-1)*i+G],u[(i-1)*i+G]=f[G]}if(A<=x)return t(l,i,e)}return x}function Tte(t,e,i,s,n){const r={root:0,funcAtRoot:0,cRoots:0};let o=i.vmin,l=i.vmax,u=0,f=Number.MAX_VALUE,y=t.getValue(e,o),_=t.getValue(e,l),x=0,S=0,P=0;if(y>=0&&_>=0||y<=0&&_<=0)return Math.abs(y)<Math.abs(_)?(r.funcAtRoot=y,r.root=o,r.cRoots=y===0?1:0,r):(r.funcAtRoot=_,r.root=l,r.cRoots=_===0?1:0,r);Math.abs(y)<Math.abs(_)&&(l=St(o,o=l),_=St(y,y=_)),u=o,x=y;let A=!0,k=0;for(;_!==0&&Math.abs(o-l)>s*Math.abs(l)+n;k++){let $=k>64;if(!$){S=y!==x&&_!==x?o*_*x/((y-_)*(y-x))+l*y*x/((_-y)*(_-x))+u*y*_/((x-y)*(x-_)):l-_*(l-o)/(_-y);const F=(3*o+l)/4;if($=!(S>F&&S<l||S>l&&S<F),!$){const G=s*Math.abs(l)+n;if(A){const V=Math.abs(l-u);$=Math.abs(S-l)>=.5*V||V<G}else{const V=Math.abs(u-f);$=Math.abs(S-l)>=.5*V||V<G}}}if($?(S=(o+l)/2,A=!0):A=!1,P=t.getValue(e,S),P===0)return r.root=S,r.funcAtRoot=P,r.cRoots=1,r;if(!$){const F=o-S,G=S-l;if(Math.abs(F)>10*Math.abs(G)){let V=l+3*G;for(let B=0;B<2;B++){const W=t.getValue(e,V);xn(y)*xn(W)>0?(o=V,y=W):V=ji(o,l,.75)}}else if(Math.abs(G)>10*Math.abs(F)){let V=o-3*F;for(let B=0;B<2;++B){const W=t.getValue(e,V);xn(_)*xn(W)>0?(l=V,_=W):V=ji(o,l,.25)}}}f=u,u=l,x=_,xn(y)*xn(P)<0?(l=S,_=P):(o=S,y=P),Math.abs(y)<Math.abs(_)&&(l=St(o,o=l),_=St(y,y=_)),k===128&&bt("Root_finder iterations exceeded")}return r.root=l,r.funcAtRoot=_,r.cRoots=1,r}function nQe(t,e,i,s,n){const r={root:0,funcAtRoot:0,cRoots:0};let o=i.vmin,l=t.getValue(e,o),u=i.vmax,f=t.getValue(e,u);if(l>=0&&f>=0||l<=0&&f<=0)return Math.abs(l)<Math.abs(f)?(r.funcAtRoot=l,r.root=o,r.cRoots=l===0?1:0,r):(r.funcAtRoot=f,r.root=u,r.cRoots=f===0?1:0,r);f<0&&(f=St(l,l=f),u=St(o,o=u));let y=.5*(o+u),_=Math.abs(u-o),x=_,S=t.getValue(e,y),P=t.getValue(e+1,y);const A=1,k=4;let $=k;const F=2;let G=1,V=0,B=0,W=A;const J=32;let re=0;for(;++re<100;){let se;re>J||P===0||W===F&&V>1||W===A&&$<k?(W=A,G>1&&G--):(W=F,B>1&&Math.abs(2*S)>Math.abs(_*P)&&G++),_=x;let oe=!1;if(W===A)do{if(B>2){const ue=16*Math.abs(_);if(.5*Math.abs(o-u)>ue){const ne=Math.min(o,u),de=Math.max(o,u);if(y===ne){se=y,y=ne+ue,x=y-se;break}if(y===de){se=y,y=de-ue,x=y-se;break}}}x=.5*(u-o),se=y,y=o+x,oe=o===y||u===y}while(!1);else for(;;){x=G*S/P,se=y,y-=x,oe=y===se;const ue=Math.min(o,u),ne=Math.max(o,u);if(y<ue){if(G>1){y=se,G--;continue}x=se-ue,y=ue}else if(y>ne){if(G>1){y=se,G--;continue}x=se-ne,y=ne}break}if(oe||Math.abs(x)<n){se!==y&&(S=t.getValue(e,y));break}S=t.getValue(e,y),P=t.getValue(e+1,y);const pe=o,ce=u;S<0?(l=S,o=y):(f=S,u=y),W===F&&(o===pe&&u===ce||B>1&&Math.abs(x)>=.5001*Math.abs(_))?V++:V=0,W===A?($++,B=0):($=0,B++)}return re===100&&bt("Root_finder iterations exceeded"),r.root=y,r.funcAtRoot=S,r.cRoots=1,r}function Ite(t,e,i,s,n,r,o){const l=s.slice(0,o);let u=0;for(let $=0;$<o;$++)u+=s[$]*s[$];if(u=Math.sqrt(u),u>0)for(let $=0;$<o;$++)l[$]/=u;let f=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY;{const $=new Array(o);for(let F=0;F<o;F++)$[F]=F;$.sort((F,G)=>{const V=Math.abs(l[F]),B=Math.abs(l[G]);return V<B?-1:V>B?1:0});for(let F=0;F<o;F++){const G=$[F];if(l[G]===0)continue;let V=(n[G]-i[G])/l[G],B=(r[G]-i[G])/l[G];B<V&&(B=St(V,V=B)),V>f&&(f=V),B<y&&(y=B)}}let _=0;const x=(Math.abs(f)+Math.abs(y))*en()*100,S=new Array(o),P=l.slice();function A($,F){for(let G=0,V=o;G<V;G++)S[G]=i[G]+$*P[G];return t(S,o,e)}x>0&&(_=iQe(A,null,f,0,y,x));const k=A(_);for(let $=0,F=o;$<F;$++)i[$]=un(S[$],n[$],r[$]);return k}function rQe(t,e,i,s,n,r){const o=az();let l=s,u=t(l,e),f=i,y=n,_=t(f,e),x=t(y,e);u>_&&(u=_,l=f),u>x&&(u=x,l=y);let S=f,P=y,A=_,k=x;A>k&&(A=St(k,k=A),P=St(S,S=P));let $=l-S,F=S-P;const G=.5*Math.min(r,y-f),V=2*G,B=100;let W,J=0;for(W=0;W<B&&!(y-f<=V);++W){const re=f+.5*(y-f);let se=J>0;if(!se&&Math.abs(F)<=G&&(se=!0,J=3),!se){const ce=l-S,ue=l-P,ne=ce*(u-k);let de=ue*(u-A),Se=ue*de-ce*ne;de=2*(de-ne),de>0&&(Se=-Se),de=Math.abs(de),de===0||Math.abs(Se)>=Math.abs(de*F/2)||Se<=de*(f-l)||Se>=de*(y-l)?(se=!0,J=3):(F=$,$=Se/de)}se&&(F=l>=re?f-l:y-l,$=o*F,J--);let oe=l+$;oe<f+G?oe=f+G:oe>y-G&&(oe=y-G);const pe=t(oe,e);pe<u?(oe>=l?(f=l,_=u):(y=l,x=u),P=S,S=l,l=oe,k=A,A=u,u=pe):(oe<l?(f=oe,_=pe):(y=oe,x=pe),pe<=A||S===l?(P=S,S=oe,k=A,A=pe):(pe<=k||P===l||P===S)&&(P=oe,k=pe))}return l}function OE(t,e,i,s){return t.isZero()?e.isZero()?-1:0:(s.setE(e.clone().negateThis().divThisE(t)),i.containsCoordinate(s.value())?1:0)}function El(t,e,i,s,n,r){if(t.value()===0)return n?(r[0].set(1),s.containsCoordinate(r[0].value())?1:0):OE(e,i,s,r[0]);if(n){let S=2;return r[0].set(1),r[1].setE(i).divThisE(t),r[1].eq(r[0])&&(r[1].set(1),S=1),s.containsCoordinate(r[1].value())||(S=1),s.containsCoordinate(r[0].value())||(S--,r[0].setE(r[1])),S===2&&r[0].value()>r[1].value()&&(r[1]=St(r[0],r[0]=r[1])),S}const o=e.clone().sqrThis().subThisE(t.clone().mulThisE(i).mulThisE(OKe));if(o.lt(Mx))return 0;const l=new Be(e.value()>=0?1:-1),u=o.clone().sqrtThis(),f=new Be(-.5).mulThisE(e.clone().addThisE(l.clone().mulThisE(u)));let y=0;r[0].setE(f.divE(t));const _=new Be(r[0].value()),x=new Be(t.value()).mulE(_).addE(new Be(e.value()).mulE(_).addE(new Be(i.value())));return x.isZero()||Mte(r[0],t,e,i,r[0]),s.containsCoordinate(r[0].value())&&y++,u.value()!==0&&f.value()!==0&&(r[y].assign(i.divE(f)),_.set(r[y].value()),x.assign(new Be(t.value()).mulE(_).addE(new Be(e.value()).mulE(_).addE(new Be(i.value())))),x.isZero()||Mte(r[y],t,e,i,r[y]),s.containsCoordinate(r[y].value())&&y++,y===2&&r[0].value()>r[1].value()&&(r[1]=St(r[0],r[0]=r[1]))),y}function z6(t,e,i,s,n,r,o){if(t.value()===0)return El(e,i,s,n,r,o);if(r){let l=1;o[0].set(1);const u=o.slice(l),f=El(t,e.addE(t),s.negate(),n,!1,u);if(f>0){l+=f;for(let _=1;_<l;_++)o[_].eq(nm)&&(o[l-1]=St(o[_],o[_]=o[l-1]),l--)}const y=o.slice(0,l);y.sort((_,x)=>_.value()<x.value()?-1:_.value()>x.value()?1:0);for(let _=0;_<l;++_)o[_]=y[_];return l}return cQe(t,e,i,s,n,o)}function Gge(t,e,i,s,n,r){return(r<e||e<0)&&Je("nth_degree_real_roots"),uQe(t,e,i,s,n)}function dz(t,e,i,s){return{coef0:t.clone(),coef1:e.clone(),coef2:i.clone(),coef3:s.clone(),calcF(n){return this.coef0.clone().mulThis(n).addThisE(this.coef1).mulThis(n).addThisE(this.coef2).mulThis(n).addThisE(this.coef3)},calcDF(n){return this.coef0.clone().mulThis(3).mulThis(n).addThisE(this.coef1.clone().mulThisByPower2(2)).mulThis(n).addThisE(this.coef2)},estimateError(n){const r=Math.abs(n),o=((this.coef0.eps()*r+this.coef1.eps())*r+this.coef2.eps())*r+this.coef3.eps()+this.calcF(n).eps(),l=this.coef0.clone().mulThis(n).mulThis(3).addThisE(this.coef1.clone().mulThis(2)).mulThis(n).addThisE(this.coef2);if(l.isZero()){const u=this.coef0.clone().mulThis(n).mulThis(6).addThisE(this.coef1.clone().mulThis(2));if(u.isZero()){const f=this.coef0.clone().mulThis(6);return Math.pow(6*o/Math.abs(f.value()),1/3)}return Math.sqrt(2*o/Math.abs(u.value()))}return o/Math.abs(l.value())}}}class oQe{updateCoefs(e){if(this.lastDeriv1===e)return this.curCoefs=this.derivCoefs1,void(this.lastUsed=1);if(this.lastDeriv2===e)return this.curCoefs=this.derivCoefs2,void(this.lastUsed=2);let i;this.lastUsed===1?(i=this.derivCoefs2,this.lastDeriv2=e,this.lastUsed=2):(i=this.derivCoefs1,this.lastDeriv1=e,this.lastUsed=1),i.length=this.truePower-e+1;for(let s=0,n=this.truePower-e;s<=n;++s){i[s]=this.coefs[s+e].clone();let r=s+e,o=r--;for(let l=1;l<e;l++)o*=r--;i[s].mulThis(o)}this.curCoefs=i}constructor(e,i,s,n){this.derivCoefs1=[],this.derivCoefs2=[],this.lastDeriv1=-1,this.lastDeriv2=-1,this.lastUsed=-1,this.curCoefs=null,this.coefs=e,this.power=i,this.truePower=0;for(let r=i;r>=1;r--)if(this.coefs[r].value()!==0){this.truePower=r;break}}getMaxDerivative(){return this.truePower+1}getValue(e,i){let s=this.coefs;e===0?s=this.coefs:(this.updateCoefs(e),s=this.curCoefs);const n=new zr(0);let r=1;for(let o=0,l=this.truePower-e;o<=l;++o)n.pe(r*s[o].value()),r*=i;return n.getResult()}getError(e){const i=Math.abs(e),s=new zr(0),n=new Be(1),r=new Be(0);for(let l=0,u=this.power;l<=u;++l)r.addThisE(this.coefs[l].mulE(n)),s.pe(n.value()*this.coefs[l].eps()),n.mulThis(i);s.pe(r.eps());let o=1;for(let l=1;l<=this.truePower;++l){o*=l,this.updateCoefs(l);const u=new Be(1),f=new Be(0);for(let y=0,_=this.truePower-l;y<=_;++y)f.addThisE(this.curCoefs[y].mulE(u)),u.mulThis(e);if(!f.isZero())return Math.pow(o*s.getResult()/Math.abs(f.value()),1/l)}return 0}}function jge(t,e,i,s,n,r){let o=t,l=e,u=l-o;if(!r){let S=s.calcF(t).value(),P=s.calcF(e).value();if((S>0||S>P)&&(l=St(o,o=l),P=St(S,S=P)),S>=0||P<=0)return!1}let f,y=!1,_=i,x=0;for(;x<100;x++){const S=s.calcF(_);if(f=s.calcDF(_),f.isZero())return!1;if(!S.value()||x>3&&S.isZero()){y=!0;break}r||(S.value()<0?o=_:l=_);const P=S.value()/f.value(),A=_-P;r||(A>=o&&A<=l||A>=l&&A<=o)&&Math.abs(P)<=.5*u?(_=A,u=Math.abs(P)):(u=Math.abs(.5*(l-o)),_=.5*(o+l))}return!!y&&(n.set(_,s.estimateError(_)),!0)}function aQe(t,e,i,s,n,r,o,l){return jge(t,e,i.value(),dz(s,n,r,o),l,!1)}class lQe{constructor(e,i,s){this.coefs=Ge(Be,3),this.coefs[0].setE(e),this.coefs[1].setE(i),this.coefs[2].setE(s)}calcF(e){const i=new Be(e);return this.coefs[0].mulE(i).addE(this.coefs[1]).mulE(i).addE(this.coefs[2])}calcDF(e){const i=new Be(e);return Be.st_mulByPower2(this.coefs[0],2).mulE(i).addE(this.coefs[1])}estimateError(e){const i=Math.abs(e),s=(this.coefs[0].eps()*i+this.coefs[1].eps())*i+this.coefs[2].eps()+this.calcF(e).eps(),n=new Be(2).mulE(this.coefs[0]).mul(e).addE(this.coefs[1]);if(n.isZero()){const r=this.coefs[0].value();return Math.sqrt(s/Math.abs(r))}return s/Math.abs(n.value())}}function Mte(t,e,i,s,n){return jge(0,0,t.value(),new lQe(e,i,s),n,!0)}function cQe(t,e,i,s,n,r){const o=Ge(Be,3);let l=0;const u=e.negate().divThisE(t.clone().mulThis(3));n.containsCoordinate(u.value())&&(o[0].setE(u),l=1);const f=Ge(Be,2),y=El(t.mul(3),e.mul(2),i,n,!1,f);if(y<0)return s.isZero()?-1:0;for(let A=0;A<y;A++)n.containsCoordinate(f[A].value())&&o[l++].setE(f[A]);rd(o,0,l,(A,k)=>A.value()<k.value()?-1:A.value()>k.value()?1:0);const _=Ge(Be,5);_[0].set(n.vmin);for(let A=0;A<l;A++)_[1+A].setE(o[A]);_[1+l].set(n.vmax);const x=l+2;let S=1,P=0;{const A=_[0].clone();if(t.clone().mulThisE(A).addThisE(e).mulThisE(A).addThisE(i).mulThisE(A).addThisE(s).isZero()){const k=dz(t,e,i,s);A.setError(k.estimateError(A.value())),r[P]=A,P++,S++}}for(let A=S;A<x;A++){const k=_[A].clone(),$=t.clone().mulThisE(k).addThisE(e).mulThisE(k).addThisE(i).mulThisE(k).addThisE(s).isZero();if($||!_[A].eq(_[A-1])){if($||aQe(_[A-1].value(),_[A].value(),_[A-1].clone().addThisE(_[A]).divThisByPower2(2),t,e,i,s,k)){if(P>0&&k.eq(r[P-1]))continue;if(P>=3&&bt("cubic_polynomial_solver_too_many_roots"),$){const F=dz(t,e,i,s);k.setError(F.estimateError(k.value()))}r[P]=k,P++}if(_[A].value()===n.vmax)break;$&&A++}}return P}function uQe(t,e,i,s,n,r){const o=new oQe(t,e,i,en());let l=0;if(o.truePower===2)l=El(t[2],t[1],t[0],i,s,n);else if(o.truePower===1)l=OE(t[1],t[0],i,n[0]);else{if(o.truePower===0)return t[0].value()?0:-1;{const u=[];u.length=e,l=Jg(o,i,e,u);for(let f=0;f<l;f++)n[f].set(u[f])}}for(let u=0;u<l;u++)n[u].setError(o.getError(n[u].value()));return l}var Ate=_r;class am extends f5{constructor(e){e===void 0||JA(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new Y(0,0)):e.from?(super({XStart:e.from.x,YStart:e.from.y,XEnd:e.to.x,YEnd:e.to.y,...e.vd}),this.m_cp=e.cp.clone()):e.points?(super({XStart:e.points[0].x,YStart:e.points[0].y,XEnd:e.points[2].x,YEnd:e.points[2].y,...e.vd}),this.m_cp=e.points[1].clone()):e.copy?(super(e),this.m_cp=e.copy.m_cp.clone()):(K(0),super({XStart:0,YStart:0,XEnd:0,YEnd:0,...e.vd}),this.m_cp=new Y(0,0))}getBoundary(){return Zh(this)}assignMove(e){return K(0),this}assignCopy(e){return this!==e&&e.copyTo(this),this}construct(e,i,s){this.setStartXY(e),this.m_cp.assign(i),this.setEndXY(s),K4(this)}constructPoints(e){this.setStartXY(e[0]),this.m_cp.assign(e[1]),this.setEndXY(e[2]),K4(this)}getGeometryType(){return me.enumBezier2}queryEnvelope(e){if(e instanceof xe){if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp))return;const i=Ote(this);if(i!==null){const s=new Y;for(const n of i.specialPoints)this.queryCoord2D(n,s),e.mergeNe(s)}else{const s=[];Jge(this,s);const n=new Y;for(const r of s)this.queryCoord2D(r,n),e.mergeNe(n)}}else K(0)}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,3);return this.queryControlPoints(i),e.transformPoints2D(i,3,i),this.setStartXY(i[0]),this.m_cp.assign(i[1]),this.setEndXY(i[2]),void this.afterCompletedModification()}K(0)}createInstance(){return new am({vd:this.m_description})}calculateLength2D(){return q6(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return Y.distance(this.getStartXY(),this.m_cp)+Y.distance(this.getEndXY(),this.m_cp)}queryCoord2D(e,i){this.queryCoord2DExtended(e,i,!1)}queryCoord2DExtended(e,i,s){const n=Ge(Y,3);this.queryControlPoints(n),Hu(n,e,i,s)}queryCoord2DE(e,i){$Qe()}getCoordX(e){if(e<0||e>1){const i=new Y;return this.queryCoord2DExtended(e,i,!0),i.x}if(e<=.5){const i=wo(this.getStartX(),this.m_cp.x,e),s=wo(this.m_cp.x,this.getEndX(),e);return wo(i,s,e)}{const i=Fr(this.getStartX(),this.m_cp.x,e),s=Fr(this.m_cp.x,this.getEndX(),e);return Fr(i,s,e)}}getCoordY(e){if(e<0||e>1){const i=new Y;return this.queryCoord2DExtended(e,i,!0),i.y}if(e<=.5){const i=wo(this.getStartX(),this.m_cp.x,e),s=wo(this.m_cp.x,this.getEndX(),e);return wo(i,s,e)}{const i=Fr(this.getStartY(),this.m_cp.y,e),s=Fr(this.m_cp.y,this.getEndY(),e);return Fr(i,s,e)}}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createQuadraticBezier();if(this.cutBezierIgnoreAttributes(e,i,r),n)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const u=this.m_description.getSemantics(l),f=Ate.getComponentCount(u);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,u,y);r.setStartAttribute(u,y,_)}}for(let l=1;l<o;l++){const u=this.m_description.getSemantics(l),f=Ate.getComponentCount(u);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,u,y);r.setEndAttribute(u,y,_)}}}}queryDerivative(e,i){OQe()}cutBezierIgnoreAttributes(e,i,s){if((e<0||i>1||e>i)&&Je("Quadratic_bezier.cut_bezier_ignore_attributes"),e===0&&i===1)return s.setStartXY(this.getStartXY()),s.m_cp.assign(this.m_cp),void s.setEndXY(this.getEndXY());const n=Ge(Y,3);this.queryControlPoints(n),LE(n,e,i,n),s.constructPoints(n)}splitBezierIgnoreAttributes(e,i,s){K(0)}getAttributeAsDbl(e,i,s){return K(0),0}getClosestCoordinate(e,i){return V6(this,e,Ze.unit(),i)}getClosestCoordinateOnInterval(e,i,s=-1){return V6(this,e,i,!1)}getYMonotonicParts(e,i){return K(0),0}getMonotonicParts(e,i){e.length<2&&Je("");const s=Kge(this);let n=0;if(s.specialPointsCount()===2)return 0;K(e.length>=s.specialPointsCount()-1);for(let r=1,o=s.specialPointsCount();r<o;++r)this.queryCut(s.specialPoints[r-1],s.specialPoints[r],e[n],i),n++;for(let r=0;r<n;++r)i1e(e[r].get());return n}intersectionWithAxis2D(e,i,s,n){const r=Ge(Be,3),o=Ge(Be,2),l=new Ze(0,1);let u=0;if(e){if(r[0]=new Be(this.getStartY()).sub(i),r[1]=new Be(this.m_cp.y).subE(new Be(this.getStartY())).mulThisByPower2(2),r[2]=new Be(this.getStartY()).add(this.getEndY()).subE(new Be(this.m_cp.y).mulThisByPower2(2)),u=El(r[2],r[1],r[0],l,!1,o),s)for(let f=0;f<u;f++)s[f]=this.getCoordX(o[f].value())}else if(r[0]=new Be(this.getStartX()).sub(i),r[1]=new Be(this.m_cp.x).subE(new Be(this.getStartX())).mulThisByPower2(2),r[2]=new Be(this.getStartX()).add(this.getEndX()).subE(new Be(this.m_cp.x).mulThisByPower2(2)),u=El(r[2],r[1],r[0],l,!1,o),s)for(let f=0;f<u;f++)s[f]=this.getCoordY(o[f].value());if(n)for(let f=0;f<u;f++)n[f]=o[f].value();else s&&oz(s,u);return u}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[0,0],n=this.intersectionWithAxis2D(!0,e,s,null);return K(n!==2),n===-1?i:s[0]}isCurve(){return!0}isLine(){return!1}isDegenerate(e){return n7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){K(0)}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const s=new xe;this.queryEnvelope(s);const n=new Ze;return i===0?s.queryIntervalX(n):s.queryIntervalY(n),n}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=Ge(Y,4);this.queryControlPoints(s),LE(s,e.vmin,e.vmax,s),i.setFromPoints(s,4)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp.isEqual(this.m_XStart,this.m_YStart),n=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),s?this.m_cp.setCoordsPoint2D(e):n&&this.m_cp.setCoordsPoint2D(i),this.normalizeAfterEndpointChange()}tToLength(e){return q6(this,e,!0)}lengthToT(e){return SQe(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ge(Y,3);DQe(this,i);const s=i[2],n=i[1],r=new Y,o=s.y*n.x-s.x*n.y;r.x=-(4*s.x+5*n.x)*o/60,r.y=-(4*s.y+5*n.y)*o/60;const l=$te(this);return r.x+=(i[0].x-e.x)*l,r.y+=(i[0].y-e.y)*l,r}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):EQe(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(TQe(this,1)),e)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(e){this.m_cp.setCoordsPoint2D(e),this.afterCompletedModification()}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp),e[2].assign(this.getEndXY())}setControlPoints(e){K(0)}getTangent(e){return K(0),Y.getNAN()}getDerivative(e){return K(0),Y.getNAN()}getCurvature(e){return K(0),0}isIntersecting(e,i,s){return K(0),!1}isIntersectingPoint(e,i,s){return K(0),!1}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}queryAttributeAsDbl(e,i,s,n){K(0)}isMonotoneQuickAndDirty(){return!1}getMonotonicPartParams(e,i){return K(0),0}normalizeAfterEndpointChange(){return!1}orientBottomUp(){K(0)}isDegenerateToLineHelper(e){const i=[e];if(!xj(this,i))return!1;const s=this.getEndXY().sub(this.getStartXY()),n=s.length(),r=this.getControlPoint1();return r.sub(this.getStartXY()),!(Math.abs(r.crossProduct(s))/n>i[0])}copyIgnoreAttributes(e){K(0)}calculateArea2DHelper(){return $te(this)}absNorm(){return MQe(this)}queryEnvelopeW(e,i){const s=Ge(Y,3);this.queryControlPoints(s),RE(s,e,i)}setSegmentFromCoords(e,i){K(0)}snapControlPoints(e){return K(0),!1}writeInBufferStream(e,i){const s=new Float64Array(2);return s[0]=this.m_cp.x,s[1]=this.m_cp.y,e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}readFromBufferStream(e,i){const s=new Float64Array(2);e.queryRange(i,s.length,s,!0,1),this.m_cp.x=s[0],this.m_cp.y=s[1],this.m_cachedValues=null}needsSnapControlPoints(e){return K(0),!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return K(0),!1}setCoordsForIntersector(e,i,s){IQe(this,e,i,s)}copyToImpl(e){const i=e;i.m_cp.setCoordsPoint2D(this.m_cp),t1e(i,Ote(this))}reverseImpl(){}equalsImplTol(e,i){return K(0),!1}equalsImpl(e){const i=e;return!!this.m_cp.equals(i.m_cp)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){K4(this)}intersect(e,i,s,n,r){return Gv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){return CQe(this,e,i.length,i,s)}intersect_(e,i,s,n){return K(0),0}endPointModified(){K4(this)}clearEndPointModified(){K(0)}}am.type=me.enumBezier2;class Bge{constructor(e){return e.coefsT?(this.m_zeroCtor=e.zeroCtor,this.m_elements=e.coefsT.map(i=>i.clone()),K(this.m_elements.length===e.power+1),void this.updatePower()):e.coef0?(this.m_zeroCtor=e.zeroCtor,void(this.m_elements=[e.coef0.clone()])):e.copy?(this.m_zeroCtor=e.copy.m_zeroCtor,void(this.m_elements=e.copy.m_elements.map(i=>i.clone()))):(this.m_zeroCtor=e.zeroCtor,void(this.m_elements=[new this.m_zeroCtor]))}construct(e,i){return this.m_elements=e.map(s=>s.clone()),this.updatePower(),this}construct0(e){return this.m_elements.length=0,this.m_elements.push(e.clone()),this.updatePower(),this}assignCopy(e){return this.m_elements=e.m_elements.map(i=>i.clone()),this.updatePower(),this}assignMove(e){return this.m_elements=e.m_elements,e.m_elements=[],this.updatePower(),this}power(){return this.m_elements.length-1}addElement(e){this.m_elements.push(e.clone())}fmSubThis(e,i){return K(0),this}addThis(e){const i=Math.min(this.power(),e.power());for(let n=0;n<=i;++n)this.m_elements[n].addThis(e.m_elements[n]);const s=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let n=i+1;n<=s;++n)this.m_elements[n]=e.m_elements[n];return this.updatePower(),this}add0(e){return this.m_elements[0].addThis(e),this.updatePower(),this}addNumber0(e){return K(0),this}sub(e){const i=Math.min(this.power(),e.power());for(let n=0;n<=i;++n)this.m_elements[n].subThis(e.m_elements[n]);const s=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let n=i+1;n<=s;++n)this.m_elements[n]=e.m_elements[n].clone(),this.m_elements[n].negateThis();return this.updatePower(),this}sub0(e){return K(0),this}subNumber0(e){return K(0),this}subShifted(e,i){const s=this.power(),n=e.power()+i,r=Math.min(this.power(),n);let o=0;for(let l=i;l<=r;++l)this.m_elements[l].subThis(e.m_elements[o]),o++;if(n<=s)return this.updatePower(),this;this.m_elements.length=n+1;for(let l=s+1;l<this.m_elements.length;++l)this.m_elements[l]=new this.m_zeroCtor;for(let l=r+1;l<=n;++l)this.m_elements[l].subThis(e.m_elements[o++]);return this.updatePower(),this}subShiftedWithCoef(e,i,s){const n=this.power(),r=e.power()+s,o=Math.min(this.power(),r);let l=0;for(let u=s;u<=o;++u)this.m_elements[u].fmSubThis(e.m_elements[l],i),l++;if(r<=n)return this.updatePower(),this;this.m_elements.length=r+1;for(let u=n+1;u<this.m_elements.length;++u)this.m_elements[u]=new this.m_zeroCtor;for(let u=o+1;u<=r;++u)this.m_elements[u].fmSubThis(e.m_elements[l++],i);return this.updatePower(),this}mulThis(e){if(this.constructor===e.constructor){const i=e,s=[];for(let n=0,r=this.power();n<=r;n++)for(let o=0,l=i.power();o<=l;o++){const u=this.m_elements[n].clone();u.mulThis(i.m_elements[o]),n+o<s.length?s[n+o].addThis(u):s.push(u)}this.m_elements=s}else for(let i=0,s=this.power();i<=s;i++)this.m_elements[i].mulThis(e);return this.updatePower(),this}mulElementThis(e){for(let i=0,s=this.power();i<=s;i++)this.m_elements[i].mulThis(e);return this.updatePower(),this}mulNumber0(e){return K(0),this}mulBigint0(e){return K(0),this}mulBigIntThis(e){return K(0),this}mulInt320(e){return K(0),this}div0(e){return K(0),this}absThis(){return K(0),this}div(e,i,s){if(this.power()<e.power())return s.assignCopy(this),void i.setZero();s.setZero(),i.setZero();const n=e.getElement(e.power()),r=this.clone();let o=r.power();const l=r.power()-e.power();let u=l;for(i.m_elements=Ge(i.m_zeroCtor,l+1);;){if(o<e.power()){s.assignMove(r);break}if(o===r.power()){const f=r.getElement(r.power());f.divThis(n),r.subShiftedWithCoef(e,f,r.power()-e.power()),i.m_elements[u]=f.clone()}u--,o--}s.updatePower(),i.updatePower()}divThis(e){return K(0),this}subThis(e){const i=Math.min(this.power(),e.power());for(let n=0;n<=i;++n)this.m_elements[n].subThis(e.m_elements[n]);const s=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let n=i+1;n<=s;++n)this.m_elements[n]=e.m_elements[n].clone(),this.m_elements[n].negateThis();return this.updatePower(),this}sub0This(e){return this.m_elements[0].subThis(e),this.updatePower(),this}subFrom(e,i){K(0)}isZero(){return this.power()===0&&this.m_elements[0].isZero()}negateThis(){for(let e=this.m_elements.length-1;e>=0;e--)this.m_elements[e].negateThis();return this}getElement(e){return this.m_elements[e].clone()}setElement(e,i){return this.m_elements[e]=i.clone(),this}evaluate(e){const i=this.power(),s=this.m_elements[i].clone();for(let n=i-1;n>=0;--n)s.mulThis(e),s.addThis(this.m_elements[n]);return s}equals(e){if(this===e)return!0;if(this.power()!==e.power())return!1;for(let i=this.m_elements.length-1;i>=0;i--)if(!this.m_elements[i].equals(e.m_elements[i]))return!1;return!0}updatePower(){for(let e=this.m_elements.length-1;e>0&&this.m_elements[e].isZero();e--)this.m_elements.pop();return this}setZero(){return this.m_elements.length=1,this.m_elements[0]=new this.m_zeroCtor,this.updatePower(),this}derivative(e){if(this.power()<e)return this.clone().setZero();if(e===0)return this.clone();const i=new this.constructor({coefsT:this.m_elements.slice(e),power:this.power()-e});for(let s=e,n=this.power();s<=n;s++){let r=BigInt(s);for(let o=s-1,l=s-e;o>l;--o)r*=BigInt(o);i.m_elements[s-e].mulBigIntThis(r)}return i.updatePower(),i}derivative1This(){if(this.m_elements.length>1){this.m_elements=this.m_elements.slice(1);for(let e=1,i=this.power();e<=i;e++)this.m_elements[e].mulThis(_t.constructInt32(e+1))}else this.m_elements.length=0,this.m_elements.push(new this.m_zeroCtor);return this}limitPrecisionThis(e){for(let i=this.power();i>=0;--i)this.m_elements[i].limitPrecisionThis(e);return this.updatePower(),this}hiBitIndex(){return this.m_elements.reduce((e,i)=>{const s=i.hiBitIndex();return e<s?s:e},0)}shiftRight(e){return this.m_elements.splice(0,e),this.updatePower(),this}static evaluateCoefs(e,i,s){const n=e.power();s.construct0(e.getElement(0).evaluate(i));for(let r=1;r<=n;++r)s.addElement(e.getElement(r).evaluate(i));s.updatePower()}}class Ti extends Bge{constructor(e){super(e===void 0?{zeroCtor:_t}:{...e,zeroCtor:_t})}clone(){return new Ti({copy:this})}absEvaluate(e){const i=this.power(),s=this.m_elements[i].clone();s.absThis();const n=e.clone();n.absThis();for(let r=i-1;r>=0;--r)s.mulThis(n),s.addThis(this.m_elements[r].abs());return s}}class Fo extends Bge{constructor(e){super(e===void 0?{zeroCtor:Ti}:{...e,zeroCtor:Ti})}clone(){return new Fo({copy:this})}constructFromMPValues(e,i){this.m_elements.length=0;for(let s=0;s<=i;++s)this.m_elements.push(new Ti({coef0:e[s]}));return this.updatePower(),this}}function hQe(){return{polypoly1:new Fo,polypoly2:new Fo,polyX2:new Ti,polyY2:new Ti,polyX2Deriv:new Ti,polyY2Deriv:new Ti,polypolyX1:new Fo,polypolyY1:new Fo,polypolyX1Deriv:new Fo,polypolyY1Deriv:new Fo,lazyPolypolyD1:new Fo,lazyPolypolyD1Deriv:new Fo,lazyPolyD2:new Ti,lazyPolyD2Deriv:null,polypoly11:new Fo,polypoly12:new Fo,tempPp:new Fo,tempPp1:new Fo,tempPp2:new Fo,tempP:new Ti,tempP1:new Ti,tempP2:new Ti}}function Dx(t,e,i,s,n,r,o,l,u,f,y,_,x,S,P,A,k,$=!1){const F=hQe();F.polyX2.construct(o,l),F.polyY2.construct(u,f),F.polypolyX1.constructFromMPValues(t,e),F.polypolyY1.constructFromMPValues(i,s),F.polypoly11.assignCopy(F.polypolyX1),F.polypoly12.assignCopy(F.polypolyY1),y&&(F.lazyPolyD2.construct(y,_),F.polypoly11.mulElementThis(F.lazyPolyD2),F.polypoly12.mulElementThis(F.lazyPolyD2)),n?(F.lazyPolypolyD1.constructFromMPValues(n,r),F.lazyPolypolyD1Deriv=new Fo({copy:F.lazyPolypolyD1}),F.lazyPolypolyD1Deriv.derivative1This(),F.tempPp.assignCopy(F.lazyPolypolyD1),F.tempPp.mulElementThis(F.polyX2),F.polypoly11.subThis(F.tempPp),F.tempPp.assignCopy(F.lazyPolypolyD1),F.tempPp.mulElementThis(F.polyY2),F.polypoly12.subThis(F.tempPp)):(F.polypoly11.sub0This(F.polyX2),F.polypoly12.sub0This(F.polyY2)),F.polypolyX1Deriv.assignCopy(F.polypolyX1),F.polypolyX1Deriv.derivative1This(),F.polypolyY1Deriv.assignCopy(F.polypolyY1),F.polypolyY1Deriv.derivative1This(),n&&(F.polypolyX1Deriv.mulThis(F.lazyPolypolyD1),F.tempPp2.assignCopy(F.lazyPolypolyD1Deriv),F.tempPp2.mulThis(F.polypolyX1),F.polypolyX1Deriv.subThis(F.tempPp2),F.polypolyY1Deriv.mulThis(F.lazyPolypolyD1),F.tempPp2.assignCopy(F.lazyPolypolyD1Deriv),F.tempPp2.mulThis(F.polypolyY1),F.polypolyY1Deriv.subThis(F.tempPp2)),F.polyX2Deriv.assignCopy(F.polyX2),F.polyX2Deriv.derivative1This(),F.polyY2Deriv.assignCopy(F.polyY2),F.polyY2Deriv.derivative1This(),y&&(K(F.lazyPolyD2Deriv===null),F.lazyPolyD2Deriv=new Ti({copy:F.lazyPolyD2}),F.lazyPolyD2Deriv.derivative1This(),F.polyX2Deriv.mulThis(F.lazyPolyD2),F.tempP1.assignCopy(F.lazyPolyD2Deriv),F.tempP1.mulThis(F.polyX2),F.polyX2Deriv.subThis(F.tempP1),F.polyY2Deriv.mulThis(F.lazyPolyD2),F.tempP1.assignCopy(F.lazyPolyD2Deriv),F.tempP1.mulThis(F.polyY2),F.polyY2Deriv.subThis(F.tempP1)),F.polypoly1.assignCopy(F.polypoly11),F.polypoly1.mulElementThis(F.polyX2Deriv),F.tempPp.assignCopy(F.polypoly12),F.tempPp.mulElementThis(F.polyY2Deriv),F.polypoly1.addThis(F.tempPp),F.polypoly2.assignCopy(F.polypolyX1Deriv),F.polypoly2.mulElementThis(F.polyY2Deriv),F.tempPp.assignCopy(F.polypolyY1Deriv),F.tempPp.mulElementThis(F.polyX2Deriv),F.polypoly2.subThis(F.tempPp);let G=[];const V=[];k||(k=[]),A||(A=[]),pz(F.polypoly11,F.polypoly12,F.tempP);let B=57,W=.25*Number.EPSILON;const J=[];let re=B0(F.tempP,x,P,W,B,J);if(re<0)return-1;for(let ce=0;ce<re;ce++){Ti.evaluateCoefs(F.polypoly11,_t.constructDouble(J[ce]),F.tempP1);const ue=[];let ne=B0(F.tempP1,x,S,W,B,ue);if(ne!==0)if(Ti.evaluateCoefs(F.polypoly12,_t.constructDouble(J[ce]),F.tempP2),ne<0){ne=B0(F.tempP2,x,S,W,B,ue),ne<0&&bt("mp_curve_proximity");for(let de=0;de<ne;de++)V.push(rr(ue[de],J[ce]))}else{const de=F.tempP2.absEvaluate(zh);de.mulThis(_t.constructDouble(1e-12));for(let Se=0;Se<ne;Se++){const Pe=F.tempP2.evaluate(_t.constructDouble(ue[Se]));Pe.absThis(),Pe.lt(de)&&V.push(rr(ue[Se],J[ce]))}}}re=V.length,pz(F.polypoly1,F.polypoly2,F.tempP),B=57,W=.25*Number.EPSILON;const se=[];let oe=B0(F.tempP,x,P,W,B,se);oe<0&&(oe=0);for(let ce=0;ce<oe;ce++){Ti.evaluateCoefs(F.polypoly1,_t.constructDouble(se[ce]),F.tempP1);const ue=[];let ne=B0(F.tempP1,x,S,W,B,ue);if(ne!==0)if(Ti.evaluateCoefs(F.polypoly2,_t.constructDouble(se[ce]),F.tempP2),ne<0){if(ne=B0(F.tempP2,x,S,W,B,ue),ne<0)continue;for(let de=0;de<ne;de++)G.push(rr(ue[de],se[ce]))}else{const de=F.tempP2.absEvaluate(zh);de.mulThis(_t.constructDouble(1e-12));for(let Se=0;Se<ne;Se++){const Pe=F.tempP2.evaluate(_t.constructDouble(ue[Se]));Pe.absThis(),Pe.lt(de)&&G.push(rr(ue[Se],se[ce]))}}}if(oe=G.length,re===0&&oe===0)return 0;G=G.concat(V),G.sort((ce,ue)=>$?xf(ce.second,ue.second):xf(ce.first,ue.first));const pe=Sge(G,(ce,ue)=>ce.first===ue.first&&ce.second===ue.second);G=G.slice(0,pe),A.length=0,k.length=0;for(const ce of G)A.push(ce.first),k.push(ce.second);return K(A.length===k.length),k.length}function dQe(t,e,i,s,n,r,o){if(t.power()===0)return t.isZero()?-1:0;const l=t.evaluate(_t.constructInt32(1)).isZero();if(t.power()===1){const u=Uge(t.getElement(1),t.getElement(0),e,r.at(0));return r[0].limitPrecisionThis(s),u!==1?0:(r[0].limitPrecisionThis(s),1)}return t.power()===2?hS(t.getElement(2),t.getElement(1),t.getElement(0),s,e,l,r):t.power()===3?dS(t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),s,e,l,r):t.power()===4?Yge(t.getElement(4),t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),s,e,l,r):Wge(t,e,i,s,l,n,r,o)}function fQe(){return{polyIntersect:new Ti,polyX1:new Ti,polyY1:new Ti,polyX1Deriv:new Ti,polyY1Deriv:new Ti,lazyPolyD1:new Ti,lazyPolyD1Deriv:new Ti,tempP:new Ti,tempP1:new Ti,tempP2:new Ti,polypoly1Proximity:new Fo,polypoly2Proximity:new Fo}}function Hge(t,e,i,s,n,r,o,l,u,f,y){const _=fQe();_.polyX1.construct(t,e),_.polyY1.construct(i,s),_.polyX1Deriv.assignCopy(_.polyX1),_.polyX1Deriv.derivative1This(),_.polyY1Deriv.assignCopy(_.polyY1),_.polyY1Deriv.derivative1This(),_.polyIntersect.assignCopy(_.polyX1),_.polyIntersect.mulThis(_.polyX1),_.polyIntersect.mulElementThis(o[0]),_.tempP.assignCopy(_.polyY1),_.tempP.mulThis(_.polyY1),_.tempP.mulElementThis(o[1]),_.polyIntersect.addThis(_.tempP),_.polyIntersect.add0(o[2]);{const V=o[0].clone(),B=V.clone();B.sqrThis();const W=o[1].clone(),J=W.clone();J.sqrThis();const re=o[2].clone(),se=V.clone();se.subThis(W),_.polyX1.construct(t,e),_.polyX1Deriv.assignCopy(_.polyX1),_.polyX1Deriv.derivative1This(),_.polyY1.construct(i,s),_.polyY1Deriv.assignCopy(_.polyY1),_.polyY1Deriv.derivative1This(),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1),_.tempP.mulElementThis(J),_.tempP.mulElementThis(re),_.polypoly1Proximity.construct0(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(W.mul(se).mul(re).ldexpThis(1)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1),_.tempP.mulElementThis(V.mul(J)),_.tempP1.assignCopy(_.polyY1),_.tempP1.mulThis(_.polyY1),_.tempP1.mulElementThis(B.mul(W)),_.tempP.addThis(_.tempP1),_.tempP.add0(se.mul(se).mul(re)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulElementThis(se.mul(V).mul(W).ldexpThis(1)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.construct0(V.mul(se).mul(se)),_.polypoly1Proximity.addElement(_.tempP),_.polypoly1Proximity.updatePower(),_.tempP.construct0(Bo),_.polypoly2Proximity.construct0(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1Deriv),_.tempP1.assignCopy(_.polyY1),_.tempP1.mulThis(_.polyY1Deriv),_.tempP.addThis(_.tempP1),_.tempP.mulElementThis(V.mul(W)),_.polypoly2Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1Deriv),_.tempP.mulElementThis(se.mul(V)),_.polypoly2Proximity.addElement(_.tempP),_.polypoly2Proximity.updatePower()}const x=[],S=[];y||(y=[]);let P=2*_.polyIntersect.power()+58;const A=.5*Number.EPSILON,k=B0(_.polyIntersect,l,u,A,P,S);if(k<0)return-1;pz(_.polypoly1Proximity,_.polypoly2Proximity,_.tempP),P=2*_.tempP.power()+58;let $=B0(_.tempP,l,u,A,P,x);if($<0&&($=0),k===0&&$===0)return 0;const F=x.concat(S);y.length=F.length,dn(y,F,0,0,F.length),Ax(y);const G=Sge(y,(V,B)=>xf(V,B)===0);return y.length=G,y.length}function Uge(t,e,i,s){return t.isZero()?e.isZero()?-1:0:(s.setThis(e),s.negateThis(),s.divThis(t),i.isEmpty()||i.containsCoordinate(s.value())?1:0)}function hS(t,e,i,s,n,r,o){if(t.isZero())return r?(o[0].setInt32(1),n.containsCoordinate(1)?1:0):Uge(e,i,n,o[0]);if(r){let S=2;return o[0].setInt32(1),i.equals(t)?(o[1].setInt32(1),S=1):o[1].setThis(i.div(t)),n.containsCoordinate(o[1].value())||(S=1),n.containsCoordinate(o[0].value())||(S--,o[0].setThis(o[1])),S===2&&o[0].value()>o[1].value()&&(o[1]=St(o[0],o[0]=o[1])),S}const l=e.clone();l.sqrThis();const u=t.clone();if(u.mulThis(i).ldexpThis(2).negateThis().addThis(l),u.LZ())return 0;const f=s+2,y=_t.sqrt(u,f),_=y.clone();e.LZ()&&_.negateThis(),_.addThis(e).limitPrecisionThis(f).ldexpThis(-1).negateThis();let x=0;return o[0].setThis(_).divThis(_t.constructAssign(t,f)).limitPrecisionThis(s),(n.isEmpty()||n.containsCoordinate(o[0].value()))&&x++,y.isZero()||_.isZero()||(o[x].setThis(i).divThis(_).limitPrecisionThis(s),(n.isEmpty()||n.containsCoordinate(o[x].value()))&&x++,x===2&&o[0].gt(o[1])&&(o[1]=St(o[0],o[0]=o[1]))),x}function dS(t,e,i,s,n,r,o,l){if(t.isZero())return hS(e,i,s,n,r,o,l);const u=(pe,ce)=>{if(pe>0){let ue=ce+pe;for(let ne=1;ne<ue;ne++)l[ne].equals(l[0])&&(l[ue-1]=St(l[ne],l[ne]=l[ue-1]),ue--);ce=ue}return rd(l,0,ce,(ue,ne)=>ue.compare(ne)),ce};if(s.isZero()){let pe=0;return r.containsCoordinate(0)&&(l[0].setInt32(0),pe=1),u(hS(t,e,i,n,r,o,l.slice(1)),pe)}if(o){let pe=0;r.containsCoordinate(1)&&(l[0].setInt32(1),pe=1);const ce=e.add(t),ue=s.negate(),ne=t.add(ce).add(ue).isZero();return u(hS(t,ce,ue,n,r,ne,l.slice(pe)),pe)}const f=new _t,y=new _t,_=new _t,x=e.clone();if(x.isZero())y.setThis(i),y.divThis(t),_.setThis(s),y.divThis(t);else{x.divThis(t).divDoubleThis(3).negateThis();const pe=e.clone();pe.sqrThis();const ce=t.clone();ce.sqrThis(),y.setThis(t),y.mulThis(i).mulDoubleThis(3).subThis(pe).divThis(ce).divDoubleThis(3),_.setThis(pe),_.mulThis(e),_.ldexpThis(1),f.setThis(t),f.mulThis(e).mulThis(i).mulDoubleThis(9),_.subThis(f),f.setThis(ce),f.mulThis(s).mulDoubleThis(27),_.addThis(f),_.divThis(ce).divThis(t).divDoubleThis(27)}if(y.isZero()){const pe=_.clone();return pe.negateThis(),pe.isZero()?(l[0].setThis(x),r3(r,n,l,1)):(l[0].setThis(_t.cubicRoot(_,n).add(x)),r3(r,n,l,1))}const S=_.clone();if(S.sqrThis().ldexpThis(-2),f.setThis(y.clone()),f.sqrThis().mulThis(y).divDoubleThis(27),S.addThis(f),S.isZero())return l[0].setThis(_),l[0].mulDoubleThis(3).divThis(y),l[1].setThis(l[0]),l[1].negateThis(),l[1].ldexpThis(-1),l[0].addThis(x),l[1].addThis(x),r3(r,n,l,2);if(S.GZ())return S.setThis(_t.sqrt(S,n+8)),f.setThis(_),f.ldexpThis(-1).negateThis(),f.addThis(S),l[0].setThis(_t.cubicRoot(f,n+8)),f.setThis(_),f.ldexpThis(-1).negateThis(),f.subThis(S),l[0].addThis(_t.cubicRoot(f,n+8)),l[0].addThis(x),r3(r,n,l,1);f.setThis(y),f.divDoubleThis(3).negateThis(),K(f.GEZ());const P=_t.sqrt(f,n+8),A=P.clone();A.negateThis(),A.addThis(x),P.addThis(x);const k=_t.constructDouble(r.isEmpty()?-Number.MAX_VALUE:r.vmin),$=_t.constructDouble(r.isEmpty()?Number.MAX_VALUE:r.vmax),F=new Ti({zeroCtor:_t});F.construct0(s),F.addElement(i),F.addElement(e),F.addElement(t);const G=new Ti({copy:F});G.derivative1This();let V=0;const B=Ge(_t,4);B[V++].setThis(k),A.gt(k)&&A.lt($)&&B[V++].setThis(A),P.gt(k)&&P.lt($)&&B[V++].setThis(P),B[V++].setThis($);const W=3*n;let J=52,re=Number.EPSILON;for(;J<W;)2*J<=W?(re*=re,J*=2):(re*=Number.EPSILON,J+=52);J+=2;let se=0,oe=!1;for(let pe=1;pe<V;pe++)if(mz(F,G,B[pe-1],B[pe],re,J,l[0])){se=1,oe=pe+1<V;break}if(!se)return 0;if(oe){const pe=new Ti({zeroCtor:_t,coef0:l[0]});pe.negateThis(),pe.addElement(zh);const ce=new Ti({zeroCtor:_t}),ue=new Ti({zeroCtor:_t});F.div(pe,ce,ue),K(ce.power()===2),K(ue.power()===0);const ne=hS(ce.getElement(2),ce.getElement(1),ce.getElement(0),n,r,!1,l.slice(1));K(ne>=0&&ne<=2),se+=ne}return r3(r,n,l,se)}function Yge(t,e,i,s,n,r,o,l,u){if(t.isZero())return dS(e,i,s,n,r,o,l,u);const f=(A,k)=>{if(A>0){let $=k+A;for(let F=1;F<$;F++)u[F].equals(u[0])&&(u[$-1]=St(u[F],u[F]=u[$-1]),$--);k=$}return rd(u,0,k,($,F)=>$.compare(F)),k};if(n.isZero()){let A=0;return o.containsCoordinate(0)&&(u[0].setInt32(0),A=1),f(dS(t,e,i,s,r,o,l,u.slice(A)),A)}const y=new Ti({zeroCtor:_t,coef0:n});if(y.addElement(s),y.addElement(i),y.addElement(e),y.addElement(t),l){let A=0;o.containsCoordinate(1)&&(u[0].setInt32(1),A=1);const k=new Ti({zeroCtor:_t,coef0:_t.constructInt32(-1)});k.addElement(_t.constructInt32(1));const $=new Ti({zeroCtor:_t}),F=new Ti({zeroCtor:_t});return y.div(k,$,F),f(dS($.power()===3?$.getElement(3):Bo.clone(),$.power()>=2?$.getElement(2):Bo.clone(),$.power()>=1?$.getElement(1):Bo.clone(),$.getElement(0),r,o,$.evaluate(zh).isZero(),u.slice(A)),A)}if(y.getElement(0).isZero()){let A=0;for(o.containsCoordinate(0)&&(A=1,u[0].setDouble(0));y.getElement(0).isZero()&&y.power()>0;)y.shiftRight(1);const k=dS(y.power()===3?y.getElement(3):Bo.clone(),y.power()>=2?y.getElement(2):Bo.clone(),y.power()>=1?y.getElement(1):Bo.clone(),y.getElement(0),r,o,!1,u.slice(A));return k>0&&(A+=k),rd(u,0,A,($,F)=>$.compare(F)),A}let _=52,x=Number.EPSILON;for(;_<r;)2*_<=r?(x*=x,_*=2):(x*=Number.EPSILON,_+=52);_+=2;const S=Zge(y),P=_t.constructDouble(Math.max(Math.abs(o.vmax),Math.abs(o.vmin)));return x=(S.lt(P)?S:P).mul(_t.constructDouble(x)).toDouble(),Wge(y,o,x,_,l,!1,u,4)}function pQe(t,e){let i=t,s=e;s.power()>i.power()&&(s=St(i,i=s));const n=i.power()-s.power(),r=new Ti({copy:i.getElement(i.power())});i.mulThis(s.getElement(s.power()));for(let o=0,l=i.power();o<l;o++)if(o>=n){const u=new Ti({copy:s.getElement(o-n)});u.mulThis(r);const f=i.getElement(o).sub(u);i.setElement(o,f)}i.setElement(i.power(),i.getElement(i.power()).setZero()),i.updatePower(),fz(i)}function fz(t){let e=0;for(;e<t.power()&&t.getElement(e).isZero();)e++;return e>0&&(t.shiftRight(e),!0)}function pz(t,e,i){const s=t.clone(),n=e.clone();for(fz(s),fz(n);s.power()!==0||n.power()!==0;)pQe(s,n);i.assignMove(s.getElement(0))}function B0(t,e,i,s,n,r){r.length=0;const o=t.power(),l=Ge(_t,2*o+4),u=dQe(t,i||Ze.unit(),s,n,!1,l,l.length);if(u>0){r.length=0;for(let f=0;f<u;f++){const y=l[f].value();f>0&&y<=r.at(-1)||r.push(y)}return r.length}return u}function Xge(t,e,i){if(K(i>=1),t.power()===0)return t.isZero()?-1:0;const s=t.getElement(0);return s.negateThis(),s.divThis(t.getElement(1)),e[0].setThis(s),1}function mQe(t,e,i,s){if(t.power()<2)return Xge(t,i,s);K(s>=1);let n=t.getElement(1);n.mulThis(t.getElement(1));const r=t.getElement(0);if(r.mulThis(t.getElement(2)),r.ldexpThis(2),n.subThis(r),n.LZ())return 0;if(n.isZero()){const f=t.getElement(1);return f.negateThis(),f.divThis(t.getElement(2)),f.ldexpThis(-1),f.limitPrecisionThis(e),i[0].setThis(f),1}K(s>=2),n=_t.sqrt(n,e+8);const o=t.getElement(1);o.negateThis();const l=o.clone();l.subThis(n),l.divThis(t.getElement(2)),l.ldexpThis(-1),l.limitPrecisionThis(e);const u=o.clone();return u.addThis(n),u.divThis(t.getElement(2)),u.ldexpThis(-1),u.limitPrecisionThis(e),l.lt(u)?(i[0].setThis(l),i[1].setThis(u)):(i[1].setThis(l),i[0].setThis(u)),2}function mz(t,e,i,s,n,r,o){let l=i.clone(),u=s.clone();l.limitPrecisionThis(r),u.limitPrecisionThis(r);let f=t.evaluate(l);f.limitPrecisionThis(r+2);let y=t.evaluate(u);if(y.limitPrecisionThis(r+2),f.GEZ()&&y.GEZ()||f.LEZ()&&y.LEZ())return f.absLessAbs(y)?(o=l,f.isZero()):(o=u,y.isZero());const _=y.LZ();_&&(y=St(f,f=y),u=St(l,l=u));const x=_?u:l,S=_?l:u,P=l.add(u).ldexpThis(-1);P.limitPrecisionThis(r);const A=u.sub(l);A.limitPrecisionThis(r),A.absThis();const k=A.clone();let $=t.evaluate(P),F=e.evaluate(P);const G=new Ti({copy:t}),V=new Ti({copy:e});{const Re=Math.max(t.hiBitIndex(),e.hiBitIndex()),Oe=zh.clone();Oe.ldexpThis(-(r+2));for(let we=64;we<Re;){G.limitPrecisionThis(we),V.limitPrecisionThis(we);const Fe=G.evaluate(P),it=V.evaluate(P),vt=Fe.sub($),ot=it.sub(F);if(vt.divThis($).absThis().lt(Oe)&&(F.isZero()||ot.divThis(F).absThis().lt(Oe)))break;G.assignCopy(t),V.assignCopy(e),we=Math.min(we+64,Re)}$.limitPrecisionThis(r+2),F.limitPrecisionThis(r+2)}const B=1,W=4;let J=W;const re=2;let se=1,oe=0,pe=0,ce=B;const ue=32,ne=_t.constructDouble(.25*n),de=_t.constructDouble(.5001);let Se=0;const Pe=300;for(;++Se<Pe;){if(Se>ue&&oe>0||F.isZero()||ce===re&&oe>1||ce===B&&J<W)ce=B,se>1&&se--;else if(ce=re,pe>1){const it=A.mul(F);it.absThis(),it.ldexpThis(-3),it.absLessAbs($)&&se++}A.setThis(k);const Re=new _t;let Oe=!1;if(ce===B)do{if(pe>2){const it=A.clone();if(it.absThis(),it.ldexpThis(4),S.sub(x).ldexpThis(-1).gt(it)){if(P.equals(x)){Re.setThis(P),P.setThis(x.add(it)),P.limitPrecisionThis(r),k.setThis(P.sub(Re));break}if(P.equals(S)){Re.setThis(P),P.setThis(S.sub(it)),P.limitPrecisionThis(r),k.setThis(P.sub(Re));break}}}k.setThis(u.sub(l)),k.ldexpThis(-1),k.limitPrecisionThis(r),Re.setThis(P),P.setThis(l.add(k)),P.limitPrecisionThis(r),P.lt(x)?P.setThis(x):P.gt(S)&&P.setThis(S),Oe=l.equals(P)||u.equals(P)}while(!1);else for(;;){if(k.setThis($.div(F)),k.limitPrecisionThis(r),se!==1&&k.mulDoubleThis(se),Re.setThis(P),P.subThis(k),P.limitPrecisionThis(r),Oe=P.equals(Re),P.lt(x)){if(se>1){P.setThis(Re),se--;continue}k.setThis(Re.sub(x)),P.setThis(x)}else if(P.gt(S)){if(se>1){P.setThis(Re),se--;continue}k.setThis(Re.sub(S)),P.setThis(S)}break}if(Oe||k.absLessAbs(ne)){Re.equals(P)||($=G.evaluate(P),$.limitPrecisionThis(r+2));break}$=G.evaluate(P),$.limitPrecisionThis(r+2),F=V.evaluate(P),F.limitPrecisionThis(r+2);const we=l.clone(),Fe=u.clone();$.LZ()?(f.setThis($),l.setThis(P)):(y.setThis($),u.setThis(P)),ce===re&&(l.equals(we)&&u.equals(Fe)||pe>1&&!k.absLessAbs(de.mul(A)))?oe++:oe=0,ce===B?(J++,pe=0):(J=0,pe++)}return Se>=Pe&&bt("Root_finder iterations exceeded"),o.setThis(P),!0}function gQe(t,e,i,s,n){const r=t.evaluate(i);if(r.isZero())return!0;const o=_t.constructDouble(.5*s),l=i.clone();l.subThis(o);const u=t.evaluate(l),f=i.clone();f.addThis(o);const y=t.evaluate(f);if(u.LZ()&&y.GZ()||u.GZ()&&y.LZ()||(r.GZ()?u.LEZ()||y.LEZ():u.GEZ()||y.GEZ()))return!0;const _=u.LEZ()&&y.LEZ(),x=u.GEZ()&&y.GEZ();let S=!1;return _?r.gt(u)&&r.gt(y)&&(S=!0):x&&r.lt(u)&&r.lt(y)&&(S=!0),!!S&&r.absThis().lt(_t.constructDouble(1e-17))}function Wge(t,e,i,s,n,r,o,l){K(i>0),K(l>=t.power());const u=o,f=[];let y=[];const _=new Ti({zeroCtor:t.m_zeroCtor}),x=new Ti({zeroCtor:t.m_zeroCtor}),S=new Ti({zeroCtor:t.m_zeroCtor}),P=_t.constructDouble(i),A=_t.constructDouble(e.vmin),k=_t.constructDouble(e.vmax),$=A.sub(P),F=k.add(P),G=Zge(t),V=G.clone();if(V.negateThis(),$.lt(V))$.setThis(V.sub(P));else if($.gt(G))return 0;if(F.gt(G))F.setThis(G.add(P));else if(F.lt(V))return 0;let B=t,W=null;if(n){const de=new Ti({coef0:_t.constructInt32(-1)});de.addElement(zh),W=new Ti,B=W;const Se=new Ti,Pe=new Ti;for(t.div(de,Se,Pe),W.assignCopy(Se);B.evaluate(zh).isZero();)B.div(de,Se,Pe),W.assignCopy(Se)}let J=!1;if(B.power()>0&&B.getElement(0).isZero())for(J=!0,W||(W=new Ti({copy:B}),B=W);B.getElement(0).isZero();)W.shiftRight(1);let re=s+2*B.power()+2,se=i/Math.pow(2,B.power()+2),oe=re;if(Bo.gt($)&&Bo.lt(F)){for(let de=0,Se=B.power();de<Se;de++)if(B.getElement(de).isZero()){f.push(Bo.clone());break}}for(let de=B.power()-1;de>0;de--)if(se*=2,re-=2,oe-=2,B.power()-de!=1)if(B.power()-de!=2){x.assignMove(S),S.assignMove(B.derivative(de-1));let Se=[];for(let Pe=0,Re=y.length;Pe<Re;++Pe)if(y[Pe].first.lte(y[Pe].second)){const Oe=new _t;if(mz(x,_,y[Pe].first,y[Pe].second,se,re,Oe)){f.push(Oe);let we=Oe.sub(P);we.limitPrecisionThis(oe),Se.push(rr(y[Pe].first,we)),we=Oe.add(P),we.limitPrecisionThis(oe),Se.push(rr(we,y[Pe].second))}else Se.push(y[Pe])}y=Se,Se=[],_.assignMove(x)}else{x.assignMove(B.derivative(de));const Se=mQe(x,re,u,l);K(Se>=0&&Se<=2);for(let Pe=0;Pe<Se;Pe++)u[Pe].gt($)&&u[Pe].lt(F)&&!u[Pe].isZero()&&f.push(u[Pe].clone());if(f.length>1&&f.sort((Pe,Re)=>Pe.compare(Re)),f.length>0){let Pe=f[0].sub(P);Pe.limitPrecisionThis(oe),y.push(rr($.clone(),Pe));let Re=f.length===1?F.clone():f[1].sub(P);Pe=f[0].add(P),Pe.limitPrecisionThis(oe),Re.limitPrecisionThis(oe),y.push(rr(Pe,Re)),f.length>1&&(Re=f.length===2?F.clone():f[2].sub(P),Re.limitPrecisionThis(oe),Pe=f[1].add(P),Pe.limitPrecisionThis(oe),y.push(rr(Pe,Re)),f.length>2&&(Pe=f[2].add(P),Pe.limitPrecisionThis(oe),y.push(rr(Pe,F.clone()))))}else y.push(rr($.clone(),F.clone()));_.assignCopy(x),S.assignMove(B.derivative(de-1))}else x.assignMove(B.derivative(de)),Xge(x,u,l)===1&&(u[0].gt($)&&u[0].lt(F)&&!u[0].isZero()&&f.push(u[0].clone()),_.assignMove(x),S.assignMove(B.derivative(de-1)));f.sort((de,Se)=>de.compare(Se)),y.length===0&&(_.assignMove(B.derivative(B.power())),_.isZero()||y.push(rr($.clone(),F.clone())));let pe=0,ce=0,ue=0;const ne=new _t;for(;;){if(ce<y.length){if(y[ce].first.gt(y[ce].second)){ce++;continue}let de=!1;if(ue<f.length&&f[ue].lt(y[ce].first)&&(de=!0),!de){mz(B,_,y[ce].first,y[ce].second,i,s,ne)&&(ne.lt(A)?u[pe++].setThis(A):ne.gt(k)?u[pe++].setThis(k):u[pe++].setThis(ne)),ce++;continue}}if(!(ue<f.length))break;ue!==0&&f[ue-1].equals(f[ue])||gQe(B,_,f[ue],i)&&(ne.setThis(f[ue]),ne.lt(A)?ne.setThis(A):ne.gt(k)&&ne.setThis(k),pe!==0&&u[pe].equals(ne)||u[pe++].setThis(ne)),ue++}return J&&Bo.gt($)&&Bo.lt(F)&&(u[pe++].setThis(Bo),rd(u,0,pe,(de,Se)=>de.compare(Se))),n&&zh.gt($)&&zh.lt(F)&&(u[pe++].setThis(zh),rd(u,0,pe,(de,Se)=>de.compare(Se))),pe}function Zge(t){const e=t.getElement(t.power());e.limitPrecisionThis(53);const i=Bo.clone();for(let s=0,n=t.power();s<n;s++){const r=t.getElement(s);r.limitPrecisionThis(53),r.divThis(e).absThis(),r.gt(i)&&i.setThis(r)}return i.addThis(zh),i.mulThis(_t.constructDouble(1+100*Number.EPSILON)),i}function r3(t,e,i,s){let n=s;if(!t.isEmpty()){n=0;for(let r=0;r<s;++r)t.containsCoordinate(i[r].value())&&(n!==r&&i[n].setThis(i[r]),n++)}n>1&&(i[0].gt(i[1])&&(i[1]=St(i[0],i[0]=i[1])),n>2&&(i[0].gt(i[2])&&(i[2]=St(i[0],i[0]=i[2])),i[1].gt(i[2])&&(i[2]=St(i[1],i[1]=i[2]))));for(let r=0;r<n;++r)i[r].limitPrecisionThis(e);return n}function G2(t,e,i,s,n,r){return _Qe(t,e,i,r,s,n)}function yQe(t,e,i,s,n,r){let o=n;if(s)return r[0]=1,o=.5*(e-t)*(i(t)+i(e)),o;const l=r[0],u=(e-t)/l,f=t,y=new zr(0);for(let _=1;_<=r[0];++_){const x=(_-.5)*u;y.add(i(f+x))}return o=.5*(o+(e-t)*y.getResult()/l),r[0]*=2,o}function vQe(t,e,i,s,n,r,o){let l=0,u=Math.abs(n-i[t]);const f=Vi(e,Number.NaN),y=Vi(e,Number.NaN);for(let P=0;P<e;++P){const A=Math.abs(n-i[t+P]);A<u&&(l=P,u=A),f[P]=s[t+P],y[P]=s[t+P]}let _=0,x=0,S=0;r[0]=s[t+l],l--;for(let P=1;P<e;P++){for(let A=0;A<e-P;A++){if(x=i[t+A]-n,S=i[t+A+P]-n,_=x-S,_===0)return!1;const k=(f[A+1]-y[A])/_;f[A]=x*k,y[A]=S*k}if(2*(l+1)<e-P){const A=l+1;o[0]=f[A]}else{const A=l;o[0]=y[A],l--}r[0]+=o[0]}return!0}function _Qe(t,e,i,s,n,r){if(i<e&&Je("xTo < xFrom"),i===e)return 0;const o=[0];let l=Number.MAX_VALUE;const u=[Number.MAX_VALUE];let f=0;const y=32,_=Vi(y+1,Number.NaN),x=Vi(y+1,Number.NaN),S=[0];_[0]=1;let P=0,A=0;for(let k=0;k<y;k++){if(f=yQe(e,i,s,k===0,f,S),x[k]=f,k+1>=t){vQe(k+1-t,t,_,x,0,o,u)||bt("polynomial_interpolation");const $=n*Math.abs(o[0])+r,F=Math.abs(l-o[0]);if(F<=$&&Math.abs(u[0])<=$){if(P++,P>1&&(F<=.1*A||A===0||P>2))return o[0]}else P=0;A=F,l=o[0]}x[k+1]=x[k],_[k+1]=.25*_[k]}return o[0]}class ys{static constructPoint2D(e){return new ys(_t.constructDouble(e.x),_t.constructDouble(e.y))}constructor(e,i){if(e===void 0)return this.x=new _t().setNAN(),void(this.y=new _t().setNAN());this.x=e.clone(),this.y=i.clone()}assignPoint2D(e){return this.x.setDouble(e.x),this.y.setDouble(e.y),this}setCoords(e,i){return this.x.setThis(e),this.y.setThis(i),this}asPoint2D(){return new Y(this.x.value(),this.y.value())}crossProduct(e){return this.x.mul(e.y).sub(this.y.mul(e.x))}leftPerpendicularThis(){const e=this.x.clone();this.x=this.y.clone().negate(),this.y=e}clone(){return new ys(this.x,this.y)}dotProduct(e){return this.x.mul(e.x).add(this.y.mul(e.y))}add(e){return new ys(this.x.add(e.x),this.y.add(e.y))}sub(e){return new ys(this.x.sub(e.x),this.y.sub(e.y))}sqrLength(){return this.x.sqr().addThis(this.y.sqr())}mulThis(e){return this.x.mulThis(e),this.y.mulThis(e),this}mul(e){return this.clone().mulThis(e)}}class bQe{constructor(){this.area=Number.NaN,this.centroid_x=Number.NaN,this.centroid_y=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}let xQe=class{constructor(t,e){this.b=t,this.len=e}getMaxDerivative(){return 1}getValue(t,e){return t===0?this.len-q6(this.b,e,!1):0}getError(t){return K(0),0}};function wQe(t,e,i,s,n){let r=!0;const o=Ge(Y,3);t.queryControlPoints(o);let l=r?0:1,u=o[1][l]-o[0][l],f=o[2][l]-o[0][l];const y=G2(5,e,i,s,n,x=>{let S;if(x<=.5){const P=wo(0,u,x),A=wo(u,f,x);S=wo(P,A,x)}else{const P=Fr(0,u,x),A=Fr(u,f,x);S=Fr(P,A,x)}return S*Nte(o,1,x).length()});r=!1,l=r?0:1,u=o[1][l]-o[0][l],f=o[2][l]-o[0][l];const _=G2(5,e,i,s,n,x=>{let S;if(x<=.5){const P=wo(0,u,x),A=wo(u,f,x);S=wo(P,A,x)}else{const P=Fr(0,u,x),A=Fr(u,f,x);S=Fr(P,A,x)}return S*Nte(o,1,x).length()});return new Y(y,_)}function K4(t){t.m_cachedValues=null}function Kge(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new bQe;return Jge(t,e.specialPoints),t1e(t,e),e}function Jge(t,e){const i=Ge(Y,3);t.queryControlPoints(i);const s=Ge(Be,8);s[0].set(0);let n=1;{const r=Ge(Be,3);kQe(i,r,!1);const o=Ge(Be,2),l=new Ze(0,1);let u=OE(r[2].mul(2),r[1],l,o[0]);u<0&&(u=0);for(let f=0;f<u;f++)Ms(o[f].value(),0,1)||(s[n]=o[f],n++)}{const r=Ge(Be,3);NQe(i,r,!1);const o=Ge(Be,2),l=new Ze(0,1);let u=OE(r[2].mul(2),r[1],l,o[0]);u<0&&(u=0);for(let f=0;f<u;f++)Ms(o[f].value(),0,1)||(s[n]=o[f],n++)}if(s[n].set(1),n++,n>2){rd(s,0,n,(u,f)=>u.value()-f.value());let r=0,o=s[0].value(),l=1;for(let u=1;u<n;u++)s[u].eq(s[u-1])?(o+=s[u].value(),l++):(l>1&&(o/=l,s[r].set(o)),r++,s[r]=s[u],o=s[u].value(),l=1);r++,n=r}s[0].set(0),s[n-1].set(1),e.length=n;for(let r=0;r<n;r++)e[r]=s[r].value()}function q6(t,e,i){const s=Ge(Y,3);return t.queryControlPoints(s),Qge(s,e,i)}function Qge(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+Qge(t,1,!1)}if(e===1)return Dte(t);const s=Ge(Y,3);return gz(t,e,s,null),Dte(s)}function Dte(t){if(t[0].equals(t[1]))return Y.distance(t[2],t[0]);if(t[1].equals(t[2]))return Y.distance(t[0],t[2]);const e=Y.distance(t[0],t[1])+Y.distance(t[2],t[1]),i=Y.distance(t[0],t[2]);if(e-i<=e*Number.EPSILON)return i;const s=1,n=Ge(Y,3);Pj(t,n,!0);const r=4*(Xi(n[2].x)+Xi(n[2].y)),o=2*(n[2].x*n[1].x+n[2].y*n[1].y),l=Xi(n[1].x)+Xi(n[1].y);if(1e-14*(Math.abs(o)+Math.abs(l))>=Math.abs(r))return 1e-14*Math.abs(l)>=Math.abs(o)?Math.sqrt(l)*s:(K(0),2/(3*o)*(Math.pow(o*s+l,1.5)-Math.pow(l,1.5)));const u=o/r,f=l/r,y=f-u*u,_=s+u;if(y===0)return u>=0&&_>=0||u<=0&&_<=0?Math.abs(.5*Math.sqrt(r)*(_*_-u*u)):.5*Math.sqrt(r)*(_*_+u*u);const x=Math.sqrt(y+_*_),S=Math.sqrt(f);return .5*Math.sqrt(r)*(_*x-u*S+y*Math.log(Math.abs((_+x)/(u+S))))}function kte(t,e){return K(0),Y.getNAN()}function Nte(t,e,i){{const s=t[1].sub(t[0]).mul(1-i).add(t[2].sub(t[1]).mul(i));return s.mulThis(2),s}}function SQe(t,e,i){const s=q6(t,1,!1);if(e<=0)return e;if(e>=s)return e-s+1;const n=[0];return Jg(new xQe(t,e),Ze.unit(),1,n)!==1&&bt(""),n[0]}function $te(t){const e=Ge(Y,3);return t.queryControlPoints(e),e1e(e)}function e1e(t){return-t[1].sub(t[0]).crossProduct(t[2].sub(t[0]))/3}function EQe(t){const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function Ote(t){return t.m_cachedValues}function t1e(t,e){t.m_cachedValues=e}function V6(t,e,i,s,n){ME(Ze.unit().contains(i),"QuadraticBezierHelper::getClosestCoordinateSegment");const r=Ge(Y,3);t.queryControlPoints(r);let o=Number.MAX_VALUE;const l=[0],u=o7(r,e,l);if(i.containsCoordinate(l[0]))o=Y.distance(e,u);else{l[0]=i.vmin,Hu(r,l[0],u),o=Y.distance(u,e);const f=new Y;Hu(r,i.vmax,f);const y=Y.distance(f,e);o>y&&(u.setCoordsPoint2D(f),l[0]=i.vmax,o=y)}if(!s)return l[0];if(i.vmin<=0){const f=new Y;t.queryCoord2DExtended(-1,f,!0);const y=new Y;t.queryCoord2D(i.vmin,y);const _=new si({start:f,end:y}),x=_.getClosestCoordinate(e,!0);if(x<1){const S=_.getCoord2D(x),P=Y.distance(S,e);P<o&&(o=P,l[0]=x-1,u.assign(S))}}if(i.vmin>=1){const f=new Y;t.queryCoord2DExtended(2,f,!0);const y=new Y;t.queryCoord2D(i.vmax,y);const _=new si({start:y,end:f}),x=_.getClosestCoordinate(e,!0);if(x>0){const S=_.getCoord2D(x),P=Y.distance(S,e);P<o&&(o=P,l[0]=1+x,u.assign(S))}}return l[0]}function o7(t,e,i){const s=t[2].sub(t[1]).sub(t[1].sub(t[0])),n=t[1].sub(t[0]),r=t[0].sub(e),o=r.dotProduct(n),l=r.dotProduct(s)+2*n.dotProduct(n),u=3*n.dotProduct(s),f=s.dotProduct(s),y=new Array(3),_=Vge(f,u,l,o,Ze.unit(),!1,y),x=t[0].clone();let S=0,P=Y.sqrDistance(t[0],e),A=Y.sqrDistance(t[2],e);A<P&&(S=1,x.assign(t[2]),P=A);for(let k=0;k<_;k++){const $=new Y;Hu(t,y[k],$),A=Y.sqrDistance($,e),A<P&&(P=A,x.assign($),S=y[k])}return i&&(i[0]=S),x}function CQe(t,e,i,s,n,r){const o=new jr;if(PQe(t,Ze.unit(),o),o.inflate(n),!o.isIntersectingPoint2D(e))return 0;const l=new Y,u=V6(t,e,Ze.unit(),!1);return t.queryCoord2D(u,l),Y.distance(l,e)<=n?(s&&(s[0]=u),1):0}function PQe(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s),RE(s,e,i)}function RE(t,e,i){if(e.equalsRange(0,1))return void i.setFromPoints(t,3);const s=Ge(Y,3);LE(t,e.vmin,e.vmax,s),i.setFromPoints(s,3)}function Rte(t,e,i){i.setEmpty();const s=[];s.push(new Ze(0,1));const n=.5*Math.max(e.width(),e.height());for(;s.length;){const r=s.at(-1);s.pop();const o=new jr;if(RE(t,r,o),o.isIntersectingW(e)){const l=Math.max(o.width(),o.height());if(e.containsW(o)||l<=n||r.width()<1e-12)i.merge(r);else{const u=r.getCenter();s.push(Ze.construct(r.vmin,u)),s.push(Ze.construct(u,r.vmax))}}}}function i1e(t){const e=Ge(Y,3);t.queryControlPoints(e);const i=s1e(e);return i&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),i}function s1e(t){let e=!1;for(let i=0;i<2;i++){const s=Js(t[0][i],t[2][i]);s>0?(Js(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])<0&&(t[1][i]=t[2][i],e=!0)):s<0?(Js(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])>0&&(t[1][i]=t[2][i],e=!0)):t[1][i]!==t[0][i]&&(t[1][i]=t[0][i],e=!0)}return e}function TQe(t,e,i){i===void 0&&(i=e,e=0);const s=new Y;if(e<0||i>1)return s.setNAN(),s;if(e>i&&Je("calculate_sub_weighted_centroid"),e===i||t.isDegenerate(0))return s.setCoords(0,0),s;const n=Kge(t),r=rf(t),o=Math.min(r/t.calculateUpperLength2D(),1e-7);let l=e,u=0;for(let f=1,y=n.specialPointsCount();f<y;f++)if(e<n.specialPoints[f]){u=f-1;break}s.setCoords(0,0);for(let f=u+1,y=n.specialPointsCount();f<y;f++){const _=Math.min(n.specialPoints[f],i),x=wQe(t,l,_,o,r);if(s.addThis(x),l=_,i<=n.specialPoints[f])break}return s.add(t.getStartXY().mul(t.calculateLength2D()))}function gz(t,e,i,s){new Y().setCoordsPoint2D(t[0]),new Y().setCoordsPoint2D(t[1]),new Y().setCoordsPoint2D(t[2]);const n=new Y,r=new Y,o=new Y;if(ar(t[0],t[1],e,n),ar(t[1],t[2],e,r),ar(n,r,e,o),i&&(i[0].assign(t[0]),i[1].assign(n),i[2].assign(o)),s){const l=t[2];s[0].assign(o),s[1].assign(r),s[2].assign(l)}}function LE(t,e,i,s){if(e===i){const r=new Y;return Hu(t,e,r),s[0]=r,s[1]=r,void(s[2]=r)}const n=Ge(Y,3);gz(t,i,n,null),gz(n,e/i,null,n),Hu(t,e,n[0]),Hu(t,i,n[2]),s[0].setCoordsPoint2D(n[0]),s[1].setCoordsPoint2D(n[1]),s[2].setCoordsPoint2D(n[2])}function IQe(t,e,i,s){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const n=!!s&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const u=Ge(Y,3);u[0].setCoordsPoint2D(e),u[2].setCoordsPoint2D(i),l.setSub(u[2],u[0]),l.leftPerpendicularThis(),u[1].setAdd(u[0],l),r.setFromTwoTriangles(o,u)?r.transformInPlace(t.m_cp):ar(e,i,.5,t.m_cp),t.changeEndPoints2D(e,i),n&&i1e(t)}function MQe(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp.norm(1)}function Lte(t,e,i,s,n){return K(0),0}function Fte(t,e,i,s,n){return K(0),0}function AQe(t,e,i,s,n){return K(0),0}function G6(t,e,i,s,n,r,o,l,u,f){if(n!=null&&(n.length=0),r!==null&&(r.length=0),s!==null&&(s.length=0),i.isDegenerate(0)){const oe=[0,0],pe=e.intersectPoint(i.getStartXY(),oe,o);if(pe>0){if(n!==null)for(let ce=0;ce<pe;ce++)n.push(oe[ce]);if(r!==null)for(let ce=0;ce<pe;ce++)r.push(0);if(s!==null)for(let ce=0;ce<pe;ce++){const ue=new Y;e.queryCoord2D(oe[ce],ue),s.push(ue)}}return pe}const y=Dl(e,i);if(o=Math.max(o,y),e.isDegenerateToLineHelper(y)){const oe=new si({start:e.getStartXY(),end:e.getEndXY()}),pe=r7(oe,i,s,n,r,o,l,f);if(n)for(let ce=0;ce<pe;++ce){const ue=oe.getCoord2D(n[ce]);n[ce]=e.getClosestCoordinate(ue,!1)}return pe}if(Xc(e,i,o))return 0;const _=ys.constructPoint2D(i.getStartXY()),x=ys.constructPoint2D(i.getEndXY()).sub(_),S=x.clone();S.leftPerpendicularThis();const P=ys.constructPoint2D(e.m_cp).sub(ys.constructPoint2D(e.getStartXY())),A=ys.constructPoint2D(e.getEndXY()).sub(ys.constructPoint2D(e.m_cp));let k=P.dotProduct(S).toDouble(),$=A.sub(P).dotProduct(S).toDouble();const F=Vi(12,Number.NaN),G=Vi(12,Number.NaN);let V=tQe($,k,Ze.unit(),F);V<0&&(F[0]=0,F[1]=1,V=2);let B,W=0;for(let oe=0,pe=W;oe<V;++oe){const ce=e.getCoord2D(F[oe+pe]);G[W]=i.getClosestCoordinate(ce,!1),Y.distance(ce,i.getCoord2D(G[W]))<=o&&(F[W]=F[oe+pe],W++)}const J=Ge(Y,3);e.queryControlPoints(J);{const oe=Ge(ys,3);if(j2(J,oe,!1),oe[0]=oe[0].sub(_),x.x.abs().gte(x.y.abs())){const pe=x.y.div(x.x);$=oe[2].y.sub(oe[2].x.mul(pe)).toDouble(),k=oe[1].y.sub(oe[1].x.mul(pe)).toDouble(),B=oe[0].y.sub(oe[0].x.mul(pe)).toDouble()}else{const pe=x.x.div(x.y);$=oe[2].x.sub(oe[2].y.mul(pe)).toDouble(),k=oe[1].x.sub(oe[1].y.mul(pe)).toDouble(),B=oe[0].x.sub(oe[0].y.mul(pe)).toDouble()}}const re=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),se=[0,0];V=xv($,k,B,Ze.unit(),re,se);for(let oe=0,pe=W;oe<V;++oe){F[oe+pe]=se[oe];const ce=e.getCoord2D(F[oe+pe]);G[W]=i.getClosestCoordinate(ce,!1),Y.distance(ce,i.getCoord2D(G[W]))<=o&&(F[W]=F[oe+pe],W++)}K(W<F.length+4),V=e.intersectPoint(i.getStartXY(),se,o);for(let oe=0;oe<V;oe++)F[W]=se[oe],G[W++]=0;V=e.intersectPoint(i.getEndXY(),se,o);for(let oe=0;oe<V;oe++)F[W]=se[oe],G[W++]=1;V=i.intersectPoint(e.getStartXY(),se,o);for(let oe=0;oe<V;oe++)G[W]=se[oe],F[W++]=0;V=i.intersectPoint(e.getEndXY(),se,o);for(let oe=0;oe<V;oe++)G[W]=se[oe],F[W++]=0;return W===0?0:Wc(t,e,i,F,G,W,s,n,r,o,l,u,f)}function zte(t,e,i,s,n,r,o,l,u,f){if(rn(i))return G6(t,e,new si({start:i.getStartXY(),end:i.getEndXY()}),s,n,r,o,l,u,f);const y=Dl(e,i);if(Xc(e,i,o=Math.max(o,y)))return 0;const _=[],x=[],S=Ge(Y,3);{e.queryControlPoints(S);const A=Ge(Y,3),k=new _i;i.canonicToWorldTransformation(k);const $=new _i;$.setInvert(k),$.transformPoints2D(S,3,A);const F=Ge(ys,3);j2(A,F);const G=[F[0].x,F[1].x,F[2].x],V=[F[0].y,F[1].y,F[2].y],B=Ge(_t,3);B[0].setDouble(i.getSemiMinorAxis()),B[0].sqrThis(),B[1].setDouble(i.getSemiMajorAxis()),B[1].sqrThis(),B[2]=B[0],B[2].mul(B[1]),B[2].negate();const W=Hge(G,2,V,2,null,0,B,!0,Ze.unit(),Ze.unit(),_);if(W>0){let J=0;for(let re=0;re<W;re++){const se=new Y;e.queryCoord2D(_[re],se);const oe=i.getClosestCoordinate(se,!1),pe=new Y;i.queryCoord2D(oe,pe),Y.distance(se,pe)<=o&&(_[J]=_[re],x.push(oe),J++)}_.length=J}}const P=[0,1];for(let A=0;A<2;A++){const k=A===0?i.getStartXY():i.getEndXY(),$=[0];o7(S,k,$);const F=new Y;Hu(S,$[0],F),Y.distance(k,F)<=o&&(_.push($[0]),x.push(P[A]))}for(let A=0;A<2;A++){const k=[0,2];{const $=i.getClosestCoordinate(S[k[A]],!1),F=new Y;i.queryCoord2D($,F),Y.distance(S[k[A]],F)<=o&&(_.push(P[A]),x.push($))}}return Wc(t,e,i,_,x,_.length,s,n,r,o,l,u,f)}function n1e(t,e,i,s,n,r,o,l,u,f){const y=Ge(Y,3);e.queryControlPoints(y);const _=Ge(Y,3);if(i.queryControlPoints(_),Ej(y,_,3)<0)return n1e(t,i,e,s,r,n,o,l,u,!f);const x=Dl(e,i);if(Xc(e,i,o=Math.max(o,x)))return 0;if(LQe(e,i,s,n,r,o,l,u,f))return 2;const S=new Ze(0,1),P=new Ze(0,1);{const F=new jr;RE(y,Ze.unit(),F);const G=new jr;RE(_,Ze.unit(),G);const V=Math.max(F.maxDim(),G.maxDim());if(F.inflate(3*o),G.inflate(3*o),!F.intersectW(G))return 0;if(F.maxDim()<.1*V){if(Rte(y,F,S),Rte(_,F,P),S.isEmpty()||P.isEmpty())return 0;LE(y,S.vmin,S.vmax,y),LE(_,P.vmin,P.vmax,_)}}const A=Nx(y,2,_,2,o);if(A===0)return 0;const k=[],$=[];if(A===-1){const F=Ge(ys,3);j2(y,F);const G=[F[0].x,F[1].x,F[2].x],V=[F[0].y,F[1].y,F[2].y],B=Ge(ys,3);j2(_,B);const W=Dx(G,2,V,2,null,0,[B[0].x,B[1].x,B[2].x],2,[B[0].y,B[1].y,B[2].y],2,null,0,!0,Ze.unit(),Ze.unit(),k,$,f);if(W>0){let J=0;for(let re=0;re<W;re++){const se=new Y,oe=new Y;Hu(_,$[re],oe),Hu(y,k[re],se),Y.distance(se,oe)<=o&&(k[J]=k[re],$[J]=$[re],J++)}k.length=J,$.length=J}}for(let F=0;F<2;F++){const G=F===0?y:_,V=F===0?_:y;for(let B=0;B<2;B++){const W=B===0?0:2,J=[0];o7(V,G[W],J);const re=new Y;Hu(V,J[0],re),Y.distance(G[W],re)<=o&&(F===0?(k.push(W===0?0:1),$.push(J[0])):($.push(W===0?0:1),k.push(J[0])))}}if(k.length===0)return 0;if(!S.equalsRange(0,1))for(let F=0;F<k.length;++F)k[F]=am.recalculateParentT(S.vmin,S.vmax,k[F]);if(!P.equalsRange(0,1))for(let F=0;F<$.length;++F)$[F]=am.recalculateParentT(P.vmin,P.vmax,$[F]);return Wc(t,e,i,k,$,k.length,s,n,r,o,l,u,f)}function Pj(t,e,i=!1){const s=t[1].sub(t[0]);e[1].assign(s.mul(2)),e[2].assign(t[2].sub(t[1]).sub(s)),i?e[0].setCoords(0,0):e[0].assign(t[0])}function DQe(t,e,i=!1){const s=Ge(Y,3);t.queryControlPoints(s),Pj(s,e,i)}function kQe(t,e,i=!1){const n=new Be(t[1][0]).subE(new Be(t[0][0]));e[1]=n.mul(2),e[2]=new Be(t[2][0]).subE(new Be(t[1][0])).subE(n),i?e[0].set(0):e[0].set(t[0][0])}function NQe(t,e,i=!1){const n=new Be(t[1][1]).subE(new Be(t[0][1]));e[1]=n.mul(2),e[2]=new Be(t[2][1]).subE(new Be(t[1][1])).subE(n),i?e[0].set(0):e[0].set(t[0][1])}function j2(t,e,i=!1){const s=ys.constructPoint2D(t[1]),n=s.sub(ys.constructPoint2D(t[0]));e[1]=n.mul(_t.constructInt32(2)),e[2]=ys.constructPoint2D(t[2]).sub(s).sub(n),e[0]=i?new ys(Bo,Bo):ys.constructPoint2D(t[0])}function Hu(t,e,i,s){if(s){if(e<0)return void gl(new si({start:t[0],end:t[0].add(kte().getUnitVector())}),e,i);if(e>1)return void gl(new si({start:t[2],end:t[2].add(kte().getUnitVector())}),e-1,i)}if(e<=.5){const n=t[1].clone(),r=new Y;Wn(2,t[0],n,e,r);const o=new Y;Wn(2,n,t[2],e,o);const l=new Y;Wn(2,r,o,e,l),i.assign(l)}else{const n=t[1].clone(),r=new Y;Zn(2,t[0],n,e,r);const o=new Y;Zn(2,n,t[2],e,o);const l=new Y;Zn(2,r,o,e,l),i.assign(l)}}function $Qe(t,e,i){K(0)}function OQe(t,e,i){K(0)}function RQe(t,e){e[0].assign(t[0]),e[3].assign(t[2]),ar(t[0],t[1],2/3,e[1]),ar(t[1],t[2],1/3,e[2])}function LQe(t,e,i,s,n,r,o,l,u){const f=Ge(Y,3);t.queryControlPoints(f);const y=Ge(Y,3);if(e.queryControlPoints(y),f[0].equals(y[0])){if(f[1].equals(y[1])&&f[2].equals(y[2]))return i&&(i.length=0,i.push(f[0]),i.push(f[2])),s&&(s.length=0,s.push(0),s.push(1)),n&&(n.length=0,n.push(0),n.push(1)),!0;if(!f[0].equals(y[2]))return!1}return!!(f[0].equals(y[2])&&f[1].equals(y[1])&&f[2].equals(y[0]))&&(s&&(s.length=0,s.push(0),s.push(1),u&&(s[1]=St(s[0],s[0]=s[1]))),n&&(n.length=0,n.push(1),n.push(0),u&&(n[1]=St(n[0],n[0]=n[1]))),i&&(i.length=0,i.push(f[0]),i.push(f[2]),u&&(i[1]=St(i[0],i[0]=i[1]))),!0)}var J4=_r;class Oc extends f5{constructor(e){e&&e.cp?(super({start:e.cp[0],end:e.cp[3],vd:e.vd}),this.m_cp=Ge(Y,2),this.m_cp[0].assign(e.cp[1]),this.m_cp[1].assign(e.cp[2])):e===void 0||JA(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=Ge(Y,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)):e.from?(super({start:e.from,end:e.to,vd:e.vd}),this.m_cp=Ge(Y,2),this.m_cp[0].assign(e.cp1),this.m_cp[1].assign(e.cp2)):(super({XStart:0,YStart:0,XEnd:0,YEnd:0,vd:e.vd}),K(0),this.m_cp=Ge(Y,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)),this.m_cachedValues=0}getBoundary(){return Zh(this)}assignMove(e){return K(0),this}assignCopy(e){return K(0),this}construct(e,i,s,n){this.m_XStart=e.x,this.m_YStart=e.y,this.m_XEnd=n.x,this.m_YEnd=n.y,this.m_cp[0].assign(i),this.m_cp[1].assign(s),this.afterCompletedModification()}constructPoints(e){this.m_XStart=e[0].x,this.m_YStart=e[0].y,this.m_XEnd=e[3].x,this.m_YEnd=e[3].y,this.m_cp[0].assign(e[1]),this.m_cp[1].assign(e[2]),this.afterCompletedModification()}constructFromQuadratic(e){const i=Ge(Y,4);RQe(e,i),this.constructPoints(i)}constructFromQuadraticSegment(e){this.dropAllAttributes(),this.assignVertexDescription(e.getDescription()),this.m_XStart=e.getStartX(),this.m_YStart=e.getStartY(),this.m_XEnd=e.getEndX(),this.m_YEnd=e.getEndY(),YS(2,e.getStartXY(),e.getControlPoint1(),2/3,this.m_cp[0]),YS(2,e.getControlPoint1(),e.getEndXY(),1/3,this.m_cp[1]),this.afterCompletedModification(),HJe(this,e)}getGeometryType(){return me.enumBezier}queryEnvelope(e){if(!(e instanceof xe))return void K(0);if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp[0])&&e.contains(this.m_cp[1]))return;const i=iie(this);if(i!==null){const l=new Y;for(const u of i.specialPoints)this.queryCoord2D(u,l),e.mergeNe(l);return}const s=Ge(Be,8),n=Ge(Y,4);this.queryControlPoints(n);const r=b1e(n,s),o=new Y;for(let l=1;l<r-1;l++)this.queryCoord2D(s[l].value(),o),e.mergeNe(o)}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,4);return this.queryControlPoints(i),e.transformPoints2D(i,4,i),this.setStartXY(i[0]),this.m_cp[0].assign(i[1]),this.m_cp[1].assign(i[2]),this.setEndXY(i[3]),void TN(this)}K(0)}createInstance(){return new Oc({vd:this.m_description})}calculateLength2D(){return jE(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return Y.distance(this.getStartXY(),this.m_cp[0])+Y.distance(this.m_cp[0],this.m_cp[1])+Y.distance(this.getEndXY(),this.m_cp[1])}calculateUpperLength2D_(){return K(0),0}queryCoord2D(e,i){return this.queryCoord2DExtends(e,i,!0)}queryCoord2DExtends(e,i,s){const n=Ge(Y,4);this.queryControlPoints(n),Mn(n,e,i,s)}queryCoord2DE(e,i){Tet(this,e,i)}getCoordX(e){if(e<0||e>1){const l=new Y;return this.queryCoord2DExtends(e,l,!0),l.x}const i=ji(this.getStartX(),this.m_cp[0].x,e),s=ji(this.m_cp[0].x,this.m_cp[1].x,e),n=ji(this.m_cp[1].x,this.getEndX(),e),r=ji(i,s,e),o=ji(s,n,e);return ji(r,o,e)}getCoordY(e){if(e<0||e>1){const l=new Y;return this.queryCoord2DExtends(e,l,!0),l.y}const i=ji(this.getStartY(),this.m_cp[0].y,e),s=ji(this.m_cp[0].y,this.m_cp[1].y,e),n=ji(this.m_cp[1].y,this.getEndY(),e),r=ji(i,s,e),o=ji(s,n,e);return ji(r,o,e)}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createCubicBezier();if(this.cutBezierIgnoreAttributes(e,i,r),n)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const u=this.m_description.getSemantics(l),f=J4.getComponentCount(u);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,u,y);r.setStartAttribute(u,y,_)}}for(let l=1;l<o;l++){const u=this.m_description.getSemantics(l),f=J4.getComponentCount(u);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,u,y);r.setEndAttribute(u,y,_)}}}}queryDerivative(e,i){y1e(this,e,i)}cutBezierIgnoreAttributes(e,i,s){(e<0||i>1||e>i)&&Je("Cubic_bezier.cut_bezier_ignore_attributes");const n=Ge(Y,4);this.queryControlPoints(n);const r=Ge(Y,4);Sv(n,e,i,r),s.setControlPoints(r)}splitBezierIgnoreAttributes(e,i,s){this===i&&this===s&&Je("Cubic_bezier.split_bezier_ignore_attributes");const n=Ge(Y,4);this.queryControlPoints(n);const r=Ge(Y,4),o=Ge(Y,4);HE(n,e,r,o),i&&i.setControlPoints(r),s&&s.setControlPoints(o)}getAttributeAsDbl(e,i,s){if(i===0)return s===0?this.getCoordX(e):this.getCoordY(e);if(e===0)return this.getStartAttributeAsDbl(i,s);if(e===1)return this.getEndAttributeAsDbl(i,s);const n=this.getStartAttributeAsDbl(i,s),r=this.getEndAttributeAsDbl(i,s),o=this.calculateLength2D(),l=o>0?this.tToLength(e)/o:0,u=J4.getInterpolation(i);return ZA(u,n,r,l,J4.getDefaultValue(i))}getClosestCoordinate(e,i){const s=[Number.NaN];return H6(this,e,Ze.unit(),i,-1,1,s),s[0]}getClosestCoordinateOnInterval(e,i,s=-1){const n=[Number.NaN];return H6(this,e,i,!1,s,1,n)===0?Number.NaN:n[0]}getYMonotonicParts(e,i=!1){return K(0),0}getMonotonicParts(e,i){e.length<2&&Je("");const s=BE(this);if(s.specialPointsCount()===2&&this.isMonotoneQuickAndDirty())return 0;let n=0;K(e.length>=s.specialPointsCount()-1);for(let r=1,o=s.specialPointsCount();r<o;++r)this.queryCut(s.specialPoints[r-1],s.specialPoints[r],e[n],i),n++;for(let r=0;r<n;++r)B6(e[r].get());return n}intersectionWithAxis2D(e,i,s,n){const r=Ge(Y,4);return this.queryControlPoints(r),Ret(r,e,i,s,n)}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[0,0],n=this.intersectionWithAxis2D(!0,e,s,null);return K(n!==2),n===-1?i:s[0]}isCurve(){return!0}isDegenerate(e){return n7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){if(e instanceof xe)return e.setCoords({pt:this.getStartXY()}),e.mergeNe(this.m_cp[0]),e.mergeNe(this.m_cp[1]),void e.mergeNe(this.getEndXY());K(0)}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const s=xe.constructEmpty();this.queryEnvelope(s);const n=Ze.constructEmpty();return i===0?s.queryIntervalX(n):s.queryIntervalY(n),n}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=Ge(Y,4);this.queryControlPoints(s),Sv(s,e.vmin,e.vmax,s),i.setFromPoints(s,4)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp[0].isEqual(this.m_XStart,this.m_YStart),n=this.m_cp[0].isEqual(this.m_XEnd,this.m_YEnd),r=this.m_cp[1].isEqual(this.m_XStart,this.m_YStart),o=this.m_cp[1].isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),s?this.m_cp[0].setCoordsPoint2D(e):n&&this.m_cp[0].setCoordsPoint2D(i),o?this.m_cp[1].setCoordsPoint2D(i):r&&this.m_cp[1].setCoordsPoint2D(e),this.normalizeAfterEndpointChange()}tToLength(e){return jE(this,e,!0)}lengthToT(e){return get(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ge(Y,4);d1e(this,i);const s=i[3],n=i[2],r=i[1],o=new Y;o.x=(5*s.x*s.x*(7*n.y+16*r.y)+s.x*(-35*s.y*n.x+40*n.x*n.y-80*s.y*r.x+140*n.x*r.y+112*r.x*r.y)-2*(s.y*(20*n.x*n.x+70*n.x*r.x+56*r.x*r.x)-7*(4*n.x+5*r.x)*(-n.y*r.x+n.x*r.y)))/840,o.y=(-5*s.y*s.y*(7*n.x+16*r.x)+s.y*(5*s.x*(7*n.y+16*r.y)-4*(10*n.x*n.y+35*n.y*r.x+28*r.x*r.y))+2*(-7*(4*n.y+5*r.y)*(n.y*r.x-n.x*r.y)+s.x*(20*n.y*n.y+70*n.y*r.y+56*r.y*r.y)))/840;const l=sie(this);return o.x+=(i[0].x-e.x)*l,o.y+=(i[0].y-e.y)*l,o}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):met(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(yet(this,1)),e)}getControlPoint1(){return this.m_cp[0].clone()}setControlPoint1(e){this.m_cp[0].setCoordsPoint2D(e),this.afterCompletedModification()}getControlPoint2(){return this.m_cp[1].clone()}setControlPoint2(e){this.m_cp[1].setCoordsPoint2D(e),this.afterCompletedModification()}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp[0]),e[2].assign(this.m_cp[1]),e[3].assign(this.getEndXY())}setControlPoints(e){for(let i=0;i<4;i++)e[i].isNAN()&&Je("NAN control points in bezier are not supported");this.m_XStart=e[0].x,this.m_YStart=e[0].y,this.m_cp[0].setCoordsPoint2D(e[1]),this.m_cp[1].setCoordsPoint2D(e[2]),this.m_XEnd=e[3].x,this.m_YEnd=e[3].y,this.afterCompletedModification()}getTangent(e){const i=Ge(Y,4);return this.queryControlPoints(i),Pz(i,e)}getDerivative(e){return K(0),Y.getNAN()}getCurvature(e){const i=Hy(this,1,e),s=Hy(this,2,e),n=i.sqrLength();return n===0?Number.NaN:(i.divThis(Math.sqrt(n)),i.crossProduct(s)/n)}isIntersectingPoint(e,i,s){if(s&&(e.equals(this.getStartXY())||e.equals(this.getEndXY())))return!1;const n=new xe;if(this.queryLooseEnvelope(n),n.inflateCoords(i,i),!n.contains(e))return!1;const r=this.getClosestCoordinate(e,!1),o=new Y;return this.queryCoord2D(r,o),Y.distance(o,e)<=i}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}queryAttributeAsDbl(e,i,s,n){K(0)}isMonotoneQuickAndDirty(){const e=Ge(Y,4);return this.queryControlPoints(e),Cet(e)}getMonotonicPartParams(e,i){const s=BE(this),n=s.specialPointsCount();if(K(d5.s_maxMonotonicPartParams>=n),!i)return s.specialPointsCount();e<n&&Je("");for(let r=0;r<n;r++)i[r]=s.specialPoints[r];return n}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=St(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=St(this.m_YStart,this.m_YStart=this.m_YEnd);for(let e=0,i=this.m_description.getTotalComponentCount()-2;e<i;e++)this.m_attributes[e+i]=St(this.m_attributes[e],this.m_attributes[e]=this.m_attributes[e+i]);this.m_cp[1]=St(this.m_cp[0],this.m_cp[0]=this.m_cp[1]),this.m_cachedValues=null}}findMinDeriv(){const e=new Be;return g1e(this,e),e.value()}queryConvexHull2D(e){return K(0),0}isLine(){return!1}isDegenerateToLineHelper(e){return K(0),!1}copyIgnoreAttributes(e){const i=Ge(Y,4);this.queryControlPoints(i),e.setControlPoints(i)}calculateArea2DHelper(){return sie(this)}absNorm(){return Det(this)}queryEnvelopeW(e,i){v1e(this,e,i)}setSegmentFromCoords(e,i){Net(this,e,i)}writeInBufferStream(e,i){const s=new Float64Array(4);return this.writeInBuffer_(s),e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}writeInBuffer_(e){return e[0]=this.m_cp[0].x,e[1]=this.m_cp[0].y,e[2]=this.m_cp[1].x,e[3]=this.m_cp[1].y,4}readFromBufferStream(e,i){const s=new Float64Array(4);e.queryRange(i,s.length,s,!0,1),this.readFromBuffer_(s)}readFromBuffer_(e){this.m_cp=Ge(Y,2),this.m_cp[0].x=e[0],this.m_cp[0].y=e[1],this.m_cp[1].x=e[2],this.m_cp[1].y=e[3],this.m_cachedValues=null}snapControlPoints(e){const i=Ge(Y,4);this.queryControlPoints(i);const s=(o,l,u)=>{let f=!1;return Y.sqrDistance(o,u)<=e&&(f=!o.equals(u),o.setCoordsPoint2D(u),Y.sqrDistance(l,u)<=e&&(f||(f=!l.equals(u)),l.setCoordsPoint2D(u))),f},n=s(i[1],i[2],i[0]),r=s(i[2],i[1],i[3]);return(n||r)&&this.setControlPoints(i),n||r}needsSnapControlPoints(e){if(!e)return!1;const i=Ge(Y,4);this.queryControlPoints(i);const s=(o,l,u)=>{let f=!1;return Y.sqrDistance(o,u)<=e&&(f=!o.equals(u),o.setCoordsPoint2D(u),Y.sqrDistance(l,u)<=e&&(f||(f=!l.equals(u)),l.setCoordsPoint2D(u))),f},n=s(i[1],i[2],i[0]),r=s(i[2],i[1],i[3]);return n||r}calculateSpecialPointsForCracking(e,i){return Let(this,e,i)}ensureXYMonotone(){return B6(this)}setCoordsForIntersector(e,i,s){vet(this,e,i,s)}copyToImpl(e){const i=e;i.m_cp[0].assign(this.m_cp[0]),i.m_cp[1].assign(this.m_cp[1]),m1e(i,iie(this))}reverseImpl(){this.m_cp[1]=St(this.m_cp[0],this.m_cp[0]=this.m_cp[1])}equalsImpl(e){const i=e;return!!this.m_cp[0].equals(i.m_cp[0])&&!!this.m_cp[1].equals(i.m_cp[1])}equalsImplTol(e,i){const s=e;return!!this.m_cp[0].isEqualPoint2D(s.m_cp[0],i)&&!!this.m_cp[1].isEqualPoint2D(s.m_cp[1],i)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){TN(this)}isIntersecting(e,i,s){return g5(!1,this,e,i,s)!==0}intersect(e,i,s,n,r){return Gv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){return Aet(this,e,i,s)}intersect_(e,i,s,n){return K(0),0}endPointModified(){TN(this)}clearEndPointModified(){K(0)}}Oc.type=me.enumBezier;const qte=[[.33998104358485626,.6521451548625461],[.8611363115940526,.34785484513745385]],Vte=[[.1834346424956498,.362683783378362],[.525532409916329,.31370664587788727],[.7966664774136267,.22238103445337448],[.9602898564975363,.10122853629037626]],Gte=[[.09501250983763744,.1894506104550685],[.2816035507792589,.18260341504492358],[.45801677765722737,.16915651939500254],[.6178762444026438,.14959598881657674],[.755404408355003,.12462897125553388],[.8656312023878318,.09515851168249279],[.9445750230732326,.062253523938647894],[.9894009349916499,.027152459411754096]],jte=[[.04830766568773832,.0965400885147278],[.1444719615827965,.09563872007927486],[.23928736225213706,.09384439908080457],[.33186860228212767,.09117387869576389],[.42135127613063533,.08765209300440381],[.5068999089322294,.08331192422694675],[.5877157572407623,.07819389578707031],[.6630442669302152,.0723457941088485],[.7321821187402897,.06582222277636185],[.7944837959679424,.058684093478535544],[.84936761373257,.050998059262376175],[.8963211557660521,.04283589802222668],[.9349060759377397,.03427386291302143],[.9647622555875064,.02539206530926206],[.9856115115452684,.01627439473090567],[.9972638618494816,.007018610009470096]],Bte=[[.024350292663424433,.048690957009139724],[.07299312178779904,.04857546744150343],[.12146281929612056,.048344762234802954],[.16964442042399283,.04799938859645831],[.21742364374000708,.04754016571483031],[.2646871622087674,.04696818281621002],[.31132287199021097,.046284796581314416],[.3572201583376681,.04549162792741814],[.4022701579639916,.044590558163756566],[.4463660172534641,.04358372452932345],[.48940314570705296,.04247351512365359],[.5312794640198946,.04126256324262353],[.571895646202634,.03995374113272034],[.6111553551723933,.038550153178615626],[.6489654712546573,.03705512854024005],[.6852363130542333,.035472213256882386],[.7198818501716109,.033805161837141606],[.7528199072605319,.03205792835485155],[.7839723589433414,.030234657072402478],[.8132653151227975,.028339672614259483],[.8406292962525803,.02637746971505466],[.8659993981540928,.024352702568710874],[.8893154459951141,.022270173808383253],[.9105221370785028,.02013482315353021],[.9295691721319396,.017951715775697343],[.9464113748584028,.015726030476024718],[.9610087996520538,.013463047896718643],[.973326827789911,.011168139460131128],[.983336253884626,.008846759826363947],[.9910133714767443,.006504457968978363],[.9963401167719553,.004147033260562468],[.9993050417357722,.001783280721696433]],Hte=[[.012223698960615764,.024446180196262518],[.03666379096873349,.024431569097850044],[.06108196960413957,.02440235563384958],[.08546364050451549,.024358557264690626],[.10979423112764375,.024300200167971867],[.13405919946118777,.02422731922281525],[.15824404271422493,.024139957989019287],[.18233430598533718,.024038168681024052],[.2063155909020792,.023922012136703457],[.23017356422666,.023791557781003402],[.2538939664226943,.023646883584447616],[.2774626201779044,.02348807601653591],[.3008654388776772,.02331522999406276],[.32408843502441337,.023128448824387027],[.3471177285976355,.022927844143686846],[.369939555349859,.02271353585023646],[.39254027503326744,.022485652032744968],[.414906379552275,.022244328893799764],[.43702450103710416,.02198971066846049],[.4588814198335522,.021721949538052076],[.48046407240417205,.02144120553920846],[.5017595591361445,.02114764646822135],[.5227551520511755,.02084144778075115],[.5434383024128103,.02052279248696007],[.5637966482266181,.020191871042130043],[.5838180216287631,.01984888123283086],[.6034904561585486,.019494028058706602],[.6228021939105849,.019127523609950944],[.6417416925623075,.01874958694054471],[.660297632272646,.01836044393733134],[.6784589224477192,.017960327185008687],[.6962147083695144,.017549475827117706],[.7135543776835874,.01712813542311138],[.7304675667419088,.016696557801589205],[.746944166797062,.016255000909785187],[.7629743300440948,.015803728659399347],[.7785484755064119,.015343010768865144],[.7936572947621933,.014873122602147314],[.8082917575079137,.014394345004166847],[.8224431169556439,.013906964132951985],[.8361029150609068,.013411271288616333],[.8492629875779689,.012907562739267348],[.8619154689395485,.012396139543950923],[.8740527969580318,.01187730737274028],[.8856677173453972,.011351376324080417],[.8967532880491582,.010818660739503076],[.9073028834017568,.010279479015832158],[.9173101980809605,.009734153415006806],[.9267692508789478,.009183009871660874],[.9356743882779164,.00862637779861675],[.9440202878302202,.008064589890486059],[.9518019613412644,.0074979819256347285],[.9590147578536999,.006926892566898814],[.9656543664319652,.006351663161707189],[.9717168187471366,.005772637542865698],[.9771984914639074,.00519016183267633],[.9820961084357185,.004604584256702955],[.9864067427245862,.004016254983738642],[.9901278184917344,.0034255260409102157],[.9932571129002129,.0028327514714579912],[.9957927585349812,.0022382884309626186],[.997733248625514,.0016425030186690294],[.9990774599773758,.0010458126793403489],[.9998248879471319,.00044938096029209035]];function sf(t,e,i,s){const n=.5*(s-i),r=i+n,o=new zr(0);for(let l=0,u=Math.trunc(t/2);l<u;++l){let f,y;switch(t){case 4:f=qte[l][0],y=qte[l][1];break;case 8:f=Vte[l][0],y=Vte[l][1];break;case 16:f=Gte[l][0],y=Gte[l][1];break;case 32:f=jte[l][0],y=jte[l][1];break;case 64:f=Bte[l][0],y=Bte[l][1];break;case 128:f=Hte[l][0],y=Hte[l][1];break;default:throw new Error("Quadrature_integral: invalid n")}const _=Qee(-.5,f,r),x=Qee(n,f,r);o.pe(e(_)*y),o.pe(e(x)*y)}return o.getResult()*n}class FQe{constructor(){this.length=Number.NaN,this.area=Number.NaN,this.centroidX=Number.NaN,this.centroidY=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}function yz(t,e,i,s,n,r,o,l){for(;;){const u=Y.distance(e[0],e[2]),f=Y.distance(e[0],e[1])+Y.distance(e[1],e[2]);if(f-u<=n+s*f)return t+ji(u,f,.5);const y=Ge(Y,4),_=J=>(l2(e,i,1,J,y),y[1].length());if(o===0&&l<8){K(l<8);let J=_(0),re=_(1);r[0]+=2,J>re&&(re=St(J,J=re),e[2]=St(e[0],e[0]=e[2]),i[2]=St(i[0],i[0]=i[2]));let se=J/(J+re),oe=1,pe=f;for(;se<1/32&&pe>=n+s*pe;){oe/=4;const ce=_(oe);r[0]++,se=J/(ce+J);const ue=new Y;if(Xn(e,i,.5*oe,ue),pe=Y.distance(ue,e[0]),pe<=n){const ne=new Y;Xn(e,i,oe,ne),pe+=Y.distance(ne,ue)}}if(oe!==1){const ce=Ge(Y,3),ue=[0,0,0];Zte(e,i,oe,e,i,ce,ue),t=yz(t,ce,ue,s,n,r,0,l+1),o++,l++;continue}}let x=!1;const S=8;r[0]+=S;const P=sf(S,_,0,1),A=16;r[0]+=A;const k=sf(A,_,0,1);if(x=Math.abs(P-k)>n+s*f,!x)return t+k;if(o<8&&l<9){const J=Ge(Y,3),re=[0,0,0];Zte(e,i,.5,e,i,J,re),t=yz(t,J,re,s,n,r,o+1,l+1),o++,l++;continue}const $=32;r[0]+=$;const F=sf($,_,0,1);if(x=Math.abs(k-F)>n+s*f,!x)return t+F;const G=64;r[0]+=G;const V=sf(G,_,0,1);if(x=Math.abs(F-V)>n+s*f,!x)return t+V;const B=128;r[0]+=B;const W=sf(B,_,0,1);return x=Math.abs(V-W)>n+s*f,t+W}}function zQe(t,e,i,s,n){if(i===e)return 0;const r=Ge(Y,3),o=[0,0,0];t.queryControlPoints(r),t.queryWeights(o);const l=[0,0,0],u=Ge(Y,3);return wv(r,o,e,i,u,l),yz(0,u,l,s,n,[0],0,0)}let qQe=class{constructor(t,e,i){this.controlPoints=k6(t,3),this.weights=[0,0,0],dn(this.weights,e,0,0,3),this.point=i.clone()}getMaxDerivative(){return 3}getValue(t,e){if(t===0){const i=new Y;Xn(this.controlPoints,this.weights,e,i);const s=Ge(Y,4);return l2(this.controlPoints,this.weights,1,e,s),2*i.sub(this.point).dotProduct(s[1])}if(t===1){const i=new Y;Xn(this.controlPoints,this.weights,e,i);const s=Ge(Y,4);return l2(this.controlPoints,this.weights,2,e,s),2*(i.sub(this.point).dotProduct(s[2])+s[1].dotProduct(s[1]))}if(t===2){const i=new Y;Xn(this.controlPoints,this.weights,e,i);const s=Ge(Y,4);return l2(this.controlPoints,this.weights,3,e,s),2*(i.sub(this.point).dotProduct(s[3])+3*s[1].dotProduct(s[2]))}return 0}getError(t){return K(0),0}};function VQe(t,e,i,s){const n=iet(0,0,0,0,Y.getNAN()),r=new Array(18),o=Ge(Y,3);t.queryControlPoints(o),o[2].subThis(e),o[1].subThis(e),o[0].subThis(e);const l=[0,0,0];t.queryWeights(l);const u=[1,ld(l),1],f=GE(l,i),y=GE(l,s),_=Jg(new qQe(o,u,new Y(0,0)),Ze.construct(f,y),18,r);Xn(o,u,f,n.pt),n.t=f,n.d=Y.distance(n.pt,new Y(0,0));const x=new Y;Xn(o,u,y,x);const S=Y.distance(x,new Y(0,0));S<n.d&&(n.d=S,n.t=y,n.pt.assign(x));for(let P=0;P<_;P++){Xn(o,u,r[P],x);const A=Y.distance(x,new Y(0,0));A<n.d&&(n.d=A,n.t=U2(l,r[P]),n.pt.assign(x))}return n}function GQe(t,e,i,s,n){let r=!0;const o=Ge(Y,4),l=G2(5,e,i,s,n,f=>(Ute(t,1,f,o),(r?t.getCoordX(f)-t.getStartX():t.getCoordY(f)-t.getStartY())*o[1].length()));r=!1;const u=G2(5,e,i,s,n,f=>(Ute(t,1,f,o),(r?t.getCoordX(f)-t.getStartX():t.getCoordY(f)-t.getStartY())*o[1].length()));return new Y(l,u)}function Q4(t){t.m_cachedValues=null}function FE(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new FQe,i=Ge(Y,3);t.queryControlPoints(i);const s=[0,0,0];return t.queryWeights(s),r1e(i,s,e.specialPoints),a1e(t,e),e}function r1e(t,e,i){if(e[1]===0)return i.length=2,i[0]=0,void(i[1]=1);const s=Ge(Be,8);s[0].set(0);let n=1;{const r=new Be(t[1].x).subThis(t[0].x).mulThis(e[1]).mulThis(e[0]),o=new Be(t[2].x).subThis(t[0].x).mulThis(e[2]).mulThis(e[0]),l=r.subE(o).addThisE(new Be(t[2].x).subThis(t[1].x).mulThis(e[2]).mulThis(e[1]));o.subThisE(r.mul(2));const u=Ge(Be,2);let f=El(l,o,r,new Ze(0,1),!1,u);f<0&&(f=0);for(let y=0;y<f;y++)Ms(u[y].value(),0,1)||(s[n]=u[y],n++)}{const r=new Be(t[1].y).subThis(t[0].y).mulThis(e[1]).mulThis(e[0]),o=new Be(t[2].y).subThis(t[0].y).mulThis(e[2]).mulThis(e[0]),l=r.subE(o).addThisE(new Be(t[2].y).subThis(t[1].y).mulThis(e[2]).mulThis(e[1]));o.subThisE(r.mul(2));const u=Ge(Be,2);let f=El(l,o,r,new Ze(0,1),!1,u);f<0&&(f=0);for(let y=0;y<f;y++)Ms(u[y].value(),0,1)||(s[n]=u[y],n++)}if(s[n].set(1),n++,n>2){rd(s,0,n,(u,f)=>xf(u.value(),f.value()));let r=0,o=s[0].value(),l=1;for(let u=1;u<n;u++)s[u].eq(s[u-1])?(o+=s[u].value(),l++):(l>1&&(o/=l,s[r].set(o)),r++,s[r]=s[u],o=s[u].value(),l=1);r++,n=r}s[0].set(0),s[n-1].set(1),i.length=n;for(let r=0;r<n;r++)i[r]=s[r].value()}function zE(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+zE(t,1,!1)}if(t.isDegenerate(0))return 0;const s=e===1,n=FE(t);if(s&&!Number.isNaN(n.length))return n.length;const r=o1e(t),o=r/t.calculateUpperLength2D();let l=0,u=0;for(let f=1,y=n.specialPointsCount();f<y;f++){const _=n.specialPoints[f];if(l+=zQe(t,u,Math.min(e,_),o,r),e<=_)break;u=_}return s&&(n.length=l),l}function Ute(t,e,i,s){const n=Ge(Y,3);t.queryControlPoints(n);const r=[0,0,0];t.queryWeights(r),l2(n,r,e,i,s)}function l2(t,e,i,s,n){const r=[t[0],t[1],t[2]],o=[e[0],e[1],e[2]],l=Ge(Y,4);jQe(r,o,i,s,l);for(let u=0;u<=i;u++)n[u].setCoords(l[u].x,l[u].y)}function jQe(t,e,i,s,n){K(i>0);const r=[t[0].clone(),t[1].clone(),t[2].clone()];if(!r[0].isZero()){for(let G=1;G<3;++G)r[G].subThis(r[0]);r[0].setCoords(0,0)}const o=eT(r,e,0,s),l=PN(e,0,s),u=o.divide(l);if(n[0].assign(u),i===0)return;const f=[e[1]*e[0],e[2]*e[0]*.5,e[1]*e[2]],y=[t[1].sub(t[0]),t[2].sub(t[0]),t[2].sub(t[1])],_=l*l,x=eT(y,f,0,s).mul(2).divide(_);if(n[1].assign(x),i===1)return;const S=PN(e,1,s),P=2*l*S,A=eT(y,f,1,s).mul(2).sub(x.mul(P)).divide(_);if(n[2].assign(A),i===2)return;const k=eT(y,f,2,s).mul(2),$=2*(S*S+l*PN(e,2,s)),F=k.sub(A.mul(P).mul(2)).sub(x.mul($)).divide(_);n[3].assign(F),i!==3&&bt("")}function eT(t,e,i,s){if(i===0){if(s<=.5){const n=new Y;Wn(2,t[0].mul(e[0]),t[1].mul(e[1]),s,n);const r=new Y;Wn(2,t[1].mul(e[1]),t[2].mul(e[2]),s,r);const o=new Y;return Wn(2,n,r,s,o),o}{const n=new Y;Zn(2,t[0].mul(e[0]),t[1].mul(e[1]),s,n);const r=new Y;Zn(2,t[1].mul(e[1]),t[2].mul(e[2]),s,r);const o=new Y;return Zn(2,n,r,s,o),o}}if(i===1){const n=t[1].mul(e[1]),r=n.sub(t[0].mul(e[0])).mul(1-s).add(t[2].mul(e[2]).sub(n).mul(s));return r.mulThis(2),r}if(i===2){const n=t[1].mul(e[1]),r=t[2].mul(e[2]).sub(n).sub(n.sub(t[0].mul(e[0])));return r.mulThis(2),r}bt("")}function Yte(t,e,i,s){if(s.toDouble()<=.5){const n=new Ht;Kd(2,t[0].mulE(e[0]),t[1].mulE(e[1]),s,n);const r=new Ht;Kd(2,t[1].mulE(e[1]),t[2].mulE(e[2]),s,r);const o=new Ht;return Kd(2,n,r,s,o),o}{const n=new Ht;Jd(2,t[0].mulE(e[0]),t[1].mulE(e[1]),s,n);const r=new Ht;Jd(2,t[1].mulE(e[1]),t[2].mulE(e[2]),s,r);const o=new Ht;return Jd(2,n,r,s,o),o}}function PN(t,e,i){if(e===0){const s=ji(t[0],t[1],i),n=ji(t[1],t[2],i);return ji(s,n,i)}if(e===1)return 2*((1-i)*(t[1]-t[0])+(t[2]-t[1])*i);if(e===2)return 2*(t[2]-t[1]-(t[1]-t[0]));bt("")}function BQe(t,e,i){if(i.toDouble()<=.5){const s=Pu(t[0],t[1],i),n=Pu(t[1],t[2],i);return Pu(s,n,i)}{const s=Tu(t[0],t[1],i),n=Tu(t[1],t[2],i);return Tu(s,n,i)}}function HQe(t,e,i,s,n){const r=[Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2])];r[2].subThisE(r[0]),r[1].subThisE(r[0]),r[0].setCoords(0,0),UQe(r,[new Be(e[0]),new Be(e[1]),new Be(e[2])],i,s,n)}function UQe(t,e,i,s,n){K(i>0);const r=[t[0].clone(),t[1].clone(),t[2].clone()];if(!r[0].isZero()){for(let S=1;S<3;++S)r[S].subThisE(r[0]);r[0]=Ht.constructCoords(0,0)}const o=Yte(r,e,0,s),l=BQe(e,0,s),u=o.divE(l);n[0].setE(u);const f=[e[1].mulE(e[0]),e[2].mulE(e[0]).mul(.5),e[1].mulE(e[2])],y=Yte([t[1].subE(t[0]),t[2].subE(t[0]),t[2].subE(t[1])],f,0,s).mul(2),_=l.sqr(),x=y.divE(_);n[1].setE(x)}function YQe(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s);const n=new Array(3);t.queryWeights(n),XQe(s,n,e,i)}function XQe(t,e,i,s){i.value()<0&&i.set(0,i.eps()),i.value()>1&&i.set(1,i.eps());const n=Ge(Ht,4);HQe(t,e,1,i,n),s.setE(n[1])}function vz(t,e,i){const s=un(i,0,1),n=Ge(Y,4);if(l2(t,e,3,s,n),n[1].isZero()){if(n[2].isZero())return n[3];{const r=n[2].clone();return s===1&&r.negateThis(),r}}return n[1]}class WQe{constructor(e,i){this.len=0,this.b=e,this.len=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?this.len-zE(this.b,i,!1):0}getError(e){return K(0),0}}function ZQe(t,e,i){const s=zE(t,1,!1);if(e<=0)return e;if(e>=s)return e-s+1;const n=[0];return Jg(new WQe(t,e),Ze.unit(),1,n)!==1&&bt(""),n[0]}function Xte(t){const e=Ge(Y,3),i=[0,0,0];return t.queryControlPoints(e),t.queryWeights(i),KQe(e,i)}function KQe(t,e){const i=ld(e);if(i===1)return e1e(t);if(i===0)return 0;const s=[new Y(0,0),t[1].sub(t[0]),t[2].sub(t[0])],n=s[1].crossProduct(s[2]);if(i<1){K(i>0);const r=1-i;let o;if(r<.01)o=-1/3+r*(2/15+r*(3/35+r*(16/315+r*(20/693+r*(16/1001+r*(56/6435))))));else{const l=r*(1+i),u=Math.atan2(Math.sqrt(r),Math.sqrt(1+i));o=i*(.5*i-FKe(l)*u)/l}return n*o}{const r=(i-1)*(i+1);return .25*i/Math.pow(r,1.5)*(-2*i*Math.sqrt(r)*n-4*s[1].y*s[2].x*Math.atanh(Math.sqrt((i-1)/(i+1)))-s[1].x*s[2].y*Math.log(2*i*(i-Math.sqrt(r))-1))}}function JQe(t,e){const i=ld(e);if(i===1){const r=Ge(Y,3);Pj(t,r);const o=r[2].clone(),l=r[1].clone(),u=new Y,f=o.y*l.x-o.x*l.y;return u.x=-(4*o.x+5*l.x)*f/60,u.y=-(4*o.y+5*l.y)*f/60,u}if(i===0)return new Y(0,0);K(i>0);const s=t[1].sub(t[0]),n=t[2].sub(t[0]);if(i<1){const r=Math.sqrt(1-i),o=Math.sqrt(1+i),l=(s.y*n.x-s.x*n.y)*i/Math.pow(r*o,5)/12,u=Math.atan2(r,o),f=i*r*o,y=i*i,_=s.mul(2*(2+y)),x=n.mul(2*y-5),S=_.add(x).mul(f),P=n.sub(s.mul(2*y)).mul(6*u);return S.add(P).mul(l)}{const r=Math.sqrt(i-1),o=Math.sqrt(i+1),l=(s.y*n.x-s.x*n.y)*i/Math.pow(r*o,5)/12,u=Math.atanh(r/o),f=i*r*o,y=i*i,_=s.mul(4).sub(n.mul(5)),x=s.add(n).mul(2*y),S=_.add(x).mul(f),P=n.sub(s.mul(2*y)).mul(6*u);return S.add(P).mul(l)}}function QQe(t){const e=Ge(Y,3),i=[0,0,0];return t.queryControlPoints(e),t.queryWeights(i),JQe(e,i)}function o1e(t){return eet(t.calculateUpperLength2D())}function eet(t){return 256*en()*t}function tet(t){if(t.m_weights[1]===0)return!0;const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function Wte(t){return t.m_cachedValues}function a1e(t,e){t.m_cachedValues=e}function _z(t,e,i,s,n){const r=Ge(Y,3);t.queryControlPoints(r);const o=[0,0,0];t.queryWeights(o);const l=[0];return Tj(r,o,e,Ze.unit(),s,n,1,l)===1?l[0]:Number.NaN}function Tj(t,e,i,s,n,r,o,l){ME(Ze.unit().contains(s)&&o>0,""),(r<0||Number.isNaN(r))&&(r=Number.MAX_VALUE);const u=new Array(3);for(let Oe=0;Oe<3;++Oe)u[Oe]=t[Oe].sub(i);const f=ld(e),y=ys.constructPoint2D(u[0]),_=ys.constructPoint2D(u[1]),x=ys.constructPoint2D(u[2]),S=_t.constructDouble(f),P=S.clone();P.ldexpThis(1);const A=y.dotProduct(_.sub(y)).mul(S),k=S.mul(S.addDouble(2)),$=x.sub(_.mul(k.ldexp(1))),F=_.sqrLength().mul(S.mul(S).ldexp(1)).add(y.sqrLength().mul(S.ldexp(2).subDouble(1))).add(y.dotProduct($)),G=x.sub(_.mul(P)).add(y.mul(P.subDouble(1))),V=_.mul(S).sub(y).dotProduct(G).mulDouble(3),B=_.dotProduct(x).mul(S.subDouble(3).mul(S)).ldexp(1),W=_.sqrLength().mul(S.mul(S).ldexp(2)),J=y.sqrLength().mul(S.ldexp(2).subDouble(3)),re=y.dotProduct(x.sub(_.mul(S.mulDouble(3).subDouble(1)).mul(S))).ldexp(1),se=x.sqrLength().addThis(B).addThis(W).addThis(J).addThis(re),oe=y.add(x).sub(_.mul(P)),pe=S.subDouble(1),ce=x.sub(y).dotProduct(oe).mul(pe),ue=new Y(0,0),ne=[];let de=new Y;Xn(u,e,s.vmin,de);let Se=Y.distance(de,ue);if(Se<=r&&ne.push(new Y(s.vmin,Se)),s.vmin!==s.vmax&&(Xn(u,e,s.vmax,de),Se=Y.distance(de,ue),Se<=r&&ne.push(new Y(s.vmax,Se))),s.width()>0){const Oe=u[2].isZero(),we=Ge(_t,4),Fe=Yge(ce,se,V,F,A,58,s,Oe,we);for(let it=0;it<Fe;it++){if(!s.containsExclusiveCoordinate(we[it].toDouble()))continue;let vt=we[it].toDouble();vt=U2(e,vt);const ot=new Y;Xn(u,e,vt,ot),Se=Y.distance(ot,ue),Se<=r&&ne.push(new Y(vt,Se))}}if(n){K(s.equals(Ze.unit()));{Xn(u,e,-1,de,!0);const Oe=new Y;Xn(u,e,0,Oe);const we=new si({start:de,end:Oe}),Fe=we.getClosestCoordinate(ue,!0);Fe<1&&(de=we.getCoord2D(Fe),Se=Y.distance(de,ue),Se<=r&&ne.push(new Y(Fe-1,Se)))}{Xn(u,e,2,de,!0);const Oe=new Y;Xn(u,e,s.vmax,Oe);const we=new si({start:Oe,end:de}),Fe=we.getClosestCoordinate(ue,!0);Fe>0&&(de=we.getCoord2D(Fe),Se=Y.distance(de,ue),Se<=r&&ne.push(new Y(1+Fe,Se)))}}if(!ne.length)return 0;ne.sort((Oe,we)=>Oe.compare(we));let Pe=0;const Re=ne[0].x;if(l[Pe++]=Re,Pe<o){const Oe=Dge(u,4,!1).total(),we=ne[0].y;for(let Fe=1,it=ne.length;Fe<it;Fe++)if(ne[Fe].y>we+Oe){ne.length=Fe;break}ne.sort((Fe,it)=>xf(Fe.x,it.x)),Pe=0,l[Pe++]=ne[0].x;for(let Fe=1,it=ne.length;Fe<it;Fe++)ne[Fe].x!==l[Pe-1]&&Pe<o&&(l[Pe++]=ne[Fe].x)}return Pe}function iet(t,e,i,s,n){return{tmin:t,tmax:e,t:i,d:s,pt:n.clone()}}function set(t,e,i,s,n){const r=new jr;if(l1e(t,Ze.unit(),r),r.inflate(s),!r.isIntersectingPoint2D(e))return 0;const o=FE(t);let l=0;const u=[];let f=o.specialPoints[0];for(let y=1,_=o.specialPoints.length;y<_;++y){const x=o.specialPoints[y],S=VQe(t,e,f,x);if(u.length===0)u.push(S);else if(S.t===S.tmin)K(u.at(-1).d<=S.d),u.at(-1).tmax=S.tmax;else if(u.at(-1).t===u.at(-1).tmax){K(u.at(-1).d>=S.d);const P=u.at(-1).tmin;u[u.length-1]=S,u.at(-1).tmin=P}else u.push(S);f=x}for(const y of u)if(y.d<=s){const _=y.t;i&&(i[l]=_),l++}return l}function l1e(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s);const n=[0,0,0];t.queryWeights(n),qE(s,n,e,i)}function qE(t,e,i,s){if(i.equalsRange(0,1))return void s.setFromPoints(t,3);const n=Ge(Y,3),r=[0,0,0];wv(t,e,i.vmin,i.vmax,n,r),s.setFromPoints(n,3)}function a7(t){const e=Js(t[0].y,t[1].y),i=Js(t[1].y,t[2].y);if(e>=0&&i>=0||e<=0&&i<=0){const s=Js(t[0].x,t[1].x),n=Js(t[1].x,t[2].x);if(s>=0&&n>=0||s<=0&&n<=0)return!0}return!1}function bz(t){const e=Ge(Y,3);t.queryControlPoints(e);const i=B2(e);return i&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),i}function B2(t){let e=!1;for(let i=0;i<2;i++){const s=Js(t[0][i],t[2][i]);s>0?(Js(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])<0&&(t[1][i]=t[2][i],e=!0)):s<0?(Js(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])>0&&(t[1][i]=t[2][i],e=!0)):t[1][i]!==t[0][i]&&(t[1][i]=t[0][i],e=!0)}return e}function net(t,e,i){i===void 0&&(i=e,e=0);const s=new Y;if(e<0||i>1)return s.setNAN(),s;if(e>i&&Je("calculate_sub_weighted_centroid"),e===i||t.isDegenerate(0))return s.setCoords(0,0),s;const n=FE(t),r=o1e(t),o=r/t.calculateUpperLength2D();let l=e,u=0;for(let f=1,y=n.specialPointsCount();f<y;f++)if(e<n.specialPoints[f]){u=f-1;break}s.setCoords(0,0);for(let f=u+1,y=n.specialPointsCount();f<y;f++){const _=Math.min(n.specialPoints[f],i),x=GQe(t,l,_,o,r);if(s.addThis(x),l=_,i<=n.specialPoints[f])break}return s.add(t.getStartXY().mul(t.calculateLength2D()))}function Zte(t,e,i,s,n,r,o){K(i>=0&&i<=1&&s!==r&&n!==o),K(e[0]>0&&e[2]>0&&e[1]>=0);const l=[1,ld(e),1],u=GE(e,i),f=k6(t,3),y=Ge(ii,3);c1e(f,l,y);const _=Ge(ii,3),x=Ge(ii,3);Sz(y,u,s?_:null,r?x:null),Ez(e,i,n,o);const S=a7(f);if(s){for(let P=0;P<3;++P)xz(_[P],s[P]);Cz(f,s),S&&B2(s)}if(r){for(let P=0;P<3;++P)xz(x[P],r[P]);Cz(f,r),S&&B2(r)}}function wv(t,e,i,s,n,r){if(K(i>=0&&s<=1&&i<=s),i===s){const y=new Y,_=u1e(t,e,i,y);return Ij(t,y),n[0].assign(y),n[1].assign(y),n[2].assign(y),r[0]=_,r[1]=_,void(r[2]=_)}if(i===0&&s===1)return n[0].assign(t[0]),n[1].assign(t[1]),n[2].assign(t[2]),r[0]=e[0],r[1]=e[1],void(r[2]=e[2]);const o=Ge(ii,3);{const y=[1,ld(e),1],_=GE(e,i),x=GE(e,s);c1e(t,y,o),Sz(o,x,o,null),Sz(o,_>=x?1:_/x,null,o)}const l=[0,0,0];Ez(e,s,l,null),Ez(l,i/s,null,l);const u=a7(t),f=Ge(Y,3);xz(o[1],f[1]),Xn(t,e,i,f[0]),Xn(t,e,s,f[2]),Cz(t,f);for(let y=0;y<3;++y)n[y].assign(f[y]),r[y]=l[y];u&&B2(n)}function ret(t,e,i,s){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const n=!!s&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const u=Ge(Y,3);u[0].setCoordsPoint2D(e),u[2].setCoordsPoint2D(i),l.setSub(u[2],u[0]),l.leftPerpendicularThis(),u[1].setAdd(u[0],l),r.setFromTwoTriangles(o,u)?r.transformInPlace(t.m_cp):ar(e,i,.5,t.m_cp),t.changeEndPoints2D(e,i),n&&bz(t)}function Kte(t,e,i,s,n){if(n){if(xm(e,i)!==0)return t?4:2}else if(Kg(e,i))return 1;return H2(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function Jte(t,e,i,s,n){return K(0),0}function oet(t,e){const i=t.getEndXY().sub(t.getStartXY()),s=i.length(),n=t.getControlPoint1();return n.subThis(t.getStartXY()),!(Math.abs(n.crossProduct(i))/s>e)}function aet(t,e,i,s,n){if(n){const r=xm(e,i);if(r!==0){if(t){if(r===1){if(e.m_weights[0]===i.m_weights[0]&&e.m_weights[1]===i.m_weights[1]&&e.m_weights[2]===i.m_weights[2])return 2}else if(e.m_weights[0]===i.m_weights[2]&&e.m_weights[1]===i.m_weights[1]&&e.m_weights[2]===i.m_weights[0])return 2;return 4}return 2}}else if(Kg(e,i))return 1;return VE(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function Qte(t,e,i,s,n){return K(0),0}function H2(t,e,i,s,n,r,o,l,u,f){if(n!==null&&(n.length=0),r!==null&&(r.length=0),s!==null&&(s.length=0),i.isDegenerate(0)){const ut=[0,0],Ct=e.intersectPoint(i.getStartXY(),ut,o);if(Ct>0){if(n!==null)for(let qt=0;qt<Ct;qt++)n.push(ut[qt]);if(r!=null)for(let qt=0;qt<Ct;qt++)r.push(0);if(s!=null)for(let qt=0;qt<Ct;qt++){const Lt=new Y;e.queryCoord2D(ut[qt],Lt),s.push(Lt)}}return Ct}const y=Dl(e,i);if(o=Math.max(o,y),e.isDegenerateToLineHelper(y)){const ut=new si({start:e.getStartXY(),end:e.getEndXY()}),Ct=r7(ut,i,s,n,r,o,l,f);if(n)for(let qt=0;qt<Ct;++qt){const Lt=ut.getCoord2D(n[qt]);n[qt]=e.getClosestCoordinate(Lt,!1)}return Ct}if(Xc(e,i,o))return 0;const _=Ge(Y,3);e.queryControlPoints(_);const x=[0,0,0];e.queryWeights(x);const S=[1,ld(x),1],P=i.getEndXY().sub(i.getStartXY()),A=P.clone();A.leftPerpendicularThis();const k=_[0].clone(),$=_[1].clone(),F=_[2].clone(),G=$.sub(k),V=F.sub(k),B=F.sub($),W=S[0],J=S[1],re=S[2],se=W*J,oe=W*re,pe=J*re,ce=G.dotProduct(A)*se,ue=V.dotProduct(A)*oe;let ne=ce,de=ue-2*ce,Se=B.dotProduct(A)*pe+ue-ue;const Pe=new Array(13),Re=new Array(13);let Oe=xv(Se,de,ne,Ze.unit(),!1,Pe);Oe<0&&(Pe[0]=0,Pe[1]=1,Oe=2);let we=0;for(let ut=0,Ct=we;ut<Oe;++ut){const qt=new Y;Xn(_,S,Pe[ut+Ct],qt),Re[we]=i.getClosestCoordinate(qt,!1),Y.distance(qt,i.getCoord2D(Re[we]))<=o&&(Pe[we]=Pe[ut+Ct],we++)}const Fe=Ge(Y,3),it=Ge(Y,3);if(e.queryControlPoints(it),it[0].subThis(i.getStartXY()),it[1].subThis(i.getStartXY()),it[2].subThis(i.getStartXY()),cet(it,S,Fe,!1),Math.abs(P.x)>=Math.abs(P.y)){const ut=P.y/P.x;Se=Fe[2].y-Fe[2].x*ut,de=Fe[1].y-Fe[1].x*ut,ne=Fe[0].y-Fe[0].x*ut}else{const ut=P.x/P.y;Se=Fe[2].x-Fe[2].y*ut,de=Fe[1].x-Fe[1].y*ut,ne=Fe[0].x-Fe[0].y*ut}const vt=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),ot=[0,0];Oe=xv(Se,de,ne,Ze.unit(),vt,ot);for(let ut=0,Ct=we;ut<Oe;++ut){Pe[ut+Ct]=ot[ut];const qt=new Y;Xn(_,S,Pe[ut+Ct],qt),Re[we]=i.getClosestCoordinate(qt,!1),Y.distance(qt,i.getCoord2D(Re[we]))<=o&&(Pe[we]=Pe[ut+Ct],we++)}K(we<Pe.length+4);for(let ut=0;ut<we;ut++)Pe[ut]=U2(x,Pe[ut]);Oe=e.intersectPoint(i.getStartXY(),ot,o);for(let ut=0;ut<Oe;ut++)Pe[we]=ot[ut],Re[we++]=0;Oe=e.intersectPoint(i.getEndXY(),ot,o);for(let ut=0;ut<Oe;ut++)Pe[we]=ot[ut],Re[we++]=1;Oe=i.intersectPoint(e.getStartXY(),ot,o);for(let ut=0;ut<Oe;ut++)Re[we]=ot[ut],Pe[we++]=0;Oe=i.intersectPoint(e.getEndXY(),ot,o);for(let ut=0;ut<Oe;ut++)Re[we]=ot[ut],Pe[we++]=1;return we===0?0:Wc(t,e,i,Pe,Re,we,s,n,r,o,l,u,f)}function eie(t,e,i,s,n,r,o,l,u,f){return K(0),0}function VE(t,e,i,s,n,r,o,l,u,f){const y=Ge(Y,3);e.queryControlPoints(y);const _=Ge(Y,3);if(i.queryControlPoints(_),Ej(y,_,3)<0)return VE(t,i,e,s,r,n,o,l,u,!f);const x=Dl(e,i);if(e.isDegenerateToLineHelper(x)){const W=new si({start:e.getStartXY(),end:e.getEndXY()}),J=H2(t,i,W,s,r,n,o,l,u,!f);if(n)for(let re=0;re<J;++re){const se=W.getCoord2D(n[re]);n[re]=e.getClosestCoordinate(se,!1)}return J}if(i.isDegenerateToLineHelper(x)){const W=new si({start:i.getStartXY(),end:i.getEndXY()}),J=H2(t,e,W,s,n,r,o,l,u,f);if(r)for(let re=0;re<J;++re){const se=W.getCoord2D(r[re]);r[re]=i.getClosestCoordinate(se,!1)}return J}if(Xc(e,i,o=Math.max(o,x)))return 0;const S=new Array(3);e.queryWeights(S);const P=new Array(3);i.queryWeights(P);const A=[1,ld(S),1],k=[1,ld(P),1],$=new Ze(0,1),F=new Ze(0,1);{const W=jr.constructEmpty();qE(y,A,new Ze(0,1),W);const J=jr.constructEmpty();qE(_,k,new Ze(0,1),J);const re=Math.max(W.maxDim(),J.maxDim());if(W.inflate(3*o),J.inflate(3*o),!W.intersectW(J))return 0;if(W.maxDim()<.1*re){if(wz(y,A,W,$),wz(_,k,W,F),$.isEmpty()||F.isEmpty())return 0;wv(y,A,$.vmin,$.vmax,y,A),wv(_,k,F.vmin,F.vmax,_,k)}}const G=Nx(y,2,_,2,o);if(G===0)return 0;const V=[],B=[];if(G===-1){const W=Ge(_t,3),J=Ge(_t,3),re=Ge(_t,3);j6(y,A,W,J,re);const se=Ge(_t,3),oe=Ge(_t,3),pe=Ge(_t,3);j6(_,k,se,oe,pe);const ce=[],ue=[],ne=Dx(W,2,J,2,re,2,se,2,oe,2,pe,2,!0,Ze.unit(),Ze.unit(),ce,ue);if(ne>0)for(let de=0;de<ne;de++){const Se=new Y;Xn(_,k,ue[de],Se);const Pe=new Y;Xn(y,A,ce[de],Pe),Y.distance(Pe,Se)<=o&&(V.push(ce[de]),B.push(ue[de]))}}for(let W=0;W<2;W++){let J,re,se;W===0?(J=y,re=_,se=k):(J=_,re=y,se=A);for(let oe=0;oe<2;oe++){const pe=oe===0?0:J.length-1,ce=new Y,ue=[0],ne=Tj(re,se,J[pe],Ze.unit(),!1,-1,1,ue);K(ne===1),Xn(re,se,ue[0],ce),Y.distance(J[pe],ce)<=o&&(W===0?(V.push(pe===0?0:1),B.push(ue[0])):(B.push(pe===0?0:1),V.push(ue[0])))}}if(V.length===0)return 0;if(!$.equalsRange(0,1))for(let W=0;W<V.length;++W)V[W]=ba.recalculateParentT($.vmin,$.vmax,V[W]);if(!F.equalsRange(0,1))for(let W=0;W<B.length;++W)B[W]=ba.recalculateParentT(F.vmin,F.vmax,B[W]);for(let W=0;W<V.length;++W)V[W]=U2(S,V[W]);for(let W=0;W<B.length;++W)B[W]=U2(P,B[W]);return Wc(t,e,i,V,B,V.length,s,n,r,o,l,u,f)}function tie(t,e,i,s,n,r,o,l,u,f){if(e.isLine())return G6(t,i,new si({start:e.getStartXY(),end:e.getEndXY()}),s,r,n,o,l,u,!f);if(i.isLine())return H2(t,e,new si({start:i.getStartXY(),end:i.getEndXY()}),s,n,r,o,l,u,f);const y=Dl(e,i);if(Xc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,3);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=Nx(_,2,x,2,o);if(S===0)return 0;const P=[],A=[];if(S===-1){const k=Ge(_t,3),$=Ge(_t,3),F=Ge(_t,3),G=[0,0,0];e.queryWeights(G),j6(_,G,k,$,F);const V=Ge(ys,3);j2(x,V);const B=Dx(k,2,$,2,F,2,[V[0].x,V[1].x,V[2].x],2,[V[0].y,V[1].y,V[2].y],2,null,0,!0,Ze.unit(),Ze.unit(),P,A);if(B>0){let W=0;for(let J=0;J<B;J++){const re=new Y;i.queryCoord2D(A[J],re);const se=new Y;e.queryCoord2D(P[J],se),Y.distance(se,re)<=o&&(P[W]=P[J],A[W]=A[J],W++)}P.length=W,A.length=W}}for(let k=0;k<2;k++){let $;$=k===0?_:x;for(let F=0;F<2;F++){const G=F===0?0:$.length-1;let V;const B=new Y;k===0?(V=V6(i,$[G],Ze.unit(),!1),i.queryCoord2D(V,B)):(V=_z(e,$[G],Ze.unit(),!1,-1),e.queryCoord2D(V,B)),Y.distance($[G],B)<=o&&(k===0?(P.push(G===0?0:1),A.push(V)):(A.push(G===0?0:1),P.push(V)))}}return Wc(t,e,i,P,A,P.length,s,n,r,o,l,u,f)}function cet(t,e,i,s=!1){const n=Ge(Y,3);s?(n[0].setCoordsPoint2D(t[0]),n[1].setCoordsPoint2D(t[1]),n[1].subThis(n[0]),n[2].setCoordsPoint2D(t[2]),n[2].subThis(n[0]),n[0].setCoords(0,0)):(n[0].setCoordsPoint2D(t[0]),n[1].setCoordsPoint2D(t[1]),n[2].setCoordsPoint2D(t[2])),n[0].mulThis(e[0]),n[1].mulThis(e[1]),n[2].mulThis(e[2]),i[1].setCoords(n[1].x-n[0].x,n[1].y-n[0].y),i[2].setCoordsPoint2D(n[2].sub(n[1])),i[2].subThis(i[1]),i[1].x*=2,i[1].y*=2,i[0].setCoordsPoint2D(n[0])}function j6(t,e,i,s,n){const r=_t.constructDouble(e[0]),o=_t.constructDouble(e[1]),l=_t.constructDouble(e[2]);i[0].setDouble(t[0].x),i[0].mulThis(r),i[1].setDouble(t[1].x),i[1].mulThis(o),i[2].setDouble(t[2].x),i[2].mulThis(l),i[2].subThis(i[1]),i[1].subThis(i[0]),i[2].subThis(i[1]),i[1].ldexpThis(1),s[0].setDouble(t[0].y),s[0].mulThis(r),s[1].setDouble(t[1].y),s[1].mulThis(o),s[2].setDouble(t[2].y),s[2].mulThis(l),s[2].subThis(s[1]),s[1].subThis(s[0]),s[2].subThis(s[1]),s[1].ldexpThis(1),n[0].setDouble(e[0]),n[1].setDouble(e[1]),n[2].setThis(n[1]),n[2].ldexpThis(1),n[2].negateThis(),n[2].addThis(n[0]),n[2].addDoubleThis(e[2]),n[1].subThis(n[0]),n[1].ldexpThis(1)}function c1e(t,e,i){for(let s=0;s<3;++s)i[s].setCoordsPoint2DZ(t[s].mul(e[s]),e[s])}function u1e(t,e,i,s){if(i===0)return s.assign(t[0]),e[0];if(i===1)return s.assign(t[2]),e[2];const n=[t[0].x*e[0],t[1].x*e[1],t[2].x*e[2]],r=[t[0].y*e[0],t[1].y*e[1],t[2].y*e[2]],o=[e[0],e[1],e[2]],l=i;let u,f,y;if(i<=.5){const _=wo(n[0],n[1],l),x=wo(n[1],n[2],l);u=ji(_,x,l);const S=wo(r[0],r[1],l),P=wo(r[1],r[2],l);f=ji(S,P,l);const A=wo(o[0],o[1],l),k=wo(o[1],o[2],l);y=wo(A,k,l)}else{const _=Fr(n[0],n[1],l),x=Fr(n[1],n[2],l);u=Fr(_,x,l);const S=Fr(r[0],r[1],l),P=Fr(r[1],r[2],l);f=Fr(S,P,l);const A=Fr(o[0],o[1],l),k=Fr(o[1],o[2],l);y=Fr(A,k,l)}return u/=y,f/=y,s.setCoords(u,f),Ij(t,s),y}function uet(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s);const n=[0,0,0];t.queryWeights(n),het([Ht.constructPoint2D(s[0]),Ht.constructPoint2D(s[1]),Ht.constructPoint2D(s[2])],[new Be(n[0]),new Be(n[1]),new Be(n[2])],e,i)}function het(t,e,i,s){if(i.value()===0)return void s.setE(t[0]);if(i.value()===1)return void s.setE(t[2]);const n=[t[0].x.mulE(e[0]),t[1].x.mulE(e[1]),t[2].x.mulE(e[2])],r=[t[0].y.mulE(e[0]),t[1].y.mulE(e[1]),t[2].y.mulE(e[2])],o=[e[0].clone(),e[1].clone(),e[2].clone()],l=new Be,u=new Be,f=new Be;if(i.value()<=.5){const _=Pu(n[0],n[1],i),x=Pu(n[1],n[2],i);l.setE(Pu(_,x,i));const S=Pu(r[0],r[1],i),P=Pu(r[1],r[2],i);u.setE(Pu(S,P,i));const A=Pu(o[0],o[1],i),k=Pu(o[1],o[2],i);f.setE(Pu(A,k,i))}else{const _=Tu(n[0],n[1],i),x=Tu(n[1],n[2],i);l.setE(Tu(_,x,i));const S=Tu(r[0],r[1],i),P=Tu(r[1],r[2],i);u.setE(Tu(S,P,i));const A=Tu(o[0],o[1],i),k=Tu(o[1],o[2],i);f.setE(Tu(A,k,i))}l.divThisE(f),u.divThisE(f);const y=new Y(l.value(),u.value());Ij([t[0].value(),t[1].value(),t[2].value()],y),s.x.set(y.x,l.eps()),s.y.set(y.y,u.eps())}function xz(t,e){return e.setCoords(t.x/t.z,t.y/t.z),t.z}function Xn(t,e,i,s,n){if(n){if(i<0)return void gl(new si({start:t[0],end:t[0].add(vz(t,e,0).getUnitVector())}),i,s);if(i>1)return void gl(new si({start:t[2],end:t[2].add(vz(t,e,1).getUnitVector())}),i-1,s)}u1e(t,e,i,s)}function wz(t,e,i,s){s.setEmpty();const n=[];n.push(new Ze(0,1));const r=.5*Math.max(i.width(),i.height());for(;n.length;){const o=n.at(-1);n.pop();const l=new jr;if(qE(t,e,o,l),l.isIntersectingW(i)){const u=Math.max(l.width(),l.height());if(i.containsW(l)||u<=r||o.width()<1e-12)s.merge(o);else{const f=o.getCenter();n.push(Ze.construct(o.vmin,f)),n.push(Ze.construct(f,o.vmax))}}}}function ld(t){return t[1]/Math.sqrt(t[0]*t[2])}function U2(t,e){const i=Math.sqrt(t[2]/t[0]);return e/ji(i,1,e)}function GE(t,e){const i=Math.sqrt(t[0]/t[2]);return e/ji(i,1,e)}function det(t,e){const i=Ge(Y,3);t.queryControlPoints(i);const s=[0,0,0];t.queryWeights(s),e.setControlPointsAndWeights(i,s)}function Sz(t,e,i,s){K(e>=0&&e<=1),new ii().setCoordsPoint3D(t[0]),new ii().setCoordsPoint3D(t[1]),new ii().setCoordsPoint3D(t[2]);const n=new ii,r=new ii,o=new ii;YS(3,t[0],t[1],e,n),YS(3,t[1],t[2],e,r),YS(3,n,r,e,o);const l=t[2].clone();i&&(i[0].assign(t[0]),i[1].assign(n),i[2].assign(o)),s&&(s[0].assign(o),s[1].assign(r),s[2].assign(l))}function Ez(t,e,i,s){const n=[t[0],t[1],t[2]];K(e>=0&&e<=1&&i!==s);const r=ji(n[0],n[1],e),o=ji(n[1],n[2],e),l=ji(r,o,e);i&&(i[0]=n[0],i[1]=r,i[2]=l),s&&(s[0]=l,s[1]=o,s[2]=n[2])}function Ij(t,e){const i=Ze.constructEmpty();i.vmin=i.vmax=t[0].x,i.mergeNeCoordinate(t[1].x),i.mergeNeCoordinate(t[2].x),e.x=un(e.x,i.vmin,i.vmax),i.vmin=i.vmax=t[0].y,i.mergeNeCoordinate(t[1].y),i.mergeNeCoordinate(t[2].y),e.y=un(e.y,i.vmin,i.vmax)}function Cz(t,e){const i=new Ze;i.vmin=i.vmax=t[0].x,i.mergeNeCoordinate(t[1].x),i.mergeNeCoordinate(t[2].x),e[0].x=un(e[0].x,i.vmin,i.vmax),e[1].x=un(e[1].x,i.vmin,i.vmax),e[2].x=un(e[2].x,i.vmin,i.vmax),i.vmin=i.vmax=t[0].y,i.mergeNeCoordinate(t[1].y),i.mergeNeCoordinate(t[2].y),e[0].y=un(e[0].y,i.vmin,i.vmax),e[1].y=un(e[1].y,i.vmin,i.vmax),e[2].y=un(e[2].y,i.vmin,i.vmax)}var tT=_r;class ba extends f5{constructor(e){return e===void 0||JA(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new Y(0,0),void(this.m_weights=[1,0,1])):(e.fromPoint&&e.weight?e={fromPoint:e.fromPoint,controlPoint1:e.controlPoint1,toPoint:e.toPoint,weight0:1,weight1:e.weight,weight2:1}:e.points&&e.weight?e={fromPoint:e.points[0],controlPoint1:e.points[1],toPoint:e.points[2],weight0:1,weight1:e.weight,weight2:1}:e.points&&e.weights&&(e={fromPoint:e.points[0],controlPoint1:e.points[1],toPoint:e.points[2],weight0:e.weights[0],weight1:e.weights[1],weight2:e.weights[2]}),e.fromPoint&&e.weight0?(super({start:e.fromPoint,end:e.toPoint}),(e.weight0<=0||e.weight1<0||e.weight2<=0)&&Je("weights"),this.m_cp=e.controlPoint1.clone(),void(this.m_weights=[e.weight0,e.weight1,e.weight2])):e.copy?(super(e),this.m_cp=e.copy.m_cp.clone(),void(this.m_weights=e.copy.m_weights.slice())):e.move?(super(e),this.m_cp=e.move.m_cp.clone(),void(this.m_weights=e.move.m_weights.slice())):void K(0))}getBoundary(){return Zh(this)}assignMove(e){return this}assignCopy(e){return e.copyTo(this),this}construct(e,i,s,n){this.dropAllAttributes(),this.setCpsAndWeights(e,i,s,1,n,1),Q4(this)}constructWeights(e,i,s,n,r,o){}constructArray(e,i){this.construct(e[0],e[1],e[2],i)}constructArrayWeights(e,i){this.dropAllAttributes(),this.setCpsAndWeightsArray(e,i),Q4(this)}convertToStandardForm(){}getStandardFormWeight(){return this.m_weights[1]/Math.sqrt(this.m_weights[0]*this.m_weights[2])}getGeometryType(){return me.enumRationalBezier2}queryEnvelope(e){if(e instanceof xe){if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp))return;const i=Wte(this);if(i!==null){const s=new Y;for(const n of i.specialPoints)this.queryCoord2D(n,s),e.mergeNe(s)}else{const s=[],n=Ge(Y,3);this.queryControlPoints(n),r1e(n,this.m_weights,s);const r=new Y;for(const o of s)this.queryCoord2D(o,r),e.mergeNe(r)}}}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,3);return this.queryControlPoints(i),e.transformPoints2D(i,3,i),this.setStartXY(i[0]),this.m_cp.assign(i[1]),this.setEndXY(i[2]),void this.afterCompletedModification()}}createInstance(){return new ba({vd:this.m_description})}calculateLength2D(){return zE(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return this.m_weights[1]>0?Y.distance(this.getStartXY(),this.m_cp)+Y.distance(this.getEndXY(),this.m_cp):Y.distance(this.getStartXY(),this.getEndXY())}queryCoord2D(e,i){return this.queryCoord2DExtension(e,i,!0)}queryCoord2DE(e,i){uet(this,e,i)}queryCoord2DExtension(e,i,s){if(s){if(e<0)return void gl(new si({start:this.getStartXY(),end:this.getStartXY().add(this.getTangent(0).getUnitVector())}),e,i);if(e>1)return void gl(new si({start:this.getEndXY(),end:this.getEndXY().add(this.getTangent(1).getUnitVector())}),e-1,i)}const n=Ge(Y,3);this.queryControlPoints(n),Xn(n,this.m_weights,e,i)}getCoordX(e){const i=new Y;return this.queryCoord2DExtension(e,i,!0),i.x}getCoordY(e){const i=new Y;return this.queryCoord2DExtension(e,i,!0),i.y}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createQuadraticRationalBezier();if(this.cutBezierIgnoreAttributes(e,i,r),n)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const u=this.m_description.getSemantics(l),f=tT.getComponentCount(u);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,u,y);r.setStartAttribute(u,y,_)}}for(let l=1;l<o;l++){const u=this.m_description.getSemantics(l),f=tT.getComponentCount(u);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,u,y);r.setEndAttribute(u,y,_)}}}}queryDerivative(e,i){YQe(this,e,i)}cutBezierIgnoreAttributes(e,i,s){(e<0||i>1||e>i)&&Je("Quadratic_rational_bezier.cut_bezier_ignore_attributes");const n=Ge(Y,3);this.queryControlPoints(n);const r=[0,0,0];wv(n,this.m_weights,e,i,n,r),s.setControlPointsAndWeights(n,r)}splitBezierIgnoreAttributes(e,i,s){}getAttributeAsDbl(e,i,s){if(i===0)return s===0?this.getCoordX(e):this.getCoordY(e);const n=this.calculateLength2D(),r=n>0?this.tToLength(e)/n:0,o=tT.getInterpolation(i),l=this.getStartAttributeAsDbl(i,s),u=this.getEndAttributeAsDbl(i,s);return ZA(o,l,u,r,tT.getDefaultValue(i))}getClosestCoordinate(e,i){return _z(this,e,Ze.unit(),i,-1)}getClosestCoordinateOnInterval(e,i,s=-1){return _z(this,e,i,!1,s)}getYMonotonicParts(e,i){return 0}getMonotonicParts(e,i){e.length<2&&Je("");const s=FE(this);let n=0;if(s.specialPointsCount()===2)return 0;K(e.length>=s.specialPointsCount()-1);for(let r=1,o=s.specialPointsCount();r<o;++r)this.queryCut(s.specialPoints[r-1],s.specialPoints[r],e[n],i),n++;for(let r=0;r<n;++r)bz(e[r].get());return n}intersectionWithAxis2D(e,i,s,n){s&&(s.length=9),n&&(n.length=9);const r=new Array(3),o=Ge(Be,2),l=new Ze(0,1);let u=0;const f=Ge(Y,3);if(this.queryControlPoints(f),e){if(r[0]=new Be(f[0].y).sub(i).mul(this.m_weights[0]),r[1]=new Be(f[1].y).sub(i).mul(this.m_weights[1]),r[2]=r[0].subE(r[1].mul(2)).addE(new Be(f[2].y).sub(i).mul(this.m_weights[2])),r[1]=r[1].subE(r[0]).mulThisByPower2(2),u=El(r[2],r[1],r[0],l,!1,o),s)for(let y=0;y<u;y++)s[y]=this.getCoordX(o[y].value())}else if(r[0]=new Be(f[0].x).sub(i).mul(this.m_weights[0]),r[1]=new Be(f[1].x).sub(i).mul(this.m_weights[1]),r[2]=r[0].subE(r[1].mul(2)).addE(new Be(f[2].x).sub(i).mul(this.m_weights[2])),r[1]=r[1].subE(r[0]).mulThisByPower2(2),u=El(r[2],r[1],r[0],l,!1,o),s)for(let y=0;y<u;y++)s[y]=this.getCoordY(o[y].value());if(n)for(let y=0;y<u;y++)n[y]=o[y].value();else s&&rd(s,0,u,xf);return u}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[Number.NaN,Number.NaN],n=this.intersectionWithAxis2D(!0,e,s,null);return K(n!==2),n===-1?i:s[0]}isCurve(){return!0}isDegenerate(e){return n7(this,e)}isDegenerate3D(e,i){return!1}queryLooseEnvelope(e){if(e instanceof xe)return e.setCoords({pt:this.getStartXY()}),e.mergeNe(this.m_cp),void e.mergeNe(this.getEndXY())}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const s=xe.constructEmpty();this.queryEnvelope(s);const n=Ze.constructEmpty();return i===0?s.queryIntervalX(n):s.queryIntervalY(n),n}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=Ge(Y,3);this.queryControlPoints(s);const n=[0,0,0];wv(s,this.m_weights,e.vmin,e.vmax,s,n),i.setFromPoints(s,3)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp.isEqual(this.m_XStart,this.m_YStart),n=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),s?this.m_cp.setCoordsPoint2D(e):n&&this.m_cp.setCoordsPoint2D(i),this.normalizeAfterEndpointChange()}tToLength(e){return zE(this,e,!0)}lengthToT(e){return ZQe(this,e)}calculateWeightedAreaCentroid2D(e){const i=QQe(this),s=Xte(this);return i.x+=(this.getStartX()-e.x)*s,i.y+=(this.getStartY()-e.y)*s,i}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):tet(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(net(this,1)),e)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(e){this.m_cp.setCoordsPoint2D(e),this.afterCompletedModification()}queryWeights(e){for(let i=0;i<3;++i)e[i]=this.m_weights[i]}setWeights(e){}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp),e[2].assign(this.getEndXY())}setControlPointsAndWeights(e,i){this.setCpsAndWeightsArray(e,i),this.afterCompletedModification()}getTangent(e){const i=Ge(Y,3);return this.queryControlPoints(i),vz(i,this.m_weights,e)}getDerivative(e){return Y.getNAN()}getCurvature(e){return 0}isIntersecting(e,i,s){return!1}isIntersectingPoint(e,i,s){return!1}isIntersectingPoint3D(e,i,s,n,r=1){return!1}queryAttributeAsDbl(e,i,s,n){}isMonotoneQuickAndDirty(){const e=Ge(Y,3);return this.queryControlPoints(e),a7(e)}getMonotonicPartParams(e,i){const s=FE(this),n=s.specialPointsCount();if(!i)return s.specialPointsCount();e<n&&Je("");for(let r=0;r<n;r++)i[r]=s.specialPoints[r];return n}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=St(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=St(this.m_YStart,this.m_YStart=this.m_YEnd),this.m_weights[2]=St(this.m_weights[0],this.m_weights[0]=this.m_weights[2]);for(let e=0,i=this.m_description.getTotalComponentCount()-2;e<i;e++)this.m_attributes[e+i]=St(this.m_attributes[e],this.m_attributes[e]=this.m_attributes[e+i]);this.m_cachedValues=null}}isLine(){return!1}isDegenerateToLineHelper(e){const i=[e];return!!xj(this,i)&&oet(this,i[0])}copyIgnoreAttributes(e){det(this,e)}calculateArea2DHelper(){return Xte(this)}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)+this.m_cp.norm(1)}absNormXYZ(e){return K(0),0}queryEnvelopeW(e,i){l1e(this,e,i)}setSegmentFromCoords(e,i){}writeInBufferStream(e,i){const s=new Float64Array(5);return s[0]=this.m_cp.x,s[1]=this.m_cp.y,s[2]=this.m_weights[0],s[3]=this.m_weights[1],s[4]=this.m_weights[2],e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}readFromBufferStream(e,i){const s=new Float64Array(5);e.queryRange(i,s.length,s,!0,1),this.m_cp.x=s[0],this.m_cp.y=s[1],this.m_weights[0]=s[2],this.m_weights[1]=s[3],this.m_weights[2]=s[4],this.m_cachedValues=null}snapControlPoints(e){const i=Ge(Y,3);this.queryControlPoints(i);const s=Y.sqrDistance(i[1],i[0]),n=Y.sqrDistance(i[1],i[2]);let r=i[0].clone(),o=s;s>n&&(r=i[2].clone(),o=n);let l=!1;return o<=e&&o!==0&&(l=!0,this.setControlPoint1(r)),l}needsSnapControlPoints(e){if(!e)return!1;const i=Ge(Y,3);this.queryControlPoints(i);const s=Y.sqrDistance(i[1],i[0]),n=Y.sqrDistance(i[1],i[2]);i[0].clone();let r=s;return s>n&&(i[2].clone(),r=n),r<=e&&r!==0}calculateSpecialPointsForCracking(e,i){return 0}ensureXYMonotone(){return bz(this)}setCoordsForIntersector(e,i,s){ret(this,e,i,s)}copyToImpl(e){const i=e;i.m_cp.setCoordsPoint2D(this.m_cp),i.m_weights[0]=this.m_weights[0],i.m_weights[1]=this.m_weights[1],i.m_weights[2]=this.m_weights[2],a1e(i,Wte(this))}reverseImpl(){this.m_weights[2]=St(this.m_weights[0],this.m_weights[0]=this.m_weights[2])}equalsImpl(e){const i=e;if(!this.m_cp.equals(i.m_cp))return!1;for(let s=0;s<3;s++)if(this.m_weights[s]!==i.m_weights[s])return!1;return!0}equalsImplTol(e,i){const s=e;if(!this.m_cp.isEqualPoint2D(s.m_cp,i))return!1;const n=Ge(Y,3);this.queryControlPoints(n);const r=Ge(Y,3);s.queryControlPoints(r);const o=[s.m_weights[0],s.m_weights[1],s.m_weights[2]];for(let l=0;l<3;l++){const u=new ii;u.setCoordsPoint2DZ(n[l].mul(this.m_weights[l]),this.m_weights[l]);const f=new ii;if(f.setCoordsPoint2DZ(r[l].mul(o[l]),o[l]),!u.isEqual(f,i))return!1}return!0}getHashCodeImpl(){return 0}swapImpl(e){}afterCompletedModification(){Q4(this)}intersect(e,i,s,n,r){return Gv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){return set(this,e,i,s)}intersect_(e,i,s,n){return 0}endPointModified(){Q4(this)}clearEndPointModified(){}setCpsAndWeights(e,i,s,n,r,o){(n<=0||o<=0||r<0)&&Je("weights"),(e.isNAN()||i.isNAN()||s.isNAN())&&Je("NAN control points in bezier are not supported"),this.setStartXY(e),this.m_cp.assign(i),this.m_weights[0]=n,this.m_weights[1]=r,this.m_weights[2]=o,this.setEndXY(s)}setCpsAndWeightsArray(e,i){this.setCpsAndWeights(e[0],e[1],e[2],i[0],i[1],i[2])}}ba.type=me.enumRationalBezier2;class fet{constructor(){this.length=Number.NaN,this.specialPoints=[]}specialPointsCount(){return this.specialPoints.length}}function h1e(t){return pet(t.calculateUpperLength2D())}function pet(t){return 256*en()*t}function met(t){const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function d1e(t,e,i=!1){e[1].setCoords(t.m_cp[0].x-t.getStartX(),t.m_cp[0].y-t.getStartY()),e[1].mulThis(3),e[2].setCoords(t.m_cp[1].x-t.m_cp[0].x,t.m_cp[1].y-t.m_cp[0].y),e[2].mulThis(3),e[3]=t.getEndXY().sub(t.getStartXY()),e[3].subThis(e[2]),e[2].subThis(e[1]),i?e[0].setCoords(0,0):e[0]=t.getStartXY()}function f1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),Mj(s,e,i)}function p1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),Aj(s,e,i)}function Mj(t,e,i){let s=t[1].x;s-=t[0].x,s*=3;let n=t[2].x;n-=t[1].x,n*=3;let r=t[3].x;r-=t[0].x,r-=n,n-=s,e[3].setWithEps(r),e[2].setWithEps(n),e[1].setWithEps(s),i?e[0].set(0):e[0].set(t[0].x)}function Aj(t,e,i){let s=t[1].y;s-=t[0].y,s*=3;let n=t[2].y;n-=t[1].y,n*=3;let r=t[3].y;r-=t[0].y,r-=n,n-=s,e[3].setWithEps(r),e[2].setWithEps(n),e[1].setWithEps(s),i?e[0].set(0):e[0].set(t[0].y)}function Y2(t,e,i=!1){const s=Ge(ys,4);s[0].assignPoint2D(t[0]),s[1].assignPoint2D(t[1]),s[2].assignPoint2D(t[2]),s[3].assignPoint2D(t[3]),e[1].setCoords(s[1].x.sub(s[0].x),s[1].y.sub(s[0].y)),e[1].mulThis(_t.constructInt32(3)),e[2].setCoords(s[2].x.sub(s[1].x),s[2].y.sub(s[1].y)),e[2].mulThis(_t.constructInt32(3)),e[3]=s[3].sub(s[0]),e[3]=e[3].sub(e[2]),e[2]=e[2].sub(e[1]),i?e[0].setCoords(Bo,Bo):e[0]=s[0].clone()}function jE(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+jE(t,1,!1)}if(t.isDegenerate(0))return 0;const s=e===1,n=BE(t);if(s&&!Number.isNaN(n.length)&&!Number.isNaN(n.length))return n.length;const r=h1e(t),o=r/t.calculateUpperLength2D();let l=0,u=0;for(let f=1,y=n.specialPointsCount();f<y;f++){const _=n.specialPoints[f];if(l+=zet(t,u,Math.min(e,_),o,r),e<=_)break;u=_}return s&&(n.length=l),l}function get(t,e,i){const s=jE(t,1,!1);if(e<=0)return e;if(e>=s)return e-s+1;const n=[0];return Jg(new Fet(t,e),Ze.unit(),1,n)!==1&&bt(""),n[0]}function yet(t,e,i){i===void 0&&(i=e,e=0);const s=new Y;if(e<0||i>1)return s.setNAN(),s;if(e>i&&Je("calculate_sub_weightedCentroid"),e===i||t.isDegenerate(0))return s.setCoords(0,0),s;const n=BE(t),r=h1e(t),o=r/t.calculateUpperLength2D();let l=e,u=0;for(let f=1,y=n.specialPointsCount();f<y;f++)if(e<n.specialPoints[f]){u=f-1;break}s.setCoords(0,0);for(let f=u+1,y=n.specialPointsCount();f<y;f++){const _=Math.min(n.specialPoints[f],i),x=qet(t,l,_,o,r);if(s.addThis(x),l=_,i<=n.specialPoints[f])break}return s.add(t.getStartXY().mul(t.calculateLength2D()))}function BE(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new fet,i=Ge(Be,8),s=Ge(Y,4);t.queryControlPoints(s);const n=b1e(s,i);e.specialPoints=[];for(let r=0;r<n;r++)e.specialPoints.push(i[r].value());return m1e(t,e),e}function iie(t){let e=null;return e=t.m_cachedValues,e}function m1e(t,e){t.m_cachedValues=e}function TN(t){t.m_cachedValues=null}function vet(t,e,i,s){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const n=!!s&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const u=Ge(Y,3);u[0].setCoordsPoint2D(e),u[2].setCoordsPoint2D(i),l.setSub(u[2],u[0]),l.leftPerpendicularThis(),u[1].setAdd(u[0],l),r.setFromTwoTriangles(o,u)?r.transformPoints2D(t.m_cp,2,t.m_cp):(ar(e,i,1/3,t.m_cp[0]),ar(e,i,2/3,t.m_cp[1])),t.changeEndPoints2D(e,i),n&&B6(t)}function _et(t,e,i,s,n){return{tmin:t,tmax:e,t:i,d:s,pt:n.clone()}}function bet(t,e,i,s){const n=new Array(18),r=Ge(Y,4);t.queryControlPoints(r);const o=Jg(new _1e(r,e),Ze.construct(i,s),18,n),l=new Y;t.queryCoord2D(i,l);let u=i,f=Y.distance(l,e);const y=new Y;t.queryCoord2D(s,y);const _=Y.distance(y,e);_<f&&(f=_,u=s,l.assign(y));for(let x=0;x<o;x++){t.queryCoord2D(n[x],y);const S=Y.distance(y,e);S<f&&(f=S,u=n[x],l.assign(y))}return _et(i,s,u,f,l)}function g1e(t,e){const i=Ge(Be,4);f1e(t,i,!0);const s=Ge(Be,4);p1e(t,s,!0);const n=i[3].clone(),r=i[2].clone(),o=i[1].clone(),l=s[3].clone(),u=s[2].clone(),f=s[1].clone(),y=r.mulE(o).addE(u.mulE(f)).mul(4),_=r.mulE(r).mul(8).addE(n.mulE(o).mul(12)).addE(u.mulE(u).mul(8).addE(l.mulE(f).mul(12))),x=n.mulE(r).addE(l.mulE(u)).mul(36),S=n.mulE(n).addE(l.mulE(l)).mul(36),P=Ge(Be,3),A=z6(S,x,_,y,new Ze(0,1),!1,P);if(K(A<=3),A>0){const k=Hy(t,1,0).sqrLength(),$=Hy(t,1,1).sqrLength();let F=k;e.set(0),F<$&&(F=$,e.set(1));for(let G=0;G<A;G++){const V=Hy(t,1,P[G].value()).sqrLength();V<F&&(F=V,e=P[G])}}}function xet(t,e,i,s){if(e===1){const n=1-i,r=n*n,o=i*i,l=t[1].sub(t[0]),u=t[2].sub(t[1]),f=t[3].sub(t[2]),y=l.mul(r).add(u.mul(2*n*i)).add(f.mul(o));s.assign(y.mul(3))}else if(e===2){const n=1-i,r=t[2].sub(t[1]).sub(t[1].sub(t[0])),o=t[3].sub(t[2]).sub(t[2].sub(t[1])),l=r.mul(n).add(o.mul(i));s.assign(l.mul(6))}else if(e===3){const n=t[2].sub(t[1]),r=t[3].sub(n.mul(3)).sub(t[0]);s.assign(r.mul(6))}else s.setCoords(0,0)}function wet(t,e,i,s){{const n=nm.subE(i),r=n.sqr(),o=i.sqr(),l=t[1].subE(t[0]).mulE(r).addE(t[2].subE(t[1]).mulE(new Be(2).mulE(n).mulE(i))).addE(t[3].subE(t[2]).mulE(o));s.setE(l.mulE(new Be(3)))}}function ma(t,e,i){const s=new Y;return xet(t,e,i,s),s}function Eet(t,e,i){const s=[Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2]),Ht.constructPoint2D(t[3])],n=new Ht;return wet(s,e,i,n),n}function Hy(t,e,i){const s=Ge(Y,4);return t.queryControlPoints(s),ma(s,e,i)}function sie(t){const e=t.m_cp[0].sub(t.getStartXY()),i=t.m_cp[1].sub(t.m_cp[0]),s=t.getEndXY().sub(t.getStartXY());return e.mulThis(3),i.mulThis(3),s.subThis(i),i.subThis(e),(3*s.x*(2*i.y+5*e.y)-3*s.y*(2*i.x+5*e.x)+10*(i.x*e.y-i.y*e.x))/60}function B6(t){const e=Ge(Y,4);t.queryControlPoints(e);const i=l7(e);return i&&(t.m_cp[0].setCoordsPoint2D(e[1]),t.m_cp[1].setCoordsPoint2D(e[2]),t.afterCompletedModification()),i}function l7(t){let e=!1;for(let i=0;i<2;i++){const s=Js(t[0][i],t[3][i]);s>0?(Js(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[3][i])<0&&(t[1][i]=t[3][i],e=!0),Js(t[0][i],t[2][i])<0&&(t[2][i]=t[0][i],e=!0),Js(t[2][i],t[3][i])<0&&(t[2][i]=t[3][i],e=!0),Js(t[1][i],t[2][i])<0&&(t[2][i]=t[1][i],e=!0)):s<0?(Js(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[3][i])>0&&(t[1][i]=t[3][i],e=!0),Js(t[0][i],t[2][i])>0&&(t[2][i]=t[0][i],e=!0),Js(t[2][i],t[3][i])>0&&(t[2][i]=t[3][i],e=!0),Js(t[1][i],t[2][i])>0&&(t[2][i]=t[1][i],e=!0)):t[1][i]===t[0][i]&&t[2][i]===t[0][i]||(t[1][i]=t[0][i],t[2][i]=t[0][i],e=!0)}return e}function Cet(t){const e=Js(t[0].y,t[1].y),i=Js(t[1].y,t[2].y),s=Js(t[2].y,t[3].y);if(e>=0&&i>=0&&s>=0||e<=0&&i<=0&&s<=0){const n=Js(t[0].x,t[1].x),r=Js(t[1].x,t[2].x),o=Js(t[2].x,t[3].x);if(n>=0&&r>=0&&o>=0||n<=0&&r<=0&&o<=0)return!0}return!1}function iT(t,e,i){const s=new Y,n=new Y,r=new Y,o=new Y,l=new Y;e<=.5?(Wn(2,t[0],t[1],e,s),Wn(2,t[1],t[2],e,n),Wn(2,t[2],t[3],e,r),Wn(2,s,n,e,o),Wn(2,n,r,e,l),Wn(2,o,l,e,i)):(Zn(2,t[0],t[1],e,s),Zn(2,t[1],t[2],e,n),Zn(2,t[2],t[3],e,r),Zn(2,s,n,e,o),Zn(2,n,r,e,l),Zn(2,o,l,e,i))}function HE(t,e,i,s){K(e>=0&&e<=1);const n=new Y,r=new Y,o=new Y,l=new Y,u=new Y,f=new Y;e<=.5?(Wn(2,t[0],t[1],e,n),Wn(2,t[1],t[2],e,r),Wn(2,t[2],t[3],e,o),Wn(2,n,r,e,l),Wn(2,r,o,e,u),Wn(2,l,u,e,f)):(Zn(2,t[0],t[1],e,n),Zn(2,t[1],t[2],e,r),Zn(2,t[2],t[3],e,o),Zn(2,n,r,e,l),Zn(2,r,o,e,u),Zn(2,l,u,e,f));const y=t[3].clone();i&&(i[0].assign(t[0]),i[1].assign(n),i[2].assign(l),i[3].assign(f)),s&&(s[0].assign(f),s[1].assign(u),s[2].assign(o),s[3].assign(y))}function Sv(t,e,i,s){if(K(e>=0&&i<=1&&e<=i),e===i){const r=new Y;return Mn(t,e,r),s[0].assign(r),s[1].assign(r),s[2].assign(r),void s[3].assign(r)}if(e===0&&i===1){for(let r=0;r<4;++r)s[r].assign(t[r]);return}const n=Ge(Y,4);HE(t,i,n,null),HE(n,i>0?e/i:0,null,n),Mn(t,e,n[0]),Mn(t,i,n[3]),s[0].setCoordsPoint2D(n[0]),s[1].setCoordsPoint2D(n[1]),s[2].setCoordsPoint2D(n[2]),s[3].setCoordsPoint2D(n[3])}function Mn(t,e,i,s){if(s){if(e<0)return void gl(new si({start:t[0],end:t[0].add(Pz(t,0).getUnitVector())}),e,i);if(e>1)return void gl(new si({start:t[3],end:t[3].add(Pz(t,1).getUnitVector())}),e-1,i)}if(e<=.5){const n=new Y;Wn(2,t[0],t[1],e,n);const r=new Y;Wn(2,t[1],t[2],e,r);const o=new Y;Wn(2,t[2],t[3],e,o);const l=new Y;Wn(2,n,r,e,l);const u=new Y;Wn(2,r,o,e,u),Wn(2,l,u,e,i)}else{const n=new Y;Zn(2,t[0],t[1],e,n);const r=new Y;Zn(2,t[1],t[2],e,r);const o=new Y;Zn(2,t[2],t[3],e,o);const l=new Y;Zn(2,n,r,e,l);const u=new Y;Zn(2,r,o,e,u),Zn(2,l,u,e,i)}}function Pet(t,e,i){if(e.value()<=.5){const s=new Ht;Kd(2,Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),e,s);const n=new Ht;Kd(2,Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2]),e,n);const r=new Ht;Kd(2,Ht.constructPoint2D(t[2]),Ht.constructPoint2D(t[3]),e,r);const o=new Ht;Kd(2,s,n,e,o);const l=new Ht;Kd(2,n,r,e,l),Kd(2,o,l,e,i)}else{const s=new Ht;Jd(2,Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),e,s);const n=new Ht;Jd(2,Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2]),e,n);const r=new Ht;Jd(2,Ht.constructPoint2D(t[2]),Ht.constructPoint2D(t[3]),e,r);const o=new Ht;Jd(2,s,n,e,o);const l=new Ht;Jd(2,n,r,e,l),Jd(2,o,l,e,i)}}function Tet(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),Pet(s,e,i)}function Pz(t,e){const i=un(e,0,1);let s=ma(t,1,i);return s.isZero()&&(s=ma(t,2,i),s.isZero()?s=ma(t,3,i):i===1&&s.negateThis()),s}function y1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),Iet(s,e,i)}function Iet(t,e,i){e.value()<0&&e.set(0,e.eps()),e.value()>1&&e.set(1,e.eps()),i.setE(Eet(t,1,e))}function nie(t,e,i,s,n){if(n){if(xm(e,i)!==0)return t?4:2}else if(Kg(e,i))return 1;return UE(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function rie(t,e,i,s,n){if(n){if(xm(e,i)!==0)return t?4:2}else if(Kg(e,i))return 1;return Tz(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function Met(t,e,i,s,n){if(n){if(xm(e,i)!==0)return 2}else if(Kg(e,i))return 1;return Dj(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function oie(t,e,i,s,n){if(n){if(xm(e,i)!==0)return t?4:2}else if(Kg(e,i))return 1;return Iz(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function aie(t,e,i,s,n){return K(0),0}function UE(t,e,i,s,n,r,o,l,u,f){if(n!==null&&(n.length=0),r!=null&&(r.length=0),s!==null&&(s.length=0),i.isDegenerate(0)){const re=[0,0,0],se=e.intersectPoint(i.getStartXY(),re,o);if(se>0){if(n!==null)for(let oe=0;oe<se;oe++)n.push(re[oe]);if(r!==null)for(let oe=0;oe<se;oe++)r.push(0);if(s!=null)for(let oe=0;oe<se;oe++){const pe=new Y;e.queryCoord2D(re[oe],pe),s.push(pe)}}return se}const y=Dl(e,i);if(Xc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);d1e(e,_);const x=i.getEndXY();x.subThis(i.getStartXY());const S=x.clone();S.leftPerpendicularThis();let P=3*_[3].dotProduct(S),A=2*_[2].dotProduct(S),k=_[1].dotProduct(S);const $=new Array(15),F=new Array(15);let G=xv(P,A,k,Ze.unit(),!1,$);G<0&&($[0]=0,$[1]=1,G=2);let V,B=0;for(let re=0,se=B;re<G;++re){const oe=e.getCoord2D($[re+se]);F[B]=i.getClosestCoordinate(oe,!1),Y.distance(oe,i.getCoord2D(F[B]))<=o&&($[B]=$[re+se],B++)}if(_[0].subThis(i.getStartXY()),Math.abs(x.x)>=Math.abs(x.y)){const re=x.y/x.x;P=_[3].y-_[3].x*re,A=_[2].y-_[2].x*re,k=_[1].y-_[1].x*re,V=_[0].y-_[0].x*re}else{const re=x.x/x.y;P=_[3].x-_[3].y*re,A=_[2].x-_[2].y*re,k=_[1].x-_[1].y*re,V=_[0].x-_[0].y*re}const W=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),J=[0,0,0];G=Vge(P,A,k,V,Ze.unit(),W,J);for(let re=0,se=B;re<G;++re){$[re+se]=J[re];const oe=e.getCoord2D($[re+se]);F[B]=i.getClosestCoordinate(oe,!1),Y.distance(oe,i.getCoord2D(F[B]))<=o&&($[B]=$[re+se],B++)}G=e.intersectPoint(i.getStartXY(),J,o);for(let re=0;re<G;re++)$[B]=J[re],F[B++]=0;G=e.intersectPoint(i.getEndXY(),J,o);for(let re=0;re<G;re++)$[B]=J[re],F[B++]=1;return i.intersectPoint(e.getStartXY(),J,o)!==0&&(F[B]=J[0],$[B++]=0),i.intersectPoint(e.getEndXY(),J,o)!==0&&(F[B]=J[0],$[B++]=1),B===0?0:Wc(t,e,i,$,F,B,s,n,r,o,l,u,f)}function Tz(t,e,i,s,n,r,o,l,u,f){if(rn(i))return UE(t,e,new si({start:i.getStartXY(),end:i.getEndXY()}),s,n,r,o,l,u,f);const y=Dl(e,i);if(Xc(e,i,o=Math.max(o,y)))return 0;const _=[],x=[],S=[],P=Ge(Y,4);{e.queryControlPoints(P);const k=Ge(Y,4),$=new _i;i.canonicToWorldTransformation($);const F=new _i;F.setInvert($),F.transformPoints2D(P,4,k);const G=Ge(ys,4);Y2(k,G);const V=[G[0].x,G[1].x,G[2].x,G[3].x],B=[G[0].y,G[1].y,G[2].y,G[3].y],W=Ge(_t,3);W[0].setDouble(i.getSemiMinorAxis()),W[0].sqrThis(),W[1].setDouble(i.getSemiMajorAxis()),W[1].sqrThis(),W[2].setThis(W[0]),W[2].mulThis(W[1]),W[2].negateThis();const J=Hge(V,3,B,3,null,0,W,!0,Ze.unit(),Ze.unit(),x);if(J>0){let re=0;for(let se=0;se<J;se++){const oe=new Y;e.queryCoord2D(x[se],oe);const pe=i.getClosestCoordinate(oe,!1),ce=new Y;i.queryCoord2D(pe,ce),Y.distance(oe,ce)<=o&&(_.push(oe.clone()),x[re]=x[se],S.push(pe),re++)}x.length=re,_.length=re}}const A=[0,1];for(let k=0;k<2;k++){const $=k===0?i.getStartXY():i.getEndXY(),F=[0];X2(P,$,Ze.unit(),!1,-1,1,F);const G=new Y;Mn(P,F[0],G),Y.distance($,G)<=o&&(x.push(F[0]),S.push(A[k]),_.push(G.clone()))}for(let k=0;k<2;k++){const $=[0,3];{const F=i.getClosestCoordinate(P[$[k]],!1),G=new Y;i.queryCoord2D(F,G),Y.distance(P[$[k]],G)<=o&&(x.push(A[k]),S.push(F),_.push(G.clone()))}}return Wc(t,e,i,x,S,x.length,s,n,r,o,l,u,f)}function Dj(t,e,i,s,n,r,o,l,u,f){const y=Ge(Y,4);e.queryControlPoints(y);const _=Ge(Y,4);if(i.queryControlPoints(_),Ej(y,_,4)<0)return Dj(t,i,e,s,r,n,o,l,u,!f);const x=Dl(e,i);if(Xc(e,i,o=Math.max(o,x)))return 0;if(Vet(e,i,s,n,r,o,l,u,f))return 2;const S=new Ze(0,1),P=new Ze(0,1);{const V=new jr;YE(y,new Ze(0,1),V);const B=new jr;YE(_,new Ze(0,1),B);const W=Math.max(V.maxDim(),B.maxDim());if(V.inflate(3*o),B.inflate(3*o),!V.intersectW(B))return 0;if(V.maxDim()<.1*W){if(Mz(y,V,S),Mz(_,V,P),S.isEmpty()||P.isEmpty())return 0;Sv(y,S.vmin,S.vmax,y),Sv(_,P.vmin,P.vmax,_)}}const A=Nx(y,3,_,3,o);if(A===0)return 0;const k=[],$=[],F=[];let G=!1;if(A===-1){const V=Ge(ys,4);Y2(y,V);const B=[V[0].x,V[1].x,V[2].x,V[3].x],W=[V[0].y,V[1].y,V[2].y,V[3].y],J=Ge(ys,4);Y2(_,J);const re=[],se=[],oe=Dx(B,3,W,3,null,0,[J[0].x,J[1].x,J[2].x,J[3].x],3,[J[0].y,J[1].y,J[2].y,J[3].y],3,null,0,!0,Ze.unit(),Ze.unit(),re,se);if(oe>0)for(let pe=0;pe<oe;pe++){const ce=new Y;Mn(_,se[pe],ce);const ue=new Y;Mn(y,re[pe],ue),Y.distance(ue,ce)<=o&&(k.push(ue.clone()),F.push(se[pe]),$.push(re[pe]))}else oe===-1&&(G=!0)}for(let V=0;V<2;V++){const B=V===0?y:_,W=V===0?_:y;for(let J=0;J<2;J++){const re=J===0?0:3,se=[0];X2(W,B[re],Ze.unit(),!1,-1,1,se);const oe=new Y;Mn(W,se[0],oe),Y.distance(B[re],oe)<=o&&(V===0?($.push(re===0?0:1),F.push(se[0])):(F.push(re===0?0:1),$.push(se[0])),k.push(oe.clone()))}}if($.length===0&&G){const V=e.calculateUpperLength2D()>i.calculateUpperLength2D();{const B=[0,0];if($et(V?e:i,B,!0)===2&&(K(Ze.unit().containsCoordinate(B[0])),!Ze.unit().containsCoordinate(B[1]))){const W=new Y;Mn(V?y:_,B[0],W);const J=[0,0];X2(V?_:y,W,Ze.unit(),!1,-1,2,J)===1&&(k.push(W.clone()),$.push(V?B[0]:J[0]),F.push(V?J[0]:B[0]))}}}if($.length===0)return 0;if(!S.equalsRange(0,1))for(let V=0;V<$.length;++V)$[V]=Oc.recalculateParentT(S.vmin,S.vmax,$[V]);if(!P.equalsRange(0,1))for(let V=0;V<F.length;++V)F[V]=Oc.recalculateParentT(P.vmin,P.vmax,F[V]);return Wc(t,e,i,$,F,$.length,s,n,r,o,l,u,f)}function Iz(t,e,i,s,n,r,o,l,u,f){const y=Dl(e,i);if(i.isDegenerateToLineHelper(y)){const B=new si({start:i.getStartXY(),end:i.getEndXY()}),W=UE(t,e,B,s,n,r,o,l,u,f);if(r)for(let J=0;J<W;++J){const re=B.getCoord2D(r[J]);r[J]=i.getClosestCoordinate(re,!1)}return W}if(Xc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=new Ze(0,1),P=new Ze(0,1),A=[0,0,0];i.queryWeights(A);const k=[1,ld(A),1];{const B=new jr;YE(_,new Ze(0,1),B);const W=new jr;qE(x,k,new Ze(0,1),W);const J=Math.max(B.maxDim(),W.maxDim());if(B.inflate(3*o),W.inflate(3*o),!B.intersectW(W))return 0;if(B.maxDim()<.1*J){if(Mz(_,B,S),wz(x,k,B,P),S.isEmpty()||P.isEmpty())return 0;Sv(_,S.vmin,S.vmax,_),wv(x,k,P.vmin,P.vmax,x,k)}}const $=Nx(_,3,x,2,o);if($===0)return 0;const F=[],G=[],V=[];if($===-1){const B=Ge(ys,4);Y2(_,B);const W=[B[0].x,B[1].x,B[2].x,B[3].x],J=[B[0].y,B[1].y,B[2].y,B[3].y],re=Ge(_t,3),se=Ge(_t,3),oe=Ge(_t,3);j6(x,k,re,se,oe);const pe=[],ce=[],ue=Dx(re,2,se,2,oe,2,W,3,J,3,null,0,!0,Ze.unit(),Ze.unit(),ce,pe);if(ue>0)for(let ne=0;ne<ue;ne++){const de=new Y;Mn(_,pe[ne],de);const Se=new Y;Xn(x,k,ce[ne],Se),Y.distance(de,Se)<=o&&(F.push(de.clone()),G.push(pe[ne]),V.push(ce[ne]))}}for(let B=0;B<2;B++){let W,J;B===0?(W=_,J=x):(J=_,W=x);for(let re=0;re<2;re++){const se=re===0?0:W.length-1,oe=[0],pe=new Y;if(B===0){const ce=Tj(J,k,W[se],Ze.unit(),!1,-1,1,oe);K(ce===1),Xn(J,k,oe[0],pe)}else{const ce=X2(J,W[se],Ze.unit(),!1,-1,1,oe);K(ce===1),Mn(J,oe[0],pe)}Y.distance(W[se],pe)<=o&&(B===0?(G.push(se===0?0:1),V.push(oe[0])):(V.push(se===0?0:1),G.push(oe[0])),F.push(pe.clone()))}}if(G.length===0)return 0;if(!S.equalsRange(0,1))for(let B=0;B<G.length;++B)G[B]=Oc.recalculateParentT(S.vmin,S.vmax,G[B]);if(!P.equalsRange(0,1))for(let B=0;B<V.length;++B)V[B]=ba.recalculateParentT(P.vmin,P.vmax,V[B]);for(let B=0;B<V.length;++B)V[B]=U2(A,V[B]);return Wc(t,e,i,G,V,G.length,s,n,r,o,l,u,f)}function lie(t,e,i,s,n,r,o,l,u,f){const y=Dl(e,i);if(Xc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=Nx(_,3,x,2,o);if(S===0)return 0;const P=[],A=[],k=[];if(S===-1){const $=Ge(ys,4);Y2(_,$);const F=[$[0].x,$[1].x,$[2].x,$[3].x],G=[$[0].y,$[1].y,$[2].y,$[3].y],V=Ge(ys,3);j2(x,V);const B=Dx([V[0].x,V[1].x,V[2].x],2,[V[0].y,V[1].y,V[2].y],2,null,0,F,3,G,3,null,0,!0,Ze.unit(),Ze.unit(),k,A);if(B>0){let W=0;for(let J=0;J<B;J++){const re=new Y;e.queryCoord2D(A[J],re);const se=new Y;i.queryCoord2D(k[J],se),Y.distance(re,se)<=o&&(P.push(re.clone()),A[W]=A[J],k[W]=k[J],W++)}A.length=W,P.length=W}}for(let $=0;$<2;$++){let F,G;$===0?(F=_,G=x):(G=_,F=x);for(let V=0;V<2;V++){const B=V===0?0:F.length-1,W=[0],J=new Y;if($===0)o7(G,F[B],W),Hu(G,W[0],J);else{const re=X2(G,F[B],Ze.unit(),!1,-1,1,W);K(re===1),Mn(G,W[0],J)}Y.distance(F[B],J)<=o&&($===0?(A.push(B===0?0:1),k.push(W[0])):(k.push(B===0?0:1),A.push(W[0])),P.push(J.clone()))}}return Wc(t,e,i,A,k,A.length,s,n,r,o,l,u,f)}function Aet(t,e,i,s,n){const r=new jr;if(v1e(t,Ze.unit(),r),r.inflate(s),!r.isIntersectingPoint2D(e))return 0;const o=BE(t);let l=0,u=o.specialPoints[0];const f=[];for(let y=1,_=o.specialPoints.length;y<_;++y){const x=o.specialPoints[y],S=bet(t,e,u,x);if(f.length===0)f.push(S);else if(S.t===S.tmin)K(f.at(-1).d<=S.d),f.at(-1).tmax=S.tmax;else if(f.at(-1).t===f.at(-1).tmax){K(f.at(-1).d>=S.d);const P=f.at(-1).tmin;f[f.length-1]=S,f.at(-1).tmin=P}else f.push(S);u=x}for(const y of f)if(y.d<=s){const _=y.t;i&&(l>=i.length&&Mi(""),i[l]=_),l++}return l}function v1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),YE(s,e,i)}function YE(t,e,i){if(e.equalsRange(0,1))return void i.setFromPoints(t,4);const s=Ge(Y,4);Sv(t,e.vmin,e.vmax,s),i.setFromPoints(s,4)}class _1e{constructor(e,i){this.controlPoints=e,this.point=i.clone()}getMaxDerivative(){return 6}getValue(e,i){switch(e){case 0:{const s=new Y;Mn(this.controlPoints,i,s);const n=ma(this.controlPoints,1,i);return 2*s.sub(this.point).dotProduct(n)}case 1:{const s=new Y;Mn(this.controlPoints,i,s);const n=ma(this.controlPoints,1,i),r=ma(this.controlPoints,2,i);return 2*(s.sub(this.point).dotProduct(r)+n.dotProduct(n))}case 2:{const s=new Y;Mn(this.controlPoints,i,s);const n=ma(this.controlPoints,1,i),r=ma(this.controlPoints,2,i),o=ma(this.controlPoints,3,i);return 2*(s.sub(this.point).dotProduct(o)+3*n.dotProduct(r))}case 3:{const s=ma(this.controlPoints,1,i),n=ma(this.controlPoints,2,i),r=ma(this.controlPoints,3,i);return 2*(4*s.dotProduct(r)+3*n.sqrLength())}case 4:{const s=ma(this.controlPoints,2,i),n=ma(this.controlPoints,3,i);return 2*(10*s.dotProduct(n))}case 5:{const s=ma(this.controlPoints,3,i);return 2*(10*s.dotProduct(s))}default:return 0}}getError(e){return K(0),0}}function X2(t,e,i,s,n,r,o){ME(Ze.unit().contains(i)&&r>0,"getClosestCoordinate"),(n<0||Number.isNaN(n))&&(n=Number.MAX_VALUE);const l=[],u=new Y;Mn(t,i.vmin,u);let f=Y.distance(u,e);if(f<=n&&l.push(new Y(i.vmin,f)),i.vmin!==i.vmax&&(Mn(t,i.vmax,u),f=Y.distance(u,e),f<=n&&l.push(new Y(i.vmax,f))),i.width()>0){const x=new Array(18),S=Jg(new _1e(t,e),i,18,x);for(let P=0;P<S;P++)Mn(t,x[P],u),f=Y.distance(u,e),f>n||l.push(new Y(x[P],f))}if(s){K(i.equals(Ze.unit()));{Mn(t,-1,u,!0);const x=new Y;Mn(t,0,x);const S=new si({start:u,end:x}),P=S.getClosestCoordinate(e,!0);P<1&&(u.assign(S.getCoord2D(P)),f=Y.distance(u,e),f<=n&&l.push(new Y(P-1,f)))}{Mn(t,2,u,!0);const x=new Y;Mn(t,i.vmax,x);const S=new si({start:x,end:u}),P=S.getClosestCoordinate(e,!0);P>0&&(u.assign(S.getCoord2D(P)),f=Y.distance(u,e),f<=n&&l.push(new Y(1+P,f)))}}if(!l.length)return 0;l.sort((x,S)=>x.compare(S));let y=0;const _=l[0].x;if(o[y++]=_,y<r){const x=Dge(t,4,!1).total(),S=l[0].y;for(let P=1,A=l.length;P<A;P++)if(l[P].y>S+x){l.length=P;break}l.sort((P,A)=>xf(P.x,A.x)),y=0,o[y++]=l[0].x;for(let P=1,A=l.length;P<A;P++)l[P].x!==o[y-1]&&y<r&&(o[y++]=l[P].x)}return y}function H6(t,e,i,s,n,r,o){const l=Ge(Y,4);return t.queryControlPoints(l),X2(l,e,i,s,n,r,o)}function Det(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp[0].norm(1)+t.m_cp[1].norm(1)}function ket(t){return t[0].norm(1)+t[1].norm(1)+t[2].norm(1)+t[3].norm(1)}function Net(t,e,i){if(K(i>=2),i===2){const P=new Y;ar(e[0],e[i-1],1/3,P);const A=new Y;return ar(e[0],e[i-1],2/3,A),void t.construct(e[0],P,A,e[i-1])}const s=e[0],n=e[i-1],r=[0,0],o=H6(t,s,Ze.unit(),!1,Number.NaN,2,r),l=[0,0],u=H6(t,n,Ze.unit(),!1,Number.NaN,2,l),f=[];for(let P=0;P<o;P++)for(let A=0;A<u;A++){const k=r[P],$=l[A],F=(W,J)=>{const re=[];re.length=i-2;const se=()=>{let Oe=0;for(let we=1,Fe=i-1;we<Fe;we++){Oe+=Y.distance(e[we-1],e[we]);const it=Oe;re[we-1]=it}Oe+=Y.distance(e[i-2],e[i-1]);for(let we=1,Fe=i-1;we<Fe;we++)re[we-1]/=Oe};let oe=!1,pe=!1;{const Oe=new Qt;k<=$?(t.queryCut(k,$,Oe,!0),W.assign(Oe.get().getControlPoint1()),J.assign(Oe.get().getControlPoint2())):(t.queryCut($,k,Oe,!0),W.assign(Oe.get().getControlPoint2()),J.assign(Oe.get().getControlPoint1())),s.equals(W)&&(oe=!0),n.equals(J)&&(pe=!0)}se();let ce=Number.MAX_VALUE;const ue=W.clone(),ne=J.clone();for(let Oe=0;Oe<5;Oe++)ce=IN(!0,!1,s,ue,ne,n,oe,pe,re,i-2,e,i);for(let Oe=0;Oe<30;Oe++){const we=ue.clone();ne.clone();const Fe=IN(!0,!0,s,ue,ne,n,oe,pe,re,i-2,e,i);if(ce<=Fe&&we.equals(ue)&&we.equals(ne))break;ce=Fe}se();let de=!1,Se=Number.EPSILON;const Pe=W.clone(),Re=J.clone();for(let Oe=0;Oe<30;Oe++){const we=Pe.clone();Re.clone();const Fe=IN(de,!0,s,Pe,Re,n,oe,pe,re,i-2,e,i);if(Se<=Fe&&we.equals(Pe)&&we.equals(Re))break;de=!0,Se=Fe}return Se<ce?(W.assign(Pe),J.assign(Re)):(W.assign(ue),J.assign(ne),Se=ce),Se},G=new Y,V=new Y,B=[F(G,V),Y.distance(s,G)+Y.distance(G,V)+Y.distance(V,n),G.x,G.y,V.x,V.y];f.splice(f.length,0,...B)}let y=f[0],_=f[1],x=0;for(let P=6;P<f.length;P+=6)f[P]<y&&(y=f[P],_=f[P+1],x=P);let S=x;for(let P=0;P<f.length;P+=6)P!==x&&f[P+1]<_&&Math.abs(y-f[P])<10*y&&(_=f[P+1],S=P);t.construct(s,new Y(f[S+2],f[S+3]),new Y(f[S+4],f[S+5]),n)}function $et(t,e,i=!1){const s=Ge(Y,4);t.queryControlPoints(s);const n=Ge(ys,4);let r,o,l;Y2(s,n,!0);const u=n[3].x.isZero(),f=n[3].y.isZero();if(u||f)if(u&&!f){if(n[2].x.isZero())return 0;r=n[1].x.div(n[2].x).negate(),o=n[2].y.div(n[3].y),l=n[1].y.div(n[3].y)}else{if(u||!f||n[2].y.isZero())return 0;r=n[1].y.div(n[2].y).negate(),o=n[2].x.div(n[3].x),l=n[1].x.div(n[3].x)}else{n[2].x.divThis(n[3].x),n[1].x.divThis(n[3].x),n[2].y.divThis(n[3].y),n[1].y.divThis(n[3].y);const S=n[2].x.sub(n[2].y);if(S.isZero())return 0;r=n[1].x.sub(n[1].y).div(S).negate(),o=n[2].x.clone(),l=n[1].x.clone()}if(!i&&r.abs().value()>2)return 0;const y=[0,0],_=t.getStartXY().equals(t.getEndXY()),x=xv(1,-r.toDouble(),r.add(o).mul(r).add(l).toDouble(),Ze.unit(),_,y);if(x===0)return 0;if(y[0]>=0&&y[0]<=1){const S=r.toDouble()-y[0];if(i||S>=0&&S<=1)return e[0]=y[0],e[1]=S,e[0]>e[1]&&(e[1]=St(e[0],e[0]=e[1])),2}if(x===2&&y[1]>=0&&y[1]<=1){const S=r.toDouble()-y[1];if(i||S>=0&&S<=1)return e[0]=y[1],e[1]=S,e[0]>e[1]&&(e[1]=St(e[0],e[0]=e[1])),2}return 0}function Oet(t,e,i){const s=t[1].mulE(e[2]).subThisE(t[2].mulE(e[1])),n=t[1].mulE(e[3]).subThisE(t[3].mulE(e[1])).mulThis(3),r=t[2].mulE(e[3]).subThisE(t[3].mulE(e[2])).mulThis(3),o=Ge(Be,2);let l=El(r,n,s,new Ze(0,1),!1,o);l<0&&(l=0);let u=0;for(let f=0;f<l;f++)Ms(o[f].value(),0,1)||(i[u].setE(o[f]),u++);return u}function b1e(t,e){e[0].set(0);let i=1;const s=Ge(Be,4);Mj(t,s,!0);const n=Ge(Be,4);Aj(t,n,!0);{const r=s[3].mul(3),o=s[2].mul(2),l=s[1].clone(),u=Ge(Be,2);let f=El(r,o,l,new Ze(0,1),!1,u);f<0&&(f=0);for(let y=0;y<f;y++)Ms(u[y].value(),0,1)||(e[i]=u[y],i++)}{const r=n[3].mul(3),o=n[2].mul(2),l=n[1].clone(),u=Ge(Be,2);let f=El(r,o,l,new Ze(0,1),!1,u);f<0&&(f=0);for(let y=0;y<f;y++)Ms(u[y].value(),0,1)||(e[i]=u[y],i++)}if(i+=Oet(s,n,e.slice(i)),e[i].set(1),i++,i>2){rd(e,0,i,(y,_)=>{const x=y.value(),S=_.value();return x<S?-1:x>S?1:0});let r=0;const o=e[0].clone();let l=0;const u=ket(t)*en(),f=new Y;iT(t,e[0].value(),f);for(let y=1;y<i;y++){const _=new Y;if(iT(t,e[y].value(),_),e[y].eq(o)||_.isEqualPoint2D(f,u)){if(r!==0){if(e[y].eps()===0)o.setE(e[y]),l=0;else if(l!==0){const x=Xi(1/e[y].eps()),S=1/l,P=x+S;o.set((e[y].value()*x+o.value()*S)/P),l=1/P,o.setError(Math.sqrt(l))}e[r].setE(o),iT(t,o.value(),f)}}else r++,e[r].setE(e[y]),o.setE(e[y]),iT(t,o.value(),f),l=Xi(e[y].eps())}r++,i=r}return i===1&&(i=2,e[1].set(1)),K(e[0].value()===0),K(e[i-1].value()===1),i}function Ret(t,e,i,s,n){const r=Ge(Be,4),o=Ge(Be,3),l=new Ze(0,1);let u=0;if(e){if(Aj(t,r,!1),u=z6(r[3],r[2],r[1],r[0].sub(i),l,!1,o),s)for(let f=0;f<u;f++){const y=new Y;Mn(t,o[f].value(),y),s[f]=y.x}}else if(Mj(t,r,!1),u=z6(r[3],r[2],r[1],r[0].sub(i),l,!1,o),s)for(let f=0;f<u;f++){const y=new Y;Mn(t,o[f].value(),y),s[f]=y.y}if(n)for(let f=0;f<u;f++)n[f]=o[f].value();else s&&rd(s,0,u,xf);return u}function Mz(t,e,i){i.setEmpty();const s=[];s.push(new Ze(0,1));const n=.5*Math.max(e.width(),e.height());for(;s.length;){const r=s.at(-1);s.pop();const o=new jr;if(YE(t,r,o),o.isIntersectingW(e)){const l=Math.max(o.width(),o.height());if(e.containsW(o)||l<=n||r.width()<1e-12)i.merge(r);else{const u=r.getCenter();s.push(Ze.construct(r.vmin,u)),s.push(Ze.construct(u,r.vmax))}}}}function Let(t,e,i){i.length=0;{const re=new Be;g1e(t,re);const se=new Ht;if(y1e(t,re,se),se.isZero())return re.isZero()||re.eq(new Be(1))?0:(i.push(re.value()),1)}const s=Ge(Be,4);f1e(t,s,!0);const n=Ge(Be,4);p1e(t,n,!0);const r=Ge(Be,6),o=s[3].negate().mulE(n[1]).addE(s[2].mulE(n[2]).mul(2)).addE(s[1].mulE(n[3])),l=s[3].negate().mulE(n[1]).subE(s[2].mulE(n[2]).mul(2)).addE(s[1].mulE(n[3])),u=s[2].mulE(s[2]).subE(n[2].mulE(n[2]));r[0]=n[1].mulE(n[1]).mulE(o).addE(s[1].mulE(s[1]).mulE(l)).addE(s[1].mulE(n[1]).mulE(u).mul(2)).mul(6),r[1]=s[2].mulE(n[1]).subE(s[1].mulE(n[2])).mulE(s[2].mulE(s[2]).addE(s[1].mulE(s[3]).mul(2)).addE(n[2].mulE(n[2])).addE(n[1].mulE(n[3]).mul(2))).mul(24);const f=s[1].mulE(n[2]).mulE(n[2]).mulE(n[3]),y=s[2].mulE(s[2]).mulE(s[3]).mulE(n[1]).subE(f).mul(156),_=s[3].mulE(n[1]).subE(s[1].mulE(n[3])),x=s[3].mulE(n[1]).subE(s[1].mulE(n[3])),S=s[1].mulE(s[3]).mulE(x).addE(n[1].mulE(n[3]).mulE(_)).mul(72),P=n[1].mulE(n[3]).subE(s[1].mulE(s[3])),A=s[2].mulE(n[2]).mulE(P).mul(120),k=s[1].mulE(s[2]).mulE(s[2]).mulE(n[3]),$=s[3].mulE(n[1]).mulE(n[2]).mulE(n[2]).subE(k).mul(36);r[2]=y.addE(S).addE(A).addE($);const F=s[2].mulE(s[3]).mulE(s[3]).mulE(n[1]).subE(s[1].mulE(n[2]).mulE(n[3]).mulE(n[3])).mul(360),G=s[2].mulE(n[2]).mulE(s[2].mulE(s[3]).subE(n[2].mulE(n[3]))).addE(s[3].mulE(n[2]).mulE(n[2]).mulE(n[2])).subE(s[2].mulE(s[2]).mulE(s[2]).mulE(n[3])).mul(24),V=s[2].mulE(n[1]).mulE(n[3]).mulE(n[3]).subE(s[1].mulE(s[3]).mulE(s[3]).mulE(n[2])).mul(72),B=s[3].mulE(n[3]).mulE(n[1].mulE(n[2]).subE(s[1].mulE(s[2]))).mul(288);r[3]=F.addE(G).addE(V).addE(B),r[4]=n[3].mulE(n[3]).addE(s[3].mulE(s[3])).mulE(s[3].mulE(n[1]).subE(s[1].mulE(n[3]))).mul(270).addE(s[3].mulE(n[2]).subE(s[2].mulE(n[3]))).mulE(s[2].mulE(s[3]).addE(n[2].mulE(n[3]))).mul(180),r[5]=s[3].mulE(n[2]).subE(s[2].mulE(n[3])).mulE(s[3].mulE(s[3]).addE(n[3].mulE(n[3]))).mul(216);const W=Ge(Be,5),J=Gge(r,5,new Ze(0,1),!1,W,5);if(J>0){let re=Math.abs(t.getCurvature(0)),se=0;const oe=Math.abs(t.getCurvature(1));(oe>re||!Number.isFinite(oe))&&(se=1);for(let pe=0;pe<J;pe++){const ce=Math.abs(t.getCurvature(W[pe].value()));t.getCoord2D(W[pe].value()),(ce>re||!Number.isFinite(ce))&&(re=ce,se=W[pe].value())}if((!Number.isFinite(re)||1/re<e)&&!Ms(se,0,1)){const pe=t.getCoord2D(se);if(!pe.equals(t.getStartXY())&&!pe.equals(t.getEndXY()))return i.push(se),1}}return 0}class Fet{constructor(e,i){this.b=e,this.len=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?this.len-jE(this.b,i,!1):0}getError(e){return K(0),0}}function Az(t,e,i,s,n,r,o){for(;;){const l=Y.distance(e[0],e[3]),u=Y.distance(e[0],e[1])+Y.distance(e[1],e[2])+Y.distance(e[2],e[3]);if(u-l<=s+i*u)return t+ji(l,u,.5);const f=B=>ma(e,1,B).length();if(r===0){K(o<8);let B=f(0),W=f(1);n[0]+=2,B>W&&(W=St(B,B=W),e[3]=St(e[0],e[0]=e[3]),e[2]=St(e[1],e[1]=e[2]));let J=B/(B+W),re=1,se=u;for(;J<1/32&&se>=32*(s+i*se);){re/=4;const oe=f(re);n[0]++,J=B/(oe+B);const pe=new Y;if(Mn(e,.5*re,pe),se=Y.distance(pe,e[0]),se<=s){const ce=new Y;Mn(e,re,ce),se+=Y.distance(ce,pe)}}if(re!==1){const oe=Ge(Y,4);HE(e,re,e,oe),t=Az(t,oe,i,s,n,0,o+1),r++,o++;continue}}const y=8;n[0]+=y;const _=sf(y,f,0,1),x=16;n[0]+=x;const S=sf(x,f,0,1);let P=Math.abs(_-S)>s+i*u;if(!P)return t+S;if(r<3){const B=Ge(Y,4);HE(e,.5,e,B),t=Az(t,B,i,s,n,r+1,o+1),r++,o++;continue}const A=32;n[0]+=A;const k=sf(A,f,0,1);if(P=Math.abs(S-k)>s+i*u,!P)return t+k;const $=64;n[0]+=$;const F=sf($,f,0,1);if(P=Math.abs(k-F)>s+i*u,!P)return t+F;const G=128;n[0]+=G;const V=sf(G,f,0,1);return P=Math.abs(F-V)>s+i*u,t+V}}function zet(t,e,i,s,n){if(i===e)return 0;const r=Ge(Y,4);t.queryControlPoints(r);const o=Ge(Y,4);return Sv(r,e,i,o),Az(0,o,s,n,[0],0,0)}function qet(t,e,i,s,n){let r=!0;const o=G2(5,e,i,s,n,u=>{const f=Hy(t,1,u);return(r?t.getCoordX(u)-t.getStartX():t.getCoordY(u)-t.getStartY())*f.length()});r=!1;const l=G2(5,e,i,s,n,u=>{const f=Hy(t,1,u);return(r?t.getCoordX(u)-t.getStartX():t.getCoordY(u)-t.getStartY())*f.length()});return new Y(o,l)}function Vet(t,e,i,s,n,r,o,l,u){const f=Ge(Y,4);t.queryControlPoints(f);const y=Ge(Y,4);if(e.queryControlPoints(y),f[0].equals(y[0])){if(f[1].equals(y[1])&&f[2].equals(y[2])&&f[3].equals(y[3]))return i&&(i.length=0,i.push(f[0]),i.push(f[3])),s&&(s.length=0,s.push(0),s.push(1)),n&&(n.length=0,n.push(0),n.push(1)),!0;if(!f[0].equals(y[3]))return!1}return!!(f[0].equals(y[3])&&f[1].equals(y[2])&&f[2].equals(y[1])&&f[3].equals(y[0]))&&(s&&(s.length=0,s.push(0),s.push(1),u&&(s[1]=St(s[0],s[0]=s[1]))),n&&(n.length=0,n.push(1),n.push(0),u&&(n[1]=St(n[0],n[0]=n[1]))),i&&(i.length=0,i.push(f[0]),i.push(f[3]),u&&(i[1]=St(i[0],i[0]=i[1]))),!0)}function IN(t,e,i,s,n,r,o,l,u,f,y,_){let x=0,S=0,P=0,A=0,k=0,$=0,F=0;for(let V=1,B=_-1;V<B;V++){let W,J,re,se,oe,pe,ce=-1,ue=u[V-1];t&&(V>2?(ue=un(2*u[V-2]-u[V-3],0,1),u[V-1]=ue):V===2&&ue<=u[0]&&(ue=u[0]));for(let Se=0;Se<11&&(W=u[V-1],J=W*W,re=J*W,se=1-W,oe=se*se,pe=oe*se,t)&&!(Math.abs(W-ce)<1e-12)&&Se!==10;Se++){const Pe=i.x-2*s.x+n.x,Re=i.x-3*s.x+3*n.x-r.x,Oe=i.y-2*s.y+n.y,we=i.y-3*s.y+3*n.y-r.y,Fe=i.x-s.x-2*Pe*W+Re*J,it=-y[V].x+i.x*pe+W*(3*s.x*oe+W*(3*n.x-3*n.x*W+r.x*W)),vt=i.y-s.y-2*Oe*W+we*J,ot=-y[V].y+i.y*pe+W*(3*s.y*oe+W*(3*n.y-3*n.y*W+r.y*W));ce=W;const ut=W- -6*(Fe*it+vt*ot)/(6*(3*Xi(Fe)-(-2*Pe+2*Re*W)*it)+6*(3*Xi(vt)-(-2*Oe+2*we*W)*ot));u[V-1]=un(ut,V>1?u[V-2]:0,1)}x+=3*J*oe*oe,S+=3*re*pe,P+=3*J*J*oe;const ne=-(pe*i.x+re*r.x-y[V].x);A+=ne*W*oe,k+=ne*J*se;const de=-(pe*i.y+re*r.y-y[V].y);$+=de*W*oe,F+=de*J*se}if(e){const V=x*P-S*S;Math.abs(V)>=1e-12*(Math.abs(x*P)+Math.abs(S*S))+1e-10?(o||(s.x=(A*P-k*S)/V,s.y=($*P-F*S)/V),l||(n.x=(x*k-S*A)/V,n.y=(x*F-S*$)/V)):(ar(i,r,.3,s),ar(i,r,.6,n))}let G=0;for(let V=1,B=_-1;V<B;V++){const W=u[V-1],J=1-W,re=i.mul(Kee(J)),se=s.mul(3*W*J*J),oe=n.mul(3*W*W*J),pe=r.mul(Kee(W));G+=re.add(se).add(oe).add(pe).sub(y[V]).sqrLength()}return G}function cie(t,e,i,s){const n=t.getPathStart(e),r=t.getPathEnd(e);if(r-n<3)return;const o=2*n,l=Y.getNAN();i.queryPoint2D(o,l);const u=l.x,f=l.y,y=Y.getNAN();i.queryPoint2D(o+2,y);const _=Y.getNAN();for(let x=o+4,S=2*r;x<S;x+=2)i.queryPoint2D(x,_),s.pe((_.x-l.x)*(y.y-f)),l.setCoordsPoint2D(y),y.setCoordsPoint2D(_);s.pe((u-l.x)*(y.y-f))}function Get(t,e,i){for(;e.hasNextSegment();){const s=e.nextCurve();if(s===null)break;i.pe(2*s.calculateArea2DHelper())}}var ts=_r;class ip{static toSegType(e){let i=0;switch(e){case me.enumLine:i=1;break;case me.enumBezier:i=2;break;case me.enumEllipticArc:i=4;break;case me.enumRationalBezier2:i=8;break;case me.enumBezier2:i=16;break;default:bt("")}return i}constructor(){this.m_segmentFlags=null,this.m_segmentParamIndex=null,this.m_segmentParams=null,this.m_curveCount=0,this.m_bezierCount=0,this.m_arcCount=0,this.m_rbezier2Count=0,this.m_bezier2Count=0,this.m_curveParamWritePoint=0}assignCopy(e){return this.m_segmentFlags=e.m_segmentFlags,this.m_segmentParamIndex=e.m_segmentParamIndex,this.m_segmentParams=e.m_segmentParams,this.m_curveCount=e.m_curveCount,this.m_bezierCount=e.m_bezierCount,this.m_arcCount=e.m_arcCount,this.m_rbezier2Count=e.m_rbezier2Count,this.m_bezier2Count=e.m_bezier2Count,this.m_curveParamWritePoint=e.m_curveParamWritePoint,this}}class pa extends Oge{constructor(e){super(e),this.m_cachedRingAreas2D=null,this.m_paths=null,this.m_pathFlags=null,this.m_curveData=null,e.move?(this.m_bPolygon=e.move.m_bPolygon,this.m_cachedLength2D=e.move.m_cachedLength2D,this.m_cachedArea2D=e.move.m_cachedArea2D,this.m_currentPathIndex=e.move.m_currentPathIndex,this.m_cachedRingAreas2D=e.move.m_cachedRingAreas2D,this.m_paths=e.move.m_paths,this.m_pathFlags=e.move.m_pathFlags,this.m_curveData=e.move.m_curveData,e.move.m_curveData=null,e.move.setEmpty()):(this.m_bPolygon=e.bPolygon,this.m_cachedLength2D=0,this.m_cachedArea2D=0,this.m_currentPathIndex=0)}getGeometryType(){return this.m_bPolygon?me.enumPolygon:me.enumPolyline}getDimension(){return this.m_bPolygon?2:1}changeRingStartPoint(e){K(this.m_bPolygon);const i=this.getPathIndexFromPointIndex(e),s=this.getPathStart(i);if(s===e)return;const n=this.getPathEnd(i);(e>=n||e<s)&&Je("change_ring_start_point");for(let r=0,o=this.m_description.getAttributeCount();r<o;r++){const l=this.m_description.getSemantics(r),u=ts.getComponentCount(l);this.m_vertexAttributes.get(r).rotate(s*u,e*u,n*u)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.rotate(s,e,n),this.m_curveData.m_segmentParamIndex.rotate(s,e,n))}setFillRule(e){this.m_bFillRule=e===1}getFillRule(){return this.m_bFillRule?1:0}isExteriorRingOGC(e){return!!this.m_bPolygon&&(this.updateOGCFlagsProtected(),!!(8&this.m_pathFlags.read(e)))}isExteriorRing(e){return this.calculateRingArea2D(e)>0}calculateRingArea2D(e){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedRingAreas2D.read(e)):0}updateRingAreas2DProtected(){if(!this.hasDirtyFlag(1024))return;const e=this.getPathCount();if(e===0)return this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=0),void this.setDirtyFlagProtected(1024,!1);const i=new od(e),s=new zr(0),n=new zr(0);if(this.m_pointCount!==0){const r=this.getAttributeStreamRef(0);if(this.hasNonLinearSegments()){const o=new EN({parent:this});for(o.stripAttributes();o.nextPath();){n.reset();const l=o.getPathIndex();cie(this,l,r,n),Get(this,o,n);const u=.5*n.getResult();s.add(u),i.write(l,u)}}else for(let o=0;o<e;o++){n.reset(),cie(this,o,r,n);const l=.5*n.getResult();s.add(l),i.write(o,l)}}this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=s.getResult(),this.m_cachedRingAreas2D=i,this.setDirtyFlagProtected(1024,!1))}getOGCPolygonCount(){if(!this.m_bPolygon)return 0;this.updateOGCFlagsProtected();let e=0;const i=this.getPathCount();for(let s=0;s<i;s++)8&this.m_pathFlags.read(s)&&e++;return e}getHashCodeImpl(){return K(0),0}equalsImpl(e){const i=e,s=this.getPathCount();if(s!==i.getPathCount())return!1;const n=this.hasNonLinearSegments();if(n!==i.hasNonLinearSegments()||n&&(this.m_curveData.m_curveCount!==i.m_curveData.m_curveCount||this.m_curveData.m_bezierCount!==i.m_curveData.m_bezierCount)||this.m_paths&&!this.m_paths.equals(i.m_paths,0,s+1)||this.m_bFillRule!==i.m_bFillRule||!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(i.m_pathFlags,0,s))return!1;if(this.hasNonLinearSegments()){if(!this.m_curveData.m_segmentFlags.equals(i.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;for(let r=0,o=this.getPointCount();r<o;r++){const l=this.m_curveData.m_segmentFlags.read(r);if(!pa.isNonLinearSegmentFlag(l))continue;const u=this.m_curveData.m_segmentParamIndex.read(r),f=i.m_curveData.m_segmentParamIndex.read(r),y=du(l);for(let _=0;_<y;_++){const x=this.m_curveData.m_segmentParams.read(u+_),S=i.m_curveData.m_segmentParams.read(f+_);if(!ga(x,S))return!1}}}return!0}equalsImplTol(e,i){const s=e,n=this.getPathCount();if(n!==s.getPathCount())return!1;const r=this.hasNonLinearSegments();if(r!==s.hasNonLinearSegments()||r&&(this.m_curveData.m_curveCount!==s.m_curveData.m_curveCount||this.m_curveData.m_bezierCount!==s.m_curveData.m_bezierCount)||this.m_paths&&!this.m_paths.equals(s.m_paths,0,n+1)||this.m_bFillRule!==s.m_bFillRule||!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(s.m_pathFlags,0,n))return!1;if(!r)return!0;if(!this.m_curveData.m_segmentFlags.equals(s.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;const o=this.querySegmentIterator(),l=s.querySegmentIterator();for(;o.nextPath();){if(!l.nextPath())return!1;for(;o.hasNextSegment();){const u=o.nextCurve(),f=l.nextCurve();if(!(u&&f&&u.equals(f,i))){if(!u&&!f)break;return!1}}}return!0}reserveImplImpl(e,i){this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(e,1),this.m_curveData.m_segmentParamIndex.resize(e,-1),this.checkCompactSegmentParams())}verifyStreamsAfterSizeChangeExtraImpl(){this.m_paths||(this.m_paths=Ga(1,0),this.m_pathFlags=R0(1,0)),this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(this.m_reservedPointCount,1),this.m_curveData.m_segmentParamIndex.resize(this.m_reservedPointCount,-1),this.checkCompactSegmentParams())}copyToImpl(e,i){const s=e;s.m_bPathStarted=!1,s.m_bFillRule=this.m_bFillRule,this.m_paths?s.m_paths=i?this.m_paths:this.m_paths.clone():s.m_paths=null,this.m_pathFlags?s.m_pathFlags=i?this.m_pathFlags:this.m_pathFlags.clone():s.m_pathFlags=null,this.m_curveData&&(s.m_curveData||(s.m_curveData=new ip),s.m_curveData.assignCopy(this.m_curveData),s.m_curveData.m_curveCount=0,s.updateCurveCounter(this.m_curveData.m_curveCount),i||(this.m_curveData.m_segmentParamIndex?s.m_curveData.m_segmentParamIndex=this.m_curveData.m_segmentParamIndex.clone():s.m_curveData.m_segmentParamIndex=null,this.m_curveData.m_segmentFlags?s.m_curveData.m_segmentFlags=this.m_curveData.m_segmentFlags.clone():s.m_curveData.m_segmentFlags=null,this.m_curveData.m_segmentParams?s.m_curveData.m_segmentParams=this.m_curveData.m_segmentParams.clone():s.m_curveData.m_segmentParams=null)),s.hasDirtyFlag(512)||(s.m_cachedLength2D=this.m_cachedLength2D),s.m_cachedRingAreas2D=null,s.hasDirtyFlag(1024)||(s.m_cachedArea2D=this.m_cachedArea2D,this.m_cachedRingAreas2D!==null&&(s.m_cachedRingAreas2D=i?this.m_cachedRingAreas2D:this.m_cachedRingAreas2D.clone()))}calculateArea2D(){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedArea2D):0}calculateLength2D(){if(!this.hasDirtyFlag(512))return this.m_cachedLength2D;const e=this.querySegmentIterator(),i=new zr(0);for(;e.nextPath();)for(;e.hasNextSegment();)i.add(e.nextSegment().calculateLength2D());return this.hasDirtyFlag(512)&&(this.m_cachedLength2D=i.getResult()),this.setDirtyFlagProtected(512,!1),i.getResult()}calculatePathLength2D(e){const i=this.querySegmentIteratorAtVertex(this.getPathStart(e)),s=new zr(0);for(;i.hasNextSegment();)s.add(i.nextSegment().calculateLength2D());return s.getResult()}calculateLength3D(e){return K(0),0}calculatePathLength3D(e,i){return K(0),0}copyTo(e){bi(e.getGeometryType())||Je(""),this!==e&&super.copyTo(e)}swap(e){K(0)}hasNonLinearSegments(){return this.getCurveCount()!==0}getSegmentCount(){let e=this.getPointCount();if(!this.m_bPolygon){e-=this.getPathCount();for(let i=0,s=this.getPathCount();i<s;i++)this.isClosedPath(i)&&e++}return e}getSegmentCountPath(e){let i=this.getPathSize(e);return!this.isClosedPath(e)&&i>0&&i--,i}add(e,i){this===e&&Je("Multi_path_impl::add");for(let s=0,n=e.getPathCount();s<n;s++)this.addPath(e,s,!i)}addPath(e,i,s){this.insertPath(-1,e,i,s)}addPathPoint2D(e,i,s){this.insertPath2D(-1,e,0,i,s)}addSegmentsFromPath(e,i,s,n,r){if(this===e&&Je("Multi_path_impl.add_segments_from_path"),r||this.getPathCount()!==0||(r=!0),i<0&&(i=e.getPathCount()-1),(i>=e.getPathCount()||s<0||n<0||s+n>e.getSegmentCountPath(i))&&Mi("add_segments_from_path"),n===0)return;const o=e.getPathStart(i),l=e.isClosedPath(i)&&s+n===e.getSegmentCountPath(i);this.m_bPathStarted=!1,this.mergeVertexDescription(e.getDescription());let u=n;const f=o+s;let y=f+1;r&&(u++,y--),!r&&e.hasNonLinearSegments()&&e.m_curveData.m_segmentFlags.read(f)!==1&&(e.getXY(f).equals(this.getXY(this.m_pointCount-1))||Je("add_segments_from_path: start point mismatch"));const _=this.m_pointCount;if(this.resizeImpl(this.m_pointCount+u),this.verifyAllStreamsAfterSizeChange(),r){if(u===0)return;this.m_paths.add(this.m_pointCount);let S=e.m_pathFlags.read(i);this.m_bPolygon&&(S|=1),this.m_pathFlags.write(this.m_pathFlags.size()-1,S),this.m_pathFlags.add(0)}else this.m_paths.write(this.m_pathFlags.size()-1,this.m_pointCount);const x=l?u-1:u;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),k=ts.getComponentCount(A),$=e.m_description.getAttributeIndex(A);if(x>0){if($<0||!e.m_vertexAttributes.get($)){const F=ts.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(k*_,F,x*k,k*_),l&&this.m_vertexAttributes.get(S).insertRange(k*_+x*k,F,k,k*_);continue}this.m_vertexAttributes.get(S).insertRangeFromStream(k*_,e.m_vertexAttributes.get($),k*y,x*k,!0,k,k*_)}l&&this.m_vertexAttributes.get(S).insertRangeFromStream(k*(_+x),e.m_vertexAttributes.get($),k*o,k,!0,k,k*(_+x))}if(this.hasNonLinearSegments()&&this.initSegmentData(0),e.hasNonLinearSegments()){let S=0;for(let P=0,A=f;P<n;P++)S+=du(e.m_curveData.m_segmentFlags.read(A)),A++;if(S>0){this.initSegmentData(S);let P=f,A=_-(r?0:1),k=0;for(let $=0;$<n;$++){const F=e.m_curveData.m_segmentFlags.read(P);if(this.m_curveData.m_segmentFlags.write(A,F),pa.isNonLinearSegmentFlag(F)){k++;let G=e.m_curveData.m_segmentParamIndex.read(P);const V=du(F);this.m_curveData.m_segmentParamIndex.write(A,this.m_curveData.m_curveParamWritePoint);for(let B=0;B<V;B++){const W=e.m_curveData.m_segmentParams.read(G);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,W),this.m_curveData.m_curveParamWritePoint++,G++}this.incCurveType(F,1)}else this.m_curveData.m_segmentParamIndex.write(A,-1);A++,P++}this.modifyCurveCounter(k)}}if(l){const S=this.getPathCount()-1,P=this.getPathStart(S),A=this.getPathEnd(S)-1,k=this.getXY(P),$=this.getXY(A);k.isEqualPoint2D($)&&(--this.m_pointCount,this.m_paths.write(S+1,this.m_pointCount))}this.notifyModifiedFlags(2001)}reverseAllPaths(){for(let e=0,i=this.getPathCount();e<i;e++)this.reversePath(e)}reversePath(e){e>=this.getPathCount()&&Je("");const i=this.getPathSize(e);if(i===0)return;const s=this.getPathStart(e),n=this.isClosedPath(e);if(this.hasNonLinearSegments()){let l=s;const u=new this.m_segmentBufferCTor;let f=!1;for(let y=0;y<i;y++,l++){const _=this.m_curveData.m_segmentFlags.read(l);if(!pa.isNonLinearSegmentFlag(_))continue;f=!0,this.querySegment(l,u,!0),u.get().reverse();const x=this.m_curveData.m_segmentParamIndex.read(l);u.get().writeInBufferStream(this.m_curveData.m_segmentParams,x)}if(f){const y=n?0:1;this.m_curveData.m_segmentFlags.reverseRange(s,i-y,1),this.m_curveData.m_segmentParamIndex.reverseRange(s,i-y,1)}}const r=n?1:0;for(let l=0,u=this.m_description.getAttributeCount();l<u;l++)if(this.m_vertexAttributes.get(l)){const f=this.m_description.getSemantics(l),y=ts.getComponentCount(f);this.m_vertexAttributes.get(l).reverseRange(y*(s+r),y*(i-r),y)}const o=6&this.m_pathFlags.read(e);if(o){let l=0;4&o&&(l|=2),2&o&&(l|=4),this.m_pathFlags.clearBits(e,6),this.m_pathFlags.setBits(e,l)}this.notifyModifiedFlags(1233)}removePath(e){const i=this.getPathCount();e<0&&(e=i-1),e>=i&&Je("");const s=this.getPathStart(e),n=this.getPathSize(e);for(let r=0,o=this.m_description.getAttributeCount();r<o;r++)if(this.m_vertexAttributes.get(r)){const l=this.m_description.getSemantics(r),u=ts.getComponentCount(l);this.m_vertexAttributes.get(r).eraseRange(u*s,u*n,u*this.m_pointCount)}if(this.hasNonLinearSegments()){let r=0;for(let o=s,l=s+n;o<l;o++){const u=this.m_curveData.m_segmentFlags.read(o);pa.isNonLinearSegmentFlag(u)&&(this.incCurveType(u,-1),r++)}this.modifyCurveCounter(-r),this.m_curveData.m_segmentFlags.eraseRange(s,n,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(s,n,this.m_pointCount)}for(let r=e+1;r<=i;r++){const o=this.m_paths.read(r);this.m_paths.write(r-1,o-n)}if(this.m_pathFlags)for(let r=e+1;r<=i;r++){const o=this.m_pathFlags.read(r);this.m_pathFlags.write(r-1,o)}this.m_paths.resize(i),this.m_pathFlags.resize(i),this.m_pointCount-=n,this.m_reservedPointCount-=n,e===i-1&&(this.m_bPathStarted=!1),this.notifyModifiedFlags(2001),this.checkCompactSegmentParams(),this.dbgVerifyCurves()}dbgVerifyCurves(){}insertPath(e,i,s,n){this===i&&Je("Multi_path_impl::insert_path");const r=this.getPathCount();if(!n&&i.hasNonLinearSegmentsPath(s))return e=this.insertPath(e,i,s,!0),this.reversePath(e),e;s>=i.getPathCount()&&Je(""),e>r&&Je(""),e<0&&(e=r),s<0&&(s=i.getPathCount()-1),this.m_bPathStarted=!1,this.mergeVertexDescription(i.getDescription());const o=i.getPathStart(s),l=i.getPathSize(s);if(l===0)return this.insertPath2D(e,null,0,0,!0);const u=this.m_pointCount,f=i.isClosedPath(s)&&!n?1:0;this.resizeImpl(this.m_pointCount+l),this.verifyAllStreamsAfterSizeChange();const y=e<r?this.getPathStart(e):u;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),k=i.getDescription().getAttributeIndex(A),$=ts.getComponentCount(A);if(k>=0&&i.m_vertexAttributes.get(k))f!==0&&this.m_vertexAttributes.get(S).insertRangeFromStream(y*$,i.m_vertexAttributes.get(k),$*o,$,!0,$,$*u),this.m_vertexAttributes.get(S).insertRangeFromStream((y+f)*$,i.m_vertexAttributes.get(k),$*(o+f),$*(l-f),n,$,$*(u+f));else{const F=ts.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(y*$,F,$*l,$*u)}}const _=u+l;this.m_paths.add(_);for(let S=r;S>=e+1;S--){const P=this.m_paths.read(S-1);this.m_paths.write(S,P+l)}this.m_pathFlags.add(0);for(let S=r-1;S>=e+1;S--){let P=this.m_pathFlags.read(S);P&=-9,this.m_pathFlags.write(S+1,P)}let x=i.getPathFlagsStreamRef().read(s);if(x&=-9,this.m_bPolygon&&(x|=1),this.m_pathFlags.write(e,x),i.hasNonLinearSegments()){this.initSegmentData(0);let S=o,P=0;for(let A=0;A<l;A++)P+=du(i.m_curveData.m_segmentFlags.read(S)),S++;if(P>0){this.m_curveData.m_segmentFlags===null?(this.m_curveData.m_segmentFlags=R0(this.m_pointCount,1),this.m_curveData.m_segmentParamIndex=Ga(this.m_pointCount,-1)):(this.m_curveData.m_segmentFlags.insertRange(y,1,l,u),this.m_curveData.m_segmentParamIndex.insertRange(y,-1,l,u)),this.m_curveData.m_segmentParams?this.m_curveData.m_segmentParams.resize(this.m_curveData.m_curveParamWritePoint+P):this.m_curveData.m_segmentParams=Ny(P),S=o;let A=y,k=0;for(let $=0;$<l;$++){const F=i.m_curveData.m_segmentFlags.read(S);if(pa.isNonLinearSegmentFlag(F)){this.m_curveData.m_segmentFlags.write(A,F),this.m_curveData.m_segmentParamIndex.write(A,this.m_curveData.m_curveParamWritePoint);const G=du(F);let V=i.m_curveData.m_segmentParamIndex.read(S);for(let B=0;B<G;B++){const W=i.m_curveData.m_segmentParams.read(V);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,W),this.m_curveData.m_curveParamWritePoint++,V++}k++,this.incCurveType(F,1)}S++,A++}this.modifyCurveCounter(k)}}return this.notifyModifiedFlags(2001),e}insertPath2D(e,i,s,n,r){const o=this.getPathCount();(e>o||s<0)&&Je(""),e<0&&(e=o),this.m_bPathStarted=!1;const l=this.m_pointCount;this.resizeImpl(this.m_pointCount+n),n===0&&this.notifyModifiedFlags(32),this.verifyAllStreamsAfterSizeChange();const u=e<o?this.getPathStart(e):l;if(i)this.m_vertexAttributes.get(0).insertRangeFromPoints(2*u,i,s,n,r,2*l);else{const f=ts.getDefaultValue(0);this.m_vertexAttributes.get(0).insertRange(2*u,f,2*n,2*l)}for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=ts.getComponentCount(_),S=ts.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(u*x,S,x*n,x*l)}this.m_paths.add(this.m_pointCount);for(let f=o;f>=e+1;f--){const y=this.m_paths.read(f-1);this.m_paths.write(f,y+n)}this.m_pathFlags.add(0);for(let f=o-1;f>=e+1;f--){let y=this.m_pathFlags.read(f);y&=-9,this.m_pathFlags.write(f+1,y)}return this.m_bPolygon&&this.m_pathFlags.write(e,1),this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(u,1,n,l),this.m_curveData.m_segmentParamIndex.insertRange(u,-1,n,l)),this.notifyModifiedFlags(2001),e}insertPathFromMultipoint(e,i,s,n,r){const o=i.getImpl(),l=this.getPathCount();(e>l||s<0)&&Je("");const u=n<0?o.getPointCount()-s:n;if(u>o.getPointCount()&&Je(""),s>=o.getPointCount()&&Je("pointsOffset"),e<0&&(e=l),this.m_bPathStarted=!1,this.mergeVertexDescription(o.getDescription()),u===0)return void this.insertPath2D(e,null,0,0,!0);const f=this.m_pointCount,y=s;this.resizeImpl(this.m_pointCount+u),this.verifyAllStreamsAfterSizeChange();const _=e<l?this.getPathStart(e):f;for(let P=0,A=this.m_description.getAttributeCount();P<A;P++){const k=this.m_description.getSemantics(P),$=o.getDescription().getAttributeIndex(k),F=ts.getComponentCount(k);if($>=0){const G=o.getAttributeStreamRef(k);this.m_vertexAttributes.get(P).insertRangeFromStream(_*F,G,F*y,F*u,r,F,F*f)}else{const G=ts.getDefaultValue(k);this.m_vertexAttributes.get(P).insertRange(_*F,G,F*u,F*f)}}const x=f+u;this.m_paths.add(x);for(let P=l;P>=e+1;P--){const A=this.m_paths.read(P-1);this.m_paths.write(P,A+u)}this.m_pathFlags.add(0);for(let P=l-1;P>=e+1;P--){let A=this.m_pathFlags.read(P);A&=-9,this.m_pathFlags.write(P+1,A)}let S=0;this.m_bPolygon&&(S|=1),this.m_pathFlags.write(e,S),this.notifyModifiedFlags(2001)}insertPoints(e,i,s,n,r,o,l){var S;if(this===s&&Je("Multi_path_impl.insert_points"),e<0&&(e=this.getPathCount()),n<0&&(n=s.getPathCount()-1),(e>this.getPathCount()||i>=0&&i>this.getPathSize(e)||n>=s.getPathCount()||o>s.getPathSize(n))&&Mi(""),!o)return;if(this.mergeVertexDescription(s.m_description),e===this.getPathCount()){this.m_paths.add(this.m_pointCount);let P=s.m_pathFlags.read(n);P&=-9,this.m_bPolygon?this.m_pathFlags.add(1|P):this.m_pathFlags.add(P)}i<0&&(i=this.getPathSize(e));const u=this.m_pointCount;this.resizeImpl(this.m_pointCount+o),this.verifyAllStreamsAfterSizeChange();const f=this.getPathStart(e),y=f+i;o<0&&(o=s.getPathSize(n));const _=s.getPathStart(n),x=_+o;for(let P=0,A=this.m_description.getAttributeCount();P<A;P++){const k=this.m_description.getSemantics(P),$=ts.getComponentCount(k),F=s.m_description.getAttributeIndex(k);if(F<0||!s.m_vertexAttributes.get(F)){const G=ts.getDefaultValue(k);this.m_vertexAttributes.get(P).insertRange($*y,G,x*$,$*u)}else(S=this.m_vertexAttributes.get(P))==null||S.insertRangeFromStream($*(f+i),s.m_vertexAttributes.get(F),$*(_+r),o*$,l,$,$*u)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(f+i,1,o,u),this.m_curveData.m_segmentParamIndex.insertRange(f+i,-1,o,u),i>0&&this.isNonLinearSegment(f+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(f+i-1),-1),this.m_curveData.m_segmentFlags.write(f+i-1,1),this.m_curveData.m_segmentParamIndex.write(f+i-1,-1),this.modifyCurveCounter(-1)));for(let P=e+1,A=this.getPathCount();P<=A;P++){const k=this.m_paths.read(P);this.m_paths.write(P,k+o)}this.notifyModifiedFlags(2001)}insertPointsFromPoints(e,i,s,n,r,o){if(e<0&&(e=this.getPathCount()),(e>this.getPathCount()||i>this.getPathSize(e)||n<0)&&Mi(""),!r)return;e===this.getPathCount()&&(this.m_paths.add(this.m_pointCount),this.m_bPolygon?this.m_pathFlags.add(1):this.m_pathFlags.add(0)),i<0&&(i=this.getPathSize(e));const l=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const u=this.getPathStart(e);this.m_vertexAttributes.get(0).insertRangeFromPoints(2*(u+i),s,n,r,o,2*l);for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=ts.getComponentCount(_),S=ts.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange((u+i)*x,S,x*r,x*l)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(u+i,1,r,l),this.m_curveData.m_segmentParamIndex.insertRange(u+i,-1,r,l),i>0&&this.isNonLinearSegment(u+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(u+i-1),-1),this.m_curveData.m_segmentFlags.write(u+i-1,1),this.m_curveData.m_segmentParamIndex.write(u+i-1,-1),this.modifyCurveCounter(-1)));for(let f=e+1,y=this.getPathCount();f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+r);this.notifyModifiedFlags(2001)}insertPointsFromMultipoint(e,i,s,n,r,o){const l=s.getImpl();if(e<0&&(e=this.getPathCount()),r<0&&(r=s.getPointCount()),(e>this.getPathCount()||i>=0&&i>this.getPathSize(e)||r>s.getPointCount())&&Mi(""),!r)return;if(this.mergeVertexDescription(l.getDescription()),e===this.getPathCount()){this.m_paths.add(this.m_pointCount);const S=0;this.m_bPolygon?this.m_pathFlags.add(1|S):this.m_pathFlags.add(S)}i<0&&(i=this.getPathSize(e));const u=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const f=this.getPathStart(e),y=f+i,_=0,x=_+r;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),k=ts.getComponentCount(A);if(l.getDescription().getAttributeIndex(A)<0){const F=ts.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(k*y,F,x*k,k*u);continue}const $=l.getAttributeStreamRef(A);this.m_vertexAttributes.get(S).insertRangeFromStream(k*(f+i),$,k*(_+n),r*k,o,k,k*u)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(f+i,1,r,u),this.m_curveData.m_segmentParamIndex.insertRange(f+i,-1,r,u),i>0&&this.isNonLinearSegment(f+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(f+i-1),-1),this.m_curveData.m_segmentFlags.write(f+i-1,1),this.m_curveData.m_segmentParamIndex.write(f+i-1,-1),this.modifyCurveCounter(-1)));for(let S=e+1,P=this.getPathCount();S<=P;S++){const A=this.m_paths.read(S);this.m_paths.write(S,A+r)}this.notifyModifiedFlags(2001)}insertPoint2D(e,i,s){const n=this.getPathCount();e<0&&(e=n),(e>n||e<n&&i>this.getPathSize(e))&&Mi(""),e===n&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(e),l=i<0?this.getPathSize(e)+o:i+o,u=this.m_vertexAttributes.get(0);if(l===r)this.m_paths.write(e+1,r+1),u.writePoint2D(2*l,s);else{u.insert(2*l,s,2*r);for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=ts.getComponentCount(_),S=ts.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(x*l,S,x,x*r)}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(l,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(l,-1,1,r));for(let f=e+1,y=n;f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&l>o&&this.isNonLinearSegment(l-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(l-1,1),this.m_curveData.m_segmentParamIndex.write(l-1,-1)),this.notifyModifiedFlags(2001)}insertPoint(e,i,s){const n=this.getPathCount();e<0&&(e=n),(e>n||e<n&&i>this.getPathSize(e))&&Mi(""),e===n&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(e),l=i<0?this.getPathSize(e)+o:i+o;if(l===r)this.m_paths.write(e+1,r+1),this.setPointByVal(l,s);else{const u=s.getDescription();this.m_description!==u&&this.mergeVertexDescription(u);for(let f=0,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=ts.getComponentCount(_);if(u.hasAttribute(_))this.m_vertexAttributes.get(f).insertAttributes(x*l,s,_,x*r);else{const S=ts.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(x*l,S,x,x*r)}}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(l,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(l,-1,1,r));for(let f=e+1,y=n;f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&l>o&&this.isNonLinearSegment(l-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(l-1,1),this.m_curveData.m_segmentParamIndex.write(l-1,-1)),this.notifyModifiedFlags(2001)}removePointFromPath(e,i){const s=this.getPathCount();e<0&&(e=s-1),(e>=s||i>=this.getPathSize(e))&&Mi("Multi_path.remove_point");const n=this.getPathStart(e),r=this.isClosedPath(e);i<0&&(i=this.getPathSize(e)-1),i<0&&Mi("Multi_path.remove_point");const o=n+i;for(let l=0,u=this.m_description.getAttributeCount();l<u;l++)if(this.m_vertexAttributes.get(l)){const f=this.m_description.getSemantics(l),y=ts.getComponentCount(f);this.m_vertexAttributes.get(l).eraseRange(y*o,y,y*this.m_pointCount)}if(this.m_curveData&&this.m_curveData.m_segmentFlags){this.checkCompactSegmentParams();let l=0;if(o>n&&this.isNonLinearSegment(o-1))l+=1,this.incCurveType(this.m_curveData.m_segmentFlags.read(o-1),-1),this.m_curveData.m_segmentFlags.write(o-1,1),this.m_curveData.m_segmentParamIndex.write(o-1,-1);else{const u=this.getPathEnd(e);r&&n+1<u&&this.isNonLinearSegment(u-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(u-1),-1),this.m_curveData.m_segmentFlags.write(u-1,1),this.m_curveData.m_segmentParamIndex.write(u-1,-1),l+=1)}this.isNonLinearSegment(o)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(o),-1),l+=1),l>0&&this.modifyCurveCounter(-l),this.m_curveData.m_segmentFlags.eraseRange(o,1,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(o,1,this.m_pointCount)}for(let l=s;l>=e+1;l--){const u=this.m_paths.read(l);this.m_paths.write(l,u-1)}this.m_pointCount--,this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}removePoint(e){let i;i=e<0?this.getPathCount()-1:this.getPathIndexFromPointIndex(e),this.removePointFromPath(i,e-this.getPathStart(i))}getNumberOfCurves(e){if(!this.hasNonLinearSegments())return 0;let i=0;for(let s=this.getPathStart(e),n=this.getPathEnd(e);s<n;s++)pa.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(s))&&++i;return i}getPathCount(){return this.m_paths?this.m_paths.size()-1:0}getPathSize(e){return this.m_paths.read(e+1)-this.m_paths.read(e)}getPathStart(e){return this.m_paths.read(e)}getPathEnd(e){return this.m_paths.read(e+1)}getPathIndexFromPointIndex(e,i=-1){i===-1&&(i=this.m_currentPathIndex);const s=this.getPathCount(),n=pa.getPathIndexFromPointIndexImpl(this.m_paths,s,e,i);return this.m_currentPathIndex=n,n}startPathCoords(e,i){this.startPathPoint(new Ut({x:e,y:i}))}startPath(e){this.startPathPoint(new Ut({pt:e}))}startPath3D(e){this.startPathPoint(new Ut({x:e.x,y:e.y,z:e.z}))}startPath3DCoords(e,i,s){this.startPathPoint(new Ut({x:e,y:i,z:s}))}startPathPoint(e){e.isEmpty()&&Je("");const i=e.getDescription();let s;if(this.m_description!==i){this.mergeVertexDescription(i);const n=new Ut({vd:this.m_description});e.copyCommonAttributesTo(n),s=n}else s=e;this.m_bPathStarted?this.setPointByVal(this.m_pointCount-1,s):(this.insertPoint(-1,-1,s),this.m_bPathStarted=!0)}beforeNewSegmentHelper2(){this.m_paths=Ga(2),this.m_paths.write(0,0),this.m_pathFlags=R0(2,0),this.m_bPolygon&&this.m_pathFlags.write(0,1)}beforeNewSegmentHelper1(){this.m_paths!==null?(this.m_paths.add(0),this.m_pathFlags.add(0),this.m_bPolygon&&this.m_pathFlags.write(this.m_pathFlags.size()-2,1)):this.beforeNewSegmentHelper2()}beforeNewSegment(e){this.m_pointCount!==0||this.m_bPathStarted||this.startPathCoords(0,0);const i=this.m_pointCount,s=this.m_paths.size()-1,n=i+e;this.m_paths.write(s,n),this.resizeImpl(n),this.m_bPathStarted&&(this.m_bPathStarted=!1)}finishLineTo(){if(this.hasNonLinearSegments()){const e=this.m_curveData.m_segmentFlags.read(this.m_pointCount-1);e!==1&&(this.m_curveData.m_segmentFlags.write(this.m_pointCount-1,1),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-1,-1),this.modifyCurveCounter(-1),this.incCurveType(e,-1))}}lineToCoords(e,i){if(this.beforeNewSegment(1),this.m_description.getAttributeCount()===1)this.setXYCoords(this.m_pointCount-1,e,i);else{const s=yy(),n=new Ut({vd:this.m_description,attribBuffer:s,initDefaultValues:!0});n.setXYCoords(e,i),this.setPointByVal(this.m_pointCount-1,n)}this.finishLineTo()}lineTo(e){this.lineToCoords(e.x,e.y)}lineTo3D(e){this.beforeNewSegment(1);const i=c5(this.m_description,AE()),s=yy(),n=new Ut({vd:i,attribBuffer:s,initDefaultValues:!0});n.setXYZ(e),this.setPointByVal(this.m_pointCount-1,n),this.finishLineTo()}lineTo3DCoords(e,i,s){this.lineTo3D(new ii(e,i,s))}lineToPoint(e){if(this.beforeNewSegment(1),this.m_description===e.getDescription())this.setPointByVal(this.m_pointCount-1,e);else{this.mergeVertexDescription(e.getDescription());const i=yy(),s=new Ut({vd:this.m_description,attribBuffer:i,initDefaultValues:!1});e.copyCommonAttributesTo(s),this.setPointByVal(this.m_pointCount-1,s)}this.finishLineTo()}openPathAndDuplicateStartVertex(e){this.m_bPolygon&&bt("");const i=this.getPathCount();if(e>i&&Je(""),!this.isClosedPath(e))return;this.m_pathFlags||bt("");const s=this.m_pointCount,n=this.getPathStart(e),r=this.getPathEnd(e);if(r-n!=0){this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();for(let o=0,l=this.m_description.getAttributeCount();o<l;o++)if(this.m_vertexAttributes.get(o)){const u=this.m_description.getSemantics(o),f=ts.getComponentCount(u);this.m_vertexAttributes.get(o).insertRangeFromStream(f*r,this.m_vertexAttributes.get(o),f*n,f,!0,1,f*s)}for(let o=i;o>e;o--){const l=this.m_paths.read(o);this.m_paths.write(o,l+1)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(r,1,1,s),this.m_curveData.m_segmentParamIndex.insertRange(r,-1,1,s)),this.m_pathFlags.clearBits(e,1)}}openPath(e){K(0)}isStrongPathStart(e){return!!(2&this.m_pathFlags.read(e))}setStrongPathStart(e,i){i?this.m_pathFlags.setBits(e,2):this.m_pathFlags.clearBits(e,2)}isStrongPathEnd(e){return!!(4&this.m_pathFlags.read(e))}setStrongPathEnd(e,i){i?this.m_pathFlags.setBits(e,4):this.m_pathFlags.clearBits(e,4)}clearStrongPathEnds(){for(let e=0,i=this.getPathCount();e<i;++e)this.m_pathFlags.clearBits(e,6)}openAllPathsAndDuplicateStartVertex(){if(this.m_bPolygon&&bt(""),this.isEmpty())return;this.m_pathFlags||bt("");let e=0;const i=this.getPathCount();for(let y=0;y<i;y++)this.isClosedPath(y)&&(this.getPathSize(y)>0?e++:this.m_pathFlags.clearBits(y,1));if(e===0)return;const s=this.hasNonLinearSegments();let n=0;const r=this.getPathCount(),o=this.m_description.getAttributeCount(),l=new Array(o);let u=null,f=null;for(let y=0;y<r;++y){const _=this.getPathStart(y),x=this.getPathSize(y),S=this.isClosedPath(y);if(x>0){const P=_+n;for(let A=0;A<o;A++)if(this.m_vertexAttributes.get(A)){const k=this.m_description.getSemantics(A),$=ts.getComponentCount(k);if(!l[A]){const F=VI(k,$*(this.m_pointCount+e));l[A]=F}l[A].writeRange(P*$,x*$,this.m_vertexAttributes.get(A),_*$,!0,1),S&&l[A].writeRange((P+x)*$,$,this.m_vertexAttributes.get(A),_*$,!0,1)}if(s){if(u===null){const A=this.m_pointCount+e;u=R0(A),f=Ga(A)}u.writeRange(P,x,this.m_curveData.m_segmentFlags,_,!0,1),f.writeRange(P,x,this.m_curveData.m_segmentParamIndex,_,!0,1),S&&(u.write(P+x,1),f.write(P+x,-1))}}this.m_paths.write(y,_+n),S&&(this.m_pathFlags.clearBits(y,1),++n)}this.m_paths.write(r,this.m_pointCount+e),this.m_pathFlags.clearBits(r,1);for(let y=0;y<o;y++)this.m_vertexAttributes.get(y)&&this.m_vertexAttributes.set(y,l[y]);s&&(this.m_curveData.m_segmentFlags=u,this.m_curveData.m_segmentParamIndex=f),this.m_pointCount+=e,this.m_reservedPointCount>0&&(this.m_reservedPointCount=this.m_pointCount)}closePathWithLine(e){e===void 0&&(e=this.getPathCount()-1),this.throwIfEmpty(),(e<0||e>=this.getPathCount())&&Je("close_path_with_line"),e===this.getPathCount()-1&&(this.m_bPathStarted=!1);const i=this.m_pathFlags.read(e);if(this.m_pathFlags.write(e,1|i),this.m_curveData&&this.m_curveData.m_segmentFlags){const s=this.getPathEnd(e)-1,n=this.m_curveData.m_segmentFlags.read(s);this.m_curveData.m_segmentFlags.write(s,1),this.m_curveData.m_segmentParamIndex.write(s,-1),n!==1&&(this.incCurveType(n,-1),this.modifyCurveCounter(-1))}this.notifyModifiedFlags(2001)}closeLastPathWithSegment(e){this.closePathWithSegment(this.getPathCount()-1,e)}closePathWithSegment(e,i){if(this.throwIfEmpty(),(e<0||e>=this.getPathCount())&&Je("close_path_with_line"),i.getEndXY().equals(this.getXY(this.getPathStart(e)))||Je("close_path_with_segment: end point mismatch"),e===this.getPathCount()-1)this.m_bPathStarted=!1,this.addSegment(i,!1),--this.m_pointCount,this.m_paths.write(e+1,this.m_pointCount);else{this.mergeVertexDescription(i.getDescription());const n=i.getStartXY(),r=this.getPathEnd(e)-1;n.equals(this.getXY(r))||Je("close_path_with_segment: start point mismatch");const o=i.getGeometryType();if(o===me.enumLine)return void this.closePathWithLine(e);{const l=CN(i);this.initSegmentData(l);const u=ip.toSegType(o),f=this.m_curveData.m_segmentFlags.read(r);if(f!==u)this.m_curveData.m_segmentParamIndex.write(r,this.m_curveData.m_curveParamWritePoint),i.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=l,this.incCurveType(u,1),f!==1?this.incCurveType(f,-1):this.modifyCurveCounter(1);else{const y=this.m_curveData.m_segmentParamIndex.read(r);i.writeInBufferStream(this.m_curveData.m_segmentParams,y)}this.m_curveData.m_segmentFlags.write(r,u)}}const s=this.m_pathFlags.read(e);this.m_pathFlags.write(e,1|s),this.notifyModifiedFlags(2001)}closeAllPaths(){if(this.m_bPolygon||this.isEmptyImpl())return;this.m_bPathStarted=!1;let e=!1;for(let i=0,s=this.m_paths.size()-1;i<s;i++){if(this.isClosedPath(i))continue;const n=this.m_pathFlags.read(i);this.m_pathFlags.write(i,1|n),e=!0}e&&this.notifyModifiedFlags(512)}isClosedPath(e){return!!(1&this.m_pathFlags.read(e))}isClosedPathInXYPlane(e){if(this.isClosedPath(e))return!0;const i=this.getPathStart(e),s=this.getPathEnd(e)-1;if(i>s)return!1;const n=this.getXY(i),r=this.getXY(s);return n.isEqualPoint2D(r)}isClosedPathIn3D(e){return K(0),!1}hasNonLinearSegmentsPath(e){if(!this.hasNonLinearSegments())return!1;for(let i=this.getPathStart(e),s=this.getPathEnd(e);i<s;i++)if(pa.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(i)))return!0;return!1}isNonLinearSegment(e){return!(1&this.getSegmentFlags(e))}addEnvelope(e,i){if(e.isEmpty())return;const s=this.m_pointCount===0;if(e instanceof xe)this.startPathCoords(e.xmin,e.ymin),i?(this.lineToCoords(e.xmax,e.ymin),this.lineToCoords(e.xmax,e.ymax),this.lineToCoords(e.xmin,e.ymax)):(this.lineToCoords(e.xmin,e.ymax),this.lineToCoords(e.xmax,e.ymax),this.lineToCoords(e.xmax,e.ymin));else{const n=e.getDescription(),r=yy(),o=new Ut({vd:n,attribBuffer:r,initDefaultValues:!1});for(let l=0,u=4;l<u;l++){const f=i?u-l-1:l;e.queryCornerByVal(f,o),l===0?this.startPathPoint(o):this.lineToPoint(o)}}this.closePathWithLine(),this.m_bPathStarted=!1,s&&!i&&(this.setDirtyFlagProtected(256,!1),this.m_bPolygon&&Math.min(e.width(),e.height())>0&&this.setIsSimple(3,0))}addPathFromClosedSegment(e,i){if(e.isClosed()||Je("add_path_from_closedSegment: segment must be closed"),i){const s=e.getReversed(),n=new Ut;s.queryStart(n),this.startPathPoint(n),this.closeLastPathWithSegment(s)}else{const s=new Ut;e.queryStart(s),this.startPathPoint(s),this.closeLastPathWithSegment(e)}}addSegment_(e,i){const s=e.getDescription();this.mergeVertexDescription(s);const n=yy(),r=new Ut({vd:s,attribBuffer:n,initDefaultValues:!1}),o=e.getGeometryType();if(o===me.enumLine)(i||this.isEmptyImpl())&&(e.queryStart(r),this.startPathPoint(r)),e.queryEnd(r),this.lineToPoint(r);else{let l=!1;if((i||this.isEmptyImpl())&&(l=!0),!l&&(e.getStartXY().equals(this.getXY(this.m_pointCount-1))||Je("add_segment: start point mismatch")),l&&(e.queryStart(r),this.startPathPoint(r)),this.beforeNewSegment(1),e.queryEnd(r),r.getDescription()===this.m_description)this.setPointByVal(this.m_pointCount-1,r);else{const y=yy(),_=new Ut({vd:this.m_description,attribBuffer:y,initDefaultValues:!1});r.copyCommonAttributesTo(_),this.setPointByVal(this.m_pointCount-1,_)}const u=CN(e);this.initSegmentData(u),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-2,this.m_curveData.m_curveParamWritePoint),e.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=u;const f=ip.toSegType(o);this.incCurveType(f,1),this.modifyCurveCounter(1),this.m_curveData.m_segmentFlags.write(this.m_pointCount-2,f)}}addSegment(e,i,s){s?i?this.addPathFromClosedSegment(e,!1):this.closeLastPathWithSegment(e):this.addSegment_(e,i)}interpolateAttributesRange(e,i,s,n){for(let l=e;l<s-1;l++)this.isClosedPath(l)&&Je("cannot interpolate across closed paths");const r=this.m_description.getAttributeCount();if(r===1)return;const o=this.calculateSubLength2D(e,i,s,n);if(o!==0)for(let l=1;l<r;l++){const u=this.m_description.getSemantics(l);this.interpolateAttributesSemanticsImpl(u,e,i,s,n,o)}}interpolateAttributesSemantics(e,i,s,n,r){if(e===0)return;this.hasAttribute(e)||Je("does not have the given attribute"),ts.getInterpolation(e)===2&&Je("angular interpolation");for(let l=i;l<n-1;l++)this.isClosedPath(l)&&Je("cannot interpolate across closed paths");const o=this.calculateSubLength2D(i,s,n,r);o!==0&&this.interpolateAttributesSemanticsImpl(e,i,s,n,r,o)}interpolateAttributesPath(e,i,s){const n=this.m_description.getAttributeCount();if(n===1||i===s)return;const r=this.calculatePathSubLength2D(e,i,s);for(let o=1;o<n;o++){const l=this.m_description.getSemantics(o);this.interpolateAttributesSemanticsPathImpl(l,e,i,s,r)}}interpolateAttributesSemanticsPath(e,i,s,n){if(e===0)return;this.hasAttribute(e)||Je("does not have the given attribute"),ts.getInterpolation(e)===2&&Je("angular interpolation");const r=this.calculatePathSubLength2D(i,s,n);r!==0&&this.interpolateAttributesSemanticsPathImpl(e,i,s,n,r)}interpolateAttributesSemanticsImpl(e,i,s,n,r,o){const l=this.querySegmentIterator(),u=this.getPathStart(i)+s,f=this.getPathStart(n)+r,y=ts.getComponentCount(e),_=new Array(ts.maxComponentCount());this.queryAttributeAsDbl(e,u,_,y);const x=new Array(ts.maxComponentCount());this.queryAttributeAsDbl(e,f,x,y);const S=new Array(ts.maxComponentCount());dn(S,_,0,0,y);let P=0;const A=ts.getDefaultValue(e),k=ts.getInterpolation(e);l.resetToVertex(u,i);do if(l.hasNextSegment()){if(l.nextSegment(),l.getStartPointIndex()===f)return;this.setAttributeFromArray(e,l.getStartPointIndex(),S,y),l.previousSegment();do{const $=l.nextSegment();if(l.getEndPointIndex()===f)return;P+=$.calculateLength2D(),rz(k,_,x,S,0,y,P/o,A),l.isClosingSegment()||this.setAttributeFromArray(e,l.getEndPointIndex(),S,y)}while(l.hasNextSegment())}while(l.nextPath())}interpolateAttributesSemanticsPathImpl(e,i,s,n,r){const o=this.querySegmentIterator(),l=ts.getInterpolation(e),u=this.getPathStart(i)+s,f=this.getPathStart(i)+n;if(f===u)return;const y=ts.getComponentCount(e),_=new Array(ts.maxComponentCount());this.queryAttributeAsDbl(e,u,_,y);const x=new Array(ts.maxComponentCount());this.queryAttributeAsDbl(e,f,x,y);const S=new zr(0);o.resetToVertex(u,i),o.setCirculator(this.isClosedPath(i));const P=ts.getDefaultValue(e),A=new Array(ts.maxComponentCount());dn(A,_,0,0,y);const k=r===0;let $=.5;do{const F=o.nextSegment();if(this.setAttributeFromArray(e,o.getStartPointIndex(),A,y),!k){const G=F.calculateLength2D();S.pe(G),$=S.getResult()/r}rz(l,_,x,A,0,y,$,P)}while(o.getEndPointIndex()!==f)}querySegment(e,i,s){const n=this.getPathIndexFromPointIndex(e),r=e-this.getPathStart(n);r>=this.getSegmentCountPath(n)&&Je("get_segment"),this.getSegmentFromPath(n,r,i,s)}getSegment(e,i){const s=new this.m_segmentBufferCTor;return this.getSegmentBuffer(e,s,i),s.releaseSegment()}getSegmentType(e){const i=this.getPathIndexFromPointIndex(e),s=e-this.getPathStart(i);return s>=this.getSegmentCountPath(i)&&Je("get_segment"),this.getSegmentTypeFromPath(i,s)}getSegmentFromPath(e,i,s,n){const r=this.getPathStart(e)+i,o=this.getSegmentFlagsStreamRef();let l=1;switch(o&&(l=31&o.read(r)),l){case 1:s.createLine();break;case 2:s.createCubicBezier();break;case 4:s.createEllipticArc();break;case 8:s.createQuadraticRationalBezier();break;case 16:s.createQuadraticBezier();break;default:bt("")}const u=s.get();let f,y=null;if(n?(y=Ho(),u.assignVertexDescription(y)):u.assignVertexDescription(this.m_description),f=r===this.getPathEnd(e)-1&&this.isClosedPath(e)?this.getPathStart(e):r+1,wj(u,this.getXY(r)),Sj(u,this.getXY(f)),!n)for(let _=1,x=this.m_description.getAttributeCount();_<x;_++){const S=this.m_description.getSemantics(_),P=ts.getComponentCount(S);for(let A=0;A<P;A++){const k=this.getAttributeAsDbl(S,r,A);u.setStartAttribute(S,A,k);const $=this.getAttributeAsDbl(S,f,A);u.setEndAttribute(S,A,$)}}if(pa.isNonLinearSegmentFlag(l)){const _=this.m_curveData.m_segmentParamIndex.read(r);u.readFromBufferStream(this.m_curveData.m_segmentParams,_)}}replaceLinearEllipticalArcsWithTrueLines(){if(!this.hasNonLinearSegments()||this.m_curveData.m_arcCount===0)return!1;let e=!1;for(let i=0,s=this.getPointCount();i<s;i++)if(this.m_curveData.m_segmentFlags.read(i)===4){const n=this.m_curveData.m_segmentParamIndex.read(i);eQe(this.m_curveData.m_segmentParams,n).isNAN()&&(this.m_curveData.m_segmentFlags.write(i,1),this.m_curveData.m_segmentParamIndex.write(i,-1),this.incCurveType(4,-1),this.modifyCurveCounter(-1),e=!0)}return e&&this.checkCompactSegmentParams(),e}queryPointAlongPath(e,i,s,n=!1){const r={iSegment:-1},o=n?r:{tSegment:0};if(s.setEmpty(),this.isEmpty()||((e<0||e>=this.getPathCount())&&Je("query_point_along_path"),i<0))return r;const l=this.getPathSize(e);if(l===0)return r;if(l===1)return this.getPointByVal(this.getPathStart(e),s),o.tSegment=0,r.iSegment=this.getPathStart(e),r;const u=this.querySegmentIteratorAtVertex(this.getPathStart(e)),f=new zr(0);for(;u.hasNextSegment();){const y=u.nextSegment(),_=y.calculateLength2D(),x=f.getResult();if(f.add(_),f.getResult()>=i){let S=i-x;S>_&&(S=_);const P=y.lengthToT(S);return y.queryCoord(P,s),o.tSegment=P,r.iSegment=u.getStartPointIndex(),r}}if(this.isClosedPath(e)){const y=this.getPathStart(e);return this.getPointByVal(y,s),o.tSegment=1,r.iSegment=this.getPathEnd(e)-1,r}{const y=this.getPathEnd(e)-1;return this.getPointByVal(y,s),this.getPathSize(e)>1?(o.tSegment=1,r.iSegment=this.getPathEnd(e)-2,r):(o.tSegment=0,r.iSegment=this.getPathStart(e),r)}}queryPointsAlongPath(e,i,s,n,r,o){{let P=0;for(let A=0;A<i;++A)n&&n[A].setEmpty(),r&&(r[A]=-1),o&&(o[A]=0),P>s[A]&&Je("query_points_along"),P=s[A]}const l=this.getPathSize(e);if(i===0||l===0)return 0;if(l===1){const P=this.getPathStart(e);return n&&this.getPointByVal(P,n[0]),o&&(o[0]=0),r&&(r[0]=P),1}const u=this.getPathStart(e),f=new zr(0),y=this.querySegmentIteratorAtVertex(u);let _=0,x=0,S=s[_];for(;y.hasNextSegment();){const P=y.nextSegment(),A=P.calculateLength2D(),k=f.getResult();for(f.add(A);f.getResult()>=S;){let $=S-k;$>A&&($=A);const F=P.lengthToT($);if(n&&P.queryCoord(F,n[x]),o&&(o[x]=F),r&&(r[x]=y.getStartPointIndex()),x++,_++,S=s[_],_===i)return x}}if(this.isClosedPath(e)){const P=this.getPathStart(e),A=0;n&&this.getPointByVal(P,n[x]),o&&(o[x]=A),r&&(r[x]=P),x++}else if(this.getPathSize(e)>1){const P=this.getPathEnd(e)-2,A=1;n&&this.getPointByVal(P+1,n[x]),o&&(o[x]=A),r&&(r[x]=P),x++}return x}queryPointsAlong(e,i,s,n,r){{let x=0;for(let S=0;S<e;++S)s&&s[S].setEmpty(),n&&(n[S]=-1),r&&(r[S]=0),x>i[S]&&Je("query_points_along"),x=i[S]}if(e===0)return 0;const o=new zr(0),l=this.querySegmentIterator();let u=-1,f=0,y=0,_=i[f];for(;l.nextPath();)for(;l.hasNextSegment();){u=l.getPathIndex();const x=l.nextSegment(),S=x.calculateLength2D(),P=o.getResult();for(o.add(S);o.getResult()>=_;){let A=_-P;A>S&&(A=S);const k=x.lengthToT(A);if(s&&x.queryCoord(k,s[y]),r&&(r[y]=k),n&&(n[y]=l.getStartPointIndex()),y++,f++,_=i[f],f===e)return y}}if(u<0)return 0;if(this.isClosedPath(u)){const x=this.getPathStart(u),S=0;s&&this.getPointByVal(x,s[y]),r&&(r[y]=S),n&&(n[y]=x),y++}else if(this.getPathSize(u)>1){const x=this.getPathEnd(u)-2,S=1;s&&this.getPointByVal(x+1,s[y]),r&&(r[y]=S),n&&(n[y]=x),y++}return y}querySegmentIterator(){return new EN({parent:this})}querySegmentIteratorAtVertex(e){return new EN({parent:this,pointIndex:e})}queryPathEnvelope(e,i){this.queryPathEnvelopeImpl(e,i,!0)}queryLoosePathEnvelope(e,i){this.queryPathEnvelopeImpl(e,i,!1)}queryPathEnvelopeImpl(e,i,s){if(i instanceof lr&&K(0,"not implemented for Envelope"),i instanceof il&&K(0,"not implemented for Envelope3D"),(e>=this.getPathCount()||e<0)&&Je(""),this.isEmpty())return void i.setEmpty();const n=this.getAttributeStreamRef(0),r=xe.constructEmpty();r.setEmpty();for(let o=2*this.getPathStart(e),l=2*this.getPathEnd(e);o<l;){const u=l-o;K(!(1&u)),r.mergePointsInterleaved(n,o/2,u/2),o+=u}if(i.setCoords({env2D:r}),this.hasNonLinearSegmentsPath(e)){const o=this.querySegmentIterator();if(o.resetToPath(e),o.nextPath())for(;o.hasNextSegment();){const l=o.nextCurve();if(!l)break;{const u=xe.constructEmpty();s?l.queryEnvelope(u):l.queryLooseEnvelope(u),i.mergeEnvelope2D(u)}}else K(0)}}checkCompactSegmentParams(){if(!this.m_curveData||this.m_curveData.m_segmentParams===null||this.m_curveData.m_segmentParams.size()<=this.m_vertexAttributes.get(0).size())return!1;const e=10,i=du(4)*this.m_curveData.m_arcCount+du(2)*this.m_curveData.m_bezierCount+du(8)*this.m_curveData.m_rbezier2Count+du(16)*this.m_curveData.m_bezier2Count;return this.m_curveData.m_segmentParams.size()>Math.max(3*i>>1,e)?(this.forceCompactSegmentParams(),!0):(this.m_pointCount===0&&(this.m_curveData.m_curveParamWritePoint=0),!1)}forceCompactSegmentParams(){let e=0;for(let n=0,r=this.getPointCount();n<r;n++){const o=this.m_curveData.m_segmentFlags.read(n);pa.isNonLinearSegmentFlag(o)&&(e+=du(o))}const i=Ny(e);let s=0;for(let n=0,r=this.getPointCount();n<r;n++){const o=this.m_curveData.m_segmentFlags.read(n);if(pa.isNonLinearSegmentFlag(o)){let l=this.m_curveData.m_segmentParamIndex.read(n);this.m_curveData.m_segmentParamIndex.write(n,s);const u=du(o);for(let f=0;f<u;f++)i.write(s,this.m_curveData.m_segmentParams.read(l)),s++,l++}}this.m_curveData.m_segmentParams=i,this.m_curveData.m_curveParamWritePoint=s}setPathsFromJsonArrays(e,i,s){K(i===!1),K(e===!1),this.setEmpty();const n=s.length;if(n===0)return;let r=0;for(const x of s)r+=x.length;const o=this.getGeometryType()===me.enumPolygon,l=new od(2*r),u=new Ns(n+1);let f=0,y=0;for(let x=0;x<n;++x){u.write(x,f);const S=s[x],P=S.length;for(let A=0;A<P;++A)l.write(y++,S[A][0]),l.write(y++,S[A][1]);o&&P>2&&l.read(2*f)===l.read(y-2)&&l.read(2*f+1)===l.read(y-1)&&(y-=2,r--,f--),f+=s[x].length}u.write(n,r);const _=new _v(u.size());_.setRange(this.getGeometryType()===me.enumPolygon?1:0,0,n),_.write(n,0),this.setAttributeStreamRef(0,l),this.setPathFlagsStreamRef(_),this.setPathStreamRef(u),this.notifyModifiedFlags(65535)}setEmpty(){this.m_curveData&&(this.removeAllCurvesFromGlobalCounter(),this.m_curveData=null),this.m_bPathStarted=!1,this.m_paths=null,this.m_pathFlags=null,this.setEmptyImpl()}applyTransformation(e){this.applyTransformationToPath(e,-1)}applyTransformation3D(e){K(0)}getImpl(){return this}reserve(e){this.reserveImpl(e),e>0&&!this.m_paths&&(this.m_paths=Ga(0),this.m_pathFlags=R0(0),this.m_paths.reserve(2),this.m_pathFlags.reserve(2),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,0))}reserveParts(e,i){this.reserveImpl(e),i>0&&(this.m_paths?(this.m_paths.reserve(i+1),this.m_pathFlags.reserve(i+1)):(this.m_paths=Ga(0),this.m_pathFlags=R0(0),this.m_paths.reserve(i+1),this.m_pathFlags.reserve(i+1),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,0)))}clone(){const e=this.createInstance();return this.copyTo(e),e}createShallowClone(){return K(0),this}queryLimitedSegmentIterator(e){return new jet(this,e)}getPathStreamRef(){return this.throwIfEmpty(),this.m_paths}setPathStreamRef(e){this.m_paths=e}getSegmentFlagsStreamRef(){return this.throwIfEmpty(),this.m_curveData!=null?this.m_curveData.m_segmentFlags:null}getPathFlagsStreamRef(){return this.throwIfEmpty(),this.m_pathFlags}setPathFlagsStreamRef(e){this.m_pathFlags=e}getSegmentIndexStreamRef(){return this.throwIfEmpty(),this.m_curveData!==null?this.m_curveData.m_segmentParamIndex:null}getSegmentDataStreamRef(){return this.throwIfEmpty(),this.m_curveData!==null?this.m_curveData.m_segmentParams:null}setSegmentData(e,i,s,n){this.m_curveData||(this.m_curveData=new ip),this.m_curveData.m_segmentFlags=s,this.m_curveData.m_segmentParams=i,this.m_curveData.m_segmentParamIndex=e,this.m_curveData.m_curveParamWritePoint=n}static getPathIndexFromPointIndexImpl(e,i,s,n){if(n>=0&&n<i){if(s>=e.read(n)){if(s<e.read(n+1))return n;n++}else n--;if(n>=0&&n<i&&s>=e.read(n)&&s<e.read(n+1))return n}if(i<5){for(let l=0;l<i;l++)if(s<e.read(l+1))return l;vge("")}let r=0,o=i-1;for(;o>r;){const l=r+(o-r>>1);if(s<e.read(l))o=l-1;else{if(!(s>=e.read(l+1)))return l;r=l+1}}return r}getHighestPointIndex(e){K(e>=0&&e<this.getPathCount());const i=this.getAttributeStreamRef(0),s=this.getPathEnd(e),n=this.getPathStart(e);let r=-1;const o=new Y;o.y=Number.NEGATIVE_INFINITY,o.x=Number.NEGATIVE_INFINITY;for(let l=n+0;l<s;l++){const u=i.readPoint2D(2*l);o.compare(u)===-1&&(r=l,o.setCoordsPoint2D(u))}return r}applyTransformationToPath(e,i){if(i>=this.getPathCount()&&Je("apply_transformation"),this.isEmpty()||e.isIdentity())return;const s=this.m_vertexAttributes.get(0);if(!(i<0?this.hasNonLinearSegments():this.hasNonLinearSegmentsPath(i))){let l,u;return i<0?(l=0,u=this.m_pointCount):(l=this.getPathStart(i),u=this.getPathEnd(i)),s.applyTransformation(e,2*l,u-l),void this.notifyModifiedFlags(2001)}const n=new this.m_segmentBufferCTor,r=this.getPathCount();let o=i<0?0:i;do{const l=this.getPathStart(o),u=this.getPathEnd(o),f=this.isClosedPath(o),y=s.readPoint2D(2*l);if(!this.hasNonLinearSegmentsPath(o)){s.applyTransformation(e,2*l,u-l);continue}const _=Y.getNAN();for(let x=l;x<u;++x){if((31&this.m_curveData.m_segmentFlags.read(x))!==1){const P=f&&x+1===u;P&&s.writePoint2D(2*l,y),this.getSegmentBuffer(x,n,!0),n.get().applyTransformation(e);const A=this.m_curveData.m_segmentParamIndex.read(x);n.get().writeInBufferStream(this.m_curveData.m_segmentParams,A),s.writePoint2D(2*x,n.get().getStartXY()),P&&s.writePoint2D(2*l,n.get().getEndXY());continue}const S=2*x;s.queryPoint2D(S,_),e.transformInPlace(_),s.writePoint2D(S,_)}if(o===i)break}while(++o<r);this.notifyModifiedFlags(2001)}calculateSubLength2D(e,i,s,n){const r=this.getPathStart(e)+i,o=this.getPathStart(s)+n;(o<r||r<0||o>this.getPointCount()-1)&&bn("");const l=this.querySegmentIterator();let u=0;l.resetToVertex(r,e);do{for(;l.hasNextSegment();){const f=l.nextSegment();if(l.getStartPointIndex()===o)break;u+=f.calculateLength2D()}if(l.getStartPointIndex()===o)break}while(l.nextPath());return u}calculatePathSubLength2D(e,i,s){const n=this.getPathStart(e)+i,r=this.getPathStart(e)+s;(n<0||r>this.getPointCount()-1)&&bn("");const o=this.querySegmentIterator();if(n>r&&(this.isClosedPath(e)||Je("cannot iterate across an open path"),o.setCirculator(!0)),n===r)return 0;let l=0,u=0;o.resetToVertex(n,e);do u+=l,l=o.nextSegment().calculateLength2D();while(o.getStartPointIndex()!==r);return u}calculateEnvelope2D(e){return K(0),new xe(0,0,0,0)}updateXYImpl(e){const i=super.updateXYImpl(e);if(this.hasNonLinearSegments()){const s=xe.constructEmpty(),n=this.querySegmentIterator();for(;n.nextPath();)for(;n.hasNextSegment();){const r=n.nextCurve();if(!r)break;e?r.queryEnvelope(s):r.queryLooseEnvelope(s),i.mergeEnvelope2D(s)}}return i}notifyModifiedAllImpl(){this.m_paths!==null&&this.m_paths.size()?this.m_pointCount=this.m_paths.read(this.m_paths.size()-1):this.m_pointCount=0}setDirtyOGCFlags(e){this.setDirtyFlagProtected(16,e)}hasDirtyOGCStartFlags(){return this.hasDirtyFlag(16)}setDirtyRingAreas2D(e){this.setDirtyFlagProtected(1024,e)}hasDirtyRingAreas2D(){return this.hasDirtyFlag(1024)}static isNonLinearSegmentFlag(e){return!(1&e)}addAndExplicitlyOpenAllPaths(e,i){this===e&&Je("Multi_path_impl::add");let s=this.getPathCount();for(let n=0,r=e.getPathCount();n<r;n++)this.addPath(e,n,!i),this.openPathAndDuplicateStartVertex(s),s++}getSegmentFlags(e){return this.m_curveData!==null&&this.m_curveData.m_segmentFlags!==null?this.m_curveData.m_segmentFlags.read(e):1}getSegmentBuffer(e,i,s){const n=this.getPathIndexFromPointIndex(e),r=e-this.getPathStart(n);r>=this.getSegmentCountPath(n)&&Je("getSegmentBuffer"),this.getSegmentFromPath(n,r,i,s)}getSegmentTypeFromPath(e,i){const s=this.getPathStart(e)+i,n=this.getSegmentFlagsStreamRef();let r=1;switch(n&&(r=31&n.read(s)),r){case 1:return me.enumLine;case 2:return me.enumBezier;case 4:return me.enumEllipticArc;case 8:return me.enumRationalBezier2;case 16:return me.enumBezier2;default:bt("")}}ensureXYMonotoneSegments(){if(!this.m_curveData)return!1;let e=!1;for(let i=0,s=this.getPathCount();i<s;i++){const n=this.getPathStart(i),r=this.getPathEnd(i),o=r-n;for(let l=n;l<r;l++){const u=31&this.m_curveData.m_segmentFlags.read(l);if(u===1)continue;u!==2&&js("ensure_xy_monotone_segments");const f=(l-n+1)%o+n,y=this.m_curveData.m_segmentParamIndex.read(l),_=Ge(Y,4);_[0]=this.getXY(l),_[3]=this.getXY(f),_[1].x=this.m_curveData.m_segmentParams.read(y),_[1].y=this.m_curveData.m_segmentParams.read(y+1),_[2].x=this.m_curveData.m_segmentParams.read(y+2),_[2].y=this.m_curveData.m_segmentParams.read(y+3),l7(_)&&(e=!0,this.m_curveData.m_segmentParams.write(y,_[1].x),this.m_curveData.m_segmentParams.write(y+1,_[1].y),this.m_curveData.m_segmentParams.write(y+2,_[2].x),this.m_curveData.m_segmentParams.write(y+3,_[2].y))}}return e&&this.notifyModifiedFlags(2001),e}buildRasterizedGeometryAccelerator(e,i){return!1}buildQuadTreeAccelerator(e){if(this.m_accelerators||(this.m_accelerators=new L6),this.m_accelerators.getQuadTree()!==null)return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTree(null);const i=V2(this);return this.m_accelerators.setQuadTree(i),!0}buildQuadTreeForPathsAccelerator(e){if(this.m_accelerators||(this.m_accelerators=new L6),this.m_accelerators.getQuadTreeForPaths()!==null)return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTreeForPaths(null);const i=$Je(this);return this.m_accelerators.setQuadTreeForPaths(i),!0}updateCurveCounter(e){this.modifyCurveCounter(e-this.getCurveCount())}removeAllCurvesFromGlobalCounter(){this.m_curveData&&(pa.st_totalCurveCount-=this.m_curveData.m_curveCount,this.m_curveData.m_curveCount=0,this.m_curveData.m_bezierCount=0,this.m_curveData.m_arcCount=0,this.m_curveData.m_bezier2Count=0,this.m_curveData.m_rbezier2Count=0,this.m_curveData.m_curveParamWritePoint=0)}modifyCurveCounter(e){e&&(this.m_curveData||(this.m_curveData=new ip),pa.st_totalCurveCount+=e,this.m_curveData.m_curveCount+=e)}getCurveCount(){return this.m_curveData?this.m_curveData.m_curveCount:0}incCurveType(e,i){this.m_curveData||(this.m_curveData=new ip),2&e?this.m_curveData.m_bezierCount+=i:4&e?this.m_curveData.m_arcCount+=i:8&e?this.m_curveData.m_rbezier2Count+=i:16&e&&(this.m_curveData.m_bezier2Count+=i)}getCurveWritePoint(){return K(0),0}initSegmentData(e){this.m_curveData===null&&(this.m_curveData=new ip);const i=this.m_reservedPointCount>0?this.m_reservedPointCount:this.m_pointCount;this.m_curveData.m_segmentParamIndex===null&&(this.m_curveData.m_segmentFlags=R0(i,1),this.m_curveData.m_segmentParamIndex=Ga(i,-1));const s=this.m_curveData.m_curveParamWritePoint+e;this.m_curveData.m_segmentParams===null?this.m_curveData.m_segmentParams=Ny(s):s!==this.m_curveData.m_segmentParams.size()&&this.m_curveData.m_segmentParams.resize(s,0),this.m_curveData.m_segmentFlags.size()<i&&(this.m_curveData.m_segmentFlags.resize(i,1),this.m_curveData.m_segmentParamIndex.resize(i,-1))}updateCurveWritePoint(e){this.m_curveData===null&&(this.m_curveData=new ip),this.m_curveData.m_curveParamWritePoint=e}updateOGCFlagsHelper(){const e=this.getPathCount();if(e===0)return;const i=this.m_pathFlags;let s=0;for(let n=0;n<e;n++){const r=this.m_cachedRingAreas2D.read(n);s===0&&(s=xn(r)),r*s>0||s===0?i.setBits(n,8):i.clearBits(n,8)}}updateOGCFlagsProtected(){this.hasDirtyFlag(16)&&(this.updateRingAreas2DProtected(),this.updateOGCFlagsHelper(),this.setDirtyFlagProtected(16,!1))}replaceSegment(e,i,s){(e<0||e>=this.getPointCount())&&Je("Multi_path_impl.replace_segment"),K(i.isCurve());const n=this.getPathIndexFromPointIndex(e),r=this.getPathStart(n),o=(e-r+1)%this.getPathSize(n)+r;{const $=this.getXY(e),F=this.getXY(o),G=!$.isEqualPoint2D(i.getStartXY())||!F.isEqualPoint2D(i.getEndXY());K(!G)}const l=i.getDescription();this.mergeVertexDescription(l);const u=new Array(32),f=new Ut({vd:l,attribBuffer:u,initDefaultValues:!1}),y=this.m_curveData===null?1:31&this.m_curveData.m_segmentFlags.read(e),_=du(y),x=CN(i);let S,P=!1;_>=x?(K(this.m_curveData!==null),P=!0,S=this.m_curveData.m_segmentParamIndex.read(e)):(this.initSegmentData(x),P=!1,S=this.m_curveData.m_curveParamWritePoint);const A=i.getGeometryType(),k=ip.toSegType(A);s||(i.queryStart(f),this.setPointByVal(e,f),i.queryEnd(f),this.setPointByVal(o,f)),this.m_curveData.m_segmentParamIndex.write(e,k!==1?S:-1),this.m_curveData.m_segmentFlags.write(e,k),k!==1&&i.writeInBufferStream(this.m_curveData.m_segmentParams,S),P||(this.m_curveData.m_curveParamWritePoint+=x),y!==k&&(this.incCurveType(y,-1),this.incCurveType(k,1),this.modifyCurveCounter(y===1?1:-1))}verifyPathIndex(e){K(0)}setAttributeImpl(e,i,s){if(this.addAttribute(e),!this.isEmpty())if(this.hasNonLinearSegments()&&e===0){(i<0||i>1)&&Je("");const n=new _i,r=i===0?s:0,o=i===0?0:1;n.setShiftCoords(r,o),i===0?n.xx=0:n.yy=0,this.applyTransformation(n)}else super.setAttributeImpl(e,i,s)}}pa.st_totalCurveCount=0;class jet{constructor(e,i){this.m_segIter=null,this.m_quadTree=null,this.m_qtIter=null,this.m_extentOfInterest=new xe(i),this.m_bfirst=!0,this.m_prevIndex=-100,this.m_parent=e}nextSegment(){return this.m_bfirst&&this.prepare_(),this.m_quadTree?this.nextSegmentQt():this.nextSegmentNoQt()}getPathIndex(){return this.m_segIter.getPathIndex()}getStartPointIndex(){return this.m_segIter.getStartPointIndex()}getEndPointIndex(){return this.m_segIter.getEndPointIndex()}isClosingSegment(){return this.m_segIter.isClosingSegment()}isPathClosed(){return this.m_segIter.isPathClosed()}prepare_(){const e=this.m_parent.getAccelerators();e&&(this.m_quadTree=e.getQuadTree(),this.m_quadTree&&(this.m_qtIter=this.m_quadTree.getSortedIterator(this.m_extentOfInterest,0))),this.m_segIter=this.m_parent.querySegmentIterator()}nextSegmentQt(){this.m_bfirst=!1;const e=this.m_qtIter.next();if(e===-1)return null;const i=this.m_quadTree.getElement(e);return(i!==this.m_prevIndex+1||this.m_segIter.isLastSegmentInPath())&&(this.m_segIter.resetToVertex(i,this.m_segIter.getPathIndex()),this.m_prevIndex=i),this.m_segIter.nextSegment()}nextSegmentNoQt(){for(;;){if(!this.m_bfirst&&this.m_segIter.hasNextSegment()){const e=this.m_segIter.nextSegment(),i=xe.constructEmpty();if(e.queryLooseEnvelope(i),!i.isIntersecting(this.m_extentOfInterest))continue;return e}if(this.m_bfirst=!1,!this.m_segIter.nextPath())return null}}}class vi extends pa{constructor(e){e?e.vd?(super({vd:e.vd,bPolygon:!1}),this.m_segmentBufferCTor=Qt):e.copy?(super({vd:e.copy.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=Qt,e.copy.copyTo(this)):e.move?(super({move:e.move}),this.m_segmentBufferCTor=Qt):e.start?(super({vd:e.start.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=Qt,this.startPathPoint(e.start),this.lineToPoint(e.end)):e.path?(super({bPolygon:!1}),this.m_segmentBufferCTor=Qt,this.addPathPoint2D(e.path,e.pointCount,e.bForward)):K(0):(super({bPolygon:!1}),this.m_segmentBufferCTor=Qt)}getBoundary(){return Zh(this)}assignCopy(e){return this!==e&&e.copyTo(this),this}assignMove(e){return e.copyTo(this),this}getGeometryType(){return vi.type}getDimension(){return 1}createInstance(){return new vi({vd:this.getDescription()})}equals(e,i){return this.equalsBase(e,i)}}vi.type=me.enumPolyline;var ag=me;function Fb(t,e){if(t.isEmpty())return!1;const i=t.getGeometryType();if(i===ag.enumPolygon)return t.calculateArea2D()!==0;if(i===ag.enumPolyline)return x1e(t.getImpl(),e,!0).bNotEmpty;if(i===ag.enumEnvelope)return!0;if(Dn(i))return!!t.isClosed();if(Ng(i))return!1;if(i===ag.enumGeometryCollection){const s=t;for(let n=0,r=s.getGeometryCount();n<r;n++)if(Fb(s.getGeometry(n),e))return!0;return!1}js("")}function Zh(t,e){const i=t.getGeometryType();if(i===ag.enumPolygon){const s=new vi({vd:t.getDescription()});return t.isEmpty()||t.copyToUnchecked(s),s}if(i===ag.enumPolyline)return x1e(t.getImpl(),e,!1).boundary;if(i===ag.enumEnvelope){const s=new vi({vd:t.getDescription()});return t.isEmpty()||s.addEnvelope(t,!1),s}if(Dn(i)){const s=new Jn({vd:t.getDescription()});if(!t.isEmpty()&&!t.isClosed()){const n=new Ut;s.reserve(2),t.queryStart(n),s.add(n),t.queryEnd(n),s.add(n)}return s}if(i===ag.enumGeometryCollection){const s=t;let n=null;for(let r=0,o=s.getGeometryCount();r<o;r++){const l=Zh(s.getGeometry(r),e);if(l!==null){n===null&&(n=t.createInstance());const u=l;n.addGeometry(u)}}return n}if(Ng(i))return new Ut({vd:t.getDescription()});js("")}function x1e(t,e,i){const n=t;let r=null;if(i||(r=new Jn({vd:n.getDescription()})),!n.isEmpty()){const o=new Ns(0);for(let l=0,u=n.getPathCount();l<u;l++)if(n.getPathSize(l)>0&&!n.isClosedPathInXYPlane(l)){const f=n.getPathStart(l);o.add(f);const y=n.getPathEnd(l)-1;o.add(y)}if(o.size()>0){const l=new ad,u=n.getAttributeStreamRef(0),f={userSort(P,A,k){const $=Y.getNAN(),F=Y.getNAN();k.sort(P,A,(G,V)=>(u.queryPoint2D(2*G,$),u.queryPoint2D(2*V,F),$.compare(F)))},getValue:P=>u.read(2*P+1)};l.sort(o,0,o.size(),f);let y=u.readPoint2D(2*o.read(0)),_=0,x=1;const S=new Ut;for(let P=1,A=o.size();P<A;P++){const k=u.readPoint2D(2*o.read(P));if(k.isEqualPoint2D(y))o.read(_)>o.read(P)?(o.write(_,ya()),_=P):o.write(P,ya()),x++;else{if(1&x){if(i)return{bNotEmpty:!0,boundary:new Jn({})}}else o.write(_,ya());y=k,_=P,x=1}}if(1&x){if(i)return{bNotEmpty:!0,boundary:new Jn({})}}else o.write(_,ya());if(!i){o.sort(0,o.size());for(let P=0,A=o.size();P<A&&o.read(P)!==ya();P++)n.getPointByVal(o.read(P),S),r.add(S)}}}return i?{bNotEmpty:!1,boundary:new Jn({})}:{bNotEmpty:!1,boundary:r}}const Bet=gj/180,Het=180/gj;function Uet(t){let e=t;return e>=-360&&e<720?(e<0?e+=360:e>=360&&(e-=360),e):(e=$g(e,360),e<0&&(e+=360),e)}function w1e(t){let e=t;return e=Uet(e),e>180&&(e-=360),e}function S1e(t){return t*Bet}function GI(t){return t*Het}function E1e(t){const e=jo();let i=t;return i>=-e&&i<2*e?(i<0&&(i+=e),i>=e&&(i-=e),i):(i=$g(i,e),i<0&&(i+=e),i)}function uie(t){const e=ki();let i=t;return i>-e&&i<=e||(i=E1e(i),i>e&&(i-=jo())),i}function hie(t,e){return w1e(e-t)}var o3=_r;class Vc extends f5{constructor(e){if(e===void 0||JA(e,"vd"))return super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_semiMajorAxis=0,this.m_minorMajorRatio=1,this.m_rotation=0,this.m_cosr=1,this.m_sinr=0,this.m_center=new Y(0,0),this.m_sweepAngle=0,this.m_startAngle=0,this.m_interior=new Y(0,0),void(this.m_bits=0);if(e.copy)return super(e),void(this!==e.copy&&(this.m_center=new Y(0,0),this.m_interior=new Y(0,0),e.copy.copyToImpl(this)));if(e.move)super(e),this.m_semiMajorAxis=e.move.m_semiMajorAxis,this.m_minorMajorRatio=e.move.m_minorMajorRatio,this.m_rotation=e.move.m_rotation,this.m_cosr=e.move.m_cosr,this.m_sinr=e.move.m_sinr,this.m_center=e.move.m_center.clone(),this.m_sweepAngle=e.move.m_sweepAngle,this.m_startAngle=e.move.m_startAngle,this.m_interior=e.move.m_interior.clone(),this.m_bits=e.move.m_bits,this.m_cachedValues=e.move.m_cachedValues,e.move.m_cachedValues=null;else{if(e.fromPoint)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new Y(0,0),this.m_interior=new Y(0,0),void this.constructCircularArcThreePoint(e.fromPoint,e.toPoint,e.interiorPoint);if(e.center)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new Y(0,0),this.m_interior=new Y(0,0),void this.constructCircleRadius(e.radius,e.center,e.bIsCounterClockwise);if(e.semiMajorAxis)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),void this.constructEllipticArcEndPoints(e.fromPoint,e.toPoint,e.semiMajorAxis,e.minorMajorRatio,e.axisXRotationRad,e.bBigArc,e.bIsCounterClockwise)}}getBoundary(){return Zh(this)}assignMove(e){return K(0),this}assignCopy(e){return this!==e&&e.copyTo(this),this}constructCircleRadius(e,i,s=!1){return this.constructEllipse(e,1,i,0,s),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircleCenterAndPoint(e,i,s=!1){const n=Y.distance(e,i);return this.constructEllipticArcEndPointsCenter(i,i,n,1,0,!0,s,e),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructTwoPointCircle(e,i,s=!1){const n=Y.lerp(e,i,.5);return this.constructCircleCenterAndPoint(n,e,s),this}constructLineEllipticArc(e,i){return Uu(this,e,i,1),this}constructLineCircularArc(e,i){return Uu(this,e,i,0),this}constructEllipse(e,i,s,n,r=!1){this.m_semiMajorAxis=Math.abs(e),this.m_minorMajorRatio=Math.abs(i),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const o=new Y(0,this.m_minorMajorRatio*this.m_semiMajorAxis),l=Math.cos(n),u=Math.sin(n);return o.rotateDirect(l,u),o.addThis(s),this.constructEllipticArcEndPointsCenter(o,o,this.m_semiMajorAxis,this.m_minorMajorRatio,n,!0,r,s),this}inflate(e){if(this.isDegenerateToLine())return;let i=this.getSemiMinorAxis()+e;if(i=i<=0?0:(this.getSemiMajorAxis()+e)/this.getSemiMajorAxis(),this.isCircular()){const s=new _i;s.setShiftCoords(-this.m_center.x,-this.m_center.y),s.scale(i,i),s.shiftCoords(this.m_center.x,this.m_center.y),this.applyTransformation(s)}else{const s=new _i;this.canonicToWorldTransformation(s);const n=s.clone();n.invertPreciseThis(),n.scale(i,i),n.multiply(s),this.applyTransformation(n)}}constructEnclosingCircle(e,i,s=!1){return mot(this,e,i,s),this}constructThreePointCircle(e,i,s,n=!1){if(e.equals(i)||i.equals(s)||e.equals(s)){const r=e.clone(),o=i.clone(),l=s.clone();return r.equals(o)&&o.assign(l),this.constructTwoPointCircle(r,o,n)}{const r=Y.calculateCircleCenterFromThreePoints(e,i,s);if(!r.isFinite()||!Number.isFinite(Y.distance(e,r))){const o=Y.distance(e,i),l=Y.distance(e,s);this.constructLineCircularArc(e,o>=l?i:s)}return this.constructCircleCenterAndPoint(r,e,n)}}constructCircularArcThreePoint(e,i,s){const n=new Be(e.x),r=new Be(i.x),o=new Be(s.x),l=new Be(e.y),u=new Be(i.y),f=new Be(s.y),y=new Be(.5),_=r.subE(n),x=u.subE(l),S=o.subE(n),P=f.subE(l),A=_.mulE(P).subThisE(x.mulE(S));if(A.scaleError(10),A.isZero()){if(!_.isZero()||!x.isZero())return Uu(this,e,i,0),this;{const Re=e.clone().addThis(i).mulThis(.5).addThis(s).mulThis(.5),Oe=s.sub(Re).length();this.constructEllipticArcEndPointsCenter(e,i,Oe,1,0,!0,!1,Re),this.m_interior.assign(s)}return this.setProjectionBehavior(0),this}const k=_.sqr().addThisE(x.sqr()).mulThisE(y),$=S.sqr().addThisE(P.sqr()).mulThisE(y),F=k.mulE(P).subThisE($.mulE(x)),G=_.mulE($).subThisE(S.mulE(k));F.divThisE(A),G.divThisE(A);const V=F.sqr().addThisE(G.sqr());V.sqrtThis();const B=F.addE(n),W=G.addE(l);let J=e.x-B.value(),re=e.y-W.value();const se=Math.atan2(re,J);J=i.x-B.value(),re=i.y-W.value();const oe=Math.atan2(re,J);J=s.x-B.value(),re=s.y-W.value();const pe=Math.atan2(re,J);let ce=pe-2*ki();for(;ce<se;)ce+=2*ki();let ue=oe-2*ki();for(;ue<ce;)ue+=2*ki();let ne=pe+2*ki();for(;ne>se;)ne-=2*ki();let de,Se=oe+2*ki();for(;Se>ne;)Se-=2*ki();de=ue-se<se-Se?ue-se:Se-se;const Pe=new Y(B.value(),W.value());return this.constructEllipticArcEndPointsCenter(e,i,V.value(),1,0,Math.abs(de)>ki(),de>0,Pe),this.m_interior.assign(s),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircularArc(e,i,s,n){return this.constructEllipticArcGeneral(e,1,i,s,n,0),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructEllipticArcEndPoints(e,i,s,n,r,o,l){return Sse(this,e,i,s,n,r,o,l)}constructEllipticArcEndPointsCenter(e,i,s,n,r,o,l,u){return Sse(this,e,i,s,n,r,o,l,u)}constructEllipticArcGeneral(e,i,s,n,r,o){this.m_semiMajorAxis=Math.abs(e),this.m_minorMajorRatio=Math.abs(i),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const l=uie(o),u=Math.cos(l),f=Math.sin(l),y=new Y(this.m_semiMajorAxis,this.m_minorMajorRatio*this.m_semiMajorAxis),_=Y.getNAN(),x=uie(n);_.x=y.x*Math.cos(x),_.y=y.y*Math.sin(x),_.rotateDirect(u,f),_.addThis(s);const S=lJe(r,jo());let P=S;Math.abs(P)===jo()&&(P=0);const A=Y.getNAN();return A.x=y.x*Math.cos(x+P),A.y=y.y*Math.sin(x+P),A.rotateDirect(u,f),A.addThis(s),this.constructEllipticArcEndPointsCenter(_,A,this.m_semiMajorAxis,this.m_minorMajorRatio,l,Math.abs(S)>ki(),S>0,s)}constructEllipticArcAsNURB(e,i,s,n){return(n>=1||n<0)&&Je("construct_elliptic_arc_as_NURB: weight"),i.isFinite()||Je("construct_elliptic_arc_as_NURB: control_point"),g7([e,i,s],n*n,null,!1,this),this}constructCanonic(e){return K(0),this}isCircular(){return this.m_minorMajorRatio===1&&this.m_rotation===0&&!this.isDegenerateToLine()}isDegenerateToLineHelper(e){return!!xj(this,[e])&&rn(this)}isDegenerateToLine(){return rn(this)}getCenter(){return this.m_center.clone()}setCenter(e){K(0)}getAxisXRotation(){return this.m_rotation}getSemiAxes(){return Y.construct(this.m_semiMajorAxis,this.m_semiMajorAxis*this.m_minorMajorRatio)}getSemiMajorAxis(){return this.m_semiMajorAxis}getSemiMinorAxis(){return this.m_semiMajorAxis*this.m_minorMajorRatio}getMinorMajorRatio(){return this.m_minorMajorRatio}isClockwise(){return!Q2(this)}isMajor(){return Yj(this)}getSweepAngle(){return this.m_sweepAngle}getStartAngle(){return this.m_startAngle}getEndAngle(){return this.m_startAngle+this.m_sweepAngle}getGeometryType(){return me.enumEllipticArc}queryEnvelope(e){if(e instanceof lr){e.setEmpty(),e.assignVertexDescription(this.m_description);const i=xe.constructEmpty();this.queryEnvelope(i),e.setEnvelope(i);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s);for(let o=0,l=o3.getComponentCount(r);s<l;s++){const u=this.queryInterval(r,o);e.setIntervalEnvelope(r,o,u)}}}else e instanceof xe?Tse(this,Ze.unit(),e):K(0)}applyTransformation(e){Uj(this,e,!1)}createInstance(){return new Vc}calculateLength2D(){return cot(this,0,1)}queryCoord2D(e,i){if(rn(this))Cj(e,this.getStartXY(),this.getEndXY(),i);else if(e===0)i.assign(Y.construct(this.m_XStart,this.m_YStart));else if(e===1)i.assign(Y.construct(this.m_XEnd,this.m_YEnd));else{const s=Xd(this,e),n=new Y(this.m_semiMajorAxis*Math.cos(s),this.getSemiMinorAxis()*Math.sin(s));n.rotateDirect(this.m_cosr,this.m_sinr),n.addThis(this.m_center),i.assign(n)}}queryCoord2DE(e,i){not(this,e,i)}getCoordX(e){const i=new Y;return this.queryCoord2D(e,i),i.x}getCoordY(e){const i=new Y;return this.queryCoord2D(e,i),i.y}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createEllipticArc();let o=e===0&&i===1;if(o&&!n)return void this.copyTo(r);const l=Y.getNAN();this.queryCoord2D(e,l);const u=Y.getNAN();if(this.queryCoord2D(i,u),!o){if(l.equals(u))i-e>.5&&this.isMajor()&&this.isClosed()?(o=!0,e=0,i=1):i===1?e=i:i=e;else if(e>0&&l.isEqual(this.m_XStart,this.m_YStart)&&(e=0),i<1&&u.isEqual(this.m_XEnd,this.m_YEnd)&&(i=1),o=e===0&&i===1,o&&!n)return void this.copyTo(r)}if(r.m_center.assign(this.m_center),r.m_semiMajorAxis=this.m_semiMajorAxis,r.m_minorMajorRatio=this.m_minorMajorRatio,r.m_interior.assign(this.m_interior),r.m_rotation=this.m_rotation,r.m_cosr=this.m_cosr,r.m_sinr=this.m_sinr,r.m_sweepAngle=this.m_sweepAngle,r.m_startAngle=this.m_startAngle,r.m_bits=this.m_bits,vte(r,l.x,l.y),_te(r,u.x,u.y),o)return void YN(r,UN(this));r.m_startAngle=Xd(this,e),r.m_sweepAngle=Xd(this,i)-r.m_startAngle,r.m_startAngle=Xy(r.m_startAngle),ex(r,Math.abs(r.m_sweepAngle)>ki()),r.assignVertexDescription(this.m_description),WS(r),qz(r);const f=this.m_description.getAttributeCount();if(f>1){for(let y=1;y<f;y++){const _=this.m_description.getSemantics(y),x=o3.getComponentCount(_);for(let S=0;S<x;S++){const P=this.getAttributeAsDbl(e,_,S);r.setStartAttribute(_,S,P)}}for(let y=1;y<f;y++){const _=this.m_description.getSemantics(y),x=o3.getComponentCount(_);for(let S=0;S<x;S++){const P=this.getAttributeAsDbl(i,_,S);r.setEndAttribute(_,S,P)}}}r.afterCompletedModification()}queryDerivative(e,i){vot()}cutArcIgnoreAttributes(e,i,s){let n=e===0&&i===1;const r=new Y;this.queryCoord2D(e,r);const o=new Y;this.queryCoord2D(i,o),n||(r.equals(o)?i-e>.5&&this.isMajor()&&this.isClosed()?(n=!0,e=0,i=1):i===1?e=i:i=e:(e>0&&r.isEqual(this.m_XStart,this.m_YStart)&&(e=0),i<1&&o.isEqual(this.m_XEnd,this.m_YEnd)&&(i=1),n=e===0&&i===1)),s.m_center.assign(this.m_center),s.m_semiMajorAxis=this.m_semiMajorAxis,s.m_minorMajorRatio=this.m_minorMajorRatio,s.m_interior.assign(this.m_interior),s.m_rotation=this.m_rotation,s.m_cosr=this.m_cosr,s.m_sinr=this.m_sinr,s.m_sweepAngle=this.m_sweepAngle,s.m_startAngle=this.m_startAngle,s.m_bits=this.m_bits,vte(s,r.x,r.y),_te(s,o.x,o.y),n?YN(s,UN(this)):(s.m_startAngle=Xd(this,e),s.m_sweepAngle=Xd(this,i)-s.m_startAngle,s.m_startAngle=Xy(s.m_startAngle),ex(s,Math.abs(s.m_sweepAngle)>Math.PI),WS(s),s.afterCompletedModification())}changeEndPoints2D(e,i){wse(this,e,i,!1)}getAttributeAsDbl(e,i,s){if(i===0)return s===0?this.getCoordX(e):this.getCoordY(e);if(e===0)return this.getStartAttributeAsDbl(i,s);if(e===1)return this.getEndAttributeAsDbl(i,s);const n=this.calculateLength2D(),r=n>0?this.tToLength(e)/n:0,o=o3.getInterpolation(i),l=this.getStartAttributeAsDbl(i,s),u=this.getEndAttributeAsDbl(i,s);return ZA(o,l,u,r,o3.getDefaultValue(i))}getClosestCoordinate(e,i){return Ise(this,e,Ze.unit(),i)}getClosestCoordinateOnInterval(e,i,s=-1){return Ise(this,e,i,!1)}getYMonotonicParts(e,i=!1){e.length<2&&Je("");const s=this.getSemiAxes(),n=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),r=n+ki(),o=new Array(3);let l=0;if(o[0]=Tn(this,n),o[0]>0&&o[0]<1&&l++,o[1]=Tn(this,r),o[1]>0&&o[1]<1&&(o[l]=o[1],l++),l===0)return 0;o[l]=1,l++,K(e.length>=l);let u=0;for(let f=0;f<l;f++){const y=o[f];this.queryCut(u,y,e[f],i),u=y}return l}getMonotonicParts(e,i){if(e.length<4&&Je(""),this.isDegenerateToLine())return e[0].createEllipticArc().assignCopy(this),i&&e[0].get().dropAllAttributes(),1;const s=this.getSemiAxes(),n=new Array(4);n[0]=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),n[1]=n[0]+ki(),n[2]=Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr),n[3]=n[2]+ki();const r=new Array(5);let o=0;for(let u=0;u<4;u++)r[o]=Tn(this,n[u]),r[o]>0&&r[o]<1&&o++;if(o===0)return 0;oz(r,o),r[o-1]<1&&(r[o]=1,o++),K(e.length>=o);let l=0;for(let u=0;u<o;u++){const f=r[u];this.queryCut(l,f,e[u],i),l=f}return o}intersectionWithAxis2D(e,i,s,n){if(rn(this))return new si({start:this.getStartXY(),end:this.getEndXY()}).intersectionWithAxis2D(e,i,s,n);let r,o;const l=new Be(i),u=this.getSemiAxes();if(e){if(i>this.m_center.y+u.x||i<this.m_center.y-u.x)return 0;r=new Be(u.x).mulThis(this.m_sinr),o=new Be(u.y).mulThis(this.m_cosr),l.subThis(this.m_center.y)}else{if(i>this.m_center.x+u.x||i<this.m_center.x-u.x)return 0;r=new Be(u.x).mulThis(this.m_cosr),o=new Be(u.y).mulThis(-this.m_sinr),l.subThis(this.m_center.x)}const f=r.sqr(),y=o.sqr(),_=f.addE(y),x=o.mulE(l).mulThis(-2),S=l.sqr().subThisE(f),P=x.sqr().subThisE(_.mulE(S).mulThis(4)),A=r.mulE(l).mulThis(-2),k=l.sqr().subThisE(y),$=A.sqr().subThisE(_.mulE(k).mulThis(4));let F=P.eps()*Math.abs($.value())<=$.eps()*Math.abs(P.value());F?r.isZero()&&(F=!1):o.isZero()&&(F=!0),F||(x.setE(A),S.setE(k));const G=Ge(Be,2);let V=El(_,x,S,Ze.construct(-1,1),!1,G);if(V===0)return 0;const B=[0,0];let W=0;for(let J=0;J<V;J++){const re=new Be,se=new Be;F?(re.setE(G[J]),se.setE(l.subE(o.mulE(G[J])).divThisE(r))):(se.setE(G[J]),re.setE(l.subE(r.mulE(G[J])).divThisE(o)));const oe=Tn(this,Math.atan2(re.value(),se.value()));oe>=0&&oe<=1&&(B[W]=oe,W++)}return V=W,V===0?0:(V===2&&B[0]>B[1]&&(B[1]=St(B[0],B[0]=B[1])),n&&dn(n,B,0,0,V),s&&(s[0]=e?this.getCoordX(B[0]):this.getCoordY(B[0]),V>1&&(s[1]=e?this.getCoordX(B[1]):this.getCoordY(B[1]),!n&&s[0]>s[1]&&(s[1]=St(s[0],s[0]=s[1])))),V)}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[0,0];return this.intersectionWithAxis2D(!0,e,s,null)===-1?i:s[0]}isCurve(){return!0}isDegenerate(e){return n7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){e instanceof il?K(0):this.queryLooseEnvelopeOnInterval(new Ze(0,1),e)}clone(e){const i=new Vc;return this.copyTo(i),i}queryInterval(e,i){if(e===0){if(rn(this))return i===0?Ze.construct(this.getStartX(),this.getEndX()):Ze.construct(this.getStartY(),this.getEndY());let s;const n=this.getSemiAxes();s=i===0?Math.atan2(-n.y*this.m_sinr,n.x*this.m_cosr):Math.atan2(n.y*this.m_cosr,n.x*this.m_sinr);const r=s+Math.PI,o=[0,0];o[0]=Tn(this,s),o[1]=Tn(this,r);const l=i===0?Ze.construct(this.getStartX(),this.getEndX()):Ze.construct(this.getStartY(),this.getEndY()),u=new Y;for(let f=0;f<2;f++){const y=o[f];y>0&&y<1&&(this.queryCoord2D(y,u),l.mergeNeCoordinate(i===0?u.x:u.y))}return l}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=new Ze(0,1);if(s.intersect(e),s.isEmpty())return void i.setEmpty();if(rn(this))return i.setCoords(this.getCoord2D(s.vmin)),void i.mergeNe(this.getCoord2D(s.vmax));const n=this.getCoord2D(s.vmin),r=this.getCoord2D(s.vmax);if(this.m_minorMajorRatio===1&&Math.abs(this.m_sweepAngle)*s.width()<=Ss){let o=Y.lerp(n,r,.5);const l=o.sub(this.m_center);return l.normalize(),o=o.add(l.mul(.5*Y.distance(n,r))),i.setCoords(n),i.mergeNe(r),void i.mergeNe(o)}Tse(this,s,i)}tToLength(e){return rn(this)?e*Y.distance(this.getStartXY(),this.getEndXY()):this.m_minorMajorRatio===1?Math.abs(this.getSweepAngle()*e)*this.m_semiMajorAxis:Vz(this,e)}parametricAngleToT(e){return Tn(this,e)}tToParametricAngle(e){return Xd(this,e)}lengthToT(e){if(rn(this)){const i=Y.distance(this.getStartXY(),this.getEndXY());return i===0?0:e/i}if(this.m_minorMajorRatio===1){const i=Math.abs(this.getSweepAngle())*this.m_semiMajorAxis;return i===0?0:e/i}return dot(this,e)}calculateWeightedAreaCentroid2D(e){if(rn(this)){const y=new Y;return y.setCoords(0,0),y}const i=Cse(this),s=this.getStartXY().sub(this.m_center),n=this.getEndXY().sub(this.m_center),r=this.m_semiMajorAxis,o=this.getSemiMinorAxis(),l=this.m_startAngle+this.m_sweepAngle,u=new Y;u.x=r*o*(r*this.m_cosr*(-Math.sin(l)+Math.sin(this.m_startAngle))+o*(-Math.cos(l)+Math.cos(this.m_startAngle))*this.m_sinr)/3,u.y=r*o*(o*(Math.cos(l)-Math.cos(this.m_startAngle))*this.m_cosr+r*(-Math.sin(l)+Math.sin(this.m_startAngle))*this.m_sinr)/3;const f=n.add(s).mul(n.crossProduct(s)/6);return u.x-=f.x,u.y-=f.y,u.add(this.m_center.sub(e).mul(i))}calculateWeightedCentroid2D(){const e=new Y;if(this.isDegenerate(0))return e.setCoords(0,0),e;if(rn(this))return e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e;let i=this.m_startAngle,s=this.m_startAngle+this.m_sweepAngle;if(s<i){const u=i;i=s,s=u}const n=Math.sin(i),r=Math.sin(s),o=Math.cos(i),l=Math.cos(s);if(this.m_minorMajorRatio===1){const u=this.getSemiMajorAxis(),f=u*u,y=f*(r-n),_=f*(o-l);e.setCoords(y,_)}else{const u=this.getSemiMajorAxis(),f=this.getSemiMinorAxis(),y=u*u,_=f*f,x=u*f,S=y-_,P=S/_,A=S/y,k=Math.sqrt(P),$=Math.sqrt(A),F=.5*x*(Math.asinh(k*r)/k+r*Math.sqrt(1+P*r*r))-.5*x*(Math.asinh(k*n)/k+n*Math.sqrt(1+P*n*n)),G=-.5*x*(Math.asin($*l)/$+l*Math.sqrt(1-A*l*l))- -.5*x*(Math.asin($*o)/$+o*Math.sqrt(1-A*o*o));e.setCoords(F,G)}return e.rotateDirect(this.m_cosr,this.m_sinr),e.assign(e.add(this.m_center.mul(this.calculateLength2D()))),e}isIntersectingPoint(e,i,s){if(s&&(e.isEqualPoint2D(this.getStartXY())||e.isEqualPoint2D(this.getEndXY())))return!1;if(!rn(this)){const o=Y.distance(e,this.m_center),l=this.getSemiAxes();if(o<l.x-i||o>l.y+i)return!1}const n=this.getClosestCoordinate(e,!1),r=new Y;return this.queryCoord2D(n,r),Y.distance(r,e)<=i}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}getTangent(e){if(rn(this))return this.getEndXY().sub(this.getStartXY());{const i=Xd(this,e),s=new Y;return s.setCoords(-this.m_semiMajorAxis*Math.sin(i),this.getSemiMinorAxis()*Math.cos(i)),this.m_rotation&&s.rotateDirect(this.m_cosr,this.m_sinr),s.scale(this.getSweepAngle()),s}}getDerivative(e){return K(0),Y.getNAN()}normalizeAfterEndpointChange(){return!!Tye(this)&&(rn(this)?(UI(this),!1):Iye(this,!1))}projectionBehavior(){return(4&this.m_bits)>>2}setProjectionBehavior(e){this.m_bits=-5&this.m_bits|e<<2}convertToCanonic(e){const i=new Y(e.x,e.y);return i.subThis(this.m_center),i.rotateReverse(this.m_cosr,this.m_sinr),i}convertFromCanonic(e){const i=new Y(e.x,e.y);return i.rotateDirect(this.m_cosr,this.m_sinr),i.addThis(this.m_center),i}canonicToWorldTransformation(e){e.setRotate(this.m_cosr,this.m_sinr),e.shiftCoords(this.m_center.x,this.m_center.y)}queryAttributeAsDbl(e,i,s,n){K(0)}getCurvature(e){return K(0),0}getMonotonicPartParams(e,i){const s=new Array(6);s[0]=0;let n=1;if(this.isDegenerateToLine())s[1]=1,n=2;else{const r=this.getSemiAxes(),o=new Array(4);this.m_rotation?(o[0]=Math.atan2(r.y*this.m_cosr,r.x*this.m_sinr),o[1]=o[0]+Math.PI,o[2]=Math.atan2(-r.y*this.m_sinr,r.x*this.m_cosr),o[3]=o[2]+Math.PI):(o[0]=0,o[1]=Math.PI,o[2]=.5*Math.PI,o[3]=uJe());for(let l=0;l<4;l++){const u=Tn(this,o[l]);u>0&&u<1&&(s[n]=u,n++)}n>2&&oz(s,n),s[n]=1,n++}if(i){e<n&&Je("");for(let r=0;r<n;r++)i[r]=s[r]}return n}calculateLowerLength2D(){const e=Y.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return e;const i=Math.abs(this.m_sweepAngle)*this.getSemiMinorAxis();return Math.max(i,e)}calculateUpperLength2D(){const e=Y.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return e;const i=Math.abs(this.m_sweepAngle)*this.getSemiMajorAxis();return Math.max(i,e)}orientBottomUp(){K(0)}isLine(){return rn(this)}copyIgnoreAttributes(e){e.m_XStart=this.m_XStart,e.m_YStart=this.m_YStart,e.m_XEnd=this.m_XEnd,e.m_YEnd=this.m_YEnd,e.m_center.assign(this.m_center),e.m_semiMajorAxis=this.m_semiMajorAxis,e.m_minorMajorRatio=this.m_minorMajorRatio,e.m_interior.assign(this.m_interior),e.m_rotation=this.m_rotation,e.m_cosr=this.m_cosr,e.m_sinr=this.m_sinr,e.m_sweepAngle=this.m_sweepAngle,e.m_startAngle=this.m_startAngle,e.m_bits=this.m_bits,HI(e)}calculateArea2DHelper(){return Cse(this)}absNorm(){let e=this.getStartXY().norm(1)+this.getEndXY().norm(1);return this.isDegenerateToLine()||(e+=this.m_center.norm(1),e+=this.m_semiMajorAxis),e}queryEnvelopeW(e,i){if(i.setCoords(this.getCoord2D(e.vmin)),i.mergeNe(this.getCoord2D(e.vmax)),rn(this))return;const s=this.getSemiAxes(),n=new Array(8);{const o=Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr),l=o+Math.PI,u=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),f=u+Math.PI;n[0]=Tn(this,o),n[1]=Tn(this,l),n[2]=Tn(this,u),n[3]=Tn(this,f)}{const o=this.m_cosr+this.m_sinr,l=this.m_cosr-this.m_sinr,u=Math.atan2(-s.y*o,s.x*l),f=u+Math.PI,y=Math.atan2(s.y*l,s.x*o),_=y+Math.PI;n[4]=Tn(this,u),n[5]=Tn(this,f),n[6]=Tn(this,y),n[7]=Tn(this,_)}const r=Y.getNAN();for(let o=0;o<8;o++){const l=n[o];e.containsExclusiveCoordinate(l)&&(this.queryCoord2D(l,r),i.mergeNe(r))}}setSegmentFromCoords(e,i){uot(this,e,i)}writeInBufferStream(e,i){const s=new Float64Array(10);return s[0]=this.m_bits,s[1]=this.m_semiMajorAxis,s[2]=this.m_minorMajorRatio,s[3]=this.m_rotation,s[4]=this.m_center.x,s[5]=this.m_center.y,s[6]=this.m_sweepAngle,s[7]=this.m_startAngle,s[8]=this.m_interior.x,s[9]=this.m_interior.y,e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}readFromBufferStream(e,i){const s=new Float64Array(10);e.queryRange(i,s.length,s,!0,1),this.m_bits=s[0],this.m_semiMajorAxis=s[1],this.m_minorMajorRatio=s[2],this.m_rotation=s[3],this.m_center.x=s[4],this.m_center.y=s[5],this.m_sweepAngle=s[6],this.m_startAngle=s[7],this.m_interior.x=s[8],this.m_interior.y=s[9],this.m_cosr=Math.cos(this.m_rotation),this.m_sinr=Math.sin(this.m_rotation),this.m_cachedValues=null}snapControlPoints(e){return!1}needsSnapControlPoints(e){return K(0),!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return K(0),!1}setCoordsForIntersector(e,i,s){wse(this,e,i,s)}getInteriorPoint(){return this.m_interior.clone()}copyToImpl(e){const i=e;i.m_center.assign(this.m_center),i.m_semiMajorAxis=this.m_semiMajorAxis,i.m_minorMajorRatio=this.m_minorMajorRatio,i.m_interior.assign(this.m_interior),i.m_rotation=this.m_rotation,i.m_cosr=this.m_cosr,i.m_sinr=this.m_sinr,i.m_sweepAngle=this.m_sweepAngle,i.m_startAngle=this.m_startAngle,i.m_bits=this.m_bits,YN(i,UN(this))}reverseImpl(){m7(this,!Q2(this)),qz(this),(this.projectionBehavior()!==0||this.getStartXY().equals(this.getEndXY()))&&WS(this)}equalsImpl(e){const i=e;if(this.m_bits!==i.m_bits||this.m_semiMajorAxis!==i.m_semiMajorAxis||this.m_minorMajorRatio!==i.m_minorMajorRatio||!(this.m_center.isEqualPoint2D(i.m_center)||this.m_center.isNAN()&&i.m_center.isNAN())||this.m_rotation!==i.m_rotation||!this.m_interior.equals(i.m_interior))return!1;const s=i.m_sweepAngle;if(this.m_sweepAngle!==s)return!1;const n=i.m_startAngle;return this.m_startAngle===n}equalsImplTol(e,i){const s=e;if(this.m_bits!==s.m_bits)return!1;if(this.m_center.isNAN()&&s.m_center.isNAN())return!0;if(this.m_center.isNAN()!==s.m_center.isNAN()||!this.getSemiAxes().isEqualPoint2D(s.getSemiAxes(),i)||!this.m_center.isEqualPoint2D(s.m_center,i))return!1;const n=Math.abs(S1e(w1e(GI(this.m_rotation-s.m_rotation)))),r=Math.abs(ki()-n),o=Math.min(n,r);if(this.m_semiMajorAxis*Math.abs(o)>i)return!1;const l=this.getCoord2D(.5),u=s.getCoord2D(.5);return!!l.isEqualPoint2D(u,i)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){UI(this),HI(this)}intersect(e,i,s,n,r){return Gv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){if(i.length<2&&Mi(""),rn(this))return new si({start:this.getStartXY(),end:this.getEndXY()}).intersectPoint(e,i,s);{const o=Y.distance(e,this.m_center);if(o>this.m_semiMajorAxis+s||o<this.getSemiMinorAxis()-s)return 0}const n=this.getClosestCoordinate(e,!1),r=Y.getNAN();return this.queryCoord2D(n,r),Y.distance(r,e)<=s?Ms(n,0,1)&&(this.queryCoord2D(n===0?1:0,r),Y.distance(r,e)<=s)?(i&&(i[0]=0,i[1]=1),2):(i&&(i[0]=n),1):0}isIntersecting(e,i,s){return g5(!1,this,e,i,s)!==0}intersect_(e,i,s,n){return K(0),0}endPointModified(){this.m_bits|=8,HI(this)}clearEndPointModified(){UI(this)}}Vc.type=me.enumEllipticArc;class Wt extends pa{constructor(e){e?e.vd?(super({vd:e.vd,bPolygon:!0}),this.m_segmentBufferCTor=Qt):e.copy?(super({vd:e.copy.getDescription(),bPolygon:!0}),this.m_segmentBufferCTor=Qt,e.copy.copyTo(this)):e.move?(super({move:e.move}),this.m_segmentBufferCTor=Qt):(e.envelope,K(0)):(super({bPolygon:!0}),this.m_segmentBufferCTor=Qt)}assignMove(e){return e.copyTo(this),this}assignCopy(e){return e.copyTo(this),this}getBoundary(){return Zh(this)}getExteriorRingCount(){return this.getOGCPolygonCount()}getGeometryType(){return Wt.type}getDimension(){return 2}createInstance(){return new Wt({vd:this.getDescription()})}equals(e,i){return this.equalsBase(e,i)}}Wt.type=me.enumPolygon;class XE extends Rge{constructor(e){if(typeof e=="number")return super(),this.m_factor=e,void(this.m_wkid=0);super(e)}getUnitType(){return 1}convertFromRadians(e){return e/this.getUnitToBaseFactor()}convertToRadians(e){return e*this.getUnitToBaseFactor()}}function Yet(t){return t.getType()===zi.PE_TYPE_LINUNIT?new tC(t):t.getType()===zi.PE_TYPE_ANGUNIT?new XE(t):void Je("peUnit")}function Xet(t){const e=Vye(null);return t.getType()===zi.PE_TYPE_PROJCS||t.getType()===zi.PE_TYPE_GEOGCS?e.reset(t.getUnit()):Je("PE_coord_sys"),e.get()||bt("cannot create units from coord sys"),Yet(e.get())}function Wet(t,e){let i=e,s=null;i||(s=YA(t)?AE():Ho(),i=s);let n=null;switch(t){case me.enumPoint:n=new Ut({vd:i});break;case me.enumLine:n=new si({vd:i});break;case me.enumBezier:n=new Oc({vd:i});break;case me.enumEllipticArc:n=new Vc({vd:i});break;case me.enumRationalBezier2:n=new ba({vd:i});break;case me.enumBezier2:n=new am({vd:i});break;case me.enumEnvelope:n=new lr({vd:i});break;case me.enumMultiPoint:n=new Jn({vd:i});break;case me.enumPolyline:n=new vi({vd:i});break;case me.enumPolygon:n=new Wt({vd:i});break;case me.enumMultipatch:K(0);break;case me.enumGeometryCollection:n=new NE({vd:i});break;default:Je("Geometry.create")}return n}var die=_r;const ae=-1,Rr=1;class Zet{constructor(e){this.m_shape=e}userSort(e,i,s){this.m_shape.sortVerticesSimpleByYHelper(s,e,i)}getValue(e){return this.m_shape.getY(e)}}function Ket(t){return t.parent!==void 0}class WE{constructor(e){Ket(e)?(this.m_parent=e.parent,this.m_geometry=e.geometry,this.m_path=e.path,this.m_vertex=e.vertex,this.m_firstVertex=e.firstVertex,this.m_index=e.selection?0:e.index,this.m_bSkipMultiPoints=e.bSkipMultiPoints,this.m_selection=e.selection,this.m_bOneGeom=e.bOneGeom,this.m_bFirst=!0):(this.m_parent=e.copy.m_parent,this.m_geometry=e.copy.m_geometry,this.m_path=e.copy.m_path,this.m_vertex=e.copy.m_vertex,this.m_index=e.copy.m_index,this.m_bSkipMultiPoints=e.copy.m_bSkipMultiPoints,this.m_firstVertex=e.copy.m_firstVertex,this.m_bFirst=!0,this.m_selection=e.copy.m_selection,this.m_bOneGeom=e.copy.m_bOneGeom)}moveToNextHelper(){for(this.m_path=this.m_parent.getNextPath(this.m_path),this.m_index=0;this.m_geometry!==ae;){for(;this.m_path!==ae;this.m_path=this.m_parent.getNextPath(this.m_path))if(this.m_vertex=this.m_parent.getFirstVertex(this.m_path),this.m_firstVertex=this.m_vertex,this.m_vertex!==ae)return this.m_vertex;if(this.m_bOneGeom)return ae;if(this.m_geometry=this.m_parent.getNextGeometry(this.m_geometry),this.m_geometry===ae)break;this.m_bSkipMultiPoints&&!bi(this.m_parent.getGeometryType(this.m_geometry))||(this.m_path=this.m_parent.getFirstPath(this.m_geometry))}return ae}nextSelection(){for(;this.m_index<this.m_parent.m_selectedVertices.length;){const e=this.m_parent.m_selectedVertices[this.m_index++];if(e!==ae&&(this.m_path=this.m_parent.getPathFromVertex(e),!this.m_bOneGeom||this.m_geometry===this.m_parent.getGeometryFromPath(this.m_path)))return this.m_geometry=this.m_parent.getGeometryFromPath(this.m_path),e}return ae}next(){return this.m_selection?this.nextSelection():this.m_bFirst?(this.m_bFirst=!1,this.m_vertex):this.m_vertex!==ae?(this.m_vertex=this.m_parent.getNextVertex(this.m_vertex),this.m_index++,this.m_vertex!==ae&&this.m_vertex!==this.m_firstVertex?this.m_vertex:this.moveToNextHelper()):ae}currentGeometry(){return this.m_geometry}currentPath(){return K(0),0}static create_(e,i,s,n,r,o,l,u,f){return new WE({parent:e,geometry:i,path:s,vertex:n,firstVertex:r,index:o,bSkipMultiPoints:l,selection:u,bOneGeom:f})}}class Dz{constructor(e){this.parentage=e}equals(e){return this.parentage===e.parentage}}class Bs{setPrevPath(e,i){this.m_pathIndexList.setField(e,1,i)}setNextPath(e,i){this.m_pathIndexList.setField(e,2,i)}setPathFlags(e,i){this.m_pathIndexList.setField(e,6,i)}getPathFlags(e){return this.m_pathIndexList.getField(e,6)}setPathGeometry(e,i){this.m_pathIndexList.setField(e,7,i)}getPathIndex(e){return this.m_pathIndexList.getField(e,0)}setNextGeometry(e,i){this.m_geometryIndexList.setField(e,1,i)}setPrevGeometry(e,i){this.m_geometryIndexList.setField(e,0,i)}getGeometryIndex(e){return this.m_geometryIndexList.getField(e,7)}setFirstPath(e,i){this.m_geometryIndexList.setField(e,3,i)}setLastPath(e,i){this.m_geometryIndexList.setField(e,4,i)}newGeometry(e){const i=this.m_geometryIndexList.newElement();return this.m_geometryIndexList.setField(i,2,e),this.m_geometryIndexList.setField(i,5,0),this.m_geometryIndexList.setField(i,6,0),this.m_geometryIndexList.setField(i,7,this.m_geometryIndexList.elementToIndex(i)),i}freeGeometry(e){this.m_geometryIndexList.deleteElement(e)}newPath(e){const i=this.m_pathIndexList.newElement(),s=this.m_pathIndexList.elementToIndex(i);if(this.m_pathIndexList.setField(i,0,s),this.m_pathIndexList.setField(i,3,0),this.m_pathIndexList.setField(i,6,0),this.setPathGeometry(i,e),s>=this.m_pathAreas.length){const n=Math.trunc(s<16?16:3*s/2);this.m_pathAreas.length=n,this.m_pathLengths.length=n}return this.m_pathAreas[s]=0,this.m_pathLengths[s]=0,this.m_pathCount++,i}freePath(e){this.m_pathIndexList.deleteElement(e),this.m_pathCount--}newVertex(e){const i=this.m_vertexIndexList.newElement(),s=e>=0?e:this.m_vertexIndexList.elementToIndex(i);if(this.m_vertexIndexList.setField(i,0,s),e<0){if(s>=this.m_vertices.getPointCount()){const n=Math.trunc(s<16?16:3*s/2);this.m_vertices.reserveRounded(n),this.m_vertices.resizeNoInit(n),this.m_segments!==null&&(this.m_segments.length=n),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0)}this.m_segments&&(this.m_segments[s]=null)}return this.m_pointCount++,i}freeVertex(e){this.unselect(e);const i=this.getVertexIndex(e);this.m_vertexIndexList.deleteElement(e),this.m_pointCount--;for(let s=0,n=this.m_indices.length;s<n;s++){if(s===this.m_selectionIndex)continue;const r=this.m_indices[s];r!==null&&r.size()>i&&r.write(i,-1)}this.m_weights&&this.m_weights.size()>i&&this.m_weights.write(i,1),this.m_ranks&&this.m_ranks.size()>i&&this.m_ranks.write(i,Rr),this.m_segmentWeights&&this.m_segmentWeights.size()>i&&this.m_segmentWeights.write(i,1),this.m_segmentRanks&&this.m_segmentRanks.size()>i&&this.m_segmentRanks.write(i,Rr),this.m_segments&&this.setSegmentToIndex(i,null)}insertVertex_(e,i,s,n){this.m_bHasForceSetEnvelope=!1;const r=i!==ae?this.getPrevVertex(i):this.getLastVertex(e),o=r!==ae?this.getNextVertex(r):ae,l=this.newVertex(s===null?this.m_pointCount:-1),u=this.getVertexIndex(l);s!==null&&this.m_vertices.setPointByVal(u,s),this.setPathToVertex(l,e),this.setNextVertex(l,o),this.setPrevVertex(l,r),o!==ae&&this.setPrevVertex(o,l),r!==ae&&this.setNextVertex(r,l);const f=this.isClosedPath(e),y=this.getFirstVertex(e);i===ae&&this.setLastVertex(e,l),i===y&&(f&&n&&y!==ae||this.setFirstVertex(e,l)),f&&o===ae&&(this.setNextVertex(l,l),this.setPrevVertex(l,l)),this.setPathSize(e,this.getPathSize(e)+1);const _=this.getGeometryFromPath(e);return this.setGeometryVertexCount(_,this.getPointCount(_)+1),l}getHelperPoint(){return this.m_helperPoint||(this.m_helperPoint=new Ut({vd:this.m_vertices.getDescription()}),this.m_helperPoint.setXYCoords(0,0)),this.m_helperPoint}addMultiPath_(e){return K(0),0}addMultiPoint(e,i){const s=this.createGeometry(e.getGeometryType(),e.getDescription());return this.appendMultiPoint(s,e,i),s}addPoint_(e,i){const s=this.createGeometry(me.enumMultiPoint,e.getDescription());return this.appendPoint(s,e,i),s}appendMultiPath_(e,i){if(i.isEmpty())return;const s=i.getImpl();this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+s.getPointCount()),this.m_verticesMp.addPoints(i,0,s.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const n=this.m_segments!==null||s.getSegmentFlagsStreamRef()!==null;this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+s.getPointCount()),this.m_pathIndexList.setCapacity(this.m_pathIndexList.size()+s.getPathCount());for(let r=0,o=s.getPathCount();r<o;r++){if(s.getPathSize(r)===0)continue;const l=this.insertPath(e,ae);this.setClosedPath(l,s.isClosedPath(r));for(let u=s.getPathStart(r),f=s.getPathEnd(r);u<f;u++){const y=this.insertVertex_(l,ae,null,!1);if(n){const _=this.getVertexIndex(y);if(1&s.getSegmentFlags(u))this.setSegmentToIndex(_,null);else{const x=new Qt;s.querySegment(u,x,!0),this.setSegmentToIndex(_,x.releaseSegment())}}}s.isStrongPathStart(r)&&this.setStrongPathStart(l,!0),s.isStrongPathEnd(r)&&this.setStrongPathEnd(l,!0)}}addMultiPath(e,i){const s=this.createGeometry(e.getGeometryType(),e.getDescription());return e.getGeometryType()===me.enumPolygon&&this.setFillRule(s,e.getFillRule()),this.appendMultiPath(s,e,i),s}appendMultiPathPolyline(e,i,s){K(0)}appendMultiPathPolygon(e,i,s){var B;const n=i.getImpl(),r=this.m_segments!==null||n.getSegmentFlagsStreamRef()!==null,o=xe.constructEmpty();i.queryEnvelope(o),K(s.isIntersecting(o)&&!s.containsEnvelope(o));let l=xe.construct(Number.NEGATIVE_INFINITY,s.ymin,Number.POSITIVE_INFINITY,s.ymax),u=xe.construct(s.xmin,Number.NEGATIVE_INFINITY,s.xmax,Number.POSITIVE_INFINITY);const f=n.getAccelerators();if(f&&f.getQuadTree()){const W=f.getQuadTree(),J=W.getIntersectionCount(l,0,0);J>W.getIntersectionCount(u,0,J+1)&&(u=St(l,l=u))}else l.height()>u.width()&&(u=St(l,l=u));const y=[],_=n.queryLimitedSegmentIterator(l);let x=-1,S=-100,P=-1,A=0,k=-1,$=-1,F=ae,G=!0,V=_.nextSegment();if(V!==null)for(;;V=_.nextSegment()){let W=V===null;const J=V!==null?_.getPathIndex():x,re=V!==null?_.getStartPointIndex():S;if(W||(J===x?S+1===re?A++:W=!0:(W=x>=0,x<0&&(x=J,P=n.getSegmentCountPath(x),k=re,F=ae,A=1))),W){if(!(y.length===0&&P===A)){y.length!==0&&y[0].first===k||(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(i,k,k+1),$===-1&&($=k),F===ae&&(F=this.insertPath(e,ae),this.setClosedPath(F,!0)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.insertVertex_(F,ae,null,!1));for(const{first:se,second:oe}of y){$===-1&&($=se);let pe=-1,ce=-1;const ue=se+oe-1;if(oe===P){const ne=ue+1;ce=ne-se,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+ce),this.m_verticesMp.addPoints(i,se,ne),pe=ue,K(y.length===1)}else if(ue+1<n.getPathEnd(x)){const ne=ue+2;ce=ne-se,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+ce),this.m_verticesMp.addPoints(i,se,ne),pe=ue}else{const ne=n.getPathStart(x),de=ne!==$?1:0,Se=ue+1;ce=Se-se+de,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+(Se-se)+de),this.m_verticesMp.addPoints(i,se,Se),pe=ue,de>0&&((B=this.m_verticesMp)==null||B.addPoints(i,ne,ne+1))}this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),F===ae&&(F=this.insertPath(e,ae),this.setClosedPath(F,!0));for(let ne=0,de=se;ne<ce;ne++,de++){const Se=this.insertVertex_(F,ae,null,!1);if(r){const Pe=this.getVertexIndex(Se);if(1&n.getSegmentFlags(de)||de>pe)this.setSegmentToIndex(Pe,null);else{const Re=new Qt;n.getSegmentBuffer(de,Re,!0),this.setSegmentToIndex(Pe,Re.releaseSegment())}}}}if(y.length===0||y.at(-1).first+y.at(-1).second!==k+A){let se=k+A;se===i.getPathEnd(x)&&(se=i.getPathStart(x)),$!==se&&(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(i,se,se+1),this.insertVertex_(F,ae,null,!1))}}y.length=0,G=!0,J!==x&&(x=J,P=n.getSegmentCountPath(x),F=ae,$=-1),k=re,A=1}if(!V)break;{const se=xe.constructEmpty();V.queryLooseEnvelope(se),u.isIntersecting(se)?(G?y.push(rr(re,1)):y.at(-1).second++,G=!1):G=!0}S=re}}appendMultiPath(e,i,s){if(s===void 0)return void this.appendMultiPath_(e,i);if(i.isEmpty())return;const n=i.getGeometryType()===me.enumPolygon,r=xe.constructEmpty();i.queryEnvelope(r),s.isIntersecting(r)&&(!s.containsEnvelope(r)&&i.getPointCount()>10?n?this.appendMultiPathPolygon(e,i,s):this.appendMultiPathPolyline(e,i,s):this.appendMultiPath_(e,i))}appendPoint(e,i,s){if(i.isEmpty()||s!==void 0&&!s.contains(i.getXY()))return;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.add(i),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+1);const n=this.insertPath(e,ae);this.insertVertex_(n,ae,null,!1)}appendMultiPoint_(e,i){this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+i.getPointCount()),this.m_verticesMp.addPoints(i,0,i.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+i.getPointCount());const s=this.insertPath(e,ae);for(let n=0,r=i.getPointCount();n<r;n++)this.insertVertex_(s,ae,null,!1)}appendMultiPoint(e,i,s){if(s===void 0)return void this.appendMultiPoint_(e,i);const n=i.getAttributeStreamRef(0);let r=0;for(let y=0,_=i.getPointCount();y<_;y++){const x=n.readPoint2D(2*y);s.contains(x)&&r++}this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+r);let o=-1,l=-1,u=0;for(let y=0,_=i.getPointCount();y<_;y++){const x=n.readPoint2D(2*y);s.contains(x)?(o===-1&&(o=y,l=y),l++):o>=0&&(this.m_verticesMp.addPoints(i,o,l-o),o=-1,u++)}if(o>0&&(this.m_verticesMp.addPoints(i,o,l-o),u++),!u)return;this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+r);const f=this.insertPath(e,ae);for(let y=0,_=i.getPointCount();y<_;y++){const x=n.readPoint2D(2*y);s.contains(x)&&this.insertVertex_(f,ae,null,!1)}}splitSegmentForward(e,i,s,n,r){const o=this.getNextVertex(e);o===ae&&Je("Edit_shape.split_segment_forward_");const l=this.getHelperPoint(),u=this.getPathFromVertex(e);let f=e;const y=this.hasSegmentParentage();for(let _=0,x=i.getResultSegmentCount(s);_<x;_++){const S=this.getVertexIndex(f),P=this.getNextVertex(f),A=i.getResultSegment(s,_);let k=null;if(A.getGeometryType()!==me.enumLine&&(k=A.clone(),k.dropAllAttributes()),_===0&&(A.queryStart(l),this.setSegmentToIndex(S,null),this.setPointEx(f,l,i.getResultSegmentStartPointRank(s,_),i.getResultSegmentStartPointWeight(s,_),r)),this.setSegmentRank(f,i.getResultSegmentInteriorRank(s,_)),this.setSegmentWeight(f,i.getResultSegmentInteriorWeight(s,_)),y){const $=i.getResultSegmentSegmentParentage(s,_),F=i.getResultSegmentStartPointIsBreak(s,_);this.setSegmentParentageAndBreak(f,$,F)}if(A.queryEnd(l),_<x-1){this.setSegmentToIndex(S,k);const $=this.insertVertex(u,P,l);this.setWeight($,i.getResultSegmentEndPointWeight(s,_)),this.setRank($,i.getResultSegmentEndPointRank(s,_)),this.select($),f=$}else{this.setPointEx(o,l,i.getResultSegmentEndPointRank(s,_),i.getResultSegmentEndPointWeight(s,_),r);const $=i.getResultSegmentEndPointIsBreak(s,_);this.setSegmentParentageBreakVertex(o,$),this.setSegmentToIndex(S,k)}}}splitSegmentBackward(e,i,s,n,r){const o=this.getNextVertex(e);o===ae&&Je("Edit_shape.split_segment_backward_");const l=this.getHelperPoint(),u=this.getPathFromVertex(e);let f=e;const y=this.hasSegmentParentage();for(let _=0,x=i.getResultSegmentCount(s);_<x;_++){const S=x-_-1,P=this.getVertexIndex(f),A=this.getNextVertex(f),k=i.getResultSegment(s,S);let $=null;if(k.getGeometryType()!==me.enumLine&&($=k.clone(),$.reverse(),$.dropAllAttributes()),_===0&&(k.queryEnd(l),this.setSegmentToIndex(P,null),this.setPointEx(f,l,i.getResultSegmentEndPointRank(s,S),i.getResultSegmentEndPointWeight(s,S),r),this.setSegmentParentageAndBreak(f,i.getResultSegmentSegmentParentage(s,S),i.getResultSegmentEndPointIsBreak(s,S))),k.getGeometryType()===me.enumLine?this.setSegmentToIndex(P,null):this.setSegmentToIndex(P,$),this.setSegmentRank(f,i.getResultSegmentInteriorRank(s,S)),this.setSegmentWeight(f,i.getResultSegmentInteriorWeight(s,S)),k.queryStart(l),_<x-1){const F=this.insertVertex(u,A,l);this.setWeight(F,i.getResultSegmentStartPointWeight(s,S)),this.setRank(F,i.getResultSegmentStartPointRank(s,S)),this.select(F),f=F,y&&this.setSegmentParentageAndBreak(F,i.getResultSegmentSegmentParentage(s,S),i.getResultSegmentEndPointIsBreak(s,S))}else this.setPointEx(o,l,i.getResultSegmentStartPointRank(s,S),i.getResultSegmentStartPointWeight(s,S),r)}}selected_(e){return K(0),!1}allocateIndex(e=!0){if(this.m_deletedIndices.length){const i=this.m_deletedIndices.pop();return e&&i.setRange(-1,0,i.size()),i}return e?Ga(0,-1):Ga(0)}recycleUserIndex(e){this.m_deletedIndices.push(e)}allocatePathIndex(){if(this.m_deletedPathIndices.length){const e=this.m_deletedPathIndices.at(-1);return this.m_deletedPathIndices.pop(),e}return Ga(0)}recyclePathUserIndex(e){this.m_deletedPathIndices.push(e)}peelALoop_(e,i,s){const n=this.getNextVertex(e),r=this.getNextVertex(i),o=this.getVertexIndex(e),l=this.getVertexIndex(i);if(this.setNextVertex(e,r),this.setPrevVertex(r,e),this.setNextVertex(i,n),this.setPrevVertex(n,i),this.m_segments){const u=this.getSegmentFromIndex(o),f=this.getSegmentFromIndex(l);this.setSegmentToIndex(l,null),this.setSegmentToIndex(o,f),this.setSegmentToIndex(l,u)}if(this.hasSegmentParentage()){let u=this.getSegmentParentage(i),f=this.getSegmentParentage(e);u===-1&&f===-1||(f=St(u,u=f),this.setSegmentParentageAndBreak(e,f),this.setSegmentParentageAndBreak(i,u))}if(s){const u=this.getPathFromVertex(e),f=this.getGeometryFromPath(u),y=[!1],_=this.insertClosedPath(f,ae,n,this.getFirstVertex(u),y);y[0]&&this.setFirstVertex(u,r);let x=this.getPathSize(u);return x-=this.getPathSize(_),this.setPathSize(u,x),_}return ae}sortVerticesSimpleByYHelper(e,i,s){e.sort(i,s,(n,r)=>{let o=this.compareVerticesSimpleY(n,r);if(o===0){const l=this.getPathInternalIndexFromVertex(n),u=this.getPathInternalIndexFromVertex(r);o=l<u?-1:l>u?1:0}return o})}sortVerticesSimpleByYHelper3D(e,i,s){K(0)}constructor(){this.m_verticesMp=null,this.m_vertices=null,this.m_xyStream=null,this.m_vertexDescription=null,this.m_segments=null,this.m_weights=null,this.m_ranks=null,this.m_segmentWeights=null,this.m_segmentRanks=null,this.m_indices=[],this.m_deletedIndices=[],this.m_pathAreas=[],this.m_pathLengths=[],this.m_pathindices=[],this.m_deletedPathIndices=[],this.m_geometryIndices=[],this.m_selectedVertices=[],this.m_helperPoint=null,this.m_forceSetEnvelope=il.constructEmpty(),this.m_bHasForceSetEnvelope=!1,this.m_workPoint2D=Y.getNAN(),this.m_workPoint2_2D=Y.getNAN(),this.m_curveStitcher=null,this.m_pathCount=0,this.m_pointCount=0,this.m_firstGeometry=ae,this.m_lastGeometry=ae,this.m_vertexIndexList=new Yt(5),this.m_pathIndexList=new Yt(8),this.m_geometryIndexList=new Yt(8),this.m_bHasAttributes=!1,this.m_selectedCount=0,this.m_selectionIndex=-1,this.m_selection=!1,this.m_bucketSort=new ad,this.m_bHasForceSetEnvelope=!1,this.m_segmentParentageIndex=-1}getTotalPointCount(){return this.m_pointCount}getEnvelope2D(e){if(this.m_bHasForceSetEnvelope)return new xe(this.m_forceSetEnvelope.xmin,this.m_forceSetEnvelope.ymin,this.m_forceSetEnvelope.xmax,this.m_forceSetEnvelope.ymax);const i=this.hasCurves(),s=xe.constructEmpty(),n=this.queryVertexIterator();let r=!0;for(let o=n.next();o!==ae;o=n.next()){if(r?s.merge(this.getXY(o)):s.mergeNe(this.getXY(o)),i){const l=this.getSegment(o);if(l!==null){const u=xe.constructEmpty();l.queryLooseEnvelope(u),s.mergeEnvelope2D(u)}}r=!1}return s}getEnvelope3D(e){return K(0),il.constructEmpty()}forceSetEnvelope2D(e){this.m_bHasForceSetEnvelope=!0,this.m_forceSetEnvelope.setCoords(e.xmin,e.ymin,0,e.xmax,e.ymax,0)}forceSetEnvelope3D(e){K(0)}forgetForceSetEnvelope2D(){K(0)}getGeometryCount(){return this.m_geometryIndexList.size()}addGeometry(e,i){const s=e.getGeometryType();if(bi(s))return this.addMultiPath(e,i);if(s===me.enumMultiPoint)return this.addMultiPoint(e,i);if(s===me.enumPoint)return this.addPoint_(e,i);if(s===me.enumEnvelope){const n=new Wt;return n.addEnvelope(e,!1),this.addMultiPath(n,i)}Je("")}appendGeometry(e,i){this.mergeVertexDescription(i.getDescription());const s=i.getGeometryType();bi(s)?this.appendMultiPath(e,i):s!==me.enumMultiPoint?Je(""):this.appendMultiPoint(e,i)}assignRankToGeometryVertices(e,i){K(0)}collapseAllGeometriesToFirst(){this.collapseGeometriesToFirst(me.enumUnknown)}collapseGeometriesToFirst(e){this.dbgVerifyVertexCounts();let i=ae,s=-1,n=-1;for(let r=this.getFirstGeometry();r!==ae;)if(e!==me.enumUnknown&&this.getGeometryType(r)!==e)r=this.getNextGeometry(r);else{if(i===ae){i=r,s=this.getPathCount(i),n=this.getPointCount(i),r=this.getNextGeometry(r);continue}for(let f=this.getFirstPath(r);f!==ae;f=this.getNextPath(f))this.setPathGeometry(f,i);s+=this.getPathCount(r),n+=this.getPointCount(r);const o=this.getLastPath(i),l=this.getFirstPath(r);o!==ae?this.setNextPath(o,l):this.setFirstPath(i,l),l!==ae&&(this.setPrevPath(l,o),this.setLastPath(i,this.getLastPath(r))),this.setFirstPath(r,ae),this.setLastPath(r,ae);const u=r;r=this.getNextGeometry(r),this.setGeometryVertexCount(u,0),this.removeGeometry(u)}return i!==ae&&(this.setGeometryVertexCount(i,n),this.setGeometryPathCount(i,s),this.dbgVerifyVertexCounts()),i}setFillRule(e,i){let s=this.m_geometryIndexList.getField(e,2);s&=-134217729,s|=i===1?134217728:0,this.m_geometryIndexList.setField(e,2,s)}getFillRule(e){return 134217728&this.m_geometryIndexList.getField(e,2)?1:0}setGeometryModified(e,i){let s=this.m_geometryIndexList.getField(e,2);!!(67108864&s)!==i&&(s&=-67108865,s|=i?67108864:0,this.m_geometryIndexList.setField(e,2,s))}getGeometryModified(e){return!!(67108864&this.m_geometryIndexList.getField(e,2))}setGeometryModifiedWithVertex(e,i){const s=this.getPathFromVertex(e),n=this.getGeometryFromPath(s);this.setGeometryModified(n,i)}getGeometryModifiedWithVertex(e){return K(0),!0}swapGeometry(e,i){K(0)}addPathFromMultiPath(e,i,s){const n=this.createGeometry(s?me.enumPolygon:me.enumPolyline,e.getDescription()),r=e.getImpl();if(e.getPathSize(i)<2)return n;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+e.getPathSize(i)),this.m_verticesMp.addPoints(e,e.getPathStart(i),r.getPathEnd(i)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const o=this.insertPath(n,ae);this.setClosedPath(o,r.isClosedPath(i)||s);const l=this.m_segments!==null||r.getSegmentFlagsStreamRef()!==null;for(let u=r.getPathStart(i),f=r.getPathEnd(i);u<f;u++){const y=this.insertVertex_(o,ae,null,!1);if(l){const _=this.getVertexIndex(y);if(1&r.getSegmentFlags(u))this.setSegmentToIndex(_,null);else{const x=new Qt;r.querySegment(u,x,!0),this.setSegmentToIndex(_,x.releaseSegment())}}}return r.isStrongPathStart(i)&&this.setStrongPathStart(o,!0),r.isStrongPathEnd(i)&&this.setStrongPathEnd(o,!0),n}getGeometry(e){const i=this.getGeometryType(e),s=Wet(i,this.m_verticesMp.getDescription()),n=this.getPointCount(e);if(n===0)return s;if(bi(i)){const r=s.getImpl(),o=this.getPathCount(e),l=Ga(o+1),u=R0(o+1,0),f=s.getDescription(),y=this.hasCurves();for(let _=0,x=f.getAttributeCount();_<x;_++){const S=f.getSemantics(_),P=die.getComponentCount(S),A=Age(S,n),k=this.m_vertices.getAttributeStreamRef(S);let $=0,F=0,G=0;for(let V=this.getFirstPath(e);V!==ae;V=this.getNextPath(V)){let B=0;this.isClosedPath(V)&&(B|=1),this.isExterior(V)&&(B|=8),this.isStrongPathStart(V)&&(B|=2),this.isStrongPathEnd(V)&&(B|=4),B&&u.setBits(F,B);const W=this.getPathSize(V);if(l.write(F++,G),G+=W,S===0){const J=k,re=A;let se;for(let oe=this.getFirstVertex(V);$<G;oe=this.getNextVertex(oe),$++){const pe=this.getVertexIndex(oe);se=J.readPoint2D(2*pe),re.writePoint2D(2*$,se)}}else for(let J=this.getFirstVertex(V);$<G;J=this.getNextVertex(J),$++){const re=this.getVertexIndex(J);for(let se=0;se<P;se++){const oe=k.readAsDbl(re*P+se);A.writeAsDbl($*P+se,oe)}}}r.setAttributeStreamRef(S,A),l.write(o,n)}if(r.setPathFlagsStreamRef(u),r.setPathStreamRef(l),r.notifyModifiedFlags(65535),y){let _=0,x=0;for(let S=this.getFirstPath(e);S!==ae;S=this.getNextPath(S)){_+=this.getPathSize(S);for(let P=this.getFirstVertex(S);x<_;P=this.getNextVertex(P)){const A=this.getSegment(P);A!==null&&A.isCurve()&&r.replaceSegment(x,A,!0),x++}}}}else if(i===me.enumMultiPoint){const r=s.getImpl(),o=s.getDescription();r.reserve(n),r.resizeNoInit(n);for(let l=0,u=o.getAttributeCount();l<u;l++){const f=o.getSemantics(l),y=die.getComponentCount(f),_=r.getAttributeStreamRef(f),x=this.m_vertices.getAttributeStreamRef(f);let S=0;const P=this.getFirstPath(e),A=this.getPathSize(P);for(let k=this.getFirstVertex(P);S<A;k=this.getNextVertex(k),S++){const $=this.getVertexIndex(k);for(let F=0;F<y;F++){const G=x.readAsDbl($*y+F);_.writeAsDbl(S*y+F,G)}}r.setAttributeStreamRef(f,_)}r.notifyModifiedFlags(65535)}else K(0);return s}queryPointGeometryOnly(e,i){this.getGeometryType(e)!==me.enumMultiPoint&&Je("get_point_geometry_only");const s=this.getPointCount(e);if(s>1&&Je("get_point_geometry_only"),s===0)return i.assignVertexDescription(this.m_vertexDescription),void i.setEmpty();const n=this.getFirstPath(e),r=this.getFirstVertex(n);this.queryPoint(r,i)}removeGeometry(e){for(let n=this.getFirstPath(e);n!==ae;n=this.removePath(n));const i=this.getPrevGeometry(e),s=this.getNextGeometry(e);return i!==ae?this.setNextGeometry(i,s):this.m_firstGeometry=s,s!==ae?this.setPrevGeometry(s,i):this.m_lastGeometry=i,this.freeGeometry(e),s}createGeometry(e,i){i===void 0&&(i=Ho());const s=this.newGeometry(e);return this.m_vertices||(this.m_verticesMp=new Jn({vd:i}),this.m_vertices=this.m_verticesMp.getImpl()),this.mergeVertexDescription(i),this.m_firstGeometry===ae?(this.m_firstGeometry=s,this.m_lastGeometry=s):(this.setPrevGeometry(s,this.m_lastGeometry),this.setNextGeometry(this.m_lastGeometry,s),this.m_lastGeometry=s),s}getFirstGeometry(){return this.m_firstGeometry}getLastGeometry(){return this.m_lastGeometry}getNextGeometry(e){return this.m_geometryIndexList.getField(e,1)}getPrevGeometry(e){return this.m_geometryIndexList.getField(e,0)}getGeometryType(e){return 16777215&this.m_geometryIndexList.getField(e,2)}setGeometryUserIndex(e,i,s){const n=this.m_geometryIndices[i],r=this.getGeometryIndex(e);r>=n.size()&&n.resize(Math.max(1.25*r,16),-1),n.write(r,s)}getGeometryUserIndex(e,i){const s=this.getGeometryIndex(e),n=this.m_geometryIndices[i];return s<n.size()?n.read(s):-1}createGeometryUserIndex(){for(let i=0;i<this.m_geometryIndices.length;i++)if(this.m_geometryIndices[i]===null)return this.m_geometryIndices[i]=Ga(0),i;this.m_geometryIndices.push(Ga(0));const e=this.m_geometryIndices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}removeGeometryUserIndex(e){for(this.m_geometryIndices[e]=null;this.m_geometryIndices.length>0&&this.m_geometryIndices.at(-1)===null;)this.m_geometryIndices.pop()}getFirstPath(e){return this.m_geometryIndexList.getField(e,3)}getLastPath(e){return this.m_geometryIndexList.getField(e,4)}hasPointFeatures(){for(let e=this.getFirstGeometry();e!==ae;e=this.getNextGeometry(e))if(!bi(this.getGeometryType(e)))return!0;return!1}getPointCount(e){return this.m_geometryIndexList.getField(e,5)}getPathCount(e){return this.m_geometryIndexList.getField(e,6)}filterClosePoints(e,i,s,n,r){const o=e*e;let l=0;const u=this.hasCurves(),f=this.hasSegmentParentage();for(let y=r===ae?this.getFirstGeometry():r;y!==ae;y=r===ae?this.getNextGeometry(y):ae){const _=this.getGeometryType(y);if(!bi(_)||s&&_!==me.enumPolygon)continue;const x=this.getGeometryType(y)===me.enumPolygon;let S=this.getGeometryModified(y);for(let P=this.getFirstPath(y);P!==ae;){let A=0;for(let G=this.getFirstVertex(P);A<Math.trunc(this.getPathSize(P)/2);){const V=this.getNextVertex(G);if(V===ae)break;const B=this.getXY(G),W=this.getXY(V);let J=Y.sqrDistance(B,W),re=!0;do if(J<=o){if(u){const se=this.getSegment(G);if(se!==null){const oe=se.calculateLength2D();if(J=oe*oe,J>o)break}}if(J===0?l===0&&(l=-1):l=1,V!==this.getLastVertex(P)){const se=f&&(this.getSegmentParentageBreakVertex(G)||this.getSegmentParentageBreakVertex(V));if(this.transferAllDataToTheVertex(V,G),this.removeVertex(V,!1),n&&!S&&(this.setGeometryModified(y,!0),S=!0),f&&G!==V){this.setSegmentParentageBreakVertex(G,se);const oe=this.getNextVertex(G);K(oe!==ae),this.isDiscontinuousSegmentParentage(oe)&&this.setSegmentParentageBreakVertex(oe,!0)}}re=!1}while(!1);re&&(G=this.getNextVertex(G)),A++}let k=this.getFirstVertex(P);for(let G=this.isClosedPath(P)?k:this.getLastVertex(P);this.getPathSize(P)>0;){const V=this.getPrevVertex(G);if(V===ae)break;{const B=this.getXY(V),W=this.getXY(G);let J=Y.sqrDistance(B,W),re=!0;do if(J<=o){if(u){const oe=this.getSegment(V);if(oe!==null){const pe=oe.calculateLength2D();if(J=pe*pe,J>o)break}}J===0?l===0&&(l=-1):l=1;const se=f&&(this.getSegmentParentageBreakVertex(G)||this.getSegmentParentageBreakVertex(V));this.removeVertex(V,!0),n&&!S&&(this.setGeometryModified(y,!0),S=!0),f&&V!==G&&(se||this.isDiscontinuousSegmentParentage(G))&&this.setSegmentParentageBreakVertex(G,!0),k===V&&(k=this.getFirstVertex(P)),re=!1}while(!1);if(re&&(G=this.getPrevVertex(G),G===k))break}}const $=this.getPathSize(P);let F=i&&$<(x?3:2);F&&x&&$===2&&u&&(F=!this.pathHasCurves(P)),F?(P=this.removePath(P),l===0&&(l=-1),n&&!S&&(this.setGeometryModified(y,!0),S=!0)):P=this.getNextPath(P)}}return l}filterClosePoints3D(e,i,s,n,r,o){return K(0),0}hasDegenerateSegments(e){for(let i=this.getFirstGeometry();i!==ae;i=this.getNextGeometry(i))if(bi(this.getGeometryType(i)))for(let s=this.getFirstPath(i);s!==ae;){const n=this.getPathSize(s);if(n===0)return!0;let r=this.getFirstVertex(s);for(let o=0;o<n;o++){const l=this.getNextVertex(r);if(l===ae)break;const u=this.getVertexIndex(r),f=this.getSegmentFromIndex(u);let y=0;if(f!==null){if(y=f.calculateLowerLength2D(),y<=e&&(y=f.calculateUpperLength2D(),y<=e||(y=f.calculateLength2D(),y<=e)))return!0}else{const _=this.getVertexIndex(l);if(y=this.m_vertices.getShortestDistance(u,_),y<=e)return!0}r=l}s=this.getNextPath(s)}return!1}hasDegenerateSegments3D(e,i){return K(0),!1}transferAllDataToTheVertex(e,i){const s=this.getVertexIndex(e),n=this.getVertexIndex(i);if(this.m_weights){const o=this.getWeightWithIndex(s);this.setWeightWithIndex(n,o)}if(this.m_ranks){const o=this.getRankWithIndex(s);this.setRankWithIndex(n,o)}if(this.m_segmentWeights){const o=this.getSegmentWeightWithIndex(s);this.setSegmentWeightWithIndex(n,o)}if(this.m_segmentRanks){const o=this.getSegmentRankWithIndex(s);this.setSegmentRankWithIndex(n,o)}for(let o=0,l=this.m_indices.length;o<l;o++)if(o!==this.m_selectionIndex&&this.m_indices[o]!==null){const u=this.getUserIndex(e,o);u!==-1&&this.setUserIndex(i,o,u)}const r=this.selected(e);r!==this.selected(i)&&(r?this.select(i):this.unselect(i))}splitSegmentAxisAware(e,i,s,n,r){let o=0;const l=this.getNextVertex(e);l===ae&&Je("");const u=this.getVertexIndex(e),f=this.getVertexIndex(l),y=this.getSegmentFromIndex(u);let _=this.m_vertices.getShortestDistance(u,f);const x=this.getPathFromVertex(e),S=this.m_bHasAttributes;S&&y&&(_=y.calculateLength2D());const P=this.getSegmentParentage(e),A=this.getHelperPoint();if(y){let k=0,$=0,F=ae;for(let G=0;G<s;G++){const V=i[G];if(k<V&&V<1){const B=y.cut(k,V);if(n!==null&&(G>0&&B.setStartXY(n[G-1]),B.setEndXY(n[G]),B.normalizeAfterEndpointChange(),$=G),S){const re=_>0?y.calculateSubLengthFromStart(V)/_:0;this.m_vertices.interpolateTwoVertices(u,f,re,A)}A.setXY(B.getEndXY()),F=this.insertVertex(x,l,A),o++;const W=this.getPrevVertex(F),J=this.getVertexIndex(W);this.setSegmentToIndex(J,B),P!==-1&&this.setSegmentParentageAndBreak(F,P,!1),k=V}}if(F!==ae){const G=y.cut(k,1);n!==null&&(G.setStartXY(n[$]),G.normalizeAfterEndpointChange());const V=this.getVertexIndex(F);this.setSegmentToIndex(V,G)}}else{let k=0;for(let $=0;$<s;$++){const F=i[$];if(k<F&&F<1){this.m_vertices.interpolateTwoVertices(u,f,F,A);const G=this.insertVertex(x,l,A);o++,P!==-1&&this.setSegmentParentageAndBreak(G,P,!1)}k=F}}return o}splitSegment(e,i,s,n=null){return this.splitSegmentAxisAware(e,i,s,n,-1)}snapControlPoints(e,i,s){return K(0),!1}snapControlPointsOnSelection(e){if(!this.hasCurves())return!1;let i=0;const s=this.queryVertexIteratorOnSelection();for(let n=s.next();n!==ae;n=s.next()){const r=this.getVertexIndex(n),o=this.getSegmentFromIndex(r);o&&(i|=o.snapControlPoints(e)?1:0)}return i!==0}calculateSubLength2D(e,i,s){return K(0),0}setPoint(e,i,s){if(this.setPointOnly(e,i),this.m_segments!==null){const n=this.getVertexIndex(e),r=this.getSegmentFromIndex(n);r!==null&&(r.setStartXY(i.getXY()),r.normalizeAfterEndpointChange(),s&&r.ensureXYMonotone());const o=this.getPrevVertex(e);if(o!==ae){const l=this.getVertexIndex(o),u=this.getSegmentFromIndex(l);u!==null&&(u.setEndXY(i.getXY()),u.normalizeAfterEndpointChange(),s&&u.ensureXYMonotone())}}}setPointEx(e,i,s,n,r){this.setPoint(e,i,r);const o=this.getVertexIndex(e);this.setWeightWithIndex(o,n),this.setRankWithIndex(o,s)}setPointOnly(e,i){const s=this.getVertexIndex(e);this.m_vertices.setPointByVal(s,i)}setPointOnlyEx(e,i,s,n){K(0)}queryPoint(e,i){const s=this.getVertexIndex(e);this.m_vertices.getPointByVal(s,i)}setXY(e,i){this.setXYCoords(e,i.x,i.y)}setXYCoords(e,i,s){var r;const n=this.getVertexIndex(e);if((r=this.m_vertices)==null||r.setXYCoords(n,i,s),this.m_segments!==null){const o=this.getSegmentFromIndex(n);o!==null&&(o.setStartXYCoords(i,s),o.normalizeAfterEndpointChange());const l=this.getPrevVertex(e);if(l!==ae){const u=this.getVertexIndex(l),f=this.getSegmentFromIndex(u);f!=null&&(f.setEndXYCoords(i,s),f.normalizeAfterEndpointChange())}}}setXYMonotonic(e,i,s){const n=this.getVertexIndex(e);if(this.m_vertices.setXYCoords(n,i,s),this.m_segments!==null){const r=this.getSegmentFromIndex(n);if(r!==null){const l=r.getEndXY();r.setCoordsForIntersector(new Y(i,s),l,!1),r.ensureXYMonotone()}const o=this.getPrevVertex(e);if(o!==ae){const l=this.getVertexIndex(o),u=this.getSegmentFromIndex(l);if(u!==null){const f=u.getStartXY();u.setCoordsForIntersector(f,new Y(i,s),!1),u.ensureXYMonotone()}}}}setXYMonotonicPoint2D(e,i){this.setXYMonotonic(e,i.x,i.y)}queryXY(e,i){const s=this.getVertexIndex(e);return this.m_vertices.queryXY(s,i)}getXY(e){const i=this.getVertexIndex(e);return this.m_vertices.getXY(i)}getXYWithIndex(e){return this.m_xyStream.readPoint2D(2*e)}static setSegDefault(e,i,s){K(0)}setXYZ(e,i,s){K(0)}setXYZCoords(e,i,s,n){K(0)}queryXYZ(e,i){K(0)}getXYZ(e){return K(0),ii.getNAN()}getXYZWithIndex(e){return K(0),ii.getNAN()}mergeVertexDescription(e){this.m_verticesMp.mergeVertexDescription(e),this.m_vertexDescription=this.m_verticesMp.getDescription(),this.m_bHasAttributes=this.m_vertexDescription.getAttributeCount()>1}addAttribute(e){K(0)}getAttributeAsDbl(e,i,s){return this.m_vertices.getAttributeAsDbl(e,this.getVertexIndex(i),s)}queryAttributeAsDbl(e,i,s,n){K(0)}setAttribute(e,i,s,n){K(0)}setAttributeInt(e,i,s,n){K(0)}getVertexDescription(){return this.m_vertexDescription}getMinPathVertexY(e){return K(0),0}getVertexIndex(e){return this.m_vertexIndexList.getField(e,0)}getY(e){const i=this.getVertexIndex(e);return this.m_vertices.queryXY(i,this.m_workPoint2D),this.m_workPoint2D.y}getX(e){return this.getXY(e).x}isEqualXY(e,i){return this.queryXY(e,this.m_workPoint2D),this.queryXY(i,this.m_workPoint2_2D),this.m_workPoint2D.isEqualPoint2D(this.m_workPoint2_2D)}isEqualXYPoint2D(e,i){return this.queryXY(e,this.m_workPoint2D),this.m_workPoint2D.isEqualPoint2D(i)}isEqualXYZPoint3D(e,i){return K(0),!1}setWeight(e,i){i<1&&(i=1);const s=i===1;if(this.m_weights==null){if(s)return;this.m_weights=Ny(this.m_vertices.getPointCount(),1)}const n=this.getVertexIndex(e);if(n>=this.m_weights.size()){if(s)return;this.m_weights.resize(n+1,1)}this.m_weights.write(n,i)}setWeightWithIndex(e,i){i<1&&(i=1);const s=i===1;if(this.m_weights===null){if(s)return;this.m_weights=Ny(this.m_vertices.getPointCount(),1)}if(e>=this.m_weights.size()){if(s)return;this.m_weights.resize(e+1,1)}this.m_weights.write(e,i)}getWeight(e){if(this.m_weights===null)return 1;const i=this.getVertexIndex(e);return i>=this.m_weights.size()?1:this.m_weights.read(i)}getWeightWithIndex(e){return this.m_weights===null||e>=this.m_weights.size()?1:this.m_weights.read(e)}getRank(e){if(this.m_ranks===null)return Rr;const i=this.getVertexIndex(e);return i>=this.m_ranks.size()?Rr:this.m_ranks.read(i)}getRankWithIndex(e){return this.m_ranks===null||e>=this.m_ranks.size()?Rr:this.m_ranks.read(e)}setRank(e,i){i<Rr&&(i=Rr);const s=i===Rr;if(this.m_ranks===null){if(s)return;this.m_ranks=Ga(this.m_vertices.getPointCount(),Rr)}const n=this.getVertexIndex(e);if(n>=this.m_ranks.size()){if(s)return;this.m_ranks.resize(n+1,Rr)}this.m_ranks.write(n,i)}setRankWithIndex(e,i){i<Rr&&(i=Rr);const s=i===Rr;if(this.m_ranks===null){if(s)return;this.m_ranks=Ga(this.m_vertices.getPointCount(),Rr)}if(e>=this.m_ranks.size()){if(s)return;this.m_ranks.resize(e+1,Rr)}this.m_ranks.write(e,i)}setSegmentWeight(e,i){i<1&&(i=1);const s=i===1;if(this.m_segmentWeights===null){if(s)return;this.m_segmentWeights=Ny(this.m_vertices.getPointCount(),1)}const n=this.getVertexIndex(e);if(n>=this.m_segmentWeights.size()){if(s)return;this.m_segmentWeights.resize(n+1,1)}this.m_segmentWeights.write(n,i)}setSegmentWeightWithIndex(e,i){i<1&&(i=1);const s=i===1;if(this.m_segmentWeights==null){if(s)return;this.m_segmentWeights=Ny(this.m_vertices.getPointCount(),1)}if(e>=this.m_segmentWeights.size()){if(s)return;this.m_segmentWeights.resize(e+1,1)}this.m_segmentWeights.write(e,i)}getSegmentWeight(e){if(this.m_segmentWeights===null)return 1;const i=this.getVertexIndex(e);return i>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(i)}getSegmentWeightWithIndex(e){return this.m_segmentWeights==null||e>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(e)}getSegmentRank(e){if(this.m_segmentRanks===null)return Bs.st_defaultRank;const i=this.getVertexIndex(e);return i>=this.m_segmentRanks.size()?Bs.st_defaultRank:this.m_segmentRanks.read(i)}getSegmentRankWithIndex(e){return this.m_segmentRanks===null||e>=this.m_segmentRanks.size()?Rr:this.m_segmentRanks.read(e)}setSegmentRank(e,i){i<Rr&&(i=Rr);const s=i===Rr;if(this.m_segmentRanks===null){if(s)return;this.m_segmentRanks=Ga(this.m_vertices.getPointCount(),Rr)}const n=this.getVertexIndex(e);if(n>=this.m_segmentRanks.size()){if(s)return;this.m_segmentRanks.resize(n+1,Rr)}this.m_segmentRanks.write(n,i)}setSegmentRankWithIndex(e,i){K(0)}removeWeights(){K(0),this.m_weights=new od(0),this.m_segmentWeights=new od(0)}removeRanks(){K(0),this.m_ranks=new Ns(0),this.m_segmentRanks=new Ns(0)}setUserIndex(e,i,s){const n=this.m_indices[i],r=this.getVertexIndex(e);if(n.size()<=r){if(s===-1)return;n.resize(this.m_vertices.getPointCount(),-1)}n.write(r,s)}getUserIndex(e,i){const s=this.getVertexIndex(e),n=this.m_indices[i];return s<n.size()?n.read(s):-1}addToUserIndex(e,i,s){const n=this.m_indices[i],r=this.getVertexIndex(e);n.size()<=r&&n.resize(this.m_vertices.getPointCount(),-1);const o=n.read(r);n.write(r,o+s)}createUserIndex(){for(let i=0;i<this.m_indices.length;i++)if(this.m_indices[i]===null)return this.m_indices[i]=this.allocateIndex(),i;this.m_indices.push(this.allocateIndex());const e=this.m_indices.length-1;return K(e>=0&&e<=So()),e}createUserIndexUninitialized(){for(let i=0;i<this.m_indices.length;i++)if(this.m_indices[i]===null)return this.m_indices[i]=this.allocateIndex(!1),i;this.m_indices.push(this.allocateIndex(!1));const e=this.m_indices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}fillUserIndexForGeometry(e,i,s){const n=this.m_indices[i],r=n.size();for(let o=this.getFirstPath(e);o!==ae;o=this.getNextPath(o)){let l=this.getFirstVertex(o);for(let u=0,f=this.getPathSize(o);u<f;u++,l=this.getNextVertex(l)){const y=this.getVertexIndex(l);y<r&&n.write(y,s)}}}fillUserIndexForSelection(e,i){K(0)}removeUserIndex(e){for(this.recycleUserIndex(this.m_indices[e]),this.m_indices[e]=null;this.m_indices.length>0&&this.m_indices[this.m_indices.length-1]===null;)this.m_indices.pop()}replaceCurveWithLine(e){if(this.m_segments!==null){const i=this.getVertexIndex(e);this.setSegmentToIndex(i,null)}}queryLineConnector(e,i,s=!1){const n=this.getNextVertex(e);if(n===ae)return!1;if(!this.m_bHasAttributes||s){const r=this.getXY(e);i.setStartXY(r);const o=this.getXY(n);i.setEndXY(o)}else{const r=new Ut({vd:this.getVertexDescription()});this.queryPoint(e,r),i.setStart(r),this.queryPoint(n,r),i.setEnd(r)}return!0}queryLineConnector3D(e,i,s=!1){return K(0),!1}hasCurves(){return this.m_segments!==null}geometryHasCurves(e){return K(0),!1}pathHasCurves(e){if(!this.hasCurves())return!1;const i=this.getFirstVertex(e);if(i===ae)return!1;const s=this.getPathSize(e);let n=i;for(let r=0;r<s;r++,n=this.getNextVertex(n)){const o=this.getSegment(n);if(o!==null&&o.getGeometryType()!==me.enumLine)return!0}return!1}insertPath(e,i){let s=ae;i!==ae?(e!==this.getGeometryFromPath(i)&&Je(""),s=this.getPrevPath(i)):s=this.getLastPath(e);const n=this.newPath(e);return i!==ae&&this.setPrevPath(i,n),this.setNextPath(n,i),this.setPrevPath(n,s),s!==ae?this.setNextPath(s,n):this.setFirstPath(e,n),i===ae&&this.setLastPath(e,n),this.setGeometryPathCount(e,this.getPathCount(e)+1),n}removePath(e){const i=this.getPrevPath(e),s=this.getNextPath(e),n=this.getGeometryFromPath(e);return i!==ae?this.setNextPath(i,s):this.setFirstPath(n,s),s!==ae?this.setPrevPath(s,i):this.setLastPath(n,i),this.clearPath(e),this.setGeometryPathCount(n,this.getPathCount(n)-1),this.freePath(e),s}clearPath(e){const i=this.getFirstVertex(e);if(i!==ae){let s=i;for(let r=0,o=this.getPathSize(e);r<o;r++){const l=s;s=this.getNextVertex(s),this.freeVertex(l)}const n=this.getGeometryFromPath(e);this.setGeometryVertexCount(n,this.getPointCount(n)-this.getPathSize(e))}this.setPathSize(e,0)}getNextPath(e){return this.m_pathIndexList.getField(e,2)}getPrevPath(e){return this.m_pathIndexList.getField(e,1)}getPathSize(e){return this.m_pathIndexList.getField(e,3)}isClosedPath(e){return!!(1&this.getPathFlags(e))}setClosedPath(e,i){if(this.isClosedPath(e)===i)return;if(this.getPathSize(e)>0){const n=this.getFirstVertex(e),r=this.getLastVertex(e);if(i){this.setNextVertex(r,n),this.setPrevVertex(n,r);const o=this.getVertexIndex(r);this.setSegmentToIndex(o,null)}else{this.setNextVertex(r,ae),this.setPrevVertex(n,ae);const o=this.getVertexIndex(r);this.setSegmentToIndex(o,null)}}const s=(1|this.getPathFlags(e))-1;this.setPathFlags(e,s|(i?1:0))}closeAllPaths(e){K(0)}isStrongPathStart(e){return!!(8&this.getPathFlags(e))}isStrongPathEnd(e){return!!(16&this.getPathFlags(e))}setStrongPathStart(e,i){const s=(8|this.getPathFlags(e))-8;this.setPathFlags(e,s|(i?8:0))}setStrongPathEnd(e,i){const s=(16|this.getPathFlags(e))-16;this.setPathFlags(e,s|(i?16:0))}getGeometryFromPath(e){return this.m_pathIndexList.getField(e,7)}isExterior(e){return!!(2&this.getPathFlags(e))}setExterior(e,i){const s=(2|this.getPathFlags(e))-2;this.setPathFlags(e,s|(i?2:0))}getRingArea(e){if(this.isRingAreaValid(e))return this.m_pathAreas[this.getPathIndex(e)];const i=this.getFirstVertex(e);if(i===ae)return 0;const s=this.getXY(i),n=new zr(0),r=this.getPathSize(e);if(r>2){const l=s.clone(),u=l.x,f=l.y;let y=this.getNextVertex(i);const _=this.getXY(y);y=this.getNextVertex(y);const x=Y.getNAN();for(let S=2;S<r;S++,y=this.getNextVertex(y))this.queryXY(y,x),n.pe((x.x-l.x)*(_.y-f)),l.setCoordsPoint2D(_),_.setCoordsPoint2D(x);n.pe((u-l.x)*(_.y-f))}if(this.hasCurves()){let l=i;for(let u=0;u<r;u++,l=this.getNextVertex(l)){const f=this.getSegment(l);if(f===null||f.getGeometryType()===me.enumLine)continue;const y=2*f.calculateArea2DHelper();n.pe(y)}}this.setRingAreaValid(e,!0);const o=.5*n.getResult();return this.m_pathAreas[this.getPathIndex(e)]=o,o}getPathIndexInternal(e){return this.getPathIndex(e)}getPathInternalIndexFromVertex(e){return this.getPathIndex(this.getPathFromVertex(e))}setPathUserIndex(e,i,s){const n=this.m_pathindices[i],r=this.getPathIndex(e);n.size()<this.m_pathAreas.length&&n.resize(this.m_pathAreas.length,-1),n.write(r,s)}getPathUserIndex(e,i){const s=this.getPathIndex(e),n=this.m_pathindices[i];return s<n.size()?n.read(s):-1}createPathUserIndex(){for(let i=0;i<this.m_pathindices.length;i++)if(this.m_pathindices[i]===null)return this.m_pathindices[i]=this.allocatePathIndex(),i;this.m_pathindices.push(this.allocatePathIndex());const e=this.m_pathindices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}fillPathUserIndexForGeometry(e,i,s){const n=this.m_pathindices[i],r=n.size();for(let o=this.getFirstPath(e);o!==ae;o=this.getNextPath(o)){const l=this.getPathIndex(o);l<r&&n.write(l,s)}}removePathUserIndex(e){for(this.recyclePathUserIndex(this.m_pathindices[e]),this.m_pathindices[e]=null;this.m_pathindices.length>0&&this.m_pathindices.at(-1)===null;)this.m_pathindices.pop()}movePath(e,i,s){if(s===ae&&Je(""),i===s)return;const n=this.getNextPath(s);let r=this.getPrevPath(s);const o=this.getGeometryFromPath(s);r===ae?this.setFirstPath(o,n):this.setNextPath(r,n),n===ae?this.setLastPath(o,r):this.setPrevPath(n,r),this.setGeometryVertexCount(o,this.getPointCount(o)-this.getPathSize(s)),this.setGeometryPathCount(o,this.getPathCount(o)-1),r=i===ae?this.getLastPath(e):this.getPrevPath(i),this.setPrevPath(s,r),this.setNextPath(s,i),i===ae?this.setLastPath(e,s):this.setPrevPath(i,s),r===ae?this.setFirstPath(e,s):this.setNextPath(r,s),this.setGeometryVertexCount(e,this.getPointCount(e)+this.getPathSize(s)),this.setGeometryPathCount(e,this.getPathCount(e)+1),this.setPathGeometry(s,e)}addVertex(e,i){return this.m_vertices.getPointByVal(this.getVertexIndex(i),this.getHelperPoint()),this.insertVertex_(e,ae,this.getHelperPoint(),!1)}insertVertex(e,i,s){return this.insertVertex_(e,i,s,!0)}removeVertex(e,i){const s=this.getPathFromVertex(e),n=this.getPrevVertex(e),r=this.getNextVertex(e);n!==ae&&this.setNextVertex(n,r);const o=this.getPathSize(s);if(e===this.getFirstVertex(s)&&this.setFirstVertex(s,o>1?r:ae),r!==ae&&this.setPrevVertex(r,n),e===this.getLastVertex(s)&&this.setLastVertex(s,o>1?n:ae),this.hasCurves()&&n!==ae&&r!==ae){const u=this.getVertexIndex(e),f=this.getVertexIndex(n),y=this.getVertexIndex(r);if(i){const _=this.getSegmentFromIndex(f);if(_!==null){const x=this.m_vertices.getXY(y);_.setEndXY(x),_.normalizeAfterEndpointChange()}this.setSegmentToIndex(u,null)}else{const _=this.getSegmentFromIndex(u);if(this.setSegmentToIndex(u,null),_!==null){const x=this.m_vertices.getXY(f);_.setStartXY(x),_.normalizeAfterEndpointChange()}this.setSegmentToIndex(f,_)}}this.setPathSize(s,o-1);const l=this.getGeometryFromPath(s);return this.setGeometryVertexCount(l,this.getPointCount(l)-1),this.freeVertex(e),r}removeVertices(e,i){K(e!==i);const s=this.getPathFromVertex(e),n=this.getPrevVertex(e),r=this.getPrevVertex(i);n!==ae&&this.setNextVertex(n,i);let o=this.getPathSize(s);const l=this.getVertexIndex(e);this.setSegmentToIndex(l,null),this.setPrevVertex(i,n),this.setPrevVertex(e,ae),this.setNextVertex(r,ae);let u=0,f=e;const y=this.getFirstVertex(s);let _=!1;for(;;){const S=this.getNextVertex(f);if(_||(_=y===f),this.freeVertex(f),u++,f===r)break;f=S}o-=u,_&&this.setFirstVertex(s,o>0?i:ae),this.setPathSize(s,o);const x=this.getGeometryFromPath(s);this.setGeometryVertexCount(x,this.getPointCount(x)-u)}getFirstVertex(e){return this.m_pathIndexList.getField(e,4)}getLastVertex(e){return this.m_pathIndexList.getField(e,5)}getNextVertex(e){return this.m_vertexIndexList.getField(e,2)}getPrevVertex(e){return this.m_vertexIndexList.getField(e,1)}getNextVertexEx(e,i){return i>0?this.m_vertexIndexList.getField(e,2):this.m_vertexIndexList.getField(e,1)}getPrevVertexEx(e,i){return i>0?this.m_vertexIndexList.getField(e,1):this.m_vertexIndexList.getField(e,2)}getPathFromVertex(e){return this.m_vertexIndexList.getField(e,3)}addPoint(e,i){return this.insertVertex_(e,ae,i,!1)}getGeometryFromVertex(e){return this.getGeometryFromPath(this.getPathFromVertex(e))}replaceNaNs(e,i){this.m_vertexDescription.hasAttribute(e)||bt(""),this.m_vertices.replaceNaNs(e,i)}removeNaNVertices(){for(let e=this.getFirstGeometry();e!==ae;e=this.getNextGeometry(e))for(let i=this.getFirstPath(e);i!==ae;i=this.getNextPath(i)){let s=this.getFirstVertex(i);for(let n=0,r=this.getPathSize(i);n<r;n++)s=this.getXY(s).isFinite()?this.getNextVertex(s):this.removeVertex(s,!0)}}queryVertexIterator(e=ae){return this.queryVertexIteratorEx(!1,e)}queryVertexIteratorEx(e,i=ae){let s=ae,n=ae,r=ae,o=ae,l=0,u=!1;for(s=i!==ae?i:this.getFirstGeometry();s!==ae;s=this.getNextGeometry(s))if(!e||bi(this.getGeometryType(s))){for(n=this.getFirstPath(s);n!==ae;n=this.getNextPath(n))if(r=this.getFirstVertex(n),o=r,l=0,r!==ae){u=!0;break}if(u||i!==ae)break}return u||(s=ae),WE.create_(this,s,n,r,o,l,e,!1,i!==ae)}queryVertexIteratorOnSelection(e=ae){return this.m_selection?WE.create_(this,e,ae,ae,ae,-1,!1,!0,e!==ae):this.queryVertexIteratorEx(!1,e)}hasSelection(){return this.m_selection}createEmptySelection(){K(0)}removeSelection(){this.m_selection&&(this.m_selectedVertices.length=0,this.removeUserIndex(this.m_selectionIndex),this.m_selectionIndex=-1,this.m_selection=!1,this.m_selectedCount=0)}select(e){return!!this.selected(e)||(this.setUserIndex(e,this.m_selectionIndex,this.m_selectedVertices.length),this.m_selectedVertices.push(e),this.m_selectedCount++,!1)}unselect(e){if(!this.m_selection)return;const i=this.getUserIndex(e,this.m_selectionIndex);i>=0&&(this.m_selectedVertices[i]=ae,this.setUserIndex(e,this.m_selectionIndex,-1),this.m_selectedCount--)}selected(e){return!this.m_selection||this.selected_(e)}getSelectedCount(){return this.m_selection?this.m_selectedCount:this.getTotalPointCount()}createSelectionForCrackingAndClustering(e,i){return K(0),!1}peelALoop(e,i){this.peelALoop_(e,i,!1)}peelALoopIntoAPath(e,i){return this.peelALoop_(e,i,!0)}applyTransformation(e){if(this.m_verticesMp.applyTransformation(e),this.m_segments!==null)for(let i=0,s=this.m_segments.length;i<s;i++)this.m_segments[i]&&this.m_segments[i].applyTransformation(e)}setGeometryType(e,i){this.m_geometryIndexList.setField(e,2,i)}splitSegmentWithIntersector(e,i,s,n,r){n?this.splitSegmentForward(e,i,s,!0,r):this.splitSegmentBackward(e,i,s,!0,r)}setPrevVertex(e,i){this.m_vertexIndexList.setField(e,1,i)}setNextVertex(e,i){this.m_vertexIndexList.setField(e,2,i)}setPathToVertex(e,i){this.m_vertexIndexList.setField(e,3,i)}setPathSize(e,i){this.m_pathIndexList.setField(e,3,i)}setFirstVertex(e,i){this.m_pathIndexList.setField(e,4,i)}setLastVertex(e,i){this.m_pathIndexList.setField(e,5,i)}getSegment(e){if(this.m_segments!=null){const i=this.getVertexIndex(e);return this.getSegmentFromIndex(i)}return null}isCurve(e){return K(0),!1}querySegment(e,i,s=!0,n=!1){const r=this.getNextVertex(e);if(r===ae)return!1;const o=this.getSegment(e);if(!o)return!s&&(this.queryLineConnector(e,i.createLine(),n),!0);if(i.copyFrom(o,!0),n)return!0;if(this.m_vertexDescription.getAttributeCount()>1){const l=this.getHelperPoint();this.queryPoint(e,l),i.get().setStart(l),this.queryPoint(r,l),i.get().setEnd(l)}return!0}getSegmentFromIndex(e){return(this.m_segments!==null&&this.m_segments.length>e?this.m_segments[e]:null)||null}getAndClearSegmentFromIndex(e){return(this.m_segments!==null&&this.m_segments.length>e?this.m_segments[e]:null)||null}setSegmentToIndex(e,i){if(this.m_bHasForceSetEnvelope=!1,this.m_segments===null){if(!i)return;this.m_segments=[],this.m_segments.length=this.m_vertices.getPointCount()}e>=this.m_segments.length&&(this.m_segments.length=e+1),this.m_segments[e]=i}setGeometryPathCount(e,i){this.m_geometryIndexList.setField(e,6,i)}setGeometryVertexCount(e,i){this.m_geometryIndexList.setField(e,5,i)}ringParentageCheckInternal(e,i){return K(0),!1}reverseRingInternal(e){const i=this.hasCurves(),s=this.hasSegmentParentage();let n=null,r=-1,o=e;if(i){const l=this.getVertexIndex(o);n=this.getAndClearSegmentFromIndex(l)}s&&(r=this.getSegmentParentage(o));do{const l=this.getPrevVertex(o),u=this.getNextVertex(o);if(this.setNextVertex(o,l),this.setPrevVertex(o,u),i){const f=this.getVertexIndex(u),y=this.getSegmentFromIndex(f);n&&n.reverse(),this.setSegmentToIndex(f,n),n=y}if(s){const f=this.getSegmentParentage(u);this.setSegmentParentagePreserveBreak(u,r),r=f}o=u}while(o!==e);this.dbgVerifyIntegrity(e)}setTotalPointCount(e){this.m_pointCount=e}removePathOnly(e){const i=this.getPrevPath(e),s=this.getNextPath(e),n=this.getGeometryFromPath(e);i!==ae?this.setNextPath(i,s):this.setFirstPath(n,s),s!==ae?this.setPrevPath(s,i):this.setLastPath(n,i),this.setFirstVertex(e,ae),this.setLastVertex(e,ae),this.freePath(e)}insertClosedPath(e,i,s,n,r){const o=this.insertPath(e,ae);let l=0,u=s;for(r[0]=!1;;){u===n&&(r[0]=!0),this.setPathToVertex(u,o),l++;const f=this.getNextVertex(u);if(f===s)break;u=f}return this.setClosedPath(o,!0),this.setPathSize(o,l),r[0]&&(s=n),this.setFirstVertex(o,s),this.setLastVertex(o,this.getPrevVertex(s)),this.setRingAreaValid(o,!1),o}findVertex2D(e,i){return K(0),0}findVertex3D(e,i,s){return K(0),0}dbgVerifyMonotone(){}dbgCheckSelection(){}dbgVerifySegment(e){}dbgVerifyIntegrity(e,i=!0){}dbgVerifyVertexCounts(){}dbgVerifyCurves(){}dbgDumpGeometry(e,i){K(0)}removeVertexInternal(e,i){const s=this.getPrevVertex(e),n=this.getNextVertex(e);if(s!==ae&&this.setNextVertex(s,n),n!==ae&&this.setPrevVertex(n,s),this.hasCurves()&&s!==ae&&n!==ae){const r=this.getVertexIndex(e),o=this.getVertexIndex(s),l=this.getVertexIndex(n);if(i){const u=this.getSegmentFromIndex(o);if(u!==null){const f=this.m_vertices.getXY(l);u.setEndXY(f),u.normalizeAfterEndpointChange()}this.setSegmentToIndex(r,null)}else{const u=this.getSegmentFromIndex(r);if(this.setSegmentToIndex(r,null),u!==null){const f=this.m_vertices.getXY(o);u.setStartXY(f),u.normalizeAfterEndpointChange()}this.setSegmentToIndex(o,u)}}return this.freeVertex(e),n}isRingAreaValid(e){return!!(4&this.getPathFlags(e))}setRingAreaValid(e,i){const s=(4|this.getPathFlags(e))-4;this.setPathFlags(e,s|(i?4:0))}compareVerticesSimpleY(e,i){return this.queryXY(e,this.m_workPoint2D),this.queryXY(i,this.m_workPoint2_2D),this.m_workPoint2D.compare(this.m_workPoint2_2D)}compareVerticesSimpleY3D(e,i){return this.getXYZ(e).compare(this.getXYZ(i))}compareVerticesSimpleX(e,i){return this.getXY(e).compareX(this.getXY(i))}sortVerticesSimpleByYHeapMerge(e,i){K(0)}sortVerticesSimpleByY(e,i,s){this.m_bucketSort.sort(e,i,s,new Zet(this))}sortVerticesSimpleByX(e,i,s){K(0)}sortVerticesSimpleByY3D(e,i,s){K(0)}snapVertexForPoleClipping(e,i){const s=this.getPrevVertex(e);s!==ae&&this.replaceCurveWithLine(s),this.getNextVertex(e)!==ae&&this.replaceCurveWithLine(e);const n=new Y;this.queryXY(e,n),n.y=i,this.setXY(e,n)}setSegmentParentageAndBreak(e,i,s=!0){if(this.m_segmentParentageIndex===-1){if(i===-1)return;this.m_segmentParentageIndex=this.createUserIndex()}i>=0&&(K(i<=ya()>>1),i<<=1,i|=s?1:0),this.setUserIndex(e,this.m_segmentParentageIndex,i)}setSegmentParentagePreserveBreak(e,i){if(K(i>=-1),this.m_segmentParentageIndex===-1){if(i===-1)return;this.m_segmentParentageIndex=this.createUserIndex()}i>=0&&(K(i<=ya()>>1),i<<=1,i|=this.getSegmentParentageBreakVertex(e)?1:0),this.setUserIndex(e,this.m_segmentParentageIndex,i)}getSegmentParentage(e){if(this.m_segmentParentageIndex===-1)return-1;const i=this.getUserIndex(e,this.m_segmentParentageIndex);return i<0?i:i>>1}getOriginalSegmentInfo(e){if(this.m_segmentParentageIndex!==-1){const i=this.getSegmentParentage(e);return new Dz(i)}return new Dz(-1)}setSegmentParentageBreakVertex(e,i){if(this.m_segmentParentageIndex===-1)return;let s=this.getUserIndex(e,this.m_segmentParentageIndex);s<0||!!(1&s)!==i&&(i?s|=1:s&=ya()>>1<<1,this.setUserIndex(e,this.m_segmentParentageIndex,s))}getSegmentParentageBreakVertex(e){if(this.m_segmentParentageIndex===-1)return!0;const i=this.getUserIndex(e,this.m_segmentParentageIndex);return i<0||!!(1&i)}isDiscontinuousSegmentParentage(e){const i=this.getPrevVertex(e);return i===ae?!1:this.getSegmentParentage(i)!==this.getSegmentParentage(e)}setCurveStitcherPointer(e){this.m_curveStitcher=e}hasSegmentParentage(){return this.m_segmentParentageIndex!==-1}deleteSegmentParentage(){this.m_segmentParentageIndex!==-1&&(this.removeUserIndex(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_curveStitcher=null}clearSegments(){this.m_segments=null}}Bs.st_defaultRank=1;class Dp{constructor(e,i,s){e===void 0?(this.x=new Be,this.y=new Be,this.z=new Be):e instanceof ii?(this.x=new Be(e.x),this.y=new Be(e.y),this.z=new Be(e.z)):e instanceof Be?(this.x=e.clone(),this.y=i.clone(),this.z=s.clone()):Je("EPoint3D constructor")}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y)).addE(this.z.mulE(e.z))}crossProduct(e){return new Dp(this.y.mulE(e.z).subE(this.z.mulE(e.y)),this.z.mulE(e.x).subE(this.x.mulE(e.z)),this.x.mulE(e.y).subE(this.y.mulE(e.x)))}crossProductVector(e){const i=this.y.mulE(e.z).subE(e.y.mulE(this.z)),s=e.x.mulE(this.z).subE(this.x.mulE(e.z)),n=this.x.mulE(e.y).subE(e.x.mulE(this.y));return new Dp(i,s,n)}sqrLength(){return this.x.mulE(this.x).addE(this.y.mulE(this.y)).addE(this.z.mulE(this.z))}length(){return this.sqrLength().sqrt()}static distance(e,i){return e.sub(i).length()}negate(){return new Dp(this.x.negate(),this.y.negate(),this.z.negate())}add(e){return new Dp(this.x.addE(e.x),this.y.addE(e.y),this.z.addE(e.z))}sub(e){return new Dp(this.x.subE(e.x),this.y.subE(e.y),this.z.subE(e.z))}subThis(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this.z.subThisE(e.z),this}addThis(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this.z.addThisE(e.z),this}mul(e){return new Dp(this.x.mulE(e),this.y.mulE(e),this.z.mulE(e))}div(e){return new Dp(this.x.divE(e),this.y.divE(e),this.z.divE(e))}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)&&this.z.eq(e.z)}isZero(){return this.x.isZero()&&this.y.isZero()&&this.z.isZero()}value(){return ii.construct(this.x.value(),this.y.value(),this.z.value())}}class Jet{constructor(e){this.m_origin=new ii,this.m_normal=new ii,this.m_axisX=new ii,this.m_axisY=new ii,K(0)}assign(e){return K(0),this}set(e,i,s,n){K(0)}setFromPoints(e,i,s){return K(0),!1}getCoord(e,i){return K(0),{}}getCoord2D(e){return K(0),{}}getCoordX(e,i){return K(0),0}getCoordY(e,i){return K(0),0}getCoordZ(e,i){return K(0),0}setPreferredAxisX(e){K(0)}getOrigin(){return K(0),{}}getNormal(){return K(0),{}}getAxisX(){return this.m_axisX.clone()}getAxisY(){return this.m_axisY.clone()}setAxisX(e,i=!1){K(0)}setAxisY(e,i=!1){K(0)}recalculateAxisY(){K(0)}setOrigin(e){K(0)}setNormal(e,i){K(0)}intersect(e,i){return K(0),!1}intersectLine(e){return K(0),0}intersectLineEx(e,i){return K(0),0}closestCoordinate(e){return K(0),{}}projectVector(e){return K(0),{}}signedDistance(e){return K(0),0}distance(e){return K(0),0}}function Qet(t,e){return!1}function C1e(t,e,i,s,n=100,r=Qet){let o,l,u,f,y,_,x,S,P;K(s>0);let A,k,$,F=0,G=0;const V=az();e>i&&(i=St(e,e=i));const B=t(e),W=t(i);B<W?(o=l=u=e,f=y=_=B):(o=l=u=i,f=y=_=W);let J=0;for(;J<n&&($=.5*(i-e),P=e+$,A=s*(Math.abs(o)+.25),k=2*A,!(r(o,f)||Math.abs(o-P)<=k-$));++J){if(Math.abs(G)>A){const re=(o-l)*(f-_);let se=(o-u)*(f-y),oe=(o-u)*se-(o-l)*re;se=2*(se-re),se>0&&(oe=-oe),se=Math.abs(se);const pe=G;G=F,Math.abs(oe)>=Math.abs(se*pe*.5)||oe<=se*(e-o)||oe>=se*(i-o)?(G=o>=P?e-o:i-o,F=az()*G):(F=oe/se,S=o+F,(S-e<k||i-S<k)&&(F=P-o<0?-Math.abs(A):Math.abs(A)))}else G=o>=P?e-o:i-o,F=G*V;S=o+F,x=t(S),x<f?(S>=o?e=o:i=o,u=l,l=o,o=S,_=y,y=f,f=x):(S<o?e=S:i=S,x<=y||l===o?(u=l,l=S,_=y,y=x):(x<=_||u===o||u===l)&&(u=S,_=x))}return rr(o,f)}function ett(t,e,i){return t>i?t-=Math.ceil((t-i)/lS)*lS:t<e&&(t+=Math.ceil((e-t)/lS)*lS),t}function pl(t,e,i){return ttt(t,e,i,0)}function ttt(t,e,i,s){const n=i.x,r=i.y;return P1e(t,e,Math.cos(n),Math.sin(n),Math.cos(r),Math.sin(r),s)}function itt(t,e,i,s,n,r){return P1e(t,e,i,s,n,r,0)}function P1e(t,e,i,s,n,r,o){const l=t/Math.sqrt(1-e*r*r),u=l+o,f=u*n*i,y=u*n*s,_=(l*(1-e)+o)*r;return ii.construct(f,y,_)}function fie(t,e,i){const s=new Be,n=new Be,r=new Be,o=new Be;s.setCos(i.x),n.setSin(i.x),r.setCos(i.y),o.setSin(i.y);const l=o.negate().mulE(o.mul(e)).add(1).sqrt(),u=new Be(t).divE(l),f=u.mulE(r).mulE(s),y=u.mulE(r).mulE(n),_=u.mul(1-e).mulE(o);return new Dp(f,y,_)}function ZE(t,e,i){const s=i.x,n=i.y,r=i.z,o=Math.atan2(n,s),l=Math.sqrt(s*s+n*n),u=Math.atan2(r,(1-e)*l);return Y.construct(o,u)}function MN(t,e,i){const s=1-e,n=t/Math.sqrt(Xi(i.x)+Xi(i.y)+Xi(i.z)/s);return i.mul(n)}function stt(t,e,i,s,n){const r=pl(t,e,i),o=pl(t,e,s);return ZE(t,e,ii.lerp(r,o,n))}function ntt(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{const r=Kl(n,new Gh,!1);return Rg.geodeticDistance(t,e,i.x,i.y,s.x,s.y,r,null,null,zi.PE_LINETYPE_GEODESIC),r.val}catch(r){n.error=r,n.hasError=!0}finally{fm(n)}}function rtt(t,e,i,s,n){switch(K(i.isFinite()&&s.isFinite()),n){case 0:return ntt(t,e,i,s);case 1:return att(t,e,i);case 2:case 3:{const r=pl(t,e,i),o=pl(t,e,s);return ii.distance(r,o)}default:js("")}}function pie(t,e,i,s,n,r=0,o){if(r===2||r===3)return ott(t,e,i,s,n,r===3);const l=ZE(t,e,i),u=y=>{const _=ZE(t,e,ii.lerp(s,n,y));return rtt(t,e,l,_,r)},f=ii.distance(s,n);if(f>0){const y=T1e(t,f),{first:_,second:x}=C1e(u,0,1,y);return rr(_,x)}{const y=u(0);return rr(.5,y)}}function ott(t,e,i,s,n,r=!1,o){const l=MN(t,e,i);if(r){const y=new Jet({pt0:new ii(0,0,0),pt1:s,pt2:n}),_=y.closestCoordinate(i),x=y.closestCoordinate(s),S=y.closestCoordinate(n),P=Y.getClosestCoordinate(x,S,_),A=MN(t,e,ii.lerp(s,n,P)),k=ii.distance(A,l);return rr(P,k)}const u=y=>{const _=MN(t,e,ii.lerp(s,n,y));return ii.distance(_,l)},f=ii.distance(s,n);if(f>0){const y=T1e(t,f),{first:_,second:x}=C1e(u,0,1,y);return rr(_,x)}{const y=ii.distance(i,s);return rr(.5,y)}}function att(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{const r=Kl(n,new Gh,!1);return Rg.greatEllipticDistance(t,e,i.x,i.y,i.x,i.y,r,null,null),r.val}catch(r){n.error=r,n.hasError=!0}finally{fm(n)}}function ltt(t,e,i,s,n){if(Math.abs(i.x-s.x)>Math.PI||Math.abs(i.y)>Ss||Math.abs(s.y)>Ss||(Math.abs(i.y)===Ss||Math.abs(s.y)===Ss)&&i.x!==s.x)return Number.NaN;const{first:r,second:o}=RKe(i.x,s.x);let l=n;if(l=ett(l,r,o),!Ze.construct(i.x,s.x).containsCoordinate(l))return Number.NaN;const u=Ht.constructPoint2D(i),f=Ht.constructPoint2D(s),y=fie(1,e,u),_=fie(1,e,f),x=y.crossProductVector(_);if(x.z.isZero())return i.y;const S=x.x.divE(x.z.negate()),P=x.y.divE(x.z.negate()),A=S.mulE(S).addE(P.mulE(P)).sqrt();if(A.isZero()||S.isZero()&&P.isZero())return i.y;const k=Math.atan2(P.value(),S.value());let $=Math.atan2(A.value()*Math.cos(k-l),1-e);const F=pl(1,e,Y.construct(l,$)),G=ii.construct(F.x,F.y,-F.z),V=x.value().dotProduct(F),B=x.value().dotProduct(G);return Math.abs(B)<Math.abs(V)&&($=-$),$}function ctt(t,e){return t*Math.sqrt(1-e)}function utt(t,e){return(1-e)*t}function mie(t,e,i){const s=i/(2*utt(t,e)),n=s*s;return i*(1-n*(.16666666666666666-.008333333333333333*n))}function T1e(t,e){if(e!==0){const i=t*YKe()/e;return Math.min(i,1e-10)}return 0}function vs(t,e,i,s,n){return I1e(t,e,null,i,s,n)}function I1e(t,e,i,s,n,r){const o=t.getGeometryType();if(o===me.enumPoint){const y=t.getXY();return e.contains(y)?t:t.createInstance()}if(o===me.enumEnvelope){const y=xe.constructEmpty();if(t.queryEnvelope(y),y.intersect(e)){const _=t.clone();return _.setEnvelope(y),_}return t.createInstance()}if(t.isEmpty())return t;if(e.isEmpty())return t.createInstance();const l=e.clone();{const y=new xe;if(t.queryLooseEnvelope(y),l.containsEnvelope(y))return t;if(!l.isIntersecting(y))return t.createInstance();n===0&&(y.intersect(l),y.inflate(Math.max(.1*y.maxDimension(),1)),y.intersect(l),l.assign(y))}let u=s;if((i!==null||Number.isNaN(u))&&(u=Kn(i,l,!1).total()),o===me.enumGeometryCollection){const y=t,_=t.createInstance();for(let x=0,S=y.getGeometryCount();x<S;x++){const P=y.getGeometry(x);if(P.isEmpty())continue;const A=vs(P,l,u,n,r);A.isEmpty()||(A===P?_.addGeometry(A.clone()):_.addGeometry(A))}return _}tl(o)||Je("Clip: geometry not supported");const f=t.getImpl().getAccelerators();if(f!==null){const y=f.getRasterizedGeometry();K(y===null)}switch(o){case me.enumMultiPoint:{const y=t;let _;const x=y.getPointCount(),S=y.getImpl().getAttributeStreamRef(0);let P=0;for(let A=0;A<x;A++){const k=S.readPoint2D(2*A);l.contains(k)||(P===0&&(_=y.createInstance()),P<A&&_.addPoints(y,P,A),P=A+1)}return P>0&&_.addPoints(y,P,x),P===0?y:(K(_!==null),_)}case me.enumPolygon:case me.enumPolyline:return dtt(t,l,u,n,r);default:bt("")}}function htt(t,e,i,s,n,r){const o=new Sc(e,r),l=new xe;return t.queryLooseEnvelope(l),e.containsEnvelope(l)?t:e.isIntersecting(l)?o.clipPolesOut(t,n):t.createInstance()}function dtt(t,e,i,s,n){return new Sc(e,n).clipMultiPath2(t,i,s)}class Sc{constructor(e,i){this.m_shape=new Bs,this.m_geometry=ae,this.m_verticesOnExtentIndex=-1,this.m_verticesOnExtent=[],this.m_progressCounter=0,this.m_extent=new xe(e),this.m_progressTracker=i}progress_(){}clipMultiPath2(e,i,s){return e.getGeometryType()===me.enumPolygon?this.clipPolygonOrProjectedPolyline2(e,s):this.clipPolyline(e,i)}clipPolygonOrProjectedPolyline2(e,i){const s=e.getGeometryType()===me.enumPolyline;if(this.m_extent.width()===0||this.m_extent.height()===0)return e.createInstance();const n=xe.constructEmpty();e.queryLooseEnvelope(n),this.m_geometry=s?this.m_shape.addGeometry(e):this.m_shape.addGeometry(e,this.m_extent);const r=xe.constructEmpty(),o=xe.constructEmpty(),l=new Y,u=new Y,f=new Array(9),y=new Array(9),_=Ge(Y,9);let x=null;const S=new si,P=[];let A=!1;for(let $=0;!A&&$<4;$++){let F=!1;const G=!!(1&$);let V=0;switch($){case 0:V=this.m_extent.xmin,F=n.xmin<=V&&n.xmax>=V;break;case 1:V=this.m_extent.ymin,F=n.ymin<=V&&n.ymax>=V;break;case 2:V=this.m_extent.xmax,F=n.xmin<=V&&n.xmax>=V;break;case 3:V=this.m_extent.ymax,F=n.ymin<=V&&n.ymax>=V}if(F){A=!0;for(let B=this.m_shape.getFirstPath(this.m_geometry);B!==ae;){let W=!0,J=-1,re=-1;const se=this.m_shape.getFirstVertex(B);let oe=se;do{this.progress_(),x=this.m_shape.getSegment(oe);let pe=x;if(pe===null){const de=this.m_shape.getNextVertex(oe);if(de===ae){K(s),J===0&&P.push(oe);break}this.m_shape.queryXY(oe,l),S.setStartXY(l),this.m_shape.queryXY(de,u),S.setEndXY(u),pe=S}pe.queryLooseEnvelope(r);let ce=Sc.checkSegmentIntersection(r,$,V);pe.isCurve()&&ce===0&&pe.isCurve()&&(S.setStartXY(pe.getStartXY()),S.setEndXY(pe.getEndXY()),this.m_shape.replaceCurveWithLine(oe),pe=S,S.queryEnvelope(r),ce=Sc.checkSegmentIntersection(r,$,V));let ue=0,ne=ae;if(ce===-1){const de=pe.intersectionWithAxis2D(G,V,f,y);if(de>0){let Re=null;if(pe.isCurve()){Re=_,K(de<=9);for(let Oe=0;Oe<de;Oe++)G?_[Oe].setCoords(f[Oe],V):_[Oe].setCoords(V,f[Oe]);ue=this.m_shape.splitSegmentAxisAware(oe,y,de,Re,G?1:0)}else ue=this.m_shape.splitSegmentAxisAware(oe,y,de,null,-1)}else ue=0;ue+=1;let Se=oe,Pe=this.m_shape.getNextVertex(Se);pe=null;for(let Re=0;Re<ue;Re++){this.m_shape.queryXY(Se,l),this.m_shape.queryXY(Pe,u),x=this.m_shape.getSegment(Se);let Oe=x;Oe===null&&(S.setStartXY(l),S.setEndXY(u),Oe=S),Oe.queryEnvelope(o);let we=Sc.checkSegmentIntersection(o,$,V);Oe.isCurve()&&we===0&&(this.m_shape.replaceCurveWithLine(Se),S.setStartXY(l),S.setEndXY(u),Oe=S,Oe.queryEnvelope(o),we=Sc.checkSegmentIntersection(o,$,V)),we===-1&&(G?Math.abs(l.y-V)<Math.abs(u.y-V)?(l.y=V,this.m_shape.setXY(Se,l)):(u.y=V,this.m_shape.setXY(Pe,u)):Math.abs(l.x-V)<Math.abs(u.x-V)?(l.x=V,this.m_shape.setXY(Se,l)):(u.x=V,this.m_shape.setXY(Pe,u)),x=this.m_shape.getSegment(Se),Oe=x,Oe===null&&(S.setStartXY(l),S.setEndXY(u),Oe=S),Oe.queryEnvelope(o),we=Sc.checkSegmentIntersection(o,$,V),we===-1&&(we=Sc.checkSegmentIntersectionLoose(o,$,V)));const Fe=J;J=we,re===-1&&(re=J),Fe===0&&J===1||Fe===1&&J===0||Fe===0&&J===0&&P.push(Se),J===1&&(A=!1,W=!1),Se=Pe,ne=Se,Pe=this.m_shape.getNextVertex(Pe)}}if(ue===0){const de=J;J=ce,re===-1&&(re=J),de===0&&J>=1||de>=1&&J===0||de===0&&J===0&&P.push(oe),J===1&&(A=!1,W=!1),ne=this.m_shape.getNextVertex(oe)}if(oe=ne,P.length>=256){for(let de=1,Se=P.length-1;de<Se;de++){const Pe=P[de];s?this.m_shape.snapVertexForPoleClipping(Pe,V):this.m_shape.removeVertex(Pe,!1)}P[1]=P.at(-1),P.length=2}}while(oe!==se);if(!W){re!==0||!s&&J!==0&&J!==2||P.push(se);for(let pe=0,ce=P.length;pe<ce;pe++){const ue=P[pe];s?this.m_shape.snapVertexForPoleClipping(ue,V):this.m_shape.removeVertex(ue,!1)}}P.length=0,B=W||this.m_shape.getPathSize(B)===0?this.m_shape.removePath(B):this.m_shape.getNextPath(B)}}}if(A)return e.createInstance();x=null,s?this.removeSpikesAlongPoles():this.resolveBoundaryOverlaps(),i>0&&this.densifyAlongClipExtent(i);const k=this.m_shape.getGeometry(this.m_geometry);return k.getGeometryType()===me.enumPolygon&&k.setFillRule(e.getFillRule()),k}clipPolyline(e,i){const s=xe.constructEmpty(),n=xe.constructEmpty(),r=new Array(9),o=new Array(9),l=new Qt;let u=e;const f=xe.constructEmpty();e.queryLooseEnvelope(f);for(let y=0;y<4;y++){let _=!1;const x=!!(1&y);let S=0;switch(y){case 0:S=this.m_extent.xmin,_=f.xmin<=S&&f.xmax>=S;break;case 1:S=this.m_extent.ymin,_=f.ymin<=S&&f.ymax>=S;break;case 2:S=this.m_extent.xmax,_=f.xmin<=S&&f.xmax>=S;break;case 3:S=this.m_extent.ymax,_=f.ymin<=S&&f.ymax>=S}if(!_)continue;const P=u;u=e.createInstance();const A=P.getImpl().querySegmentIterator();A.resetToFirstPath();const k=new Y,$=new Y;for(;A.nextPath();){let F=-1,G=!0;for(;A.hasNextSegment();){this.progress_();const V=A.nextSegment(),B=V.isDegenerate(0);V.queryLooseEnvelope(s);const W=Sc.checkSegmentIntersection(s,y,S);if(W===-1){const J=V.intersectionWithAxis2D(x,S,r,o);let re=0;k.assign(V.getStartXY());for(let se=0;se<=J;se++){const oe=se<J?o[se]:1;if(re===oe)continue;V.queryCut(re,oe,l,!1);const pe=l.get();let ce=!1;if(pe.getStartXY().equals(k)||(pe.setStartXY(k),ce=!0),se<J&&(x?($.x=r[se],$.y=S):($.x=S,$.y=r[se]),pe.getEndXY().equals($)||(pe.setEndXY($),ce=!0)),ce&&pe.normalizeAfterEndpointChange(),!B&&pe.isDegenerate(0))continue;pe.queryEnvelope(n);let ue=Sc.checkSegmentIntersection(n,y,S);if(ue===-1){const ne=pe.getStartXY(),de=pe.getEndXY();ce=!1,x?Math.abs(ne.y-S)<Math.abs(de.y-S)?(ne.y=S,pe.setStartXY(ne),ne.equals(pe.getStartXY())||(pe.setStartXY(ne),ce=!0)):(de.y=S,de.equals(pe.getEndXY())||(pe.setEndXY(de),ce=!0)):Math.abs(ne.x-S)<Math.abs(de.x-S)?(ne.x=S,ne.equals(pe.getStartXY())||(pe.setStartXY(ne),ce=!0)):(de.x=S,de.equals(pe.getEndXY())||(pe.setEndXY(de),ce=!0)),ce&&pe.normalizeAfterEndpointChange(),pe.queryEnvelope(n),ue=Sc.checkSegmentIntersection(n,y,S),ue===-1&&(ue=Sc.checkSegmentIntersectionLoose(n,y,S))}k.assign(pe.getEndXY()),re=oe,F=ue,F>=1?(u.addSegment(pe,G),G=!1):G=!0}}else F=W,F>=1?(u.addSegment(V,G),G=!1):G=!0}}}return u}static checkSegmentIntersection(e,i,s){switch(i){case 0:return e.xmin<s&&e.xmax<=s?0:e.xmin>=s?e.xmax===s?2:1:-1;case 1:return e.ymin<s&&e.ymax<=s?0:e.ymin>=s?e.ymax===s?2:1:-1;case 2:return e.xmin>=s&&e.xmax>s?0:e.xmax<=s?e.xmin===s?2:1:-1;case 3:return e.ymin>=s&&e.ymax>s?0:e.ymax<=s?e.ymin===s?2:1:-1}return K(0),0}static checkSegmentIntersectionLoose(e,i,s){return K(0),0}resolveBoundaryOverlaps(){this.m_verticesOnExtentIndex=-1,this.splitSegments(!1,this.m_extent.xmin),this.splitSegments(!1,this.m_extent.xmax),this.splitSegments(!0,this.m_extent.ymin),this.splitSegments(!0,this.m_extent.ymax),this.m_verticesOnExtent.length=0,this.m_verticesOnExtentIndex=this.m_shape.createUserIndex();const e=new Y;for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;i=this.m_shape.getNextPath(i)){let s=this.m_shape.getFirstVertex(i);for(let n=0,r=this.m_shape.getPathSize(i);n<r;n++,s=this.m_shape.getNextVertex(s))this.progress_(),this.m_shape.queryXY(s,e),this.m_extent.xmin!==e.x&&this.m_extent.xmax!==e.x&&this.m_extent.ymin!==e.y&&this.m_extent.ymax!==e.y||(this.m_shape.setUserIndex(s,this.m_verticesOnExtentIndex,this.m_verticesOnExtent.length),this.m_verticesOnExtent.push(s))}this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmin),this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmax),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymin),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymax),this.fixPaths()}densifyAlongClipExtent(e){const i=new Y(0,0),s=new Y(0,0),n=new Array(2048);for(let r=this.m_shape.getFirstPath(this.m_geometry);r!==ae;r=this.m_shape.getNextPath(r)){const o=this.m_shape.getFirstVertex(r);let l=o;do{const u=this.m_shape.getNextVertex(l);this.m_shape.queryXY(l,i);let f=-1;if(i.x===this.m_extent.xmin?(this.m_shape.queryXY(u,s),s.x===this.m_extent.xmin&&(f=1)):i.x===this.m_extent.xmax&&(this.m_shape.queryXY(u,s),s.x===this.m_extent.xmax&&(f=1)),i.y===this.m_extent.ymin?(this.m_shape.queryXY(u,s),s.y===this.m_extent.ymin&&(f=0)):i.y===this.m_extent.ymax&&(this.m_shape.queryXY(u,s),s.y===this.m_extent.ymax&&(f=0)),f===-1){l=u;continue}if(this.isCurve(l)){l=u;continue}const y=i.clone(),_=new Y(0,0);if(f){const P=i.y-this.m_extent.ymin;_.y=xn(s.y-i.y),y.y=e*rm(Math.floor(Math.abs(P)/e),P)+this.m_extent.ymin,_.y<0&&(y.y+=e)}else{const P=i.x-this.m_extent.xmin;_.x=xn(s.x-i.x),y.x=e*rm(Math.floor(Math.abs(P)/e),P)+this.m_extent.xmin,_.x<0&&(y.x+=e)}const x=f?s.y-i.y:s.x-i.x,S=Math.abs(x);if(S/e>65536&&bt(""),S>0){const P=Math.trunc(S/e)+2;n.length<P&&(n.length=P);let A=0;for(let k=0;;k++){const $=y.add(_.mul(k*e)),F=(f?$.y-i.y:$.x-i.x)/x;if(F>=1)break;F<=0||(K(A<=n.length),n[A]=F,A++)}A!==0&&this.m_shape.splitSegment(l,n,A)}l=u}while(l!==o)}}splitSegments(e,i){let s=-1;const n=new Y,r=[];for(let P=this.m_shape.getFirstPath(this.m_geometry);P!==ae;P=this.m_shape.getNextPath(P)){let A=this.m_shape.getFirstVertex(P),k=ae;for(let $=0,F=this.m_shape.getPathSize(P);$<F;$++,A=k)if(this.progress_(),k=this.m_shape.getNextVertex(A),this.m_shape.queryXY(A,n),(e?n.y===i:n.x===i)&&(this.m_shape.queryXY(k,n),e?n.y===i:n.x===i)){if(this.isCurve(A))continue;s===-1&&(s=this.m_shape.createUserIndex()),this.m_shape.getUserIndex(A,s)!==1&&(r.push(A),this.m_shape.setUserIndex(A,s,1)),this.m_shape.getUserIndex(k,s)!==1&&(r.push(k),this.m_shape.setUserIndex(k,s,1))}}if(s!==-1&&this.m_shape.removeUserIndex(s),r.length<3)return;r.sort((P,A)=>this.compareVertices(P,A));const o=new Y,l=new Y,u=new Y;l.setNAN();let f=-1,y=[],_=[];const x=this.m_shape.createUserIndex(),S=this.m_shape.createUserIndex();for(let P=0,A=r.length;P<A;P++){const k=r[P];if(this.m_shape.queryXY(k,n),!n.isEqualPoint2D(l)){if(f===-1){f=P,l.setCoordsPoint2D(n);continue}for(let F=f;F<P;F++){const G=r[F],V=this.m_shape.getNextVertex(G),B=this.m_shape.getPrevVertex(G);let W=!1;this.m_shape.queryXY(V,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(G)||(y.push(G),W=!0,this.m_shape.setUserIndex(G,S,1))),this.m_shape.queryXY(B,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(B)||(W||y.push(G),this.m_shape.setUserIndex(G,x,1)))}for(let F=0,G=y.length;F<G;F++){const V=y[F],B=this.m_shape.getUserIndex(V,x),W=this.m_shape.getUserIndex(V,S);if(B===1){const J=this.m_shape.getPrevVertex(V);this.m_shape.queryXY(J,u);let re=0;if(!u.isEqualPoint2D(n)){const se=Y.distance(l,u);re=Y.distance(u,n)/se,re===0?re=Number.EPSILON:re===1&&(re=1-Number.EPSILON),this.m_shape.splitSegment(J,[re],1);const oe=this.m_shape.getPrevVertex(V);this.m_shape.setXY(oe,n),_.push(oe),this.m_shape.setUserIndex(oe,x,1),this.m_shape.setUserIndex(oe,S,-1)}}if(W===1){const J=this.m_shape.getNextVertex(V);this.m_shape.queryXY(J,u);let re=0;if(!u.isEqualPoint2D(n)){const se=Y.distance(l,u);re=Y.distance(l,n)/se,re===0?re=Number.EPSILON:re===1&&(re=1-Number.EPSILON),this.m_shape.splitSegment(V,[re],1);const oe=this.m_shape.getNextVertex(V);this.m_shape.setXY(oe,n),_.push(oe),this.m_shape.setUserIndex(oe,x,-1),this.m_shape.setUserIndex(oe,S,1)}}}const $=y;y=_,_=$,_.length=0,f=P,l.setCoordsPoint2D(n)}}this.m_shape.removeUserIndex(x),this.m_shape.removeUserIndex(S)}resolveOverlaps(e,i){const s=new Y,n=[];let r=-1;for(let f=0,y=this.m_verticesOnExtent.length;f<y;f++){this.progress_();const _=this.m_verticesOnExtent[f];if(_===ae)continue;const x=this.m_shape.getNextVertex(_);if(this.m_shape.queryXY(_,s),(e?s.y===i:s.x===i)&&(this.m_shape.queryXY(x,s),e?s.y===i:s.x===i)){if(this.isCurve(_))continue;r===-1&&(r=this.m_shape.createUserIndex()),this.m_shape.getUserIndex(_,r)!==-2&&(n.push(_),this.m_shape.setUserIndex(_,r,-2)),this.m_shape.getUserIndex(x,r)!==-2&&(n.push(x),this.m_shape.setUserIndex(x,r,-2))}}if(n.length===0)return void(r!==-1&&this.m_shape.removeUserIndex(r));K(r!==-1),n.sort((f,y)=>this.compareVertices(f,y));for(let f=0,y=n.length;f<y;f++){const _=n[f];this.m_shape.setUserIndex(_,r,f)}const o=new Y,l=new Y;l.setNAN();let u=-1;for(let f=0,y=n.length;f<y;f++){this.progress_();const _=n[f];if(_!==ae&&(this.m_shape.queryXY(_,s),!s.isEqualPoint2D(l))){if(u!==-1)for(;;){let x=!1;const S=f;for(let P=u;P<S;P++){const A=n[P];if(A===ae)continue;let k=ae;const $=this.m_shape.getNextVertex(A);this.m_shape.queryXY($,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(A)||(k=$));let F=ae;const G=this.m_shape.getPrevVertex(A);if(this.m_shape.queryXY(G,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(G)||(F=G)),k===ae||F===ae){if(k!==ae||F!==ae){for(let V=P+1;V<f;V++){const B=n[V];if(B===ae)continue;const W=this.m_shape.getNextVertex(B);let J=ae;this.m_shape.queryXY(W,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(B)||(J=W));const re=this.m_shape.getPrevVertex(B);let se=ae;if(this.m_shape.queryXY(re,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(re)||(se=re)),J!==ae&&se!==ae){this.beforeRemoveVertex(B,n,r),this.m_shape.removeVertex(B,!1),this.beforeRemoveVertex(J,n,r),this.m_shape.removeVertex(J,!1),x=!0;break}if(k!==ae&&se!==ae){this.removeOverlap(n,A,k,B,se,r),x=!0;break}if(F!==ae&&J!==ae){this.removeOverlap(n,B,J,A,F,r),x=!0;break}}if(x)break}}else this.beforeRemoveVertex(A,n,r),this.m_shape.removeVertex(A,!1),this.beforeRemoveVertex(k,n,r),this.m_shape.removeVertex(k,!1),x=!0}if(!x)break}u=f,l.setCoordsPoint2D(s)}}this.m_shape.removeUserIndex(r)}beforeRemoveVertex(e,i,s){let n=this.m_shape.getUserIndex(e,s);K(n>=0),i[n]=ae,n=this.m_shape.getUserIndex(e,this.m_verticesOnExtentIndex),K(n>=0),this.m_verticesOnExtent[n]=ae;const r=this.m_shape.getPathFromVertex(e);r!==ae&&this.m_shape.getFirstVertex(r)===e&&(this.m_shape.setFirstVertex(r,ae),this.m_shape.setLastVertex(r,ae))}removeOverlap(e,i,s,n,r,o){this.m_shape.setNextVertex(i,n),this.m_shape.setPrevVertex(n,i),this.m_shape.setPrevVertex(s,r),this.m_shape.setNextVertex(r,s),this.beforeRemoveVertex(n,e,o),this.m_shape.removeVertexInternal(n,!1),this.beforeRemoveVertex(r,e,o),this.m_shape.removeVertexInternal(r,!0)}removeSpikesAlongPoles(){this.removeSpikesOnPole(this.m_extent.ymin),this.removeSpikesOnPole(this.m_extent.ymax)}removeSpikesOnPole(e){for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;i=this.m_shape.getNextPath(i)){const s=this.m_shape.getPathSize(i);if(s<3)continue;let n=this.m_shape.getFirstVertex(i);const r=new Y;this.m_shape.queryXY(n,r);let o=r.y===e&&!this.isCurve(n);n=this.m_shape.getNextVertex(n);const l=new Y;this.m_shape.queryXY(n,l);let u=l.y===e&&!this.isCurve(n);n=this.m_shape.getNextVertex(n);const f=new Y;for(let y=0,_=s-2;y<_;y++,n=this.m_shape.getNextVertex(n)){this.progress_(),this.m_shape.queryXY(n,f);const x=f.y===e;if(u&&o&&x&&(l.x-r.x)*(f.x-l.x)<=0){this.m_shape.removeVertex(this.m_shape.getPrevVertex(n),!1),l.setCoordsPoint2D(f),u=x&&!this.isCurve(n);continue}r.setCoordsPoint2D(l),o=u,l.setCoordsPoint2D(f),u=x&&!this.isCurve(n)}}}fixPaths(){for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){const l=this.m_verticesOnExtent[r];l!==ae&&this.m_shape.setPathToVertex(l,ae)}const e=this.m_shape.hasCurves();let i=0,s=0;for(let r=this.m_shape.getFirstPath(this.m_geometry);r!==ae;){const o=this.m_shape.getFirstVertex(r);if(o===ae||r!==this.m_shape.getPathFromVertex(o)){const f=r;r=this.m_shape.getNextPath(r),this.m_shape.setFirstVertex(f,ae),this.m_shape.removePathOnly(f);continue}let l=o,u=0;do this.m_shape.setPathToVertex(l,r),u++,l=this.m_shape.getNextVertex(l);while(l!==o);this.m_shape.setRingAreaValid(r,!1),this.m_shape.setLastVertex(r,this.m_shape.getPrevVertex(o)),this.m_shape.setPathSize(r,u),s+=u,i++,r=this.m_shape.getNextPath(r)}for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){let l=this.m_verticesOnExtent[r];if(l===ae)continue;let u=this.m_shape.getPathFromVertex(l);if(u!==ae)continue;u=this.m_shape.insertPath(this.m_geometry,ae);let f=!1,y=0;const _=l;do this.m_shape.setPathToVertex(l,u),y++,e&&y<=2&&(f||(f=this.isCurve(l))),l=this.m_shape.getNextVertex(l);while(l!==_);if(f?y===0:y<=2){let x=this.m_shape.getUserIndex(_,this.m_verticesOnExtentIndex);K(x>=0),this.m_verticesOnExtent[x]=ae;const S=this.m_shape.removeVertex(_,!1);y===2&&(x=this.m_shape.getUserIndex(S,this.m_verticesOnExtentIndex),x>=0&&(this.m_verticesOnExtent[x]=ae),this.m_shape.removeVertex(S,!1));const P=u;u=this.m_shape.getNextPath(u),this.m_shape.setFirstVertex(P,ae),this.m_shape.removePathOnly(P)}else this.m_shape.setClosedPath(u,!0),this.m_shape.setPathSize(u,y),this.m_shape.setFirstVertex(u,_),this.m_shape.setLastVertex(u,this.m_shape.getPrevVertex(_)),this.m_shape.setRingAreaValid(u,!1),s+=y,i++}this.m_shape.setGeometryPathCount(this.m_geometry,i),this.m_shape.setGeometryVertexCount(this.m_geometry,s);let n=0;for(let r=this.m_shape.getFirstGeometry();r!==ae;r=this.m_shape.getNextGeometry(r))n+=this.m_shape.getPointCount(r);this.m_shape.setTotalPointCount(n)}dbgCheckPathFirst(){}isCurve(e){return this.m_shape.getSegment(e)!==null}compareVertices(e,i){const s=new Y;this.m_shape.queryXY(e,s);const n=new Y;return this.m_shape.queryXY(i,n),s.compare(n)}clipPolesOut(e,i){return this.clipPolygonOrProjectedPolyline2(e,i)}}function ftt(t,e,i,s,n,r){return new kj(0,0,0,null,!1,So()).densifyEx(t,e,i,s,!1,r)}function M1e(t,e,i,s,n,r,o,l){r&&(r.length=0),o&&(o.length=0);const u=t.getGeometryType();if(u===me.enumLine)return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(Y.getNAN()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;if(u===me.enumBezier){if(!s)return r&&(r.push(t.getStartXY()),r.push(t.getControlPoint1()),r.push(t.getControlPoint2()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;const f=[];f.length=9;let y=t.getMonotonicPartParams(f.length,f);if(f.length=y,y=jI(t,i,f),o&&o.splice(0,0,...f.slice(0,y)),r){const _=new Qt;for(let x=1;x<y;x++){const S=f[x-1],P=f[x];t.queryCut(S,P,_,!0);const A=_.get();B6(A),x===1&&r.push(A.getStartXY()),r.push(A.getControlPoint1()),r.push(A.getControlPoint2()),r.push(A.getEndXY())}}return y-1}if(u===me.enumEllipticArc){const f=t;if(f.isDegenerateToLine()||f.isDegenerate(0))return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(Y.getNAN()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;if(s&&!f.isMonotoneQuickAndDirty()){const y=[];y.length=6;let _=f.getMonotonicPartParams(y.length,y);y.length=_,_=jI(t,i,y);let x=0;if(_>2){const S=new Qt,P=o||[];let A=0;for(let k=1;k<_;k++){const $=y[A],F=y[k];if(f.queryCut($,F,S,!0),S.get().isDegenerate(0))continue;const G=P.length,V=gie(k===1,S.get(),e,i,s,r,o);K(V>0),x+=V;const B=k===_-1,W=y[A],J=S.get().getSweepAngle()/f.getSweepAngle();for(let re=G,se=P.length;re<se;re++)if(P[re]=!B||re+1<se?W+P[re]*J:1,r){const oe=3*re,pe=f.getCoord2D(P[re]);r[oe].setCoordsPoint2D(pe),oe>0&&l7(r.slice(oe-3))}A=k}return x}}return gie(!0,f,e,i,s,r,o)}if(u===me.enumRationalBezier2){const f=t;if(s&&!f.isMonotoneQuickAndDirty()){const y=[];y.length=6;let _=f.getMonotonicPartParams(y.length,y);y.length=_,_=jI(t,i,y);let x=0;if(_>2){const S=new Qt,P=o||[];for(let A=1;A<_;A++){const k=y[A-1],$=y[A];f.queryCut(k,$,S,!0);const F=P.length;x+=yie(A===1,S.get());const G=A===_-1,V=y[A-1];for(let B=F,W=P.length;B<W;B++)if(P[B]=!G||B+1<W?V+P[B]:1,r){const J=3*B,re=f.getCoord2D(P[B]);r[J].setCoordsPoint2D(re),J>0&&s1e(r.slice(J-3))}}return x}}return yie()}if(u===me.enumBezier2){const f=t,y=Ge(Y,3);f.queryControlPoints(y);const _=new Oc;return _.constructFromQuadratic(y),M1e(_,e,i,s,n,r,o)}js("")}function kz(t,e,i,s,n,r,o,l,u){const f=t.getGeometryType();if(r&&(r.length=0,o.length=0),l&&(l.length=0),f===me.enumEllipticArc){const x=t;if(x.isDegenerateToLine()||x.isDegenerate(0))return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(t.getEndXY()),o.push(Number.NaN),o.push(Number.NaN),o.push(Number.NaN)),l&&(l.push(0),l.push(1)),1}const y=Vi(9,Number.NaN);let _;if(n)_=t.getMonotonicPartParams(y.length,y),y.length=_,_=jI(t,i,y);else{if(_=2,y[0]=0,y[1]=1,f===Vc.type){const x=t.getSweepAngle();if(x>.9*Math.PI){const S=2*Math.PI/3;Math.min(3,Math.trunc(x/S+.5))>2?(y[0]=0,y[1]=1/3,y[2]=2/3,y[3]=1,_=4):(y[0]=0,y[1]=.5,y[2]=1,_=3)}}else K(f===ba.type);y.length=_}if(r){const x=new Qt;let S=1;for(;S<_;){const P=y[S-1],A=y[S];t.queryCut(P,A,x,!0);const k=Ge(Y,3),$=[1,1,1];if(f===me.enumEllipticArc){const F=x.get();if(Math.abs(F.getSweepAngle())>.9*Math.PI){const G=(A-P)/3;y.splice(S,0,P+G),y.splice(S+1,0,P+2*G),_+=2;continue}$[1]=Mye(F,k)}else{const F=x.get();F.queryControlPoints(k),F.queryWeights($)}n&&B2(k),S===1&&(r.push(k[0].clone()),o.push($[0])),r.push(k[1].clone()),r.push(k[2].clone()),o.push($[1]),o.push($[2]),S++}}return l&&(l.length=_,dn(l,y,0,0,_)),_-1}let kj=class zd{static constructDefault(e){return new zd(0,0,0,e,!1,So())}constructor(e,i,s,n,r,o){this.m_segmentBuffer=null,this.m_dummyPoint=new Ut,this.m_progressCounter=0,this.m_progressTracker=n,this.m_bSetDensifyFlag=r,this.m_maxLength=e,this.m_maxDeviation=i,this.m_maxAngle=s>_a()?_a():s,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_maxSegmentsPerCurve=o,ME(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve}densify(e){return this.densifyGeom(e)}densifySegment(e,i){K(0)}densifyEx(e,i,s,n,r,o){return this.m_maxLength=i,this.m_maxDeviation=s,this.m_maxAngle=n>_a()?_a():n,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_bSetDensifyFlag=r,this.m_maxSegmentsPerCurve=o,ME(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve,this.densifyGeom(e)}densifyGeom(e){if(e.isEmpty()||e.getDimension()<1)return e;const i=e.getGeometryType();return YA(i)?e:bi(i)?this.densifyMultiPath(e):Dn(i)?this.densifySegmentImpl(e):i===me.enumEnvelope?this.densifyEnvelope(e):void bt("")}densifySegmentEx(e,i,s,n,r){const o=e.getGeometryType();if(!(this.m_maxLength>0||this.m_bOnlyCurveDensify&&o!==me.enumLine)&&(!n||s))return void(i?o===me.enumLine?i.addSegment(e,s):(s&&(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)),e.queryEnd(this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint)):(s&&r.push(0),r.push(1)));if(o===me.enumBezier)return void this.densifyCubicBezier(e,i,s,n,r);if(o===me.enumRationalBezier2)return void this.densifyRationalBezier2(e,i,s,n,r);if(o===me.enumBezier2)return void this.densifyBezier2(e,i,s,n,r);if(o===me.enumEllipticArc&&!e.isLine()&&e.getMinorMajorRatio()<.25)return void this.densifyEllipticArc(e,i,s,n,r);let l=1;this.m_maxLength>0&&(l=this.calculateLengthSubdivisionStep(e,this.m_maxLength)),this.m_maxDeviation>0&&(l=Math.min(l,this.calculateDeviationSubdivisionStep(e,this.m_maxDeviation))),this.m_maxAngle>0&&(l=Math.min(l,this.calculateAngularSubdivisionStep(e,this.m_maxAngle))),this.densifySegmentByLength(e,l,i,s,n,r)}densifyMultiPath(e){if(!e.hasNonLinearSegments()){if(e.getDescription().getAttributeCount()===1)return this.densifyMultiPathLinear(e);if(!(this.m_maxLength>0))return e}const i=e.createInstance();i.getGeometryType()===me.enumPolygon&&i.setFillRule(e.getFillRule()),i.reserve(e.getPointCount());const s=e.getImpl().querySegmentIterator();for(;s.nextPath();){let n=!0;for(;s.hasNextSegment();){const r=s.nextSegment(),o=s.isClosingSegment();this.densifySegmentEx(r,i,n,o,null),o&&i.closePathWithLine(),n=!1}}return i}densifySegmentImpl(e){const i=new vi({vd:e.getDescription()}),s=[0];return this.densifySegmentEx(e,i,!0,!1,s),i}densifyEnvelope(e){const i=new Wt({vd:e.getDescription()});i.addEnvelope(e,!1);const s=xe.constructEmpty();e.queryEnvelope(s);const n=s.width(),r=s.height();return!(this.m_maxLength>0)||n<=this.m_maxLength&&r<=this.m_maxLength?i:this.densifyMultiPath(i)}densifyMultiPathLinear(e){if(!(this.m_maxLength>0))return e;const i=e.createInstance();i.getGeometryType()===me.enumPolygon&&i.setFillRule(e.getFillRule()),i.reserve(e.getPointCount());const s=i.getImpl(),n=e.getImpl(),r=n.getAttributeStreamRef(0),o=new si;for(let l=0,u=n.getPathCount();l<u;l++){const f=n.isClosedPath(l);if(n.getPathSize(l)===0)continue;const y=n.getPathStart(l),_=r.readPoint2D(2*y),x=_.clone();s.startPath(_);for(let S=y+1,P=n.getPathEnd(l);S<P;S++){const A=r.readPoint2D(2*S),k=Y.distance(x,A);if(k>this.m_maxLength){let $=Math.ceil(k/this.m_maxLength);$>So()&&($=So());const F=1/$;let G,V,B;x.compare(A)<0?(o.setStartXY(x),o.setEndXY(A),G=0,V=1):(o.setStartXY(A),o.setEndXY(x),G=$-2,V=-1);for(let W=0,J=$-1;W<J;W++,G+=V){this.progress_(),B=F*(G+1);const re=new Y;o.queryCoord2D(B,re),s.lineTo(re),this.m_bSetDensifyFlag&&s.setAttribute(10,s.getPointCount()-1,0,1)}}else this.progress_();i.lineTo(A),x.assign(A)}if(f){const S=Y.distance(x,_);if(S>this.m_maxLength){const P=_;let A=Math.ceil(S/this.m_maxLength);A>So()&&(A=So());const k=1/A;let $,F;x.compare(P)<0?(o.setStartXY(x),o.setEndXY(P),$=0,F=1):(o.setStartXY(P),o.setEndXY(x),$=A-2,F=-1);const G=new Y(0,0);let V;for(let B=0,W=A-1;B<W;B++,$+=F)this.progress_(),V=k*($+1),o.queryCoord2D(V,G),s.lineTo(G),this.m_bSetDensifyFlag&&s.setAttribute(10,s.getPointCount()-1,0,1)}s.closePathWithLine()}}return i}densifySegmentByLength(e,i,s,n,r,o){K(e.getGeometryType()!==me.enumBezier);let l=e.getStartXY().compare(e.getEndXY());l===0&&i<1&&(e.getGeometryType()===me.enumEllipticArc?l=e.getSweepAngle()<0?1:-1:K(0));let u=0;if(n&&(s?(e.queryStart(this.m_dummyPoint),s.startPathPoint(this.m_dummyPoint)):o.push(0),++u),i*this.m_maxSegmentsPerCurve<1&&(i=1/this.m_maxSegmentsPerCurve),i<1){this.m_segmentBuffer||(this.m_segmentBuffer=new Qt);let f=Math.ceil(1/i);f>So()&&(f=So()),i=1/f,this.m_segmentBuffer.create(e.getGeometryType());let y,_,x,S=e;l<0?(y=0,_=1):(e.copyTo(this.m_segmentBuffer.get()),this.m_segmentBuffer.get().reverse(),y=f-2,_=-1,S=this.m_segmentBuffer.get());const P=f-1;for(let A=0;A<P;A++,y+=_)x=i*(y+1),s?(S.queryCoord(x,this.m_dummyPoint),s.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&x!==1&&x!==0&&s.setAttribute(10,s.getPointCount()-1,0,1)):o.push(l>0?1-x:x),this.progress_();x=1,u+=P}(!r||r&&n&&u<2)&&(s?(e.queryEnd(this.m_dummyPoint),s.lineToPoint(this.m_dummyPoint)):o.push(1))}densifyCubicBezier(e,i,s,n,r){const o=new Oc;let l=e;const u=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());if(f===0&&u>0){const k=Ge(Y,4);e.queryControlPoints(k),f=k[1].compare(k[2]),f===0&&(f=k[1].compare(k[0]))}f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=[],x=[],S=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve));let P=!0,A=0;if(f>0)for(_.push([l.getStartXY(),l.getControlPoint1(),l.getControlPoint2(),l.getEndXY(),new Y(0,1)]),x.push(0);_.length;){this.progress_();const k=_.at(-1),$=x.at(-1),F=k[4].x,G=k[4].y;if($<S&&this.bezierNeedsSplit(k)){P&&(A=l.findMinDeriv(),P=!1);let V=.5*(F+G);Math.abs(A-V)<.4*(G-F)&&(V=A);const B=(V-F)/(G-F),W=k[0].mul(1-B).add(k[1].mul(B)),J=k[1].mul(1-B).add(k[2].mul(B)),re=k[2].mul(1-B).add(k[3].mul(B)),se=W.mul(1-B).add(J.mul(B)),oe=J.mul(1-B).add(re.mul(B)),pe=se.mul(1-B).add(oe.mul(B)),ce=k[3];k[1]=W,k[2]=se,k[3]=pe,k[4].setCoords(F,V);const ue=[pe,oe,re,ce,new Y(V,G)];_.push(ue),x[x.length-1]=$+1,x.push($+1)}else _.pop(),x.pop(),(_.length>0||!n||n&&s&&y<2)&&(i?(l.queryCoord(F,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&F!==1&&F!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(1-F),++y)}else for(_.push([l.getStartXY(),l.getControlPoint1(),l.getControlPoint2(),l.getEndXY(),new Y(0,1)]),x.push(0);_.length;){this.progress_();const k=_.at(-1),$=x.at(-1),F=k[4].x,G=k[4].y;if($<S&&this.bezierNeedsSplit(k)){P&&(A=l.findMinDeriv(),P=!1);let V=.5*(F+G);Math.abs(A-V)<.4*(G-F)&&(V=A);const B=(V-F)/(G-F),W=k[0].mul(1-B).add(k[1].mul(B)),J=k[1].mul(1-B).add(k[2].mul(B)),re=k[2].mul(1-B).add(k[3].mul(B)),se=W.mul(1-B).add(J.mul(B)),oe=J.mul(1-B).add(re.mul(B)),pe=se.mul(1-B).add(oe.mul(B)),ce=k[0];k[0]=pe,k[1]=oe,k[2]=re,k[4].setCoords(V,G);const ue=[ce,W,se,pe,new Y(F,V)];_.push(ue),x[x.length-1]=$+1,x.push($+1)}else _.pop(),x.pop(),(_.length>0||!n||n&&s&&y<2)&&(i?(l.queryCoord(G,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&G!==1&&G!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(G),++y)}}densifyRationalBezier2(e,i,s,n,r){const o=new ba;let l=e;const u=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&u>0&&(f=0),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),x=new ba,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),k=P.at(-1);if(k<_&&this.rationalBezier2NeedsSplit(l,x,A.vmin,A.vmax)){const $=A.getCenter();f>0?(S.at(-1).vmax=$,S.push(new Ze($,A.vmax))):(S.at(-1).vmin=$,S.push(new Ze(A.vmin,$))),P[P.length-1]=k+1,P.push(k+1)}else if(S.pop(),P.pop(),S.length>0||!n||n&&s&&y<2){const $=f>0?A.vmin:A.vmax;i?(l.queryCoord($,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&$!==1&&$!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-$:$),++y}}}densifyBezier2(e,i,s,n,r){const o=new am;let l=e;const u=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&u>0&&(f=0),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.ceil(Math.log2(this.m_maxSegmentsPerCurve)),x=new am,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),k=P.at(-1);if(k<_&&this.bezier2NeedsSplit(l,x,A.vmin,A.vmax)){const $=A.getCenter();f>0?(S.at(-1).vmax=$,S.push(new Ze($,A.vmax))):(S.at(-1).vmin=$,S.push(new Ze(A.vmin,$))),P[P.length-1]=k+1,P.push(k+1)}else if(S.pop(),P.pop(),S.length>0||!n||n&&s&&y<2){const $=f>0?A.vmin:A.vmax;i?(l.queryCoord($,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&$!==1&&$!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-$:$),++y}}}densifyEllipticArc(e,i,s,n,r){const o=new Vc;let l=e;const u=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&u>0&&(f=e.isClockwise()?0:1),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),x=new Vc,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),k=P.at(-1);if(k<_&&this.ellipticArcNeedsSplit(l,x,A.vmin,A.vmax)){const $=A.getCenter();f>0?(S.at(-1).vmax=$,S.push(new Ze($,A.vmax))):(S.at(-1).vmin=$,S.push(new Ze(A.vmin,$))),P[P.length-1]=k+1,P.push(k+1)}else if(S.pop(),P.pop(),S.length>0||!n||n&&s&&y<2){const $=f>0?A.vmin:A.vmax;i?(l.queryCoord($,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&$!==1&&$!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-$:$),++y}}}calculateLengthSubdivisionStep(e,i){const s=e.calculateUpperLength2D();if(!e.isCurve())return s?i/s:1;if(e.getGeometryType()===me.enumEllipticArc){const n=e;if(n.isCircular()||n.isDegenerate(0)||n.isDegenerateToLine()){let r=i/s;return r<this.m_minStep&&(r=this.m_minStep),r}return i/s*n.getSemiAxes().y/n.getSemiAxes().x}e.getGeometryType()===me.enumBezier&&js(""),js("")}calculateDeviationSubdivisionStep(e,i){if(!e.isCurve())return 1;if(e.getGeometryType()===me.enumEllipticArc){const s=e;if(s.isDegenerate(0)||s.isDegenerateToLine())return 1;{const n=s.getSemiMajorAxis(),r=1-i/n;let o=Math.PI/2;if(r>0){const u=4*Math.sqrt(i/n*.5);o=Math.min(Math.PI/2,Math.abs(u))}o=Math.max(o,2*Math.PI/this.m_maxSegmentsPerCurve);const l=o*n;return this.calculateLengthSubdivisionStep(e,l)}}js("")}calculateAngularSubdivisionStep(e,i){if(!e.isCurve())return 1;if(e.getGeometryType()===me.enumEllipticArc){const s=e;return s.isDegenerate(0)||s.isDegenerateToLine()?1:this.calculateLengthSubdivisionStep(e,i*s.getSemiMinorAxis())}js("")}rationalBezier2NeedsSplit(e,i,s,n){e.cutBezierIgnoreAttributes(s,n,i);let r=!1;if(this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength)return r=!0,!0;const o=Ge(Y,3);i.queryControlPoints(o);const l=[0,0,0];return i.queryWeights(l),!r&&this.m_maxDeviation>0&&(r=!zd.checkRationalBezier2MaxDeviation(o,l,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!zd.checkRationalBezier2MaxAngle(o,l,this.m_cosMaxAngle)),r}bezier2NeedsSplit(e,i,s,n){e.cutBezierIgnoreAttributes(s,n,i);let r=!1;if(this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength)return r=!0,!0;const o=Ge(Y,3);return i.queryControlPoints(o),!r&&this.m_maxDeviation>0&&(r=!zd.checkBezier2MaxDeviation(o,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!zd.checkBezier2MaxAngle(o,this.m_cosMaxAngle)),r}ellipticArcNeedsSplit(e,i,s,n){e.cutArcIgnoreAttributes(s,n,i);let r=!1;return this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength?(r=!0,!0):(!r&&this.m_maxDeviation>0&&(r=!zd.checkEllipticArcMaxDeviation(i,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!zd.checkEllipticArcMaxAngle(i,this.m_cosMaxAngle)),r)}bezierNeedsSplit(e){let i=!1;return this.m_maxLength>0&&Y.distance(e[0],e[1])+Y.distance(e[1],e[2])+Y.distance(e[2],e[3])>this.m_maxLength?(i=!0,!0):(!i&&this.m_maxDeviation>0&&(i=!zd.checkBezierMaxDeviation(e,this.m_maxDeviation)),!i&&this.m_maxAngle>0&&(i=!zd.checkBezierMaxAngle(e,this.m_cosMaxAngle)),i)}progress_(){}static checkBezierMaxDeviation(e,i){const s=e[3].sub(e[0]);if(s.sqrLength()>0){const n=s.clone();n.leftPerpendicularThis(),n.normalize();const r=n.dotProduct(e[0].sub(e[1])),o=n.dotProduct(e[0].sub(e[2]));if(Math.max(Math.abs(r),Math.abs(o))<=i){const l=new Y;Mn(e,.5,l,!1);const u=l.sub(e[0]).dotProduct(s);return u>=0&&u<=s.sqrLength()}return!1}return Math.max(e[0].sub(e[1]).sqrLength(),e[0].sub(e[2]).sqrLength())<=i*i}static checkBezierMaxAngle(e,i){if(e[0].equals(e[3]))return!(!e[0].equals(e[1])||!e[1].equals(e[2]));const s=e[3].sub(e[0]);s.normalize();{const n=e[1].sub(e[0]),r=n.dotProduct(s);if(r<0||n.length()*i>r)return!1}{const n=e[2].sub(e[0]),r=n.dotProduct(s);if(r<0||n.length()*i>r)return!1}{const n=e[2].sub(e[1]),r=n.dotProduct(s);if(r<0||n.length()*i>r)return!1}return!0}static checkRationalBezier2MaxDeviation(e,i,s){if(i[1]===0)return!1;const n=e[2].sub(e[0]);if(n.sqrLength()>0){const r=n.clone();r.leftPerpendicularThis(),r.normalize();const o=r.dotProduct(e[0].sub(e[1]));if(Math.abs(o)<=s){const l=e[1].sub(e[0]).dotProduct(n);return l>=0&&l<=n.sqrLength()}return!1}return e[0].sub(e[1]).sqrLength()<=s*s}static checkRationalBezier2MaxAngle(e,i,s){return K(0),!1}static checkBezier2MaxDeviation(e,i){const s=e[2].sub(e[0]);if(s.sqrLength()>0){const n=s.clone();n.leftPerpendicularThis(),n.normalize();const r=n.dotProduct(e[0].sub(e[1]));if(Math.abs(r)<=i){const o=e[1].sub(e[0]).dotProduct(s);return o>=0&&o<=s.sqrLength()}return!1}return e[0].sub(e[1]).sqrLength()<=i*i}static checkBezier2MaxAngle(e,i){return K(0),!1}static checkEllipticArcMaxDeviation(e,i){if(Math.abs(e.getSweepAngle())<Math.PI){const r=e.getEndXY().sub(e.getStartXY()),o=[0,0];if(yot(e,r,o)===1){const l=e.getCoord2D(o[0]),u=Y.getClosestCoordinate(e.getStartXY(),e.getEndXY(),l),f=new Y;return ar(e.getStartXY(),e.getEndXY(),u,f),Y.distance(l,f)<=i}}const s=e.getCoord2D(.5),n=new Y;return ar(e.getEndXY(),e.getStartXY(),.5,n),Y.distance(s,n)<=i}static checkEllipticArcMaxAngle(e,i){return K(0),!1}static checkTypeForReplace(e,i){return K(0),!1}};function jI(t,e,i){const s=i.length;if(e<=0||s<=2)return s;let n=0;const r=[];r.length=s-1;for(let o=1,l=s;o<l;o++){const u=t.tToLength(i[o]);r[o-1]=u-n,n=u}for(;r.length>1;){const o=r.findIndex(f=>f<=2*e);if(o===-1)break;let l=o+1,u=o+1;if(o>0){const f=o-1;(u===r.length||r[f]>r[u])&&(u=f,l--)}r[u]+=r[o],r.splice(o,1),i.splice(l,1)}return i.length}function gie(t,e,i,s,n,r,o,l){const u=e.clone();u.dropAllAttributes();const f=(Pe,Re,Oe,we)=>(Re&&(Pe&&Re.push(we.getStartXY()),Re.push(Y.getNAN()),Re.push(Y.getNAN()),Re.push(we.getEndXY())),Oe&&(Pe&&Oe.push(0),Oe.push(1)),1);if(u.isDegenerateToLine()||u.isDegenerate(0))return f(t,r,o,e);const y=u.getStartXY(),_=u.getEndXY(),x=u.getSemiAxes(),S=new _i;if(u.isCircular())S.setIdentity();else{const Pe=u.getAxisXRotation();S.setScaleCoords(1,u.getMinorMajorRatio()),S.rotateAngle(Pe)}const P=u.getCenter();S.shift(P);const A=S.clone();A.invertThis(),u.applyTransformation(A);const k=u.getSweepAngle();if(k===0)return f(t,r,o,e);const $=xe.constructEmpty();$.setCoords({center:P,width:2*x.x,height:2*x.x});const F=.05*$.calculateToleranceFromEnvelope(),G=Math.max(i/x.x,F/x.x);let V=4*Math.pow(G/.0741,1/6);V=Math.min(V,Math.PI/2);const B=E1e(u.getStartAngle());let W=k>0?Math.floor(B/V):Math.ceil(B/V);W*=V;const J=k>0?V:-V;W+J===B&&(W+=J);let re=4/3*Math.tan(Math.abs(V)/4);k>0&&(re=-re),o&&t&&o.push(0);const se=V/Math.abs(k);let oe=(W-B)/k;const pe=y.clone(),ce=new Y;u.queryCoord2D(0,ce);const ue=ce.clone(),ne=1-.01*se;let de=0,Se=0;for(;oe<1;){let Pe;if(oe+=se,Se>0&&oe<ne)Pe=re;else{oe>=ne&&(oe=1);const it=(oe-Se)*k;Pe=4/3*Math.tan(Math.abs(it)/4),k>0&&(Pe=-Pe)}u.queryCoord2D(oe,ce);const Re=new Y;S.queryTransform(ce,Re);const Oe=e.getClosestCoordinate(Re,!1);if(e.queryCoord2D(Oe,Re),oe!==1&&(Y.distance(pe,Re)<=2*s||Y.distance(Re,_)<=2*s))continue;pe.setCoordsPoint2D(Re);const we=Ge(Y,4);we[0].assign(ue),we[3].assign(ce),we[1].rightPerpendicularOther(ue),we[1].scaleAddThis(Pe,ue),we[2].leftPerpendicularOther(ce),we[2].scaleAddThis(Pe,ce),S.transformPoints2D(we,3,we),we[3].assign(Re),Se===0&&we[0].setCoordsPoint2D(y),oe===1&&we[3].setCoordsPoint2D(_),n&&l7(we);let Fe=!0;for(let it=1;it<4;it++)if(!we[it].isEqualPoint2D(we[0])){Fe=!1;break}Fe||(o&&o.push(Oe),r&&(Se===0&&t&&r.push(we[0].clone()),r.push(we[1].clone()),r.push(we[2].clone()),r.push(we[3].clone())),de++),Se=oe,ue.setCoordsPoint2D(ce)}return de}function yie(t,e,i,s,n,r,o,l){return K(0),0}var fa,H0,ptt=kj;class mtt extends Ca{constructor(e,i,s,n,r,o){super(),this.m_densificator=new ptt(i,s,n,o,!1,r),this.m_index=-1,this.m_inputGeoms=e}tock(){return!0}getRank(){return 1}next(){let e=null;for(;e=this.m_inputGeoms.next();)return Ku(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.densify(e);return null}getGeometryID(){return this.m_index}densify(e){return this.m_densificator.densify(e)}}class X0{getOperatorType(){return 10202}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}executeMany(e,i,s,n,r,o=12e3){return new mtt(e,i,s,n,o,r)}execute(e,i,s,n,r,o=12e3){return ftt(e,i,s,n,r,o)}}class c7{constructor(e){this.m_currentShift=63n,this.m_currentElt=0n,this.m_iCurrentElt=-1,this.m_parent=e,this.m_aiSetElts=e.m_bits.flatMap((i,s)=>s)}next(){if(this.m_currentShift++,this.m_currentShift===64n){if(this.m_iCurrentElt++,this.m_iCurrentElt===this.m_aiSetElts.length)return c7.npos();this.m_currentShift=0n,this.m_currentElt=this.m_parent.m_bits[this.m_aiSetElts[this.m_iCurrentElt]]}for(;this.m_currentShift<63n&&!(this.m_currentElt&1n<<this.m_currentShift);)this.m_currentShift++;return this.m_currentElt&1n<<this.m_currentShift?64*this.m_aiSetElts[this.m_iCurrentElt]+Number(this.m_currentShift):this.next()}static npos(){return Number.MAX_SAFE_INTEGER}}function AN(t){return 1n<<(0x3fn&BigInt(t))}function DN(t){return t>>6}class gh{constructor(e){this.m_bits=[],e!==void 0&&e.copy&&(this.m_bits=e.copy.m_bits.slice())}assignMove(){return this}assignCopy(){return this}hasBit(e){const i=AN(e),s=DN(e);return this.m_bits[s]!==void 0&&!!(this.m_bits[s]&i)}setBit(e){const i=AN(e),s=DN(e);this.m_bits[s]===void 0&&(this.m_bits[s]=0n),this.m_bits[s]|=i}clearBit(e){}flipBit(e){const i=AN(e),s=DN(e);return this.m_bits[s]===void 0&&(this.m_bits[s]=0n),this.m_bits[s]^=i,(this.m_bits[s]&i)!==0n}clear(){this.m_bits.length=0}isZero(){let e=0;return this.m_bits.forEach(i=>{e|=i?2:1}),!(2&e)}equals(e){if(this===e)return!0;if(this.m_bits.length!==e.m_bits.length)return!1;let i=0;return this.m_bits.forEach((s,n)=>{i|=s===e.m_bits[n]?2:1}),!(1&i)&&(e.m_bits.forEach((s,n)=>{i|=s===this.m_bits[n]?2:1}),!(1&i))}notEquals(e){return!this.equals(e)}assignOr(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]===void 0?this.m_bits[s]=i:this.m_bits[s]|=i}),this}assignSubtract(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]!==void 0&&(this.m_bits[s]&=~i)}),this}assignAnd(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]!==void 0&&(this.m_bits[s]&=i)}),this}assignXor(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]===void 0?this.m_bits[s]=i:this.m_bits[s]^=i}),this}getHashCode(){return this.m_bits.reduce((e,i)=>iJe(e,i),tf(0))}getUnorderedBitIterator(){return new c7(this)}}class gtt{constructor(e,i){this.m_map=new Map,this.m_hf=e,this.m_ef=i}add(e){const i=this.m_hf(e);if(!this.m_map.has(i))return this.m_map.set(i,e),this;const s=this.m_map.get(i);return s instanceof Array?s.find(n=>this.m_ef(n,e))||s.push(e):this.m_ef(s,e)||this.m_map.set(i,[s,e]),this}clear(){this.m_map.clear()}delete(e){return!1}has(e){const i=this.m_hf(e);if(!this.m_map.has(i))return!1;const s=this.m_map.get(i);return s instanceof Array?s.find(n=>this.m_ef(n,e))!==void 0:this.m_ef(s,e)}get(e){const i=this.m_hf(e),s=this.m_map.get(i);if(s!==void 0)return s instanceof Array?s.find(n=>this.m_ef(n,e)):s}get size(){let e=0;for(const i of this.m_map.values())e+=i instanceof Array?i.length:1;return e}forEach(e,i){}[Symbol.iterator](){return new Set()[Symbol.iterator]()}entries(){return new Set().entries()}keys(){return new Set().keys()}values(){return new Set().values()}get[Symbol.toStringTag](){return"ValueSet"}}class ytt extends Vv{constructor(e){super(),this.m_bufferLeft=new Qt,this.m_bufferRight=new Qt,this.m_intervalLeft=Ze.constructEmpty(),this.m_intervalRight=Ze.constructEmpty(),this.m_yScanline=Number.NaN,this.m_helper=e}compare(e,i,s){const n=i,r=e.getElement(s);this.m_helper.querySegmentXY(n,this.m_bufferLeft),this.m_helper.querySegmentXY(r,this.m_bufferRight);const o=this.m_bufferLeft.get(),l=this.m_bufferRight.get();if(this.m_intervalLeft.setCoords(o.getStartX(),o.getEndX()),this.m_intervalRight.setCoords(l.getStartX(),l.getEndX()),this.m_intervalLeft.vmax<this.m_intervalRight.vmin)return-1;if(this.m_intervalLeft.vmin>this.m_intervalRight.vmax)return 1;const u=o.getStartY()===o.getEndY(),f=l.getStartY()===l.getEndY();if(u||f){if(u&&f)return 0;if(o.getStartY()===l.getStartY()&&o.getStartX()===l.getStartX())return u?1:-1;if(o.getEndY()===l.getEndY()&&o.getEndX()===l.getEndX())return u?-1:1}let y=o.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalLeft.vmin),_=l.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalRight.vmin);if(y===_){const x=o.getEndY(),S=l.getEndY(),P=Math.min(x,S);let A=.5*(P+this.m_yScanline);A===this.m_yScanline&&(A=P),y=o.intersectionOfYMonotonicWithAxisX(A,this.m_intervalLeft.vmin),_=l.intersectionOfYMonotonicWithAxisX(A,this.m_intervalRight.vmin)}return y<_?-1:y>_?1:0}setY(e){this.m_yScanline=e}}class vtt{constructor(e){this.m_segmentBuffer=new Qt,this.m_point=Y.getNAN(),this.m_parent=e}setPointXY(e){this.m_point.assign(e)}compare(e,i){const s=e.getElement(i);this.m_parent.querySegmentXY(s,this.m_segmentBuffer);const n=this.m_segmentBuffer.get(),r=new Ze;if(r.setCoords(n.getStartX(),n.getEndX()),this.m_point.x<r.vmin)return-1;if(this.m_point.x>r.vmax)return 1;const o=n.intersectionOfYMonotonicWithAxisX(this.m_point.y,this.m_point.x);return this.m_point.x<o?-1:this.m_point.x>o?1:0}}function vie(t,e){return{parentage:t,rank:e}}function _tt(t,e){const i=t.length;if(i!==e.length)return!1;const s=t[0].parentage;if(s!==e[0].parentage)return!1;if(s===-1)return!0;for(let n=1;n<i;++n)if(t[n].parentage!==e[n].parentage)return!1;return!0}function _ie(t,e,i){i.length=0;let s=!1;{let n=t.getHalfEdgeVertexIterator(e);for(;n!==ae;){const r=t.getVertexFromVertexIterator(n),o=t.getShape().getSegmentRank(r),l=t.getShape().getSegmentParentage(r);s||(s=l>=0),i.push(vie(l,o)),n=t.incrementVertexIterator(n)}}{let n=t.getHalfEdgeVertexIterator(t.getHalfEdgeTwin(e));for(;n!==ae;){const r=t.getVertexFromVertexIterator(n),o=t.getShape().getSegmentRank(r),l=t.getShape().getSegmentParentage(r);s||(s=l>=0),i.push(vie(l,o)),n=t.incrementVertexIterator(n)}}s&&i.sort((n,r)=>n.rank>r.rank?-1:n.rank<r.rank?1:n.parentage<r.parentage?-1:n.parentage>r.parentage?1:0),i[0].parentage===-1&&(i.length=1)}function btt(){return new gtt(t=>t.getHashCode(),(t,e)=>t.equals(e))}(function(t){t[t.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",t[t.enumInputModeSimplifyAlternate=1]="enumInputModeSimplifyAlternate",t[t.enumInputModeSimplifyWinding=2]="enumInputModeSimplifyWinding"})(fa||(fa={})),function(t){t[t.enumSegmentParentageBreakNode=1]="enumSegmentParentageBreakNode",t[t.enumPathBreakNode=2]="enumPathBreakNode"}(H0||(H0={}));class qh{constructor(){this.m_shape=null,this.m_clusterData=new Yt(8),this.m_clusterVertices=new Yt(2),this.m_firstCluster=ae,this.m_lastCluster=ae,this.m_halfEdgeData=new Yt(8),this.m_chainData=new Yt(8),this.m_chainAreas=null,this.m_chainPerimeters=null,this.m_universeChain=-1,this.m_simplifiedGeometry=-1,this.m_edgeIndices=[],this.m_clusterIndices=[],this.m_chainIndices=[],this.m_bBuildGeometryParentageSets=!1,this.m_chainBitSetIndex=-1,this.m_edgeBitSetIndex=-1,this.m_edgeBitSetIndexLeft=-1,this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_uniqueBitSets=null,this.m_chainBitSets=[],this.m_edgeBitSets=[],this.m_checkDirtyPlanesweepTolerance=Number.NaN,this.m_geometryIDIndex=-1,this.m_clusterIndex=-1,this.m_halfEdgeIndex=-1,this.m_tmpHalfEdgeParentageIndex=-1,this.m_tmpHalfEdgeParentageIndexLeft=-1,this.m_tmpHalfEdgeWindingNumberIndex=-1,this.m_tmpHalfEdgeOddEvenNumberIndex=-1,this.m_segmentParentageIndex=-1,this.m_segmentIndexHe=-1,this.m_clusterBreakNodeIndex=-1,this.m_universeGeomID=-1,this.m_pointCount=0,this.m_progressCounter=0,this.m_bBuildChains=!0,this.m_bDirtyCheckFailed=!1}setCheckDirtyPlanesweepTolerance(e){this.m_checkDirtyPlanesweepTolerance=e}dirtyCheckFailed(){return this.m_bDirtyCheckFailed}getShape(){return this.m_shape}setEditShape(e,i,s=!0,n=!1){n?this.setEditShapeImpl3D_(e,fa.enumInputModeBuildGraph,null,i,!1):this.setEditShapeImpl_(e,fa.enumInputModeBuildGraph,null,i,s)}setAndSimplifyEditShapeAlternate(e,i,s=null,n=!1){const r=[];r.push(i),this.m_simplifiedGeometry=i,n?this.setEditShapeImpl3D_(e,fa.enumInputModeSimplifyAlternate,r,s,!1):this.setEditShapeImpl_(e,fa.enumInputModeSimplifyAlternate,r,s,e.getGeometryType(i)===me.enumPolygon)}setAndSimplifyEditShapeWinding(e,i,s=null){const n=[];n.push(i),this.m_simplifiedGeometry=i,this.setEditShapeImpl_(e,fa.enumInputModeSimplifyWinding,n,s,!0)}removeShape(){this.m_shape!==null&&(this.m_geometryIDIndex!==-1&&(this.m_shape.removeGeometryUserIndex(this.m_geometryIDIndex),this.m_geometryIDIndex=-1),this.m_clusterIndex!==-1&&(this.m_shape.removeUserIndex(this.m_clusterIndex),this.m_clusterIndex=-1),this.m_halfEdgeIndex!==-1&&(this.m_shape.removeUserIndex(this.m_halfEdgeIndex),this.m_halfEdgeIndex=-1),this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.m_tmpHalfEdgeWindingNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),this.m_tmpHalfEdgeOddEvenNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1),this.m_segmentParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_segmentIndexHe!==-1&&(this.deleteUserIndexForHalfEdges(this.m_segmentIndexHe),this.m_segmentIndexHe=-1),this.m_clusterBreakNodeIndex!==-1&&(this.deleteUserIndexForClusters(this.m_clusterBreakNodeIndex),this.m_clusterBreakNodeIndex=-1),this.deleteEdgeBitSets_(),this.deleteChainBitSets_(),this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_shape=null,this.m_clusterData.deleteAll(!0),this.m_clusterVertices.deleteAll(!0),this.m_firstCluster=ae,this.m_lastCluster=ae,this.m_halfEdgeData.deleteAll(!0),this.m_edgeIndices.length=0,this.m_clusterIndices.length=0,this.m_chainIndices.length=0,this.m_chainData.deleteAll(!0),this.m_universeChain=ae,this.m_chainAreas=null)}getClusterHalfEdge(e){return this.m_clusterData.getField(e,2)}queryXY(e,i){const s=this.getClusterVertexIndex_(e);i.assign(this.m_shape.getXYWithIndex(s))}queryXYZ(e,i){K(0)}getClusterParentage(e){return this.m_clusterData.getField(e,1)}getFirstCluster(){return this.m_firstCluster}getPrevCluster(e){return this.m_clusterData.getField(e,3)}getNextCluster(e){return this.m_clusterData.getField(e,4)}getClusterChain(e){return this.m_clusterData.getField(e,6)}getClusterVertexIterator(e){return this.m_clusterData.getField(e,7)}incrementVertexIterator(e){return this.m_clusterVertices.getField(e,1)}getVertexFromVertexIterator(e){return this.m_clusterVertices.getField(e,0)}getClusterUserIndex(e,i){const s=this.getClusterIndex_(e),n=this.m_clusterIndices[i];return n.size()<=s?-1:n.read(s)}setClusterUserIndex(e,i,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[i];r.size()<=n&&r.resize(this.m_clusterData.size(),-1),r.write(n,s)}hasClusterUserIndexFlags(e,i,s){if(i===-1)return!1;const n=this.getClusterUserIndex(e,i);return n!==-1&&!!(s&n)}setClusterUserIndexFlags(e,i,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[i];r.size()<=n&&r.resize(this.m_clusterData.size(),-1);let o=r.read(n);o===-1&&(o=0),r.write(n,s|o)}clearClusterUserIndexFlags(e,i,s){K(0)}createUserIndexForClusters(e=-1){const i=new Ns(this.m_clusterData.capacity(),e);for(let s=0,n=this.m_clusterIndices.length;s<n;s++)if(this.m_clusterIndices[s]===null)return this.m_clusterIndices[s]=i,s;return this.m_clusterIndices.push(i),this.m_clusterIndices.length-1}deleteUserIndexForClusters(e){this.m_clusterIndices[e]=null}getHalfEdgeOrigin(e){return this.m_halfEdgeData.getField(e,1)}getHalfEdgeTo(e){return this.getHalfEdgeOrigin(this.getHalfEdgeTwin(e))}getHalfEdgeTwin(e){return this.m_halfEdgeData.getField(e,4)}getHalfEdgePrev(e){return this.m_halfEdgeData.getField(e,5)}getHalfEdgeNext(e){return this.m_halfEdgeData.getField(e,6)}getHalfEdgeChain(e){return this.m_halfEdgeData.getField(e,2)}getHalfEdgeFaceParentage(e){return this.getChainParentage(this.getHalfEdgeChain(e))}getHalfEdgeVertexIterator(e){return this.m_halfEdgeData.getField(e,7)}getHalfEdgeFromXY(e,i){this.queryXY(this.getHalfEdgeOrigin(e),i)}getHalfEdgeToXY(e,i){this.queryXY(this.getHalfEdgeTo(e),i)}isHalfEdgeCurve(e){return this.m_segmentIndexHe!==-1?this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)!==-1:!1}getHalfEdgeFromXYZ(e,i){K(0)}getHalfEdgeToXYZ(e,i){K(0)}getHalfEdgeParentage(e){return this.m_halfEdgeData.getField(e,3)&qh.c_EdgeParentageMask}getHalfEdgeUserIndex(e,i){const s=this.getHalfEdgeIndex_(e),n=this.m_edgeIndices[i];return n.size()<=s?-1:n.read(s)}setHalfEdgeUserIndex(e,i,s){const n=this.getHalfEdgeIndex_(e),r=this.m_edgeIndices[i];r.size()<=n&&r.resize(this.m_halfEdgeData.size(),-1),r.write(n,s)}createUserIndexForHalfEdges(e){e===void 0&&(e=-1);const i=new Ns(this.m_halfEdgeData.capacity(),e);for(let n=0,r=this.m_edgeIndices.length;n<r;n++)if(this.m_edgeIndices[n]===null)return this.m_edgeIndices[n]=i,n;this.m_edgeIndices.push(i);const s=this.m_edgeIndices.length-1;return K(s>=0&&s<=Number.MAX_SAFE_INTEGER),s}deleteUserIndexForHalfEdges(e){this.m_edgeIndices[e]=null}deleteEdgesBreakFaces_(e){for(let i=0,s=e.length;i<s;i++){const n=e[i],r=this.getHalfEdgeChain(n),o=this.getHalfEdgeTwin(n),l=this.getHalfEdgeChain(o);this.setChainHalfEdge_(r,ae),this.setChainHalfEdge_(l,ae),this.updateVertexToHalfEdgeConnection_(n,!0),this.deleteEdgeImpl_(n)}}doesHalfEdgeBelongToAPolygonInterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolygonExterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolygonBoundary(e,i){return K(0),!1}doesHalfEdgeBelongToAPolylineInterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolylineExterior(e,i){return K(0),!1}doesClusterBelongToAPolygonInterior(e,i){return K(0),!1}doesClusterBelongToAPolygonExterior(e,i){return K(0),!1}doesClusterBelongToAPolygonBoundary(e,i){return K(0),!1}getFirstChain(){return this.m_universeChain}getChainHalfEdge(e){return this.m_chainData.getField(e,1)}getChainParentage(e){return this.m_chainData.getField(e,2)}getChainParent(e){return this.m_chainData.getField(e,3)}getChainFirstIsland(e){return this.m_chainData.getField(e,4)}getChainNextInParent(e){return this.m_chainData.getField(e,5)}getChainNext(e){return this.m_chainData.getField(e,7)}getChainArea(e){const i=this.getChainIndex_(e);let s=this.m_chainAreas.read(i);return Number.isNaN(s)&&(this.updateChainAreaAndPerimeter_(e),s=this.m_chainAreas.read(i)),s}getChainPerimeter(e){return K(0),0}getChainUserIndex(e,i){const s=this.getChainIndex_(e),n=this.m_chainIndices[i];return n.size()<=s?-1:n.read(s)}setChainUserIndex(e,i,s){const n=this.getChainIndex_(e),r=this.m_chainIndices[i];r.size()<=n&&r.resize(this.m_chainData.size(),-1),r.write(n,s)}createUserIndexForChains(){const e=new Ns(this.m_chainData.capacity(),-1);for(let i=0,s=this.m_chainIndices.length;i<s;i++)if(this.m_chainIndices[i]===null)return this.m_chainIndices[i]=e,i;return this.m_chainIndices.push(e),this.m_chainIndices.length-1}deleteUserIndexForChains(e){K(0)}extractPolygonFromChainAndIslands(e,i,s,n){const r=i===ae?e.createGeometry(me.enumPolygon):i,o=new Qt;this.extractPolygonPathFromChain_(e,r,s,n,o);for(let l=this.getChainFirstIsland(s);l!==ae;l=this.getChainNextInParent(l))this.extractPolygonPathFromChain_(e,r,l,n,o);return r}getGeometryID(e){const i=this.m_shape.getGeometryUserIndex(e,this.m_geometryIDIndex);return K(i>=0),1<<Math.min(i,31)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_clusterIndex)}getHalfEdgeFromVertex(e){return this.m_shape.getUserIndex(e,this.m_halfEdgeIndex)}buildGeometryParentageSets(){this.m_bBuildGeometryParentageSets=!0}getChainBitSet(e){if(K(this.m_bBuildGeometryParentageSets),this.m_chainBitSetIndex===-1)return this.getEmptySet();const i=this.getChainUserIndex(e,this.m_chainBitSetIndex);K(i>=0);let s=this.m_chainBitSets.at(i);return s||(s=this.getEmptySet()),s}getChainBoundaryBitSet(e){K(this.m_bBuildGeometryParentageSets);const i=new gh,s=n=>{const r=this.getChainHalfEdge(n);let o=r;do{const l=this.getEdgeBitSet_(o);l!==null&&i.assignOr(l);const u=this.getEdgeBitSet_(this.getHalfEdgeTwin(o));u!==null&&i.assignOr(u),o=this.getHalfEdgeNext(o)}while(o!==r)};s(e);for(let n=this.getChainFirstIsland(e);n!==ae;n=this.getChainNextInParent(n))s(e);return i}getChainPolygons(e){return K(0),[]}getGeometriesFromBits(e){if(!this.m_bBuildGeometryParentageSets||e===null)return[];if(this.m_geometryMapID===null){this.m_geometryMapID=new Map;for(let n=this.m_shape.getFirstGeometry();n!==ae;n=this.m_shape.getNextGeometry(n))this.m_geometryMapID.set(this.m_shape.getGeometryUserIndex(n,this.m_geometryIDIndex),n)}const i=[],s=e.getUnorderedBitIterator();for(let n=s.next();n!==c7.npos();n=s.next())K(this.m_geometryMapID.has(n)),i.push(this.m_geometryMapID.get(n));return i}getVertexDominant(e,i){if(i===ae)return e;const s=this.getClusterFromVertex(e);return this.getVertexDominantFromCluster(s,i)}getVertexDominantFromCluster(e,i){if(i!==ae){let s=ae;for(let n=this.getClusterVertexIterator(e);n!==ae;n=this.incrementVertexIterator(n)){const r=this.getVertexFromVertexIterator(n);s===ae&&(s=r);const o=this.m_shape.getPathFromVertex(r);if(this.m_shape.getGeometryFromPath(o)===i){s=r;break}}return s}{const s=this.getClusterVertexIterator(e);return s!==ae?this.getVertexFromVertexIterator(s):ae}}isBreakNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,H0.enumSegmentParentageBreakNode)}setBreakNode(e,i){K(this.m_clusterBreakNodeIndex!==-1),i?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,H0.enumSegmentParentageBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,H0.enumSegmentParentageBreakNode)}isStrongPathNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,H0.enumPathBreakNode)}setStrongPathNode(e,i){if(this.m_clusterBreakNodeIndex===-1){if(!i)return;this.m_clusterBreakNodeIndex=this.createUserIndexForClusters()}i?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,H0.enumPathBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,H0.enumPathBreakNode)}getSegmentParentage(e){if(this.m_segmentParentageIndex===-1)return-1;const i=this.getHalfEdgeUserIndex(e,this.m_segmentParentageIndex);return i>=0?i:-1}isCrossroadAhead(e){const i=this.getHalfEdgeNext(e);if(this.isStrongPathNode(this.getHalfEdgeOrigin(i)))return!0;const s=this.getHalfEdgeTwin(i),n=this.getHalfEdgeNext(s);return e!==this.getHalfEdgeTwin(n)}isCrossroadBehind(e){return K(0),!1}getHalfEdgeConnector(e,i){const s=this.getClusterHalfEdge(e);if(s===ae)return ae;let n=s,r=ae,o=ae;do{if(this.getHalfEdgeTo(n)===i)return n;if(r===ae){if(r=this.getClusterHalfEdge(i),r===ae)return ae;o=r}if(this.getHalfEdgeTo(o)===e)return n=this.getHalfEdgeTwin(o),n;n=this.getHalfEdgeNext(this.getHalfEdgeTwin(n)),o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(n!==s&&o!==r);return ae}querySegmentXY(e,i){if(this.m_segmentIndexHe!==-1){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(r!==-1){if(r!==-2){const o=this.m_shape.getSegmentFromIndex(r);i.copyFrom(o,!0)}else{r=this.getHalfEdgeUserIndex(this.getHalfEdgeTwin(e),this.m_segmentIndexHe);const o=this.m_shape.getSegmentFromIndex(r);i.copyFrom(o,!0),i.get().reverse()}return}}i.createLine();const s=i.get(),n=Y.getNAN();this.getHalfEdgeFromXY(e,n),s.setStartXY(n),this.getHalfEdgeToXY(e,n),s.setEndXY(n)}isCurveEdge(e){return this.m_segmentIndexHe!==-1?this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)!==-1:!1}compareEdgeAnglesCurveHelper_(e,i,s){const n=new Qt,r=new Qt;this.querySegmentXY(e,n),this.querySegmentXY(i,r);const o=n.get(),l=r.get();if(o.equals(l))return 0;const u=new Y;this.getHalfEdgeFromXY(e,u);const f=new Y;this.getHalfEdgeToXY(e,f);const y=new Y;this.getHalfEdgeToXY(i,y),K(!f.isEqualPoint2D(y));const _=o.getTangent(0),x=l.getTangent(0);return Y.compareVectors(_,x)}compareEdgeAnglesHelper_(e,i,s){if(e===i)return 0;if(this.isHalfEdgeCurve(e)||this.isHalfEdgeCurve(i))return this.compareEdgeAnglesCurveHelper_(e,i,s);const n=Y.getNAN();this.getHalfEdgeToXY(e,n);const r=Y.getNAN();if(this.getHalfEdgeToXY(i,r),n.isEqualPoint2D(r))return 0;const o=Y.getNAN();this.getHalfEdgeFromXY(e,o);const l=Y.getNAN();l.setSub(n,o);const u=Y.getNAN();return u.setSub(r,o),!s||u.y>=0&&l.y>0?Y.compareVectors(l,u):0}compareEdgeAngles_(e,i){return this.compareEdgeAnglesHelper_(e,i,!1)}compareEdgeAnglesForPair_(e,i){return this.compareEdgeAnglesHelper_(e,i,!0)}compareEdgeAngles3D_(e,i){return K(0),0}compareEdgeAnglesForPair3D_(e,i){return K(0),0}dbgDumpChains_(){}dbgDumpChainToPolygon_(e,i){K(0)}deleteEdgeInternal_(e){const i=this.getHalfEdgeChain(e),s=this.getHalfEdgeTwin(e),n=this.getHalfEdgeChain(s);K(n===i),K(e===this.getHalfEdgeNext(s)||s===this.getHalfEdgeNext(e));let r=this.getHalfEdgeNext(e);r===s&&(r=this.getHalfEdgeNext(r),r===e&&(r=ae));const o=this.getChainIndex_(i),l=this.m_chainAreas.read(o);Number.isNaN(l)||(this.setChainArea_(i,Number.NaN),this.setChainPerimeter_(i,Number.NaN));const u=this.getChainHalfEdge(i);u!==e&&u!==s||this.setChainHalfEdge_(i,r),this.updateVertexToHalfEdgeConnection_(e,!0),this.deleteEdgeImpl_(e)}getFirstUnvisitedHalfEdgeOnCluster_(e,i,s){let n=i!==ae?i:this.getClusterHalfEdge(e);if(n===ae)return ae;const r=n;for(;;){if(this.getHalfEdgeUserIndex(n,s)!==1)return n;const o=this.getHalfEdgeNext(this.getHalfEdgeTwin(n));if(o===r)return ae;n=o}}removeSpikes_(){let e=!1;const i=this.createUserIndexForHalfEdges();for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){let n=ae;for(;;){let r=this.getFirstUnvisitedHalfEdgeOnCluster_(s,n,i);if(r===ae)break;n=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));let o=r;for(;;){const l=this.getHalfEdgeNext(o),u=this.getHalfEdgePrev(o),f=this.getHalfEdgeTwin(o);if(u===f){if(this.deleteEdgeInternal_(o),e=!0,n!==o&&n!==f||(n=ae),o===r||u===r){if(r=l,o===r||u===r)break;o=l;continue}}else this.setHalfEdgeUserIndex(o,i,1);if(o=l,o===r)break}}}return this.deleteUserIndexForHalfEdges(i),e}progress_(e,i=!1){}newCluster_(){const e=this.m_clusterData.newElement();return this.m_clusterData.setField(e,1,0),e}newHalfEdgePair_(){const e=this.m_halfEdgeData.newElement();this.m_halfEdgeData.setField(e,2,0),this.m_halfEdgeData.setField(e,3,0);const i=this.m_halfEdgeData.newElement();return this.m_halfEdgeData.setField(i,2,0),this.m_halfEdgeData.setField(i,3,0),this.setHalfEdgeTwin_(e,i),this.setHalfEdgeTwin_(i,e),e}newChain_(){const e=this.m_chainData.newElement();return this.m_chainData.setField(e,2,0),e}deleteChain_(e){return K(0),0}getClusterIndex_(e){return this.m_clusterData.elementToIndex(e)}setClusterVertexIterator_(e,i){this.m_clusterData.setField(e,7,i)}setClusterHalfEdge_(e,i){this.m_clusterData.setField(e,2,i)}setClusterParentage_(e,i){this.m_clusterData.setField(e,1,i)}setPrevCluster_(e,i){this.m_clusterData.setField(e,3,i)}setNextCluster_(e,i){this.m_clusterData.setField(e,4,i)}setClusterVertexIndex_(e,i){this.m_clusterData.setField(e,5,i)}getClusterVertexIndex_(e){return this.m_clusterData.getField(e,5)}setClusterChain_(e,i){this.m_clusterData.setField(e,6,i)}addClusterToExteriorChain_(e,i){this.setClusterChain_(i,e)}getHalfEdgeIndex_(e){return this.m_halfEdgeData.elementToIndex(e)}setHalfEdgeOrigin_(e,i){this.m_halfEdgeData.setField(e,1,i)}setHalfEdgeTwin_(e,i){this.m_halfEdgeData.setField(e,4,i)}setHalfEdgePrev_(e,i){this.m_halfEdgeData.setField(e,5,i)}setHalfEdgeNext_(e,i){this.m_halfEdgeData.setField(e,6,i)}setHalfEdgeChain_(e,i){this.m_halfEdgeData.setField(e,2,i)}setHalfEdgeParentage_(e,i){this.m_halfEdgeData.setField(e,3,i)}getHalfEdgeParentageMask_(e){return this.m_halfEdgeData.getField(e,3)}setHalfEdgeVertexIterator_(e,i){this.m_halfEdgeData.setField(e,7,i)}updateVertexToHalfEdgeConnectionHelper_(e,i){const s=i?ae:e;for(let n=this.getHalfEdgeVertexIterator(e);n!==ae;n=this.incrementVertexIterator(n)){const r=this.getVertexFromVertexIterator(n);this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,s)}}updateVertexToHalfEdgeConnection_(e,i){e!==ae&&(this.updateVertexToHalfEdgeConnectionHelper_(e,i),this.updateVertexToHalfEdgeConnectionHelper_(this.getHalfEdgeTwin(e),i))}getChainIndex_(e){return this.m_chainData.elementToIndex(e)}setChainHalfEdge_(e,i){this.m_chainData.setField(e,1,i)}setChainParentage_(e,i){this.m_chainData.setField(e,2,i)}setChainParent_(e,i){this.m_chainData.setField(e,3,i);const s=this.getChainFirstIsland(i);this.setChainNextInParent_(e,s),this.setChainFirstIsland_(i,e)}setChainFirstIsland_(e,i){this.m_chainData.setField(e,4,i)}setChainNextInParent_(e,i){this.m_chainData.setField(e,5,i)}setChainPrev_(e,i){this.m_chainData.setField(e,6,i)}setChainNext_(e,i){this.m_chainData.setField(e,7,i)}setChainArea_(e,i){const s=this.getChainIndex_(e);this.m_chainAreas.write(s,i)}setChainPerimeter_(e,i){const s=this.getChainIndex_(e);this.m_chainPerimeters.write(s,i)}updateChainAreaAndPerimeter_(e){const i=this.m_shape.hasCurves(),s=new zr(0),n=new zr(0),r=this.getChainHalfEdge(e),o=Y.getNAN(),l=Y.getNAN(),u=Y.getNAN();this.getHalfEdgeFromXY(r,o),l.setCoordsPoint2D(o);let f=r;do this.getHalfEdgeToXY(f,u),i&&this.isCurveEdge(f)||n.pe(Y.distance(l,u)),this.getHalfEdgeChain(this.getHalfEdgeTwin(f))!==e&&s.pe((u.x-o.x-(l.x-o.x))*(u.y-o.y+(l.y-o.y))*.5),l.setCoordsPoint2D(u),f=this.getHalfEdgeNext(f);while(f!==r);if(i){const _=new Qt;f=r;do{this.getHalfEdgeToXY(f,u);const x=this.isCurveEdge(f);if(x&&(this.querySegmentXY(f,_),n.pe(_.get().calculateLength2D())),this.getHalfEdgeChain(this.getHalfEdgeTwin(f))!==e&&x){const S=_.get().calculateArea2DHelper();s.pe(S)}f=this.getHalfEdgeNext(f)}while(f!==r)}const y=this.getChainIndex_(e);this.m_chainAreas.write(y,s.getResult()),this.m_chainPerimeters.write(y,n.getResult())}getChainTopmostEdge_(e){return K(0),0}planeSweepParentage_(e,i){const s=new ytt(this),n=new jt;n.setCapacity(Math.trunc(this.m_pointCount/2)),n.setComparator(s);const r=[],o=this.createUserIndexForHalfEdges();let l=null;const u=Y.getNAN();for(let f=this.getFirstCluster();f!==ae;f=this.getNextCluster(f)){this.progress_(i);const y=this.getClusterHalfEdge(f);if(y!==ae){if(r.length=0,!this.tryOptimizedInsertion_(n,o,r,f,y)){this.queryXY(f,u),s.setY(u.y);let _=y;do{const x=this.getHalfEdgeUserIndex(_,o);x!==-1&&(n.deleteNode(x),this.setHalfEdgeUserIndex(_,o,Yt.impossibleIndex2())),_=this.getHalfEdgeNext(this.getHalfEdgeTwin(_))}while(y!==_);_=y;do{if(this.getHalfEdgeUserIndex(_,o)===-1){const x=n.addElement(_);r.push(x)}_=this.getHalfEdgeNext(this.getHalfEdgeTwin(_))}while(y!==_)}for(let _=r.length-1;_>=0;_--){const x=r[_],S=n.getElement(x),P=this.getHalfEdgeTwin(S);this.setHalfEdgeUserIndex(P,o,x),this.planeSweepParentagePropagateParentage_(n,x,e)}}else if(this.getClusterChain(f)===ae){l===null&&(l=new vtt(this)),this.queryXY(f,u),l.setPointXY(u);const _=n.searchLowerBound(l);let x=this.m_universeChain;if(_!==-1){let S=n.getElement(_);this.getHalfEdgeChain(S)===this.getHalfEdgeChain(this.getHalfEdgeTwin(S))&&(S=this.getLeftSkipPolylines_(n,_)),S!==ae&&(x=this.getHalfEdgeChain(S))}this.addClusterToExteriorChain_(x,f)}}this.deleteUserIndexForHalfEdges(o)}planeSweepParentagePropagateParentage_(e,i,s){const n=e.getElement(i),r=this.getHalfEdgeChain(n);if(this.getChainParent(r)!==ae)return;const o=this.getLeftSkipPolylines_(e,i),l=this.getHalfEdgeTwin(n),u=this.getHalfEdgeChain(l);let f=this.getChainParent(r),y=this.getChainParent(u);if(o===ae)f===ae&&(u===r?(this.setChainParent_(u,this.m_universeChain),y=this.m_universeChain,f=y):(y===ae&&(this.setChainParent_(u,this.m_universeChain),y=this.m_universeChain),this.setChainParent_(r,u),f=u));else{const _=this.getHalfEdgeChain(o);if(y===ae){if(this.getChainArea(_)<=0){const x=this.getChainParent(_);this.setChainParent_(u,x),y=x}else this.setChainParent_(u,_),y=_;u===r&&(f=y)}}f===ae&&(this.trySetChainParentFromTwin_(r,u),f=this.getChainParent(r)),K(f!==ae),s===fa.enumInputModeBuildGraph?this.propagateParentageBuildGraph_(e,i,n,o):s===fa.enumInputModeSimplifyWinding?this.propagateParentageWinding_(e,i,n,o,l,r,u):s===fa.enumInputModeSimplifyAlternate&&this.propagateParentageAlternate_(e,i,n,o,l,r,u)}propagateParentageBuildGraph_(e,i,s,n){let r,o=i;n===ae?(o=e.getNext(o),r=this.getHalfEdgeChain(s)):r=this.getHalfEdgeChain(n);let l=null,u=this.getChainParentage(r);for(this.m_bBuildGeometryParentageSets&&(l=this.getChainBitSet(r));o!==-1;o=e.getNext(o)){const f=e.getElement(o),y=this.getHalfEdgeTwin(f);r=this.getHalfEdgeChain(f);const _=this.getHalfEdgeChain(y);if(this.m_bBuildGeometryParentageSets){let k=this.getChainBitSet(_);k=new gh({copy:k}),k.assignOr(l),this.setChainBitSet_(_,k);let $=this.getChainBitSet(r);const F=this.getLeftEdgeBitSet_(f),G=new gh({copy:l});if(G.assignSubtract(F),G.isZero())break;$=new gh({copy:$}),$.assignOr(G),this.setChainBitSet_(r,$),l=$}const x=this.getChainParentage(_),S=x|u;S!==x&&this.setChainParentage_(_,S);let P=this.getChainParentage(r);const A=u&~this.getHalfEdgeUserIndex(f,this.m_tmpHalfEdgeParentageIndexLeft);if(A&&(P|=A,this.setChainParentage_(r,P)),A===0)break;u=P}}propagateParentageWinding_(e,i,s,n,r,o,l){if(o===l)return;let u=this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeWindingNumberIndex);u+=this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeWindingNumberIndex);let f=0;const y=[],_=[];_.push(0);for(let x=e.getFirst();x!==i;x=e.getNext(x)){const S=e.getElement(x),P=this.getHalfEdgeTwin(S),A=this.getHalfEdgeChain(S),k=this.getHalfEdgeChain(P);if(A!==k){let $=this.getHalfEdgeUserIndex(S,this.m_tmpHalfEdgeWindingNumberIndex);$+=this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeWindingNumberIndex),f+=$;let F=!1;y.length!==0&&y.at(-1)===k&&(_.pop(),y.pop(),F=!0),K(this.getChainParent(k)!==ae),F&&this.getChainParent(k)===A||(_.push(f),y.push(A))}}if(f+=u,y.length!==0&&y.at(-1)===l&&(_.pop(),y.pop()),f!==0){if(_.at(-1)===0){const x=this.m_simplifiedGeometry,S=this.getGeometryID(x);this.setChainParentage_(o,S)}}else if(_.at(-1)!==0){const x=this.m_simplifiedGeometry,S=this.getGeometryID(x);this.setChainParentage_(o,S)}}propagateParentageAlternate_(e,i,s,n,r,o,l){const u=this.m_simplifiedGeometry,f=this.getGeometryID(u);if(n===ae)this.setChainParentage_(l,this.m_universeGeomID),1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,f):this.setChainParentage_(o,this.m_universeGeomID);else{const y=this.getChainParentage(l);if(y===0){const _=this.getHalfEdgeChain(n),x=this.getChainParentage(_);this.setChainParentage_(l,x),1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,x===f?this.m_universeGeomID:f):this.setChainParentage_(o,x)}else 1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,y===f?this.m_universeGeomID:f):this.setChainParentage_(o,y)}}tryOptimizedInsertion_(e,i,s,n,r){let o=r,l=-1,u=ae,f=0;do{if(f===2)return!1;const y=this.getHalfEdgeUserIndex(o,i);if(y!==-1){if(l!==-1)return!1;l=y}else{if(u!==ae)return!1;u=o}f++,o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(r!==o);return u!==ae&&l!==-1&&(this.setHalfEdgeUserIndex(e.getElement(l),i,Yt.impossibleIndex2()),e.setElement(l,u),s.push(l),!0)}trySetChainParentFromTwin_(e,i){const s=this.getChainArea(e);if(s===0)return!1;const n=this.getChainArea(i);if(s>0&&n<0||s<0&&n>0)return this.setChainParent_(e,i),!0;{const r=this.getChainParent(i);if(r!==ae)return this.setChainParent_(e,r),!0}return!1}createHalfEdges_(e,i){this.m_halfEdgeIndex=this.m_shape.createUserIndex();for(let s=0,n=i.size();s<n;s++){const r=i.read(s),o=this.m_shape.getUserIndex(r,this.m_clusterIndex),l=this.m_shape.getPathFromVertex(r),u=this.m_shape.getGeometryFromPath(l),f=this.m_shape.getGeometryType(u);if(bi(f)){const y=this.m_shape.getNextVertex(r);if(y===ae)continue;const _=this.m_shape.getUserIndex(y,this.m_clusterIndex);if(o===_)continue;const x=this.newHalfEdgePair_(),S=this.getHalfEdgeTwin(x),P=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(P,0,r),this.m_clusterVertices.setField(P,1,-1),this.setHalfEdgeVertexIterator_(x,P),this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,x),this.setHalfEdgeOrigin_(x,o);const A=this.getClusterHalfEdge(o);if(A===ae)this.setClusterHalfEdge_(o,x),this.setHalfEdgePrev_(x,S),this.setHalfEdgeNext_(S,x);else{const G=this.getHalfEdgePrev(A);this.setHalfEdgePrev_(A,S),this.setHalfEdgeNext_(S,A),this.setHalfEdgeNext_(G,x),this.setHalfEdgePrev_(x,G)}this.setHalfEdgeOrigin_(S,_);const k=this.getClusterHalfEdge(_);if(k===ae)this.setClusterHalfEdge_(_,S),this.setHalfEdgeNext_(x,S),this.setHalfEdgePrev_(S,x);else{const G=this.getHalfEdgePrev(k);this.setHalfEdgePrev_(k,x),this.setHalfEdgeNext_(x,k),this.setHalfEdgeNext_(G,S),this.setHalfEdgePrev_(S,G)}const $=this.getGeometryID(u);if(e===fa.enumInputModeBuildGraph){const G=f===me.enumPolygon?$:0;if(this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeParentageIndex,0),this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeParentageIndex,G),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeParentageIndexLeft,G),this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeParentageIndexLeft,0),this.m_bBuildGeometryParentageSets){const V=new gh,B=this.m_shape.getGeometryUserIndex(u,this.m_geometryIDIndex);V.setBit(B),this.setEdgeBitSet_(x,V),this.setEdgeBitSet_(S,null),this.setLeftEdgeBitSet_(S,V),this.setLeftEdgeBitSet_(x,null)}}else if(e===fa.enumInputModeSimplifyWinding){const G=this.m_shape.getXY(r),V=this.m_shape.getXY(y);let B=0,W=0;G.compare(V)<0?B=1:W=-1,this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeWindingNumberIndex,B),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeWindingNumberIndex,W)}else e===fa.enumInputModeSimplifyAlternate&&(this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeOddEvenNumberIndex,1),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeOddEvenNumberIndex,1));const F=f===me.enumPolygon?qh.c_EdgeBitMask:0;this.setHalfEdgeParentage_(x,$|F),this.setHalfEdgeParentage_(S,$|F)}}if(this.m_shape.hasCurves()){this.m_segmentIndexHe=this.createUserIndexForHalfEdges();for(let s=0,n=i.size();s<n;s++){const r=i.read(s);if(this.m_shape.getSegment(r)){const o=this.m_shape.getUserIndex(r,this.m_halfEdgeIndex);o!==ae&&(this.setHalfEdgeUserIndex(o,this.m_segmentIndexHe,this.m_shape.getVertexIndex(r)),this.setHalfEdgeUserIndex(this.getHalfEdgeTwin(o),this.m_segmentIndexHe,-2))}}}}mergeVertexListsOfEdges_(e,i){{const r=this.getHalfEdgeVertexIterator(i);if(r!==ae){const o=this.getHalfEdgeVertexIterator(e);this.m_clusterVertices.setField(r,1,o),this.setHalfEdgeVertexIterator_(e,r),this.setHalfEdgeVertexIterator_(i,ae)}}const s=this.getHalfEdgeTwin(e),n=this.getHalfEdgeTwin(i);{const r=this.getHalfEdgeVertexIterator(n);if(r!==ae){const o=this.getHalfEdgeVertexIterator(s);this.m_clusterVertices.setField(r,1,o),this.setHalfEdgeVertexIterator_(s,r),this.setHalfEdgeVertexIterator_(n,ae)}}if(this.m_segmentIndexHe!==-1){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(r!==-1){if(r===-2){const o=this.getHalfEdgeUserIndex(i,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(e,this.m_segmentIndexHe,o)}if(r=this.getHalfEdgeUserIndex(s,this.m_segmentIndexHe),r===-2){const o=this.getHalfEdgeUserIndex(n,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(s,this.m_segmentIndexHe,o)}}}}sortHalfEdgesByAngle_(e){const i=[];for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){i.length=0;const n=this.getClusterHalfEdge(s);if(n!==ae){let r=n;do i.push(r),r=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));while(r!==n);if(i.length>1){let o=!0;i.length>2?(i.sort((x,S)=>this.compareEdgeAngles_(x,S)),i.push(i[0])):this.compareEdgeAnglesForPair_(i[0],i[1])>0?i[1]=St(i[0],i[0]=i[1]):o=!1;let l=i[0],u=l,f=this.getHalfEdgeTo(u),y=this.getHalfEdgeTwin(u),_=ae;for(let x=1,S=i.length;x<S;x++){const P=i[x],A=this.getHalfEdgeTwin(P),k=this.getHalfEdgeOrigin(A);if(k!==f||P===u)this.updateVertexToHalfEdgeConnection_(_,!1),_=ae,u=P,f=k,y=A;else{if(e===fa.enumInputModeBuildGraph){const $=this.getHalfEdgeParentageMask_(u)|this.getHalfEdgeParentageMask_(P);if(this.setHalfEdgeParentage_(u,$),this.setHalfEdgeParentage_(y,$),this.setHalfEdgeUserIndex(u,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(u,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(u,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(u,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeParentageIndexLeft)),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeParentageIndexLeft)),this.m_bBuildGeometryParentageSets){let F,G,V;F=this.getEdgeBitSet_(u),G=this.getEdgeBitSet_(P),V=new gh({copy:F}),V.assignOr(G),this.setEdgeBitSet_(u,V),F=this.getEdgeBitSet_(y),G=this.getEdgeBitSet_(A),V=new gh({copy:F}),V.assignOr(G),this.setEdgeBitSet_(y,V),F=this.getLeftEdgeBitSet_(u),G=this.getLeftEdgeBitSet_(P),V=new gh({copy:F}),V.assignOr(G),this.setLeftEdgeBitSet_(u,V),F=this.getLeftEdgeBitSet_(y),G=this.getLeftEdgeBitSet_(A),V=new gh({copy:F}),V.assignOr(G),this.setLeftEdgeBitSet_(y,V)}}else if(this.m_tmpHalfEdgeWindingNumberIndex!==-1){const $=this.getHalfEdgeUserIndex(u,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeWindingNumberIndex),F=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeWindingNumberIndex);this.setHalfEdgeUserIndex(u,this.m_tmpHalfEdgeWindingNumberIndex,$),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeWindingNumberIndex,F)}else if(this.m_tmpHalfEdgeOddEvenNumberIndex!==-1){const $=this.getHalfEdgeUserIndex(u,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeOddEvenNumberIndex),F=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeOddEvenNumberIndex);this.setHalfEdgeUserIndex(u,this.m_tmpHalfEdgeOddEvenNumberIndex,$),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeOddEvenNumberIndex,F)}this.mergeVertexListsOfEdges_(u,P),this.deleteEdgeImpl_(P),_=u,i[x]=ae,P===l&&(i[0]=ae,l=ae)}}if(this.updateVertexToHalfEdgeConnection_(_,!1),_=ae,!o){l=ae;for(let x=0,S=i.length;x<S;x++){const P=i[x];if(P!==ae){l=P;break}}n!==l&&this.setClusterHalfEdge_(s,l);continue}l=ae;for(let x=0,S=i.length;x<S;x++){const P=i[x];if(P===ae)continue;if(l===ae){l=P,u=l,f=this.getHalfEdgeTo(u),y=this.getHalfEdgeTwin(u);continue}if(P===u)continue;const A=this.getHalfEdgeTwin(P),k=this.getHalfEdgeOrigin(A);this.setHalfEdgeNext_(y,P),this.setHalfEdgePrev_(P,y),u=P,f=k,y=A}this.setClusterHalfEdge_(s,l)}}}}sortHalfEdgesByAngleHelper_(e){K(0)}sortHalfEdgesByAngle3D_(e){K(0)}buildChains_(e){this.m_universeChain=this.newChain_(),this.setChainHalfEdge_(this.m_universeChain,ae);let i=this.m_universeChain;const s=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){const r=this.getClusterHalfEdge(n);if(r!==ae){let o=r;do{if(this.getHalfEdgeUserIndex(o,s)!==1){const l=this.newChain_();this.setChainHalfEdge_(l,o),this.setChainPrev_(l,i),this.setChainNext_(i,l);let u=null;this.m_bBuildGeometryParentageSets&&(u=new gh),i=l;let f=0,y=o;do this.m_tmpHalfEdgeParentageIndex!==-1&&(f|=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex)),this.m_bBuildGeometryParentageSets&&u.assignOr(this.getEdgeBitSet_(y)),this.setHalfEdgeChain_(y,l),this.setHalfEdgeUserIndex(y,s,1),y=this.getHalfEdgeNext(y);while(y!==o);this.m_bBuildGeometryParentageSets&&this.setChainBitSet_(l,u),this.setChainParentage_(l,f)}o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(o!==r)}}this.m_chainAreas=new od(this.m_chainData.size(),Number.NaN),this.m_chainPerimeters=new od(this.m_chainData.size(),Number.NaN),this.setChainArea_(this.m_universeChain,Number.POSITIVE_INFINITY),this.setChainPerimeter_(this.m_universeChain,Number.POSITIVE_INFINITY),this.deleteUserIndexForHalfEdges(s)}simplify_(e){K(0)}simplifyAlternate_(){K(0)}simplifyWinding_(){K(0)}setEditShapeImpl_(e,i,s,n,r){this.removeShape(),this.m_bBuildChains=r,this.m_shape=e,this.m_geometryIDIndex=this.m_shape.createGeometryUserIndex();let o=this.m_shape.getTotalPointCount();if(s){o=0;for(let S=0,P=s.length;S<P;S++)o+=this.m_shape.getPointCount(s[S])}const l=new Ns(0);let u=0,f=0;{let S=s!=null?s[0]:this.m_shape.getFirstGeometry(),P=1;for(;S!==ae;){this.m_shape.setGeometryUserIndex(S,this.m_geometryIDIndex,f++);for(let A=this.m_shape.getFirstPath(S);A!==ae;A=this.m_shape.getNextPath(A)){let k=this.m_shape.getFirstVertex(A);for(let $=0,F=this.m_shape.getPathSize(A);$<F;$++)l.add(k),k=this.m_shape.getNextVertex(k)}Ng(this.m_shape.getGeometryType(S))||(u+=this.m_shape.getPathCount(S)),s!=null?(S=P<s.length?s[P]:ae,P++):S=this.m_shape.getNextGeometry(S)}}this.m_universeGeomID=1<<Math.min(f,31),this.m_pointCount=l.size(),this.m_shape.sortVerticesSimpleByY(l,0,this.m_pointCount),this.m_clusterVertices.setCapacity(this.m_pointCount),this.progress_(n,!0),this.m_clusterData.setCapacity(this.m_pointCount+10),this.m_halfEdgeData.setCapacity(2*this.m_pointCount+32),this.m_chainData.setCapacity(Math.max(32,u)),this.m_clusterIndex=this.m_shape.createUserIndex();const y=Y.getNAN();let _=0;const x=Y.getNAN();for(let S=0;S<=this.m_pointCount;S++){if(S<this.m_pointCount){const P=l.read(S);this.m_shape.queryXY(P,x)}else x.setNAN();if(!y.isEqualPoint2D(x)){if(_<S){const P=this.newCluster_();let A=ae,k=-1;for(let $=_;$<S;$++){k=l.read($),this.m_shape.setUserIndex(k,this.m_clusterIndex,P);const F=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(F,0,k),this.m_clusterVertices.setField(F,1,A),A=F;const G=this.m_shape.getPathFromVertex(k),V=this.m_shape.getGeometryFromPath(G),B=this.getGeometryID(V);this.setClusterParentage_(P,this.getClusterParentage(P)|B)}this.setClusterVertexIterator_(P,A),this.setClusterVertexIndex_(P,this.m_shape.getVertexIndex(k)),this.m_lastCluster!==ae&&this.setNextCluster_(this.m_lastCluster,P),this.setPrevCluster_(P,this.m_lastCluster),this.m_lastCluster=P,this.m_firstCluster===ae&&(this.m_firstCluster=P)}_=S,y.setCoordsPoint2D(x)}}if(this.m_shape.hasSegmentParentage()){this.m_clusterBreakNodeIndex===-1&&(this.m_clusterBreakNodeIndex=this.createUserIndexForClusters());for(let S=0;S<this.m_pointCount;S++){const P=l.read(S);if(this.m_shape.getSegmentParentageBreakVertex(P)){const A=this.getClusterFromVertex(P);this.setBreakNode(A,!0)}}}this.progress_(n,!0);{let S=s!=null?s[0]:this.m_shape.getFirstGeometry(),P=1;for(;S!==ae;){for(let A=this.m_shape.getFirstPath(S);A!==ae;A=this.m_shape.getNextPath(A)){if(this.m_shape.isStrongPathStart(A)){const k=this.m_shape.getFirstVertex(A),$=this.getClusterFromVertex(k);this.setStrongPathNode($,!0)}if(this.m_shape.isStrongPathEnd(A)){const k=this.m_shape.isClosedPath(A)?this.m_shape.getFirstVertex(A):this.m_shape.getLastVertex(A),$=this.getClusterFromVertex(k);this.setStrongPathNode($,!0)}}s!=null?(S=P<s.length?s[P]:ae,P++):S=this.m_shape.getNextGeometry(S)}}if(i===fa.enumInputModeBuildGraph&&(this.m_tmpHalfEdgeParentageIndex=this.createUserIndexForHalfEdges(),this.m_tmpHalfEdgeParentageIndexLeft=this.createUserIndexForHalfEdges()),i===fa.enumInputModeSimplifyWinding&&(this.m_tmpHalfEdgeWindingNumberIndex=this.createUserIndexForHalfEdges()),i===fa.enumInputModeSimplifyAlternate&&(this.m_tmpHalfEdgeOddEvenNumberIndex=this.createUserIndexForHalfEdges()),this.createHalfEdges_(i,l),this.dbgNavigate_(),this.sortHalfEdgesByAngle_(i),!Number.isNaN(this.m_checkDirtyPlanesweepTolerance)&&!this.checkStructureAfterDirtySweep_())return this.m_bDirtyCheckFailed=!0,void this.cleanSetEditShapeImpl_();this.buildChains_(i),this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_bBuildChains&&this.planeSweepParentage_(i,n),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.dbgChkChainParents_(),this.dbgDumpChains_(),this.mergeSegmentParentage_(),this.dbgNavigate_(),this.dbgDumpChains_(),this.cleanSetEditShapeImpl_()}setEditShapeImpl3D_(e,i,s,n,r){K(0)}cleanSetEditShapeImpl_(){this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.m_tmpHalfEdgeWindingNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),this.m_tmpHalfEdgeOddEvenNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1)}cleanSetEditShapeImpl3D_(){K(0)}dbgNavigate_(){}dbgChkChainParents_(){}deleteEdgeImpl_(e){const i=this.getHalfEdgeNext(e),s=this.getHalfEdgePrev(e),n=this.getHalfEdgeTwin(e),r=this.getHalfEdgeNext(n),o=this.getHalfEdgePrev(n);i!==n&&(this.setHalfEdgeNext_(o,i),this.setHalfEdgePrev_(i,o)),s!==n&&(this.setHalfEdgeNext_(s,r),this.setHalfEdgePrev_(r,s));const l=this.getHalfEdgeOrigin(e);this.getClusterHalfEdge(l)===e&&(r!==e?this.setClusterHalfEdge_(l,r):this.setClusterHalfEdge_(l,ae));const u=this.getHalfEdgeOrigin(n);this.getClusterHalfEdge(u)===n&&(i!==n?this.setClusterHalfEdge_(u,i):this.setClusterHalfEdge_(u,ae)),this.m_halfEdgeData.deleteElement(e),this.m_halfEdgeData.deleteElement(n)}getLeftSkipPolylines_(e,i){let s=i;for(;;){if(s=e.getPrev(s),s===-1)return ae;{const n=e.getElement(s);if(this.getHalfEdgeChain(n)!==this.getHalfEdgeChain(this.getHalfEdgeTwin(n)))return n}}}checkStructureAfterDirtySweep_(){const e=Xi(this.m_checkDirtyPlanesweepTolerance),i=new Y,s=new Y,n=new Y,r=new Y,o=new Y;for(let l=this.getFirstCluster();l!==ae;l=this.getNextCluster(l)){const u=this.getClusterHalfEdge(l);if(u!==ae){let f=u;this.getHalfEdgeFromXY(f,i),this.getHalfEdgeToXY(f,s),n.setSub(s,i);let y=n.sqrLength();do{const _=f;if(f=this.getHalfEdgeNext(this.getHalfEdgeTwin(f)),f!==_){this.getHalfEdgeToXY(f,r),o.setSub(r,i);const x=o.sqrLength(),S=o.crossProduct(n),P=S*S/(x*y);if(Math.min(x,y)*P<=e&&o.dotProduct(n)>=0)return!1;n.assign(o),y=x,s.assign(r)}}while(f!==u)}}return!0}extractPolygonPathFromChain_(e,i,s,n,r){const o=this.m_shape.hasSegmentParentage(),l=this.getChainHalfEdge(s);let u=l,f=ae;const y=new Ut;do{const _=this.getHalfEdgeTwin(u);if(this.getHalfEdgeChain(_)!==s){let x=ae;const S=this.getHalfEdgeOrigin(u);if(n===ae){const A=this.getClusterVertexIterator(S);x=this.getVertexFromVertexIterator(A)}else for(let A=this.getClusterVertexIterator(S);A!==ae;A=this.incrementVertexIterator(A)){const k=this.getVertexFromVertexIterator(A);x===ae&&(x=k);const $=this.m_shape.getPathFromVertex(k);if(this.m_shape.getGeometryFromPath($)===n){x=k;break}}let P;if(f===ae&&(f=e.insertPath(i,ae),e.setClosedPath(f,!0)),this.m_shape===e?P=e.addVertex(f,x):(this.m_shape.queryPoint(x,y),P=e.addPoint(f,y)),this.isHalfEdgeCurve(u)&&(this.querySegmentXY(u,r),e.setSegmentToIndex(e.getVertexIndex(P),r.get().clone())),o){const A=this.getSegmentParentage(u);e.setSegmentParentageAndBreak(P,A,this.isBreakNode(S))}}u=this.getHalfEdgeNext(u)}while(u!==l)}mergeSegmentParentage_(){if(!this.m_shape.hasSegmentParentage())return;K(this.m_clusterBreakNodeIndex!==-1),K(this.m_segmentParentageIndex===-1);for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){let r=0;const o=this.getClusterHalfEdge(n);if(o!==ae){let l=o;do r++,l=this.getHalfEdgeNext(this.getHalfEdgeTwin(l));while(l!==o&&r<3)}r!==2&&this.setBreakNode(n,!0)}let e=[],i=[];this.m_segmentParentageIndex=this.createUserIndexForHalfEdges();const s=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){const r=this.getClusterHalfEdge(n);if(r!==ae){let o=!1,l=r;do{let u=l;for(;this.getHalfEdgeUserIndex(u,s)===-1;){const f=this.getHalfEdgeNext(u),y=this.getHalfEdgeTwin(u);_ie(this,u,i);const _=i.at(-1).parentage;if(!o){const S=this.getHalfEdgeOrigin(u);if(!this.isBreakNode(S)){const P=this.getHalfEdgePrev(u);u!==P&&(_ie(this,P,e),o=!0)}}if(o&&!_tt(i,e)){const S=this.getHalfEdgeOrigin(u);this.setBreakNode(S,!0)}e=St(i,i=e),o=!0;const x=this.getHalfEdgeOrigin(f);this.isBreakNode(x)&&(o=!1),this.setHalfEdgeUserIndex(u,this.m_segmentParentageIndex,_),this.setHalfEdgeUserIndex(y,this.m_segmentParentageIndex,_),this.setHalfEdgeUserIndex(u,s,1),this.setHalfEdgeUserIndex(y,s,1),u=f}l=this.getHalfEdgeNext(this.getHalfEdgeTwin(l))}while(l!==r)}}this.deleteUserIndexForHalfEdges(s)}registerNewBitSet(e){return this.m_uniqueBitSets===null&&(this.m_uniqueBitSets=btt(),this.m_uniqueBitSets.add(this.getEmptySet())),e===null?this.getEmptySet():this.m_uniqueBitSets.has(e)?this.m_uniqueBitSets.get(e):(this.m_uniqueBitSets.add(e),e)}getLeftEdgeBitSet_(e){const i=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);return K(i>=0),K(this.m_edgeBitSets.at(i)),this.m_edgeBitSets.at(i)}getEdgeBitSet_(e){const i=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);return K(i>=0),this.m_edgeBitSets.at(i)}setEdgeBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_edgeBitSetIndex===-1&&(this.m_edgeBitSetIndex=this.createUserIndexForHalfEdges());const s=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);s!==-1?this.m_edgeBitSets[s]=i:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndex,this.m_edgeBitSets.length),this.m_edgeBitSets.push(i))}setLeftEdgeBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_edgeBitSetIndexLeft===-1&&(this.m_edgeBitSetIndexLeft=this.createUserIndexForHalfEdges());const s=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);s!==-1?this.m_edgeBitSets[s]=i:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft,this.m_edgeBitSets.length),this.m_edgeBitSets.push(i))}setChainBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_chainBitSetIndex===-1&&(this.m_chainBitSetIndex=this.createUserIndexForChains());const s=this.getChainUserIndex(e,this.m_chainBitSetIndex);s!==-1?this.m_chainBitSets[s]=i:(this.setChainUserIndex(e,this.m_chainBitSetIndex,this.m_chainBitSets.length),this.m_chainBitSets.push(i))}getEmptySet(){return this.m_emptyBitSet||(this.m_emptyBitSet=new gh),this.m_emptyBitSet}deleteEdgeBitSets_(){this.m_edgeBitSetIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndex),this.m_edgeBitSetIndex=-1),this.m_edgeBitSetIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndexLeft),this.m_edgeBitSetIndexLeft=-1),this.m_edgeBitSets.length=0,this.m_uniqueBitSets=null}deleteChainBitSets_(){this.m_chainBitSetIndex!==-1&&(this.deleteUserIndexForChains(this.m_chainBitSetIndex),this.m_chainBitSetIndex=-1,this.m_chainBitSets.length=0)}dbgPrintEdge_(e){K(0)}dbgVerifyEdgeSegment(e){K(0)}}qh.c_EdgeParentageMask=2147483647,qh.c_EdgeBitMask=1<<31;class ws{freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){this.m_lists.deleteElement(e)}newList_(){return this.m_lists.newElement()}Init_(e){K(0)}constructor(e){this.m_listNodes=new Yt(2),this.m_listOfLists=ws.st_nullNode(),this.m_bAllowNavigationBetweenLists=!0,e===void 0&&(e=!0),this.m_bAllowNavigationBetweenLists=e,this.m_lists=new Yt(this.m_bAllowNavigationBetweenLists?4:2)}createList(){const e=this.newList_();return this.m_bAllowNavigationBetweenLists&&(this.m_lists.setField(e,3,this.m_listOfLists),this.m_listOfLists!==ws.st_nullNode()&&this.m_lists.setField(this.m_listOfLists,2,e),this.m_listOfLists=e),e}deleteList(e){let i=this.getFirst(e);for(;i!==ws.st_nullNode();){const s=i;i=this.getNext(i),this.freeNode_(s)}if(this.m_bAllowNavigationBetweenLists){const s=this.m_lists.getField(e,2),n=this.m_lists.getField(e,3);s!==ws.st_nullNode()?this.m_lists.setField(s,3,n):this.m_listOfLists=n,n!==ws.st_nullNode()&&this.m_lists.setField(n,2,s)}this.freeList_(e)}reserveLists(e){this.m_lists.setCapacity(e)}addElement(e,i){this.m_lists.getField(e,0);const s=this.m_lists.getField(e,1),n=this.newNode_();return s!==ws.st_nullNode()?(this.m_listNodes.setField(s,1,n),this.m_lists.setField(e,1,n)):(this.m_lists.setField(e,0,n),this.m_lists.setField(e,1,n)),this.m_listNodes.setField(n,0,i),n}reserveNodes(e){this.m_listNodes.setCapacity(e)}deleteElementDirect(e,i,s){i!==ws.st_nullNode()?(this.m_listNodes.setField(i,1,this.m_listNodes.getField(s,1)),this.m_lists.getField(e,1)===s&&this.m_lists.setField(e,1,i)):(this.m_lists.setField(e,0,this.m_listNodes.getField(s,1)),this.m_lists.getField(e,1)===s&&this.m_lists.setField(e,1,ws.st_nullNode())),this.freeNode_(s)}deleteElementSearch(e,i){let s=-1,n=this.getFirst(e);for(;n!==i;)s=n,n=this.getNext(n);this.deleteElementDirect(e,s,i)}concatenateLists(e,i){const s=this.m_lists.getField(e,1),n=this.m_lists.getField(i,0);if(n!==ws.st_nullNode()&&(s!==ws.st_nullNode()?(this.m_listNodes.setField(s,1,n),this.m_lists.setField(e,1,this.m_lists.getField(i,1))):(this.m_lists.setField(e,0,n),this.m_lists.setField(e,1,this.m_lists.getField(i,1)))),this.m_bAllowNavigationBetweenLists){const r=this.m_lists.getField(i,2),o=this.m_lists.getField(i,3);r!==ws.st_nullNode()?this.m_lists.setField(r,3,o):this.m_listOfLists=o,o!==ws.st_nullNode()&&this.m_lists.setField(o,2,r)}return this.freeList_(i),e}getElement(e){return this.m_listNodes.getField(e,0)}getData(e){return this.getElement(e)}setElement(e,i){K(0)}getNext(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getFirstElement(e){const i=this.getFirst(e);return this.getElement(i)}static st_nullNode(){return-1}clear(){this.m_listNodes.deleteAll(!0),this.m_lists.deleteAll(!0),this.m_listOfLists=ws.st_nullNode()}isEmpty(e){return K(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}function kN(t=-1){return{m_value:t,m_line:new si,m_segment:null,m_segmentInfo:new Dz(-1),m_env:new Ze(0,0),m_dxdy:55555555,m_bHorizontal:!1,m_bCurve:!1}}const xtt=67;class A1e extends Vv{constructor(e,i,s){super(!0),this.m_bIntersectionDetected=!1,this.m_nonSimpleResult=new xs,this.m_tempSimpleEdge1=kN(),this.m_tempSimpleEdge2=kN(),this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae,this.m_currentNode=-1,this.m_prevX1=Number.NaN,this.m_prevX2=Number.NaN,this.m_prevY=Number.NaN,this.m_prevX=0,this.m_sweepY=Number.NaN,this.m_sweepX=0,this.m_ptSweep=new Y,this.m_simpleEdgesCache=[],this.m_simpleEdgesRecycle=[],this.m_cOutstandingConstructedEdges=0,this.m_shape=e,this.m_bShapeHasSegments=this.m_shape.hasCurves(),this.m_tolerance=i,this.m_tolerance10=10*i,this.m_bIsSimple=s;const n=Math.trunc(Math.min(3*e.getTotalPointCount()/2,xtt)),r=Math.min(7,n);this.m_simpleEdgesCache.length=r}tryGetCachedEdge_(e){const i=this.m_simpleEdgesCache[(e&ya())%this.m_simpleEdgesCache.length];return i&&i.m_value===e?i:null}tryDeleteCachedEdge_(e){const i=(e&ya())%this.m_simpleEdgesCache.length,s=this.m_simpleEdgesCache[i];s&&s.m_value===e&&(this.m_simpleEdgesRecycle.push(s),this.m_simpleEdgesCache[i]=null)}tryCreateCachedEdge_(e){const i=(e&ya())%this.m_simpleEdgesCache.length;let s=this.m_simpleEdgesCache[i];return s?null:(this.m_simpleEdgesRecycle.length===0?(s=kN(),this.m_cOutstandingConstructedEdges++):s=this.m_simpleEdgesRecycle.pop(),s.m_value=e,this.m_simpleEdgesCache[i]=s,s)}initSimpleEdge_(e,i){this.m_bShapeHasSegments&&this.initSimpleEdgeHelper_(e,i)||e.m_bCurve||(this.m_shape.queryLineConnector(i,e.m_line,!0),e.m_segment=e.m_line,e.m_env.setCoordsNoNAN(e.m_line.getStartX(),e.m_line.getEndX()),e.m_env.vmax+=this.m_tolerance,e.m_line.orientBottomUp(),e.m_bHorizontal=e.m_line.getEndY()===e.m_line.getStartY(),e.m_bHorizontal||(e.m_dxdy=(e.m_line.getEndX()-e.m_line.getStartX())/(e.m_line.getEndY()-e.m_line.getStartY())))}initSimpleEdgeHelper_(e,i){if(e.m_segment=this.m_shape.getSegment(i),e.m_segmentInfo=this.m_shape.getOriginalSegmentInfo(i),e.m_bCurve=e.m_segment!==null,e.m_bCurve){const s=e.m_segment.clone();return s.orientBottomUp(),e.m_segment=s,e.m_env=e.m_segment.queryInterval(0,0),e.m_env.vmax+=this.m_tolerance,!0}return!1}compareTwoSegments_(e,i){const s=e.getStartXY(),n=e.getEndXY(),r=i.getStartXY(),o=i.getEndXY();if(this.m_ptSweep.setCoords(this.m_sweepX,this.m_sweepY),s.isEqualPoint2D(r)&&this.m_sweepY===s.y){this.m_ptSweep.assign(n.compare(o)<0?n:o);const _=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),x=i.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x);if(Math.abs(_-x)>this.m_tolerance)return _<x?-1:1}const l=s.compare(r)<0?r:s,u=n.compare(o)<0?n:o;let f=0,y=0;for(let _=1;_<5;_++){ar(l,u,_/5,this.m_ptSweep);const x=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),S=i.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),P=Math.abs(x-S);P>f&&(f=P,y=x<S?-1:1)}return y===0?this.errorCracking():y}compareNonHorizontal_(e,i){if(e.m_line.getStartY()===i.m_line.getStartY()&&e.m_line.getStartX()===i.m_line.getStartX())return e.m_line.getEndY()===i.m_line.getEndY()&&e.m_line.getEndX()===i.m_line.getEndX()?this.m_bIsSimple?this.errorCoincident():0:this.compareNonHorizontalUpperEnd_(e,i);if(e.m_line.getEndY()===i.m_line.getEndY()&&e.m_line.getEndX()===i.m_line.getEndX())return this.compareNonHorizontalLowerEnd_(e,i);const s=this.compareNonHorizontalLowerEnd_(e,i),n=this.compareNonHorizontalUpperEnd_(e,i);return s<0&&n<0?-1:s>0&&n>0?1:this.errorCracking()}compareHorizontal1Case1_(e,i){if(e.getEndX()>i.getEndX()){if(i.getEndX()>i.getStartX()&&i.getEndY()-i.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(i.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else if((i.getEndY()-i.getStartY())/(i.getEndX()-i.getStartX())*(e.getEndX()-e.getStartX())<this.m_tolerance10&&i.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return 1}compareHorizontal1Case2_(e,i){if(e.getStartX()<i.getStartX()){if(i.getEndX()>i.getStartX()&&i.getEndY()-i.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(i.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else if((i.getEndY()-i.getStartY())/(i.getEndX()-i.getStartX())*(e.getStartX()-e.getEndX())<this.m_tolerance10&&i.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking();return-1}compareHorizontal1Case3_(e,i){const s=Y.getNAN();s.setSub(i.getEndXY(),i.getStartXY()),s.rightPerpendicularThis(),s.normalize();const n=Y.getNAN();n.setSub(e.getStartXY(),i.getStartXY());const r=Y.getNAN();r.setSub(e.getEndXY(),i.getStartXY());const o=n.dotProduct(s),l=r.dotProduct(s),u=Math.abs(o),f=Math.abs(l);if(u<f){if(u<this.m_tolerance10&&i.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking()}else if(f<this.m_tolerance10&&i.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return o<0&&l<0?-1:o>0&&l>0?1:this.errorCracking()}compareHorizontal1_(e,i){return e.getStartY()===i.getStartY()&&e.getStartX()===i.getStartX()?this.compareHorizontal1Case1_(e,i):e.getEndY()===i.getEndY()&&e.getEndX()===i.getEndX()?this.compareHorizontal1Case2_(e,i):this.compareHorizontal1Case3_(e,i)}compareHorizontal2_(e,i){return e.getEndY()===i.getEndY()&&e.getEndX()===i.getEndX()&&e.getStartY()===i.getStartY()&&e.getStartX()===i.getStartX()?this.m_bIsSimple?this.errorCoincident():0:this.errorCracking()}compareNonHorizontalLowerEnd_(e,i){let s=1;if(e.m_line.getStartY()<i.m_line.getStartY()){s=-1;const f=e;e=i,i=f}const n=e.m_line,r=i.m_line,o=n.getStartX()-r.getStartX(),l=i.m_dxdy*(n.getStartY()-r.getStartY()),u=this.m_tolerance10;return o<l-u?-s:o>l+u?s:r.isIntersectingPoint(n.getStartXY(),this.m_tolerance,!0)?this.errorCracking():o<l?-s:s}compareNonHorizontalUpperEnd_(e,i){let s=1;if(i.m_line.getEndY()<e.m_line.getEndY()){s=-1;const f=e;e=i,i=f}const n=e.m_line,r=i.m_line,o=n.getEndX()-r.getStartX(),l=i.m_dxdy*(n.getEndY()-r.getStartY()),u=this.m_tolerance10;return o<l-u?-s:o>l+u?s:r.isIntersectingPoint(n.getEndXY(),this.m_tolerance,!0)?this.errorCracking():o<l?-s:s}errorCoincident(){this.m_bIntersectionDetected=!0;const e=7;return this.m_nonSimpleResult=new xs(e,this.m_vertex1,this.m_vertex2),-1}errorCracking(){return this.m_bIntersectionDetected=!0,this.m_bIsSimple?this.m_nonSimpleResult=new xs(6,this.m_vertex1,this.m_vertex2):(this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae),-1}compareSegments_(e,i,s,n){if(s.m_env.vmax<n.m_env.vmin)return-1;if(n.m_env.vmax<s.m_env.vmin)return 1;if(!s.m_bCurve&&!n.m_bCurve){let f=s.m_bHorizontal?1:0;return f|=n.m_bHorizontal?2:0,f===0?this.compareNonHorizontal_(s,n):f===1?this.compareHorizontal1_(s.m_line,n.m_line):f===2?-1*this.compareHorizontal1_(n.m_line,s.m_line):this.compareHorizontal2_(s.m_line,n.m_line)}if(this.m_bIntersectionDetected)return-1;const r=this.m_prevY===this.m_sweepY&&this.m_prevX===this.m_sweepX;let o,l;if(r&&e===this.m_prev1?o=this.m_prevX1:(o=Number.NaN,this.m_prev1=ae),r&&i===this.m_prev2?l=this.m_prevX2:(l=Number.NaN,this.m_prev2=ae),this.m_prevY=this.m_sweepY,this.m_prevX=this.m_sweepX,Number.isNaN(o)){this.m_prev1=e;const f=s.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);o=f,this.m_prevX1=f}if(Number.isNaN(l)){this.m_prev2=i;const f=n.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);l=f,this.m_prevX2=f}const u=y7(!0,!0,s.m_segment,n.m_segment,this.m_tolerance,!0);return u!==0?u===2?this.m_bIsSimple?this.errorCoincident():s.m_segmentInfo.equals(n.m_segmentInfo)?0:this.errorCracking():this.errorCracking():Math.abs(o-l)<=this.m_tolerance?this.compareTwoSegments_(s.m_segment,n.m_segment):o<l?-1:o>l?1:0}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1}intersectionDetected(){return this.m_bIntersectionDetected}getLastComparedNode(){return this.m_currentNode}getResult(){return this.m_nonSimpleResult}setSweepY(e,i){this.m_sweepY=e,this.m_sweepX=i,this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae}compare(e,i,s){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(s),r=i;return this.m_currentNode=s,this.compareSegments(r,r,n,n)}compareSegments(e,i,s,n){let r=this.tryGetCachedEdge_(e);r===null?this.m_vertex1===i?r=this.m_tempSimpleEdge1:(this.m_vertex1=i,r=this.tryCreateCachedEdge_(e),r===null&&(r=this.m_tempSimpleEdge1,this.m_tempSimpleEdge1.m_value=e),this.initSimpleEdge_(r,i)):this.m_vertex1=i;let o=this.tryGetCachedEdge_(s);return o===null?this.m_vertex2===n?o=this.m_tempSimpleEdge2:(this.m_vertex2=n,o=this.tryCreateCachedEdge_(s),o===null&&(o=this.m_tempSimpleEdge2,this.m_tempSimpleEdge2.m_value=s),this.initSimpleEdge_(o,n)):this.m_vertex2=n,this.compareSegments_(i,n,r,o)}onDelete(e){this.tryDeleteCachedEdge_(e)}onSet(e){this.tryDeleteCachedEdge_(e)}onEndSearch(e){this.tryDeleteCachedEdge_(e)}onAddUniqueElementFailed(e){this.tryDeleteCachedEdge_(e)}}class D1e{constructor(e,i){this.m_bIntersectionDetected=!1,this.m_pointOfInterest=Y.getNAN(),this.m_line1=new si,this.m_seg1=null,this.m_env=Ze.constructEmpty(),this.m_vertex1=-1,this.m_currentNode=-1,this.m_minDist=Number.MAX_VALUE,this.m_shape=e,this.m_tolerance=i}getCurrentNode(){return this.m_currentNode}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1,this.m_minDist=Number.MAX_VALUE}intersectionDetected(){return this.m_bIntersectionDetected}setPoint(e){this.m_pointOfInterest.assign(e)}compare(e,i){const s=e.getElement(i);return this.compareVertex(e,i,s)}compareVertex(e,i,s){let n,r=this.m_shape.getSegment(s),o=!0;if(r==null)this.m_shape.queryLineConnector(s,this.m_line1,!0),this.m_env.setCoordsNoNAN(this.m_line1.getStartX(),this.m_line1.getEndX()),r=this.m_line1,n=this.m_line1.getStartY()===this.m_line1.getEndY();else{const u=xe.constructEmpty();r.queryLooseEnvelope(u),u.queryIntervalX(this.m_env),n=u.height()===0,o=!1}if(this.m_pointOfInterest.x+this.m_tolerance<this.m_env.vmin)return-1;if(this.m_pointOfInterest.x-this.m_tolerance>this.m_env.vmax)return 1;if(n)return this.m_currentNode=i,this.m_bIntersectionDetected=!0,0;let l=0;if(o){zge(this.m_line1);const u=this.m_line1.getStartXY(),f=new Y;f.setSub(this.m_line1.getEndXY(),u),f.rightPerpendicularThis();const y=new Y;y.setSub(this.m_pointOfInterest,u),l=f.dotProduct(y),l/=f.length()}else l=r.intersectionOfYMonotonicWithAxisX(this.m_pointOfInterest.y,this.m_pointOfInterest.x)-this.m_pointOfInterest.x;return l<10*-this.m_tolerance?-1:l>10*this.m_tolerance?1:(r.isIntersectingPoint(this.m_pointOfInterest,this.m_tolerance)&&(Math.abs(l)<this.m_minDist&&(this.m_currentNode=i,this.m_minDist=l),this.m_bIntersectionDetected=!0),l<0?-1:l>0?1:0)}}class zb{constructor(e,i){this.m_lists=new ws(!1),this.m_hash=i,this.m_hashBuckets=new Int32Array(e),this.m_hashBuckets.fill(zb.st_nullNode()),this.m_bitFilter=new Int32Array(10*e+31>>5)}reserveElements(e){this.m_lists.reserveLists(Math.min(this.m_hashBuckets.length,e)),this.m_lists.reserveNodes(e)}addElement(e,i){i===void 0&&(i=this.m_hash.getHash(e));const s=i%(this.m_bitFilter.length<<5);this.m_bitFilter[s>>5]|=1<<(31&s);const n=i%this.m_hashBuckets.length;let r=this.m_hashBuckets[n];return r===ws.st_nullNode()&&(r=this.m_lists.createList(),this.m_hashBuckets[n]=r),this.m_lists.addElement(r,e)}deleteElement(e,i){i===void 0&&(i=this.m_hash.getHash(e));const s=i%this.m_hashBuckets.length,n=this.m_hashBuckets[s];n===ws.st_nullNode()&&Je("");let r=this.m_lists.getFirst(n),o=ws.st_nullNode();for(;r!==ws.st_nullNode();){const l=this.m_lists.getData(r),u=this.m_lists.getNext(r);l===e?(this.m_lists.deleteElementDirect(n,o,r),this.m_lists.getFirst(n)===ws.st_nullNode()&&(this.m_lists.deleteList(n),this.m_hashBuckets[s]=ws.st_nullNode())):o=r,r=u}}getFirstInBucket(e){const i=e%(this.m_bitFilter.length<<5);if(!(this.m_bitFilter[i>>5]&1<<(31&i)))return ws.st_nullNode();const s=e%this.m_hashBuckets.length,n=this.m_hashBuckets[s];return n===ws.st_nullNode()?ws.st_nullNode():this.m_lists.getFirst(n)}getNextInBucket(e){return this.m_lists.getNext(e)}findNode(e){const i=this.m_hash.getHash(e);let s=this.getFirstInBucket(i);for(;s!==ws.st_nullNode();){const n=this.m_lists.getData(s);if(this.m_hash.equal(n,e))return s;s=this.m_lists.getNext(s)}return ws.st_nullNode()}getNextNode(e){return K(0),0}deleteNode(e){const i=this.getElement(e),s=this.m_hash.getHash(i)%this.m_hashBuckets.length,n=this.m_hashBuckets[s];n===ws.st_nullNode()&&Je(""),this.m_lists.deleteElementSearch(n,e),this.m_lists.getFirst(n)===ws.st_nullNode()&&(this.m_lists.deleteList(n),this.m_hashBuckets[s]=ws.st_nullNode())}getElement(e){return this.m_lists.getData(e)}static st_nullNode(){return ws.st_nullNode()}clear(){K(0)}size(){return this.m_lists.getNodeCount()}dbgPrintBucketHistogram(){K(0)}}function k1e(t,e,i,s,n){const r=new Ett(n);return r.m_shape=t,r.m_sqrTolerance=e*e,r.m_cellSize=2*e,r.m_invCellSize=1/r.m_cellSize,r.m_geometry=i,r.m_bTrackChanges=s,r.m_bHasSegmentParentage=t.hasSegmentParentage(),r.clusterNonReciprocal()}function Nj(t,e,i,s,n){const r=t-i,o=e-s;return r*r+o*o<=n}function wtt(){return{pt:new Y,weight:0,rank:0,bMerged:!1}}function N1e(t,e,i,s,n,r){const o=wtt(),l=i+n;let u=!1,f=t.x;t.x!==e.x&&(s===r&&(f=(t.x*i+e.x*n)/l),u=!0);let y=t.y;return t.y!==e.y&&(s===r&&(y=(t.y*i+e.y*n)/l),u=!0),s!==r?s>r?(o.rank=s,o.weight=i,o.pt=t):(o.rank=r,o.weight=n,o.pt=e):(o.pt.setCoords(f,y),o.weight=l,o.rank=s),o.bMerged=u,o}function Stt(t,e,i,s,n,r,o,l,u){const f=t.equals(e);if(s>r)return o.assignCopy(t),u[0]=s,l[0]=i,f;if(r>s)return o=e,u[0]=r,l[0]=n,f;o.assignCopy(t);const y=N1e(t.getXY(),e.getXY(),i,s,n,r);return o.setXY(y.pt),l[0]=y.weight,u[0]=y.rank,f}function $1e(t,e){const i=Ige(t);return sJe(i,e)}class bie{constructor(e,i,s,n,r){this.m_workPt=new Y,this.m_shape=e,this.m_sqrTolerance=s,this.m_invCellSize=n,this.m_origin=i.clone(),this.m_hashValues=r}getHash(e){return this.m_shape.getUserIndex(e,this.m_hashValues)}calculateHash(e){return K(0),0}calculateHashFromVertex(e){this.m_shape.queryXY(e,this.m_workPt);const i=this.m_workPt.x-this.m_origin.x,s=Math.trunc(i*this.m_invCellSize+.5),n=this.m_workPt.y-this.m_origin.y;return $1e(s,Math.trunc(n*this.m_invCellSize+.5))}dbgCalculateHashFromXy(e,i){return K(0),0}equal(e,i){return K(0),!1}}class Ett{constructor(e){this.m_origin=Y.getNAN(),this.m_sqrTolerance=0,this.m_cellSize=0,this.m_invCellSize=0,this.m_geometry=ae,this.m_bucketArray=new Array(4),this.m_bucketHash=new Array(4),this.m_dbgCandidateCheckCount=0,this.m_nsr=new xs,this.m_hashValues=-1,this.m_newClusters=-1,this.m_bTrackChanges=!1,this.m_bHasSegmentParentage=!1,this.m_shape=null,this.m_clusters=new ws,this.m_hashFunction=null,this.m_hashTable=null,this.m_progressCounter=0,this.m_progressTracker=e}progress_(){}getNearestNeighbourCandidate(e,i,s,n,r){K(0)}findClusterCandidate(e,i){K(0)}collectClusterCandidates(e,i){const s=Y.getNAN();this.m_shape.queryXY(e,s);const n=(s.x-this.m_origin.x)*this.m_invCellSize,r=(s.y-this.m_origin.y)*this.m_invCellSize,o=Math.trunc(n),l=Math.trunc(r);let u=0;for(let f=0;f<=1;f+=1)for(let y=0;y<=1;y+=1){const _=$1e(o+f,l+y),x=this.m_hashTable.getFirstInBucket(_);x!==zb.st_nullNode()&&(this.m_bucketArray[u]=x,this.m_bucketHash[u]=_,u++)}for(let f=u-1;f>=1;f--){const y=this.m_bucketArray[f];for(let _=f-1;_>=0;_--)if(y===this.m_bucketArray[_]){this.m_bucketHash[_]=-1,u--,f!==u&&(this.m_bucketHash[f]=this.m_bucketHash[u],this.m_bucketArray[f]=this.m_bucketArray[u]);break}}for(let f=0;f<u;f++)this.collectNearestNeighbourCandidates(e,this.m_bucketHash[f],s,this.m_bucketArray[f],i)}collectNearestNeighbourCandidates(e,i,s,n,r){const o=Y.getNAN();for(let l=n;l!==zb.st_nullNode();l=this.m_hashTable.getNextInBucket(l)){const u=this.m_hashTable.getElement(l);e===u||i!==-1&&this.m_shape.getUserIndex(u,this.m_hashValues)!==i||(this.m_shape.queryXY(u,o),Nj(s.x,s.y,o.x,o.y,this.m_sqrTolerance)&&r.push(l))}}mergeClusters(e,i,s){let n=this.m_shape.getUserIndex(e,this.m_newClusters);const r=this.m_shape.getUserIndex(i,this.m_newClusters);n===-1&&(n=this.m_clusters.createList(),this.m_clusters.addElement(n,e),this.m_shape.setUserIndex(e,this.m_newClusters,n)),r===-1?this.m_clusters.addElement(n,i):this.m_clusters.concatenateLists(n,r),this.m_shape.setUserIndex(i,this.m_newClusters,Yt.impossibleIndex2());const o=this.mergeVertices(e,i);if(s){const l=this.m_hashFunction.calculateHashFromVertex(e);this.m_shape.setUserIndex(e,this.m_hashValues,l)}return o}mergeVertices(e,i){const s=Y.getNAN();this.m_shape.queryXY(e,s);const n=Y.getNAN();this.m_shape.queryXY(i,n);const r=this.m_shape.getRank(e),o=this.m_shape.getRank(i),l=this.m_shape.getWeight(e),u=this.m_shape.getWeight(i);let f,y,_,x,S=!1;if(r===o?(f=r,y=l+u,_=s.x,s.x!==n.x&&(_=(s.x*l+n.x*u)/y,S=!0),x=s.y,s.y!==n.y&&(x=(s.y*l+n.y*u)/y,S=!0)):(r>o?(_=s.x,x=s.y,y=l,f=r):(_=n.x,x=n.y,y=u,f=o),S=!s.equals(n)),S&&(this.m_shape.setXYMonotonic(e,_,x),this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(e,!0),this.m_bHasSegmentParentage)){const P=this.m_shape.getSegmentParentageBreakVertex(e)||this.m_shape.getSegmentParentageBreakVertex(i);this.m_shape.setSegmentParentageBreakVertex(e,P),this.m_shape.setSegmentParentageBreakVertex(i,P)}return this.m_shape.setWeight(e,y),this.m_shape.setRank(e,f),S}clusterReciprocal(){return K(0),!1}needsClustering(){const e={stack:[],error:void 0,hasError:!1};try{Kl(e,KA(()=>{this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters)}),!1);const i=this.m_shape.getSelectedCount(),s=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin.assign(s.getLowerLeft());const n=Math.max(s.height(),s.width())/(So()-1);this.m_cellSize<n&&(this.m_cellSize=n,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(this.m_shape.getSelectedCount()/3+1),this.m_clusters.reserveNodes(this.m_shape.getSelectedCount()/3+1),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new bie(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new zb(4*i/3,this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let r=!1;for(let o=0;o<2;o++){const l=[],u=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let f=u.next();f!==ae;f=u.next()){if(this.progress_(),o>0&&this.m_shape.getUserIndex(f,this.m_newClusters)===Yt.impossibleIndex2())continue;let y;if(o===0?(y=this.m_hashFunction.calculateHashFromVertex(f),this.m_shape.setUserIndex(f,this.m_hashValues,y)):y=this.m_shape.getUserIndex(f,this.m_hashValues),this.collectClusterCandidates(f,l),l.length!==0){for(let _=0,x=l.length;_<x;_++){this.progress_();const S=l[_],P=this.m_hashTable.getElement(S);if(this.m_hashTable.deleteNode(S),!this.m_shape.isEqualXY(f,P))return this.m_nsr=new xs(5,this.m_shape.getVertexIndex(f),this.m_shape.getVertexIndex(P)),r=!0,r;this.mergeClusters(f,P,!1)}l.length=0}o===0&&this.m_hashTable.addElement(f,y)}}return r}catch(i){e.error=i,e.hasError=!0}finally{fm(e)}}clusterNonReciprocal(){const e=this.m_shape.getSelectedCount(),i=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin=i.getLowerLeft();const s=Math.max(i.height(),i.width())/(So()-1);this.m_cellSize<s&&(this.m_cellSize=s,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_clusters.reserveNodes(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new bie(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new zb(Math.trunc(4*e/3),this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let n=!1;{const r=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let o=r.next();o!==ae;o=r.next()){this.progress_();const l=this.m_hashFunction.calculateHashFromVertex(o);this.m_shape.setUserIndex(o,this.m_hashValues,l),this.m_hashTable.addElement(o,l)}}{const r=[],o=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let l=o.next();l!==ae;l=o.next()){if(this.m_shape.getUserIndex(l,this.m_newClusters)===Yt.impossibleIndex2())continue;let u=this.m_shape.getUserIndex(l,this.m_hashValues);this.m_hashTable.deleteElement(l,u);let f=!1;for(;this.collectClusterCandidates(l,r),r.length!==0;){let y=0;for(let _=0,x=r.length;_<x;_++){this.progress_();const S=r[_],P=this.m_hashTable.getElement(S);this.m_hashTable.deleteNode(S);const A=_+1===x;y|=this.mergeClusters(l,P,A)?1:0}if(f||(f=y!==0),n||(n=y!==0),r.length=0,!y)break}f&&(u=this.m_shape.getUserIndex(l,this.m_hashValues)),this.m_hashTable.addElement(l,u)}r.length=0}return n&&this.applyClusterPositions_(),this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters),n}applyClusterPositions_(){const e=Y.getNAN();for(let i=this.m_clusters.getFirstList();i!==ws.st_nullNode();i=this.m_clusters.getNextList(i)){let s=this.m_clusters.getFirst(i);const n=this.m_clusters.getElement(s);this.m_shape.queryXY(n,e);const r=this.m_shape.getRank(n),o=this.m_shape.getWeight(n);for(s=this.m_clusters.getNext(s);s!==ws.st_nullNode();s=this.m_clusters.getNext(s)){const l=this.m_clusters.getElement(s);if(this.m_bTrackChanges?this.m_shape.isEqualXYPoint2D(l,e)||(this.m_shape.setXYMonotonicPoint2D(l,e),this.m_shape.setGeometryModifiedWithVertex(l,!0)):this.m_shape.setXYMonotonicPoint2D(l,e),this.m_bHasSegmentParentage){const u=this.m_shape.getSegmentParentageBreakVertex(n)||this.m_shape.getSegmentParentageBreakVertex(l);this.m_shape.setSegmentParentageBreakVertex(n,u),this.m_shape.setSegmentParentageBreakVertex(l,u)}this.m_shape.setWeight(l,o),this.m_shape.setRank(l,r)}}}}class fl{constructor(){this.m_inputParts=[],this.m_resultParts1=[],this.m_resultParts2=[],this.m_resultSegments=[],this.m_freeSegments=[],this.m_inputSegments=[],this.m_param1=[],this.m_param2=[],this.m_tolerance=0,this.m_toleranceZ=0,this.m_point=new Ut,this.m_pointWeight=1,this.m_maxDensifyLimit=0,this.m_pointRank=0,this.m_changed1=!1,this.m_changed2=!1,this.m_adaptiveDensify=!1}clear(){this.freeAllResultSegments(),this.m_inputSegments.length=0,this.m_inputParts.length=0,this.m_resultParts1.length=0,this.m_resultParts2.length=0,this.m_param1.length=0,this.m_param2.length=0,this.m_adaptiveDensify=!1,this.m_changed1=!1,this.m_changed2=!1}newIntersectionPart_(e,i,s,n,r,o,l,u,f,y){return Ptt(e,i,s,n,r,o,l,u,f,y)}pushSegment(e,i,s,n,r,o,l,u,f,y){return this.m_inputParts.push(this.newIntersectionPart_(this.m_inputSegments.length,i,s,n,r,o,l,u,f,y)),this.m_inputSegments.push(e),this.m_inputParts.length-1}getResultSegmentCount(e){return this.m_adaptiveDensify?e===0?this.m_param1.length-1:this.m_param2.length-1:e===0?this.m_resultParts1.length:this.m_resultParts2.length}getResultPart_(e,i){return e===0?this.m_resultParts1[i]:this.m_resultParts2[i]}getResultSegment(e,i){return this.m_resultSegments[this.getResultPart_(e,i).segmentIndex].get()}getSegmentChanged(e){return e===0?this.m_changed1:this.m_changed2}getResultSegmentStartPointWeight(e,i){return this.getResultPart_(e,i).weightStart}getResultSegmentStartPointRank(e,i){return this.getResultPart_(e,i).rankStart}getResultSegmentSegmentParentage(e,i){return this.getResultPart_(e,i).segmentParentage}getResultSegmentStartPointIsBreak(e,i){return this.getResultPart_(e,i).u.bBreakStart}getResultSegmentEndPointWeight(e,i){return this.getResultPart_(e,i).weightEnd}getResultSegmentEndPointRank(e,i){return this.getResultPart_(e,i).rankEnd}getResultSegmentEndPointIsBreak(e,i){return this.getResultPart_(e,i).u.bBreakEnd}getResultSegmentInteriorRank(e,i){return this.getResultPart_(e,i).rankInterior}getResultSegmentInteriorWeight(e,i){return this.getResultPart_(e,i).weightInterior}getResultPoint(){return this.m_point}getResultPointWeight(){return this.m_pointWeight}getResultPointRank(){return this.m_pointRank}getResultPointChanged(){return this.m_changed2}intersectLines(e,i){this.m_inputSegments.length!==2&&bt(""),this.m_changed1=!1,this.m_changed2=!1,this.m_tolerance=e;const s=Xi(e*fl.c_smallToleranceFactor);let n=!1;const r=this.m_inputParts[0],o=this.m_inputParts[1],l=this.m_inputSegments[r.segmentIndex],u=this.m_inputSegments[o.segmentIndex];if(i||5&g5(!0,l,u,e,!0)){const f=Gv(!0,l,u,null,this.m_param1,this.m_param2,e);f===0&&bt("");const y=new Array(f);for(let W=0;W<f;++W)y[W]=Y.getNAN();const _=new Float64Array(f),x=new Int32Array(f),S=new Array(f),P=new Array(f);for(let W=0;W<f;++W)S[W]=U6(),P[W]=U6();for(let W=0;W<f;W++){const J=this.m_param1[W],re=this.m_param2[W];let se,oe=r.rankInterior,pe=r.weightInterior;J===0?(oe=r.rankStart,pe=r.weightStart,se=r.u.bBreakStart):J===1?(oe=r.rankEnd,pe=r.weightEnd,se=r.u.bBreakEnd):(this.m_changed1=!0,se=!1);let ce,ue=o.rankInterior,ne=o.weightInterior;re===0?(ue=o.rankStart,ne=o.weightStart,ce=o.u.bBreakStart):re===1?(ue=o.rankEnd,ne=o.weightEnd,ce=o.u.bBreakEnd):(this.m_changed2=!0,ce=!1);const de=oe,Se=ue;let Pe=1,Re=0,Oe=Y.getNAN();if(de===Se){const we=l.getCoord2D(J),Fe=u.getCoord2D(re);Pe=pe+ne,Re=oe,ar(we,Fe,ne/Pe,Oe);const it=Y.sqrDistance(Oe,we),vt=Y.sqrDistance(Oe,Fe);S[W].bBigMove=it>s,P[W].bBigMove=vt>s,this.m_changed1||we.equals(Oe)||(this.m_changed1=!0),this.m_changed2||Fe.equals(Oe)||(this.m_changed2=!0)}else if(de>Se){Oe=l.getCoord2D(J);const we=u.getCoord2D(re);Pe=pe,Re=oe;const Fe=Y.sqrDistance(Oe,we);S[W].bBigMove=!1,P[W].bBigMove=Fe>s,this.m_changed2||we.equals(Oe)||(this.m_changed2=!0)}else{Oe=u.getCoord2D(re),Pe=ne,Re=ue;const we=l.getCoord2D(J),Fe=Y.sqrDistance(Oe,we);S[W].bBigMove=Fe>s,P[W].bBigMove=!1,this.m_changed1||we.equals(Oe)||(this.m_changed1=!0)}y[W].assign(Oe),_[W]=Pe,x[W]=Re,S[W].bIsBreak=se||ce,P[W].bIsBreak=se||ce,n||(n=S[W].bBigMove||P[W].bBigMove)}const A=r.rankInterior,k=r.weightInterior;let $=0,F=-1;for(let W=0;W<=f;W++){const J=W<f?this.m_param1[W]:1;if(J!==$){const re=this.allocResultSegment(),se=this.m_resultSegments[re];let oe,pe,ce,ue;l.queryCut($,J,se,!1),se.get().snapControlPoints(e*e);let ne=!1,de=!1,Se=!1,Pe=!1,Re=!1,Oe=Y.getNAN(),we=Y.getNAN();F!==-1?(pe=x[F],oe=_[F],ne=S[F].bBigMove,Oe.assign(y[F]),Se=S[F].bIsBreak,Re=!0):(oe=r.weightStart,pe=r.rankStart,Oe=se.get().getStartXY(),Se=r.u.bBreakStart),W<f?(ue=x[W],ce=_[W],de=S[W].bBigMove,we.assign(y[W]),Pe=S[W].bIsBreak,Re=!0):(ce=r.weightEnd,ue=r.rankEnd,we=se.get().getEndXY(),Pe=r.u.bBreakEnd),Re&&se.get().setCoordsForIntersector(Oe,we,!0),this.m_resultParts1.push(this.newIntersectionPart_(re,oe,pe,ce,ue,k,A,Se,Pe,r.segmentParentage));const Fe=this.m_resultParts1.at(-1);Fe.u.bBigMoveStart=ne,Fe.u.bBigMoveEnd=de,$=J,F=W}else F===-1&&(F=W)}const G=new Array(f);for(let W=0;W<f;W++)G[W]=W;f>2?(G.sort((W,J)=>this.m_param2[W]<this.m_param2[J]?-1:this.m_param2[W]>this.m_param2[J]?1:0),Ax(this.m_param2)):f===2&&this.m_param2[0]>this.m_param2[1]&&(this.m_param2[1]=St(this.m_param2[0],this.m_param2[0]=this.m_param2[1]),G[1]=St(G[0],G[0]=G[1]));const V=o.rankInterior,B=o.weightInterior;$=0,F=-1;for(let W=0;W<=f;W++){const J=W<f?this.m_param2[W]:1;if(J!==$){const re=this.allocResultSegment(),se=this.m_resultSegments[re];let oe,pe,ce,ue;u.queryCut($,J,se,!1),se.get().snapControlPoints(e*e);let ne=Y.getNAN(),de=Y.getNAN(),Se=!1,Pe=!1,Re=!1,Oe=!1,we=!1;if(F!==-1){const it=G[F];oe=_[it],pe=x[it],ne.assign(y[it]),Re=P[it].bBigMove,Se=P[it].bIsBreak,we=!0}else oe=o.weightStart,pe=o.rankStart,ne=se.get().getStartXY(),Se=o.u.bBreakStart;if(W!==f){const it=G[W];ce=_[it],ue=x[it],de.assign(y[it]),Oe=P[it].bBigMove,Pe=P[it].bIsBreak,we=!0}else ce=o.weightEnd,ue=o.rankEnd,de=se.get().getEndXY(),Pe=o.u.bBreakEnd;we&&se.get().setCoordsForIntersector(ne,de,!0),this.m_resultParts2.push(this.newIntersectionPart_(re,oe,pe,ce,ue,B,V,Se,Pe,o.segmentParentage));const Fe=this.m_resultParts2.at(-1);Fe.u.bBigMoveStart=Re,Fe.u.bBigMoveEnd=Oe,$=J,F=W}else F===-1&&(F=W)}return n?3:2}return 0}intersectLines3D(e,i,s,n){return K(0),1}intersect2D(e,i){const s=this.m_inputParts[0],n=this.m_inputParts[1],r=this.m_inputSegments[s.segmentIndex].getGeometryType(),o=this.m_inputSegments[n.segmentIndex].getGeometryType();return r!==me.enumLine||o!==me.enumLine?new Ttt(this).intersectCurves(e,i):this.intersectLines(e,i)}intersect2DEx(e,i,s,n,r){this.m_point.assignCopy(i),this.m_inputSegments.length!==1&&bt(""),this.m_tolerance=e,this.m_changed1=!1,this.m_changed2=!1;const o=Xi(e*fl.c_smallToleranceFactor);let l=!1;const u=this.m_inputParts[0],f=this.m_inputSegments[u.segmentIndex];if(r||f.isIntersectingPoint(i.getXY(),e,!0)){this.m_param1=Vi(16,Number.NaN);const y=f.getClosestCoordinate(i.getXY(),!1);this.m_param1[0]=y;let _=u.rankInterior,x=u.weightInterior;y===0?(_=u.rankStart,x=u.weightStart):y===1?(_=u.rankEnd,x=u.weightEnd):this.m_changed1=!0;let S=_;const P=s,A=n;S===P&&f.isCurve()&&(S=P+1);let k=1,$=0;const F=new Y;if(S===P){const W=f.getCoord2D(y),J=i.getXY();k=x+A,$=_,ar(W,J,A/k,F),this.m_changed1||W.equals(F)||(this.m_changed1=!0),this.m_changed2||J.equals(F)||(this.m_changed2=!0),l=Y.sqrDistance(F,W)>o}else S>P?(F.assign(f.getCoord2D(y)),k=x,$=_,this.m_changed2||F.equals(i.getXY())||(this.m_changed2=!0)):(F.assign(f.getCoord2D(y)),k=A,$=P,this.m_changed1||F.equals(i.getXY())||(this.m_changed1=!0),l=Y.sqrDistance(F,i.getXY())>o);let G=0,V=-1;const B=1;for(let W=0;W<=B;W++){const J=W<B?this.m_param1[0]:1;if(J!==G){const re=this.allocResultSegment(),se=this.m_resultSegments[re];f.queryCut(G,J,se),se.get().snapControlPoints(e*e);let oe=u.weightStart,pe=u.weightEnd,ce=u.rankStart,ue=u.rankEnd;const ne=u.rankInterior,de=u.weightInterior;let Se=u.u.bBreakStart,Pe=u.u.bBreakEnd;V!==-1&&(oe=k,ce=$,Se=!0,se.get().setCoordsForIntersector(F,se.get().getEndXY(),!0)),W!==B&&(pe=k,ue=$,Pe=!0,se.get().setCoordsForIntersector(se.get().getStartXY(),F,!0)),G=J,this.m_resultParts1.push(this.newIntersectionPart_(re,oe,ce,pe,ue,de,ne,Se,Pe,u.segmentParentage))}V=W}return this.m_point.setXY(F),this.m_pointWeight=k,this.m_pointRank=$,l?3:2}return 0}intersect_3D(e,i,s,n){return K(0),1}intersect3DEx(e,i,s,n,r,o,l){return K(0),1}getTolerance(){return this.m_tolerance}getToleranceZ(){return K(0),0}freeAllResultSegments(){this.m_resultSegments.length=0,this.m_freeSegments.length=0}freeResultSegment(e){this.m_freeSegments.push(e)}allocResultSegment(){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const e=new Qt,i=this.m_resultSegments.length;return this.m_resultSegments.push(e),i}allocResultSegmentFromBuffer(e){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const i=new Qt({copy:e}),s=this.m_resultSegments.length;return this.m_resultSegments.push(i),s}allocResultSegmentFromSegment(e){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const i=new Qt({segment:e}),s=this.m_resultSegments.length;return this.m_resultSegments.push(i),s}}function Ctt(t,e){return{bBigMoveStart:!1,bBigMoveEnd:!1,bBreakStart:t,bBreakEnd:e}}function Ptt(t,e,i,s,n,r,o,l,u,f){return{segmentIndex:t,weightStart:e,rankStart:i,weightEnd:s,rankEnd:n,weightInterior:r,rankInterior:o,segmentParentage:f,u:Ctt(l,u)}}function U6(){return{bBigMove:!1,bIsBreak:!1}}fl.maxWeight=.1*Number.MAX_VALUE,fl.c_smallToleranceFactor=.01,fl.c_maxGeometryTypeToRankDelta=8;let xie=class{constructor(){this.start=null,this.end=null,this.equalEdge=null,this.segmentIndex=-1,this.segmentParentage=-1,this.weight=0,this.rank=0}hasSegment(){return this.segmentIndex>=0}transferAttributes(t,e,i){if(e.getDescription().getAttributeCount()===1)return;const s=t.parent.m_resultSegments[this.segmentIndex].get().getStartXY(),n=t.parent.m_resultSegments[this.segmentIndex].get().getEndXY(),r=new Ut;e.queryStart(r),i?(r.setXY(s),t.parent.m_resultSegments[this.segmentIndex].get().setStart(r)):(r.setXY(n),t.parent.m_resultSegments[this.segmentIndex].get().setEnd(r)),e.queryEnd(r),i?(r.setXY(n),t.parent.m_resultSegments[this.segmentIndex].get().setEnd(r)):(r.setXY(s),t.parent.m_resultSegments[this.segmentIndex].get().setStart(r))}copyFromWhenOverlap(t,e,i){this.equalEdge=e,e.equalEdge=this,this.segmentIndex=t.parent.allocResultSegmentFromBuffer(t.parent.m_resultSegments[e.segmentIndex]),this.segmentParentage=e.segmentParentage,this.weight=e.weight,this.rank=e.rank,i?(this.start.copyFrom(e.start),this.end.copyFrom(e.end)):(this.start.copyFrom(e.end),this.end.copyFrom(e.start),t.parent.m_resultSegments[this.segmentIndex].get().reverse())}getEnd(){return K(0),{}}getNextInChain(){return this.end.nextInChain}getPrevInChain(){return this.start.prevInChain}};class wie{constructor(){this.hash=0,this.pt=new Y,this.prevInChain=null,this.nextInChain=null,this.prevInHash=null,this.nextInHash=null,this.prevEqual=null,this.nextEqual=null,this.weight=0,this.rank=0,this.bBigMove=!1,this.bIsBreak=!1}copyFrom(e){this.pt.assign(e.pt),this.weight=e.weight,this.rank=e.rank,this.bBigMove=e.bBigMove,this.bIsBreak=e.bIsBreak}nextNode(){return K(0),{}}prevNode(){return K(0),{}}equalListHead(){let e=this;for(;e.prevEqual!==null;e=e.prevEqual);return e}}function d0(t,e,i,s){return{edge1:t,edge2:e,recursion:i,bIsIntersecting:s}}class Ttt{constructor(e){this.m_pairs=[],this.m_chainOrigin1=null,this.m_chainOrigin2=null,this.m_newNodes=[],this.m_hashTableOfEquals=[],this.m_hashTableOfEqualsSize=0,this.m_origin=new Y,this.m_cell=new Y,this.parent=e}addSegment(e,i,s,n,r,o,l,u,f,y,_){const x=this.newNode(this.parent.m_resultSegments[e].get().getStartXY(),s,n,f),S=this.newNode(this.parent.m_resultSegments[e].get().getEndXY(),r,o,y);this.newEdge(x,S,e,l,u,_),this.m_chainOrigin1===null?this.m_chainOrigin1=x:this.m_chainOrigin2===null?this.m_chainOrigin2=x:K(0)}intersectCurvesHelper(e,i,s,n,r){var Oe,we,Fe,it,vt,ot,ut,Ct,qt,Lt,Dt,Wi,us,fn,Us,dr,ho,ss;const o=this.getSegment(e).get(),l=this.getSegment(i).get();if(o.isDegenerate(0)||l.isDegenerate(0))return 0;const u=this.tryOverlapIntersectCurves(e,i,s,n);if(u!==0)return u;const f=Xi(.01*s);let y=!1,_=this.processSharpCorners(o,l,s,r>4);const x=_>0;if(!x){if(!(n||5&y7(!0,!1,o,l,s,!0)))return 0;_=Gv(!0,o,l,null,this.parent.m_param1,this.parent.m_param2,s)}_===0&&bt("");const S=o.getGeometryType(),P=l.getGeometryType(),A=Ge(Y,_),k=Ge(Y,_),$=new Array(_),F=new Array(_),G=new Array(_),V=new Array(_),B=nte(U6,_),W=nte(U6,_);let J=!1,re=!1;for(let ye=0;ye<_;ye++){const Fi=this.parent.m_param1[ye],Sr=this.parent.m_param2[ye];let ri=e.rank,Ai=e.weight,pn=!0,ms=!1;Fi===0?(ri=e.start.rank,Ai=e.start.weight,ms=e.start.bIsBreak):Fi===1?(ri=e.end.rank,Ai=e.end.weight,ms=e.end.bIsBreak):(J=!0,pn=!1);let Ji=i.rank,tn=i.weight,mn=!1,Br=!0;Sr===0?(Ji=i.start.rank,tn=i.start.weight,mn=i.start.bIsBreak):Sr===1?(Ji=i.end.rank,tn=i.end.weight,mn=i.end.bIsBreak):(re=!0,Br=!1);let Cs=ri,xt=Ji;if(Cs===xt&&(Cs*=fl.c_maxGeometryTypeToRankDelta,xt*=fl.c_maxGeometryTypeToRankDelta,Cs+=L_(S,o,!1),xt+=L_(P,l,!1)),pn&&Br&&xt===Cs){const d=o.getCoord2D(Fi),g=l.getCoord2D(Sr);d.equals(g)&&(xt=Cs-1)}let Ys=1,m=0,j=1,T=0;const p=new Y,h=new Y,a=o.getCoord2D(Fi),c=l.getCoord2D(Sr);if(x&&Y.distance(a,c)>s)p.setCoordsPoint2D(a),h.setCoordsPoint2D(c),Ys=Ai,j=tn,m=ri,T=Ji,B[ye].bBigMove=!1,W[ye].bBigMove=!1,ms=!0,mn=!0;else if(Cs===xt){j=Ys=Ai+tn,T=m=ri,ar(a,c,tn/Ys,p),h.setCoordsPoint2D(p);const d=Y.sqrDistance(p,a),g=Y.sqrDistance(p,c);B[ye].bBigMove=d>f,W[ye].bBigMove=g>f,J||a.equals(p)||(J=!0),re||c.equals(h)||(re=!0)}else if(Cs>xt){p.setCoordsPoint2D(a),h.setCoordsPoint2D(p),j=Ys=Ai,T=m=ri;const d=Y.sqrDistance(p,c);B[ye].bBigMove=!1,W[ye].bBigMove=d>f,re||c.equals(h)||(re=!0)}else{h.setCoordsPoint2D(c),p.setCoordsPoint2D(h),j=Ys=tn,T=m=Ji;const d=Y.sqrDistance(p,a);B[ye].bBigMove=d>f,W[ye].bBigMove=!1,J||a.equals(p)||(J=!0)}A[ye].assign(p),k[ye].assign(h),$[ye]=Ys,F[ye]=j,G[ye]=m,V[ye]=T,B[ye].bIsBreak=ms||mn,W[ye].bIsBreak=ms||mn,y||(y=B[ye].bBigMove||W[ye].bBigMove),ye>0&&(Fi!==this.parent.m_param1[ye-1]&&Sr!==this.parent.m_param2[ye-1]||(G[ye]<=G[ye-1]?(A[ye].assign(k[ye-1]),$[ye]=F[ye-1],G[ye]=V[ye-1],k[ye].assign(k[ye-1]),F[ye]=F[ye-1],V[ye]=V[ye-1],(Oe=B[ye]).bBigMove||(Oe.bBigMove=B[ye-1].bBigMove),(we=W[ye]).bBigMove||(we.bBigMove=W[ye-1].bBigMove),(Fe=B[ye]).bIsBreak||(Fe.bIsBreak=B[ye-1].bIsBreak),(it=W[ye]).bIsBreak||(it.bIsBreak=W[ye-1].bIsBreak)):(A[ye-1].assign(A[ye]),$[ye-1]=$[ye],G[ye-1]=G[ye],k[ye-1].assign(k[ye]),F[ye-1]=F[ye],V[ye-1]=V[ye],(vt=B[ye-1]).bBigMove||(vt.bBigMove=B[ye].bBigMove),(ot=W[ye-1]).bBigMove||(ot.bBigMove=W[ye].bBigMove),(ut=B[ye-1]).bIsBreak||(ut.bIsBreak=B[ye].bIsBreak),(Ct=W[ye-1]).bIsBreak||(Ct.bIsBreak=W[ye].bIsBreak))))}if(!J&&!re&&_===2){if(S!==me.enumLine||P!==me.enumLine){if(this.processDoublyConnectedEdges(e,i,r+1,s))return this.parent.m_changed1=!0,this.parent.m_changed2=!0,2;K(0)}K(0)}(qt=this.parent).m_changed1||(qt.m_changed1=J),(Lt=this.parent).m_changed2||(Lt.m_changed2=re);let se=e,oe=e.end.weight,pe=e.end.rank,ce=e.end.bBigMove,ue=e.end.bIsBreak,ne=0,de=-1;for(let ye=0;ye<=_;ye++){const Fi=ye<_?this.parent.m_param1[ye]:1;if(Fi!==ne){const Sr=this.parent.allocResultSegment(),ri=this.parent.m_resultSegments[Sr];let Ai,pn,ms,Ji;o.queryCut(ne,Fi,ri,!1),ri.get().snapControlPoints(s*s);let tn=!1,mn=!1,Br=!1,Cs=!1;const xt=new Y,Ys=new Y;de!==-1?(pn=G[de],Ai=$[de],Br=B[de].bBigMove,tn=B[de].bIsBreak,xt.assign(A[de])):(Ai=e.start.weight,pn=e.start.rank,Br=e.start.bBigMove,tn=e.start.bIsBreak,xt.assign(ri.get().getStartXY())),ye<_?(Ji=G[ye],ms=$[ye],Cs=B[ye].bBigMove,mn=B[ye].bIsBreak,Ys.assign(A[ye])):(ms=oe,Ji=pe,Cs=ce,mn=ue,Ys.assign(ri.get().getEndXY()));let m=se;Fi<1&&(this.splitEdgeInPlace(se),m=se.getNextInChain()),this.updateSegmentOnly(se,Sr),se.start.hash===0||se.start.pt.equals(xt)||(this.m_newNodes.push(se.start),this.removeNodeFromHash(se.start),se.start.hash=0),se.end.hash===0||se.end.pt.equals(Ys)||(this.m_newNodes.push(se.end),this.removeNodeFromHash(se.end),se.end.hash=0),se.start.pt.assign(xt),se.end.pt.assign(Ys),(Dt=se.start).bBigMove||(Dt.bBigMove=Br),(Wi=se.end).bBigMove||(Wi.bBigMove=Cs),(us=se.start).bIsBreak||(us.bIsBreak=tn),(fn=se.end).bIsBreak||(fn.bIsBreak=mn),se.start.weight=Ai,se.start.rank=pn,se.end.weight=ms,se.end.rank=Ji,se=m,ne=Fi,de=ye}else de===-1&&(de=ye)}const Se=se.getNextInChain(),Pe=[];Pe.length=_;for(let ye=0;ye<_;ye++)Pe[ye]=ye;_>2?(Pe.sort((ye,Fi)=>xf(this.parent.m_param2[ye],this.parent.m_param2[Fi])),this.parent.m_param2.sort(xf)):_===2&&this.parent.m_param2[0]>this.parent.m_param2[1]&&(this.parent.m_param2[1]=St(this.parent.m_param2[0],this.parent.m_param2[0]=this.parent.m_param2[1]),Pe[1]=St(Pe[0],Pe[0]=Pe[1])),se=i,oe=i.end.weight,pe=i.end.rank,ce=i.end.bBigMove,ue=i.end.bIsBreak,ne=0,de=-1;for(let ye=0;ye<=_;ye++){const Fi=ye<_?this.parent.m_param2[ye]:1;if(Fi!==ne){const Sr=this.parent.allocResultSegment(),ri=this.parent.m_resultSegments[Sr];let Ai,pn,ms,Ji;l.queryCut(ne,Fi,ri,!1),ri.get().snapControlPoints(s*s);const tn=new Y,mn=new Y;let Br=!1,Cs=!1,xt=!1,Ys=!1;if(de!==-1){const j=Pe[de];Ai=F[j],pn=V[j],tn.assign(k[j]),xt=W[j].bBigMove,Br=W[j].bIsBreak}else Ai=i.start.weight,pn=i.start.rank,xt=i.start.bBigMove,Br=i.start.bIsBreak,tn.assign(ri.get().getStartXY());if(ye!==_){const j=Pe[ye];ms=F[j],Ji=V[j],mn.assign(k[j]),Ys=W[j].bBigMove,Cs=W[j].bIsBreak}else ms=oe,Ji=pe,Ys=ce,Cs=ue,mn.assign(ri.get().getEndXY());let m=se;Fi<1&&(this.splitEdgeInPlace(se),m=se.getNextInChain()),this.updateSegmentOnly(se,Sr),se.start.hash===0||se.start.pt.equals(tn)||(this.m_newNodes.push(se.start),this.removeNodeFromHash(se.start),se.start.hash=0),se.end.hash===0||se.end.pt.equals(mn)||(this.m_newNodes.push(se.end),this.removeNodeFromHash(se.end),se.end.hash=0),se.start.pt.assign(tn),se.end.pt.assign(mn),(Us=se.start).bBigMove||(Us.bBigMove=xt),(dr=se.end).bBigMove||(dr.bBigMove=Ys),(ho=se.start).bIsBreak||(ho.bIsBreak=Br),(ss=se.end).bIsBreak||(ss.bIsBreak=Cs),se.start.weight=Ai,se.start.rank=pn,se.end.weight=ms,se.end.rank=Ji,se=m,ne=Fi,de=ye}else de===-1&&(de=ye)}const Re=se.getNextInChain();return this.postProcessResultPartsForCurves(e,Se,i,Re,r+1),y?3:2}intersectCurves(e,i){this.parent.m_inputSegments.length!==2&&bt(""),this.parent.m_changed1=!1,this.parent.m_changed2=!1,this.parent.m_tolerance=e,this.m_hashTableOfEqualsSize=0,this.m_hashTableOfEquals=XS(16);const s=xe.constructEmpty();for(let o=0;o<2;o++){const l=this.parent.allocResultSegmentFromSegment(this.parent.m_inputSegments[this.parent.m_inputParts[o].segmentIndex]),u=xe.constructEmpty();this.parent.m_inputSegments[this.parent.m_inputParts[o].segmentIndex].queryLooseEnvelope(u),s.mergeEnvelope2D(u);const f=this.parent.m_inputParts[o];this.addSegment(l,0,f.weightStart,f.rankStart,f.weightEnd,f.rankEnd,f.weightInterior,f.rankInterior,f.u.bBreakStart,f.u.bBreakEnd,f.segmentParentage)}s.inflateCoords(100*e,100*e),this.m_origin.assign(s.getLowerLeft()),this.m_cell.setCoords(2*e,2*e),this.m_pairs.push(d0(this.m_chainOrigin1.nextInChain,this.m_chainOrigin2.nextInChain,0,i));let n=0,r=!0;for(;this.m_pairs.length;){const o=this.m_pairs.at(-1);this.m_pairs.pop(),K(o.recursion>=0),K(o.recursion<=256),this.clusterNodes(e);const l=this.intersectCurvesHelper(o.edge1,o.edge2,e,o.bIsIntersecting,o.recursion);r&&(r=!1,n=l)}for(let o=0;o<2;o++){const l=o===0?this.parent.m_resultParts1:this.parent.m_resultParts2;for(let u=(o===0?this.m_chainOrigin1:this.m_chainOrigin2).nextInChain;u!=null;u=u.getNextInChain())l.push(this.parent.newIntersectionPart_(u.segmentIndex,u.start.weight,u.start.rank,u.end.weight,u.end.rank,u.weight,u.rank,u.start.bIsBreak,u.end.bIsBreak,u.segmentParentage)),l.at(-1).u.bBigMoveStart=u.start.bBigMove,l.at(-1).u.bBigMoveEnd=u.end.bBigMove}return n}tryOverlapIntersectCurves(e,i,s,n){const r=this.parent.m_resultSegments[e.segmentIndex].get(),o=this.parent.m_resultSegments[i.segmentIndex].get(),l=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY()),u=r.getStartXY().equals(o.getEndXY())&&r.getEndXY().equals(o.getStartXY());if(!l&&!u)return 0;const f=xm(r,o,!0);if(f!==0&&kye(r,o)&&e.segmentParentage===i.segmentParentage){let P=!1;if(f>0)P=r.equals(o);else{K(f===-1);const A=new Qt({segment:o});A.get().reverse(),P=r.equals(A.get())}if(P)return 1}const y=s*fl.c_smallToleranceFactor;let _=!1;if(f===0){const P=[.5,.25,.75,.125,.375,.625,.875,.5625,.3125];for(let A=0,k=P.length;A<k;++A){const $=P[A],F=new Y;r.queryCoord2D($,F);const G=o.getClosestCoordinate(F,!1),V=new Y;o.queryCoord2D(G,V);const B=Y.distance(F,V);if(B>s)return 0;_||(_=B>y)}for(let A=0,k=P.length;A<k;++A){const $=P[A],F=new Y;o.queryCoord2D($,F);const G=r.getClosestCoordinate(F,!1),V=new Y;r.queryCoord2D(G,V);const B=Y.distance(F,V);if(B>s)return 0;_||(_=B>y)}}let x=e.rank,S=i.rank;return x===S&&(x*=fl.c_maxGeometryTypeToRankDelta,S*=fl.c_maxGeometryTypeToRankDelta,x+=L_(r.getGeometryType(),r,!0),S+=L_(o.getGeometryType(),o,!0)),x>S?(i.copyFromWhenOverlap(this,e,l),i.transferAttributes(this,r,l)):S>x?(e.copyFromWhenOverlap(this,i,l),e.transferAttributes(this,o,l)):e.segmentParentage<=i.segmentParentage?(e.weight=e.weight+i.weight,i.copyFromWhenOverlap(this,e,l),i.transferAttributes(this,r,l)):(i.weight=e.weight+i.weight,e.copyFromWhenOverlap(this,i,l),e.transferAttributes(this,o,l)),_?3:2}postProcessResultPartsForCurves(e,i,s,n,r){r===ote()&&bt("curve_helper");for(let o=e;o!==i;o=o.getNextInChain())this.updateSegmentToNodes(o);for(let o=s;o!==n;o=o.getNextInChain())this.updateSegmentToNodes(o);for(let o=e;o!==i;o=o.getNextInChain()){const l=o.end.pt.sub(o.start.pt);for(let u=s;u!==n;u=u.getNextInChain()){let f=0;if(o.start.pt.equals(u.start.pt)&&o.end.pt.equals(u.end.pt)?f=1:o.start.pt.equals(u.end.pt)&&o.end.pt.equals(u.start.pt)&&(f=-1),!f){let A=o.start.pt.equals(u.start.pt)?1:0;if(A||(A=o.end.pt.equals(u.end.pt)?2:0,A||(A=o.end.pt.equals(u.start.pt)?3:0,A||(A=o.start.pt.equals(u.end.pt)?4:0))),A){const k=u.end.pt.sub(u.start.pt),$=l.dotProduct(k);let F;switch(A){case 1:case 2:F=$>0;break;case 3:case 4:F=$<0;break;default:bt("post_process_result_parts_for_curves_")}F&&this.m_pairs.push(d0(o,u,r,!1))}continue}const y=this.parent.m_resultSegments[o.segmentIndex],_=this.parent.m_resultSegments[u.segmentIndex],x=[.5,.25,.75];for(let A=0,k=x.length;A<k;++A){const $=x[A],F=new Y;y.get().queryCoord2D($,F);const G=_.get().getClosestCoordinate(F,!1),V=new Y;if(_.get().queryCoord2D(G,V),Y.distance(F,V)>this.parent.m_tolerance){f=0;break}}if(!f){this.m_pairs.push(d0(o,u,r,!1));continue}for(let A=0,k=x.length;A<k;++A){const $=x[A],F=new Y;_.get().queryCoord2D($,F);const G=y.get().getClosestCoordinate(F,!1),V=new Y;if(y.get().queryCoord2D(G,V),Y.distance(F,V)>this.parent.m_tolerance){f=0;break}}if(!f){this.m_pairs.push(d0(o,u,r,!1));continue}o.equalEdge=u,u.equalEdge=o;let S=o.rank,P=u.rank;S===P&&(S*=fl.c_maxGeometryTypeToRankDelta,P*=fl.c_maxGeometryTypeToRankDelta,S+=L_(y.get().getGeometryType(),y.get(),!0),P+=L_(_.get().getGeometryType(),_.get(),!0)),S>P||S===P&&o.segmentParentage<=u.segmentParentage?(y.copyTo(_,!1),u.segmentParentage=o.segmentParentage,f===-1&&_.get().reverse()):(_.copyTo(y,!1),o.segmentParentage=u.segmentParentage,f===-1&&y.get().reverse());break}}this.updateAttachedEdgesAfterNodeChange(e.start),i&&this.updateAttachedEdgesAfterNodeChange(i.start),this.updateAttachedEdgesAfterNodeChange(s.start),n&&this.updateAttachedEdgesAfterNodeChange(n.start)}processDoublyConnectedEdges(e,i,s,n){s===ote()&&bt("curve_helper");const r=this.getSegment(e).get(),o=this.getSegment(i).get(),l=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY())?1:r.getEndXY().equals(o.getStartXY())&&r.getStartXY().equals(o.getEndXY())?-1:0;if(l!==0){const u=new Qt;r.queryCut(0,.5,u),u.get().snapControlPoints(n*n);const f=new Qt;r.queryCut(.5,1,f),f.get().snapControlPoints(n*n),this.splitEdgeInPlace(e),e.end.pt=u.get().getEndXY(),e.segmentIndex=this.parent.allocResultSegmentFromBuffer(u),e.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(f);let y=o.getClosestCoordinate(e.end.pt,!1);return Math.abs(y-.5)>.2&&(y=.5),o.queryCut(0,y,u),u.get().snapControlPoints(n*n),o.queryCut(y,1,f),f.get().snapControlPoints(n*n),this.splitEdgeInPlace(i),i.end.pt=u.get().getEndXY(),i.segmentIndex=this.parent.allocResultSegmentFromBuffer(u),i.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(f),l>0?(this.m_pairs.push(d0(e,i,s,!1)),this.m_pairs.push(d0(e.getNextInChain(),i.getNextInChain(),s,!1))):(this.m_pairs.push(d0(e,i.getNextInChain(),s,!1)),this.m_pairs.push(d0(e.getNextInChain(),i,s,!1))),!0}return!1}getNext(e){return K(0),{}}newNode(e,i,s,n){const r=new wie;return this.m_newNodes.push(r),r.pt=e,r.rank=s,r.weight=i,r.bIsBreak=n,r}newEdge(e,i,s,n,r,o){const l=new xie;return l.start=e,l.end=i,e.nextInChain=l,i.prevInChain=l,l.segmentIndex=s,l.segmentParentage=o,l.rank=r,l.weight=n,l}splitEdgeInPlace(e){e.segmentIndex=-1;const i=new xie,s=new wie;this.m_newNodes.push(s),s.pt.setNAN(),s.nextInChain=i,s.prevInChain=e,s.prevInHash=null,s.nextInHash=null,s.prevEqual=null,s.nextEqual=null,s.weight=e.weight,s.rank=e.rank,s.bIsBreak=!1,s.bBigMove=!1,i.start=s,i.segmentIndex=-1,i.end=e.end,i.end.prevInChain=i,i.rank=e.rank,i.weight=e.weight,i.segmentParentage=e.segmentParentage,e.end=s,e.equalEdge&&(e.equalEdge.equalEdge=null),e.equalEdge=null}updateSegmentOnly(e,i){e.segmentIndex=i}updateAttachedEdgesAfterNodeChange(e){for(let i=e.equalListHead();i!==null;i=i.nextEqual)this.updateAttachedEdgesAfterNodeChangeImpl(i)}updateAttachedEdgesAfterNodeChangeImpl(e){const i=e.prevInChain;if(i&&i.hasSegment()){const n=this.getSegment(i).get();e.pt.equals(n.getEndXY())||(n.setCoordsForIntersector(i.start.pt,i.end.pt,!1),n.ensureXYMonotone())}const s=e.nextInChain;if(s&&s.hasSegment()){const n=this.getSegment(s).get();e.pt.equals(n.getStartXY())||(n.setCoordsForIntersector(s.start.pt,s.end.pt,!1),n.ensureXYMonotone())}}updateSegmentToNodes(e){const i=this.getSegment(e).get();e.start.pt.equals(i.getStartXY())&&e.end.pt.equals(i.getEndXY())||(i.setCoordsForIntersector(e.start.pt,e.end.pt,!1),i.ensureXYMonotone()),this.updateAttachedEdgesAfterNodeChange(e.start),this.updateAttachedEdgesAfterNodeChange(e.end)}getSegment(e){return this.parent.m_resultSegments[e.segmentIndex]}clusterNodes(e){let i=!1;const s=[],n=[],r=[];for(let o=0,l=this.m_newNodes.length;o<l;o++){const u=this.m_newNodes[o];if(u===null)continue;let f=u;for(let y=o+1;y<l;y++){const _=this.m_newNodes[y];_!==null&&u.pt.equals(_.pt)&&(f.nextInHash=_,_.prevInHash=f,f=_,this.m_newNodes[y]=null)}}for(let o=0,l=this.m_newNodes.length;o<l;o++){const u=this.m_newNodes[o];if(u==null)continue;for(u.hash=this.calculateHash(u.pt);;){const S=XS(4),P=this.hashTableBinsToCheck(u,S);for(let k=0;k<P;k++)if(S[k]!==null)for(let $=S[k];$!==null;){const F=$.nextInHash;Y.distance(u.pt,$.pt)<=e&&(s.push($),this.removeNodeFromHash($),$.hash=0,r.push($),n.push($)),$=F}let A=!1;for(const k of s)if(!u.pt.equals(k.pt)){const $=N1e(u.pt,k.pt,u.weight,u.rank,k.weight,k.rank);u.pt.assign($.pt),u.weight=$.weight,u.rank=$.rank,A=!0,i=!0}if(s.length=0,!A)break;u.hash=this.calculateHash(u.pt)}r.push(u),n.push(u);for(let S=u.nextInHash;S!==null;){S.prevInHash=null;const P=S.nextInHash;S.nextInHash=null,r.push(S),n.push(S),S=P}const f=u.hash;let y=null,_=null;for(const S of n)u!==S&&(S.hash=f,S.pt.assign(u.pt),S.rank=u.rank,S.weight=u.weight),S.prevInHash=y,y&&(y.nextInHash=S),S.prevEqual=_,S.nextEqual=null,_&&(_.nextEqual=S),_=S,y=S;const x=f%this.m_hashTableOfEquals.length;y.nextInHash=this.m_hashTableOfEquals[x],this.m_hashTableOfEquals[x]!==null&&(this.m_hashTableOfEquals[x].prevInHash=y),this.m_hashTableOfEquals[x]=n[0],this.m_hashTableOfEqualsSize+=n.length,n.length=0,this.rehashIfNeeded()}if(this.m_newNodes.length=0,i)for(const o of r)this.updateAttachedEdgesAfterNodeChange(o)}addNodeToHash(e){K(0)}rehashIfNeeded(){if(2*this.m_hashTableOfEqualsSize>this.m_hashTableOfEquals.length){const e=this.m_hashTableOfEquals;this.m_hashTableOfEquals=XS(2*e.length),this.m_hashTableOfEqualsSize=0;for(const i of e){let s=i;for(;s;){const n=s.nextInHash;s.nextInHash=null,s.prevInHash=null,this.addNodeToHashImpl(s),s=n}}}}addNodeToHashImpl(e){const i=e.hash%this.m_hashTableOfEquals.length,s=this.m_hashTableOfEquals[i];e.nextInHash=s,s!==null&&(s.prevInHash=e),this.m_hashTableOfEquals[i]=e,this.m_hashTableOfEqualsSize++}removeNodeFromHash(e){const i=e.hash%this.m_hashTableOfEquals.length,s=e.prevInHash,n=e.nextInHash;s?s.nextInHash=n:this.m_hashTableOfEquals[i]=n,n&&(n.prevInHash=s),this.m_hashTableOfEqualsSize--,e.prevInHash=null,e.nextInHash=null}hashTableBinsToCheck(e,i){const s=(e.pt.x-this.m_origin.x)/this.m_cell.x,n=(e.pt.y-this.m_origin.y)/this.m_cell.y,r=So()-1,o=Math.round(un(s,-2147483646,r)),l=Math.round(un(n,-2147483646,r));let u=o|l<<32;u=tf(u),i[0]=this.m_hashTableOfEquals[u%this.m_hashTableOfEquals.length];let f=o+1|l<<32;f=tf(f);let y=1;i[1]=this.m_hashTableOfEquals[f%this.m_hashTableOfEquals.length],i[1]!==i[0]&&(y=2);let _=o+1|l+1<<32;_=tf(_),i[y]=this.m_hashTableOfEquals[_%this.m_hashTableOfEquals.length];for(let S=0;S<y;S++)if(i[y]===i[S]){y--;break}y++;let x=o|l+1<<32;x=tf(x),i[y]=this.m_hashTableOfEquals[x%this.m_hashTableOfEquals.length];for(let S=0;S<y;S++)if(i[y]===i[S]){y--;break}return y++,y}calculateHash(e){const i=(e.x-this.m_origin.x)/this.m_cell.x,s=(e.y-this.m_origin.y)/this.m_cell.y,n=So()-1;let r=Math.round(un(i,-2147483646,n))|Math.round(un(s,-2147483646,n))<<32;return r=tf(r),r===0&&(r=1),r}processSharpCorners(e,i,s,n){if(this.parent.m_param1.length=0,this.parent.m_param2.length=0,e.getStartXY().equals(i.getStartXY())){const r=[0,0],o=[0,0],l=cT(e,i,0,0,s,2,r,o,n);if(l){this.parent.m_param1.push(0),this.parent.m_param2.push(0);for(let u=0;u<l;u++)this.parent.m_param1.push(r[u]),this.parent.m_param2.push(o[u]);return l+1}}if(e.getEndXY().equals(i.getEndXY())){const r=[0,0],o=[0,0],l=cT(e,i,1,1,s,2,r,o,n);if(l){for(let u=0;u<l;u++)this.parent.m_param1.push(r[u]),this.parent.m_param2.push(o[u]);return this.parent.m_param1.push(1),this.parent.m_param2.push(1),l+1}}if(e.getStartXY().equals(i.getEndXY())){const r=[0,0],o=[0,0],l=cT(e,i,0,1,s,2,r,o,n);if(l){this.parent.m_param1.push(0),this.parent.m_param2.push(1);for(let u=0;u<l;u++)this.parent.m_param1.push(r[u]),this.parent.m_param2.push(o[u]);return l+1}}if(e.getEndXY().equals(i.getStartXY())){const r=[0,0],o=[0,0],l=cT(e,i,1,0,s,2,r,o,n);if(l){for(let u=0;u<l;u++)this.parent.m_param1.push(r[u]),this.parent.m_param2.push(o[u]);return this.parent.m_param1.push(1),this.parent.m_param2.push(0),l+1}}return 0}}function L_(t,e,i){let s=0;switch(t){case me.enumLine:s=0;break;case me.enumBezier:s=2;break;case me.enumRationalBezier2:s=3;break;case me.enumBezier2:s=1;break;case me.enumEllipticArc:s=e.projectionBehavior()===0?5:4;break;default:bt("")}return i?5-s:s}class Itt extends A1e{constructor(e){super(e.m_shape,e.m_tolerance,!1),this.m_parent=e}compare(e,i,s){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(s),r=this.m_parent.getEdgeOriginVertices(i),o=this.m_parent.m_edgeVertices.getFirstElement(r),l=this.m_parent.getEdgeOriginVertices(n),u=this.m_parent.m_edgeVertices.getFirstElement(l);return this.m_currentNode=s,this.compareSegments(i,o,n,u)}}class Mtt extends D1e{constructor(e){super(e.m_shape,e.m_tolerance),this.m_parent=e}compare(e,i){if(this.m_bIntersectionDetected)return-1;const s=e.getElement(i),n=this.m_parent.getEdgeOriginVertices(s),r=this.m_parent.m_edgeVertices.getFirstElement(n);return this.m_currentNode=i,this.compareVertex(e,i,r)}}class Att extends Vv{constructor(e){super(),this.pt1=Y.getNAN(),this.pt2=Y.getNAN(),this.m_shape=e}compare(e,i,s){this.m_shape.queryXY(i,this.pt1);const n=e.getElement(s);return this.m_shape.queryXY(n,this.pt2),this.pt1.compare(this.pt2)}}class Dtt{constructor(e){this.m_point=Y.getNAN(),this.m_pt=Y.getNAN(),this.m_shape=e}setPoint(e){this.m_point.setCoordsPoint2D(e)}compare(e,i){const s=e.getElement(i);return this.m_shape.queryXY(s,this.m_pt),this.m_point.compare(this.m_pt)}}class Nz{constructor(e,i){this.m_shape=null,this.m_progressTracker=null,this.m_edges=new Yt(8),this.m_clusters=new Yt(5),this.m_clusterVertices=new ws(!1),this.m_edgeVertices=new ws(!1),this.m_helperPoint=new Ut,this.m_eventQ=new jt,this.m_sweepStructure=new jt,this.m_bComplications=!1,this.m_sweepComparator=null,this.m_tempEdgeBuffer=[],this.m_modifiedClusters=[],this.m_edgesToInsertInSweepStructure=[],this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1,this.m_progressCounter=0,this.m_segmentIntersector=new fl,this.m_segBuf1=new Qt,this.m_segBuf2=new Qt,this.m_sweepPoint=new Y(0,0),this.m_tolerance=0,this.m_toleranceSqr=0,this.m_sweepPointCluster=-1,this.m_vertexClusterIndex=-1,this.m_bCracked=!1,this.m_bSweepPointClusterWasModified=!1,this.m_progressTracker=e,this.m_bTrackChanges=i}hadComplications(){return this.m_bComplications}sweep(e,i){const s=new _i;s.setSwapCoordinates(),e.applyTransformation(s),this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=i,this.m_toleranceSqr=i*i;let n=this.sweepImpl_();return e.applyTransformation(s),n||(this.fillEventQueuePass2(),n=this.sweepImpl_()||n),this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_shape=null,this.m_bCracked}sweepVertical(e,i){this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=i,this.m_toleranceSqr=i*i,this.m_bComplications=!1;let s=this.sweepImpl_();if(!this.m_bComplications){const n=e.filterClosePoints(i,!0,!1,this.m_bTrackChanges,ae);this.m_bComplications=n===1,s||(s=n===1)}return this.m_vertexClusterIndex!==-1&&(this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_vertexClusterIndex=-1),this.m_shape=null,s}getEdgeCluster(e,i){return this.m_edges.getField(e,0+i)}setEdgeCluster_(e,i,s){this.m_edges.setField(e,0+i,s)}getEdgeOriginVertices(e){return this.m_edges.getField(e,2)}setEdgeOriginVertices_(e,i){this.m_edges.setField(e,2,i)}getNextEdgeEx(e,i){return this.m_edges.getField(e,3+i)}setNextEdgeEx_(e,i,s){this.m_edges.setField(e,3+i,s)}getEdgeSweepNode(e){return this.m_edges.getField(e,7)}setEdgeSweepNode_(e,i){this.m_edges.setField(e,7,i)}getNextEdge(e,i){const s=this.getEdgeEnd(e,i);return this.m_edges.getField(e,3+s)}setNextEdge_(e,i,s){const n=this.getEdgeEnd(e,i);this.m_edges.setField(e,3+n,s)}getPrevEdge(e,i){const s=this.getEdgeEnd(e,i);return this.m_edges.getField(e,5+s)}setPrevEdge_(e,i,s){const n=this.getEdgeEnd(e,i);this.m_edges.setField(e,5+n,s)}getClusterVertices(e){return this.m_clusters.getField(e,0)}setClusterVertices_(e,i){this.m_clusters.setField(e,0,i)}getClusterSweepEdgeList(e){return this.m_clusters.getField(e,2)}setClusterSweepEdgeList_(e,i){this.m_clusters.setField(e,2,i)}getClusterFirstEdge(e){return this.m_clusters.getField(e,1)}setClusterFirstEdge_(e,i){this.m_clusters.setField(e,1,i)}getClusterEventQNode(e){return this.m_clusters.getField(e,3)}setClusterEventQNode_(e,i){this.m_clusters.setField(e,3,i)}newCluster_(e){const i=this.m_clusters.newElement(),s=this.m_clusterVertices.createList();return this.setClusterVertices_(i,s),e!==ae&&(this.m_clusterVertices.addElement(s,e),this.m_shape.setUserIndex(e,this.m_vertexClusterIndex,i)),i}deleteCluster_(e){this.m_clusters.deleteElement(e)}addVertexToCluster_(e,i){const s=this.getClusterVertices(e);this.m_clusterVertices.addElement(s,i),this.m_shape.setUserIndex(i,this.m_vertexClusterIndex,e)}newEdge_(e){const i=this.m_edges.newElement(),s=this.m_edgeVertices.createList();return this.setEdgeOriginVertices_(i,s),e!==-1&&this.m_edgeVertices.addElement(s,e),i}addVertexToEdge_(e,i){const s=this.getEdgeOriginVertices(e);this.m_edgeVertices.addElement(s,i)}deleteEdge_(e){this.m_edges.deleteElement(e);const i=this.m_edgesToInsertInSweepStructure.findIndex(s=>s===e);i>=0&&jKe(this.m_edgesToInsertInSweepStructure,i)}addEdgeToCluster(e,i){this.getEdgeCluster(e,0)===-1?this.setEdgeCluster_(e,0,i):this.getEdgeCluster(e,1)===-1?this.setEdgeCluster_(e,1,i):bt(""),this.addEdgeToClusterImpl_(e,i)}addEdgeToClusterImpl_(e,i){const s=this.getClusterFirstEdge(i);if(s!==-1){const n=this.getNextEdge(s,i);this.setPrevEdge_(n,i,e),this.setNextEdge_(e,i,n),this.setNextEdge_(s,i,e),this.setPrevEdge_(e,i,s)}else this.setPrevEdge_(e,i,e),this.setNextEdge_(e,i,e),this.setClusterFirstEdge_(i,e)}getEdgeEnd(e,i){return this.getEdgeCluster(e,0)===i?0:1}mergeClusters_(e,i){this.dbgCheckCluster_(e),this.dbgCheckCluster_(i);const s=this.getClusterEventQNode(i);s!==-1&&(this.m_eventQ.deleteNode(s),this.setClusterEventQNode_(i,-1));let n=this.getClusterFirstEdge(e),r=this.getClusterFirstEdge(i);if(r!==-1){let u=r,f=r,y=!1;do{this.dbgCheckEdge_(u),y=!1;const _=this.getEdgeEnd(u,i),x=this.getNextEdgeEx(u,_);if(this.getEdgeCluster(u,_+1&1)===e){this.disconnectEdge_(u);const S=this.getEdgeOriginVertices(u);if(this.m_edgeVertices.deleteList(S),this.deleteEdge_(u),u===x){r=-1;break}r===u&&(r=this.getClusterFirstEdge(i),f=x,y=!0)}u=x}while(u!==f||y);if(r!==-1){do{const _=this.getEdgeEnd(u,i),x=this.getNextEdgeEx(u,_);this.setEdgeCluster_(u,_,e),u=x}while(u!==f);if(n=this.getClusterFirstEdge(e),n!==-1){const _=this.getNextEdge(n,e),x=this.getNextEdge(r,e);_===n?(this.setClusterFirstEdge_(e,r),this.addEdgeToClusterImpl_(n,e),this.setClusterFirstEdge_(e,n)):x===r&&this.addEdgeToClusterImpl_(r,e),this.setNextEdge_(r,e,_),this.setPrevEdge_(_,e,r),this.setNextEdge_(n,e,x),this.setPrevEdge_(x,e,n)}else this.setClusterFirstEdge_(e,r)}}const o=this.getClusterVertices(e),l=this.getClusterVertices(i);for(let u=this.m_clusterVertices.getFirst(l);u!==-1;u=this.m_clusterVertices.getNext(u)){const f=this.m_clusterVertices.getElement(u);this.m_shape.setUserIndex(f,this.m_vertexClusterIndex,e)}this.m_clusterVertices.concatenateLists(o,l),this.deleteCluster_(i),this.dbgCheckCluster_(e)}mergeEdges_(e,i){this.dbgCheckEdge_(e),this.dbgCheckEdge_(i);const s=this.getEdgeCluster(e,0),n=this.getEdgeCluster(e,1),r=this.getEdgeCluster(i,0),o=this.getEdgeCluster(i,1),l=this.getEdgeOriginVertices(e),u=this.getEdgeOriginVertices(i);if(this.m_edgeVertices.concatenateLists(l,u),i===this.getClusterFirstEdge(s)&&this.setClusterFirstEdge_(s,e),i===this.getClusterFirstEdge(n)&&this.setClusterFirstEdge_(n,e),this.disconnectEdge_(i),this.deleteEdge_(i),!(s===r&&n===o||n===r&&s===o)){const f=this.getClusterXY(s),y=this.getClusterXY(r);f.isEqualPoint2D(y)?(s!==r&&this.mergeClusters_(s,r),n!==o&&this.mergeClusters_(n,o)):(n!==r&&this.mergeClusters_(n,r),s!==o&&this.mergeClusters_(s,o))}this.dbgCheckEdge_(e)}disconnectEdge_(e){const i=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1);this.disconnectEdgeFromCluster_(e,i),this.disconnectEdgeFromCluster_(e,s)}disconnectEdgeFromCluster_(e,i){const s=this.getNextEdge(e,i),n=this.getPrevEdge(e,i),r=this.getClusterFirstEdge(i);s!==e?(this.setNextEdge_(n,i,s),this.setPrevEdge_(s,i,n),r===e&&this.setClusterFirstEdge_(i,s)):this.setClusterFirstEdge_(i,-1)}applyIntersectorToEditShape_(e,i,s){let n=this.m_edgeVertices.getFirst(e);const r=this.m_edgeVertices.getElement(n),o=this.getClusterFromVertex(r),l=this.m_shape.getNextVertex(r),u=this.getClusterFromVertex(l),f=this.m_shape.getXY(r),y=this.m_shape.getXY(l);let _=!1,x=!1;const S=i.getResultSegment(s,0).getStartXY(),P=i.getResultSegment(s,i.getResultSegmentCount(s)-1).getEndXY();f.equals(S)||(_=!0),y.equals(P)||(x=!0),this.m_shape.splitSegmentWithIntersector(r,i,s,!0,!0);const A=this.m_bTrackChanges&&i.getSegmentChanged(s);for(A&&this.m_shape.setGeometryModifiedWithVertex(r,!0),n=this.m_edgeVertices.getNext(n);n!==-1;n=this.m_edgeVertices.getNext(n)){const k=this.m_edgeVertices.getElement(n),$=this.getClusterFromVertex(k)===o;this.m_shape.splitSegmentWithIntersector(k,i,s,$,!0),A&&this.m_shape.setGeometryModifiedWithVertex(k,!0)}if(_&&this.updateClusterXY(!0,o,S,i.getResultSegmentStartPointWeight(s,0),i.getResultSegmentStartPointRank(s,0)),x){const k=i.getResultSegmentCount(s)-1;this.updateClusterXY(!0,u,P,i.getResultSegmentEndPointWeight(s,k),i.getResultSegmentEndPointRank(s,k))}}createEdgesAndClustersFromSplitEdge_(e,i,s){this.dbgCheckNewEdgesArray_();const n=this.getEdgeOriginVertices(e),r=this.getEdgeCluster(e,0),o=this.getEdgeCluster(e,1);let l=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(l);const u=Yt.impossibleIndex3();this.setEdgeSweepNode_(l,u),this.m_tempEdgeBuffer.push(l),this.addEdgeToCluster(l,r);const f=i.getResultSegmentCount(s);for(let y=1;y<f;y++){const _=this.newCluster_(-1);this.m_modifiedClusters.push(_),this.m_tempEdgeBuffer.push(_),this.addEdgeToCluster(l,_);const x=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(x),this.setEdgeSweepNode_(x,u),this.m_tempEdgeBuffer.push(x),this.addEdgeToCluster(x,_),l=x}this.addEdgeToCluster(l,o);for(let y=this.m_edgeVertices.getFirst(n);y!==-1;y=this.m_edgeVertices.getNext(y)){let _=this.m_edgeVertices.getElement(y);if(this.getClusterFromVertex(_)===r){let x=0;const S=this.m_tempEdgeBuffer.length;do{if(x>0){const A=this.m_tempEdgeBuffer[x-1];this.addVertexToCluster_(A,_)}const P=this.m_tempEdgeBuffer[x];x+=2,this.addVertexToEdge_(P,_),_=this.m_shape.getNextVertex(_)}while(x<S)}else{let x=this.m_tempEdgeBuffer.length-1;do{if(x<this.m_tempEdgeBuffer.length-2){const P=this.m_tempEdgeBuffer[x+1];this.addVertexToCluster_(P,_)}const S=this.m_tempEdgeBuffer[x];x-=2,this.addVertexToEdge_(S,_),_=this.m_shape.getNextVertex(_)}while(x>=0)}}this.m_tempEdgeBuffer.length=0,this.dbgCheckNewEdgesArray_()}getVertexFromClusterIndex(e){const i=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(i)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_vertexClusterIndex)}processSplitHelper1_(e,i,s){const n=this.getEdgeCluster(i,0),r=this.getClusterXY(n),o=this.getEdgeCluster(i,1),l=this.getClusterXY(o),u=s.getResultSegmentCount(e);let f=s.getResultSegment(e,0);const y=f.getStartXY();if(r.isEqualPoint2D(y)||(this.m_bComplications||r.compare(this.m_sweepPoint)*y.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0),this.getAffectedEdges(n,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(n)),!this.m_bComplications&&u>1){const x=r.compare(l),S=f.getEndXY();(r.compare(S)!==x||S.compare(l)!==x||S.compare(this.m_sweepPoint)<0)&&(this.m_bComplications=!0)}f=s.getResultSegment(e,u-1);const _=f.getEndXY();l.isEqualPoint2D(_)||(this.m_bComplications||l.compare(this.m_sweepPoint)*_.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0),this.getAffectedEdges(o,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(o)),this.m_tempEdgeBuffer.push(i);for(let x=0,S=this.m_tempEdgeBuffer.length;x<S;x++){const P=this.m_tempEdgeBuffer[x],A=this.getEdgeSweepNode(P);Yt.isValidElement(A)&&(this.m_sweepStructure.deleteNode(A),this.setEdgeSweepNode_(P,-1));const k=Yt.impossibleIndex3();P!==i&&this.getEdgeSweepNode(P)!==k&&(this.m_edgesToInsertInSweepStructure.push(P),this.setEdgeSweepNode_(P,k))}this.m_tempEdgeBuffer.length=0}checkAndFixIntersection_(e,i){const s=this.m_sweepStructure.getElement(e);return this.m_sweepComparator.compare(this.m_sweepStructure,s,i),!!this.m_sweepComparator.intersectionDetected()&&(this.m_sweepComparator.clearIntersectionDetectedFlag(),this.fixIntersection_(e,i),!0)}fixIntersection_(e,i){this.m_bCracked=!0;const s=this.m_sweepStructure.getElement(e),n=this.m_sweepStructure.getElement(i);let r=null,o=null;const l=this.getEdgeOriginVertices(s),u=this.m_edgeVertices.getFirstElement(l),f=this.getEdgeOriginVertices(n),y=this.m_edgeVertices.getFirstElement(f),_=this.m_shape.querySegment(u,this.m_segBuf1,!1,!1);K(_),r=this.m_segBuf1.get();const x=this.m_shape.getNextVertex(u),S=this.m_shape.getWeight(u),P=this.m_shape.getSegmentParentageBreakVertex(u),A=this.m_shape.getWeight(x),k=this.m_shape.getSegmentParentageBreakVertex(x),$=this.m_shape.getSegmentWeight(u),F=this.m_shape.getRank(u),G=this.m_shape.getRank(x),V=this.m_shape.getSegmentRank(u),B=this.m_shape.getSegmentParentage(u),W=this.m_shape.querySegment(y,this.m_segBuf2,!1,!1);K(W),o=this.m_segBuf2.get();const J=this.m_shape.getNextVertex(y),re=this.m_shape.getWeight(y),se=this.m_shape.getSegmentParentageBreakVertex(y),oe=this.m_shape.getWeight(J),pe=this.m_shape.getSegmentParentageBreakVertex(J),ce=this.m_shape.getSegmentWeight(y),ue=this.m_shape.getRank(y),ne=this.m_shape.getRank(J),de=this.m_shape.getSegmentRank(y),Se=this.m_shape.getSegmentParentage(y);this.m_segmentIntersector.pushSegment(r,S,F,A,G,$,V,P,k,B),this.m_segmentIntersector.pushSegment(o,re,ue,oe,ne,ce,de,se,pe,Se),this.m_segmentIntersector.intersect2D(this.m_tolerance,!0)===3&&(this.m_bComplications=!0),this.splitEdge_(s,n,-1,this.m_segmentIntersector),this.m_segmentIntersector.clear()}fixIntersectionPointSegment_(e,i){this.m_bCracked=!0;const s=this.m_sweepStructure.getElement(i);let n=null;const r=this.getEdgeOriginVertices(s),o=this.m_edgeVertices.getFirstElement(r),l=this.m_shape.querySegment(o,this.m_segBuf1,!1,!1);K(l),n=this.m_segBuf1.get();const u=this.m_shape.getNextVertex(o),f=this.m_shape.getWeight(o),y=this.m_shape.getSegmentParentageBreakVertex(o),_=this.m_shape.getWeight(u),x=this.m_shape.getSegmentParentageBreakVertex(u),S=this.m_shape.getSegmentWeight(o),P=this.m_shape.getRank(o),A=this.m_shape.getRank(u),k=this.m_shape.getSegmentRank(o),$=this.m_shape.getSegmentParentage(o),F=this.getClusterFirstVertex(e);this.m_segmentIntersector.pushSegment(n,f,P,_,A,S,k,y,x,$),this.m_shape.queryPoint(F,this.m_helperPoint);const G=this.m_shape.getWeight(F),V=this.m_shape.getRank(F);this.m_segmentIntersector.intersect2DEx(this.m_tolerance,this.m_helperPoint,V,G,!0),this.splitEdge_(s,-1,e,this.m_segmentIntersector),this.m_segmentIntersector.clear()}insertNewEdges_(){if(this.m_edgesToInsertInSweepStructure.length===0)return!0;this.dbgCheckNewEdgesArray_();let e=!0,i=0;const s=this.m_edgesToInsertInSweepStructure.length,n=Math.max(2*s+200,this.m_sweepStructure.size()+200);for(;this.m_edgesToInsertInSweepStructure.length;){if(this.m_edgesToInsertInSweepStructure.length>Math.max(100,this.m_shape.getTotalPointCount())||i>n){this.m_edgesToInsertInSweepStructure.length=0,this.m_bComplications=!0,e=!1;break}const r=this.m_edgesToInsertInSweepStructure.at(-1);this.m_edgesToInsertInSweepStructure.pop(),this.setEdgeSweepNode_(r,-1);const o=this.isEdgeOnSweepLine_(r);Yt.isValidElement(o)?(this.insertNewEdgeToSweepStructure_(r,o),i++):o!==Yt.impossibleIndex2()&&(e=!1),this.m_bContinuingSegmentChainOptimization=!1}return e}insertNewEdgeToSweepStructure_(e,i){let s;if(this.m_bContinuingSegmentChainOptimization?(s=this.m_sweepStructure.addElementAtPosition(this.m_prevNeighbour,this.m_nextNeighbour,e,!0,!0),this.m_bContinuingSegmentChainOptimization=!1):s=this.m_sweepStructure.addUniqueElement(e),s===-1){const n=this.m_sweepStructure.getDuplicateElement(),r=this.m_sweepStructure.getElement(n);return this.mergeEdges_(r,e),!1}if(this.setEdgeSweepNode_(e,s),this.m_sweepComparator.intersectionDetected()){this.m_sweepComparator.clearIntersectionDetectedFlag();const n=this.m_sweepComparator.getLastComparedNode();return this.m_prevNeighbour===n&&(this.m_prevNeighbour=-1),this.m_nextNeighbour===n&&(this.m_nextNeighbour=-1),this.fixIntersection_(n,s),!0}return!1}isEdgeOnSweepLine_(e){const i=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1),n=this.getClusterXY(i),r=this.getClusterXY(s);if(Y.sqrDistance(n,r)<=this.m_toleranceSqr)return this.m_bComplications=!0,-1;const o=n.compare(this.m_sweepPoint),l=r.compare(this.m_sweepPoint);return o<=0&&l>0?s:l<=0&&o>0?i:o>0&&l>0?Yt.impossibleIndex2():-1}fillEventQueue(){const e=new Ns(0),i=this.m_shape.queryVertexIteratorOnSelection();for(let r=i.next();r!==ae;r=i.next())this.m_shape.getUserIndex(r,this.m_vertexClusterIndex)!==-1&&e.add(r);this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0),this.m_eventQ.clear(),this.m_eventQ.setCapacity(e.size()),this.m_eventQ.setComparator(new Att(this.m_shape));const s=Y.getNAN();s.setNAN();let n=-1;for(let r=0,o=e.size();r<o;r++){const l=e.read(r);if(this.m_shape.getXY(l).isEqualPoint2D(s)){const f=this.m_shape.getUserIndex(l,this.m_vertexClusterIndex);this.mergeClusters_(n,f);continue}n=this.getClusterFromVertex(l),this.m_shape.queryXY(l,s);const u=this.m_eventQ.addBiggestElement(l);this.setClusterEventQNode_(n,u)}}fillEventQueuePass2(){const e=new Ns(0);for(let i=this.m_eventQ.getFirst();i!==-1;i=this.m_eventQ.getNext(i)){const s=this.m_eventQ.getElement(i);e.add(s)}this.m_eventQ.clear(),this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0);for(let i=0,s=e.size();i<s;i++){const n=e.read(i),r=this.getClusterFromVertex(n),o=this.m_eventQ.addBiggestElement(n);this.setClusterEventQNode_(r,o)}}getAffectedEdges(e,i){const s=this.getClusterFirstEdge(e);if(s===-1)return;let n=s;do{const r=this.getEdgeSweepNode(n);Yt.isValidElement(r)&&i.push(n),n=this.getNextEdge(n,e)}while(n!==s)}updateClusterXY(e,i,s,n,r){const o=this.getClusterVertices(i);for(let l=this.m_clusterVertices.getFirst(o);l!==-1;l=this.m_clusterVertices.getNext(l)){const u=this.m_clusterVertices.getElement(l);this.m_shape.setXYMonotonicPoint2D(u,s),this.m_shape.setWeight(u,n),this.m_shape.setRank(u,r),e&&this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(u,!0),this.m_shape.setSegmentParentageBreakVertex(u,!0)}}splitEdge_(e,i,s,n){this.dbgCheckEdge_(e),i!==-1&&this.dbgCheckEdge_(i),this.disconnectEdge_(e),i!==-1&&this.disconnectEdge_(i),this.processSplitHelper1_(0,e,n),i!==-1&&this.processSplitHelper1_(1,i,n),s!==-1&&n.getResultPointChanged()&&this.m_modifiedClusters.push(s);for(let l=0,u=this.m_modifiedClusters.length;l<u;l++){const f=this.m_modifiedClusters[l],y=this.getClusterEventQNode(f);y!==-1&&(this.m_eventQ.deleteNode(y),this.setClusterEventQNode_(f,-1))}const r=this.getEdgeOriginVertices(e),o=i!==-1?this.getEdgeOriginVertices(i):-1;if(this.applyIntersectorToEditShape_(r,n,0),o!==-1)this.applyIntersectorToEditShape_(o,n,1);else{const l=n.getResultPoint().getXY();this.updateClusterXY(n.getResultPointChanged(),s,l,n.getResultPointWeight(),n.getResultPointRank())}this.createEdgesAndClustersFromSplitEdge_(e,n,0),i!==-1&&this.createEdgesAndClustersFromSplitEdge_(i,n,1),this.m_edgeVertices.deleteList(r),this.deleteEdge_(e),i!==-1&&(this.m_edgeVertices.deleteList(o),this.deleteEdge_(i));for(let l=0,u=this.m_modifiedClusters.length;l<u;l++){const f=this.m_modifiedClusters[l];f===this.m_sweepPointCluster&&(this.m_bSweepPointClusterWasModified=!0);let y=this.getClusterEventQNode(f);if(y===-1){const _=this.getClusterFirstVertex(f);if(y=this.m_eventQ.addUniqueElement(_),y===-1){const x=this.m_eventQ.getDuplicateElement(),S=this.m_eventQ.getElement(x),P=this.getClusterFromVertex(S);this.mergeClusters_(P,f)}else this.setClusterEventQNode_(f,y)}}this.m_modifiedClusters.length=0}getClusterXY(e){const i=this.getClusterFirstVertex(e);return this.m_shape.getXY(i)}getClusterFirstVertex(e){const i=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(i)}dbgCheckEdge_(e){}dbgCheckCluster_(e){}dbgCheckNewEdgesArray_(){}dbgSaveSweepStructure_(e){K(0)}sweepImpl_(){this.progress_(!0),this.m_bSweepPointClusterWasModified=!1,this.m_sweepPointCluster=-1,this.m_sweepComparator===null&&(this.m_sweepStructure.disableBalancing(),this.m_sweepComparator=new Itt(this),this.m_sweepStructure.setComparator(this.m_sweepComparator));const e=[];let i=null,s=null;this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1;const n=Yt.impossibleIndex2(),r=Yt.impossibleIndex3();for(let o=this.m_eventQ.getFirst();o!==-1;){this.progress_(),this.dbgCheckSweepStructure_(),this.m_bContinuingSegmentChainOptimization=!1,this.m_prevNeighbour=-1,this.m_nextNeighbour=-1;const l=this.m_eventQ.getElement(o);this.m_sweepPointCluster=this.getClusterFromVertex(l),this.m_shape.queryXY(l,this.m_sweepPoint),this.m_sweepComparator.setSweepY(this.m_sweepPoint.y,this.m_sweepPoint.x);let u=!1;{const y=this.getClusterFirstEdge(this.m_sweepPointCluster);if(u=y===-1,!u){let _=y;do{const x=this.getEdgeSweepNode(_);x===-1?(this.m_edgesToInsertInSweepStructure.push(_),this.setEdgeSweepNode_(_,r)):x!==r&&e.push(x),_=this.getNextEdge(_,this.m_sweepPointCluster)}while(_!==y)}}if(!this.m_sweepStructure.isAutoBalancing()&&(this.m_sweepStructure.getMaxDepthEver()>4||this.m_edgesToInsertInSweepStructure.length>10)&&this.m_sweepStructure.enableBalancing(),e.length>0){this.m_bContinuingSegmentChainOptimization=e.length===1&&this.m_edgesToInsertInSweepStructure.length===1;for(let x=0,S=e.length;x<S;x++){const P=this.m_sweepStructure.getElement(e[x]);this.setEdgeSweepNode_(P,n)}let y=n,_=n;for(let x=0,S=e.length;x<S;x++){const P=e[x];if(y===n){const A=this.m_sweepStructure.getPrev(P);if(A!==-1){const k=this.m_sweepStructure.getElement(A);this.getEdgeSweepNode(k)!==n&&(y=A)}else y=-1}if(_===n){const A=this.m_sweepStructure.getNext(P);if(A!==-1){const k=this.m_sweepStructure.getElement(A);this.getEdgeSweepNode(k)!==n&&(_=A)}else _=-1}if(y!==n&&_!==n)break}for(let x=0,S=e.length;x<S;x++){const P=e[x],A=this.m_sweepStructure.getElement(P);this.m_sweepStructure.deleteNode(P),this.setEdgeSweepNode_(A,-1)}e.length=0,this.m_prevNeighbour=y,this.m_nextNeighbour=_,y!==-1&&_!==-1?this.m_bContinuingSegmentChainOptimization||this.checkAndFixIntersection_(y,_):y===-1&&_===-1&&(this.m_bContinuingSegmentChainOptimization=!1)}else u&&(i===null&&(i=new Mtt(this)),i.setPoint(this.m_sweepPoint),this.m_sweepStructure.searchUpperBound(i),i.intersectionDetected()&&(i.clearIntersectionDetectedFlag(),this.fixIntersectionPointSegment_(this.m_sweepPointCluster,i.getCurrentNode())));const f=this.m_bContinuingSegmentChainOptimization;!this.insertNewEdges_()&&f&&this.m_prevNeighbour!==-1&&this.m_nextNeighbour!==-1&&this.checkAndFixIntersection_(this.m_prevNeighbour,this.m_nextNeighbour),this.m_bSweepPointClusterWasModified?(this.m_bSweepPointClusterWasModified=!1,s===null&&(s=new Dtt(this.m_shape)),s.setPoint(this.m_sweepPoint),o=this.m_eventQ.searchUpperBound(s)):o=this.m_eventQ.getNext(o)}return this.m_bCracked}setEditShape_(e){this.m_shape=e,this.m_vertexClusterIndex=this.m_shape.createUserIndex(),this.m_edges.setCapacity(e.getSelectedCount()+32),this.m_clusters.setCapacity(e.getSelectedCount()),this.m_clusterVertices.reserveLists(e.getSelectedCount()),this.m_clusterVertices.reserveNodes(e.getSelectedCount()),this.m_edgeVertices.reserveLists(e.getSelectedCount()+32),this.m_edgeVertices.reserveNodes(e.getSelectedCount()+32);for(let i=this.m_shape.getFirstGeometry();i!==ae;i=this.m_shape.getNextGeometry(i))if(bi(this.m_shape.getGeometryType(i)))for(let s=this.m_shape.getFirstPath(i);s!==ae;s=this.m_shape.getNextPath(s)){const n=this.m_shape.getPathSize(s),r=this.m_shape.getFirstVertex(s);if(r===ae)continue;let o=this.m_shape.getNextVertex(r);if(o===ae||o===r)continue;let l=-1;e.selected(r)&&(l=this.newCluster_(r));let u=-1;l!==-1&&e.selected(o)&&(u=this.newEdge_(r),this.addEdgeToCluster(u,l));let f=u;for(let y=0,_=n-2;y<_;y++){const x=this.m_shape.getNextVertex(o);let S=-1;if(this.m_shape.selected(o)){const P=this.newCluster_(o);f!==-1&&this.addEdgeToCluster(f,P),this.m_shape.selected(x)&&(S=this.newEdge_(o),this.addEdgeToCluster(S,P))}f=S,o=x}if(this.m_shape.isClosedPath(s)){const y=this.m_shape.getNextVertex(o);if(this.m_shape.selected(o)){const _=this.newCluster_(o);if(f!==-1&&this.addEdgeToCluster(f,_),this.m_shape.selected(y)){const x=this.newEdge_(o);this.addEdgeToCluster(x,_),this.addEdgeToCluster(x,l)}}}else{let y=-1;this.m_shape.selected(o)&&(y=this.newCluster_(o),f!==-1&&this.addEdgeToCluster(f,y))}}else for(let s=this.m_shape.getFirstPath(i);s!==ae;s=this.m_shape.getNextPath(s)){let n=this.m_shape.getFirstVertex(s);for(let r=0,o=this.m_shape.getPathSize(s);r<o;r++)this.m_shape.selected(n)&&this.newCluster_(n),n=this.m_shape.getNextVertex(n)}this.fillEventQueue()}progress_(e=!1){}dbgCheckSweepStructure_(){}}function ktt(t,e,i,s){i>0&&k1e(t,i,e,!1,s),new Ntt(s).executeImpl_(t,e)}function Sie(t,e,i){return{vertex0:t,vertex1:e,dir:i}}class Ntt{constructor(e){this.m_shape=null,this.m_spikes=[],this.m_points=new Ns(0),this.m_pointsIndex=-1,this.m_dissolvedEdges=0,this.m_progressTracker=e}executeImpl_(e,i){if(this.m_shape=e,e.getPathCount(i)<2&&e.getPointCount(i)<6)return;this.m_points.resize(0);for(let _=e.getFirstPath(i);_!==ae;_=e.getNextPath(_)){let x=e.getFirstVertex(_);for(let S=0,P=e.getPathSize(_);S<P;S++,x=e.getNextVertex(x))this.m_points.add(x)}this.m_pointsIndex=e.createUserIndex();for(let _=0,x=this.m_points.size();_<x;++_)e.setUserIndex(this.m_points.read(_),this.m_pointsIndex,_);e.sortVerticesSimpleByY(this.m_points,0,this.m_points.size());let s=this.m_points.read(0);const n=e.getXY(s);let r=1,o=0;const l=[];for(let _=1;_<this.m_points.size();_++){const x=this.m_points.read(_);if(x===ae||e.getUserIndex(x,this.m_pointsIndex)===-1)continue;const S=e.getXY(x);if(S.isEqualPoint2D(n))r++;else{if(r>1){for(let P=o;P<_;P++){const A=this.m_points.read(P);if(e.getUserIndex(A,this.m_pointsIndex)===-1)continue;const k=e.getNextVertex(A),$=e.getPrevVertex(A);if(A!==k&&!e.isEqualXYPoint2D(k,n)){const F=Sie(A,k,1);l.push(F)}if(A!==$&&$!==k&&!e.isEqualXYPoint2D($,n)){const F=Sie(A,$,-1);l.push(F)}}l.length>0&&this.processBunch_(l,n)}s=x,n.assign(S),r=1,o=_}}if(this.m_dissolvedEdges===0)return e.removeUserIndex(this.m_pointsIndex),void(this.m_pointsIndex=-1);let u=e.getPointCount(i);for(let _=0;_<this.m_points.size();_++){const x=this.m_points.read(_);if(x===ae)continue;if(e.getUserIndex(x,this.m_pointsIndex)!==-1){e.setUserIndex(x,this.m_pointsIndex,-1);continue}const S=e.getPathFromVertex(x);e.getFirstVertex(S)===x&&e.setFirstVertex(S,ae),e.freeVertex(x),this.m_points.write(_,ae),u--}const f=e.createPathUserIndex();let y=e.getPathCount(i);for(let _=0,x=this.m_points.size();_<x;++_){if(this.m_points.read(_)===ae)continue;let S=this.m_points.read(_);if(e.getUserIndex(S,this.m_pointsIndex)!==-1)continue;let P=e.getPathFromVertex(S),A=-1;if(e.getPathUserIndex(P,f)===2){P=ae;for(let G=e.getNextVertex(S);G!==S;G=e.getNextVertex(G)){const V=e.getPathFromVertex(G);if(e.getPathUserIndex(V,f)!==2){P=V,S=G;break}}P===ae&&(P=e.insertPath(i,ae),e.setClosedPath(P,!0),y++),K(P!==ae)}e.setPathUserIndex(P,f,2),A=e.getFirstVertex(P);let k=0,$=!1,F=S;do{A===F&&($=!0),e.setUserIndex(F,this.m_pointsIndex,1);const G=e.getPathFromVertex(F);G!==P&&(e.getPathUserIndex(G,f)!==2&&(e.setPathUserIndex(G,f,1),e.setFirstVertex(G,ae)),e.setPathToVertex(F,P)),k++,F=e.getNextVertex(F)}while(F!==S);$||e.setFirstVertex(P,S),e.setPathSize(P,k)}for(let _=e.getFirstPath(i);_!==ae;){const x=e.getNextPath(_);e.getPathUserIndex(_,f)!==1&&e.getFirstVertex(_)!==ae||(e.removePathOnly(_),y--),_=x}e.setGeometryVertexCount(i,u),e.setGeometryPathCount(i,y),e.removePathUserIndex(f),e.removeUserIndex(this.m_pointsIndex),this.m_pointsIndex=-1,e.dbgVerifyVertexCounts(),e.filterClosePoints(0,!0,!1,!1,i)}processBunch_(e,i){e.sort((l,u)=>{const f=this.m_shape.getXY(l.vertex1).sub(i),y=this.m_shape.getXY(u.vertex1).sub(i),_=Y.compareVectors(f,y);return _===0?l.dir<u.dir?-1:1:_});let s=0;const n=this.m_shape.getXY(e[0].vertex1);let r=1;const o=this.m_shape.hasCurves();for(let l=1,u=e.length;l<u;l++){const f=this.m_shape.getXY(e[l].vertex1);if(!(f.isEqualPoint2D(n)&&(r++,l+1<u))){if(r===2){const y=e[s],_=e[s+1],x=y.dir;if(x!==_.dir){let S=!0;if(o&&(S=!this.m_shape.isCurve(y.dir===1?y.vertex0:y.vertex1)&&!this.m_shape.isCurve(_.dir===1?_.vertex0:_.vertex1)),S){if(x===1){const P=y.vertex0,A=_.vertex0;this.m_shape.setNextVertex(P,A),this.m_shape.setPrevVertex(A,P),this.m_shape.getPrevVertex(P)===A&&(this.m_shape.setUserIndex(P,this.m_pointsIndex,-1),this.m_shape.setUserIndex(A,this.m_pointsIndex,-1));const k=y.vertex1,$=_.vertex1;this.m_shape.setPrevVertex(k,$),this.m_shape.setNextVertex($,k),this.m_shape.getNextVertex(k)===$&&(this.m_shape.setUserIndex(k,this.m_pointsIndex,-1),this.m_shape.setUserIndex($,this.m_pointsIndex,-1))}else{const P=y.vertex0,A=_.vertex0;this.m_shape.setPrevVertex(P,A),this.m_shape.setNextVertex(A,P),this.m_shape.getNextVertex(P)===A&&(this.m_shape.setUserIndex(P,this.m_pointsIndex,-1),this.m_shape.setUserIndex(A,this.m_pointsIndex,-1));const k=y.vertex1,$=_.vertex1;this.m_shape.setNextVertex(k,$),this.m_shape.setPrevVertex($,k),this.m_shape.getPrevVertex(k)===$&&(this.m_shape.setUserIndex(k,this.m_pointsIndex,-1),this.m_shape.setUserIndex($,this.m_pointsIndex,-1))}this.m_dissolvedEdges+=2}}}n.assign(f),s=l,r=1}}e.length=0}}function O1e(t){for(let e=t.getFirstGeometry();e!==ae;e=t.getNextGeometry(e))if(bi(t.getGeometryType(e)))return!0;return!1}function $tt(t,e,i,s){if(!O1e(t))return!1;const n=new Ev(s);n.m_shape=t,n.m_tolerance=e,n.m_bTrackChanges=i;let r=!1;const o=t.hasCurves()?5:15;return r=t.getTotalPointCount()<o?n.crackBruteForce_():n.crackerPlaneSweep_(),r}function R1e(t,e,i,s,n){if(!O1e(e))return!1;let r=new Ev(n);if(r.m_shape=e,r.m_tolerance=i,r.m_bAllowCoincident=t,r.m_bNeedsNonSimpleResult=s!==null,r.needsCrackingImpl_())return s&&s.assign(r.m_nonSimpleResult),!0;const o=new _i;o.setSwapCoordinates(),e.applyTransformation(o),r=new Ev(n),r.m_shape=e,r.m_tolerance=i,r.m_bAllowCoincident=t,r.m_bNeedsNonSimpleResult=s!==null;const l=r.needsCrackingImpl_();return e.applyTransformation(o),!!l&&(s&&s.assign(r.m_nonSimpleResult),!0)}function Ott(t,e,i,s){const n=e.getGeometryType();if(bi(n))return new Ev(s).crackAWithBMultiPath_(t,e,i);js("crack_A_with_B")}function Eie(t,e){return{t,index:e}}class Ev{crackBruteForce_(){let e=this.crackBruteForceImpl_();if(!e&&this.m_shape.hasCurves()){const i=new _i;i.setSwapCoordinates(),this.m_shape.applyTransformation(i),e=this.crackBruteForceImpl_(),this.m_shape.applyTransformation(i)}return e}crackBruteForceImpl_(){let e=!1;const i=new Qt,s=new Qt,n=xe.constructEmpty(),r=xe.constructEmpty(),o=!1,l=new Ut,u=new fl,f=this.m_shape.getTotalPointCount(),y=f*f*2,_=this.m_shape.queryVertexIteratorOnSelection();for(let x=_.next();x!==ae;x=_.next()){const S=this.m_shape.getGeometryType(_.currentGeometry());let P=1,A=1,k=1,$=0,F=0,G=0;const V=this.m_shape.getSegmentParentage(x);let B=!1,W=!1,J=null,re=!1;if(Ng(S))P=this.m_shape.getWeight(x),$=this.m_shape.getRank(x);else{if(J=this.getSegment_(x,i),J===null)continue;const ce=this.m_shape.getVertexIndex(x);P=this.m_shape.getWeightWithIndex(ce),$=this.m_shape.getRankWithIndex(ce),k=this.m_shape.getSegmentWeightWithIndex(ce),G=this.m_shape.getSegmentRankWithIndex(ce),B=this.m_shape.getSegmentParentageBreakVertex(x);{const ue=this.m_shape.getNextVertex(x);A=this.m_shape.getWeight(ue),F=this.m_shape.getRank(ue),W=this.m_shape.getSegmentParentageBreakVertex(ue)}if(J.queryLooseEnvelope(n),n.inflateCoords(this.m_tolerance,this.m_tolerance),J.isDegenerate(this.m_tolerance)){if(!J.isDegenerate(0))continue;re=!0,J=null}}const se=new WE({copy:_});let oe=se.next();oe!==ae&&(oe=se.next());let pe=0;for(;oe!==ae;oe=se.next()){if(pe!==0){pe--;continue}if(this.m_shape.getTotalPointCount()>y)return e;this.progress_();const ce=this.m_shape.getGeometryType(se.currentGeometry());let ue=null,ne=!1,de=0,Se=0,Pe=0,Re=0,Oe=0,we=0,Fe=!1,it=!1;const vt=this.m_shape.getSegmentParentage(oe);if(Ng(ce))de=this.m_shape.getWeight(oe),Re=this.m_shape.getRank(oe);else{if(ue=this.getSegment_(oe,s),ue===null)continue;const Ct=this.m_shape.getVertexIndex(oe);de=this.m_shape.getWeightWithIndex(Ct),Re=this.m_shape.getRankWithIndex(Ct),Pe=this.m_shape.getSegmentWeightWithIndex(Ct),we=this.m_shape.getSegmentRankWithIndex(Ct),Fe=this.m_shape.getSegmentParentageBreakVertex(oe);{const qt=this.m_shape.getNextVertex(oe);Se=this.m_shape.getWeight(qt),Oe=this.m_shape.getRank(qt),it=this.m_shape.getSegmentParentageBreakVertex(qt)}if(ue.queryLooseEnvelope(r),ue.isDegenerate(this.m_tolerance)){if(!ue.isDegenerate(0))continue;ne=!0,ue=null}}let ot=0,ut=0;if(J!==null&&ue!==null)n.isIntersectingNe(r)&&y7(!0,!0,J,ue,this.m_tolerance,!0)!==0&&(u.pushSegment(J,P,$,A,F,k,G,B,W,V),u.pushSegment(ue,de,Re,Se,Oe,Pe,we,Fe,it,vt),u.intersect2D(this.m_tolerance,!0),e||(e=u.getSegmentChanged(0)||u.getSegmentChanged(1)),ot=u.getResultSegmentCount(0),ut=u.getResultSegmentCount(1),ot+ut>0&&(this.m_shape.splitSegmentWithIntersector(x,u,0,!0,!0),this.m_shape.splitSegmentWithIntersector(oe,u,1,!0,!0),this.m_bTrackChanges&&(u.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(x,!0),u.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0))),ut>1&&(pe+=ut-1),u.clear());else if(J!==null){const Ct=this.m_shape.getXY(oe);if(n.contains(Ct)){if(u.pushSegment(J,P,$,A,F,k,G,B,W,V),this.m_shape.queryPoint(oe,l),u.intersect2DEx(this.m_tolerance,l,Re,de,o),e||(e=u.getSegmentChanged(0)||u.getResultPointChanged()),ot=u.getResultSegmentCount(0),ot>0)if(this.m_bTrackChanges&&(u.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(x,!0),u.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0)),this.m_shape.splitSegmentWithIntersector(x,u,0,!0,!0),ne){let qt=ae;for(let Lt=this.m_shape.getNextVertex(oe);Lt!==ae&&Lt!==oe&&(ue=this.getSegment_(Lt,s),qt=Lt,ue!=null&&ue.isDegenerate(0));Lt=this.m_shape.getNextVertex(Lt));for(let Lt=oe;Lt!==ae&&(this.m_shape.setPoint(Lt,u.getResultPoint(),!0),Lt!==qt);Lt=this.m_shape.getNextVertex(Lt));}else this.m_shape.setPoint(oe,u.getResultPoint(),!0);u.clear()}}else{if(ue===null)continue;{const Ct=this.m_shape.getXY(x);if(r.inflateCoords(this.m_tolerance,this.m_tolerance),r.contains(Ct)){if(u.pushSegment(ue,de,Re,Se,Oe,Pe,we,Fe,it,vt),this.m_shape.queryPoint(x,l),u.intersect2DEx(this.m_tolerance,l,$,P,o),e||(e=u.getSegmentChanged(0)||u.getResultPointChanged()),ut=u.getResultSegmentCount(0),ut>0)if(this.m_bTrackChanges&&(u.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0),u.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(x,!0)),this.m_shape.splitSegmentWithIntersector(oe,u,0,!0,!0),pe+=ut-1,re){let qt=ae;for(let Lt=this.m_shape.getNextVertex(x);Lt!==ae&&Lt!==x&&(ue=this.getSegment_(Lt,s),qt=Lt,ue!=null&&ue.isDegenerate(0));Lt=this.m_shape.getNextVertex(Lt));for(let Lt=x;Lt!==ae&&(this.m_shape.setPoint(Lt,u.getResultPoint(),!0),Lt!==qt);Lt=this.m_shape.getNextVertex(Lt));}else this.m_shape.setPoint(x,u.getResultPoint(),!0);u.clear()}}}if(ot+ut!==0&&ot!==0){let Ct=!1;for(;J=this.getSegment_(x,i),J!=null&&(J.queryEnvelope(n),J.isDegenerate(this.m_tolerance));){if(!(ot>1)){Ct=!0;break}x=_.next(),ot--,K(x!==ae)}if(Ct)break}}}return e}crackerPlaneSweep_(){return this.planesweep_()}planesweep_(){return new Nz(this.m_progressTracker,this.m_bTrackChanges).sweep(this.m_shape,this.m_tolerance)}needsCrackingImpl_(){let e=!1;const i=new Ns(0);i.resize(this.m_shape.getSelectedCount());const s=this.m_shape.queryVertexIteratorOnSelection();for(let _=0,x=s.next();x!==ae;++_,x=s.next())i.write(_,x);this.m_shape.sortVerticesSimpleByY(i,0,i.size()),i.add(ae);const n=this.m_shape.createUserIndex(),r=this.m_shape.createUserIndex();this.m_sweepComparator=new A1e(this.m_shape,this.m_tolerance,!this.m_bAllowCoincident),this.m_sweepStructure.setComparator(this.m_sweepComparator);let o=null;const l=[],u=[];let f=0;const y=new Y;for(let _=i.read(f++);_!==ae;){this.m_shape.queryXY(_,y);let x=!1;do{let $=this.m_shape.getNextVertex(_),F=this.m_shape.getPrevVertex(_);x||(x=$!==ae||F!==ae),$===ae||this.m_shape.selected($)||($=ae),F===ae||this.m_shape.selected(F)||(F=ae),$!==ae&&this.m_shape.compareVerticesSimpleY(_,$)<0&&(u.push(_),u.push($)),F!==ae&&this.m_shape.compareVerticesSimpleY(_,F)<0&&(u.push(F),u.push(F));const G=this.m_shape.getUserIndex(_,n);G!==-1&&(l.push(G),this.m_shape.setUserIndex(_,n,-1));const V=this.m_shape.getUserIndex(_,r);V!==-1&&(l.push(V),this.m_shape.setUserIndex(_,r,-1)),_=i.read(f++)}while(_!==ae&&this.m_shape.isEqualXYPoint2D(_,y));if(!x&&(o===null&&(o=new D1e(this.m_shape,this.m_tolerance)),o.setPoint(y),this.m_sweepStructure.searchUpperBound(o),o.intersectionDetected())){e=!0,this.m_bNeedsNonSimpleResult&&(K(0),this.m_nonSimpleResult=new xs(6,-1,-1));break}let S=l.length===1&&u.length===2;l.length>32&&Ax(l);let A=-1,k=-1;if(!S)for(let $=0,F=l.length;$<F;$++){const G=l[$],V=this.m_sweepStructure.getPrev(G);if(V!==-1&&l.indexOf(V)===-1)if(A===-1)A=V;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new xs(6,-1,-1)}const B=this.m_sweepStructure.getNext(G);if(B!==-1&&l.indexOf(B)===-1)if(k===-1)k=B;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new xs(6,-1,-1)}if(A!==-1&&k!==-1)break}if(e&&!this.m_bNeedsNonSimpleResult)break;if(this.m_sweepComparator.setSweepY(y.y,y.x),!S){for(let $=0,F=l.length;$<F;$++){const G=l[$];this.m_sweepStructure.deleteNode(G)}l.length=0}if(!S&&A!==-1&&k!==-1&&this.checkForIntersections_(A,k)){e=!0,this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult());break}for(let $=0,F=u.length;$<F;$+=2){const G=u[$],V=u[$+1];let B;if(S?(B=this.m_sweepStructure.replaceElementAtPosition(l[0],G,!0,!0),l.length=0,S=!1):B=this.m_sweepStructure.addElement(G),this.m_sweepComparator.intersectionDetected()){this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult()),e=!0;break}this.m_shape.getUserIndex(V,n)===-1?this.m_shape.setUserIndex(V,n,B):this.m_shape.setUserIndex(V,r,B)}if(e)break;u.length=0}return this.m_shape.removeUserIndex(n),this.m_shape.removeUserIndex(r),e}checkForIntersections_(e,i){const s=this.m_sweepStructure.getElement(e);this.m_sweepComparator.compare(this.m_sweepStructure,s,i);const n=this.m_sweepComparator.intersectionDetected();return this.m_sweepComparator.clearIntersectionDetectedFlag(),n}getSegment_(e,i){return Ev.st_getSegment(this.m_shape,e,i)}static st_getSegment(e,i,s){return e.querySegment(i,s,!1,!1)?s.get():null}dbgPrintSweepEdge(e){}dbgPrintSweepStructure(){}dbgSaveSweepStructure(e=null){}dbgCheckSweepStructure(){}progress_(e=!1){this.m_progressCounter++}crackAWithBMultiPath_(e,i,s){const n=xe.constructEmpty();e.queryLooseEnvelope(n);const r=xe.constructEmpty();if(i.queryLooseEnvelope(r),r.inflateCoords(s,s),!r.isIntersecting(n))return e;const o=e.getImpl(),l=o.getAccelerators();let u=null,f=null;l&&(f=l.getQuadTree()),Rtt(e,IE(i))&&(u=V2(o,r),f=u);const y=f?f.getIteratorForQT():null,_=i.querySegmentIterator(),x=e.querySegmentIterator(),S=new Array(15),P=[];for(;_.nextPath();)for(;_.hasNextSegment();){const V=_.nextSegment();if(f){y.resetIterator(V,s);for(let B=y.next();B!==-1;B=y.next()){this.progress_();const W=f.getElement(B);if(x.resetToVertex(W,-1),x.hasNextSegment()){const J=x.nextSegment().intersect(V,null,S,null,s);for(let re=0;re<J;re++){const se=S[re];if(se===0||se===1)continue;const oe=Eie(se,x.getStartPointIndex());P.push(oe)}}}}else{const B=xe.constructEmpty();if(V.queryLooseEnvelope(B),B.inflateCoords(s,s),!n.isIntersecting(B))continue;for(x.resetToFirstPath();x.nextPath();)for(;x.hasNextSegment();){const W=x.nextSegment(),J=xe.constructEmpty();if(W.queryLooseEnvelope(J),!J.isIntersecting(B))continue;const re=W.intersect(V,null,S,null,s);for(let se=0;se<re;se++){const oe=S[se];if(oe===0||oe===1)continue;const pe=Eie(oe,x.getStartPointIndex());P.push(pe)}}}}if(P.length===0)return e;P.sort((V,B)=>V.index<B.index?-1:V.index>B.index?1:V.t<B.t?-1:V.t>B.t?1:0);const A=e.createInstance();for(A.getGeometryType()===me.enumPolygon&&A.setFillRule(e.getFillRule()),x.resetToFirstPath();x.nextPath()&&!x.hasNextSegment(););K(x.hasNextSegment());let k=x.nextSegment();const $=new Qt;let F=-1;for(let V=0,B=P.length;V<B;){const W=P[V].index;let J=V+1;for(;J<B&&P[J].index===W;)++J;for(;x.getStartPointIndex()<W;){this.progress_();const oe=x.hasNextSegment(),pe=x.getPathIndex();if((oe||!x.isClosingSegment()||x.isCurve())&&(K(k!==null),A.addSegment(k,F!==pe)),F=pe,!oe){for(x.isPathClosed();x.nextPath()&&!x.hasNextSegment(););K(x.hasNextSegment())}k=x.nextSegment()}let re=0;for(let oe=V;oe<J;oe++){const pe=P[oe].t;if(pe===re)continue;K(k!==null),k.queryCut(re,pe,$),re=pe;const ce=x.getPathIndex();A.addSegment($.get(),F!==ce),F=ce}const se=x.hasNextSegment();if((se||!x.isClosingSegment()||x.isCurve())&&(K(k!=null),k.queryCut(re,1,$),A.addSegment($.get(),!1)),se)k=x.nextSegment();else{for(;x.nextPath()&&!x.hasNextSegment(););k=x.hasNextSegment()?x.nextSegment():null}V=J}if(k!==null){const V=x.getPathIndex();(x.hasNextSegment()||!x.isClosingSegment()||x.isCurve())&&A.addSegment(k,F!==V),F=V}let G=x.hasNextSegment();for(;;){if(!G){for(;x.nextPath()&&(G=x.hasNextSegment(),!G););if(!G)break}k=x.nextSegment();const V=x.getPathIndex();G=x.hasNextSegment(),(G||!x.isClosingSegment()||x.isCurve())&&A.addSegment(k,F!==V),F=V}return A}constructor(e){this.m_shape=null,this.m_progressTracker=null,this.m_nonSimpleResult=new xs,this.m_tolerance=0,this.m_sweepComparator=null,this.m_progressCounter=0,this.m_bTrackChanges=!1,this.m_bNeedsNonSimpleResult=!1,this.m_bAllowCoincident=!0,this.m_sweepStructure=new jt,this.m_progressTracker=e}}function Rtt(t,e){const i=t.getPointCount();return i<16?!1:2*i+1*(Math.log(i)/Math.log(2))*e<1*i*e}Ev.s_bForceBruteForce=!0;class L1e{constructor(e,i){this.m_monotoneParts=Ge(Qt,16),this.m_xOrds=Vi(16,Number.NaN),this.m_inputPoint=Y.getNAN(),this.m_miny=0,this.m_maxy=0,this.m_windnum=0,this.m_bAlternate=e,this.m_tolerance=i,this.m_toleranceSqr=i*i,this.m_bTestBorder=!!i,this.m_bBreak=!1}_DoOne(e){if(!this.m_bTestBorder&&(this.m_bAlternate&&this.m_inputPoint.equals(e.getStartXY())||this.m_inputPoint.equals(e.getEndXY())))return void(this.m_bBreak=!0);if(e.getStartY()===this.m_inputPoint.y&&e.getStartY()===e.getEndY()){if(this.m_bAlternate&&!this.m_bTestBorder){const n=Math.min(e.getStartX(),e.getEndX()),r=Math.max(e.getStartX(),e.getEndX());this.m_inputPoint.x>n&&this.m_inputPoint.x<r&&(this.m_bBreak=!0)}return}let i=!1;const s=Math.max(e.getStartX(),e.getEndX());if(this.m_inputPoint.x>s)i=!0;else if(this.m_inputPoint.x>=Math.min(e.getStartX(),e.getEndX())){const n=e.intersectionOfYMonotonicWithAxisX(this.m_inputPoint.y,s);i=!Number.isNaN(n)&&n<=this.m_inputPoint.x}if(i){if(this.m_inputPoint.y===e.getStartY()){if(this.m_inputPoint.y<e.getEndY())return}else if(this.m_inputPoint.y===e.getEndY()&&this.m_inputPoint.y<e.getStartY())return;this.m_bAlternate?this.m_windnum^=1:this.m_windnum+=e.getStartY()>e.getEndY()?1:-1}}_Result(){return!!this.m_windnum}testBorder(e){const i=e.getClosestCoordinate(this.m_inputPoint,!1),s=e.getCoord2D(i);return Y.sqrDistance(s,this.m_inputPoint)<=this.m_toleranceSqr}setInputPoint(e){this.m_inputPoint.setCoordsPoint2D(e),this.m_miny=e.y-this.m_tolerance,this.m_maxy=e.y+this.m_tolerance}processSegment(e){const i=e.queryInterval(0,1);if(i.vmin>this.m_maxy||i.vmax<this.m_miny)return!1;if(this.m_bTestBorder&&this.testBorder(e))return!0;if(i.vmin>this.m_inputPoint.y||i.vmax<this.m_inputPoint.y)return!1;let s=0;if(e.isCurve()&&(this.m_monotoneParts.length===0&&(this.m_monotoneParts.length=128),s=e.getMonotonicParts(this.m_monotoneParts,!0),K(this.m_monotoneParts.length>=s)),s>0)for(let n=0;n<s;n++){const r=this.m_monotoneParts[n].get(),o=Ze.construct(r.getStartY(),r.getEndY());if(!(o.vmin>this.m_inputPoint.y||o.vmax<this.m_inputPoint.y)&&(this._DoOne(r),this.m_bBreak))return!0}else if(this._DoOne(e),this.m_bBreak)return!0;return!1}result(){return K(0),2}}function Ltt(t,e,i,s){const n=new xe;t.queryLooseEnvelope(n),n.inflateCoords(s,s);const r=t.getFillRule()===0,o=new L1e(r,s);o.setInputPoint(i);const l=n.clone();l.xmax=i.x+s,l.ymin=i.y-s,l.ymax=i.y+s;const u=t.getImpl().querySegmentIterator(),f=e.getIterator(l,s);for(let y=f.next();y!==-1;y=f.next())if(u.resetToVertex(e.getElement(y),-1),u.hasNextSegment()){const _=u.nextSegment();if(o.processSegment(_))return-1}return o._Result()?1:0}function Ftt(t,e,i){const s=t.getFillRule()===0,n=new L1e(s,i);n.setInputPoint(e);const r=t.getImpl().querySegmentIterator();for(;r.nextPath();)for(;r.hasNextSegment();){const o=r.nextSegment();if(n.processSegment(o))return-1}return n._Result()?1:0}function ztt(t,e,i){return e.isEmpty()?0:Y6(t,e.getXY(),i)}function Y6(t,e,i){if(t.isEmpty())return 0;const s=xe.constructEmpty();if(t.queryLooseEnvelope(s),s.inflateCoords(i,i),!s.contains(e))return 0;const n=t.getImpl().getAccelerators();if(n){n.getRasterizedGeometry()&&K(0);const r=n.getQuadTree();if(r)return Ltt(t,r,e,i)}return Ftt(t,e,i)}function Og(t,e){const i=t.getPointCount();return i<16?!1:2*i+1*(Math.log(i)/Math.log(2))*e<1*i*e}function qtt(t,e,i,s,n){const r=new jtt(n);return r.m_shape=t,r.m_geometry=e,r.m_sortedVertices=i,r.m_bFixSelfTangency=s,r.fixRingOrientation_()}class Vtt{getDirection_(e){return this.m_shape.getNextVertex(this.getEnd1(e))===this.getEnd2(e)}getEnd_(e){const i=this.getEnd1(e),s=this.getEnd2(e);return this.m_shape.getNextVertex(i)===s?s:i}constructor(e){this.m_end1Nodes=[],this.m_end2Nodes=[],this.m_directions=[],this.m_shape=e,this.m_firstFree=-1}getSegment(e){return this.m_shape.getSegment(this.getStart(e))}isBottomUp(e){let i=this.getEnd1(e),s=this.getEnd2(e);this.m_shape.getPrevVertex(i)===s&&(s=St(i,i=s));const n=Y.getNAN(),r=Y.getNAN();return this.m_shape.queryXY(i,n),this.m_shape.queryXY(s,r),K(!n.equals(r)),n.y<r.y}getStart(e){const i=this.getEnd1(e),s=this.getEnd2(e);return this.m_shape.getNextVertex(i)===s?i:s}getEnd1(e){return this.m_end1Nodes[e]}getEnd2(e){return this.m_end2Nodes[e]}freeEdge(e){this.m_end1Nodes[e]=this.m_firstFree,this.m_firstFree=e}newEdge(e){if(this.m_firstFree!==-1){const s=this.m_firstFree;return this.m_firstFree=this.m_end1Nodes[s],this.m_end1Nodes[s]=e,this.m_end2Nodes[s]=this.m_shape.getNextVertex(e),s}const i=this.m_end1Nodes.length;return this.m_end1Nodes.push(e),this.m_end2Nodes.push(this.m_shape.getNextVertex(e)),i}getShape(){return this.m_shape}getPath(e){return this.m_shape.getPathFromVertex(this.getEnd1(e))}}let Gtt=class extends Vv{constructor(t){super(),this.m_line1=new si,this.m_line2=new si,this.m_leftElm=-1,this.m_leftx=0,this.m_seg1=null,this.m_helper=t}compare(t,e,i){const s=t.getElement(i),n=this.m_helper.m_edges;let r;this.m_leftElm===e?r=this.m_leftx:(this.m_seg1=n.getSegment(e),this.m_seg1?r=this.m_seg1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0):(n.getShape().queryLineConnector(n.getStart(e),this.m_line1,!0),this.m_seg1=this.m_line1,r=this.m_line1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)),this.m_leftx=r,this.m_leftElm=e);let o,l=n.getSegment(s);if(l?o=l.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0):(n.getShape().queryLineConnector(n.getStart(s),this.m_line2,!0),l=this.m_line2,o=this.m_line2.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)),r===o){const u=n.isBottomUp(e),f=n.isBottomUp(s),y=u?this.m_seg1.getEndY():this.m_seg1.getStartY(),_=f?l.getEndY():l.getStartY(),x=Math.min(y,_);let S=.5*(x+this.m_helper.m_yScanline);S===this.m_helper.m_yScanline&&(S=x),r=this.m_seg1.intersectionOfYMonotonicWithAxisX(S,0),o=l.intersectionOfYMonotonicWithAxisX(S,0),r===o&&sz("")}return r<o?-1:r>o?1:0}reset(){this.m_leftElm=-1}};class Cie{constructor(e){this.m_node=-1,this.m_index=0,this.m_sortedVertices=e.m_sortedVertices,this.m_sortedVerticesArray=e.m_sortedVerticesArray,this.m_sortedVertices&&(this.m_node=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList()))}next(){if(this.m_sortedVertices){const e=this.m_node;if(e===-1)return ae;const i=this.m_sortedVertices.getData(e);return this.m_node=this.m_sortedVertices.getNext(e),i}if(this.m_index<this.m_sortedVerticesArray.size()){const e=this.m_sortedVerticesArray.read(this.m_index);return this.m_index++,e}return ae}}class jtt{constructor(e){this.m_edges=null,this.m_shape=null,this.m_AET=new jt,this.m_yScanline=0,this.m_geometry=ae,this.m_unknownRingOrientationCount=-1,this.m_sortedVertices=null,this.m_sortedVerticesArray=null,this.m_unknownNodes=[],this.m_node1UserIndex=-1,this.m_node2UserIndex=-1,this.m_pathOrientationIndex=-1,this.m_pathParentageIndex=-1,this.m_pathParentsIndex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_progressTracker=e,this.m_AET.disableBalancing(),this.m_sweepComparator=new Gtt(this),this.m_AET.setComparator(this.m_sweepComparator)}fixRingOrientation_(){const e=this.fixRingOrientationImplMain_();return this.m_pathOrientationIndex===-1||this.fixRingOrientationImplSimplify_(),e}fixRingOrientationForMp2sp_(){return this.fixRingOrientationImplMain_(),this.m_pathOrientationIndex===-1?-1:this.fixRingOrientationImplMp2sp_()}processBunchForRingOrientationTest_(e){return this.processBunchForRingOrientationTestOddEven_(e)}processBunchForRingOrientationTestOddEven_(e){let i=!1;if(this.m_edges||(this.m_edges=new Vtt(this.m_shape)),this.m_unknownNodes.length=0,this.processBunchForRingOrientationRemoveEdges_(e),!this.m_AET.isAutoBalancing()){let s=0;for(let n=0,r=e.length;n<r;n++)e[n]!==-1&&s++;(s>10||this.m_AET.getMaxDepthEver()>4)&&this.m_AET.enableBalancing()}for(let s=0,n=e.length;s<n;s++){const r=e[s];r!==ae&&this.insertEdge_(r,-1)}for(let s=0;s<this.m_unknownNodes.length&&this.m_unknownRingOrientationCount>0;s++){const n=this.m_unknownNodes[s],r=this.m_AET.getElement(n),o=this.m_edges.getPath(r),l=this.m_shape.getPathUserIndex(o,this.m_pathOrientationIndex);let u=ae;if(l===0){let f=this.m_AET.getPrev(n),y=n,_=!1;for(;f!==jt.st_nullNode();){const x=this.m_AET.getElement(f),S=this.m_edges.getPath(x);if(this.m_shape.getPathUserIndex(S,this.m_pathOrientationIndex)!==0){u=S;break}y=f,f=this.m_AET.getPrev(f)}if(f===jt.st_nullNode())_=!0,f=y;else{const x=this.m_AET.getElement(f);_=this.m_edges.isBottomUp(x),f=this.m_AET.getNext(f),_=!_}do{const x=this.m_AET.getElement(f),S=this.m_edges.getPath(x);if(this.m_shape.getPathUserIndex(S,this.m_pathOrientationIndex)===0){if(_!==this.m_edges.isBottomUp(x)){const P=this.m_shape.getFirstVertex(S);this.m_shape.reverseRingInternal(P),this.m_shape.setLastVertex(S,this.m_shape.getPrevVertex(P)),i=!0}if(this.m_shape.setPathUserIndex(S,this.m_pathOrientationIndex,_?3:2),!_){let P=this.m_shape.getPathUserIndex(u,this.m_pathOrientationIndex);P===2&&(u=this.m_shape.getPathUserIndex(u,this.m_pathParentsIndex),P=this.m_shape.getPathUserIndex(u,this.m_pathOrientationIndex)),K(P===3);const A=this.m_shape.getPathUserIndex(u,this.m_pathParentageIndex);this.m_shape.setPathUserIndex(u,this.m_pathParentageIndex,S),this.m_shape.setPathUserIndex(S,this.m_pathParentageIndex,A),this.m_shape.setPathUserIndex(S,this.m_pathParentsIndex,u)}if(this.m_unknownRingOrientationCount--,!this.m_unknownRingOrientationCount)return i}u=S,y=f,f=this.m_AET.getNext(f),_=!_}while(y!==n)}}return i}processBunchForRingOrientationRemoveEdges_(e){for(let i=0,s=e.length;i<s;i++){const n=e[i],r=this.m_shape.getUserIndex(n,this.m_node1UserIndex),o=this.m_shape.getUserIndex(n,this.m_node2UserIndex);if(r!==-1){const u=this.m_AET.getElement(r);this.m_edges.freeEdge(u),this.m_shape.setUserIndex(n,this.m_node1UserIndex,-1)}if(o!==-1){const u=this.m_AET.getElement(o);this.m_edges.freeEdge(u),this.m_shape.setUserIndex(n,this.m_node2UserIndex,-1)}let l=-1;r!==-1&&o!==-1?(this.m_AET.deleteNode(r),this.m_AET.deleteNode(o),e[i]=ae):l=r!==-1?r:o,l!==-1&&(this.insertEdge_(n,l)||this.m_AET.deleteNode(l),e[i]=ae)}}dbgVerifyRingOrientation_(){}insertEdge_(e,i){const s=Y.getNAN(),n=Y.getNAN();this.m_shape.queryXY(e,s);const r=this.m_shape.getNextVertex(e);this.m_shape.queryXY(r,n);let o=!1;if(s.y<n.y){o=!0;const u=this.m_edges.newEdge(e);let f;i===-1?f=this.m_AET.addElement(u):(f=i,this.m_AET.setElement(f,u)),this.m_shape.getUserIndex(r,this.m_node1UserIndex)===-1?this.m_shape.setUserIndex(r,this.m_node1UserIndex,f):this.m_shape.setUserIndex(r,this.m_node2UserIndex,f);const y=this.m_shape.getPathFromVertex(e);this.m_shape.getPathUserIndex(y,this.m_pathOrientationIndex)===0&&this.m_unknownNodes.push(f)}const l=this.m_shape.getPrevVertex(e);if(this.m_shape.queryXY(l,n),s.y<n.y){o=!0;const u=this.m_edges.newEdge(l);let f;i===-1?f=this.m_AET.addElement(u):(f=i,this.m_AET.setElement(f,u)),this.m_shape.getUserIndex(l,this.m_node1UserIndex)===-1?this.m_shape.setUserIndex(l,this.m_node1UserIndex,f):this.m_shape.setUserIndex(l,this.m_node2UserIndex,f);const y=this.m_shape.getPathFromVertex(e);this.m_shape.getPathUserIndex(y,this.m_pathOrientationIndex)===0&&this.m_unknownNodes.push(f)}return o}fixRingSelfTangency_(){const e=[],i=[];let s=-1,n=-1;const r=new Y;let o=ae,l=ae,u=-1;const f=new Cie(this);for(let y=f.next();y!==ae;y=f.next()){const _=new Y;this.m_shape.queryXY(y,_);const x=this.m_shape.getPathFromVertex(y);r.equals(_)&&l===x?(n===-1&&(s=this.m_shape.createPathUserIndex(),this.m_shape.fillPathUserIndexForGeometry(this.m_geometry,s,-1),n=this.m_shape.createUserIndex(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,n,-1)),u===-1&&(u=i.length,this.m_shape.setUserIndex(o,n,u),i.push(1),this.m_shape.getPathUserIndex(x,s)===-1&&(this.m_shape.setPathUserIndex(x,s,o),e.push(x))),this.m_shape.setUserIndex(y,n,u),i[i.length-1]++):(u=-1,r.assign(_)),o=y,l=x}if(e.length===0)return!1;K(s!==-1);for(let y=0,_=e.length;y<_;y++){const x=e[y];let S=this.m_shape.getPathUserIndex(x,s);const P=this.m_shape.getUserIndex(S,n),A=[],k=[];A.push(S),k.push(P);for(let $=this.m_shape.getNextVertex(S);$!==S;$=this.m_shape.getNextVertex($)){const F=$,G=this.m_shape.getUserIndex(F,n);if(G!==-1){if(k.length===0){k.push(G),A.push(F);continue}if(k.at(-1)===G){const V=A.at(-1);this.m_shape.peelALoopIntoAPath(V,F),this.m_shape.setUserIndex($,n,-1),i[G]--,i[G]===1&&(i[G]=0,k.pop(),A.pop()),S=V,$=V}else A.push($),k.push(G)}}}return this.m_shape.removePathUserIndex(s),this.m_shape.removeUserIndex(n),this.m_shape.dbgVerifyVertexCounts(),!0}progress_(e=!1){}fixRingOrientationImplMain_(){const e={stack:[],error:void 0,hasError:!1};try{let i,s=!1;const n=Kl(e,KA(()=>{this.m_sortedVerticesArray=null}),!1);if(this.m_sortedVertices===null){const u=this.m_shape.getPointCount(this.m_geometry);i=new Ns(0);for(let f=this.m_shape.getFirstPath(this.m_geometry);f!==ae;f=this.m_shape.getNextPath(f)){let y=this.m_shape.getFirstVertex(f);for(let _=0,x=this.m_shape.getPathSize(f);_<x;_++)i.add(y),y=this.m_shape.getNextVertex(y)}this.m_shape.sortVerticesSimpleByY(i,0,u),this.progress_(!0),this.m_sortedVerticesArray=i}else n.bForget=!0;if(this.m_bFixSelfTangency&&(s=this.fixRingSelfTangency_()),this.m_shape.getPathCount(this.m_geometry)===1){const u=this.m_shape.getFirstPath(this.m_geometry),f=this.m_shape.getRingArea(u);if(this.m_shape.setExterior(u,!0),f<0){const y=this.m_shape.getFirstVertex(u);return this.m_shape.reverseRingInternal(y),this.m_shape.setLastVertex(u,this.m_shape.getPrevVertex(y)),!0}return!1}this.m_shape.dbgVerifyCurves(),this.m_pathOrientationIndex=this.m_shape.createPathUserIndex(),this.m_pathParentageIndex=this.m_shape.createPathUserIndex(),this.m_pathParentsIndex=this.m_shape.createPathUserIndex();for(let u=this.m_shape.getFirstPath(this.m_geometry);u!==ae;u=this.m_shape.getNextPath(u))this.m_shape.setPathUserIndex(u,this.m_pathOrientationIndex,0),this.m_shape.setPathUserIndex(u,this.m_pathParentageIndex,-1),this.m_shape.setPathUserIndex(u,this.m_pathParentsIndex,-1);const r=[];this.m_yScanline=Number.NaN;const o=Y.getNAN();this.m_unknownRingOrientationCount=this.m_shape.getPathCount(this.m_geometry),this.m_node1UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node1UserIndex,-1),this.m_node2UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node2UserIndex,-1);const l=new Cie(this);for(let u=l.next();u!==ae&&(this.progress_(),this.m_shape.queryXY(u,o),o.y!==this.m_yScanline&&r.length&&(s=this.processBunchForRingOrientationTest_(r)||s,this.m_sweepComparator.reset(),r.length=0),r.push(u),this.m_yScanline=o.y,this.m_unknownRingOrientationCount!==0);u=l.next());return this.m_unknownRingOrientationCount>0&&(s=this.processBunchForRingOrientationTest_(r)||s,r.length=0),this.m_shape.removeUserIndex(this.m_node1UserIndex),this.m_shape.removeUserIndex(this.m_node2UserIndex),this.dbgVerifyRingOrientation_(),s}catch(i){e.error=i,e.hasError=!0}finally{fm(e)}}fixRingOrientationImplSimplify_(){const e=[];for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;)if(this.progress_(),this.m_shape.getPathUserIndex(i,this.m_pathOrientationIndex)===3){this.m_shape.setExterior(i,!0);for(let r=this.m_shape.getPathUserIndex(i,this.m_pathParentageIndex);r!==ae;){const o=this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex);e.push(r),this.m_shape.setExterior(r,!1),this.m_shape.setPathUserIndex(r,this.m_pathParentageIndex,i),r=o}let s=i,n=e.length;for(let r=this.m_shape.getNextPath(i);n>0&&r!==ae;r=this.m_shape.getNextPath(r),--n){if(this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex)!==i){s=ae;break}s=r}if(n!==0){s=i;for(let r=0,o=e.length;r<o;r++){const l=e[r];this.m_shape.setPathUserIndex(l,this.m_pathParentageIndex,Rb),this.m_shape.movePath(this.m_geometry,this.m_shape.getNextPath(s),l),s=l}}e.length=0,i=this.m_shape.getNextPath(s)}else i=this.m_shape.getNextPath(i);this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex)}fixRingOrientationImplMp2sp_(){const e=this.m_shape.createPathUserIndex();let i=0;const s=[];for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==ae;)if(this.progress_(),this.m_shape.getPathUserIndex(n,this.m_pathOrientationIndex)===3){this.m_shape.setExterior(n,!0),this.m_shape.setPathUserIndex(n,e,i),i++;for(let u=this.m_shape.getPathUserIndex(n,this.m_pathParentageIndex);u!==ae;){const f=this.m_shape.getPathUserIndex(u,this.m_pathParentageIndex);s.push(u),this.m_shape.setExterior(u,!1),this.m_shape.setPathUserIndex(u,this.m_pathParentageIndex,n),u=f}let r=n,o=s.length,l=i;for(let u=this.m_shape.getNextPath(n);o>0&&u!==ae;u=this.m_shape.getNextPath(u),--o){if(this.m_shape.getPathUserIndex(u,this.m_pathParentageIndex)!==n){r=ae;break}r=u,this.m_shape.setPathUserIndex(u,e,-l),l++}if(o!==0){r=n,l=i;for(let u=0,f=s.length;u<f;u++){const y=s[u];this.m_shape.setPathUserIndex(y,e,-l),l++,this.m_shape.setPathUserIndex(y,this.m_pathParentageIndex,Rb)}r=n}i=l,s.length=0,n=this.m_shape.getNextPath(r)}else n=this.m_shape.getNextPath(n);return this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex),e}}function lg(t,e,i,s,n,r){const o=new Btt(r);return o.m_shape=t,o.m_geometry=e,o.m_knownSimpleResult=i,o.m_bFixSelfTangency=s,o.m_polylineDegeneracies=n,o.m_bHasSegmentParentage=t.hasSegmentParentage(),o.m_bHasSegments=t.hasCurves(),o.simplify_()}class Btt{constructor(e){this.m_shape=null,this.m_geometry=ae,this.m_sortedVertices=new to,this.m_bunchEdgeEndPoints=[],this.m_bunchEdgeCenterPoints=[],this.m_bunchEdgeIndices=[],this.m_knownSimpleResult=-1,this.m_sortedVerticesListIndex=-1,this.m_polylineDegeneracies=ae,this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_bHasSegmentParentage=!1,this.m_bHasSegments=!1,this.m_progressTracker=e}compareAngles_(e,i){if(this.m_bHasSegments)return this.compareAnglesCurves_(e,i);const s=this.m_bunchEdgeEndPoints[e],n=new Y;this.m_shape.queryXY(s,n);const r=new Y,o=this.m_bunchEdgeEndPoints[i];if(this.m_shape.queryXY(o,r),n.equals(r))return 0;const l=this.m_bunchEdgeCenterPoints[e],u=new Y;this.m_shape.queryXY(l,u);const f=this.m_bunchEdgeCenterPoints[i],y=new Y;this.m_shape.queryXY(f,y);const _=new Y;_.setSub(n,u);const x=new Y;return x.setSub(r,y),(_.isZero()||x.isZero())&&sz(""),Y.compareVectors(_,x)}compareAnglesCurves_(e,i){const s=this.m_bunchEdgeEndPoints[e],n=this.m_bunchEdgeEndPoints[i],r=this.m_bunchEdgeCenterPoints[e],o=this.m_bunchEdgeCenterPoints[i],l=this.m_shape.getNextVertex(r)===s,u=this.m_shape.getNextVertex(o)===n,f=new Qt,y=new Y;l?(this.m_shape.querySegment(r,f,!1,!0),y.assign(f.get().getTangent(0))):(this.m_shape.querySegment(s,f,!1,!0),y.assign(f.get().getTangent(1)),y.negateThis());const _=new Y;return u?(this.m_shape.querySegment(o,f,!1,!0),_.assign(f.get().getTangent(0))):(this.m_shape.querySegment(n,f,!1,!0),_.assign(f.get().getTangent(1)),_.negateThis()),(y.isZero()||_.isZero())&&sz(""),Y.compareVectors(y,_)}beforeRemoveVertex_(e,i){const s=this.m_shape.getUserIndex(e,this.m_userIndexSortedIndexToVertex);if(this.m_nextVertexToProcess===s&&(this.m_nextVertexToProcess=this.m_sortedVertices.getNext(this.m_nextVertexToProcess)),this.m_firstCoincidentVertex===s&&(this.m_firstCoincidentVertex=this.m_sortedVertices.getNext(this.m_firstCoincidentVertex)),this.m_sortedVertices.deleteElement(this.m_sortedVerticesListIndex,s),this.removeAngleSortInfo_(e),i){const n=this.m_shape.getPathFromVertex(e);if(n!==ae&&this.m_shape.getFirstVertex(n)===e){const r=this.m_shape.getNextVertex(e);if(r!==e){if(this.m_shape.getPathFromVertex(r)===n)return void this.m_shape.setFirstVertex(n,r);{const o=this.m_shape.getPrevVertex(e);if(o!==e&&this.m_shape.getPathFromVertex(o)===n)return void this.m_shape.setFirstVertex(n,o)}}this.m_shape.setFirstVertex(n,ae),this.m_shape.setLastVertex(n,ae)}}}processBunch_(){let e=!1;const i=new Y(0,0);for(;;){this.m_bunchEdgeEndPoints.length=0,this.m_bunchEdgeCenterPoints.length=0,this.m_bunchEdgeIndices.length=0;let s=this.m_firstCoincidentVertex,n=0,r=!0;for(;s!==this.m_nextVertexToProcess;){const l=this.m_sortedVertices.getData(s);r&&(this.m_shape.queryXY(l,i),r=!1);const u=this.m_shape.getPrevVertex(l),f=this.m_shape.getNextVertex(l);this.m_shape.getUserIndex(u,this.m_userIndexSortedAngleIndexToVertex)!==Rb&&(this.m_bunchEdgeEndPoints.push(u),this.m_shape.setUserIndex(u,this.m_userIndexSortedAngleIndexToVertex,Rb),this.m_bunchEdgeCenterPoints.push(l),this.m_bunchEdgeIndices.push(n++)),this.m_shape.getUserIndex(f,this.m_userIndexSortedAngleIndexToVertex)!==Rb&&(this.m_bunchEdgeEndPoints.push(f),this.m_shape.setUserIndex(f,this.m_userIndexSortedAngleIndexToVertex,Rb),this.m_bunchEdgeCenterPoints.push(l),this.m_bunchEdgeIndices.push(n++)),s=this.m_sortedVertices.getNext(s)}if(this.m_bunchEdgeEndPoints.length<2){this.m_bunchEdgeEndPoints.length===1&&this.m_shape.setUserIndex(this.m_bunchEdgeEndPoints[0],this.m_userIndexSortedAngleIndexToVertex,-1);break}this.m_bunchEdgeIndices.sort((l,u)=>this.compareAngles_(l,u));for(let l=0,u=this.m_bunchEdgeIndices.length;l<u;l++){const f=this.m_bunchEdgeIndices[l],y=this.m_bunchEdgeEndPoints[f];this.m_shape.setUserIndex(y,this.m_userIndexSortedAngleIndexToVertex,l)}const o=this.processCrossOvers_(i);for(let l=0,u=this.m_bunchEdgeIndices.length;l<u;l++){const f=this.m_bunchEdgeIndices[l];if(f===-1)continue;const y=this.m_bunchEdgeEndPoints[f];this.m_shape.setUserIndex(y,this.m_userIndexSortedAngleIndexToVertex,-1)}if(!o)break;e=!0}return e}processCrossOvers_(e){let i=!1,s=!0;for(;s;){s=!1;let n=0;this.m_bunchEdgeIndices[n]===-1&&(n=this.getNextEdgeIndex_(n));let r=this.getNextEdgeIndex_(n);for(let o=0,l=this.m_bunchEdgeIndices.length;o<l&&n!==-1&&r!==-1&&n!==r;o++){const u=this.m_bunchEdgeIndices[n],f=this.m_bunchEdgeIndices[r],y=this.m_bunchEdgeEndPoints[u],_=this.m_bunchEdgeEndPoints[f];let x=this.m_shape.getNextVertex(y),S=!1;this.m_shape.isEqualXYPoint2D(x,e)||(x=this.m_shape.getPrevVertex(y),S=!0);let P=this.m_shape.getNextVertex(_),A=!1;this.m_shape.isEqualXYPoint2D(P,e)||(P=this.m_shape.getPrevVertex(_),A=!0);const k=S?this.m_shape.getPrevVertex(x):this.m_shape.getNextVertex(x),$=A?this.m_shape.getPrevVertex(P):this.m_shape.getNextVertex(P);let F=!1;(this.removeSpike_(x)||this.removeSpike_(P)||this.removeSpike_(y)||this.removeSpike_(_)||this.removeSpike_(k)||this.removeSpike_($))&&(F=!0),x!==P&&(!F&&this.m_shape.isEqualXY(y,_)&&(F=this.resolveOverlap_(S,A,x,y,P,_)),!F&&this.m_shape.isEqualXY(k,$)&&(F=this.resolveOverlap_(!S,!A,x,k,P,$)),!F&&this.m_shape.isEqualXY(y,$)&&(F=this.resolveOverlap_(S,!A,x,y,P,$)),!F&&this.m_shape.isEqualXY(k,_)&&(F=this.resolveOverlap_(!S,A,x,k,P,_))),F&&(i=!0),s||(s=F),n=F?this.getNextEdgeIndex_(n):r,r=this.getNextEdgeIndex_(n)}}if(!i){let n=0;this.m_bunchEdgeIndices[n]===-1&&(n=this.getNextEdgeIndex_(n));let r=this.getNextEdgeIndex_(n);for(let o=0,l=this.m_bunchEdgeIndices.length;o<l&&n!==-1&&r!==-1&&n!==r;o++){const u=this.m_bunchEdgeIndices[n],f=this.m_bunchEdgeIndices[r],y=this.m_bunchEdgeEndPoints[u],_=this.m_bunchEdgeEndPoints[f];let x=this.m_shape.getNextVertex(y);this.m_shape.isEqualXYPoint2D(x,e)||(x=this.m_shape.getPrevVertex(y));let S=this.m_shape.getNextVertex(_);this.m_shape.isEqualXYPoint2D(S,e)||(S=this.m_shape.getPrevVertex(_));const P=this.getDirection_(x,y),A=this.getDirection_(S,_),k=P?this.m_shape.getPrevVertex(x):this.m_shape.getNextVertex(x),$=A?this.m_shape.getPrevVertex(S):this.m_shape.getNextVertex(S),F=this.detectAndResolveCrossOver_(P,A,y,x,k,_,S,$);F!==1?F===0?(n=this.getNextEdgeIndex_(n),r=this.getNextEdgeIndex_(n)):(n=this.getPrevEdgeIndex_(n),r=this.getNextEdgeIndex_(n)):i=!0}}return i}simplify_(){this.m_shape.getGeometryType(this.m_geometry)===me.enumPolygon&&this.m_shape.getFillRule(this.m_geometry)===1&&new Sf(this.m_progressTracker).planarSimplifyNoCrackingAndCluster(this.m_bFixSelfTangency,this.m_shape,this.m_geometry,0);let e=!1;this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=this.m_shape.createUserIndexUninitialized();const i=this.m_shape.getPointCount(this.m_geometry),s=new Ns(0);this.m_shape.dbgVerifyMonotone();for(let o=this.m_shape.getFirstPath(this.m_geometry);o!==ae;o=this.m_shape.getNextPath(o)){let l=this.m_shape.getFirstVertex(o);for(let u=0,f=this.m_shape.getPathSize(o);u<f;u++)this.m_shape.setUserIndex(l,this.m_userIndexSortedAngleIndexToVertex,-1),s.add(l),l=this.m_shape.getNextVertex(l)}this.m_shape.sortVerticesSimpleByY(s,0,i),this.progress_(!0),this.m_userIndexSortedIndexToVertex=this.m_shape.createUserIndexUninitialized(),this.m_sortedVertices.reserveNodes(i),this.m_sortedVerticesListIndex=this.m_sortedVertices.createList(0);for(let o=0;o<i;o++){const l=s.read(o),u=this.m_sortedVertices.addElement(this.m_sortedVerticesListIndex,l);this.m_shape.setUserIndex(l,this.m_userIndexSortedIndexToVertex,u)}this.m_nextVertexToProcess=-1,this.cleanupSpikes_()&&(e=!0);let n=0,r=!1;do{r=!1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=this.m_sortedVertices.getFirst(this.m_sortedVerticesListIndex);const o=new Y(0,0);this.m_firstCoincidentVertex!==to.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(this.m_firstCoincidentVertex),o);let l=0,u=this.m_firstCoincidentVertex;for(;u!==to.st_nullNode()&&(u=this.m_sortedVertices.getNext(u),u!==to.st_nullNode());){this.progress_();const f=this.m_sortedVertices.getData(u),y=Y.getNAN();if(this.m_shape.queryXY(f,y),o.equals(y))l++;else{if(l>0){this.m_nextVertexToProcess=u;const _=this.processBunch_();u=this.m_nextVertexToProcess,u!==to.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(u),y),_&&(r=!0)}o.setCoordsPoint2D(y),this.m_firstCoincidentVertex=u,l=0}}this.m_nextVertexToProcess=-1,l>0&&this.processBunch_()&&(r=!0),n++>10&&bt(""),r&&this.fixOrphanVertices_(),this.cleanupSpikes_()&&(r=!0),e||(e=r)}while(r);return this.m_shape.dbgVerifyMonotone(),this.m_shape.dbgVerifyCurves(),this.m_shape.removeUserIndex(this.m_userIndexSortedIndexToVertex),this.m_shape.removeUserIndex(this.m_userIndexSortedAngleIndexToVertex),e=qtt(this.m_shape,this.m_geometry,this.m_sortedVertices,this.m_bFixSelfTangency,this.m_progressTracker)||e,this.m_shape.dbgVerifyCurves(),e}getDirection_(e,i){return this.m_shape.getNextVertex(i)!==e}detectAndResolveCrossOver_(e,i,s,n,r,o,l,u){if(n===l)return this.removeAngleSortInfo_(s),this.removeAngleSortInfo_(o),-1;const f=this.m_shape.getUserIndex(s,this.m_userIndexSortedAngleIndexToVertex),y=this.m_shape.getUserIndex(r,this.m_userIndexSortedAngleIndexToVertex),_=this.m_shape.getUserIndex(o,this.m_userIndexSortedAngleIndexToVertex),x=this.m_shape.getUserIndex(u,this.m_userIndexSortedAngleIndexToVertex),S=new Array(8),P=new Array(4);S[0]=0,P[0]=f,S[1]=0,P[1]=y,S[2]=1,P[2]=_,S[3]=1,P[3]=x;for(let k=1;k<4;k++){const $=P[k],F=S[k];let G=k-1;for(;G>=0&&P[G]>$;)P[G+1]=P[G],S[G+1]=S[G],G--;P[G+1]=$,S[G+1]=F}let A=0;if(S[0]&&(A|=1),S[1]&&(A|=2),S[2]&&(A|=4),S[3]&&(A|=8),A!==5&&A!==10)return 0;if(e!==i&&(u=St(o,o=u)),e)this.m_shape.setNextVertex(u,n),this.m_shape.setPrevVertex(n,u),this.m_shape.setNextVertex(r,l),this.m_shape.setPrevVertex(l,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(l,!0));else{if(this.m_shape.setPrevVertex(u,n),this.m_shape.setNextVertex(n,u),this.m_shape.setPrevVertex(r,l),this.m_shape.setNextVertex(l,r),this.m_bHasSegmentParentage){const k=this.m_shape.getSegmentParentage(n),$=this.m_shape.getSegmentParentage(l);this.m_shape.setSegmentParentageAndBreak(n,$,!0),this.m_shape.setSegmentParentageAndBreak(l,k,!0)}if(this.m_bHasSegments){const k=this.m_shape.getVertexIndex(n),$=this.m_shape.getVertexIndex(l),F=this.m_shape.getSegmentFromIndex(k);this.m_shape.setSegmentToIndex(k,null);const G=this.m_shape.getSegmentFromIndex($);this.m_shape.setSegmentToIndex($,null),this.m_shape.setSegmentToIndex(k,G),this.m_shape.setSegmentToIndex($,F)}}return 1}resolveOverlap_(e,i,s,n,r,o){return this.resolveOverlapOddEven_(e,i,s,n,r,o)}resolveOverlapOddEven_(e,i,s,n,r,o){if(e!==i){e||(r=St(s,s=r),o=St(n,n=o));const l=this.m_shape.getNextVertex(r),u=this.m_shape.getNextVertex(s);if(this.m_shape.setNextVertex(s,l),this.m_shape.setPrevVertex(l,s),this.m_shape.setNextVertex(r,u),this.m_shape.setPrevVertex(u,r),this.m_bHasSegments){const f=this.m_shape.getVertexIndex(s),y=this.m_shape.getVertexIndex(r),_=this.m_shape.getSegmentFromIndex(f);this.m_shape.setSegmentToIndex(f,null);const x=this.m_shape.getSegmentFromIndex(y);this.m_shape.setSegmentToIndex(y,null),this.m_shape.setSegmentToIndex(f,x),this.m_shape.setSegmentToIndex(y,_)}if(this.m_bHasSegmentParentage){const f=this.m_shape.getSegmentParentage(s),y=this.m_shape.getSegmentParentage(r);this.m_shape.setSegmentParentageAndBreak(s,y,!0),this.m_shape.setSegmentParentageAndBreak(r,f,!0),this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(o,!0)}this.removeSpike_(r)}else{const l=e?s:n,u=i?r:o,f=e?n:s,y=i?o:r;let _=null;if(this.m_bHasSegments){const F=this.m_shape.getVertexIndex(y);_=this.m_shape.getSegmentFromIndex(F),this.m_shape.setSegmentToIndex(F,null);const G=this.m_shape.getVertexIndex(u);this.m_shape.setSegmentToIndex(G,null);const V=this.m_shape.getVertexIndex(l);this.m_shape.setSegmentToIndex(V,null)}let x=-1;this.m_bHasSegmentParentage&&(x=this.m_shape.getSegmentParentage(y));let S=!1;this.m_shape.setNextVertex(l,u),this.m_shape.setNextVertex(u,l),this.m_shape.setPrevVertex(f,y),this.m_shape.setPrevVertex(y,f);let P=y;for(;P!==u;){const F=this.m_shape.getPrevVertex(P),G=this.m_shape.getNextVertex(P);if(this.m_shape.setPrevVertex(P,G),this.m_shape.setNextVertex(P,F),S||(S=P===l),this.m_bHasSegments&&P!==l){const V=this.m_shape.getVertexIndex(G),B=_;_=this.m_shape.getSegmentFromIndex(V),B!==null&&B.reverse(),this.m_shape.setSegmentToIndex(V,B)}if(this.m_bHasSegmentParentage){const V=this.m_shape.getSegmentParentage(G);this.m_shape.setSegmentParentagePreserveBreak(G,x),x=V}P=G}let A=null;if(!S){const F=this.m_shape.getPrevVertex(u),G=this.m_shape.getNextVertex(u);if(this.m_shape.setPrevVertex(u,G),this.m_shape.setNextVertex(u,F),this.m_bHasSegments){const V=this.m_shape.getVertexIndex(u);A=this.m_shape.getSegmentFromIndex(V),this.m_shape.setSegmentToIndex(V,null)}}let k=-1,$=-1;if(this.m_bHasSegmentParentage&&(k=S?this.m_shape.getSegmentParentage(l):this.m_shape.getSegmentParentage(u),$=this.m_shape.getSegmentParentage(f)),this.transferVertexData_(u,l),this.beforeRemoveVertex_(u,!0),this.m_shape.removeVertexInternal(u,!0),this.removeAngleSortInfo_(l),this.transferVertexData_(y,f),this.beforeRemoveVertex_(y,!0),this.m_shape.removeVertexInternal(y,!0),this.removeAngleSortInfo_(f),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageAndBreak(l,k,!0),this.m_shape.setSegmentParentageAndBreak(f,$,!0)),A){const F=this.m_shape.getVertexIndex(l);this.m_shape.setSegmentToIndex(F,A)}}return!0}cleanupSpikes_(){let e=!1;for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;){const s=this.m_shape.getNextPath(i);let n=this.m_shape.getFirstVertex(i);for(let r=0,o=this.m_shape.getPathSize(i);r<o&&o>1;){this.progress_();const{v:l,bModified:u}=this.checkAndCleanupSpike_(i,n);if(l===ae)break;u?(e=!0,n=l,r=0,o=this.m_shape.getPathSize(i)):(n=l,r++)}i=s}return e}checkAndCleanupSpike_(e,i){const s={v:ae,bModified:!1};let n=this.m_shape.getPrevVertex(i),r=this.m_shape.getNextVertex(i),o=ae,l=ae;for(;this.m_shape.isEqualXY(n,r)&&(o=n,l=r,r!==i);)n=this.m_shape.getPrevVertex(n),r=this.m_shape.getNextVertex(r);if(o===ae)return s.v=r,s;s.bModified=!0;for(let u=this.m_shape.getNextVertex(o);this.beforeRemoveVertex_(u,!1),u!==l;u=this.m_shape.getNextVertex(u));if(o===i)return this.m_polylineDegeneracies!==ae?this.m_shape.movePath(this.m_polylineDegeneracies,ae,e):this.m_shape.removePath(e),s.v=ae,s;{const u=this.m_shape.peelALoopIntoAPath(o,l);this.m_polylineDegeneracies!==ae?this.m_shape.movePath(this.m_polylineDegeneracies,ae,u):this.m_shape.removePath(u)}return s.v=o,s}removeSpike_(e){let i=this.m_shape.getPrevVertex(e),s=this.m_shape.getNextVertex(e),n=ae,r=ae;for(;this.m_shape.isEqualXY(i,s)&&(n=i,r=s,s!==e);)i=this.m_shape.getPrevVertex(i),s=this.m_shape.getNextVertex(s);if(n===ae)return!1;if(this.m_shape.peelALoop(n,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(r,!0)),this.removeAngleSortInfo_(n),this.m_polylineDegeneracies===ae)for(let o=this.m_shape.getNextVertex(r);;){const l=this.m_shape.getNextVertex(o);if(this.removeAngleSortInfo_(o),this.beforeRemoveVertex_(o,!0),this.m_shape.setSegmentToIndex(this.m_shape.getVertexIndex(o),null),this.m_shape.removeVertexInternal(o,!1),o===r)break;o=l}else{for(let l=r;;){const u=this.m_shape.getNextVertex(l);if(this.removeAngleSortInfo_(l),this.beforeRemoveVertex_(l,!1),l=u,l===r)break}const o=[!1];this.m_shape.insertClosedPath(this.m_polylineDegeneracies,ae,r,r,o)}return!0}fixOrphanVertices_(){let e=0;for(let n=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());n!==-1;n=this.m_sortedVertices.getNext(n)){const r=this.m_sortedVertices.getData(n);this.m_shape.setPathToVertex(r,ae)}let i=0;for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==ae;){const r=this.m_shape.getFirstVertex(n);if(r===ae||this.m_shape.getPathFromVertex(r)!==ae){const l=n;n=this.m_shape.getNextPath(n),this.m_shape.removePathOnly(l);continue}this.m_shape.setPathToVertex(r,n);let o=1;for(let l=this.m_shape.getNextVertex(r);l!==r;l=this.m_shape.getNextVertex(l))this.m_shape.setPathToVertex(l,n),o++;this.m_shape.setRingAreaValid(n,!1),this.m_shape.setPathSize(n,o),this.m_shape.setLastVertex(n,this.m_shape.getPrevVertex(r)),i+=o,e++,n=this.m_shape.getNextPath(n)}for(let n=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());n!==-1;n=this.m_sortedVertices.getNext(n)){const r=this.m_sortedVertices.getData(n);if(this.m_shape.getPathFromVertex(r)!==ae)continue;const o=[!1],l=this.m_shape.insertClosedPath(this.m_geometry,ae,r,r,o);i+=this.m_shape.getPathSize(l),e++}this.m_shape.setGeometryPathCount(this.m_geometry,e),this.m_shape.setGeometryVertexCount(this.m_geometry,i);let s=0;for(let n=this.m_shape.getFirstGeometry();n!==ae;n=this.m_shape.getNextGeometry(n))s+=this.m_shape.getPointCount(n);this.m_shape.setTotalPointCount(s)}getNextEdgeIndex_(e){if(e===-1)return-1;for(let i=0,s=this.m_bunchEdgeIndices.length-1;i<s;i++)if(e=(e+1)%this.m_bunchEdgeIndices.length,this.m_bunchEdgeIndices[e]!==-1)return e;return-1}getPrevEdgeIndex_(e){if(e===-1)return-1;for(let i=0,s=this.m_bunchEdgeIndices.length-1;i<s;i++)if(e=(this.m_bunchEdgeIndices.length+e-1)%this.m_bunchEdgeIndices.length,this.m_bunchEdgeIndices[e]!==-1)return e;return-1}transferVertexData_(e,i){const s=this.m_shape.getUserIndex(i,this.m_userIndexSortedIndexToVertex),n=this.m_shape.getUserIndex(i,this.m_userIndexSortedAngleIndexToVertex);this.m_shape.transferAllDataToTheVertex(e,i),this.m_shape.setUserIndex(i,this.m_userIndexSortedIndexToVertex,s),this.m_shape.setUserIndex(i,this.m_userIndexSortedAngleIndexToVertex,n)}removeAngleSortInfo_(e){const i=this.m_shape.getUserIndex(e,this.m_userIndexSortedAngleIndexToVertex);i!==-1&&(this.m_bunchEdgeIndices[i]=-1,this.m_shape.setUserIndex(e,this.m_userIndexSortedAngleIndexToVertex,-1))}progress_(e=!1){}}function Ju(t,e,i,s,n,r=!0){switch(Ytt(s)){case 0:break;case 1:Je("relation string length has to be 9 characters");break;default:Je("relation string")}if(r){const x=Qtt(s,t.getDimension(),e.getDimension());if(x!==0)return W0(t,e,i,x,n)}let o=0;if(typeof i=="number")o=i;else{const x=xe.constructEmpty();t.queryEnvelope(x);const S=xe.constructEmpty();e.queryEnvelope(S);const P=xe.constructEmpty();P.setCoords({env2D:x}),P.mergeEnvelope2D(S),o=Zg(i,P,!1)}const l=kie(t,o),u=kie(e,o);if(l.isEmpty()||u.isEmpty())return Jtt(l,u,s);const f=l.getGeometryType(),y=u.getGeometryType();let _=!1;switch(f){case me.enumPolygon:switch(y){case me.enumPolygon:_=Xtt(l,u,o,s,n);break;case me.enumPolyline:_=Pie(l,u,o,s,n);break;case me.enumPoint:_=Mie(l,u,o,s);break;case me.enumMultiPoint:_=Tie(l,u,o,s,n)}break;case me.enumPolyline:switch(y){case me.enumPolygon:_=Pie(u,l,o,F_(s),n);break;case me.enumPolyline:_=Wtt(l,u,o,s,n);break;case me.enumPoint:_=Aie(l,u,o,s,n);break;case me.enumMultiPoint:_=Iie(l,u,o,s,n)}break;case me.enumPoint:switch(y){case me.enumPolygon:_=Mie(u,l,o,F_(s));break;case me.enumPolyline:_=Aie(u,l,o,F_(s),n);break;case me.enumPoint:_=Ktt(l,u,o,s);break;case me.enumMultiPoint:_=Die(u,l,o,F_(s))}break;case me.enumMultiPoint:switch(y){case me.enumPolygon:_=Tie(u,l,o,F_(s),n);break;case me.enumPolyline:_=Iie(u,l,o,F_(s),n);break;case me.enumMultiPoint:_=Ztt(l,u,o,s,n);break;case me.enumPoint:_=Die(l,u,o,s)}break;default:_=!1}return _}function Htt(t,e,i,s){const n=new ud;n.resetMatrix_(),n.setPredicates_("T*****F**"),n.setAreaAreaPredicates_();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryEnvelope(r),e.queryEnvelope(o);let l=!1;if(Df(r,o,i)&&(n.areaAreaDisjointPredicates_(t,e),l=!0),l||is(t,e),l)return xa(n.m_matrix,n.m_scl);let u=new Bs,f=u.addGeometry(t),y=u.addGeometry(e),_=null,x=0;if(t.hasNonLinearSegments()||e.hasNonLinearSegments()){_=new ku;const k=Du(i,u.getEnvelope2D(s));x=of(k,0),Vh(u,k,i,12e3,_,null,s)}Yd(u,new Qo(i,0).add(x),s,!1,!1);const S=u.getGeometry(y).getBoundary();if(u.filterClosePoints(0,!0,!0,!1,ae),lg(u,f,-1,!1,ae,s),u.getPointCount(f)===0)return!1;lg(u,y,-1,!1,ae,s),n.setEditShape_(u,s);const P=u.getPointCount(y)===0;if(!P){n.computeMatrixTopoGraphHalfEdges_(f,y),n.m_topoGraph.removeShape();const k=xa(n.m_matrix,n.m_scl);if(!k)return k}const A=u.getGeometry(f);return u=new Bs,f=u.addGeometry(A),y=u.addGeometry(S),n.setEditShape_(u,s),n.m_predicateCount=0,n.resetMatrix_(),n.setPredicates_(P?"T*****F**":"******F**"),n.setAreaLinePredicates_(),n.computeMatrixTopoGraphHalfEdges_(f,y),n.m_topoGraph.removeShape(),xa(n.m_matrix,n.m_scl)}function Utt(t,e,i,s){const n=new ud;n.resetMatrix_(),n.setPredicates_("T*****F**"),n.setAreaLinePredicates_();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryEnvelope(r),e.queryEnvelope(o);let l=!1;if(Df(r,o,i)&&(n.areaLineDisjointPredicates_(t,e),l=!0),l||is(t,e),l)return xa(n.m_matrix,n.m_scl);const u=new Bs,f=u.addGeometry(t),y=u.addGeometry(e);return n.setEditShapeCrackAndCluster_(u,new Qo(i,0),s),u.getPointCount(f)===0?!1:(n.computeMatrixTopoGraphHalfEdges_(f,y),n.m_topoGraph.removeShape(),xa(n.m_matrix,n.m_scl))}function Ytt(t){if(t.length!==9)return 1;for(let e=0;e<9;e++){const i=t[e];if(i!=="*"&&i!=="T"&&i!=="F"&&i!=="0"&&i!=="1"&&i!=="2")return 2}return 0}function Xtt(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setAreaAreaPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let u=!1;if(Df(o,l,i)&&(r.areaAreaDisjointPredicates_(t,e),u=!0),u||is(t,e),!u){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Qo(i,0),n),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Pie(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setAreaLinePredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let u=!1;if(Df(o,l,i)&&(r.areaLineDisjointPredicates_(t,e),u=!0),u||is(t,e),!u){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Qo(i,0),n),r.m_clusterIndexB=r.m_topoGraph.createUserIndexForClusters(),X6(_,r.m_topoGraph,r.m_clusterIndexB),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexB),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Tie(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setAreaPointPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let u=!1;if(Df(o,l,i)&&(r.areaPointDisjointPredicates_(t),u=!0),u||is(t,e),!u){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Qo(i,0),n),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Wtt(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setLineLinePredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let u=!1;if(Df(o,l,i)&&(r.lineLineDisjointPredicates_(t,e),u=!0),u||is(t,e),!u){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Qo(i,0),n),r.m_clusterIndexA=r.m_topoGraph.createUserIndexForClusters(),r.m_clusterIndexB=r.m_topoGraph.createUserIndexForClusters(),X6(y,r.m_topoGraph,r.m_clusterIndexA),X6(_,r.m_topoGraph,r.m_clusterIndexB),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexA),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexB),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Iie(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setLinePointPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let u=!1;if(Df(o,l,i)&&(r.linePointDisjointPredicates_(t),u=!0),u||is(t,e),!u){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Qo(i,0),n),r.m_clusterIndexA=r.m_topoGraph.createUserIndexForClusters(),X6(y,r.m_topoGraph,r.m_clusterIndexA),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexA),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Ztt(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setPointPointPredicates_();const o=new xe,l=new xe;t.queryEnvelope(o),e.queryEnvelope(l);let u=!1;if(Df(o,l,i)&&(r.pointPointDisjointPredicates_(),u=!0),!u){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Qo(i,0),n),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Mie(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setAreaPointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);const l=e.getXY();let u=!1;if(u7(l,o,i)&&(r.areaPointDisjointPredicates_(t),u=!0),!u){const f=Cl(t,l,i);if(f===1)r.m_matrix[0]=0,r.m_matrix[2]=2,r.m_matrix[3]=-1,r.m_matrix[5]=1,r.m_matrix[6]=-1;else if(f===2)if(r.m_matrix[6]=-1,t.calculateArea2D()!==0)r.m_matrix[0]=-1,r.m_matrix[3]=0,r.m_matrix[2]=2,r.m_matrix[5]=1;else{r.m_matrix[0]=0,r.m_matrix[3]=-1,r.m_matrix[5]=-1;const y=xe.constructEmpty();t.queryEnvelope(y),r.m_matrix[2]=y.height()||y.width()?1:-1}else r.areaPointDisjointPredicates_(t)}return xa(r.m_matrix,s)}function Aie(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setLinePointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);let l=!1;if(u7(e.getXY(),o,i)&&(r.linePointDisjointPredicates_(t),l=!0),!l){let u=null,f=!1,y=!1;if((r.m_performPredicates[0]||r.m_performPredicates[6])&&(W0(t,e,i,4,n)?(r.m_matrix[0]=-1,r.m_matrix[6]=0):(r.m_performPredicates[0]&&(u=Zh(t),y=!W0(u,e,i,4,n),f=!0,r.m_matrix[0]=y?-1:0),r.m_matrix[6]=-1)),r.m_performPredicates[3]&&(u!==null&&u.isEmpty()?r.m_matrix[3]=-1:(f||(u==null&&(u=Zh(t)),y=!W0(u,e,i,4,n),f=!0),r.m_matrix[3]=y?0:-1)),r.m_performPredicates[5])if(u!==null&&u.isEmpty())r.m_matrix[5]=-1;else if(f&&!y)r.m_matrix[5]=0;else{u===null&&(u=Zh(t));const _=W0(u,e,i,3,n);r.m_matrix[5]=_?-1:0}if(r.m_performPredicates[2])if(t.calculateLength2D()!==0)r.m_matrix[2]=1;else{const _=new Jn({vd:t.getDescription()});_.addPoints(t,0,t.getPointCount());const x=W0(_,e,i,3,n);r.m_matrix[2]=x?-1:0}}return xa(r.m_matrix,r.m_scl)}function Die(t,e,i,s,n){const r=new ud;r.resetMatrix_(),r.setPredicates_(s),r.setPointPointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);const l=e.getXY(),u=new Y;let f=!1;if(u7(l,o,i)&&(r.pointPointDisjointPredicates_(),f=!0),!f){let y=!1,_=!0;const x=i*i;for(let S=0;S<t.getPointCount()&&(t.queryXY(S,u),Y.sqrDistance(u,l)<=x?y=!0:_=!1,!y||_);S++);y?(r.m_matrix[0]=0,r.m_matrix[2]=_?-1:0,r.m_matrix[6]=-1):(r.m_matrix[0]=-1,r.m_matrix[2]=0,r.m_matrix[6]=0)}return xa(r.m_matrix,s)}function Ktt(t,e,i,s,n){const r=t.getXY(),o=e.getXY(),l=Vi(9,-1);return Y.sqrDistance(r,o)<=i*i?l[0]=0:(l[2]=0,l[6]=0),l[8]=2,xa(l,s)}function xa(t,e){for(let i=0;i<9;i++)switch(e[i]){case"T":if(t[i]===-1)return!1;break;case"F":if(t[i]!==-1)return!1;break;case"0":if(t[i]!==0)return!1;break;case"1":if(t[i]!==1)return!1;break;case"2":if(t[i]!==2)return!1}return!0}function Jtt(t,e,i){const s=Vi(9,-1);if(t.isEmpty()&&e.isEmpty())return xa(s,i);let n,r=!1;t.isEmpty()?(n=e,r=!0):n=t,s[0]=-1,s[1]=-1,s[3]=-1,s[4]=-1,s[6]=-1,s[7]=-1,s[8]=2;const o=n.getGeometryType();if(bi(o))if(o===me.enumPolygon)if(n.calculateArea2D()!==0)s[2]=2,s[5]=1;else{s[5]=-1;const l=xe.constructEmpty();n.queryEnvelope(l),s[2]=l.height()||l.width()?1:0}else{const l=n.calculateLength2D()!==0;s[2]=l?1:0,s[5]=Fb(n)?0:-1}else s[2]=0,s[5]=-1;return r&&ait(s),xa(s,i)}function Qtt(t,e,i){return eit(t)?3:tit(t)?4:iit(t,e,i)?8:sit(t,e,i)?16:rit(t)?64:nit(t)?1:oit(t,e,i)?32:0}function eit(t){return t==="T*F**FFF*"}function tit(t){return t==="FF*FF****"}function iit(t,e,i){return(e!==0||i!==0)&&(e===2&&i===2?t==="F***T****":(e===2||e===1)&&i===0&&t==="F**T*****")}function sit(t,e,i){return e>i?t==="T*****T**":e===1&&i===1&&t==="0********"}function nit(t){return t==="T*****FF*"}function rit(t){return t==="T**FF*FF*"}function oit(t,e,i){return e===i&&(e!==1?t==="T*T***T**":t==="1*T***T**")}function X6(t,e,i){const s=e.getGeometryID(t);for(let n=e.getFirstCluster();n!==ae;n=e.getNextCluster(n)){if(!(e.getClusterParentage(n)&s))continue;const r=e.getClusterHalfEdge(n);if(r===ae){e.setClusterUserIndex(n,i,0);continue}let o=r,l=0;do{const u=o;e.getHalfEdgeParentage(u)&s&&l++,o=e.getHalfEdgeNext(e.getHalfEdgeTwin(u))}while(o!==r);e.setClusterUserIndex(n,i,l)}}class ud{nullFunc(){return K(0),!1}constructor(){this.m_clusterIndexA=-1,this.m_clusterIndexB=-1,this.m_visitedIndex=-1,this.m_topoGraph=new qh,this.m_matrix=Vi(9,0),this.m_maxDim=Vi(9,0),this.m_performPredicates=Vi(9,!1),this.m_scl="",this.m_predicateCount=0,this.m_predicatesHalfEdge=this.nullFunc,this.m_predicatesCluster=this.nullFunc}resetMatrix_(){this.m_matrix.fill(-2),this.m_maxDim.fill(-2)}setPredicates_(e){this.m_scl=e;for(let i=0;i<9;i++)this.m_scl[i]!=="*"?(this.m_performPredicates[i]=!0,this.m_predicateCount++):this.m_performPredicates[i]=!1}setRemainingPredicatesToFalse_(){for(let e=0;e<9;e++)this.m_performPredicates[e]&&this.m_matrix[e]===-2&&(this.m_matrix[e]=-1,this.m_performPredicates[e]=!1)}isPredicateKnown_(e){return this.m_matrix[e]!==-2&&(this.m_matrix[e]===-1?(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):this.m_scl[e]!=="T"&&this.m_scl[e]!=="F"?!(this.m_matrix[e]<this.m_maxDim[e])&&(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0))}setAreaAreaPredicates_(){this.m_predicatesHalfEdge=this.areaAreaPredicates_,this.m_maxDim[0]=2,this.m_maxDim[1]=1,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=1,this.m_maxDim[5]=1,this.m_maxDim[6]=2,this.m_maxDim[7]=1,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaLinePredicates_(){this.m_predicatesHalfEdge=this.areaLinePredicates_,this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=0,this.m_maxDim[5]=1,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLineLinePredicates_(){this.m_predicatesHalfEdge=this.lineLinePredicates_,this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=0,this.m_maxDim[5]=0,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaPointPredicates_(){this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=2,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLinePointPredicates_(){this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=0,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setPointPointPredicates_(){this.m_predicatesCluster=this.pointPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=0,this.m_maxDim[3]=-1,this.m_maxDim[4]=-1,this.m_maxDim[5]=-1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[3]&&(this.m_matrix[3]=-1,this.m_performPredicates[3]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[5]&&(this.m_matrix[5]=-1,this.m_performPredicates[5]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}areaAreaDisjointPredicates_(e,i){this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5]),this.areaGeomContainsOrDisjointPredicates_(i,this.m_performPredicates[6]?6:-1,this.m_scl[6],this.m_performPredicates[7]?7:-1,this.m_scl[7])}areaGeomContainsOrDisjointPredicates_(e,i,s,n,r){const o=i!==-1,l=n!==-1;if(o||l){if(!(s!=="T"&&s!=="F"&&o||r!=="T"&&r!=="F"&&l)||e.calculateArea2D()!==0)o&&(this.m_matrix[i]=2),l&&(this.m_matrix[n]=1);else if(l&&(this.m_matrix[n]=-1),o){const u=xe.constructEmpty();e.queryEnvelope(u),this.m_matrix[i]=u.height()||u.width()?1:0}}}areaAreaContainsPredicates_(e){K(0)}areaAreaWithinPredicates_(e){K(0)}areaLineDisjointPredicates_(e,i){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[6]){const s=this.m_scl[6],n=s==="T"||s==="F"||i.calculateLength2D()!==0;this.m_matrix[6]=n?1:0}if(this.m_performPredicates[7]){const s=Fb(i);this.m_matrix[7]=s?0:-1}this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaLineContainsPredicates_(e,i){K(0)}areaPointDisjointPredicates_(e){this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_matrix[6]=0,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaPointContainsPredicates_(e){K(0)}lineLineDisjointPredicates_(e,i){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[2]){const s=this.m_scl[2],n=s==="T"||s==="F"||e.calculateLength2D()!==0;this.m_matrix[2]=n?1:0}if(this.m_performPredicates[5]){const s=Fb(e);this.m_matrix[5]=s?0:-1}if(this.m_performPredicates[6]){const s=this.m_scl[6],n=s==="T"||s==="F"||i.calculateLength2D()!==0;this.m_matrix[6]=n?1:0}if(this.m_performPredicates[7]){const s=Fb(i);this.m_matrix[7]=s?0:-1}}linePointDisjointPredicates_(e){if(this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_performPredicates[2]){const i=this.m_scl[2],s=i==="T"||i==="F"||e.calculateLength2D()!==0;this.m_matrix[2]=s?1:0}if(this.m_performPredicates[5]){const i=Fb(e);this.m_matrix[5]=i?0:-1}this.m_matrix[6]=0}pointPointDisjointPredicates_(){this.m_matrix[0]=-1,this.m_matrix[2]=0,this.m_matrix[6]=0}areaAreaPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorArea_(e,i,s);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[1]){this.interiorAreaBoundaryArea_(e,i,1);const r=this.isPredicateKnown_(1);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorArea_(e,i,s,2);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.interiorAreaBoundaryArea_(e,s,3);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryArea_(e,i,s);const r=this.isPredicateKnown_(4);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorArea_(e,i,s,5);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.interiorAreaExteriorArea_(e,s,i,6);const r=this.isPredicateKnown_(6);n&&(n=r)}if(this.m_performPredicates[7]){this.boundaryAreaExteriorArea_(e,s,i,7);const r=this.isPredicateKnown_(7);n&&(n=r)}return n}areaLinePredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorLine_(e,i,s);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[1]){this.interiorAreaBoundaryLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(1);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorLine_(e,i,s);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.boundaryAreaInteriorLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorLine_(e,i,s);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.exteriorAreaInteriorLine_(e,i);const r=this.isPredicateKnown_(6);n&&(n=r)}if(this.m_performPredicates[7]){this.exteriorAreaBoundaryLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(7);n&&(n=r)}return n}lineLinePredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorLine_(e,i,s,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[1]){this.interiorLineBoundaryLine_(e,i,s,this.m_clusterIndexA,this.m_clusterIndexB,1);const r=this.isPredicateKnown_(1);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorLineExteriorLine_(e,i,s,2);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.interiorLineBoundaryLine_(e,s,i,this.m_clusterIndexB,this.m_clusterIndexA,3);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[4]){this.boundaryLineBoundaryLine_(e,i,s,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryLineExteriorLine_(e,i,s,this.m_clusterIndexA,5);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.interiorLineExteriorLine_(e,s,i,6);const r=this.isPredicateKnown_(6);n&&(n=r)}if(this.m_performPredicates[7]){this.boundaryLineExteriorLine_(e,s,i,this.m_clusterIndexB,7);const r=this.isPredicateKnown_(7);n&&(n=r)}return n}areaPointPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorPoint_(e,i);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorPoint_(e,i);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.boundaryAreaInteriorPoint_(e,i,s);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorPoint_(e,i);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.exteriorAreaInteriorPoint_(e,i);const r=this.isPredicateKnown_(6);n&&(n=r)}return n}linePointPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorLineExteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.boundaryLineInteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryLineExteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.exteriorLineInteriorPoint_(e,i,s);const r=this.isPredicateKnown_(6);n&&(n=r)}return n}pointPointPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorPointInteriorPoint_(e,i,s);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorPointExteriorPoint_(e,i,s,2);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[6]){this.interiorPointExteriorPoint_(e,s,i,6);const r=this.isPredicateKnown_(6);n&&(n=r)}return n}interiorAreaInteriorArea_(e,i,s){if(this.m_matrix[0]===2)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e);n&i&&n&s&&(this.m_matrix[0]=2)}interiorAreaBoundaryArea_(e,i,s){if(this.m_matrix[s]===1)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));n&i&&r&i&&(this.m_matrix[s]=1)}interiorAreaExteriorArea_(e,i,s,n){if(this.m_matrix[n]===2)return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e);r&i&&!(r&s)&&(this.m_matrix[n]=2)}boundaryAreaBoundaryArea_(e,i,s){if(this.m_matrix[4]===1)return;const n=this.m_topoGraph.getHalfEdgeParentage(e);if(n&i&&n&s)this.m_matrix[4]=1;else if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(o&i&&o&s)return void(this.m_matrix[4]=0)}}boundaryAreaExteriorArea_(e,i,s,n){if(this.m_matrix[n]===1)return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e),o=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));r&s||o&s||(this.m_matrix[n]=1)}interiorAreaInteriorLine_(e,i,s){if(this.m_matrix[0]===1)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));n&i&&r&i&&(this.m_matrix[0]=1)}interiorAreaBoundaryLine_(e,i,s,n){if(this.m_matrix[1]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(!(o&i)&&this.m_topoGraph.getHalfEdgeFaceParentage(e)&i){const l=this.m_topoGraph.getClusterUserIndex(r,n);if(o&s&&l%2!=0)return void(this.m_matrix[1]=0)}}}interiorAreaExteriorLine_(e,i,s){this.m_matrix[2]!==2&&this.m_topoGraph.getHalfEdgeParentage(e)&i&&(this.m_matrix[2]=2)}boundaryAreaInteriorLine_(e,i,s,n){if(this.m_matrix[3]===1)return;const r=this.m_topoGraph.getHalfEdgeParentage(e);if(r&i&&r&s)this.m_matrix[3]=1;else if(this.m_matrix[3]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e),l=this.m_topoGraph.getClusterParentage(o);if(l&i){const u=this.m_topoGraph.getClusterUserIndex(o,n);if(l&s&&u%2==0)return void(this.m_matrix[3]=0)}}}boundaryAreaBoundaryLine_(e,i,s,n){if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(o&i){const l=this.m_topoGraph.getClusterUserIndex(r,n);if(o&s&&l%2!=0)return void(this.m_matrix[4]=0)}}}boundaryAreaExteriorLine_(e,i,s){if(this.m_matrix[5]===1)return;const n=this.m_topoGraph.getHalfEdgeParentage(e);n&i&&!(n&s)&&(this.m_matrix[5]=1)}exteriorAreaInteriorLine_(e,i){if(this.m_matrix[6]===1)return;const s=this.m_topoGraph.getHalfEdgeFaceParentage(e),n=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));s&i||n&i||(this.m_matrix[6]=1)}exteriorAreaBoundaryLine_(e,i,s,n){if(this.m_matrix[7]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(!(o&i)&&!(this.m_topoGraph.getHalfEdgeFaceParentage(e)&i)){const l=this.m_topoGraph.getClusterUserIndex(r,n);if(o&s&&l%2!=0)return void(this.m_matrix[7]=0)}}}interiorLineInteriorLine_(e,i,s,n,r){if(this.m_matrix[0]===1)return;const o=this.m_topoGraph.getHalfEdgeParentage(e);if(o&i&&o&s)this.m_matrix[0]=1;else if(this.m_matrix[0]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const l=this.m_topoGraph.getHalfEdgeTo(e),u=this.m_topoGraph.getClusterParentage(l);if(u&i&&u&s){const f=this.m_topoGraph.getClusterUserIndex(l,n),y=this.m_topoGraph.getClusterUserIndex(l,r);if(f%2==0&&y%2==0)return void(this.m_matrix[0]=0)}}}interiorLineBoundaryLine_(e,i,s,n,r,o){if(this.m_matrix[o]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const l=this.m_topoGraph.getHalfEdgeTo(e),u=this.m_topoGraph.getClusterParentage(l);if(u&i&&u&s){const f=this.m_topoGraph.getClusterUserIndex(l,n),y=this.m_topoGraph.getClusterUserIndex(l,r);if(f%2==0&&y%2!=0)return void(this.m_matrix[o]=0)}}}interiorLineExteriorLine_(e,i,s,n){if(this.m_matrix[n]===1)return;const r=this.m_topoGraph.getHalfEdgeParentage(e);r&i&&!(r&s)&&(this.m_matrix[n]=1)}boundaryLineBoundaryLine_(e,i,s,n,r){if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e),l=this.m_topoGraph.getClusterParentage(o);if(l&i&&l&s){const u=this.m_topoGraph.getClusterUserIndex(o,n),f=this.m_topoGraph.getClusterUserIndex(o,r);if(u%2!=0&&f%2!=0)return void(this.m_matrix[4]=0)}}}boundaryLineExteriorLine_(e,i,s,n,r){if(this.m_matrix[r]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e);if(!(this.m_topoGraph.getClusterParentage(o)&s)&&this.m_topoGraph.getClusterUserIndex(o,n)%2!=0)return void(this.m_matrix[r]=0)}}interiorAreaInteriorPoint_(e,i){if(this.m_matrix[0]!==0&&!(this.m_topoGraph.getClusterParentage(e)&i)){const s=this.m_topoGraph.getClusterChain(e);if(this.m_topoGraph.getChainParentage(s)&i)return void(this.m_matrix[0]=0)}}interiorAreaExteriorPoint_(e,i){this.m_matrix[2]!==2&&this.m_topoGraph.getClusterParentage(e)&i&&(this.m_matrix[2]=2)}boundaryAreaInteriorPoint_(e,i,s){if(this.m_matrix[3]===0)return;const n=this.m_topoGraph.getClusterParentage(e);n&i&&n&s&&(this.m_matrix[3]=0)}boundaryAreaExteriorPoint_(e,i){this.m_matrix[5]!==1&&this.m_topoGraph.getClusterParentage(e)&i&&(this.m_matrix[5]=1)}exteriorAreaInteriorPoint_(e,i){if(this.m_matrix[6]!==0&&!(this.m_topoGraph.getClusterParentage(e)&i)){const s=this.m_topoGraph.getClusterChain(e);if(!(this.m_topoGraph.getChainParentage(s)&i))return void(this.m_matrix[6]=0)}}interiorLineInteriorPoint_(e,i,s,n){if(this.m_matrix[0]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&r&s&&this.m_topoGraph.getClusterUserIndex(e,n)%2==0)return void(this.m_matrix[0]=0)}interiorLineExteriorPoint_(e,i,s,n){if(this.m_matrix[2]!==1)if(this.m_topoGraph.getClusterHalfEdge(e)===-1){if(this.m_matrix[2]!==0&&!(this.m_topoGraph.getClusterParentage(e)&s))return void(this.m_matrix[2]=0)}else this.m_matrix[2]=1}boundaryLineInteriorPoint_(e,i,s,n){if(this.m_matrix[3]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&r&s&&this.m_topoGraph.getClusterUserIndex(e,n)%2!=0)return void(this.m_matrix[3]=0)}boundaryLineExteriorPoint_(e,i,s,n){if(this.m_matrix[5]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&!(r&s)&&this.m_topoGraph.getClusterUserIndex(e,n)%2!=0)return void(this.m_matrix[5]=0)}exteriorLineInteriorPoint_(e,i,s){if(this.m_matrix[6]===0)return;const n=this.m_topoGraph.getClusterParentage(e);n&i||!(n&s)||(this.m_matrix[6]=0)}interiorPointInteriorPoint_(e,i,s){if(this.m_matrix[0]===0)return;const n=this.m_topoGraph.getClusterParentage(e);n&i&&n&s&&(this.m_matrix[0]=0)}interiorPointExteriorPoint_(e,i,s,n){if(this.m_matrix[n]===0)return;const r=this.m_topoGraph.getClusterParentage(e);!(r&i)||r&s||(this.m_matrix[n]=0)}computeMatrixTopoGraphHalfEdges_(e,i){let s=!1;const n=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(i);this.m_visitedIndex=this.m_topoGraph.createUserIndexForHalfEdges();for(let o=this.m_topoGraph.getFirstCluster();o!==ae;o=this.m_topoGraph.getNextCluster(o)){const l=this.m_topoGraph.getClusterHalfEdge(o);if(l===ae){if(this.m_predicatesCluster!==null&&(s=this.m_predicatesCluster(o,n,r),s))break;continue}let u=l;do{let f=u;if(this.m_topoGraph.getHalfEdgeUserIndex(f,this.m_visitedIndex)!==1)do{if(s=this.m_predicatesHalfEdge(f,n,r),s)break;this.m_topoGraph.setHalfEdgeUserIndex(f,this.m_visitedIndex,1),f=this.m_topoGraph.getHalfEdgeNext(f)}while(f!==u&&!s);if(s)break;u=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(f))}while(u!==l);if(s)break}s||this.setRemainingPredicatesToFalse_(),this.m_topoGraph.deleteUserIndexForHalfEdges(this.m_visitedIndex)}computeMatrixTopoGraphClusters_(e,i){let s=!1;const n=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(i);for(let o=this.m_topoGraph.getFirstCluster();o!==ae&&(s=this.m_predicatesCluster(o,n,r),!s);o=this.m_topoGraph.getNextCluster(o));s||this.setRemainingPredicatesToFalse_()}setEditShape_(e,i){this.m_topoGraph.setEditShape(e,i)}setEditShapeCrackAndCluster_(e,i,s){let n=0;if(e.hasCurves()){const r=new ku,o=e.getEnvelope2D(s),l=Du(i.total(),o);n=of(l,0),Vh(e,l,i.total(),12e3,r,null,s),r.clearStitcher(e)}Yd(e,i.add(n),s,!1,!1),e.filterClosePoints(0,!0,!0,!1,ae);for(let r=e.getFirstGeometry();r!==ae;r=e.getNextGeometry(r))e.getGeometryType(r)===me.enumPolygon&&lg(e,r,-1,!1,ae,s);this.setEditShape_(e,s)}}function ait(t){const e=t[1],i=t[2],s=t[5];t[1]=t[3],t[2]=t[6],t[5]=t[7],t[3]=e,t[6]=i,t[7]=s}function kie(t,e,i){const s=t.getGeometryType();if(Dn(s)){const n=new vi({vd:t.getDescription()});return n.addSegment(t,!0),n}if(s===me.enumEnvelope){const n=t,r=xe.constructEmpty();if(t.queryEnvelope(r),r.height()<=e&&r.width()<=e){const l=new Ut({vd:t.getDescription()});return n.getCenter(l),l}if(r.height()<=e||r.width()<=e){const l=new vi({vd:t.getDescription()}),u=new Ut;return n.queryCornerByVal(0,u),l.startPathPoint(u),n.queryCornerByVal(2,u),l.lineToPoint(u),l}const o=new Wt({vd:t.getDescription()});return o.addEnvelope(n,!1),o}return t}function F_(t){return`${t[0]}${t[3]}${t[6]}${t[1]}${t[4]}${t[7]}${t[2]}${t[5]}${t[8]}`}class sc{nullFunc(){return K(0),!1}constructor(e,i,s,n=!1){this.m_bDone=!1,this.m_tolerance=0,this.m_elementHandle=-1,this.m_query=xe.constructEmpty(),this.m_envInter=xe.constructEmpty(),this.m_quadTree=null,this.m_intersector=null,this.m_function=this.nullFunc;const r=e.getAccelerators();let o=null;r!=null&&(o=n?r.getQuadTreeForPaths():r.getQuadTree());const l=i.getAccelerators();let u=null;if(l!=null&&(u=n?l.getQuadTreeForPaths():l.getQuadTree()),o===null&&u===null&&!n){const f=e.getPointCount(),y=i.getPointCount();if(f>10&&y>10){const _=xe.constructEmpty(),x=xe.constructEmpty(),S=xe.constructEmpty();e.queryLooseEnvelope(_),i.queryLooseEnvelope(x),_.inflateCoords(s,s),x.inflateCoords(s,s),S.setCoords({env2D:_}),S.intersect(x),f>=y?o=bi(e.getGeometryType())?V2(e,S):mte(e,S):u=bi(i.getGeometryType())?V2(i,S):mte(i,S)}}this.construct_(e,o,i,u,s,n)}next(){if(this.m_bQuadTree){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}return!!this.m_intersector&&this.m_intersector.next()}getRedElement(){return this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElement(this.m_elementHandle):bi(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_bSwapElements?this.m_intersector.getBlueElement(this.m_intersector.getHandleB()):this.m_intersector.getRedElement(this.m_intersector.getHandleA())}getBlueElement(){return this.m_bQuadTree?this.m_bSwapElements?bi(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_quadTree.getElement(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedElement(this.m_intersector.getHandleA()):this.m_intersector.getBlueElement(this.m_intersector.getHandleB())}getRedEnvelope(){return this.m_bPaths||bn(""),this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_query:this.m_bSwapElements?this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB()):this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA())}getBlueEnvelope(){return this.m_bPaths||bn(""),this.m_bQuadTree?this.m_bSwapElements?this.m_query:this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA()):this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB())}construct_(e,i,s,n,r,o){const l=xe.constructEmpty(),u=xe.constructEmpty();e.queryLooseEnvelope(l),s.queryLooseEnvelope(u),l.inflateCoords(r,r),u.inflateCoords(r,r),this.m_envInter.setCoords({env2D:l}),this.m_envInter.intersect(u),this.m_multiVertexImplA=e,this.m_multiVertexImplB=s;const f=e.getGeometryType(),y=s.getGeometryType();this.m_bPaths=o,this.m_pathIndex=-1,this.m_pointIndex=-1,this.m_bSwapElements=!1,this.m_queryType=me.enumUnknown,this.m_bQuadTree=!1,i!==null&&(this.m_bDone=!1,this.m_tolerance=r,this.m_quadTree=i,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!0,bi(y)?(this.m_queryType=y,this.m_function=this.nextPath_,o?this.m_pathIndex=s.getPathCount():this.m_segIter=s.querySegmentIterator()):(this.m_queryType=y,this.m_function=this.nextPoint_,this.m_pointIndex=s.getPointCount())),this.m_bQuadTree||n!==null&&(this.m_bDone=!1,this.m_tolerance=r,this.m_quadTree=n,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!1,bi(f)?(this.m_queryType=f,this.m_function=this.nextPath_,o?this.m_pathIndex=e.getPathCount():this.m_segIter=e.querySegmentIterator()):(this.m_queryType=f,this.m_function=this.nextPoint_,this.m_pointIndex=e.getPointCount())),this.m_bQuadTree||(o&&bi(f)&&bi(y)?this.m_intersector=kJe(e,s,r):bi(f)&&bi(y)?(this.m_intersector=DJe(e,s,r),this.m_bSwapElements=!1):bi(f)&&!bi(y)?(this.m_intersector=pte(e,s,r),this.m_bSwapElements=!1):!bi(f)&&bi(y)?(this.m_intersector=pte(s,e,r),this.m_bSwapElements=!0):(this.m_intersector=NJe(e,s,r),this.m_bSwapElements=!1))}nextPath_(){return this.m_bPaths?--this.m_pathIndex==-1?(this.m_bDone=!0,!1):(this.m_bSwapElements?this.m_multiVertexImplB.queryPathEnvelope(this.m_pathIndex,this.m_query):this.m_multiVertexImplA.queryPathEnvelope(this.m_pathIndex,this.m_query),this.m_qtIter.resetIterator(this.m_query,this.m_tolerance),this.m_function=this.iterate_,!0):this.m_segIter.nextPath()?(this.m_function=this.nextSegment_,!0):(this.m_bDone=!0,!1)}nextSegment_(){if(!this.m_segIter.hasNextSegment())return this.m_function=this.nextPath_,!0;const e=this.m_segIter.nextSegment(),i=new xe;return e.queryLooseEnvelope(i),!i.isIntersecting(this.m_envInter)||(this.m_qtIter.resetIterator(e,this.m_tolerance),this.m_function=this.iterate_,!0)}nextPoint_(){if(--this.m_pointIndex==-1)return this.m_bDone=!0,!1;const e=new Y;if(this.m_bSwapElements){const i=this.m_multiVertexImplB.getXY(this.m_pointIndex);e.setCoordsPoint2D(i)}else{const i=this.m_multiVertexImplA.getXY(this.m_pointIndex);e.setCoordsPoint2D(i)}return!this.m_envInter.contains(e)||(this.m_qtIter.resetIterator(xe.construct(e.x,e.y,e.x,e.y),this.m_tolerance),this.m_function=this.iterate_,!0)}iterate_(){return this.m_elementHandle=this.m_qtIter.next(),this.m_elementHandle===-1&&(bi(this.m_queryType)?(this.m_function=this.m_bPaths?this.nextPath_:this.nextSegment_,!0):(this.m_function=this.nextPoint_,!0))}}function NN(t){return t===2?1:t===1?2:t===128?64:t===64?128:t}function lit(t,e,i){let s;if(t instanceof qu||t===null){const n=xe.constructEmpty();n.setCoords({pt:e}),n.mergeEnvelope2D(i),s=Zg(t,n,!1)}else s=t;return s}function F1e(t,e,i){let s;if(t instanceof qu||t===null){const n=xe.constructEmpty();n.setCoords({env2D:e}),n.mergeEnvelope2D(i),s=Zg(t,n,!1)}else s=t;return s}function W0(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;Ku(t),Ku(e);let r=t.getGeometryType(),o=e.getGeometryType();if(r===me.enumEnvelope){if(o===me.enumEnvelope)return cit(t,e,i,s);if(o===me.enumPoint)return Nie(e,t,i,NN(s))}else if(r===me.enumPoint){if(o===me.enumEnvelope)return Nie(t,e,i,s);if(o===me.enumPoint)return uit(t,e,i,s)}const l=xe.constructEmpty();t.queryEnvelope(l);const u=xe.constructEmpty();e.queryEnvelope(u);const f=F1e(i,l,u);if(Df(l,u,f))return s===4;let y=!1,_=null,x=null,S=null,P=null;switch(Dn(r)?(_=new vi({vd:t.getDescription()}),_.addSegment(t,!0),S=_,r=me.enumPolyline):S=t,Dn(o)?(x=new vi({vd:e.getDescription()}),x.addSegment(e,!0),P=x,o=me.enumPolyline):P=e,r!==me.enumEnvelope&&o!==me.enumEnvelope?(S.getDimension()<P.getDimension()||r===me.enumPoint&&o===me.enumMultiPoint)&&(s=NN(s)):r!==me.enumPolygon&&o!==me.enumEnvelope&&(s=NN(s)),r){case me.enumPolygon:switch(o){case me.enumPolygon:y=hit(S,P,f,s,n);break;case me.enumPolyline:y=$ie(S,P,f,s,n);break;case me.enumPoint:y=Oie(S,P,f,s);break;case me.enumMultiPoint:y=Rie(S,P,f,s);break;case me.enumEnvelope:y=Lie(S,P,f,s,n)}break;case me.enumPolyline:switch(o){case me.enumPolygon:y=$ie(P,S,f,s,n);break;case me.enumPolyline:y=dit(S,P,f,s,n);break;case me.enumPoint:y=Fie(S,P,f,s);break;case me.enumMultiPoint:y=zie(S,P,f,s);break;case me.enumEnvelope:y=qie(S,P,f,s,n)}break;case me.enumPoint:switch(o){case me.enumPolygon:y=Oie(P,S,f,s);break;case me.enumPolyline:y=Fie(P,S,f,s);break;case me.enumMultiPoint:y=Vie(P,S,f,s)}break;case me.enumMultiPoint:switch(o){case me.enumPolygon:y=Rie(P,S,f,s);break;case me.enumPolyline:y=zie(P,S,f,s);break;case me.enumMultiPoint:y=fit(S,P,f,s);break;case me.enumPoint:y=Vie(S,P,f,s);break;case me.enumEnvelope:y=Gie(S,P,f,s)}break;case me.enumEnvelope:switch(o){case me.enumPolygon:y=Lie(P,S,f,s,n);break;case me.enumPolyline:y=qie(P,S,f,s,n);break;case me.enumMultiPoint:y=Gie(P,S,f,s)}}return y}function cit(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;const r=xe.constructEmpty();t.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o);const l=F1e(i,r,o);switch(s){case 4:return Df(r,o,l);case 2:return sT(o,r,l,!1);case 128:return sT(o,r,l,!0);case 1:return sT(r,o,l,!1);case 64:return sT(r,o,l,!0);case 3:return bm(r,o,l);case 8:return ost(r,o,l);case 32:return ast(r,o,l);case 16:return!1}return!1}function Nie(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;const r=t.getXY(),o=xe.constructEmpty();e.queryEnvelope(o);const l=lit(i,r,o);switch(s){case 4:return u7(r,o,l);case 2:case 128:return rst(r,o,l);case 1:case 64:return!1;case 3:return sst(r,o,l);case 8:return nst(r,o,l)}return!1}function uit(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;const r=t.getXY(),o=e.getXY();let l;if(i instanceof qu||i===null){const u=xe.constructEmpty();u.setCoords({pt:r}),u.merge(o),l=Zg(i,u,!1)}else l=i;switch(s){case 4:return ist(r,o,l);case 2:case 128:return Jie(o,r,l);case 1:case 64:return Jie(r,o,l);case 3:return j1e(r,o,l)}return!1}function Df(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),!t.isIntersecting(s)}function is(t,e,i,s=!1){const n=t.getGeometryType(),r=e.getGeometryType();if(tl(n)){const o=t.getImpl().getAccelerators();if(o!==null){const l=o.getRasterizedGeometry();K(l===null)}}if(tl(r)){const o=e.getImpl().getAccelerators();if(o!==null){const l=o.getRasterizedGeometry();K(l===null)}}return 0}function u7(t,e,i,s){const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(i,i),!n.contains(t)}function hit(t,e,i,s,n){switch(s){case 4:return pit(t,e,i);case 2:return jie(e,t,i,n);case 128:return Bie(e,t,i);case 1:return jie(t,e,i,n);case 64:return Bie(t,e,i);case 3:return z1e(t,e,i,n);case 8:return mit(t,e,i);case 32:return git(t,e,i,n)}return!1}function $ie(t,e,i,s,n){switch(s){case 4:return yit(t,e,i);case 1:return _it(t,e,i,n);case 64:return bit(t,e,i);case 8:return q1e(t,e,i,n);case 16:return vit(t,e,i)}return!1}function Oie(t,e,i,s,n){switch(s){case 4:return xit(t,e,i);case 1:case 64:return Sit(t,e,i);case 8:return wit(t,e,i)}return!1}function Rie(t,e,i,s,n){switch(s){case 4:return Eit(t,e,i);case 1:return Hie(t,e,i,!1);case 64:return Hie(t,e,i,!0);case 8:return Cit(t,e,i);case 16:return Pit(t,e,i)}return!1}function Lie(t,e,i,s,n){if(Iit(t,e,i))return s===4;if(s===4)return!1;switch(s){case 2:return Uie(t,e,i,!1);case 128:return Uie(t,e,i,!0);case 1:return Yie(t,e,i,!1,n);case 64:return Yie(t,e,i,!0,n);case 3:return Tit(t,e,i,n);case 8:return Mit(t,e,i,n);case 32:return Ait(t,e,i,n);case 16:return!1}return!1}function dit(t,e,i,s,n){switch(s){case 4:return kit(t,e,i);case 2:return Xie(e,t,i,n);case 128:return Wie(e,t,i,n);case 1:return Xie(t,e,i,n);case 64:return Wie(t,e,i,n);case 3:return Dit(t,e,i,n);case 8:return Nit(t,e,i,n);case 32:return Oit(t,e,i,n);case 16:return $it(t,e,i,n)}return!1}function Fie(t,e,i,s,n){switch(s){case 4:return Rit(t,e,i);case 1:case 64:return Fit(t,e,i);case 8:return Lit(t,e,i)}return!1}function zie(t,e,i,s,n){switch(s){case 4:return zit(t,e,i);case 1:case 64:return Git(t,e,i);case 8:return qit(t,e,i);case 16:return Vit(t,e,i)}return!1}function qie(t,e,i,s,n){if(Bit(t,e,i))return s===4;if(s===4)return!1;switch(s){case 2:return Zie(t,e,i,!1);case 128:return Zie(t,e,i,!0);case 1:case 64:case 32:return!1;case 3:return jit(t,e,i);case 8:return Hit(t,e,i,n);case 16:return Uit(t,e,i)}return!1}function fit(t,e,i,s,n){switch(s){case 4:return Xit(t,e,i);case 2:case 128:return Cv(e,t,i);case 1:case 64:return Cv(t,e,i);case 3:return Yit(t,e,i);case 32:return Wit(t,e,i)}return!1}function Vie(t,e,i,s,n){switch(s){case 4:return G1e(t,e,i);case 2:case 128:return Zit(t,e,i);case 1:case 64:return Kit(t,e,i);case 3:return V1e(t,e,i)}return!1}function Gie(t,e,i,s,n){switch(s){case 4:return Qit(t,e,i);case 2:return Kie(t,e,i,!1);case 128:return Kie(t,e,i,!0);case 1:case 64:return!1;case 3:return Jit(t,e,i);case 8:return est(t,e,i);case 16:return tst(t,e,i)}return!1}function z1e(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();if(t.queryEnvelope(n),e.queryEnvelope(r),!bm(n,r,i))return!1;if(is(t,e),H1e(t,e,i))return!0;const o=t.calculateLength2D(),l=e.calculateLength2D(),u=Math.max(t.getPointCount(),e.getPointCount());return Math.abs(o-l)>4*u*i?!1:t.hasNonLinearSegments()||e.hasNonLinearSegments()?Ju(t,e,i,"**F**FFF*",s,!1):U1e(t,e,i,!0)}function pit(t,e,i,s){return is(t,e,i,!0),p5(t,e,i,!0)===1}function mit(t,e,i,s){return is(t,e),K1e(t,e,i,null)}function git(t,e,i,s){return is(t,e),J1e(t,e,i,s)}function jie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!xr(n,r,i)&&(is(t,e),Q1e(t,e,i,s))}function Bie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!xr(n,r,i)&&(is(t,e),p5(t,e,i,!1)===2)}function yit(t,e,i,s){return is(t,e,i,!0),p5(t,e,i,!0)===1}function q1e(t,e,i,s){return is(t,e),hst(t,e,i,s)}function vit(t,e,i,s){return is(t,e),dst(t,e,i,null)}function _it(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!xr(n,r,i)&&(is(t,e),fst(t,e,i,s))}function bit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!xr(n,r,i)&&(is(t,e),p5(t,e,i,!1)===2)}function xit(t,e,i,s){return iye(t,e,i)===0}function wit(t,e,i,s){return mst(t,e.getXY(),i)}function Sit(t,e,i,s){return pst(t,e.getXY(),i)}function Eit(t,e,i,s,n){return is(t,e),lst(t,e,i)===1}function Cit(t,e,i,s){is(t,e);const n=xe.constructEmpty();t.queryEnvelope(n),n.inflateCoords(i,i);const r=new Y;let o=!1;const l=t.getImpl(),u=new Wt;let f=t,y=!1;for(let _=0;_<e.getPointCount();_++){if(e.queryXY(_,r),n.contains(r)){const x=Cl(f,r,i);if(x===2)o=!0;else if(x===1)return!1}y||(!Og(t,e.getPointCount()-1)||l.getAccelerators()!==null&&l.getAccelerators().getQuadTree()!==null?f=t:(t.copyTo(u),u.getImpl().buildQuadTreeAccelerator(1),f=u),y=!0)}return!!o}function Pit(t,e,i,s){is(t,e);const n=new xe,r=new xe,o=new xe;t.queryEnvelope(n),e.queryEnvelope(o),r.setCoords({env2D:n}),r.inflateCoords(i,i);let l=!1,u=!1;const f=new Y,y=t.getImpl(),_=new Wt;let x=t,S=!1;for(let P=0;P<e.getPointCount();P++){if(e.queryXY(P,f),r.contains(f)){const A=Cl(x,f,i);A===0?u=!0:A===1&&(l=!0)}else u=!0;if(l&&u)return!0;S||(!Og(t,e.getPointCount()-1)||y.getAccelerators()!==null&&y.getAccelerators().getQuadTree()!==null?x=t:(t.copyTo(_),_.getImpl().buildQuadTreeAccelerator(1),x=_),S=!0)}return!1}function Hie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!xr(r,o,i))return!1;is(t,e);let l=!1;const u=new Y,f=t.getImpl(),y=new Wt;let _=t,x=!1;for(let S=0;S<e.getPointCount();S++){if(e.queryXY(S,u),!r.contains(u))return!1;const P=Cl(_,u,i);if(P===1)l=!0;else if(P===0)return!1;if(s&&P===2)return!1;x||(!Og(t,e.getPointCount()-1)||f.getAccelerators()!==null&&f.getAccelerators().getQuadTree()!==null?_=t:(t.copyTo(y),y.getImpl().buildQuadTreeAccelerator(1),_=y),x=!0)}return l}function Tit(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),!bm(n,r,i))return!1;const o=new Wt;return o.addEnvelope(e,!1),z1e(t,o,i,s)}function Iit(t,e,i,s){is(t,e);const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),xr(r,n,i)?!1:Cl(t,r.getLowerLeft(),0)===0&&!r.contains(t.getXY(0))&&!Z1e(t,r,i)}function Mit(t,e,i,s){is(t,e);const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),xr(r,n,i)||r.height()<=i||r.width()<=i)return!1;const o=new Wt;return o.addEnvelope(e,!1),K1e(t,o,i,s)}function Ait(t,e,i,s){is(t,e);const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),xr(r,n,i)||r.height()<=i||r.width()<=i)return!1;const o=new Wt;return o.addEnvelope(e,!1),J1e(t,o,i,s)}function Uie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();return t.queryEnvelope(r),e.queryEnvelope(o),s?h7(o,r,i):xr(o,r,i)}function Yie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!xr(r,o,i))return!1;is(t,e);const l=new Wt;return l.addEnvelope(e,!1),s?p5(t,l,i,!1)===2:Q1e(t,l,i,n)}function Dit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),bm(n,r,i)?(is(t,e),H1e(t,e,i)?!0:t.hasNonLinearSegments()||e.hasNonLinearSegments()?Ju(t,e,i,"**F**FFF*",s,!1):U1e(t,e,i,!1)):!1}function kit(t,e,i,s){is(t,e);const n=t.getImpl(),r=e.getImpl();return!new sc(n,r,i,!0).next()||!Y1e(t,e,i)}function Nit(t,e,i,s){is(t,e);const n=[],r=Oj(t,e,i,n);if(r===-2){const f=xe.constructEmpty(),y=xe.constructEmpty(),_=xe.constructEmpty();let x,S;if(t.queryEnvelope(f),e.queryEnvelope(y),f.inflateCoords(1e3*i,1e3*i),y.inflateCoords(1e3*i,1e3*i),_.setCoords({env2D:f}),_.intersect(y),t.getPointCount()>10){if(x=vs(t,_,i,0,s),x.isEmpty())return!1}else x=t;if(e.getPointCount()>10){if(S=vs(e,_,i,0,s),S.isEmpty())return!1}else S=e;return Ju(x,S,i,"F********",s,!1)}if(r!==0)return!1;const o=new Jn;for(let f=0;f<n.length;f+=2){const y=n[f],_=n[f+1];o.addXY(y,_)}const l=t.getBoundary(),u=e.getBoundary();return l.addPoints(u,0,u.getPointCount()),!l.isEmpty()&&Cv(l,o,i)}function $it(t,e,i,s){is(t,e);const n=[],r=Oj(t,e,i,n);if(r===-2){const f=xe.constructEmpty(),y=xe.constructEmpty(),_=xe.constructEmpty();let x,S;if(t.queryEnvelope(f),e.queryEnvelope(y),f.inflateCoords(1e3*i,1e3*i),y.inflateCoords(1e3*i,1e3*i),_.setCoords({env2D:f}),_.intersect(y),t.getPointCount()>10){if(x=vs(t,_,i,0,s),x.isEmpty())return!1}else x=t;if(e.getPointCount()>10){if(S=vs(e,_,i,0,s),S.isEmpty())return!1}else S=e;return Ju(x,S,i,"0********",s,!1)}if(r!==0)return!1;const o=new Jn;for(let f=0;f<n.length;f+=2){const y=n[f],_=n[f+1];o.addXY(y,_)}const l=t.getBoundary(),u=e.getBoundary();return l.addPoints(u,0,u.getPointCount()),!!l.isEmpty()||!Cv(l,o,i)}function Oit(t,e,i,s){is(t,e);const n=xe.constructEmpty(),r=xe.constructEmpty();t.queryEnvelope(n),e.queryEnvelope(r);const o=KE(n,r,i),l=KE(r,n,i),u=t.hasNonLinearSegments(),f=e.hasNonLinearSegments(),y=Oj(t,e,i,null);if(y===-1)return!1;if(y===1){if(o&&l)return!0;if(!u&&!f)return o&&!l?!$y(e,t,i,!1):l&&!o?!$y(t,e,i,!1):!$y(t,e,i,!1)&&!$y(e,t,i,!1)}const _=xe.constructEmpty(),x=xe.constructEmpty(),S=xe.constructEmpty();let P,A;_.setCoords({env2D:n}),_.inflateCoords(1e3*i,1e3*i),x.setCoords({env2D:r}),x.inflateCoords(1e3*i,1e3*i),S.setCoords({env2D:_}),S.intersect(x);let k="";if(k+="1*",o){if(e.getPointCount()>10){if(A=vs(e,S,i,0,s),A.isEmpty())return!1}else A=e;k+="****"}else A=e,k+="T***";if(l){if(t.getPointCount()>10){if(P=vs(t,S,i,0,s),P.isEmpty())return!1}else P=t;k+="***"}else P=t,k+="T**";return Ju(P,A,i,k,s,!1)}function Xie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),xr(n,r,i)?(is(t,e),t.hasNonLinearSegments()||e.hasNonLinearSegments()?Ju(t,e,i,"******FF*",s,!1):$y(e,t,i,!1)):!1}function Wie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),xr(n,r,i)?(is(t,e),Ju(t,e,i,"T**FF*FF*",s,!1)):!1}function Rit(t,e,i,s){return is(t,e),!W1e(t,e.getXY(),i)}function Lit(t,e,i,s){return is(t,e),tye(t,e.getXY(),i)}function Fit(t,e,i,s){return is(t,e),ust(t,e.getXY(),i)}function zit(t,e,i,s){return is(t,e),!X1e(t,e,i,!1)}function qit(t,e,i,s){is(t,e);const n=t.getImpl(),r=e.getImpl(),o=new Jn,l=new sc(n,r,i,!1),u=n.querySegmentIterator();let f=!1;for(;l.next();){const _=l.getRedElement(),x=l.getBlueElement();u.resetToVertex(_,-1);const S=u.nextSegment(),P=r.getXY(x);S.isIntersectingPoint(P,i)&&(f=!0,o.addPoint2D(P))}if(!f)return!1;const y=t.getBoundary();return!y.isEmpty()&&Cv(y,o,i)}function Vit(t,e,i,s){is(t,e);const n=t.getImpl(),r=e.getImpl(),o=r.getPointCount(),l=Vi(o,!1),u=new sc(n,r,i,!1),f=n.querySegmentIterator();let y=!1;for(;u.next();){const P=u.getRedElement(),A=u.getBlueElement();f.resetToVertex(P,-1);const k=f.nextSegment(),$=r.getXY(A);k.isIntersectingPoint($,i)&&(y=!0,l[A]=!0)}if(!y)return!1;let _=!1;for(let P=0;P<o;P++)if(!l[P]){_=!0;break}if(!_)return!1;const x=t.getBoundary();if(x.isEmpty())return!0;const S=new Jn;for(let P=0;P<o;P++)l[P]&&S.addPoint2D(r.getXY(P));return!Cv(x,S,i)}function Git(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!xr(r,o,i))return!1;is(t,e);const l=X1e(t,e,i,!0);if(!l)return l;const u=t.getBoundary();return u.isEmpty()?l:!Cv(u,e,i)}function jit(t,e,i,s){const n=new xe,r=new xe;return t.queryEnvelope(n),e.queryEnvelope(r),!(r.height()>i&&r.width()>i)&&bm(n,r,i)}function Bit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();t.queryEnvelope(n),e.queryEnvelope(r);const o=gst(r,n,i);return o===0?!Z1e(t,r,i):o===4}function Hit(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),r.height()<=i||r.width()<=i)return!1;const o=new xe,l=new xe;if(o.setCoords({env2D:r}),l.setCoords({env2D:r}),o.inflateCoords(i,i),l.inflateCoords(-i,-i),l.containsEnvelope(n)||!n.isIntersecting(o))return!1;const u=t.getImpl().querySegmentIterator();u.stripAttributes();const f=t.getImpl().getAccelerators();let y=null,_=null;f!==null&&(y=f.getQuadTree(),y!==null&&(_=y.getIterator(r,i))),_||u.nextPath()||bt("relational_operations");let x=!1,S=null;const P=new Y,A=new Y,k=t.hasNonLinearSegments();let $=!1;for(;;){if(_!==null){const G=_.next();if(G===-1)break;u.resetToVertex(y.getElement(G),-1),S=u.nextSegment()}else{for(;!u.hasNextSegment()&&u.nextPath(););if(!u.hasNextSegment())break;S=u.nextSegment()}if(k&&S.getGeometryType()!==me.enumLine){const G=new xe;if(S.queryEnvelope(G),l.containsEnvelope(G))return!1;if(o.isIntersecting(G)){$=!0;break}}else{P.assign(S.getStartXY()),A.assign(S.getEndXY());let G=l.clipLine(P,A);if(G!==0)return!1;x||(G=o.clipLine(P,A),G!==0&&(x=!0))}}if(!$)return x;const F=new Wt;return F.addEnvelope(r,!1),q1e(F,t,i,s)}function Zie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),o.height()<=i||o.width()<=i)return!1;if(s)return h7(o,r,i);if(!xr(o,r,i))return!1;const l=xe.constructEmpty();l.setCoords({env2D:o}),l.inflateCoords(-i,-i);const u=xe.constructEmpty();if(u.setCoords({env2D:o}),u.inflateCoords(i,i),l.containsEnvelope(r))return!0;const f=t.getImpl().querySegmentIterator();f.stripAttributes(),f.nextPath()||bt("relational_operations");let y,_,x,S,P,A,k=!1;const $=t.hasNonLinearSegments();for($&&(x=new si,S=new si,P=new si,A=new si,l.querySide(0,x),l.querySide(1,S),l.querySide(2,P),l.querySide(3,A));;){for(;!f.hasNextSegment()&&f.nextPath(););if(!f.hasNextSegment())break;const F=f.nextSegment();if($&&F.getGeometryType()!==me.enumLine){if(F.isIntersecting(x,i)){k=!0;break}if(F.isIntersecting(S,i)){k=!0;break}if(F.isIntersecting(P,i)){k=!0;break}if(F.isIntersecting(A,i)){k=!0;break}}else if(y=F.getStartXY(),_=F.getEndXY(),l.clipLine(y,_)!==0){k=!0;break}}return k}function Uit(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),r.height()<=i||r.width()<=i)return!1;const o=new xe;if(o.setCoords({env2D:r}),o.inflateCoords(i,i),o.containsEnvelope(n))return!1;const l=!0,u=new xe;if(u.setCoords({env2D:r}),u.inflateCoords(-i,-i),!u.isIntersecting(n))return!1;const f=t.getImpl().querySegmentIterator();f.stripAttributes();const y=t.getImpl().getAccelerators();let _=null,x=null;if(y!==null&&(_=y.getQuadTree(),_!==null&&(x=_.getIterator(r,i))),!x){const B=f.nextPath();K(B)}let S=!1,P=null;const A=new Y,k=new Y;let $=null,F=null,G=null,V=null;for(t.hasNonLinearSegments()&&($=new si,F=new si,G=new si,V=new si,u.querySide(0,$),u.querySide(1,F),u.querySide(2,G),u.querySide(3,V));;){if(x!==null){const B=x.next();if(B===-1)break;f.resetToVertex(_.getElement(B),-1),P=f.nextSegment()}else{for(;!f.hasNextSegment()&&f.nextPath(););if(!f.hasNextSegment())break;P=f.nextSegment()}if(P.getGeometryType()===me.enumLine){if(A.assign(P.getStartXY()),k.assign(P.getEndXY()),u.clipLine(A,k)!==0){S=!0;break}}else{if($.isIntersecting(P,i)){S=!0;break}if(F.isIntersecting(P,i)){S=!0;break}if(G.isIntersecting(P,i)){S=!0;break}if(V.isIntersecting(P,i)){S=!0;break}}}return S&&l}function Yit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!bm(n,r,i)&&(!!cst(t,e,i)||$j(t,e,i,!1,!0,!1))}function Xit(t,e,i,s){const n=t,r=e,o=new sc(n,r,i,!1),l=i*i,u=new Y,f=new Y;for(;o.next();){const y=o.getRedElement(),_=o.getBlueElement();if(n.queryXY(y,u),r.queryXY(_,f),Y.sqrDistance(u,f)<=l)return!1}return!0}function Wit(t,e,i,s){return $j(t,e,i,!1,!1,!0)}function Cv(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!xr(n,r,i)&&$j(e,t,i,!0,!1,!1)}function V1e(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),bm(n,r,i)}function G1e(t,e,i,s){return eye(t,e.getXY(),i)}function Zit(t,e,i,s){return V1e(t,e,i)}function Kit(t,e,i,s){return!G1e(t,e,i)}function Jit(t,e,i,s){const n=new xe,r=new xe;return t.queryEnvelope(n),e.queryEnvelope(r),!(r.height()>i||r.width()>i)&&bm(n,r,i)}function Qit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();if(t.queryEnvelope(n),e.queryEnvelope(r),xr(r,n,i))return!1;const o=xe.constructEmpty();o.setCoords({env2D:r}),o.inflateCoords(i,i);const l=new Y;for(let u=0;u<t.getPointCount();u++)if(t.queryXY(u,l),o.contains(l))return!1;return!0}function est(t,e,i,s){const n=new xe,r=new xe,o=new xe;if(e.queryEnvelope(n),n.height()<=i||n.width()<=i)return!1;r.setCoords({env2D:n}),o.setCoords({env2D:n}),r.inflateCoords(i,i),o.inflateCoords(-i,-i);const l=new Y;let u=!1;for(let f=0;f<t.getPointCount();f++)if(t.queryXY(f,l),r.contains(l)){if(o.containsExclusive(l))return!1;u=!0}return u}function Kie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),o.height()<=i||o.width()<=i)return!1;if(s)return h7(o,r,i);if(!xr(o,r,i))return!1;let l=!1;const u=xe.constructEmpty(),f=xe.constructEmpty();u.setCoords({env2D:o}),f.setCoords({env2D:o}),u.inflateCoords(-i,-i),f.inflateCoords(i,i);const y=new Y;for(let _=0;_<t.getPointCount();_++){if(t.queryXY(_,y),!f.contains(y))return!1;u.containsExclusive(y)&&(l=!0)}return l}function tst(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),xr(r,n,i)||r.height()<=i||r.width()<=i)return!1;const o=new xe,l=new xe;o.setCoords({env2D:r}),o.inflateCoords(-i,-i),l.setCoords({env2D:r}),l.inflateCoords(i,i);const u=new Y;let f=!1,y=!1;for(let _=0;_<t.getPointCount();_++)if(t.queryXY(_,u),!f&&o.containsExclusive(u)&&(f=!0),y||l.contains(u)||(y=!0),f&&y)return!0;return!1}function j1e(t,e,i,s){return Y.sqrDistance(t,e)<=i*i}function ist(t,e,i,s){return Y.sqrDistance(t,e)>i*i}function Jie(t,e,i,s){return j1e(t,e,i)}function sst(t,e,i,s){const n=new xe;return n.setCoords({pt:t}),bm(n,e,i)}function nst(t,e,i,s){if(e.height()<=i||e.width()<=i)return!1;const n=new xe,r=new xe;return n.setCoords({env2D:e}),n.inflateCoords(i,i),!!n.contains(t)&&(r.setCoords({env2D:e}),r.inflateCoords(-i,-i),!r.containsExclusive(t))}function rst(t,e,i,s){if(e.height()<=i||e.width()<=i)return!1;const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(-i,-i),n.containsExclusive(t)}function bm(t,e,i,s){return xr(t,e,i)&&xr(e,t,i)}function ost(t,e,i,s){if(t.height()<=i||t.width()<=i||e.height()<=i||e.width()<=i)return!1;const n=new xe;return n.setCoords({env2D:t}),n.inflateCoords(-i,-i),n.intersect(e),!(!n.isEmpty()&&n.height()>i&&n.width()>i)&&(n.setCoords({env2D:t}),n.inflateCoords(i,i),n.intersect(e),!n.isEmpty())}function ast(t,e,i,s){if(t.height()<=i||t.width()<=i||e.height()<=i||e.width()<=i||xr(t,e,i)||xr(e,t,i))return!1;const n=new xe;return n.setCoords({env2D:t}),n.inflateCoords(-i,-i),n.intersect(e),!n.isEmpty()&&(n.height()>i||n.width()>i)}function sT(t,e,i,s,n){if(t.height()<=i||t.width()<=i)return!1;if(s)return h7(t,e,i);if(!xr(t,e,i))return!1;const r=xe.constructEmpty();return r.setCoords({env2D:t}),r.inflateCoords(-i,-i),r.intersect(e),!r.isEmpty()}function p5(t,e,i,s,n){const r=new Y,o=new Y,l=xe.constructEmpty(),u=xe.constructEmpty(),f=t.getImpl(),y=e.getImpl(),_=y.getGeometryType(),x=new sc(f,y,i,!0);if(!x.next())return 1;if(Y1e(t,e,i))return s?4:0;const S=new Wt;let P=t;const A=new Wt;let k=null;_===me.enumPolygon&&(k=e);const $=_===me.enumPolygon?Vi(f.getPathCount(),!1):[],F=Vi(y.getPathCount(),!1);let G=!1,V=!1,B=!1,W=!1,J=!1,re=!1;do{if(B&&J||W&&re||B&&W)break;const se=x.getRedElement(),oe=x.getBlueElement();if(!F[oe]&&(o.assign(e.getXY(e.getPathStart(oe))),l.setCoords({env2D:x.getRedEnvelope()}),l.inflateCoords(i,i),l.contains(o))){if(Cl(P,o,0)!==0){if(W=!0,s)return 4}else re=!0;F[oe]=!0}if(_===me.enumPolygon&&!$[se]&&(r.assign(t.getXY(t.getPathStart(se))),u.setCoords({env2D:x.getBlueEnvelope()}),u.inflateCoords(i,i),u.contains(r))){if(Cl(k,r,0)!==0){if(B=!0,s)return 4}else J=!0;$[se]=!0}if(G||(!Og(t,e.getPathCount()-1)||f.getAccelerators()!==null&&f.getAccelerators().getQuadTree()!==null?P=t:(t.copyTo(S),S.getImpl().buildQuadTreeAccelerator(1),P=S),G=!0),_===me.enumPolygon&&!V){const pe=e;!Og(pe,t.getPathCount()-1)||y.getAccelerators()!==null&&y.getAccelerators().getQuadTree()!==null?k=e:(pe.copyTo(A),A.getImpl().buildQuadTreeAccelerator(1),k=A),V=!0}}while(x.next());if(!B&&!W)return 1;if(!J||!re){if(_===me.enumPolygon){for(let se=0,oe=f.getPathCount();se<oe;se++)if(!$[se]){J=!0;break}}for(let se=0,oe=y.getPathCount();se<oe;se++)if(!F[se]){re=!0;break}}return B&&J||W&&re||B&&W?4:W?2:3}function lst(t,e,i,s,n){const r=xe.constructEmpty();t.queryEnvelope(r),r.inflateCoords(i,i);const o=new Y,l=t.getImpl(),u=new Wt;let f=t,y=!1,_=!1,x=!1;for(let S=0;S<e.getPointCount();S++){if(e.queryXY(S,o),r.contains(o)){const P=Cl(f,o,i);if(P===1)return _=!0,4;if(P===2)return 4;x=!0}else x=!0;y||(!Og(t,e.getPointCount()-1)||l.getAccelerators()!==null&&l.getAccelerators().getQuadTree()!=null?f=t:(t.copyTo(u),u.getImpl().buildQuadTreeAccelerator(1),f=u),y=!0)}return _?x?4:2:1}function B1e(t,e,i,s,n){s[0]=!1;const r=t.getImpl(),o=e.getImpl(),l=r.querySegmentIterator(),u=o.querySegmentIterator(),f=[0,0],y=[0,0],_=new sc(r,o,i);let x=!1;for(;_.next();){const S=_.getRedElement(),P=_.getBlueElement();l.resetToVertex(S,-1),u.resetToVertex(P,-1);const A=l.nextSegment(),k=u.nextSegment();let $=0;if(kx(A,k)?!x&&k.isIntersecting(A,i)&&(x=!0):$=k.intersect(A,null,y,f,i),$!==0&&(x=!0,$===1)){const F=f[0],G=y[0];if(F>0&&F<1&&G>0&&G<1)return s[0]=!0,!1}}if(!x){s[0]=!0;const S=xe.constructEmpty();t.queryEnvelope(S),S.inflateCoords(i,i);const P=new Wt;let A=t,k=!1;for(let W=0,J=e.getPathCount();W<J;W++)if(e.getPathSize(W)>0){const re=xe.constructEmpty();if(e.queryPathEnvelope(W,re),!S.isIntersecting(re))return!1;{const se=Y6(A,e.getXY(e.getPathStart(W)),0);if(K(se!==-1),se===0)return!1}k||(!Og(t,e.getPathCount()-1)||r.getAccelerators()!==null&&r.getAccelerators().getQuadTree()!==null?A=t:(t.copyTo(P),P.getImpl().buildQuadTreeAccelerator(1),A=P),k=!0)}if(t.getPathCount()===1||e.getGeometryType()===me.enumPolyline)return!0;const $=e,F=xe.constructEmpty();$.queryEnvelope(F),F.inflateCoords(i,i);const G=new Wt;let V=$,B=!1;for(let W=0,J=t.getPathCount();W<J;W++)if(t.getPathSize(W)>0){const re=xe.constructEmpty();if(t.queryPathEnvelope(W,re),F.isIntersecting(re)){const se=Y6(V,t.getXY(t.getPathStart(W)),0);if(K(se!==-1),se===1)return!1}B||(!Og($,t.getPathCount()-1)||o.getAccelerators()!==null&&o.getAccelerators().getQuadTree()!==null?V=$:($.copyTo(G),G.getImpl().buildQuadTreeAccelerator(1),V=G),B=!0)}return!0}return!1}function xr(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:t}),s.inflateCoords(i,i),s.containsEnvelope(e)}function h7(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),t.containsExclusiveEnvelope(s)}function KE(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),!s.contains(t.getLowerLeft())||!s.contains(t.getLowerRight())||!s.contains(t.getUpperLeft())||!s.contains(t.getUpperRight())}function H1e(t,e,i,s){if(t.getPathCount()!==e.getPathCount()||t.getPointCount()!==e.getPointCount())return!1;if(t.hasNonLinearSegments()||e.hasNonLinearSegments())return t.equals(e);const n=new Y,r=new Y;let o=!0;const l=i*i;for(let u=0;u<t.getPathCount();u++){if(t.getPathEnd(u)!==e.getPathEnd(u)){o=!1;break}for(let f=t.getPathStart(u);f<e.getPathEnd(u);f++)if(t.queryXY(f,n),e.queryXY(f,r),Y.sqrDistance(n,r)>l){o=!1;break}if(!o)break}return!!o}function cst(t,e,i,s){if(t.getPointCount()!==e.getPointCount())return!1;const n=new Y,r=new Y;let o=!0;const l=i*i;for(let u=0;u<t.getPointCount();u++)if(t.queryXY(u,n),e.queryXY(u,r),Y.sqrDistance(n,r)>l){o=!1;break}return!!o}function $j(t,e,i,s,n,r,o){const l=t.getImpl(),u=e.getImpl(),f=l.getPointCount(),y=u.getPointCount(),_=Vi(f,!1),x=n||r?Vi(y,!1):[],S=i*i,P=new sc(l,u,i);for(;P.next();){const G=P.getRedElement(),V=P.getBlueElement(),B=l.getXY(G),W=u.getXY(V);Y.sqrDistance(B,W)<=S&&(_[G]=!0,(n||r)&&(x[V]=!0))}let A=!1,k=!1;for(let G=0;G<f;G++){const V=_[G];if(A||(A=!V),k||(k=V),(n||s)&&A)return!1}if(s)return!0;let $=!1,F=!1;for(let G=0;G<y;G++){const V=x[G];if($||($=!V),F||(F=V),n&&$)return!1}return!!n||A&&k&&$&&F}function U1e(t,e,i,s){return $y(t,e,i,s)&&$y(e,t,i,s)}function $y(t,e,i,s){if(q2(t),q2(e),e.isEmpty())return!1;let n=!0;const r=Vi(2,Number.NaN),o=Vi(2,Number.NaN),l=[],u=new vst;let f;const y=xe.constructEmpty(),_=xe.constructEmpty(),x=xe.constructEmpty();t.queryEnvelope(y),e.queryEnvelope(_),y.inflateCoords(i,i),_.inflateCoords(i,i),x.setCoords({env2D:y}),x.intersect(_);const S=t.getImpl().querySegmentIterator(),P=e.getImpl().querySegmentIterator(),A=e.getImpl().getAccelerators();let k=null,$=null,F=null,G=null;if(A!==null&&(k=A.getQuadTree(),$=A.getQuadTreeForPaths(),$!==null&&(G=$.getIteratorForQT())),k===null){const V=t.getPointCount(),B=e.getPointCount();V>10&&B>10&&(k=V2(e.getImpl(),x))}for(k!==null&&(F=k.getIteratorForQT());S.nextPath();)for(;S.hasNextSegment();){let V=S.nextSegment();if(V.queryEnvelope(y),!y.isIntersecting(x))return n=!1,!1;if(G!==null&&(G.resetIterator(y,i),G.next()===-1))continue;let B=0,W=null;if(F!=null)F.resetIterator(V,i);else if(P.resetToFirstPath(),!P.nextPath())return n=!1,!1;do if(B=0,F!==null){const ne=F.next();if(ne===-1)return n=!1,!1;P.resetToVertex(k.getElement(ne),-1),W=P.nextSegment(),B=V.intersect(W,null,r,o,i)}else{for(;!P.hasNextSegment();)if(!P.nextPath())return n=!1,!1;W=P.nextSegment(),W.queryEnvelope(_),_.inflateCoords(i,i),y.isIntersecting(_)&&(B=V.intersect(W,null,r,o,i))}while(B!==2||r[0]!==0||s&&!(o[0]<=o[1]));let J=Number.NaN,re=!1;do{let ne=!1;if(r[1]===1){if(!S.hasNextSegment()){re=!0;break}V=S.nextSegment(),ne=!0}if(o[1]===1&&o[0]<=o[1]){if(J===-1||(J=1,!P.hasNextSegment()))break;W=P.nextSegment(),ne=!0}if(o[1]===0&&o[0]>o[1]){if(J===1)break;if(Number.isNaN(J)){if(!P.hasPreviousSegment())break;P.previousSegment(),J=-1}if(!P.hasPreviousSegment())break;W=P.previousSegment(),ne=!0}if(!ne)break;B=V.intersect(W,null,r,o,i)}while(B===2&&(!s||o[0]<=o[1]));if(re)continue;const se=V.calculateLength2D();V.queryEnvelope(y),l.length=0,u.m_overlapEvents.length=0;let oe=!1,pe=!1,ce=0;const ue=Zg(null,y,!0);for(F!==null?F.resetIterator(V,i):(P.resetToFirstPath(),P.nextPath()||bt("relational_operations"));;){if(B=0,F!==null){const ne=F.next();if(ne===-1)break;P.resetToVertex(k.getElement(ne),-1),W=P.nextSegment(),B=V.intersect(W,null,r,o,i)}else{for(;!P.hasNextSegment()&&P.nextPath(););if(!P.hasNextSegment())break;W=P.nextSegment(),W.queryEnvelope(_),_.inflateCoords(i,i),y.isIntersecting(_)&&(B=V.intersect(W,null,r,o,i))}if(B===2&&(!s||o[0]<=o[1])){const ne=S.getStartPointIndex(),de=S.getPathIndex(),Se=P.getStartPointIndex(),Pe=P.getPathIndex();if(f=yst(ne,de,r[0],r[1],Se,Pe,o[0],o[1]),u.m_overlapEvents.push(f),l.push(l.length),!(oe||f.m_scalarA0<ce&&f.m_scalarA1<ce)){if(ce===0&&se*(f.m_scalarA0-ce)>i)oe=!0;else if(ce!==0&&se*(f.m_scalarA0-ce)>ue)oe=!0;else if(ce=f.m_scalarA1,se*(1-ce)<=i||ce===1){pe=!0;break}}}}if(!pe){if(!oe)return n=!1,!1;l.length>1&&l.sort((ne,de)=>u.compareOverlapEvents(ne,de)),ce=0;for(let ne=0;ne<u.m_overlapEvents.length;ne++)if(f=u.m_overlapEvents[l[ne]],!(f.m_scalarA0<ce&&f.m_scalarA1<ce)){if(ce===0&&se*(f.m_scalarA0-ce)>i||ce!==0&&se*(f.m_scalarA0-ce)>ue)return n=!1,!1;if(ce=f.m_scalarA1,se*(1-ce)<=i||ce===1)break}if(se*(1-ce)>i)return n=!1,!1;l.length=0,u.m_overlapEvents.length=0}}return n}function Y1e(t,e,i){const s=t.getImpl(),n=e.getImpl(),r=s.querySegmentIterator(),o=n.querySegmentIterator(),l=new sc(s,n,i);for(;l.next();){const u=l.getRedElement(),f=l.getBlueElement();r.resetToVertex(u,-1),o.resetToVertex(f,-1);const y=r.nextSegment();if(o.nextSegment().isIntersecting(y,i))return!0}return!1}function Oj(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=n.querySegmentIterator(),l=r.querySegmentIterator(),u=Vi(2,Number.NaN),f=new sc(n,r,i);let y=!1,_=-1;for(;f.next();){const x=f.getRedElement(),S=f.getBlueElement();o.resetToVertex(x,-1),l.resetToVertex(S,-1);const P=o.nextSegment(),A=l.nextSegment();let k=0;if(kx(P,A)){if(A.isIntersecting(P,i))return-2}else k=P.intersect(A,null,u,null,i);if(k){if(k===2){const $=P.calculateLength2D(),F=u[0];if($*(u[1]-F)>i)return _=1,_;y=!0}else if(_=0,s){const $=u[0],F=new Y;P.queryCoord2D($,F),s.push(F.x),s.push(F.y)}}}return y?-2:_}function X1e(t,e,i,s){const n=t.getImpl(),r=e,o=r.getPointCount(),l=s?Vi(o,!1):[],u=new sc(n,r,i,!1),f=n.querySegmentIterator();for(;u.next();){const y=u.getRedElement(),_=u.getBlueElement();f.resetToVertex(y,-1);const x=f.nextSegment(),S=r.getXY(_);if(x.isIntersectingPoint(S,i)){if(!s)return!0;l[_]=!0}}if(!s)return!1;for(let y=0;y<o;y++)if(!l[y])return!1;return!0}function W1e(t,e,i){const s=new Y,n=i*i,r=t.querySegmentIterator(),o=t.getImpl().getAccelerators();if(o!==null){const u=o.getQuadTree();if(u!==null){const f=xe.constructEmpty();f.setCoords({pt:e});const y=u.getIterator(f,i);for(let _=y.next();_!==-1;_=y.next())if(r.resetToVertex(u.getElement(_),-1),r.hasNextSegment()){const x=r.nextSegment(),S=x.getClosestCoordinate(e,!1);if(x.queryCoord2D(S,s),Y.sqrDistance(e,s)<=n)return!0}return!1}}const l=xe.constructEmpty();for(;r.nextPath();)for(;r.hasNextSegment();){const u=r.nextSegment();if(u.queryEnvelope(l),l.inflateCoords(i,i),!l.contains(e))continue;const f=u.getClosestCoordinate(e,!1);if(u.queryCoord2D(f,s),Y.sqrDistance(e,s)<=n)return!0}return!1}function ust(t,e,i){return W1e(t,e,i)&&!tye(t,e,i)}function Z1e(t,e,i,s){const n=t.querySegmentIterator(),r=t.getImpl().getAccelerators(),o=t.hasNonLinearSegments();let l=null,u=null,f=null,y=null;if(r!==null){const _=r.getQuadTree();if(_!==null){const x=_.getIterator(e,i);o&&(l=new si,u=new si,f=new si,y=new si,e.querySide(0,l),e.querySide(1,u),e.querySide(2,f),e.querySide(3,y));const S=xe.constructEmpty();S.setCoords({env2D:e}),S.inflateCoords(i,i);for(let P=x.next();P!==-1;P=x.next())if(n.resetToVertex(_.getElement(P),-1),n.hasNextSegment()){const A=n.nextSegment();if(A.getGeometryType()===me.enumLine){const k=A.getStartXY(),$=A.getEndXY();if(S.clipLine(k,$))return!0;continue}if(e.contains(A.getStartXY())||e.contains(A.getEndXY())||A.isIntersecting(l,i)||A.isIntersecting(u,i)||A.isIntersecting(f,i)||A.isIntersecting(y,i))return!0}return!1}}if(o){l=new si,u=new si,f=new si,y=new si,e.querySide(0,l),e.querySide(1,u),e.querySide(2,f),e.querySide(3,y);const _=t.querySegmentIterator();for(;_.nextPath();)for(;_.hasNextSegment();){const x=_.nextSegment();if(e.contains(x.getStartXY())||e.contains(x.getEndXY())||x.isIntersecting(l,i)||x.isIntersecting(u,i)||x.isIntersecting(f,i)||x.isIntersecting(y,i))return!0}}else{const _=xe.constructEmpty();_.setCoords({env2D:e}),_.inflateCoords(i,i);const x=t.getImpl(),S=x.getAttributeStreamRef(0),P=new Y;for(let A=0,k=x.getPathCount();A<k;A++){let $=!0;const F=new Y,G=new Y,V=new Y,B=x.getPathStart(A),W=new Y;for(let J=B,re=x.getPathEnd(A);J<re;J++)if($)S.queryPoint2D(2*J,F),W.assign(F),$=!1;else{if(S.queryPoint2D(2*J,P),G.setCoordsPoint2D(F),V.setCoordsPoint2D(P),_.clipLine(G,V))return!0;F.assign(P)}if(x.isClosedPath(A)&&!$&&(G.setCoordsPoint2D(F),V.setCoordsPoint2D(W),_.clipLine(G,V)))return!0}}return!1}function K1e(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=[0],l=wf(n.getIsSimple(0,o))&&wf(r.getIsSimple(0,o)),u=n.querySegmentIterator(),f=r.querySegmentIterator(),y=Vi(2,0),_=Vi(2,0),x=new sc(n,r,i);let S=!1;for(;x.next();){const G=x.getRedElement(),V=x.getBlueElement();u.resetToVertex(G,-1),f.resetToVertex(V,-1);const B=u.nextSegment(),W=f.nextSegment();let J=0;if(kx(B,W)){if(W.isIntersecting(B,i)){S=!0;break}}else J=W.intersect(B,null,_,y,i);if(J===2){const re=y[0],se=y[1],oe=B.calculateLength2D();if(l&&(se-re)*oe>i)return!1;S=!0}else if(J){const re=y[0],se=_[0];if(re>0&&re<1&&se>0&&se<1)return!1;S=!0}}if(!S)return!1;const P=xe.constructEmpty(),A=xe.constructEmpty(),k=xe.constructEmpty();let $,F;if(t.queryEnvelope(P),e.queryEnvelope(A),P.inflateCoords(1e3*i,1e3*i),A.inflateCoords(1e3*i,1e3*i),k.setCoords({env2D:P}),k.intersect(A),t.getPointCount()>10){if($=vs(t,k,i,0,s),$.isEmpty())return!1}else $=t;if(e.getPointCount()>10){if(F=vs(e,k,i,0,s),F.isEmpty())return!1}else F=e;return Ju($,F,i,"F********",s,!1)}function J1e(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=[0],l=wf(n.getIsSimple(0,o))&&wf(r.getIsSimple(0,o)),u=xe.constructEmpty(),f=xe.constructEmpty(),y=xe.constructEmpty();t.queryEnvelope(u),e.queryEnvelope(f);let _=!1;const x=KE(u,f,i),S=KE(f,u,i),P=n.querySegmentIterator(),A=r.querySegmentIterator(),k=Vi(2,Number.NaN),$=Vi(2,Number.NaN),F=new sc(n,r,i);for(;F.next();){const re=F.getRedElement(),se=F.getBlueElement();P.resetToVertex(re,-1),A.resetToVertex(se,-1);const oe=P.nextSegment(),pe=A.nextSegment();let ce=0;if(kx(oe,pe)){if(pe.isIntersecting(oe,i))break}else ce=pe.intersect(oe,null,$,k,i);if(ce===2){const ue=k[0],ne=k[1],de=oe.calculateLength2D();if(l&&(ne-ue)*de>i&&(_=!0,x&&S))return!0}else if(ce){const ue=k[0],ne=$[0];if(ue>0&&ue<1&&ne>0&&ne<1)return!0}}const G=xe.constructEmpty(),V=xe.constructEmpty();let B,W;G.setCoords({env2D:u}),G.inflateCoords(1e3*i,1e3*i),V.setCoords({env2D:f}),V.inflateCoords(1e3*i,1e3*i),y.setCoords({env2D:G}),y.intersect(V);let J="";if(J+=_?"**":"T*",x){if(e.getPointCount()>10){if(W=vs(e,y,i,0,s),W.isEmpty())return!1}else W=e;J+="****"}else W=e,J+="T***";if(S){if(t.getPointCount()>10){if(B=vs(t,y,i,0,s),B.isEmpty())return!1}else B=t;J+="***"}else B=t,J+="T**";return Ju(B,W,i,J,s,!1)}function Q1e(t,e,i,s){const n=[!1],r=B1e(t,e,i,n);if(n[0])return r;const o=xe.constructEmpty();let l;if(e.queryEnvelope(o),o.inflateCoords(1e3*i,1e3*i),t.getPointCount()>10){if(l=vs(t,o,i,0,s),l.isEmpty())return!1}else l=t;return Htt(l,e,i,s)}function hst(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=n.querySegmentIterator(),l=r.querySegmentIterator(),u=Vi(2,Number.NaN),f=Vi(2,Number.NaN),y=new sc(n,r,i);let _=!1;for(;y.next();){const $=y.getRedElement(),F=y.getBlueElement();o.resetToVertex($,-1),l.resetToVertex(F,-1);const G=o.nextSegment(),V=l.nextSegment();let B=0;if(kx(G,V)?!_&&V.isIntersecting(G,i)&&(_=!0):B=V.intersect(G,null,f,u,i),B===2)_=!0;else if(B){const W=u[0],J=f[0];if(W>0&&W<1&&J>0&&J<1)return!1;_=!0}}if(!_)return!1;const x=xe.constructEmpty(),S=xe.constructEmpty(),P=xe.constructEmpty();let A,k;if(t.queryEnvelope(x),e.queryEnvelope(S),x.inflateCoords(1e3*i,1e3*i),S.inflateCoords(1e3*i,1e3*i),P.setCoords({env2D:x}),P.intersect(S),t.getPointCount()>10){if(A=vs(t,P,i,0,s),A.isEmpty())return!1}else A=t;if(e.getPointCount()>10){if(k=vs(e,P,i,0,s),k.isEmpty())return!1}else k=e;return Ju(A,k,i,"F********",s,!1)}function dst(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=n.querySegmentIterator(),l=r.querySegmentIterator(),u=Vi(2,Number.NaN),f=Vi(2,Number.NaN),y=new sc(n,r,i);let _=!1;for(;y.next();){const $=y.getRedElement(),F=y.getBlueElement();o.resetToVertex($,-1),l.resetToVertex(F,-1);const G=o.nextSegment(),V=l.nextSegment();let B=0;if(kx(G,V)?!_&&V.isIntersecting(G,i)&&(_=!0):B=V.intersect(G,null,f,u,i),B===2)_=!0;else if(B){const W=u[0],J=f[0];if(W>0&&W<1&&J>0&&J<1)return!0;_=!0}}if(!_)return!1;const x=xe.constructEmpty(),S=xe.constructEmpty(),P=xe.constructEmpty(),A=xe.constructEmpty(),k=xe.constructEmpty();if(t.queryEnvelope(x),e.queryEnvelope(S),KE(S,x,i)){let $,F;if(P.setCoords({env2D:x}),P.inflateCoords(1e3*i,1e3*i),A.setCoords({env2D:S}),A.inflateCoords(1e3*i,1e3*i),k.setCoords({env2D:P}),k.intersect(A),t.getPointCount()>10){if($=vs(t,k,i,0,s),$.isEmpty())return!1}else $=t;if(e.getPointCount()>10){if(F=vs(e,k,i,0,s),F.isEmpty())return!1}else F=e;return Ju($,F,i,"T********",s,!1)}return Ju(t,e,i,"T*****T**",s,!1)}function fst(t,e,i,s){const n=[!1],r=B1e(t,e,i,n);if(n[0])return r;const o=xe.constructEmpty();let l;if(e.queryEnvelope(o),o.inflateCoords(1e3*i,1e3*i),t.getPointCount()>10){if(l=vs(t,o,i,0,s),l.isEmpty())return!1}else l=t;return Utt(l,e,i,s)}function pst(t,e,i,s){return Cl(t,e,i)===1}function mst(t,e,i,s){return Cl(t,e,i)===2}function eye(t,e,i,s){const n=new Y,r=i*i;for(let o=0;o<t.getPointCount();o++)if(t.queryXY(o,n),Y.sqrDistance(n,e)<=r)return!1;return!0}function tye(t,e,i){const s=t.getBoundary();return!s.isEmpty()&&!eye(s,e,i)}function gst(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:t}),s.inflateCoords(i,i),s.containsEnvelope(e)?1073741824:s.isIntersecting(e)?t.isIntersecting(e)?t.xmin<e.xmin&&e.xmax<t.xmax?e.ymin<t.ymin&&e.ymax>t.ymax?0:1073741824:t.ymin<e.ymin&&e.ymax<t.ymax?e.xmin<t.xmin&&e.xmax>t.xmax?0:1073741824:0:0:4}function kx(t,e){return t.getGeometryType()!==me.enumLine||e.getGeometryType()!==me.enumLine}function yst(t,e,i,s,n,r,o,l){return{m_ivertexA:t,m_ipathA:e,m_scalarA0:i,m_scalarA1:s,m_ivertexB:n,m_ipathB:r,m_scalarB0:o,m_scalarB1:l}}class vst{constructor(){this.m_overlapEvents=[]}compareOverlapEvents(e,i){const s=this.m_overlapEvents[e],n=this.m_overlapEvents[i];return s.m_ipathA<n.m_ipathA||s.m_ipathA===n.m_ipathA&&(s.m_ivertexA<n.m_ivertexA||s.m_ivertexA===n.m_ivertexA&&(s.m_scalarA0<n.m_scalarA0||s.m_scalarA0===n.m_scalarA0&&(s.m_scalarA1<n.m_scalarA1||s.m_scalarA1===n.m_scalarA1&&s.m_ivertexB<n.m_ivertexB)))?-1:1}}function iye(t,e,i){const s=ztt(t,e,i);return s?s===1?1:2:0}function Cl(t,e,i){const s=Y6(t,e,i);return s?s===1?1:2:0}function _st(t,e,i,s,n){for(let r=0;r<i;r++)n[r]=Cl(t,e[r],s)}function sye(t,e,i,s,n){if(t.getGeometryType()===me.enumPolygon)_st(t,e,i,s,n);else if(t.getGeometryType()===me.enumEnvelope){const r=xe.constructEmpty();t.queryEnvelope(r),bst(r,e,i,s,n)}else bn("")}function nye(t,e,i,s,n){const r=t.getGeometryType();r===me.enumPolyline?Sst(t,e,i,s,n):Dn(r)?wst():bn("")}function bst(t,e,i,s,n){if(t.isEmpty()){for(let l=0;l<i;l++)n[l]=0;return}const r=t.clone();r.inflateCoords(.5*-s,.5*-s);const o=t.clone();o.inflateCoords(.5*s,.5*s);for(let l=0;l<i;l++)r.contains(e[l])?n[l]=1:o.contains(e[l])?n[l]=2:n[l]=0}function xst(t,e,i){if(i.reset(),e<3)return;const s=t[0].clone(),n=s.x,r=s.y,o=t[1].clone(),l=new Y;for(let u=2;u<e;u++)l.assign(t[u]),i.pe((l.x-s.x)*(o.y-r)),s.assign(o),o.assign(l);i.pe((n-s.x)*(o.y-r))}function wst(t,e,i,s,n){K(0)}function Sst(t,e,i,s,n){const r=t.getImpl(),o=r.getAccelerators();let l=null;o&&(l=o.getRasterizedGeometry());let u=i;for(let f=0;f<i;f++)n[f]=1,l&&K(0);if(u){if(o){let y=null;o!==null&&o.getQuadTree()!==null&&(y=o.getQuadTree());const _=r.getPointCount();if(y===null&&_>20&&_*i>4*_+Math.log(_)*i&&(y=V2(r)),y){let x=null;const S=r.querySegmentIterator(),P=new xe;for(let A=0;A<i&&u;A++)if(n[A]===1){P.setCoords(e[A]),x===null?x=y.getIterator(P,s):x.resetIterator(P,s);let k=-1;for(let $=x.next();$!==-1;$=x.next()){if(S.resetToVertex(y.getElement($),k),k=S.getPathIndex(),S.nextSegment().isIntersectingPoint(e[A],s)){n[A]=2,u--;break}n[A]=0}}return}}const f=r.querySegmentIterator();for(;f.nextPath()&&u;)for(;f.hasNextSegment()&&u;){const y=f.nextSegment();for(let _=0;_<i&&u;_++)n[_]===1&&y.isIntersectingPoint(e[_],s)&&(n[_]=2,u--)}}for(let f=0;f<i;f++)n[f]===1&&(n[f]=0)}function Est(t,e,i,s,n){const r=rf(e),o=Math.max(4*r,i);return new W6(e,null,o,Number.NaN,n).approximateWithCirclesImpl(t,s)}function Cst(){return Number.isNaN(this.radius.value())}function Pst(){return{ptStart:new Y,ptEnd:new Y,center:new Ht,radius:new Be,fcenter:new ys,fradius2:new _t,maxError:Number.NaN,isLine:Cst}}const Tst=5,Ist=1/8;function a3(t,e,i,s){return{pt:t.clone(),t:e,err:i,checkCount:s}}class W6{constructor(e,i,s,n,r){this.m_left=e,this.m_tracker=r,this.m_eps=s,this.m_trackerCounter=0,this.m_tolerance=n,this.m_circleCheckCounter=0,this.m_bReversedLeft=!1,this.m_leftArc=Pst()}closeToCircularArc(e,i,s,n,r,o){if(this.m_circleCheckCounter++,o.maxError=0,!W6.checkSweepAngle(e,i))return!1;if(o.ptStart.setCoordsPoint2D(s),o.ptEnd.setCoordsPoint2D(r),e.isCircular()){const B=e;return o.fradius2=_t.constructDouble(B.getSemiMajorAxis()).mulDouble(B.getSemiMajorAxis()),o.radius.set(B.getSemiMajorAxis()),o.fcenter.assignPoint2D(B.getCenter()),o.center.set(B.getCenter()),!0}const l=o.ptEnd.sub(o.ptStart).clone();if(l.leftPerpendicularThis(),l.normalize(),Math.abs(l.dotProduct(n.sub(o.ptStart)))<=this.m_eps)return!!this.confirmIsLine(o,l)&&(o.radius.set(Number.NaN),o.center.setCoords(0,0),!0);{const B=o.ptEnd.sub(o.ptStart),W=n.sub(o.ptStart),J=B.crossProduct(W);if(J===0)return!1;const re=.5*B.sqrLength(),se=.5*W.sqrLength();let oe=re*W.y-se*B.y;oe/=J;let pe=B.x*se-W.x*re;pe/=J;const ce=Math.sqrt(oe*oe+pe*pe);if(4*Number.EPSILON*ce>this.m_eps)return!1;const ue=oe+o.ptStart.x,ne=pe+o.ptStart.y;o.radius.set(ce),o.center.setCoords(ue,ne);const de=this.maxCircleApproximationError(e,i,o);if(de>this.m_eps)return o.maxError=de,!1}const u=new ys().assignPoint2D(o.ptStart),f=new ys().assignPoint2D(o.ptEnd).sub(u),y=new ys().assignPoint2D(n).sub(u),_=f.crossProduct(y);if(_.isZero())return!1;const x=f.sqrLength().mulDouble(.5),S=y.sqrLength().mulDouble(.5),P=x.mul(y.y).sub(S.mul(f.y)),A=f.x.mul(S).sub(y.x.mul(x)),k=P.mul(P).add(A.mul(A)),$=_.clone();$.invertThis(),o.fradius2=k.mul($).mul($),o.fcenter.setCoords(P.mul($).add(u.x),A.mul($).add(u.y)),o.center.setWithEps(o.fcenter.asPoint2D()),o.radius.setWithEps(Math.sqrt(o.fradius2.toDouble()));const F=Ht.constructPoint2D(o.ptStart).subE(o.center),G=Ht.constructPoint2D(o.ptEnd).subE(o.center);if(!F.dotProduct(G).gt(Mx))return!1;const V=this.maxCircleApproximationError(e,i,o);return o.maxError=V,V<=this.m_eps}static checkSweepAngle(e,i){if(e.getGeometryType()===me.enumEllipticArc){const s=e,n=Xd(s,i.vmin),r=Xd(s,i.vmax);return!(Math.abs(r-n)>.5*Ss)}return!0}confirmIsLine(e,i){return K(0),!1}maxCircleApproximationError(e,i,s){const n=[.25,.75],r=[.1,.25,.75,.9];let o,l;e.getGeometryType()===me.enumEllipticArc?(o=n,l=n.length):(o=r,l=r.length);let u=0;for(let f=0;f<l;++f){const y=new Y;e.queryCoord2D(ji(i.vmin,i.vmax,o[f]),y);const _=y.sub(s.center.value()).length(),x=Math.abs(_-s.radius.value());x>u&&(u=x)}return u}approximateWithCirclesImpl(e,i){let s=1;i&&i.push(0);const n=Vi(9,Number.NaN);let r;e?r=this.m_left.getMonotonicPartParams(n.length,n):(n[0]=0,n[1]=1,r=2);const o=[],l=[],u=new Y(0,0);for(let f=1;f<r;f++){const y=new Ze(n[f-1],n[f]);for(this.m_bReversedLeft=!W6.goodOrientation(this.m_left,y),this.m_bReversedLeft?(o.push(a3(u,y.vmin,0,0)),o.push(a3(u,y.vmax,0,0))):(o.push(a3(u,y.vmax,0,0)),o.push(a3(u,y.vmin,0,0))),o[0].pt=this.m_left.getCoord2D(o[0].t),o[1].pt=this.m_left.getCoord2D(o[1].t);o.length>1;){this.progress_();const _=o.at(-1);let x=_.checkCount,S=_.err;const P=_.pt.clone(),A=_.t,k=o[o.length-2].t,$=.5*(A+k),F=this.m_left.getCoord2D($);if(S<=this.m_eps||x>=Tst){const G=new Ze;if(G.setCoords(A,k),this.closeToCircularArc(this.m_left,G,P,F,o[o.length-2].pt,this.m_leftArc)){i&&(this.m_bReversedLeft?l.push(A):i.push(k)),s++,o.pop();continue}x=0,S=this.m_leftArc.maxError}_.t=$,_.pt.setCoordsPoint2D(F),S*=Ist,x++,_.err=S,_.checkCount=x,o.push(a3(P,A,S,x))}this.m_bReversedLeft&&i&&(i.length=i.length+l.length,dn(i,l.reverse(),i.length-l.length,0,l.length),l.length=0),o.length=0}return s}approximateWithCirclesImplPolyline(e){return K(0),{}}static goodOrientation(e,i){const s=e.getCoord2D(i.vmin),n=e.getCoord2D(i.vmax);return s.compare(n)<0}progress_(e=!1){}}function Vh(t,e,i,s,n,r,o){Mst(t,e,i,n,r,o)}function Mst(t,e,i,s,n,r){t.hasCurves()?(t.setCurveStitcherPointer(s),s.m_impl=new Z0(r,!1,null),s.m_impl.buildMonotonicCurveParentage(t,e,i,n)):s.m_impl=null}function Ast(t,e,i,s,n,r,o,l){t.hasCurves()?(t.setCurveStitcherPointer(r),r.m_impl=new Z0(l,!0,n),r.m_impl.buildMonotonicCurveParentage(t,e,i,o),Ost(t,i,l)):r.m_impl=null}function Dst(t){if(!t.hasSegmentParentage())return;const e=new Ns(0),i=t.queryVertexIteratorOnSelection();for(let o=i.next();o!==ae;o=i.next())e.add(o);if(e.size()===0)return;t.sortVerticesSimpleByY(e,0,e.size()),e.add(ae);const s=Y.getNAN();t.queryXY(e.read(0),s);let n=0;const r=Y.getNAN();for(let o=1,l=e.size();o<l;o++){{const u=e.read(o);u!==ae?t.queryXY(u,r):r.setNAN()}if(!r.isEqualPoint2D(s)){let u=!1,f=-2;for(let y=n;y<o;++y){const _=e.read(y);if(t.getSegmentParentageBreakVertex(_)){u=!0;break}let x=t.getSegmentParentage(_);const S=t.getPrevVertex(_);if(S!==ae){let P=t.getSegmentParentage(S);if(x===-1&&(x=P),P===-1&&(P=x),x!==P){u=!0;break}}if(f!==-2&&x!==f){u=!0;break}f=x}if(u)for(let y=n;y<o;++y)t.setSegmentParentageBreakVertex(e.read(y),!0);s.setCoordsPoint2D(r),n=o}}}function kst(t,e){let i=e.isEmpty()?t:Kn(null,e,!0).total();return i>t&&(i=t),.125*i}function Du(t,e){return e||(e=xe.constructEmpty()),kst(t,e)}function Fp(t,e){return .125*t}function of(t,e){return 3*t+3*e}class ku{constructor(){this.m_impl=null}stitchCurves(e,i,s,n){this.m_impl&&(this.m_impl.stitchCurves(e,i,s),n&&this.clearStitcher(e))}clearStitcher(e){this.m_impl&&(this.m_impl.clearStitcher(e),this.m_impl=null)}getOriginalVertexIndex(e,i){return this.m_impl.getOriginalVertexIndex(e,i)}getOriginalSegmentTypeInfo(e){return this.m_impl.getOriginalSegmentTypeInfo(e)}}class Z0{constructor(e,i,s){this.m_originalPlanarSegments=[],this.m_progressTracker=null,this.m_nsr=null,this.m_progressTracker=e,this.m_nsr=s,this.m_tolerance=0,this.m_originalVertexIndex=-1,this.m_type=0,this.m_progressCounter=0,this.m_bIsSimple=i}buildSegmentParentage(e,i,s,n,r){K(0)}static processCurves(e,i,s,n){return K(0),e}buildMonotonicCurveParentage(e,i,s,n){if(!e.hasCurves())return;K(!e.hasSegmentParentage()),this.m_type=1,this.m_originalPlanarSegments.length=0,this.m_bIsSimple&&(this.m_originalVertexIndex=e.createUserIndex()),this.m_tolerance=s;const l=new Ut,u=new Qt,f=[],y=[],_=[];for(let x=e.getFirstGeometry();x!==ae;x=e.getNextGeometry(x))for(let S=e.getFirstPath(x);S!==ae;S=e.getNextPath(S)){let P=e.getPathSize(S),A=e.getFirstVertex(S),k=0,$=-1;for(let F=0;F<P;F++){let G=e.getNextVertex(A);if(!e.querySegment(A,u,!0,!1)){A=G;continue}if(k===0){$=e.getVertexIndex(A);const se=Z0.regularizeCurve(e,u.get(),A,s);if(se>=0){this.m_nsr&&this.m_nsr.m_reason===0&&this.m_nsr.assign(new xs(13,$,-1)),k=se,P=e.getPathSize(S),G=e.getNextVertex(A);const oe=e.querySegment(A,u,!0,!1);K(oe)}}else k--;const V=e.getVertexIndex(A);let B;this.m_originalVertexIndex!==-1&&e.setUserIndex(A,this.m_originalVertexIndex,$),e.setSegmentToIndex(V,null);let W=!1;switch(u.get().getGeometryType()){case me.enumEllipticArc:case me.enumRationalBezier2:B=kz(u.get(),i,s,!1,!0,y,_,f),W=!0;break;default:{const se=!this.m_bIsSimple||!u.get().isMonotoneQuickAndDirty();B=M1e(u.get(),i,s,se,!1,y,f)}}const J=this.m_originalPlanarSegments.length;if(e.setSegmentParentageAndBreak(A,J,!0),!y[1].isNAN()){let se=null;se=W?new ba({points:y,weights:_}):new Oc({cp:y}),se.snapControlPoints(s*s),e.setSegmentToIndex(V,se)}const re=W?2:3;for(let se=1,oe=B,pe=re;se<oe;++se,pe+=re){u.get().queryCoord(f[se],l);const ce=e.insertVertex(S,G,l);if(this.m_originalVertexIndex!==-1&&e.setUserIndex(ce,this.m_originalVertexIndex,$),!y[pe+1].isNAN())if(W){const ue=new ba({points:y.slice(pe),weights:_.slice(pe)});ue.snapControlPoints(s*s),e.setSegmentToIndex(e.getVertexIndex(ce),ue)}else{const ue=new Oc({cp:y.slice(pe)});ue.snapControlPoints(s*s),e.setSegmentToIndex(e.getVertexIndex(ce),ue)}e.setSegmentParentageAndBreak(ce,J,!1)}B>1&&(F+=B-1,P=e.getPathSize(S)),this.m_originalPlanarSegments.push(u.releaseSegment()),A=G}}}stitchCurves(e,i,s){Z0.st_stitchCurvesImpl(this,e,i,s,!1)}clearStitcher(e){this.m_originalPlanarSegments.length=0,this.m_originalVertexIndex!==-1&&(e.removeUserIndex(this.m_originalVertexIndex),this.m_originalVertexIndex=-1),e.deleteSegmentParentage()}static st_verifyParentage(e){Z0.st_stitchCurvesImpl(null,e,ae,0,!0)}getOriginalVertexIndex(e,i){return this.m_originalVertexIndex!==-1&&i!==ae?e.getUserIndex(i,this.m_originalVertexIndex):-1}getOriginalSegmentTypeInfo(e){if(e!==-1){const i=this.m_originalPlanarSegments[e];switch(i.getGeometryType()){case me.enumEllipticArc:return i.projectionBehavior()===0?0:1;case me.enumBezier:return 2;case me.enumBezier2:return 3;case me.enumLine:return-1;case me.enumRationalBezier2:return 4;default:js("")}}return-1}static st_curveRequiresRegularization(e,i){return K(0),!1}progress_(e=!1){this.m_progressCounter++}processSpan_(e,i,s,n,r,o,l){if(i===s&&n===0)return K(e.getNextVertex(i)===ae),e.setSegmentToIndex(e.getVertexIndex(i),null),void e.setSegmentParentageAndBreak(i,-1);const u=e.getNextVertex(i);{let _=2;for(let x=u;x!==s;x=e.getNextVertex(x))_++;K(_===n)}if(r===null){e.setSegmentToIndex(e.getVertexIndex(i),null);for(let _=u;_!==s;)_=e.removeVertex(_,!0);return}const f=e.getXY(i),y=e.getXY(s);if(r.isClosed()){if(f.isEqualPoint2D(y)&&f.isEqualPoint2D(r.getStartXY())){let _;if(_=this.verifySegmentFitness(e,i,s,n,r,o,l)){const x=r.clone();return x.dropAllAttributes(),_<0&&x.reverse(),this.removeSpan(e,i,s),void e.setSegmentToIndex(e.getVertexIndex(i),x)}}}else if(f.isEqualPoint2D(r.getStartXY())){if(y.isEqualPoint2D(r.getEndXY())){const _=r.clone();if(_.dropAllAttributes(),this.verifySegmentFitness(e,i,s,n,_,o,l))return this.removeSpan(e,i,s),void e.setSegmentToIndex(e.getVertexIndex(i),_)}}else if(y.isEqualPoint2D(r.getStartXY())&&f.isEqualPoint2D(r.getEndXY())){const _=r.getReversed();if(_.dropAllAttributes(),this.verifySegmentFitness(e,i,s,n,_,o,l))return this.removeSpan(e,i,s),void e.setSegmentToIndex(e.getVertexIndex(i),_)}this.processSpanSplitSegment(e,i,s,n,r,o,l)}processSpanSplitSegment(e,i,s,n,r,o,l){if(r.isLine()||this.fitSegmentToSpan(e,i,s,n,r,o,l))return;const u=l*l;let f=n,y=i;const _=e.getXY(i);let x=r.getClosestCoordinate(_,!1);const S=r.getCoord2D(x);let P=!1;const A=Y.sqrDistance(_,S);if(A>u){const J=e.getNextVertex(i);if(this.approximateSpanSection(e,i,r,o,l),J===s)return;y=J,P=!0,f-=1}let k=s;const $=e.getXY(s);x=r.getClosestCoordinate($,!1);const F=r.getCoord2D(x);let G=!1;const V=Y.sqrDistance($,F);if(V>u){const J=e.getPrevVertex(s);if(this.approximateSpanSection(e,J,r,o,l),J===y)return;k=J,G=!0,f-=1}if((P||G)&&this.fitSegmentToSpan(e,y,k,f,r,o,l))return;let B=!1;if(!P&&A>0){const J=e.getNextVertex(i);if(this.approximateSpanSection(e,i,r,o,l),J===k)return;y=J,P=!0,B=!0,f-=1}if(!G&&V>0){const J=e.getPrevVertex(s);if(this.approximateSpanSection(e,J,r,o,l),J===y)return;k=J,G=!0,B=!0,f-=1}if(B&&this.fitSegmentToSpan(e,y,k,f,r,o,l))return;let W=y;for(;;){const J=e.getNextVertex(W);if(this.approximateSpanSection(e,W,r,o,l),W=J,W===k)return}}fitSegmentToSpan(e,i,s,n,r,o,l){const u=this.m_type===0,f=[];if(f.push(e.getXY(i)),u){let x=i;const S=32;if(n>S){const P=BigInt(n-1),A=BigInt(S-1);let k=A,$=0n;for(let F=1;F<n;F++,k+=A)if(x=e.getNextVertex(x),k>=$+P){$+=P;const G=e.getXY(x);f.push(G)}K(x===s)}else{for(let P=1;P<n;P++){x=e.getNextVertex(x);const A=e.getXY(x);f.push(A)}K(x===s)}}else{let x=i;const S=new Qt;for(;;){e.querySegment(x,S,!1,!0);const P=[.1,.25,.4,.5,.6,.75,.9,1];let A=0;for(const k of P)(n===2||1&A)&&f.push(S.get().getCoord2D(k)),A++;if(x=e.getNextVertex(x),x===s)break}}const y=(()=>{let x=f[0].compare(f.at(-1));if(x===0){const S=new zr(0);xst(f,f.length,S),x=S.getResult()>=0?-1:1}return x>0})();y&&f.reverse();const _=r.clone();if(_.dropAllAttributes(),_.setSegmentFromCoords(f,f.length),y&&_.reverse(),_.snapControlPoints(this.m_tolerance*this.m_tolerance),this.verifySegmentFitness(e,i,s,n,_,o,l)){this.removeSpan(e,i,s);const x=e.getVertexIndex(i);return e.setSegmentToIndex(x,_),!0}return!1}approximateSpanSection(e,i,s,n,r){const o=new Qt;if(!e.querySegment(i,o,!0,!1))return;const l=s.getGeometryType();if(l!==o.get().getGeometryType()){if(l===me.enumEllipticArc){if(o.get().getGeometryType()!==me.enumRationalBezier2)return;if(s.projectionBehavior()===0){const u=[];Est(!1,o.get(),r,u,this.m_progressTracker);const f=e.getNextVertex(i),y=e.getPathFromVertex(i),_=new Ut;let x=i;for(let S=1,P=u.length;S<P;S++){const A=u[S],k=o.get().getCoord2D(u[S-1]),$=o.get().getCoord2D(ji(u[S-1],A,.5));o.get().queryCoord(A,_);const F=_.getXY(),G=new Vc;G.constructCircularArcThreePoint(k,F,$);let V=ae;A<1&&(V=e.insertVertex(y,f,_)),e.setSegmentToIndex(e.getVertexIndex(x),G),x=V}return}{const u=Ge(Y,3);o.get().queryControlPoints(u);const f=[0,0,0];o.get().queryWeights(f);const y=ld(f),_=new Vc;return pot(u,y*y,null,!1,_),void e.setSegmentToIndex(e.getVertexIndex(i),_)}}bt("approximate_span_section_")}}verifySegmentFitness(e,i,s,n,r,o,l){return this.m_type===0?this.verifySegmentFitnessLines(e,i,s,n,r,o,l):this.verifySegmentFitnessCurves(e,i,s,n,r,o,l)}verifySegmentFitnessCurves(e,i,s,n,r,o,l){const u=e.getXY(i),f=e.getXY(s);if(!u.isEqualPoint2D(r.getStartXY())||!f.isEqualPoint2D(r.getEndXY()))return 0;let y=0;if(r.isClosed()){const F=r.getCoord2D(.1).sub(u);y=r.getCoord2D(.7).sub(u).crossProduct(F)>=0?1:-1}const _=new Array(d5.s_maxMonotonicPartParams);let x=r.getMonotonicPartParams(_.length,_);x--;const S=new si,P=[1,.5,.75,.25];let A=0,k=i;const $=u.clone();for(;;){const F=e.getNextVertex(k);let G=e.getSegment(k);G===null&&(e.queryLineConnector(k,S,!0),G=S);for(let V=F===s?1:0;V<P.length;V++){const B=G.getCoord2D(P[V]);if(!r.isCloserThanDistance(B,Ze.unit(),l))return 0}if(x>1)for(let V=1;V<x;){const B=r.getCoord2D(_[V]);G.isCloserThanDistance(B,Ze.unit(),l)?(_[x-1]=St(_[V],_[V]=_[x-1]),x--):V++}if(y){const V=G.getCoord2D(.25);A+=V.sub(u).crossProduct($.sub(u)),$.assign(V),V.assign(G.getCoord2D(.75)),A+=V.sub(u).crossProduct($.sub(u)),$.assign(V)}if(k=F,k===s)return x>1?0:y?A<0?-y:y:1}}verifySegmentFitnessLines(e,i,s,n,r,o,l){return K(0),0}removeSpan(e,i,s){e.setSegmentToIndex(e.getVertexIndex(i),null);const n=e.getNextVertex(i);n!==s&&e.removeVertices(n,s)}static st_stitchCurvesImpl(e,i,s,n,r){if(i.hasSegmentParentage())return i.hasCurves()?Z0.st_stitchCurvesFromCurvesImpl(e,i,s,n,r):Z0.st_stitchCurvesFromLinesImpl(e,i,s,n,r)}static st_stitchCurvesFromLinesImpl(e,i,s,n,r){let o=s===ae?i.getFirstGeometry():s;for(;o!==ae;){for(let l=i.getFirstPath(o);l!==ae;l=i.getNextPath(l)){let u=i.getPathSize(l);i.isClosedPath(l)&&(u+=1);let f=!0,y=!1;const _=i.getFirstVertex(l);let x=_;for(let S=0;S<u&&x!==ae;){let P=i.getSegmentParentage(x);if(P===-1||f){f=!1,S++,x=i.getNextVertex(x),y=!0;continue}let A,k,$=0;if(y?(A=i.getPrevVertex(x),k=x,K(A!==ae),K(k!==A),K(i.getSegmentParentage(A)===-1||_===A)):(A=x,k=i.getNextVertex(A),S++,K(k!==ae),K(k!==A),P=i.getSegmentParentage(k)),$=2,y=!1,P===-1||i.getSegmentParentageBreakVertex(k)){x=k;continue}let F=i.getNextVertex(k);for(S++;S<u&&F!==ae;){k=F,$++;const G=i.getSegmentParentage(F);if(G===-1||i.getSegmentParentageBreakVertex(F))break;K(G===P),S++,F=i.getNextVertex(F)}if(!r){const G=e.m_originalPlanarSegments[P];e.processSpan_(i,A,k,$,G,P,n)}x=k}}if(s!==ae)break;o=i.getNextGeometry(o)}}static st_stitchCurvesFromCurvesImpl(e,i,s,n,r){let o=s===ae?i.getFirstGeometry():s;for(;o!==ae;)if(yge(i.getGeometryType(o))){for(let l=i.getFirstPath(o);l!==ae;l=i.getNextPath(l)){let u=i.getPathSize(l);const f=i.isClosedPath(l);f&&(u+=1);let y=i.getFirstVertex(l);if(f){if(i.getSegmentParentage(y)!==-1){let x=y;for(let S=0;!i.getSegmentParentageBreakVertex(x);S++){if(S===u){y=i.getFirstVertex(l),i.setSegmentParentageBreakVertex(x,!0);break}x=i.getPrevVertex(x)}}}else K(i.getSegmentParentage(y)===-1||i.getSegmentParentageBreakVertex(y));let _=y;for(let x=0;x<u&&_!==ae;){const S=i.getSegmentParentage(_);if(S===-1){x++,_=i.getNextVertex(_);continue}let P=0,A=ae;const k=_;P=1;let $=i.getNextVertex(k);for(;x<u&&$!==ae;){x++,A=$,P++;const F=i.getSegmentParentage($);if(F===-1||i.getSegmentParentageBreakVertex($))break;K(F===S),$=i.getNextVertex($)}if(A===ae)break;if(!r){const F=e.m_originalPlanarSegments[S];e.processSpan_(i,k,A,P,F,S,n)}_=A}}if(s!==ae)break;o=i.getNextGeometry(o)}else o=s===ae?i.getNextGeometry(o):ae}static regularizeCurve(e,i,s,n){let r=i.snapControlPoints(n*n);if(r){const o=e.getVertexIndex(s),l=i.clone();e.setSegmentToIndex(o,l)}if(i.getGeometryType()===Oc.type){const o=[],l=i.calculateSpecialPointsForCracking(n,o);if(l>0){e.splitSegment(s,o,l),r=e.snapControlPoints(s,l+1,n*n)||r;for(let u=0;u<l;u++)s=e.getNextVertex(s),e.setSegmentParentageBreakVertex(s,!0);return l}}return r?0:-1}}function Yd(t,e,i,s,n){return new d7(t,i,e,s,n).do_()}function Nst(t,e,i){const s=Yc(t);return Nj(e.getX(),e.getY(),i.getX(),i.getY(),Xi(s))}function $st(t,e,i=1,s=1,n=1,r=1){if(s>r)return t;if(r>s)return e;const o=[0],l=[0],u=new Ut;return Stt(t,e,i,s,n,r,u,l,o),u}function Ost(t,e,i){return d7.fixCurveTwoPointLoops(t,e,i)}function rye(t){return Yc(t)}class d7{constructor(e,i,s,n,r){this.m_shape=e,this.m_progressTracker=i,this.m_tolerance=s,this.m_bFilterDegenerateSegments=n,this.m_bTrackChanges=r,this.m_progressCounter=0}do_(){const e=new Qo(this.m_tolerance.tolerance,this.m_tolerance.resolution),i=1e-5,s=1e-6,n=rye(e);let r=kge(e);const o=r*(1+i);r*=1+s;let l=!1;const u=this.m_shape.getTotalPointCount()+10>30?1e3:(this.m_shape.getTotalPointCount()+10)*(this.m_shape.getTotalPointCount()+10),f=this.m_shape.hasPointFeatures();for(let y=0;;y++){this.m_shape.dbgCheckSelection(),y>u&&bt("crack_and_cluster_iteration_exceeded"),this.m_shape.dbgVerifyMonotone();let _=-1;y===0&&(_=this.firstCrack_(),l||(l=_>0));const x=this.cluster_(n);if(this.m_shape.dbgVerifyMonotone(),l||(l=x),this.m_bFilterDegenerateSegments){const A=this.m_shape.filterClosePoints(n,!0,!1,this.m_bTrackChanges,ae)!==0;l||(l=A),this.m_shape.dbgVerifyMonotone()}const S=this.m_shape.snapControlPointsOnSelection(o*o);l||(l=S),this.m_shape.dbgCheckSelection();let P=!1;if((y===0&&_===-1||f||R1e(!0,this.m_shape,r,null,this.m_progressTracker))&&(P=this.crack_(o),l||(l=P),this.m_shape.dbgVerifyMonotone()),!P&&!d7.fixCurveTwoPointLoops(this.m_shape,n,this.m_progressTracker)){this.m_shape.dbgVerifyMonotone();break}}return l&&Dst(this.m_shape),l}cluster_(e){return k1e(this.m_shape,e,ae,this.m_bTrackChanges,this.m_progressTracker)}crack_(e){return $tt(this.m_shape,e,this.m_bTrackChanges,this.m_progressTracker)}static fixCurveTwoPointLoops(e,i,s){if(!e.hasCurves())return!1;e.dbgVerifyCurves();const n=e.createUserIndexUninitialized(),r=new Ns(0),o=e.queryVertexIteratorOnSelection();for(let _=o.next();_!==ae;_=o.next())r.add(_),e.setUserIndex(_,n,-1);if(r.size()===0)return!1;r.add(ae),e.sortVerticesSimpleByY(r,0,r.size()-1);let l=0;const u=e.getXY(r.read(l)),f=new Y(Number.NaN,Number.NaN),y=[];for(let _=1,x=r.size();_<x;++_){const S=r.read(_),P=S!==ae?e.getXY(S):f;if(P.equals(u))continue;const A=[];for(let k=l;k<_;k++){const $=r.read(k),F=e.getPrevVertex($);if(F!==ae&&e.getUserIndex(F,n)===-1){const V=$N(e.getXY(F),e.getSegment(F));Y.sqrDistance(u,V.otherPt)!==0&&(V.vert=F,V.dir=-1,A.push(V)),e.setUserIndex(F,n,1)}const G=e.getNextVertex($);if(G!==ae&&e.getUserIndex($,n)===-1){const V=$N(e.getXY(G),e.getSegment($));Y.sqrDistance(u,V.otherPt)!==0&&(V.vert=$,V.dir=1,A.push(V)),e.setUserIndex($,n,1)}}if(A.length>1){A.sort((F,G)=>Fst(F,G));const k=$N(f.clone(),null);A.push(k);let $=0;for(let F=1,G=A.length;F<G;F++)if(!A[F].otherPt.equals(A[F-1].otherPt)){if(F-$>1&&A[$].seg!==null){let V=!1;const B=$;for(let W=$+1;W<F;W++)if(!Rst(A[B],A[W])){V=!0;break}if(V)for(let W=$;W<F&&A[W].seg!==null;W++)y.push(A[W].vert)}$=F}}l=_,u.setCoordsPoint2D(P)}for(const _ of y){const x=e.getSegment(_);K(x!==null);const S=e.getXY(_),P=e.getXY(e.getNextVertex(_));if(Y.distance(S,P)<3*i)e.setSegmentToIndex(e.getVertexIndex(_),null);else{const A=x.lengthToT(.5*x.calculateLength2D());e.splitSegment(_,[A],1)}}return e.removeUserIndex(n),y.length>0}firstCrack_(){const e=Kn(null,this.m_shape.getEnvelope2D(this.m_progressTracker),!0).total();if(4*e<this.m_tolerance.total()){let i=!1;const s=1.1*e,n=e,r=this.cluster_(s);i||(i=r);let o=0;this.m_bFilterDegenerateSegments&&(o=this.m_shape.filterClosePoints(0,!0,!1,this.m_bTrackChanges,ae));const l=this.crack_(n);return i||(i=l),i?1:o?2:0}return-1}progress_(e=!1){this.m_progressCounter++,!e&&4095&this.m_progressCounter||(this.m_progressCounter=0)}}function $N(t,e){return{otherPt:t,seg:e,vert:-1,dir:0}}function Rst(t,e){if(K(t.otherPt.equals(e.otherPt)),t.seg===null)return e.seg===null;if(e.seg===null)return!1;const i=t.seg.getGeometryType();if(i!==e.seg.getGeometryType())return!1;if(i===me.enumBezier){const s=t.seg,n=e.seg;let r=s.getControlPoint1(),o=s.getControlPoint2();t.dir===-1&&(o=St(r,r=o));let l=n.getControlPoint1(),u=n.getControlPoint2();return e.dir===-1&&(u=St(l,l=u)),r.equals(l)&&o.equals(u)}if(i===me.enumRationalBezier2){const s=t.seg,n=e.seg,r=s.getControlPoint1(),o=n.getControlPoint1();if(!r.equals(o))return!1;const l=[0,0,0];s.queryWeights(l),t.dir===-1&&(l[2]=St(l[0],l[0]=l[2]));const u=[0,0,0];return n.queryWeights(u),e.dir===-1&&(u[2]=St(u[0],u[0]=u[2])),l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}bt("")}function Lst(t,e){if(t.seg===null||e.seg===null)return t.seg!==null?-1:e.seg!==null?1:0;const i=t.seg.getGeometryType(),s=e.seg.getGeometryType();return i<s?-1:i>s?1:0}function Fst(t,e){const i=t.otherPt.compare(e.otherPt);return i!==0?i:Lst(t,e)}var Rj=bi,zst=Dn,nT=hl;function z_(){return{unsplitBehavior:0,allCrossRoadsImpassable:!1,ogcRule:!1}}function $z(t,e,i,s,n,r,o){const l=new Sf(n);l.m_bOGCOutput=!0;const u=t.getGeometryType()===me.enumPolygon&&t.getFillRule()===1&&!wf(s);return l.planarSimplifyImpl_(t,e,u,i,s,n,r,o)}function Z6(t,e,i,s,n,r,o,l){return new Sf(r).planarSimplifyImpl_(t,e,i,s,n,r,o,l)}function qst(t,e,i,s){return K(0),{}}function Vst(t,e,i,s,n,r,o){return K(0),{}}function Gst(t,e,i,s){return K(0),{}}function Qie(t,e,i){return Wst(t,e,i)}function jst(t,e,i,s){if(t.isEmpty()||e.isEmpty()||t.getDimension()>e.getDimension())return Up(Yo(t),t,e,"-");const n=new xe;t.queryEnvelope(n);const r=new xe;e.queryEnvelope(r);const o=new xe;o.setCoords({env2D:n}),o.mergeEnvelope2D(r);const l=Kn(i,o,!0),u=r.clone(),f=Yc(l);if(u.inflateCoords(f,f),!n.isIntersecting(u))return Up(Yo(t),t,e,"-");const y=new Sf(s),_=new Bs,x=_.addGeometry(Yo(t)),S=_.addGeometry(Yo(e));let P=0,A=0,k=null;if(_.hasCurves()){k=new ku;const G=_.getEnvelope2D(s);A=Fp(l.total());const V=Du(l.total(),G);P=of(V,A),Vh(_,V,l.total(),12e3,k,null,s)}y.setEditShapeCrackAndCluster(_,l.add(P));const $=y.difference(x,S);k!==null&&k.stitchCurves(_,$,A,!0);const F=Up(_.getGeometry($),t,e,"-");return Rj(F.getGeometryType())&&(F.getImpl().setIsSimple(4,l.total()),F.getGeometryType()===me.enumPolygon&&F.getImpl().updateOGCFlagsProtected()),F}function ese(t,e,i){return Xst(t,e,i,!0)}function Bst(t,e,i){return t.isEmpty()||e.isEmpty()?t.createInstance():Nst(i,t,e)?new Ut({copy:$st(t,e)}):t.createInstance()}function Hst(t,e,i,s){const n=xe.constructEmpty();t.queryEnvelope(n);const r=xe.constructEmpty();e.queryEnvelope(r);const o=xe.constructEmpty();o.setCoords({env2D:n}),o.mergeEnvelope2D(r);const l=Kn(i,o,!0),u=new xe(r),f=Yc(l);if(u.inflateCoords(f,f),!n.isIntersecting(u)){if(t.getDimension()<=e.getDimension())return Up(Yo(t.createInstance()),t,e,"&");if(t.getDimension()>e.getDimension())return Up(Yo(e.createInstance()),t,e,"&")}const y=new Sf(s),_=new Bs,x=_.addGeometry(Yo(t)),S=_.addGeometry(Yo(e));let P=0,A=0,k=null;if(_.hasCurves()){k=new ku;const G=_.getEnvelope2D(s);A=Fp(l.total());const V=Du(l.total(),G);P=of(V,A),Vh(_,V,l.total(),12e3,k,null,s)}y.setEditShapeCrackAndCluster(_,l.add(P));const $=y.intersection(x,S);k!==null&&k.stitchCurves(_,$,A,!0);const F=Up(_.getGeometry($),t,e,"&");return Rj(F.getGeometryType())&&(F.getImpl().setIsSimple(4,l.total()),F.getGeometryType()===me.enumPolygon&&F.getImpl().updateOGCFlagsProtected()),F}function Ust(t,e,i,s){const n=new Array(3),r=xe.constructEmpty();t.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o);const l=xe.constructEmpty();l.setCoords({env2D:r}),l.mergeEnvelope2D(o);const u=Kn(i,l,!0),f=new xe(o),y=Yc(u);if(f.inflateCoords(y,y),!r.isIntersecting(f)){if(t.getDimension()<=e.getDimension()){const G=Up(Yo(t.createInstance()),t,e,"&");return n[G.getDimension()]=G,n}if(t.getDimension()>e.getDimension()){const G=Up(Yo(e.createInstance()),t,e,"&");return n[G.getDimension()]=G,n}}const _=new Sf(s),x=new Bs,S=x.addGeometry(Yo(t)),P=x.addGeometry(Yo(e));let A=0,k=0,$=null;if(x.hasCurves()){$=new ku;const G=x.getEnvelope2D(s);k=Fp(u.total());const V=Du(u.total(),G);A=of(V,k),Vh(x,V,u.total(),12e3,$,null,s)}_.setEditShapeCrackAndCluster(x,u.add(A)),x.dbgVerifyCurves();const F=_.intersectionEx(S,P);for(const G of F){$!==null&&$.stitchCurves(x,G,k,!1);const V=Up(x.getGeometry(G),t,e,"&");Rj(V.getGeometryType())&&(V.getImpl().setIsSimple(4,u.total()),V.getGeometryType()===me.enumPolygon&&V.getImpl().updateOGCFlagsProtected()),n[V.getDimension()]=V}return $!==null&&$.clearStitcher(x),n}function ON(t,e,i,s,n,r=!1){e===0&&Je("not enough geometries to dissolve");let o=0;for(let P=0,A=e;P<A;P++)o=Math.max(t[P].getDimension(),o);if(o===2||o===1)return new Sf(s).dissolveMultiPaths_(o,!1,t,e,i,n,r);let l=0,u=-1;for(let P=0,A=e;P<A;P++)t[P].getDimension()===o&&(u===-1&&(u=P),t[P].isEmpty()||(u=P,l++));if(l<2)return Yo(t[u]);const f=il.constructEmpty(),y=new Bs;let _=ae;for(let P=0,A=e;P<A;P++)if(t[P].getDimension()===o&&!t[P].isEmpty()){_===ae?_=y.addGeometry(Yo(t[P])):y.appendGeometry(_,Yo(t[P]));const k=il.constructEmpty();t[P].queryLooseEnvelope(k),f.mergeEnv3D(k)}const x=Kn(i,f.getEnvelope2D(),!0),S=new Sf(s);if(r){const P=DE(i,f.getEnvelopeZs(),!0);return S.planarSimplify3DImpl_(y,x,P,0,!0)}return S.m_bOGCOutput=!0,S.planarSimplifyMultiPoints(y,x,!1,-1)}function Yst(t,e,i,s,n,r=!1){e<2&&Je("not enough geometries to dissolve");let o=0;for(let A=0,k=e;A<k;A++)o=Math.max(t[A].getDimension(),o);if(o===2||o===1)return new Sf(s).dissolveMultiPaths_(o,!0,t,e,i,n,r);const l=il.constructEmpty(),u=new Bs;let f=ae,y=0,_=-1;for(let A=0,k=e;A<k;A++)if(t[A].getDimension()===o&&(_===-1&&(_=A),!t[A].isEmpty())){_=A,f===ae?f=u.addGeometry(Yo(t[A])):u.appendGeometry(f,Yo(t[A]));const $=il.constructEmpty();t[A].queryLooseEnvelope($),l.mergeEnv3D($),y++}if(y<2)return Yo(t[_]);const x=o===0?i:null,S=Kn(x,l.getEnvelope2D(),!0),P=new Sf(s);if(r){const A=DE(x,l.getEnvelopeZs(),!0);return P.m_bOGCOutput=!0,P.planarSimplify3DImpl_(u,S,A,0,!0)}return P.planarSimplifyMultiPoints(u,S,!0,-1)}class Sf{constructor(e){this.m_topoGraph=null,this.m_maskLookup=[],this.m_dummyPt1=Y.getNAN(),this.m_dummyPt2=Y.getNAN(),this.m_fromEdgeForPolylines=ae,this.m_progressCounter=0,this.m_bOGCOutput=!1,this.m_progressTracker=e}linesToPolygonsImpl(e,i){let s=0,n=0,r=null;if(e.hasCurves()){r=new ku;const f=e.getEnvelope2D(this.m_progressTracker);n=Fp(i.total());const y=Du(i.total(),f);s=of(y,n),Vh(e,y,i.total(),12e3,r,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,i.add(s));const o=this.m_topoGraph.createUserIndexForChains(),l=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(l,o,1);for(let f=this.m_topoGraph.getChainFirstIsland(l);f!==ae;f=this.m_topoGraph.getChainNextInParent(f))this.m_topoGraph.setChainUserIndex(f,o,1);const u=[];for(let f=this.m_topoGraph.getFirstChain();f!==ae;f=this.m_topoGraph.getChainNext(f)){if(this.m_topoGraph.getChainUserIndex(f,o)===1)continue;this.m_topoGraph.setChainUserIndex(f,o,1);for(let x=this.m_topoGraph.getChainFirstIsland(f);x!==ae;x=this.m_topoGraph.getChainNextInParent(x))this.m_topoGraph.setChainUserIndex(x,o,1);if(this.m_topoGraph.getChainArea(f)===0)continue;const y=this.m_topoGraph.extractPolygonFromChainAndIslands(e,ae,f,ae);r!=null&&r.stitchCurves(e,y,n,!1);const _=e.getGeometry(y);u.push(_)}return new nd(u)}autoCompleteImpl(e,i,s){let n=0,r=0,o=null;if(e.hasCurves()){o=new ku;const _=e.getEnvelope2D(this.m_progressTracker);r=Fp(s.total());const x=Du(s.total(),_);n=of(x,r),Vh(e,x,s.total(),12e3,o,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,s.add(n));const l=this.m_topoGraph.getGeometryID(i),u=this.m_topoGraph.createUserIndexForChains(),f=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(f,u,1);for(let _=this.m_topoGraph.getChainFirstIsland(f);_!==ae;_=this.m_topoGraph.getChainNextInParent(_))this.m_topoGraph.setChainUserIndex(_,u,1);const y=[];for(let _=this.m_topoGraph.getFirstChain();_!==ae;_=this.m_topoGraph.getChainNext(_)){if(this.m_topoGraph.getChainUserIndex(_,u)===1)continue;this.m_topoGraph.setChainUserIndex(_,u,1);for(let $=this.m_topoGraph.getChainFirstIsland(_);$!==ae;$=this.m_topoGraph.getChainNextInParent($))this.m_topoGraph.setChainUserIndex($,u,1);if(this.m_topoGraph.getChainParentage(_)!==0)continue;const x=this.m_topoGraph.getChainHalfEdge(_);let S=x,P=!1;do{const $=this.m_topoGraph.getHalfEdgeTwin(S);if(this.m_topoGraph.getHalfEdgeChain($)!==_&&this.m_topoGraph.getHalfEdgeParentage(S)&l){P=!0;break}S=this.m_topoGraph.getHalfEdgeNext(S)}while(S!==x);if(!P||this.m_topoGraph.getChainArea(_)===0)continue;const A=this.m_topoGraph.extractPolygonFromChainAndIslands(e,ae,_,ae);o!==null&&o.stitchCurves(e,A,r,!1);const k=e.getGeometry(A);y.push(k)}return new nd(y)}setEditShape(e,i=!1){this.m_topoGraph===null&&(this.m_topoGraph=new qh),this.m_topoGraph.setEditShape(e,this.m_progressTracker,!0,i)}setEditShapeCrackAndCluster(e,i){Yd(e,i,this.m_progressTracker,!0,!1);for(let s=e.getFirstGeometry();s!==ae;s=e.getNextGeometry(s))e.getGeometryType(s)===me.enumPolygon&&lg(e,s,-1,this.m_bOGCOutput,ae,this.m_progressTracker);this.setEditShape(e)}setHalfEdgeOrientations_(e,i){const s=this.m_topoGraph.getShape();for(let n=s.getFirstGeometry();n!==ae;n=s.getNextGeometry(n))if(n===i)for(let r=s.getFirstPath(n);r!==ae;r=s.getNextPath(r)){let o=s.getFirstVertex(r);if(o===ae)continue;let l=s.getNextVertex(o);for(;l!==ae;){const u=this.m_topoGraph.getClusterFromVertex(o),f=this.m_topoGraph.getClusterFromVertex(l),y=this.m_topoGraph.getHalfEdgeConnector(u,f);if(y!==ae){const _=this.m_topoGraph.getHalfEdgeTwin(y);this.m_topoGraph.setHalfEdgeUserIndex(y,e,1),this.m_topoGraph.setHalfEdgeUserIndex(_,e,2)}o=l,l=s.getNextVertex(o)}}}flushVertices_(e,i){const s=this.m_topoGraph.getShape(),n=s.hasSegmentParentage(),r=new Qt,o=s.insertPath(e,ae);i.push(i[0]);const l=i.length;let u=ae;for(let f=0;f<l;f++){const y=i[f];if(u=s.addVertex(o,y),!n)continue;const _=this.m_topoGraph.getClusterFromVertex(y);if(f>0&&this.m_topoGraph.isBreakNode(_)&&s.setSegmentParentageBreakVertex(u,!0),f<l-1){const x=this.m_topoGraph.getHalfEdgeConnector(_,this.m_topoGraph.getClusterFromVertex(i[f+1])),S=this.m_topoGraph.getSegmentParentage(x);s.setSegmentParentageAndBreak(u,S,f>0||this.m_topoGraph.isBreakNode(_)),this.m_topoGraph.isHalfEdgeCurve(x)&&(this.m_topoGraph.querySegmentXY(x,r),s.setSegmentToIndex(s.getVertexIndex(u),r.get().clone()))}}if(n){const f=this.m_topoGraph.getClusterFromVertex(i[l-1]);this.m_topoGraph.isBreakNode(f)&&s.setSegmentParentageBreakVertex(u,!0)}s.setClosedPath(o,!0)}processPolygonCuts_(e,i,s,n){const r=this.m_topoGraph.getGeometryID(s),o=this.m_topoGraph.getGeometryID(n),l=[],u=this.m_topoGraph.getShape(),f=this.m_topoGraph.createUserIndexForHalfEdges();for(let y=this.m_topoGraph.getFirstCluster();y!==ae;y=this.m_topoGraph.getNextCluster(y)){const _=this.m_topoGraph.getClusterHalfEdge(y);if(_===ae)continue;let x=_;do{if(this.m_topoGraph.getHalfEdgeUserIndex(x,f)!==1){let S=x,P=x,A=!1,k=0;do{if(this.m_topoGraph.setHalfEdgeUserIndex(S,f,1),!A&&this.m_topoGraph.getHalfEdgeParentage(S)&o&&this.m_topoGraph.getHalfEdgeFaceParentage(S)&r&&(P=S,A=!0),A){const $=this.m_topoGraph.getHalfEdgeOrigin(S),F=this.m_topoGraph.getClusterVertexIterator($),G=this.m_topoGraph.getVertexFromVertexIterator(F);l.push(G),e!==-1&&this.m_topoGraph.getHalfEdgeParentage(S)&o&&(k|=this.m_topoGraph.getHalfEdgeUserIndex(S,e))}S=this.m_topoGraph.getHalfEdgeNext(S)}while(S!==P);if(A&&this.m_topoGraph.getChainArea(this.m_topoGraph.getHalfEdgeChain(P))>0){const $=u.createGeometry(me.enumPolygon);this.flushVertices_($,l),i!==-1&&u.setGeometryUserIndex($,i,k)}l.length=0}x=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(x))}while(x!==_)}this.m_topoGraph.deleteUserIndexForHalfEdges(f)}cutPolygonPolyline_(e,i,s,n){this.m_topoGraph.removeSpikes_();let r=-1;e!==-1&&(r=this.m_topoGraph.createUserIndexForHalfEdges(),this.setHalfEdgeOrientations_(r,s)),this.processPolygonCuts_(r,e,i,s),r!==-1&&(this.m_topoGraph.deleteUserIndexForHalfEdges(r),r=-1);const o=this.m_topoGraph.getShape();for(let l=o.getFirstGeometry();l!==ae;l=o.getNextGeometry(l))l!==i&&l!==s&&n.push(l);n.sort((l,u)=>{const f=o.getFirstPath(l),y=o.getRingArea(f),_=o.getFirstPath(u),x=o.getRingArea(_);return y<x?-1:y>x?1:0})}cut(e,i,s,n,r){const o=this.m_topoGraph.getShape().getGeometryType(s),l=this.m_topoGraph.getShape().getGeometryType(n),u=hl(o),f=hl(l);u!==2||f!==1?u!==1||f!==1?bt(""):new Zst(this,e,i,s,n,r).Do():this.cutPolygonPolyline_(i,s,n,r)}progress_(e=!1){}isGoodParentage(e){return e>=0&&e<this.m_maskLookup.length&&this.m_maskLookup[e]}normalizeInputGeometry(e){const i=e.getGeometryType();if(i===me.enumEnvelope){const s=new Wt({vd:e.getDescription()});return e.isEmpty()||s.addEnvelope(e,!1),s}if(i===me.enumPoint){const s=new Jn({vd:e.getDescription()});return e.isEmpty()||s.add(e),s}if(Dn(i)){const s=new vi({vd:e.getDescription()});return e.isEmpty()||s.addSegment(e,!0),s}return i!==me.enumMultiPoint&&i!==me.enumPolyline&&i!==me.enumPolygon&&Je("Unexpected geometry type"),e}dissolveNonSimplePolygons(e,i,s,n){K(i>0);const r=new Bs;let o=0,l=-1;for(let u=0,f=i;u<f;u++)e[u].getDimension()===2&&(l===-1&&(l=u),e[u].isEmpty()||(o++,r.addGeometry(e[u])));return o===0?(K(l>=0),this.normalizeInputGeometry(e[l])):this.planarSimplifyPolygons(r,s,!0,!1,-1,!0)}dissolveMultiPaths_(e,i,s,n,r,o,l){K(e>=1&&e<=2),K(n>0);const u=8&o?1:2,f=il.constructEmpty();let y=0,_=-1,x=!0;for(let ne=0,de=n;ne<de;ne++)if(s[ne].getDimension()===e&&(_===-1&&(_=ne),!s[ne].isEmpty())){_=ne,y++;const Se=il.constructEmpty();if(s[ne].queryLooseEnvelope(Se),f.mergeEnv3D(Se),e===2&&x&&s[ne].getGeometryType()===me.enumPolygon)if(16&o){const Pe=[0],Re=s[ne].getImpl().getIsSimple(0,Pe),Oe=this.m_bOGCOutput?Re===5:yg(Re);x&&(x=Oe)}else{const Pe=IJe(s[ne],0);x&&(x=Pe)}}if(y<2&&(K(_>=0),y===0||!(16&o)))return this.normalizeInputGeometry(s[_]);if(!x){const ne=Kn(i?null:r,f.getEnvelope2D(),!0);return this.dissolveNonSimplePolygons(s,n,ne,o)}const S=s.slice(0,n),P=Kn(r,f.getEnvelope2D(),!0),A=10*Yc(P);let k=new Qo(0,0);if(l&&(k=DE(r,f.getEnvelopeZs(),!0)),y===1&&e===1&&u===2&&!i)return l?Vst():this.m_bOGCOutput?$z(S[_],P,!1,-1,this.m_progressTracker,u,!1):Z6(S[_],P,!1,!1,-1,this.m_progressTracker,u,!1);const $=new h5;$.startConstruction();let F=e===2?3:4,G=0;for(let ne=0,de=n;ne<de;ne++){if(S[ne].getDimension()!==e||S[ne].isEmpty())continue;let Se=S[ne].getGeometryType();if(Se!==me.enumEnvelope){if(Dn(Se)?(S[ne]=this.normalizeInputGeometry(S[ne]),Se=me.enumPolyline):K(bi(Se)),e===1){K(Se===me.enumPolyline);let Re=-1;if(l)K(0,"3d not implemented yet");else{const Oe=[0];Re=S[ne].getImpl().getIsSimple(P.total(),Oe)}if(this.m_bOGCOutput?Re!==5:!yg(Re))if(i)F=-1;else{l?K(0,"3d not implemented yet"):this.m_bOGCOutput?S[ne]=$z(S[ne],P,!1,-1,this.m_progressTracker,u,!1):S[ne]=Z6(S[ne],P,!1,!1,-1,this.m_progressTracker,u,!1);const Oe=[0];K(yg(S[ne].getImpl().getIsSimple(P.total(),Oe)))}}else{K(Se===me.enumPolygon);const Re=[0],Oe=S[ne].getImpl().getIsSimple(0,Re);K(wf(Oe))}const Pe=S[ne].getImpl();for(let Re=0,Oe=Pe.getPathCount();Re<Oe;Re++){const we=xe.constructEmpty();Pe.queryLoosePathEnvelope(Re,we),we.inflateCoords(A,A),$.addEnvelope(G,we),G++}}else{K(Se===me.enumEnvelope);const Pe=xe.constructEmpty();S[ne].queryLooseEnvelope(Pe),Pe.inflateCoords(A,A),$.addEnvelope(G,Pe),G++,F=-1}}$.endConstruction();const V=G,B=Vi(V,-2147483647),W=Vi(V,-1);let J=0;_=-1,G=0;for(let ne=0,de=n;ne<de;ne++){if(S[ne].getDimension()!==e||(_===-1&&(_=ne),S[ne].isEmpty()))continue;_=ne,J++;const Se=S[ne].getGeometryType();if(bi(Se))for(let Pe=0,Re=S[ne].getPathCount();Pe<Re;Pe++)W[G]=ne,B[G]=-Pe-1,G++;else K(Se===me.enumEnvelope),W[G]=ne,B[G]=-1,G++}if(J<2&&e===2)return K(_>=0),this.normalizeInputGeometry(S[_]);let re=V;for(;$.next()&&re>0;){this.progress_();const ne=$.getHandleA(),de=$.getHandleB(),Se=$.getElement(ne),Pe=$.getElement(de);W[Se]!==W[Pe]&&(B[Se]<0&&(re--,B[Se]=-(B[Se]+1)),B[Pe]<0&&(re--,B[Pe]=-(B[Pe]+1)))}const se=new Bs;let oe=!1,pe=0;for(let ne=0,de=n;ne<de;ne++){if(S[ne].getDimension()!==e||S[ne].isEmpty())continue;const Se=S[ne].getGeometryType(),Pe=pe;let Re=0,Oe=0;const we=bi(Se)?S[ne]:null;for(let Fe=Pe,it=B.length;Fe<it&&W[Fe]===ne;Fe++)B[Fe]>=0&&(Re++,Oe+=we?we.getPathSize(B[Fe]):IE(S[ne])),pe++;if(Oe>.95*IE(S[ne])){se.addGeometry(this.normalizeInputGeometry(S[ne]));for(let Fe=Pe;Fe<pe;Fe++)B[Fe]<0&&(B[Fe]=-(B[Fe]+1))}else{if(Re===0){oe=!0;continue}{oe=!0,K(bi(Se)),K(we!=null);const Fe=new Wt({vd:S[ne].getDescription()}),it=new vi({vd:S[ne].getDescription()}),vt=Se===me.enumPolygon?Fe:it;for(let ot=Pe;ot<pe;ot++)B[ot]>=0&&vt.addPath(we,B[ot],!0);se.addGeometry(vt)}}}let ce;if(se.getFirstGeometry()!==ae){const ne=e===2,de=i?Kn(null,f.getEnvelope2D(),!0):P;let Se=new Qo(0,0);if(l&&(Se=i?DE(null,f.getEnvelopeZs(),!0):k),e===2&&!(2&o)){se.collapseAllGeometriesToFirst();let Pe=0,Re=null;if(se.hasCurves()&&!se.hasSegmentParentage()){Re=new ku;const Oe=se.getEnvelope2D(this.m_progressTracker);Pe=Fp(de.total()),Vh(se,Du(de.total(),Oe),de.total(),12e3,Re,null,this.m_progressTracker)}ktt(se,se.getFirstGeometry(),de.total(),this.m_progressTracker),Re!==null&&Re.stitchCurves(se,ae,Pe,!0)}if(l)ce=this.planarSimplify3DImpl_(se,de,Se,u,!0);else if(e===2)ce=this.planarSimplifyPolygons(se,de,ne,i,-1,!1);else{const Pe=z_();Pe.ogcRule=this.m_bOGCOutput,Pe.allCrossRoadsImpassable=!0,Pe.unsplitBehavior=u,ce=this.planarSimplifyPolylines(se,de,i,Pe,-1)}if(!oe){const Pe=[0];F=ce.getImpl().getIsSimple(de.total(),Pe)}}else K(oe),K(_>=0),ce=e===2?new Wt({vd:S[_].getDescription()}):new vi({vd:S[_].getDescription()});if(oe){let ne=0;for(let de=0,Se=B.length;de<Se;de++){const Pe=W[de];if(!(Pe<0)&&B[de]<0){const Re=S[Pe].getGeometryType(),Oe=bi(Re)?S[Pe]:null;if(Oe){const we=-(B[de]+1);ne+=Oe.getPathSize(we)}else ne+=4}}ce.reserve(ce.getPointCount()+ne);for(let de=0,Se=B.length;de<Se;de++){const Pe=W[de];if(!(Pe<0)&&B[de]<0){const Re=S[Pe].getGeometryType(),Oe=bi(Re)?S[Pe]:null;if(Oe){const we=-(B[de]+1);ce.addPath(Oe,we,!0)}else Re===me.enumEnvelope?ce.addEnvelope(S[Pe],!1):(K(Dn(Re)),ce.addSegment(S[Pe],!0))}}}let ue=0;if(e===2?F!==-1&&(F=3,ue=i?0:P.total()):(K(e===1),i||F===-1||(ue=P.total())),l||ce.getImpl().setIsSimple(F,ue),!i&&oe)if(e===2){if(!l)return new Mc().execute(ce,r,!1,this.m_progressTracker);K(0,"3d not yet implemented")}else e===1&&u!==1&&(ce=l?Gst():qst(),ce.getImpl().setIsSimple(F,ue));return ce}dissolveTopoGraphCommonEdges_(){const e=this.m_topoGraph.createUserIndexForHalfEdges(),i=[];for(let s=this.m_topoGraph.getFirstCluster();s!==ae;s=this.m_topoGraph.getNextCluster(s)){const n=this.m_topoGraph.getClusterHalfEdge(s);let r=n;if(n!==ae)do{if(this.progress_(),this.m_topoGraph.getHalfEdgeUserIndex(r,e)!==1){const o=this.m_topoGraph.getHalfEdgeTwin(r);this.m_topoGraph.setHalfEdgeUserIndex(o,e,1),this.m_topoGraph.setHalfEdgeUserIndex(r,e,1);const l=this.m_topoGraph.getHalfEdgeFaceParentage(r);if(this.isGoodParentage(l)){const u=this.m_topoGraph.getHalfEdgeFaceParentage(o);this.isGoodParentage(u)&&i.push(r)}}r=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(r))}while(r!==n)}this.m_topoGraph.deleteUserIndexForHalfEdges(e),this.m_topoGraph.deleteEdgesBreakFaces_(i)}chooseVertexByOrder(e,i,s,n){let r=ya(),o=ae;for(let u=this.m_topoGraph.getClusterVertexIterator(e);u!==ae;u=this.m_topoGraph.incrementVertexIterator(u)){const f=this.m_topoGraph.getVertexFromVertexIterator(u),y=i.getUserIndex(f,s);y>=0&&y<r&&(r=y,o=f)}K(o!==ae);let l=i.getUserIndex(o,n);return l>0&&(i.setUserIndex(o,n,--l),l===0&&i.setUserIndex(o,s,-1)),o}chooseVertexFromCluster_(e,i){return this.m_topoGraph.getVertexDominantFromCluster(e,i)}chooseVertexFromVertexCluster_(e,i){return this.m_topoGraph.getVertexDominant(e,i)}collectPolygonPathsPreservingFrom_(e,i,s,n,r){const o=this.m_topoGraph.getShape();if(o.getGeometryType(e)!==me.enumPolygon)return;const l=o.hasSegmentParentage(),u=new Qt;for(let f=o.getFirstPath(e);f!==ae;f=o.getNextPath(f)){const y=o.getFirstVertex(f);this.m_topoGraph.getClusterFromVertex(y);const _=this.m_topoGraph.getHalfEdgeFromVertex(y);if(_===ae)continue;const x=this.m_topoGraph.getHalfEdgeUserIndex(_,s);if(x===1||x===2)continue;const S=this.m_topoGraph.getHalfEdgeFaceParentage(_);if(!this.isGoodParentage(S)){this.m_topoGraph.setHalfEdgeUserIndex(_,s,2);continue}this.m_topoGraph.setHalfEdgeUserIndex(_,s,1);const P=o.insertPath(i,ae);o.setClosedPath(P,!0);let A=_,k=y,$=this.m_topoGraph.getClusterFromVertex(k),F=1;do{this.progress_();const G=this.chooseVertexFromVertexCluster_(k,r),V=o.addVertex(P,G);if(this.m_topoGraph.isHalfEdgeCurve(A)&&(this.m_topoGraph.querySegmentXY(A,u),o.setSegmentToIndex(o.getVertexIndex(V),u.get().clone())),l){const re=this.m_topoGraph.getSegmentParentage(A);o.setSegmentParentageAndBreak(V,re,this.m_topoGraph.isBreakNode($))}let B,W;n!==-1&&this.m_topoGraph.setClusterUserIndex($,n,1),this.m_topoGraph.setHalfEdgeUserIndex(A,s,1),A=this.m_topoGraph.getHalfEdgeNext(A);do B=F===1?o.getNextVertex(k):o.getPrevVertex(k),W=B!==ae?this.m_topoGraph.getClusterFromVertex(B):ae;while(W===$);const J=this.m_topoGraph.getHalfEdgeOrigin(A);if(J!==W){do B=F===1?o.getPrevVertex(k):o.getNextVertex(k),W=B!==ae?this.m_topoGraph.getClusterFromVertex(B):ae;while(W===$);if(J!==W){W=J;const re=this.m_topoGraph.getClusterVertexIterator(W);B=this.m_topoGraph.getVertexFromVertexIterator(re)}else F=-F}$=W,k=B}while(A!==_)}}topoOperationPolygonPolygonHelper_(e,i,s,n,r,o){this.progress_(!0),e!==ae&&this.collectPolygonPathsPreservingFrom_(e,s,r,o,n),i!==ae&&this.collectPolygonPathsPreservingFrom_(i,s,r,o,n);const l=new Qt,u=this.m_topoGraph.getShape();u.dbgVerifyCurves();const f=u.hasSegmentParentage();for(let y=this.m_topoGraph.getFirstCluster();y!==ae;y=this.m_topoGraph.getNextCluster(y)){const _=this.m_topoGraph.getClusterHalfEdge(y);if(_===ae)continue;let x=_;do{this.progress_();const S=this.m_topoGraph.getHalfEdgeUserIndex(x,r);if(S!==1&&S!==2){const P=this.m_topoGraph.getHalfEdgeFaceParentage(x);if(this.isGoodParentage(P)){const A=u.insertPath(s,ae);u.setClosedPath(A,!0);let k=x;do{const $=this.m_topoGraph.getHalfEdgeVertexIterator(k);let F=ae;if($!==ae)F=this.m_topoGraph.getVertexFromVertexIterator($);else{const B=this.m_topoGraph.getHalfEdgeVertexIterator(this.m_topoGraph.getHalfEdgeTwin(k));F=this.m_topoGraph.getVertexFromVertexIterator(B),F=u.getNextVertex(F)}const G=this.chooseVertexFromVertexCluster_(F,n),V=u.addVertex(A,G);if(f){const B=this.m_topoGraph.getSegmentParentage(k),W=this.m_topoGraph.getHalfEdgeOrigin(k);u.setSegmentParentageAndBreak(V,B,this.m_topoGraph.isBreakNode(W))}if(this.m_topoGraph.isHalfEdgeCurve(k)&&(this.m_topoGraph.querySegmentXY(k,l),u.setSegmentToIndex(u.getVertexIndex(V),l.get().clone())),this.m_topoGraph.setHalfEdgeUserIndex(k,r,1),o!==-1){const B=this.m_topoGraph.getClusterFromVertex(G);this.m_topoGraph.setClusterUserIndex(B,o,1)}k=this.m_topoGraph.getHalfEdgeNext(k)}while(k!==x)}else this.m_topoGraph.setHalfEdgeUserIndex(x,r,2)}x=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(x))}while(x!==_)}}topoOperationPolygonPolygon_(e,i,s,n=!1){this.dissolveTopoGraphCommonEdges_();const r=this.m_topoGraph.getShape(),o=r.createGeometry(me.enumPolygon),l=this.m_topoGraph.createUserIndexForHalfEdges();return this.topoOperationPolygonPolygonHelper_(e,i,o,s,l,-1),this.m_topoGraph.deleteUserIndexForHalfEdges(l),n||lg(r,o,3,this.m_bOGCOutput,ae,this.m_progressTracker),o}topoOperationPolyline_(e,i){const s=z_();return s.allCrossRoadsImpassable=!1,s.ogcRule=i,s.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(ae,e,!1,s).first}topoOperationMultiPoint_(){const e=this.m_topoGraph.getShape(),i=e.createGeometry(me.enumMultiPoint),s=e.insertPath(i,ae);for(let n=this.m_topoGraph.getFirstCluster();n!==ae;n=this.m_topoGraph.getNextCluster(n)){const r=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(r)){let o=ae;for(let l=this.m_topoGraph.getClusterVertexIterator(n);l!==ae;l=this.m_topoGraph.incrementVertexIterator(l)){const u=this.m_topoGraph.getVertexFromVertexIterator(l);o===ae&&(o=u);const f=e.getGeometryFromPath(e.getPathFromVertex(u)),y=this.m_topoGraph.getGeometryID(f);if(this.isGoodParentage(y)){o=u;break}}e.addVertex(s,o)}}return i}intersection(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=hl(s),o=hl(n),l=this.m_topoGraph.getGeometryID(e),u=this.m_topoGraph.getGeometryID(i);K(l>=0),K(u>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|u),this.m_maskLookup[l|u]=!0;let f=ae;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),r===2&&o===2?this.topoOperationPolygonPolygon_(e,i,f):r===1&&o>0||o===1&&r>0?this.topoOperationPolyline_(f,this.m_bOGCOutput):r===0||o===0?this.topoOperationMultiPoint_():void bt("")}topoOperationPolygonPolygonEx(e,i,s){const n=this.m_topoGraph.getShape(),r=n.createGeometry(me.enumPolygon),o=n.createGeometry(me.enumPolyline),l=n.createGeometry(me.enumMultiPoint);this.dissolveTopoGraphCommonEdges_();let u=ae;const f=this.m_topoGraph.createUserIndexForHalfEdges(),y=this.m_topoGraph.createUserIndexForClusters();n.dbgVerifyCurves(),this.topoOperationPolygonPolygonHelper_(e,i,r,s,f,y),n.dbgVerifyCurves();const _=n.hasSegmentParentage(),x=new Qt;for(let P=this.m_topoGraph.getFirstCluster();P!==ae;P=this.m_topoGraph.getNextCluster(P)){const A=this.m_topoGraph.getClusterHalfEdge(P);if(A===ae)continue;let k=A;do{let $=this.m_topoGraph.getHalfEdgeUserIndex(k,f),F=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(k),f),G=$|F;if(G===2){let V=this.m_topoGraph.getHalfEdgeParentage(k);if(this.isGoodParentage(V)){const B=n.insertPath(o,ae);let W=k;const J=this.chooseVertexFromCluster_(P,s);let re=n.addVertex(B,J);if(_){const se=this.m_topoGraph.getSegmentParentage(k),oe=this.m_topoGraph.getHalfEdgeOrigin(k);n.setSegmentParentageAndBreak(re,se,this.m_topoGraph.isBreakNode(oe))}this.m_topoGraph.isHalfEdgeCurve(k)&&(this.m_topoGraph.querySegmentXY(k,x),n.setSegmentToIndex(n.getVertexIndex(re),x.get().clone())),this.m_topoGraph.setClusterUserIndex(P,y,1);do{this.progress_();const se=this.m_topoGraph.getHalfEdgeTo(W),oe=this.chooseVertexFromCluster_(se,s);if(re=n.addVertex(B,oe),_){const pe=this.m_topoGraph.getSegmentParentage(k),ce=this.m_topoGraph.getHalfEdgeOrigin(k);n.setSegmentParentageAndBreak(re,pe,this.m_topoGraph.isBreakNode(ce))}if(this.m_topoGraph.setHalfEdgeUserIndex(W,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f,1),this.m_topoGraph.setClusterUserIndex(se,y,1),W=this.m_topoGraph.getHalfEdgeNext(W),$=this.m_topoGraph.getHalfEdgeUserIndex(W,f),F=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f),G=$|F,G!==2)break;if(V=this.m_topoGraph.getHalfEdgeParentage(W),!this.isGoodParentage(V)){this.m_topoGraph.setHalfEdgeUserIndex(W,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f,1);break}this.m_topoGraph.isHalfEdgeCurve(k)&&W!==k&&(this.m_topoGraph.querySegmentXY(k,x),n.setSegmentToIndex(n.getVertexIndex(re),x.get().clone()))}while(W!==k)}else this.m_topoGraph.setHalfEdgeUserIndex(k,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(k),f,1)}k=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(k))}while(k!==A)}for(let P=this.m_topoGraph.getFirstCluster();P!==ae;P=this.m_topoGraph.getNextCluster(P)){if(this.progress_(),this.m_topoGraph.getClusterUserIndex(P,y)===1)continue;const A=this.m_topoGraph.getClusterParentage(P);if(this.isGoodParentage(A)){u===ae&&(u=n.insertPath(l,ae));const k=this.m_topoGraph.getClusterVertexIterator(P);let $=ae;if(k!==ae){$=this.m_topoGraph.getVertexFromVertexIterator(k);const F=this.chooseVertexFromVertexCluster_($,s);n.addVertex(u,F)}}}this.m_topoGraph.deleteUserIndexForClusters(y),this.m_topoGraph.deleteUserIndexForHalfEdges(f),n.dbgVerifyCurves(),lg(n,r,3,this.m_bOGCOutput,ae,this.m_progressTracker);const S=[ae,ae,ae];return S[0]=l,S[1]=o,S[2]=r,S}topoOperationPolylinePolylineOrPolygonEx(e,i){const s=z_();return s.allCrossRoadsImpassable=!1,s.ogcRule=i,s.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(ae,e,!0,s)}topoOperationMultiPoint(){const e=this.m_topoGraph.getShape(),i=e.createGeometry(me.enumMultiPoint),s=e.insertPath(i,ae);for(let n=this.m_topoGraph.getFirstCluster();n!==ae;n=this.m_topoGraph.getNextCluster(n)){const r=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(r)){let o=ae;for(let l=this.m_topoGraph.getClusterVertexIterator(n);l!==ae;l=this.m_topoGraph.incrementVertexIterator(l)){const u=this.m_topoGraph.getVertexFromVertexIterator(l);o===ae&&(o=u);const f=e.getGeometryFromPath(e.getPathFromVertex(u)),y=this.m_topoGraph.getGeometryID(f);if(this.isGoodParentage(y)){o=u;break}}e.addVertex(s,o)}}return i}intersectionEx(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=nT(s),o=nT(n),l=this.m_topoGraph.getGeometryID(e),u=this.m_topoGraph.getGeometryID(i);K(l>=0),K(u>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|u),this.m_maskLookup[l|u]=!0;let f=ae;if(this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),r===2&&o===2)return this.topoOperationPolygonPolygonEx(e,i,f);if(r===1&&o>0||o===1&&r>0){const{first:y,second:_}=this.topoOperationPolylinePolylineOrPolygonEx(f,this.m_bOGCOutput);return[_,y]}if(r===0||o===0){const y=[];return y.push(this.topoOperationMultiPoint()),y}bt("")}getCombinedHalfEdgeParentage(e){return this.m_topoGraph.getHalfEdgeParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e))}prevailingDirection(e,i){const s=this.getCombinedHalfEdgeParentage(i),n=this.m_topoGraph.getHalfEdgeOrigin(i),r=this.m_topoGraph.getHalfEdgeTo(i);let o=0,l=0;for(let u=this.m_topoGraph.getClusterVertexIterator(n);u!==ae;u=this.m_topoGraph.incrementVertexIterator(u)){const f=this.m_topoGraph.getVertexFromVertexIterator(u),y=e.getPathFromVertex(f),_=e.getGeometryFromPath(y),x=this.m_topoGraph.getGeometryID(_),S=e.getFirstVertex(y),P=!!(x&s);P&&S===f&&(this.m_fromEdgeForPolylines=i);const A=e.getNextVertex(f);if(A!==ae&&this.m_topoGraph.getClusterFromVertex(A)===r){if(o++,P){if(this.m_fromEdgeForPolylines===ae&&S===A){const k=this.m_topoGraph.getHalfEdgeNext(i);this.isGoodParentage(this.getCombinedHalfEdgeParentage(k))&&(this.m_fromEdgeForPolylines=k)}l++}}else{const k=e.getPrevVertex(f);if(k!==ae&&this.m_topoGraph.getClusterFromVertex(k)===r&&(o--,P)){if(this.m_fromEdgeForPolylines===ae&&S===k){const $=this.m_topoGraph.getHalfEdgeNext(i);this.isGoodParentage(this.getCombinedHalfEdgeParentage($))&&(this.m_fromEdgeForPolylines=$)}l--}}}return this.m_topoGraph.queryXY(n,this.m_dummyPt1),this.m_topoGraph.queryXY(r,this.m_dummyPt2),(l!==0?l:o)*Y.distance(this.m_dummyPt1,this.m_dummyPt2)}tryMoveThroughCrossroadBackwards(e,i){const s=this.m_topoGraph.getHalfEdgePrev(e),n=this.m_topoGraph.getHalfEdgeTwin(s);if(!i){if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(e)))return ae;const l=this.m_topoGraph.getHalfEdgeTwin(e);if(n===this.m_topoGraph.getHalfEdgeNext(l))return s}let r=n,o=ae;for(;r!==e;){const l=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(l)){if(o!==ae)return ae;o=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgePrev(r))}return o}tryMoveThroughCrossroadForward(e,i){const s=this.m_topoGraph.getHalfEdgeNext(e),n=this.m_topoGraph.getHalfEdgeTwin(s);if(!i){const l=this.m_topoGraph.getHalfEdgeTwin(e);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(l)))return ae;if(n===this.m_topoGraph.getHalfEdgePrev(l))return s}let r=n,o=ae;for(;r!==e;){const l=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(l)){if(o!==ae)return ae;o=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgeNext(r))}return o}isOnALoop(e,i){let s=e;const n=2*this.m_topoGraph.getShape().getTotalPointCount()+10;for(let r=0;r<n;r++){if(this.m_topoGraph.getHalfEdgeUserIndex(s,i)===1)return!1;const o=this.m_topoGraph.getHalfEdgeNext(s);if(o===this.m_topoGraph.getHalfEdgeTwin(s))return!1;if(s=o,s===e)return!0}bt("is_on_a_loop_")}restorePolylineParts(e,i,s,n,r,o,l,u,f,y){K(r===ae&&o>=0&&l>=0||o===-1&&l===-1),K(u===-1&&y.unsplitBehavior!==1||u!==-1&&y.unsplitBehavior===1);const _=y.ogcRule,x=y.allCrossRoadsImpassable,S=y.unsplitBehavior===1,P=y.unsplitBehavior===0,A=this.m_topoGraph.getShape(),k=A.hasSegmentParentage();let $=e,F=this.m_topoGraph.getHalfEdgeTwin($);const G=new Qt;this.m_fromEdgeForPolylines=ae;let V=this.prevailingDirection(A,$),B=$,W=ae,J=!1,re=!1,se=!1;if(!S)for(;;){const ot=this.m_topoGraph.getHalfEdgePrev($);if(ot===F){se=!0;break}const ut=this.m_topoGraph.getHalfEdgeNext(F);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(ut))){J=!0;break}if(this.m_topoGraph.getHalfEdgeTwin(ot)!==ut){if(x){J=!0;break}if($=this.tryMoveThroughCrossroadBackwards($,!0),$===ae){J=!0;break}F=this.m_topoGraph.getHalfEdgeTwin($)}else $=ot,F=ut;if(this.m_topoGraph.getHalfEdgeUserIndex($,s)===1){se=!0;break}if($===e){W=e,re=!0;break}const Ct=this.getCombinedHalfEdgeParentage($);if(!this.isGoodParentage(Ct))break;B=$,V+=this.prevailingDirection(A,$)}if(W===ae){for($=e,F=this.m_topoGraph.getHalfEdgeTwin($),W=$;;){const ut=this.m_topoGraph.getHalfEdgeNext($),Ct=this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(ut));if(Ct){J=!0;break}if(ut===F){se=!0;break}if(u!==-1){const Dt=this.m_topoGraph.getHalfEdgeOrigin(F);if(this.m_topoGraph.getClusterUserIndex(Dt,u)===1){J=!0;break}}const qt=this.m_topoGraph.getHalfEdgePrev(F);if(this.m_topoGraph.getHalfEdgeTwin(ut)!==qt){if(Ct||x){J=!0;break}if($=this.tryMoveThroughCrossroadForward($,!0),$===ae){J=!0;break}F=this.m_topoGraph.getHalfEdgeTwin($)}else $=ut,F=qt;if(this.m_topoGraph.getHalfEdgeUserIndex($,s)===1){se=!0;break}const Lt=this.getCombinedHalfEdgeParentage($);if(!this.isGoodParentage(Lt))break;W=$,V+=this.prevailingDirection(A,$)}const ot=this.m_topoGraph.getHalfEdgeOrigin(B);re=this.m_topoGraph.getHalfEdgeTo(W)===ot}else if(this.m_fromEdgeForPolylines!==ae){B=e,W=this.tryMoveThroughCrossroadBackwards(B,!1),K(W!==ae);const ot=this.m_topoGraph.getHalfEdgeTwin(B);this.m_topoGraph.getHalfEdgeNext(ot)}let oe=re;re||se||f&&(oe=this.isOnALoop(e,s),oe||(oe=this.isOnALoop(F,s)));const pe=V>=0;let ce=!1;oe&&J&&(re?(ce=_,pe&&(ce||S||P)&&B!==e&&(K(!S),B=e,ce=!1)):(S||pe&&P)&&(B=e));let ue=0;for($=B;F=this.m_topoGraph.getHalfEdgeTwin($),this.m_topoGraph.setHalfEdgeUserIndex($,s,1),this.m_topoGraph.setHalfEdgeUserIndex(F,s,1),ue++,$!==W;)$=x?this.m_topoGraph.getHalfEdgeNext($):this.tryMoveThroughCrossroadForward($,!1);pe||(W=St(B,B=W),W=this.m_topoGraph.getHalfEdgeTwin(W),B=this.m_topoGraph.getHalfEdgeTwin(B));let ne=A.insertPath(i,ae);$=B;const de=this.m_topoGraph.getHalfEdgeOrigin(B);let Se;Se=o!==-1?this.chooseVertexByOrder(de,A,o,l):this.chooseVertexFromCluster_(de,r),this.m_topoGraph.isStrongPathNode(de)&&A.setStrongPathStart(ne,!0);let Pe=A.addVertex(ne,Se),Re=Pe;n!==-1&&this.m_topoGraph.setClusterUserIndex(de,n,1);let Oe=0;const we=ce?Math.trunc((ue+1)/2):-1;let Fe=ae,it=!0,vt=ae;for(;;){if(k){const qt=this.m_topoGraph.getSegmentParentage($),Lt=this.m_topoGraph.getHalfEdgeOrigin($);A.setSegmentParentageAndBreak(Re,qt,it||this.m_topoGraph.isBreakNode(Lt))}it=!1,this.m_topoGraph.isHalfEdgeCurve($)&&(this.m_topoGraph.querySegmentXY($,G),A.setSegmentToIndex(A.getVertexIndex(Re),G.get().clone())),Fe!==ae&&l!==-1&&A.addToUserIndex(Fe,l,-1);const ot=x?this.m_topoGraph.getHalfEdgeNext($):this.tryMoveThroughCrossroadForward($,!1),ut=this.m_topoGraph.getHalfEdgeTo($);let Ct;if(Ct=o!==-1?this.chooseVertexByOrder(ut,A,o,l):this.chooseVertexFromCluster_(ut,r),Pe=A.addVertex(ne,Ct),vt=ut,n!==-1&&this.m_topoGraph.setClusterUserIndex(ut,n,1),k&&this.m_topoGraph.isBreakNode(ut)&&A.setSegmentParentageBreakVertex(Pe,!0),Fe=Ct,Oe++,ce&&Oe===we&&(ne=A.insertPath(i,ae),Pe=A.addVertex(ne,Ct),it=!0,l!==-1&&A.addToUserIndex(Ct,l,-1),Fe=ae),$===W)break;$=ot,Re=Pe}vt!==ae&&this.m_topoGraph.isStrongPathNode(vt)&&A.setStrongPathEnd(ne,!0)}topoOperationPolylineSimplify_(e,i){return this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,i).first}topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,i,s,n){K(i===ae||e===ae);const r=this.m_topoGraph.getShape(),o=P=>P=e===ae?P===ae?r.getFirstGeometry():r.getNextGeometry(P):P===ae?e:ae,l=r.createGeometry(me.enumPolyline);let u=-1;s&&(u=this.m_topoGraph.createUserIndexForClusters());const f=this.m_topoGraph.createUserIndexForHalfEdges(),y=i===ae?r.createUserIndex():-1,_=i===ae?r.createUserIndex():-1;let x=-1;if(n.unsplitBehavior===1){x=this.m_topoGraph.createUserIndexForClusters();for(let P=o(ae);P!==ae;P=o(P))for(let A=r.getFirstPath(P);A!==ae;A=r.getNextPath(A)){{const k=r.getFirstVertex(A),$=this.m_topoGraph.getClusterFromVertex(k);this.m_topoGraph.setClusterUserIndex($,x,1)}if(!r.isClosedPath(A)){const k=r.getLastVertex(A),$=this.m_topoGraph.getClusterFromVertex(k);this.m_topoGraph.setClusterUserIndex($,x,1)}}}if(i===ae){let P=0;for(let A=o(ae);A!==ae;A=o(A))for(let k=r.getFirstPath(A);k!==ae;k=r.getNextPath(k))if(r.isClosedPath(k)){let $=r.getFirstVertex(k);for(let F=0,G=r.getPathSize(k);F<G;F++,$=r.getNextVertex($))r.setUserIndex($,y,P++),r.setUserIndex($,_,2)}else{const $=r.getFirstVertex(k);r.setUserIndex($,y,P++),r.setUserIndex($,_,1);let F=r.getNextVertex($);for(let G=1,V=r.getPathSize(k)-1;G<V;++G)r.setUserIndex(F,y,P++),r.setUserIndex(F,_,2),F=r.getNextVertex(F);r.setUserIndex(F,y,P++),r.setUserIndex(F,_,1)}}for(let P=o(ae);P!==ae;P=o(P))for(let A=r.getFirstPath(P);A!==ae;A=r.getNextPath(A)){let k=r.getFirstVertex(A);for(let $=0,F=r.getPathSize(A);$<F;$++,k=r.getNextVertex(k)){const G=this.m_topoGraph.getHalfEdgeFromVertex(k);if(G===ae||this.m_topoGraph.getHalfEdgeUserIndex(G,f)===1)continue;const V=this.getCombinedHalfEdgeParentage(G);if(this.isGoodParentage(V)){const B=$===0;this.restorePolylineParts(G,l,f,u,i,y,_,x,B,n)}}}let S=ae;if(s){S=r.createGeometry(me.enumMultiPoint);let P=ae;for(let A=this.m_topoGraph.getFirstCluster();A!==ae;A=this.m_topoGraph.getNextCluster(A))if(this.progress_(),this.m_topoGraph.getClusterUserIndex(A,u)!==1){const k=this.m_topoGraph.getClusterParentage(A);if(this.isGoodParentage(k)){P===ae&&(P=r.insertPath(S,ae));const $=this.m_topoGraph.getClusterVertexIterator(A);if($!==ae){let F;this.m_topoGraph.getVertexFromVertexIterator($),F=y!==-1?this.chooseVertexByOrder(A,r,y,_):this.chooseVertexFromCluster_(A,i),r.addVertex(P,F)}}}}return _!==-1&&r.removeUserIndex(_),y!==-1&&r.removeUserIndex(y),u!==-1&&r.removeUserIndex(u),this.m_topoGraph.deleteUserIndexForHalfEdges(f),rr(l,S)}difference(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=hl(s),o=hl(n);if(r>o)return e;const l=this.m_topoGraph.getGeometryID(e),u=this.m_topoGraph.getGeometryID(i);if(this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|u),this.m_maskLookup[l]=!0,r===2&&o===2){let f=ae;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),this.topoOperationPolygonPolygon_(e,i,f)}if(r===1&&o===2){const f=z_();return f.allCrossRoadsImpassable=!1,f.ogcRule=this.m_bOGCOutput,f.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,f).first}if(r===1&&o===1){const f=z_();return f.allCrossRoadsImpassable=!0,f.ogcRule=this.m_bOGCOutput,f.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,f).first}if(r===0)return this.topoOperationMultiPoint_();bt("")}symmetricDifference(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=nT(s),o=nT(n),l=this.m_topoGraph.getGeometryID(e),u=this.m_topoGraph.getGeometryID(i);return K(l>=0),K(u>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|u),this.m_maskLookup[l]=!0,this.m_maskLookup[l]=!0,this.m_maskLookup[u]=!0,r===2&&o===2?this.topoOperationPolygonPolygon_(e,i,ae):r===1&&o===1?this.topoOperationPolyline_(ae,this.m_bOGCOutput):r===0&&o===0?this.topoOperationMultiPoint():void bt("")}planarSimplifyNoCrackingAndCluster(e,i,s,n){return K(0),!1}unsplitPolylineExact(e){return K(0),new vi}planarSimplifyPolylines(e,i,s,n,r){for(let S=e.getFirstGeometry();S!==ae;S=e.getNextGeometry(S)){const P=e.getGeometryType(S);K(P===me.enumPolyline)}let o=0,l=0,u=null;if(e.hasCurves()&&!e.hasSegmentParentage()){u=new ku;const S=e.getEnvelope2D(this.m_progressTracker);l=Fp(i.total());const P=Du(i.total(),S);o=of(P,l),Vh(e,P,i.total(),12e3,u,null,this.m_progressTracker)}{const S=rye(i.add(o));e.filterClosePoints(S,!1,!1,!1,ae)}if(this.m_topoGraph=new qh,r!==4&&r!==5)if(u===null&&s){const S=new Nz(this.m_progressTracker,!1);S.sweepVertical(e,i.total()),S.hadComplications()?(Yd(e,i,this.m_progressTracker,!0,!1),s=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(i.total())}else Yd(e,i.add(o),this.m_progressTracker,!0,!1),s=!1;else s=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const f=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,f,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(s&&u===null),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolylines(e,i,!1,n,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const y=this.m_topoGraph.getGeometryID(f);K(y>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=y+1,this.m_maskLookup[y]=!0;const _=this.topoOperationPolylineSimplify_(e.getFirstGeometry(),n);u!==null&&u.stitchCurves(e,_,l,!0);const x=e.getGeometry(_);return s||x.getImpl().setIsSimple(4,i.total()),x}planarSimplifyMultiPoints(e,i,s,n){for(let f=e.getFirstGeometry();f!==ae;f=e.getNextGeometry(f)){const y=e.getGeometryType(f);K(y===me.enumMultiPoint)}this.m_topoGraph=new qh,n!==4&&n!==5&&Yd(e,i,this.m_progressTracker,!0,!1),s=!1,e.removeSelection(),e.collapseAllGeometriesToFirst();const r=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,r,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(s),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyMultiPoints(e,i,!1,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const o=this.m_topoGraph.getGeometryID(r);K(o>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=o+1,this.m_maskLookup[o]=!0;const l=this.topoOperationMultiPoint(),u=e.getGeometry(l);return s||u.getImpl().setIsSimple(4,i.total()),u}planarSimplifyPolygons(e,i,s,n,r,o){for(let k=e.getFirstGeometry();k!==ae;k=e.getNextGeometry(k)){const $=e.getGeometryType(k);K($===me.enumPolygon||$===me.enumPolyline&&s)}let l=0,u=0,f=null;if(e.hasCurves()&&!e.hasSegmentParentage()){f=new ku;const k=e.getEnvelope2D(this.m_progressTracker);u=Fp(i.total());const $=Du(i.total(),k);l=of($,u),Vh(e,$,i.total(),12e3,f,null,this.m_progressTracker)}if(o){Yd(e,i.add(l),this.m_progressTracker,!0,!1);for(let k=e.getFirstGeometry();k!==ae;k=e.getNextGeometry(k))e.getGeometryType(k)===me.enumPolygon&&lg(e,k,-1,!1,ae,this.m_progressTracker)}if(this.m_topoGraph=new qh,o||r===4||r===5)n=!1;else if(f===null&&n){const k=new Nz(this.m_progressTracker,!1);k.sweepVertical(e,i.total()),k.hadComplications()?(Yd(e,i,this.m_progressTracker,!0,!1),n=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(i.total())}else Yd(e,i.add(l),this.m_progressTracker,!0,!1),n=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const y=e.getFirstGeometry();if(s?this.m_topoGraph.setAndSimplifyEditShapeWinding(e,y,this.m_progressTracker):this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,y,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(n&&f===null),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolygons(e,i,s,!1,-1,!1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const _=this.m_topoGraph.getGeometryID(y);K(_>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=_+1,this.m_maskLookup[_]=!0,e.setFillRule(y,0);const x=this.m_bOGCOutput&&s,S=x;let P=this.topoOperationPolygonPolygon_(y,ae,ae,S);x&&(this.m_topoGraph.removeShape(),this.m_topoGraph=null,e.removeGeometry(y),this.m_topoGraph=new qh,this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,P,this.m_progressTracker),P=this.topoOperationPolygonPolygon_(P,ae,ae,!1)),f!==null&&f.stitchCurves(e,P,u,!0);const A=e.getGeometry(P);return A.setFillRule(0),n?A.getImpl().setIsSimple(3,0):(A.getImpl().setIsSimple(4,i.total()),A.getImpl().updateOGCFlagsProtected()),A}planarSimplify3DImpl_(e,i,s,n,r){return K(0),{}}planarSimplifyImpl_(e,i,s,n,r,o,l,u){if(e.isEmpty())return e.clone();const f=e.getGeometryType(),y=new Bs,_=y.addGeometry(e);if(wf(r)&&f===me.enumPolygon&&(s=!1,y.setFillRule(_,0)),u&&(e.hasAttribute(1)&&y.replaceNaNs(1,0),y.removeNaNVertices()),f===me.enumPolygon||f===me.enumPolyline&&s)return this.planarSimplifyPolygons(y,i,s,n,r,!1);if(f===vi.type){const x=z_();return x.allCrossRoadsImpassable=!0,x.ogcRule=this.m_bOGCOutput,x.unsplitBehavior=l,this.planarSimplifyPolylines(y,i,n,x,r)}if(f===me.enumMultiPoint)return this.planarSimplifyMultiPoints(y,i,n,r);bt("what else?")}}function Xst(t,e,i,s){if(t.isEmpty())return t.createInstance();if(e.isEmpty())return s?t.createInstance():new Ut({copy:t});const n=[new Y],r=[0],o=e.getDimension()===2;return e.getDimension()!==1&&e.getDimension()!==2&&bt(""),n[0]=t.getXY(),o?sye(e,n,1,i.total(),r):nye(e,n,1,i.total(),r),r[0]===0?t.createInstance():t}function Wst(t,e,i,s){const n=t.createInstance(),r=Ge(Y,100),o=new Array(100),l=t.getPointCount();let u=!0;const f=e.getDimension()===2;e.getDimension()!==1&&e.getDimension()!==2&&bt("");for(let y=0;y<l;){const _=t.queryCoordinates(r,r.length,y,-1)-y;f?sye(e,r,_,i.total(),o):nye(e,r,_,i.total(),o);let x=0;for(let S=0;S<_;S++)o[S]===0&&(u&&(u=!1,n.addPoints(t,0,y)),x!==S&&n.addPoints(t,y+x,y+S),x=S+1);u||x===_||n.addPoints(t,y+x,y+_),y+=_}return u?t:n}function Up(t,e,i,s){const n=t.getGeometryType();if(n===me.enumEnvelope){const r=new Wt({vd:t.getDescription()});return t.isEmpty()||r.addEnvelope(t,!1),r}if(n===me.enumPoint&&(s==="|"||s==="^")){const r=new Jn({vd:t.getDescription()});return t.isEmpty()||r.add(t),r}if(n===me.enumLine){const r=new vi({vd:t.getDescription()});return t.isEmpty()||r.addSegment(t,!0),r}if(n===me.enumMultiPoint&&s==="-"&&e.getGeometryType()===me.enumPoint){const r=new Ut({vd:t.getDescription()});return t.isEmpty()||t.getPointByVal(0,r),r}if(n===me.enumMultiPoint&&s==="&"&&e.getGeometryType()===me.enumPoint){const r=new Ut({vd:t.getDescription()});return t.isEmpty()||t.getPointByVal(0,r),r}return t}function Yo(t){const e=t.getGeometryType();if(e===me.enumEnvelope){const i=new Wt({vd:t.getDescription()});return t.isEmpty()||i.addEnvelope(t,!1),i}if(e===me.enumPoint){const i=new Jn({vd:t.getDescription()});return t.isEmpty()||i.add(t),i}if(zst(e)){const i=new vi({vd:t.getDescription()});return t.isEmpty()||i.addSegment(t,!0),i}return e!==me.enumMultiPoint&&e!==me.enumPolyline&&e!==me.enumPolygon&&Je("Unexpected geometry type"),t}function RN(t,e,i,s){const n=i===ae?t.getClusterHalfEdge(e):i;let r=n;K(t.getHalfEdgeOrigin(n)===e);do s(r),r=t.getHalfEdgeNext(t.getHalfEdgeTwin(r));while(r!==n)}class Zst{constructor(e,i,s,n,r,o){this.m_rParent=e,this.m_rTopoGraph=e.m_topoGraph,this.m_rShape=this.m_rTopoGraph.getShape(),this.m_IDCuttee=this.m_rTopoGraph.getGeometryID(n),this.m_IDCutter=this.m_rTopoGraph.getGeometryID(r),this.m_IDBoth=this.m_IDCuttee|this.m_IDCutter,this.m_bConsiderTouch=i,this.m_sideIndex=s,this.m_cuttee=n,this.m_cutter=r,this.m_rCutHandles=o,this.m_cutteeBreadcrumbsIndex=this.m_rShape.createUserIndexUninitialized(),this.m_clusterParentageIndex=this.m_rShape.createUserIndexUninitialized();for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){let u=0;const f=this.m_rShape.getPathSize(l);for(let y=this.m_rShape.getFirstVertex(l);u<f;u++,y=this.m_rShape.getNextVertex(y))this.m_rShape.setUserIndex(y,this.m_clusterParentageIndex,this.m_rTopoGraph.getClusterParentage(this.m_rTopoGraph.getClusterFromVertex(y)))}}Do(){this.cutPolylinePolyline_(),this.m_rShape.removeUserIndex(this.m_cutteeBreadcrumbsIndex),this.m_rShape.removeUserIndex(this.m_clusterParentageIndex)}setTbd(e){return 8|e}classifyStandardCut(e,i,s,n){const r=this.m_rShape.getPrevVertex(e),o=this.m_rShape.getNextVertex(e),l=r===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(r)),u=o===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(o)),f=this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(s)),y=this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(n));let _=1,x=32,S=32;if(RN(this.m_rTopoGraph,i,y,P=>{P===f&&(_=2),P===l&&(x=_),P===u&&(S=_)}),this.m_bConsiderTouch)x!==32&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|x),S!==32&&this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|S);else{if(x===32||S===32||x===S&&!(l===f||l===y||u===f||u===y))return 1;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|x),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|S)}return 0}classifyTouchCut(e,i,s,n){const r=this.m_rShape.getPrevVertex(e),o=this.m_rShape.getNextVertex(e),l=r===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(r)),u=o===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(o)),f=s===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(s)),y=n===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(n));if(!this.m_bConsiderTouch){let _;return(_=f===l||y===l)?this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))):(_=f===u||y===u)&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),_?0:1}if(l===ae)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(u===ae)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;if(l===u)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(y!==ae){if(l===y)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(u===y)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let _=1;RN(this.m_rTopoGraph,i,y,x=>{if(x===l){const S=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,S),_=2}else if(x===u){const S=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,S),_=2}})}else{if(l===f)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(u===f)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let _=2;RN(this.m_rTopoGraph,i,f,x=>{if(x===l){const S=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,S),_=1}else if(x===u){const S=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,S),_=1}})}return 0}classifyCutVertex(e,i){let s=0,n=0;for(let r=this.m_rTopoGraph.getClusterVertexIterator(i);r!==ae;r=this.m_rTopoGraph.incrementVertexIterator(r)){const o=this.m_rTopoGraph.getVertexFromVertexIterator(r);if(this.m_rShape.getGeometryFromVertex(o)===this.m_cutter){n++;const l=this.m_rShape.getPrevVertex(o),u=this.m_rShape.getNextVertex(o);s+=l===ae||u===ae?this.classifyTouchCut(e,i,l,u):this.classifyStandardCut(e,i,l,u)}}n&&s===n&&!this.m_bConsiderTouch&&this.m_rShape.setUserIndex(e,this.m_clusterParentageIndex,this.m_IDCuttee)}cutPolylinePolyline_(){this.m_rShape.getGeometryType(this.m_cuttee),this.m_rShape.getGeometryType(this.m_cutter),this.m_rParent.m_maskLookup.length=0,this.m_rParent.m_maskLookup.length=this.m_IDBoth+1,this.m_rParent.m_maskLookup[this.m_IDBoth]=!0;for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){const u=this.m_rShape.getPathSize(l);let f=this.m_rShape.getFirstVertex(l);for(let y=0;y<u;++y,f=this.m_rShape.getNextVertex(f))this.m_rShape.setUserIndex(f,this.m_cutteeBreadcrumbsIndex,0);f=this.m_rShape.getFirstVertex(l);for(let y=0;y<u;++y,f=this.m_rShape.getNextVertex(f)){const _=this.m_rTopoGraph.getClusterFromVertex(f);this.m_rTopoGraph.getClusterParentage(_)===this.m_IDBoth&&this.classifyCutVertex(f,_)}}const e=(l,u)=>{let f=this.m_rShape.getUserIndex(l,this.m_cutteeBreadcrumbsIndex);const y=this.m_rTopoGraph.getHalfEdgeConnector(this.m_rTopoGraph.getClusterFromVertex(l),this.m_rTopoGraph.getClusterFromVertex(u));return(this.m_rTopoGraph.getHalfEdgeParentage(y)&this.m_IDBoth)===this.m_IDBoth&&(f|=4),f};for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){let u=this.m_rShape.getFirstVertex(l);const f=this.m_rShape.isClosedPath(l),y=this.m_rShape.getPathSize(l)+(f?1:0);let _=1,x=32;for(let P=this.m_rShape.getNextVertex(u);_<y;++_,u=P,P=this.m_rShape.getNextVertex(P)){const A=e(u,P);this.m_rShape.getUserIndex(u,this.m_clusterParentageIndex)===this.m_IDBoth&&(x=A),x!==32&&this.m_rShape.setUserIndex(u,this.m_cutteeBreadcrumbsIndex,x|A)}u=this.m_rShape.getLastVertex(l);let S=32;_=1;for(let P=this.m_rShape.getPrevVertex(u);_<y;++_,u=P,P=this.m_rShape.getPrevVertex(P)){const A=e(P,u);this.m_rShape.getUserIndex(u,this.m_clusterParentageIndex)===this.m_IDBoth&&(S=A),S!==32&&this.m_rShape.setUserIndex(P,this.m_cutteeBreadcrumbsIndex,S|A)}}let i=ae,s=ae,n=32;const r=this.m_rShape.hasSegmentParentage(),o=new Qt;for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){const u=this.m_rShape.isClosedPath(l),f=this.m_rShape.getPathSize(l)+(u?1:0);let y=1,_=this.m_rShape.getFirstVertex(l),x=ae,S=!0;for(let P=this.m_rShape.getNextVertex(_);y<f;++y,P=this.m_rShape.getNextVertex(P)){let A=this.m_rShape.getUserIndex(_,this.m_cutteeBreadcrumbsIndex);A===8?A=3:(A&=-9,4&A?A=4:3&~A||(A=3)),A!==n?(i!==ae&&(x=this.m_rShape.addVertex(s,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),this.m_rCutHandles.push(i),this.m_rShape.setGeometryUserIndex(i,this.m_sideIndex,n)),i=this.m_rShape.createGeometry(me.enumPolyline),s=this.m_rShape.insertPath(i,ae),n=A,S=!0):this.m_rShape.getUserIndex(_,this.m_clusterParentageIndex)===this.m_IDBoth&&A!==4&&(x=this.m_rShape.addVertex(s,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),s=this.m_rShape.insertPath(i,ae),S=!0),x=this.m_rShape.addVertex(s,_);const k=this.m_rTopoGraph.getClusterFromVertex(_);!S&&r&&this.m_rTopoGraph.isBreakNode(k)&&this.m_rShape.setSegmentParentageBreakVertex(x,!0);const $=this.m_rTopoGraph.getHalfEdgeFromVertex(_);if(r){const F=this.m_rTopoGraph.getSegmentParentage($);this.m_rShape.setSegmentParentageAndBreak(x,F,S||this.m_rTopoGraph.isBreakNode(k))}this.m_rTopoGraph.isHalfEdgeCurve($)&&(this.m_rTopoGraph.querySegmentXY($,o),this.m_rShape.setSegmentToIndex(this.m_rShape.getVertexIndex(x),o.get().clone())),_=P,S=!1}x=this.m_rShape.addVertex(s,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),this.m_rCutHandles.push(i),this.m_rShape.setGeometryUserIndex(i,this.m_sideIndex,n),i=ae,s=ae,n=32}}}function Kst(t,e,i,s,n){if(s&&(s.m_reason=0,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return m5(t,s);const o=xl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=new xe;return _.queryEnvelope(x),x.isDegenerate(o)?(s&&(s.m_reason=4,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),0):5}if(Dn(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),Lj(x,e,i,s,n)}const l=[0],u=t.getImpl().getIsSimple(o,l);let f=i?-1:u;if(yg(f)||f===0)return f;const y=new Au(t,e,f,n,!1);return r===me.enumMultiPoint||r===me.enumPolyline||r===me.enumPolygon?f=y.isSimplePlanarImpl():bt(""),t.getImpl().setIsSimple(f,o),s&&s.assign(y.m_nonSimpleResult),f}function oye(t,e,i,s,n){if(s&&(s.m_reason=0,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return m5(t,s);const o=xl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=new xe;return _.queryEnvelope(x),x.isDegenerate(o)?(s&&(s.m_reason=4,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),0):5}if(Dn(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),oye(x,e,i,s,n)}WA(r),tl(r)||js("OGC simplify is not implemented for this geometry type");const l=[0],u=t.getImpl().getIsSimple(o,l);let f=i?-1:u;if(f===5||f===0)return f;const y=new Au(t,e,f,n,!0);return r===me.enumMultiPoint||r===me.enumPolyline||r===me.enumPolygon?(f=y.isSimplePlanarImpl(),yg(f)&&(f=5)):bt(""),t.getImpl().setIsSimple(f,o),s&&s.assign(y.m_nonSimpleResult),f}function Lj(t,e,i,s,n){if(s&&(s.m_reason=0,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return m5(t,s);const o=xl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=xe.constructEmpty();return _.queryEnvelope(x),x.isDegenerate(o)?(s&&(s.m_reason=4,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),0):5}if(Dn(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),Lj(x,e,i,s,n)}const l=[0],u=t.getImpl().getIsSimple(o,l);let f=i?-1:u;if(f!==-1)return f;const y=new Au(t,e,f,n,!1);return r===me.enumMultiPoint?f=y.multipointIsSimpleAsFeature():r===me.enumPolyline?f=y.polylineIsSimpleAsFeature():r===me.enumPolygon?f=y.polygonIsSimpleAsFeature():bt(""),t.getImpl().setIsSimple(f,o),s&&s.assign(y.m_nonSimpleResult),f}function aye(t,e,i,s){if(t.isEmpty())return t;const n=t.getGeometryType();if(n===me.enumPoint){const _=new xs;if(m5(t,_),_.m_reason===3){const x=t.clone();return x.replaceNaNs(1,0),x}return _.m_reason===2?t.createInstance():t}if(n===me.enumEnvelope){const _=xl(e,t,!0).total(),x=t,S=xe.constructEmpty();return x.queryEnvelope(S),S.isDegenerate(_)?x.createInstance():t}if(Dn(n)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),aye(x,e,i,s)}WA(n);const r=xl(e,t,!1).total(),o=[0],l=t.getImpl().getIsSimple(r,o),u=i?-1:l;if(yg(u)){if(n===me.enumPolygon&&t.getFillRule()!==0){const _=t.clone();return _.setFillRule(0),_}return t}if((n===me.enumMultiPoint||n===me.enumPolyline)&&u>=1)return t;const f=new Au(t,e,u,s,!1);let y;return n===me.enumMultiPoint?y=f.multipointSimplifyAsFeature():n===me.enumPolyline?y=f.polylineSimplifyAsFeature():n===me.enumPolygon?y=f.polygonSimplifyAsFeature():bt(""),y}function lye(t,e,i,s){if(t.isEmpty())return t;const n=t.getGeometryType();if(n===me.enumPoint){const f=new xs;if(m5(t,f),f.m_reason===3){const y=t.clone();return y.replaceNaNs(1,0),y}return f.m_reason===2?t.createInstance():t}if(n===me.enumEnvelope){const f=t,y=new xe;f.queryEnvelope(y);const _=xl(e,t,!0).total();return y.isDegenerate(_)?f.createInstance():t}if(Dn(n)){const f=t,y=new vi({vd:f.getDescription()});return y.addSegment(f,!0),lye(y,e,i,s)}WA(n),tl(n)||js("OGC simplify is not implemented for this geometry type");const r=xl(e,t,!1).total(),o=[0],l=t.getImpl().getIsSimple(r,o),u=i?-1:l;if(u===5){if(n===me.enumPolygon&&t.getFillRule()!==0){const f=t.clone();return f.setFillRule(0),f}return t}return $z(t,xl(e,t,!0),!1,u,s,0,!0)}function m5(t,e){const i=t.getX(),s=t.getY();if(!Number.isFinite(i)||!Number.isFinite(s))return e&&(e.m_reason=2,e.m_vertexIndex1=-1,e.m_vertexIndex2=-1),0;if(t.hasAttribute(1)){const n=t.getZ();if(!Number.isFinite(n))return e&&(e.m_reason=Number.isNaN(n)?3:2,e.m_vertexIndex1=-1,e.m_vertexIndex2=-1),0}return 5}class tse{constructor(){this.m_segment=null,this.m_vertexIndex=-1,this.m_pathIndex=-1,this.m_flags=0}setReversed(e){this.m_flags&=-2,this.m_flags=this.m_flags|(e?1:0)}getReversed(){return!!(1&this.m_flags)}getRightSide(){return this.getReversed()?0:1}}function Jst(){return{x:-1,y:-1,ipath:-1,ivertex:-1,ipolygon:-1}}function Qst(t,e,i,s,n){return{x:t,y:e,ipath:i,ivertex:s,ipolygon:n}}function ent(t,e){return t.x===e.x&&t.y===e.y&&t.ipath===e.ipath&&t.ivertex===e.ivertex&&t.ipolygon===e.ipolygon}function tnt(t,e){t.x=e.x,t.y=e.y,t.ipath=e.ipath,t.ivertex=e.ivertex,t.ipolygon=e.ipolygon}function int(){return{x:-1,y:-1,ipath:-1,ivertex:-1,bBoundary:!1,bEndPoint:!1}}function snt(t,e,i,s,n,r){return{x:t,y:e,ipath:i,ivertex:s,bBoundary:n,bEndPoint:r}}function nnt(t,e){t.x=e.x,t.y=e.y,t.ipath=e.ipath,t.ivertex=e.ivertex,t.bBoundary=e.bBoundary,t.bEndPoint=e.bEndPoint}class rnt extends Vv{constructor(e){super(),this.m_helper=e}compare(e,i,s){const n=e.getElement(s),r=this.m_helper.m_xy.read(2*i)-this.m_helper.m_xy.read(2*n);return r<0?-1:r>0?1:0}}class ont extends Vv{constructor(e){super(),this.m_helper=e}compare(e,i,s){const n=e.getElement(s),r=this.m_helper.m_edges[i],o=this.m_helper.m_edges[n],l=r.getReversed(),u=o.getReversed();let f=r.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0),y=o.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0);if(f===y){const _=l?r.m_segment.getStartY():r.m_segment.getEndY(),x=u?o.m_segment.getStartY():o.m_segment.getEndY(),S=Math.min(_,x);let P=.5*(S-this.m_helper.m_yScanline)+this.m_helper.m_yScanline;P===this.m_helper.m_yScanline&&(P=S),f=r.m_segment.intersectionOfYMonotonicWithAxisX(P,0),y=o.m_segment.intersectionOfYMonotonicWithAxisX(P,0)}return f<y?-1:f>y?1:0}}class Au{constructor(e,i,s,n,r){this.m_multiVertexGeom=null,this.m_edges=[],this.m_freeEdges=[],this.m_lineEdgesRecycle=[],this.m_newEdges=[],this.m_recycledSegIter=null,this.m_crossOverHelperList=new to,this.m_progressTracker=null,this.m_progressCounter=0,this.m_AET=new jt,this.m_xyToNode1=null,this.m_xyToNode2=null,this.m_pathOrientations=null,this.m_pathParentage=null,this.m_xy=null,this.m_pairs=[],this.m_pairIndices=null,this.m_pathsForOGCTests=[],this.m_curveStitcher=null,this.m_editShape=null,this.m_multiPathStitcher=null,this.m_nonSimpleResult=new xs,this.m_progressCounter=0,this.m_progressTracker=n,this.m_geometry=e,this.m_knownSimpleResult=s,this.m_sr=i;const o=xl(i,e,!1);this.m_toleranceIsSimple=o,this.m_toleranceIsSimpleClustering=Yc(o),this.m_toleranceIsSimpleCracking=kge(o),this.m_toleranceSimplify=xl(i,e,!0),this.m_description=this.m_geometry.getDescription(),this.m_attributeCount=this.m_description.getAttributeCount(),this.m_bOGCRestrictions=r,this.m_bPlanarSimplify=this.m_bOGCRestrictions,this.m_unknownOrientationPathCount=-1,this.m_yScanline=0,this.m_progressCounter=0}isSimplePlanarImpl(){if(this.m_bPlanarSimplify=!0,!this.checkStructure())return 0;const e=this.m_geometry.getGeometryType();return bi(e)&&!this.checkDegenerateSegments(!1)?0:this._CheckClustering()?bi(e)?this._CheckCracking()?this.m_geometry.getGeometryType()===me.enumPolyline?this.checkSelfIntersectionsPolylinePlanar()?4:0:this._CheckSelfIntersections()?this._CheckValidRingOrientation():0:0:5:0}isSimplePlanarImpl3D(){return K(0),7}generateSortedPairs(e){let i=null;bi(e.getGeometryType())&&(i=e);const s=(this.m_bPlanarSimplify||this.m_bOGCRestrictions)&&i!==null,n=e.getPointCount();this.m_xy=e.getAttributeStreamRef(0),this.m_pairs.length=0,this.m_pairIndices=new Ns(0),s&&(this.m_pathsForOGCTests.length=0);let r=0;for(let u=0;u<n;u++)if(this.m_pairs.push(2*u),this.m_pairs.push(2*u+1),this.m_pairIndices.add(2*u),this.m_pairIndices.add(2*u+1),s){for(;u>=i.getPathEnd(r);)r++;this.m_pathsForOGCTests.push(r)}const o=new ad,l={parent:this,workPt:new Y,userSort(u,f,y){y.sort(u,f,(_,x)=>this.parent.compareVerticesForPlanarClustering(_,x,s))},getValue(u){const f=this.parent.m_pairs[u],y=f>>1;return this.parent.m_xy.queryPoint2D(2*y,this.workPt),this.workPt.y+(1&f?this.parent.m_toleranceIsSimpleClustering:-this.parent.m_toleranceIsSimpleClustering)}};o.sort(this.m_pairIndices,0,2*n,l)}_TestToleranceDistancePlanar(e,i){const s=this.m_xy.read(2*e),n=this.m_xy.read(2*e+1),r=this.m_xy.read(2*i),o=this.m_xy.read(2*i+1);return Nj(s,n,r,o,this.m_toleranceIsSimpleClustering*this.m_toleranceIsSimpleClustering)?this.m_geometry.getDimension()===0?!1:s===r&&n===o:!0}checkStructure(){const e=this.m_geometry.getGeometryType();if(bi(e)){const i=this.m_geometry.getImpl(),s=this.m_geometry.getGeometryType()===me.enumPolygon?3:2;for(let n=0,r=i.getPathCount();n<r;n++)if(i.getPathSize(n)<s){if(i.hasNonLinearSegments()&&i.hasNonLinearSegmentsPath(n)&&i.getPathSize(n)>0)continue;return this.m_nonSimpleResult=new xs(1,n,0),!1}}if(tl(e)){const i=this.m_geometry.getImpl(),s=i.getAttributeStreamRef(0);for(let n=0,r=i.getPointCount();n<r;n++)if(!s.readPoint2D(2*n).isFinite())return this.m_nonSimpleResult=new xs(2,n,0),!1;if(this.m_geometry.hasAttribute(1)){const n=i.getAttributeStreamRef(1);for(let r=0,o=i.getPointCount();r<o;r++){const l=n.read(r);if(!Number.isFinite(l))return Number.isNaN(l)?this.m_nonSimpleResult=new xs(3,r,0):this.m_nonSimpleResult=new xs(2,r,0),!1}}}return!0}checkDegenerateSegments(e){const i=this.m_geometry.getImpl(),s=i.querySegmentIterator(),n=i.hasAttribute(1),r=n?fte(this.m_sr,i,!1).total():0,o=i.hasNonLinearSegments(),l=this.m_toleranceIsSimple.total();for(;s.nextPath();)for(;s.hasNextSegment();){const u=s.nextSegment();let f=u.calculateLowerLength2D();if(!(f>l)&&!(o&&u.isCurve()&&(f=u.calculateLength2D(),f>l))){if(e&&n){const y=u.getStartAttributeAsDbl(1,0),_=u.getEndAttributeAsDbl(1,0);if(Math.abs(_-y)>r)continue}return this.m_nonSimpleResult=new xs(4,s.getStartPointIndex(),-1),!1}}return!0}checkDegenerateSegments3D(){return K(0),!1}_CheckClustering(){const e=this.m_geometry.getImpl();this.generateSortedPairs(e);const i=e.getPointCount();this.m_AET.clear(),this.m_AET.setComparator(new rnt(this)),this.m_AET.setCapacity(i);for(let s=0,n=2*i;s<n;s++){this.progress_();const r=this.m_pairIndices.read(s),o=this.m_pairs[r],l=o>>1;if(1&o){const u=this.m_AET.search(l),f=this.m_AET.getPrev(u),y=this.m_AET.getNext(u);if(this.m_AET.deleteNode(u),f!==jt.st_nullNode()&&y!==jt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(f),this.m_AET.getElement(y)))return this.m_nonSimpleResult=new xs(5,this.m_AET.getElement(f),this.m_AET.getElement(y)),!1}else{const u=this.m_AET.addElement(l),f=this.m_AET.getPrev(u);if(f!==jt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(f),l))return this.m_nonSimpleResult=new xs(5,l,this.m_AET.getElement(f)),!1;const y=this.m_AET.getNext(u);if(y!==jt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(y),l))return this.m_nonSimpleResult=new xs(5,l,this.m_AET.getElement(y)),!1}}return!0}_CheckCracking(){const e=this.m_geometry.getImpl(),i=e.getPointCount();return!e.hasNonLinearSegments()&&i<10?this._CheckCrackingBrute():this._CheckCrackingPlanesweep()}_CheckCrackingPlanesweep(){if(this.m_editShape=new Bs,this.m_editShape.addGeometry(this.m_geometry),this.m_editShape.hasCurves()){this.m_curveStitcher=new ku;const i=xe.constructEmpty();this.m_geometry.queryEnvelope(i);const s=Du(this.m_toleranceSimplify.total(),i),n=new xs;if(Ast(this.m_editShape,s,this.m_toleranceSimplify.total(),12e3,n,this.m_curveStitcher,null,this.m_progressTracker),n.m_reason!==0)return this.m_editShape=null,this.m_nonSimpleResult.assign(n),!1}const e=new xs;return R1e(!1,this.m_editShape,this.m_toleranceIsSimpleCracking,e,this.m_progressTracker)?(this.m_curveStitcher!=null?(e.m_vertexIndex1=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,e.m_vertexIndex1),e.m_vertexIndex2=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,e.m_vertexIndex2),this.m_curveStitcher=null):(e.m_vertexIndex1=this.m_editShape.getVertexIndex(e.m_vertexIndex1),e.m_vertexIndex2=this.m_editShape.getVertexIndex(e.m_vertexIndex2)),this.m_editShape=null,this.m_nonSimpleResult.assign(e),!1):(this.m_curveStitcher==null&&(this.m_editShape=null),!0)}_CheckCrackingBrute(){const e=this.m_geometry.getImpl(),i=e.querySegmentIterator(),s=e.querySegmentIterator();for(;i.nextPath();)for(;i.hasNextSegment();){const n=i.nextSegment();if(!i.isLastSegmentInPath()||!i.isLastPath()){s.resetTo(i);do for(;s.hasNextSegment();){const r=g5(!0,n,s.nextSegment(),this.m_toleranceIsSimpleCracking,!0);if(r){const o=r===2?7:6;return this.m_nonSimpleResult=new xs(o,i.getStartPointIndex(),s.getStartPointIndex()),!1}}while(s.nextPath())}}return!0}_CheckSelfIntersections(){let e=this.m_geometry.getImpl();this.m_curveStitcher!==null&&(this.m_multiPathStitcher=this.m_editShape.getGeometry(this.m_editShape.getFirstGeometry()),e=this.m_multiPathStitcher.getImpl(),this.generateSortedPairs(e)),this.m_edges.length=0,this.m_lineEdgesRecycle.length=0,this.m_recycledSegIter=e.querySegmentIterator(),this.m_recycledSegIter.setCirculator(!0);const i=new Array(0),s=e.getPointCount();let n=Number.NaN,r=0;for(let o=0,l=2*s;o<l;o++){this.progress_();const u=this.m_pairIndices.read(o),f=this.m_pairs[u];if(1&f)continue;const y=f>>1,_=this.m_xy.read(2*y),x=this.m_xy.read(2*y+1);if(i.length&&(_!==n||x!==r)){if(!this.processBunchForSelfIntersectionTest(i))return!1;i.length=0}i.push(y),n=_,r=x}return!!this.processBunchForSelfIntersectionTest(i)}checkSelfIntersectionsPolylinePlanar(){const e=this.m_geometry.getImpl(),i=[];for(let l=0,u=e.getPathCount();l<u;l++)i.push(e.isClosedPathInXYPlane(l));const s=int();let n,r,o;{const l=this.m_pairIndices.read(0),u=this.m_pairs[l]>>1,f=this.m_xy.readPoint2D(2*u),y=this.m_pathsForOGCTests[u];n=i[y],r=e.getPathStart(y),o=e.getPathEnd(y)-1,s.bEndPoint=u===r||u===o,this.m_bOGCRestrictions?s.bBoundary=!n&&s.bEndPoint:s.bBoundary=s.bEndPoint,s.ipath=y,s.x=f.x,s.y=f.y,s.ivertex=u}for(let l=1,u=this.m_pairIndices.size();l<u;l++){const f=this.m_pairIndices.read(l),y=this.m_pairs[f];if(1&y)continue;const _=y>>1,x=this.m_xy.readPoint2D(2*_),S=this.m_pathsForOGCTests[_];let P;S!==s.ipath&&(n=i[S],r=e.getPathStart(S),o=e.getPathEnd(S)-1);const A=_===r||_===o;P=this.m_bOGCRestrictions?!n&&A:A;const k=snt(x.x,x.y,S,_,P,A);if(k.x===s.x&&k.y===s.y){if(this.m_bOGCRestrictions){if(!(k.bBoundary&&s.bBoundary||k.ipath===s.ipath&&k.bEndPoint&&s.bEndPoint))return this.m_nonSimpleResult=new xs(10,k.ivertex,s.ivertex),!1}else if(!k.bEndPoint||!s.bEndPoint)return this.m_nonSimpleResult=new xs(7,k.ivertex,s.ivertex),!1}nnt(s,k)}return!0}checkSelfIntersectionsPolylinePlanar3D(e){return K(0),!1}checkSelfIntersectionsPolygonsOGC(){const e=this.m_geometry.getImpl(),i=[];let s=-1,n=!1;for(let _=0,x=e.getPathCount();_<x;_++)e.isExteriorRingOGC(_)&&(n=!1,s++,_<x-1&&(e.isExteriorRingOGC(_+1)||(n=!0))),i.push(n?s:-1);const r=Jst();{const _=this.m_pairIndices.read(0),x=this.m_pairs[_]>>1,S=this.m_xy.readPoint2D(2*x),P=this.m_pathsForOGCTests[x];r.ipath=P,r.x=S.x,r.y=S.y,r.ivertex=x,r.ipolygon=i[P]}const o=[];for(let _=1,x=this.m_pairIndices.size();_<x;_++){const S=this.m_pairIndices.read(_),P=this.m_pairs[S];if(1&P)continue;const A=P>>1,k=this.m_xy.readPoint2D(2*A),$=this.m_pathsForOGCTests[A],F=Qst(k.x,k.y,$,A,i[$]);if(F.x===r.x&&F.y===r.y){if(F.ipath===r.ipath)return this.m_nonSimpleResult=new xs(11,F.ivertex,r.ivertex),!1;i[F.ipath]>=0&&i[F.ipath]===i[r.ipath]&&(o.length!==0&&ent(o.at(-1),r)||o.push({...r}),o.push(F))}tnt(r,F)}if(o.length===0)return!0;const l=new to(!0);i.fill(-1);let u=-1;const f=new Y;for(let _=0,x=o.length;_<x;_++){const S=o[_];S.x===f.x&&S.y===f.y||(u=l.createList(0),f.x=S.x,f.y=S.y);let P=i[S.ipath];P===-1&&(P=l.createList(2),i[S.ipath]=P),l.addElement(P,u),l.addElement(u,P)}const y=[];for(let _=l.getFirstList();_!==-1;_=l.getNextList(_)){const x=l.getListData(_);if(1&x||!(2&x))continue;let S=-1;for(y.push(_),y.push(-1);y.length;){const P=y.at(-1);y.pop();const A=y.at(-1);y.pop();const k=l.getListData(A);if(1&k){S=2&k?A:P;break}l.setListData(A,1|k);for(let $=l.getFirst(A);$!==-1;$=l.getNext($)){const F=l.getData($);F!==P&&(y.push(F),y.push(A))}}if(S!==-1){const P=i.indexOf(S);return this.m_nonSimpleResult=new xs(12,P,-1),!1}}return!0}_CheckValidRingOrientation(){const e=this.m_multiPathStitcher!==null?this.m_multiPathStitcher.getImpl():this.m_geometry.getImpl();if(e.calculateArea2D()<=0)return this.m_nonSimpleResult=new xs(8,e.getPathCount()===1?1:-1,-1),0;if(e.getPathCount()===1)return this.m_bOGCRestrictions&&!this.checkSelfIntersectionsPolygonsOGC()?0:4;this.m_pathOrientations=new _v(e.getPathCount(),0),this.m_pathParentage=new Ns(e.getPathCount(),-1);let i=-1,s=0;for(let o=0,l=e.getPathCount();o<l;o++){const u=e.calculateRingArea2D(o);if(this.m_pathOrientations.write(o,u<0?0:8),u>0)i=o,s=u;else{if(u===0)return this.m_nonSimpleResult=new xs(8,o,-1),0;if((i<0||s<Math.abs(u))&&(this.m_nonSimpleResult=new xs(9,o,-1),this.m_bOGCRestrictions))return 0;this.m_pathParentage.write(o,i)}}this.m_unknownOrientationPathCount=e.getPathCount(),this.m_newEdges.length=0;const n=e.getPointCount();this.m_yScanline=Number.NaN;const r=[];this.m_xyToNode1=new Ns(n,jt.st_nullNode()),this.m_xyToNode2=new Ns(n,jt.st_nullNode()),this.m_freeEdges.length=0,this.m_AET.clear(),this.m_AET.setComparator(new ont(this));for(let o=0,l=2*n;this.m_unknownOrientationPathCount>0&&o<l;o++){const u=this.m_pairIndices.read(o),f=this.m_pairs[u];if(1&f)continue;const y=f>>1,_=this.m_xy.read(2*y+1);if(_!==this.m_yScanline&&r.length){if(!this.processBunchForRingOrientationTest(r))return 0;r.length=0}r.push(y),this.m_yScanline=_}return this.m_unknownOrientationPathCount>0&&!this.processBunchForRingOrientationTest(r)?0:this.m_bOGCRestrictions?this.m_nonSimpleResult.m_reason!==0?0:this.checkSelfIntersectionsPolygonsOGC()?5:0:this.m_nonSimpleResult.m_reason===0?4:3}processBunchForSelfIntersectionTest(e){if(e.length===1)return!0;for(let l=0,u=e.length;l<u;l++){const f=e[l];this.m_recycledSegIter.resetToVertex(f,-1);const y=this.m_recycledSegIter.previousSegment();this.m_edges.push(this.createEdge(y,f,this.m_recycledSegIter.getPathIndex(),!0)),this.m_recycledSegIter.nextSegment();const _=this.m_recycledSegIter.nextSegment();this.m_edges.push(this.createEdge(_,f,this.m_recycledSegIter.getPathIndex(),!1))}this.m_edges.sort((l,u)=>this.edgeAngleCompare(l,u));let i=this.m_crossOverHelperList.getFirstList();i===-1&&(i=this.m_crossOverHelperList.createList(0)),this.m_crossOverHelperList.reserveNodes(this.m_edges.length);for(let l=0,u=this.m_edges.length;l<u;l++)this.m_crossOverHelperList.addElement(i,l);let s=!0,n=-1,r=-1;for(;s;){s=!1;let l=this.m_crossOverHelperList.getFirst(i);if(l===-1)break;let u=this.m_crossOverHelperList.getNext(l);for(;u!==-1;){const f=this.m_crossOverHelperList.getData(l),y=this.m_crossOverHelperList.getData(u);if(n=this.m_edges[f].m_vertexIndex,r=this.m_edges[y].m_vertexIndex,n!==r)l=u,u=this.m_crossOverHelperList.getNext(l);else if(s=!0,this.m_crossOverHelperList.deleteElement(i,l),l=this.m_crossOverHelperList.getPrev(u),u=this.m_crossOverHelperList.deleteElement(i,u),u===-1||l===-1)break}}const o=this.m_crossOverHelperList.getListSize(i);if(this.m_crossOverHelperList.clear(i),o>0)return this.m_nonSimpleResult=new xs(7,n,r),!1;for(let l=0,u=e.length;l<u;l++)this.recycleEdge(this.m_edges[l]);return this.m_edges.length=0,!0}processBunchForRingOrientationTest(e){for(let i=0,s=e.length;i<s;i++){const n=e[i];let r=this.m_xyToNode1.read(n);if(r!==jt.st_nullNode()){const o=this.m_AET.getElement(r);this.m_freeEdges.push(o),this.m_AET.deleteNode(r),this.recycleEdge(this.m_edges[o]),this.m_edges[o]=null,this.m_xyToNode1.write(n,jt.st_nullNode())}if(r=this.m_xyToNode2.read(n),r!==jt.st_nullNode()){const o=this.m_AET.getElement(r);this.m_freeEdges.push(o),this.m_AET.deleteNode(r),this.recycleEdge(this.m_edges[o]),this.m_edges[o]=null,this.m_xyToNode2.write(n,jt.st_nullNode())}}for(let i=0,s=e.length;i<s;i++){const n=e[i];this.m_recycledSegIter.resetToVertex(n,-1);const r=this.m_recycledSegIter.previousSegment();if(r.getStartY()>r.getEndY()){const l=this.m_recycledSegIter.getStartPointIndex(),u=this.createEdge(r,n,this.m_recycledSegIter.getPathIndex(),!0);let f;this.m_freeEdges.length>0?(f=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[f]=u):(f=this.m_edges.length,this.m_edges.push(u));const y=this.m_AET.addElement(f);this.m_xyToNode1.read(l)===jt.st_nullNode()?this.m_xyToNode1.write(l,y):this.m_xyToNode2.write(l,y),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(y)}this.m_recycledSegIter.nextSegment();const o=this.m_recycledSegIter.nextSegment();if(o.getStartY()<o.getEndY()){const l=this.m_recycledSegIter.getEndPointIndex(),u=this.createEdge(o,n,this.m_recycledSegIter.getPathIndex(),!1);let f;this.m_freeEdges.length>0?(f=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[f]=u):(f=this.m_edges.length,this.m_edges.push(u));const y=this.m_AET.addElement(f);this.m_xyToNode1.read(l)===jt.st_nullNode()?this.m_xyToNode1.write(l,y):this.m_xyToNode2.write(l,y),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(y)}}for(let i=0,s=this.m_newEdges.length;i<s&&this.m_unknownOrientationPathCount>0;i++){const n=this.m_newEdges[i],r=this.m_AET.getElement(n),o=this.m_edges[r].m_pathIndex;if(!(3&this.m_pathOrientations.read(o))){let l=-1,u=this.m_AET.getPrev(n),f=n,y=0;{let _=-1,x=null,S=-1,P=0;for(;u!==jt.st_nullNode()&&(_=this.m_AET.getElement(u),x=this.m_edges[_],S=x.m_pathIndex,P=this.m_pathOrientations.read(S),!(3&P));)f=u,u=this.m_AET.getPrev(u);u===jt.st_nullNode()?(y=1,u=f):(l=(3&P)==1?S:this.m_pathParentage.read(S),y=x.getRightSide()?0:1,u=this.m_AET.getNext(u))}do{const _=this.m_AET.getElement(u),x=this.m_edges[_],S=x.m_pathIndex;let P=this.m_pathOrientations.read(S);if(!(3&P)){if(y!==x.getRightSide())return this.m_nonSimpleResult=new xs(8,S,-1),!1;const A=y&&!x.getReversed()?1:2;if(P=-4&P|A,this.m_pathOrientations.write(S,P),A===2&&this.m_nonSimpleResult.m_reason===0){const k=this.m_pathParentage.read(S);if(k!==l&&(this.m_nonSimpleResult=new xs(9,S,k),this.m_bOGCRestrictions))return!1}if(this.m_unknownOrientationPathCount--,!this.m_unknownOrientationPathCount)return!0}l=(3&P)==1?S:this.m_pathParentage.read(S),f=u,u=this.m_AET.getNext(u),y=y?0:1}while(f!==n)}}return this.m_newEdges.length=0,!0}createEdge(e,i,s,n){let r;return e.getGeometryType()===me.enumLine?r=this.createEdgeLine(e):(r=new tse,r.m_segment=e.clone()),r.m_vertexIndex=i,r.m_pathIndex=s,r.m_flags=0,r.setReversed(n),r}createEdgeLine(e){let i;return this.m_lineEdgesRecycle.length>0?(i=this.m_lineEdgesRecycle.at(-1),this.m_lineEdgesRecycle.pop(),e.copyTo(i.m_segment)):(i=new tse,i.m_segment=e.clone()),i}recycleEdge(e){e.m_segment.getGeometryType()===me.enumLine&&this.m_lineEdgesRecycle.push(e)}static isShortSegment(e,i,s,n){let r=e.calculateLowerLength2D();if(r<=s){let o=!0;if(e.isCurve()&&(r=e.calculateLength2D(),o=r<=s),o){if(i){let l=e.getEndAttributeAsDbl(1,0);Number.isNaN(l)&&(l=0);let u=e.getStartAttributeAsDbl(1,0);return Number.isNaN(u)&&(u=0),Math.abs(u-l)<=n}return!0}return!1}return!1}static isShortSegmentPoints(e,i,s,n,r){if(s)return MJe(e.getXYZ(),i.getXYZ(),n,r);{const o=e.getXY(),l=i.getXY();return Y.sqrDistance(o,l)<=n*n}}removeDegenerateSegmentsFromCurvedPath(e,i,s,n){const r=e.hasAttribute(1),o=e.querySegmentIterator();o.resetToPath(i),K(o.nextPath());const l=this.m_toleranceSimplify.total();let u=!1,f=!0;const y=new Ut,_=new Ut,x=new Y;for(;o.hasNextSegment();){this.progress_();const A=o.nextSegment();if(Au.isShortSegment(A,r,l,s))if(u){if(A.queryEnd(_),Au.isShortSegmentPoints(y,_,r,l,s))continue;f&&(n.startPathPoint(y),f=!1),A.queryEnd(y),n.lineToPoint(y),u=!1}else x.assign(A.getStartXY()),A.queryStart(y),u=!0;else if(u)if(A.isCurve()){const k=A.clone();if(k.setCoordsForIntersector(x,A.getEndXY(),!1),k.setStart(y),Au.isShortSegment(k,r,l,s))continue;n.addSegment(k,f),f=!1,u=!1}else{if(A.queryEnd(_),Au.isShortSegmentPoints(y,_,r,l,s))continue;f&&(n.startPathPoint(y),f=!1),n.lineToPoint(_),u=!1}else n.addSegment(A,f),f=!1}if(f||!u)return;e.isClosedPath(i)?e.getPointByVal(e.getPathStart(i),y):e.getPointByVal(e.getPathEnd(i)-1,y);const S=n.querySegmentIterator();S.resetToLastPath(),S.resetToLastSegment();const P=n.getDescription().getAttributeCount()>1;for(K(S.previousPath());S.hasPreviousSegment();){const A=S.previousSegment();if(A.isCurve()){const k=A.clone();if(k.setCoordsForIntersector(A.getStartXY(),y.getXY(),!1),!Au.isShortSegment(k,r,l,s)){P&&k.setEnd(y);const $=S.getEndPointIndex();for(let F=n.getPointCount()-1;F>=$;F--)n.removePoint(F);return void n.addSegment(k,!1)}}else if(A.queryStart(_),!Au.isShortSegmentPoints(_,y,r,l,s)){const k=S.getEndPointIndex();for(let $=n.getPointCount()-1;$>=k;$--)n.removePoint($);return void n.lineToPoint(y)}}n.removePath(n.getPathCount()-1)}multipointIsSimpleAsFeature(){if(!this.checkStructure())return 0;const e=this.m_geometry.getImpl();this.m_multiVertexGeom=e;const i=e.getPointCount(),s=new Array(i);for(let n=0;n<i;n++)s[n]=n;s.sort((n,r)=>this.compareVerticesMultiPoint(n,r));for(let n=1;n<i;n++)if(this.compareVerticesMultiPoint(s[n-1],s[n])===0)return this.m_nonSimpleResult=new xs(5,s[n-1],s[n]),0;return 1}polylineIsSimpleAsFeature(){return this.checkStructure()&&this.checkDegenerateSegments(!0)?1:0}polygonIsSimpleAsFeature(){return this.isSimplePlanarImpl()}multipointSimplifyAsFeature(){let e=this.m_geometry.getImpl();const i=Au.hasNanZs(e);let s,n=this.m_geometry;i&&(s=this.m_geometry.clone(),e=s.getImpl(),s.replaceNaNs(1,_r.getDefaultValue(1)),n=s),this.m_multiVertexGeom=e;const r=e.getPointCount(),o=new Array(r);for(let x=0;x<r;x++)o[x]=x;o.sort((x,S)=>this.compareVerticesMultiPoint(x,S));const l=new Array(r);l.fill(!1);let u=-1;for(let x=0;x<r;x++){const S=o[x];e.getXY(S).isFinite()&&((u<0||this.compareVerticesMultiPoint(u,S)!==0)&&(l[S]=!0),u=S)}const f=this.m_geometry.createInstance();let y=0,_=0;for(let x=0;x<r;x++)l[x]?_=x+1:(y<_&&f.addPoints(n,y,_),y=x+1);return y<_&&f.addPoints(n,y,_),f.getImpl().setIsSimple(1,this.m_toleranceSimplify.total()),f}polylineSimplifyAsFeature(){const e=this.m_geometry.getImpl(),i=e.querySegmentIterator(),s=e.querySegmentIterator(),n=this.m_geometry.createInstance(),r=this.m_geometry,o=e.hasAttribute(1),l=o?fte(this.m_sr,e,!0).total():0,u=[],f=[];let y=null;o&&(y=e.getAttributeStreamRef(1));const _=new Ut,x=e.hasNonLinearSegments(),S=this.m_toleranceSimplify.total();for(;i.nextPath();){if(s.nextPath(),e.getPathSize(i.getPathIndex())<2)continue;if(x&&e.hasNonLinearSegmentsPath(i.getPathIndex())){this.removeDegenerateSegmentsFromCurvedPath(e,i.getPathIndex(),l,n);continue}s.resetToLastSegment();let P=0,A=0,k=!0,$=!0;for(;i.hasNextSegment();){this.progress_();const F=i.nextSegment(),G=s.previousSegment();if(i.getStartPointIndex()>s.getStartPointIndex())break;if(k){const V=i.getStartPointIndex();e.getXY(V).isNAN()||(k=!1,u.push(V))}if($){const V=s.getEndPointIndex();e.getXY(V).isNAN()||(f.push(V),$=!1)}if(!k){const V=u.at(-1),B=i.getEndPointIndex();if(B-V>1){const W=new Y;W.setSub(e.getXY(V),e.getXY(B)),P=W.length()}else P=F.calculateLength2D();if(P>S)u.push(B),P=0;else if(o){let W=y.read(V);Number.isNaN(W)&&(W=0);let J=y.read(B);Number.isNaN(J)&&(J=0),Math.abs(J-W)>l&&(u.push(B),P=0)}}if(!$){const V=f.at(-1),B=s.getStartPointIndex();if(B-V>1){const W=new Y;W.setSub(e.getXY(V),e.getXY(B)),A=W.length()}else A=G.calculateLength2D();if(A>S)f.push(B),A=0;else if(o){let W=y.read(V);Number.isNaN(W)&&(W=0);let J=y.read(B);Number.isNaN(J)&&(J=0),Math.abs(J-W)>l&&(f.push(B),A=0)}}}if(u.length>0&&f.length>0&&(u.at(-1)<f.at(-1)?u.length>f.length?u.pop():f.pop():(u.at(-1)===f.at(-1)||f.pop(),f.pop())),f.length+u.length>=2){let F=!1;for(let G=0,V=u.length;G<V;G++)r.getPointByVal(u[G],_),F?n.lineToPoint(_):(n.startPathPoint(_),F=!0);for(let G=f.length-1;G>0;G--)r.getPointByVal(f[G],_),F?n.lineToPoint(_):(n.startPathPoint(_),F=!0);r.isClosedPath(i.getPathIndex())?n.closePathWithLine():f.length>0&&(r.getPointByVal(f[0],_),n.lineToPoint(_))}u.length=0,f.length=0}return o&&n.replaceNaNs(1,0),n.getImpl().setIsSimple(1,S),n}polygonSimplifyAsFeature(){return this.simplifyPlanar()}simplifyPlanar(){if(this.m_geometry.getFillRule()===1&&!wf(this.m_knownSimpleResult))return Z6(this.m_geometry,this.m_toleranceSimplify,!0,!1,this.m_knownSimpleResult,this.m_progressTracker,0,!0);const e=new Bs;if(e.addGeometry(this.m_geometry),this.m_geometry.hasAttribute(1)&&e.replaceNaNs(1,0),e.removeNaNVertices(),e.getTotalPointCount()!==0){let s=null,n=0,r=0;if(e.hasCurves()){s=new ku;const o=xe.constructEmpty();this.m_geometry.queryEnvelope(o);const l=Du(this.m_toleranceSimplify.total(),o);n=Fp(this.m_toleranceSimplify.total()),r=of(l,n),Vh(e,l,this.m_toleranceSimplify.total(),12e3,s,null,this.m_progressTracker)}wf(this.m_knownSimpleResult)||Yd(e,this.m_toleranceSimplify.add(r),this.m_progressTracker,!0,!1),this.m_geometry.getGeometryType()===me.enumPolygon&&lg(e,e.getFirstGeometry(),this.m_knownSimpleResult,!1,-1,this.m_progressTracker),s!==null&&s.stitchCurves(e,e.getFirstGeometry(),n,!0)}const i=e.getGeometry(e.getFirstGeometry());return i.getGeometryType()===me.enumPolygon&&(i.getImpl().updateOGCFlagsProtected(),i.setFillRule(0)),i.getImpl().setIsSimple(4,this.m_toleranceSimplify.total()),i}progress_(){}static hasNanZs(e){if(e.hasAttribute(1)){const i=e.getAttributeStreamRef(1);for(let s=0,n=e.getPointCount();s<n;s++){const r=i.read(s);if(Number.isNaN(r))return!0}}return!1}compareVerticesForPlanarClustering(e,i,s){if(e===i)return 0;const n=this.m_pairs[e],r=this.m_pairs[i],o=n>>1,l=r>>1,u=this.m_xy.readPoint2D(2*o);u.y+=1&n?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const f=this.m_xy.readPoint2D(2*l);f.y+=1&r?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const y=u.compare(f);if(y===0&&s){const _=this.m_pathsForOGCTests[o]-this.m_pathsForOGCTests[l];return xn(_)}return y}compareVerticesMultiPoint(e,i){if(e===i)return 0;const s=this.m_multiVertexGeom.getXY(e),n=this.m_multiVertexGeom.getXY(i),r=!s.isFinite(),o=!n.isFinite();if(r||o)return r<o?-1:r>o?1:0;if(s.y<n.y)return-1;if(s.y>n.y)return 1;if(s.x<n.x)return-1;if(s.x>n.x)return 1;for(let l=1;l<this.m_attributeCount;l++){const u=this.m_description.getSemantics(l),f=_r.getComponentCount(u);for(let y=0;y<f;y++){const _=this.m_multiVertexGeom.getAttributeAsDbl(u,e,y),x=this.m_multiVertexGeom.getAttributeAsDbl(u,i,y),S=WKe(_,x);if(S!==0)return S}}return 0}edgeAngleCompare(e,i){if(e===i)return 0;const s=e.m_segment.getTangent(e.getReversed()?1:0);e.getReversed()&&s.negateThis();const n=i.m_segment.getTangent(i.getReversed()?1:0);i.getReversed()&&n.negateThis();const r=s.getQuarter(),o=n.getQuarter();if(o===r){const l=s.crossProduct(n);return l<0?1:l>0?-1:0}return r<o?-1:1}}class Mc{getOperatorType(){return 10103}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimpleAsFeature(e,i,s,n,r){const o=Lj(e,i,s,n,r);return AJe(e.getGeometryType(),o)}isSimplePlanarDONOTUSE(e,i,s,n,r){return yg(Kst(e,i,s,n,r))}executeMany(e,i,s,n){return new ant(e,i,s,n)}execute(e,i,s,n){const r=new nd([e]),o=this.executeMany(r,i,s,n).next();return o||bt("null geometry"),o}}class ant extends Ca{constructor(e,i,s,n){super(),this.m_progressTracker=n,this.m_bForceSimplify=s,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=i}next(){const e=this.m_inputGeometryCursor.next();return e?(this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){if(e||Je(""),e.getGeometryType()===me.enumGeometryCollection){const i=VJe(e,-1),s=new Mc().executeMany(i,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker),n=e.createInstance();for(let r=s.next();r!=null;r=s.next())n.addGeometry(r);return n}return aye(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}class W2{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n){return new lnt(e,i,s,n)}execute(e,i,s,n){return cnt(e,i,s,n)}}class lnt extends Ca{constructor(e,i,s,n){super(),this.m_progressTracker=n,this.m_index=-1,e||Je(""),this.m_envelope=i,this.m_inputGeometryCursor=e,this.m_spatialRefImpl=s,this.m_tolerance=Kn(s,i,!1).total()}next(){let e;return(e=this.m_inputGeometryCursor.next())?(Ku(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),vs(e,this.m_envelope,this.m_tolerance,0,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}function cnt(t,e,i,s){return I1e(t,e,i,Number.NaN,0,s)}function unt(t,e,i){const s=new xe;t.queryEnvelope(s);const n=new xe;e.queryEnvelope(n);const r=new xe(n);if(r.inflate(2*i),!r.isIntersecting(s))return 4;const o=t.getGeometryType(),l=e.getGeometryType();if(o===me.enumEnvelope&&s.containsEnvelope(r))return 1;if(l===me.enumEnvelope){const u=new xe(s);if(u.inflate(2*i),n.containsEnvelope(u))return 2}return 0}class Uy{constructor(e,i,s,n){this.m_intersectorGeom=null,this.m_sr=null,this.m_dimensionMask=-1,this.m_progressTracker=null,this.m_intersectorGeomType=me.enumUnknown,this.m_geomIntersectorEmptyGeom=null,this.m_intersectorGeom=e,this.m_sr=i,this.m_dimensionMask=s,this.m_progressTracker=n,this.m_intersectorGeomType=e.getGeometryType()}intersect(e){const i=this.tryFastImplementation(e);if(i!==null)return i;const s=W4(this.m_intersectorGeom,e),n=Kn(this.m_sr,s,!0).total(),r=xe.constructEmpty();this.m_intersectorGeom.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o),r.inflateCoords(2*n,2*n),r.intersect(o),r.inflateCoords(100*n,100*n);const l=0;let u=vs(this.m_intersectorGeom,r,l,0,this.m_progressTracker),f=vs(e,r,l,0,this.m_progressTracker);return e.getDimension()>this.m_intersectorGeom.getDimension()&&(u=St(f,f=u)),Hst(f,u,this.m_sr,this.m_progressTracker)}intersectEx(e){const i=this.tryFastImplementation(e);if(i!==null){const _=[];return _.length=3,_[i.getDimension()]=i,this.prepareVector(e.getDescription(),this.m_dimensionMask,_)}const s=W4(this.m_intersectorGeom,e),n=Kn(this.m_sr,s,!0).total(),r=xe.constructEmpty();this.m_intersectorGeom.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o),r.inflateCoords(2*n,2*n),r.intersect(o),r.inflateCoords(100*n,100*n);const l=0;let u=vs(this.m_intersectorGeom,r,l,0,this.m_progressTracker),f=vs(e,r,l,0,this.m_progressTracker);e.getDimension()>this.m_intersectorGeom.getDimension()&&(u=St(f,f=u));const y=Ust(f,u,this.m_sr,this.m_progressTracker);return this.prepareVector(e.getDescription(),this.m_dimensionMask,y)}init(e,i,s,n=null){K(0)}static intersectPoints(e,i,s){return Bst(e,i,Kn(s,W4(e,i),!0))}tryFastImplementation(e){const i=e.getGeometryType();if(this.m_intersectorGeomType===me.enumPoint&&i===me.enumPoint){const u=Uy.intersectPoints(e,this.m_intersectorGeom,this.m_sr);if(this.m_dimensionMask!==-1){const f=new Jn({vd:u.getDescription()});return u.isEmpty()||f.add(u),f}return u}if(i===me.enumEnvelope&&this.m_intersectorGeomType===me.enumEnvelope&&(this.m_dimensionMask===-1||this.m_dimensionMask===4)){const u=e,f=this.m_intersectorGeom,y=new lr({copy:u});return y.intersect(f),y}const s=W4(e,this.m_intersectorGeom),n=Kn(this.m_sr,s,!0),r=e.isEmpty(),o=this.m_intersectorGeom.isEmpty();let l=r||o;if(!l){const u=unt(this.m_intersectorGeom,e,n.total());if(u===4)l=!0;else{if(2&u)return this.m_intersectorGeom;if(1&u)return e}}if(l){const u=hl(i),f=hl(this.m_intersectorGeomType);return u<f?Uy.ReturnEmpty(e,r):u>f||u===0&&i===me.enumMultiPoint&&this.m_intersectorGeomType===me.enumPoint?this.ReturnEmptyIntersector():Uy.ReturnEmpty(e,r)}if(i===me.enumEnvelope&&hl(this.m_intersectorGeomType)===0||this.m_intersectorGeomType===me.enumEnvelope&&hl(i)===0){const u=i===me.enumEnvelope?e:this.m_intersectorGeom,f=i===me.enumEnvelope?this.m_intersectorGeom:e,y=xe.constructEmpty();return u.queryEnvelope(y),vs(f,y,n.total(),0,this.m_progressTracker)}if(hl(i)===0&&hl(this.m_intersectorGeomType)>0||hl(i)>0&&hl(this.m_intersectorGeomType)===0){if(i===me.enumMultiPoint)return Qie(e,this.m_intersectorGeom,n);if(i===me.enumPoint)return ese(e,this.m_intersectorGeom,n);if(this.m_intersectorGeomType===me.enumMultiPoint)return Qie(this.m_intersectorGeom,e,n);if(this.m_intersectorGeomType===me.enumPoint)return ese(this.m_intersectorGeom,e,n);bt("")}return null}tryFastIntersectPolylinePolygon(e,i){return K(0),{}}AnalyseClipSegment(e,i,s){return K(0),0}AnalyseClipSegmenPt(e,i,s){return K(0),0}ReturnEmptyIntersector(){return this.m_geomIntersectorEmptyGeom===null&&(this.m_geomIntersectorEmptyGeom=this.m_intersectorGeom.createInstance()),this.m_geomIntersectorEmptyGeom}static ReturnEmpty(e,i){return i?e:e.createInstance()}prepareVector(e,i,s){let n=0;return 1&i?(s[0]||(s[0]=new Jn({vd:e})),n++):s.shift(),2&i?(s[n]||(s[n]=new vi({vd:e})),n++):s.splice(n,1),4&i?s[n]||(s[n]=new Wt({vd:e})):s.splice(n,1),new nd(s)}}class hnt extends Ca{constructor(e,i,s,n,r){super(),this.m_smallCursor=null,this.m_progressTracker=n,this.m_geomIntersector=i.next(),this.m_intersector=new Uy(this.m_geomIntersector,s,r,n),this.m_index=-1,this.m_inputGeoms=e,this.m_dimensionMask=r,this.m_dimensionMask!==-1&&(this.m_dimensionMask<=0||this.m_dimensionMask>7)&&Je("bad dimension mask")}next(){if(!this.m_geomIntersector)return null;let e;if(this.m_smallCursor!==null){if(e=this.m_smallCursor.next(),e)return e;this.m_smallCursor=null}for(;e=this.m_inputGeoms.next();)return Ku(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dimensionMask===-1?this.m_intersector.intersect(e):(this.m_smallCursor=this.m_intersector.intersectEx(e),this.m_smallCursor.next());return null}getGeometryID(){return K(0),0}tock(){return K(0),!1}getRank(){return K(0),0}}class Z2{getOperatorType(){return 1e4}accelerateGeometry(e,i,s){if(!this.canAccelerateGeometry(e))return!1;xl(i,e,!0);let n=0;return e.getGeometryType()!==me.enumPolygon&&e.getGeometryType()!==me.enumPolyline||!F6(e)||s===0||(n|=e.getImpl().buildQuadTreeAccelerator(s)?1:0),!!n}canAccelerateGeometry(e){return F6(e)}supportsCurves(){return!0}executeMany(e,i,s,n,r=-1){return new hnt(e,i,s,n,r)}execute(e,i,s,n){if(e.getGeometryType()===me.enumPoint&&i.getGeometryType()===me.enumPoint)return Uy.intersectPoints(e,i,s);const r=new nd([e]),o=new nd([i]),l=this.executeMany(r,o,s,n,-1).next();return l||bt("null output"),l}}function cye(t,e,i){return e.m_projector.project(t,i)}function dnt(t,e,i,s,n){t.m_projector.transformInPlaceZ(e,null,i,s,null,n);const r=s.slice(0,i).filter(o=>!o.isNAN());for(let o=0,l=r.length;o<l;++o)s[o].assign(r[o]);return r.length}function uye(t,e,i,s,n){return t.m_projector.transformInPlaceZ(e,null,i,s,null,n)}function Oz(t,e,i,s){if(t&&e&&e.isPannable()||Je("fold_into_360_range_geodetic"),t.isEmpty())return t;if(i===4)return K6(t,e,s);let n=t;const r=n.getGeometryType();if(bi(r)){n=QE(t,e);const o=new xe;n.queryEnvelope(o);const l=Kn(e,o,!1).total(),u=e.getPannableExtent();let f=Math.floor((o.xmin-u.xmin)/u.width())*u.width()+u.xmin,y=n;for(;f<o.xmax;)f>o.xmin+l&&f<o.xmax-l&&(y=yye(y,e,i,!0,f)),f+=u.width();n=y}else{if(r===me.enumEnvelope){const o=new Wt({vd:n.getDescription()});return o.addEnvelope(n,!1),Oz(o,e,i,s)}if(Dn(r)){const o=new vi({vd:n.getDescription()});return o.addSegment(n,!0),Oz(o,e,i,s)}}return K6(n,e,s)}function K6(t,e,i){if(t&&e&&e.isPannable()||Je(""),t.isEmpty())return t;let s;const n=t.getGeometryType();if(n===me.enumEnvelope){const o=new Wt({vd:t.getDescription()});o.addEnvelope(t,!1),s=o}else if(Dn(n)){const o=new vi({vd:t.getDescription()});o.addSegment(t,!0),s=o}else s=t;const r=QE(s,e);return r.isEmpty()?r:K2(r,e,0,r!==t,0,i)}function fnt(t,e,i){if(!e.isPannable()||t.isEmpty())return t;const s=e.getPannableExtent().width(),n=.5*s,r=t.queryInterval(0,0);if(r.width()<n||!tl(t.getGeometryType())){if(Number.isNaN(i))return t;const $=r.getCenter();if(Math.abs($-i)<=n)return t;{const F=new _i,G=gv((i-$)/s)*s;F.setShiftCoords(G,0);const V=t.clone();return V.applyTransformation(F),V}}const o=t.getGeometryType(),l=t,u=l.getAttributeStreamRef(0),f=t.clone(),y=f.getAttributeStreamRef(0);let _=0,x=0,S=0,P=bi(o)?0:-1;const A=Ze.constructEmpty();let k=!1;for(let $=0,F=l.getPointCount();$<F;$++){const G=u.read(2*$);$===x&&(bi(o)?(P===0&&Number.isNaN(i)&&(k=!0),P>0&&Number.isNaN(i)&&(i=A.getCenter(),k=!1),x=l.getPathEnd(P),P++):x=l.getPointCount(),Number.isNaN(i)?S=G:(S=i,_=0));let V=G-S;Math.abs(V)>n&&(V=gv(V/s)*s,_-=V,Math.abs(_)<.1*s&&(_=0));const B=G+_;y.write(2*$,B),k&&A.mergeCoordinate(B),S=G}return f.notifyModified(),f}const pnt="missing implementation";function mnt(t,e,i,s){const n=e.getCoordinateSystemType();if(n===0){const l=new jl;return e.queryPrecisionDescriptor(l),ise(t,l,e,i)}let r=t;s!==2&&s!==3||!e.isPannable()||(r=K6(r,e,i));const o=new jl;if(e.queryPrecisionDescriptor(o),r=ise(r,o,e,i),s===0||r.isEmpty())return r;if(n===1){if(s===1){const l=new xe;r.queryLooseEnvelope(l);const u=e.getPannableExtent(),f=.01*u.width();return u.xmin=l.xmin-f,u.xmax=l.xmax+f,new W2().execute(r,u,e,i)}return r}if(n===2){const l=e.getPCSHorizon();if(s===1||s===2){const u=new Z2().execute(r,l,e,i);return u===l?u.clone():u}return r}if(n===3)return r;bt(pnt)}function ise(t,e,i,s){const n=e.getXYGridRange(),r=t.hasAttribute(1),o=t.hasAttribute(2);let l=new Ze,u=new Ze;r&&(l=e.getZGridRange()),o&&(u=e.getMGridRange());let f=new W2().execute(t,n,i,s);if(r){const y=f.queryInterval(1,0);l.contains(y)||(t===f&&(f=f.clone()),uz(f,l,1,0))}if(o){const y=f.queryInterval(2,0);u.contains(y)||(t===f&&(f=f.clone()),uz(f,u,2,0))}return f}class gnt{constructor(e){this.m_inputPCSHorizonClipOption=0,this.m_outputPCSHorizonClipOption=0,this.m_bDontGeonormalizePolygon=!1,this.m_bClipOutCurvedPoles=!1,this.m_bNormalizeOutputGeometry=!1,this.m_bDontHackPolesInGeogToGeog=!1,this.m_centralMeridianOfOutputGCS=0,this.m_densificationStepInput=0,e||Je(""),this.m_projTransform=e,this.m_bClipOutCurvedPoles=!1;const i=this.m_projTransform.getExtendedParamsImpl();this.m_bNormalizeOutputGeometry=i.normalizeResultGeometry,this.m_bNormalizeOutputGeometry&&(i.legacyHorizonClipping?this.m_bNormalizeOutputGeometry=!1:this.m_projTransform.getOutputSR().isPannable()||(this.m_bNormalizeOutputGeometry=!1)),i.clipWithInputHorizon?(this.m_inputPCSHorizonClipOption=0,!i.legacyHorizonClipping&&this.m_projTransform.getInputSR().isPannable()&&(this.m_inputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_inputPCSHorizonClipOption=1,i.clipWithOutputHorizon?(this.m_outputPCSHorizonClipOption=0,!i.legacyHorizonClipping&&this.m_projTransform.getOutputSR().isPannable()&&(this.m_outputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_outputPCSHorizonClipOption=1,this.m_centralMeridianOfOutputGCS=i.centralMeridianOfOutputGCS,this.m_densificationStepInput=i.densificationStep;const s=this.m_projTransform.getExtendedParamsInternal();this.m_bDontGeonormalizePolygon=s.hasFlag(2147483648),this.m_bDontHackPolesInGeogToGeog=s.hasFlag(1073741824),this.m_bClipOutCurvedPoles=s.hasFlag(536870912)}project(e,i){if(this.m_projTransform.isIdentity()||e.isEmpty())return e;const s=e.getGeometryType();if(s===me.enumPoint)return this.projectPoint(e,i);const n=this.m_projTransform.getInputSR().getCoordinateSystemType(),r=this.m_projTransform.getOutputSR().getCoordinateSystemType();if(this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR(),n===0&&n===r){const o=ynt(),l=e.clone();return l.applyTransformation(o),l}switch(s){case me.enumPolyline:case me.enumPolygon:return this.projectMultiPath(e,i);case me.enumMultiPoint:return this.projectMultiPoint(e,i);case me.enumEnvelope:return this.projectEnvelope(e,i);case me.enumGeometryCollection:return this.projectGeometryCollection(e,i);default:bt("")}}projectPoint(e,i){const s=[e.getXY()];let n,r=null;(n=e.hasAttribute(1))&&(r=[e.getZ()]),this.transformInPlaceZ(s,r,1,s,r,null);const o=e.clone();return o.setXY(s[0]),n&&o.setZ(r[0]),o}projectMultiPoint(e,i){let s=new Jn({copy:e});const n=this.m_projTransform.getInputSR(),r=this.m_projTransform.getOutputSR(),o=n.getCoordinateSystemType(),l=r.getCoordinateSystemType();if(o===3&&K(0),s=qN(s,n,this.m_inputPCSHorizonClipOption,i),s.isEmpty())return s;o===2&&bye(n,0,s),wye(this.m_projTransform,s,!1);let u=0;l===3&&K(0);const f=l===2;return f?u=r.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(u=this.m_centralMeridianOfOutputGCS),f&&this.m_outputPCSHorizonClipOption!==0||(s=K2(s,WN(r),u,!1,0,i)),f&&(s=FN(s,r,this.m_outputPCSHorizonClipOption,i),_ye(r,s,this.m_bNormalizeOutputGeometry),s.isEmpty()),s}projectMultiPath(e,i){const s=e.getGeometryType();return s===me.enumPolygon?this.projectPolygon(e,i):s===me.enumPolyline?this.projectPolyline(e,i):void bt("project_multi_path_")}projectEnvelope(e,i){this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR();const s=this.m_projTransform.isVertical()&&e.hasAttribute(1);let n=Ze.constructEmpty();if(s&&(n=e.queryInterval(1,0)),n.width()>0){const r=e.clone();r.setInterval(1,0,n.vmin,n.vmin);const o=this.projectEnvelopeHelper(r,i);r.setInterval(1,0,n.vmax,n.vmax);const l=this.projectEnvelopeHelper(r,i);return o.merge(l),o}return this.projectEnvelopeHelper(e,i)}projectPolygon(e,i){K(e.getGeometryType()===me.enumPolygon),K(!this.m_projTransform.isIdentity()),K(!e.isEmpty());const s=this.m_projTransform.getInputSR(),n=this.m_projTransform.getOutputSR(),r=s.getCoordinateSystemType(),o=n.getCoordinateSystemType(),l=new Wt({copy:e});r===3&&K(0),o===3&&K(0);const u=r===2,f=o===2,y=u?s.getGCS():s,_=f?n.getGCS():n,x=!f&&!this.m_bDontHackPolesInGeogToGeog;let S=!1,P=qN(l,s,this.m_inputPCSHorizonClipOption,i);if(P.isEmpty())return P;let A=this.m_densificationStepInput;const k=!Number.isNaN(A);let $;k&&(P=new X0().execute(P,A,0,0,i));let F=f?n.getPCSInfo():null,G=Number.NaN;u&&(G=s.getCentralMeridian());const V=n.getGCSSplitLines()!==null;if(this.m_bDontGeonormalizePolygon){const B=P;if(u&&(oT(s,G,B),k)){const W=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/W}if(aT(this.m_projTransform,B,x),k){const W=s.getGCS().getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/W}$=B}else{let B=new vi({vd:P.getDescription()});if(B.addAndExplicitlyOpenAllPaths(P,!1),u){if(oT(s,G,B),k){const se=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/se}if(this.m_bClipOutCurvedPoles){const se=s.getPCSInfo(),oe=se.getSouthPoleGeometry()===Ha.PE_POLE_LINE_CURVED,pe=se.getNorthPoleGeometry()===Ha.PE_POLE_LINE_CURVED;if(oe||pe){const ce=xe.constructEmpty();B.queryLooseEnvelope(ce),ce.inflateCoords(1,1);const ue=89.9999*y.getOneDegreeGCSUnit();oe&&(ce.ymin=-ue),pe&&(ce.ymax=ue),B=htt(B,ce,y,0,0,i)}}}if(aT(this.m_projTransform,B,x),k){const se=WN(s).getUnitsPerMillimeter();A*=WN(n).getUnitsPerMillimeter()/se}let W=Number.NaN;f?(F=n.getPCSInfo(),W=n.getCentralMeridian()):Number.isNaN(this.m_centralMeridianOfOutputGCS)||(W=this.m_centralMeridianOfOutputGCS);let J=rT(s)|rT(n),re=10*_.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(J=3,re=10*_.getTolerance(0)),$=prt(P,s,B,_,W,i,J,re,this.m_bNormalizeOutputGeometry),J=0}if(V&&(K(!n.isPannable()),$=pse($,n,i)),f){if(!S){const B=_.getPannableExtent().width();if($.queryInterval(0,0).width()>=B-10*_.getTolerance(0)){const W=F.getNorthPoleLocation(),J=F.getSouthPoleLocation(),re=F.getNorthPoleGeometry(),se=F.getSouthPoleGeometry();let oe=0;re===Ha.PE_POLE_POINT&&W!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(oe=1),se===Ha.PE_POLE_POINT&&J!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(oe|=2),S||(S=oe!==0)}}$=FN($,n,this.m_outputPCSHorizonClipOption,i),k&&($=new X0().execute($,A,0,0,i)),gse(n,$,this.m_bNormalizeOutputGeometry)}return $.isEmpty()||S&&($=new Mc().execute($,n,!1,i)),$}projectPolyline(e,i){K(e.getGeometryType()===me.enumPolyline),K(!this.m_projTransform.isIdentity()),K(!e.isEmpty());const s=this.m_projTransform.getInputSR(),n=this.m_projTransform.getOutputSR(),r=s.getCoordinateSystemType(),o=n.getCoordinateSystemType(),l=new vi({copy:e});r===3&&K(0),o===3&&K(0);const u=r===2,f=o===2;u&&s.getGCS();const y=f?n.getGCS():n,_=!f&&!this.m_bDontHackPolesInGeogToGeog;let x=qN(l,s,this.m_inputPCSHorizonClipOption,i);if(x.isEmpty())return x;let S=Number.NaN;u&&(S=s.getCentralMeridian());const P=n.getGCSSplitLines()!==null;let A=this.m_densificationStepInput;const k=!Number.isNaN(A);let $;if(k&&(x=new X0().execute(x,A,0,0,i)),this.m_bDontGeonormalizePolygon){if(u&&(oT(s,S,x),k)){const F=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/F}if(aT(this.m_projTransform,x,_),k){const F=s.getGCS().getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/F}$=x}else{const F=new vi({vd:x.getDescription()});if(F.addAndExplicitlyOpenAllPaths(x,!1),u&&(oT(s,S,F),k)){const W=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/W}if(aT(this.m_projTransform,F,_),k){const W=s.getGCS().getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/W}let G=Number.NaN;f?G=n.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(G=this.m_centralMeridianOfOutputGCS);let V=rT(s)|rT(n),B=10*y.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(V=3,B=0),$=mrt(x,s,F,y,G,i,V,B,this.m_bNormalizeOutputGeometry),V=0}return P&&(K(!n.isPannable()),$=pse($,n,i)),f&&($=FN($,n,this.m_outputPCSHorizonClipOption,i),k&&($=new X0().execute($,A,0,0,i)),gse(n,$,this.m_bNormalizeOutputGeometry)),$.isEmpty(),$}projectGeometryCollection(e,i){return K(0),{}}tryProjectMultiVertexSimple(e,i){return K(0),{}}projectEnvelopeHelper(e,i){const s=(e.height()+e.width())/400;if(s!==0){const n=new X0().execute(e,s,0,0,i),r=this.projectMultiPath(n,i),o=new lr({vd:e.getDescription()});if(r.isEmpty()){const l=Math.min(e.height(),e.width()),u=xl(this.m_projTransform.getInputSR(),e,!0).total();if(l>100*u){const P=xe.constructEmpty(),A=Kn(this.m_projTransform.getOutputSR(),P,!0).total(),k=this.m_projTransform.getInputSR().getOneMeter()/this.m_projTransform.getOutputSR().getOneMeter();if(l>100*Math.max(u,A*k))return o}const f=new vi;f.addAndExplicitlyOpenAllPaths(n,!1),this.projectMultiPath(f,i).queryEnvelope(o);const y=new Jn({vd:e.getDescription()});y.reserve(4);const _=new Ut;for(let P=0;P<4;P++)e.queryCornerByVal(P,_),y.add(_);const x=this.projectMultiPoint(y,i),S=new lr;return x.queryEnvelope(S),o.merge(S),o}return r.queryEnvelope(o),o}{const n=e.getCenterXY(),r=new Ut(n),o=this.projectPoint(r,i),l=new lr({vd:e.getDescription()});if(o.isEmpty())l.setEmpty();else{e.copyTo(l);const u=o.getXY();l.setCoords(u.x,u.y,u.x,u.y)}return l}}transformInPlace(e,i,s,n){return K(0),0}transformInPlaceZ(e,i,s,n,r,o){if(this.m_projTransform.isIdentity())return e!==n&&D6(n,e,s),i!==r&&dn(r,i,0,0,s),s;const l=this.m_projTransform,u=l.getInputSR(),f=l.getOutputSR(),y=u.getCoordinateSystemType(),_=f.getCoordinateSystemType();if(y===0&&y===_){const A=u.getHorzUnitFactor()/f.getHorzUnitFactor(),k=new _i;return k.setScaleCoords(A,A),k.transformPoints2D(e,s,n),l.isVertical()&&K(0),s}y===3&&js("image: transform_in_place_"),_===3&&js("image: transform_in_place_"),_rt(e,s,n,u,this.m_inputPCSHorizonClipOption),r!==i&&dn(r,i,0,0,s),y===2&&qj(u,0,n,s),J2(this.m_projTransform,n,r,s,!1);let x=0;const S=_===2;if(S?x=f.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(x=this.m_centralMeridianOfOutputGCS),S&&this.m_outputPCSHorizonClipOption!==0||gye(n,s,f.getGCS(),x),S){if(!Lz(n,s,f,this.m_outputPCSHorizonClipOption))for(let A=0;A<s;++A)n[A].setNAN();zj(f,n,s,!1)}let P=s;for(let A=0;A<s;++A)n[A].isNAN()&&(r&&(r[A]=Number.NaN),P--);return P}}function rT(t){if(t.getCoordinateSystemType()!==2)return 0;let e=0;const i=t.getPCSInfo(),s=i.getNorthPoleLocation(),n=i.getSouthPoleLocation(),r=i.getNorthPoleGeometry(),o=i.getSouthPoleGeometry();return r===Ha.PE_POLE_POINT&&s!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(e=1),o===Ha.PE_POLE_POINT&&n!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(e|=2),e}function ynt(t,e){return K(0),{}}class c2{getOperatorType(){return 10300}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s){return!i||i.isIdentity()?e:new vnt(e,i,s)}execute(e,i,s){return i.isIdentity()?e:cye(e,i,s)}transform(e,i,s,n,r=!0){return r?dnt(e,i,s,n,null):uye(e,i,s,n,null)}transform3D(e,i,s,n,r=!0){return K(0),0}foldInto360Range(e,i){return K6(e,i,null)}foldInto360RangeGeodetic(e,i,s){return Oz(e,i,s,null)}normalizeGeometryEx(e,i,s,n,r=0){return Bnt(e,i,s,n,r)}normalizeGeometry(e,i,s){return fnt(e,i,s)}clipToSpatialReference(e,i,s,n=0){return mnt(e,i,s,n)}}class vnt extends Ca{constructor(e,i,s){super(),this.m_projTrans=i,this.m_progressTracker=s,this.m_index=-1,e||Je(""),this.m_inputGeoms=e}next(){const e=this.m_inputGeoms.next();return e!=null?(q2(e),Ku(e),this.m_index=this.m_inputGeoms.getGeometryID(),cye(e,this.m_projTrans,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return K(0),!1}getRank(){return K(0),0}}function sse(t,e,i,s,n,r,o=!1){t||Je("Geometry.Geodetic_densify.densify");let l=t.getGeometryType();if(Ku(t),q2(t),t.isEmpty()||Ng(l))return t;const u=new wnt;u.m_sr=e,u.m_gcs=e.getGCS(),u.m_transform=u.m_gcs!==e?e.getSRToGCSTransform():null,u.m_progressTracker=r;const f=y5();let y,_,x;if(u.m_gcs.querySpheroidData(f),u.m_a=f.majorSemiAxis,u.m_eSquared=f.e2,u.m_rpu=u.m_gcs.getUnit().getUnitToBaseFactor(),u.m_gcsTolerance=u.m_gcs.getTolerance(0),u.m_radTolerance=u.m_gcsTolerance*u.m_rpu,u.m_maxLength=s,u.m_maxDeviation=n,u.m_curveType=i,l===me.enumEnvelope){const S=new Wt({vd:t.getDescription()});S.addEnvelope(t,!1),y=S,l=me.enumPolygon}else if(Dn(l)){const S=new vi({vd:t.getDescription()});S.addSegment(t,!0),y=S,l=me.enumPolyline}else y=t;if(u.m_curveType!==4){if(_=u.m_transform&&!u.m_transform.isIdentity()?new c2().execute(y,u.m_transform,r):QE(y,u.m_gcs),_.isEmpty())return _;_=_nt(u.m_rpu,_);let S=u.geodeticDensify(_);o||(S=new c2().foldInto360RangeGeodetic(S,u.m_gcs,u.m_curveType)),x=u.m_transform&&!u.m_transform.isIdentity()?new c2().execute(S,u.m_transform.getInverse(),r):S}else{let S;if(e.isPannable())S=QE(y,e);else{const P=e.getPCSHorizon();S=new Z2().execute(y,P,e,r),S===P&&(S=P.clone())}if(_=S,_.isEmpty())return _;x=u.shapePreservingDensify(_)}return x}function _nt(t,e){const i=new xe;if(e.queryLooseEnvelope(i),i.width()*t<Math.PI)return e;let s=!1;const n=e.querySegmentIterator(),r=new Y,o=new Y;for(;n.nextPath();)for(;n.hasNextSegment();){const P=n.nextSegment();if(r.setCoordsPoint2D(P.getStartXY()),o.setCoordsPoint2D(P.getEndXY()),r.scale(t),o.scale(t),Math.abs(r.x-o.x)>Math.PI){if(!nse(r,o)){s=!0;break}if(Math.abs(r.x-o.x)>2*Math.PI){s=!0;break}}}if(!s)return e;const l=e.createInstance();l.reserve(e.getPointCount());const u=e.getDescription().getAttributeCount()>1,f=new Y,y=new Y,_=new Y(0,0),x=new Y(0,0),S=new Ut;for(n.resetToFirstPath();n.nextPath();){let P=Number.NaN,A=0;for(;n.hasNextSegment();){const k=n.nextSegment();if(r.setCoordsPoint2D(k.getStartXY()),o.setCoordsPoint2D(k.getEndXY()),r.scale(t),o.scale(t),Number.isNaN(P)?(A=Oy(r.x,Number.NaN,A),_.setCoordsPoint2D(r)):_.setCoordsPoint2D(x),P=_.x,nse(r,o)){if(o.x-r.x>2*Math.PI)for(;o.x-r.x>2*Math.PI;)o.x-=2*Math.PI;else if(o.x-r.x<2*-Math.PI)for(;o.x-r.x<2*-Math.PI;)o.x+=2*Math.PI;A=Oy(o.x,Number.NaN,A),x.setCoordsPoint2D(o)}else f.setCoordsPoint2D(o),Int(f),A=Oy(f.x,P,A),x.setCoords(A+f.x,f.y);if(Math.abs(x.x-o.x)<.5&&x.setCoordsPoint2D(o),u)k.queryCoord(0,S),y.setCoordsPoint2D(_),y.scale(1/t),S.setXY(y),n.isFirstSegmentInPath()?l.startPathPoint(S):l.lineToPoint(S),n.isLastSegmentInPath()&&!n.isPathClosed()&&(k.queryCoord(1,S),y.setCoordsPoint2D(x),y.scale(1/t),S.setXY(y),l.lineToPoint(S));else{n.isFirstSegmentInPath()&&l.insertPath2D(-1,null,0,0,!0);const $=l.getPathCount()-1;y.setCoordsPoint2D(_),y.scale(1/t),l.insertPoint2D($,-1,y),n.isLastSegmentInPath()&&!n.isPathClosed()&&(y.setCoordsPoint2D(x),y.scale(1/t),l.insertPoint2D($,-1,y))}}}return l}function nse(t,e){return!(!gs(t.y,Ss)||!gs(e.y,Ss))||!(!gs(t.y,-Ss)||!gs(e.y,-Ss))}function bnt(t,e){return!(!gs(t.y,Ss)||gs(e.y,Ss))||!(!gs(t.y,-Ss)||gs(e.y,-Ss))}function xnt(t,e){return!(!gs(e.y,Ss)||gs(t.y,Ss))||!(!gs(e.y,-Ss)||gs(t.y,-Ss))}class wnt{constructor(){this.m_sr=null,this.m_gcs=null,this.m_transform=null,this.m_progressTracker=null,this.m_a=0,this.m_eSquared=0,this.m_rpu=0,this.m_gcsTolerance=0,this.m_radTolerance=0,this.m_maxLength=0,this.m_maxDeviation=0,this.m_curveType=0}geodeticDensify(e){const i=e.createInstance(),s=e.querySegmentIterator(),n=[],r=[],o=new Qt,l=e.getDescription().getAttributeCount()>1;for(;s.nextPath();){const u=[0];for(;s.hasNextSegment();){const f=s.nextSegment(),y=f.getStartXY(),_=f.getEndXY();y.scale(this.m_rpu),_.scale(this.m_rpu);const x=new Y,S=new Y,P=y.compare(_)>0;Pnt(P,y,_,x,S),n.length=0,r.length=0,this.m_maxLength>0?Snt(this.m_a,this.m_eSquared,this.m_curveType,x,S,this.m_maxLength,this.m_maxDeviation,this.m_radTolerance,null,null,l?r:null,n,u):Ent(),P&&lse(null,null,l?r:null,n),n[0].setCoordsPoint2D(f.getStartXY()),n.at(-1).setCoordsPoint2D(f.getEndXY());const A=1/this.m_rpu;for(let k=1,$=n.length-1;k<$;k++)n[k].scale(A);if(l){const k=cse(P,f,o);ose(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),f,k,r,n,i)}else rse(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),n,i)}}return i}shapePreservingDensify(e){const i=e.createInstance(),s=e.querySegmentIterator(),n=[],r=[],o=new Qt,l=e.getDescription().getAttributeCount()>1;for(;s.nextPath();)for(;s.hasNextSegment();){const u=s.nextSegment(),f=u.getStartXY(),y=u.getEndXY(),_=f.compare(y)>0,x=cse(_,u,o);n.length=0,r.length=0,Cnt(this.m_a,this.m_eSquared,this.m_rpu,x,this.m_sr,this.m_maxLength,this.m_maxDeviation,l?r:null,n),_&&lse(null,null,l?r:null,n),l?ose(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),u,x,r,n,i):rse(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),n,i)}return i}}function rse(t,e,i,s){t&&s.insertPath2D(-1,null,0,0,!0);const n=s.getPathCount()-1;s.insertPointsFromPoints(n,-1,i,0,i.length-1,!0),e&&s.insertPoint2D(n,-1,i.at(-1))}function ose(t,e,i,s,n,r,o){o.reserve(o.getPointCount()+r.length-1);const l=new Ut;if(i.queryStart(l),t?o.startPathPoint(l):o.lineToPoint(l),r.length>2){const u=s.calculateLength2D();for(let f=1;f<r.length-1;f++){const y=s.lengthToT(n[f]*u);s.queryCoord(y,l),l.setXY(r[f]),o.lineToPoint(l)}}e&&(i.queryEnd(l),o.lineToPoint(l))}function Snt(t,e,i,s,n,r,o,l,u,f,y,_,x){const S={stack:[],error:void 0,hasError:!1};try{const P=Kl(S,new Gh,!1),A=Kl(S,new Gh,!1),k=Kl(S,new Gh,!1);Rg.geodeticDistance(t,e,s.x,s.y,n.x,n.y,k,P,A,i);const $=k.val,F=P.val,G=A.val;let V=F,B=G;V<0&&(V+=2*Math.PI),B<0&&(B+=2*Math.PI),u&&(u[0]=V),f&&(f[0]=B);let W=Number.NaN,J=Number.NaN;if(y!==null){const we=Ose.q90(t,e),Fe=Ose.q(t,e,s.y);W=(we-Fe)/$,J=(we+Fe)/$}const re=bnt(s,n),se=xnt(s,n),oe=re||se,pe=Tnt(s,n,l),ce=Kl(S,new BKe(new Gh,new Gh),!1),ue=new Y,ne=new Y,de=new Y;x[0]=Oy(s.x,Number.NaN,x[0]);let Se=x[0];if($<=r)return _.push(s.clone()),x[0]=Oy(n.x,Number.NaN,x[0]),y!=null&&y.push(0),oe?(re&&use(s,n,y,_),se&&hse(s,n,y,_)):pe?dse(s,n,F,W,J,y,_):o>0&&(ne.setCoords(s.x-Se,s.y),ue.setCoords(n.x-x[0],n.y),Se=ase()),_.push(n.clone()),$;const Pe=1+Math.ceil($/r),Re=$/(Pe-1),Oe=new Y;_.push(s.clone()),Oe.setCoordsPoint2D(s),ne.setCoords(s.x-x[0],s.y),y!==null&&y.push(0);for(let we=1;we<Pe;we++){let Fe;if(we<Pe-1){const it=we*Re;Rg.geodeticCoordinate(t,e,s.x,s.y,it,F,ce.at(0),ce.at(1),i),ue.setCoords(ce.at(0).val,ce.at(1).val),x[0]=Oy(ue.x,Oe.x,x[0]),de.setCoords(x[0]+ue.x,ue.y),Fe=we/(Pe-1)}else x[0]=Oy(n.x,Number.NaN,x[0]),ue.setCoords(n.x-x[0],n.y),de.setCoordsPoint2D(n),Fe=1;oe?(we===1&&re&&use(s,de,y,_),we===Pe-1&&se&&hse(Oe,n,y,_)):pe?hye(Oe,de,l)&&(s.x<n.x?Oe.x>de.x&&(x[0]+=2*Math.PI,de.setCoords(x[0]+ue.x,ue.y)):Oe.x<de.x&&(x[0]-=2*Math.PI,de.setCoords(x[0]+ue.x,ue.y)),dse(Oe,de,F,W,J,y,_)):o>0&&ase(),_.push(de.clone()),y!=null&&y.push(Fe),Oe.setCoordsPoint2D(de),ne.setCoordsPoint2D(ue),Se=x[0]}return $}catch(P){S.error=P,S.hasError=!0}finally{fm(S)}}function Ent(t,e,i,s,n,r,o,l,u,f){K(0)}function ase(t,e,i,s,n,r,o,l,u,f,y,_,x,S,P){return K(0),0}function LN(t,e,i,s){const n=pl(t,e,i),r=pl(t,e,s);return ii.distance(n,r)}function Cnt(t,e,i,s,n,r,o,l,u){const f=s.isCurve(),y=ctt(t,e)*Math.PI*179/180;let _=r;r>0&&!(r>y)||(_=y),_=mie(t,e,_);let x=o;!f||x>0||(x=.001);const S=x>0;let P=Number.NaN;S&&(P=mie(t,e,x));const A=n.getPECoordSys(),k=n.getCoordinateSystemType()===1,$=n.getTolerance(0),F=s.getStartXY(),G=s.getEndXY(),V=new Y,B=new Y;if(k)V.setCoordsPoint2D(F),V.scale(i),B.setCoordsPoint2D(G),B.scale(i);else{const de=[F.x,F.y,G.x,G.y];Ka.projToGeog(A,2,de),V.setCoords(de[0],de[1]),V.scale(i),B.setCoords(de[2],de[3]),B.scale(i)}let W=0,J=0;const re=[],se=[],oe=[];re.push(G.clone()),se.push(B.clone()),oe.push(1),u.push(F.clone()),l!==null&&l.push(J);const pe=n.isPannable(),ce=F.clone(),ue=[.5,.33333333333333337,.6666666666666666,.16666666666666669,.8333333333333333];let ne=5;for(f||(S?(ue[0]=.5,ue[1]=.25,ue[2]=.75,ne=3):ne=1);se.length>0;){const de=re.at(-1).clone();B.assign(se.at(-1));const Se=oe.at(-1);let Pe=!1,Re=Number.NaN;const Oe=LN(t,e,V,B);let we=_>=Oe&&Math.abs(V.y-B.y)<.9*Math.PI;k&&we&&(we=Math.abs(V.x-B.x)<.9*Math.PI);const Fe=new Y,it=new Y;let vt=!1;if(f||S||!we||we&&(vt=!0),s.calculateSubLength(J,Se)<=$&&(vt=!0),!vt)for(let ot=0;ot<ne;ot++){const ut=ji(J,Se,ue[ot]),Ct=new Y;s.queryCoord2D(ut,Ct);const qt=new Y;if(k)qt.setCoords(Ct.x*i,Ct.y*i);else{const Lt=[Ct.x,Ct.y];Ka.projToGeog(A,1,Lt),qt.setCoords(Lt[0]*i,Lt[1]*i)}if(ot===0&&(Re=ut,Fe.setCoordsPoint2D(Ct),it.setCoordsPoint2D(qt),!we)){Pe=!0;break}if(k&&Math.abs(V.x-qt.x)>=Math.PI){Pe=!0;break}if(_<LN(t,e,V,qt)){Pe=!0;break}if(S){const Lt=stt(t,e,V,B,ue[ot]),Dt=Lt.clone();if(k?(Dt.x/=i,Dt.y/=i):(Dt.x/=i,Dt.y/=i,uye(n.getGCSToSRTransform(),[Dt],1,[Dt],null)),Dt.isNAN()){const Wi=pl(t,e,qt),us=pl(t,e,V),fn=pl(t,e,B),{first:Us,second:dr}=pie(t,e,Wi,us,fn,2);if(dr>P){Pe=!0;break}}else{if(pe){const Us=n.getPannableExtent().width(),dr=ji(s.getStartX(),s.getEndX(),.5);for(;Dt.x<dr-.5*Us;)Dt.x+=Us;for(;Dt.x>=dr+.5*Us;)Dt.x-=Us}const Wi=s.getClosestCoordinateOnInterval(Dt,new Ze(J,Se),-1),us=s.getCoord2D(Wi);if(!k){const Us=[us.x,us.y];Ka.projToGeog(A,1,Us),us.x=Us[0],us.y=Us[1]}us.x*=i,us.y*=i;let fn=LN(t,e,us,Lt);if(fn>P){if(fn<4*P){const Us=pl(t,e,us),dr=pl(t,e,V),ho=pl(t,e,B),{first:ss,second:ye}=pie(t,e,Us,dr,ho,2);fn=ye}if(fn>P){Pe=!0;break}}}}}Pe?(re.push(Fe.clone()),se.push(it.clone()),oe.push(Re)):(re.pop(),se.pop(),oe.pop(),u.push(de.clone()),W+=Oe,l!==null&&l.push(W),ce.setCoordsPoint2D(de),V.setCoordsPoint2D(B),J=Se)}if(l!==null){const de=1/W;for(let Se=0;Se<l.length;Se++)l[Se]*=de}}function lse(t,e,i,s){s.reverse(),i!==null&&i.reverse()}function Pnt(t,e,i,s,n){t?(s.setCoordsPoint2D(i),n.setCoordsPoint2D(e)):(s.setCoordsPoint2D(e),n.setCoordsPoint2D(i))}function cse(t,e,i){return t?(i.create(e.getGeometryType()),e.copyTo(i.get()),i.get().reverse(),i.get()):e}function Oy(t,e,i){if(Number.isNaN(e)){for(;i-t>Math.PI;)i-=2*Math.PI;for(;t-i>Math.PI;)i+=2*Math.PI;return i}return i+t-e>Math.PI?i-=2*Math.PI:e-(i+t)>Math.PI&&(i+=2*Math.PI),i}function use(t,e,i,s){if(t.y>0){const n=new Y;n.setCoords(e.x,Ss),gs(t.x,n.x)||gs(e.y,n.y)||(s.push(n),i!==null&&i.push(0))}else{const n=new Y;n.setCoords(e.x,-Ss),gs(t.x,n.x)||gs(e.y,n.y)||(s.push(n),i!==null&&i.push(0))}}function hse(t,e,i,s){if(e.y>0){const n=new Y;n.setCoords(t.x,Ss),gs(e.x,n.x)||gs(t.y,n.y)||(s.push(n),i!==null&&i.push(1))}else{const n=new Y;n.setCoords(t.x,-Ss),gs(e.x,n.x)||gs(t.y,n.y)||(s.push(n),i!==null&&i.push(1))}}function dse(t,e,i,s,n,r,o){if(qot(i)){if(Ss-t.y>0){const l=new Y;l.setCoords(t.x,Ss),o.push(l),r!==null&&r.push(s)}if(Ss-e.y>0){const l=new Y;l.setCoords(e.x,Ss),o.push(l),r!==null&&r.push(s)}}else{if(Ss+t.y>0){const l=new Y;l.setCoords(t.x,-Ss),o.push(l),r!==null&&r.push(n)}if(Ss+e.y>0){const l=new Y;l.setCoords(e.x,-Ss),o.push(l),r!==null&&r.push(n)}}}function Tnt(t,e,i){return!(!hye(t,e,i)||gs(t.y,Ss)||gs(t.y,-Ss)||gs(e.y,Ss)||gs(e.y,-Ss))}function hye(t,e,i){return Math.abs(Math.abs(t.x-e.x)-Math.PI)<=i}function Int(t){if(t.x<-Math.PI)for(;t.x<-Math.PI;)t.x+=2*Math.PI;else if(t.x>Math.PI)for(;t.x>Math.PI;)t.x-=2*Math.PI}function Mnt(t,e,i,s,n){const r=new xe;i.queryEnvelope(r);const o=xl(null,i,!0).total();if(e.xmin-r.xmin<=o&&r.xmax-e.xmax<=o)return i;const l=e.width();let u=0;for(;e.xmin+u*l<r.xmin;)u++;for(;e.xmin+u*l>r.xmin;)u--;const f=u*l,y=new _i;y.setShiftCoords(-f,0);const _=i;_.applyTransformation(y);const x=new xe;_.queryEnvelope(x);let S=null;if(x.xmax>e.xmax){let P=0;const A=new xe;A.setCoords({env2D:e}),A.ymin-=1,A.ymax+=1;let k=_;for(;A.xmin<x.xmax;){x.xmax>A.xmax&&(k=yye(k,t,2,!0,A.xmax));const $=vs(k,A,Kn(null,bj(k,A),!0).total(),Number.NaN,n);S===null?S=$===k?$.clone():$:(y.setShiftCoords(-P*l,0),$.applyTransformation(y),S.add($,!1)),P++,A.xmin=A.xmax,A.xmax=e.xmax+P*l}}else S=_;return S}class Ant{constructor(e,i){this.m_basisX=new ii,this.m_basisY=new ii,this.m_normal=new ii,K(e.getCoordinateSystemType()===1),this.m_gcs=e;const s=y5();e.querySpheroidData(s),this.m_a=s.majorSemiAxis,this.m_e2=s.e2,this.m_rpu=e.getUnit().getUnitToBaseFactor(),this.m_curvCenterRad=i.mul(this.m_rpu);const n=this.m_curvCenterRad.x,r=this.m_curvCenterRad.y,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),f=Math.sin(r);this.m_cartCenter3D=itt(this.m_a,this.m_e2,o,l,u,f),this.m_normal.setCoordsPoint3D(this.m_cartCenter3D),this.m_d=this.m_cartCenter3D.length(),this.m_normal.divThis(this.m_d),ii.selectRightHandedBasisFromNormal(this.m_normal,this.m_basisX,this.m_basisY),this.m_northPolePcs=this.projectPoint(Y.construct(0,.5*Math.PI/this.m_rpu)),this.m_southPolePcs=this.projectPoint(Y.construct(0,.5*-Math.PI/this.m_rpu))}project(e){const i=e.getGeometryType();if(tl(i)){q2(e);const s=e;return this.projectMultiVertex(s)}Je("Gnomonic.project")}unproject(e,i,s){const n=e.getGeometryType();if(tl(n)){q2(e);let r=e;const o=[];if(n===me.enumPolygon){const l=r.getPathCount();for(let u=0;u<l;u++){const f=r.calculateRingArea2D(u);o.push(f)}}return this.unprojectMultiVertex(i,r),bi(n)?(znt(this.m_gcs,0,r),Dnt(o,this.m_gcs,0,r,s)):r=K2(r,this.m_gcs,0,!0,0,s),r}Je("Gnomonic.unproject")}projectPoint(e){const i=e.mul(this.m_rpu),s=pl(this.m_a,this.m_e2,i),n=this.m_normal.dotProduct(s);if(n<=0)return Y.construct(Number.NaN,Number.NaN);const r=this.m_d/n,o=s.mul(r).sub(this.m_cartCenter3D),l=new Y;return l.x=this.m_basisX.dotProduct(o),l.y=this.m_basisY.dotProduct(o),l}unprojectPoint(e){const i=this.m_cartCenter3D.add(this.m_basisX.mul(e.x).add(this.m_basisY.mul(e.y)));return ZE(this.m_a,this.m_e2,i).divide(this.m_rpu)}projectMultiVertex(e){const i=e.getImpl();let s=!0;const n=new Y,r=new Y;for(let o=0,l=i.getPointCount();o<l;o++)i.queryXY(o,n),n.y*this.m_rpu>.5*Math.PI?r.assign(this.m_northPolePcs):n.y*this.m_rpu<.5*-Math.PI?r.assign(this.m_southPolePcs):r.assign(this.projectPoint(n)),i.setXY(o,r),r.isNAN()&&(s=!1);return i.notifyModifiedFlags(2001),s}unprojectMultiVertex(e,i){const s=i.getImpl(),n=e*e,r=!this.m_northPolePcs.isNAN(),o=!this.m_southPolePcs.isNAN();for(let l=0,u=s.getPointCount();l<u;l++){const f=s.getXY(l);let y=new Y;r&&Y.sqrDistance(f,this.m_northPolePcs)<=n?(y.setCoords(this.m_curvCenterRad.x,.5*Math.PI),y.scale(1/this.m_rpu)):o&&Y.sqrDistance(f,this.m_southPolePcs)<=n?(y.setCoords(this.m_curvCenterRad.x,.5*-Math.PI),y.scale(1/this.m_rpu)):y=this.unprojectPoint(f),s.setXY(l,y)}s.notifyModifiedFlags(2001)}}function Dnt(t,e,i,s,n){const r=s.getGeometryType(),o=e.getPannableExtent();let l=s,u=!1,f=!1;if(r===me.enumPolygon){const y=new xe,_=Y.construct(i,0);y.setCoords({env2D:o}),y.centerAt(_),u=knt(t,e,y,l,n);const x=Fnt(e,y,l,n);x!==l&&(f=!0),l=x}else l=new c2().foldInto360RangeGeodetic(l,e,2);r===me.enumPolygon&&(u||f)&&(l=new Mc().execute(l,e,!1,n)),l!==s&&(s.setEmpty(),s.add(l,!1))}function knt(t,e,i,s,n){const r=Nnt(i,s),o=$nt(t,e,i,s,n);return r||o}function Nnt(t,e){const i=new xe;e.queryEnvelope(i);const s=gs(t.ymax,i.ymax),n=gs(t.ymin,i.ymin),r=s||n;return!!r&&(Ont(t,e),r)}function $nt(t,e,i,s,n){const r=[],o=[],l=.5*i.width();for(let _=0;_<s.getPathCount();_++){const x=s.getXY(s.getPathStart(_)),S=s.getXY(s.getPathEnd(_)-1),P=t[_]<0;if(Math.abs(x.x-S.x)>l){const A=Rnt(P,e,i,_,s,n);r.push(A),o.push(_)}else if(!P&&s.calculateRingArea2D(_)<0){const A=Lnt(e,i,_,s,n);r.push(A),o.push(_)}}if(r.length===0)return!1;const u=new Wt({vd:s.getDescription()});let f=0,y=o[f];for(let _=0;_<s.getPathCount();_++)_===y?(u.add(r[f],!1),f++,f<o.length&&(y=o[f])):u.addPath(s,_,!0);return s.setEmpty(),s.add(u,!1),!0}function Ont(t,e){const i=new Wt,s=new xe;for(let n=0;n<e.getPathCount();n++){e.queryPathEnvelope(n,s);let r=gs(t.ymax,s.ymax),o=gs(t.ymin,s.ymin);if(!(r||o)){i.addPath(e,n,!0);continue}i.insertPath2D(-1,null,0,0,!0);const l=e.getPathStart(n),u=e.getPathEnd(n),f=u-l;let y=-1;for(y=l;y<u;y++){const P=e.getXY(y);if(r=gs(t.ymax,P.y),o=gs(t.ymin,P.y),!r&&!o)break}let _=y,x=!1,S=Number.NaN;do{const P=e.getXY(_);r=gs(t.ymax,P.y),o=gs(t.ymin,P.y);const A=l+(_+1-l)%f;if(r||o){let k=Y.construct(S,P.y);i.insertPoint2D(n,-1,k);const $=e.getXY(A),F=gs(t.ymax,$.y),G=gs(t.ymin,$.y);F||G||(k=Y.construct($.x,P.y),x?i.setXY(i.getPointCount()-1,k):i.insertPoint2D(n,-1,k)),x=!0}else i.insertPoint2D(n,-1,P),S=P.x,x=!1;_=A}while(_!==y)}e.setEmpty(),e.add(i,!1)}function Rnt(t,e,i,s,n,r){const o=new Wt,l=new Wt,u=new _i,f=n.getXY(n.getPathStart(s)),y=n.getXY(n.getPathEnd(s)-1),_=i.width(),x=.5*_,S=new xe;n.queryEnvelope(S);const P=Math.ceil(S.width()/_)+1;let A,k;f.x>y.x?(A=-_,k=t?i.ymin:i.ymax):(A=_,k=t?i.ymax:i.ymin),u.setShiftCoords(A,0),o.addPath(n,s,!0),l.add(o,!1);const $=new Ut;for(let ue=0;ue<P;ue++)l.applyTransformation(u),l.getPointByVal(0,$),o.lineToPoint($),o.addSegmentsFromPath(l,0,0,l.getSegmentCount()-1,!1);const F=o.getXY(0),G=o.getXY(o.getPointCount()-1);F.y=k,G.y=k,o.lineTo(G);const V=new Y;for(V.setCoordsPoint2D(G),V.x-=.5*A;Math.abs(V.x-F.x)>x;)o.lineTo(V),V.x-=.5*A;o.lineTo(F);const B=i.getCenter().x,W=new xe;o.queryEnvelope(W);let J=0;const re=W.getCenter().x;re-B>x?J=-Math.ceil((re-B-x)/_):B-re>x&&(J=Math.ceil((B-re-x)/_)),J!==0&&(u.setShiftCoords(J*_,0),o.applyTransformation(u));const se=new Bs,oe=se.addGeometry(o);JE(se,oe,e,0,2,!0,i.xmin),JE(se,oe,e,0,2,!0,i.xmax);const pe=se.getGeometry(oe),ce=bj(pe,i);return ce.inflateCoords(0,1),vs(pe,i,Kn(null,ce,!0).total(),Number.NaN,r)}function Lnt(t,e,i,s,n){const r=e.width(),o=.5*r,l=e.getCenter().x,u=new xe;s.queryPathEnvelope(i,u);let f,y=0,_=u.getCenter().x;if(_-l>o?y=-Math.ceil((_-l-o)/r):l-_>o&&(y=Math.ceil((l-_-o)/r)),y!==0){const A=new _i;A.setShiftCoords(y*r,0),s.getImpl().applyTransformationToPath(A,i),s.queryPathEnvelope(i,u),_=u.getCenter().x}const x=new xe;e.containsExclusiveEnvelope(u)?(f=!1,x.setCoords({env2D:e})):(f=!0,x.setCoords({env2D:e}),x.xmin-=r,x.xmax+=r);let S=s.createInstance();S.addPathPoint2D(null,0,!0);const P=new Y;if(P.setCoords(x.xmin,x.ymin),S.insertPoint2D(0,-1,P),P.setCoords(x.xmin,x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(.5*(x.xmin+x.xmax),x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(x.xmax,x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(x.xmax,x.ymin),S.insertPoint2D(0,-1,P),P.setCoords(.5*(x.xmin+x.xmax),x.ymin),S.insertPoint2D(0,-1,P),f){S.addPath(s,i,!0);const A=new _i;_<l?A.setShiftCoords(r,0):A.setShiftCoords(-r,0),s.getImpl().applyTransformationToPath(A,i),S.addPath(s,i,!0);const k=new Bs,$=k.addGeometry(S);JE(k,$,t,0,2,!0,e.xmin),JE(k,$,t,0,2,!0,e.xmax),S=k.getGeometry($);const F=bj(S,e);F.inflateCoords(0,1),S=vs(S,e,Kn(null,F,!0).total(),Number.NaN,n)}else S.addPath(s,i,!0);return S}function Fnt(t,e,i,s){const n=new xe;i.queryEnvelope(n);const r=xl(null,i,!0).total();if(e.xmin-n.xmin<=r&&n.xmax-e.xmax<=r)return i;const o=i.createInstance();let l=i.createInstance();const u=new xe,f=i.getPathCount();for(let y=0;y<f;y++)i.queryPathEnvelope(y,u),e.xmin-u.xmin<=r&&u.xmax-e.xmax<=r?o.addPath(i,y,!0):(l.setEmpty(),l.addPath(i,y,!0),l=Mnt(t,e,l,!0,s),o.add(l,!0));return o}function znt(t,e,i){const s=t.getPannableExtent(),n=Y.construct(e,0);s.centerAt(n);const r=s.width(),o=.5*r,l=new Y;l.setNAN();let u=Number.NaN;for(let f=0;f<i.getPathCount();f++)for(let y=i.getPathStart(f);y<i.getPathEnd(f);y++){const _=i.getXY(y),x=gs(_.y,s.ymax)||gs(s.ymin,_.y);y===i.getPathStart(f)?(l.setNAN(),u=0):l.isNAN()||x||(u=qnt(_.x,l.x,o,r,u)),_.x+=u,i.setXY(y,_),x||l.setCoordsPoint2D(_)}i.getImpl().notifyModifiedFlags(2001)}function qnt(t,e,i,s,n){return n+t-e>i?n-=s:e-(n+t)>i&&(n+=s),n}function fse(t,e,i,s,n,r){const o=e.getAttributeStreamRef(0),l=e.getPointCount();let u=!1;const f=new Y;for(let V=0;V<l;++V){if(o.queryPoint2D(2*V,f),1&r&&f.y>=i){u=!0;break}if(2&r&&f.y<=-i){u=!0;break}}if(!u)return!1;let y=!1;t&&(y=e.getImpl().isClosedPathInXYPlane(0));const _=new Bs,x=_.addGeometry(e),S=_.getFirstPath(x);let P=-1,A=!0;const k=new Y,$=new Ut;let F=ae;const G=dye*n/360;for(let V=_.getFirstVertex(S);V!==ae;V=_.getNextVertex(V)){_.queryXY(V,f);let B=1&r&&f.y>=i?1:0;if(B|=2&r&&f.y<=-i?2:0,P>0&&P!==B){if(k.x!==f.x){const W=_.getPrevVertex(V);_.queryPoint(W,$);const J=_.insertVertex(S,V,$);k.x=f.x,_.setXY(J,k)}if(y){let W=F!==ae?_.getNextVertex(F):_.getFirstVertex(S);const J=_.getPrevVertex(V);for(;W!==J;)W=_.removeVertex(W,!1);if(F!==ae){const re=_.getXY(F),se=_.getXY(J);if(Math.abs(re.x-se.x)>G){_.queryPoint(F,$);const oe=_.insertVertex(S,J,$);re.x=ji(re.x,se.x,.5),_.setXY(oe,re)}}}F=ae}if(B&&(f.y=rm(s,f.y),_.setXY(V,f),!A&&P!==B))if(f.x!==k.x){_.queryPoint(V,$);const W=_.insertVertex(S,V,$);_.setXYCoords(W,k.x,f.y),F=W}else F=V;P=B,k.assign(f),A=!1}if(y){if(F!==ae){let re=_.getNextVertex(F);for(;re!==ae;)re=_.removeVertex(re,!1)}const V=_.getFirstVertex(S);let B=_.getLastVertex(S);const W=_.getXY(V),J=_.getXY(B);if(!W.equals(J)&&(_.queryPoint(V,$),B=_.insertVertex(S,ae,$),Math.abs(W.x-J.x)>G)){const re=_.insertVertex(S,B,$);W.x=ji(W.x,J.x,.5),_.setXY(re,W)}}return e.assignCopy(_.getGeometry(x)),!0}function Vnt(t,e){let i=new Wt({vd:t});i.addEnvelope(e,!1);const s=e.width()/180;return i=new X0().execute(i,s,0,0,null),i}function Gnt(t,e){const i=t.getPannableExtent();return Number.isNaN(e)||i.centerAtCoords(e,0),i}function jnt(t,e,i){const s=y5();e.querySpheroidData(s);const n=e.getGCS()!==e?e.getSRToGCSTransform():null,r=Ge(Y,100),o=new ii(0,0,0),l=t.getPointCount(),u=e.getGCS().getUnit().getUnitToBaseFactor();for(let x=0,S=l;x<S;){const P=Math.min(100,S-x);t.queryCoordinates(r,P,x,x+P),n&&new c2().transform(n,r,P,r,!1);for(let A=0;A<P;A++){if(r[A].isNAN())continue;r[A].scale(u);const k=pl(s.majorSemiAxis,s.e2,r[A]);o.addThis(k)}x+=P}const f=ZE(s.majorSemiAxis,s.e2,o);f.scale(1/u);const y=t;if(!new Ant(e.getGCS(),f).project(y))return 0;i.length=t.getPathCount();const _=y.calculateArea2D()<0;for(let x=0,S=t.getPathCount();x<S;x++){const P=y.calculateRingArea2D(x),A=_?P<0:P>0;i[x]=A}return _?-1:1}function Bnt(t,e,i,s,n){if(!e.isPannable()||t.isEmpty())return t;const r=t.getGeometryType();r===me.enumGeometryCollection&&K(0);const o=e.getPannableExtent();Number.isNaN(i)&&(i=o.getCenterX());const l=o.width(),u=.5*l,f=n>0,y=t.queryInterval(0,0);if(!f&&y.width()<u||!tl(t.getGeometryType())){const _=y.getCenter();if(Math.abs(_-i)<=u)return t;{const x=new _i,S=gv((i-_)/l)*l;x.setShiftCoords(S,0);const P=t.clone();return P.applyTransformation(x),P}}if(r===me.enumPolygon){let _=new vi({vd:t.getDescription()});_.addAndExplicitlyOpenAllPaths(t,!1),f&&(_=sse(_,e,2,n,Number.NaN,null,!0));const x=[];if(!s){{let S=t;f&&(S=new Wt,S.add(_,!1));const P=jnt(t,e,x);if(P)P<0&&_.reverseAllPaths();else{const A=S.getPathCount();for(let k=0;k<A;k++)x.push(S.calculateRingArea2D(k)>0)}}s=x}return new J6(null,s,_,null,e,i,3,0,null).geoNormalizePolygonGeometry(!0)}if(r===me.enumPolyline){let _=new vi({vd:t.getDescription()});return _.addAndExplicitlyOpenAllPaths(t,!1),f&&(_=sse(_,e,2,n,Number.NaN,null,!0)),new J6(null,null,_,null,e,i,3,0,null).geoNormalizePolylineGeometry(!0)}if(r===me.enumMultiPoint){const _=t,x=_.getAttributeStreamRef(0);let S,P=null,A=i,k=0;const $=.1*l;for(let F=0,G=_.getPointCount();F<G;F++){const V=x.read(2*F);let B=V-A;if(Math.abs(B)>u&&(B=gv(B/l)*l,k-=B,Math.abs(k)<$&&(k=0)),k!==0){P||(S=t.clone(),P=S.getAttributeStreamRef(0));const W=V+k;P.write(2*F,W)}A=V}return P?(S.notifyModified(),S):t}bt("")}const dye=210;class J6{constructor(e,i,s,n,r,o,l,u,f){this.m_bAdjustedAtPoles=0,this.m_inputPoly=s,this.m_progressTracker=f,this.m_originalGeometry=e,this.m_originalSR=n,this.m_polygonRingFlags=i,this.m_pannableSR=r,this.m_poleSnappingTolerance=u,this.m_poleFlags=l,this.m_bAdjustedAtPoles=0,this.m_pannableExtent=Gnt(this.m_pannableSR,o),this.m_centralLongitude=Number.isNaN(o)?this.m_pannableExtent.getCenterX():o,this.m_width360=this.m_pannableExtent.width(),this.m_degree=this.m_width360/360,this.m_GCSLargeDelta=dye*this.m_degree,K(this.m_originalGeometry===null&&this.m_originalSR===null||this.m_originalGeometry!==null&&this.m_originalSR!==null)}geonormalizeRing(e,i,s,n,r,o,l){let u=s;const f=new vi({vd:this.m_inputPoly.getDescription()});f.addPath(this.m_inputPoly,e,!0),this.m_poleFlags!==0&&(this.m_bAdjustedAtPoles|=fse(!0,f,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,this.m_pannableExtent.width(),this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(u=!1));let y=-1;u&&(y=this.m_originalGeometry.getPathStart(e));const _=f.getAttributeStreamRef(0),x=f.getPointCount();let S=0,P=_.read(0),A=0;const k=3*this.m_pannableSR.getTolerance(0);let $=!1;const F=new Y,G=new Y;let V=!1;const B=f.hasNonLinearSegments(),W=new Y;for(let se=1;se<x;++se){_.queryPoint2D(2*se,W);const oe=W.x;let pe=oe+S;const ce=pe-P;if(W.x=pe,Math.abs(ce)>this.m_GCSLargeDelta){if(u){const ue=y+se-1,ne=y+(se+1<x?se:0),de=o.read(2*ue),Se=(o.read(2*ne)-de)*n;Math.abs(ce-Se)>1*this.m_degree&&(u=!1)}u||(S-=rm(this.m_width360,pe-P),pe=oe+S,++A,V=S!==0,W.x=pe)}else $||PJe(F,G,W,k)&&($=!0);V&&(B&&bt("error in geonormalize_ring_ for curves"),_.write(2*se,pe)),P=pe,F.setCoordsPoint2D(G),G.setCoordsPoint2D(W)}A&&f.notifyModified();const J=f.getXY(0),re=f.getXY(x-1);if(Y.distance(J,re)<k){const se=this.finalizeGeoNormalizeClosedRing(f,$,r);l.add(se,!1)}else{i<0&&(this.m_originalGeometry!==null?(K(this.m_originalGeometry!==null),i=this.m_originalGeometry.calculateRingArea2D(e)>0?1:0):i=1);const se=this.finalizeGeoNormalizeOpenedRing(i>0,f);l.add(se,!1)}}geoNormalizePolygonGeometry(e){K(this.m_originalSR&&this.m_originalGeometry||!this.m_originalGeometry&&!this.m_originalSR),K(this.m_pannableSR.isPannable());let i=null,s=Number.NaN;const n=!!this.m_originalSR&&this.m_originalSR.isPannable();n&&(i=this.m_originalGeometry.getAttributeStreamRef(0),s=this.m_width360/this.m_originalSR.getPannableExtent().width()),this.m_bAdjustedAtPoles=0;const r=new Wt({vd:this.m_inputPoly.getDescription()});for(let P=0,A=this.m_inputPoly.getPathCount();P<A;++P){const k=this.m_polygonRingFlags?this.m_polygonRingFlags[P]?1:0:-1;this.geonormalizeRing(P,k,n,s,e,i,r)}const o=this.m_pannableSR.getTolerance(0),l=this.m_pannableExtent.width()/180;iM(r,this.m_pannableExtent,.1*o,!1);const u=xe.constructEmpty();if(u.setCoords({env2D:this.m_pannableExtent}),e){let P=!0;for(let A=0;A<2;A++){P=!0;const k=xe.constructEmpty();for(let $=0,F=r.getPathCount();$<F;$++)if(r.queryPathEnvelope($,k),!(u.xmin<=k.xmin&&u.xmax>=k.xmax||k.xmin>=u.xmax||k.xmax<=u.xmin)){P=!1;break}if(P)break;u.move(.5*this.m_width360,0)}P||u.setCoords({env2D:this.m_pannableExtent})}let f=vs(r,u,o,l,this.m_progressTracker),y=r!==f;const _=this.m_originalGeometry?this.m_originalGeometry.calculateArea2D():1,x=f.calculateArea2D();let S=0;if(x>0&&_<0)S=1;else if(x<=0&&_>0)if(x===0){if(this.m_originalSR){let P=Number.NaN;this.m_originalSR.getCoordinateSystemType()===2?P=this.m_originalSR.getPCSHorizon().calculateArea2D():this.m_originalSR.getCoordinateSystemType()===1&&(P=this.m_originalSR.getPannableExtent().getArea()),_>.99*P&&(S=-1)}}else S=-1;if(S!==0){const P=Vnt(f.getDescription(),u);P.add(f,!1),y=!0,f=P}return y&&(f=new Mc().execute(f,this.m_pannableSR,!1,this.m_progressTracker)),f}geoNormalizePolylineGeometry(e){K(this.m_pannableSR.isPannable());let i=null;const s=this.m_originalSR&&this.m_originalSR.isPannable();let n=1;s&&(K(this.m_originalGeometry),n=this.m_width360/this.m_originalSR.getPannableExtent().width(),i=this.m_originalGeometry.getAttributeStreamRef(0));const r=this.m_pannableExtent.width(),o=r*en()*4;let l=e,u=Number.NaN;const f=Ze.constructEmpty();this.m_bAdjustedAtPoles=0;let y=new vi({vd:this.m_inputPoly.getDescription()});for(let S=0,P=this.m_inputPoly.getPathCount();S<P;++S){let A=s;const k=new vi({vd:this.m_inputPoly.getDescription()});k.addPath(this.m_inputPoly,S,!0);const $=this.m_inputPoly.isClosedPath(S);this.m_poleFlags!==0&&(this.m_bAdjustedAtPoles|=fse($,k,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,r,this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(A=!1));let F=-1;const G=k.getPointCount();let V=!1;A&&(F=this.m_originalGeometry.getPathStart(S),V=this.m_originalGeometry.isClosedPath(S));const B=k.getAttributeStreamRef(0);let W=0,J=B.read(0),re=0;const se=new Y,oe=new Y;let pe=!1;const ce=k.hasNonLinearSegments(),ue=new Y;for(let ne=1;ne<G;++ne){B.queryPoint2D(2*ne,ue);const de=ue.x;let Se=de+W;const Pe=Se-J;if(ue.x=Se,Math.abs(Pe)>this.m_GCSLargeDelta){if(A){const Re=F+ne-1;let Oe=F;(!V||ne+1<G)&&(Oe+=ne);const we=i.read(2*Re),Fe=(i.read(2*Oe)-we)*n;Math.abs(Pe-Fe)>1*this.m_degree&&(A=!1)}A||(W-=rm(this.m_width360,Se-J),Se=de+W,++re,pe=W!==0,ue.x=Se)}pe&&(ce&&bt("error in geonormalize_ring_ for curves"),B.write(2*ne,Se)),J=Se,se.setCoordsPoint2D(oe),oe.setCoordsPoint2D(ue)}if(re&&k.notifyModified(),l){let ne=!1;if(!k.isEmpty()){const de=xe.constructEmpty();if(k.queryEnvelope(de),de.width()>=r||de.ymin<=this.m_pannableExtent.ymin||de.ymax>=this.m_pannableExtent.ymax)ne=!0;else{if(Number.isNaN(u)){const Pe=this.m_centralLongitude-.5*r;u=de.xmin,u+=Math.round((Pe-de.xmin)/r)*r,u>Pe&&(u-=r),K(u<=Pe),u<Pe&&(u+=r),K(u>=Pe)}let Se=Math.round((u-de.xmin)/r)*r;if(de.xmin+Se>u+o&&(Se-=r),de.xmin+Se<u-o&&(Se+=r),f.mergeCoordinate(de.xmin+Se),f.mergeCoordinate(de.xmax+Se),ne=f.width()>=r,!ne){const Pe=new _i;Pe.setShiftCoords(Se,0),k.applyTransformation(Pe)}}}y.add(k,!1),ne&&(y=(()=>{const de=new vi({vd:y.getDescription()});for(let Se=0,Pe=y.getPathCount();Se<Pe;++Se){const Re=new vi({vd:y.getDescription()});Re.addPath(y,Se,!0);const Oe=K2(Re,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);de.add(Oe,!1)}return de})(),l=!1)}else{const ne=K2(k,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);y.add(ne,!1)}}if(l)return y;const _=this.m_pannableSR.getTolerance(0),x=this.m_pannableExtent.width()/180;return iM(y,this.m_pannableExtent,.1*_,!1),vs(y,this.m_pannableExtent,_,x,this.m_progressTracker)}finalizeGeoNormalizeOpenedRing(e,i){const s=i.getPointCount(),n=i.getXY(0),r=i.getXY(s-1);{const se=Math.abs(r.x-n.x),oe=Math.round(se/this.m_width360)*this.m_width360;K(Math.abs(se-oe)<this.m_pannableSR.getTolerance(0))}const o=xn(r.x-n.x),l=xe.constructEmpty();i.queryLooseEnvelope(l);const u=this.m_pannableExtent.getCenterX();let f=0,y=u-this.m_width360,_=u+this.m_width360;if(o>=0){let se=Math.ceil((y-l.xmin)/this.m_width360);for(se*=this.m_width360;y>l.xmin+se;)se+=this.m_width360;for(;y<l.xmax+se;)se-=this.m_width360;for(f=se,l.width()>720&&(_=y+360*Math.ceil(l.width()/360));_<l.xmax;)_+=this.m_width360}else{let se=Math.ceil((_-l.xmax)/this.m_width360);for(se*=this.m_width360;_<l.xmax+se;)se-=this.m_width360;for(;_>l.xmin+se;)se+=this.m_width360;for(f=se,l.width()>720&&(y=_-360*Math.ceil(l.width()/360));y>l.xmin;)y-=this.m_width360}const x=Math.round(Math.abs(r.x-n.x)/this.m_width360)*this.m_width360,S=o*x,P=l.clone();P.move(f,0);const A=new Y(0,0),k=new _i;k.setShiftCoords(f,0),i.applyTransformation(k);const $=new vi({vd:i.getDescription()});$.add(i,!1),A.assign(i.getXY(s-1));let F=0,G=$.getXY(0).x;for(;o>0?P.xmax<_:P.xmin>y;)P.move(S,0),k.xd=S,i.applyTransformation(k),G+=S,this.m_pannableExtent.xmin<=G&&this.m_pannableExtent.xmax>=G&&(F=$.getPointCount()-1),i.setXY(0,A),A.assign(i.getXY(s-1)),$.addSegmentsFromPath(i,0,0,s-1,!1);const V=new Wt({vd:$.getDescription()});V.add($,!1);const B=$.getXY(0),W=$.getXY($.getPointCount()-1),J=o<0?e:!e,re=V.getPointCount()-1;if(J){const se=new Y(W.x,this.m_pannableExtent.ymax);V.lineTo(se);const oe=new Y(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymax);V.lineTo(oe);const pe=new Y(B.x,this.m_pannableExtent.ymax);V.lineTo(pe)}else{const se=new Y(W.x,this.m_pannableExtent.ymin);V.lineTo(se);const oe=new Y(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymin);V.lineTo(oe);const pe=new Y(B.x,this.m_pannableExtent.ymin);V.lineTo(pe)}if(V.interpolateAttributesPath(0,re,0),V.getImpl().changeRingStartPoint(F),x>this.m_width360){const se=new Wt({copy:V});k.setShiftCoords(this.m_width360,0),se.applyTransformation(k),V.add(se,!1)}return V}finalizeGeoNormalizeClosedRing(e,i,s){const n=new Wt({vd:e.getDescription()});n.add(e,!1);const r=()=>{const y=n.getPointCount()-2;return n.getSegmentType(y)!==me.enumLine};if(n.hasNonLinearSegments()&&r()){const y=new Qt,_=n.getPointCount()-2;n.getSegmentBuffer(_,y,!1),n.removePointFromPath(0,_+1),n.closeLastPathWithSegment(y.get())}else n.removePointFromPath(0,n.getPointCount()-1);const o=xe.constructEmpty();n.queryLooseEnvelope(o);let l=Math.ceil((this.m_pannableExtent.xmin-o.xmin)/this.m_width360);for(l*=this.m_width360;this.m_pannableExtent.xmin>o.xmin+l;)l+=this.m_width360;for(;this.m_pannableExtent.xmin<o.xmax+l;)l-=this.m_width360;if(l+=this.m_width360,l!==0){o.move(l,0);const y=new _i;y.setShiftCoords(l,0),n.applyTransformation(y)}if(this.m_pannableExtent.xmin<=o.xmin&&this.m_pannableExtent.xmax>=o.xmax){if(i){const _=n.calculateArea2D(),x=new Mc().execute(n,this.m_pannableSR,!0,this.m_progressTracker);if(x!==n){const S=x.calculateArea2D();xn(_)!==xn(S)&&x.reverseAllPaths(),n.assignMove(x)}}let y;if(y=new Wt(s?{copy:n}:{move:n}),s)for(;o.xmin<this.m_pannableExtent.xmax;){o.move(this.m_width360,0);const _=new _i;_.setShiftCoords(this.m_width360,0),n.applyTransformation(_),y.add(n,!1)}return y}let u=new Wt({vd:e.getDescription()});u.add(n,!1);const f=i||o.width()>this.m_width360-10*this.m_pannableSR.getTolerance(0);for(;o.xmin<this.m_pannableExtent.xmax;){o.move(this.m_width360,0);const y=new _i;y.setShiftCoords(this.m_width360,0),n.applyTransformation(y),u.add(n,!1)}if(f){const y=u.calculateArea2D();u.setFillRule(1),u=new Mc().execute(u,this.m_pannableSR,!0,this.m_progressTracker);const _=u.calculateArea2D();xn(y)!==xn(_)&&u.reverseAllPaths()}return u}geonormalize_ring_(e,i,s,n,r,o,l){K(0)}}class fye{supportsCurves(){return!0}accelerateGeometry(e,i,s){return Hnt(e,i,s)}canAccelerateGeometry(e){return pye(e)}}function Hnt(t,e,i){if(!pye(t))return!1;kE(e,t,!1);let s=0;const n=t.getGeometryType();return bi(n)&&F6(t)&&i!==0&&(s|=t.getImpl().buildQuadTreeAccelerator(i)?1:0),bi(n)&&qge(t)&&i!==0&&(s|=t.getImpl().buildQuadTreeForPathsAccelerator(i)?1:0),s>0}function pye(t){return F6(t)||qge(t)}class Unt extends fye{getOperatorType(){return 8}execute(e,i,s,n){return W0(e,i,s,1,n)}}function Ynt(t,e,i,s){if(t.isEmpty()||e.isEmpty())return t;const n=t.getDimension(),r=e.getDimension();if(n>r)return t;const o=t.getGeometryType(),l=e.getGeometryType(),u=new xe,f=new xe,y=new xe;t.queryEnvelope(u),e.queryEnvelope(f),y.setCoords({env2D:u}),y.mergeEnvelope2D(f);const _=Kn(i,y,!0),x=Yc(_),S=new xe;if(S.setCoords({env2D:u}),S.inflateCoords(x,x),!S.isIntersecting(f))return t;if(n===1&&r===2){const A=srt(t,e,l,i,s);if(A)return A}if(o===me.enumPoint){let A;switch(Dn(l)?(A=new vi({vd:e.getDescription()}),A.addSegment(e,!0)):A=e,l){case me.enumPolygon:return Wnt(t,A,_);case me.enumPolyline:return Znt(t,A,_);case me.enumMultiPoint:return Knt(t,A,_);case me.enumEnvelope:return Jnt(t,A,_);case me.enumPoint:return Qnt(t,A,_);default:Je("invalid shape type")}}else if(o===me.enumMultiPoint)switch(l){case me.enumPolygon:return ert(t,e,_);case me.enumEnvelope:return trt(t,e,_);case me.enumPoint:return irt(t,e,_)}const P=new xe(u);return P.inflate(100*_.total()),jst(t,vs(e,P,0,0,s),i,s)}class f7{getOperatorType(){return 10002}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n){return new Xnt(e,i,s,n)}execute(e,i,s,n){return this.executeMany(new nd([e]),new nd([i]),s,n).next()}}class Xnt extends Ca{constructor(e,i,s,n){super(),this.m_progressTracker=n,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=s;const r=i.next();this.m_geomSubtractor=r||new Wt}next(){const e=this.m_inputGeoms.next();return e?(Ku(e),xKe(e),this.m_index=this.m_inputGeoms.getGeometryID(),Ynt(e,this.m_geomSubtractor,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return K(0),!1}getRank(){return K(0),0}}function Wnt(t,e,i,s){return iye(e,t,i.total())===0?t:t.createInstance()}function Znt(t,e,i,s){const n=t.getXY(),r=e.querySegmentIterator(),o=Yc(i),l=o*o;for(;r.nextPath();)for(;r.hasNextSegment();){const u=r.nextSegment(),f=new xe;if(u.queryEnvelope(f),f.inflateCoords(o,o),!f.contains(n))continue;if(u.isIntersectingPoint(n,i.total()))return t.createInstance();let y=u.getStartXY();if(Y.sqrDistance(n,y)<=l||(y=u.getEndXY(),Y.sqrDistance(n,y)<=l))return t.createInstance()}return t}function Knt(t,e,i,s){const n=e.getImpl().getAttributeStreamRef(0),r=e.getPointCount(),o=t.getXY(),l=Yc(i),u=l*l,f=new Y;for(let y=0;y<r;y++)if(n.queryPoint2D(2*y,f),Y.sqrDistance(f,o)<=u)return t.createInstance();return t}function Jnt(t,e,i,s){const n=new xe;e.queryEnvelope(n),n.inflate(i.total());const r=t.getXY();return n.contains(r)?t.createInstance():t}function Qnt(t,e,i,s){const n=Yc(i),r=n*n,o=t.getXY(),l=e.getXY();return Y.sqrDistance(o,l)<=r?t.createInstance():t}function ert(t,e,i,s){const n=new xe;e.queryEnvelope(n),n.inflate(i.total());const r=t.getPointCount();let o=!1;const l=Vi(r,!1),u=new Y;for(let y=0;y<r;y++)t.queryXY(y,u),n.contains(u)&&Cl(e,u,i.total())!==0&&(o=!0,l[y]=!0);if(!o)return t;const f=t.createInstance();for(let y=0;y<r;y++)l[y]||f.addPoints(t,y,y+1);return f}function trt(t,e,i,s){const n=new xe;e.queryEnvelope(n),n.inflate(i.total());const r=t.getPointCount();let o=!1;const l=Vi(r,!1),u=new Y;for(let y=0;y<r;y++)t.queryXY(y,u),n.contains(u)&&(o=!0,l[y]=!0);if(!o)return t;const f=t.createInstance();for(let y=0;y<r;y++)l[y]||f.addPoints(t,y,y+1);return f}function irt(t,e,i,s){const n=t.getImpl().getAttributeStreamRef(0),r=t.getPointCount(),o=e.getXY();let l=!1;const u=Vi(r,!1),f=Yc(i),y=f*f,_=new Y;for(let S=0;S<r;S++)n.queryPoint2D(2*S,_),Y.sqrDistance(_,o)<=y&&(l=!0,u[S]=!0);if(!l)return t;const x=t.createInstance();for(let S=0;S<r;S++)u[S]||x.addPoints(t,S,S+1);return x}function srt(t,e,i,s,n){const r=new lr;t.queryEnvelope(r);const o=new xe;e.queryEnvelope(o),r.merge(o);const l=.1*r.width(),u=.1*r.height();r.inflateCoords(l,u);const f=new Wt;f.addEnvelope(r,!1);const y=f.getImpl();if(i===me.enumPolygon){const _=e.getImpl();y.add(_,!0)}else y.addEnvelope(e,!0);return new Uy(f,s,-1,n).tryFastImplementation(t)}class Yy{getOperatorType(){return 10001}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n=0){return new Q6(e,i,s,n)}execute(e,i,s,n){const r=new nd([e,i]),o=new Q6(r,s,n,0).next();return o||bt("null output"),o}}function nrt(){return{geom:null,vertexCount:-1,bUnioned:!1,location:new Y}}function rrt(t,e){return Y.compareZorder(t.location,e.location)?-1:t.location.equals(e.location)?0:1}class ort{constructor(){this.binVertexCount=0,this.geometries=[]}addPair(e){this.binVertexCount+=e.vertexCount,this.geometries.push(e)}sort(){this.geometries.sort((e,i)=>rrt(e,i))}geomCount(){return this.geometries.length}geomPairs(){return this.geometries}clear(){this.binVertexCount=0,this.geometries.length=0}getBinVertexCount(){return this.binVertexCount}}class Q6 extends Ca{constructor(e,i,s,n,r=!1){super(),this.m_index=-1,this.m_currentDim=-1,this.m_bDone=!1,this.m_unionBins=[],this.m_readyGeoms=XS(4),this.m_dimGeomCounts=Vi(4,0),this.m_addedGeoms=0,this.m_maxDimension=-1,this.m_bHadGeometry=Vi(4,!1),this.m_complexUnionGeoms=XS(4),this.m_totalNonEmptyGeomCounters=Vi(4,0),this.m_progressTracker=s,this.m_bUnionAllDimensions=!!(4&n),this.m_bPreserveAllPathEnds=!!(8&n),this.m_inputGeoms=e,this.m_spatialReference=i,this.m_options=n,this.m_bIs3D=r}next(){if(this.m_bDone&&this.m_currentDim===this.m_maxDimension)return null;for(;!this.step_(););if(this.m_maxDimension===-1)return null;if(this.m_bUnionAllDimensions){if(this.m_currentDim===-1){for(let e=0;e<=this.m_maxDimension;e++)if(this.m_bHadGeometry[e]){this.m_complexUnionGeoms[e]=this.getResultGeometry(e);for(let i=e+1;i<=this.m_maxDimension;i++)this.m_complexUnionGeoms[i]=this.getResultGeometry(i),this.m_bHadGeometry[i]&&!this.m_complexUnionGeoms[i].isEmpty()&&(this.m_bIs3D?K(0):this.m_complexUnionGeoms[e]=new f7().execute(this.m_complexUnionGeoms[e],this.m_complexUnionGeoms[i],this.m_spatialReference,this.m_progressTracker))}}for(;this.m_currentDim++,(this.m_currentDim>this.m_maxDimension||this.m_currentDim<0)&&bt(""),!this.m_bHadGeometry[this.m_currentDim];);if(this.m_index++,this.m_currentDim===0&&this.m_complexUnionGeoms[this.m_currentDim].getGeometryType()===me.enumPoint){const e=new Jn({vd:this.m_complexUnionGeoms[this.m_currentDim].getDescription()});return this.m_complexUnionGeoms[this.m_currentDim].isEmpty()||e.add(this.m_complexUnionGeoms[this.m_currentDim]),e}return this.m_complexUnionGeoms[this.m_currentDim]}return this.m_index=0,this.m_currentDim=this.m_maxDimension,this.getResultGeometry(this.m_maxDimension)}getGeometryID(){return this.m_index}getRank(){return K(0),-1}tock(){return this.step_()}getResultGeometry(e){return this.m_readyGeoms[e]}finishDim(e,i,s){let n=i;if(!s)return 16&this.m_options&&(n=ON([n],1,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D)),n;if(1&this.m_options)return n;if(e===1)if(!(8&this.m_options)&&(16&this.m_options||this.m_totalNonEmptyGeomCounters[e]>1)){n=ON([n],1,this.m_spatialReference,this.m_progressTracker,16|this.m_options,this.m_bIs3D);const r=[0],o=n.getImpl().getIsSimple(0,r);K(this.m_bIs3D||yg(o))}else this.m_totalNonEmptyGeomCounters[e]===1&&(this.m_bIs3D?K(0):n=new Mc().execute(n,this.m_spatialReference,!1,this.m_progressTracker));else this.m_bIs3D?K(0):n=new Mc().execute(n,this.m_spatialReference,!1,this.m_progressTracker);if(e===0&&n.getGeometryType()===me.enumPoint){const r=new Jn({vd:n.getDescription()});n.isEmpty()||r.add(n),n=r}return n}static getLevel(e){const s=IE(e);let n=s>0?(Math.log(s)-Math.log(32))/Math.log(4):0;return n<0&&(n=0),Math.floor(n)}step_(){if(this.m_bDone)return!0;let e;if(this.m_inputGeoms?(e=this.m_inputGeoms.next(),e===null?(this.m_bDone=!0,this.m_inputGeoms=null):(this.checkAndThrow(e),e.isEmpty()||this.m_totalNonEmptyGeomCounters[e.getDimension()]++)):e=null,e!==null){const i=e.getDimension();this.m_bHadGeometry[i]=!0,(i>=this.m_maxDimension||this.m_bUnionAllDimensions)&&(this.addGeom(i,!1,e),i>this.m_maxDimension&&!this.m_bUnionAllDimensions&&this.removeAllBinsWithLowerDimension(i))}if(this.m_addedGeoms>0)for(let i=0;i<=this.m_maxDimension;i++){for(;this.m_dimGeomCounts[i]>1;){const s=this.collectGeometriesToUnion(i);if(s===null)break;{let n;n=1&this.m_options?ON(s,s.length,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D):Yst(s,s.length,this.m_spatialReference,this.m_progressTracker,8|this.m_options,this.m_bIs3D),this.addGeom(i,!0,n)}}if(this.m_bDone&&(K(this.m_dimGeomCounts[i]<=1),this.m_dimGeomCounts[i]!==0)){const s=this.m_unionBins[i].entries().next().value,n=s[1].geomPairs()[0].geom,r=s[1].geomPairs()[0].bUnioned;this.m_unionBins[i].clear(),this.m_readyGeoms[i]=this.finishDim(i,n,r)}}return this.m_bDone}addGeom(e,i,s){const n=nrt();n.geom=s;const r=IE(s);n.vertexCount=r;const o=xe.constructEmpty();s.queryEnvelope(o),n.location=r>0?o.getCenter():new Y(0,0);const l=Q6.getLevel(s);if(e+1>this.m_unionBins.length)for(;this.m_unionBins.length<Math.max(2,e+1);)this.m_unionBins.push(new Map);let u=null;const f=this.m_unionBins[e].get(l);f&&(u=f),u===null&&(u=new ort,this.m_unionBins[e].set(l,u)),n.bUnioned=i,u.addPair(n),this.m_dimGeomCounts[e]++,this.m_addedGeoms++,this.m_maxDimension=Math.max(this.m_maxDimension,e)}removeAllBinsWithLowerDimension(e){K(0)}collectGeometriesToUnion(e){if(1&this.m_options&&!this.m_bDone)return null;let i=null;const s=[];for(const n of this.m_unionBins[e].keys())s.push(n);Ax(s);for(let n=0;n<s.length;n++){if(s[n]===-1)continue;const r=this.m_unionBins[e].get(s[n]);{const u=r.getBinVertexCount()>5e3&&r.geomCount()>=4;if(this.m_bDone||u){for(let f=0;f<n;f++){if(s[f]===-1)continue;const y=this.m_unionBins[e].get(s[f]);y.sort(),this.m_dimGeomCounts[e]-=y.geomCount(),this.m_addedGeoms-=y.geomCount();for(const _ of y.geomPairs())i||(i=new Array),i.push(_.geom);y.clear(),this.m_unionBins[e].delete(s[f]),s[f]=-1}r.sort(),this.m_dimGeomCounts[e]-=r.geomCount(),this.m_addedGeoms-=r.geomCount();for(const f of r.geomPairs())i||(i=new Array),i.push(f.geom);if(r.clear(),this.m_unionBins[e].delete(s[n]),s[n]=-1,!this.m_bDone)break}}}return i}checkAndThrow(e){this.m_bIs3D&&(e.getDimension()>1&&vKe(),e.hasAttribute(1)||Je("Geometry must have Zs")),Ku(e)}}class mye extends fye{getOperatorType(){return 3}execute(e,i,s,n=null){return W0(e,i,s,4,n)}}function pse(t,e,i){const s=e.getGCSSplitLines();if(s===null)return t;const n=e.getGCS(),r=n.getPannableExtent().width(),o=xe.constructEmpty();t.queryLooseEnvelope(o);const l=Ze.constructEmpty();o.queryIntervalX(l);const u=s.querySegmentIterator();let f=null;const y=new _i;for(;u.nextPath();)for(;u.hasNextSegment();){const _=u.nextSegment(),x=_.queryInterval(0,0),S=Ze.constructEmpty();S.setCoordsFromEnvelope(x);let P=0;for(;S.vmax>l.vmin;)S.move(-r),P--;for(;S.vmin<=l.vmax;){if(S.isIntersecting(l)){f===null&&(f=new vi);const A=new si({start:_.getStartXY(),end:_.getEndXY()});P!==0&&(y.setShiftCoords(P*r,0),A.applyTransformation(y)),f.addSegment(A,!0)}S.move(r),++P}}return f!==null?Ott(t,f,Yc(xl(n,f,!0)),i):t}function Fj(t,e,i){let s=t.getName();return Rot(s)||(i||e>0?(s=t.toString(zi.PE_STR_NAME_CANON|zi.PE_STR_AUTH_NONE),s=crt(s)):s=t.toString(zi.PE_STR_AUTH_TOP)),s}function art(t,e,i,s){return K(0),""}function mse(t,e=-1){if((e>1||e<-1)&&Je("verbosity"),e===-1)return t.toString();{const i=e===0?zi.PE_STR_AUTH_TOP:zi.PE_STR_AUTH_ALL;return t.toString(i)}}function lrt(t,e){(e>1||e<-1)&&Je("verbosity");let i=zi.PE_STR_FMT_WKT2;return e!==-1&&(i|=e===0?zi.PE_STR_AUTH_TOP:zi.PE_STR_AUTH_ALL),t.toString(i)}function crt(t){return t.toLocaleUpperCase("en-US")}function urt(t,e,i){const s=t.getPCSHorizon();if(s.getGeometryType()!==me.enumPolygon)if(s.getGeometryType()!==me.enumEnvelope)Je("");else{const n=s;for(let r=0;r<i;r++)n.contains(e[r])||e[r].setNAN()}else{const n=t.getDefaultPrecisionSR().getTolerance(0),r=s;for(let o=0;o<i;o++)Cl(r,e[o],n)!==1&&e[o].setNAN()}}function hrt(t,e,i,s){for(let n=0;n<e;n++){if(t[n].y<i.ymin||t[n].y>i.ymax){t[n].setNAN();continue}const r=t[n].x;t[n].x=Py(r,i,s)}}function FN(t,e,i,s){if(t.isEmpty()||i===1)return t;const n=t.getGeometryType();if(n===me.enumPoint){const V=t,B=V.getXY();return Lz([B],1,e,i)===0||B.isNAN()?V.setEmpty():V.setXY(B),t}if(n===me.enumMultiPoint){const V=t,B=t.createInstance(),W=V.getPointCount();B.reserve(W);const J=V.getAttributeStreamRef(0),re=V.getDescription().getAttributeCount()>1,se=new Ut,oe=Float64Array.from(J.getArray());if(Lz(oe,W,e,i)>0)for(let pe=0,ce=2*W;pe<ce;pe+=2)Number.isNaN(oe[pe])||(re?(V.getPointByVal(pe>>1,se),se.setXYCoords(oe[pe],oe[pe+1]),B.add(se)):B.addXY(oe[pe],oe[pe+1]));return B}let r=t;const o=e.getOneDegreeGCSUnit(),l=90*o,u=180*o,f=360*o,y=e.getCentralMeridian(),_=.5*o,x=xe.constructEmpty();r.queryEnvelope(x);const S=e.getGCSHorizon(),P=e.getGCSHorisonIsInclusive(),A=S.getGeometryType()===me.enumEnvelope,k=xe.constructEmpty();S.queryEnvelope(k);const $=e.getGCS();if(i!==2&&i!==4||(k.xmin=y-u,k.xmax=k.xmin+f),i===4){if(!(x.width()>f-o)){const V=xe.constructEmpty();V.setCoords({xmin:x.xmin-o,ymin:k.ymin,xmax:x.xmax+o,ymax:k.ymax}),r=new W2().execute(r,V,$,s);let B=Math.floor((y-x.getCenterX())/f);for(x.move(B*f,0);x.xmin>k.xmax;)B-=1,x.move(-f,0);for(;x.xmin<k.xmin;)B+=1,x.move(f,0);if(B!==0){const W=new _i;W.setShiftCoords(B*f,0),r.applyTransformation(W)}return r}i=2}if(i===2&&(k.xmin=y-u,k.xmax=k.xmin+f),x.ymin<-l||x.ymax>l){const V=xe.constructEmpty();if(V.setCoords({xmin:x.xmin-o,ymin:-l,xmax:x.xmax+o,ymax:l}),r=new W2().execute(r,V,$,s),r.isEmpty())return r;r.queryEnvelope(x)}if(P&&(k.ymax<x.ymin||k.ymin>x.ymax))return r.createInstance();x.width()>f&&(r=tM(r,y-u,f,$,!0,0,!0,s),r.queryEnvelope(x));let F=grt(x.xmin,x.xmax,k.xmin,k.xmax,f);if(F!==0&&x.move(F,0),x.xmax>k.xmax||x.xmin<k.xmin){if(x.xmax>k.xmax)for(;x.xmin>=k.xmax;)x.move(-f,0),F-=f;for(;x.xmin<k.xmax-f;)x.move(f,0),F+=f}const G=kE($,S,!1);if(F!==0){const V=new _i;V.setShiftCoords(F,0),r.applyTransformation(V),F=0}if(P){if(A&&k.containsEnvelope(x))return r;const V=new Array(2);for(let B=0;B<2;B++){let W;if(A?W=bi(n)?vs(r,k,G,_,s):vs(r,k,G,0,s):(W=new Z2().execute(r,S,$,s),W===S&&(W=W.clone())),k.xmin<=x.xmin&&k.xmax>=x.xmax||k.xmin>=x.xmin&&k.xmax<=x.xmax)return W;if(V[B]=W,B===0){x.move(-f,0);const J=new _i;J.setShiftCoords(-f,0),r.applyTransformation(J)}}return bi(n)?V[0].add(V[1],!1):bt("intersect_with_GCS_horizon: unexpected geometry type"),V[0]}{if(k.ymax<x.ymin||k.ymin>x.ymax)return r;let V=0;for(;!r.isEmpty()&&x.xmax>k.xmin;){if(V!==0){const B=new _i;B.setShiftCoords(V,0),r.applyTransformation(B)}if(new mye().execute(r,S,$,s)||(r=new f7().execute(r,S,$,s),S===r&&(r=r.clone())),V!==0){const B=new _i;B.setShiftCoords(-V,0),r.applyTransformation(B)}V-=f,x.move(-f,0)}return r}}function drt(t,e,i,s,n,r){const o={stack:[],error:void 0,hasError:!1};try{if(r===2)return ltt(t,e,i,s,n);if(Math.abs(i.x-s.x)>=Math.PI||!VN(i.x,s.x,n))return Number.NaN;i.x>s.x&&(s=St(i,i=s));const l=Kl(o,new Gh,!1),u=Kl(o,new Gh,!1),f=Kl(o,new Gh,!1),y=i.clone();Rg.geodeticDistance(t,e,i.x,i.y,s.x,s.y,u,l,null,r);const _=u.val;let x=0,S=1;for(;_*(S-x)>1e-12*t;){const P=.5*(x+S);if(Rg.geodeticCoordinate(t,e,i.x,i.y,_*P,l.val,u,f,r),y.x=u.val,y.y=f.val,y.x===n)return y.y;if(VN(i.x,y.x,n))S=P;else{if(!VN(s.x,y.x,n))return Number.NaN;x=P}}return y.y}catch(l){o.error=l,o.hasError=!0}finally{fm(o)}}function frt(t,e){let i;if(Array.isArray(t)){const s=t;i=new Float64Array(2*e);for(let n=0,r=0;n<e;n++,r+=2)i[r]=s[n].x,i[r+1]=s[n].y}else i=t;return i}function Rz(t,e,i,s){for(let n=0,r=0;n<s;n++,r+=2)e[i+n].x=t[r],e[i+n].y=t[r+1]}function Lz(t,e,i,s){if(e===0||s===1)return e;const n=frt(t,e);if(s===2){const A=i.getPannableExtentInGCS();let k=e;for(let $=0,F=2*e;$<F;$+=2)(n[$+1]>A.ymax||n[$+1]<A.ymin)&&(n[$]=Number.NaN,k--);return k?(BI(n,e,A.xmin,A.width(),!0),t!==n&&Rz(n,t,0,e),k):0}const r=i.getOneDegreeGCSUnit(),o=90*r,l=180*r,u=360*r;let f=e;for(let A=0,k=2*e;A<k;A+=2)(n[A+1]>o||n[A+1]<-o)&&(n[A]=Number.NaN,f--);if(!f)return 0;const y=xe.constructEmpty();y.setFromPoints(n,e);const _=i.getGCSHorizon(),x=i.getGCSHorisonIsInclusive(),S=_.getGeometryType()===me.enumEnvelope,P=xe.constructEmpty();if(_.queryEnvelope(P),x&&(P.ymax<y.ymin||P.ymin>y.ymax))return 0;if(x)if(BI(n,e,P.getCenterX()-l,u,!0),f=e,S)for(let A=0,k=2*e;A<k;A+=2)P.containsCoords(n[A],n[A+1])||(n[A]=Number.NaN,f--);else{const A=kE(i.getGCS(),_,!1),k=new Y;for(let $=0,F=2*e;$<F;$+=2)k.setCoords(n[$],n[$+1]),Cl(_,k,A)!==0||(n[$]=Number.NaN,f--)}else{BI(n,e,-l,u,!0),f=e;const A=kE(i.getGCS(),_,!1),k=new Y;for(let $=0,F=2*e;$<F;$+=2){k.setCoords(n[$],n[$+1]),k.isNAN()&&f--;const G=vye(k.x,P.xmin,P.xmax,u);k.x+=G,Cl(_,k,A)!==0&&(n[$]=Number.NaN,f--)}}return f>0&&Array.isArray(t)&&Rz(n,t,0,e),f}function K2(t,e,i,s,n,r){if(e.isPannable()||Je("fold_into_360_degree_range"),t.isEmpty())return t;let o,l;if(e.getCoordinateSystemType()===2){const u=e.getPannableExtent();l=u.xmin,o=u.width()}else{const u=e.getOneDegreeGCSUnit();o=360*u,l=i-180*u}return tM(t,l,o,e,s,n,!0,r)}function gye(t,e,i,s){let n,r;if(i.getCoordinateSystemType()===2){const o=i.getPannableExtent();n=o.xmin,r=o.width()}else{const o=i.getOneDegreeGCSUnit();r=360*o,n=s-180*o}BI(t,e,n,r)}function zN(t,e){const i=e.width();let s=$g(t-e.vmin,i);return s<0&&(s+=i),e.snapClip(s+e.vmin)}function Py(t,e,i){return t>e.xmax&&t-e.xmax<i?e.xmax:t<e.xmin&&e.xmin-t<i?e.xmin:t}function eM(t,e,i){if(t[0]<e.vmin||t[0]>e.vmax||i&&t[0]===e.vmax){const s=e.width();return t[0]+=Math.ceil((e.vmin-t[0])/s)*s,t[0]=e.snapClip(t[0]),!0}return!1}function prt(t,e,i,s,n,r,o,l,u){return new J6(t,null,i,e,s,n,o,l,r).geoNormalizePolygonGeometry(u)}function mrt(t,e,i,s,n,r,o,l,u){return new J6(t,null,i,e,s,n,o,l,r).geoNormalizePolylineGeometry(u)}function yye(t,e,i,s,n){const r=new Bs,o=r.addGeometry(t);return JE(r,o,e,kE(e,t,!1),i,s,n),r.getGeometry(o)}function JE(t,e,i,s,n,r,o){const l={stack:[],error:void 0,hasError:!1};try{K(kot()),i.isPannable()||bn("insert_geodetic_points");const u=i.getPannableExtent(),f=i.getGCS(),y=y5();f.querySpheroidData(y);const _=f.getUnit().getUnitToBaseFactor(),x=y.majorSemiAxis,S=y.e2;let P=0;const A=new Ze;u.queryIntervalX(A);let k=null;const $=new Array(4);i.getCoordinateSystemType()===2?(k=i.getPECoordSys(),r?($[0]=zN(o,A),$[1]=u.getCenterY(),Ka.projToGeog(k,1,$),P=$[0]*_):($[0]=u.getCenterX(),$[1]=o,Ka.projToGeog(k,1,$),P=$[1]*_)):P=o*_,r||P===0||n===2||bn("insert_geodetic_points: 1");const F=Kl(l,new Gh,!1),G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=new Y;for(let se=t.getFirstPath(e);se!==ae;se=t.getNextPath(se)){const oe=t.getFirstVertex(se);t.queryXY(oe,B);let pe=!1;const ce=t.getNextVertex(oe);for(let ue=ce;ue!==ae;ue=t.getNextVertex(ue)){if(ue===ce){if(pe)break;pe=!0}if(t.queryXY(ue,W),r&&(s<o-B.x&&W.x-o>s||s<o-W.x&&B.x-o>s)||!r&&(o!==0||s<-B.y&&W.y>s||s<-W.y&&B.y>s))do{if(Math.abs(B.x-W.x)>=.5*A.width())break;i.getCoordinateSystemType()===2?($[0]=zN(B.x,A),$[1]=B.y,$[2]=zN(W.x,A),$[3]=W.y,p7(k,2,$,0),J.x=$[0]*_,J.y=$[1]*_,re.y=$[3]*_):(J.x=B.x*_,J.y=B.y*_,re.y=W.y*_),re.x=(W.x-B.x)*Math.PI*2/A.width()+J.x;let ne=0;const de=Ge(Y,2);if(r){if(V.x=P,V.y=drt(x,S,J,re,P,n),Number.isNaN(V.y))break;de[0]=V,ne=1}let Se=-1;for(let Pe=0;Pe<ne;Pe++){Rg.geodeticDistance(x,S,J.x,J.y,re.x,re.y,F,null,null,n);const Re=F.val;Rg.geodeticDistance(x,S,J.x,J.y,de[Pe].x,de[Pe].y,F,null,null,n);const Oe=F.val;i.getCoordinateSystemType()===2?($[0]=de[Pe].x/_,$[1]=de[Pe].y/_,Ka.geogToProj(k,1,$),r?(G.y=$[1],G.x=o):(G.x=vse($[0],B.x,W.x,A),G.y=o)):r?(G.x=o,G.y=de[Pe].y/_):(G.x=vse(de[Pe].x/_,B.x,W.x,A),G.y=o);const we=Re>0?un(Oe/Re,0,1):.5;if(we===0||we===1||Se>we)continue;const Fe=t.getPrevVertex(ue);t.splitSegment(Fe,[we],1);const it=t.getNextVertex(Fe);t.setXYCoords(it,G.x,G.y),Se=we}}while(!1);B.setCoordsPoint2D(W)}}}catch(u){l.error=u,l.hasError=!0}finally{fm(l)}}function QE(t,e){K(e.isPannable());const i=e.getPannableExtent();if(t.getGeometryType()===me.enumPoint){const l=t.getY();return i.ymin<=l&&l<=i.ymax?t:t.createInstance()}const s=xe.constructEmpty();t.queryEnvelope(s);const n=xe.constructEmpty();n.setCoords({env2D:i}),n.xmin=s.xmin,n.xmax=s.xmax,n.inflateCoords(.01*n.height(),0);const r=Zg(e,s,!1);let o;return o=n.containsEnvelope(s)?t:vs(t,n,r,0,null),o}function vye(t,e,i,s){return gv((.5*(i+e)-t)/s)*s}function grt(t,e,i,s,n){return t>=i&&e<=s?0:vye(.5*(e+t),i,s,n)}function tM(t,e,i,s,n,r,o,l){const u=t.getGeometryType(),f=Ze.constructEmpty();f.setCoords(e,e+i);const y=[0];if(u===me.enumPoint){const J=t;if(y[0]=J.getX(),eM(y,f,o)){const re=n?t:t.clone();return re.setX(y[0]),re}return t}const _=xe.constructEmpty();if(t.queryEnvelope(_),_.isEmpty())return t;if(u===me.enumMultiPoint){const J=n?t:t.clone(),re=J.getImpl(),se=re.getAttributeStreamRef(0),oe=2*re.getPointCount();let pe=!1;for(let ce=0;ce<oe;ce+=2)y[0]=se.read(ce),eM(y,f,o)&&(se.write(ce,y[0]),pe=!0);return pe&&re.notifyModifiedFlags(2001),J}const x=Ze.constructEmpty();if(_.queryIntervalX(x),f.contains(x))return f.vmax,x.vmax,t;const S=xe.constructEmpty();if(S.setCoords({env2D:_}),x.width()===0){let J=x.vmin;J+=Math.ceil((f.vmin-J)/i)*i,J=f.snapClip(J);const re=n?t:t.clone();return re.setAttributeBasic(0,0,J),re}if(u===me.enumEnvelope){const J=n?t:t.clone();return _.intersect(S),J.setEnvelope(_),J}const P=.1*Math.max(_.height(),_.width())*1;S.inflateCoords(0,P);let A=t;const k=s.getTolerance(0),$=new _i;for(;;){const J=Math.floor((x.vmin-e)/i),re=Math.ceil((x.vmax-e)/i);if(!(re-J>3))break;{const se=Math.floor(.5*(re+J));S.xmin=_.xmin-P,S.xmax=e+i*se;const oe=vs(A,S,k,r,l);S.xmin=S.xmax,S.xmax=_.xmax+P;const pe=vs(A,S,k,r,l);$.setShiftCoords((se-re)*i,0),pe.applyTransformation($),u===me.enumPolygon?A=new Yy().execute(oe,pe,s,l):(A=oe,A.add(pe,!1)),A.queryEnvelope(_),_.queryIntervalX(x)}}S.xmin=e,S.xmax=e+i;const F=xe.constructEmpty();F.setCoords({env2D:S}),F.inflateCoords(k,0);const G=Math.floor((_.xmin-S.xmin)/i)*i;let V;G?(S.move(G,0),$.setShiftCoords(-G,0)):$.setIdentity(),V=u===me.enumPolyline?new vi({vd:A.getDescription()}):new Wt({vd:A.getDescription()});const B=xe.constructEmpty(),W=xe.constructEmpty();for(;_.xmax>S.xmin;){const J=vs(A,S,k,0,l);J.queryEnvelope(W);let re=!1;re=u===me.enumPolyline?!J.isEmpty()&&(W.width()>k||W.height()>k):!J.isEmpty()&&(u!==me.enumPolygon||W.width()>k),re&&(J.applyTransformation($),J.queryEnvelope(W),V.queryEnvelope(B),B.inflateCoords(k,k),B.isIntersecting(W)&&u===me.enumPolygon?V=new Yy().execute(V,J,s,l):V.add(J,!1)),S.move(i,0),$.shiftCoords(-i,0)}return V}function BI(t,e,i,s,n=!0){const r=new Ze;r.setCoords(i,i+s);const o=[0];if(Array.isArray(t)){const l=t;for(let u=0;u<e;u++)r.containsRightExclusive(l[u].x)||(o[0]=l[u].x,eM(o,r,n),l[u].x=o[0])}else{const l=t;for(let u=0;u<e;u++){const f=u<<1;r.containsRightExclusive(l[f])||(o[0]=l[f],eM(o,r,n),l[f]=o[0])}}}function iM(t,e,i,s=!0){if(t.isEmpty())return;const n=t.getGeometryType();if(!s||n!==me.enumPolygon)if(tl(n)){let r=!1;if(bi(n)&&t.hasNonLinearSegments()){const o=t.getImpl(),l=o.getAttributeStreamRef(0),u=o.getSegmentFlagsStreamRef();K(u!==null);for(let f=0,y=o.getPathCount();f<y;f++){let _=!0;const x=o.isClosedPath(f),S=o.getPathEnd(f);x&&o.getPathSize(f)>0&&(_=(31&u.read(S-1))===1);for(let P=o.getPathStart(f);P<S;P++)if((31&u.read(P))===1){if(_){const A=l.read(2*P),k=Py(A,e,i);k!==A&&(r=!0,l.write(2*P,k))}_=!0}else _=!1}}else{const o=t.getImpl(),l=o.getAttributeStreamRef(0);for(let u=0,f=o.getPointCount();u<f;u++){const y=l.read(2*u),_=Py(y,e,i);_!==y&&(r=!0,l.write(2*u,_))}}r&&t.getImpl().notifyModifiedFlags(2001)}else if(n===me.enumEnvelope){const r=t,o=xe.constructEmpty();r.queryEnvelope(o),o.xmin=Py(o.xmin,e,i),o.xmax=Py(o.xmax,e,i),r.setEnvelope(o)}else if(n===me.enumPoint){const r=t;r.setX(Py(r.getX(),e,i))}else bt("")}function yrt(t,e,i){const s=new Y;return s.x=Py(t.x,e,i),s.y=t.y,s}function vrt(t,e){if(e.isEmpty())return 0;const i=t.getPECoordSys();if(i.getProjection().getCode()===zi.PE_PRJ_AZIMUTHAL_EQUIDISTANT){const s=y5();t.querySpheroidData(s);const n=i.getParameters();if(n[zi.PE_PARM_LAM0]===null||n[zi.PE_PARM_PHI0]===null)return 0;const r=[n[zi.PE_PARM_LAM0].getValue(),n[zi.PE_PARM_PHI0].getValue()];Ka.geogToProj(i,1,r);const o=new Y(r[0],r[1]),l=xe.constructEmpty();e.queryEnvelope(l);const u=Ge(Y,4);l.queryCorners(u);let f=0;const y=t.getOneMeter();let _=Math.max(s.majorSemiAxis,s.minorSemiAxis)*Math.PI,x=Math.min(s.majorSemiAxis,s.minorSemiAxis)*Math.PI;x-=_/180,_*=y,x*=y;for(let S=0;S<4;S++){const P=Y.distance(u[S],o);if(P>_)f++;else if(P>x)return-1}if(f===0)return 1;if(f===4){const S=xe.constructEmpty();return S.setCoords({center:o,width:_,height:_}),l.isIntersectingNe(S)?-1:0}return-1}return-1}function qN(t,e,i,s){const n=t.getGeometryType();K(n===me.enumPolygon||n===me.enumPolyline||n===me.enumMultiPoint);const r=e.getCoordinateSystemType();if(r===2){let o=t;if(i===0){const l=vrt(e,t);if(l===0)return t.createInstance();if(l===1)return t;const u=e.getPCSHorizon(),f=u.getGeometryType(),y=e.getDefaultPrecisionSR();if(f===me.enumEnvelope){const _=xe.constructEmpty();u.queryEnvelope(_),o=vs(t,_,Zg(y,_,!1),5e4*e.getOneMeterPCSUnit(),s)}else new Unt().execute(u,t,y,s)||(o=new Z2().execute(o,u,y,s),o===u&&(o=o.clone()))}else if(e.isPannable()){const l=xe.constructEmpty();o.queryEnvelope(l);const u=e.getPannableExtent();u.containsEnvelope(l)||(iM(o,u,e.getTolerance(0)),i!==2&&i!==4||(o=QE(o,e)),i!==4?o=K2(o,e,0,!0,1e5*e.getOneMeterPCSUnit(),s):n===me.enumPolygon&&l.width()>2*u.width()&&(o=tM(o,-2*u.width(),2*u.width(),e,!0,0,!0,s)))}return o}if(K(r===1),n===me.enumMultiPoint)return iM(t,e.getPannableExtent(),e.getTolerance(0)),t;{const o=xe.constructEmpty();t.queryEnvelope(o);let l=t;const u=e.getPannableExtent();if(o.ymin<u.ymin||o.ymax>u.ymax){const f=Math.max(1,o.calculateToleranceFromEnvelope()),y=new xe(o.xmin-f,u.ymin,o.xmax+f,u.ymax);if(l=new W2().execute(l,y,e,s),l.isEmpty())return l}return n===me.enumPolygon&&o.width()>2*u.width()&&(l=tM(l,-2*u.width(),2*u.width(),e,!0,0,!0,s)),l}}function _rt(t,e,i,s,n,r){const o=s.getCoordinateSystemType();if(o===2){if(n===0)i!==t&&D6(i,t,e),urt(s,i,e);else if(i!==t&&D6(i,t,e),s.isPannable()){const l=s.getTolerance(0);hrt(i,e,s.getPannableExtent(),l),gye(i,e,s,0)}}else{K(o===1);const l=s.getTolerance(0),u=s.getPannableExtent();for(let f=0;f<e;f++)i[f].assign(yrt(t[f],u,l))}}function zj(t,e,i,s){if(!i)return;const n=t.getPECoordSys();if(i===1){const _=[e[0].x,e[0].y];if(Ka.geogToProj(n,1,_),s){const{first:x,second:S}=t.m_peCoordSysVal.getGeogToProjFactors();_[0]=x*(e[0].x-t.getCentralMeridian())+S}return void e[0].setCoords(_[0],_[1])}const r=t.isPannable(),o=r?t.getPannableExtent().width():0,l=179*o/360;let u=0;r&&(u=t.getCentralMeridian());const f=256,y=new Float64Array(2*f);for(let _=0;_<i;){for(let S=_;S<i&&e[S].isNAN();++S)_++;let x=Math.min(f,i-_);if(x>0){for(let S=1,P=_+1;S<x;++S,++P)if(e[P].isNAN()){x=S;break}for(let S=0;S<x;++S){const P=S<<1;y[P]=e[_+S].x,y[P+1]=e[_+S].y}if(Ka.geogToProj(n,x,y),s){const{first:S,second:P}=t.m_peCoordSysVal.getGeogToProjFactors();for(let A=0;A<x;++A)y[A<<1]=S*(e[_+A].x-u)+P}if(r)for(let S=0,P=_;S<x;S++,P++){const A=S<<1,k=y[A],$=xn(k),F=e[P].x-u;$*xn(F)<0&&Math.abs(k)>l&&(y[A]-=$*o)}Rz(y,e,_,x),_+=x}}}function _ye(t,e,i){K(!i||t.isPannable());const s=e.getPointCount();if(!s)return;const n=e.getImpl(),r=n.getAttributeStreamRef(0),o=t.getPECoordSys();let l=0;const u=r.readRange(0,2*s);let f=()=>{Ka.geogToProj(o,s,u)};const y=t.isPannable()&&!i,_=y?t.getPannableExtent().width():0,x=179*_/360;if(t.isPannable()&&(l=t.getCentralMeridian(),i)){const S=t.m_peCoordSysVal.getGeogToProjFactors(),P=S.first,A=S.second;f=()=>{Ka.geogToProj(o,s,u);for(let k=0;k<s;k++){const $=k<<1,F=r.read($),G=P*(F-l)+A;u[$]=G}}}if(f(),y)for(let S=0;S<s;S++){const P=S<<1,A=u[P],k=xn(A),$=r.read(P)-l;k*xn($)<0&&Math.abs(A)>x&&(u[P]+=-k*_)}r.writeRangeFromArray(0,2*s,u,!0,1),n.notifyModifiedFlags(2001)}function brt(t,e,i){switch(e.getGeometryType()){case me.enumLine:return void Ort(t,e,i);case me.enumBezier:return void Frt(t,e,i);case me.enumEllipticArc:return void Rrt(t,e,i);case me.enumBezier2:return void zrt();case me.enumRationalBezier2:return void qrt();default:bt("")}}function gse(t,e,i){if(!e.hasNonLinearSegments())return void _ye(t,e,i);if(K(!i||t.isPannable()),e.isEmpty())return;const s=0,n=t.getPECoordSys(),r=t.isPannable(),o=r?t.getPannableExtent().width():0,l=179*o/360;let u=0;r&&(u=t.getCentralMeridian());const f=e.createInstance();f.reserveParts(e.getPointCount(),e.getPathCount());const y=e.getImpl(),_=new Qt;for(let x=0,S=e.getPathCount();x<S;++x)if(y.hasNonLinearSegmentsPath(x)){let P=!0,A=-1;const k=y.getPathStart(x),$=k+y.getSegmentCountPath(x);y.isClosedPath(x)&&(A=$-1);const F=new Y;for(let G=k;G<$;++G){if(y.getSegmentBuffer(G,_,!1),brt(t,_.get(),i),!P&&(_.get().getStartXY().equals(F)||_.get().moveTo(F)),G!==A)f.addSegment(_.get(),P);else{if(P){const V=new Ut;_.get().queryStart(V),f.startPathPoint(V)}f.closeLastPathWithSegment(_.get())}F.assign(_.get().getEndXY()),P=!1}}else{let A,k=y.getPathSize(x),$=Math.min(k,1024);f.insertPath(-1,e,x,!0);const F=y.getAttributeStreamRef(0),G=f.getAttributeStreamRef(0);for(let V=y.getPathStart(x),B=y.getPathEnd(x);V<B;){if(A=F.readRange(V,$),Ka.geogToProj(n,$,A),r)for(let W=0;W<$;W++){const J=W<<1,re=A[J],se=xn(re),oe=F.read(2*(s+W))-u;se*xn(oe)<0&&Math.abs(re)>l&&(A[J]+=-se*o)}G.writeRangeFromArray(V,$,A,!0,1),V+=$,k-=$,$=Math.min(k,1024)}}e.assignMove(f)}function bye(t,e,i){let n=i.getPointCount();if(!n)return;const r=i.getImpl(),o=r.getAttributeStreamRef(0);let l=Math.min(n,1e3),u=0;const f=t.getPECoordSys();Number.isNaN(e)&&(e=0);const y=t.isPannable(),_=t.getOneDegreeGCSUnit(),x=360*_,S=179*_;let P;for(;n;){if(P=o.readRange(2*u,2*l),p7(f,l,P,e),y)for(let A=0;A<l;A++){const k=A<<1,$=P[k]-e,F=xn($),G=o.read(2*(u+A));F*xn(G)<0&&Math.abs($)>S&&(P[k]+=-F*x)}o.writeRangeFromArray(2*u,2*l,P,!0,1),u+=l,n-=l,l=Math.min(n,1e3)}r.notifyModifiedFlags(2001)}function xrt(t,e,i){switch(i.getGeometryType()){case me.enumLine:return void wrt(t,e,i);case me.enumBezier:return void Crt(t,e,i);case me.enumEllipticArc:return void Srt(t,e,i);case me.enumBezier2:return void Prt();case me.enumRationalBezier2:return void Trt();default:bt("")}}function wrt(t,e,i){const s=[i.getStartXY(),i.getEndXY()];qj(t,e,s,2),i.setStartXY(s[0]),i.setEndXY(s[1]),i.normalizeAfterEndpointChange()}function Srt(t,e,i){if(i.projectionBehavior()===0)Ert(t,e,i);else{const s=i.isClosed()&&i.isMajor(),n=[i.getStartXY(),s?i.getCenter():i.getEndXY()],r=[n[0].clone(),n[1].clone()];Gj(t,e,r,2);const o=new _i;o.initializeFromTwoPointsArray(n,r),i.applyTransformation(o);const l=s?0:1;i.setCoordsForIntersector(r[0],r[l],!1)}}function Ert(t,e,i){Sye(!1,t,e,i,!1)}function Crt(t,e,i){const s=Ge(Y,4);i.queryControlPoints(s),Gj(t,e,s,4),i.setControlPoints(s)}function Prt(t,e,i){K(0)}function Trt(t,e,i){K(0)}function p7(t,e,i,s){const n=Ka.projToGeogCenter(t,e,i,s);for(let r=0;r<e;++r){const o=r<<1;K(Number.isFinite(i[o]+i[o+1]))}return n}function oT(t,e,i){if(!i.hasNonLinearSegments())return void bye(t,e,i);if(i.isEmpty())return;const s=t.getPECoordSys();Number.isNaN(e)&&(e=0);const n=t.isPannable(),r=t.getOneDegreeGCSUnit(),o=360*r,l=179*r,u=i.createInstance();u.reserveParts(i.getPointCount(),i.getPathCount());const f=i.getImpl(),y=new Qt;for(let _=0,x=i.getPathCount();_<x;++_)if(f.hasNonLinearSegmentsPath(_)){let S=!0,P=-1;const A=f.getPathStart(_),k=A+f.getSegmentCountPath(_);f.isClosedPath(_)&&(P=k-1);const $=new Y;for(let F=A;F<k;++F){if(f.getSegmentBuffer(F,y,!1),xrt(t,e,y.get()),!S&&(y.get().getStartXY().equals($)||y.get().moveTo($)),F!==P)u.addSegment(y.get(),S);else{if(S){const G=new Ut;y.get().queryStart(G),u.startPathPoint(G)}u.closeLastPathWithSegment(y.get())}$.assign(y.get().getEndXY()),S=!1}}else{let P,A=f.getPathSize(_),k=Math.min(A,1e3);u.insertPath(-1,i,_,!0);const $=f.getAttributeStreamRef(0),F=u.getAttributeStreamRef(0);for(let G=f.getPathStart(_),V=f.getPathEnd(_);G<V;){if(P=$.readRange(2*G,2*k),p7(s,k,P,e),n)for(let B=0;B<k;B++){const W=B<<1,J=P[W]-e,re=xn(J),se=$.read(2*G);re*xn(se)<0&&Math.abs(J)>l&&(P[W]+=-re*o)}F.writeRangeFromArray(2*G,2*k,P,!0,1),G+=k,A-=k,k=Math.min(A,1e3)}}i.assignMove(u)}function qj(t,e,i,s){const n=t.getPECoordSys();Number.isNaN(e)&&(e=0);const r=t.isPannable(),o=t.getOneDegreeGCSUnit(),l=360*o,u=179*o,f=256,y=new Float64Array(2*f);for(let _=0;_<s;){for(let S=_;S<s&&i[S].isNAN();++S)_++;let x=Math.min(f,s-_);if(x>0){for(let S=1,P=_+1;S<x;++S,++P)if(i[P].isNAN()){x=S;break}for(let S=0;S<x;S++){const P=S<<1;y[P]=i[_+S].x,y[P+1]=i[_+S].y}if(p7(n,x,y,e),r)for(let S=0,P=_;S<x;++S,++P){const A=S<<1,k=i[P].x,$=y[A]-e,F=xn($);F*xn(k)<0&&Math.abs($)>u&&(y[A]-=F*l)}for(let S=0;S<x;S++){const P=S<<1;i[_+S].x=y[P],i[_+S].y=y[P+1]}_+=x}}}function xye(t,e,i,s){K(0)}function wye(t,e,i){let s=e.getPointCount();if(!s)return!1;const n=e.getImpl(),r=n.getAttributeStreamRef(0);let o=null;const l=t.getInputSR(),u=t.getOutputSR();l.getVCS(),u.getVCS();const f=l.getOneDegreeGCSUnit(),y=u.getOneDegreeGCSUnit(),_=t.isVertical();_&&e.hasAttribute(1)&&(o=n.getAttributeStreamRef(1));const x=t.getDatumTransformation(),S=!!x&&x.getType()===1;if(S||o===null||(xye(o.getArray()),o=null),!x||x.count()===0){const oe=l.getGcsUnitFactor()/u.getGcsUnitFactor(),pe=(l.getPrimeMeridian()-u.getPrimeMeridian())*y,ce=-90*f,ue=90*f;let ne=0;const de=r.getArray(),Se=[0];for(let Pe=1,Re=2*s;Pe<Re;)Se[0]=de[Pe],ne|=lz(Se,ce,ue)?1:0,de[Pe]=Se[0],Pe+=2;if(pe!==0||oe!==1){ne=1;const Pe=r.getArray();for(let Re=0,Oe=2*s;Re<Oe;){let we=Pe[Re];we*=oe,we+=pe,Pe[Re]=we,Pe[Re+1]*=oe,Re+=2}}return ne!==0&&n.notifyModifiedFlags(2001),!!ne}const P=1e3;let A=Math.min(s,P);const k=new Array(A),$=new Array(A);let F=null;o!==null&&(F=new Float64Array(A));let G=0,V=Number.NaN,B=Number.NaN;const W=360*y,J=y/f;i&&(B=90*y,V=89.9*f,$.fill(0));let re=!0,se=0;for(;s;){let oe=!1;const pe=r.readRange(2*G,2*A);for(let ue=0;ue<A;ue++)k[ue]=pe[ue<<1];if(i)for(let ue=0;ue<A;ue++){const ne=1+(ue<<1),de=Math.abs(pe[ne])-V;if(de>0){const Se=pe[ne];pe[ne]=rm(V,Se),$[ue]=rm(de,Se),oe=!0}}const ce=pe[0];if(S){const ue=x;F&&o.queryRange(G,A,F,!0,1),ue.transform(!1,pe,F,A),F&&o.writeRangeFromArray(G,A,F,!0,1)}else x.transform(!1,pe,A);re&&(se=pe[0]-J*ce,re=!1);for(let ue=0;ue<A;ue++){const ne=ue<<1,de=pe[ne]-k[ue]*J-se;Math.abs(de)>200&&(pe[ne]+=de>0?-W:W)}if(oe){for(let ue=0;ue<A;ue++)if($[ue]){const ne=1+(ue<<1);pe[ne]+=J*$[ue],pe[ne]>B?pe[ne]=B:pe[ne]<-B&&(pe[ne]=-B)}$.fill(0)}r.writeRangeFromArray(2*G,2*A,pe,!0,1),_&&o&&o.writeRangeFromArray(G,A,F,!0,1),G+=A,s-=A,A=Math.min(s,P)}return n.notifyModifiedFlags(2001),!0}function Irt(t,e,i){switch(e.getGeometryType()){case me.enumLine:return Mrt(t,e,i);case me.enumBezier:return krt(t,e,i);case me.enumEllipticArc:return Art(t,e,i);case me.enumBezier2:return Nrt();case me.enumRationalBezier2:return $rt();default:bt("")}}function aT(t,e,i){if(!e.hasNonLinearSegments())return wye(t,e,i);if(e.isEmpty())return!1;const s=e.createInstance();s.reserveParts(e.getPointCount(),e.getPathCount());const n=e.getImpl(),r=new Qt;for(let o=0,l=e.getPathCount();o<l;++o){let u=!0,f=-1;const y=n.getPathStart(o),_=y+n.getSegmentCountPath(o);n.isClosedPath(o)&&(f=_-1);const x=new Y;for(let S=y;S<_;++S){if(n.getSegmentBuffer(S,r,!1),Irt(t,r.get(),i),!u&&(r.get().getStartXY().equals(x)||r.get().moveTo(x)),S!==f)s.addSegment(r.get(),u);else{if(u){const P=new Ut;r.get().queryStart(P),s.startPathPoint(P)}s.closeLastPathWithSegment(r.get())}x.assign(r.get().getEndXY()),u=!1}}return e.assignMove(s),!0}function yse(t,e,i,s,n,r){if(t.isIdentityGeogToGeog()){const ce=90*t.getInputSR().getOneDegreeGCSUnit();let ue=0;const ne=[0];for(let de=0;de<s;de++)ne[0]=e[de].y,ue|=lz(ne,-ce,ce)?1:0,e[de].y=ne[0];return ue}const o=t.getInputSR(),l=t.getOutputSR(),u=o.getVCS(),f=l.getVCS(),y=o.getOneDegreeGCSUnit(),_=90*y,x=l.getOneDegreeGCSUnit(),S=t.isVertical(),P=t.getDatumTransformation(),A=!!P&&P.getType()===1;if(S||(i=null),!P||P.count()===0){let ce=0;const ue=[0];for(let ne=0;ne<s;ne++)ue[0]=e[ne].y,ce|=lz(ue,-_,_)?1:0,e[ne].y=ue[0];return ce|=Yot(o.getGCS(),u,l.getGCS(),f,e,i,s)?1:0,ce}A||i===null||xye();const k=1024;let $=Math.min(s,k);const F=new Array($),G=Vi($,0);let V=0,B=Number.NaN,W=Number.NaN;const J=360*x,re=x/y;n&&(W=90*x,B=89.9*y);let se=!0,oe=0,pe=s;for(;pe;){let ce=!1;for(let ne=0;ne<$;ne++)F[ne]=e[ne+V].x;if(n)for(let ne=0;ne<$;ne++){const de=Math.abs(e[ne+V].y)-B;if(de>0){const Se=e[ne+V].y;e[ne+V].y=rm(B,Se),G[ne]=rm(de,Se),ce=!0}}const ue=e[0].x;A?P.transform(!1,e,i,$):P.transform(!1,e,$),se&&(oe=e[0].x-re*ue,se=!1);for(let ne=0;ne<$;ne++){const de=e[V+ne].x-F[ne]*re-oe;Math.abs(de)>200&&(de>0?e[V+ne].x-=J:e[V+ne].x+=J)}if(ce){for(let ne=0;ne<$;ne++)G[ne]&&(e[V+ne].y+=re*G[ne],e[V+ne].y>W?e[V+ne].y=W:e[V+ne].y<-W&&(e[V+ne].y=-W));G.fill(0,0,$)}V+=$,pe-=$,$=Math.min(pe,k)}return 1}function J2(t,e,i,s,n,r){let o=0,l=!0,u=0;for(let f=0;f<s;++f)e[f].isNAN()?l||(o|=yse(t,e.slice(u,f-u),i?i.slice(u,f-u):null,f-u,n),u=f,l=!0):l&&(u=f,l=!1);return l||(o|=yse(t,u===0?e:e.slice(u),i?u===0?i:i.slice(u):null,s-u,n)),o!==0}function Mrt(t,e,i){const s=[e.getStartXY(),e.getEndXY()],n=[0,0];let r=null;e.hasAttribute(1)&&(r=n,r[0]=e.getAttributeAsDbl(0,1,0),r[1]=e.getAttributeAsDbl(1,1,0));const o=J2(t,s,r,2,i);return e.setStartXY(s[0]),e.setEndXY(s[1]),r&&(e.setStartAttribute(1,0,r[0]),e.setEndAttribute(1,0,r[1])),e.normalizeAfterEndpointChange(),o}function Art(t,e,i){if(e.projectionBehavior()===0)return Drt(t,e,i);const s=e.getStartXY().equals(e.getEndXY()),n=Ge(Y,3),r=Ge(Y,3),o=[0,0,0];let l=null;n[0].assign(e.getStartXY()),n[1].assign(s?e.getCenter():e.getEndXY());let u=!1;e.hasAttribute(1)&&(l=o,l[0]=e.getAttributeAsDbl(0,1,0),l[1]=e.getAttributeAsDbl(1,1,0),l[2]=ji(l[0],l[1],.5),s&&(l[1]=l[2])),r[0].setCoordsPoint2D(n[0]),r[1].setCoordsPoint2D(n[1]);const f=new _i;if(s||e.isDegenerateToLine())u=J2(t,r,l,2,i),f.initializeFromTwoPoints(n[0],n[1],r[0],r[1]);else{const y=new Y;e.queryCoord2D(.5,y),n[2].setCoordsPoint2D(y),r[2].setCoordsPoint2D(y),u=J2(t,r,l,3,i),f.setFromTwoTriangles(n,r)}return f.isIdentity()||(e.applyTransformation(f),e.setStartXY(r[0]),e.setEndXY(s?r[0]:r[1]),e.normalizeAfterEndpointChange()),l&&(e.setStartAttribute(1,0,l[0]),e.setEndAttribute(1,0,s?l[0]:l[1])),u}function Drt(t,e,i){const s=[e.getStartXY(),e.getEndXY(),e.getInteriorPoint(),e.getCenter()];let n=4;e.isDegenerateToLine()&&(n=2);const r=[0,0,0,0];let o=null;if(e.hasAttribute(1)){o=r,o[0]=e.getAttributeAsDbl(0,1,0),o[1]=e.getAttributeAsDbl(1,1,0);const f=ji(o[0],o[1],.5);o[2]=f,o[3]=f}const l=e.getStartXY().equals(e.getEndXY())&&!e.isDegenerateToLine(),u=J2(t,s,o,n,i);return l?e.constructCircleCenterAndPoint(s[3],s[0],!e.isClockwise()):e.isDegenerateToLine()?e.constructLineCircularArc(s[0],s[1]):e.constructCircularArcThreePoint(s[0],s[1],s[2]),o&&(e.setStartAttribute(1,0,o[0]),e.setEndAttribute(1,0,o[1])),u}function krt(t,e,i){const s=Ge(Y,4);e.queryControlPoints(s);const n=[0,0,0,0];let r=null;e.hasAttribute(1)&&(r=n,r[0]=e.getAttributeAsDbl(0,1,0),r[3]=e.getAttributeAsDbl(1,1,0),r[1]=ji(r[0],r[3],.5),r[2]=r[1]);const o=J2(t,s,r||null,s.length,i);return e.setControlPoints(s),r&&(e.setStartAttribute(1,0,r[0]),e.setEndAttribute(1,0,r[3])),e.normalizeAfterEndpointChange(),o}function Nrt(t,e,i){return K(0),!1}function $rt(t,e,i){return K(0),!1}function Ort(t,e,i){const s=[e.getStartXY(),e.getEndXY()];zj(t,s,2,i),e.setStartXY(s[0]),e.setEndXY(s[1]),e.normalizeAfterEndpointChange()}function Vj(t,e,i,s){zj(t,e,i,s)}function Rrt(t,e,i){if(e.projectionBehavior()===0)Lrt(t,e,i);else{const s=e.isClosed()&&e.isMajor(),n=[e.getStartXY(),s?e.getCenter():e.getEndXY()],r=[n[0].clone(),n[1].clone()];Vj(t,r,2,i);const o=new _i;o.initializeFromTwoPointsArray(n,r),e.applyTransformation(o);const l=s?0:1;e.setCoordsForIntersector(r[0],r[l],!1)}}function Gj(t,e,i,s){qj(t,e,i,s);const n=new xe;n.setFromPoints(i,s);const r=t.getOneDegreeGCSUnit(),o=360*r,l=180*r;if(n.width()>l){for(let u=0;u<s;u++)for(;i[u].x<e;)i[u].x+=o;if(n.setFromPoints(i,s),n.xmax>l+e)for(let u=0;u<s;u++)i[u].x-=o}}function Sye(t,e,i,s,n){const r=Ge(Y,3);let o=0,l=!1,u=!1;const f=s.isDegenerateToLine();f?(r[0].assign(s.getStartXY()),r[1].assign(s.getEndXY()),r[2].setCoords(0,0),o=2):s.isClosed()&&s.isMajor()?(l=!0,u=!s.isClockwise(),r[0].assign(s.getStartXY()),r[1].assign(s.getCenter()),r[2].setCoords(0,0),o=2):(r[0].assign(s.getStartXY()),r[1].assign(s.getEndXY()),r[2].assign(s.getInteriorPoint()),o=3),t?Vj(e,r,o,n):Gj(e,i,r,o),f?s.constructLineCircularArc(r[0],r[1]):l?s.constructCircleCenterAndPoint(r[1],r[0],u):s.constructCircularArcThreePoint(r[0],r[1],r[2])}function Lrt(t,e,i){Sye(!0,t,0,e,i)}function Frt(t,e,i){const s=Ge(Y,4);e.queryControlPoints(s),Vj(t,s,4,i),e.setControlPoints(s)}function zrt(t,e,i){K(0)}function qrt(t,e,i){K(0)}function VN(t,e,i){const s=GI(t),n=hie(s,GI(e)),r=hie(s,GI(i));return r===0||n>0&&r>0&&r<=n||n<0&&r<0&&r>=n}function vse(t,e,i,s){const n=new Ze;n.setCoords(e,i);const r=s.width();let o=Math.floor((t-e)/r)*r+t;const l=n.getCenter();for(;Math.abs(o-l)>Math.abs(o+r-l);)o+=r;return o}class Vrt extends Ca{constructor(){super(),this.m_geometryDeque=[],this.m_index=-1}next(){if(this.m_geometryDeque.length>0){this.m_index++;const e=this.m_geometryDeque[0];return this.m_geometryDeque.shift(),e}return null}getGeometryID(){return this.m_index}tick(e){this.m_geometryDeque.push(e)}tock(){return!0}getRank(){return 1}}function Grt(t,e){return t===e||t!==null&&e!==null&&t.m_csType===e.m_csType&&(t.m_WKID===0&&e.m_WKID===0?t.m_hashCode===e.m_hashCode&&t.m_canonicalWkt===e.m_canonicalWkt:t.m_WKID===e.m_WKID)}function jrt(t,e){return t===e||t!==null&&e!==null&&t.m_csType===e.m_csType&&(t.m_WKID===0&&e.m_WKID===0?t.m_csType===1?t.m_peCoordSys.isEqual(e.m_peCoordSys):t.m_peCoordSys===e.m_peCoordSys:t.m_WKID===e.m_WKID)}class jj{constructor(e,i=!0){this.m_PCSHorizon=null,this.m_GCSHorizon=null,this.m_GCSSplitLines=null,this.m_bGCSHorisonIsInclusive=!1,this.m_oneMeterPCS=0,this.m_oneDegreeGCS=0,this.m_gcsUnitFactor=0,this.m_northPole=Y.getNAN(),this.m_southPole=Y.getNAN(),this.m_polesUpdated=0,this.m_domain=xe.constructEmpty(),this.m_primeMeridian=Number.NaN,this.m_geogToProjFactor=1,this.m_geogToProjOffset=0,this.m_geogToProjFactorsUpdated=0,this.m_oneMillimeter=0,this.m_centralMeridian=0,this.m_pPCSInfoNoDomain=null,this.m_oldWKID=-1973,this.m_vcsWKID=-1,this.m_bIsPannable=!1,this.m_bCached=!1,this.m_pannableExtent=xe.constructEmpty(),this.m_pannableExtentGCS=xe.constructEmpty(),this.m_areaOfUse=null,this.m_canonicalWkt="",this.m_peCoordSys=e,this.m_WKID=h2.getCode(e),this.m_WKID<=0?(this.m_WKID=0,this.m_canonicalWkt=Fj(e,0,!0),this.m_hashCode=tJe(this.m_canonicalWkt)):this.m_hashCode=o2(this.m_WKID);const s=this.m_peCoordSys.getType();this.m_csType=s===zi.PE_TYPE_PROJCS?2:1,K(s===zi.PE_TYPE_PROJCS||s===zi.PE_TYPE_GEOGCS),s===zi.PE_TYPE_PROJCS&&(e.loadConstants()||Je("PeProjcs.loadConstants failed"));const n=s===zi.PE_TYPE_GEOGCS?this.m_peCoordSys:this.m_peCoordSys.getGeogcs();s!==zi.PE_TYPE_GEOGCS&&h2.getCode(n),this.m_unit=Xet(e),this.m_primeMeridian=n.getPrimem().getLongitude();{const r=n.getUnit().getUnitFactor();this.m_gcsUnitFactor=r;let o=Math.PI/(180*r);Math.abs(o-1)<1e-10&&(o=1),this.m_oneDegreeGCS=o}if(s===zi.PE_TYPE_PROJCS){const r=this.m_peCoordSys,o=r.getUnit().getUnitFactor();this.m_oneMeterPCS=1/o,this.m_oneMillimeter=.001/o,this.m_pPCSInfoNoDomain=Ha.generate(r,Ha.PE_PCSINFO_OPTION_NONE),this.m_pPCSInfoNoDomain||bt("cannot create pcs info"),this.m_bIsPannable=this.m_pPCSInfoNoDomain.isPannableRectangle(),this.m_centralMeridian=this.m_pPCSInfoNoDomain.getCentralMeridian()}else{this.m_bIsPannable=!0,this.m_polesUpdated=1,this.m_oneMeterPCS=0;const r=1/n.getUnit().getUnitFactor(),o=n.getDatum().getSpheroid().getAxis();this.m_oneMillimeter=.001/o*r,this.m_centralMeridian=0}this.m_bIsPannable&&(this.updateGCSHorizon(),this.updatePCSHorizon(),this.updatePoles(),this.updateDomain(),this.updatePannableExtent(),this.updatePannableExtentGCS())}[Symbol.dispose](){}getHashCode(){return this.m_hashCode}getPCSHorizonPannable(){return this.m_PCSHorizon}getGCSHorizonPannable(){return this.m_GCSHorizon}getPCSInfo(){return K(this.m_pPCSInfoNoDomain),this.m_pPCSInfoNoDomain}getCentralMeridian(){return this.m_centralMeridian}updateGCSHorizon(){if(this.m_peCoordSys.getType()!==zi.PE_TYPE_PROJCS)return;let e=!0;const i=this.m_peCoordSys,s=i.getGeogcs(),n=i.horizonGcsGenerate();if(!n)return;K(n.length>0);const r=n[0].getNump(),o=n[0].getKind();let l,u;e=n[0].getInclusive()>0;const f=this.getOneDegreeGCSUnit(),y=90*f,_=360*f,x=370*f,S=180*f*zi.PE_HORIZON_DELTA/Math.PI,P=xe.constructEmpty();let A=null;if(r>1){for(let k=1;k<r;k++)if(n[k].getKind()===zi.PE_HORIZON_LINE){A||(A=new vi);const $=n[k].getCoord();A.startPathCoords($[0][0],$[0][1]),A.lineToCoords($[1][0],$[1][1])}}if(o===zi.PE_HORIZON_RECT){const k=n[0].getCoord();if(P.setFromPoints([new Y(k[0][0],k[0][1]),new Y(k[1][0],k[1][1])],2),Math.abs(P.ymax-y)<1e-7*S&&(P.ymax=y),Math.abs(P.ymin+y)<1e-7*S&&(P.ymin=-y),P.width()>x){const F=-400*f,G=F+5*_;P.setCoords({xmin:F,ymin:P.ymin,xmax:G,ymax:P.ymax})}const $=new lr({env2D:P});this.m_GCSHorizon||(this.m_GCSHorizon=$,this.m_bGCSHorisonIsInclusive=e)}else{let k=this.getPCSInfo().isGcsHorizonMultiOverlap();const $=Oye(s,null,null,1),F=[],G=new Ze;for(let re=0;re<r;re++){if(n[re].getKind()!==zi.PE_HORIZON_POLY)continue;l=n[re].getSize();const se=n[re].getCoord(),oe=xe.constructEmpty();oe.setFromPoints(R_(se),l),F.push(new Ze(oe.xmin,oe.xmax)),oe.width(),G.merge(F.at(-1))}let V=!1;const B=new Ze;G.width()>_&&F.length>1?(B.vmin=this.getCentralMeridian()-_,B.vmax=B.vmin+2*_,V=!0,k=!0):(B.vmin=G.vmin,B.vmax=B.vmin+_);const W=re=>{let se=0;for(;F[re].vmin+se<B.vmin;)se+=_;for(;F[re].vmax+se-_>B.vmin;)se-=_;return se};let J=new Wt;if(k){const re=new Vrt,se=new Yy().executeMany(re,$,null);for(let oe=0;oe<r;oe++){if(n[oe].getKind()!==zi.PE_HORIZON_POLY)continue;l=n[oe].getSize();const pe=n[oe].getCoord();u=n[oe].getInclusive()>0;const ce=new Wt;if(ce.addPathPoint2D(R_(pe),l-1,!0),V){const ue=W(oe),ne=F[oe].clone();ne.move(ue);let de=ue;const Se=new _i;do{Se.setShiftCoords(de,0);const Pe=ce.clone();Pe.applyTransformation(Se),re.tick(Pe),re.tock(),de+=_,ne.move(_)}while(ne.vmin<B.vmax)}else re.tick(ce),se.tock()}J=se.next()}else{J=new Wt;for(let re=0;re<r;re++){if(n[re].getKind()!==zi.PE_HORIZON_POLY)continue;l=n[re].getSize();const se=n[re].getCoord();if(u=n[re].getInclusive()>0,K(u===e),V){const oe=new Wt;oe.addPathPoint2D(R_(se),l-1,!0);const pe=W(re),ce=F[re].clone();ce.move(pe);let ue=pe;const ne=new _i;do{if(ue!==0){ne.setShiftCoords(ue,0);const de=new Wt({copy:oe});de.applyTransformation(ne),J.addPath(de,0,!0)}else J.addPath(oe,0,!0);ue+=_,ce.move(_)}while(ce.vmin<B.vmax)}else J.addPathPoint2D(R_(se),l-1,!0)}}V&&(J=new W2().execute(J,new xe(B.vmin,-y-f,B.vmax,y+f),$,null)),e?new Z2().accelerateGeometry(J,$,1):new f7().accelerateGeometry(J,$,1),new mye().accelerateGeometry(J,$,1),this.m_GCSHorizon===null&&(this.m_GCSHorizon=J,this.m_bGCSHorisonIsInclusive=e,this.m_GCSSplitLines=A)}}updateAreaOfUse(){return null}updatePCSHorizon(){if(this.m_peCoordSys.getType()!==zi.PE_TYPE_PROJCS)return;const e=this.m_peCoordSys.horizonPcsGenerate();if(!e)return;let i;this.getPCSInfo();const s=e[0].getKind();e[0].getInclusive();const n=xe.constructEmpty(),r=e[0].getNump();let o=!1;if(s===zi.PE_HORIZON_RECT){const l=e[0].getCoord();n.setFromPoints(R_(l),2),i=new lr({env2D:n})}else{let l=-1;for(let _=0;_<r;_++)e[_].getKind()===zi.PE_HORIZON_POLY&&(l=_);K(l>=0);const u=e[l].getSize()-1,f=e[l].getCoord(),y=new Wt;i=y,y.addPathPoint2D(R_(f),u,!0),o=!0}if(this.getPCSInfo().isDensificationNeeded()){K(s!==zi.PE_HORIZON_RECT);const l=1e5*this.getOneMeterPCSUnit();i=new X0().execute(i,l,0,0,null)}if(o){{const l=new lr;i.queryEnvelope(l),i.calculateArea2D(),i.calculateLength2D(),i.getExteriorRingCount()}new Z2().accelerateGeometry(i,null,1)}this.m_PCSHorizon===null&&(this.m_PCSHorizon=i)}updatePannableExtent(){const e=this.m_peCoordSys.getType();if(e===zi.PE_TYPE_PROJCS){const i=this.m_peCoordSys,s=this.getPCSInfo().getCentralMeridian(),n=i.getGeogcs();n||bt("");const r=[s+1/n.getUnit().getUnitFactor()*Math.PI,0];Ka.geogToProj(i,1,r);const o=r[0],l=i.getParameters()[zi.PE_PARM_X0].getValue(),u=this.getPCSHorizon(),f=xe.constructEmpty();u.queryEnvelope(f);const y=Math.abs(o-l),_=y+l,x=-1*y+l,S=f.ymax,P=f.ymin;this.m_pannableExtent.setCoords({xmin:x,ymin:P,xmax:_,ymax:S})}else if(e===zi.PE_TYPE_GEOGCS){const i=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtent.setCoords({xmin:-i,ymin:-i/2,xmax:i,ymax:i/2})}else bt("")}updatePannableExtentGCS(){const e=this.m_peCoordSys.getType();if(e===zi.PE_TYPE_PROJCS){const i=this.m_peCoordSys,s=this.m_centralMeridian,n=i.getGeogcs();n||bt("");const r=1/n.getUnit().getUnitFactor()*Math.PI,o=this.getGCSHorizon(),l=xe.constructEmpty();o.queryEnvelope(l),this.m_pannableExtentGCS.setCoords({xmin:s-r,ymin:l.ymin,xmax:s+r,ymax:l.ymax})}else if(e===zi.PE_TYPE_GEOGCS){const i=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtentGCS.setCoords({xmin:-i,ymin:-i/2,xmax:i,ymax:i/2})}else bt("")}updateDomain(){if(this.m_csType===1){const e=400*this.getOneDegreeGCSUnit();this.m_domain=xe.construct(-e,-e,e,e)}else{K(this.m_csType===2);const e=Ha.generate(this.m_peCoordSys,Ha.PE_PCSINFO_OPTION_DOMAIN);e||bt("generate pcs info failed");const i=new xe(e.getDomainMinx(),e.getDomainMiny(),e.getDomainMaxx(),e.getDomainMaxy());this.m_domain.isEmpty()&&this.m_domain.setCoords({env2D:i})}}updatePoles(){if(this.m_peCoordSys.getType()===zi.PE_TYPE_PROJCS){const e=90*this.getOneDegreeGCSUnit(),i=[[0,e],[0,-e]];Ka.geogToProj(this.m_peCoordSys,2,i);const s=this.getPCSInfo().getNorthPoleLocation()!==Ha.PE_POLE_OUTSIDE_BOUNDARY,n=this.getPCSInfo().getSouthPoleLocation()!==Ha.PE_POLE_OUTSIDE_BOUNDARY;this.m_polesUpdated||(s&&this.m_northPole.setCoords(i[0][0],i[0][1]),n&&this.m_southPole.setCoords(i[1][0],i[1][1]),this.m_polesUpdated=1)}else this.m_polesUpdated=1}updateGeogToProjFactors(){if(this.m_peCoordSys.getType()===zi.PE_TYPE_PROJCS){const e=this.getOneDegreeGCSUnit(),i=this.m_pPCSInfoNoDomain.getCentralMeridian(),s=[0,0,0,0];s[0]=i,s[1]=0,s[2]=i+e,s[3]=0;const n=Ka.geogToProj(this.m_peCoordSys,2,s);K(n===2);const r=(s[2]-s[0])/e,o=s[0];this.m_geogToProjFactorsUpdated===0&&(this.m_geogToProjFactor=r,this.m_geogToProjOffset=o,this.m_geogToProjFactorsUpdated=1)}else this.m_geogToProjFactorsUpdated=1}getOneMeterPCSUnit(){return this.m_oneMeterPCS}getOneDegreeGCSUnit(){return this.m_oneDegreeGCS}getGcsUnitFactor(){return this.m_gcsUnitFactor}getUnitsPerMillimeter(){return this.m_oneMillimeter}getGCSSplitLines(){return this.m_bIsPannable?null:(this.m_GCSHorizon||this.updateGCSHorizon(),this.m_GCSSplitLines)}getGCSHorizon(){return this.m_bIsPannable?this.getGCSHorizonPannable():(this.m_GCSHorizon!==null||this.updateGCSHorizon(),this.m_GCSHorizon)}getGCSHorisonIsInclusive(){return this.m_bIsPannable||this.getGCSHorizon(),this.m_bGCSHorisonIsInclusive}getPCSHorizon(){return this.m_bIsPannable?this.getPCSHorizonPannable():(this.m_PCSHorizon!==null||this.updatePCSHorizon(),this.m_PCSHorizon)}getPole(e){return this.m_bIsPannable||this.m_polesUpdated!==0||this.updatePoles(),e?this.m_southPole:this.m_northPole}getGeogToProjFactors(){return this.m_geogToProjFactorsUpdated===0&&this.updateGeogToProjFactors(),rr(this.m_geogToProjFactor,this.m_geogToProjOffset)}getDomainXY(){if(this.m_bIsPannable)return this.m_domain.clone();let e=!1;return e=this.m_domain.isEmpty(),e&&this.updateDomain(),this.m_domain.clone()}getPrimeMeridian(){return this.m_primeMeridian}getLatestID(){return this.m_WKID}getOldID(){let e=this.m_oldWKID;if(e<0){if(e=0,this.m_WKID>0){const i=[0],s=[0];Got(this.m_peCoordSys.getType(),this.m_WKID,i,s)||bt("query_code_change"),e=i[0]}this.m_oldWKID=e}return e}isCustomWkid(){return!1}isPannable(){return this.m_bIsPannable}getPannableExtent(){return this.m_pannableExtent.clone()}getPannableExtentGCS(){return this.m_pannableExtentGCS.clone()}getAreaOfUse(){return this.m_areaOfUse!==null?this.m_areaOfUse:this.updateAreaOfUse()}getVcsCode(){return 0}saveMemory(){}getCSType(){return this.m_csType}getUnit(){return this.m_unit}setCached(){this.m_bCached=!0}getCached(){return this.m_bCached}static equal(e,i){return!1}static equal_for_projection(e,i){return!1}}function GN(t,e,i,s){return Brt(!0,t,e,i,s)}function Brt(t,e,i,s,n,r){return new Bj(2,e,i,s,n,r)}function Hrt(){return{centralMeridianOfOutputGCS:Number.NaN,densificationStep:Number.NaN,clipWithInputHorizon:!0,clipWithOutputHorizon:!0,legacyHorizonClipping:!1,normalizeResultGeometry:!1,equals(t){return ga(this.centralMeridianOfOutputGCS,t.centralMeridianOfOutputGCS)&&ga(this.densificationStep,t.densificationStep)&&this.clipWithInputHorizon===t.clipWithInputHorizon&&this.clipWithOutputHorizon===t.clipWithOutputHorizon&&this.legacyHorizonClipping===t.legacyHorizonClipping&&this.normalizeResultGeometry===t.normalizeResultGeometry}}}function Urt(){return{flagsMask:0,setFlag(t,e){e?this.flagsMask|=t:this.flagsMask&=~t},hasFlag(t){return!!(this.flagsMask&t)}}}function Fz(){return{m_extendedParams:Hrt(),m_extendedParamsInternal:Urt()}}function jN(){return Fz()}class Bj{constructor(e,i,s,n,r,o){let l,u;this.m_datumTran=null,this.m_bIdentity=!0,this.m_bIdentityGeogToGeog=!0,this.m_bVertical=!1,this.m_bNormalize=!1,i&&s||Je("!inputSR || !outputSR"),n&&n.getType()===0&&(n.m_bReadOnly=!0),this.m_bNormalize=!1,e!==1&&(l=i.getVCS(),u=s.getVCS(),this.m_bVertical=l!=null&&u!=null),this.m_inputSR=i,this.m_outputSR=s,this.m_bIdentity=!1,this.m_bIdentityGeogToGeog=!1,K(!this.m_params),r&&(this.m_params=Fz(),this.m_params.m_extendedParams=r),o&&(this.m_params||(this.m_params=Fz()),this.m_params.m_extendedParamsInternal=o);let f=!1;const y=n!=null,_=i.getCoordinateSystemType(),x=s.getCoordinateSystemType();if(s.isPannable()&&_!==0&&r){const A=r.centralMeridianOfOutputGCS;if(!Number.isNaN(A)&&s.isPannable()){const k=s.getPannableExtent(),$=k.getCenterX();if($!==A){const F=Math.ceil(k.width());A+F!==$+F&&(f=!0)}}}const S=r&&r.normalizeResultGeometry;if(i.equals(s))return this.m_bIdentity=!f,this.m_bIdentityGeogToGeog=!0,void this.updateProjector();const P=!y&&i.equalForProjection(s,this.m_bVertical);this.m_bIdentity=P&&!f,this.m_bIdentity?this.m_bIdentityGeogToGeog=!0:_!==0&&x!==0&&(S&&this.m_outputSR.isPannable()&&(this.m_bNormalize=S),this.m_datumTran=n||null,this.m_bIdentityGeogToGeog=(!this.m_datumTran||this.m_datumTran.count()===0)&&this.m_inputSR.getGCS().equalForProjection(this.m_outputSR.getGCS(),this.m_bVertical)),this.updateProjector()}getInputSR(){return this.m_inputSR}getOutputSR(){return this.m_outputSR}getDatumTransformation(){return this.m_datumTran}getInverse(){var i;const e=new Bj(1,this.m_outputSR,this.m_inputSR,(i=this.m_datumTran)==null?void 0:i.createInverse());return e.m_bIdentity=this.m_bIdentity,e.m_bVertical=this.m_bVertical,e.m_bIdentityGeogToGeog=this.m_bIdentityGeogToGeog,e.updateProjector(),e}isIdentity(){return this.m_bIdentity}getExtendedParams(){return this.m_params?this.m_params.m_extendedParams:jN().m_extendedParams}equals(e){return K(0),!1}isVertical(){return this.m_bVertical}isMatchingTransformation(e,i){return K(0),!1}getGeographicTransformations(){return this.m_datumTran}getExtendedParamsImpl(){return this.m_params?this.m_params.m_extendedParams:jN().m_extendedParams}getExtendedParamsInternal(){return this.m_params?this.m_params.m_extendedParamsInternal:jN().m_extendedParamsInternal}isIdentityGeogToGeog(){return this.m_bIdentityGeogToGeog}normalizeOutput(){return this.m_bNormalize}updateProjector(){this.m_projector=new gnt(this)}}const Eye=new Map,eC=new Map,zz=new Map;function Yrt(t){let e=t.getCode();if(e>0)return Cye(e)||_se(h2.coordsys(e));const i=t.getName();if(eC.has(i)){const s=eC.get(i);if(s&&s.deref()){const n=s.deref();if(n.m_peCoordSys.isEqual(t))return n}}return e=h2.getCode(t),_se(e>0?h2.coordsys(e):t)}function Xrt(t){eC.delete(t.m_peCoordSys.getName()),zz.delete(Fj(t.m_peCoordSys,0,!1))}let BN;function Wrt(){return BN||(BN=h2.unit(9001)),BN}function _se(t){const e=Vye(t),i=t.getCode();if(i>0){const l=Cye(i);if(l)return l}const s=t.getName();let n=eC.get(s);if(n){const l=n.deref();if(l&&l.m_peCoordSys.isEqual(t))return l}const r=new jj(e.release());if(i>0)return r.setCached(),Eye.set(i,new WeakRef(r)),eC.set(s,new WeakRef(r)),r;const o=Fj(t,0,!1);if(n=zz.get(o),n){const l=n.deref();if(l)return l}return r.setCached(),zz.set(o,new WeakRef(r)),r}function Cye(t){const e=Eye.get(t);if(e)return e.deref()}class tC extends Rge{constructor(e){return e===void 0?(super(),this.m_wkid=9001,void(this.m_peUnit=null)):typeof e=="number"?(super(),this.m_factor=e,void(this.m_wkid=0)):(super(e),void(e||(this.m_factor=1,this.m_wkid=9001,this.m_peUnit=Wrt())))}getUnitType(){return 0}convertFromMeters(e){return e/this.getUnitToBaseFactor()}convertToMeters(e){return e*this.getUnitToBaseFactor()}}function Zrt(t,e=!0){return K(0),{}}function Krt(t,e,i,s,n,r){const o=.5*(s.sub(e).length()+s.sub(i).length());t.m_center.assign(s),t.m_startAngle=Math.atan2(e.y-t.m_center.y,e.x-t.m_center.x),Jrt(t,Math.atan2(i.y-t.m_center.y,i.x-t.m_center.x),n,r);const l=t.constructEllipticArcEndPointsCenter(e,i,o,1,0,Math.abs(t.m_sweepAngle)>Math.PI,t.m_sweepAngle>0,s);return t.setProjectionBehavior(0),l}function Jrt(t,e,i,s){let n=t.m_startAngle,r=t.m_sweepAngle;const o=1e-12;for(;n>ki();)n-=2*ki();for(;n<=-ki();)n+=2*ki();if(!Number.isNaN(e)){for(;e>ki();)e-=2*ki();for(;e<=-ki();)e+=2*ki();!i&&e>n&&(e-=2*ki()),i&&e<n&&(e+=2*ki()),r=e-n,Math.abs(r)<o&&!s&&(r=i?2*ki():-2*ki()),Math.abs(r)>2*ki()-o&&s&&(r=0)}Math.abs(r)>2*ki()-o&&(r=r>=0?2*ki():-2*ki(),t.setEndXY(t.getStartXY())),Math.abs(r)<o&&(r=0,t.setEndXY(t.getStartXY())),s=Math.abs(r)<=ki(),r&&(i=r>0),t.m_startAngle=Xy(n),t.m_sweepAngle=r,ex(t,!s),m7(t,i)}function Qrt(t,e,i,s){const n=[];return eot(e,n),tot(t,n,e,i)}function eot(t,e){e.length=t;for(let i=0;i<e.length;++i)e[i]=i;t>3&&LJe(t,e)}function tot(t,e,i,s,n){let r=0;const o=[0,0,0];let l=0;const u=3;let f=0;for(let y=0;y<u;++y){let _=!1;for(;f<i;){const x=t.at(e[f]);let S=1;if(r===3?S=Y.inCircleRobust(t.at(s[0]),t.at(s[1]),t.at(s[2]),x):r===2?S=Y.inCircleRobust3Point(t.at(s[0]),t.at(s[1]),x):r===1&&x.equals(t.at(s[0]))&&(S=0),S<=0){if(S<0&&y+1<u){e[l]=St(e[f],e[f]=e[l]);for(let A=0;A<r;A++)if(s[A]===e[f]){o[A]=f;break}l++}f++;continue}_=!0;let P=0;for(let A=0;A<r;A++)o[A]>f&&(s[P]=s[A],o[P]=o[A],P++);r=P,s[r]=e[f],o[r]=f,r++,r<3?f=l:(Y.orientationRobust(t.at(s[0]),t.at(s[1]),t.at(s[2]))===1&&(s[2]=St(s[0],s[0]=s[2]),o[2]=St(o[0],o[0]=o[2])),f++)}if(!_)break;if(y+1<u){l=0;let x=!1;for(let S=0;S<r;S++)for(let P=S+1;P<r;P++)o[S]>o[P]&&(o[P]=St(o[S],o[S]=o[P]),s[P]=St(s[S],s[S]=s[P]),x=!0);for(let S=0;S<r;S++)e[o[S]]=St(e[S],e[S]=e[o[S]]),o[S]=S;x&&r===3&&Y.orientationRobust(t.at(s[0]),t.at(s[1]),t.at(s[2]))===1&&(s[2]=St(s[0],s[0]=s[2]),o[2]=St(o[0],o[0]=o[2]))}f=r}return r}function iot(){return{e2:0,completeE:0}}class sot{constructor(e,i){this.m_arc=e,this.m_sqrChordLength=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?Y.sqrDistance(this.m_arc.getCoord2D(i),this.m_arc.getCoord2D(1-i))-this.m_sqrChordLength:0}getError(e){return K(0),0}}function not(t,e,i){if(rn(t))Fge(new si({start:t.getStartXY(),end:t.getEndXY()}),e,i);else if(e.value()===0)i.set(t.getStartXY());else if(e.value()===1)i.set(t.getEndXY());else{const s=new Be;oot(t,e,s);const n=new Be,r=new Be;Be.st_cosAndSin(s,n,r);const o=Ht.constructCoordsE(new Be(t.m_semiMajorAxis).mulThisE(n),new Be(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio).mulThisE(r)),l=new Be(t.m_rotation);Be.st_cosAndSin(l,n,r),o.rotateDirect(n,r),o.addThisE(Ht.constructPoint2D(t.m_center)),i.setE(o)}}function HN(t,e){return t.convertToCanonic(e)}function rot(t,e){const i=new Ze(t.getStartAngle(),t.getEndAngle());i.normalize();const s=jo(),n=$g(e,s);if(n<i.vmin){let r=n+s;for(;r<i.vmin;)r+=s;return i.containsCoordinate(r)?r:i.vmin-n<r-i.vmax?n:r}if(n>i.vmax){let r=n-s;for(;r>i.vmax;)r-=s;return i.containsCoordinate(r)||i.vmin-r<n-i.vmax?r:n}return n}function Xy(t){let e=t,i=!1;return e<=-ki()?(e+=jo(),i=!0):e>ki()&&(e-=jo(),i=!0),e<=-ki()?(e=$g(e,jo()),e<=-ki()&&(e+=jo()),i=!0):e>ki()&&(e=$g(e,jo()),e>ki()&&(e-=jo()),i=!0),i&&(e>ki()||e<=-ki())&&(e=ki()),e}function bse(t,e,i){const s=i,n=s.getSemiAxes();let r=new Y(n.x*Math.cos(t[0]),n.y*Math.sin(t[0]));return r=s.convertFromCanonic(r),Y.sqrDistance(r,s.getStartXY())}function xse(t,e,i){const s=i,n=s.getSemiAxes(),r=t[0]+s.getStartAngle();let o=new Y(n.x*Math.cos(r),n.y*Math.sin(r));return o=s.convertFromCanonic(o),Y.sqrDistance(o,s.getEndXY())}function qz(t){if(t.m_center.isNAN())return t.m_startAngle=0,void(t.m_sweepAngle=0);const e=t.getStartXY(),i=t.getEndXY(),s=e.equals(i),n=Yj(t),r=Q2(t),o=t.projectionBehavior();if(s){const l=t.convertToCanonic(e),u=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);l.x/=u.x,l.y/=u.y,t.m_startAngle=Xy(Math.atan2(l.y,l.x)),t.m_sweepAngle=n?r?jo():-jo():0}else{const l=t.convertToCanonic(e),u=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);l.x/=u.x,l.y/=u.y;const f=t.convertToCanonic(i);f.x/=u.x,f.y/=u.y,t.m_startAngle=Math.atan2(l.y,l.x),t.m_sweepAngle=Y.calculateAngle(l,f),r?t.m_sweepAngle<0&&(t.m_sweepAngle+=jo()):t.m_sweepAngle>0&&(t.m_sweepAngle-=jo()),t.m_startAngle=Xy(t.m_startAngle);let y=bse([t.m_startAngle],1,t);if(y=Math.sqrt(y),y>.25*rf(t)){const x=t.m_startAngle-1e-4,S=t.m_startAngle+1e-4,P=[0];Pte(bse,t,1,[t.m_startAngle],[x],[S],1e-14,P),t.m_startAngle=Xy(P[0])}if(y=xse([t.m_sweepAngle],1,t),y=Math.sqrt(y),y>.25*rf(t)){const x=t.m_sweepAngle-1e-4,S=t.m_sweepAngle+1e-4,P=[0];Pte(xse,t,1,[t.m_sweepAngle],[x],[S],1e-14,P),t.m_sweepAngle=P[0]}const _=Math.abs(t.m_sweepAngle)>ki();if(ex(t,_),n!==_&&!n&&Math.abs(t.m_sweepAngle)>1.5*ki()||t.m_sweepAngle===0||r!==t.m_sweepAngle>0)return void Uu(t,e,i,o)}}function Tn(t,e){return(rot(t,e)-t.getStartAngle())/t.getSweepAngle()}function Xd(t,e){return t.m_startAngle+e*t.m_sweepAngle}function oot(t,e,i){i.assign(new Be(t.m_startAngle).addE(e.mulE(new Be(t.m_sweepAngle))))}function aot(t,e){const i=new Be(t.m_cosr).sqrThis(),s=new Be(t.m_sinr).sqrThis(),n=new Be(t.m_minorMajorRatio),r=new Be(1/t.m_minorMajorRatio),o=n.mulE(i).addThisE(r.mulE(s)),l=n.subE(r).mulThis(2*t.m_cosr*t.m_sinr),u=n.mulE(s).addThisE(r.mulE(i));e[0]=o,e[1]=l,e[2]=u,e[3]=new Be(-t.m_semiMajorAxis).mulThis(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio)}function lot(t,e){const i=new $E;i.a11.setE(t[0]),i.a12=Be.st_mulByPower2(t[1],.5),i.a21.setE(i.a12),i.a22.setE(t[2]);const s=[Y.getNAN(),Y.getNAN()],n=[new Be,new Be];i.eigenSymmetric(n,s);const r=t[3].clone();return r.negateThis(),r.invThis(),n[0].mulThisE(r),n[1].mulThisE(r),n[0].sqrtThis().invThis(),n[1].sqrtThis().invThis(),e.x=n[0].toDouble(),e.y=n[1].toDouble(),Math.atan2(s[0].y,s[0].x)}function cot(t,e,i){if(rn(t))return(i-e)*Y.distance(t.getStartXY(),t.getEndXY());if(t.m_minorMajorRatio===1)return Math.abs(t.getSweepAngle()*(e-i))*t.m_semiMajorAxis;const s=Vz(t,e);return Vz(t,i)-s}function UN(t){return t.m_cachedValues}function Hj(t){if(t.m_cachedValues)return t.m_cachedValues;const e=iot();return e.e2=hot(t),e.completeE=pj(e.e2),t.m_cachedValues=e,e}function wse(t,e,i,s){if(!e.isEqual(t.m_XStart,t.m_YStart)||!i.isEqual(t.m_XEnd,t.m_YEnd)){if(rn(t))return t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,WS(t),void t.afterCompletedModification();if(s&&Math.abs(t.getSweepAngle())<=1.01*_a()){const n=Ge(Y,3),r=Mye(t,n);if(a7(n)){if(n[0].assign(e),n[2].assign(i),B2(n),t.projectionBehavior()===0){let o=0,l=2;Y.sqrDistance(n[1],n[0])<Y.sqrDistance(n[1],n[2])&&(l=St(o,o=l));const u=n[l].sub(n[o]),f=u.length();u.divThis(f);const y=n[1].sub(n[o]),_=y.length(),x=y.dotProduct(u)/_,S=y.crossProduct(u)/_,P=new Y;ar(n[o],n[l],.5,P);const A=.5*f/S*un(1-x,0,1),k=n[1].side(n[o],n[l]),$=u.clone();k?$.leftPerpendicularThis():$.rightPerpendicularThis();const F=P.sub($.mul(A));t.constructCircularArcThreePoint(n[0],n[2],F)}else g7(n,r*r,null,!1,t);return}}t.projectionBehavior()===0?_ot(t,e,i):Dye(t,e,i)}}function uot(t,e,i){const s=t.projectionBehavior()===0;if(i<=2)return void Uu(t,e[0],e[i-1],s?0:1);if(s){t.constructCircularArcThreePoint(e[0],e[i-1],e[Math.trunc(i/2)]);const P=new Y;return t.queryCoord2D(.5,P),void t.m_interior.setCoordsPoint2D(P)}const n=t.getSemiMajorAxis(),r=t.getMinorMajorRatio(),o=t.getAxisXRotation(),l=t.getCenter(),u=new Array(4);u[0]=t.isMajor(),u[1]=!u[0],u[2]=u[0],u[3]=!u[0];const f=new Array(4);f[0]=t.isClockwise(),f[1]=f[0],f[2]=!f[0],f[3]=!f[0];const y=Math.trunc(i<5?1:(i+4)/5),_=Ge(Vc,4),x=new Array(4);let S=0;for(let P=0;P<4;P++){_[P].constructEllipticArcEndPointsCenter(e[0],e[i-1],n,r,o,u[P],f[P],l),x[P]=0;let A=0;for(let k=y;k<i-1;k+=y){const $=_[P].getClosestCoordinate(e[k],!1);x[P]+=Y.sqrDistance(_[P].getCoord2D($),e[k]),A++}x[P]/=A,x[P]<x[S]&&(S=P)}t.assignCopy(_[S])}function hot(t){return 1-Xi(t.m_minorMajorRatio)}function Sse(t,e,i,s,n,r,o,l,u){return t.m_bits=0,t.m_rotation=r,wj(t,e),Sj(t,i),t.m_cosr=Math.cos(r),t.m_sinr=Math.sin(r),ex(t,o),m7(t,l),u!==void 0?t.m_center.assign(u):t.m_center.setNAN(),t.setProjectionBehavior(1),t.m_semiMajorAxis=s,t.m_minorMajorRatio=n,Iye(t,u===void 0)}function Uu(t,e,i,s){t.m_bits=0,t.m_rotation=0,wj(t,e),Sj(t,i),t.m_interior.assign(e.add(i).mul(.5)),t.m_startAngle=0,t.m_sweepAngle=0,t.m_cosr=1,t.m_sinr=0,ex(t,!1),m7(t,!1),t.m_center.setNAN(),t.m_semiMajorAxis=1,t.m_minorMajorRatio=0,t.setProjectionBehavior(s),t.afterCompletedModification()}function rn(t){return t.m_center.isNAN()}function Vz(t,e){if(e===0)return 0;const i=Hj(t),s=Xd(t,e),n=_a(),r=Pye(t),o=mj(s+n,i.e2,i.completeE),l=t.m_semiMajorAxis*(o-r);return Math.abs(l)}function dot(t,e){if(rn(t)){const u=Y.distance(t.getStartXY(),t.getEndXY());return u===0?0:e/u}if(t.m_minorMajorRatio===1){const u=Math.abs(t.getSweepAngle()*t.m_semiMajorAxis);return u===0?0:e/u}if(e===0)return 0;const i=t.getSweepAngle();if(i===0)return .5;const s=Hj(t),n=_a(),r=Pye(t);i<0&&(e=-e);const o=e/t.m_semiMajorAxis+r;let l=VKe(o,s.e2,s.completeE);return l-=n,l-=t.getStartAngle(),l/i}function Pye(t){const e=Hj(t);return mj(t.getStartAngle()+_a(),e.e2,e.completeE)}function Uj(t,e,i){if(e instanceof zJe)return void K(0);if(K(!Tye(t)),e.isIdentity())return;HI(t);const s=Y.getNAN();s.x=t.m_XStart,s.y=t.m_YStart,e.transformInPlace(s);const n=Y.getNAN();if(n.x=t.m_XEnd,n.y=t.m_YEnd,e.transformInPlace(n),rn(t))return t.m_XStart=s.x,t.m_YStart=s.y,t.m_XEnd=n.x,void(t.m_YEnd=n.y);const r=t.m_center.clone();if(e.transformInPlace(r),i||e.isUniformNoRotation()){let o=Q2(t);if(e.isReflective()&&(o=!o),t.projectionBehavior()===0){if(!s.equals(n)){const _=t.m_interior.clone();return e.transformInPlace(_),void t.constructCircularArcThreePoint(s,n,_)}return void Krt(t,s,n,r,o,!1)}const l=new Y(t.m_cosr,t.m_sinr);e.transformWithoutTranslateInPlace(l);const u=Math.atan2(l.y,l.x),f=t.getSemiAxes();e.transformWithoutTranslateInPlace(f);const y=t.m_center.clone();return e.transformInPlace(y),void t.constructEllipticArcEndPointsCenter(s,n,f.x,f.y/f.x,u,t.isMajor(),o,y)}{{const _=new Array(4);aot(t,_);const x=new $E;if(x.a11.setE(_[0]),x.a12.setE(_[1]),x.a12.mulThisByPower2(.5),x.a21.setE(x.a12),x.a22.setE(_[2]),!x.det().isZero()){const S=new $E;if(S.a11.set(e.xx),S.a12.set(e.xy),S.a21.set(e.yx),S.a22.set(e.yy),S.invertThis()){const P=S.clone();P.transposeThis();const A=x.clone();if(A.mulThis(S),A.mulLeftThis(P),!A.det().isZero()){const k=Ge(Be,4);k[0].setE(A.a11),k[1].setE(A.a12),k[1].mulThisByPower2(2),k[2].setE(A.a22),k[3].setE(_[3]);const $=Y.getNAN(),F=lot(k,$);let G=Q2(t);return e.isReflective()&&(G=!G),void t.constructEllipticArcEndPointsCenter(s,n,$.x,$.y/$.x,F,t.isMajor(),G,r)}}}}const o=[Y.getNAN(),Y.getNAN(),Y.getNAN()];o[0].setCoords(t.getSemiMajorAxis(),0),o[0].rotateDirect(t.m_cosr,t.m_sinr),o[1].setCoords(t.getSemiMajorAxis(),t.getSemiMinorAxis()),o[1].rotateDirect(t.m_cosr,t.m_sinr),o[2].setCoords(0,t.getSemiMinorAxis()),o[2].rotateDirect(t.m_cosr,t.m_sinr);let l=t.isClockwise();l&&(o[2]=St(o[0],o[0]=o[2]));const u=.5;e.transformWithoutTranslateArray(o,3,o),e.isReflective()&&(l=!l);const f=new Y(0,0),y=t.createInstance();g7(o,u,f,!1,y),t.constructEllipticArcEndPointsCenter(s,n,y.getSemiMajorAxis(),y.getMinorMajorRatio(),y.getAxisXRotation(),t.isMajor(),!l,r)}}function YN(t,e){t.m_cachedValues=e}function HI(t){t.m_cachedValues=null}function m7(t,e){const i=e?1:0;t.m_bits=-2&t.m_bits|i}function Q2(t){return!!(1&t.m_bits)}function ex(t,e){const i=e?1:0;t.m_bits=-3&t.m_bits|i<<1}function Yj(t){return!!(2&t.m_bits)}function fot(t){if(t.m_center.isNAN())return!1;const e=8,i=new Ht;i.setWithEps(t.getStartXY(),e),i.subThisE(new Ht().setWithEps(t.m_center,e));const s=new Be;s.setWithEps(t.m_rotation,e);const n=new Be,r=new Be;Be.st_cosAndSin(s,n,r),i.rotateReverse(n,r);const o=new Ht;o.setWithEps(t.getEndXY()),o.subThisE(Ht.constructPoint2D(t.m_center)),o.rotateReverse(n,r);const l=new Be;l.setWithEps(t.m_semiMajorAxis,e);const u=l.clone(),f=new Be;f.setWithEps(t.m_minorMajorRatio),u.mulThisE(f),i.x.divThisE(l),i.y.divThisE(u),o.x.divThisE(l),o.y.divThisE(u);const y=i.x.sqr().addThisE(i.y.sqr()).subThisE(nm),_=o.x.sqr().addThisE(o.y.sqr()).subThisE(nm);return!y.isZero()||!_.isZero()}function Tye(t){return!!(8&t.m_bits)}function UI(t){t.m_bits&=-9}function Iye(t,e){UI(t);const i=t.getStartXY(),s=t.getEndXY();let n=!1;const r=Yj(t),o=Q2(t),l=t.projectionBehavior(),u=i.equals(s);let f=t.m_minorMajorRatio===0||t.m_semiMajorAxis===0;if(Number.isNaN(t.m_minorMajorRatio)&&(t.m_semiMajorAxis===0?t.m_minorMajorRatio=1:vge("NAN minor major ratio and non-zero major axis")),f||(f=e?u:t.m_center.isNAN()),f)return Uu(t,i,s,l),!0;t.m_semiMajorAxis=Math.abs(t.m_semiMajorAxis),t.m_minorMajorRatio=Math.abs(t.m_minorMajorRatio),t.m_minorMajorRatio>1&&(t.m_semiMajorAxis*=t.m_minorMajorRatio,t.m_minorMajorRatio=1/t.m_minorMajorRatio);const y=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);if(u){const _=t.convertToCanonic(i);_.x/=y.x,_.y/=y.y;const x=Math.sqrt(Xi(_.x)+Xi(_.y));if(n=x!==1,t.m_semiMajorAxis*=x,y.mulThis(x),t.m_startAngle=Xy(Math.atan2(_.y,_.x)),!r)return t.m_interior.assign(i),t.m_sweepAngle=0,t.afterCompletedModification(),n;t.m_sweepAngle=o?jo():-jo()}else{let _=t.m_center.isNAN()||fot(t);if(!_){const x=t.convertToCanonic(i);x.x/=y.x,x.y/=y.y;const S=new Y(1,0);t.m_startAngle=Y.calculateAngle(S,x);const P=t.convertToCanonic(s);P.x/=y.x,P.y/=y.y,t.m_sweepAngle=Y.calculateAngle(x,P),_=!Ese(t)}if(_){n=!0;const x=i.sub(s).mulThis(.5);x.rotateReverse(t.m_cosr,t.m_sinr);let S=Xi(x.x/y.x)+Xi(x.y/y.y);S>1&&(S=Math.sqrt(S),t.m_semiMajorAxis*=S,y.mulThis(S));const P=new Y(0,0);{const A=y.x*y.x,k=y.y*y.y,$=A*x.y*x.y+k*x.x*x.x,F=A*k-$;if(F>0){const G=Math.sqrt(F/$);P.setCoords(y.x*x.y/y.y,-y.y*x.x/y.x),P.mulThis(G),r===o&&P.negateThis()}}{const A=new Y(P.x,P.y);A.rotateDirect(t.m_cosr,t.m_sinr),A.addThis(i.add(s).mulThis(.5)),t.m_center.assign(A)}}if(qz(t),!Ese(t))return Uu(t,i,s,l),!0}return WS(t),t.afterCompletedModification(),n}function Mye(t,e){K(Math.abs(t.getSweepAngle())<15*Math.PI/16);const i=t.getSemiMajorAxis(),s=t.getSemiMinorAxis();let n;if(i===0)return e[0].setCoordsPoint2D(t.getStartXY()),e[1].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getStartXY()),n=1,n;if(s===0)return e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1]=Y.lerp(e[0],e[2],.5),n=1,n;const r=t.getSweepAngle(),o=t.getStartAngle(),l=o+r,u=new Y(-i*Math.sin(o),s*Math.cos(o)),f=new Y(-i*Math.sin(l),s*Math.cos(l));u.normalize(),f.normalize(),u.rotateDirect(t.m_cosr,t.m_sinr),f.rotateDirect(t.m_cosr,t.m_sinr),e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1].setSub(e[2],e[0]);const y=u.crossProduct(f);return e[1].assign(u.mul(e[1].crossProduct(f)/y)),e[1].addThis(e[0]),n=Math.cos(.5*r),n}function g7(t,e,i,s,n){const r=t[0].sub(t[1]),o=t[2].sub(t[1]),l=r.crossProduct(o),u=r.dotProduct(o),f=e;K(f<=1),K(f>0);const y=.5/(1-f),_=r.sqrLength(),x=u,S=o.sqrLength(),P=Xi(l),A=r.sub(o).sqrLength();if(P===0||u<=-Math.sqrt(_)*Math.sqrt(S))return Uu(n,t[0],t[2],1),!1;const k=[0,0],$=new Ze;$.setInfinite();const F=xv(2*P,-(A/f+4*x),2*(1-f)/f,$,!1,k);if(F===0)return Uu(n,t[0],t[2],1),!1;F===1&&(k[1]=k[0]);const G=Math.sqrt(y/k[0]),V=Math.sqrt(y/k[1]),B=.5/f;let W=B-S*k[0],J=B-_*k[0];Math.abs(W)>Math.abs(J)?J=x*k[0]-B+1:W=x*k[0]-B+1;const re=r.mul(W).add(o.mul(J)),se=re.norm(1)<1e-15*G?0:Math.atan2(re.y,re.x)+Math.PI,oe=r.add(o),pe=i?i.clone():t[1].add(oe.mul(y)),ce=t[0].sub(pe),ue=t[2].sub(pe),ne=ce.crossProduct(ue)<0,de=!1;return new Vc,n.constructEllipticArcEndPointsCenter(t[0],t[2],G,V/G,se,de,!ne,pe)}function pot(t,e,i,s,n){return g7(t,e,i,s,n)}function Ese(t){let e=!1;{const s=new Y(t.m_semiMajorAxis*Math.cos(t.m_startAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle));s.rotateDirect(t.m_cosr,t.m_sinr),s.addThis(t.m_center),e=Y.distance(t.getStartXY(),s)>rf(t)}let i=!1;if(!e){const s=new Y(t.m_semiMajorAxis*Math.cos(t.m_startAngle+t.m_sweepAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle+t.m_sweepAngle));s.rotateDirect(t.m_cosr,t.m_sinr),s.addThis(t.m_center),i=Y.distance(t.getEndXY(),s)>rf(t)}return!e&&!i}function mot(t,e,i,s){i===0&&Je("construct_enclosing_circle");const n=[0,0,0],r=Qrt(e,i,n);if(r===1)t.constructCircleRadius(0,e[n[0]],s);else if(r===2){const o=Y.lerp(e[n[0]],e[n[1]],.5),l=Y.distance(e[n[0]],o),u=Y.distance(e[n[1]],o);t.constructCircleRadius(Math.max(l,u),o,s)}else if(r===3){const o=Y.calculateCircleCenterFromThreePoints(e[n[0]],e[n[1]],e[n[2]]),l=Y.distance(e[n[0]],o),u=Y.distance(e[n[1]],o),f=Y.distance(e[n[2]],o);t.constructCircleRadius(Math.max(l,u,f),o,s)}else bt("unexpected")}function Cse(t){if(rn(t)||t.isDegenerate(0))return 0;const e=t.m_semiMajorAxis,i=t.getSemiMinorAxis(),s=e*e+i*i,n=t.getStartAngle(),r=t.getEndAngle(),o=t.m_center.y-t.m_YStart,l=t.m_cosr,u=t.m_sinr;let f=1,y=0;t.m_rotation&&(f=(l-u)*(l+u),y=2*l*u);const _=((-.5*(r-n)+.25*f*(2*Math.cos(r+n)*Math.sin(r-n)))*i+-2*Math.sin(.5*(r+n))*Math.sin(.5*(r-n))*l*o)*e/s;let x=0;return t.m_rotation&&(x=.125*(-2*Math.sin(r+n)*Math.sin(r-n))*y-i*o/s*(2*Math.cos(.5*(r+n))*Math.sin(.5*(r-n)))*u),s*(_+x)+-.5*(t.m_XEnd-t.m_XStart)*(t.m_YEnd-t.m_YStart)}function WS(t){t.queryCoord2D(.5,t.m_interior)}function Pse(t,e,i,s,n){if(n){if(xm(e,i)!==0)return 2}else if(Kg(e,i))return 1;return iC(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function got(t,e,i,s,n){if(n){if(xm(e,i)!==0)return 2}else if(Kg(e,i))return 1;return Aye(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function iC(t,e,i,s,n,r,o,l,u,f){if(rn(e))return r7(new si({start:e.getStartXY(),end:e.getEndXY()}),i,s,n,r,o,l,f);n!==null&&(n.length=0),r!==null&&(r.length=0),s!==null&&(s.length=0);const y=Dl(e,i);if(Xc(e,i,o=Math.max(y,o)))return 0;const _=i.getStartXY();_.subThis(e.m_center);const x=i.getEndXY();x.subThis(e.m_center),_.rotateReverse(e.m_cosr,e.m_sinr),x.rotateReverse(e.m_cosr,e.m_sinr);const S=x.clone();S.subThis(_);const P=e.m_semiMajorAxis,A=1/P,k=e.getSemiMinorAxis(),$=1/k,F=S.clone();F.leftPerpendicularThis();const G=Math.atan2(k*F.y,P*F.x),V=new Array(16),B=new Array(16);let W=0;const J=[G,G+Math.PI];for(let ne=0;ne<2;++ne){const de=Tn(e,J[ne]);if(de>=0&&de<=1){V[W]=de;const Se=e.getCoord2D(V[W]);B[W]=i.getClosestCoordinate(Se,!1),Y.distance(Se,i.getCoord2D(B[W]))<=o&&W++}}const re=_.x*A,se=_.y*$,oe=S.x*A,pe=S.y*$;let ce=xv(oe*oe+pe*pe,2*(re*oe+se*pe),re*re+se*se-1,Ze.unit(),!1,B);K(ce>=0);for(let ne=0;ne<ce;ne++){const de=S.mul(B[ne]).add(_);de.x*=A,de.y*=$;const Se=Tn(e,Math.atan2(de.y,de.x));if(Se>=0&&Se<=1){V[W]=Se;const Pe=e.getCoord2D(Se);B[W]=i.getClosestCoordinate(Pe,!1),Y.distance(Pe,i.getCoord2D(B[W]))<=o&&W++}}K(W<V.length+4);const ue=new Array(16);ce=e.intersectPoint(i.getStartXY(),ue,o);for(let ne=0;ne<ce;ne++,W++)V[W]=ue[ne],B[W]=0;ce=e.intersectPoint(i.getEndXY(),ue,o);for(let ne=0;ne<ce;ne++,W++)V[W]=ue[ne],B[W]=1;ce=i.intersectPoint(e.getStartXY(),ue,o);for(let ne=0;ne<ce;ne++,W++)V[W]=0,B[W]=ue[ne];ce=i.intersectPoint(e.getEndXY(),ue,o);for(let ne=0;ne<ce;ne++,W++)V[W]=1,B[W]=ue[ne];return W===0?0:Wc(t,e,i,V,B,W,s,n,r,o,l,u,f)}function Aye(t,e,i,s,n,r,o,l,u,f){if(rn(e)){const oe=new si({start:e.getStartXY(),end:e.getEndXY()});return iC(t,i,oe,s,r,n,o,l,u,!0)}if(rn(i)){const oe=new si({start:i.getStartXY(),end:i.getEndXY()});return iC(t,e,oe,s,n,r,o,l,u,f)}const y=Dl(e,i);o=Math.max(o,y);let _=!1;{const oe=e.getSemiAxes(),pe=e.getCenter(),ce=i.getSemiAxes(),ue=i.getCenter(),ne=Y.distance(ue,pe),de=oe.x+ce.x;if(ne>de+o)return 0;if(oe.y>ce.x){if(ne+ce.x+o<oe.y)return 0}else if(ce.y>oe.x&&ne+oe.x+o<ce.y)return 0;if(u&&!l){const Se=e.m_minorMajorRatio===1&&e.isClosed()&&e.isMajor(),Pe=i.m_minorMajorRatio===1&&i.isClosed()&&i.isMajor();if(Se&&Pe&&(_=!0,ne<=de)&&Math.max(oe.x,ce.x)<=Math.min(oe.x,ce.x)+ne)return K(!n&&!r),1}}if(!_&&Xc(e,i,o))return 0;const x=[],S=[],P=!1,A=!1,k=kz(e,0,0,P,A,x,S,null),$=[],F=[],G=kz(i,0,0,P,A,$,F,null);if(k===1&&G===1){const oe=new ba({points:x,weights:S}),pe=new ba({points:$,weights:F}),ce=[],ue=[],ne=VE(!1,oe,pe,s,n===null?null:ce,r===null?null:ue,o,l,u,f);if(ne>0&&n!==null||r!==null){n&&(n.length=0),r&&(r.length=0);for(let de=0;de<ne;++de){if(n)if(Ms(ce[de],0,1))n.push(ce[de]);else{const Se=oe.tToLength(ce[de]),Pe=e.lengthToT(Se);n.push(Pe)}if(r)if(Ms(ue[de],0,1))r.push(ue[de]);else{const Se=pe.tToLength(ue[de]),Pe=i.lengthToT(Se);r.push(Pe)}}}return ne}let V=[];const B=[];let W=0;const J=u&&!l;for(let oe=0;oe<k;oe++){const pe=new ba({points:x.slice(2*oe,2*oe+3),weights:S.slice(2*oe,2*oe+3)});let ce=0;for(let ue=0;ue<G;ue++){B.length<=ue&&B.push(new ba({points:$.slice(2*ue,2*ue+3),weights:F.slice(2*ue,2*ue+3)}));const ne=[],de=[],Se=J?null:ne,Pe=J?null:de,Re=VE(!1,pe,B[ue],null,Se,Pe,o,!1,J,!1);if(Re>0&&J)return 1;for(let Oe=0;Oe<Re;++Oe){if(ne[Oe]===0&&oe===0)ne[Oe]=0;else if(ne[Oe]===1&&oe===k-1)ne[Oe]=1;else{const we=pe.tToLength(ne[Oe])+W,Fe=e.lengthToT(we);ne[Oe]=Fe}if(de[Oe]===0&&ue===0)de[Oe]=0;else if(de[Oe]===1&&ue===G-1)de[Oe]=1;else{const we=B[ue].tToLength(de[Oe])+ce,Fe=i.lengthToT(we);de[Oe]=Fe}V.push(rr(ne[Oe],de[Oe]))}ce+=B[ue].calculateLength2D()}W+=pe.calculateLength2D()}if(V.length===0)return 0;if(l&&(V=V.filter(oe=>!Ms(oe.first,0,1)||!Ms(oe.second,0,1)||!e.getCoord2D(oe.first).equals(i.getCoord2D(oe.second)))),u)return V.length;const re=[],se=[];for(const oe of V)re.push(oe.first),se.push(oe.second);return Wc(t,e,i,re,se,re.length,s,n,r,o,l,u,f)}function Tse(t,e,i){if(i.setCoords(t.getCoord2D(e.vmin)),i.mergeNe(t.getCoord2D(e.vmax)),rn(t))return;const s=t.getSemiAxes(),n=[0,0,0,0];{const o=Math.atan2(-s.y*t.m_sinr,s.x*t.m_cosr),l=o+Math.PI,u=Math.atan2(s.y*t.m_cosr,s.x*t.m_sinr),f=u+Math.PI;n[0]=Tn(t,o),n[1]=Tn(t,l),n[2]=Tn(t,u),n[3]=Tn(t,f)}const r=new Y;for(let o=0;o<4;o++){const l=n[o];e.containsExclusiveCoordinate(l)&&(t.queryCoord2D(l,r),i.mergeNe(r))}}function Ise(t,e,i,s,n){if(t.m_semiMajorAxis===0)return i.vmin;let r=Y.getNAN();t.queryCoord2D(i.vmin,r);let o=Y.getNAN();if(t.queryCoord2D(i.vmax,o),rn(t))return new si({start:r,end:o}).getClosestCoordinate(e,s);const l=HN(t,e);if(r=HN(t,r),o=HN(t,o),t.m_minorMajorRatio===1){if(l.isEqual(0,0))return i.vmin;const W=Tn(t,Math.atan2(l.y,l.x));return s||i.containsCoordinate(W)?W:Y.distance(l,r)<=Y.distance(l,o)?i.vmin:i.vmax}const u=t.getSemiMajorAxis(),f=t.getSemiMinorAxis(),y=(u-f)*(u+f),_=Xi(y),x=l.x,S=l.y,P=Xi(f*S),A=f*y*S*2,k=[new Be(P),new Be(A),new Be(_-Xi(u*x)-P),new Be(-A),new Be(-_)],$=Ge(Be,4),F=Gge(k,4,new Ze(-1,1),!1,$,4);let G=i.vmin,V=Y.sqrDistance(l,r);{const W=Y.sqrDistance(l,o);W<V&&(G=i.vmax,V=W)}K(!s);let B=new Array(8);for(let W=0;W<F;++W){const J=$[W].value(),re=Math.sqrt(1-J*J),se=Math.atan2(J,re),oe=Math.atan2(J,-re);B[2*W]=Tn(t,se),B[2*W+1]=Tn(t,oe)}B=B.slice(0,2*F),Ax(B);for(let W=0,J=2*F;W<J;++W)if(B[W]>i.vmin&&B[W]<i.vmax){const re=Y.sqrDistance(e,t.getCoord2D(B[W]));V>re&&(V=re,G=B[W])}return G}function Mse(t,e,i){return K(0),!1}function yot(t,e,i){K(!rn(t));const s=new _i;s.setRotateAngle(-t.getAxisXRotation());const n=new Y;s.queryTransform(e,n);const r=Math.atan2(-n.x*t.getMinorMajorRatio(),n.y),o=r+ki();let l=Tn(t,r),u=Tn(t,o);u<l&&(u=St(l,l=u));let f=0;return l>=0&&l<=1&&(i[f++]=l),u>=0&&u<=1&&(i[f++]=u),f}function vot(t,e,i){K(0)}function _ot(t,e,i,s){const n=t.getStartXY(),r=t.getEndXY(),o=n.equals(r),l=e.equals(i);if(!o&&!l){const A=new _i;A.setShiftCoords(-t.m_XStart,-t.m_YStart);const k=Y.distance(e,i),$=Y.distance(n,r),F=k/$;A.scale(F,F);const G=r.sub(n);G.divThis($);const V=i.sub(e);V.divThis(k);const B=G.crossProduct(V),W=V.dotProduct(G);return A.rotate(W,B),A.shiftCoords(e.x,e.y),Uj(t,A,!0),t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,void(t.m_YEnd=i.y)}const u=new Y;if(t.queryCoord2D(.5,u),l){if(o){const A=t.m_center.add(e.sub(n));t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),1,0,!0,!t.isClockwise(),A),t.setProjectionBehavior(0)}else if(t.isMajor()){const A=u.sub(e).getUnitVector().mul(2*t.getSemiMajorAxis()).add(e);t.constructCircularArcThreePoint(e,i,A)}else t.constructCircularArcThreePoint(e,i,e);return}const f=e.add(i).mul(.5),y=i.sub(e);y.rightPerpendicularThis();const _=f.add(y),x=Y.getClosestCoordinate(f,_,t.getCenter(),!0),S=new Y;ar(f,_,x,S);const P=Y.distance(e,S);t.constructEllipticArcEndPointsCenter(e,i,P,1,0,!0,!t.isClockwise(),S),t.setProjectionBehavior(0)}function Dye(t,e,i,s){const n=t.getStartXY(),r=t.getEndXY(),o=n.equals(r),l=e.equals(i);if(!o&&!l){const S=new _i;return S.initializeFromTwoPoints(n,r,e,i),Uj(t,S,!0),t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified(),void t.normalizeAfterEndpointChange()}if(!t.isMajor())return void Uu(t,e,i,1);if(o&&l){const S=t.m_center.add(e.sub(n));return void t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),S)}if(!o){const S=.5*(jo()-Math.abs(t.getSweepAngle())),P=(t.getSweepAngle()+S*xn(t.getSweepAngle()))/t.getSweepAngle(),A=new Y;t.queryCoord2D(P,A),t.constructEllipticArcEndPointsCenter(A,A,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.getCenter());const k=t.getCenter().add(e.sub(A));return void t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),k)}const u=Y.sqrDistance(e,i);let f=.25,y=.75;if(u<Y.sqrDistance(t.getCoord2D(.25),t.getCoord2D(.75))){const S=[0],P=Jg(new sot(t,u),Ze.construct(0,.25),1,S);P>0&&(K(P===1),f=S[0],y=1-S[0])}const _=t.getCoord2D(f),x=t.getCoord2D(y);K(!_.equals(x)),t.constructEllipticArcEndPointsCenter(_,x,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.m_center),Dye(t,e,i)}function Ase(t,e,i){if(e<=262144)return Cot(t,e,i);K(0);const s=new wot({points:t,n:e}),n=0;let r=1;const o=t[n].clone();for(;r<e&&t[r].equals(o);)r++;if(s.m_treeHull.addElement(n),r<e){s.m_treeHull.addBiggestElement(r);for(let u=r+1;u<e;u++){const f=t[u],y=s.treeHull(f);y!==-1&&s.m_treeHull.setElement(y,u)}}let l=0;for(let u=s.m_treeHull.getFirst();u!==-1;u=s.m_treeHull.getNext(u))i[l++]=s.m_treeHull.getElement(u);return l}function bot(t,e,i){const s=t.getImpl(),n=s.getPathStart(e),r=s.getPathEnd(e),o=!s.isClosedPath(e)&&s.isClosedPathInXYPlane(e),l=s.getAttributeStreamRef(0),u=2*n;let f=2*r;if(o&&(f-=2),f-u<6)return!0;const y=l.readPoint2D(u),_=l.readPoint2D(u+2),x=l.readPoint2D(u+4);if(!cg(Y.orientationRobust(_,x,y)))return!1;const S=_.clone(),P=new Y;for(let A=u+6;A<f;A+=2)if(P.assign(_),_.assign(x),l.queryPoint2D(A,x),!cg(Y.orientationRobust(_,x,y))||!cg(Y.orientationRobust(S,x,y))||!cg(Y.orientationRobust(_,x,P)))return!1;return!0}class xot{constructor(e){this.m_handleP=-1,this.m_handleQ=-1,this.m_currentSupport=-1,this.m_area=0,this.m_bDone=!0,K(0),this.m_convexHull=e,this.m_function=this.done_}next(){return K(0),!1}get_vertex_handle_p(){return K(0),0}get_vertex_handle_q(){return K(0),0}get_current_support(){return K(0),0}getNext(e){return K(0),0}getPrev(e){return K(0),0}intialize_(){return K(0),!1}increment_(){return K(0),!1}increment_q_(){return K(0),!1}increment_p_(){return K(0),!1}parallel_edge_with_q_support_(){return K(0),!1}parallel_edge_with_p_support_(){return K(0),!1}done_(){return K(0),!1}}class wot{nullGetXY(e){return bt("m_getXY is null"),{}}nullDeleteNode(e){bt("m_deleteNode is null")}constructor(e){return this.m_treeHull=new jt,this.m_shape=null,this.m_stream=null,this.m_points=null,this.m_geometryHandle=-1,this.m_pathHandle=-1,this.m_getXY=this.nullGetXY,this.m_deleteNode=this.nullDeleteNode,e?e.stream?(this.m_treeHull.setCapacity(Math.min(20,e.n)),this.m_stream=e.stream,this.m_getXY=this.getXYStream,this.m_deleteNode=this.deleteNodeStream,this.m_points=null,this.m_geometryHandle=ae,void(this.m_pathHandle=ae)):e.points?(this.m_treeHull.setCapacity(Math.min(20,e.n)),this.m_points=e.points,this.m_getXY=this.getXYPoints,this.m_deleteNode=this.deleteNodePoints,this.m_stream=null,this.m_geometryHandle=ae,void(this.m_pathHandle=ae)):void K(0):(this.m_treeHull.setCapacity(20),this.m_shape=new Bs,this.m_geometryHandle=this.m_shape.createGeometry(me.enumMultiPoint),this.m_pathHandle=this.m_shape.insertPath(this.m_geometryHandle,ae),this.m_getXY=this.getXYShape,this.m_deleteNode=this.deleteNodeShape,this.m_stream=null,void(this.m_points=null))}getXYShape(e){return this.m_shape.getXY(e)}getXYStream(e){return this.m_stream.readPoint2D(e<<1)}getXYPoints(e){return K(0),new Y}deleteNodeShape(e){const i=this.m_treeHull.getElement(e);this.m_treeHull.deleteNode(e),this.m_shape.removeVertex(i,!1)}deleteNodeStream(e){this.m_treeHull.deleteNode(e)}deleteNodePoints(e){K(0)}addGeometry(e){if(e.isEmpty())return;const i=e.getGeometryType();if(i===me.enumGeometryCollection){const s=e;for(let n=0,r=s.getGeometryCount();n<r;n++)this.addGeometry(s.getGeometry(n))}else tl(i)?this.addMultiVertexGeometry(e):Dn(i)?this.addSegment(e):i===me.enumEnvelope?this.addEnvelope(e):i===me.enumPoint?this.addPoint(e):Je("Convex_hull: geometry not supported")}getBoundingGeometry(){const e=new Ut,i=this.m_treeHull.getFirst(),s=new Wt({vd:this.m_shape.getVertexDescription()});if(this.m_treeHull.size()===0)return s;s.reserve(this.m_treeHull.size()),this.m_shape.queryPoint(this.m_treeHull.getElement(i),e),s.startPathPoint(e);for(let n=this.m_treeHull.getNext(i);n!==-1;n=this.m_treeHull.getNext(n))this.m_shape.queryPoint(this.m_treeHull.getElement(n),e),s.lineToPoint(e);return s}getAntipodalPairsIterator(){return K(0),new xot(this)}getXY(e){return K(0),new Y}getXYWithIndex(e){return K(0),new Y}getFirst(){return K(0),0}getLast(){return K(0),0}getNext(e){return K(0),0}getPrev(e){return K(0),0}getVertexIndex(e){return K(0),0}getPointCount(){return K(0),0}static constructOrientedMinimumBoundingBox(e,i,s,n,r){K(0)}addMultiVertexGeometry(e){const i=new Ut,s=e.getImpl(),n=new Y;for(let r=0;r<e.getPointCount();r++){s.queryXY(r,n);const o=this.addPoint2D(n);if(o!==-1){e.getPointByVal(r,i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(o,l)}}}addEnvelope(e){const i=new Ut;for(let s=0;s<4;s++){const n=new Y;e.queryCorner(s,n);const r=this.addPoint2D(n);if(r!==-1){e.queryCornerByVal(s,i);const o=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(r,o)}}}addSegment(e){const i=new Ut,s=e.getStartXY(),n=this.addPoint2D(s);if(n!==-1){e.queryStart(i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(n,l)}const r=e.getEndXY(),o=this.addPoint2D(r);if(o!==-1){e.queryEnd(i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(o,l)}}addPoint(e){const i=e.getXY(),s=this.addPoint2D(i);if(s!==-1){const n=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(s,n)}}addPoint2D(e){let i=-1;if(this.m_treeHull.size()===0)return i=this.m_treeHull.addElement(-4),i;if(this.m_treeHull.size()===1){const s=this.m_treeHull.getElement(this.m_treeHull.getFirst()),n=this.m_shape.getXY(s);return e.equals(n)||(i=this.m_treeHull.addBiggestElement(-5)),i}return i=this.treeHull(e),i}treeHull(e){let i=-1;do{const s=this.m_treeHull.getFirst(),n=this.m_treeHull.getLast(),r=this.m_treeHull.getElement(s),o=this.m_treeHull.getElement(n),l=this.m_getXY(r),u=this.m_getXY(o),f=Y.orientationRobust(u,e,l);if(cg(f)){i=this.m_treeHull.addBiggestElement(-1);const y=this.treeHullWalkBackward(e,n,s);y!==s&&this.treeHullWalkForward(e,s,this.m_treeHull.getPrev(y));break}if(Dse(f)){let y=this.m_treeHull.getRoot(),_=this.m_treeHull.getFirst(),x=this.m_treeHull.getLast(),S=-1,P=-1,A=-1;for(;_!==this.m_treeHull.getPrev(x);){P=this.m_treeHull.getElement(y);const F=this.m_getXY(P);Dse(Y.orientationRobust(F,e,l))?(x=y,y=this.m_treeHull.getLeft(y)):(_=y,y=this.m_treeHull.getRight(y))}y=x,S=_,P=this.m_treeHull.getElement(y),A=this.m_treeHull.getElement(S);const k=this.m_getXY(P),$=this.m_getXY(A);if(S!==s&&!cg(Y.orientationRobust($,e,k)))break;i=this.m_treeHull.addElementAtPosition(S,y,-2,!0,!1),this.treeHullWalkForward(e,y,n),this.treeHullWalkBackward(e,S,s);break}{const y=Pot(e,u,l);if(y===-1){const _=this.m_treeHull.getPrev(n);this.m_treeHull.deleteNode(n),i=this.m_treeHull.addBiggestElement(-3),this.treeHullWalkBackward(e,_,s)}else if(y===1){const _=this.m_treeHull.getNext(s);this.m_treeHull.deleteNode(s),i=this.m_treeHull.addElementAtPosition(-1,_,-3,!0,!1),this.treeHullWalkForward(e,_,n)}break}}while(!1);return i}treeHullWalkForward(e,i,s){if(i===s)return s;let n=i,r=this.m_treeHull.getElement(n),o=this.m_treeHull.getNext(n);const l=this.m_getXY(r);for(;n!==s&&this.m_treeHull.size()>2;){const u=this.m_treeHull.getElement(o),f=this.m_getXY(u);if(cg(Y.orientationRobust(f,e,l)))break;const y=n;n=o,r=u,l.assign(f),o=this.m_treeHull.getNext(n),this.m_deleteNode(y)}return n}treeHullWalkBackward(e,i,s){if(i===s)return s;let n=i,r=this.m_treeHull.getElement(n),o=this.m_treeHull.getPrev(n);const l=this.m_getXY(r);for(;n!==s&&this.m_treeHull.size()>2;){const u=this.m_treeHull.getElement(o),f=this.m_getXY(u);if(cg(Y.orientationRobust(l,e,f)))break;const y=n;n=o,r=u,l.assign(f),o=this.m_treeHull.getPrev(n),this.m_deleteNode(y)}return n}}function Sot(t,e,i){const s=e.sub(t),n=i.sub(e);if(s.x===0)return n.x>0?-1:0;if(s.y===0)return n.y>0?1:n.y<0?-1:0;const r=s.crossProduct(n),o=4*Number.EPSILON*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x));return r>o?1:r<-o?-1:Y.orientationRobust(t,e,i)}function Eot(t,e,i){const s=e.sub(t),n=i.sub(e);if(s.x===0)return n.x<0?-1:0;if(s.y===0)return n.y>0?-1:n.y<0?1:0;const r=s.crossProduct(n),o=4*Number.EPSILON*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x));return r>o?1:r<-o?-1:Y.orientationRobust(t,e,i)}function Cot(t,e,i){const s=new Ns(0);for(let l=0;l<e;l++)s.add(l);const n={userSort(l,u,f){f.sort(l,u,(y,_)=>t[y].compareX(t[_]))},getValue:l=>t[l].x};ad.sortEx(s,0,e,n);let r=0;e:for(let l=0;l<e;++l){const u=s.read(l);for(;r>=2;){const f=i[r-2],y=i[r-1];if(t[y].equals(t[u])){s.write(l,-1);continue e}if(!(Sot(t[f],t[y],t[u])>=0)){y===s.read(l-1)&&s.write(l-1,-1);break}r--}i[r++]=u,r===2&&t[u].equals(t[i[0]])&&(s.write(1,-1),r--)}const o=r+1;e:for(let l=e-2;l>=0;--l){const u=s.read(l);if(!(u<0)){for(;r>=o;){const f=i[r-2],y=i[r-1];if(t[y].equals(t[u]))continue e;if(!(Eot(t[f],t[y],t[u])>=0))break;r--}if(l!==0){const f=i[r-1];i[r++]=u,t[u].equals(t[f])&&r--}}}return r>1&&t[i[0]].equals(t[i[r-1]])&&r--,r}function cg(t){return t<0}function Dse(t){return t>0}function Pot(t,e,i){let s=-1;e.y===i.y?s=0:e.x===i.x?s=1:s=Math.abs(e.x-i.x)>=Math.abs(e.y-i.y)?0:1;let n=-1;return n=e[s]<i[s]?t[s]<e[s]?-1:i[s]<t[s]?1:0:e[s]<t[s]?-1:t[s]<i[s]?1:0,n}function g5(t,e,i,s,n){return y7(t,!1,e,i,s,n)}function y7(t,e,i,s,n,r){const o=i.getGeometryType(),l=s.getGeometryType(),u=Math.max(n,Dl(i,s));if(o===me.enumLine&&l===me.enumLine)return ZJe(i,s,u,r);let f=i,y=s,_=i.getStartXY(),x=i.getEndXY();if(_.compare(x)>0&&(f=i.clone().reverse()),_=s.getStartXY(),x=s.getEndXY(),_.compare(x)>0&&(y=s.clone().reverse()),e){if(i.equals(s))return 2;if(jJe(i,s,u))return 4}switch(o){case me.enumLine:switch(l){case me.enumEllipticArc:return Pse(t,y,f,u,r);case me.enumBezier:return nie(t,y,f,u,r);case me.enumRationalBezier2:return Kte(t,y,f,u,r);case me.enumBezier2:return Lte();default:bt("")}break;case me.enumEllipticArc:switch(l){case me.enumLine:return Pse(t,f,y,u,r);case me.enumEllipticArc:return got(t,f,y,u,r);case me.enumBezier:return rie(t,y,f,u,r);case me.enumRationalBezier2:return Jte();case me.enumBezier2:return Fte();default:bt("")}break;case me.enumBezier:switch(l){case me.enumLine:return nie(t,f,y,u,r);case me.enumEllipticArc:return rie(t,f,y,u,r);case me.enumBezier:return Met(t,f,y,u,r);case me.enumRationalBezier2:return oie(t,f,y,u,r);case me.enumBezier2:return aie();default:bt("")}break;case me.enumRationalBezier2:switch(l){case me.enumLine:return Kte(t,f,y,u,r);case me.enumEllipticArc:return Jte();case me.enumBezier:return oie(t,y,f,u,r);case me.enumRationalBezier2:return aet(t,f,y,u,r);case me.enumBezier2:return Qte();default:bt("")}break;case me.enumBezier2:switch(l){case me.enumLine:return Lte();case me.enumEllipticArc:return Fte();case me.enumBezier:return aie();case me.enumRationalBezier2:return Qte();case me.enumBezier2:return AQe();default:bt("")}break;default:bt("")}}function xm(t,e,i=!0){if(!i&&!kye(t,e))return 0;const s=t.isLine()&&e.isLine();if(t.getStartXY().equals(e.getStartXY())&&t.getEndXY().equals(e.getEndXY())){if(s)return 1;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===me.enumBezier){const o=t,l=e;return o.getControlPoint1().equals(l.getControlPoint1())&&o.getControlPoint2().equals(l.getControlPoint2())?1:0}if(r===me.enumEllipticArc)return Mse()?1:0;if(r===me.enumRationalBezier2){const o=t,l=e;if(o.getControlPoint1().equals(l.getControlPoint1())&&o.getStandardFormWeight()===l.getStandardFormWeight())return 1}else if(r===me.enumBezier2){const o=e;if(t.getControlPoint1().equals(o.getControlPoint1()))return 1}return 0}if(t.getStartXY().equals(e.getEndXY())&&t.getEndXY().equals(e.getStartXY())){if(s)return-1;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===me.enumBezier){const o=t,l=e;return o.getControlPoint1().equals(l.getControlPoint2())&&o.getControlPoint2().equals(l.getControlPoint1())?-1:0}if(r===me.enumEllipticArc)return Mse(),-1;if(r===me.enumRationalBezier2){const o=t,l=e;if(o.getControlPoint1().equals(l.getControlPoint1())&&o.getStandardFormWeight()===l.getStandardFormWeight())return-1}else if(r===me.enumBezier2){const o=e;if(t.getControlPoint1().equals(o.getControlPoint1()))return-1}return 0}return 0}function kye(t,e){const i=t.getGeometryType();return i===e.getGeometryType()&&(i!==me.enumEllipticArc||t.projectionBehavior()===e.projectionBehavior())}function Gv(t,e,i,s,n,r,o){!n&&r&&Je("");const l=e.getGeometryType(),u=i.getGeometryType(),f=Math.max(o,Dl(e,i));if(s&&(s.length=0),n&&(n.length=0),r&&(r.length=0),l===me.enumLine&&u===me.enumLine)return r7(e,i,s,n,r,f,!1,!1);let y=e,_=i,x=e.getStartXY(),S=e.getEndXY(),P=!1,A=!1;x.compare(S)>0&&(y=e.clone(!0).reverse(),P=!0),x=i.getStartXY(),S=i.getEndXY(),x.compare(S)>0&&(_=i.clone(!0).reverse(),A=!0);let k=0;switch(l){case me.enumLine:switch(u){case me.enumEllipticArc:k=iC(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumBezier:k=UE(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=H2(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumBezier2:k=G6(t,_,y,s,r,n,f,!1,!1,!0);break;default:bt("")}break;case me.enumEllipticArc:switch(u){case me.enumLine:k=iC(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=Aye(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier:k=Tz(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=eie();break;case me.enumBezier2:k=zte(t,_,y,s,r,n,f,!1,!1,!0);break;default:bt("")}break;case me.enumRationalBezier2:switch(u){case me.enumLine:k=H2(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=eie();break;case me.enumBezier:k=Iz(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=VE(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier2:k=tie(t,y,_,s,n,r,f,!1,!1,!1);break;default:bt("")}break;case me.enumBezier2:switch(u){case me.enumLine:k=G6(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=zte(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier:k=lie(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=tie(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumBezier2:k=n1e(t,y,_,s,n,r,f,!1,!1,!1);break;default:bt("")}break;case me.enumBezier:switch(u){case me.enumLine:k=UE(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=Tz(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier:k=Dj(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumRationalBezier2:k=Iz(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier2:k=lie(t,y,_,s,n,r,f,!1,!1,!1);break;default:bt("")}break;default:bt("")}if(P){if(n){for(let $=0;$<k;$++)n[$]=1-n[$];n.reverse()}s&&s.reverse(),r&&r.reverse()}if(A&&r)for(let $=0;$<k;$++)r[$]=1-r[$];return k}function lT(t,e,i){return e===i?0:(e>i&&(i=St(e,e=i)),t.cut(e,i,!0).calculateUpperLength2D())}function Tot(t,e,i,s,n){const r=[],o=[],l=[];for(let f=0,y=n;f<y;f++)r.push(t.calculateSubLengthFromStart(i[f])),o.push(e.calculateSubLengthFromStart(s[f])),Ms(i[f],0,1)&&Ms(s[f],0,1)&&t.getCoord2D(i[f]).equals(e.getCoord2D(s[f]))&&l.push(f);if(l.length===0||l.length===n)return;l.sort((f,y)=>i[f]<i[y]?-1:i[f]>i[y]?1:s[f]<s[y]?-1:s[f]>s[y]?1:0);let u=-1;for(const f of l){if(u>=0&&i[f]===i[u]&&i[f]===i[u]){u=f;continue}u=f;const y=[];y.length=n;for(let _=0;_<y.length;++_)y[_]=_;y.sort((_,x)=>{const S=r[f],P=o[f],A=r[_]-S,k=o[_]-P,$=A*A+k*k,F=r[x]-S,G=o[x]-P,V=F*F+G*G;return $<V?-1:$>V?1:0});for(let _=0;_<n;_++){const x=y[_];if(x===f||i[x]===i[f]&&s[x]===s[f]||Ms(i[x],0,1)&&Ms(s[x],0,1))continue;const S=(W,J,re,se)=>{const oe=new Ht,pe=new Be;pe.setWithEps(1);const ce=new Be;ce.set(J,pe.eps()),t.queryCoord2DE(ce,oe);const ue=new Ht;t.queryCoord2DE(new Be(W),ue);let ne=!1;return oe.eq(ue)&&(ce.set(se,pe.eps()),e.queryCoord2DE(ce,oe),e.queryCoord2DE(new Be(re),ue),ne=oe.eq(ue)),!ne},P=Y.getNAN();t.queryCoord2D(i[x],P);const A=Y.getNAN();if(e.queryCoord2D(s[x],A),Y.distance(P,A)===0&&S(i[f],i[x],s[f],s[x]))break;const k=new Ze(s[x],s[f]);k.normalizeNoNAN();const $=new Ze(i[x],i[f]);$.normalizeNoNAN();let F=-1,G=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,B=i[x];P.assign(t.getCoord2D(B));for(let W=0;W<5;W++){const J=e.getClosestCoordinateOnInterval(P,k,-1);A.assign(e.getCoord2D(J));const re=Y.distance(P,A);if(B=t.getClosestCoordinateOnInterval(A,$,-1),B===i[f]&&J===s[f]){F=1;break}P.assign(t.getCoord2D(B));const se=Y.distance(A,P);if(!(se<V&&re<G)){F=0;break}if(se===0&&re===0){S(i[f],i[x],s[f],s[x])?(i[x]=B,s[x]=J,F=0):F=1;break}V=se,G=re}if(F===-1&&(F=Ms(i[x],0,1)||Ms(s[x],0,1)?0:1),F!==1)break;i[x]=i[f],s[x]=s[f]}}}function Wc(t,e,i,s,n,r,o,l,u,f,y,_,x){if(!r)return 0;const S=($,F)=>{for(let G=0;G<r;++G){let V=F[G];if(Ms(V,0,1)){V=hJe(V);continue}const B=$.getCoord2D(V);V<.5?B.equals($.getStartXY())&&lT($,0,V)<=rf($)&&(F[G]=0):B.equals($.getEndXY())&&lT($,V,1)<=rf($)&&(F[G]=1)}};S(e,s),S(i,n),Tot(e,i,s,n,r);const P=[];for(let $=0,F=r;$<F;$++)P.push($);const A=($,F)=>x?ste(n[$],s[$],n[F],s[F]):ste(s[$],n[$],s[F],n[F]);if(P.length>1){P.sort(A);const $=Math.max(rf(e),rf(i));let F=0;for(let G=1,V=P.length;G<V;G++){const B=s[P[F]],W=s[P[G]],J=n[P[F]],re=n[P[G]];if(B!==W||J!==re)if(!(lT(e,B,W)<=$&&lT(i,J,re)<=$)||Ms(B,0,1)&&Ms(J,0,1)||Ms(W,0,1)&&Ms(re,0,1))F++,P[F]=P[G];else{const se=Y.distance(e.getCoord2D(B),i.getCoord2D(J)),oe=Y.distance(e.getCoord2D(W),i.getCoord2D(re));if(se<=oe)continue;if(oe<se){P[F]=P[G];continue}}}if(P.length=F+1,P.length===1&&P[0]!==0&&(s[0]=s[P[0]],n[0]=n[P[0]],P[0]=0),P.length>2){const G=Ze.constructEmpty(),V=Ze.constructEmpty();G.setCoords(s[P[0]],s[P.at(-1)]),V.setCoords(n[P[0]],n[P.at(-1)]);let B=!0;for(let W=1,J=P.length-1;W<J;W++)if(!G.containsCoordinate(s[P[W]])||!V.containsCoordinate(n[P[W]])){B=!1;break}if(B){const W=[.5,.2,.7,.1,.3,.4,.6,.8,.9];for(let J=0;J<W.length;J++){let re=ji(G.vmin,G.vmax,W[J]);const se=e.getCoord2D(re);if(!i.isCloserThanDistance(se,V,f)){B=!1;break}re=ji(V.vmin,V.vmax,W[J]);const oe=i.getCoord2D(re);if(!e.isCloserThanDistance(oe,G,f)){B=!1;break}}}B&&(P[1]=P.at(-1),P.length=2)}}if(P.length===1&&t&&uS(e,i,s[0],n[0],f,1,[0],[0])&&(P.push(1),s[1]=0,n[1]=0,P.sort(A)),y&&P.length===1){let $=!0;for(let F=0,G=P.length;F<G;F++)if(!(Ms(s[P[F]],0,1)&&Ms(n[P[F]],0,1)&&Y.distance(e.getCoord2D(s[P[F]]),i.getCoord2D(n[P[F]]))===0)){$=!1;break}if($)return 0}let k=0;for(let $=0,F=P.length;$<F;$++){if(l&&l.push(s[P[$]]),u&&u.push(n[P[$]]),o){const G=Y.getNAN();e.queryCoord2D(s[P[$]],G),o.push(G)}k++}return k}function cT(t,e,i,s,n,r,o,l,u){if(Ms(i,0,1)&&Ms(s,0,1)&&Y.distance(t.getCoord2D(i),e.getCoord2D(s))===0){const y=new Ht,_=Number.EPSILON;if(t.queryDerivative(new Be(i,_),y),y.isTrueZero()){const k=i===1?-1e-12:1e-12;t.queryDerivative(new Be(i,_).add(k),y)}i===1&&y.negateThis();const x=new Ht;if(e.queryDerivative(new Be(s,_),x),x.isTrueZero()){const k=i===1?-1e-12:1e-12;e.queryDerivative(new Be(s,_).add(k),x)}s===1&&x.negateThis(),y.isZero()||y.normalize(),x.isZero()||x.normalize();const S=y.dotProduct(x),P=y.crossProduct(x);P.scaleError(3);const A=()=>{if(u)return .001;{const k=t.calculateUpperLength2D(),$=e.calculateUpperLength2D();return Math.min(.01*n/Math.min(k,$),1e-10)}};if(S.ge(Mx)&&(P.isZero()||Math.abs(P.value())<A()))return Lge(t,e,i,s,n,r,o,l)}return 0}function Nx(t,e,i,s,n){let r=-1,o=-1,l=-1,u=-1;{const f=[0,e],y=[e,0],_=[0,s],x=[s,0];for(let S=0;S<2&&r===-1;++S)for(let P=0;P<2;++P)if(t[f[S]].equals(i[_[P]])){r=f[S],o=y[S],l=_[P],u=x[P];break}}if(r===-1){const f=new jr;f.setFromPoints(t,e+1);const y=new jr;return y.setFromPoints(i,s+1),y.inflate(n),f.isIntersectingW(y)?-1:0}{const f=new Array(e+1),y=Ase(t,e+1,f);K(y>1);let _=0,x=0;for(let re=0;re<y;++re)r===f[re]&&(x=re,_++),o===f[re]&&_++;if(_!==2)return-1;const S=new Array(s+1),P=Ase(i,s+1,S);K(P>1),_=0;let A=0;for(let re=0;re<P;++re)l===S[re]&&(A=re,_++),u===S[re]&&_++;if(_!==2)return-1;const k=t[f[(x+y-1)%y]],$=t[f[(x+1)%y]],F=i[S[(A+P-1)%P]],G=i[S[(A+1)%P]],V=t[r],B=[k,$,F,G],W=[0,1,2,3];W.sort((re,se)=>Y.compareVectorsOrigin(V,B[re],B[se]));let J=W[0];for(let re=1;re<4;re++){if(W[re]!==(J+1)%4)return-1;J=W[re]}{const re=k.sub(V),se=G.sub(V),oe=se.dotProduct(re);if(oe>0){const pe=se.crossProduct(re),ce=Math.abs(Math.atan2(pe,oe)),ue=ce*re.length(),ne=ce*se.length();if(ue<=n||ne<=n)return-1}}{const re=$.sub(V),se=F.sub(V),oe=se.dotProduct(re);if(oe>0){const pe=se.crossProduct(re),ce=Math.abs(Math.atan2(pe,oe)),ue=ce*re.length(),ne=ce*se.length();if(ue<=n||ne<=n)return-1}}return 1}}var uT=_r;class si extends YJe{constructor(e){super(e||{XStart:0,YStart:0,XEnd:0,YEnd:0})}assignMove(e){return this!==e&&(this.m_description=e.m_description,e.m_description=null,this.m_attributes=e.m_attributes,e.m_attributes=null,this.m_XStart=e.m_XStart,e.m_XStart=Number.NaN,this.m_YStart=e.m_YStart,this.m_XEnd=e.m_XEnd,e.m_XEnd=Number.NaN,this.m_YEnd=e.m_YEnd),this}assignCopy(e){return this!==e&&e.copyTo(this),this}calculateLowerLength3D(){return K(0),0}calculateUpperLength3D(){return K(0),0}changeEndPoints3D(e,i){K(0)}getClosestCoordinate3D(e,i,s){return K(0),0}getBoundary(){return Zh(this)}transformAttribute(e,i,s,n,r){K(0)}getAttributeAsDbl(e,i,s){if(i===0)return s===0?SN(this,e):Ste(this,e);const n=uT.getInterpolation(i),r=this.getStartAttributeAsDbl(i,s),o=this.getEndAttributeAsDbl(i,s);return ZA(n,r,o,e,uT.getDefaultValue(i))}constructFromCoords(e,i,s,n){this.dropAllAttributes(),this.setStartXYCoords(e,i),this.setEndXYCoords(s,n)}construct(e,i){this.dropAllAttributes(),this.setStartXY(e),this.setEndXY(i)}construct3D(e,i){K(0)}constructFromPoints(e,i){K(0)}getGeometryType(){return si.type}queryEnvelope(e){if(e instanceof lr){e.setEmpty(),e.assignVertexDescription(this.m_description);const i=xe.constructEmpty();this.queryEnvelope(i),e.setEnvelope(i);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s);for(let o=0,l=uT.getComponentCount(r);s<l;s++){const u=this.queryInterval(r,o);e.setIntervalEnvelope(r,o,u)}}}else e instanceof xe?e.setCoords({xmin:this.m_XStart,ymin:this.m_YStart,xmax:this.m_XEnd,ymax:this.m_YEnd}):e instanceof il?(e.setEmpty(),e.mergeCoords(this.m_XStart,this.m_YStart,Rh(this,0,1,0)),e.mergeCoords(this.m_XEnd,this.m_YEnd,Rh(this,1,1,0))):K(0)}applyTransformation(e){K(e instanceof _i);const i=new Y;i.x=this.m_XStart,i.y=this.m_YStart,e.transformInPlace(i),this.m_XStart=i.x,this.m_YStart=i.y,i.x=this.m_XEnd,i.y=this.m_YEnd,e.transformInPlace(i),this.m_XEnd=i.x,this.m_YEnd=i.y}createInstance(){return K(0),this}calculateLength2D(){return Math.sqrt(hz(this))}calculateLength3D(e){return K(0),0}changeEndPoints2D(e,i){this.setStartXY(e),this.setEndXY(i),this.normalizeAfterEndpointChange()}queryCoord2D(e,i){return gl(this,e,i)}queryCoord3D(e,i){K(0)}getCoordZ(e){return K(0),0}queryCoord2DE(e,i){Fge(this,e,i)}getCoordX(e){return K(0),0}getCoordY(e){return K(0),0}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createLine();n&&r.assignVertexDescription(this.m_description);const o=Y.getNAN();if(gl(this,e,o),r.setStartXYCoords(o.x,o.y),gl(this,i,o),r.setEndXYCoords(o.x,o.y),!n)for(let l=1,u=this.m_description.getAttributeCount();l<u;l++){const f=this.m_description.getSemantics(l),y=uT.getComponentCount(f);for(let _=0;_<y;_++){const x=this.getAttributeAsDbl(e,f,_);r.setStartAttribute(f,_,x);const S=this.getAttributeAsDbl(i,f,_);r.setEndAttribute(f,_,S)}}}queryDerivative(e,i){XJe(this,e,i)}getClosestCoordinate(e,i){return Y.getClosestCoordinate(this.getStartXY(),this.getEndXY(),e,i)}getClosestCoordinateOnInterval(e,i,s=-1){const n=new Y;this.queryCoord2D(i.vmin,n);const r=new Y;this.queryCoord2D(i.vmax,r);const o=Y.getClosestCoordinate(n,r,e,!1);return d5.recalculateParentT(i.vmin,i.vmax,o)}intersectionOfYMonotonicWithAxisX(e,i){const s=this.m_YEnd-this.m_YStart;if(!s)return e===this.m_YEnd?i:Number.NaN;const n=(e-this.m_YStart)/s;let r=SN(this,n);return n===1&&(r=this.m_XEnd),r}isCurve(){return!1}isMonotoneQuickAndDirty(){return!0}isDegenerate(e){const i=this.m_XStart-this.m_XEnd,s=this.m_YStart-this.m_YEnd;return Math.sqrt(i*i+s*s)<=e}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){this.queryEnvelope(e)}clone(e){const i=new si;return this.copyTo(i),i}tToLength(e){return e*this.calculateLength2D()}lengthToT(e){const i=this.calculateLength2D();return i!==0?e/i:0}calculateWeightedAreaCentroid2D(e){return K(0),new Y(0,0)}calculateWeightedCentroid2D(){return this.getCoord2D(.5).mul(this.calculateLength2D())}queryAttributeAsDbl(e,i,s,n){K(0)}getTangent(e){const i=Y.getNAN();return i.setSub(this.getEndXY(),this.getStartXY()),i}getDerivative(e){return K(0),new Y(0,0)}getCurvature(e){return 0}isIntersectingPoint(e,i,s){return Lb(this,e,i,s)>=0}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}getYMonotonicParts(e,i){return K(0),0}getMonotonicParts(e,i){return 0}getMonotonicPartParams(e,i){return K(0),0}intersectionWithAxis2D(e,i,s,n){if(e){const r=this.m_YEnd-this.m_YStart;if(!r)return i===this.m_YEnd?-1:0;const o=(i-this.m_YStart)/r;return o<0||o>1?0:(s&&(s[0]=SN(this,o)),n&&(n[0]=o),1)}{const r=this.m_XEnd-this.m_XStart;if(!r)return i===this.m_XEnd?-1:0;const o=(i-this.m_XStart)/r;return o<0||o>1?0:(s&&(s[0]=Ste(this,o)),n&&(n[0]=o),1)}}calculateUpperLength2D(){return this.calculateLength2D()}calculateLowerLength2D(){return this.calculateLength2D()}normalizeAfterEndpointChange(){return!1}queryLooseEnvelopeOnInterval(e,i){if(i instanceof xe){let s=un(e.vmin,0,1);const n=new Y;return this.queryCoord2D(s,n),i.setCoords({pt:n}),s=un(e.vmax,0,1),this.queryCoord2D(s,n),void i.mergeNe(n)}K(0)}orientBottomUp(){zge(this)}isLine(){return!0}isDegenerateToLineHelper(e){return K(0),!1}copyIgnoreAttributes(e){K(0)}calculateArea2DHelper(){return K(0),0}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)}queryEnvelopeW(e,i){i.setCoords(this.getCoord2D(e.vmin)),i.mergeNe(this.getCoord2D(e.vmax))}setSegmentFromCoords(e,i){K(0)}writeInBufferStream(e,i){return K(0),0}readFromBufferStream(e,i){K(0)}snapControlPoints(e){return!1}needsSnapControlPoints(e){return!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return!1}setCoordsForIntersector(e,i,s){WJe(this,e,i)}static isIntersectingLineLine(e,i,s,n){return K(0),0}static isIntersectingLineLine_(e,i,s,n){return K(0),0}copyToImpl(e){}reverseImpl(){}equalsImpl(e){return!0}equalsImplTol(e,i){return!0}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){}endPointModified(){}clearEndPointModified(){}intersect(e,i,s,n,r){return Gv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){i.length<1&&Mi("");const n=Lb(this,e,s,!1);return n>=0?(i&&(i[0]=n),1):0}isIntersecting(e,i,s){return g5(!1,this,e,i,s)!==0}intersect_(e,i,s,n){return K(0),0}}si.type=me.enumLine;class Qt{constructor(e){this.m_seg=null,this.m_curves=null,this.m_lineBuffer=new si,this.m_mask=0,this.m_active=0,e!==void 0&&(e.copy?e.copy.copyTo(this,!1):e.move?this.assignMove(e.move):e.segment?this.copyFrom(e.segment,!!e.bIgnoreAttributes):K(0))}assignCopy(e){return e instanceof Qt?this!==e&&e.copyTo(this,!1):this.copyFrom(e,!1),this}assignMove(e){if(e instanceof Qt){if(this===e)return this;this.reset(),1&e.m_mask&&(this.m_lineBuffer=e.m_lineBuffer,e.m_lineBuffer=null,this.m_mask=1),this.m_curves=e.m_curves,this.m_mask=e.m_mask,this.m_active=e.m_active,e.reset(),this.m_seg=this.activeSegment(),e.m_seg=null}else{if(this.m_seg===e)return this;this.create(e.getGeometryType()),this.m_seg.swap(e)}return this}activeSegment(){switch(this.m_active){case 0:return null;case 1:return this.line();case 2:return this.arc();case 4:return this.bezier3();case 8:return this.bezier2();case 16:return this.rbezier2();default:bt("")}}get(){return this.m_seg}reset(){1&this.m_mask&&(this.m_lineBuffer=null),this.m_mask>1&&(this.m_curves=null),this.m_mask=0,this.m_active=0}empty(){return this.m_seg===null}copyTo(e,i){this!==e&&(this.empty()?e.m_seg=null:e.copyFrom(this.m_seg,i))}copyToWithZ(e,i){K(0)}createImpl(e){switch(e){case me.enumLine:1&this.m_mask||(this.m_lineBuffer=new si,this.m_mask|=1,this.m_active=1);break;case me.enumEllipticArc:2&this.m_mask||(this.m_curves=new Vc,this.m_mask=1&this.m_mask|2,this.m_active=2);break;case me.enumBezier:4&this.m_mask||(this.m_curves=new Oc,this.m_mask=1&this.m_mask|4,this.m_active=4);break;case me.enumBezier2:8&this.m_mask||(this.m_curves=new am,this.m_mask=1&this.m_mask|8,this.m_active=8);break;case me.enumRationalBezier2:16&this.m_mask||(this.m_curves=new ba,this.m_mask=1&this.m_mask|16,this.m_active=16);break;default:Je("")}}create(e){e===me.enumLine?this.createLine():e===me.enumEllipticArc?this.createEllipticArc():e===me.enumBezier?this.createCubicBezier():e===me.enumRationalBezier2?this.createQuadraticRationalBezier():e===me.enumBezier2?this.createQuadraticBezier():Je("Segment_buffer.create")}copyFrom(e,i){this.m_seg!==e&&(this.create(e.getGeometryType()),i?e.copyIgnoreAttributes(this.m_seg):e.copyTo(this.m_seg))}copyFromWithZ(e,i){K(0)}line(){return this.m_lineBuffer}arc(){return this.m_curves}bezier3(){return this.m_curves}bezier2(){return this.m_curves}rbezier2(){return this.m_curves}createLine(){return this.createImpl(me.enumLine),this.m_seg=this.line(),this.line()}createEllipticArc(){return this.createImpl(me.enumEllipticArc),this.m_seg=this.arc(),this.arc()}createCubicBezier(){return this.createImpl(me.enumBezier),this.m_seg=this.bezier3(),this.bezier3()}createQuadraticRationalBezier(){return this.createImpl(me.enumRationalBezier2),this.m_seg=this.rbezier2(),this.rbezier2()}createQuadraticBezier(){return this.createImpl(me.enumBezier2),this.m_seg=this.bezier2(),this.bezier2()}releaseSegment(){if(this.m_seg=null,this.m_active===0&&bt("releaseSegment"),1&this.m_active){const i=this.line();return this.m_mask-=1,this.m_active=0,this.m_lineBuffer=null,i}let e;return 2&this.m_active?e=this.arc():4&this.m_active?e=this.bezier3():8&this.m_active?e=this.bezier2():16&this.m_active?e=this.rbezier2():bt("releaseSegment"),this.m_mask-=this.m_active,this.m_active=0,this.m_curves=null,e}equals(e){return e instanceof Qt?this===e||(this.empty()?e.empty():!e.empty()&&this.get().equals(e.get())):(K(0),!1)}}const Iot=["0","1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z"];function Mot(t,e,i){const s=Vi(e,"R");let n=0,r=0;for(let o=0;o<e;o++){let l=t[n]>>r&31;if(r+=5,r>31){const f=37-r;l&=(1<<f)-1,r-=32,n++,l|=(t[n]&(1<<r)-1)<<f}const u=Iot[l];s[e-1-o]=u}return i>e?s.push(..."0".repeat(i-e)):i<e&&(s.length=i),s.join("")}function kse(t,e,i,s,n){K(s>>5<n.length);let r=e,o=i;for(let l=s;l>=0;l-=2){const u=31&l,f=.5*(o+r);t>=f?(n[l>>5]|=1<<u,r=f):o=f}}let Nse=new Set;const Gz=2147483645n,YI=9007199254740990n,XN="operation is not supported for unknown coordinate systems";var $se;function y5(){return{majorSemiAxis:0,e2:0,minorSemiAxis:0,flattening:0,isSphere(){return this.e2===0}}}function Aot(t,e,i){t.majorSemiAxis=e,t.minorSemiAxis=e*(1-i),t.e2=i*(2-i),t.flattening=i}function Dot(t){Vot(t)}function kot(){return!1}function Nye(){return!!sC}function jz(t,e,i){return K(Nye()),_7(t,0,null,!1)}function $ye(t,e){K(Nye());const i=new qu;let s;return s=Wj(t),i.m_unit=s.isPCS?new tC(s.metersOrRadiansPerUnit):new XE(s.metersOrRadiansPerUnit),v7(i.m_precisionDescriptor,s,null,1),i.m_bDefaultDescriptor=!0,i.m_userWKT=t,i.calculateHashCode(),i.initDbgName(),i}function Oye(t,e,i,s,n=!0){let r=null;return e&&(r=Zrt(e,n)),Not(t,r,i,s,n)}function Not(t,e,i,s,n){t||Je("!PE_coord_sys");const r=new qu;let o;return o=n?Yrt(t):new jj(t,!1),v7(r.m_precisionDescriptor,o,e,s),r.m_bDefaultDescriptor=!0,r.setHorzProj_(o),r.m_vertcs=e,r.m_userWKID=o.getLatestID(),r.calculateHashCode(),r.initDbgName(),r}function $ot(t,e,i=!1){t.getCoordinateSystemType()===3&&Je("image spatial reference cannot be altered");const s=new qu,n=t;return s.m_peCoordSysVal=n.m_peCoordSysVal,s.m_vertcs=n.m_vertcs,s.m_unit=n.m_unit,s.m_precisionDescriptor.assign(e),s.m_localZToXYFactor=n.m_localZToXYFactor,(Number.isNaN(s.m_precisionDescriptor.m_falseX)||Number.isNaN(s.m_precisionDescriptor.m_falseY))&&(s.m_precisionDescriptor.m_falseX=n.m_precisionDescriptor.m_falseX,s.m_precisionDescriptor.m_falseY=n.m_precisionDescriptor.m_falseY),s.m_precisionDescriptor.snapPrecision(),s.m_precisionDescriptor.fixTolerance(),s.m_userWKID=n.m_userWKID,s.m_precisionDescriptor.equals(n.m_precisionDescriptor)?s.m_bDefaultDescriptor=n.m_bDefaultDescriptor:s.m_bDefaultDescriptor=!1,i&&(s.m_bDefaultDescriptor=!0),s.calculateHashCode(),s.initDbgName(),s}function WN(t){const e=t.getCoordinateSystemType();return e===1?t:(e===3&&K(0),t.getGCS())}let ZN;function Oot(){return ZN||(ZN=(()=>{const t=Math.trunc(Math.random()*So()),e=Date.now();return`|abba_000|${t.toString(16)}|${e.toString(16)}|`})()),ZN}(function(t){t[t.utmDefault=0]="utmDefault",t[t.utmNorthSouth=1]="utmNorthSouth"})($se||($se={}));let KN,JN,QN;function Rot(t){return t.startsWith(Oot())}class qu{destroy(){Xrt(this.m_peCoordSysVal),this.getCoordinateSystemType()===1||this.getCoordinateSystemType()===2?this.getPECoordSys().destroy():bt("SpatialReference.destroy")}constructor(){this.m_vertcs=null,this.m_peCoordSysVal=null,this.m_userWKID=0,this.m_userWKT=null,this.m_geogSpatialReference=null,this.m_srToGcs=null,this.m_gcsToSr=null,this.m_defaultPrecisionSR=null,this.m_localZToXYFactor=-1,this.m_precisionDescriptor=new jl,this.m_hashCode=0,this.m_bDefaultDescriptor=!1,Xj(this.m_precisionDescriptor),Nse&&Nse.add(new WeakRef(this))}attachToPe(){(this.m_userWKID>0?jz(this.m_userWKID):$ye(this.m_userWKT)).copyTo(this,!1)}copyTo(e,i=!0){(i||e.m_bDefaultDescriptor)&&(e.m_bDefaultDescriptor=this.m_bDefaultDescriptor,e.m_precisionDescriptor.assign(this.m_precisionDescriptor)),e.m_defaultPrecisionSR=null,e.m_gcsToSr=this.m_gcsToSr,e.m_geogSpatialReference=this.m_geogSpatialReference,e.m_hashCode=this.m_hashCode,e.m_localZToXYFactor=this.m_localZToXYFactor,e.m_peCoordSysVal=this.m_peCoordSysVal,e.m_srToGcs=this.m_srToGcs,e.m_userWKID=this.m_userWKID,e.m_userWKT=this.m_userWKT,e.m_vertcs=this.m_vertcs,e.m_unit=this.m_unit}getHashCode(){return this.m_hashCode}getHashCodeHorizontal(){let e=0;return e=this.m_peCoordSysVal?this.m_peCoordSysVal.getHashCode():this.m_unit?this.m_unit.getHashCode():305419891,e}updateTransform(e){if(this.getCoordinateSystemType()===1)return GN(this,this,null);let i=e?this.m_srToGcs:this.m_gcsToSr;if(i)return i;const s=this.getGCS(),n=this;i=e?GN(n,s,null):GN(s,n,null);const r=i;return(e?this.m_srToGcs:this.m_gcsToSr)||(e?this.m_srToGcs=r:this.m_gcsToSr=r,i)}getHashCodeVertical(){return this.m_vertcs?this.m_vertcs.getHashCode():0}calculateHashCode(){let e=this.getHashCodeHorizontal();const i=this.getHashCodeVertical(),s=this.m_precisionDescriptor.getHashCode();e=Va(e,i),this.m_hashCode=Va(e,s)}initDbgName(){}setHorzProj_(e){this.m_peCoordSysVal=e,this.m_unit=this.m_peCoordSysVal.getUnit()}getTolerance(e=0){return this.m_precisionDescriptor.getTolerance(e)}getResolution(e=0){return this.m_precisionDescriptor.getResolution(e)}getPECoordSys(){return this.m_peCoordSysVal?this.m_peCoordSysVal.m_peCoordSys:null}getPCSInfo(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSInfo()}getCentralMeridian(){return this.throwIfNotGCSOrPCS(),this.getCoordinateSystemType()===1?0:this.getPCSInfo().getCentralMeridian()}getCoordinateSystemType(){const e=this.getPECoordSys();if(e)switch(e.getType()){case zi.PE_TYPE_GEOGCS:return 1;case zi.PE_TYPE_PROJCS:return 2;default:return 0}else{if((this.m_userWKID>0||this.m_userWKT)&&this.m_unit instanceof tC)return 2;if(this.m_unit instanceof XE)return 1}return 0}getID(){return this.m_userWKID}getLatestID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getLatestID():this.m_userWKID}getOldID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getOldID():this.m_userWKID}getVerticalID(){return js("vcs not implemented"),0}getLatestVerticalID(){return this.m_vertcs?this.m_vertcs.getLatestID():0}getOldVerticalID(){return js("vcs not implemented"),0}getPEVerticalCoordSys(){return null}getPole(e){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPole(e)}getText(){const e=this.getPECoordSys();return e?mse(e):this.m_userWKT??""}getTextExtended(e){const i=this.getPECoordSys();return i?this.getPEVerticalCoordSys()?art(null,i,this.getPEVerticalCoordSys()):mse(i,e):this.m_userWKT??""}getText2(e=-1){const i=this.getPECoordSys();return i?lrt(i,e):this.m_userWKT??""}getUnit(){return this.m_unit}getUnitsPerMillimeter(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getUnitsPerMillimeter():this.m_unit instanceof tC?.001/this.m_unit.getUnitToBaseFactor():this.m_unit instanceof XE?.001/(Wj(this.m_userWKT??this.m_userWKID).semiMajor*this.m_unit.getUnitToBaseFactor()):(bn("sr object not in valid state"),0)}getAuthorityName(){return""}getVerticalUnit(){return js("vcs not implemented"),{}}getVCS(){return this.m_vertcs}hasVCS(){return!1}getGCSHorisonIsInclusive(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorisonIsInclusive()}getGCSHorizon(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorizon()}getGCS(){const e=this.getCoordinateSystemType();if(e===0)bn(XN);else{if(e===1)return this;e===3&&bn("image cs not supported")}if(this.m_geogSpatialReference)return this.m_geogSpatialReference;let i;if(this===Rye()||this===Lye())i=Fye();else{K(this.m_peCoordSysVal);const s=this.m_peCoordSysVal.m_peCoordSys.getGeogcs();s||bt(""),i=Oye(s,this.m_vertcs,null,this.m_precisionDescriptor.getPrecision(),this.m_peCoordSysVal.getCached())}return this.m_geogSpatialReference?i=this.m_geogSpatialReference:this.m_geogSpatialReference=i,i}getGCSSplitLines(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSSplitLines()}toGCS(e,i){if(e.length===0)return 0;e.length>i.length&&Je("coordsSrc.size() > coordsDst.size()");const s=this.getCoordinateSystemType();if(s===0&&bn(XN),s===1)return D6(i,e,e.length),e.length;K(this.m_peCoordSysVal);const n=this.getSRToGCSTransform();return new c2().transform(n,e,e.length,i)}toMilitaryGrid(e,i,s,n,r){return K(0),[]}fromMilitaryGrid(e,i){return[]}toUnitedStatesNationalGrid(e,i,s,n){return[]}fromUnitedStatesNationalGrid(e){return[]}toUniversalTransverseMercator(e,i,s){return[]}fromUniversalTransverseMercator(e,i){return[]}toWorldGeographicReference(e,i,s){return[]}fromWorldGeographicReference(e){return[]}toGlobalArea(e){return[]}fromGlobalArea(e,i){return[]}toDegreeMinuteSecond(e,i){return[]}fromDegreeMinuteSecond(e){return[]}toDegreeDecimalMinute(e,i){return[]}fromDegreeDecimalMinute(e){return[]}toDecimalDegree(e,i){return[]}fromDecimalDegree(e){return[]}fromGeohashToGCSEnvelope(e){return{}}toGeohash(e,i=8){const s=e.clone();s.scale(this.getGCS().getUnit().getID()===9102?1:this.getGCS().getUnit().getUnitToBaseFactor()/Math.PI*180),s.x<-180?(s.x=$g(s.x,360),s.x<-180&&(s.x+=360)):s.x>180&&(s.x=$g(s.x,360),s.x>180&&(s.x-=360)),s.y>90&&(s.y=90),s.y<-90&&(s.y=-90);const n=5*i,r=new Uint32Array(4);return kse(s.x,-180,180,n-1,r),kse(s.y,-90,90,n-2,r),Mot(r,i,i)}calculateContainingGeohash(e){return"1;"}calculateCoveringGeohashes(e,i){return[]}calculateGeohashNeighbours(e){return[]}calculateGeohashNeighbour(e,i,s){return""}isPannable(){const e=this.getCoordinateSystemType();return e!==0&&e!==3&&(K(this.m_peCoordSysVal),this.m_peCoordSysVal.isPannable())}getPannableExtent(){return this.isPannable()||Je("!is_pannable"),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtent()}getPannableExtentInGCS(){return this.isPannable()||Je("!is_pannable"),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtentGCS()}throwIfNotGCSOrPCS(){const e=this.getCoordinateSystemType();e!==1&&e!==2&&Je("Not a GCS or PCS")}getDomainXY(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getDomainXY()}getFullWorldExtent(){return this.throwIfNotGCSOrPCS(),this.isPannable()?this.getPannableExtent():this.getDomainXY()}queryPrecisionDescriptor(e){if(e.assign(this.m_precisionDescriptor),Number.isNaN(e.m_falseX))if(bn("projection engine is not loaded"),K(this.m_peCoordSysVal!==null),this.m_precisionDescriptor.m_precision!==2){const i=this.m_peCoordSysVal.getDomainXY();e.m_falseX=i.xmin,e.m_falseY=i.ymin}else e.m_falseX=-Number.MAX_VALUE,e.m_falseY=-Number.MAX_VALUE}queryPrecisionDescriptorWithoutFalseXY(e){e.assign(this.m_precisionDescriptor),e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}queryDefaultPrecisionDescriptorWithoutFalseXY(e){if(this.m_bDefaultDescriptor)e.assign(this.m_precisionDescriptor);else{const i=this.getCoordinateSystemType();i===0?Lot(e,this.m_unit,this.m_vertcs,this.m_precisionDescriptor.getPrecision()):i===3?js("image cs"):v7(e,this.m_peCoordSysVal,this.m_vertcs,this.m_precisionDescriptor.getPrecision())}e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}horizontalEqual(e){return Grt(this.m_peCoordSysVal,e.m_peCoordSysVal)}verticalEqual(e){return this.m_vertcs!==null==(e.m_vertcs!==null)&&(!this.m_vertcs||this.m_vertcs.equals(e.m_vertcs))}equals(e){const i=e;if(this===i)return!0;if(!this.horizontalEqual(i)||!this.verticalEqual(i)||!i.m_peCoordSysVal&&(K(!this.m_peCoordSysVal),this.m_unit!==null!=(i.m_unit!==null)||this.m_unit&&!this.m_unit.equals(i.m_unit)||this.m_localZToXYFactor!==i.m_localZToXYFactor))return!1;if(!this.m_bDefaultDescriptor||!i.m_bDefaultDescriptor){if(this.m_peCoordSysVal){if(!this.m_precisionDescriptor.equalsWithoutFalseXY(i.m_precisionDescriptor))return!1;K(i.m_peCoordSysVal);let s=this.m_precisionDescriptor.m_falseX,n=this.m_precisionDescriptor.m_falseY;if(Number.isNaN(s)){const l=this.m_peCoordSysVal.getDomainXY();s=l.xmin,n=l.ymin}let r=i.m_precisionDescriptor.m_falseX,o=i.m_precisionDescriptor.m_falseY;if(Number.isNaN(r)){const l=i.m_peCoordSysVal.getDomainXY();r=l.xmin,o=l.ymin}return s===r&&n===o}return this.m_precisionDescriptor.equals(i.m_precisionDescriptor)}return!0}equalForProjection(e,i){if(this===e)return!0;const s=this.getCoordinateSystemType(),n=e.getCoordinateSystemType();if(s===0||n===0)return s===0&&n===0?(!i||this.getZToXYFactor()===e.getZToXYFactor())&&(!this.getUnit()||!e.getUnit()||this.getUnit().equals(e.getUnit())):s!==3&&n!==3&&(this.getUnit()===null||e.getUnit()===null||(!i||this.getZToXYFactor()===e.getZToXYFactor())&&this.getUnit().equals(e.getUnit()));if(s!==n)return!1;if(s===3)return this.equals(e);if(jrt(this.m_peCoordSysVal,e.m_peCoordSysVal)){if(!i)return!0;if(this.m_vertcs!==null==(e.m_vertcs!==null))return!this.m_vertcs||this.m_vertcs.equalForProjection(e.m_vertcs)}return!1}equalHorizontal(e){return this.horizontalEqual(e)}equalVertical(e){return!1}equalVerticalVCS(e){return!1}convergenceAngle(e){return 0}getPeCoordsysCopy(){if(this.m_peCoordSysVal){const e=this.m_peCoordSysVal.m_peCoordSys;return e||bt("cannot clone coord sys"),e}return null}getPeVertcsCopy(){return 0}throwIfLocal(){this.getCoordinateSystemType()===0&&Je(XN)}getPrimeMeridian(){return this.throwIfLocal(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPrimeMeridian()}getSRToGCSTransform(){return this.updateTransform(!0)}getGCSToSRTransform(){return this.updateTransform(!1)}getOneMeter(){return 1e3*this.getUnitsPerMillimeter()}getOneMeterPCSUnit(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneMeterPCSUnit()}getDefaultPrecisionSR(){if(this.m_bDefaultDescriptor)return this;if(this.m_defaultPrecisionSR===null){const e=new jl;this.queryDefaultPrecisionDescriptorWithoutFalseXY(e),this.m_defaultPrecisionSR=$ot(this,e,!0)}return this.m_defaultPrecisionSR}getPCSHorizon(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSHorizon()}getHorzUnitFactor(){return this.m_unit?this.m_unit.getUnitToBaseFactor():1}querySpheroidData(e){this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal);const i=this.getGCS().getPECoordSys().getDatum().getSpheroid(),s=i.getFlattening();Aot(e,i.getAxis(),s)}getAreaOfUse(){this.getCoordinateSystemType()===0&&bn(""),K(this.m_peCoordSysVal);const e=this.m_peCoordSysVal.getAreaOfUse();return e===null?new yte:new yte({geom:e.clone(),sr:jz(4326)})}getZToXYFactor(){return 1}isCustomWkid(){return!1}getOneDegreeGCSUnit(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneDegreeGCSUnit()}getGcsUnitFactor(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGcsUnitFactor()}snapGeometry(e){if(e.isEmpty()||this.m_precisionDescriptor.getPrecision()===2)return!1;const i=e.getGeometryType();if(tl(i))return this.snapMultiVertex_(e);if(i===me.enumPoint)return this.snapPoint_(e);if(i===me.enumEnvelope)return this.snapEnvelope_(e);if(Dn(i))return this.snapSegment_(e);if(i===me.enumGeometryCollection){const s=e;let n=!1;for(let r=0,o=s.getGeometryCount();r<o;++r)n=this.snapGeometry(s.getGeometry(r))||n;return n}bt("what else?")}snapMultiVertex_(e){if(K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2),bi(e.getGeometryType())){const r=e;if(r.hasNonLinearSegments())return this.snapGeometryWithCurves_(r)}const i=e.getImpl(),s=i.getDescription();let n=!1;for(let r=0,o=s.getAttributeCount();r<o;r++){const l=s.getSemantics(r),u=i.getAttributeStreamRef(l);n=this.snapAttributes(l,u,0,i.getPointCount())||n}return n&&i.notifyModifiedFlags(2001),n}snapPoint_(e){return!1}snapEnvelope_(e){return!1}snapSegment_(e){K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2);const i=new jl;this.queryPrecisionDescriptor(i);const s=e.getStartXY(),n=new Y;n.x=q_(s.x,i.getFalseX(),i.getGridUnitsXY()),n.y=q_(s.y,i.getFalseY(),i.getGridUnitsXY());let r=!n.equals(s);const o=e.getEndXY(),l=new Y;l.x=q_(o.x,i.getFalseX(),i.getGridUnitsXY()),l.y=q_(o.y,i.getFalseY(),i.getGridUnitsXY()),r||(r=!l.equals(o)),r&&e.changeEndPoints2D(n,l);const u=(y,_,x)=>{let S=!1;{const P=e.getStartAttributeAsDbl(y,0),A=q_(P,_,x),k=!ga(A,P);S||(S=k),k&&e.setStartAttribute(y,0,A)}{const P=e.getEndAttributeAsDbl(y,0),A=q_(P,_,x),k=!ga(A,P);S||(S=k),k&&e.setEndAttribute(y,0,A)}return S};let f=r?1:0;return e.hasAttribute(1)&&(f|=u(1,i.getFalseZ(),i.getGridUnitsZ())?1:0),e.hasAttribute(2)&&(f|=u(2,i.getFalseM(),i.getGridUnitsM())?1:0),!!f}snapGeometryWithCurves_(e){K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2);const i=e.createInstance(),s=new Qt;let n=0;for(let r=0,o=e.getPathCount();r<o;++r){const l=e.getSegmentCountPath(r);if(l===0){if(i.addPath(e,r,!0),i.getPathSize(r)===1){const f=new Ut;i.getPointByVal(i.getPointCount()-1,f),n|=this.snapGeometry(f)?1:0,i.setPointByVal(i.getPointCount()-1,f)}continue}const u=e.isClosedPath(r);for(let f=0,y=u?l-1:l;f<y;++f)e.getSegmentFromPath(r,f,s,!1),n|=this.snapGeometry(s.get())?1:0,i.addSegment(s.get(),f===0);u&&(e.getSegmentFromPath(r,l-1,s,!1),n|=this.snapGeometry(s.get())?1:0,l===1?i.addPathFromClosedSegment(s.get(),!1):i.closeLastPathWithSegment(s.get()))}return n&&i.copyTo(e),!!n}snapAttributes(e,i,s,n){let r=!1;const o=new jl;if(this.queryPrecisionDescriptor(o),e===0){const l=i;for(let u=s;u<n;u++){const f=l.read(2*u),y=qu.s_SnapValue(f,o.getFalseX(),o.getGridUnitsXY()),_=l.read(2*u+1),x=qu.s_SnapValue(_,o.getFalseY(),o.getGridUnitsXY());r=r||y!==f||x!==_,r&&(l.write(2*u,y),l.write(2*u+1,x))}}else if(e===1){const l=i;for(let u=s;u<n;u++){const f=l.read(u),y=qu.s_SnapValue(f,o.getFalseZ(),o.getGridUnitsZ());r=r||!ga(y,f),r&&l.write(u,y)}}else if(e===2){const l=i;for(let u=s;u<n;u++){const f=l.read(u),y=qu.s_SnapValue(f,o.getFalseM(),o.getGridUnitsM());r=r||!ga(y,f),r&&l.write(u,y)}}return r}static s_SnapValue(e,i,s){return gv((e-i)*s)/s+i}}class jl{constructor(){const e=YI,i=1e-4,s=.001,n=i*Number(e)*.5;this.m_precision=1,this.m_falseX=-n,this.m_falseY=-n,this.m_unitsXY=Number(e)/(2*n),this.m_falseM=-1e5,this.m_unitsM=1/i,this.m_falseZ=-1e5,this.m_unitsZ=1/i,this.m_toleranceXY=s,this.m_toleranceM=s,this.m_toleranceZ=s}getHashCode(){let e=7777,i=7777;return i=Va(i,this.m_falseM),i=Va(i,this.m_unitsM),e=Va(e,this.m_unitsXY),i=Va(i,this.m_toleranceXY),e=Va(e,this.m_falseZ),i=Va(i,this.m_toleranceZ),e=Va(e,this.m_unitsZ),i=Va(i,this.m_toleranceM),e=Va(e,this.m_precision),Va(e,i)}clone(){const e=new jl;return e.m_falseX=this.m_falseX,e.m_falseY=this.m_falseY,e.m_unitsXY=this.m_unitsXY,e.m_falseZ=this.m_falseZ,e.m_unitsZ=this.m_unitsZ,e.m_falseM=this.m_falseM,e.m_unitsM=this.m_unitsM,e.m_toleranceXY=this.m_toleranceXY,e.m_toleranceZ=this.m_toleranceZ,e.m_toleranceM=this.m_toleranceM,e.m_precision=this.m_precision,e}assign(e){return this.m_falseX=e.m_falseX,this.m_falseY=e.m_falseY,this.m_unitsXY=e.m_unitsXY,this.m_falseZ=e.m_falseZ,this.m_unitsZ=e.m_unitsZ,this.m_falseM=e.m_falseM,this.m_unitsM=e.m_unitsM,this.m_toleranceXY=e.m_toleranceXY,this.m_toleranceZ=e.m_toleranceZ,this.m_toleranceM=e.m_toleranceM,this.m_precision=e.m_precision,this}initialize2D(e,i){}getTolerance(e){switch(e){case 0:return this.m_toleranceXY;case 1:return this.m_toleranceZ;case 2:return this.m_toleranceM;default:return 0}}getResolution(e){if(this.m_precision===2)return 0;switch(e){case 0:return 1/this.m_unitsXY;case 1:return 1/this.m_unitsZ;case 2:return 1/this.m_unitsM;default:return 0}}getFalseX(){return this.m_falseX}getFalseY(){return this.m_falseY}getFalseZ(){return this.m_falseZ}getFalseM(){return this.m_falseM}getGridUnitsXY(){return this.m_unitsXY}getGridUnitsZ(){return this.m_unitsZ}getGridUnitsM(){return this.m_unitsM}getPrecision(){return this.m_precision}static getLimit32(){return 2147483645}static getLimit64(){return 9007199254740990n}static getLimitFloat(){return 0}getXYGridRange(){const e=new xe;switch(this.m_precision){case 0:{const i=jl.getLimit32()/this.getGridUnitsXY();e.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+i,ymax:this.getFalseY()+i})}break;case 1:{const i=Number(jl.getLimit64())/this.getGridUnitsXY();e.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+i,ymax:this.getFalseY()+i})}break;case 2:e.setCoords({xmin:-Number.MAX_VALUE,ymin:-Number.MAX_VALUE,xmax:Number.MAX_VALUE,ymax:Number.MAX_VALUE});break;default:e.setEmpty(),bt("")}return e}getZGridRange(){const e=new Ze;switch(this.m_precision){case 0:{const i=jl.getLimit32()/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+i)}break;case 1:{const i=Number(jl.getLimit64())/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+i)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),bt("")}return e}getMGridRange(){const e=new Ze;switch(this.m_precision){case 0:{const i=jl.getLimit32()/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+i)}break;case 1:{const i=Number(jl.getLimit64())/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+i)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),bt("")}return e}setTolerance(e,i){switch(i<0&&Je("tol < 0"),Number.isFinite(i)||Je("tol is not finite"),e){case 0:this.m_toleranceXY=i;break;case 1:this.m_toleranceZ=i;break;case 2:this.m_toleranceM=i;break;default:Je("cannot set tolerance for this attribute")}}setGridParams(e,i,s){Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(s)||Je("grid params are not finite"),s<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseX=e,this.m_falseY=i,this.m_unitsXY=s}setZParams(e,i){Number.isFinite(e)&&Number.isFinite(i)||Je("grid params are not finite"),i<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseZ=e,this.m_unitsZ=i}setMParams(e,i){Number.isFinite(e)&&Number.isFinite(i)||Je("grid params are not finite"),i<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseM=e,this.m_unitsM=i}setPrecision(e){}equals(e){return this===e||ga(this.m_falseX,e.m_falseX)&&ga(this.m_falseY,e.m_falseY)&&this.equalsWithoutFalseXY(e)}snapPrecision(){if(this.m_precision===2)return;const e=(s,n,r,o)=>{if(!Number.isFinite(n)||!Number.isFinite(r))return r;if(r<1)return 1;if(!o)return r;const l=Number(s)/r;return Math.trunc((n+l-n)*r)>s&&(r=s/(n+l-n)),Math.max(1,r)},i=Number(this.m_precision===0?Gz:YI);this.m_unitsXY=e(i,this.m_falseX,this.m_unitsXY,!0),this.m_unitsXY=e(i,this.m_falseY,this.m_unitsXY,!0),this.m_unitsZ=e(i,this.m_falseZ,this.m_unitsZ,!1),this.m_unitsM=e(i,this.m_falseM,this.m_unitsM,!1)}verifyPrecision(){if(this.m_precision===2)return!0;const e=(s,n,r,o)=>{if(r<1||!Number.isFinite(n)||!Number.isFinite(r))return!1;if(!o)return!0;const l=Number(s)/r;return!(BigInt((n+l-n)*r)>s)},i=this.m_precision===0?Gz:YI;return!!e(i,this.m_falseX,this.m_unitsXY,!0)&&!!e(i,this.m_falseY,this.m_unitsXY,!0)&&!!e(i,this.m_falseZ,this.m_unitsZ,!1)&&!!e(i,this.m_falseM,this.m_unitsM,!1)}fixTolerance(){this.m_precision!==2&&(this.m_toleranceXY=Math.max(2/this.m_unitsXY,this.m_toleranceXY),this.m_toleranceZ=Math.max(2/this.m_unitsZ,this.m_toleranceZ),this.m_toleranceM=Math.max(2/this.m_unitsM,this.m_toleranceM),(Number.isNaN(this.m_falseX)||Number.isNaN(this.m_falseY))&&(this.m_falseX=this.m_falseY=Number.NaN))}equalsWithoutFalseXY(e){return this===e||this.m_unitsXY===e.m_unitsXY&&this.m_falseZ===e.m_falseZ&&this.m_unitsZ===e.m_unitsZ&&this.m_falseM===e.m_falseM&&this.m_unitsM===e.m_unitsM&&this.m_toleranceXY===e.m_toleranceXY&&this.m_toleranceZ===e.m_toleranceZ&&this.m_toleranceM===e.m_toleranceM&&this.m_precision===e.m_precision}setBestXyDomainFromEnvelope(e,i){}setBestZDomainFromZRange(e,i,s){}setBestMDomainFromMRange(e,i,s){}}function Rye(){return KN||(KN=_7(3857,0,null,!0)),KN}function Lye(){return JN||(JN=_7(102100,0,null,!0)),JN}function Fye(){return QN||(QN=_7(4326,0,null,!0)),QN}function Xj(t){t.m_falseX=0,t.m_falseY=0,t.m_unitsXY=1,t.m_falseZ=0,t.m_unitsZ=1,t.m_falseM=0,t.m_unitsM=1,t.m_toleranceXY=100*en(),t.m_toleranceZ=100*en(),t.m_toleranceM=100*en(),t.m_precision=2}function v7(t,e,i,s){const n=e instanceof jj;Xj(t),t.m_precision=s,t.m_falseX=Number.NaN,t.m_falseY=Number.NaN;const r=1e-4,o=.001,l=n?e.m_csType:e.isPCS?2:1;if(l===1){const y=(s===0?5555555555555555e-22:1e-9)*(n?e.getOneDegreeGCSUnit():Math.PI/e.metersOrRadiansPerUnit/180);t.m_unitsXY=1/y}else if(l===2){const y=(s===0?o:r)*(n?e.getOneMeterPCSUnit():1/e.metersOrRadiansPerUnit);t.m_unitsXY=1/y}else Je("unrecognized cs type");t.m_falseM=-1e5,t.m_unitsM=1/(s===0?o:r),t.m_unitsM=Math.max(1,t.m_unitsM),t.m_unitsXY=Math.max(1,t.m_unitsXY);let u=0,f=0;s!==0&&s!==1||(u=2/t.m_unitsXY,f=2/t.m_unitsM),t.m_toleranceXY=Math.max(u,n?e.getUnitsPerMillimeter():l===2?.001/e.metersOrRadiansPerUnit:.001/(e.semiMajor*e.metersOrRadiansPerUnit)),t.m_toleranceM=Math.max(o,f),zye(t,i)}function zye(t,e){if(t.m_falseZ=-1e5,e){const r=(t.m_precision===0?.001:1e-4)*e.getOneMeter();t.m_unitsZ=1/r}else t.m_unitsZ=1/(t.m_precision===0?.001:1e-4);t.m_unitsZ=Math.max(1,t.m_unitsZ);let n=0;t.m_precision!==0&&t.m_precision!==1||(n=2/t.m_unitsZ),t.m_toleranceZ=Math.max(e?e.getOneMeter()*.001:.001,n)}function Lot(t,e,i,s){Xj(t),t.m_precision=s;const n=s===0?Gz:YI,r=1e-4,o=.001;let l=1,u=1,f=.001;e&&(u=e.getUnitToBaseFactor()),e&&e.getUnitType()===1?(l=400*Math.PI/180,f=8983152841195215e-24*Math.PI/180/u):(l=(s===0?o:r)*Number(n)*.5,f=o/u),l/=u,t.m_falseX=-l,t.m_falseY=-l,t.m_unitsXY=Number(n)/(2*l),t.m_falseM=-1e5,t.m_unitsM=1/(s===0?o:r),t.m_unitsM=Math.max(1,t.m_unitsM),t.snapPrecision();let y=0,_=0;t.m_precision!==0&&t.m_precision!==1||(_=2/t.m_unitsM,y=2/t.m_unitsXY),t.m_toleranceXY=Math.max(y,f),t.m_toleranceM=Math.max(o,_),zye(t,i)}function _7(t,e,i,s){if(!s&&e===0){if(t===3857)return Rye();if(t===102100)return Lye();if(t===4326)return Fye()}const n=new qu;let r,o=null;return r=Wj(t),n.m_unit=r.isPCS?new tC(r.metersOrRadiansPerUnit):new XE(r.metersOrRadiansPerUnit),v7(n.m_precisionDescriptor,r,o,1),n.m_bDefaultDescriptor=!0,n.m_userWKID=t,n.calculateHashCode(),n.initDbgName(),n}function q_(t,e,i){return gv((t-e)*i)/i+e}let u2=null;const qye=3552713678800501e-30;function Fot(t,e,i){return t===e||Math.abs(t-e)<=i*(1+(Math.abs(t)+Math.abs(e))/2)}function gs(t,e){return Fot(t,e,qye)}function zot(t,e){return t===0||Math.abs(t)<=e}function qot(t){return zot(t,qye)}let Gh,h2,zi,Ka,Ha,Rg,Ose;function Vye(t){return{_this:t,get(){return this._this},reset(e){this._this=e},release(){const e=this._this;return this._this=null,e}}}let sC=null;function Wj(t){K(sC);const e=sC(t);return e.semiMajor=e.isPCS?Number.NaN:Bot(t),e}function Vot(t){sC=t,K(sC)}function Got(t,e,i,s){return e<=0?(i[0]=0,s[0]=0,!1):(i[0]=e,s[0]=e,!0)}const jot=/(?:ELLIPSOID|SPHEROID)\["(?:\w|[-()])+",(\d+\.\d+)/;function Bot(t){if(typeof t=="string"){const e=t.match(jot);e&&e.length===2||Je("bad gcs wkt");const i=Number.parseFloat(e[1]);return Number.isFinite(i)||Je("bad gcs wkt"),i}return u2||Hot(),u2.has(t)||bn("gcs wkid not found"),u2.get(t)}function Hot(){u2=new Map;for(const t in R6){const e=Number.parseFloat(t),i=R6[t];if(Array.isArray(i))for(const s of i)u2.set(s,e);else u2.set(i,e)}GJe()}function Uot(t,e,i,s,n){if(t.equals(e))return!1;if(s){let l=1,u=0,f=1,y=1,_=0,x=1;Number.isNaN(t.m_heightMetersPerUnit)||(l=t.m_heightMetersPerUnit,u=t.m_heightZ0,f=t.m_heightSign,y=e.m_heightMetersPerUnit,_=e.m_heightZ0,x=e.m_heightSign);const S=f*x*l/y;for(let P=0;P<n;P++)s[P]=(s[P]-u)*S+_}let r=1,o=0;if(Number.isNaN(t.m_XYToRadians)||(r=t.m_XYToRadians/e.m_XYToRadians,o=t.m_PrimeMeridianDegrees-e.m_PrimeMeridianDegrees,o!==0&&(o=S1e(o),o/=e.m_XYToRadians)),Array.isArray(i)){const l=i;for(let u=0;u<n;u++)l[u][0]=l[u][0]*r+o,l[u][1]=l[u][1]*r}else{const l=i;for(let u=0;u<n;u++){const f=u<<1;l[f]=l[f]*r+o,l[f+1]=l[f+1]*r}}return!0}function Rse(){return{m_heightMetersPerUnit:0,m_heightSign:0,m_heightZ0:0,m_XYToRadians:0,m_PrimeMeridianDegrees:0,assign(t){this.m_heightMetersPerUnit=t.m_heightMetersPerUnit,this.m_heightSign=t.m_heightSign,this.m_heightZ0=t.m_heightZ0,this.m_XYToRadians=t.m_XYToRadians,this.m_PrimeMeridianDegrees=t.m_PrimeMeridianDegrees},equals(t){return ga(this.m_heightSign,t.m_heightSign)&&ga(this.m_heightMetersPerUnit,t.m_heightMetersPerUnit)&&ga(this.m_heightZ0,t.m_heightZ0)&&ga(this.m_XYToRadians,t.m_XYToRadians)&&ga(this.m_PrimeMeridianDegrees,t.m_PrimeMeridianDegrees)},initFromGcsAndVcsPe(t,e){this.m_heightSign=1,this.m_heightMetersPerUnit=Number.NaN,this.m_heightZ0=0,this.m_XYToRadians=Number.NaN,this.m_PrimeMeridianDegrees=Number.NaN,e&&K(0),t&&(this.m_XYToRadians=t.getUnit().getUnitFactor(),this.m_PrimeMeridianDegrees=t.getPrimem().getLongitude())},initFromGcsAndVcs(t,e){const i=t?t.getPECoordSys():null,s=e?e.getPEVerticalCoordSys():null;this.initFromGcsAndVcsPe(i,s)},processUnitParams(t){Number.isNaN(this.m_heightMetersPerUnit)&&(this.m_heightMetersPerUnit=t.m_heightMetersPerUnit,this.m_heightSign=t.m_heightSign,this.m_heightZ0=t.m_heightZ0),Number.isNaN(this.m_XYToRadians)&&(this.m_XYToRadians=t.m_XYToRadians,this.m_PrimeMeridianDegrees=t.m_PrimeMeridianDegrees)}}}function Yot(t,e,i,s,n,r,o){let l=null;e&&(l=e.getPEVerticalCoordSys());let u=null;t&&(u=t.getPECoordSys());let f=null;s&&(f=s.getPEVerticalCoordSys());let y=null;if(i&&(y=i.getPECoordSys()),!(u||l||y||f))return!1;const _=Rse();_.initFromGcsAndVcsPe(u,l);const x=Rse();return x.initFromGcsAndVcsPe(y,f),Uot(_,x,n,r,o)}tf(0),tf(1);const ro="_gxVersion",Gye=2,jye=1;function Bye(t){return Array.isArray(t)?t[0].spatialReference:t.spatialReference}function Bz(t){switch(t.type){case"point":return Zot(t);case"multipoint":return Wot(t);case"polyline":return Jot(t);case"polygon":return Kot(t);case"extent":return Xot(t);default:throw new Error(`Unsupported geometry type: ${t.type}`)}}function Xot(t){if(!t.getCacheValue(ro)){const e=new lr;e.setCoords(t.xmin,t.ymin,t.xmax,t.ymax),t.hasM&&e.setInterval(Gye,0,t.mmin,t.mmax),t.hasZ&&e.setInterval(jye,0,t.zmin,t.zmax),t.setCacheValue(ro,e)}return t.getCacheValue(ro)}function Wot(t){if(!t.getCacheValue(ro)){const e=new Jn,i=new Ut,s=t.points,n=t.hasM,r=t.hasZ,o=r?3:2;for(let l=0,u=s.length;l<u;l++){const f=s[l];i.setXYCoords(f[0],f[1]),r&&i.setZ(f[2]??0),n&&i.setM(f[o]??NaN),e.add(i)}t.setCacheValue(ro,e)}return t.getCacheValue(ro)}function Zot(t){if(!t.getCacheValue(ro)){const e=new Ut;e.setXYCoords(t.x,t.y),t.hasM&&e.setM(t.m),t.hasZ&&e.setZ(t.z),t.setCacheValue(ro,e)}return t.getCacheValue(ro)}function Kot(t){if(!t.getCacheValue(ro)){const e=new Wt;Hye(e,t),t.setCacheValue(ro,e)}return t.getCacheValue(ro)}function Jot(t){if(!t.getCacheValue(ro)){const e=new vi;Hye(e,t),t.setCacheValue(ro,e)}return t.getCacheValue(ro)}function Hye(t,e){const i=e.type==="polygon",s=new Ut,n=i?e.rings:e.paths,r=e.hasM,o=e.hasZ,l=o?3:2;for(let u=0,f=n.length;u<f;u++){const y=n[u],_=i?y.length-1:y.length;for(let x=0;x<_;x++){const S=y[x];s.setXYCoords(S[0],S[1]),o&&s.setZ(S[2]??0),r&&s.setM(S[l]??NaN),x===0?t.startPathPoint(s):t.lineToPoint(s)}}}function Uye(t){if(t.wkid)return jz(t.wkid);const e=t.wkt2||t.wkt;return e?$ye(e):null}function Yye(t,e){if(t)switch(t.getGeometryType()){case me.enumPoint:return tat(t,e);case me.enumEnvelope:return Qot(t,e);case me.enumMultiPoint:return eat(t,e);case me.enumPolyline:return sat(t,e);case me.enumPolygon:return iat(t,e)}return null}function Qot(t,e){if(t.isEmpty())return null;const i=new ur({xmin:t.getXMin(),ymin:t.getYMin(),xmax:t.getXMax(),ymax:t.getYMax(),spatialReference:e}),s=t.getDescription();if(s.hasM()){const n=t.queryInterval(Gye,0);i.mmin=n.vmin,i.mmax=n.vmax}if(s.hasZ()){const n=t.queryInterval(jye,0);i.zmin=n.vmin,i.zmax=n.vmax}return i.setCacheValue(ro,t),i}function eat(t,e){if(t.isEmpty())return null;const i=t.getDescription(),s=i.hasM(),n=i.hasZ(),r=[],o=new Ut;for(let u=0,f=t.getPointCount();u<f;u++){t.getPointByVal(u,o);const y=[o.getX(),o.getY()];n&&y.push(o.getZ()),s&&y.push(o.getM()),r.push(y)}const l=new $v({hasM:s,hasZ:n,points:r,spatialReference:e});return l.setCacheValue(ro,t),l}function tat(t,e){if(t instanceof Y)return new Yi({x:t.x,y:t.y,spatialReference:e});if(t.isEmpty())return null;const i=new Yi({x:t.getX(),y:t.getY(),spatialReference:e}),s=t.getDescription();return s.hasM()&&(i.m=t.getM()),s.hasZ()&&(i.z=t.getZ()),i.setCacheValue(ro,t),i}function iat(t,e){if(t.isEmpty())return null;const i=new Za({spatialReference:e});return Xye(i,t),i.setCacheValue(ro,t),i}function sat(t,e){if(t.isEmpty())return null;const i=new If({spatialReference:e});return Xye(i,t),i.setCacheValue(ro,t),i}function Xye(t,e){const i=t.type==="polygon",s=e.getDescription(),n=s.hasM(),r=s.hasZ(),o=[],l=new Ut;for(let u=0,f=e.getPathCount();u<f;u++){o.push([]);for(let y=e.getPathStart(u),_=e.getPathEnd(u);y<_;y++){e.getPointByVal(y,l);const x=[l.getX(),l.getY()];r&&x.push(l.getZ()),n&&x.push(l.getM()),o[u].push(x)}i&&o[u].push(o[u][0].slice())}t.hasM=n,t.hasZ=r,i?t.rings=o:t.paths=o}Dot(t=>{let e,i;typeof t=="number"?e=t:i=t;const s={wkid:e,wkt:i};let n,r;if(i){n=IM(i);const o=w2(s);if(!n&&!o)throw new Error(`Unsupported WKT type: ${i}`)}else n=!w2(s);return r=e&&Xae.has(e)?Math.PI/200:n?Zq(s):Math.PI/180,{isPCS:n,metersOrRadiansPerUnit:r,semiMajor:0,wkidOrWkt:t}});function nat(t,e){const i=t.getGeometryType();return i===me.enumPoint?t:bi(i)?rat(t):i===me.enumMultiPoint?t:(i===me.enumEnvelope||i===me.enumMultipatch&&K(0),t)}function rat(t){if(oat(t))return t;const e=t.createInstance();for(let i=0,s=t.getPathCount();i<s;i++){const n=t.getPathSize(i);if(n!==0){if(n===1&&(t.getSegmentCountPath(i)===0||t.getSegmentType(t.getPathStart(i))===me.enumLine||!t.isClosedPath(i)))continue;e.addPath(t,i,!0)}}return e}function oat(t){for(let e=0,i=t.getPathCount();e<i;e++){const s=t.getPathSize(e);if(s===0||s===1&&(t.getSegmentCountPath(e)===0||t.getSegmentType(t.getPathStart(e))===me.enumLine||!t.isClosedPath(e)))return!1}return!0}class aat{getOperatorType(){return 10204}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n){return new Lse(e,i,s,n)}execute(e,i,s,n){return e||Je("null param is not allowed."),new Lse(null,i,s,n).generalize(e)}}class Lse extends Ca{constructor(e,i,s,n){super(),this.m_pline=null,this.m_point=new Ut,this.m_stack=[],this.m_resultstack=[],this.m_callCount=0,this.m_progressTracker=n,this.m_geoms=e,this.m_maxDeviation=i,this.m_bRemoveDegenerateParts=s}tock(){return!0}getRank(){return 1}next(){const e=this.m_geoms.next();return e===null?null:(Ku(e),this.generalize(e))}getGeometryID(){return this.m_geoms.getGeometryID()}generalize(e){const i=e.getGeometryType();if(Ng(i))return e;if(i===me.enumEnvelope){const o=new Wt({vd:e.getDescription()});return o.addEnvelope(e,!1),this.generalize(o)}if(Dn(i)){const o=new vi({vd:e.getDescription()});return o.addSegment(e,!0),this.generalize(o)}if(bi(i)||js(""),e.isEmpty()||this.m_maxDeviation<=0)return e;const s=new X0().execute(e,0,.05*this.m_maxDeviation,0,this.m_progressTracker);e.hasNonLinearSegments()&&(this.m_maxDeviation*=.95);const n=s,r=e.createInstance();r.getGeometryType()===me.enumPolygon&&r.setFillRule(e.getFillRule()),this.m_xy=n.getAttributeStreamRef(0);{const o={stack:[],error:void 0,hasError:!1};try{const l=new si;this.m_pline=l,Kl(o,KA(()=>{this.m_pline=null},!1),!1);for(let u=0,f=n.getPathCount();u<f;u++)this.generalizePath(n.getImpl(),u,r.getImpl())}catch(l){o.error=l,o.hasError=!0}finally{fm(o)}}return this.m_resultstack.length=0,this.m_stack.length=0,r}generalizePath(e,i,s){if(e.getPathSize(i)<2)return;this.m_resultstack.length=0,this.m_stack.length=0;const n=e.getPathStart(i),r=e.getPathEnd(i)-1,o=e.isClosedPath(i),l=e.isClosedPathInXYPlane(i);let u=0,f=-1;this.m_stack.push(o?n:r),this.m_stack.push(n);let y=!1,_=!1;for(!this.m_bRemoveDegenerateParts&&l&&(y=!0,_=!0);this.m_stack.length>1;){const S=this.m_stack.at(-1);this.m_stack.pop();const P=this.m_stack.at(-1);let A=e.getXY(S);this.m_pline.setStartXY(A),A=e.getXY(P),this.m_pline.setEndXY(A);const k=[0];let $=this.findGreatestDistance(S,P,r,k);$>=0&&(y?y=!1:(_&&k[0]>u&&(u=k[0],f=$),k[0]<=this.m_maxDeviation&&($=-1))),$>=0?(this.m_stack.push($),this.m_stack.push(S)):this.m_resultstack.push(S)}o||this.m_resultstack.push(this.m_stack[0]);const x=this.m_resultstack.length;if(x===e.getPathSize(i)&&x===this.m_stack.length)s.addPath(e,i,!0);else if(this.m_resultstack.length>0){if(this.m_bRemoveDegenerateParts&&this.m_resultstack.length<=2&&(o||this.m_resultstack.length===1||Y.distance(e.getXY(this.m_resultstack[0]),e.getXY(this.m_resultstack[1]))<=this.m_maxDeviation))return;if(_&&f>=0&&u<=this.m_maxDeviation){const S=this.m_resultstack.at(-1)>f;this.m_resultstack.push(f),S&&(this.m_resultstack[this.m_resultstack.length-2]=St(this.m_resultstack[this.m_resultstack.length-1],this.m_resultstack[this.m_resultstack.length-1]=this.m_resultstack[this.m_resultstack.length-2]))}for(let S=0,P=this.m_resultstack.length;S<P;S++)e.getPointByVal(this.m_resultstack[S],this.m_point),S===0?s.startPathPoint(this.m_point):s.lineToPoint(this.m_point);if(o){for(let S=this.m_resultstack.length;S<3;S++)s.lineToPoint(this.m_point);s.closePathWithLine()}}}findGreatestDistance(e,i,s,n){let r=i-1;i<=e&&(r=s);let o=-1,l=0;const u=new Y;for(let f=e+1;f<=r;f++){this.m_xy.queryPoint2D(2*f,u);const y=u.x,_=u.y,x=this.m_pline.getClosestCoordinate(u,!1);u.assign(this.m_pline.getCoord2D(x)),u.x-=y,u.y-=_;const S=u.length();S>l&&(o=f,l=S),this.m_callCount++}return n[0]=l,o}}class lat{getOperatorType(){return 10104}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimple(e,i,s,n,r){return oye(e,i,s,n,r)===5}executeMany(e,i,s,n){return new cat(e,i,s,n)}execute(e,i,s,n){const r=new nd([e]),o=this.executeMany(r,i,s,n).next();return o||bt("null output"),o}}class cat extends Ca{constructor(e,i,s,n){super(),e||Je(""),this.m_progressTracker=n,this.m_bForceSimplify=s,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=i}next(){const e=this.m_inputGeometryCursor.next();return e?(Ku(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){return e||Je(""),lye(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}var Pn;function yh(t,e,i,s,n,r){return{m_from:t.clone(),m_to:e.clone(),m_center:i.clone(),m_next:n,m_type:s}}function hT(t,e,i,s,n){return{m_from:t.clone(),m_to:e.clone(),m_next:i,m_type:4,m_center:new Y}}(function(t){t[t.enumDummy=256]="enumDummy",t[t.enumLine=1]="enumLine",t[t.enumArc=2]="enumArc",t[t.enumMiter=8]="enumMiter",t[t.enumBevel=16]="enumBevel",t[t.enumJoinMask=26]="enumJoinMask",t[t.enumConnectionMask=27]="enumConnectionMask"})(Pn||(Pn={}));class uat extends Ca{constructor(e,i,s,n,r,o,l,u,f,y){super(),this.m_index=0,this.m_bufferedPolygon=null,this.m_x=0,this.m_y=0,this.m_progressTracker=y,this.m_parent=e,this.m_mp=i,this.m_distance=s,this.m_spatialReference=n,this.m_densifyDist=u,this.m_maxVertexInCompleteCircle=f,this.m_joins=r,this.m_caps=o,this.m_miterLimit=l}next(){const e=new Ut;for(;;){if(this.m_index===this.m_mp.getPointCount())return null;if(this.m_caps===1)return this.m_index=this.m_mp.getPointCount(),new Wt({vd:this.m_mp.getDescription()});if(this.m_mp.getPointByVal(this.m_index,e),this.m_index++,!e.isEmpty())break}let i,s=!1;if(this.m_bufferedPolygon===null&&(this.m_x=e.getX(),this.m_y=e.getY(),this.m_bufferedPolygon=this.m_parent.buffer(e,this.m_distance,this.m_spatialReference,this.m_joins,this.m_caps,this.m_miterLimit,this.m_densifyDist,this.m_maxVertexInCompleteCircle),s=!0),i=this.m_index<this.m_mp.getPointCount()?this.m_bufferedPolygon.clone():this.m_bufferedPolygon,!s){const n=new _i,r=e.getX()-this.m_x,o=e.getY()-this.m_y;n.setShiftCoords(r,o),i.applyTransformation(n)}return Nge(i,0),i}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class hat extends Ca{constructor(e){super(),this.m_currentPathIndex=0,this.m_polyline=e}next(){if(!this.m_polyline)return null;const e=this.m_polyline.getImpl(),i=e.getPathCount();if(this.m_currentPathIndex<i){const s=this.m_currentPathIndex;if(this.m_currentPathIndex++,!e.isClosedPathInXYPlane(s)){let r=e.getXY(e.getPathEnd(s)-1);for(;this.m_currentPathIndex<e.getPathCount();){const o=e.getXY(e.getPathStart(this.m_currentPathIndex));if(e.isClosedPathInXYPlane(this.m_currentPathIndex)||!o.equals(r))break;r=e.getXY(e.getPathEnd(this.m_currentPathIndex)-1),this.m_currentPathIndex++}}if(s===0&&this.m_currentPathIndex===this.m_polyline.getPathCount()){const r=this.m_polyline;return this.m_polyline=null,r}const n=new vi({vd:this.m_polyline.getDescription()});n.addPath(this.m_polyline,s,!0);for(let r=s+1;r<this.m_currentPathIndex;r++)n.addSegmentsFromPath(this.m_polyline,r,0,e.getSegmentCountPath(r),!1);return this.m_currentPathIndex===this.m_polyline.getPathCount()&&(this.m_polyline=null),n}return null}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class dat extends Ca{constructor(e,i,s){super(),this.m_geometry=null,this.m_index=0,this.m_bufferer=e,this.m_geoms=i,this.m_index=0,this.m_bFilter=s}next(){if(this.m_geometry===null&&(this.m_index=0,this.m_geometry=this.m_geoms.next(),!this.m_geometry))return null;const e=this.m_geometry.getImpl();if(this.m_index<e.getPathCount()){const i=this.m_index;return this.m_index++,this.m_bufferer.bufferPolylinePath(this.m_geometry,i,this.m_bFilter)}return this.m_geometry=null,this.next()}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class fat extends Ca{constructor(e){super(),this.m_index=0,this.m_bufferer=e}next(){const e=this.m_bufferer.m_geometry;if(this.m_index<e.getPathCount()){const i=this.m_index,s=e.calculateRingArea2D(this.m_index);for(K(s>0),this.m_index++;this.m_index<e.getPathCount()&&!(e.calculateRingArea2D(this.m_index)>0);)this.m_index++;let n;return n=i===0&&this.m_index===e.getPathCount()?this.m_bufferer.bufferPolygonImpl(e,0,e.getPathCount()):this.m_bufferer.bufferPolygonImpl(e,i,this.m_index),n}return null}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class pat{constructor(e){this.m_geometry=null,this.m_bufferCommands=[],this.m_originalGeomType=me.enumUnknown,this.m_maxVertexInCompleteCircle=-1,this.m_circleTemplateSize=-1,this.m_oldCircleTemplateSize=0,this.m_spatialReference=null,this.m_tolerance=new Qo(0,0),this.m_smallTolerance=new Qo(0,0),this.m_filterTolerance=0,this.m_densifyDist=-1,this.m_distance=Number.NaN,this.m_absDistance=0,this.m_absDistanceReversed=0,this.m_dA=-1,this.m_miterLimit=4,this.m_joins=0,this.m_caps=0,this.m_bRoundBuffer=!0,this.m_bOutputLoops=!0,this.m_bFilter=!0,this.m_circleTemplate=[],this.m_leftStack=[],this.m_middleStack=[],this.m_helperLine1=new si,this.m_helperLine2=new si,this.m_helperArray=[],this.m_progressCounter=0,this.m_densificator=kj.constructDefault(e),this.m_progressTracker=e}buffer(e,i,s,n,r,o,l,u){if(e||Je("Geometry.Bufferer.Impl.Buffer"),l<0&&Je("Geometry.Bufferer.Impl.Buffer"),YA(e.getGeometryType())&&js("Unsupported geometry type."),e.isEmpty())return new Wt({vd:e.getDescription()});if(this.m_joins=n,this.m_caps=r,this.m_bRoundBuffer=!1,this.m_miterLimit=o,this.m_originalGeomType=e.getGeometryType(),Wee(this.m_originalGeomType)?this.m_bRoundBuffer=this.m_joins===0:Ng(this.m_originalGeomType)?this.m_bRoundBuffer=this.m_caps===0:yge(this.m_originalGeomType)&&(this.m_bRoundBuffer=this.m_joins===0&&this.m_caps===0),this.m_bFilter=this.m_bRoundBuffer,this.m_geometry=nat(e),this.m_geometry.isEmpty())return new Wt({vd:e.getDescription()});const f=new xe;this.m_geometry.queryLooseEnvelope(f),i>0&&f.inflateCoords(i,i),this.m_tolerance=Kn(s,f,!0),this.m_smallTolerance=Kn(null,f,!0),u<=0&&(u=96),this.m_spatialReference=s,this.m_distance=i,this.m_absDistance=Math.abs(this.m_distance),this.m_absDistanceReversed=this.m_absDistance!==0?1/this.m_absDistance:0,Number.isNaN(l)||l===0?l=1e-5*this.m_absDistance:l>.5*this.m_absDistance&&(l=.5*this.m_absDistance),u<12&&(u=12);const y=Math.abs(i)*(1-Math.cos(Math.PI/u));if(y>l)l=y;else if(i!==0){const x=Math.PI/Math.acos(1-l/Math.abs(i));x<u-1&&(u=Math.trunc(x))<12&&(u=12,l=Math.abs(i)*(1-Math.cos(Math.PI/u)))}this.m_densifyDist=l,this.m_maxVertexInCompleteCircle=u,this.m_filterTolerance=this.m_bRoundBuffer?Math.min(this.m_smallTolerance.total(),.25*this.m_densifyDist):0,this.m_circleTemplateSize=this.calcN(),this.m_circleTemplateSize!==this.m_oldCircleTemplateSize&&(this.m_circleTemplate.length=0,this.m_oldCircleTemplateSize=this.m_circleTemplateSize),this.m_densifyDist>0&&dj(this.m_geometry)&&(this.m_geometry=this.m_densificator.densifyEx(this.m_geometry,0,this.m_densifyDist,0,this.m_joins!==0,So()));const _=this.bufferImpl();return this.m_geometry=null,_}generateCircleTemplate(){if(this.m_circleTemplate.length)return;const e=this.m_circleTemplateSize,i=Math.trunc((e+3)/4),s=.5*Math.PI/i;this.m_dA=s,this.m_circleTemplate.length=4*i;const n=Math.cos(s),r=Math.sin(s),o=Y.construct(0,1);for(let l=0;l<i;l++)this.m_circleTemplate[l+0*i]=Y.construct(o.y,-o.x),this.m_circleTemplate[l+1*i]=Y.construct(-o.x,-o.y),this.m_circleTemplate[l+2*i]=Y.construct(-o.y,o.x),this.m_circleTemplate[l+3*i]=o.clone(),o.rotateReverse(n,r)}bufferImpl(){const e=this.m_geometry.getGeometryType();if(Dn(e)){const i=new vi({vd:this.m_geometry.getDescription()});return i.addSegment(this.m_geometry,!0),this.m_geometry=i,this.bufferImpl()}if(this.m_distance<=this.m_tolerance.total()){if(!Wee(e))return new Wt({vd:this.m_geometry.getDescription()});if(this.m_distance<0){const i=new xe;if(this.m_geometry.queryEnvelope(i),i.width()<=2*this.m_absDistance||i.height()<=2*this.m_absDistance)return new Wt({vd:this.m_geometry.getDescription()})}}switch(this.m_geometry.getGeometryType()){case me.enumPoint:return this.bufferPoint();case me.enumMultiPoint:return this.bufferMultiPoint();case me.enumPolyline:return this.bufferPolyline();case me.enumPolygon:return this.bufferPolygon();case me.enumEnvelope:return this.bufferEnvelope();default:bt("")}}bufferPolyline(){if(this.isDegenerateGeometry(this.m_geometry)){const f=new Ut;this.m_geometry.getPointByVal(0,f);const y=new xe;return this.m_geometry.queryEnvelope(y),f.setXY(y.getCenter()),this.bufferDegeneratePath(f,!0)}const e=this.m_geometry,i=this.m_geometry.getDescription();this.m_geometry=null;const s=new hat(e);let n,r;n=this.m_joins===0?new aat().executeMany(s,.25*this.m_densifyDist,!1,this.m_progressTracker):s,r=this.m_bRoundBuffer?new lat().executeMany(n,null,!0,this.m_progressTracker):n;const o=new dat(this,r,this.m_bFilter),l=new Yy().executeMany(o,this.m_spatialReference,this.m_progressTracker,2),u=new Mc().executeMany(l,this.m_spatialReference,!1,this.m_progressTracker).next();return u!==null?u:new Wt({vd:i})}bufferPolygon(){if(this.m_distance===0)return this.m_geometry;this.generateCircleTemplate();const e=new Mc().execute(this.m_geometry,null,!1,this.m_progressTracker);if(this.m_distance<0){if(this.m_geometry=e,this.m_geometry.isEmpty())return this.m_geometry;const i=this.m_geometry,s=this.bufferPolygonImpl(i,0,i.getPathCount());return new Mc().execute(s,this.m_spatialReference,!1,this.m_progressTracker)}{if(this.m_geometry=e,this.isDegenerateGeometry(this.m_geometry)){const r=new Ut;this.m_geometry.getPointByVal(0,r);const o=new xe;return this.m_geometry.queryEnvelope(o),r.setXY(o.getCenter()),this.bufferDegeneratePath(r,!0)}const i=new fat(this),s=new Yy().executeMany(i,this.m_spatialReference,this.m_progressTracker,2),n=new Mc().executeMany(s,this.m_spatialReference,!1,this.m_progressTracker).next();return n!==null?n:new Wt({vd:this.m_geometry.getDescription()})}}bufferPolygonImpl(e,i,s){const n=e,r=n.getImpl();let o=new Wt({vd:e.getDescription()});for(let l=i;l<s;l++){if(r.getPathSize(l)<1)continue;const u=r.calculateRingArea2D(l),f=new xe;if(r.queryPathEnvelope(l,f),this.m_distance>0)if(u>0)if(this.isDegeneratePath(r,l)){const y=new Ut;r.getPointByVal(r.getPathStart(l),y),y.setXY(f.getCenter()),o.add(this.bufferDegeneratePath(y,!0),!1)}else{const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(bot(this.m_geometry,l)){const x=this.bufferConvexPath(n,l);o.add(x,!1)}else{this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,1);const x=this.bufferCleanup(y);o.add(x,!1)}}else{if(f.width()+this.m_tolerance.total()<=2*this.m_absDistance||f.height()+this.m_tolerance.total()<=2*this.m_absDistance)continue;const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,1),!y.isEmpty()){const x=f,S=Math.max(1,this.m_absDistance),P=x.clone();P.inflateCoords(S,S),_.addEnvelope(P,!1);const A=this.bufferCleanup(y);o.reserve(o.getPointCount()+A.getPointCount()-4),e$(A,o,P,!0)}}else if(u>0){if(f.width()+this.m_tolerance.total()<=2*this.m_absDistance||f.height()+this.m_tolerance.total()<=2*this.m_absDistance)continue;const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,-1),!y.isEmpty()){const x=new xe;_.queryLooseEnvelope(x);const S=Math.max(1,this.m_absDistance),P=x.clone();P.inflateCoords(S,S),_.addEnvelope(P,!1),e$(this.bufferCleanup(y),o,P,!0)}}else{const y=new vi({vd:e.getDescription()}),_=y.getImpl();this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,-1);const x=this.bufferCleanup(y);for(let S=0,P=x.getPathCount();S<P;S++)o.addPath(x,S,!0)}}if(this.m_distance>0)return o.getPathCount()>1?this.bufferCleanup(o):dT(o);{const l=new xe;if(o.queryLooseEnvelope(l),o.isEmpty())return dT(o);{const u=Math.max(1,this.m_absDistance),f=l.clone();f.inflateCoords(u,u),o.addEnvelope(f,!1);const y=this.bufferCleanup(o);o=new Wt;const _=new Wt({vd:y.getDescription()});return e$(y,_,f,!1),dT(_)}}}bufferPoint(){return this.bufferPointImpl(this.m_geometry)}bufferPointImpl(e){const i=new Wt({vd:e.getDescription()});return this.m_caps===0?(this.addCircle(i.getImpl(),e),this.setStrongSimple(i)):this.m_caps===2?(this.addSquare(i.getImpl(),e),this.setStrongSimple(i)):i}bufferDegeneratePath(e,i){const s=new Wt({vd:e.getDescription()});return i&&this.m_joins===0||!i&&this.m_caps===0?(this.addCircle(s.getImpl(),e),this.setStrongSimple(s)):i||this.m_caps!==2?s:(this.addSquare(s.getImpl(),e),this.setStrongSimple(s))}bufferMultiPoint(){const e=new uat(this,this.m_geometry,this.m_distance,this.m_spatialReference,this.m_joins,this.m_caps,this.m_miterLimit,this.m_densifyDist,this.m_maxVertexInCompleteCircle,this.m_progressTracker);return new Yy().executeMany(e,this.m_spatialReference,this.m_progressTracker,2).next()}bufferEnvelope(){let e=new Wt({vd:this.m_geometry.getDescription()});if(this.m_distance<=0){if(this.m_distance===0)e.addEnvelope(this.m_geometry,!1),Fse(this.m_geometry,this.m_tolerance.total())&&(e=this.setStrongSimple(e));else{const s=new lr;this.m_geometry.queryEnvelope(s),s.inflateCoords(this.m_distance,this.m_distance),e.addEnvelope(s,!1),Fse(s,this.m_tolerance.total())&&(e=this.setStrongSimple(e))}return e}if(this.m_joins===1){const s=new lr({copy:this.m_geometry});return s.inflateCoords(this.m_absDistance,this.m_absDistance),e.addEnvelope(s,!1),e}const i=this.m_geometry.clone();if(i.width()===0||i.height()===0){if(i.width()===0&&i.height()===0){const r=new Ut({vd:this.m_geometry.getDescription()});return i.queryCornerByVal(0,r),this.m_geometry=r,this.bufferImpl()}const s=new vi({vd:this.m_geometry.getDescription()}),n=new Ut;return i.queryCornerByVal(0,n),s.startPathPoint(n),i.queryCornerByVal(2,n),s.lineToPoint(n),this.m_geometry=s,this.bufferImpl()}return e.addEnvelope(this.m_geometry,!1),this.m_geometry=e,this.bufferConvexPath(e,0)}bufferConvexPath(e,i){this.generateCircleTemplate();const s=e.hasAttribute(10),n=new Wt({vd:e.getDescription()}),r=n.getImpl();n.reserve((this.m_circleTemplate.length/10+4)*e.getPathSize(i));const o=new Y,l=new Y,u=new Y,f=new Y(0,0),y=new Y,_=new Y,x=e.getImpl(),S=e.getPathSize(i),P=e.getPathStart(i);for(let A=0,k=e.getPathSize(i);A<k;A++){const $=x.getXY(P+A),F=x.getXY(P+(A+1)%S),G=x.getXY(P+(A+2)%S);y.setSub(F,$),y.length()===0&&bt("");const V=s&&!!(1&x.getAttributeAsInt(10,(A+1)%S,0));y.normalize();const B=y.clone();y.leftPerpendicularThis(),y.scale(this.m_absDistance),o.setAdd(y,$),l.setAdd(y,F),A===0?r.startPath(o):r.lineTo(o),r.lineTo(l),_.setSub(G,F),_.length()===0&&bt(""),_.normalize();const W=_.clone();_.leftPerpendicularThis(),_.scale(this.m_absDistance),u.setAdd(_,F);let J=Pn.enumArc;const re=V?0:this.m_joins;if(re===2)J=Pn.enumBevel;else if(re===1){const se=-B.crossProduct(W);f.setSub(B,W),f.scale(this.m_absDistance/se),f.length()<this.m_miterLimit*this.m_absDistance?(f.addThis(F),J=Pn.enumMiter):J=Pn.enumBevel}else f.assign(F);this.addJoin(J,r,f,l,u,!1,!1)}return dT(n)}bufferPolylinePath(e,i,s){this.generateCircleTemplate();const n=e,r=n.getImpl();if(r.getPathSize(i)<1)return null;let o;if(o=this.m_bRoundBuffer?r.isClosedPathInXYPlane(i):r.isClosedPath(i),this.isDegeneratePath(r,i)&&this.m_distance>0){const f=new Ut;r.getPointByVal(r.getPathStart(i),f);const y=new xe;return r.queryPathEnvelope(i,y),f.setXY(y.getCenter()),this.bufferDegeneratePath(f,o)}const l=new vi({vd:e.getDescription()});l.reserve((Math.trunc(this.m_circleTemplate.length/10)+4)*r.getPathSize(i));const u=l.getImpl();return o?this.bufferClosedPath(n,i,u,s,1)!==2&&this.bufferClosedPath(n,i,u,s,-1):this.bufferOpenPath(n,i,u,s),this.bufferCleanup(l)}progress_(){}bufferCleanup(e,i=!1){const s=i?this.m_tolerance:this.m_smallTolerance;return Z6(e,s,!0,!i,-1,this.m_progressTracker,0,!1)}calcN(){if(this.m_densifyDist===0)return this.m_maxVertexInCompleteCircle;const i=1-this.m_densifyDist*Math.abs(this.m_absDistanceReversed);let s=4;return s=i<-1?4:2*Math.PI/Math.acos(i)+.5,s<4?s=4:s>this.m_maxVertexInCompleteCircle&&(s=this.m_maxVertexInCompleteCircle),Math.trunc(s)}addJoin(e,i,s,n,r,o,l){if(this.generateCircleTemplate(),o&&(i.startPath(n),o=!1),e===Pn.enumBevel)return void(l&&i.lineTo(r));if(e===Pn.enumMiter){const $=s.clone();return i.lineTo($),void(l&&i.lineTo(r))}const u=new Y;u.setSub(n,s),u.scale(this.m_absDistanceReversed);const f=new Y;f.setSub(r,s),f.scale(this.m_absDistanceReversed);let y=Math.atan2(u.y,u.x)/this.m_dA;y<0&&(y=this.m_circleTemplate.length+y),y=this.m_circleTemplate.length-y;let _=Math.atan2(f.y,f.x)/this.m_dA;_<0&&(_=this.m_circleTemplate.length+_),_=this.m_circleTemplate.length-_,_<y&&(_+=this.m_circleTemplate.length);let x=Math.trunc(_),S=Math.ceil(y),P=this.m_circleTemplate[S%this.m_circleTemplate.length].clone();P.scaleAddThis(this.m_absDistance,s);const A=10*this.m_tolerance.total();P.sub(n).length()<A&&(S+=1),P=this.m_circleTemplate[x%this.m_circleTemplate.length].clone(),P.scaleAddThis(this.m_absDistance,s),P.sub(r).length()<A&&(x-=1);let k=x-S;k++;for(let $=0,F=S%this.m_circleTemplate.length;$<k;$++,F=(F+1)%this.m_circleTemplate.length)P=this.m_circleTemplate[F].clone(),P.scaleAddThis(this.m_absDistance,s),i.lineTo(P),this.progress_();l&&i.lineTo(r)}bufferClosedPath(e,i,s,n,r){const o=new Bs,l=o.addPathFromMultiPath(e,i,!0);return this.bufferClosedPathImpl(o,l,s,n,r)}bufferClosedPathImpl(e,i,s,n,r){const o=e.getFirstVertex(e.getFirstPath(i)),l=new Ut;if(e.queryPoint(o,l),e.filterClosePoints(this.m_filterTolerance,!1,!1,!1,-1),e.getPointCount(i)<2)return r<0?0:(this.m_bRoundBuffer&&this.addCircle(s,l),2);K(e.getFirstPath(i)!==ae),K(e.getFirstVertex(e.getFirstPath(i))!==ae);const u=e.getXY(e.getFirstVertex(e.getFirstPath(i))),f=new _i;if(f.setShift(u.negate()),e.applyTransformation(f),n){const pe=vat(e,i,r,!0,this.m_absDistance,this.m_filterTolerance,this.m_densifyDist);if(K(pe===1),e.getPointCount(i)<2)return r<0?0:(this.addCircle(s,l),2)}const y=this.m_joins!==0&&e.getVertexDescription().hasAttribute(10);this.m_bufferCommands.length=0;const _=e.getFirstPath(i);let x=e.getFirstVertex(_),S=r===1?e.getPrevVertex(x):e.getNextVertex(x),P=r===1?e.getNextVertex(x):e.getPrevVertex(x),A=!0;const k=new Y,$=new Y,F=new Y,G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=this.m_absDistance,se=e.getPathSize(_),oe=new Y(0,0);for(let pe=0;pe<se;pe++){$.assign(e.getXY(P)),A&&(k.assign(e.getXY(x)),F.assign(e.getXY(S)),B.setSub(k,F),B.normalize(),J.leftPerpendicularOther(B),J.scale(re),G.setAdd(J,k));const ce=y&&!!(1&e.getAttributeAsDbl(10,x,0));V.setSub($,k),V.normalize(),W.leftPerpendicularOther(V),W.scale(re);const ue=new Y;ue.setAdd(k,W);const ne=B.crossProduct(V),de=B.dotProduct(V);if(ne<0||de<0&&ne<Math.abs(de)*Number.EPSILON*8){let Pe=!1;const Re=ce?0:this.m_joins;if(Re===1){const Oe=-ne;oe.setSub(B,V),oe.scale(this.m_absDistance/Oe),oe.length()<this.m_miterLimit*this.m_absDistance&&(oe.addThis(k),Pe=!0),this.m_bufferCommands.push(yh(G,ue,oe,Pe?Pn.enumMiter:Pn.enumBevel,this.m_bufferCommands.length+1))}else this.m_bufferCommands.push(yh(G,ue,k,Re===0?Pn.enumArc:Pn.enumBevel,this.m_bufferCommands.length+1))}else G.equals(ue)||(this.m_bufferCommands.push(hT(G,k,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(hT(k,ue,this.m_bufferCommands.length+1)));const Se=new Y;Se.setAdd($,W),this.m_bufferCommands.push(yh(ue,Se,k,Pn.enumLine,this.m_bufferCommands.length+1)),G.setCoordsPoint2D(Se),J.setCoordsPoint2D(W),F.setCoordsPoint2D(k),k.setCoordsPoint2D($),B.setCoordsPoint2D(V),S=x,x=P,A=!1,P=r===1?e.getNextVertex(x):e.getPrevVertex(x)}return this.m_bufferCommands.at(-1).m_next=0,this.processBufferCommands(s),f.setShift(u),s.applyTransformationToPath(f,s.getPathCount()-1),1}bufferOpenPath(e,i,s,n){if(this.m_bRoundBuffer){const ce=new vi({vd:e.getDescription()});return ce.addPath(e,i,!1),ce.addSegmentsFromPath(e,i,0,e.getSegmentCountPath(i),!1),this.bufferClosedPath(ce,0,s,n,1)}let r=0;const o=new vi({vd:e.getDescription()}),l=new Y(0,0);{const ce=new Bs,ue=ce.addPathFromMultiPath(e,i,!1),ne=ce.getFirstVertex(ce.getFirstPath(ue)),de=new Ut;if(ce.queryPoint(ne,de),l.assign(de.getXY()),ce.filterClosePoints(0,!1,!1,!1,-1),ce.getPointCount(ue)<2)return this.m_bRoundBuffer&&this.addCircle(s,de),2;const Se=ce.getGeometry(ce.getFirstGeometry());o.addPath(Se,0,!1),r=o.getPointCount()-1,o.addSegmentsFromPath(Se,0,0,Se.getSegmentCountPath(0)-1,!1)}const u=new Bs,f=u.addPathFromMultiPath(o,0,!0);K(u.getFirstPath(f)!==ae),K(u.getFirstVertex(u.getFirstPath(f))!==ae);const y=new _i;y.setShift(l.negate()),u.applyTransformation(y),this.m_bufferCommands.length=0;const _=u.getFirstPath(f),x=this.m_joins!==0&&u.getVertexDescription().hasAttribute(10);let S=u.getFirstVertex(_),P=u.getPrevVertex(S),A=u.getNextVertex(S),k=!0;const $=new Y,F=new Y,G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=new Y,se=this.m_absDistance,oe=u.getPathSize(_),pe=new Y(0,0);for(let ce=0;ce<oe;ce++){let ue=!1;ce!==0&&ce!==r||(ue=!0),F.assign(u.getXY(A)),k&&($.assign(u.getXY(S)),G.assign(u.getXY(P)),W.setSub($,G),W.normalize(),re.leftPerpendicularOther(W),re.scale(se),V.setAdd(re,$));const ne=x&&!!(1&u.getAttributeAsDbl(10,S,0));B.setSub(F,$),B.normalize(),J.leftPerpendicularOther(B),J.scale(se);const de=new Y;de.setAdd($,J);const Se=W.crossProduct(B),Pe=W.dotProduct(B);if(Se<0||Pe<0&&Se<Math.abs(Pe)*Number.EPSILON*8)if(ue)if(this.m_caps===0)this.m_bufferCommands.push(yh(V,de,$,Pn.enumArc,this.m_bufferCommands.length+1));else if(this.m_caps===1)this.m_bufferCommands.push(yh(V,de,$,Pn.enumLine,this.m_bufferCommands.length+1));else{const Oe=B.mul(this.m_absDistance).negate(),we=Oe.clone();Oe.addThis(V),we.addThis(de),this.m_bufferCommands.push(yh(V,Oe,$,Pn.enumLine,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(yh(Oe,we,$,Pn.enumLine,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(yh(we,de,$,Pn.enumLine,this.m_bufferCommands.length+1))}else{let Oe=!1;const we=ne?0:this.m_joins;if(we===1){const Fe=-Se;pe.setSub(W,B),pe.scale(this.m_absDistance/Fe),pe.length()<this.m_miterLimit*this.m_absDistance&&(pe.addThis($),Oe=!0),this.m_bufferCommands.push(yh(V,de,pe,Oe?Pn.enumMiter:Pn.enumBevel,this.m_bufferCommands.length+1))}else this.m_bufferCommands.push(yh(V,de,$,we===0?Pn.enumArc:Pn.enumBevel,this.m_bufferCommands.length+1))}else V.equals(de)||(this.m_bufferCommands.push(hT(V,$,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(hT($,de,this.m_bufferCommands.length+1)));const Re=new Y;Re.setAdd(F,J),this.m_bufferCommands.push(yh(de,Re,$,Pn.enumLine,this.m_bufferCommands.length+1)),V.setCoordsPoint2D(Re),re.setCoordsPoint2D(J),G.setCoordsPoint2D($),$.setCoordsPoint2D(F),W.setCoordsPoint2D(B),P=S,S=A,k=!1,A=u.getNextVertex(S)}return this.m_bufferCommands.at(-1).m_next=0,this.processBufferCommands(s),y.setShift(l),s.applyTransformationToPath(y,s.getPathCount()-1),1}processBufferCommands(e){const i=this.cleanupBufferCommands();let s=!0,n=i+1;for(let r=i;n!==i;r=n){const o=this.m_bufferCommands[r];n=o.m_next!==-1?o.m_next:(r+1)%this.m_bufferCommands.length,o.m_type&&(s&&(e.startPath(o.m_from),s=!1),o.m_type&Pn.enumJoinMask?this.addJoin(o.m_type,e,o.m_center,o.m_from,o.m_to,!1,!0):e.lineTo(o.m_to))}}cleanupBufferCommands(){this.m_helperArray=Ge(Y,9);let e=0;for(let s=0,n=this.m_bufferCommands.length;s<n;){const r=this.m_bufferCommands[s];if(r.m_type&Pn.enumConnectionMask){e=s;break}s=r.m_next}let i=e+1;for(let s=e;i!==e;s=i){const n=this.m_bufferCommands[s];i=n.m_next;let r=1,o=null;for(;i!==s&&(o=this.m_bufferCommands[i],!(o.m_type&Pn.enumConnectionMask));)i=o.m_next,r++;r!==1&&(n.m_type&o.m_type)===Pn.enumLine&&(this.m_helperLine1.setStartXY(n.m_from),this.m_helperLine1.setEndXY(n.m_to),this.m_helperLine2.setStartXY(o.m_from),this.m_helperLine2.setEndXY(o.m_to),this.m_helperLine1.intersect(this.m_helperLine2,this.m_helperArray,null,null,this.m_smallTolerance.total())===1&&(n.m_to.assign(this.m_helperArray[0]),o.m_from.assign(this.m_helperArray[0]),n.m_next=i))}return e}isDegeneratePath(e,i){if(e.getPathSize(i)===1)return!0;if(this.m_joins===0&&this.m_caps===0){const s=new xe;if(e.queryPathEnvelope(i,s),Math.max(s.width(),s.height())<.5*this.m_densifyDist)return!0}return!1}isDegenerateGeometry(e){if(this.m_joins===0&&this.m_caps===0){const i=new xe;if(e.queryEnvelope(i),Math.max(i.width(),i.height())<.5*this.m_densifyDist)return!0}return!1}addCircle(e,i){const s=i.getXY();if(this.m_circleTemplate.length!==0){let f=this.m_circleTemplate[0].clone();f.scaleAddThis(this.m_absDistance,s),e.startPath(f);for(let y=1,_=this.m_circleTemplate.length;y<_;y++)f=this.m_circleTemplate[y].clone(),f.scaleAddThis(this.m_absDistance,s),e.lineTo(f);return}const n=this.m_circleTemplateSize,r=Math.trunc((n+3)/4),o=.5*Math.PI/r;e.reserve(4*r);const l=Math.cos(o),u=Math.sin(o);for(let f=3;f>=0;f--){const y=Y.construct(0,this.m_absDistance);switch(f){case 0:for(let _=0;_<r;_++)e.lineToCoords(y.x+s.x,y.y+s.y),y.rotateReverse(l,u);break;case 1:for(let _=0;_<r;_++)e.lineToCoords(-y.y+s.x,y.x+s.y),y.rotateReverse(l,u);break;case 2:for(let _=0;_<r;_++)e.lineToCoords(-y.x+s.x,-y.y+s.y),y.rotateReverse(l,u);break;default:e.startPathCoords(y.y+s.x,-y.x+s.y);for(let _=1;_<r;_++)y.rotateReverse(l,u),e.lineToCoords(y.y+s.x,-y.x+s.y)}this.progress_()}}addSquare(e,i){const s=new lr({vd:i.getDescription()});s.setCoords(i.getX(),i.getY(),i.getX(),i.getY()),s.inflateCoords(this.m_absDistance,this.m_absDistance),e.addEnvelope(s,!1)}setStrongSimple(e){return e.getImpl().setIsSimple(4,this.m_tolerance.total()),e.getImpl().updateOGCFlagsProtected(),e}}function dT(t){return Nge(t,0),t}function Fse(t,e){return!!t.isEmpty()||Math.min(t.width(),t.height())>e}function mat(t,e,i,s,n,r,o,l){const u=t.getXY(i),f=t.getXY(s);if(u.equals(f))return-1;const y=.25*o,_=.25*o,x=new Y;x.setSub(f,u);const S=x.length(),P=S*S*.25,A=r*r-P;if(A<=P)return-1;const k=Math.sqrt(A);x.normalize();const $=x.clone();$.rightPerpendicularThis();const F=P/k,G=F<=_,V=Y.lerp(f,u,.5),B=$.clone(),W=F-y;B.scaleAddThis(Math.max(0,W),V),$.negate().scaleAddThis(k,V);const J=3.61*Xi(r-_),re=B.sub(u),se=B.sub(f);let oe=!1,pe=0;const ce=Vi(64,0);K(l===ce.length);{for(let vt=t.getPrevVertexEx(s,n);vt!==i;){if(t.getUserIndex(vt,e)===1)return-1;if(!t.getXY(vt).equals(f))break;{const ot=t.getPrevVertexEx(vt,n);t.removeVertex(vt,!1),vt=ot}}const Fe=new Y,it=u.clone();ce[pe++]=1;for(let vt=t.getNextVertexEx(i,n);vt!==s;){if(t.getUserIndex(vt,e)===1)return-1;const ot=t.getXY(vt);if(ot.equals(it)){const qt=t.getNextVertexEx(vt,n);t.removeVertex(vt,!1),vt=qt;continue}ce[pe++]=0;const ut=new Y;if(ut.setSub(ot,u),ut.dotProduct($)<0)return 0;(Y.sqrDistance(ot,u)>J||Y.sqrDistance(ot,f)>J)&&(oe=!0);let Ct=0;if(ot.sub(u).crossProduct(re)>=0&&(Ct=1),ot.sub(f).crossProduct(se)<=0&&(Ct|=2),Ct===0)return 0;ce[pe-1]=Ct,Fe.assign(it),it.assign(ot),vt=t.getNextVertexEx(vt,n)}if(pe===1)return 0;K(pe<ce.length),ce[pe++]=2}let ue=!0;for(let Fe=1,it=0;Fe<pe;Fe++)if(ce[Fe]!==ce[Fe-1]&&(it++,ue=it<3&&(it===1&&ce[Fe]===3||it===2&&ce[Fe]===2),!ue))return 0;if(pe>2&&ue&&(pe===3||!oe)){let Fe=0,it=t.getNextVertexEx(i,n);for(G||(t.setXY(it,B),it=t.getNextVertexEx(it,n));it!==s;){const vt=t.getNextVertexEx(it,n);t.removeVertex(it,!1),it=vt,++Fe}return Fe}if(K(pe!==3),oe&&pe>3)return 0;const ne=u.clone();let de=i;const Se=u.clone();let Pe=1,Re=-1,Oe=de,we=0;for(pe=1;Oe!==s;){Oe=t.getNextVertexEx(Oe,n);const Fe=ce[pe++];if(Fe===0){if(Oe===s)break;continue}const it=t.getXY(Oe);if(Re!==-1){if(3&(Re&Pe&Fe)){t.removeVertex(de,!0),we++,de=Oe,Se.setCoordsPoint2D(it),Pe=Fe;continue}if(Pe===3&&Re!==0&&Fe!==0){if(Se.setCoordsPoint2D(B),G||Se.equals(ne)){t.removeVertex(de,!0),we++,de=Oe,Se.setCoordsPoint2D(it),Pe=Fe;continue}t.setXY(de,Se)}}Re=Pe,ne.setCoordsPoint2D(Se),de=Oe,Pe=Fe,Se.setCoordsPoint2D(it)}return we}function gat(t,e,i,s){let n=-1;const r=new Y,o=new Y,l=new Y;for(let u=0,f=t.getPathSize(s),y=t.getFirstVertex(s);u<f;++u){n===-1&&(t.queryXY(y,o),n=t.getPrevVertex(y),n!==-1&&(t.queryXY(n,r),l.setSub(o,r),l.normalize()));const _=t.getNextVertex(y);if(_===-1)break;const x=t.getXY(_),S=x.sub(o);S.normalize(),n!==-1&&S.dotProduct(l)<-.99&&Math.abs(S.crossProduct(l))<1e-7&&t.setUserIndex(y,e,1),n=y,y=_,r.assign(o),o.assign(x),l.assign(S)}}function yat(t,e,i,s,n,r,o){const l={stack:[],error:void 0,hasError:!1};try{const u=t.getFirstPath(e),f=t.createUserIndex();Kl(l,KA(()=>{t.removeUserIndex(f)},!1),!1),gat(t,f,e,u);for(let y=0;y<100;++y){if(t.getPathSize(u)===0)return 1;let _=t.getFirstVertex(u),x=t.getPathSize(u);if(x<3)return 1;t.isClosedPath(u)||(x-=1);const S=64;let P=0,A=!1;for(let k=0;k<x&&_!==ae;k++){let $=0,F=_;for(let G=1,V=Math.min(S,x-k);G<V;G++)if(F=t.getNextVertexEx(F,i),G>1){const B=mat(t,f,_,F,i,n,o,S);if(B===-1)break;$+=B,x-=B}if(P+=$,A=$>0,A){const G=t.getPrevVertexEx(_,i);if(G!==-1){_=G,x++;continue}}_=t.getNextVertexEx(_,i)}if(P===0)break}return t.filterClosePoints(r,!1,!1,!1,-1),1}catch(u){l.error=u,l.hasError=!0}finally{fm(l)}}function vat(t,e,i,s,n,r,o){return yat(t,e,i,s,n,r,o)}function e$(t,e,i,s){for(let n=0,r=t.getPathCount();n<r;n++){const o=t.getXY(t.getPathStart(n));o.x!==i.xmin&&o.x!==i.xmax&&e.addPath(t,n,s)}}let _at=class{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n,r){return this.executeManyEx(e,i,s,Number.NaN,96,n,r)}execute(e,i,s,n){Number.isFinite(s)||Je("Invalid distance for buffer operation");const r=new nd([e]),o=[s],l=this.executeMany(r,i,o,!1,n).next();return l||bt("null buffer output"),l}executeManyEx(e,i,s,n,r,o,l){if(s.find(u=>!Number.isFinite(u))!==void 0&&Je("Invalid distance for buffer operation"),o){const u=new zse(e,i,s,n,r,!1,l);return new Yy().executeMany(u,i,l,2)}return new zse(e,i,s,n,r,!1,l)}};class zse extends Ca{constructor(e,i,s,n,r,o,l){super(),this.m_currentUnionEnvelope2D=new xe,this.m_index=-1,this.m_dindex=-1,this.m_progressTracker=l,this.m_bufferer=new pat(l),this.m_inputGeoms=e,this.m_spatialReference=i,this.m_distances=s,this.m_maxDeviation=n,this.m_maxVerticesInFullCircle=r}tock(){return!0}getRank(){return 1}next(){{let e;for(;e=this.m_inputGeoms.next();)return Ku(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dindex+1<this.m_distances.length&&this.m_dindex++,this.buffer(e,this.m_distances[this.m_dindex]);return null}}getGeometryID(){return this.m_index}buffer(e,i){return this.m_bufferer.buffer(e,i,this.m_spatialReference,0,0,4,this.m_maxDeviation,this.m_maxVerticesInFullCircle)}}const bat=new _at;function xat(t,e,i){return bat.execute(t,e,i,null)}function wat(t,e,i={}){const{unit:s}=i,n=Bye(t);return s&&(e=t9e(e,s,n)),Yye(xat(Bz(t),Uye(n),e),n)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Sat={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Oa={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},Eat={image:"image"},fT={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},Cat=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]):host([kind=brand]) .container,:host([appearance=outline-fill]):host([kind=brand]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-brand))}:host([appearance=outline]):host([kind=inverse]) .container,:host([appearance=outline-fill]):host([kind=inverse]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]) .container,:host([appearance=outline-fill]):host([kind=neutral]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]) .container{background-color:transparent}:host([appearance=outline-fill]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]) .container{border-color:transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=neutral]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([selected]) .select-icon{opacity:1}:host([scale=s]) .container{--calcite-internal-chip-block-size:1.5rem ;--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--2);--calcite-internal-chip-icon-size:1rem ;--calcite-internal-chip-icon-space:0.25rem ;--calcite-internal-chip-image-size:1.25rem ;--calcite-internal-chip-title-space:0.25rem ;--calcite-internal-close-size:1rem }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.25rem }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.375rem ;--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container{--calcite-internal-chip-block-size:2rem ;--calcite-internal-chip-container-space-x-end:0.375rem ;--calcite-internal-chip-container-space-x-start:0.375rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--1);--calcite-internal-chip-icon-size:1.5rem ;--calcite-internal-chip-icon-space:0.375rem ;--calcite-internal-chip-image-size:1.5rem ;--calcite-internal-chip-title-space:0.375rem ;--calcite-internal-close-size:1.5rem }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.375rem }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start:0}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end:0.125rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.25rem }:host([scale=l]) .container{--calcite-internal-chip-block-size:2.75rem ;--calcite-internal-chip-container-space-x-end:0.5rem ;--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-font-size:var(--calcite-font-size-0);--calcite-internal-chip-icon-size:2rem ;--calcite-internal-chip-icon-space:0.5rem ;--calcite-internal-chip-image-size:2rem ;--calcite-internal-chip-title-space:0.5rem ;--calcite-internal-close-size:2rem }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0.5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.375rem }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:1}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:0}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, 1.5rem);inline-size:var(--calcite-internal-chip-image-size, 1.5rem);padding-inline-start:0;padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, 0.375rem)}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity 0.15s ease-in-out, inline-size 0.15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:0.5;color:var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, 1.5rem);inline-size:var(--calcite-internal-chip-icon-size, 1.5rem)}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0px;cursor:pointer;align-items:center;border-radius:50%;border-style:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-internal-chip-close-icon-color, var(--calcite-color-text-1))));block-size:var(--calcite-internal-close-size, 1.5rem);inline-size:var(--calcite-internal-close-size, 1.5rem);padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,Pat=Cat,Tat=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=$t(this,"calciteChipClose",6),this.calciteChipSelect=$t(this,"calciteChipSelect",6),this.calciteInternalChipKeyEvent=$t(this,"calciteInternalChipKeyEvent",6),this.calciteInternalChipSelect=$t(this,"calciteInternalChipSelect",6),this.calciteInternalSyncSelectedChips=$t(this,"calciteInternalSyncSelectedChips",6),this.handleDefaultSlotChange=()=>{this.updateHasText()},this.close=()=>{this.calciteChipClose.emit(),this.selected=!1,this.closed=!0},this.closeButtonKeyDownHandler=e=>{cC(e.key)&&(e.preventDefault(),this.close())},this.handleSlotImageChange=e=>{this.hasImage=Is(e)},this.handleEmittingEvent=()=>{this.interactive&&this.calciteChipSelect.emit()},this.disabled=!1,this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.label=void 0,this.value=void 0,this.closed=!1,this.selectionMode="none",this.selected=!1,this.messageOverrides=void 0,this.messages=void 0,this.interactive=!1,this.parentChipGroup=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1,this.hasImage=!1}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}onMessagesChange(){}effectiveLocaleChange(){jc(this,this.effectiveLocale)}connectedCallback(){Pl(this),Bc(this)}componentDidLoad(){lo(this),this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}componentDidRender(){Cf(this)}disconnectedCallback(){Tl(this),Hc(this)}async componentWillLoad(){ao(this),Ef()&&(await Gc(this),this.updateHasText())}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.focus()}async setFocus(){var e,i;await co(this),!this.disabled&&this.interactive?(e=this.containerEl)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl)==null||i.focus())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return Ae("div",{class:Oa.imageContainer},Ae("slot",{name:Eat.image,onSlotchange:this.handleSlotImageChange}))}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?fT.checkedMultiple:fT.uncheckedMultiple:this.selected?fT.checkedSingle:void 0;return Ae("div",{class:{[Oa.selectIcon]:!0,[Oa.selectIconActive]:this.selectionMode==="multiple"||this.selected}},e?Ae("calcite-icon",{icon:e,scale:Xa(this.scale)}):null)}renderCloseButton(){return Ae("button",{"aria-label":this.messages.dismissLabel,class:Oa.close,onClick:this.close,onKeyDown:this.closeButtonKeyDownHandler,ref:e=>this.closeButtonEl=e,tabIndex:this.disabled?-1:0},Ae("calcite-icon",{icon:fT.close,scale:Xa(this.scale)}))}renderIcon(){return Ae("calcite-icon",{class:Oa.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:Xa(this.scale)})}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,s=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":void 0;return Ae(hr,{key:"7feca8bad37627baabfc4abd25cf135e1e9f196b"},Ae(Pf,{key:"af2360b4b768ae8c643d52f4bdb9f5d282504114",disabled:e},Ae("div",{key:"8d905c4ab20d271a211282b95ebcb2d305d76cb7","aria-checked":this.selectionMode!=="none"&&this.interactive?br(this.selected):void 0,"aria-label":this.label,class:{[Oa.container]:!0,[Oa.textSlotted]:this.hasText,[Oa.imageSlotted]:this.hasImage,[Oa.selectable]:this.selectionMode!=="none",[Oa.multiple]:this.selectionMode==="multiple",[Oa.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Oa.selected]:this.selected,[Oa.closable]:this.closable,[Oa.nonInteractive]:!this.interactive,[Oa.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)},onClick:this.handleEmittingEvent,ref:n=>this.containerEl=n,role:s,tabIndex:i?-1:0},this.selectionMode!=="none"&&this.renderSelectionIcon(),this.renderChipImage(),this.icon&&this.renderIcon(),Ae("span",{key:"dab6eae3f8330b85ffac4c7fe1b2fcbb53327196",class:Oa.title},Ae("slot",{key:"72ba5bd0c7a97c30f766da119f419261aab24acb",onSlotchange:this.handleDefaultSlotChange})),this.closable&&this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Pat}},[1,"calcite-chip",{disabled:[516],appearance:[513],kind:[513],closable:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],label:[1],value:[8],closed:[1540],selectionMode:[1,"selection-mode"],selected:[1540],messageOverrides:[1040],messages:[1040],interactive:[4],parentChipGroup:[16],defaultMessages:[32],effectiveLocale:[32],hasText:[32],hasImage:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[0,"click","clickHandler"]],{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Wye(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,Tat);break;case"calcite-icon":customElements.get(e)||uo();break}})}Wye();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const t$={slow:14e3,medium:1e4,fast:6e3},pT={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},fu={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},Iat=300;class Mat{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,s=i.indexOf(e);s!==-1&&i.splice(s,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,Iat):e.active=!1})}}const Aat=`:host{--calcite-internal-alert-edge-distance:2rem;display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-internal-alert-edge-distance) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), 0);inset-block-end:var(--calcite-internal-alert-edge-distance)}.container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), 0);inset-block-start:var(--calcite-internal-alert-edge-distance)}.container[class*=start]{inset-inline-start:var(--calcite-internal-alert-edge-distance);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-internal-alert-edge-distance);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0px;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress::after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height:3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:0.75rem}:host([scale=s]) .icon{padding-inline-start:0.75rem}:host([scale=s]) .text-container{padding-block:0.5rem;padding-inline:0.75rem 0.5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height:4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:0.75rem;padding-inline:1rem 0.75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height:5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:0.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress::after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}`,Dat=Aat,V_=new Mat,kat=Hi(class extends Bi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=$t(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=$t(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=$t(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=$t(this,"calciteAlertOpen",6),this.handleKeyBoardFocus=()=>{this.isFocused=!0,this.handleFocus()},this.handleKeyBoardBlur=()=>{this.isFocused=!1,this.isHovered||this.handleBlur()},this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.closeAlert=()=>{this.open=!1,this.clearAutoCloseTimeout()},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=Is(e)},this.handleMouseOver=()=>{this.isHovered=!0,this.handleFocus()},this.handleMouseLeave=()=>{this.isHovered=!1,this.isFocused||this.handleBlur()},this.handleFocus=()=>{this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleBlur=()=>{const e=Date.now()-this.lastMouseOverBegin,i=t$[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)},this.active=!1,this.openAlertCount=0,this.open=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.queue="last",this.defaultMessages=void 0,this.effectiveLocale="",this.numberStringFormatter=new Ine,this.hasEndActions=!1,this.isFocused=!1}handleActiveChange(){this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),t$[this.autoCloseDuration]))}openHandler(){af(this),this.open?V_.registerElement(this.el):V_.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),t$[this.autoCloseDuration]))}onMessagesChange(){}handleQueueChange(){this.open&&(V_.unregisterElement(this.el),V_.registerElement(this.el))}connectedCallback(){Pl(this),Bc(this),this.open&&V_.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}async componentWillLoad(){ao(this),await Gc(this),this.open&&af(this)}componentDidLoad(){lo(this)}disconnectedCallback(){V_.unregisterElement(this.el),this.clearAutoCloseTimeout(),Tl(this),Hc(this),this.embedded=!1}render(){const{open:e,autoClose:i,label:s,placement:n,active:r,openAlertCount:o}=this,l=i?"alert":"alertdialog",u=!e,f=r2e(Sat,this.icon,this.kind),y=o>1;return Ae(hr,{key:"cecedeaa678e4f6e22fd2aabc4d29bc8589430f6","aria-hidden":br(u),"aria-label":s,"calcite-hydrated-hidden":u,role:l},Ae("div",{key:"ca85d5f5ec313f3a305e01dcc8cbbad9647dd516",class:{[fu.container]:!0,[fu.containerActive]:r,[`${fu.container}--${n}`]:!0,[fu.containerEmbedded]:this.embedded,[fu.focused]:this.isFocused},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose?this.handleMouseLeave:null,ref:this.setTransitionEl},f&&this.renderIcon(f),Ae("div",{key:"1f72f255c3e0630eed63bb62d3d50f4a2ba6a528",class:fu.textContainer,onFocusin:this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null},Ae("slot",{key:"aade607960adea0a10f5eac85b119444085c9cf9",name:pT.title}),Ae("slot",{key:"1f47158cfbf8c0626cd49246142fb750311b1d4a",name:pT.message}),Ae("slot",{key:"5ba06e024b517f23168311828cc8ce41c21926a6",name:pT.link})),this.renderActionsEnd(),y?this.renderQueueCount():null,this.renderCloseButton(),e&&r&&i?Ae("div",{class:fu.dismissProgress}):null))}renderCloseButton(){return Ae("button",{"aria-label":this.messages.close,class:fu.close,key:"close",onClick:this.closeAlert,onFocusin:this.autoClose?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null,ref:e=>this.closeButton=e,type:"button"},Ae("calcite-icon",{icon:"x",scale:Xa(this.scale)}))}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,s=this.numberStringFormatter.numberFormatter.format(i);return Ae("div",{class:{[fu.queueCount]:!0,[fu.queueCountActive]:e>1},key:"queue-count"},Ae("calcite-chip",{scale:this.scale,value:s},s))}renderActionsEnd(){return Ae("div",{class:fu.actionsEnd},Ae("slot",{name:pT.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}))}renderIcon(e){return Ae("div",{class:fu.icon},Ae("calcite-icon",{flipRtl:this.iconFlipRtl,icon:e,scale:Xa(this.scale)}))}async setFocus(){await co(this);const e=wne(this.el,{selector:"calcite-link"});if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}effectiveLocaleChange(){jc(this,this.effectiveLocale),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}}static get style(){return Dat}},[1,"calcite-alert",{active:[4],openAlertCount:[2,"open-alert-count"],open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],embedded:[1028],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],queue:[513],defaultMessages:[32],effectiveLocale:[32],numberStringFormatter:[32],hasEndActions:[32],isFocused:[32],setFocus:[64]},void 0,{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}]);function Nat(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,kat);break;case"calcite-chip":customElements.get(e)||Wye();break;case"calcite-icon":customElements.get(e)||uo();break}})}Nat();const $at=new f7;function Oat(t,e,i){return $at.execute(t,e,i,null)}function Rat(t,e){const i=Bye(t);return Yye(Oat(Bz(t),Bz(e),Uye(i)),i)}Qse("https://js.arcgis.com/calcite-components/2.13.2/assets");const Lat=S_e.createRoot(document.getElementById("root"));Lat.render(Vt.jsxs(g_e.StrictMode,{children:[Vt.jsxs("calcite-shell",{children:[Vt.jsxs("calcite-navigation",{slot:"header",id:"header",children:[Vt.jsx("calcite-navigation-logo",{id:"header-title",slot:"logo",heading:"R-STEP Solar Panel Planning",href:"#",description:"A web toolkit for solar panel planning"}),Vt.jsxs("calcite-menu",{slot:"content-end",children:[Vt.jsx("calcite-menu-item",{text:"Map","icon-start":"globe"}),Vt.jsx("calcite-menu-item",{text:"About","icon-start":"information",id:"about-btn"}),Vt.jsx("calcite-menu-item",{text:"GitHub","icon-start":"code",href:"https://github.com/HumblePasty/rstep-siting-tool",target:"_blank",id:"about-btn"})]}),Vt.jsxs("calcite-dropdown",{id:"header-dropdown",slot:"content-end",children:[Vt.jsx("calcite-navigation-user",{id:"header-user","full-name":"Jane Doe",username:"jane.doe",slot:"trigger"}),Vt.jsx("calcite-dropdown-group",{"group-title":"User Settings","selection-mode":"none",children:Vt.jsx("calcite-dropdown-item",{onClick:zat,children:"Log out"})})]})]}),Vt.jsxs("div",{slot:"footer",id:"footer","justify-content":"center","align-items":"center",children:["Created by  ",Vt.jsx("a",{href:"https://5lakesenergy.com/",target:"_blank",children:"5 Lakes Energy LLC"}),"  |   Learn more about the  ",Vt.jsx("a",{href:"https://www.energy.gov/eere/renewable-energy-siting-through-technical-engagement-and-planning-r-steptm",target:"_blank",children:"R-STEP Program"}),"  |   Powered by  ",Vt.jsx("a",{href:"https://www.esri.com",target:"_blank",children:"Esri"}),"  |   See ",Vt.jsx("a",{target:"_self",id:"attributionLink",href:"#",children:"Attribution"}),Vt.jsx("calcite-tooltip",{"reference-element":"attributionLink",placement:"top",theme:"dark",id:"attributionTooltip"})]}),Vt.jsxs("arcgis-map",{itemId:"1d9aec5e950f46f9a35a0d399e7e0cf1",center:"-83.74, 42.27",zoom:"15",onarcgisViewReadyChange:Fat,children:[Vt.jsx("arcgis-placement",{position:"top-left",children:Vt.jsxs("calcite-action-pad",{expanded:"true",overlayPositioning:"fixed",children:[Vt.jsxs("calcite-action-group",{label:"Edit",columns:"2",children:[Vt.jsx("calcite-action",{text:"Define Solar Array",icon:"polygon",id:"AddAction"}),Vt.jsx("calcite-popover",{"reference-element":"AddAction",label:"Add",overlayPositioning:"fixed",closable:!0,children:Vt.jsx("arcgis-sketch",{id:"my-sketch",creationMode:"single",onarcgisCreate:Hat})}),Vt.jsx("calcite-action",{text:"Add Clipping Features",icon:"crop",id:"CropAction"}),Vt.jsx("calcite-popover",{"reference-element":"CropAction",label:"Crop",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsxs("calcite-action-pad",{expandDisabled:!0,expanded:!0,children:[Vt.jsx("calcite-action",{text:"Detect Building Footprints",icon:"footprint",onClick:Uat}),Vt.jsx("calcite-action",{text:"Road Segments",icon:"curve",onClick:Yat}),Vt.jsx("calcite-action",{text:"Self-defined Polyline",icon:"line",onClick:Xat}),Vt.jsx("calcite-action",{text:"Self-defined Polygon",icon:"polygon",onClick:Wat})]})}),Vt.jsx("calcite-action",{id:"EditBufferAction",text:"Create/Edit Buffers",icon:"rings",onClick:Zat,children:Vt.jsx("calcite-popover",{id:"EditBufferPopover","reference-element":"EditBufferAction",label:"Buffer",overlayPositioning:"fixed",triggerDisabled:!0,autoClose:!0,children:Vt.jsxs("calcite-label",{alignment:"center",children:["Buffer Distance",Vt.jsx("calcite-slider",{id:"BufferSlider",min:"0",max:"100",step:"1",value:"50","label-handles":!0,"label-ticks":!0,"min-label":"1","max-label":"100"})]})})}),Vt.jsx("calcite-action",{text:"View Clipped Results",icon:"view-visible",onClick:Jat}),Vt.jsx("calcite-action",{id:"ClearAction",text:"Clear Solar Array",icon:"trash",onClick:Bat,disabled:!0})]}),Vt.jsxs("calcite-action-group",{children:[Vt.jsx("calcite-action",{text:"Upload Layer",icon:"upload",onClick:qat}),Vt.jsx("calcite-action",{text:"Edit Layer",icon:"pencil",id:"EditAction"}),Vt.jsx("calcite-popover",{"reference-element":"EditAction",label:"Edit",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsx("arcgis-editor",{})})]}),Vt.jsxs("calcite-action-group",{children:[Vt.jsx("calcite-action",{text:"Import from File",icon:"upload",onClick:Gat}),Vt.jsx("calcite-action",{id:"ExportAction",text:"Export Results",icon:"download",onClick:jat,disabled:!0})]}),Vt.jsx("calcite-tooltip",{slot:"expand-tooltip",children:"Toggle Action Bar"})]})}),Vt.jsx("arcgis-placement",{position:"top-right",children:Vt.jsxs("calcite-action-pad",{expanded:"false",overlayPositioning:"fixed",id:"map-views-pad",children:[Vt.jsx("calcite-action",{text:"Basemap",icon:"basemap",id:"BasemapAction"}),Vt.jsx("calcite-popover",{"reference-element":"BasemapAction",label:"Basemap",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsx("arcgis-basemap-gallery",{})}),Vt.jsx("calcite-action",{text:"Layer List",icon:"layers",id:"LayerListAction"}),Vt.jsx("calcite-popover",{"reference-element":"LayerListAction",label:"Layer List",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsx("arcgis-layer-list",{dragEnabled:!0})}),Vt.jsx("calcite-action",{text:"Legend",icon:"legend",id:"LegendAction"}),Vt.jsx("calcite-popover",{"reference-element":"LegendAction",label:"Legend",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsx("arcgis-legend",{})}),Vt.jsx("calcite-action",{text:"Measure Distance",icon:"measure-line",id:"MeasureDistanceAction"}),Vt.jsx("calcite-popover",{"reference-element":"MeasureDistanceAction",label:"Measure Distance",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsx("arcgis-distance-measurement-2d",{})}),Vt.jsx("calcite-action",{text:"Measure Area",icon:"measure-area",id:"MeasureAreaAction"}),Vt.jsx("calcite-popover",{"reference-element":"MeasureAreaAction",label:"Measure Area",overlayPositioning:"fixed",autoClose:!0,children:Vt.jsx("arcgis-area-measurement-2d",{})})]})}),Vt.jsx("arcgis-placement",{position:"mannual",children:Vt.jsx("calcite-fab",{id:"bottom-panel-toggle",onClick:()=>{document.querySelector("#bottom-panel").collapsed=!document.querySelector("#bottom-panel").collapsed}})})]}),Vt.jsx("calcite-shell-panel",{id:"bottom-panel",position:"end",slot:"panel-bottom",collapsed:!0,resizable:!0,children:"Text"})]}),Vt.jsxs("calcite-dialog",{modal:!0,heading:"About",id:"about-dialog",slot:"dialog",children:[Vt.jsx("calcite-label",{children:"This is a web toolkit for solar panel planning."}),Vt.jsxs("ul",{children:[Vt.jsx("li",{children:"Start by adding a polygon to the map to represent a solar panel array."}),Vt.jsx("li",{children:'Use the "Edit Layers" button to edit the polygon or other layers on the map.'}),Vt.jsx("li",{children:"You can also import and export GeoJSON files to save and share your work."}),Vt.jsx("li",{children:'Use the "Clear" button to remove all the graphics from the map.'}),Vt.jsx("li",{children:"TBD..."})]})]}),Vt.jsxs("calcite-alert",{icon:"smile",id:"buffer-alert",scale:"m",autoCloseDuration:"fast",autoClose:!0,children:[Vt.jsx("div",{slot:"title",children:"Buffer Editing"}),Vt.jsxs("div",{slot:"message",children:["Please select a feature from the ",Vt.jsx("b",{children:'"Clipping Features"'})," Layer to continue"]}),Vt.jsx("calcite-button",{slot:"controls",appearance:"clear",children:"Close"})]})]}));function Fat(t){const e=new Lc;e.authMode="immediate",e.load().then(()=>{document.querySelector("#header-user").fullName=e.user.fullName,document.querySelector("#header-user").username=e.user.username,document.querySelector("#header-user").avatarUrl=e.user.thumbnailUrl});const i=document.getElementById("about-btn"),s=document.getElementById("about-dialog");i.addEventListener("click",()=>{s.open=!0});const n=t.target.map;n.allLayers.forEach(S=>{S.title==="Regrid_Nationwide_Parcel_Boundaries_May24"&&(S.visible=!1),S.title==="Michigan"&&(S.visible=!1),S.title==="Michigan Counties"&&(S.visible=!1)});const r=n.allLayers.find(S=>S.title==="Substations");n.remove(r);const o=document.querySelector("#my-sketch").layer;o.title="Solar Array";const l=new YO({title:"Solar Data",visible:!0,visibilityMode:"independent",layers:[]}),u=n.allLayers.filter(S=>S.title!=="Solar Array"&&S.title!=="World Topographic Map"&&S.title!=="World Hillshade");l.addMany(u),n.add(l);const f=new YO({title:"Clipping Features",visible:!0,visibilityMode:"independent",layers:[]});n.add(f),document.querySelector("#BufferSlider").addEventListener("calciteSliderChange",Kat);const _=document.querySelector("arcgis-map").view.ui.find("attribution");_.visible=!1,document.getElementById("attributionTooltip").addEventListener("calciteTooltipBeforeOpen",S=>{console.log("Tooltip before open",S),document.getElementById("attributionTooltip").innerHTML=_.attributionText})}function zat(){_V.destroyCredentials(),window.location.reload()}function qat(){const t="https://www.arcgis.com",e=document.querySelector("arcgis-map").view,i=document.createElement("input");i.type="file",i.accept=".zip",i.onchange=s=>{const n=s.target.files[0],r=new FileReader;r.onload=o=>{const l={name:n.name,targetSR:e.spatialReference,maxRecordCount:1e3,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},u=e.resolution;l.generalize=!0,l.maxAllowableOffset=u,l.reducePrecision=!0,l.numberOfDigitsAfterDecimal=0;const f=new FormData;f.append("filetype","shapefile"),f.append("publishParameters",JSON.stringify(l)),f.append("f","json"),f.append("file",n),Qs(t+"/sharing/rest/content/features/generate",{method:"POST",body:f}).then(function(y){if(console.log(y),!y&&y.error){console.error(y.error);return}Vat(y.data.featureCollection)})},r.readAsArrayBuffer(n)},i.click()}function Vat(t){var e=[];t.layers.forEach(function(s){var n=new KC({objectIdField:"ObjectID"});switch(s.featureSet.geometryType){case"esriGeometryPoint":s.featureSet.features.forEach(function(r){r.geometry=new Yi({x:r.geometry.x,y:r.geometry.y,spatialReference:r.geometry.spatialReference})}),n.renderer={type:"simple",symbol:{type:"simple-marker",size:6,color:"black"}};break;case"esriGeometryPolygon":s.featureSet.features.forEach(function(r){r.geometry=new Za({rings:r.geometry.rings,spatialReference:r.geometry.spatialReference})}),n.renderer={type:"simple",symbol:{type:"simple-fill",size:6,color:"black"}};break;case"esriGeometryPolyline":s.featureSet.features.forEach(function(r){r.geometry=new If({paths:r.geometry.paths,spatialReference:r.geometry.spatialReference})}),n.renderer={type:"simple",symbol:{type:"simple-line",size:6,color:"white"}};break;default:console.log("Not a valid shapefile")}n.source=s.featureSet.features,e.push(n)}),document.querySelector("arcgis-map").map.addMany(e)}function Gat(){const t=document.createElement("input");t.type="file",t.accept=".geojson",t.onchange=e=>{const i=e.target.files[0],s=new FileReader;s.onload=n=>{const r=JSON.parse(n.target.result);console.log(r),document.querySelector("#my-sketch").layer.addMany(r.features)},s.readAsText(i)},t.click()}function jat(){const i={type:"FeatureCollection",features:document.querySelector("#my-sketch").layer.graphics.map(o=>o.toJSON())},s=new Blob([JSON.stringify(i)],{type:"application/json"}),n=URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="sketch.geojson",r.click()}function Bat(){document.querySelector("#my-sketch").layer.removeAll(),document.querySelector("#ExportAction").disabled=!0,document.querySelector("#ClearAction").disabled=!0}function Hat(t){document.querySelector("#my-sketch").layer.graphics.on("after-changes",i=>{document.querySelector("#ExportAction").disabled=i.length===0,document.querySelector("#ClearAction").disabled=i.length===0})}function Uat(){const t=document.querySelector("arcgis-map").view,e=new a5({layer:new Wg({title:"Building Footprints"}),view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polygon"),e.layer.graphics.on("after-add",i=>{i.item})}function Yat(){const t=document.querySelector("arcgis-map").view,e=document.querySelector("arcgis-map").map,i=new a5({layer:new Wg({title:"Roads"}),view:t,creationMode:"single",updateOnGraphicClick:!0});i.create("rectangle"),i.layer.graphics.on("after-add",s=>{const n=s.item,r=e.allLayers.find(l=>l.title==="All Roads"),o=r.createQuery();o.geometry=n.geometry,o.spatialRelationship="intersects",r.queryFeatures(o).then(l=>{const u=e.allLayers.find(f=>f.title==="Clipping Features");if(u.allLayers.find(f=>f.title==="Selected Roads")){const f=u.allLayers.find(_=>_.title==="Selected Roads"),y={addFeatures:l.features};f.applyEdits(y)}else{const f=new KC({source:l.features,fields:l.fields,objectIdField:"OBJECTID",title:"Selected Roads",geometryType:l.geometryType,renderer:r.renderer,popupTemplate:r.popupTemplate});u.add(f)}})})}function Xat(){const t=document.querySelector("arcgis-map").view,e=new a5({layer:new Wg,view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polyline");const i=document.querySelector("arcgis-map").map.allLayers.find(s=>s.title==="Clipping Features");e.layer.graphics.on("after-add",s=>{let n=s.item;if(i.allLayers.find(r=>r.title==="Selected Polyline")){const r=i.allLayers.find(o=>o.title==="Selected Polyline");r.queryFeatureCount().then(o=>{n.attributes={id:o+1,name:`Self Defined Polyline ${o+1}`};const l={addFeatures:[n]};r.applyEdits(l)})}else{n.attributes={id:1,name:"Self Defined Polyline 1"};const r={title:"Delete",id:"delete-this",className:"esri-icon-trash"},o=new KC({source:[n],fields:[{name:"OBJECTID",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"}],objectIdField:"OBJECTID",title:"Selected Polyline",geometryType:n.geometry.type,popupTemplate:{actions:[r],title:"{name}",content:"This is a self-defined polyline"}});i.add(o)}mf(()=>t.popup,"trigger-action",r=>{if(r.action.id==="delete-this"){const o=t.popup.selectedFeature;o.layer.applyEdits({deleteFeatures:[o]}),t.popup.close()}})})}function Wat(){const t=document.querySelector("arcgis-map").view,e=new a5({layer:new Wg,view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polygon");const i=document.querySelector("arcgis-map").map.allLayers.find(s=>s.title==="Clipping Features");e.layer.graphics.on("after-add",s=>{let n=s.item;if(i.allLayers.find(r=>r.title==="Selected Polygon")){const r=i.allLayers.find(o=>o.title==="Selected Polygon");r.queryFeatureCount().then(o=>{n.attributes={id:o+1,name:`Self Defined Polygon ${o+1}`};const l={addFeatures:[n]};r.applyEdits(l)})}else{n.attributes={id:1,name:"Self Defined Polygon 1"};const r={title:"Delete",id:"delete-this",className:"esri-icon-trash"},o=new KC({source:[n],fields:[{name:"OBJECTID",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"}],objectIdField:"OBJECTID",title:"Selected Polygon",geometryType:n.geometry.type,popupTemplate:{actions:[r],title:"{name}",content:"This is a self-defined polygon"}});i.add(o)}mf(()=>t.popup,"trigger-action",r=>{if(r.action.id==="delete-this"){const o=t.popup.selectedFeature;o.layer.applyEdits({deleteFeatures:[o]}),t.popup.close()}})})}function Zat(){const t=document.querySelector("#EditBufferPopover");if(t.open){t.open=!1;return}const e=document.querySelector("arcgis-map").view;if(!e.map.allLayers.find(i=>i.title==="Buffers")){const i=new Wg({title:"Buffers"});e.map.add(i)}Object.keys(e.popup).length===0||e.popup.visible===!1?(console.log("No popup"),document.querySelector("#buffer-alert").open=!0):t.open=!0}function Kat(t){const e=document.querySelector("arcgis-map").view,i=e.popup.features;e.map.allLayers.find(o=>o.title==="Clipping Features");const s=e.map.allLayers.find(o=>o.title==="Buffers");var n=t.target.value;const r=i.map(o=>{const l=o.geometry.clone(),u=wat(l,n);return new tm({geometry:u,symbol:{type:"simple-fill",color:[0,0,0,.5],outline:{color:[0,0,0,1],width:1}}})});s.addMany(r)}function Jat(){const t=document.querySelector("#my-sketch").layer,e=document.querySelector("arcgis-map").map.allLayers.find(o=>o.title==="Buffers"),i=t.graphics,s=e.graphics,n=Rat(i.items[0].geometry,s.items[0].geometry);console.log("Clipped Graphics",n);const r=new Wg({title:"Clipped Result"});r.addMany(n),document.querySelector("arcgis-map").map.add(r)}export{ht as $,Hxe as A,kft as B,dV as C,wTe as D,Ft as E,yl as F,qi as G,XX as H,Sxe as I,cd as J,Eqe as K,Ift as L,zt as M,gM as N,Dft as O,Ql as P,Hft as Q,Lc as R,AS as S,vl as T,pV as U,aut as V,Eq as W,b2 as X,Qs as Y,qut as Z,nt as _,oOe as a,Udt as a$,Ue as a0,aLe as a1,lLe as a2,cLe as a3,ype as a4,Hg as a5,wt as a6,Nt as a7,Hue as a8,_l as a9,HWe as aA,Vke as aB,Gr as aC,Eo as aD,Wje as aE,Wb as aF,If as aG,Lue as aH,PV as aI,Rue as aJ,dK as aK,Npt as aL,pdt as aM,$dt as aN,Odt as aO,yC as aP,Gs as aQ,v6 as aR,iF as aS,Co as aT,Ul as aU,joe as aV,or as aW,Cq as aX,Iv as aY,fi as aZ,GPe as a_,ic as aa,VG as ab,Z0e as ac,mv as ad,Gke as ae,Que as af,i8e as ag,B0t as ah,j0t as ai,Tc as aj,ci as ak,tm as al,kht as am,lE as an,pft as ao,w2 as ap,Jo as aq,tv as ar,td as as,Jl as at,mue as au,mke as av,gke as aw,Kue as ax,K0e as ay,DDe as az,rt as b,Dyt as b$,Vu as b0,no as b1,Ko as b2,Yl as b3,ml as b4,IC as b5,mi as b6,nVe as b7,FTe as b8,dht as b9,bf as bA,JUe as bB,f0e as bC,pm as bD,qA as bE,hn as bF,kt as bG,T7e as bH,PE as bI,yce as bJ,xht as bK,s4 as bL,Sg as bM,vft as bN,uv as bO,zNe as bP,XNe as bQ,Sht as bR,sAe as bS,iAe as bT,tAe as bU,FNe as bV,dft as bW,fft as bX,pf as bY,Ei as bZ,tee as b_,Z9 as ba,yM as bb,rje as bc,NG as bd,cn as be,rht as bf,aht as bg,nht as bh,oht as bi,lht as bj,cht as bk,Xu as bl,Yi as bm,xC as bn,Po as bo,r1t as bp,vr as bq,mje as br,Vg as bs,Wu as bt,_6 as bu,mJ as bv,hJ as bw,zc as bx,Al as by,ZUe as bz,ff as c,gm as c$,Sa as c0,KC as c1,Nmt as c2,Omt as c3,$mt as c4,NFe as c5,kFe as c6,mx as c7,oIe as c8,xze as c9,YGe as cA,vq as cB,_q as cC,Ov as cD,cft as cE,XM as cF,PM as cG,TM as cH,Yq as cI,Xq as cJ,HIe as cK,UIe as cL,ps as cM,Nq as cN,Hs as cO,DC as cP,kV as cQ,zGe as cR,Uhe as cS,dde as cT,jV as cU,bV as cV,GM as cW,r$e as cX,i$e as cY,Ea as cZ,jC as c_,p0t as ca,pmt as cb,mK as cc,LS as cd,jR as ce,bze as cf,m0t as cg,g0t as ch,wG as ci,hi as cj,ur as ck,mhe as cl,g8e as cm,y8e as cn,bhe as co,A_ as cp,xLe as cq,Zp as cr,Qut as cs,tg as ct,Ui as cu,$qe as cv,Fut as cw,Tft as cx,Oh as cy,Li as cz,WC as d,el as d$,t$e as d0,gf as d1,yx as d2,nde as d3,em as d4,cE as d5,zn as d6,Za as d7,V9 as d8,Y$ as d9,NV as dA,Y8e as dB,zpe as dC,Rut as dD,y0t as dE,FC as dF,ST as dG,zC as dH,kdt as dI,mpt as dJ,Opt as dK,IR as dL,Jp as dM,b9 as dN,Iq as dO,kpt as dP,Idt as dQ,Fy as dR,S$ as dS,ioe as dT,jIe as dU,t0t as dV,o0t as dW,DZ as dX,r0t as dY,oke as dZ,$A as d_,W$ as da,D2 as db,Hb as dc,zqe as dd,qqe as de,Dqe as df,$r as dg,Wl as dh,hme as di,gx as dj,Rje as dk,Lje as dl,Zl as dm,Lgt as dn,$gt as dp,Rgt as dq,s$e as dr,Ydt as ds,_M as dt,$C as du,mE as dv,Q0 as dw,Dc as dx,U8e as dy,CM as dz,cOe as e,F0t as e$,k1t as e0,Es as e1,sd as e2,I1t as e3,uHe as e4,T1t as e5,qg as e6,A1t as e7,qc as e8,the as e9,Y$e as eA,gdt as eB,Mdt as eC,Ja as eD,ed as eE,Wg as eF,s6 as eG,k9 as eH,Oue as eI,Adt as eJ,vDe as eK,Tqe as eL,_fe as eM,ile as eN,Bae as eO,hNe as eP,OV as eQ,qNe as eR,yft as eS,Ou as eT,mft as eU,Lhe as eV,moe as eW,poe as eX,ndt as eY,Qy as eZ,xpe as e_,Wo as ea,HS as eb,Vn as ec,BG as ed,Xg as ee,N1t as ef,Mme as eg,kme as eh,NI as ei,$1t as ej,OF as ek,xV as el,O1t as em,V1t as en,EA as eo,Yh as ep,R2 as eq,VGe as er,Zut as es,Pg as et,uDe as eu,UGe as ev,W9 as ew,wn as ex,xx as ey,vdt as ez,aOe as f,Mxe as f$,kK as f0,DK as f1,Bct as f2,jct as f3,tIe as f4,Vl as f5,qq as f6,RC as f7,ZDe as f8,hft as f9,co as fA,nM as fB,jc as fC,oC as fD,Pl as fE,Bc as fF,Tl as fG,Hc as fH,aC as fI,Gc as fJ,ao as fK,lo as fL,Cf as fM,Ae as fN,wne as fO,nq as fP,br as fQ,Pf as fR,hr as fS,uq as fT,ix as fU,Uc as fV,dC as fW,JSe as fX,QSe as fY,wl as fZ,r2e as f_,CZ as fa,P2 as fb,j9 as fc,pBe as fd,yBe as fe,ygt as ff,uoe as fg,doe as fh,foe as fi,Ict as fj,DPe as fk,Uct as fl,Gq as fm,LI as fn,Nyt as fo,Apt as fp,vpt as fq,$De as fr,kc as fs,Fct as ft,Hi as fu,Bi as fv,$t as fw,Is as fx,xSe as fy,af as fz,um as g,mOe as g$,Yne as g0,W2e as g1,fY as g2,Qz as g3,slt as g4,Ene as g5,fS as g6,nlt as g7,rlt as g8,Io as g9,KUe as gA,$I as gB,To as gC,Xje as gD,EYe as gE,PNe as gF,RM as gG,udt as gH,Soe as gI,Out as gJ,Gut as gK,CQ as gL,rdt as gM,xL as gN,cut as gO,jS as gP,Oi as gQ,age as gR,mf as gS,Xl as gT,Ex as gU,ame as gV,QM as gW,fde as gX,oue as gY,KTe as gZ,gO as g_,oM as ga,K2e as gb,txe as gc,Fne as gd,Q2e as ge,Vs as gf,Gp as gg,Xa as gh,qne as gi,Bl as gj,sxe as gk,Ef as gl,v3e as gm,u9 as gn,cre as go,v$ as gp,g3e as gq,m3e as gr,s3e as gs,e2e as gt,Pxe as gu,Sat as gv,AXe as gw,H$e as gx,Cme as gy,m1t as gz,CPe as h,kg as h$,SZ as h0,Ab as h1,ZM as h2,q0t as h3,exe as h4,Yp as h5,zSe as h6,Tat as h7,Wye as h8,Yn as h9,Fpt as hA,Zmt as hB,Yfe as hC,GSe as hD,ASe as hE,Qat as hF,yS as hG,y$ as hH,are as hI,lre as hJ,Sct as hK,Cvt as hL,sEe as hM,nEe as hN,lX as hO,Rre as hP,ict as hQ,nct as hR,Nu as hS,wEe as hT,sct as hU,Dv as hV,MC as hW,CT as hX,Q8 as hY,XUe as hZ,WUe as h_,Tre as ha,yEe as hb,Ore as hc,RSe as hd,bSe as he,lm as hf,Sre as hg,gxe as hh,elt as hi,tlt as hj,Pb as hk,D3e as hl,YU as hm,Rne as hn,cq as ho,dM as hp,m2 as hq,Mw as hr,alt as hs,Wut as ht,zy as hu,wpt as hv,Lpt as hw,ILe as hx,cm as hy,SFe as hz,rOe as i,Lft as i$,c0e as i0,zv as i1,_C as i2,Ngt as i3,yee as i4,_1t as i5,y1t as i6,out as i7,HBe as i8,PPe as i9,AC as iA,ET as iB,BO as iC,Mb as iD,MM as iE,Ndt as iF,ox as iG,fBe as iH,zhe as iI,cmt as iJ,Hdt as iK,wA as iL,Fvt as iM,fme as iN,Bue as iO,EC as iP,Zpt as iQ,Ic as iR,Tht as iS,OZ as iT,pke as iU,Oqe as iV,SG as iW,Lqe as iX,Fqe as iY,JZ as iZ,Rft as i_,Mv as ia,BPe as ib,sr as ic,Wct as id,Eg as ie,TAe as ig,fx as ih,dx as ii,Xee as ij,t_t as ik,Cg as il,J$e as im,jT as io,uht as ip,Vut as iq,SC as ir,MVe as is,Cqe as it,G0t as iu,Gqe as iv,V0t as iw,Vqe as ix,v4e as iy,nj as iz,uo as j,Kht as j$,Qe as j0,kke as j1,E$e as j2,BM as j3,rmt as j4,lv as j5,DGe as j6,TGe as j7,iVe as j8,GZ as j9,Fg as jA,Dme as jB,hpt as jC,upt as jD,KOe as jE,VM as jF,MHe as jG,hdt as jH,hHe as jI,ght as jJ,gW as jK,Gae as jL,jae as jM,cr as jN,Uyt as jO,ldt as jP,Tke as jQ,Jue as jR,eHe as jS,NF as jT,ehe as jU,VIe as jV,nf as jW,wE as jX,TG as jY,a$e as jZ,o$e as j_,Ihe as ja,XGe as jb,l$e as jc,GGe as jd,zV as je,Z8 as jf,vA as jg,VO as jh,FV as ji,Cze as jj,fA as jk,e$e as jl,kG as jm,Mut as jn,zct as jo,Nme as jp,DA as jq,yHe as jr,fHe as js,Hje as jt,mHe as ju,$G as jv,mdt as jw,MZ as jx,Bpe as jy,aIe as jz,xi as k,XF as k$,n$e as k0,PA as k1,Hpe as k2,xWe as k3,e5 as k4,QC as k5,Sgt as k6,eee as k7,jF as k8,$v as k9,lUe as kA,uut as kB,hut as kC,CG as kD,pHe as kE,_He as kF,bHe as kG,wHe as kH,YX as kI,v8 as kJ,Qh as kK,dg as kL,Ty as kM,fIe as kN,vM as kO,Qp as kP,v9 as kQ,c$ as kR,llt as kS,k2e as kT,eq as kU,Yct as kV,ua as kW,uAe as kX,R9e as kY,Tme as kZ,ZF as k_,AA as ka,kY as kb,cC as kc,f$e as kd,mYe as ke,Qqe as kf,b1t as kg,c$e as kh,Wa as ki,IAe as kj,see as kk,eYe as kl,PUe as km,E6 as kn,nYe as ko,Dg as kp,g1t as kq,oo as kr,tde as ks,xS as kt,Nct as ku,KWe as kv,$F as kw,HG as kx,Go as ky,ZHe as kz,jft as l,LVe as l$,HF as l0,w0e as l1,TE as l2,uN as l3,Emt as l4,sA as l5,wmt as l6,bL as l7,sBe as l8,yWe as l9,xHe as lA,vm as lB,BLe as lC,Khe as lD,GIe as lE,Wq as lF,Oje as lG,cme as lH,qpe as lI,Eut as lJ,eqe as lK,QVe as lL,Hqe as lM,dVe as lN,NVe as lO,wVe as lP,N9 as lQ,Cae as lR,iOe as lS,vfe as lT,Vft as lU,Dpe as lV,Mq as lW,mb as lX,Sl as lY,cVe as lZ,ogt as l_,_We as la,U0e as lb,wgt as lc,bWe as ld,vWe as le,bXe as lf,svt as lg,QYe as lh,eht as li,Wae as lj,vht as lk,SOe as ll,goe as lm,$ct as ln,C4e as lo,Rc as lp,sHe as lq,XBe as lr,fke as ls,hke as lt,tZe as lu,E1t as lv,$je as lw,eBe as lx,m6 as ly,THe as lz,ds as m,ypt as m$,FVe as m0,$h as m1,nx as m2,yfe as m3,_G as m4,ym as m5,Mmt as m6,SVe as m7,PVe as m8,pfe as m9,ju as mA,nHe as mB,Ame as mC,Rme as mD,z1t as mE,s5 as mF,iUe as mG,Cx as mH,mgt as mI,edt as mJ,uue as mK,Fn as mL,WNe as mM,l6 as mN,wct as mO,bke as mP,uj as mQ,A6 as mR,Bvt as mS,Kvt as mT,qce as mU,tKe as mV,uA as mW,ax as mX,Fc as mY,_I as mZ,ZV as m_,ffe as ma,dfe as mb,QNe as mc,AVe as md,uVe as me,hVe as mf,pVe as mg,mVe as mh,CVe as mi,gVe as mj,yVe as mk,vVe as ml,_Ve as mm,bVe as mn,xVe as mo,jpe as mp,lK as mq,Toe as mr,sx as ms,sde as mt,Uo as mu,z0t as mv,$Te as mw,q1t as mx,R1t as my,rHe as mz,ec as n,nBe as n$,ppt as n0,_me as n1,CYe as n2,xue as n3,hV as n4,Pdt as n5,ole as n6,M9e as n7,Hyt as n8,IPe as n9,Cdt as nA,Uoe as nB,vut as nC,yut as nD,kAe as nE,D4e as nF,Yoe as nG,bdt as nH,kct as nI,APe as nJ,kyt as nK,Yee as nL,oge as nM,hv as nN,X0e as nO,AWe as nP,PWe as nQ,DWe as nR,MWe as nS,Lht as nT,bFe as nU,HC as nV,Vpt as nW,zpt as nX,Pme as nY,JC as nZ,v1t as n_,ume as na,Aje as nb,KHe as nc,n1t as nd,Yvt as ne,Uvt as nf,Qvt as ng,Xvt as nh,Wvt as ni,e_t as nj,Hvt as nk,oKe as nl,Jvt as nm,KZe as nn,Zvt as no,Afe as np,fs as nq,yT as nr,P9e as ns,N9e as nt,rle as nu,yht as nv,Ee as nw,Jut as nx,zp as ny,xAe as nz,N as o,wlt as o$,dgt as o0,hgt as o1,oBe as o2,xA as o3,vf as o4,Wme as o5,qn as o6,j1t as o7,QUe as o8,C6 as o9,tdt as oA,vC as oB,Dde as oC,q0e as oD,dG as oE,Twe as oF,m$ as oG,c9 as oH,CY as oI,Alt as oJ,Mlt as oK,Dlt as oL,bwe as oM,Clt as oN,Ilt as oO,Tlt as oP,Wbe as oQ,L_e as oR,K0 as oS,s2e as oT,u2e as oU,qr as oV,Rlt as oW,Slt as oX,xwe as oY,l$ as oZ,blt as o_,Yg as oa,im as ob,Wh as oc,OG as od,B1t as oe,tYe as of,SDe as og,wDe as oh,hmt as oi,dmt as oj,umt as ok,sM as ol,Uz as om,olt as on,QTe as oo,Av as op,Rct as oq,Lct as or,Oct as os,$u as ot,eKe as ou,bde as ov,_de as ow,LC as ox,e0t as oy,Nue as oz,ke as p,Mg as p$,xlt as p0,wwe as p1,zlt as p2,$lt as p3,Nlt as p4,Olt as p5,Llt as p6,Flt as p7,Elt as p8,klt as p9,zQ as pA,pg as pB,qGe as pC,ddt as pD,Af as pE,y0e as pF,uge as pG,Ob as pH,$ke as pI,KBe as pJ,Pke as pK,Ike as pL,ADe as pM,qp as pN,qde as pO,tG as pP,_x as pQ,yRe as pR,pXe as pS,wa as pT,wht as pU,Kqe as pV,Wqe as pW,Zqe as pX,A4e as pY,Wd as pZ,_he as p_,clt as pa,Plt as pb,ult as pc,omt as pd,a6 as pe,LV as pf,fOe as pg,dOe as ph,uOe as pi,$ht as pj,Oht as pk,fZ as pl,qct as pm,T2 as pn,r6 as po,Zdt as pp,o6 as pq,Nft as pr,boe as ps,Zze as pt,Kdt as pu,NOe as pv,f6 as pw,sft as px,kVe as py,Ogt as pz,VPe as q,GA as q$,G8e as q0,j8e as q1,tVe as q2,mGe as q3,AGe as q4,hoe as q5,Tae as q6,$ut as q7,Hae as q8,oW as q9,Jpe as qA,odt as qB,Rdt as qC,Lut as qD,wC as qE,Goe as qF,v2 as qG,fpt as qH,dpt as qI,Fq as qJ,PYe as qK,jke as qL,qke as qM,qje as qN,zke as qO,tRe as qP,Byt as qQ,Poe as qR,Fu as qS,hG as qT,FRe as qU,cZe as qV,tHe as qW,JWe as qX,k_ as qY,VHe as qZ,MYe as q_,yhe as qa,jut as qb,K0t as qc,aje as qd,pgt as qe,rBe as qf,_gt as qg,so as qh,KQ as qi,vgt as qj,fgt as qk,sle as ql,hht as qm,Ag as qn,L1t as qo,Put as qp,kWe as qq,tme as qr,Kpe as qs,Ype as qt,Zpe as qu,bmt as qv,MLe as qw,fdt as qx,gHe as qy,Bu as qz,I as r,wdt as r$,Q$e as r0,Qht as r1,Jht as r2,qC as r3,VC as r4,GC as r5,eFe as r6,nFe as r7,Dke as r8,Mke as r9,vZe as rA,UA as rB,Nvt as rC,FI as rD,kvt as rE,S1t as rF,uje as rG,hje as rH,qYe as rI,HYe as rJ,YYe as rK,XYe as rL,kF as rM,Upe as rN,Cct as rO,EPe as rP,Ect as rQ,P1t as rR,YHe as rS,C1t as rT,xpt as rU,bpt as rV,SHe as rW,ev as rX,mht as rY,cdt as rZ,TZ as r_,Ake as ra,Tx as rb,jA as rc,fy as rd,vme as re,os as rf,_vt as rg,xvt as rh,x0e as ri,Lyt as rj,Dvt as rk,i5 as rl,qG as rm,Ah as rn,_2 as ro,tht as rp,xmt as rq,xFe as rr,MA as rs,Cgt as rt,bgt as ru,uvt as rv,Tq as rw,_Ze as rx,bZe as ry,yZe as rz,hde as s,bl as s$,Edt as s0,Mft as s1,Pft as s2,Eft as s3,p$e as s4,Ryt as s5,Nht as s6,lA as s7,oDe as s8,_ft as s9,Che as sA,Kp as sB,av as sC,aNe as sD,nGe as sE,G1t as sF,zg as sG,w1t as sH,UC as sI,xdt as sJ,Rpt as sK,Wht as sL,Kmt as sM,NK as sN,vje as sO,sO as sP,TWe as sQ,xo as sR,WM as sS,n0t as sT,OK as sU,eVe as sV,uft as sW,rft as sX,aft as sY,oft as sZ,lft as s_,VRe as sa,wft as sb,hDe as sc,Sde as sd,Sft as se,Rqe as sf,Kut as sg,Jfe as sh,gze as si,Kpt as sj,Jpt as sk,Qpt as sl,Xqe as sm,T4e as sn,Sx as so,rG as sp,kRe as sq,DRe as sr,sfe as ss,QRe as st,cfe as su,u6 as sv,efe as sw,zS as sx,xke as sy,Fdt as sz,Sn as t,zJ as t$,DX as t0,nft as t1,Hq as t2,Bq as t3,J$ as t4,Eht as t5,Q$ as t6,q9 as t7,z9 as t8,_f as t9,eJ as tA,WK as tB,gDe as tC,ZK as tD,zFe as tE,dJ as tF,KK as tG,Ddt as tH,sJ as tI,bJ as tJ,xJ as tK,wJ as tL,LDe as tM,idt as tN,yDe as tO,SJ as tP,sdt as tQ,Rmt as tR,Jmt as tS,Lmt as tT,SL as tU,Wmt as tV,Umt as tW,Hmt as tX,Ymt as tY,Xmt as tZ,FJ as t_,bA as ta,Wgt as tb,sht as tc,iht as td,i9e as te,nDe as tf,P4e as tg,HZe as th,zht as ti,qdt as tj,CE as tk,Pgt as tl,ele as tm,G9 as tn,s9e as to,sje as tp,ZBe as tq,BV as tr,Tct as ts,TOe as tt,gE as tu,vE as tv,$2 as tw,POe as tx,agt as ty,bYe as tz,Gft as u,Xdt as u$,qJ as u0,Bmt as u1,jmt as u2,kJ as u3,UK as u4,$J as u5,DJ as u6,nJ as u7,zK as u8,FK as u9,EM as uA,Gpe as uB,jBe as uC,DTe as uD,hIe as uE,G8 as uF,jqe as uG,Bqe as uH,oVe as uI,p1t as uJ,Tdt as uK,vue as uL,sFe as uM,Wke as uN,fje as uO,Yue as uP,Xke as uQ,HHe as uR,T$e as uS,Cje as uT,JVe as uU,rNe as uV,X8e as uW,ENe as uX,khe as uY,nNe as uZ,gft as u_,LK as ua,HK as ub,ydt as uc,Vmt as ud,Gmt as ue,u9e as uf,c9e as ug,fht as uh,W4e as ui,Qmt as uj,wL as uk,Fmt as ul,Lfe as um,Dmt as un,qmt as uo,qFe as up,RFe as uq,zmt as ur,OFe as us,dA as ut,P6 as uu,FFe as uv,kmt as uw,gut as ux,zut as uy,EHe as uz,Rht as v,Zht as v$,tft as v0,eft as v1,ift as v2,zce as v3,Fhe as v4,Kze as v5,M0t as v6,Jze as v7,LNe as v8,J8e as v9,IHe as vA,Uue as vB,r8e as vC,n8e as vD,Qje as vE,Ipt as vF,Mpt as vG,yIe as vH,yAe as vI,Pht as vJ,lut as vK,DI as vL,Bft as vM,Cft as vN,_ut as vO,Sme as vP,Ap as vQ,m4e as vR,uBe as vS,U$ as vT,SA as vU,$We as vV,NWe as vW,Y0e as vX,y9e as vY,mvt as vZ,xc as v_,YM as va,eNe as vb,Wdt as vc,tNe as vd,Jdt as ve,Qdt as vf,Aft as vg,E9 as vh,GRe as vi,aA as vj,_yt as vk,vyt as vl,Pct as vm,Ahe as vn,pYe as vo,IA as vp,but as vq,Whe as vr,VA as vs,UZe as vt,uKe as vu,TA as vv,D0t as vw,hqe as vx,u0t as vy,c0t as vz,ni as w,gpt as w$,w9e as w0,hYe as w1,fh as w2,_ue as w3,bue as w4,xyt as w5,byt as w6,RX as w7,R0t as w8,BBe as w9,Spt as wA,Vct as wB,Upt as wC,Hpt as wD,Dct as wE,_pt as wF,_dt as wG,Dpt as wH,Dgt as wI,xgt as wJ,JRe as wK,NBe as wL,I6 as wM,fXe as wN,z0e as wO,Cut as wP,x4 as wQ,rK as wR,nA as wS,Yyt as wT,fmt as wU,Fv as wV,vL as wW,D1t as wX,Fje as wY,Ept as wZ,Ske as w_,Svt as wa,ql as wb,wme as wc,WF as wd,zu as we,uYe as wf,Kgt as wg,Zgt as wh,Dje as wi,Ki as wj,DYe as wk,bft as wl,Vdt as wm,ef as wn,Cfe as wo,BC as wp,Mfe as wq,O2 as wr,Hke as ws,s8e as wt,DF as wu,Tfe as wv,tFe as ww,Act as wx,$pt as wy,Cpt as wz,nTe as x,Bke as x$,Amt as x0,kb as x1,eze as x2,QOe as x3,jyt as x4,Ije as x5,adt as x6,yje as x7,ime as x8,JOe as x9,kgt as xA,Moe as xB,Xct as xC,gBe as xD,Tpt as xE,tXe as xF,Rke as xG,Nke as xH,lvt as xI,ivt as xJ,avt as xK,Smt as xL,ovt as xM,xBe as xN,_n as xO,nvt as xP,rvt as xQ,FG as xR,ggt as xS,YF as xT,UYe as xU,JBe as xV,g6 as xW,mg as xX,sXe as xY,Imt as xZ,cvt as x_,M1t as xa,dut as xb,jdt as xc,Bdt as xd,bBe as xe,a1t as xf,l1t as xg,o1t as xh,Zu as xi,iYe as xj,y6 as xk,x1t as xl,Gee as xm,$Ye as xn,Gdt as xo,Sdt as xp,LG as xq,Vee as xr,VV as xs,Ppt as xt,Tmt as xu,Zq as xv,xme as xw,Cmt as xx,Pmt as xy,dBe as xz,sae as y,ige as y0,Jlt as y1,ect as y2,REe as y3,Fft as y4,qft as y5,EOe as y6,opt as y7,Xpt as y8,Wpt as y9,amt as ya,X0t as yb,nje as yc,Tvt as yd,At as z};
