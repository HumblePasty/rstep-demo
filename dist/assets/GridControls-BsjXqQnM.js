const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./calcite-action-PlK8ZD0Y.js","./index-CW6gHi3a.js","./index-C6GyxWqK.css","./calcite-label-BRdcXbax.js","./calcite-icon-Cw-7T22D.js","./calcite-popover-DWAb9Ws9.js","./calcite-color-picker-k0Flrw0W.js","./input-message-BHkzXRKV.js","./input-number-BGKhfdvp.js","./Validation-C-kZUWUF.js","./input-j1u1wOBY.js","./progress-D7J4sG-N.js","./input-text-C1dVmlMu.js","./core-Cpfj44ZG.js","./throttle-Q4IIcG4l.js","./calcite-input-number-C6hN2kYZ.js"])))=>i.map(i=>d[i]);
import{W as X,b5 as k,aG as v,r as s,o as n,cv as ee,p as x,bV as te,br as a,ps as H,bY as ie,iK as re,k as T,aK as E,h4 as se,d6 as ne,aZ as D,w as ae,bj as q,bi as oe,h7 as V,pt as A,aq as le,iM as ce,pu as z,hr as de,iN as pe,pv as he,_ as f,bt as j,bu as ue,pw as I,bs as ge,iQ as U}from"./index-CW6gHi3a.js";import{g as me}from"./unitFormatUtils-QQRksnVf.js";import{o as ve}from"./scaleUtils-BztCJiiV.js";import{e as _e}from"./defaultUnit-B_RNAaG8.js";import{t as ye,l as be,f as we,u as fe}from"./gridUtils-BqiWj3lO.js";import{DrawGraphicTool2D as Se}from"./editingTools-DPGFqEmr.js";import{x as Ce}from"./TextOverlayItem-CiATJP0r.js";import{o as Me}from"./formatUtils-BXKfRA-p.js";import"./getDefaultUnitForView-DLBxxjqw.js";import"./SnappingVisualizer2D-CNdy8xPV.js";import"./SnappingVisualizer-Dh3bEw5v.js";import"./PointSnappingHint-CJnMJkZt.js";import"./editPlaneUtils-9-4higaK.js";import"./coordinateFormatter-BT80Cx2W.js";import"./helpMessageUtils-M95XMmyR.js";import"./helpMessageUtils3d-BHdCuKF5.js";import"./automaticLengthMeasurementUtils-OenbrVzs.js";import"./MeshTransform-BxulpmSh.js";import"./axisAngleDegrees-D9O5VfQd.js";import"./a11yUtils-38Hxkhfu.js";import"./spatialReferenceEllipsoidUtils-Cnc4a6M7.js";import"./geodesicLengthMeasurementUtils-DnvH42l8.js";import"./automaticAreaMeasurementUtils-vdQLxknc.js";import"./earcut-D9gy186-.js";import"./triangle--coZiYpH.js";import"./lineSegment-B0AUPHGc.js";import"./boundedPlane-_gM825Zl.js";import"./cimSymbolUtils-jcZ2zGAK.js";import"./GraphicManipulator-DNs9nqPK.js";import"./drawUtils-Btavg4_I.js";import"./number-DJ1nw-kS.js";let g=class extends X{constructor(e){super(e),this.center=new k,this.dynamicScaling=!0,this.majorLineColor=v.fromArray([115,115,115,1]),this.majorLineInterval=10,this.minorLineColor=v.fromArray([165,165,165,1]),this.rotateWithMap=!1,this.rotation=0,this.spacing=1,this.type="measured",this.units="miles"}};s([n()],g.prototype,"center",void 0),s([n()],g.prototype,"dynamicScaling",void 0),s([n()],g.prototype,"majorLineColor",void 0),s([n()],g.prototype,"majorLineInterval",void 0),s([n()],g.prototype,"minorLineColor",void 0),s([n()],g.prototype,"rotateWithMap",void 0),s([n()],g.prototype,"rotation",void 0),s([n()],g.prototype,"spacing",void 0),s([ee({measured:"measured"})],g.prototype,"type",void 0),s([n()],g.prototype,"units",void 0),g=s([x("esri.grids.MeasuredGrid")],g);let m=class extends te{constructor(e){super(e),this.color=new v([255,127,0,1]),this.isDecoration=!0,this.length=34,this.rotation=0,this.thickness=2,this.visible=!0}get _strokeStyle(){return this.color.toCss(!0)}render(){const{x:e,y:t,length:i,thickness:r,rotation:o}=this,c=i/2,d=`0 0 ${i} ${i}`,p=`M${c} 0 V${i} M0 ${c} H${i}`;return a("div",{classes:{"esri-box-overlay-item":!0},styles:{left:`${(e??0)-c}px`,top:`${(t??0)-c}px`,width:`${i}px`,height:`${i}px`,transform:`rotate(${o}deg)`,visibility:this.visible?"visible":"hidden"}},a("svg",{styles:{overflow:"visible"},viewbox:d},a("path",{d:p,stroke:this._strokeStyle,"stroke-width":r})))}renderCanvas(){}};s([n()],m.prototype,"color",void 0),s([n()],m.prototype,"isDecoration",void 0),s([n()],m.prototype,"length",void 0),s([n()],m.prototype,"rotation",void 0),s([n()],m.prototype,"thickness",void 0),s([n()],m.prototype,"visible",void 0),s([n()],m.prototype,"x",void 0),s([n()],m.prototype,"y",void 0),s([n({readOnly:!0})],m.prototype,"_strokeStyle",null),m=s([x("esri.views.overlay.CrosshairOverlayItem")],m);const Ie=m,K=e=>{if(e==null||isNaN(e))return 0;const t=e+180;return Math.trunc(H(t,360))},$e=e=>{let t=e;return t==null?0:(typeof t=="string"&&(t=parseInt(t,10)),isNaN(t)?0:H(Math.trunc(t),360)-180)},W=(e,t)=>{if(!e||t.length<3)return;const[i,r,o,c]=t,[d,p]=c===void 0?[1,.25]:[c,.25*c];e.majorLineColor=v.fromArray([i,r,o,d]),e.minorLineColor=v.fromArray([i,r,o,p])},B=Symbol("grid-interactivity");let l=class extends ie.EventedAccessor{constructor(e){super(e),this._drawGraphicTool=null,this._crosshairLabel=null,this._crosshairItem=null,this.snappingManager=null,this.snappingOptions=null,this.view=null,this.placementDisabled=!1,this._mostRecentlyShownGrid=null,this._sketchedVertexCount=0}initialize(){this.addHandles([re(()=>!this.displayEnabled,()=>{this.interactivePlacementState=null}),T(()=>{var e;return(e=this.view)==null?void 0:e.viewpoint},()=>{this._renderOverlays()}),T(()=>{var e;return(e=this.snappingOptions)==null?void 0:e.gridEnabled},e=>{e!=null&&this.trySetDisplayEnabled(e)}),T(()=>{var e;return(e=this.view)==null?void 0:e.grid},(e,t)=>{this._mostRecentlyShownGrid=!e&&t?t:null})])}destroy(){var e,t,i,r;this._resetGridPlacementState(),this._crosshairItem&&((t=(e=this.view)==null?void 0:e.overlay)==null||t.removeItem(this._crosshairItem),this._crosshairItem=E(this._crosshairItem)),this._crosshairLabel&&((r=(i=this.view)==null?void 0:i.overlay)==null||r.removeItem(this._crosshairLabel),this._crosshairLabel=E(this._crosshairLabel))}get displayEnabled(){var e;return!!((e=this.view)!=null&&e.grid)}get dynamicScaling(){var e;return((e=this.grid)==null?void 0:e.dynamicScaling)??!1}set dynamicScaling(e){this.grid&&(this.grid.dynamicScaling=e)}get grid(){var e;return((e=this.view)==null?void 0:e.grid)??this._mostRecentlyShownGrid}set gridColor(e){this._set("gridColor",e);const[t,i,r,o]=e.toArray();W(this.grid,[t,i,r,o/255])}get gridControlsEnabled(){return this.displayEnabled&&!this.interactivePlacementState}set interactivePlacementState(e){this._set("interactivePlacementState",e),this._resetGridPlacementState(),e&&this._startGridManipulation(e)}get majorLineInterval(){var e;return((e=this.grid)==null?void 0:e.majorLineInterval)??10}set majorLineInterval(e){this.grid&&(this.grid.majorLineInterval=e<1?1:e>15?15:e)}get rotateWithMap(){var e;return((e=this.grid)==null?void 0:e.rotateWithMap)??!1}set rotateWithMap(e){this.grid&&(this.grid.rotateWithMap=e)}get rotation(){var e;return((e=this.grid)==null?void 0:e.rotation)??-180}set rotation(e){this.grid&&(this.grid.rotation=e)}get snappingEnabled(){var e;return(this.grid&&((e=this.snappingOptions)==null?void 0:e.gridEnabled))??!1}set snappingEnabled(e){const{snappingOptions:t}=this;t&&(t.gridEnabled=e)}get spacing(){var e;return((e=this.grid)==null?void 0:e.spacing)??1}set spacing(e){this.grid&&e>0&&(this.grid.spacing=e)}get unit(){var e;return(e=this.grid)==null?void 0:e.units}set unit(e){this.grid&&(this.grid.units=e)}get gridOutOfScale(){return!this.dynamicScaling&&this._pixelsPerStride!=null&&this._pixelsPerStride<ye}get effectiveSpacingAfterDynamicScaling(){var e;return this.majorLineInterval<1||!this.dynamicScaling||!this.view||this._pixelsPerStride==null||!((e=this.grid)!=null&&e.spacing)?null:this.grid.spacing*be(this.majorLineInterval,this._pixelsPerStride,this.dynamicScaling)}get numericSpacingInputShouldBeVisible(){var e;return!!((e=this.view)!=null&&e.spatialReference)&&we(this.view.spatialReference)}get _metersPerSRUnit(){if(!(this.view&&this.displayEnabled&&this.grid&&se(this.grid.center.spatialReference,this.view.spatialReference)))return null;const e=ne(this.grid.center,this.view.spatialReference);return fe(e)}get _pixelsPerStride(){var r;if(!((r=this.view)!=null&&r.scale)||!this.displayEnabled||!this.grid||this._metersPerSRUnit==null)return null;const e=this.grid,{scale:t,spatialReference:i}=this.view;return D(e.spacing,e.units,"meters")/(this._metersPerSRUnit*ve(t,i))}get _isPlacing(){if(!this._drawGraphicTool)return!1;const e=this.interactivePlacementState;return e==="place"||e==="interactive"&&this._sketchedVertexCount===0}get _isRotating(){if(!this._drawGraphicTool)return!1;const e=this.interactivePlacementState;return e==="rotate"||e==="interactive"&&this._sketchedVertexCount===1}get _isScaling(){return this._drawGraphicTool?this.interactivePlacementState==="interactive"&&this._sketchedVertexCount===1:!1}togglePlacementState(e){this.interactivePlacementState=this.interactivePlacementState===e?null:e}trySetDisplayEnabled(e){const{view:t}=this;if(t!=null&&t.ready)if(!t.grid&&e)if(this._mostRecentlyShownGrid)t.grid=this._mostRecentlyShownGrid;else{const i=this.defaultUnit==="imperial"?"feet":"meters";t.grid=new g({units:i,center:t.center??new k,rotateWithMap:!0}),W(this.grid,[115,115,115])}else e||(t.grid=null);else ae.getLogger(this).warn("Attempting to enable grid display while view is not ready")}startPlacement(e){const{view:t,snappingManager:i}=this;if(!t)return;this._set("interactivePlacementState",e),this._sketchedVertexCount=0;const r=new Se({view:t,graphicProperties:{attributes:{[V]:V}},sketchOptions:{tooltips:{enabled:!0,visibleElements:{direction:!1,rotation:!1,totalLength:!1,elevation:!1,distance:!1,area:!1}}},geometryType:"polyline",mode:"click",snapToScene:!1,snappingManager:i,forceUniformSize:!0,centered:!1,cursor:this.interactivePlacementState==="interactive"||this.interactivePlacementState==="place"?"none":null,regularVerticesSymbol:void 0,activeVertexSymbol:Te,activeLineSymbol:N,graphicSymbol:N});this._drawGraphicTool=r,t.addAndActivateTool(r),this._renderOverlays(),this.addHandles([r.on("cursor-update",o=>this._onCursorUpdate(o)),r.on("complete",()=>this._onDrawComplete()),r.on("vertex-add",o=>this._onVertexAdd(o,e))],B)}async _startGridManipulation(e){const{view:t}=this;if(!t)return void(this.interactivePlacementState=null);const i=new CustomEvent("before-placement",{cancelable:!0});this.emit("before-placement",i),i.defaultPrevented||this.startPlacement(e)}_onCursorUpdate(e){var t;try{if(this._isPlacing){const i=e.vertices[0].coordinates;return void this._handlePlace(i)}if(this._drawGraphicTool.cursor=null,this._isRotating&&this._handleRotate(e.vertices[0].coordinates),this._isScaling){const i=(t=this._drawGraphicTool)==null?void 0:t.drawOperation.cursorVertex;this._handleScale(i)}}finally{this._renderOverlays()}}_onDrawComplete(){this._drawGraphicTool.cursor=null,this.interactivePlacementState=null}_onVertexAdd(e,t){const i=e.vertices[0].coordinates;this._isPlacing&&this._handlePlace(i),this._isRotating&&this._sketchedVertexCount>0&&this._handleRotate(i),this._isScaling&&this._sketchedVertexCount>0&&this._handleScale(A(i[0],i[1],void 0,this.view.spatialReference)),this._sketchedVertexCount++,this._drawGraphicTool.cursor=null,this._sketchedVertexCount!==2&&t==="interactive"||(this.interactivePlacementState=null),this._renderOverlays()}_handlePlace(e){const{grid:t,view:i}=this;t&&i&&(t.center=new k({x:e[0],y:e[1],spatialReference:i.spatialReference}))}_handleRotate(e){var R;const{grid:t,view:i}=this;if(!t||!i)return;(R=this._drawGraphicTool)==null||R.sketchOptions.tooltips.set("enabled",!1);const{x:r,y:o}=t.center,[c,d]=e,p=i.toScreen(t.center,{pickClosestTarget:!0}),_=p&&i.toMap(p),u=i.toScreen(A(c,d,void 0,i.spatialReference),{pickClosestTarget:!0}),b=u&&i.toMap(u),C=_?_.x:r,P=_?_.y:o,M=C-(b?b.x:c),O=P-(b?b.y:d);if(M===0&&O===0)return;const Q=Math.atan2(O,M),G=le(Q),Y=t.rotateWithMap,Z=i.viewpoint.rotation??0,J=Y?G:G-Z;t.rotation=Math.fround(J)%360}_handleScale(e){const{view:t,grid:i,_drawGraphicTool:r,interactivePlacementState:o,_metersPerSRUnit:c}=this;if(!(e&&t&&i&&r&&c))return;r.sketchOptions.tooltips.enabled=!1;const d=o==="interactive"?i.center:r.drawOperation.firstVertex;if(!d||!e)return;const p=t==null?void 0:t.toScreen(d),_=p&&t.toMap(p),u=t==null?void 0:t.toScreen(e),b=_??d,C=(u&&t.toMap(u))??e,P=Math.sqrt((b.x-C.x)**2+(b.y-C.y)**2),M=D(P*c,"meters",i.units);this.spacing=M}_renderOverlays(){this._renderCrosshairOverlay(),this._renderTextOverlay()}_renderTextOverlay(){const{grid:e,view:t,_drawGraphicTool:i}=this,r=this._getCrosshairLabel();if(!(e&&(t!=null&&t.overlay)&&i&&r))return;const o=t.toScreen(e.center,{pickClosestTarget:!0});o&&(r.position=[o.x+12,o.y+12]),this._isRotating?(r.text=`${K(e.rotation)}${Me}`,r.visible=!0):r.visible=!1}_renderCrosshairOverlay(){const{grid:e,view:t,_drawGraphicTool:i}=this;if(!e||!(t!=null&&t.overlay)||!i)return;const r=this._getCrosshair();if(!r)return;const o=t.toScreen(e.center);o&&(r.x=o.x,r.y=o.y,r.rotation=e.rotateWithMap?t.viewpoint.rotation-e.rotation:-e.rotation,r.visible=!!i)}_getCrosshairLabel(){if(this._crosshairLabel)return this._crosshairLabel;const{grid:e,view:t,_drawGraphicTool:i}=this;if(!e||!(t!=null&&t.overlay)||!i)return null;const r=new Ce({anchor:"top-left",fontSize:10,textColor:new v([21,21,21]),backgroundColor:new v([248,248,248]),padding:8,borderRadius:20});return t.overlay.addItem(r),this._crosshairLabel=r,r}_getCrosshair(){var i;const{_crosshairItem:e,view:t}=this;return t!=null&&t.overlay?e&&t.overlay.items.includes(e)?e:(this._crosshairItem=new Ie({color:t.effectiveTheme.accentColor,thickness:4,length:36,visible:!0}),(i=t.overlay)==null||i.addItem(this._crosshairItem),this._crosshairItem):null}_resetGridPlacementState(){var e,t;this.removeHandles(B),this._crosshairItem&&(this._crosshairItem.visible=!1),this._crosshairLabel&&(this._crosshairLabel.visible=!1),this._drawGraphicTool&&(((e=this.view)==null?void 0:e.activeTool)===this._drawGraphicTool&&(this.view.activeTool=null),(t=this.view)==null||t.tools.remove(this._drawGraphicTool)),this._drawGraphicTool=E(this._drawGraphicTool)}};s([n(_e)],l.prototype,"defaultUnit",void 0),s([n({readOnly:!0})],l.prototype,"displayEnabled",null),s([n()],l.prototype,"dynamicScaling",null),s([n()],l.prototype,"grid",null),s([n()],l.prototype,"gridColor",null),s([n({readOnly:!0})],l.prototype,"gridControlsEnabled",null),s([n()],l.prototype,"interactivePlacementState",null),s([n()],l.prototype,"majorLineInterval",null),s([n()],l.prototype,"rotateWithMap",null),s([n()],l.prototype,"rotation",null),s([n()],l.prototype,"snappingEnabled",null),s([n()],l.prototype,"snappingManager",void 0),s([n()],l.prototype,"snappingOptions",void 0),s([n()],l.prototype,"spacing",null),s([n()],l.prototype,"unit",null),s([n()],l.prototype,"view",void 0),s([n({readOnly:!0})],l.prototype,"gridOutOfScale",null),s([n({readOnly:!0})],l.prototype,"effectiveSpacingAfterDynamicScaling",null),s([n({readOnly:!0})],l.prototype,"numericSpacingInputShouldBeVisible",null),s([n()],l.prototype,"placementDisabled",void 0),s([n()],l.prototype,"_metersPerSRUnit",null),s([n()],l.prototype,"_pixelsPerStride",null),s([n()],l.prototype,"_isPlacing",null),s([n()],l.prototype,"_isRotating",null),s([n()],l.prototype,"_isScaling",null),s([n()],l.prototype,"_mostRecentlyShownGrid",void 0),s([n()],l.prototype,"_sketchedVertexCount",void 0),l=s([x("esri.widgets.support.GridControls.GridControlsViewModel")],l);const F=l,N=new q({width:0}),Te=new oe({color:v.fromArray([0,0,0,0]),outline:new q({color:v.fromArray([0,0,0,0])})}),w="esri-grid-controls",y={base:w,borderedSwitch:`${w}__switch--bordered`,container:`${w}__container`,numericInputsContainer:`${w}__numeric-inputs__container`,tilegroup:`${w}__tilegroup`,tile:`${w}__tile`,tileDisabled:`${w}__tile--disabled`,tileContent:`${w}__tile__content`,suffixedInputContainer:`${w}__input-with-suffix__container`,inlineIcon:`${w}__inline-icon`},S={widgetIcon:"grid-unit",gridTheme:{light:"circle",dark:"circle-area",custom:"palette"},placementState:{interactive:"maximum-territory-distance",place:"move",rotate:"rotate"},warning:"exclamation-mark-triangle"},$=v.fromArray([115,115,115]),L=v.fromArray([200,200,200]),xe=["interactive","place","rotate"];let h=class extends ce{constructor(e,t){super(e,t),this.customColor=null,this.messages=null,this.messagesUnits=null,this.viewModel=new F,this.visibleElements=new z}initialize(){this.addHandles([T(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.grid)==null?void 0:t.majorLineColor},e=>{!e||$.equals(e)||L.equals(e)||(this.customColor=e)},de)])}loadDependencies(){return Promise.all([pe({action:()=>f(()=>import("./calcite-action-PlK8ZD0Y.js"),__vite__mapDeps([0,1,2]),import.meta.url),"action-bar":()=>f(()=>import("./index-CW6gHi3a.js").then(e=>e.Aj),__vite__mapDeps([1,2]),import.meta.url),label:()=>f(()=>import("./calcite-label-BRdcXbax.js"),__vite__mapDeps([3,1,2]),import.meta.url),icon:()=>f(()=>import("./calcite-icon-Cw-7T22D.js"),__vite__mapDeps([4,1,2]),import.meta.url),popover:()=>f(()=>import("./calcite-popover-DWAb9Ws9.js"),__vite__mapDeps([5,1,2]),import.meta.url),tooltip:()=>f(()=>import("./index-CW6gHi3a.js").then(e=>e.Ak),__vite__mapDeps([1,2]),import.meta.url),"color-picker":()=>f(()=>import("./calcite-color-picker-k0Flrw0W.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14]),import.meta.url),"input-number":()=>f(()=>import("./calcite-input-number-C6hN2kYZ.js"),__vite__mapDeps([15,8,1,2,9,10,7,11]),import.meta.url)}),he()])}get icon(){return S.widgetIcon}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages.widgetLabel}set label(e){this._overrideIfSome("label",e)}get snappingManager(){return this.viewModel.snappingManager}set snappingManager(e){this.viewModel.snappingManager=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get theme(){var t;const e=(t=this.viewModel.grid)==null?void 0:t.majorLineColor;return e?$.equals(e)?"dark":L.equals(e)?"light":"custom":null}set theme(e){const{viewModel:t,customColor:i,view:r}=this;switch(e){case"light":t.gridColor=L;break;case"dark":t.gridColor=$;break;case"custom":t.gridColor=i??(r==null?void 0:r.effectiveTheme.accentColor)??$}}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return a("div",{"aria-label":this.label,class:this.classes(y.base,j.widget,j.panel)},a("div",{class:y.container},this._renderContent()))}_renderContent(){const{visibleElements:e}=this;return[e.gridEnabledToggle?this._renderEnabledToggle():null,e.placementButtons?this._renderGridPlacementButtons():null,e.numericInputs?this._renderNumericInputs():null,e.lineIntervalInput?this._renderIntervalInput():null,e.gridSnapEnabledToggle&&this.viewModel.snappingOptions?this._renderSnappingToggle():null,e.dynamicScaleToggle?this._renderDynamicScaleToggle():null,e.rotateWithMapToggle?this._renderRotateToggle():null,e.colorSelection?this._renderColorSelection():null]}_renderGridPlacementButtons(){const{interactivePlacementState:e,placementDisabled:t,gridControlsEnabled:i}=this.viewModel,r=t||!i;return a("calcite-label",{key:"grid-placement-buttons",scale:"s"},this.messages.placementOptions,a("calcite-action-bar",{expandDisabled:!0,layout:"horizontal"},xe.map(o=>this._renderPlacementModeButton(o,r,e))))}_renderPlacementModeButton(e,t,i){const r=this.messages.placementState[e],o=`__placement-action-${e}`;return a("div",null,a("calcite-action",{active:i===e,alignment:"center",disabled:t,icon:S.placementState[e],id:o,onclick:()=>this.viewModel.togglePlacementState(e),text:r}),a("calcite-tooltip",{placement:"top",referenceElement:o},r))}_renderNumericInputs(){const{rotation:e,spacing:t,effectiveSpacingAfterDynamicScaling:i,numericSpacingInputShouldBeVisible:r,unit:o="meters"}=this.viewModel,c=this.messagesUnits.units[o].abbr,d=this.viewModel.gridControlsEnabled,p=i!=null&&i!==this.viewModel.spacing,_=`__spacing_input_scaled-${this.id}`;return a("div",{class:this.classes(y.numericInputsContainer)},[r?a("calcite-label",{key:"spacing-label",scale:"s"},a("span",null,this.messages.inputLabel.spacing,p?a("calcite-icon",{class:this.classes(y.inlineIcon),icon:S.warning,id:_,scale:"s",tabIndex:0}):void 0),a("div",{class:y.suffixedInputContainer},a("calcite-input-number",{disabled:!d,numberButtonType:"none",suffixText:c,value:`${t==null?void 0:t.toFixed(2)}`,onCalciteInputNumberChange:({target:u})=>{const b=parseFloat(u.value);this.viewModel.spacing=b,b!==this.viewModel.spacing&&(u.value=`${this.viewModel.spacing}`)}}),p?a("calcite-tooltip",{overlayPositioning:"fixed",placement:"leading",referenceElement:_},ue(this.messages.warnings.dynamicSpacing,{actualSpacingIncludingUnit:me(this.messagesUnits,i,o,2,"plural")})):void 0)):void 0,a("calcite-label",{key:"angle-label",scale:"s"},this.messages.inputLabel.angle,a("calcite-input-number",{disabled:!d,integer:!0,numberButtonType:"none",suffixText:this.messagesUnits.units.degrees.abbr,value:`${K(e)}`,onCalciteInputNumberChange:({target:u})=>this.viewModel.rotation=$e(u.value)}))])}_renderIntervalInput(){const{majorLineInterval:e,gridControlsEnabled:t}=this.viewModel;return a("div",{class:this.classes(y.numericInputsContainer)},a("calcite-label",{scale:"s"},this.messages.inputLabel.interval,a("calcite-input-number",{disabled:!t,integer:!0,max:15,min:1,numberButtonType:"vertical",value:`${e}`,onCalciteInputNumberChange:({target:i})=>{const r=Number.parseInt(i.value,10);this.viewModel.majorLineInterval=r,r!==this.viewModel.majorLineInterval&&(i.value=`${this.viewModel.majorLineInterval}`)}})))}_renderSnappingToggle(){const{snappingOptions:e,gridControlsEnabled:t}=this.viewModel;return a(I,{checked:!!((e==null?void 0:e.gridEnabled)??!1),disabled:!(t&&e),key:"grid-snap-enabled-toggle",label:this.messages.switchLabel.snap,onChange:i=>{var r;return(r=this.viewModel.snappingOptions)==null?void 0:r.set("gridEnabled",i)}})}_renderDynamicScaleToggle(){const{viewModel:e,messages:t}=this,i=this.visibleElements.outOfScaleWarning&&e.gridOutOfScale;return a(I,{checked:e.dynamicScaling,disabled:!e.gridControlsEnabled,hint:i?t.warnings.outOfScale:void 0,hintIcon:S.warning,hintKind:"warning",key:`grid-dynamic-scale-toggle-${this.id}`,label:t.switchLabel.scaling,onChange:r=>e.dynamicScaling=r})}_renderRotateToggle(){const{gridControlsEnabled:e,rotateWithMap:t}=this.viewModel;return a(I,{checked:t,disabled:!e,key:"grid-rotate-map-toggle",label:this.messages.switchLabel.rotateWithMap,onChange:i=>this.viewModel.rotateWithMap=i})}_renderEnabledToggle(){return a("div",{class:y.borderedSwitch},a(I,{checked:this.viewModel.displayEnabled,disabled:!!this.viewModel.interactivePlacementState,key:"grid-enabled-toggle",label:this.messages.switchLabel.display,onChange:e=>this.viewModel.trySetDisplayEnabled(e)}))}_renderColorSelection(){const{customColor:e}=this,t=`${this.id}--custom-grid-color-button`;return a("calcite-label",{scale:"s"},this.messages.inputLabel.theme,a("div",{class:y.tilegroup},[this._renderThemeTile({value:"dark"}),this._renderThemeTile({value:"light"}),this._renderThemeTile({value:"custom",id:t}),a("calcite-popover",{autoClose:!0,label:this.messages.gridLineColorPopoverLabel,overlayPositioning:"fixed",referenceElement:t},a("calcite-color-picker",{alphaChannel:!0,savedDisabled:!0,value:(e==null?void 0:e.toHex({digits:8}))??"#000000ff",onCalciteColorPickerChange:i=>{const r=v.fromHex(i.target.value);r&&(this.customColor=r,this.theme="custom")}}))]))}_renderThemeTile(e){const{theme:t}=this,{value:i}=e,r=this.messages.gridTheme[i],o=`${this.id}--theme_tile_${i}`,c=`${o}__label`,d=S.gridTheme[i],p=this.viewModel.gridControlsEnabled;return a("div",{class:ge({[y.tile]:!0,[y.tileDisabled]:!p}),id:e.id,role:"button"},a("input",{"aria-labelledby":c,checked:t===i,disabled:!p,id:o,name:`${this.id}--theme`,onchange:_=>{var u;this.theme=i,(u=_.target)==null||u.focus()},tabIndex:0,type:"radio"}),a("div",{class:y.tileContent},a("calcite-icon",{icon:d,scale:"l"}),a("calcite-label",{for:o,id:c},r)))}};s([n()],h.prototype,"customColor",void 0),s([n()],h.prototype,"icon",null),s([n()],h.prototype,"label",null),s([n(),U("esri/widgets/support/GridControls/t9n/GridControls")],h.prototype,"messages",void 0),s([n(),U("esri/core/t9n/Units")],h.prototype,"messagesUnits",void 0),s([n()],h.prototype,"snappingManager",null),s([n()],h.prototype,"snappingOptions",null),s([n()],h.prototype,"theme",null),s([n()],h.prototype,"view",null),s([n({type:F})],h.prototype,"viewModel",void 0),s([n({type:z,nonNullable:!0})],h.prototype,"visibleElements",void 0),h=s([x("esri.widgets.support.GridControls")],h);const at=h;export{at as default};
